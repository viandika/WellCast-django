!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):e._hyperscript=t()}("undefined"!=typeof self?self:this,function(){"use strict";function E(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function c(e,t){var n=e[t];if(n)return n;n={};return e[t]=n}function t(t){try{return JSON.parse(t)}catch(e){return t=e,console.error?console.error(t):console.log&&console.log("ERROR: ",t),null}}function o(e,t){return new(e.bind.apply(e,[e].concat(t)))}var v,u="undefined"!=typeof self?self:"undefined"!=typeof global?global:this,i=(v={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS"},{tokenize:function(e,t){var n,r=[],a=e,i=0,o=0,s=1,l="<START>",c=0;function u(){return t&&0===c}for(;i<a.length;)if("-"===h()&&"-"===m())!function(){for(;h()&&!_(h());)g();g()}();else if(b(h()))r.push(function(){var e=d("WHITESPACE"),t="";for(;h()&&b(h());)_(h())&&(o=0,s++),t+=g();return e.value=t,e.end=i,e}());else if(y()||"."!==h()||!T(m())&&"{"!==m())if(y()||"#"!==h()||!T(m())&&"{"!==m())if("["===h()&&"@"===m())r.push(function(){var e=d("ATTRIBUTE_REF"),t=g();for(;i<a.length&&"]"!==h();)t+=g();"]"===h()&&(t+=g());return e.value=t,e.end=i,e}());else if("@"===h())r.push(function(){var e=d("ATTRIBUTE_REF"),t=g();for(;x(h());)t+=g();return e.value=t,e.end=i,e}());else if(T(h())||!u()&&M(h()))r.push(function(){var e=d("IDENTIFIER"),t=g();for(;T(h())||M(h());)t+=g();return e.value=t,e.end=i,e}());else if(w(h()))r.push(function(){var e=d("NUMBER"),t=g();for(;w(h());)t+=g();"."===h()&&w(m())&&(t+=g());for(;w(h());)t+=g();return e.value=t,e.end=i,e}());else if(u()||'"'!==h()&&"`"!==h())if(u()||"'"!==h()){if(v[h()])"$"===l&&"{"===h()&&c++,"}"===h()&&c--,r.push(f());else if(u()||("`"===(n=h())||"^"===n))r.push(d("RESERVED",g()));else if(i<a.length)throw Error("Unknown token: "+h()+" ")}else!function(e){if(0<e.length){e=e[e.length-1];if("IDENTIFIER"===e.type||"CLASS_REF"===e.type||"ID_REF"===e.type)return;if(e.op&&(">"===e.value||")"===e.value))return}return 1}(r)?r.push(f()):r.push(p());else r.push(p());else r.push(function(){var e=d("ID_REF"),t=g();if("{"===h()){for(e.template=!0,t+=g();h()&&"}"!==h();)t+=g();if("}"!==h())throw Error("Unterminated id reference");g()}else for(;x(h());)t+=g();return e.value=t,e.end=i,e}());else r.push(function(){var e=d("CLASS_REF"),t=g();if("{"===h()){for(e.template=!0,t+=g();h()&&"}"!==h();)t+=g();if("}"!==h())throw Error("Unterminated class reference");t+=g()}else for(;function(e){return T(e)||w(e)||"-"===e||"_"===e||":"===e}(h());)t+=g();return e.value=t,e.end=i,e}());return k(r,[],a);function d(e,t){return{type:e,value:t,start:i,end:i+1,column:o,line:s}}function f(){for(var e,t,t=((t=d(e,t)).op=!0,t),n=g();h()&&v[n+h()];)n+=g();return t.type=v[n],t.value=n,t.end=i,t}function p(){for(var e=d("STRING"),t=g(),n="";h()&&h()!==t;)"\\"===h()&&g(),n+=g();if(h()!==t)throw Error("Unterminated string at "+("[Line: "+e.line+", Column: "+e.col+"]"));return g(),e.value=n,e.end=i,e.template="`"===t,e}function h(){return a.charAt(i)}function m(){return a.charAt(i+1)}function g(){return l=h(),i++,o++,l}function y(){return T(l)||w(l)||")"===l||"}"===l||"]"===l}},makeTokensObject:k});function x(e){return T(e)||w(e)||"-"===e||"_"===e||":"===e}function b(e){return" "===e||"\t"===e||_(e)}function _(e){return"\r"===e||"\n"===e}function w(e){return"0"<=e&&e<="9"}function T(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"}function M(e){return"_"===e||"$"===e}function k(i,o,e){s();var t=null;function s(){for(;"WHITESPACE"===f(0,!0).type;)o.push(i.shift())}function a(e,t){A.raiseParseError(e,t)}function l(e){if(p()&&p().op&&p().value===e)return d()}function c(e,t,n,r){if(p()&&p().type&&0<=[e,t,n,r].indexOf(p().type))return d()}function u(e,t){if(-1===r.indexOf(e)){t=t||"IDENTIFIER";return p()&&p().value===e&&p().type===t?d():void 0}}function d(){var e=i.shift();return o.push(e),t=e,s(),e}function n(e,t){for(var n=[],r=f(0,!0);!(null!=t&&r.type===t||null!=e&&r.value===e||"EOF"===r.type);){var a=i.shift();o.push(a),n.push(r),r=f(0,!0)}return s(),n}function f(e,t){var n,r=0;do{if(!t)for(;i[r]&&"WHITESPACE"===i[r].type;)r++}while(n=i[r],r++,-1<--e);return n||{type:"EOF",value:"<<<EOF>>>"}}function p(){return f(0)}var r=[];return{pushFollow:function(e){r.push(e)},popFollow:function(){r.pop()},clearFollow:function(){var e=r;return r=[],e},restoreFollow:function(e){r=e},matchAnyToken:function(e,t,n){for(var r=0;r<arguments.length;r++){var a=u(arguments[r]);if(a)return a}},matchAnyOpToken:function(e,t,n){for(var r=0;r<arguments.length;r++){var a=l(arguments[r]);if(a)return a}},matchOpToken:l,requireOpToken:function(e){var t=l(e);if(t)return t;a(this,"Expected '"+e+"' but found '"+p().value+"'")},matchTokenType:c,requireTokenType:function(e,t,n,r){if(r=c(e,t,n,r))return r;a(this,"Expected one of "+JSON.stringify([e,t,n]))},consumeToken:d,matchToken:u,requireToken:function(e,t){if(t=u(e,t))return t;a(this,"Expected '"+e+"' but found '"+p().value+"'")},list:i,consumed:o,source:e,hasMore:function(){return 0<i.length},currentToken:p,lastMatch:function(){return t},token:f,consumeUntil:n,consumeUntilWhitespace:function(){return n(null,"WHITESPACE")},lastWhitespace:function(){return o[o.length-1]&&"WHITESPACE"===o[o.length-1].type?o[o.length-1].value:""},sourceFor:function(){return e.substring(this.startToken.start,this.endToken.end)},lineFor:function(){return e.split("\n")[this.startToken.line-1]}}}var s,l,d,a,f,A=(s={},l={},d={},a=[],f=[],n("feature",function(e,t,n){if(n.matchOpToken("(")){var r=e.requireElement("feature",n);return n.requireOpToken(")"),r}r=d[n.currentToken().value];if(r)return r(e,t,n)}),n("command",function(e,t,n){if(n.matchOpToken("(")){var r=e.requireElement("command",n);return n.requireOpToken(")"),r}var a=l[n.currentToken().value];return a?r=a(e,t,n):"IDENTIFIER"===n.currentToken().type&&"("===n.token(1).value&&(r=e.requireElement("pseudoCommand",n)),r&&e.parseElement("indirectStatement",n,r)}),n("commandList",function(e,t,n){var r=e.parseElement("command",n);if(r)return n.matchToken("then"),r.next=e.parseElement("commandList",n),r}),n("leaf",function(e,t,n){var r=m(a,n);return null==r?h("symbol",n):r}),n("indirectExpression",function(e,t,n,r){for(var a=0;a<f.length;a++){var i=f[a];r.endToken=n.lastMatch();i=e.parseElement(i,n,r);if(i)return i}return r}),n("indirectStatement",function(e,t,n,r){if(n.matchToken("unless")){r.endToken=n.lastMatch();n={type:"unlessStatementModifier",args:[e.requireElement("expression",n)],op:function(e,t){return t?this.next:r},execute:function(e){return t.unifiedExec(this,e)}};return r.parent=n}return r}),n("primaryExpression",function(e,t,n){var r=e.parseElement("leaf",n);if(r)return e.parseElement("indirectExpression",n,r);e.raiseParseError(n,"Unexpected value: "+n.currentToken().value)}),{setParent:function e(t,n){t&&(t.parent=n,e(t.next,n))},requireElement:r,parseElement:h,featureStart:S,commandStart:y,commandBoundary:function(e){if("end"==e.value||"then"==e.value||"else"==e.value||")"==e.value||y(e)||S(e)||"EOF"==e.type)return!0},parseAnyOf:m,parseHyperScript:function(e){var t=h("hyperscript",e);return e.hasMore()&&g(e),t},raiseParseError:g,addGrammarElement:n,addCommand:function(e,a){function t(e,t,n){var r=a(e,t,n);if(r)return r.type=i,r.execute=function(e){return e.meta.command=r,t.unifiedExec(this,e)},r}var i=e+"Command";s[i]=t,l[e]=t},addFeature:function(r,a){function e(e,t,n){if(n=a(e,t,n))return n.keyword=r,n.type=i,n}var i=r+"Feature";s[i]=e,d[r]=e},addLeafExpression:function(e,t){a.push(e),n(e,t)},addIndirectExpression:function(e,t){f.push(e),n(e,t)},parseStringTemplate:function(e){var t,n=[""];do{}while(n.push(e.lastWhitespace()),"$"===e.currentToken().value?(e.consumeToken(),t=e.matchOpToken("{"),n.push(r("expression",e)),t&&e.requireOpToken("}"),n.push("")):"\\"===e.currentToken().value?(e.consumeToken(),e.consumeToken()):(t=e.consumeToken(),n[n.length-1]+=t?t.value:""),e.hasMore());return n.push(e.lastWhitespace()),n}});function p(e,t,n){e.startToken=t,e.sourceFor=n.sourceFor,e.lineFor=n.lineFor,e.programSource=n.source}function h(e,t,n){e=s[e];if(e){var r=t.currentToken(),e=e(A,O,t,n);if(e){p(e,r,t),e.endToken=e.endToken||t.lastMatch();for(n=e.root;null!=n;)p(n,r,t),n=n.root}return e}}function r(e,t,n,r){return h(e,t,r)||g(t,n||"Expected "+e)}function m(e,t){for(var n=0;n<e.length;n++){var r=h(e[n],t);if(r)return r}}function n(e,t){s[e]=t}function g(e,t){var n,r;t=(t||"Unexpected Token : "+e.currentToken().value)+"\n\n"+(r=(n=e).currentToken(),n=(n=n.source.split("\n"))[r&&r.line?r.line-1:n.length-1],r=r&&r.line?r.column:n.length-1,n+"\n"+" ".repeat(r)+"^^\n\n");t=new Error(t);throw t.tokens=e,t}function y(e){return l[e.value]}function S(e){return d[e.value]}var L,C,e,D={dynamicResolvers:[],String:function(e){return e.toString?e.toString():""+e},Int:function(e){return parseInt(e)},Float:function(e){return parseFloat(e)},Number:function(e){return console.log(e),Number(e)},Date:function(e){return Date(e)},Array:function(e){return Array.from(e)},JSON:function(e){return JSON.stringify(e)},Object:function(e){return"string"==typeof(e=e instanceof String?e.toString():e)?JSON.parse(e):E({},e)}},O=(L={array_sentinel:!0},C={halt_flag:!0},e=null,{typeCheck:function(e,t,n){return!(null!=e||!n)||Object.prototype.toString.call(e).slice(8,-1)===t},forEach:N,triggerEvent:I,matchesSelector:P,getScript:B,processNode:function(e){var t=O.getScriptSelector();P(e,t)&&Y(e,e),"text/hyperscript"===e.type&&Y(e,document.body),e.querySelectorAll&&N(e.querySelectorAll(t+", [type='text/hyperscript']"),function(e){Y(e,"text/hyperscript"===e.type?document.body:e)})},evaluate:function(e,t){return t=E(q(document.body,null,document.body,null),t||{}),(e=U(e)).execute?e.execute(t):e.apply?void e.apply(document.body,null):e.evaluate(t)},parse:U,getScriptSelector:function(){return H().map(function(e){return"["+e+"]"}).join(", ")},resolveSymbol:function(e,t,n){if("me"===e||"my"===e||"I"===e)return t.me;if("it"===e||"its"===e)return t.result;if("you"===e||"your"===e||"yourself"===e)return t.beingTold;if("global"===n)return u[e];if("element"===n)return G(t)[e];if("local"===n)return t[e];if(t.meta&&t.meta.context){var r=t.meta.context[e];if(void 0!==r)return r}return void 0!==(r=t[e])||void 0!==(r=G(t)[e])?r:u[e]},setSymbol:function(e,t,n,r){var a;"global"===n?u[e]=r:"element"===n?(a=G(t))[e]=r:"local"===n||void 0!==t[e]?t[e]=r:void 0!==(a=G(t))[e]?a[e]=r:void 0!==u[e]?u[e]=r:t[e]=r},makeContext:q,findNext:function e(t,n){if(t)return t.resolveNext?t.resolveNext(n):t.next||e(t.parent,n)},unifiedEval:j,convertValue:function(e,t){for(var n=D.dynamicResolvers,r=0;r<n.length;r++){var a=(0,n[r])(t,e);if(void 0!==a)return a}if(null==e)return null;var i=D[t];if(i)return i(e);throw"Unknown conversion : "+t},unifiedExec:F,resolveProperty:function(e,t,n){if(null!=e){var r=n&&e.getAttribute?e.getAttribute(t):e[t];if(void 0!==r)return r;if(R(e)){for(var a=[],i=0;i<e.length;i++){var o=e[i],o=n?o.getAttribute(t):o[t];o&&a.push(o)}return a}}},assignToNamespace:function(e,t,n,r){var a;for("undefined"==typeof document||e===document.body?a=u:null==(a=e.hyperscriptFeatures)&&(e.hyperscriptFeatures=a={});0<t.length;){var i=t.shift(),o=a[i];null==o&&(a[i]=o={}),a=o}a[n]=r},registerHyperTrace:function(e,t){for(var n,a=[],r=null;null!=e;)a.push(e),e=(r=e).meta.caller;null==r.meta.traceMap&&(r.meta.traceMap=new Map),r.meta.traceMap.get(t)||(n={trace:a,print:function(e){(e=e||console.error)("hypertrace /// ");for(var t=0,n=0;n<a.length;n++)t=Math.max(t,a[n].meta.feature.displayName.length);for(n=0;n<a.length;n++){var r=a[n];e("  ->",r.meta.feature.displayName.padEnd(t+2),"-",r.meta.owner)}}},r.meta.traceMap.set(t,n))},getHyperTrace:function(e,t){for(var n=e;n.meta.caller;)n=n.meta.caller;if(n.meta.traceMap)return n.meta.traceMap.get(t,[])},getInternalData:V,escapeSelector:function(e){return e.replace(/:/g,function(e){return"\\"+e})},nullCheck:function(e,t){if(null==e)throw new Error(t.sourceFor()+" is null")},isEmpty:function(e){return null==e||0===e.length},getRootNode:function(e){var t=e.getRootNode();return t=!(e instanceof Document||e instanceof ShadowRoot)?document:t},hyperscriptUrl:"document"in u?document.currentScript.src:null,HALT:C});function P(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function I(e,t,n){(n=n||{}).sentBy=e;var r,r=(t=t,n=n,window.CustomEvent&&"function"==typeof window.CustomEvent?r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),r);return e.dispatchEvent(r)}function R(e){return Array.isArray(e)||e instanceof NodeList}function N(e,t){if(null!=e)if(R(e))for(var n=0;n<e.length;n++)t(e[n]);else t(e)}function z(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.asyncWrapper&&(e[t]=n.value),Array.isArray(n))for(var r=0;r<n.length;r++){var a=n[r];a.asyncWrapper&&(n[r]=a.value)}}}function F(t,n){for(;;){try{var r=j(t,n)}catch(e){if(O.registerHyperTrace(n,e),n.meta.errorHandler&&!n.meta.handlingError){n.meta.handlingError=!0,n[n.meta.errorSymmbol]=e,t=n.meta.errorHandler;continue}if(!n.meta.reject)throw e;n.meta.reject(e),r=C}if(null==r)return void console.error(t," did not return a next element to execute! context: ",n);if(r.then)return void r.then(function(e){F(e,n)}).catch(function(e){if(O.registerHyperTrace(n,e),n.meta.errorHandler&&!n.meta.handlingError)n.meta.handlingError=!0,n[n.meta.errorSymmbol]=e,F(n.meta.errorHandler,n);else{if(!n.meta.reject)throw e;n.meta.reject(e)}});if(r===C)return;t=r}}function j(a,t){var i=[t],e=!1,o=!1;if(a.args)for(var n=0;n<a.args.length;n++){var r=a.args[n];if(null==r)i.push(null);else if(Array.isArray(r)){for(var s=[],l=0;l<r.length;l++){var c,u=r[l];(c=u?u.evaluate(t):null)&&(c.then?e=!0:c.asyncWrapper&&(o=!0)),s.push(c)}i.push(s)}else r.evaluate?((c=r.evaluate(t))&&(c.then?e=!0:c.asyncWrapper&&(o=!0)),i.push(c)):i.push(r)}return e?new Promise(function(n,r){var e=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r)){t.push(L);for(var a=0;a<r.length;a++)t.push(r[a]);t.push(L)}else t.push(r)}return t}(i);Promise.all(e).then(function(e){e=function(e){for(var t=[],n=0;n<e.length;n++)if((r=e[n])===L){var r=e[++n],a=[];for(t.push(a);r!==L;)a.push(r),r=e[++n]}else t.push(r);return t}(e),o&&z(e);try{var t=a.op.apply(a,e);n(t)}catch(e){r(e)}}).catch(function(e){t.meta.errorHandler&&!t.meta.handlingError?(t.meta.handlingError=!0,t[t.meta.errorSymmbol]=e,F(t.meta.errorHandler,t)):t.meta.reject&&t.meta.reject(e)})}):(o&&z(i),a.op.apply(a,i))}function H(){return e=null==e?_hyperscript.config.attributes.replace(/ /g,"").split(","):e}function B(e){for(var t=0;t<H().length;t++){var n=H()[t];if(e.hasAttribute&&e.hasAttribute(n))return e.getAttribute(n)}return"text/hyperscript"===e.type?e.innerText:null}function q(e,t,n,r){r={meta:{parser:A,lexer:i,runtime:O,owner:e,feature:t,iterators:{}},me:n,event:r,target:r?r.target:null,detail:r?r.detail:null,body:"document"in u?document.body:null};return function e(t,n){t&&(t.hyperscriptFeatures&&E(n,t.hyperscriptFeatures),e(t.parentElement,n))}(e,r.meta.ctx=r),r}function U(e){var t=i.tokenize(e);if(A.commandStart(t.currentToken())){for(var e=A.parseElement("commandList",t),n=e;n.next;)n=n.next;return n.next={op:function(){return C}},e}return A.featureStart(t.currentToken())?A.parseElement("hyperscript",t):A.parseElement("expression",t)}function Y(t,e){if(!t.closest||!t.closest(_hyperscript.config.disableSelector)){var n=V(t);if(!n.initialized){var r=B(t);if(r)try{n.initialized=!0,n.script=r;var a=i.tokenize(r);A.parseHyperScript(a).apply(e||t,t),setTimeout(function(){I(e||t,"load",{hyperscript:!0})},1)}catch(e){O.triggerEvent(t,"exception",{error:e}),console.error("hyperscript errors were found on the following element:",t,"\n\n",e.message,e.stack)}}}}function V(e){var t="hyperscript-internal-data";return e[t]||(e[t]={})}function G(e){var t=e.meta.owner;if(t){var n="elementScope";return c(V(t),n=e.meta.feature&&e.meta.feature.behavior?e.meta.feature.behavior+"Scope":n)}return{}}A.addLeafExpression("parenthesized",function(e,t,n){if(n.matchOpToken("(")){var r=n.clearFollow();try{var a=e.requireElement("expression",n)}finally{n.restoreFollow(r)}return n.requireOpToken(")"),a}}),A.addLeafExpression("string",function(e,t,n){n=n.matchTokenType("STRING");if(n){var r,a=n.value;return{type:"string",token:n,args:r=n.template?(n=i.tokenize(a,!0),e.parseStringTemplate(n)):[],op:function(e){for(var t="",n=1;n<arguments.length;n++){var r=arguments[n];void 0!==r&&(t+=r)}return t},evaluate:function(e){return 0===r.length?a:t.unifiedEval(this,e)}}}}),A.addGrammarElement("nakedString",function(e,t,n){if(n.hasMore()){var r=n.consumeUntilWhitespace();return n.matchTokenType("WHITESPACE"),{type:"nakedString",tokens:r,evaluate:function(e){return r.map(function(e){return e.value}).join("")}}}}),A.addLeafExpression("number",function(e,t,n){var r=n.matchTokenType("NUMBER");if(r){var n=r,a=parseFloat(r.value);return{type:"number",value:a,numberToken:n,evaluate:function(){return a}}}}),A.addLeafExpression("idRef",function(e,n,t){var r=t.matchTokenType("ID_REF");if(r){if(r.template){t=r.value.substr(2,r.value.length-2),t=i.tokenize(t);return{type:"idRefTemplate",args:[e.requireElement("expression",t)],op:function(e,t){return n.getRootNode(e.me).getElementById(t)},evaluate:function(e){return n.unifiedEval(this,e)}}}return{type:"idRef",css:r.value,value:r.value.substr(1),evaluate:function(e){return n.getRootNode(e.me).getElementById(this.value)}}}}),A.addLeafExpression("classRef",function(e,n,t){var r=t.matchTokenType("CLASS_REF");if(r){if(r.template){t=r.value.substr(2,r.value.length-2),t=i.tokenize(t);return{type:"classRefTemplate",args:[e.requireElement("expression",t)],op:function(e,t){return n.getRootNode(e.me).querySelectorAll(n.escapeSelector("."+t))},evaluate:function(e){return n.unifiedEval(this,e)}}}return{type:"classRef",css:r.value,className:function(){return this.css.substr(1)},evaluate:function(e){return n.getRootNode(e.me).querySelectorAll(n.escapeSelector(this.css))}}}}),A.addLeafExpression("queryRef",function(e,o,t){if(t.matchOpToken("<")){var n=t.consumeUntil("/");t.requireOpToken("/"),t.requireOpToken(">");var s,r,l=n.map(function(e){return"STRING"===e.type?'"'+e.value+'"':e.value}).join("");return 0<=l.indexOf("$")&&(r=i.tokenize(l,s=!0),r=e.parseStringTemplate(r)),{type:"queryRef",css:l,args:r,op:function(e,t){var n=l,r=[];if(s)for(var n="",a=1;a<arguments.length;a++){var i=arguments[a];i&&(i instanceof Element?(i.dataset.hsQueryId=r.length,n+="[data-hs-query-id='"+r.length+"']",r.push(i)):n+=i)}e=o.getRootNode(e.me).querySelectorAll(n);return o.forEach(r,function(e){e.removeAttribute("data-hs-query-id")}),e},evaluate:function(e){return o.unifiedEval(this,e)}}}}),A.addLeafExpression("attributeRef",function(e,t,n){var r=n.matchTokenType("ATTRIBUTE_REF");if(r){var n=r.value,n="["+(r=0===n.indexOf("[")?n.substring(2,n.length-1):n.substring(1))+"]",r=r.split("="),a=r[0],r=r[1];return r&&0===r.indexOf('"')&&(r=r.substring(1,r.length-1)),{type:"attributeRef",name:a,css:n,value:r,op:function(e){e=e.beingTold||e.me;if(e)return e.getAttribute(a)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addGrammarElement("objectKey",function(e,t,n){var r;if(r=n.matchTokenType("STRING"))return{type:"objectKey",key:r.value,evaluate:function(){return this.key}};if(n.matchOpToken("[")){e=e.parseElement("expression",n);return n.requireOpToken("]"),{type:"objectKey",expr:e,args:[e],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}for(var a="";(r=n.matchTokenType("IDENTIFIER")||n.matchOpToken("-"))&&(a+=r.value),r;);return{type:"objectKey",key:a,evaluate:function(){return this.key}}}),A.addLeafExpression("objectLiteral",function(e,t,n){if(n.matchOpToken("{")){var r=[],a=[];if(!n.matchOpToken("}")){do{var i=e.requireElement("objectKey",n);n.requireOpToken(":");var o=e.requireElement("expression",n)}while(a.push(o),r.push(i),n.matchOpToken(","));n.requireOpToken("}")}return{type:"objectLiteral",args:[r,a],op:function(e,t,n){for(var r={},a=0;a<t.length;a++)r[t[a]]=n[a];return r},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addGrammarElement("namedArgumentList",function(e,t,n){if(n.matchOpToken("(")){var a=[],r=[];if(!n.matchOpToken(")")){do{var i=n.requireTokenType("IDENTIFIER");n.requireOpToken(":");var o=e.requireElement("expression",n)}while(r.push(o),a.push({name:i,value:o}),n.matchOpToken(","));n.requireOpToken(")")}return{type:"namedArgumentList",fields:a,args:[r],op:function(e,t){for(var n={_namedArgList_:!0},r=0;r<t.length;r++)n[a[r].name.value]=t[r];return n},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addGrammarElement("symbol",function(e,t,n){var r="default";n.matchToken("global")?r="global":n.matchToken("element")?(r="element",n.matchOpToken("'")&&n.requireToken("s")):n.matchToken("local")&&(r="local");var a=n.matchTokenType("IDENTIFIER");if(a)return{type:"symbol",symbolType:r,token:a,name:a.value,evaluate:function(e){return t.resolveSymbol(a.value,e,r)}}}),A.addGrammarElement("implicitMeTarget",function(e,t,n){return{type:"implicitMeTarget",evaluate:function(e){return e.beingTold||e.me}}}),A.addLeafExpression("boolean",function(e,t,n){var r=n.matchToken("true")||n.matchToken("false");if(r)return{type:"boolean",evaluate:function(e){return"true"===r.value}}}),A.addLeafExpression("null",function(e,t,n){if(n.matchToken("null"))return{type:"null",evaluate:function(e){return null}}}),A.addLeafExpression("arrayLiteral",function(e,t,n){if(n.matchOpToken("[")){var r=[];if(!n.matchOpToken("]")){do{var a=e.requireElement("expression",n)}while(r.push(a),n.matchOpToken(","));n.requireOpToken("]")}return{type:"arrayLiteral",values:r,args:[r],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addLeafExpression("blockLiteral",function(e,t,n){if(n.matchOpToken("\\")){var r=[],a=n.matchTokenType("IDENTIFIER");if(a)for(r.push(a);n.matchOpToken(",");)r.push(n.requireTokenType("IDENTIFIER"));n.requireOpToken("-"),n.requireOpToken(">");var i=e.requireElement("expression",n);return{type:"blockLiteral",args:r,expr:i,evaluate:function(t){return function(){for(var e=0;e<r.length;e++)t[r[e].value]=arguments[e];return i.evaluate(t)}}}}}),A.addGrammarElement("timeExpression",function(e,t,n){var r=e.requireElement("expression",n),e=1;return n.matchToken("s")||n.matchToken("seconds")?e=1e3:n.matchToken("ms")||n.matchToken("milliseconds"),{type:"timeExpression",time:r,factor:e,args:[r],op:function(e,t){return t*this.factor},evaluate:function(e){return t.unifiedEval(this,e)}}}),A.addIndirectExpression("propertyAccess",function(e,n,t,r){if(t.matchOpToken(".")){var a=t.requireTokenType("IDENTIFIER");return e.parseElement("indirectExpression",t,{type:"propertyAccess",root:r,prop:a,args:[r],op:function(e,t){return n.resolveProperty(t,a.value)},evaluate:function(e){return n.unifiedEval(this,e)}})}}),A.addIndirectExpression("of",function(e,n,t,r){if(t.matchToken("of")){for(var a=e.requireElement("expression",t),i=null,o=r;o.root;)o=(i=o).root;"symbol"!==o.type&&"attributeRef"!==o.type&&e.raiseParseError(t,"Cannot take a property of a non-symbol: "+o.type);var s="attributeRef"===o.type,l=o.name,a={type:"ofExpression",prop:o.token,root:a,attribute:s,expression:r,args:[a],op:function(e,t){return n.resolveProperty(t,l,s)},evaluate:function(e){return n.unifiedEval(this,e)}};return"attributeRef"===o.type&&(a.attribute=o),i?(i.root=a,i.args=[a]):r=a,e.parseElement("indirectExpression",t,r)}}),A.addIndirectExpression("possessive",function(e,n,t,r){if(!e.possessivesDisabled){var a=t.matchOpToken("'");if(a||"symbol"===r.type&&("my"===r.name||"its"===r.name||"your"===r.name)&&"IDENTIFIER"===t.currentToken().type){a&&t.requireToken("s");var i,o=e.parseElement("attributeRef",t);return null==o&&(i=t.requireTokenType("IDENTIFIER")),e.parseElement("indirectExpression",t,{type:"possessive",root:r,attribute:o,prop:i,args:[r],op:function(e,t){return o?n.resolveProperty(t,o.name,!0):n.resolveProperty(t,i.value,!1)},evaluate:function(e){return n.unifiedEval(this,e)}})}}}),A.addIndirectExpression("inExpression",function(e,a,t,i){if(t.matchToken("in")){var o;("idRef"!==i.type&&"queryRef"===i.type||"classRef"===i.type)&&(o=!0);var n=e.requireElement("expression",t);return e.parseElement("indirectExpression",t,{type:"inExpression",root:i,args:[o?null:i,n],op:function(e,t,n){var r=[];return o?a.forEach(n,function(e){for(var t=e.querySelectorAll(i.css),n=0;n<t.length;n++)r.push(t[n])}):a.forEach(t,function(t){a.forEach(n,function(e){t===e&&r.push(t)})}),0<r.length?r:null},evaluate:function(e){return a.unifiedEval(this,e)}})}}),A.addIndirectExpression("asExpression",function(e,n,t,r){if(t.matchToken("as")){var a=e.requireElement("dotOrColonPath",t).evaluate();return e.parseElement("indirectExpression",t,{type:"asExpression",root:r,args:[r],op:function(e,t){return n.convertValue(t,a)},evaluate:function(e){return n.unifiedEval(this,e)}})}}),A.addIndirectExpression("functionCall",function(e,a,t,i){if(t.matchOpToken("(")){var n,r=[];if(!t.matchOpToken(")")){for(;r.push(e.requireElement("expression",t)),t.matchOpToken(","););t.requireOpToken(")")}return n=i.root?{type:"functionCall",root:i,argExressions:r,args:[i.root,r],op:function(e,t,n){a.nullCheck(t,i.root);var r=t[i.prop.value];return a.nullCheck(r,i),r.hyperfunc&&n.push(e),r.apply(t,n)},evaluate:function(e){return a.unifiedEval(this,e)}}:{type:"functionCall",root:i,argExressions:r,args:[i,r],op:function(e,t,n){return a.nullCheck(t,i),t.hyperfunc&&n.push(e),t.apply(null,n)},evaluate:function(e){return a.unifiedEval(this,e)}},e.parseElement("indirectExpression",t,n)}}),A.addIndirectExpression("attributeRefAccess",function(e,n,t,r){var a=e.parseElement("attributeRef",t);if(a)return{type:"attributeRefAccess",root:r,attribute:a,args:[r],op:function(e,t){return n.resolveProperty(t,a.name,!0)},evaluate:function(e){return O.unifiedEval(this,e)}}}),A.addIndirectExpression("arrayIndex",function(e,t,n,r){if(n.matchOpToken("[")){var a=!1,i=!1,o=null,s=null;n.matchOpToken("..")?(a=!0,o=e.requireElement("expression",n)):(o=e.requireElement("expression",n),n.matchOpToken("..")&&(i=!0,"R_BRACKET"!==n.currentToken().type&&(s=e.parseElement("expression",n)))),n.requireOpToken("]");s={type:"arrayIndex",root:r,firstIndex:o,secondIndex:s,args:[r,o,s],op:function(e,t,n,r){return a?t.slice(0,n+1):i?null!=r?t.slice(n,r+1):t.slice(n):t[n]},evaluate:function(e){return O.unifiedEval(this,e)}};return A.parseElement("indirectExpression",n,s)}}),A.addGrammarElement("postfixExpression",function(e,n,t){e=e.parseElement("primaryExpression",t);return t.matchOpToken(":")?{type:"typeCheck",typeName:t.requireTokenType("IDENTIFIER"),root:e,nullOk:!t.matchOpToken("!"),args:[e],op:function(e,t){if(n.typeCheck(t,this.typeName.value,this.nullOk))return t;throw new Error("Typecheck failed!  Expected: "+this.typeName.value)},evaluate:function(e){return n.unifiedEval(this,e)}}:e}),A.addGrammarElement("logicalNot",function(e,t,n){if(n.matchToken("not")){n=e.requireElement("unaryExpression",n);return{type:"logicalNot",root:n,args:[n],op:function(e,t){return!t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addGrammarElement("noExpression",function(e,n,t){if(t.matchToken("no")){t=e.requireElement("unaryExpression",t);return{type:"noExpression",root:t,args:[t],op:function(e,t){return n.isEmpty(t)},evaluate:function(e){return n.unifiedEval(this,e)}}}}),A.addGrammarElement("negativeNumber",function(e,t,n){if(n.matchOpToken("-")){n=e.requireElement("unaryExpression",n);return{type:"negativeNumber",root:n,args:[n],op:function(e,t){return-1*t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addGrammarElement("unaryExpression",function(e,t,n){return e.parseAnyOf(["logicalNot","relativePositionalExpression","positionalExpression","noExpression","negativeNumber","postfixExpression"],n)}),A.addGrammarElement("relativePositionalExpression",function(e,t,n){var s,r=n.matchAnyToken("next","previous");if(r){s="next"===r.value?"nextElementSibling":"previousElementSibling";var a,i=e.parseElement("expression",n).css;return null==i&&e.raiseParseError(n,"Expected a CSS expression"),{type:"relativePositionalExpression",from:a=n.matchToken("from")?e.requireElement("expression",n):e.requireElement("implicitMeTarget",n),inElt:n=n.matchToken("within")?e.requireElement("expression",n):document.body,operator:r.value,propName:s,args:[i,a,n],op:function(e,t,n,r){for(var a=n;a&&a!==r;){for(var i=a[s];i;){if(i.matches(t))return i;var o=i.querySelector(t);if(o)return o;i=i[s]}a=a.parentElement}},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addGrammarElement("positionalExpression",function(e,t,n){var r=n.matchAnyToken("first","last","random");if(r){n.matchAnyToken("in","from","of");n=e.requireElement("unaryExpression",n);return{type:"positionalExpression",rhs:n,operator:r.value,args:[n],op:function(e,t){if(t=t&&!Array.isArray(t)?t.children||Array.from(t):t)return"first"===this.operator?t[0]:"last"===this.operator?t[t.length-1]:"random"===this.operator?t[Math.floor(Math.random()*t.length)]:void 0},evaluate:function(e){return t.unifiedEval(this,e)}}}}),A.addGrammarElement("mathOperator",function(e,t,n){var r=e.parseElement("unaryExpression",n),a=null;for(s=n.matchAnyOpToken("+","-","*","/","%");s;){var a=a||s,i=s.value;a.value!==i&&e.raiseParseError(n,"You must parenthesize math operations with different operators");var o=e.parseElement("unaryExpression",n),r={type:"mathOperator",lhs:r,rhs:o,operator:i,args:[r,o],op:function(e,t,n){return"+"===this.operator?t+n:"-"===this.operator?t-n:"*"===this.operator?t*n:"/"===this.operator?t/n:"%"===this.operator?t%n:void 0},evaluate:function(e){return t.unifiedEval(this,e)}},s=n.matchAnyOpToken("+","-","*","/","%")}return r}),A.addGrammarElement("mathExpression",function(e,t,n){return e.parseAnyOf(["mathOperator","unaryExpression"],n)}),A.addGrammarElement("comparisonOperator",function(e,r,t){var n,a,i,o=e.parseElement("mathExpression",t),s=t.matchAnyOpToken("<",">","<=",">=","==","===","!=","!=="),l=s?s.value:null,c=!0,s=!1;return null==l&&(t.matchToken("is")||t.matchToken("am")?t.matchToken("not")?t.matchToken("in")?l="not in":t.matchToken("a")?(l="not a",s=!0):t.matchToken("empty")?c=!(l="not empty"):l="!=":t.matchToken("in")?l="in":t.matchToken("a")?(l="a",s=!0):t.matchToken("empty")?c=!(l="empty"):l="==":t.matchToken("matches")||t.matchToken("match")?l="match":t.matchToken("contains")||t.matchToken("contain")?l="contain":(t.matchToken("do")||t.matchToken("does"))&&(t.requireToken("not"),t.matchToken("matches")||t.matchToken("match")?l="not match":t.matchToken("contains")||t.matchToken("contain")?l="not contain":e.raiseParseError(t,"Expected matches or contains"))),l&&(s?(n=t.requireTokenType("IDENTIFIER"),a=!t.matchOpToken("!")):c&&(i=e.requireElement("mathExpression",t),"match"!==l&&"not match"!==l||(i=i.css||i)),o={type:"comparisonOperator",operator:l,typeName:n,nullOk:a,lhs:o,rhs:i,args:[o,i],op:function(e,t,n){if("=="===this.operator)return t==n;if("!="===this.operator)return t!=n;if("in"===this.operator)return null!=n&&0<=Array.from(n).indexOf(t);if("not in"===this.operator)return null==n||Array.from(n).indexOf(t)<0;if("match"===this.operator)return null!=t&&t.matches(n);if("not match"===this.operator)return null==t||!t.matches(n);if("contain"===this.operator)return null!=t&&t.contains(n);if("not contain"===this.operator)return null==t||!t.contains(n);if("==="===this.operator)return t===n;if("!=="===this.operator)return t!==n;if("<"===this.operator)return t<n;if(">"===this.operator)return n<t;if("<="===this.operator)return t<=n;if(">="===this.operator)return n<=t;if("empty"===this.operator)return r.isEmpty(t);if("not empty"===this.operator)return!r.isEmpty(t);if("a"===this.operator)return r.typeCheck(t,this.typeName.value,this.nullOk);if("not a"===this.operator)return!r.typeCheck(t,this.typeName.value,this.nullOk);throw"Unknown comparison : "+this.operator},evaluate:function(e){return r.unifiedEval(this,e)}}),o}),A.addGrammarElement("comparisonExpression",function(e,t,n){return e.parseAnyOf(["comparisonOperator","mathExpression"],n)}),A.addGrammarElement("logicalOperator",function(e,t,n){var r=e.parseElement("comparisonExpression",n),a=null;for(o=n.matchToken("and")||n.matchToken("or");o;){(a=a||o).value!==o.value&&e.raiseParseError(n,"You must parenthesize logical operations with different operators");var i=e.requireElement("comparisonExpression",n),r={type:"logicalOperator",operator:o.value,lhs:r,rhs:i,args:[r,i],op:function(e,t,n){return"and"===this.operator?t&&n:t||n},evaluate:function(e){return t.unifiedEval(this,e)}},o=n.matchToken("and")||n.matchToken("or")}return r}),A.addGrammarElement("logicalExpression",function(e,t,n){return e.parseAnyOf(["logicalOperator","mathExpression"],n)}),A.addGrammarElement("asyncExpression",function(e,t,n){return n.matchToken("async")?{type:"asyncExpression",value:e.requireElement("logicalExpression",n),evaluate:function(e){return{asyncWrapper:!0,value:this.value.evaluate(e)}}}:e.parseElement("logicalExpression",n)}),A.addGrammarElement("expression",function(e,t,n){return n.matchToken("the"),e.parseElement("asyncExpression",n)}),A.addGrammarElement("assignableExpression",function(e,t,n){n.matchToken("the");e=e.parseElement("primaryExpression",n);return"symbol"===e.type||"ofExpression"===e.type||"propertyAccess"===e.type||"attributeRefAccess"===e.type||"attributeRef"===e.type||"possessive"===e.type||A.raiseParseError(n,"A target expression must be writable.  The expression type '"+e.type+"' is not."),e}),A.addGrammarElement("hyperscript",function(e,t,n){var a=[];if(n.hasMore())for(;e.featureStart(n.currentToken())||"("===n.currentToken().value;){var r=e.requireElement("feature",n);a.push(r),n.matchToken("end")}return{type:"hyperscript",features:a,apply:function(t,n,r){O.forEach(a,function(e){e.install(t,n,r)})}}});function W(e){var t=[];if("("===e.token(0).value&&(")"===e.token(1).value||","===e.token(2).value||")"===e.token(2).value)){for(e.matchOpToken("(");t.push(e.requireTokenType("IDENTIFIER")),e.matchOpToken(","););e.requireOpToken(")")}return t}A.addFeature("on",function(e,u,t){if(t.matchToken("on")){var n=!1;t.matchToken("every")&&(n=!0);var r=[],a=null;do{var i,o,s,l=e.requireElement("eventName",t,"Expected event name").evaluate(),a=a?a+" or "+l:"on "+l,c=W(t),d=null;if(t.matchOpToken("[")&&(d=e.requireElement("expression",t),t.requireOpToken("]")),"NUMBER"===t.currentToken().type&&(v=t.consumeToken(),i=parseInt(v.value),t.matchToken("to")?(x=t.consumeToken(),o=parseInt(x.value)):t.matchToken("and")&&(s=!0,t.requireToken("on"))),"intersection"===l){var f={};if(t.matchToken("with")&&(f.with=e.parseElement("expression",t).evaluate()),t.matchToken("having"))for(;t.matchToken("margin")?f.rootMargin=e.parseElement("stringLike",t).evaluate():t.matchToken("threshold")?f.threshold=e.parseElement("expression",t).evaluate():e.raiseParseError(t,"Unknown intersection config specification"),t.matchToken("and"););}else if("mutation"===l){var p,h={};if(t.matchToken("of"))do{}while(t.matchToken("anything")?(h.attributes=!0,h.subtree=!0,h.characterData=!0,h.childList=!0):t.matchToken("childList")?h.childList=!0:t.matchToken("attributes")?(h.attributes=!0,h.attributeOldValue=!0):t.matchToken("subtree")?h.subtree=!0:t.matchToken("characterData")?(h.characterData=!0,h.characterDataOldValue=!0):"ATTRIBUTE_REF"===t.currentToken().type?(p=t.consumeToken(),null==h.attributeFilter&&(h.attributeFilter=[]),0==p.value.indexOf("@")?h.attributeFilter.push(p.value.substring(1)):e.raiseParseError(t,"Only shorthand attribute references are allowed here")):e.raiseParseError(t,"Unknown mutation config specification"),t.matchToken("or"));else h.attributes=!0,h.characterData=!0,h.childList=!0}var m,g,y,v=null,x=!1}while(t.matchToken("from")&&(t.matchToken("elsewhere")?x=!0:(v=e.parseElement("expression",t))||e.raiseParseError('Expected either target value or "elsewhere".',t)),null===v&&!1===x&&t.matchToken("elsewhere")&&(x=!0),t.matchToken("in")&&(m=e.parseAnyOf(["idRef","queryRef","classRef"],t)),t.matchToken("debounced")?(t.requireToken("at"),g=e.requireElement("timeExpression",t).evaluate({})):t.matchToken("throttled")&&(t.requireToken("at"),y=e.requireElement("timeExpression",t).evaluate({})),r.push({execCount:0,every:n,on:l,args:c,filter:d,from:v,inExpr:m,elsewhere:x,startCount:i,endCount:o,unbounded:s,debounceTime:g,throttleTime:y,mutationSpec:h,intersectionSpec:f}),t.matchToken("or"));var b,_,w=[],T=!0;n||t.matchToken("queue")&&(t.matchToken("all")?T=!!0:t.matchToken("first")?b=!0:t.matchToken("none")?_=!0:t.requireToken("last"));var M=e.requireElement("commandList",t),k={type:"implicitReturn",op:function(e){return e.meta.resolve(),u.HALT},execute:function(e){}};if(M){for(var A=M;A.next;)A=A.next;A.next=k}else M=k;var S={displayName:a,events:r,start:M,every:n,executing:!1,execCount:0,queue:w,execute:function(r){if(this.executing&&!1===this.every)return _||b&&0<w.length?void 0:(T&&(S.queue.length=0),void S.queue.push(r));this.execCount++,this.executing=!0,r.meta.resolve=function(){S.executing=!1;var e=S.queue.shift();e&&setTimeout(function(){S.execute(e)},1)},r.meta.reject=function(e){console.error(e.message||e);var t=u.getHyperTrace(r,e);t&&t.print(),u.triggerEvent(r.me,"exception",{error:e}),S.executing=!1;var n=S.queue.shift();n&&setTimeout(function(){S.execute(n)},1)},M.execute(r)},install:function(c,e){u.forEach(S.events,function(l){var e=l.elsewhere?[document]:l.from?l.from.evaluate({me:c}):[c];u.forEach(e,function(o){var n,s=l.on;l.mutationSpec&&(s="hyperscript:mutation",(n=new MutationObserver(function(e,t){console.log(o,e),S.executing||O.triggerEvent(o,s,{mutationList:e,observer:t})})).observe(o,l.mutationSpec)),l.intersectionSpec&&(s="hyperscript:insersection",(n=new IntersectionObserver(function(e){O.forEach(e,function(e){var t={observer:n};(t=E(t,e)).intersecting=e.isIntersecting,O.triggerEvent(o,s,t)})},l.intersectionSpec)).observe(o)),o.addEventListener(s,function e(t){if(c instanceof Node&&o!==c&&!c.isConnected)o.removeEventListener(s,e);else{var n=u.makeContext(c,S,c,t);if(!l.elsewhere||!c.contains(t.target)){if(l.from&&(n.result=o),u.forEach(l.args,function(e){n[e.value]=n.event[e.value]||(n.event.detail?n.event.detail[e.value]:null)}),l.filter){var r=n.meta.context;n.meta.context=n.event;try{var a=l.filter.evaluate(n);if(!a)return}finally{n.meta.context=r}}if(l.inExpr)for(var i=t.target;;){if(i.matches&&i.matches(l.inExpr.css)){n.result=i;break}if(null==(i=i.parentElement))return}if(l.execCount++,l.startCount)if(l.endCount){if(l.execCount<l.startCount||l.execCount>l.endCount)return}else if(l.unbounded){if(l.execCount<l.startCount)return}else if(l.execCount!==l.startCount)return;if(l.debounceTime)return l.debounced&&clearTimeout(l.debounced),void(l.debounced=setTimeout(function(){S.execute(n)},l.debounceTime));if(l.throttleTime){if(l.lastExec&&Date.now()<l.lastExec+l.throttleTime)return;l.lastExec=Date.now()}S.execute(n)}}})})})}};return e.setParent(M,S),S}}),A.addFeature("def",function(e,l,t){if(t.matchToken("def")){var n=e.requireElement("dotOrColonPath",t).evaluate(),r=n.split("."),a=r.pop(),c=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){for(;c.push(t.requireTokenType("IDENTIFIER")),t.matchOpToken(","););t.requireOpToken(")")}var u,d,f=e.parseElement("commandList",t);t.matchToken("catch")&&(u=t.requireTokenType("IDENTIFIER").value,d=e.parseElement("commandList",t));var p={displayName:a+"("+c.map(function(e){return e.value}).join(", ")+")",name:a,args:c,start:f,errorHandler:d,errorSymbol:u,install:function(o,s){function e(){var e=l.makeContext(s,p,o,null);e.meta.errorHandler=d,e.meta.errorSymmbol=u;for(var t=0;t<c.length;t++){var n=c[t];n&&(e[n.value]=arguments[t])}e.meta.caller=arguments[c.length],e.meta.caller&&(e.meta.callingCommand=e.meta.caller.meta.command);var r,a=null,i=new Promise(function(e,t){r=e,a=t});return f.execute(e),e.meta.returned?e.meta.returnValue:(e.meta.resolve=r,e.meta.reject=a,i)}e.hyperfunc=!0,e.hypername=n,l.assignToNamespace(o,r,a,e)}},i={type:"implicitReturn",op:function(e){return e.meta.returned=!0,e.meta.resolve&&e.meta.resolve(),l.HALT},execute:function(e){}};if(f){for(var o=f;o.next;)o=o.next;o.next=i}else p.start=i;if(d){for(o=d;o.next;)o=o.next;o.next=i}return e.setParent(f,p),p}}),A.addFeature("init",function(e,n,t){if(t.matchToken("init")){var r=e.parseElement("commandList",t),a={start:r,install:function(e,t){setTimeout(function(){r.execute(n.makeContext(e,this,e,null))},0)}},t={type:"implicitReturn",op:function(e){return n.HALT},execute:function(e){}};if(r){for(var i=r;i.next;)i=i.next;i.next=t}else a.start=t;return e.setParent(r,a),a}}),A.addFeature("worker",function(e,t,n){n.matchToken("worker")&&e.raiseParseError(n,"In order to use the 'worker' feature, include the _hyperscript worker plugin. See https://hyperscript.org/features/worker/ for more info.")}),A.addFeature("behavior",function(e,i,t){if(t.matchToken("behavior")){var o=e.parseElement("dotOrColonPath",t).evaluate(),n=o.split("."),r=n.pop(),s=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){for(;s.push(t.requireTokenType("IDENTIFIER").value),t.matchOpToken(","););t.requireOpToken(")")}for(var l=e.parseElement("hyperscript",t),a=0;a<l.features.length;a++)l.features[a].behavior=o;return{install:function(e,t){i.assignToNamespace(u.document&&u.document.body,n,r,function(e,t,n){for(var r=c(i.getInternalData(e),o+"Scope"),a=0;a<s.length;a++)r[s[a]]=n[s[a]];l.apply(e,t)})}}}}),A.addFeature("install",function(e,t,n){if(n.matchToken("install")){var r,o=e.requireElement("dotOrColonPath",n).evaluate(),s=o.split("."),l=e.parseElement("namedArgumentList",n);return r={install:function(a,i){t.unifiedEval({args:[l],op:function(e,t){for(var n=u,r=0;r<s.length;r++)if("object"!=typeof(n=n[s[r]])&&"function"!=typeof n)throw new Error("No such behavior defined as "+o);if(!(n instanceof Function))throw new Error(o+" is not a behavior");n(a,i,t)}},t.makeContext(a,r,a))}}}}),A.addGrammarElement("jsBody",function(e,t,n){for(var r=n.currentToken().start,a=n.currentToken(),i=[],o="",s=!1;n.hasMore();){var a=n.consumeToken(),l=n.currentToken(!0);if("IDENTIFIER"===l.type&&"end"===l.value)break;s?"IDENTIFIER"===a.type||"NUMBER"===a.type?o+=a.value:(""!==o&&i.push(o),o="",s=!1):"IDENTIFIER"===a.type&&"function"===a.value&&(s=!0)}var c=a.end+1;return{type:"jsBody",exposedFunctionNames:i,jsSource:n.source.substring(r,c)}}),A.addFeature("js",function(e,t,n){if(n.matchToken("js")){var e=e.parseElement("jsBody",n),n=e.jsSource+"\nreturn { "+e.exposedFunctionNames.map(function(e){return e+":"+e}).join(",")+" } ",r=new Function(n);return{jsSource:n,function:r,exposedFunctionNames:e.exposedFunctionNames,install:function(){E(u,r())}}}}),A.addCommand("js",function(e,r,t){if(t.matchToken("js")){var a=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){do{var n=t.requireTokenType("IDENTIFIER")}while(a.push(n.value),t.matchOpToken(","));t.requireOpToken(")")}e=e.parseElement("jsBody",t);t.matchToken("end");var i=o(Function,a.concat([e.jsSource]));return{jsSource:e.jsSource,function:i,inputs:a,op:function(n){var t=[];a.forEach(function(e){t.push(r.resolveSymbol(e,n))});var e=i.apply(u,t);return e&&"function"==typeof e.then?Promise(function(t){e.then(function(e){n.result=e,t(r.findNext(this,n))})}):(n.result=e,r.findNext(this,n))}}}}),A.addCommand("async",function(e,t,n){var r;if(n.matchToken("async"))return n.matchToken("do")?(r=e.requireElement("commandList",n),n.requireToken("end")):r=e.requireElement("command",n),{body:r,op:function(e){return setTimeout(function(){r.execute(e)}),t.findNext(this,e)}}}),A.addCommand("tell",function(e,n,t){var r=t.currentToken();if(t.matchToken("tell")){var a=e.requireElement("expression",t),i=e.requireElement("commandList",t);t.hasMore()&&t.requireToken("end");var o="tell_"+r.start,a={value:a,body:i,args:[a],resolveNext:function(e){var t=e.meta.iterators[o];return t.index<t.value.length?(e.beingTold=t.value[t.index++],i):(e.beingTold=t.originalBeingTold,this.next||n.findNext(this.parent,e))},op:function(e,t){return null==t?t=[]:Array.isArray(t)||t instanceof NodeList||(t=[t]),e.meta.iterators[o]={originalBeingTold:e.beingTold,index:0,value:t},this.resolveNext(e)}};return e.setParent(i,a),a}}),A.addCommand("wait",function(e,i,t){if(t.matchToken("wait")){if(t.matchToken("for")){t.matchToken("a");for(var o=[];o.push({name:A.requireElement("dotOrColonPath",t,"Expected event name").evaluate(),args:W(t)}),t.matchToken("or"););t.matchToken("from")&&(n=e.requireElement("expression",t));var s={event:o,on:n,args:[n],op:function(a,e){var t=e||a.me;if(!(t instanceof EventTarget))throw new Error("Not a valid event target: "+this.on.sourceFor());return new Promise(function(n){var r=!1;i.forEach(o,function(e){t.addEventListener(e.name,function(t){a.result=t,i.forEach(e.args,function(e){a[e.value]=t[e.value]||(t.detail?t.detail[e.value]:null)}),r||(r=!0,n(i.findNext(s,a)))},{once:!0})})})}}}else var n=t.matchToken("a")?(t.requireToken("tick"),0):A.requireElement("timeExpression",t),s={type:"waitCmd",time:n,args:[n],op:function(t,n){return new Promise(function(e){setTimeout(function(){e(i.findNext(s,t))},n)})},execute:function(e){return i.unifiedExec(this,e)}};return s}}),A.addGrammarElement("dotOrColonPath",function(e,t,n){var r=n.matchTokenType("IDENTIFIER");if(r){var a=[r.value],i=n.matchOpToken(".")||n.matchOpToken(":");if(i)for(;a.push(n.requireTokenType("IDENTIFIER").value),n.matchOpToken(i.value););return{type:"dotOrColonPath",path:a,evaluate:function(){return a.join(i?i.value:"")}}}}),A.addGrammarElement("eventName",function(e,t,n){var r;return(r=n.matchTokenType("STRING"))?{evaluate:function(){return r.value}}:e.parseElement("dotOrColonPath",n)}),A.addCommand("send",function(e,a,t){if(t.matchToken("send")){var n=e.requireElement("eventName",t),r=e.parseElement("namedArgumentList",t),i={eventName:n,details:r,to:t=t.matchToken("to")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),args:[t,n,r],op:function(e,t,n,r){return a.forEach(t,function(e){a.triggerEvent(e,n,r||{})}),a.findNext(i,e)}};return i}});function Z(e,r,t,n){var a;return{value:a=n?e.requireElement("expression",t):a,args:[a],op:function(e,t){var n=e.meta.resolve;return e.meta.returned=!0,n?t?n(t):n():(e.meta.returned=!0,e.meta.returnValue=t),r.HALT}}}A.addCommand("return",function(e,t,n){if(n.matchToken("return"))return Z(e,t,n,!0)}),A.addCommand("exit",function(e,t,n){if(n.matchToken("exit"))return Z(e,t,n,!1)}),A.addCommand("halt",function(e,t,n){if(n.matchToken("halt")){var r,a,i;n.matchToken("the")&&(n.requireToken("event"),n.matchOpToken("'")&&n.requireToken("s"),r=!0),n.matchToken("bubbling")?a=!0:n.matchToken("default")&&(i=!0);var o=Z(e,t,n,!1);return{keepExecuting:!0,bubbling:a,haltDefault:i,exit:o,op:function(e){if(e.event)return a?e.event.stopPropagation():(i||e.event.stopPropagation(),e.event.preventDefault()),r?t.findNext(this,e):o}}}}),A.addCommand("log",function(e,r,t){if(t.matchToken("log")){for(var n,a=[e.parseElement("expression",t)];t.matchOpToken(",");)a.push(e.requireElement("expression",t));return{exprs:a,withExpr:n=t.matchToken("with")?e.requireElement("expression",t):n,args:[n,a],op:function(e,t,n){return(t||console.log).apply(null,n),r.findNext(this,e)}}}}),A.addCommand("throw",function(e,n,t){if(t.matchToken("throw")){t=e.requireElement("expression",t);return{expr:t,args:[t],op:function(e,t){n.registerHyperTrace(e,t);e=e.meta&&e.meta.reject;if(e)return e(t),n.HALT;throw t}}}});function $(e,n,t){var r={expr:t=e.requireElement("expression",t),args:[t],op:function(e,t){return e.result=t,n.findNext(r,e)}};return r}A.addCommand("call",function(e,t,n){if(n.matchToken("call")){t=$(e,t,n);return t.expr&&"functionCall"!==t.expr.type&&e.raiseParseError(n,"Must be a function invocation"),t}}),A.addCommand("get",function(e,t,n){if(n.matchToken("get"))return $(e,t,n)}),A.addCommand("make",function(e,c,t){if(t.matchToken("make")){t.matchToken("a")||t.matchToken("an");var u,d=e.requireElement("expression",t),n=[];if("queryRef"!==d.type&&t.matchToken("from"))for(;n.push(e.requireElement("expression",t)),t.matchOpToken(","););return t.matchToken("called")&&(u=t.requireTokenType("IDENTIFIER").value),"queryRef"===d.type?{op:function(e){for(var t,n,r="div",a=[],i=/(?:(^|#|\.)([^#\. ]+))/g;t=i.exec(d.css);)""===t[1]?r=t[2].trim():"#"===t[1]?n=t[2].trim():a.push(t[2].trim());var o=document.createElement(r);void 0!==n&&(o.id=n);for(var s=0;s<a.length;s++){var l=a[s];o.classList.add(l)}return e.result=o,u&&(e[u]=o),c.findNext(this,e)}}:{args:[d,n],op:function(e,t,n){return e.result=o(t,n),u&&(e[u]=e.result),c.findNext(this,e)}}}}),A.addGrammarElement("pseudoCommand",function(e,a,t){var n=e.requireElement("primaryExpression",t);"functionCall"!==n.type&&"symbol"!==n.root.type&&e.raiseParseError("Implicit function calls must start with a simple function",t),t=!t.matchAnyToken("to","on","with")&&e.commandBoundary(t.currentToken())?e.requireElement("implicitMeTarget",t):e.requireElement("expression",t);var i=n.root.name,o={type:"pseudoCommand",expr:n,args:[t,n.argExressions],op:function(e,t,n){var r=t[i];r.hyperfunc&&n.push(e);n=r.apply(t,n);return e.result=n,a.findNext(o,e)},execute:function(e){return a.unifiedExec(this,e)}};return o});function X(e,r,t,a,n){var i="symbol"===a.type,o="attributeRef"===a.type;o||i||null!=a.root||e.raiseParseError(t,"Can only put directly into symbols, not references");var s,l=null,c=null;return i||(o?(l=e.requireElement("implicitMeTarget",t),s=a):(c=a.prop?a.prop.value:null,s=a.attribute,l=a.root)),{target:a,symbolWrite:i,value:n,args:[l,n],op:function(e,t,n){return i?r.setSymbol(a.name,e,a.symbolType,n):r.forEach(t,function(e){s?null==n?e.removeAttribute(s.name):e.setAttribute(s.name,n):e[c]=n}),r.findNext(this,e)}}}A.addCommand("default",function(e,n,t){if(t.matchToken("default")){var r=e.requireElement("assignableExpression",t);t.requireToken("to");var a=e.requireElement("expression",t),i=X(e,n,t,r,a),r={target:r,value:a,setter:i,args:[r],op:function(e,t){return t?n.findNext(this,e):i}};return i.parent=r}}),A.addCommand("set",function(e,r,t){if(t.matchToken("set")){if("L_BRACE"===t.currentToken().type){var n=e.requireElement("objectLiteral",t);return t.requireToken("on"),{objectLiteral:n,target:a=e.requireElement("expression",t),args:[n,a],op:function(e,t,n){return E(n,t),r.findNext(this,e)}}}try{t.pushFollow("to");var a=e.requireElement("assignableExpression",t)}finally{t.popFollow()}t.requireToken("to");n=e.requireElement("expression",t);return X(e,r,t,a,n)}}),A.addCommand("if",function(e,n,t){if(t.matchToken("if")){var r=e.requireElement("expression",t);t.matchToken("then");var a,i=e.parseElement("commandList",t);t.matchToken("else")&&(a=e.parseElement("commandList",t)),t.hasMore()&&t.requireToken("end");r={expr:r,trueBranch:i,falseBranch:a,args:[r],op:function(e,t){return t?i:a||n.findNext(this,e)}};return e.setParent(i,r),e.setParent(a,r),r}});function J(e,t,r,n){var a,i,o,s,l,c,u,d,f=t.currentToken();t.matchToken("for")||n?(a=t.requireTokenType("IDENTIFIER").value,t.requireToken("in"),i=e.requireElement("expression",t)):t.matchToken("in")?(a="it",i=e.requireElement("expression",t)):t.matchToken("while")?l=e.requireElement("expression",t):t.matchToken("until")?(o=!0,t.matchToken("event")?(s=A.requireElement("dotOrColonPath",t,"Expected event name"),t.matchToken("from")&&(v=e.requireElement("expression",t))):l=e.requireElement("expression",t)):t.matchTokenType("NUMBER")?(c=parseFloat(f.value),t.requireToken("times")):(t.matchToken("forever"),u=!0),t.matchToken("index")&&(d=t.requireTokenType("IDENTIFIER").value);var p,h=e.parseElement("commandList",t);if(h&&s){for(var m=h;m.next;)m=m.next;var g={type:"waitATick",op:function(){return new Promise(function(e){setTimeout(function(){e(r.findNext(g))},0)})}};m.next=g}t.hasMore()&&t.requireToken("end"),p=null==a?a="_implicit_repeat_"+f.start:a+"_"+f.start;var y={identifier:a,indexIdentifier:d,slot:p,expression:i,forever:u,times:c,until:o,event:s,on:v,whileExpr:l,resolveNext:function(){return this},loop:h,args:[l],op:function(e,t){var n=e.meta.iterators[p];return!!this.forever||(this.until?s?!1===e.meta.iterators[p].eventFired:!0!==t:!!t||(c?n.index<this.times:null!==n.value&&n.index<n.value.length))?(n.value?(e[a]=n.value[n.index],e.result=n.value[n.index]):e.result=n.index,d&&(e[d]=n.index),n.index++,h):(e.meta.iterators[p]=null,r.findNext(this.parent,e))}};e.setParent(h,y);var v={name:"repeatInit",args:[i,s,v],op:function(t,e,n,r){return t.meta.iterators[p]={index:0,value:e,eventFired:!1},s&&(r||t.me).addEventListener(n,function(e){t.meta.iterators[p].eventFired=!0},{once:!0}),y},execute:function(e){return r.unifiedExec(this,e)}};return e.setParent(y,v),v}function K(){var e,e=(e=document.querySelector('meta[name="htmx-config"]'))?t(e.content):null;e&&(_hyperscript.config=E(_hyperscript.config,e))}return A.addCommand("repeat",function(e,t,n){if(n.matchToken("repeat"))return J(e,n,t,!1)}),A.addCommand("for",function(e,t,n){if(n.matchToken("for"))return J(e,n,t,!0)}),A.addGrammarElement("stringLike",function(e,t,n){return A.parseAnyOf(["string","nakedString"],n)}),A.addCommand("append",function(e,n,t){if(t.matchToken("append")){var r=null,a=null,i=e.requireElement("expression",t);if(null==(r=t.matchToken("to")?e.requireElement("expression",t):r))a="result";else if("symbol"===r.type)a=r.name;else{if("propertyAccess"!==r.type)throw"Unable to append to "+r.type;a=r.prop.value}return{value:i,target:r,args:[i],op:function(e,t){if(Array.isArray(e[a]))e[a].push(t);else if(e[a]instanceof Element){if("string"!=typeof t)throw"Don't know how to append non-strings to an HTML Element yet.";e[a].innerHTML+=t}else e[a]+=t;return n.findNext(this,e)},execute:function(e){return n.unifiedExec(this,e,i,r)}}}}),A.addCommand("increment",function(r,a,i){if(i.matchToken("increment")){var t,o=r.parseElement("assignableExpression",i);return i.matchToken("by")&&(t=r.requireElement("expression",i)),{target:o,args:[o,t],op:function(e,t,n){t=(t=t?parseFloat(t):0)+(n=n?parseFloat(n):1),n=X(r,a,i,o,t);return e.result=t,n.parent=this,n},execute:function(e){return a.unifiedExec(this,e,o,t)}}}}),A.addCommand("decrement",function(r,a,i){if(i.matchToken("decrement")){var t,o=r.parseElement("assignableExpression",i);return i.matchToken("by")&&(t=r.requireElement("expression",i)),{target:o,args:[o,t],op:function(e,t,n){t=(t=t?parseFloat(t):0)-(n=n?parseFloat(n):1),n=X(r,a,i,o,t);return e.result=t,n.parent=this,n},execute:function(e){return a.unifiedExec(this,e,o,t)}}}}),A.addCommand("fetch",function(e,r,t){if(t.matchToken("fetch")){var a,n=e.requireElement("stringLike",t),i=e.parseElement("objectLiteral",t),o="text";t.matchToken("as")&&(t.matchToken("json")?o="json":t.matchToken("response")?o="response":t.matchToken("html")?o="html":t.matchToken("text")||(a=e.requireElement("dotOrColonPath",t).evaluate()));var s={url:n,argExpressions:i,args:[n,i],op:function(t,e,n){return fetch(e,n).then(function(e){return"response"===o?(t.result=e,r.findNext(s,t)):"json"===o?e.json().then(function(e){return t.result=e,r.findNext(s,t)}):e.text().then(function(e){return a&&(e=r.convertValue(e,a)),"html"===o&&(e=r.convertValue(e,"Fragment")),t.result=e,r.findNext(s,t)})}).catch(function(e){throw r.triggerEvent(t.me,"fetch:error",{reason:e}),e})}};return s}}),"document"in u&&Promise.all(Array.from(document.querySelectorAll("script[type='text/hyperscript'][src]")).map(function(e){return fetch(e.src).then(function(e){return e.text()}).then(function(e){return O.evaluate(e)})})).then(function(){var e;e=function(){K(),O.processNode(document.documentElement),document.addEventListener("htmx:load",function(e){O.processNode(e.detail.elt)})},"loading"!==document.readyState?setTimeout(e):document.addEventListener("DOMContentLoaded",e)}),E(function(e,t){return O.evaluate(e,t)},{internals:{lexer:i,parser:A,runtime:O},addFeature:function(e,t){A.addFeature(e,t)},addCommand:function(e,t){A.addCommand(e,t)},addLeafExpression:function(e,t){A.addLeafExpression(e,t)},addIndirectExpression:function(e,t){A.addIndirectExpression(e,t)},evaluate:function(e,t){return O.evaluate(e,t)},parse:function(e){return O.parse(e)},processNode:function(e){O.processNode(e)},config:{attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",conversions:D}})}),function(){_hyperscript.addCommand("settle",function(e,i,t){if(t.matchToken("settle")){var o={type:"settleCmd",args:[e.commandBoundary(t.currentToken())?e.requireElement("implicitMeTarget",t):e.requireElement("expression",t)],op:function(e,t){var n=null,r=!1,a=new Promise(function(e){n=e});return t.addEventListener("transitionstart",function(){r=!0},{once:!0}),setTimeout(function(){r||n(i.findNext(o,e))},500),t.addEventListener("transitionend",function(){n(i.findNext(o,e))},{once:!0}),a},execute:function(e){return i.unifiedExec(this,e)}};return o}}),_hyperscript.addCommand("add",function(e,r,t){if(t.matchToken("add")){var n,a,i=e.parseElement("classRef",t),o=null,s=null;if(null==i)null==(o=e.parseElement("attributeRef",t))&&null==(s=e.parseElement("objectLiteral",t))&&e.raiseParseError(t,"Expected either a class reference or attribute expression");else for(var l=[i];i=e.parseElement("classRef",t);)l.push(i);return n=t.matchToken("to")?e.requireElement("expression",t):e.parseElement("implicitMeTarget",t),a=l?{classRefs:l,to:n,args:[n],op:function(e,n){return r.forEach(l,function(t){r.forEach(n,function(e){e instanceof Element&&e.classList.add(t.className())})}),r.findNext(this,e)}}:o?{type:"addCmd",attributeRef:o,to:n,args:[n],op:function(e,t,n){return r.forEach(t,function(e){e.setAttribute(o.name,o.value)}),r.findNext(a,e)},execute:function(e){return r.unifiedExec(this,e)}}:{type:"addCmd",cssDeclaration:s,to:n,args:[n,s],op:function(e,t,n){return r.forEach(t,function(e){for(var t in n)n.hasOwnProperty(t)&&e.style.setProperty(t,n[t])}),r.findNext(a,e)},execute:function(e){return r.unifiedExec(this,e)}}}}),_hyperscript.addCommand("remove",function(e,r,t){if(t.matchToken("remove")){var n,a=e.parseElement("classRef",t),i=null,o=null;if(null==a)null==(i=e.parseElement("attributeRef",t))&&null==(o=e.parseElement("expression",t))&&e.raiseParseError(t,"Expected either a class reference, attribute expression or value expression");else for(var s=[a];a=e.parseElement("classRef",t);)s.push(a);return n=t.matchToken("from")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),o?{elementExpr:o,from:n,args:[o],op:function(e,t){return r.forEach(t,function(e){e.parentElement&&e.parentElement.removeChild(e)}),r.findNext(this,e)}}:{classRefs:s,attributeRef:i,elementExpr:o,from:n,args:[n],op:function(e,n){return this.classRefs?r.forEach(s,function(t){r.forEach(n,function(e){e.classList.remove(t.className())})}):r.forEach(n,function(e){e.removeAttribute(i.name)}),r.findNext(this,e)}}}}),_hyperscript.addCommand("toggle",function(e,o,t){if(t.matchToken("toggle")){if(t.matchToken("between")){var n=!0,r=e.parseElement("classRef",t);t.requireToken("and");var a=e.requireElement("classRef",t)}else{var r=e.parseElement("classRef",t),i=null;if(null==r)null==(i=e.parseElement("attributeRef",t))&&e.raiseParseError(t,"Expected either a class reference or attribute expression");else for(var s=[r];r=e.parseElement("classRef",t);)s.push(r)}var l,c,u,d;l=t.matchToken("on")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),t.matchToken("for")?c=e.requireElement("timeExpression",t):t.matchToken("until")&&(u=e.requireElement("dotOrColonPath",t,"Expected event name"),t.matchToken("from")&&(d=e.requireElement("expression",t)));var f={classRef:r,classRef2:a,classRefs:s,attributeRef:i,on:l,time:c,evt:u,from:d,toggle:function(e){n?o.forEach(e,function(e){e.classList.contains(r.className())?(e.classList.remove(r.className()),e.classList.add(a.className())):(e.classList.add(r.className()),e.classList.remove(a.className()))}):this.classRefs?o.forEach(this.classRefs,function(t){o.forEach(e,function(e){e.classList.toggle(t.className())})}):o.forEach(e,function(e){e.hasAttribute(i.name)?e.removeAttribute(i.name):e.setAttribute(i.name,i.value)})},args:[l,c,u,d],op:function(t,n,r,a,i){return r?new Promise(function(e){f.toggle(n),setTimeout(function(){f.toggle(n),e(o.findNext(f,t))},r)}):a?new Promise(function(e){(i||t.me).addEventListener(a,function(){f.toggle(n),e(o.findNext(f,t))},{once:!0}),f.toggle(n)}):(this.toggle(n),o.findNext(f,t))}};return f}});function l(e,t,n){var r=n.currentToken();return n="with"===r.value||e.commandBoundary(r)?e.parseElement("implicitMeTarget",n):e.parseElement("expression",n)}function c(e,t,n){var r=_hyperscript.config.defaultHideShowStrategy,a=i;return null==(r=(a=_hyperscript.config.hideShowStrategies?function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(a,_hyperscript.config.hideShowStrategies):a)[n=n||r||"display"])&&e.raiseParseError(t,"Unknown show/hide strategy : "+n),r}var i={display:function(e,t,n){t.style.display=n||("hide"===e?"none":"block")},visibility:function(e,t,n){t.style.visibility=n||("hide"===e?"hidden":"visible")},opacity:function(e,t,n){t.style.opacity=n||("hide"===e?"0":"1")}};function u(e,t,n){var r;if((r=t?e[t]:e)instanceof Element||r instanceof HTMLDocument){for(;r.firstChild;)r.removeChild(r.firstChild);r.append(_hyperscript.internals.runtime.convertValue(n,"Fragment"))}else{if(!t)throw"Don't know how to put a value into "+typeof e;e[t]=n}}function d(e,t,n){if(n.matchToken("the")||n.matchToken("element")||n.matchToken("elements")||"CLASS_REF"===n.currentToken().type||"ID_REF"===n.currentToken().type||n.currentToken().op&&"<"===n.currentToken().value){e.possessivesDisabled=!0;try{var r=e.parseElement("expression",n)}finally{delete e.possessivesDisabled}n.matchOpToken("'")&&n.requireToken("s")}else{var a;r="IDENTIFIER"===n.currentToken().type&&"its"===n.currentToken().value?{type:"pseudopossessiveIts",token:a=n.matchToken("its"),name:a.value,evaluate:function(e){return t.resolveSymbol("it",e)}}:(n.matchToken("my")||n.matchToken("me"),e.parseElement("implicitMeTarget",n))}return r}_hyperscript.addCommand("hide",function(e,n,t){if(t.matchToken("hide")){var r=l(e,0,t),a=null;t.matchToken("with")&&(a=t.requireTokenType("IDENTIFIER").value);var i=c(e,t,a);return{target:r,args:[r],op:function(e,t){return n.forEach(t,function(e){i("hide",e)}),n.findNext(this,e)}}}}),_hyperscript.addCommand("show",function(e,n,t){if(t.matchToken("show")){var r=l(e,0,t),a=null;t.matchToken("with")&&(a=t.requireTokenType("IDENTIFIER").value);var i,o=null;t.matchOpToken(":")&&(i=t.consumeUntilWhitespace(),t.matchTokenType("WHITESPACE"),o=i.map(function(e){return e.value}).join(""));var s=c(e,t,a);return{target:r,args:[r],op:function(e,t){return n.forEach(t,function(e){s("show",e,o)}),n.findNext(this,e)}}}}),_hyperscript.addCommand("trigger",function(e,r,t){if(t.matchToken("trigger")){var n=e.requireElement("eventName",t),t=e.parseElement("namedArgumentList",t),a={eventName:n,details:t,args:[n,t],op:function(e,t,n){return r.triggerEvent(e.me,t,n||{}),r.findNext(a,e)}};return a}}),_hyperscript.addCommand("take",function(e,a,t){if(t.matchToken("take")){var n=e.parseElement("classRef",t);return{classRef:n,from:n=t.matchToken("from")?e.requireElement("expression",t):n,forElt:t=t.matchToken("for")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),args:[n,t],op:function(e,t,n){var r=this.classRef.css.substr(1);return a.forEach(t,function(e){e.classList.remove(r)}),a.forEach(n,function(e){e.classList.add(r)}),a.findNext(this,e)}}}}),_hyperscript.addCommand("put",function(e,a,t){if(t.matchToken("put")){var n=e.requireElement("expression",t),r=t.matchAnyToken("into","before","after");null==r&&t.matchToken("at")&&(r=t.matchAnyToken("start","end"),t.requireToken("of")),null==r&&e.raiseParseError(t,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'");var i,o=e.requireElement("expression",t),s=r.value,l=!1,r=null,c=null;return"propertyAccess"===o.type&&"into"===s?(c=o.prop.value,r=o.root):"symbol"===o.type&&"into"===s?(l=!0,c=o.name):r="attributeRef"===o.type&&"into"===s?(i=!0,c=o.name,e.requireElement("implicitMeTarget",t)):"attributeRefAccess"===o.type&&"into"===s?(i=!0,c=o.attribute.name,o.root):o,{target:o,operation:s,symbolWrite:l,value:n,args:[r,n],op:function(e,t,n){var r;return l?u(e,c,n):"into"===s?i?a.forEach(t,function(e){e.setAttribute(c,n)}):a.forEach(t,function(e){u(e,c,n)}):(r="before"===s?Element.prototype.before:"after"===s?Element.prototype.after:"start"===s?Element.prototype.prepend:"end"===s?Element.prototype.append:"unreachable",a.forEach(t,function(e){r.call(e,n instanceof Node?n:a.convertValue(n,"Fragment"))})),a.findNext(this,e)}}}}),_hyperscript.addCommand("transition",function(e,y,t){if(t.matchToken("transition")){for(var n,r,a=d(e,y,t),i=[],o=[],s=[],l=t.currentToken();!e.commandBoundary(l)&&"over"!==l.value&&"using"!==l.value;)i.push(e.requireElement("stringLike",t)),t.matchToken("from")?o.push(e.requireElement("stringLike",t)):o.push(null),t.requireToken("to"),s.push(e.requireElement("stringLike",t)),l=t.currentToken();t.matchToken("over")?n=e.requireElement("timeExpression",t):t.matchToken("using")&&(r=e.requireElement("expression",t));var c={to:s,args:[a,i,o,s,r,n],op:function(e,t,f,p,h,m,g){var n=[];return y.forEach(t,function(d){var e=new Promise(function(a,e){var i=d.style.transition;d.style.transition=g?"all "+g+"ms ease-in":m||_hyperscript.config.defaultTransition;for(var o=y.getInternalData(d),t=getComputedStyle(d),n={},r=0;r<t.length;r++){var s=t[r],l=t[s];n[s]=l}o.initalStyles||(o.initalStyles=n);for(r=0;r<f.length;r++){var c=f[r],u=p[r];d.style[c]="computed"==u||null==u?n[c]:u}setTimeout(function(){for(var e=0;e<f.length;e++){var t,n=f[e],r=h[e];"initial"==r?(t=o.initalStyles[n],d.style[n]=t):d.style[n]=r}d.addEventListener("transitionend",function(){d.style.transition=i,a()},{once:!0})},5)});n.push(e)}),Promise.all(n).then(function(){return y.findNext(c,e)})}};return c}}),_hyperscript.addCommand("measure",function(e,r,t){if(t.matchToken("measure")){var n=d(e,r,t),a=[];if(!e.commandBoundary(t.currentToken()))for(;a.push(t.matchTokenType("IDENTIFIER").value),t.matchOpToken(","););return{properties:a,args:[n],op:function(t,e){var n=(e=0 in e?e[0]:e).getBoundingClientRect(),e={top:e.scrollTop,left:e.scrollLeft,topMax:e.scrollTopMax,leftMax:e.scrollLeftMax,height:e.scrollHeight,width:e.scrollWidth};return t.result={x:n.x,y:n.y,left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height,bounds:n,scrollLeft:e.left,scrollTop:e.top,scrollLeftMax:e.leftMax,scrollTopMax:e.topMax,scrollWidth:e.width,scrollHeight:e.height,scroll:e},r.forEach(a,function(e){if(!(e in t.result))throw"No such measurement as "+e;t[e]=t.result[e]}),r.findNext(this,t)}}}}),_hyperscript.addLeafExpression("closestExpr",function(e,t,n){if(n.matchToken("closest")){var r;n.matchToken("parent")&&(r=!0);var a,i,o=null;"ATTRIBUTE_REF"===n.currentToken().type&&(a=e.parseElement("attributeRefAccess",n,null),o="["+a.attribute.name+"]"),null==o&&(null==(i=e.parseElement("expression",n)).css?e.raiseParseError(n,"Expected a CSS expression"):o=i.css),n=n.matchToken("to")?e.parseElement("expression",n):e.parseElement("implicitMeTarget",n);n={type:"closestExpr",parentSearch:r,expr:i,css:o,to:n,args:[n],op:function(e,t){return null!=t&&t instanceof Element?r?t.parentElement?t.parentElement.closest(o):null:t.closest(o):null},evaluate:function(e){return t.unifiedEval(this,e)}};return a?(a.root=n,a.args=[n],a):n}}),_hyperscript.addCommand("go",function(e,n,t){if(t.matchToken("go")){var r,a,i,o,s,l,c;t.matchToken("back")?r=!0:(t.matchToken("to"),t.matchToken("url")?(l=e.requireElement("stringLike",t),a=!0,t.matchToken("in")&&(t.requireToken("new"),t.requireToken("window"),i=!0)):(t.matchToken("the"),o=t.matchAnyToken("top","bottom","middle"),s=t.matchAnyToken("left","center","right"),(o||s)&&t.requireToken("of"),l=e.requireElement("expression",t),t=t.matchAnyToken("smoothly","instantly"),c={},o&&("top"===o.value?c.block="start":"bottom"===o.value?c.block="end":"middle"===o.value&&(c.block="center")),s&&("left"===s.value?c.inline="start":"center"===s.value?c.inline="center":"right"===s.value&&(c.inline="end")),t&&("smoothly"===t.value?c.behavior="smooth":"instantly"===t.value&&(c.behavior="instant"))));var u={target:l,args:[l],op:function(e,t){return r?window.history.back():a?t&&(0!==t.indexOf("#")||i?window.open(t,i?"_blank":null):window.location.href=t):n.forEach(t,function(e){e.scrollIntoView(c)}),n.findNext(u)}};return u}}),_hyperscript.config.conversions.Values=function(e){var n={},r=_hyperscript.internals.runtime.forEach;return r(e,function(e){var t=i(e);void 0===t?null!=e.querySelectorAll&&(e=e.querySelectorAll("input,select,textarea"),r(e,a)):n[t.name]=t.value}),n;function a(e){e=i(e);null!=e&&(null!=n[e.name]?Array.isArray(n[e.name])&&Array.isArray(e.value)&&(n[e.name]=[].concat(n[e.name],e.value)):n[e.name]=e.value)}function i(e){try{var t={name:e.name,value:e.value};if(null==t.name||null==t.value)return;if("radio"==e.type&&0==e.checked)return;if("checkbox"==e.type&&(0==e.checked?t.value=void 0:"string"==typeof t.value&&(t.value=[t.value])),"select-multiple"==e.type){var n=e.querySelectorAll("option[selected]");t.value=[];for(var r=0;r<n.length;r++)t.value.push(n[r].value)}return t}catch(e){return}}},_hyperscript.config.conversions.HTML=function(e){var a=function(e){if(e instanceof Array)return e.map(function(e){return a(e)}).join("");if(e instanceof HTMLElement)return e.outerHTML;if(e instanceof NodeList){for(var t="",n=0;n<e.length;n++){var r=e[n];r instanceof HTMLElement&&(t+=r.outerHTML)}return t}return e.toString?e.toString():""};return a(e)},_hyperscript.config.conversions.Fragment=function(e){var n=document.createDocumentFragment();return _hyperscript.internals.runtime.forEach(e,function(e){var t;e instanceof Node?n.append(e):((t=document.createElement("template")).innerHTML=e,n.append(t.content))}),n}}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t(e.Popper)}(this,function(e){"use strict";function t(n){if(n&&n.__esModule)return n;var r=Object.create(null);return n&&Object.keys(n).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(n,e),Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}}))}),r.default=n,Object.freeze(r)}var o=t(e);const d={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(e=>e.matches(t))},parents(e,t){const n=[];let r=e.parentNode;for(;r&&r.nodeType===Node.ELEMENT_NODE&&3!==r.nodeType;)r.matches(t)&&n.push(r),r=r.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]}},i="transitionend",s=e=>{for(;e+=Math.floor(1e6*Math.random()),document.getElementById(e););return e},n=t=>{let n=t.getAttribute("data-bs-target");if(!n||"#"===n){let e=t.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),n=e&&"#"!==e?e.trim():null}return n},l=e=>{e=n(e);return e&&document.querySelector(e)?e:null},a=e=>{e=n(e);return e?document.querySelector(e):null},c=e=>{e.dispatchEvent(new Event(i))},u=e=>!(!e||"object"!=typeof e)&&void 0!==(e=void 0!==e.jquery?e[0]:e).nodeType,f=e=>u(e)?e.jquery?e[0]:e:"string"==typeof e&&0<e.length?d.findOne(e):null,r=(a,i,o)=>{Object.keys(o).forEach(e=>{var t,n=o[e],r=i[e],t=r&&u(r)?"element":null==(t=r)?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(t))throw new TypeError(`${a.toUpperCase()}: Option "${e}" provided type "${t}" but expected type "${n}".`)})},p=e=>!(!u(e)||0===e.getClientRects().length)&&"visible"===getComputedStyle(e).getPropertyValue("visibility"),h=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),m=e=>{if(!document.documentElement.attachShadow)return null;if("function"!=typeof e.getRootNode)return e instanceof ShadowRoot?e:e.parentNode?m(e.parentNode):null;e=e.getRootNode();return e instanceof ShadowRoot?e:null},g=()=>{},y=e=>e.offsetHeight,v=()=>{var{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},x=[],b=()=>"rtl"===document.documentElement.dir;var _=r=>{var e;e=()=>{const e=v();if(e){const t=r.NAME,n=e.fn[t];e.fn[t]=r.jQueryInterface,e.fn[t].Constructor=r,e.fn[t].noConflict=()=>(e.fn[t]=n,r.jQueryInterface)}},"loading"===document.readyState?(x.length||document.addEventListener("DOMContentLoaded",()=>{x.forEach(e=>e())}),x.push(e)):e()};const w=e=>{"function"==typeof e&&e()},T=(n,r,e=!0)=>{if(e){e=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);var r=Number.parseFloat(t),e=Number.parseFloat(n);return r||e?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(r)+5;let t=!1;const a=({target:e})=>{e===r&&(t=!0,r.removeEventListener(i,a),w(n))};r.addEventListener(i,a),setTimeout(()=>{t||c(r)},e)}else w(n)},M=(e,t,n,r)=>{let a=e.indexOf(t);if(-1===a)return e[!n&&r?e.length-1:0];t=e.length;return a+=n?1:-1,r&&(a=(a+t)%t),e[Math.max(0,Math.min(a,t-1))]},k=/[^.]*(?=\..*)\.|.*/,A=/\..*/,S=/::\d+$/,E={};let L=1;const C={mouseenter:"mouseover",mouseleave:"mouseout"},D=/^(mouseenter|mouseleave)/i,O=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function P(e,t){return t&&`${t}::${L++}`||e.uidEvent||L++}function I(e){var t=P(e);return e.uidEvent=t,E[t]=E[t]||{},E[t]}function R(n,r,a=null){var i=Object.keys(n);for(let e=0,t=i.length;e<t;e++){var o=n[i[e]];if(o.originalHandler===r&&o.delegationSelector===a)return o}return null}function N(e,t,n){var r="string"==typeof t,t=r?n:t;let a=j(e);return O.has(a)||(a=e),[r,t,a]}function z(e,t,n,r,a){if("string"==typeof t&&e){n||(n=r,r=null),D.test(t)&&(s=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)},r?r=s(r):n=s(n));var[i,o,s]=N(t,n,r);const p=I(e),h=p[s]||(p[s]={}),m=R(h,o,i?n:null);if(m)m.oneOff=m.oneOff&&a;else{var l,c,u,d,f,t=P(o,t.replace(k,""));const g=i?(u=e,d=n,f=r,function n(r){var a=u.querySelectorAll(d);for(let{target:t}=r;t&&t!==this;t=t.parentNode)for(let e=a.length;e--;)if(a[e]===t)return r.delegateTarget=t,n.oneOff&&H.off(u,r.type,d,f),f.apply(t,[r]);return null}):(l=e,c=n,function e(t){return t.delegateTarget=l,e.oneOff&&H.off(l,t.type,c),c.apply(l,[t])});g.delegationSelector=i?n:null,g.originalHandler=o,g.oneOff=a,g.uidEvent=t,h[t]=g,e.addEventListener(s,g,i)}}}function F(e,t,n,r,a){r=R(t[n],r,a);r&&(e.removeEventListener(n,r,Boolean(a)),delete t[n][r.uidEvent])}function j(e){return e=e.replace(A,""),C[e]||e}const H={on(e,t,n,r){z(e,t,n,r,!1)},one(e,t,n,r){z(e,t,n,r,!0)},off(n,r,e,t){if("string"==typeof r&&n){const[a,i,o]=N(r,e,t),s=o!==r,l=I(n);t=r.startsWith(".");if(void 0!==i)return l&&l[o]?void F(n,l,o,i,a?e:null):void 0;t&&Object.keys(l).forEach(e=>{!function(t,n,r,a){const i=n[r]||{};Object.keys(i).forEach(e=>{e.includes(a)&&(e=i[e],F(t,n,r,e.originalHandler,e.delegationSelector))})}(n,l,e,r.slice(1))});const c=l[o]||{};Object.keys(c).forEach(e=>{var t=e.replace(S,"");s&&!r.includes(t)||(e=c[e],F(n,l,o,e.originalHandler,e.delegationSelector))})}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=v();var a=j(t),i=t!==a,o=O.has(a);let s,l=!0,c=!0,u=!1,d=null;return i&&r&&(s=r.Event(t,n),r(e).trigger(s),l=!s.isPropagationStopped(),c=!s.isImmediatePropagationStopped(),u=s.isDefaultPrevented()),o?(d=document.createEvent("HTMLEvents"),d.initEvent(a,l,!0)):d=new CustomEvent(t,{bubbles:l,cancelable:!0}),void 0!==n&&Object.keys(n).forEach(e=>{Object.defineProperty(d,e,{get(){return n[e]}})}),u&&d.preventDefault(),c&&e.dispatchEvent(d),d.defaultPrevented&&void 0!==s&&s.preventDefault(),d}},B=new Map;var q=function(e,t,n){B.has(e)||B.set(e,new Map);const r=B.get(e);r.has(t)||0===r.size?r.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},U=function(e,t){return B.has(e)&&B.get(e).get(t)||null},Y=function(e,t){if(B.has(e)){const n=B.get(e);n.delete(t),0===n.size&&B.delete(e)}};class V{constructor(e){(e=f(e))&&(this._element=e,q(this._element,this.constructor.DATA_KEY,this))}dispose(){Y(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(e=>{this[e]=null})}_queueCallback(e,t,n=!0){T(e,t,n)}static getInstance(e){return U(e,this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.0.2"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}class G extends V{static get NAME(){return"alert"}close(e){var t=e?this._getRootElement(e):this._element,e=this._triggerCloseEvent(t);null===e||e.defaultPrevented||this._removeElement(t)}_getRootElement(e){return a(e)||e.closest(".alert")}_triggerCloseEvent(e){return H.trigger(e,"close.bs.alert")}_removeElement(e){e.classList.remove("show");var t=e.classList.contains("fade");this._queueCallback(()=>this._destroyElement(e),e,t)}_destroyElement(e){e.remove(),H.trigger(e,"closed.bs.alert")}static jQueryInterface(t){return this.each(function(){const e=G.getOrCreateInstance(this);"close"===t&&e[t](this)})}static handleDismiss(t){return function(e){e&&e.preventDefault(),t.close(this)}}}H.on(document,"click.bs.alert.data-api",'[data-bs-dismiss="alert"]',G.handleDismiss(new G)),_(G);const W='[data-bs-toggle="button"]';class Z extends V{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const e=Z.getOrCreateInstance(this);"toggle"===t&&e[t]()})}}function $(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function X(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}H.on(document,"click.bs.button.data-api",W,e=>{e.preventDefault();e=e.target.closest(W);const t=Z.getOrCreateInstance(e);t.toggle()}),_(Z);const J={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${X(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${X(t)}`)},getDataAttributes(n){if(!n)return{};const r={};return Object.keys(n.dataset).filter(e=>e.startsWith("bs")).forEach(e=>{let t=e.replace(/^bs/,"");t=t.charAt(0).toLowerCase()+t.slice(1,t.length),r[t]=$(n.dataset[e])}),r},getDataAttribute(e,t){return $(e.getAttribute(`data-bs-${X(t)}`))},offset(e){e=e.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position(e){return{top:e.offsetTop,left:e.offsetLeft}}},K="carousel";var Q=".bs.carousel";const ee={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},te={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},ne="next",re="prev",ae="left",ie="right",oe={ArrowLeft:ie,ArrowRight:ae},se=`slid${Q}`;const le="active",ce=".active.carousel-item";class ue extends V{constructor(e,t){super(e),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._indicatorsElement=d.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return ee}static get NAME(){return K}next(){this._slide(ne)}nextWhenVisible(){!document.hidden&&p(this._element)&&this.next()}prev(){this._slide(re)}pause(e){e||(this._isPaused=!0),d.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(c(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=d.findOne(ce,this._element);var t=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)H.one(this._element,se,()=>this.to(e));else{if(t===e)return this.pause(),void this.cycle();t=t<e?ne:re;this._slide(t,this._items[e])}}_getConfig(e){return e={...ee,...J.getDataAttributes(this._element),..."object"==typeof e?e:{}},r(K,e,te),e}_handleSwipe(){var e=Math.abs(this.touchDeltaX);e<=40||(e=e/this.touchDeltaX,this.touchDeltaX=0,e&&this._slide(0<e?ie:ae))}_addEventListeners(){this._config.keyboard&&H.on(this._element,"keydown.bs.carousel",e=>this._keydown(e)),"hover"===this._config.pause&&(H.on(this._element,"mouseenter.bs.carousel",e=>this.pause(e)),H.on(this._element,"mouseleave.bs.carousel",e=>this.cycle(e))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=e=>{!this._pointerEvent||"pen"!==e.pointerType&&"touch"!==e.pointerType?this._pointerEvent||(this.touchStartX=e.touches[0].clientX):this.touchStartX=e.clientX},n=e=>{this.touchDeltaX=e.touches&&1<e.touches.length?0:e.touches[0].clientX-this.touchStartX},r=e=>{!this._pointerEvent||"pen"!==e.pointerType&&"touch"!==e.pointerType||(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(e=>this.cycle(e),500+this._config.interval))};d.find(".carousel-item img",this._element).forEach(e=>{H.on(e,"dragstart.bs.carousel",e=>e.preventDefault())}),this._pointerEvent?(H.on(this._element,"pointerdown.bs.carousel",e=>t(e)),H.on(this._element,"pointerup.bs.carousel",e=>r(e)),this._element.classList.add("pointer-event")):(H.on(this._element,"touchstart.bs.carousel",e=>t(e)),H.on(this._element,"touchmove.bs.carousel",e=>n(e)),H.on(this._element,"touchend.bs.carousel",e=>r(e)))}_keydown(e){var t;/input|textarea/i.test(e.target.tagName)||(t=oe[e.key])&&(e.preventDefault(),this._slide(t))}_getItemIndex(e){return this._items=e&&e.parentNode?d.find(".carousel-item",e.parentNode):[],this._items.indexOf(e)}_getItemByOrder(e,t){e=e===ne;return M(this._items,t,e,this._config.wrap)}_triggerSlideEvent(e,t){var n=this._getItemIndex(e),r=this._getItemIndex(d.findOne(ce,this._element));return H.trigger(this._element,"slide.bs.carousel",{relatedTarget:e,direction:t,from:r,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=d.findOne(".active",this._indicatorsElement);e.classList.remove(le),e.removeAttribute("aria-current");const n=d.find("[data-bs-target]",this._indicatorsElement);for(let e=0;e<n.length;e++)if(Number.parseInt(n[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[e].classList.add(le),n[e].setAttribute("aria-current","true");break}}}_updateInterval(){const e=this._activeElement||d.findOne(ce,this._element);var t;e&&((t=Number.parseInt(e.getAttribute("data-bs-interval"),10))?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval)}_slide(e,t){var n=this._directionToOrder(e);const r=d.findOne(ce,this._element),a=this._getItemIndex(r),i=t||this._getItemByOrder(n,r),o=this._getItemIndex(i);e=Boolean(this._interval),t=n===ne;const s=t?"carousel-item-start":"carousel-item-end",l=t?"carousel-item-next":"carousel-item-prev",c=this._orderToDirection(n);if(i&&i.classList.contains(le))this._isSliding=!1;else if(!this._isSliding){n=this._triggerSlideEvent(i,c);if(!n.defaultPrevented&&r&&i){this._isSliding=!0,e&&this.pause(),this._setActiveIndicatorElement(i),this._activeElement=i;const u=()=>{H.trigger(this._element,se,{relatedTarget:i,direction:c,from:a,to:o})};this._element.classList.contains("slide")?(i.classList.add(l),y(i),r.classList.add(s),i.classList.add(s),this._queueCallback(()=>{i.classList.remove(s,l),i.classList.add(le),r.classList.remove(le,l,s),this._isSliding=!1,setTimeout(u,0)},r,!0)):(r.classList.remove(le),i.classList.add(le),this._isSliding=!1,u()),e&&this.cycle()}}}_directionToOrder(e){return[ie,ae].includes(e)?b()?e===ae?re:ne:e===ae?ne:re:e}_orderToDirection(e){return[ne,re].includes(e)?b()?e===re?ae:ie:e===re?ie:ae:e}static carouselInterface(e,t){const n=ue.getOrCreateInstance(e,t);let{_config:r}=n;"object"==typeof t&&(r={...r,...t});e="string"==typeof t?t:r.slide;if("number"==typeof t)n.to(t);else if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}else r.interval&&r.ride&&(n.pause(),n.cycle())}static jQueryInterface(e){return this.each(function(){ue.carouselInterface(this,e)})}static dataApiClickHandler(e){const t=a(this);if(t&&t.classList.contains("carousel")){const r={...J.getDataAttributes(t),...J.getDataAttributes(this)};var n=this.getAttribute("data-bs-slide-to");n&&(r.interval=!1),ue.carouselInterface(t,r),n&&ue.getInstance(t).to(n),e.preventDefault()}}}H.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",ue.dataApiClickHandler),H.on(window,"load.bs.carousel.data-api",()=>{var n=d.find('[data-bs-ride="carousel"]');for(let e=0,t=n.length;e<t;e++)ue.carouselInterface(n[e],ue.getInstance(n[e]))}),_(ue);const de="collapse",fe="bs.collapse";e=`.${fe}`;const pe={toggle:!0,parent:""},he={toggle:"boolean",parent:"(string|element)"};const me="show",ge="collapse",ye="collapsing",ve="collapsed",xe='[data-bs-toggle="collapse"]';class be extends V{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=d.find(`${xe}[href="#${this._element.id}"],`+`${xe}[data-bs-target="#${this._element.id}"]`);var n=d.find(xe);for(let e=0,t=n.length;e<t;e++){var r=n[e],a=l(r),i=d.find(a).filter(e=>e===this._element);null!==a&&i.length&&(this._selector=a,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return pe}static get NAME(){return de}toggle(){this._element.classList.contains(me)?this.hide():this.show()}show(){if(!this._isTransitioning&&!this._element.classList.contains(me)){let e,t;this._parent&&(e=d.find(".show, .collapsing",this._parent).filter(e=>"string"==typeof this._config.parent?e.getAttribute("data-bs-parent")===this._config.parent:e.classList.contains(ge)),0===e.length&&(e=null));const r=d.findOne(this._selector);if(e){var n=e.find(e=>r!==e);if(t=n?be.getInstance(n):null,t&&t._isTransitioning)return}if(!H.trigger(this._element,"show.bs.collapse").defaultPrevented){e&&e.forEach(e=>{r!==e&&be.collapseInterface(e,"hide"),t||q(e,fe,null)});const a=this._getDimension();this._element.classList.remove(ge),this._element.classList.add(ye),this._element.style[a]=0,this._triggerArray.length&&this._triggerArray.forEach(e=>{e.classList.remove(ve),e.setAttribute("aria-expanded",!0)}),this.setTransitioning(!0);n=`scroll${a[0].toUpperCase()+a.slice(1)}`;this._queueCallback(()=>{this._element.classList.remove(ye),this._element.classList.add(ge,me),this._element.style[a]="",this.setTransitioning(!1),H.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[a]=`${this._element[n]}px`}}}hide(){if(!this._isTransitioning&&this._element.classList.contains(me)&&!H.trigger(this._element,"hide.bs.collapse").defaultPrevented){var e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,y(this._element),this._element.classList.add(ye),this._element.classList.remove(ge,me);var t=this._triggerArray.length;if(0<t)for(let e=0;e<t;e++){const n=this._triggerArray[e],r=a(n);r&&!r.classList.contains(me)&&(n.classList.add(ve),n.setAttribute("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[e]="",this._queueCallback(()=>{this.setTransitioning(!1),this._element.classList.remove(ye),this._element.classList.add(ge),H.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}}setTransitioning(e){this._isTransitioning=e}_getConfig(e){return(e={...pe,...e}).toggle=Boolean(e.toggle),r(de,e,he),e}_getDimension(){return this._element.classList.contains("width")?"width":"height"}_getParent(){var{parent:e}=this._config,e=f(e),t=`${xe}[data-bs-parent="${e}"]`;return d.find(t,e).forEach(e=>{var t=a(e);this._addAriaAndCollapsedClass(t,[e])}),e}_addAriaAndCollapsedClass(e,t){if(e&&t.length){const n=e.classList.contains(me);t.forEach(e=>{n?e.classList.remove(ve):e.classList.add(ve),e.setAttribute("aria-expanded",n)})}}static collapseInterface(e,t){let n=be.getInstance(e);const r={...pe,...J.getDataAttributes(e),..."object"==typeof t&&t?t:{}};if(!n&&r.toggle&&"string"==typeof t&&/show|hide/.test(t)&&(r.toggle=!1),n=n||new be(e,r),"string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}static jQueryInterface(e){return this.each(function(){be.collapseInterface(this,e)})}}H.on(document,"click.bs.collapse.data-api",xe,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const r=J.getDataAttributes(this);e=l(this);const t=d.find(e);t.forEach(e=>{const t=be.getInstance(e);let n;n=t?(null===t._parent&&"string"==typeof r.parent&&(t._config.parent=r.parent,t._parent=t._getParent()),"toggle"):r,be.collapseInterface(e,n)})}),_(be);const _e="dropdown";var we=".bs.dropdown",Q=".data-api";const Te="Escape",Me="ArrowUp",ke="ArrowDown",Ae=new RegExp(`${Me}|${ke}|${Te}`);var Se=`click${we}${Q}`,e=`keydown${we}${Q}`;const Ee="show",Le='[data-bs-toggle="dropdown"]',Ce=".dropdown-menu",De=b()?"top-end":"top-start",Oe=b()?"top-start":"top-end",Pe=b()?"bottom-end":"bottom-start",Ie=b()?"bottom-start":"bottom-end",Re=b()?"left-start":"right-start",Ne=b()?"right-start":"left-start",ze={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Fe={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class je extends V{constructor(e,t){super(e),this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}static get Default(){return ze}static get DefaultType(){return Fe}static get NAME(){return _e}toggle(){h(this._element)||(this._element.classList.contains(Ee)?this.hide():this.show())}show(){if(!h(this._element)&&!this._menu.classList.contains(Ee)){const n=je.getParentFromElement(this._element);var e={relatedTarget:this._element};if(!H.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(this._inNavbar)J.setDataAttribute(this._menu,"popper","none");else{if(void 0===o)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=n:u(this._config.reference)?e=f(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const r=this._getPopperConfig();var t=r.modifiers.find(e=>"applyStyles"===e.name&&!1===e.enabled);this._popper=o.createPopper(e,this._menu,r),t&&J.setDataAttribute(this._menu,"popper","static")}"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(e=>H.on(e,"mouseover",g)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.toggle(Ee),this._element.classList.toggle(Ee),H.trigger(this._element,"shown.bs.dropdown",e)}}}hide(){var e;!h(this._element)&&this._menu.classList.contains(Ee)&&(e={relatedTarget:this._element},this._completeHide(e))}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_addEventListeners(){H.on(this._element,"click.bs.dropdown",e=>{e.preventDefault(),this.toggle()})}_completeHide(e){H.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>H.off(e,"mouseover",g)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Ee),this._element.classList.remove(Ee),this._element.setAttribute("aria-expanded","false"),J.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,"hidden.bs.dropdown",e))}_getConfig(e){if(e={...this.constructor.Default,...J.getDataAttributes(this._element),...e},r(_e,e,this.constructor.DefaultType),"object"==typeof e.reference&&!u(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${_e.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_getMenuElement(){return d.next(this._element,Ce)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains("dropend"))return Re;if(e.classList.contains("dropstart"))return Ne;var t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Oe:De:t?Ie:Pe}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=d.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(p);n.length&&M(n,t,e===ke,!n.includes(t)).focus()}static dropdownInterface(e,t){const n=je.getOrCreateInstance(e,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}static jQueryInterface(e){return this.each(function(){je.dropdownInterface(this,e)})}static clearMenus(n){if(!n||2!==n.button&&("keyup"!==n.type||"Tab"===n.key)){var r=d.find(Le);for(let e=0,t=r.length;e<t;e++){const i=je.getInstance(r[e]);if(i&&!1!==i._config.autoClose&&i._element.classList.contains(Ee)){const o={relatedTarget:i._element};if(n){const s=n.composedPath();var a=s.includes(i._menu);if(s.includes(i._element)||"inside"===i._config.autoClose&&!a||"outside"===i._config.autoClose&&a)continue;if(i._menu.contains(n.target)&&("keyup"===n.type&&"Tab"===n.key||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;"click"===n.type&&(o.clickEvent=n)}i._completeHide(o)}}}}static getParentFromElement(e){return a(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?!("Space"===e.key||e.key!==Te&&(e.key!==ke&&e.key!==Me||e.target.closest(Ce))):Ae.test(e.key)){var t=this.classList.contains(Ee);if((t||e.key!==Te)&&(e.preventDefault(),e.stopPropagation(),!h(this))){var n=()=>this.matches(Le)?this:d.prev(this,Le)[0];return e.key===Te?(n().focus(),void je.clearMenus()):e.key===Me||e.key===ke?(t||n().click(),void je.getInstance(n())._selectMenuItem(e)):void(t&&"Space"!==e.key||je.clearMenus())}}}}H.on(document,e,Le,je.dataApiKeydownHandler),H.on(document,e,Ce,je.dataApiKeydownHandler),H.on(document,Se,je.clearMenus),H.on(document,"keyup.bs.dropdown.data-api",je.clearMenus),H.on(document,Se,Le,function(e){e.preventDefault(),je.dropdownInterface(this)}),_(je);const He=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Be=".sticky-top";class qe{constructor(){this._element=document.body}getWidth(){var e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",e=>e+t),this._setElementAttributes(He,"paddingRight",e=>e+t),this._setElementAttributes(Be,"marginRight",e=>e-t)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const a=this.getWidth();this._applyManipulationCallback(e,e=>{var t;e!==this._element&&window.innerWidth>e.clientWidth+a||(this._saveInitialAttribute(e,n),t=window.getComputedStyle(e)[n],e.style[n]=`${r(Number.parseFloat(t))}px`)})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(He,"paddingRight"),this._resetElementAttributes(Be,"marginRight")}_saveInitialAttribute(e,t){var n=e.style[t];n&&J.setDataAttribute(e,t,n)}_resetElementAttributes(e,n){this._applyManipulationCallback(e,e=>{var t=J.getDataAttribute(e,n);void 0===t?e.style.removeProperty(n):(J.removeDataAttribute(e,n),e.style[n]=t)})}_applyManipulationCallback(e,t){u(e)?t(e):d.find(e,this._element).forEach(t)}isOverflowing(){return 0<this.getWidth()}}const Ue={isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Ye={isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},Ve="backdrop",Ge=`mousedown.bs.${Ve}`;class We{constructor(e){this._config=this._getConfig(e),this._isAppended=!1,this._element=null}show(e){this._config.isVisible?(this._append(),this._config.isAnimated&&y(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation(()=>{w(e)})):w(e)}hide(e){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),w(e)})):w(e)}_getElement(){if(!this._element){const e=document.createElement("div");e.className="modal-backdrop",this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_getConfig(e){return(e={...Ue,..."object"==typeof e?e:{}}).rootElement=f(e.rootElement),r(Ve,e,Ye),e}_append(){this._isAppended||(this._config.rootElement.appendChild(this._getElement()),H.on(this._getElement(),Ge,()=>{w(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(H.off(this._element,Ge),this._element.remove(),this._isAppended=!1)}_emulateAnimation(e){T(e,this._getElement(),this._config.isAnimated)}}const Ze=".bs.modal";const $e={backdrop:!0,keyboard:!0,focus:!0},Xe={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Je=(Ze,Ze,`hidden${Ze}`),Ke=`show${Ze}`,Qe=(Ze,`focusin${Ze}`),et=`resize${Ze}`,tt=`click.dismiss${Ze}`,nt=`keydown.dismiss${Ze}`,rt=(Ze,`mousedown.dismiss${Ze}`);Ze;const at="modal-open",it="modal-static";class ot extends V{constructor(e,t){super(e),this._config=this._getConfig(t),this._dialog=d.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new qe}static get Default(){return $e}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||H.trigger(this._element,Ke,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(at),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),H.on(this._element,tt,'[data-bs-dismiss="modal"]',e=>this.hide(e)),H.on(this._dialog,rt,()=>{H.one(this._element,"mouseup.dismiss.bs.modal",e=>{e.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}hide(e){e&&["A","AREA"].includes(e.target.tagName)&&e.preventDefault(),this._isShown&&!this._isTransitioning&&(H.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,(e=this._isAnimated())&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),H.off(document,Qe),this._element.classList.remove("show"),H.off(this._element,tt),H.off(this._dialog,rt),this._queueCallback(()=>this._hideModal(),this._element,e)))}dispose(){[window,this._dialog].forEach(e=>H.off(e,Ze)),this._backdrop.dispose(),super.dispose(),H.off(document,Qe)}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new We({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_getConfig(e){return e={...$e,...J.getDataAttributes(this._element),..."object"==typeof e?e:{}},r("modal",e,Xe),e}_showElement(e){var t=this._isAnimated();const n=d.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),t&&y(this._element),this._element.classList.add("show"),this._config.focus&&this._enforceFocus();this._queueCallback(()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,H.trigger(this._element,"shown.bs.modal",{relatedTarget:e})},this._dialog,t)}_enforceFocus(){H.off(document,Qe),H.on(document,Qe,e=>{document===e.target||this._element===e.target||this._element.contains(e.target)||this._element.focus()})}_setEscapeEvent(){this._isShown?H.on(this._element,nt,e=>{this._config.keyboard&&"Escape"===e.key?(e.preventDefault(),this.hide()):this._config.keyboard||"Escape"!==e.key||this._triggerBackdropTransition()}):H.off(this._element,nt)}_setResizeEvent(){this._isShown?H.on(window,et,()=>this._adjustDialog()):H.off(window,et)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(at),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,Je)})}_showBackdrop(e){H.on(this._element,tt,e=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:e.target===e.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())}),this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(!H.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented){const{classList:e,scrollHeight:t,style:n}=this._element,r=t>document.documentElement.clientHeight;!r&&"hidden"===n.overflowY||e.contains(it)||(r||(n.overflowY="hidden"),e.add(it),this._queueCallback(()=>{e.remove(it),r||this._queueCallback(()=>{n.overflowY=""},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){var e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=0<t;(!n&&e&&!b()||n&&!e&&b())&&(this._element.style.paddingLeft=`${t}px`),(n&&!e&&!b()||!n&&e&&b())&&(this._element.style.paddingRight=`${t}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const e=ot.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](n)}})}}H.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(e){const t=a(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),H.one(t,Ke,e=>{e.defaultPrevented||H.one(t,Je,()=>{p(this)&&this.focus()})});const n=ot.getOrCreateInstance(t);n.toggle(this)}),_(ot);const st="offcanvas";e=".bs.offcanvas";const lt={backdrop:!0,keyboard:!0,scroll:!1},ct={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},ut=".offcanvas.show",dt=`hidden${e}`,ft=`focusin${e}`;class pt extends V{constructor(e,t){super(e),this._config=this._getConfig(t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._addEventListeners()}static get NAME(){return st}static get Default(){return lt}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||H.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||((new qe).hide(),this._enforceFocusOnElement(this._element)),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback(()=>{H.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(H.off(document,ft),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new qe).reset(),H.trigger(this._element,dt)},this._element,!0)))}dispose(){this._backdrop.dispose(),super.dispose(),H.off(document,ft)}_getConfig(e){return e={...lt,...J.getDataAttributes(this._element),..."object"==typeof e?e:{}},r(st,e,ct),e}_initializeBackDrop(){return new We({isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_enforceFocusOnElement(t){H.off(document,ft),H.on(document,ft,e=>{document===e.target||t===e.target||t.contains(e.target)||t.focus()}),t.focus()}_addEventListeners(){H.on(this._element,"click.dismiss.bs.offcanvas",'[data-bs-dismiss="offcanvas"]',()=>this.hide()),H.on(this._element,"keydown.dismiss.bs.offcanvas",e=>{this._config.keyboard&&"Escape"===e.key&&this.hide()})}static jQueryInterface(t){return this.each(function(){const e=pt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}H.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(e){var t=a(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),!h(this)){H.one(t,dt,()=>{p(this)&&this.focus()});e=d.findOne(ut);e&&e!==t&&pt.getInstance(e).hide();const n=pt.getOrCreateInstance(t);n.toggle(this)}}),H.on(window,"load.bs.offcanvas.data-api",()=>d.find(ut).forEach(e=>pt.getOrCreateInstance(e).show())),_(pt);const ht=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const mt=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i,gt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;Se={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function yt(e,n,t){if(!e.length)return e;if(t&&"function"==typeof t)return t(e);const r=new window.DOMParser,a=r.parseFromString(e,"text/html"),i=Object.keys(n);var o=[].concat(...a.body.querySelectorAll("*"));for(let e=0,t=o.length;e<t;e++){const l=o[e];var s=l.nodeName.toLowerCase();if(i.includes(s)){const c=[].concat(...l.attributes),u=[].concat(n["*"]||[],n[s]||[]);c.forEach(e=>{((e,t)=>{var n=e.nodeName.toLowerCase();if(t.includes(n))return!ht.has(n)||Boolean(mt.test(e.nodeValue)||gt.test(e.nodeValue));const r=t.filter(e=>e instanceof RegExp);for(let e=0,t=r.length;e<t;e++)if(r[e].test(n))return!0;return!1})(e,u)||l.removeAttribute(e.nodeName)})}else l.remove()}return a.body.innerHTML}const vt="tooltip";e=".bs.tooltip";const xt="bs-tooltip",bt=new RegExp(`(^|\\s)${xt}\\S+`,"g"),_t=new Set(["sanitize","allowList","sanitizeFn"]),wt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Tt={AUTO:"auto",TOP:"top",RIGHT:b()?"left":"right",BOTTOM:"bottom",LEFT:b()?"right":"left"},Mt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:Se,popperConfig:null},kt={HIDE:`hide${e}`,HIDDEN:`hidden${e}`,SHOW:`show${e}`,SHOWN:`shown${e}`,INSERTED:`inserted${e}`,CLICK:`click${e}`,FOCUSIN:`focusin${e}`,FOCUSOUT:`focusout${e}`,MOUSEENTER:`mouseenter${e}`,MOUSELEAVE:`mouseleave${e}`},At="fade",St="show",Et="show",Lt="hover",Ct="focus";class Dt extends V{constructor(e,t){if(void 0===o)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(t),this.tip=null,this._setListeners()}static get Default(){return Mt}static get NAME(){return vt}static get Event(){return kt}static get DefaultType(){return wt}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled)if(e){const t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click,t._isWithActiveTrigger()?t._enter(null,t):t._leave(null,t)}else this.getTipElement().classList.contains(St)?this._leave(null,this):this._enter(null,this)}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._popper&&this._popper.destroy(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(this.isWithContent()&&this._isEnabled){var e=H.trigger(this._element,this.constructor.Event.SHOW);const n=m(this._element);var t=(null===n?this._element.ownerDocument.documentElement:n).contains(this._element);if(!e.defaultPrevented&&t){const r=this.getTipElement();t=s(this.constructor.NAME);r.setAttribute("id",t),this._element.setAttribute("aria-describedby",t),this.setContent(),this._config.animation&&r.classList.add(At);t="function"==typeof this._config.placement?this._config.placement.call(this,r,this._element):this._config.placement,t=this._getAttachment(t);this._addAttachmentClass(t);const{container:a}=this._config;q(r,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.appendChild(r),H.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=o.createPopper(this._element,r,this._getPopperConfig(t)),r.classList.add(St);const i="function"==typeof this._config.customClass?this._config.customClass():this._config.customClass;i&&r.classList.add(...i.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>{H.on(e,"mouseover",g)});t=this.tip.classList.contains(At);this._queueCallback(()=>{var e=this._hoverState;this._hoverState=null,H.trigger(this._element,this.constructor.Event.SHOWN),"out"===e&&this._leave(null,this)},this.tip,t)}}}hide(){if(this._popper){const t=this.getTipElement();var e;H.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented||(t.classList.remove(St),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>H.off(e,"mouseover",g)),this._activeTrigger.click=!1,this._activeTrigger[Ct]=!1,this._activeTrigger[Lt]=!1,e=this.tip.classList.contains(At),this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==Et&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.Event.HIDDEN),this._popper&&(this._popper.destroy(),this._popper=null))},this.tip,e),this._hoverState="")}}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const e=document.createElement("div");return e.innerHTML=this._config.template,this.tip=e.children[0],this.tip}setContent(){const e=this.getTipElement();this.setElementContent(d.findOne(".tooltip-inner",e),this.getTitle()),e.classList.remove(At,St)}setElementContent(e,t){if(null!==e)return u(t)?(t=f(t),void(this._config.html?t.parentNode!==e&&(e.innerHTML="",e.appendChild(t)):e.textContent=t.textContent)):void(this._config.html?(this._config.sanitize&&(t=yt(t,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=t):e.textContent=t)}getTitle(){let e=this._element.getAttribute("data-bs-original-title");return e=e||("function"==typeof this._config.title?this._config.title.call(this._element):this._config.title),e}updateAttachment(e){return"right"===e?"end":"left"===e?"start":e}_initializeOnDelegatedTarget(e,t){var n=this.constructor.DATA_KEY;return(t=t||U(e.delegateTarget,n))||(t=new this.constructor(e.delegateTarget,this._getDelegateConfig()),q(e.delegateTarget,n,t)),t}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(e){e={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:e=>this._handlePopperPlacementChange(e)}],onFirstUpdate:e=>{e.options.placement!==e.placement&&this._handlePopperPlacementChange(e)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(`${xt}-${this.updateAttachment(e)}`)}_getAttachment(e){return Tt[e.toUpperCase()]}_setListeners(){const e=this._config.trigger.split(" ");e.forEach(e=>{var t;"click"===e?H.on(this._element,this.constructor.Event.CLICK,this._config.selector,e=>this.toggle(e)):"manual"!==e&&(t=e===Lt?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,e=e===Lt?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT,H.on(this._element,t,this._config.selector,e=>this._enter(e)),H.on(this._element,e,this._config.selector,e=>this._leave(e)))}),this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){var e=this._element.getAttribute("title"),t=typeof this._element.getAttribute("data-bs-original-title");!e&&"string"==t||(this._element.setAttribute("data-bs-original-title",e||""),!e||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}_enter(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusin"===e.type?Ct:Lt]=!0),t.getTipElement().classList.contains(St)||t._hoverState===Et?t._hoverState=Et:(clearTimeout(t._timeout),t._hoverState=Et,t._config.delay&&t._config.delay.show?t._timeout=setTimeout(()=>{t._hoverState===Et&&t.show()},t._config.delay.show):t.show())}_leave(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusout"===e.type?Ct:Lt]=t._element.contains(e.relatedTarget)),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState="out",t._config.delay&&t._config.delay.hide?t._timeout=setTimeout(()=>{"out"===t._hoverState&&t.hide()},t._config.delay.hide):t.hide())}_isWithActiveTrigger(){for(const e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}_getConfig(e){const t=J.getDataAttributes(this._element);return Object.keys(t).forEach(e=>{_t.has(e)&&delete t[e]}),(e={...this.constructor.Default,...t,..."object"==typeof e&&e?e:{}}).container=!1===e.container?document.body:f(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),r(vt,e,this.constructor.DefaultType),e.sanitize&&(e.template=yt(e.template,e.allowList,e.sanitizeFn)),e}_getDelegateConfig(){const e={};if(this._config)for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e}_cleanTipClass(){const t=this.getTipElement(),e=t.getAttribute("class").match(bt);null!==e&&0<e.length&&e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}_handlePopperPlacementChange(e){var{state:e}=e;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}static jQueryInterface(t){return this.each(function(){const e=Dt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}_(Dt);e=".bs.popover";const Ot="bs-popover",Pt=new RegExp(`(^|\\s)${Ot}\\S+`,"g"),It={...Dt.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Rt={...Dt.DefaultType,content:"(string|element|function)"},Nt={HIDE:`hide${e}`,HIDDEN:`hidden${e}`,SHOW:`show${e}`,SHOWN:`shown${e}`,INSERTED:`inserted${e}`,CLICK:`click${e}`,FOCUSIN:`focusin${e}`,FOCUSOUT:`focusout${e}`,MOUSEENTER:`mouseenter${e}`,MOUSELEAVE:`mouseleave${e}`},zt=".popover-header",Ft=".popover-body";class jt extends Dt{static get Default(){return It}static get NAME(){return"popover"}static get Event(){return Nt}static get DefaultType(){return Rt}isWithContent(){return this.getTitle()||this._getContent()}getTipElement(){return this.tip||(this.tip=super.getTipElement(),this.getTitle()||d.findOne(zt,this.tip).remove(),this._getContent()||d.findOne(Ft,this.tip).remove(),this.tip)}setContent(){const e=this.getTipElement();this.setElementContent(d.findOne(zt,e),this.getTitle());let t=this._getContent();"function"==typeof t&&(t=t.call(this._element)),this.setElementContent(d.findOne(Ft,e),t),e.classList.remove("fade","show")}_addAttachmentClass(e){this.getTipElement().classList.add(`${Ot}-${this.updateAttachment(e)}`)}_getContent(){return this._element.getAttribute("data-bs-content")||this._config.content}_cleanTipClass(){const t=this.getTipElement(),e=t.getAttribute("class").match(Pt);null!==e&&0<e.length&&e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}static jQueryInterface(t){return this.each(function(){const e=jt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}_(jt);const Ht="scrollspy";const Bt=".bs.scrollspy";const qt={offset:10,method:"auto",target:""},Ut={offset:"number",method:"string",target:"(string|element)"};Bt,Bt;Bt;const Yt="dropdown-item",Vt="active",Gt=".nav-link",Wt=".list-group-item",Zt="position";class $t extends V{constructor(e,t){super(e),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(t),this._selector=`${this._config.target} ${Gt}, ${this._config.target} ${Wt}, ${this._config.target} .${Yt}`,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,H.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return qt}static get NAME(){return Ht}refresh(){var e=this._scrollElement===this._scrollElement.window?"offset":Zt;const r="auto"===this._config.method?e:this._config.method,a=r===Zt?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();const t=d.find(this._selector);t.map(e=>{var t=l(e);const n=t?d.findOne(t):null;if(n){e=n.getBoundingClientRect();if(e.width||e.height)return[J[r](n).top+a,t]}return null}).filter(e=>e).sort((e,t)=>e[0]-t[0]).forEach(e=>{this._offsets.push(e[0]),this._targets.push(e[1])})}dispose(){H.off(this._scrollElement,Bt),super.dispose()}_getConfig(t){if("string"!=typeof(t={...qt,...J.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}}).target&&u(t.target)){let{id:e}=t.target;e||(e=s(Ht),t.target.id=e),t.target=`#${e}`}return r(Ht,t,Ut),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;)this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}_activate(t){this._activeTarget=t,this._clear();const e=this._selector.split(",").map(e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`),n=d.findOne(e.join(","));n.classList.contains(Yt)?(d.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(Vt),n.classList.add(Vt)):(n.classList.add(Vt),d.parents(n,".nav, .list-group").forEach(e=>{d.prev(e,`${Gt}, ${Wt}`).forEach(e=>e.classList.add(Vt)),d.prev(e,".nav-item").forEach(e=>{d.children(e,Gt).forEach(e=>e.classList.add(Vt))})})),H.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){d.find(this._selector).filter(e=>e.classList.contains(Vt)).forEach(e=>e.classList.remove(Vt))}static jQueryInterface(t){return this.each(function(){const e=$t.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}H.on(window,"load.bs.scrollspy.data-api",()=>{d.find('[data-bs-spy="scroll"]').forEach(e=>new $t(e))}),_($t);e=".bs.tab";const Xt="active",Jt=".active",Kt=":scope > li > .active";class Qt extends V{static get NAME(){return"tab"}show(){if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE||!this._element.classList.contains(Xt)){let e;var t=a(this._element),n=this._element.closest(".nav, .list-group");n&&(r="UL"===n.nodeName||"OL"===n.nodeName?Kt:Jt,e=d.find(r,n),e=e[e.length-1]);var r=e?H.trigger(e,"hide.bs.tab",{relatedTarget:this._element}):null;H.trigger(this._element,"show.bs.tab",{relatedTarget:e}).defaultPrevented||null!==r&&r.defaultPrevented||(this._activate(this._element,n),n=()=>{H.trigger(e,"hidden.bs.tab",{relatedTarget:this._element}),H.trigger(this._element,"shown.bs.tab",{relatedTarget:e})},t?this._activate(t,t.parentNode,n):n())}}_activate(e,t,n){const r=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?d.children(t,Jt):d.find(Kt,t))[0];var a=n&&r&&r.classList.contains("fade"),t=()=>this._transitionComplete(e,r,n);r&&a?(r.classList.remove("show"),this._queueCallback(t,e,!0)):t()}_transitionComplete(e,t,n){if(t){t.classList.remove(Xt);const a=d.findOne(":scope > .dropdown-menu .active",t.parentNode);a&&a.classList.remove(Xt),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}e.classList.add(Xt),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),y(e),e.classList.contains("fade")&&e.classList.add("show");let r=e.parentNode;r&&"LI"===r.nodeName&&(r=r.parentNode),r&&r.classList.contains("dropdown-menu")&&((t=e.closest(".dropdown"))&&d.find(".dropdown-toggle",t).forEach(e=>e.classList.add(Xt)),e.setAttribute("aria-expanded",!0)),n&&n()}static jQueryInterface(t){return this.each(function(){const e=Qt.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}H.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),!h(this)){const t=Qt.getOrCreateInstance(this);t.show()}}),_(Qt);e=".bs.toast";const en="show",tn="showing",nn={animation:"boolean",autohide:"boolean",delay:"number"},rn={animation:!0,autohide:!0,delay:5e3};class an extends V{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return nn}static get Default(){return rn}static get NAME(){return"toast"}show(){H.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),y(this._element),this._element.classList.add(tn),this._queueCallback(()=>{this._element.classList.remove(tn),this._element.classList.add(en),H.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(en)&&(H.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.remove(en),this._queueCallback(()=>{this._element.classList.add("hide"),H.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(en)&&this._element.classList.remove(en),super.dispose()}_getConfig(e){return e={...rn,...J.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}},r("toast",e,this.constructor.DefaultType),e}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}t?this._clearTimeout():(e=e.relatedTarget,this._element===e||this._element.contains(e)||this._maybeScheduleHide())}_setListeners(){H.on(this._element,"click.dismiss.bs.toast",'[data-bs-dismiss="toast"]',()=>this.hide()),H.on(this._element,"mouseover.bs.toast",e=>this._onInteraction(e,!0)),H.on(this._element,"mouseout.bs.toast",e=>this._onInteraction(e,!1)),H.on(this._element,"focusin.bs.toast",e=>this._onInteraction(e,!0)),H.on(this._element,"focusout.bs.toast",e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=an.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}})}}return _(an),{Alert:G,Button:Z,Carousel:ue,Collapse:be,Dropdown:je,Modal:ot,Offcanvas:pt,Popover:jt,ScrollSpy:$t,Tab:Qt,Toast:an,Tooltip:Dt}}),function(e,t){"function"==typeof define&&define.amd?define([],t):e.htmx=t()}("undefined"!=typeof self?self:this,function(){"use strict";var htmx={onLoad:onLoadHelper,process:processNode,on:addEventListenerImpl,off:removeEventListenerImpl,trigger:triggerEvent,ajax:ajaxHelper,find:find,findAll:findAll,closest:closest,values:function(e,t){return getInputValues(e,t||"post").values},remove:removeElement,addClass:addClassToElement,removeClass:removeClassFromElement,toggleClass:toggleClassOnElement,takeClass:takeClassForElement,defineExtension:defineExtension,removeExtension:removeExtension,logAll:logAll,logger:null,useTemplateFragments:!1,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,attributesToSettle:["class","style","width","height"],withCredentials:!1,wsReconnectDelay:"full-jitter",disableSelector:"[hx-disable], [data-hx-disable]"},parseInterval:parseInterval,_:internalEval,createEventSource:function(e){return new EventSource(e,{withCredentials:!0})},createWebSocket:function(e){return new WebSocket(e,[])}},VERBS=["get","post","put","delete","patch"],VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function parseInterval(e){if(null!=e)return"ms"==e.slice(-2)?parseFloat(e.slice(0,-2))||void 0:"s"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1))||void 0:parseFloat(e)||void 0}function getRawAttribute(e,t){return e.getAttribute&&e.getAttribute(t)}function hasAttribute(e,t){return e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){return e.parentElement}function getDocument(){return document}function getClosestMatch(e,t){return t(e)?e:parentElt(e)?getClosestMatch(parentElt(e),t):null}function getClosestAttributeValue(e,t){var n=null;return getClosestMatch(e,function(e){return n=getAttributeValue(e,t)}),n}function matches(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function getStartTag(e){e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return e?e[1].toLowerCase():""}function parseHTML(e,t){for(var n=(new DOMParser).parseFromString(e,"text/html").body;0<t;)t--,n=n.firstChild;return n=null==n?getDocument().createDocumentFragment():n}function makeFragment(e){if(htmx.config.useTemplateFragments)return parseHTML("<body><template>"+e+"</template></body>",0).querySelector("template").content;switch(getStartTag(e)){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return parseHTML("<table>"+e+"</table>",1);case"col":return parseHTML("<table><colgroup>"+e+"</colgroup></table>",2);case"tr":return parseHTML("<table><tbody>"+e+"</tbody></table>",2);case"td":case"th":return parseHTML("<table><tbody><tr>"+e+"</tr></tbody></table>",3);case"script":return parseHTML("<div>"+e+"</div>",1);default:return parseHTML(e,0)}}function maybeCall(e){e&&e()}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return isType(e,"Function")}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){var t="htmx-internal-data";return e[t]||(e[t]={})}function toArray(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n]);return t}function forEach(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n])}function isScrolledIntoView(e){var t=e.getBoundingClientRect(),e=t.top,t=t.bottom;return e<window.innerHeight&&0<=t}function bodyContains(e){return getDocument().body.contains(e)}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function parseJSON(e){try{return JSON.parse(e)}catch(e){return logError(e),null}}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){return htmx.on("htmx:load",function(e){t(e.detail.elt)})}function logAll(){htmx.logger=function(e,t,n){console&&console.log(t,e,n)}}function find(e,t){return t?e.querySelector(t):find(getDocument(),e)}function findAll(e,t){return t?e.querySelectorAll(t):findAll(getDocument(),e)}function removeElement(e,t){e=resolveTarget(e),t?setTimeout(function(){removeElement(e)},t):e.parentElement.removeChild(e)}function addClassToElement(e,t,n){e=resolveTarget(e),n?setTimeout(function(){addClassToElement(e,t)},n):e.classList.add(t)}function removeClassFromElement(e,t,n){e=resolveTarget(e),n?setTimeout(function(){removeClassFromElement(e,t)},n):e.classList.remove(t)}function toggleClassOnElement(e,t){(e=resolveTarget(e)).classList.toggle(t)}function takeClassForElement(e,t){forEach((e=resolveTarget(e)).parentElement.children,function(e){removeClassFromElement(e,t)}),addClassToElement(e,t)}function closest(e,t){if((e=resolveTarget(e)).closest)return e.closest(t);do{if(null==e||matches(e,t))return e}while(e=e&&parentElt(e))}function querySelectorAllExt(e,t){return 0===t.indexOf("closest ")?[closest(e,t.substr(8))]:0===t.indexOf("find ")?[find(e,t.substr(5))]:getDocument().querySelectorAll(t)}function querySelectorExt(e,t){return querySelectorAllExt(e,t)[0]}function resolveTarget(e){return isType(e,"String")?find(e):e}function processEventArgs(e,t,n){return isFunction(t)?{target:getDocument().body,event:e,listener:t}:{target:resolveTarget(e),event:t,listener:n}}function addEventListenerImpl(t,n,r){return ready(function(){var e=processEventArgs(t,n,r);e.target.addEventListener(e.event,e.listener)}),isFunction(n)?n:r}function removeEventListenerImpl(t,n,r){return ready(function(){var e=processEventArgs(t,n,r);e.target.removeEventListener(e.event,e.listener)}),isFunction(n)?n:r}function getTarget(e){var t=getClosestMatch(e,function(e){return null!==getAttributeValue(e,"hx-target")});if(t){var n=getAttributeValue(t,"hx-target");return"this"===n?t:querySelectorExt(e,n)}return getInternalData(e).boosted?getDocument().body:e}function shouldSettleAttribute(e){for(var t=htmx.config.attributesToSettle,n=0;n<t.length;n++)if(e===t[n])return 1}function cloneAttributes(t,n){forEach(t.attributes,function(e){!n.hasAttribute(e.name)&&shouldSettleAttribute(e.name)&&t.removeAttribute(e.name)}),forEach(n.attributes,function(e){shouldSettleAttribute(e.name)&&t.setAttribute(e.name,e.value)})}function isInlineSwap(e,t){for(var n=getExtensions(t),r=0;r<n.length;r++){var a=n[r];try{if(a.isInlineSwap(e))return 1}catch(e){logError(e)}}return"outerHTML"===e}function oobSwap(e,t,n){var r="#"+t.id,a="outerHTML";"true"===e||(0<e.indexOf(":")?(a=e.substr(0,e.indexOf(":")),r=e.substr(e.indexOf(":")+1,e.length)):a=e);var i=getDocument().querySelector(r);return i?((r=getDocument().createDocumentFragment()).appendChild(t),swap(a,i,i,r=!isInlineSwap(a,i)?t:r,n)):(t.parentNode.removeChild(t),triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:t})),e}function handleOutOfBandSwaps(e,n){forEach(findAll(e,"[hx-swap-oob], [data-hx-swap-oob]"),function(e){var t=getAttributeValue(e,"hx-swap-oob");null!=t&&oobSwap(t,e,n)})}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=getAttributeValue(e,"id"),t=getDocument().getElementById(t);null!=t&&e.parentNode.replaceChild(t,e)})}function handleAttributes(r,e,a){forEach(e.querySelectorAll("[id]"),function(e){var t,n;e.id&&0<e.id.length&&((t=r.querySelector(e.tagName+"[id='"+e.id+"']"))&&t!==r&&(n=e.cloneNode(),cloneAttributes(e,t),a.tasks.push(function(){cloneAttributes(e,n)})))})}function makeAjaxLoadTask(e){return function(){processNode(e),processScripts(e),processFocus(e),triggerEvent(e,"htmx:load")}}function processFocus(e){var t="[autofocus]",t=matches(e,t)?e:e.querySelector(t);null!=t&&t.focus()}function insertNodesBefore(e,t,n,r){for(handleAttributes(e,n,r);0<n.childNodes.length;){var a=n.firstChild;e.insertBefore(a,t),a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.COMMENT_NODE&&r.tasks.push(makeAjaxLoadTask(a))}}function cleanUpElement(t){var e=getInternalData(t);e.webSocket&&e.webSocket.close(),e.sseEventSource&&e.sseEventSource.close(),e.listenerInfos&&forEach(e.listenerInfos,function(e){t!==e.on&&e.on.removeEventListener(e.trigger,e.listener)}),t.children&&forEach(t.children,function(e){cleanUpElement(e)})}function swapOuterHTML(e,t,n){if("BODY"===e.tagName)return swapInnerHTML(e,t,n);var r,a=e.previousSibling;for(insertNodesBefore(parentElt(e),e,t,n),r=null==a?parentElt(e).firstChild:a.nextSibling,getInternalData(e).replacedWith=r,n.elts=[];r&&r!==e;)r.nodeType===Node.ELEMENT_NODE&&n.elts.push(r),r=r.nextElementSibling;cleanUpElement(e),parentElt(e).removeChild(e)}function swapAfterBegin(e,t,n){return insertNodesBefore(e,e.firstChild,t,n)}function swapBeforeBegin(e,t,n){return insertNodesBefore(parentElt(e),e,t,n)}function swapBeforeEnd(e,t,n){return insertNodesBefore(e,null,t,n)}function swapAfterEnd(e,t,n){return insertNodesBefore(parentElt(e),e.nextSibling,t,n)}function swapInnerHTML(e,t,n){var r=e.firstChild;if(insertNodesBefore(e,r,t,n),r){for(;r.nextSibling;)cleanUpElement(r.nextSibling),e.removeChild(r.nextSibling);cleanUpElement(r),e.removeChild(r)}}function maybeSelectFromResponse(e,t){var n,e=getClosestAttributeValue(e,"hx-select");return e&&(n=getDocument().createDocumentFragment(),forEach(t.querySelectorAll(e),function(e){n.appendChild(e)}),t=n),t}function swap(e,t,n,r,a){switch(e){case"none":return;case"outerHTML":return void swapOuterHTML(n,r,a);case"afterbegin":return void swapAfterBegin(n,r,a);case"beforebegin":return void swapBeforeBegin(n,r,a);case"beforeend":return void swapBeforeEnd(n,r,a);case"afterend":return void swapAfterEnd(n,r,a);default:for(var i=getExtensions(t),o=0;o<i.length;o++){var s=i[o];try{var l=s.handleSwap(e,n,r,a);if(l){if(void 0!==l.length)for(var c=0;c<l.length;c++){var u=l[c];u.nodeType!==Node.TEXT_NODE&&u.nodeType!==Node.COMMENT_NODE&&a.tasks.push(makeAjaxLoadTask(u))}return}}catch(e){logError(e)}}swapInnerHTML(n,r,a)}}var TITLE_FINDER=/<title>([\s\S]+?)<\/title>/im;function findTitle(e){if(-1<e.indexOf("<title>")&&(-1==e.indexOf("<svg>")||e.indexOf("<title>")<e.indexOf("<svg>"))){e=TITLE_FINDER.exec(e);if(e)return e[1]}}function selectAndSwap(e,t,n,r,a){var i,o=findTitle(r);o&&((i=find("title"))?i.innerHTML=o:window.document.title=o);r=makeFragment(r);return r&&(handleOutOfBandSwaps(r,a),handlePreservedElements(r=maybeSelectFromResponse(n,r)),swap(e,n,t,r,a))}function handleTrigger(e,t,n){t=e.getResponseHeader(t);if(0===t.indexOf("{")){var r,a,i=parseJSON(t);for(r in i)i.hasOwnProperty(r)&&triggerEvent(n,r,a=!isRawObject(a=i[r])?{value:a}:a)}else triggerEvent(n,t,[])}var WHITESPACE=/\s/,WHITESPACE_OR_COMMA=/[\s,]/,SYMBOL_START=/[_$a-zA-Z]/,SYMBOL_CONT=/[_$a-zA-Z0-9]/,STRINGISH_START=['"',"'","/"],NOT_WHITESPACE=/[^\s]/;function tokenizeString(e){for(var t=[],n=0;n<e.length;){if(SYMBOL_START.exec(e.charAt(n))){for(var r=n;SYMBOL_CONT.exec(e.charAt(n+1));)n++;t.push(e.substr(r,n-r+1))}else if(-1!==STRINGISH_START.indexOf(e.charAt(n))){var a=e.charAt(n),r=n;for(n++;n<e.length&&e.charAt(n)!==a;)"\\"===e.charAt(n)&&n++,n++;t.push(e.substr(r,n-r+1))}else{var i=e.charAt(n);t.push(i)}n++}return t}function isPossibleRelativeReference(e,t,n){return SYMBOL_START.exec(e.charAt(0))&&"true"!==e&&"false"!==e&&"this"!==e&&e!==n&&"."!==t}function maybeGenerateConditional(e,t,n){if("["===t[0]){t.shift();for(var r=1,a=" return (function("+n+"){ return (",i=null;0<t.length;){var o=t[0];if("]"===o){if(0===--r){null===i&&(a+="true"),t.shift(),a+=")})";try{var s=maybeEval(e,function(){return Function(a)()},function(){return!0});return s.source=a,s}catch(e){return triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:e,source:a}),null}}}else"["===o&&r++;isPossibleRelativeReference(o,i,n)?a+="(("+n+"."+o+") ? ("+n+"."+o+") : (window."+o+"))":a+=o,i=t.shift()}}}function consumeUntil(e,t){for(var n="";0<e.length&&!e[0].match(t);)n+=e.shift();return n}var INPUT_SELECTOR="input, textarea, select";function getTriggerSpecs(e){var t=getAttributeValue(e,"hx-trigger"),n=[];if(t){var r=tokenizeString(t);do{consumeUntil(r,NOT_WHITESPACE);var a=r.length,i=consumeUntil(r,/[,\[\s]/);if(""!==i)if("every"===i){var o={trigger:"every"};consumeUntil(r,NOT_WHITESPACE),o.pollInterval=parseInterval(consumeUntil(r,WHITESPACE)),n.push(o)}else if(0===i.indexOf("sse:"))n.push({trigger:"sse",sseEvent:i.substr(4)});else{var s={trigger:i},i=maybeGenerateConditional(e,r,"event");for(i&&(s.eventFilter=i);0<r.length&&","!==r[0];){consumeUntil(r,NOT_WHITESPACE);var l=r.shift();"changed"===l?s.changed=!0:"once"===l?s.once=!0:"consume"===l?s.consume=!0:"delay"===l&&":"===r[0]?(r.shift(),s.delay=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):"from"===l&&":"===r[0]?(r.shift(),s.from=consumeUntil(r,WHITESPACE_OR_COMMA)):"target"===l&&":"===r[0]?(r.shift(),s.target=consumeUntil(r,WHITESPACE_OR_COMMA)):"throttle"===l&&":"===r[0]?(r.shift(),s.throttle=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):"queue"===l&&":"===r[0]?(r.shift(),s.queue=consumeUntil(r,WHITESPACE_OR_COMMA)):"root"!==l&&"threshold"!==l||":"!==r[0]?triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()}):(r.shift(),s[l]=consumeUntil(r,WHITESPACE_OR_COMMA))}n.push(s)}}while(r.length===a&&triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()}),consumeUntil(r,NOT_WHITESPACE),","===r[0]&&r.shift())}return 0<n.length?n:matches(e,"form")?[{trigger:"submit"}]:matches(e,INPUT_SELECTOR)?[{trigger:"change"}]:[{trigger:"click"}]}function cancelPolling(e){getInternalData(e).cancelled=!0}function processPolling(e,t,n,r){var a=getInternalData(e);a.timeout=setTimeout(function(){bodyContains(e)&&!0!==a.cancelled&&(issueAjaxRequest(t,n,e),processPolling(e,t,getAttributeValue(e,"hx-"+t),r))},r)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&0!==getRawAttribute(e,"href").indexOf("#")}function boostElement(t,n,e){var r,a,i;("A"===t.tagName&&isLocalLink(t)||"FORM"===t.tagName)&&(n.boosted=!0,"A"===t.tagName?(i="get",r=getRawAttribute(t,"href"),n.pushURL=!0):(a=getRawAttribute(t,"method"),"get"===(i=a?a.toLowerCase():"get")&&(n.pushURL=!0),r=getRawAttribute(t,"action")),e.forEach(function(e){addEventListener(t,i,r,n,e,!0)}))}function shouldCancel(e){return"FORM"===e.tagName||matches(e,'input[type="submit"], button')&&null!==closest(e,"form")||"A"===e.tagName&&e.href&&("#"===e.getAttribute("href")||0!==e.getAttribute("href").indexOf("#"))}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&"A"===e.tagName&&"click"===t.type&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(t,e){t=t.eventFilter;if(t)try{return!0!==t(e)}catch(e){return triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:e,source:t.source}),1}}function addEventListener(r,a,i,e,o,s){var l=r;o.from&&(l=find(o.from));var c=function(e){if(bodyContains(r)){if(!ignoreBoostedAnchorCtrlClick(r,e)&&((s||shouldCancel(r))&&e.preventDefault(),!maybeFilterEvent(o,e))){var t=getInternalData(e);t.triggerSpec=o,null==t.handledFor&&(t.handledFor=[]);var n=getInternalData(r);if(t.handledFor.indexOf(r)<0&&(t.handledFor.push(r),o.consume&&e.stopPropagation(),!o.target||!e.target||matches(e.target,o.target))){if(o.once){if(n.triggeredOnce)return;n.triggeredOnce=!0}if(o.changed){if(n.lastValue===r.value)return;n.lastValue=r.value}n.delayed&&clearTimeout(n.delayed),n.throttle||(o.throttle?n.throttle||(issueAjaxRequest(a,i,r,e),n.throttle=setTimeout(function(){n.throttle=null},o.throttle)):o.delay?n.delayed=setTimeout(function(){issueAjaxRequest(a,i,r,e)},o.delay):issueAjaxRequest(a,i,r,e))}}}else l.removeEventListener(o.trigger,c)};null==e.listenerInfos&&(e.listenerInfos=[]),e.listenerInfos.push({trigger:o.trigger,listener:c,on:l}),l.addEventListener(o.trigger,c)}var windowIsScrolling=!1,scrollHandler=null;function initScrollHandler(){scrollHandler||(scrollHandler=function(){windowIsScrolling=!0},window.addEventListener("scroll",scrollHandler),setInterval(function(){windowIsScrolling&&(windowIsScrolling=!1,forEach(getDocument().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(e){maybeReveal(e)}))},200))}function maybeReveal(e){var t=getInternalData(e);!t.revealed&&isScrolledIntoView(e)&&(t.revealed=!0,t.initialized?issueAjaxRequest(t.verb,t.path,e):e.addEventListener("htmx:afterProcessNode",function(){issueAjaxRequest(t.verb,t.path,e)},{once:!0}))}function processWebSocketInfo(e,t,n){for(var r=splitOnWhitespace(n),a=0;a<r.length;a++){var i=r[a].split(/:(.+)/);"connect"===i[0]&&ensureWebSocket(e,i[1],0),"send"===i[0]&&processWebSocketSend(e)}}function ensureWebSocket(o,t,n){var e,r;bodyContains(o)&&(0==t.indexOf("/")&&(e=location.hostname+(location.port?":"+location.port:""),"https:"==location.protocol?t="wss://"+e+t:"http:"==location.protocol&&(t="ws://"+e+t)),(r=htmx.createWebSocket(t)).onerror=function(e){triggerErrorEvent(o,"htmx:wsError",{error:e,socket:r}),maybeCloseWebSocketSource(o)},r.onclose=function(e){[1006,1012,1013].includes(e.code)&&(e=getWebSocketReconnectDelay(n),setTimeout(function(){ensureWebSocket(o,t,n+1)},e))},r.onopen=function(e){n=0},(getInternalData(o).webSocket=r).addEventListener("message",function(e){if(!maybeCloseWebSocketSource(o)){var t=e.data;withExtensions(o,function(e){t=e.transformResponse(t,null,o)});for(var n=makeSettleInfo(o),r=toArray(makeFragment(t).children),a=0;a<r.length;a++){var i=r[a];oobSwap(getAttributeValue(i,"hx-swap-oob")||"true",i,n)}settleImmediately(n.tasks)}}))}function maybeCloseWebSocketSource(e){return!bodyContains(e)&&(getInternalData(e).webSocket.close(),1)}function processWebSocketSend(i){var o=getClosestMatch(i,function(e){return null!=getInternalData(e).webSocket});o?i.addEventListener(getTriggerSpecs(i)[0].trigger,function(e){var t=getInternalData(o).webSocket,n=getHeaders(i,o),r=getInputValues(i,"post"),a=r.errors,r=filterValues(mergeObjects(r.values,getExpressionVars(i)),i);r.HEADERS=n,a&&0<a.length?triggerEvent(i,"htmx:validation:halted",a):(t.send(JSON.stringify(r)),shouldCancel(i)&&e.preventDefault())}):triggerErrorEvent(i,"htmx:noWebSocketSourceError")}function getWebSocketReconnectDelay(e){var t=htmx.config.wsReconnectDelay;if("function"==typeof t)return t(e);if("full-jitter"===t){e=Math.min(e,6);return 1e3*Math.pow(2,e)*Math.random()}logError('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function processSSEInfo(e,t,n){for(var r=splitOnWhitespace(n),a=0;a<r.length;a++){var i=r[a].split(/:(.+)/);"connect"===i[0]&&processSSESource(e,i[1]),"swap"===i[0]&&processSSESwap(e,i[1])}}function processSSESource(t,e){var n=htmx.createEventSource(e);n.onerror=function(e){triggerErrorEvent(t,"htmx:sseError",{error:e,source:n}),maybeCloseSSESource(t)},getInternalData(t).sseEventSource=n}function processSSESwap(i,o){var s,l,c=getClosestMatch(i,hasEventSource);c?(s=getInternalData(c).sseEventSource,l=function(e){var t,n,r,a;maybeCloseSSESource(c)?s.removeEventListener(o,l):(t=e.data,withExtensions(i,function(e){t=e.transformResponse(t,null,i)}),n=getSwapSpecification(i),r=getTarget(i),a=makeSettleInfo(i),selectAndSwap(n.swapStyle,i,r,t,a),settleImmediately(a.tasks),triggerEvent(i,"htmx:sseMessage",e))},getInternalData(i).sseListener=l,s.addEventListener(o,l)):triggerErrorEvent(i,"htmx:noSSESourceError")}function processSSETrigger(e,t,n,r){var a,i,o=getClosestMatch(e,hasEventSource);o?(a=getInternalData(o).sseEventSource,i=function(){maybeCloseSSESource(o)||(bodyContains(e)?issueAjaxRequest(t,n,e):a.removeEventListener(r,i))},getInternalData(e).sseListener=i,a.addEventListener(r,i)):triggerErrorEvent(e,"htmx:noSSESourceError")}function maybeCloseSSESource(e){return!bodyContains(e)&&(getInternalData(e).sseEventSource.close(),1)}function hasEventSource(e){return null!=getInternalData(e).sseEventSource}function loadImmediately(e,t,n,r,a){function i(){r.loaded||(r.loaded=!0,issueAjaxRequest(t,n,e))}a?setTimeout(i,a):i()}function processVerbs(a,i,e){var t=!1;return forEach(VERBS,function(n){var r;hasAttribute(a,"hx-"+n)&&(r=getAttributeValue(a,"hx-"+n),t=!0,i.path=r,i.verb=n,e.forEach(function(e){var t;e.sseEvent?processSSETrigger(a,n,r,e.sseEvent):"revealed"===e.trigger?(initScrollHandler(),maybeReveal(a)):"intersect"===e.trigger?(t={},e.root&&(t.root=querySelectorExt(e.root)),e.threshold&&(t.threshold=parseFloat(e.threshold)),new IntersectionObserver(function(e){for(var t=0;t<e.length;t++)if(e[t].isIntersecting){triggerEvent(a,"intersect");break}},t).observe(a),addEventListener(a,n,r,i,e)):"load"===e.trigger?loadImmediately(a,n,r,i,e.delay):e.pollInterval?(i.polling=!0,processPolling(a,n,r,e.pollInterval)):addEventListener(a,n,r,i,e)}))}),t}function evalScript(e){if("text/javascript"===e.type||""===e.type)try{maybeEval(e,function(){(0,eval)(e.innerText)})}catch(e){logError(e)}}function processScripts(e){matches(e,"script")&&evalScript(e),forEach(findAll(e,"script"),function(e){evalScript(e)})}function isBoosted(){return document.querySelector("[hx-boost], [data-hx-boost]")}function findElementsToProcess(e){if(e.querySelectorAll){var t=isBoosted()?", a, form":"";return e.querySelectorAll(VERB_SELECTOR+t+", [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws]")}return[]}function initNode(e){var t,n;e.closest&&e.closest(htmx.config.disableSelector)||((t=getInternalData(e)).initialized||(t.initialized=!0,triggerEvent(e,"htmx:beforeProcessNode"),e.value&&(t.lastValue=e.value),processVerbs(e,t,n=getTriggerSpecs(e))||"true"!==getClosestAttributeValue(e,"hx-boost")||boostElement(e,t,n),(n=getAttributeValue(e,"hx-sse"))&&processSSEInfo(e,t,n),(n=getAttributeValue(e,"hx-ws"))&&processWebSocketInfo(e,t,n),triggerEvent(e,"htmx:afterProcessNode")))}function processNode(e){initNode(e=resolveTarget(e)),forEach(findElementsToProcess(e),function(e){initNode(e)})}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){var n;return window.CustomEvent&&"function"==typeof window.CustomEvent?n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}):(n=getDocument().createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),n}function triggerErrorEvent(e,t,n){triggerEvent(e,t,mergeObjects({error:t},n))}function ignoreEventForLogging(e){return"htmx:afterProcessNode"===e}function withExtensions(e,t){forEach(getExtensions(e),function(e){try{t(e)}catch(e){logError(e)}})}function logError(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function triggerEvent(e,t,n){e=resolveTarget(e),(n=null==n?{}:n).elt=e;var r=makeEvent(t,n);htmx.logger&&!ignoreEventForLogging(t)&&htmx.logger(e,t,n),n.error&&(logError(n.error),triggerEvent(e,"htmx:error",{errorInfo:n}));var a=e.dispatchEvent(r),n=kebabEventName(t);return a&&n!==t&&(n=makeEvent(n,r.detail),a=a&&e.dispatchEvent(n)),withExtensions(e,function(e){a=a&&!1!==e.onEvent(t,r)}),a}var currentPathForHistory=null;function getHistoryElement(){return getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]")||getDocument().body}function saveToHistoryCache(e,t,n,r){for(var a=parseJSON(localStorage.getItem("htmx-history-cache"))||[],i=0;i<a.length;i++)if(a[i].url===e){a.splice(i,1);break}for(a.push({url:e,content:t,title:n,scroll:r});a.length>htmx.config.historyCacheSize;)a.shift();for(;0<a.length;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(a));break}catch(e){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:e,cache:a}),a.shift()}}function getCachedHistory(e){for(var t=parseJSON(localStorage.getItem("htmx-history-cache"))||[],n=0;n<t.length;n++)if(t[n].url===e)return t[n];return null}function cleanInnerHtmlForHistory(e){var t=htmx.config.requestClass,e=e.cloneNode(!0);return forEach(findAll(e,"."+t),function(e){removeClassFromElement(e,t)}),e.innerHTML}function saveHistory(){var e=getHistoryElement(),t=currentPathForHistory||location.pathname+location.search;triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e}),htmx.config.historyEnabled&&history.replaceState({htmx:!0},getDocument().title,window.location.href),saveToHistoryCache(t,cleanInnerHtmlForHistory(e),getDocument().title,window.scrollY)}function pushUrlIntoHistory(e){htmx.config.historyEnabled&&history.pushState({htmx:!0},"",e),currentPathForHistory=e}function settleImmediately(e){forEach(e,function(e){e.call()})}function loadHistoryFromServer(n){var e=new XMLHttpRequest,r={path:n,xhr:e};triggerEvent(getDocument().body,"htmx:historyCacheMiss",r),e.open("GET",n,!0),e.setRequestHeader("HX-History-Restore-Request","true"),e.onload=function(){var e,t;200<=this.status&&this.status<400?(triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",r),e=(e=makeFragment(this.response)).querySelector("[hx-history-elt],[data-hx-history-elt]")||e,swapInnerHTML(t=getHistoryElement(),e,t=makeSettleInfo(t)),settleImmediately(t.tasks),currentPathForHistory=n,triggerEvent(getDocument().body,"htmx:historyRestore",{path:n})):triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",r)},e.send()}function restoreHistory(e){saveHistory();var t,n,r=getCachedHistory(e=e||location.pathname+location.search);r?(t=makeFragment(r.content),swapInnerHTML(n=getHistoryElement(),t,n=makeSettleInfo(n)),settleImmediately(n.tasks),document.title=r.title,window.scrollTo(0,r.scroll),currentPathForHistory=e,triggerEvent(getDocument().body,"htmx:historyRestore",{path:e})):htmx.config.refreshOnHistoryMiss?window.location.reload(!0):loadHistoryFromServer(e)}function shouldPush(e){var t=getClosestAttributeValue(e,"hx-push-url");return t&&"false"!==t||getInternalData(e).boosted&&getInternalData(e).pushURL}function getPushUrl(e){e=getClosestAttributeValue(e,"hx-push-url");return"true"===e||"false"===e?null:e}function addRequestIndicatorClasses(e){var t=getClosestAttributeValue(e,"hx-indicator"),e=t?querySelectorAllExt(e,t):[e];return forEach(e,function(e){e.classList.add.call(e.classList,htmx.config.requestClass)}),e}function removeRequestIndicatorClasses(e){forEach(e,function(e){e.classList.remove.call(e.classList,htmx.config.requestClass)})}function haveSeenNode(e,t){for(var n=0;n<e.length;n++)if(e[n].isSameNode(t))return 1}function shouldInclude(e){return""!==e.name&&null!=e.name&&!e.disabled&&("button"!==e.type&&"submit"!==e.type&&"image"!==e.tagName&&"reset"!==e.tagName&&"file"!==e.tagName&&("checkbox"!==e.type&&"radio"!==e.type||e.checked))}function processInputValue(t,n,r,e,a){var i,o,s;null==e||haveSeenNode(t,e)||(t.push(e),shouldInclude(e)&&(i=getRawAttribute(e,"name"),o=e.value,e.multiple&&(o=toArray(e.querySelectorAll("option:checked")).map(function(e){return e.value})),e.files&&(o=toArray(e.files)),null!=i&&null!=o&&((s=n[i])?Array.isArray(s)?Array.isArray(o)?n[i]=s.concat(o):s.push(o):Array.isArray(o)?n[i]=[s].concat(o):n[i]=[s,o]:n[i]=o),a&&validateElement(e,r)),matches(e,"form")&&forEach(e.elements,function(e){processInputValue(t,n,r,e,a)}))}function validateElement(e,t){e.willValidate&&(triggerEvent(e,"htmx:validation:validate"),e.checkValidity()||(t.push({elt:e,message:e.validationMessage,validity:e.validity}),triggerEvent(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})))}function getInputValues(e,t){var n=[],r={},a={},i=[],o=matches(e,"form")&&!0!==e.noValidate;"get"!==t&&processInputValue(n,a,i,closest(e,"form"),o),processInputValue(n,r,i,e,o);t=getClosestAttributeValue(e,"hx-include");return t&&forEach(querySelectorAllExt(e,t),function(e){processInputValue(n,r,i,e,o),matches(e,"form")||forEach(e.querySelectorAll(INPUT_SELECTOR),function(e){processInputValue(n,r,i,e,o)})}),r=mergeObjects(r,a),{errors:i,values:r}}function appendParam(e,t,n){return""!==e&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n)}function urlEncode(e){var t,n,r="";for(t in e)e.hasOwnProperty(t)&&(n=e[t],Array.isArray(n)?forEach(n,function(e){r=appendParam(r,t,e)}):r=appendParam(r,t,n));return r}function makeFormData(e){var t,n,r=new FormData;for(t in e)e.hasOwnProperty(t)&&(n=e[t],Array.isArray(n)?forEach(n,function(e){r.append(t,e)}):r.append(t,n));return r}function getHeaders(e,t,n){t={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":getDocument().location.href};return getValuesForElement(e,"hx-headers",!1,t),void 0!==n&&(t["HX-Prompt"]=n),t}function filterValues(t,e){e=getClosestAttributeValue(e,"hx-params");if(e){if("none"===e)return{};if("*"===e)return t;if(0===e.indexOf("not "))return forEach(e.substr(4).split(","),function(e){e=e.trim(),delete t[e]}),t;var n={};return forEach(e.split(","),function(e){e=e.trim(),n[e]=t[e]}),n}return t}function isAnchorLink(e){return getRawAttribute(e,"href")&&0<=getRawAttribute(e,"href").indexOf("#")}function getSwapSpecification(e){var t=getClosestAttributeValue(e,"hx-swap"),n={swapStyle:getInternalData(e).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(getInternalData(e).boosted&&!isAnchorLink(e)&&(n.show="top"),t){var r=splitOnWhitespace(t);if(0<r.length){n.swapStyle=r[0];for(var a=1;a<r.length;a++){var i=r[a];0===i.indexOf("swap:")&&(n.swapDelay=parseInterval(i.substr(5))),0===i.indexOf("settle:")&&(n.settleDelay=parseInterval(i.substr(7))),0===i.indexOf("scroll:")&&(n.scroll=i.substr(7)),0===i.indexOf("show:")&&(n.show=i.substr(5))}}}return n}function encodeParamsForBody(t,n,r){var a=null;return withExtensions(n,function(e){null==a&&(a=e.encodeParameters(t,r,n))}),null!=a?a:("multipart/form-data"===getClosestAttributeValue(n,"hx-encoding")?makeFormData:urlEncode)(r)}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){var n=e[0],e=e[e.length-1];t.scroll&&("top"===t.scroll&&n&&(n.scrollTop=0),"bottom"===t.scroll&&e&&(e.scrollTop=e.scrollHeight)),t.show&&("top"===t.show&&n&&n.scrollIntoView(!0),"bottom"===t.show&&e&&e.scrollIntoView(!1))}function getValuesForElement(e,t,n,r){if(null==r&&(r={}),null==e)return r;var a=getAttributeValue(e,t);if(a){var i,o,s=a.trim(),a=n;for(o in 0===s.indexOf("javascript:")&&(s=s.substr(11),a=!0),0!==s.indexOf("{")&&(s="{"+s+"}"),i=a?maybeEval(e,function(){return Function("return ("+s+")")()},{}):parseJSON(s))i.hasOwnProperty(o)&&null==r[o]&&(r[o]=i[o])}return getValuesForElement(parentElt(e),t,n,r)}function maybeEval(e,t,n){return htmx.config.allowEval?t():(triggerErrorEvent(e,"htmx:evalDisallowedError"),n)}function getHXVarsForElement(e,t){return getValuesForElement(e,"hx-vars",!0,t)}function getHXValsForElement(e,t){return getValuesForElement(e,"hx-vals",!1,t)}function getExpressionVars(e){return mergeObjects(getHXVarsForElement(e),getHXValsForElement(e))}function safelySetHeaderValue(t,n,r){if(null!==r)try{t.setRequestHeader(n,r)}catch(e){t.setRequestHeader(n,encodeURIComponent(r)),t.setRequestHeader(n+"-URI-AutoEncoded","true")}}function getResponseURL(t){if(t.responseURL&&"undefined"!=typeof URL)try{var e=new URL(t.responseURL);return e.pathname+e.search}catch(e){triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}function hasHeader(e,t){return e.getAllResponseHeaders().match(t)}function ajaxHelper(e,t,n){return n?n instanceof Element||isType(n,"String")?issueAjaxRequest(e,t,null,null,{targetOverride:resolveTarget(n)}):issueAjaxRequest(e,t,resolveTarget(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:resolveTarget(n.target)}):issueAjaxRequest(e,t)}function hierarchyForElt(e){for(var t=[];e;)t.push(e),e=e.parentElement;return t}function issueAjaxRequest(e,t,r,n,a){var i,o=null,s=null;a=null!=a?a:{},"undefined"!=typeof Promise&&(i=new Promise(function(e,t){o=e,s=t})),null==r&&(r=getDocument().body);var l=a.handler||handleAjaxResponse;if(bodyContains(r)){var c=a.targetOverride||getTarget(r);if(null!=c){var u=getInternalData(r);if(u.requestInFlight){var d="last",f=getInternalData(n);return f&&f.triggerSpec&&f.triggerSpec.queue&&(d=f.triggerSpec.queue),null==u.queuedRequests&&(u.queuedRequests=[]),void("first"===d&&0===u.queuedRequests.length||"all"===d?u.queuedRequests.push(function(){issueAjaxRequest(e,t,r,n)}):"last"===d&&(u.queuedRequests=[],u.queuedRequests.push(function(){issueAjaxRequest(e,t,r,n)})))}u.requestInFlight=!0;var p=function(){u.requestInFlight=!1,null!=u.queuedRequests&&0<u.queuedRequests.length&&u.queuedRequests.shift()()},f=getClosestAttributeValue(r,"hx-prompt");if(f){var h=prompt(f);if(null===h||!triggerEvent(r,"htmx:prompt",{prompt:h,target:c}))return maybeCall(o),p(),i}d=getClosestAttributeValue(r,"hx-confirm");if(d&&!confirm(d))return maybeCall(o),p(),i;var m=new XMLHttpRequest,g=getHeaders(r,c,h);a.headers&&(g=mergeObjects(g,a.values));f=getInputValues(r,e),d=f.errors,h=f.values;a.values&&(h=mergeObjects(h,a.values));f=mergeObjects(h,getExpressionVars(r)),a=filterValues(f,r);"get"!==e&&null==getClosestAttributeValue(r,"hx-encoding")&&(g["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),null!=t&&""!==t||(t=getDocument().location.href);h={parameters:a,unfilteredParameters:f,headers:g,target:c,verb:e,errors:d,path:t,triggeringEvent:n};if(!triggerEvent(r,"htmx:configRequest",h))return maybeCall(o),p(),i;if(t=h.path,e=h.verb,g=h.headers,a=h.parameters,(d=h.errors)&&0<d.length)return triggerEvent(r,"htmx:validation:halted",h),maybeCall(o),p(),i;var y,v,x,f=t.split("#"),d=f[0],f=f[1];for(v in"get"===e?(y=d,0!==Object.keys(a).length&&(y.indexOf("?")<0?y+="?":y+="&",y+=urlEncode(a),f&&(y+="#"+f)),m.open("GET",y,!0)):m.open(e.toUpperCase(),t,!0),m.overrideMimeType("text/html"),m.withCredentials=htmx.config.withCredentials,g)g.hasOwnProperty(v)&&(x=g[v],safelySetHeaderValue(m,v,x));var b={xhr:m,target:c,requestConfig:h,pathInfo:{path:t,finalPath:y,anchor:f}};if(m.onload=function(){try{var e=hierarchyForElt(r);if(l(r,b),removeRequestIndicatorClasses(_),triggerEvent(r,"htmx:afterRequest",b),triggerEvent(r,"htmx:afterOnLoad",b),!bodyContains(r)){for(var t=null;0<e.length&&null==t;){var n=e.shift();bodyContains(n)&&(t=n)}t&&(triggerEvent(t,"htmx:afterRequest",b),triggerEvent(t,"htmx:afterOnLoad",b))}maybeCall(o),p()}catch(e){throw triggerErrorEvent(r,"htmx:onLoadError",mergeObjects({error:e},b)),e}},m.onerror=function(){removeRequestIndicatorClasses(_),triggerErrorEvent(r,"htmx:afterRequest",b),triggerErrorEvent(r,"htmx:sendError",b),maybeCall(s),p()},m.onabort=function(){removeRequestIndicatorClasses(_),triggerErrorEvent(r,"htmx:afterRequest",b),triggerErrorEvent(r,"htmx:sendAbort",b),maybeCall(s),p()},!triggerEvent(r,"htmx:beforeRequest",b))return maybeCall(o),p(),i;var _=addRequestIndicatorClasses(r);return forEach(["loadstart","loadend","progress","abort"],function(t){forEach([m,m.upload],function(e){e.addEventListener(t,function(e){triggerEvent(r,"htmx:xhr:"+t,{lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})})}),triggerEvent(r,"htmx:beforeSend",b),m.send("get"===e?null:encodeParamsForBody(m,r,a)),i}triggerErrorEvent(r,"htmx:targetError",{target:getAttributeValue(r,"hx-target")})}}function handleAjaxResponse(o,s){var l,c,u,d,e,f=s.xhr,p=s.target;triggerEvent(o,"htmx:beforeOnLoad",s)&&(hasHeader(f,/HX-Trigger:/i)&&handleTrigger(f,"HX-Trigger",o),hasHeader(f,/HX-Push:/i)&&(l=f.getResponseHeader("HX-Push")),hasHeader(f,/HX-Redirect:/i)?window.location.href=f.getResponseHeader("HX-Redirect"):hasHeader(f,/HX-Refresh:/i)&&"true"===f.getResponseHeader("HX-Refresh")?location.reload():(c=shouldPush(o)||l,200<=f.status&&f.status<400?(286===f.status&&cancelPolling(o),204!==f.status&&triggerEvent(p,"htmx:beforeSwap",s)&&(u=f.response,withExtensions(o,function(e){u=e.transformResponse(u,f,o)}),c&&saveHistory(),d=getSwapSpecification(o),p.classList.add(htmx.config.swappingClass),e=function(){try{var e=document.activeElement,t={};try{t={elt:e,start:e?e.selectionStart:null,end:e?e.selectionEnd:null}}catch(e){}var n,r,a=makeSettleInfo(p);selectAndSwap(d.swapStyle,p,o,u,a),!t.elt||bodyContains(t.elt)||!t.elt.id||(n=document.getElementById(t.elt.id))&&(t.start&&n.setSelectionRange&&n.setSelectionRange(t.start,t.end),n.focus()),p.classList.remove(htmx.config.swappingClass),forEach(a.elts,function(e){e.classList&&e.classList.add(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSwap",s)}),s.pathInfo.anchor&&(location.hash=s.pathInfo.anchor),hasHeader(f,/HX-Trigger-After-Swap:/i)&&(bodyContains(r=o)||(r=getDocument().body),handleTrigger(f,"HX-Trigger-After-Swap",r));var i=function(){var e;forEach(a.tasks,function(e){e.call()}),forEach(a.elts,function(e){e.classList&&e.classList.remove(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSettle",s)}),c&&(pushUrlIntoHistory(e=l||getPushUrl(o)||getResponseURL(f)||s.pathInfo.finalPath||s.pathInfo.path),triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:e})),updateScrollState(a.elts,d),hasHeader(f,/HX-Trigger-After-Settle:/i)&&(bodyContains(e=o)||(e=getDocument().body),handleTrigger(f,"HX-Trigger-After-Settle",e))};0<d.settleDelay?setTimeout(i,d.settleDelay):i()}catch(e){throw triggerErrorEvent(o,"htmx:swapError",s),e}},0<d.swapDelay?setTimeout(e,d.swapDelay):e())):triggerErrorEvent(o,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+f.status+" from "+s.pathInfo.path},s))))}var extensions={};function extensionBase(){return{onEvent:function(e,t){return!0},transformResponse:function(e,t,n){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,n,r){return!1},encodeParameters:function(e,t,n){return null}}}function defineExtension(e,t){extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,n,r){if(null==e)return n;null==n&&(n=[]),null==r&&(r=[]);var t=getAttributeValue(e,"hx-ext");return t&&forEach(t.split(","),function(e){var t;"ignore:"!=(e=e.replace(/ /g,"")).slice(0,7)?r.indexOf(e)<0&&((t=extensions[e])&&n.indexOf(t)<0&&n.push(t)):r.push(e.slice(7))}),getExtensions(parentElt(e),n,r)}function ready(e){"loading"!==getDocument().readyState?e():getDocument().addEventListener("DOMContentLoaded",e)}function insertIndicatorStyles(){!1!==htmx.config.includeIndicatorStyles&&getDocument().head.insertAdjacentHTML("beforeend","<style>                      ."+htmx.config.indicatorClass+"{opacity:0;transition: opacity 200ms ease-in;}                      ."+htmx.config.requestClass+" ."+htmx.config.indicatorClass+"{opacity:1}                      ."+htmx.config.requestClass+"."+htmx.config.indicatorClass+"{opacity:1}                    </style>")}function getMetaConfig(){var e=getDocument().querySelector('meta[name="htmx-config"]');return e?parseJSON(e.content):null}function mergeMetaConfig(){var e=getMetaConfig();e&&(htmx.config=mergeObjects(htmx.config,e))}return ready(function(){mergeMetaConfig(),insertIndicatorStyles();var e=getDocument().body;processNode(e),window.onpopstate=function(e){e.state&&e.state.htmx&&restoreHistory()},setTimeout(function(){triggerEvent(e,"htmx:load",{})},0)}),htmx}),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";function m(e){return null!=e&&e===e.window}var t=[],n=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},l=t.push,a=t.indexOf,r={},i=r.toString,y=r.hasOwnProperty,o=y.toString,c=o.call(Object),v={},x=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},T=w.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,a,i=(n=n||T).createElement("script");if(i.text=e,t)for(r in u)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function h(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[i.call(e)]||"object":typeof e}var M=function(e,t){return new M.fn.init(e,t)};function d(e){var t=!!e&&"length"in e&&e.length,n=h(e);return!x(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}M.fn=M.prototype={jquery:"3.6.0",constructor:M,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=M.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return M.each(this,e)},map:function(n){return this.pushStack(M.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(M.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(M.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},M.extend=M.fn.extend=function(){var e,t,n,r,a,i=arguments[0]||{},o=1,s=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[o]||{},o++),"object"==typeof i||x(i)||(i={}),o===s&&(i=this,o--);o<s;o++)if(null!=(e=arguments[o]))for(t in e)n=e[t],"__proto__"!==t&&i!==n&&(l&&n&&(M.isPlainObject(n)||(r=Array.isArray(n)))?(a=i[t],a=r&&!Array.isArray(a)?[]:r||M.isPlainObject(a)?a:{},r=!1,i[t]=M.extend(l,a,n)):void 0!==n&&(i[t]=n));return i},M.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==i.call(e))&&(!(e=n(e))||"function"==typeof(e=y.call(e,"constructor")&&e.constructor)&&o.call(e)===c)},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(d(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(d(Object(e))?M.merge(t,"string"==typeof e?[e]:e):l.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!=o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,o=[];if(d(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&o.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&o.push(a);return g(o)},guid:1,support:v}),"function"==typeof Symbol&&(M.fn[Symbol.iterator]=t[Symbol.iterator]),M.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var f=function(n){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function r(){w()}var e,f,b,i,a,p,h,m,_,l,c,w,T,o,M,g,s,u,y,k="sizzle"+ +new Date,v=n.document,A=0,x=0,S=le(),E=le(),L=le(),C=le(),D=function(e,t){return e===t&&(c=!0),0},O={}.hasOwnProperty,t=[],P=t.pop,I=t.push,R=t.push,N=t.slice,z=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",H="(?:\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+j+"*("+H+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+j+"*\\]",q=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),Y=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),V=new RegExp("^"+j+"*,"+j+"*"),G=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),W=new RegExp(j+"|>"),Z=new RegExp(q),$=new RegExp("^"+H+"$"),X={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ne=/[+~]/,re=new RegExp("\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\([^\\r\\n\\f])","g"),ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(t=N.call(v.childNodes),v.childNodes),t[v.childNodes.length].nodeType}catch(e){R={apply:t.length?function(e,t){I.apply(e,N.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(t,e,n,r){var a,i,o,s,l,c,u=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!r&&(w(e),e=e||T,M)){if(11!==d&&(s=te.exec(t)))if(c=s[1]){if(9===d){if(!(i=e.getElementById(c)))return n;if(i.id===c)return n.push(i),n}else if(u&&(i=u.getElementById(c))&&y(e,i)&&i.id===c)return n.push(i),n}else{if(s[2])return R.apply(n,e.getElementsByTagName(t)),n;if((c=s[3])&&f.getElementsByClassName&&e.getElementsByClassName)return R.apply(n,e.getElementsByClassName(c)),n}if(f.qsa&&!C[t+" "]&&(!g||!g.test(t))&&(1!==d||"object"!==e.nodeName.toLowerCase())){if(c=t,u=e,1===d&&(W.test(t)||G.test(t))){for((u=ne.test(t)&&me(e.parentNode)||e)===e&&f.scope||((o=e.getAttribute("id"))?o=o.replace(ae,ie):e.setAttribute("id",o=k)),a=(l=p(t)).length;a--;)l[a]=(o?"#"+o:":scope")+" "+ye(l[a]);c=l.join(",")}try{return R.apply(n,u.querySelectorAll(c)),n}catch(e){C(t,!0)}finally{o===k&&e.removeAttribute("id")}}}return m(t.replace(Y,"$1"),e,n,r)}function le(){var n=[];function r(e,t){return n.push(e+" ")>b.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function ce(e){return e[k]=!0,e}function ue(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function de(e,t){for(var n=e.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&oe(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function he(o){return ce(function(i){return i=+i,ce(function(e,t){for(var n,r=o([],e.length,i),a=r.length;a--;)e[n=r[a]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=se.support={},a=se.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!J.test(t||e&&e.nodeName||"HTML")},w=se.setDocument=function(e){var t,e=e?e.ownerDocument||e:v;return e!=T&&9===e.nodeType&&e.documentElement&&(o=(T=e).documentElement,M=!a(T),v!=T&&(t=T.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",r,!1):t.attachEvent&&t.attachEvent("onunload",r)),f.scope=ue(function(e){return o.appendChild(e).appendChild(T.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),f.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=ue(function(e){return e.appendChild(T.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=ee.test(T.getElementsByClassName),f.getById=ue(function(e){return o.appendChild(e).id=k,!T.getElementsByName||!T.getElementsByName(k).length}),f.getById?(b.filter.ID=function(e){var t=e.replace(re,d);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&M){e=t.getElementById(e);return e?[e]:[]}}):(b.filter.ID=function(e){var t=e.replace(re,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&M){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),b.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[a++];)1===n.nodeType&&r.push(n);return r},b.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&M)return t.getElementsByClassName(e)},s=[],g=[],(f.qsa=ee.test(T.querySelectorAll))&&(ue(function(e){var t;o.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+j+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+k+"-]").length||g.push("~="),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+j+"*name"+j+"*="+j+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=T.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),o.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=ee.test(u=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ue(function(e){f.disconnectedMatch=u.call(e,"*"),u.call(e,"[s!='']:x"),s.push("!=",q)}),g=g.length&&new RegExp(g.join("|")),s=s.length&&new RegExp(s.join("|")),t=ee.test(o.compareDocumentPosition),y=t||ee.test(o.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e==T||e.ownerDocument==v&&y(v,e)?-1:t==T||t.ownerDocument==v&&y(v,t)?1:l?z(l,e)-z(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==T?-1:t==T?1:a?-1:i?1:l?z(l,e)-z(l,t):0;if(a===i)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==v?-1:s[r]==v?1:0}),T},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(w(e),f.matchesSelector&&M&&!C[t+" "]&&(!s||!s.test(t))&&(!g||!g.test(t)))try{var n=u.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){C(t,!0)}return 0<se(t,T,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=T&&w(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=T&&w(e);var n=b.attrHandle[t.toLowerCase()],n=n&&O.call(b.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==n?n:f.attributes||!M?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},se.escape=function(e){return(e+"").replace(ae,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,a=0;if(c=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort(D),c){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return l=null,e},i=se.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(b=se.selectors={cacheLength:50,createPseudo:ce,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,d),e[3]=(e[3]||e[4]||e[5]||"").replace(re,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Z.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=se.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(U," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(h,e,t,m,g){var y="nth"!==h.slice(0,3),v="last"!==h.slice(-4),x="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,a,i,o,s,l,c=y!=v?"nextSibling":"previousSibling",u=e.parentNode,d=x&&e.nodeName.toLowerCase(),f=!n&&!x,p=!1;if(u){if(y){for(;c;){for(o=e;o=o[c];)if(x?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;l=c="only"===h&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&f){for(p=(s=(r=(a=(i=(o=u)[k]||(o[k]={}))[o.uniqueID]||(i[o.uniqueID]={}))[h]||[])[0]===A&&r[1])&&r[2],o=s&&u.childNodes[s];o=++s&&o&&o[c]||(p=s=0)||l.pop();)if(1===o.nodeType&&++p&&o===e){a[h]=[A,s,p];break}}else if(!1===(p=f?s=(r=(a=(i=(o=e)[k]||(o[k]={}))[o.uniqueID]||(i[o.uniqueID]={}))[h]||[])[0]===A&&r[1]:p))for(;(o=++s&&o&&o[c]||(p=s=0)||l.pop())&&((x?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++p||(f&&((a=(i=o[k]||(o[k]={}))[o.uniqueID]||(i[o.uniqueID]={}))[h]=[A,p]),o!==e)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(e,i){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[k]?o(i):1<o.length?(t=[e,e,"",i],b.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,t){for(var n,r=o(e,i),a=r.length;a--;)e[n=z(e,r[a])]=!(t[n]=r[a])}):function(e){return o(e,0,t)}):o}},pseudos:{not:ce(function(e){var r=[],a=[],s=h(e.replace(Y,"$1"));return s[k]?ce(function(e,t,n,r){for(var a,i=s(e,null,r,[]),o=e.length;o--;)(a=i[o])&&(e[o]=!(t[o]=a))}):function(e,t,n){return r[0]=e,s(r,null,n,a),r[0]=null,!a.pop()}}),has:ce(function(t){return function(e){return 0<se(t,e).length}}),contains:ce(function(t){return t=t.replace(re,d),function(e){return-1<(e.textContent||i(e)).indexOf(t)}}),lang:ce(function(n){return $.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(re,d).toLowerCase(),function(e){var t;do{if(t=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function ge(){}function ye(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(o,e,t){var s=e.dir,l=e.next,c=l||s,u=t&&"parentNode"===c,d=x++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||u)return o(e,t,n);return!1}:function(e,t,n){var r,a,i=[A,d];if(n){for(;e=e[s];)if((1===e.nodeType||u)&&o(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||u)if(r=(a=e[k]||(e[k]={}))[e.uniqueID]||(a[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((a=r[c])&&a[0]===A&&a[1]===d)return i[2]=a[2];if((r[c]=i)[2]=o(e,t,n))return!0}return!1}}function xe(a){return 1<a.length?function(e,t,n){for(var r=a.length;r--;)if(!a[r](e,t,n))return!1;return!0}:a[0]}function be(e,t,n,r,a){for(var i,o=[],s=0,l=e.length,c=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),c&&t.push(s)));return o}function _e(p,h,m,g,y,e){return g&&!g[k]&&(g=_e(g)),y&&!y[k]&&(y=_e(y,e)),ce(function(e,t,n,r){var a,i,o,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var r=0,a=t.length;r<a;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),d=!p||!e&&h?u:be(u,s,p,n,r),f=m?y||(e?p:c||g)?[]:t:d;if(m&&m(d,f,n,r),g)for(a=be(f,l),g(a,[],n,r),i=a.length;i--;)(o=a[i])&&(f[l[i]]=!(d[l[i]]=o));if(e){if(y||p){if(y){for(a=[],i=f.length;i--;)(o=f[i])&&a.push(d[i]=o);y(null,f=[],a,r)}for(i=f.length;i--;)(o=f[i])&&-1<(a=y?z(e,o):s[i])&&(e[a]=!(t[a]=o))}}else f=be(f===t?f.splice(c,f.length):f),y?y(null,t,f,r):R.apply(t,f)})}function we(g,y){function e(e,t,n,r,a){var i,o,s,l=0,c="0",u=e&&[],d=[],f=_,p=e||x&&b.find.TAG("*",a),h=A+=null==f?1:Math.random()||.1,m=p.length;for(a&&(_=t==T||t||a);c!==m&&null!=(i=p[c]);c++){if(x&&i){for(o=0,t||i.ownerDocument==T||(w(i),n=!M);s=g[o++];)if(s(i,t||T,n)){r.push(i);break}a&&(A=h)}v&&((i=!s&&i)&&l--,e&&u.push(i))}if(l+=c,v&&c!==l){for(o=0;s=y[o++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=P.call(r));d=be(d)}R.apply(r,d),a&&!e&&0<d.length&&1<l+y.length&&se.uniqueSort(r)}return a&&(A=h,_=f),u}var v=0<y.length,x=0<g.length;return v?ce(e):e}return ge.prototype=b.filters=b.pseudos,b.setFilters=new ge,p=se.tokenize=function(e,t){var n,r,a,i,o,s,l,c=E[e+" "];if(c)return t?0:c.slice(0);for(o=e,s=[],l=b.preFilter;o;){for(i in n&&!(r=V.exec(o))||(r&&(o=o.slice(r[0].length)||o),s.push(a=[])),n=!1,(r=G.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(Y," ")}),o=o.slice(n.length)),b.filter)!(r=X[i].exec(o))||l[i]&&!(r=l[i](r))||(n=r.shift(),a.push({value:n,type:i,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?se.error(e):E(e,s).slice(0)},h=se.compile=function(e,t){var n,r=[],a=[],i=L[e+" "];if(!i){for(n=(t=t||p(e)).length;n--;)((i=function e(t){for(var r,n,a,i=t.length,o=b.relative[t[0].type],s=o||b.relative[" "],l=o?1:0,c=ve(function(e){return e===r},s,!0),u=ve(function(e){return-1<z(r,e)},s,!0),d=[function(e,t,n){return n=!o&&(n||t!==_)||((r=t).nodeType?c:u)(e,t,n),r=null,n}];l<i;l++)if(n=b.relative[t[l].type])d=[ve(xe(d),n)];else{if((n=b.filter[t[l].type].apply(null,t[l].matches))[k]){for(a=++l;a<i&&!b.relative[t[a].type];a++);return _e(1<l&&xe(d),1<l&&ye(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(Y,"$1"),n,l<a&&e(t.slice(l,a)),a<i&&e(t=t.slice(a)),a<i&&ye(t))}d.push(n)}return xe(d)}(t[n]))[k]?r:a).push(i);(i=L(e,we(a,r))).selector=e}return i},m=se.select=function(e,t,n,r){var a,i,o,s,l,c="function"==typeof e&&e,u=!r&&p(e=c.selector||e);if(n=n||[],1===u.length){if(2<(i=u[0]=u[0].slice(0)).length&&"ID"===(o=i[0]).type&&9===t.nodeType&&M&&b.relative[i[1].type]){if(!(t=(b.find.ID(o.matches[0].replace(re,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(a=X.needsContext.test(e)?0:i.length;a--&&(o=i[a],!b.relative[s=o.type]);)if((l=b.find[s])&&(r=l(o.matches[0].replace(re,d),ne.test(i[0].type)&&me(t.parentNode)||t))){if(i.splice(a,1),!(e=r.length&&ye(i)))return R.apply(n,r),n;break}}return(c||h(e,u))(r,t,!M,n,!t||ne.test(e)&&me(t.parentNode)||t),n},f.sortStable=k.split("").sort(D).join("")===k,f.detectDuplicates=!!c,w(),f.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||de(F,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),se}(w);M.find=f,M.expr=f.selectors,M.expr[":"]=M.expr.pseudos,M.uniqueSort=M.unique=f.uniqueSort,M.text=f.getText,M.isXMLDoc=f.isXML,M.contains=f.contains,M.escapeSelector=f.escape;function p(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&M(e).is(n))break;r.push(e)}return r}function _(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var k=M.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var S=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function E(e,n,r){return x(n)?M.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?M.grep(e,function(e){return e===n!==r}):"string"!=typeof n?M.grep(e,function(e){return-1<a.call(n,e)!==r}):M.filter(n,e,r)}M.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?M.find.matchesSelector(r,e)?[r]:[]:M.find.matches(e,M.grep(t,function(e){return 1===e.nodeType}))},M.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(M(e).filter(function(){for(t=0;t<r;t++)if(M.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)M.find(e,a[t],n);return 1<r?M.uniqueSort(n):n},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&k.test(e)?M(e):e||[],!1).length}});var L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(M.fn.init=function(e,t,n){if(!e)return this;if(n=n||C,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):x(e)?void 0!==n.ready?n.ready(e):e(M):M.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(r[1]){if(t=t instanceof M?t[0]:t,M.merge(this,M.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),S.test(r[1])&&M.isPlainObject(t))for(var r in t)x(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(e=T.getElementById(r[2]))&&(this[0]=e,this.length=1),this}).prototype=M.fn;var C=M(T),D=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}M.fn.extend({has:function(e){var t=M(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(M.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&M(e);if(!k.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&M.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(1<i.length?M.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?a.call(M(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(M.uniqueSort(M.merge(this.get(),M(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),M.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return p(e,"parentNode")},parentsUntil:function(e,t,n){return p(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return p(e,"nextSibling")},prevAll:function(e){return p(e,"previousSibling")},nextUntil:function(e,t,n){return p(e,"nextSibling",n)},prevUntil:function(e,t,n){return p(e,"previousSibling",n)},siblings:function(e){return _((e.parentNode||{}).firstChild,e)},children:function(e){return _(e.firstChild)},contents:function(e){return null!=e.contentDocument&&n(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),M.merge([],e.childNodes))}},function(r,a){M.fn[r]=function(e,t){var n=M.map(this,a,e);return(t="Until"!==r.slice(-5)?e:t)&&"string"==typeof t&&(n=M.filter(t,n)),1<this.length&&(O[r]||M.uniqueSort(n),D.test(r)&&n.reverse()),this.pushStack(n)}});var I=/[^\x20\t\r\n\f]+/g;function R(e){return e}function N(e){throw e}function z(e,t,n,r){var a;try{e&&x(a=e.promise)?a.call(e).done(t).fail(n):e&&x(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}M.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},M.each(e.match(I)||[],function(e,t){n[t]=!0}),n):M.extend({},r);function a(){for(s=s||r.once,o=i=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=l.length,t=!1);r.memory||(t=!1),i=!1,s&&(l=t?[]:"")}var i,t,o,s,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!i&&(u=l.length-1,c.push(t)),function n(e){M.each(e,function(e,t){x(t)?r.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==h(t)&&n(t)})}(arguments),t&&!i&&a()),this},remove:function(){return M.each(arguments,function(e,t){for(var n;-1<(n=M.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<M.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||i||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),i||a()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},M.extend({Deferred:function(e){var i=[["notify","progress",M.Callbacks("memory"),M.Callbacks("memory"),2],["resolve","done",M.Callbacks("once memory"),M.Callbacks("once memory"),0,"resolved"],["reject","fail",M.Callbacks("once memory"),M.Callbacks("once memory"),1,"rejected"]],a="pending",o={state:function(){return a},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var a=arguments;return M.Deferred(function(r){M.each(i,function(e,t){var n=x(a[t[4]])&&a[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&x(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),a=null}).promise()},then:function(t,n,r){var l=0;function c(a,i,o,s){return function(){function e(){var e,t;if(!(a<l)){if((e=o.apply(n,r))===i.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,x(t)?s?t.call(e,c(l,i,R,s),c(l,i,N,s)):(l++,t.call(e,c(l,i,R,s),c(l,i,N,s),c(l,i,R,i.notifyWith))):(o!==R&&(n=void 0,r=[e]),(s||i.resolveWith)(n,r))}}var n=this,r=arguments,t=s?e:function(){try{e()}catch(e){M.Deferred.exceptionHook&&M.Deferred.exceptionHook(e,t.stackTrace),l<=a+1&&(o!==N&&(n=void 0,r=[e]),i.rejectWith(n,r))}};a?t():(M.Deferred.getStackHook&&(t.stackTrace=M.Deferred.getStackHook()),w.setTimeout(t))}}return M.Deferred(function(e){i[0][3].add(c(0,e,x(r)?r:R,e.notifyWith)),i[1][3].add(c(0,e,x(t)?t:R)),i[2][3].add(c(0,e,x(n)?n:N))}).promise()},promise:function(e){return null!=e?M.extend(e,o):o}},s={};return M.each(i,function(e,t){var n=t[2],r=t[5];o[t[1]]=n.add,r&&n.add(function(){a=r},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){a[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(a,i)}}var n=arguments.length,r=n,a=Array(r),i=s.call(arguments),o=M.Deferred();if(n<=1&&(z(e,o.done(t(r)).resolve,o.reject,!n),"pending"===o.state()||x(i[r]&&i[r].then)))return o.then();for(;r--;)z(i[r],t(r),o.reject);return o.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;M.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&F.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},M.readyException=function(e){w.setTimeout(function(){throw e})};var j=M.Deferred();function H(){T.removeEventListener("DOMContentLoaded",H),w.removeEventListener("load",H),M.ready()}M.fn.ready=function(e){return j.then(e).catch(function(e){M.readyException(e)}),this},M.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--M.readyWait:M.isReady)||(M.isReady=!0)!==e&&0<--M.readyWait||j.resolveWith(T,[M])}}),M.ready.then=j.then,"complete"===T.readyState||"loading"!==T.readyState&&!T.documentElement.doScroll?w.setTimeout(M.ready):(T.addEventListener("DOMContentLoaded",H),w.addEventListener("load",H));var B=function(e,t,n,r,a,i,o){var s=0,l=e.length,c=null==n;if("object"===h(n))for(s in a=!0,n)B(e,t,s,n[s],!0,i,o);else if(void 0!==r&&(a=!0,x(r)||(o=!0),t=c?o?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(M(e),n)}):t))for(;s<l;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return a?e:c?t.call(e):l?t(e[0],n):i},q=/^-ms-/,U=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function V(e){return e.replace(q,"ms-").replace(U,Y)}function G(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function W(){this.expando=M.expando+W.uid++}W.uid=1,W.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[V(t)]=n;else for(r in t)a[V(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(I)||[]).length;for(;n--;)delete r[t[n]]}void 0!==t&&!M.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!M.isEmptyObject(e)}};var Z=new W,$=new W,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function K(e,t,n){var r,a;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(a=n)||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}catch(e){}$.set(e,t,n)}else n=void 0;return n}M.extend({hasData:function(e){return $.hasData(e)||Z.hasData(e)},data:function(e,t,n){return $.access(e,t,n)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),M.fn.extend({data:function(n,e){var t,r,a,i=this[0],o=i&&i.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){$.set(this,n)}):B(this,function(e){var t;return i&&void 0===e?void 0!==(t=$.get(i,n))||void 0!==(t=K(i,n))?t:void 0:void this.each(function(){$.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(a=$.get(i),1===i.nodeType&&!Z.get(i,"hasDataAttrs"))){for(t=o.length;t--;)o[t]&&0===(r=o[t].name).indexOf("data-")&&(r=V(r.slice(5)),K(i,r,a[r]));Z.set(i,"hasDataAttrs",!0)}return a},removeData:function(e){return this.each(function(){$.remove(this,e)})}}),M.extend({queue:function(e,t,n){var r;if(e)return r=Z.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=Z.access(e,t,M.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=M.queue(e,t),r=n.length,a=n.shift(),i=M._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){M.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:M.Callbacks("once memory").add(function(){Z.remove(e,[t+"queue",n])})})}}),M.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?M.queue(this[0],t):void 0===n?this:this.each(function(){var e=M.queue(this,t,n);M._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&M.dequeue(this,t)})},dequeue:function(e){return this.each(function(){M.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--a||i.resolveWith(o,[o])}var r,a=1,i=M.Deferred(),o=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=Z.get(o[s],e+"queueHooks"))&&r.empty&&(a++,r.empty.add(n));return n(),i.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=T.documentElement,re=function(e){return M.contains(e.ownerDocument,e)},ae={composed:!0};ne.getRootNode&&(re=function(e){return M.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===M.css(e,"display")};function oe(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return M.css(e,t,"")},l=s(),c=n&&n[3]||(M.cssNumber[t]?"":"px"),u=e.nodeType&&(M.cssNumber[t]||"px"!==c&&+l)&&ee.exec(M.css(e,t));if(u&&u[3]!==c){for(c=c||u[3],u=+(l/=2)||1;o--;)M.style(e,t,u+c),(1-i)*(1-(i=s()/l||.5))<=0&&(o=0),u/=i;M.style(e,t,(u*=2)+c),n=n||[]}return n&&(u=+u||+l||0,a=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=a)),a}var se={};function le(e,t){for(var n,r,a,i,o,s=[],l=0,c=e.length;l<c;l++)(r=e[l]).style&&(n=r.style.display,t?("none"===n&&(s[l]=Z.get(r,"display")||null,s[l]||(r.style.display="")),""===r.style.display&&ie(r)&&(s[l]=(o=i=void 0,i=(a=r).ownerDocument,o=a.nodeName,(a=se[o])||(i=i.body.appendChild(i.createElement(o)),a=M.css(i,"display"),i.parentNode.removeChild(i),se[o]=a="none"===a?"block":a)))):"none"!==n&&(s[l]="none",Z.set(r,"display",n)));for(l=0;l<c;l++)null!=s[l]&&(e[l].style.display=s[l]);return e}M.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ie(this)?M(this).show():M(this).hide()})}});var ce=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,de=/^$|^module$|\/(?:java|ecma)script/i;Wt=T.createDocumentFragment().appendChild(T.createElement("div")),(f=T.createElement("input")).setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),Wt.appendChild(f),v.checkClone=Wt.cloneNode(!0).cloneNode(!0).lastChild.checked,Wt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Wt.cloneNode(!0).lastChild.defaultValue,Wt.innerHTML="<option></option>",v.option=!!Wt.lastChild;var fe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&A(e,t)?M.merge([e],n):n}function he(e,t){for(var n=0,r=e.length;n<r;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}fe.tbody=fe.tfoot=fe.colgroup=fe.caption=fe.thead,fe.th=fe.td,v.option||(fe.optgroup=fe.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function ge(e,t,n,r,a){for(var i,o,s,l,c,u=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((i=e[f])||0===i)if("object"===h(i))M.merge(d,i.nodeType?[i]:i);else if(me.test(i)){for(o=o||u.appendChild(t.createElement("div")),s=(ue.exec(i)||["",""])[1].toLowerCase(),s=fe[s]||fe._default,o.innerHTML=s[1]+M.htmlPrefilter(i)+s[2],c=s[0];c--;)o=o.lastChild;M.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(t.createTextNode(i));for(u.textContent="",f=0;i=d[f++];)if(r&&-1<M.inArray(i,r))a&&a.push(i);else if(l=re(i),o=pe(u.appendChild(i),"script"),l&&he(o),n)for(c=0;i=o[c++];)de.test(i.type||"")&&n.push(i);return u}var ye=/^([^.]*)(?:\.(.+)|)/;function ve(){return!0}function xe(){return!1}function be(e,t){return e===function(){try{return T.activeElement}catch(e){}}()==("focus"===t)}function _e(e,t,n,r,a,i){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)_e(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=xe;else if(!a)return e;return 1===i&&(o=a,(a=function(e){return M().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=M.guid++)),e.each(function(){M.event.add(this,t,a,r,n)})}function we(e,a,i){i?(Z.set(e,a,!1),M.event.add(e,a,{namespace:!1,handler:function(e){var t,n,r=Z.get(this,a);if(1&e.isTrigger&&this[a]){if(r.length)(M.event.special[a]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Z.set(this,a,r),t=i(this,a),this[a](),r!==(n=Z.get(this,a))||t?Z.set(this,a,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Z.set(this,a,{value:M.event.trigger(M.extend(r[0],M.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,a)&&M.event.add(e,a,ve)}M.event={global:{},add:function(t,e,n,r,a){var i,o,s,l,c,u,d,f,p,h=Z.get(t);if(G(t))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&M.find.matchesSelector(ne,a),n.guid||(n.guid=M.guid++),(s=h.events)||(s=h.events=Object.create(null)),(o=h.handle)||(o=h.handle=function(e){return void 0!==M&&M.event.triggered!==e.type?M.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(I)||[""]).length;l--;)d=p=(c=ye.exec(e[l])||[])[1],f=(c[2]||"").split(".").sort(),d&&(u=M.event.special[d]||{},d=(a?u.delegateType:u.bindType)||d,u=M.event.special[d]||{},c=M.extend({type:d,origType:p,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&M.expr.match.needsContext.test(a),namespace:f.join(".")},i),(p=s[d])||((p=s[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,f,o)||t.addEventListener&&t.addEventListener(d,o)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),a?p.splice(p.delegateCount++,0,c):p.push(c),M.event.global[d]=!0)},remove:function(e,t,n,r,a){var i,o,s,l,c,u,d,f,p,h,m,g=Z.hasData(e)&&Z.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(I)||[""]).length;c--;)if(p=m=(s=ye.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=M.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)u=f[i],!a&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(i,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));o&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||M.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)M.event.remove(e,p+t[c],n,r,!0);M.isEmptyObject(l)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o=new Array(arguments.length),s=M.event.fix(e),l=(Z.get(this,"events")||Object.create(null))[s.type]||[],e=M.event.special[s.type]||{};for(o[0]=s,t=1;t<arguments.length;t++)o[t]=arguments[t];if(s.delegateTarget=this,!e.preDispatch||!1!==e.preDispatch.call(this,s)){for(i=M.event.handlers.call(this,s,l),t=0;(r=i[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==a.namespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(a=((M.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o))&&!1===(s.result=a)&&(s.preventDefault(),s.stopPropagation()));return e.postDispatch&&e.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,a,i,o,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],o={},n=0;n<l;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?-1<M(a,this).index(c):M.find(a,this,null,[c]).length),o[a]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(M.Event.prototype,t,{enumerable:!0,configurable:!0,get:x(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[M.expando]?e:new M.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return ce.test(e.type)&&e.click&&A(e,"input")&&we(e,"click",ve),!1},trigger:function(e){e=this||e;return ce.test(e.type)&&e.click&&A(e,"input")&&we(e,"click"),!0},_default:function(e){e=e.target;return ce.test(e.type)&&e.click&&A(e,"input")&&Z.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},M.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},M.Event=function(e,t){if(!(this instanceof M.Event))return new M.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ve:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&M.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[M.expando]=!0},M.Event.prototype={constructor:M.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ve,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ve,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ve,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},M.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},M.event.addProp),M.each({focus:"focusin",blur:"focusout"},function(e,t){M.event.special[e]={setup:function(){return we(this,e,be),!1},trigger:function(){return we(this,e),!0},_default:function(){return!0},delegateType:t}}),M.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,a){M.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||M.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=a),t}}}),M.fn.extend({on:function(e,t,n,r){return _e(this,e,t,n,r)},one:function(e,t,n,r){return _e(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,M(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=xe),this.each(function(){M.event.remove(this,e,n,t)});for(a in e)this.off(a,t,e[a]);return this}});var Te=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&M(e).children("tbody")[0]||e}function Se(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ee(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,a,i;if(1===t.nodeType){if(Z.hasData(e)&&(i=Z.get(e).events))for(a in Z.remove(t,"handle events"),i)for(n=0,r=i[a].length;n<r;n++)M.event.add(t,a,i[a][n]);$.hasData(e)&&(e=$.access(e),e=M.extend({},e),$.set(t,e))}}function Ce(n,r,a,i){r=g(r);var e,t,o,s,l,c,u=0,d=n.length,f=d-1,p=r[0],h=x(p);if(h||1<d&&"string"==typeof p&&!v.checkClone&&Me.test(p))return n.each(function(e){var t=n.eq(e);h&&(r[0]=p.call(this,e,t.html())),Ce(t,r,a,i)});if(d&&(t=(e=ge(r,n[0].ownerDocument,!1,n,i)).firstChild,1===e.childNodes.length&&(e=t),t||i)){for(s=(o=M.map(pe(e,"script"),Se)).length;u<d;u++)l=e,u!==f&&(l=M.clone(l,!0,!0),s&&M.merge(o,pe(l,"script"))),a.call(n[u],l,u);if(s)for(c=o[o.length-1].ownerDocument,M.map(o,Ee),u=0;u<s;u++)l=o[u],de.test(l.type||"")&&!Z.access(l,"globalEval")&&M.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?M._evalUrl&&!l.noModule&&M._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):b(l.textContent.replace(ke,""),l,c))}return n}function De(e,t,n){for(var r,a=t?M.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||M.cleanData(pe(r)),r.parentNode&&(n&&re(r)&&he(pe(r,"script")),r.parentNode.removeChild(r));return e}M.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s,l,c,u=e.cloneNode(!0),d=re(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||M.isXMLDoc(e)))for(o=pe(u),r=0,a=(i=pe(e)).length;r<a;r++)s=i[r],l=o[r],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ce.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(i=i||pe(e),o=o||pe(u),r=0,a=i.length;r<a;r++)Le(i[r],o[r]);else Le(e,u);return 0<(o=pe(u,"script")).length&&he(o,!d&&pe(e,"script")),u},cleanData:function(e){for(var t,n,r,a=M.event.special,i=0;void 0!==(n=e[i]);i++)if(G(n)){if(t=n[Z.expando]){if(t.events)for(r in t.events)a[r]?M.event.remove(n,r):M.removeEvent(n,r,t.handle);n[Z.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),M.fn.extend({detach:function(e){return De(this,e,!0)},remove:function(e){return De(this,e)},text:function(e){return B(this,function(e){return void 0===e?M.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ce(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return Ce(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Ae(this,e)).insertBefore(e,t.firstChild)})},before:function(){return Ce(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ce(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(M.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return M.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Te.test(e)&&!fe[(ue.exec(e)||["",""])[1].toLowerCase()]){e=M.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(M.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ce(this,arguments,function(e){var t=this.parentNode;M.inArray(this,n)<0&&(M.cleanData(pe(this)),t&&t.replaceChild(e,this))},n)}}),M.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){M.fn[e]=function(e){for(var t,n=[],r=M(e),a=r.length-1,i=0;i<=a;i++)t=i===a?this:this.clone(!0),M(r[i])[o](t),l.apply(n,t.get());return this.pushStack(n)}});function Oe(e,t,n){var r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in n=n.call(e),t)e.style[r]=a[r];return n}var Pe,Ie,Re,Ne,ze,Fe,je,He,Be=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),qe=function(e){var t=e.ownerDocument.defaultView;return(t=!t||!t.opener?w:t).getComputedStyle(e)},Ue=new RegExp(te.join("|"),"i");function Ye(){var e;He&&(je.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",He.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(je).appendChild(He),e=w.getComputedStyle(He),Pe="1%"!==e.top,Fe=12===Ve(e.marginLeft),He.style.right="60%",Ne=36===Ve(e.right),Ie=36===Ve(e.width),He.style.position="absolute",Re=12===Ve(He.offsetWidth/3),ne.removeChild(je),He=null)}function Ve(e){return Math.round(parseFloat(e))}function Ge(e,t,n){var r,a,i=e.style;return(n=n||qe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||re(e)||(a=M.style(e,t)),!v.pixelBoxStyles()&&Be.test(a)&&Ue.test(t)&&(r=i.width,e=i.minWidth,t=i.maxWidth,i.minWidth=i.maxWidth=i.width=a,a=n.width,i.width=r,i.minWidth=e,i.maxWidth=t)),void 0!==a?a+"":a}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}je=T.createElement("div"),(He=T.createElement("div")).style&&(He.style.backgroundClip="content-box",He.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===He.style.backgroundClip,M.extend(v,{boxSizingReliable:function(){return Ye(),Ie},pixelBoxStyles:function(){return Ye(),Ne},pixelPosition:function(){return Ye(),Pe},reliableMarginLeft:function(){return Ye(),Fe},scrollboxSize:function(){return Ye(),Re},reliableTrDimensions:function(){var e,t,n;return null==ze&&(e=T.createElement("table"),t=T.createElement("tr"),n=T.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ne.appendChild(e).appendChild(t).appendChild(n),n=w.getComputedStyle(t),ze=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight,ne.removeChild(e)),ze}}));var Ze=["Webkit","Moz","ms"],$e=T.createElement("div").style,Xe={};function Je(e){var t=M.cssProps[e]||Xe[e];return t||(e in $e?e:Xe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in $e)return e}(e)||e)}var Ke=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function nt(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function rt(e,t,n,r,a,i){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=M.css(e,n+te[o],!0,a)),r?("content"===n&&(l-=M.css(e,"padding"+te[o],!0,a)),"margin"!==n&&(l-=M.css(e,"border"+te[o]+"Width",!0,a))):(l+=M.css(e,"padding"+te[o],!0,a),"padding"!==n?l+=M.css(e,"border"+te[o]+"Width",!0,a):s+=M.css(e,"border"+te[o]+"Width",!0,a));return!r&&0<=i&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))||0),l}function at(e,t,n){var r=qe(e),a=(!v.boxSizingReliable()||n)&&"border-box"===M.css(e,"boxSizing",!1,r),i=a,o=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Be.test(o)){if(!n)return o;o="auto"}return(!v.boxSizingReliable()&&a||!v.reliableTrDimensions()&&A(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===M.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===M.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+rt(e,t,n||(a?"border":"content"),i,r,o)+"px"}function it(e,t,n,r,a){return new it.prototype.init(e,t,n,r,a)}M.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=Ge(e,"opacity");return""===e?"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=V(t),l=Qe.test(t),c=e.style;if(l||(t=Je(s)),o=M.cssHooks[t]||M.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:c[t];"string"===(i=typeof n)&&(a=ee.exec(n))&&a[1]&&(n=oe(e,t,a),i="number"),null!=n&&n==n&&("number"!==i||l||(n+=a&&a[3]||(M.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var a,i=V(t);return Qe.test(t)||(t=Je(i)),"normal"===(a=void 0===(a=(i=M.cssHooks[t]||M.cssHooks[i])&&"get"in i?i.get(e,!0,n):a)?Ge(e,t,r):a)&&t in tt&&(a=tt[t]),""===n||n?(t=parseFloat(a),!0===n||isFinite(t)?t||0:a):a}}),M.each(["height","width"],function(e,s){M.cssHooks[s]={get:function(e,t,n){if(t)return!Ke.test(M.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,s,n):Oe(e,et,function(){return at(e,s,n)})},set:function(e,t,n){var r,a=qe(e),i=!v.scrollboxSize()&&"absolute"===a.position,o=(i||n)&&"border-box"===M.css(e,"boxSizing",!1,a),n=n?rt(e,s,n,o,a):0;return o&&i&&(n-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(a[s])-rt(e,s,"border",!1,a)-.5)),n&&(r=ee.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=M.css(e,s)),nt(0,t,n)}}}),M.cssHooks.marginLeft=We(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Oe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),M.each({margin:"",padding:"",border:"Width"},function(a,i){M.cssHooks[a+i]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[a+te[t]+i]=r[t]||r[t-2]||r[0];return n}},"margin"!==a&&(M.cssHooks[a+i].set=nt)}),M.fn.extend({css:function(e,t){return B(this,function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=qe(e),a=t.length;o<a;o++)i[t[o]]=M.css(e,t[o],!1,r);return i}return void 0!==n?M.style(e,t,n):M.css(e,t)},e,t,1<arguments.length)}}),(M.Tween=it).prototype={constructor:it,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||M.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(M.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return(e&&e.get?e:it.propHooks._default).get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.options.duration?this.pos=t=M.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:it.propHooks._default).set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=M.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){M.fx.step[e.prop]?M.fx.step[e.prop](e):1!==e.elem.nodeType||!M.cssHooks[e.prop]&&null==e.elem.style[Je(e.prop)]?e.elem[e.prop]=e.now:M.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},M.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},M.fx=it.prototype.init,M.fx.step={};var ot,st,lt=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function ut(){st&&(!1===T.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(ut):w.setTimeout(ut,M.fx.interval),M.fx.tick())}function dt(){return w.setTimeout(function(){ot=void 0}),ot=Date.now()}function ft(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=te[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function pt(e,t,n){for(var r,a=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function ht(a,e,t){var n,i,r=0,o=ht.prefilters.length,s=M.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=ot||dt(),e=Math.max(0,c.startTime+c.duration-e),t=1-(e/c.duration||0),n=0,r=c.tweens.length;n<r;n++)c.tweens[n].run(t);return s.notifyWith(a,[c,t,e]),t<1&&r?e:(r||s.notifyWith(a,[c,1,0]),s.resolveWith(a,[c]),!1)},c=s.promise({elem:a,props:M.extend({},e),opts:M.extend(!0,{specialEasing:{},easing:M.easing._default},t),originalProperties:e,originalOptions:t,startTime:ot||dt(),duration:t.duration,tweens:[],createTween:function(e,t){e=M.Tween(a,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(e),e},stop:function(e){var t=0,n=e?c.tweens.length:0;if(i)return this;for(i=!0;t<n;t++)c.tweens[t].run(1);return e?(s.notifyWith(a,[c,1,0]),s.resolveWith(a,[c,e])):s.rejectWith(a,[c,e]),this}}),u=c.props;for(!function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=V(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=M.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(u,c.opts.specialEasing);r<o;r++)if(n=ht.prefilters[r].call(c,a,u,c.opts))return x(n.stop)&&(M._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return M.map(u,pt,c),x(c.opts.start)&&c.opts.start.call(a,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),M.fx.timer(M.extend(l,{elem:a,anim:c,queue:c.opts.queue})),c}M.Animation=M.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,a=(e=x(e)?(t=e,["*"]):e.match(I)).length;r<a;r++)n=e[r],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,l,c,u="width"in t||"height"in t,d=this,f={},p=e.style,h=e.nodeType&&ie(e),m=Z.get(e,"fxshow");for(r in n.queue||(null==(o=M._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,M.queue(e,"fx").length||o.empty.fire()})})),t)if(a=t[r],lt.test(a)){if(delete t[r],i=i||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!m||void 0===m[r])continue;h=!0}f[r]=m&&m[r]||M.style(e,r)}if((l=!M.isEmptyObject(t))||!M.isEmptyObject(f))for(r in u&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Z.get(e,"display")),"none"===(u=M.css(e,"display"))&&(c?u=c:(le([e],!0),c=e.style.display||c,u=M.css(e,"display"),le([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===M.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(h=m.hidden):m=Z.access(e,"fxshow",{display:c}),i&&(m.hidden=!h),h&&le([e],!0),d.done(function(){for(r in h||le([e]),Z.remove(e,"fxshow"),f)M.style(e,r,f[r])})),l=pt(h?m[r]:0,r,d),r in m||(m[r]=l.start,h&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),M.speed=function(e,t,n){var r=e&&"object"==typeof e?M.extend({},e):{complete:n||!n&&t||x(e)&&e,duration:e,easing:n&&t||t&&!x(t)&&t};return M.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in M.fx.speeds?r.duration=M.fx.speeds[r.duration]:r.duration=M.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){x(r.old)&&r.old.call(this),r.queue&&M.dequeue(this,r.queue)},r},M.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var a=M.isEmptyObject(t),i=M.speed(e,n,r),r=function(){var e=ht(this,M.extend({},t),i);(a||Z.get(this,"finish"))&&e.stop(!0)};return r.finish=r,a||!1===i.queue?this.each(r):this.queue(i.queue,r)},stop:function(a,e,i){function o(e){var t=e.stop;delete e.stop,t(i)}return"string"!=typeof a&&(i=e,e=a,a=void 0),e&&this.queue(a||"fx",[]),this.each(function(){var e=!0,t=null!=a&&a+"queueHooks",n=M.timers,r=Z.get(this);if(t)r[t]&&r[t].stop&&o(r[t]);else for(t in r)r[t]&&r[t].stop&&ct.test(t)&&o(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=a&&n[t].queue!==a||(n[t].anim.stop(i),e=!1,n.splice(t,1));!e&&i||M.dequeue(this,a)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=Z.get(this),n=t[o+"queue"],r=t[o+"queueHooks"],a=M.timers,i=n?n.length:0;for(t.finish=!0,M.queue(this,o,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===o&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<i;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),M.each(["toggle","show","hide"],function(e,r){var a=M.fn[r];M.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?a.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),M.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){M.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),M.timers=[],M.fx.tick=function(){var e,t=0,n=M.timers;for(ot=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||M.fx.stop(),ot=void 0},M.fx.timer=function(e){M.timers.push(e),M.fx.start()},M.fx.interval=13,M.fx.start=function(){st||(st=!0,ut())},M.fx.stop=function(){st=null},M.fx.speeds={slow:600,fast:200,_default:400},M.fn.delay=function(r,e){return r=M.fx&&M.fx.speeds[r]||r,this.queue(e=e||"fx",function(e,t){var n=w.setTimeout(e,r);t.stop=function(){w.clearTimeout(n)}})},Wt=T.createElement("input"),Q=T.createElement("select").appendChild(T.createElement("option")),Wt.type="checkbox",v.checkOn=""!==Wt.value,v.optSelected=Q.selected,(Wt=T.createElement("input")).value="t",Wt.type="radio",v.radioValue="t"===Wt.value;var mt,gt=M.expr.attrHandle;M.fn.extend({attr:function(e,t){return B(this,M.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){M.removeAttr(this,e)})}}),M.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?M.prop(e,t,n):(1===i&&M.isXMLDoc(e)||(a=M.attrHooks[t.toLowerCase()]||(M.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void M.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):!(a&&"get"in a&&null!==(r=a.get(e,t)))&&null==(r=M.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(I);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?M.removeAttr(e,n):e.setAttribute(n,n),n}},M.each(M.expr.match.bool.source.match(/\w+/g),function(e,t){var o=gt[t]||M.find.attr;gt[t]=function(e,t,n){var r,a,i=t.toLowerCase();return n||(a=gt[i],gt[i]=r,r=null!=o(e,t,n)?i:null,gt[i]=a),r}});var yt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function xt(e){return(e.match(I)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function _t(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(I)||[]}M.fn.extend({prop:function(e,t){return B(this,M.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[M.propFix[e]||e]})}}),M.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&M.isXMLDoc(e)||(t=M.propFix[t]||t,a=M.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=M.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(M.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),M.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){M.propFix[this.toLowerCase()]=this}),M.fn.extend({addClass:function(t){var e,n,r,a,i,o,s=0;if(x(t))return this.each(function(e){M(this).addClass(t.call(this,e,bt(this)))});if((e=_t(t)).length)for(;n=this[s++];)if(o=bt(n),r=1===n.nodeType&&" "+xt(o)+" "){for(i=0;a=e[i++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");o!==(o=xt(r))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,r,a,i,o,s=0;if(x(t))return this.each(function(e){M(this).removeClass(t.call(this,e,bt(this)))});if(!arguments.length)return this.attr("class","");if((e=_t(t)).length)for(;n=this[s++];)if(o=bt(n),r=1===n.nodeType&&" "+xt(o)+" "){for(i=0;a=e[i++];)for(;-1<r.indexOf(" "+a+" ");)r=r.replace(" "+a+" "," ");o!==(o=xt(r))&&n.setAttribute("class",o)}return this},toggleClass:function(a,t){var i=typeof a,o="string"==i||Array.isArray(a);return"boolean"==typeof t&&o?t?this.addClass(a):this.removeClass(a):x(a)?this.each(function(e){M(this).toggleClass(a.call(this,e,bt(this),t),t)}):this.each(function(){var e,t,n,r;if(o)for(t=0,n=M(this),r=_t(a);e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==a&&"boolean"!=i||((e=bt(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==a&&Z.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+xt(bt(t))+" ").indexOf(r))return!0;return!1}});var wt=/\r/g;M.fn.extend({val:function(t){var n,e,r,a=this[0];return arguments.length?(r=x(t),this.each(function(e){1===this.nodeType&&(null==(e=r?t.call(this,e,M(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=M.map(e,function(e){return null==e?"":e+""})),(n=M.valHooks[this.type]||M.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):a?(n=M.valHooks[a.type]||M.valHooks[a.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(a,"value"))?e:"string"==typeof(e=a.value)?e.replace(wt,""):null==e?"":e:void 0}}),M.extend({valHooks:{option:{get:function(e){var t=M.find.attr(e,"value");return null!=t?t:xt(M.text(e))}},select:{get:function(e){for(var t,n=e.options,r=e.selectedIndex,a="select-one"===e.type,i=a?null:[],o=a?r+1:n.length,s=r<0?o:a?r:0;s<o;s++)if(((t=n[s]).selected||s===r)&&!t.disabled&&(!t.parentNode.disabled||!A(t.parentNode,"optgroup"))){if(t=M(t).val(),a)return t;i.push(t)}return i},set:function(e,t){for(var n,r,a=e.options,i=M.makeArray(t),o=a.length;o--;)((r=a[o]).selected=-1<M.inArray(M.valHooks.option.get(r),i))&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),M.each(["radio","checkbox"],function(){M.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<M.inArray(M(e).val(),t)}},v.checkOn||(M.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in w;function Tt(e){e.stopPropagation()}var Mt=/^(?:focusinfocus|focusoutblur)$/;M.extend(M.event,{trigger:function(e,t,n,r){var a,i,o,s,l,c,u,d=[n||T],f=y.call(e,"type")?e.type:e,p=y.call(e,"namespace")?e.namespace.split("."):[],h=u=i=n=n||T;if(3!==n.nodeType&&8!==n.nodeType&&!Mt.test(f+M.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),s=f.indexOf(":")<0&&"on"+f,(e=e[M.expando]?e:new M.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:M.makeArray(t,[e]),c=M.event.special[f]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!m(n)){for(o=c.delegateType||f,Mt.test(o+f)||(h=h.parentNode);h;h=h.parentNode)d.push(h),i=h;i===(n.ownerDocument||T)&&d.push(i.defaultView||i.parentWindow||w)}for(a=0;(h=d[a++])&&!e.isPropagationStopped();)u=h,e.type=1<a?o:c.bindType||f,(l=(Z.get(h,"events")||Object.create(null))[e.type]&&Z.get(h,"handle"))&&l.apply(h,t),(l=s&&h[s])&&l.apply&&G(h)&&(e.result=l.apply(h,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!G(n)||s&&x(n[f])&&!m(n)&&((i=n[s])&&(n[s]=null),M.event.triggered=f,e.isPropagationStopped()&&u.addEventListener(f,Tt),n[f](),e.isPropagationStopped()&&u.removeEventListener(f,Tt),M.event.triggered=void 0,i&&(n[s]=i)),e.result}},simulate:function(e,t,n){e=M.extend(new M.Event,n,{type:e,isSimulated:!0});M.event.trigger(e,null,t)}}),M.fn.extend({trigger:function(e,t){return this.each(function(){M.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return M.event.trigger(e,t,n,!0)}}),v.focusin||M.each({focus:"focusin",blur:"focusout"},function(n,r){function a(e){M.event.simulate(r,e.target,M.event.fix(e))}M.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Z.access(e,r);t||e.addEventListener(n,a,!0),Z.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Z.access(e,r)-1;t?Z.access(e,r,t):(e.removeEventListener(n,a,!0),Z.remove(e,r))}}});var kt=w.location,At={guid:Date.now()},St=/\?/;M.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||M.error("Invalid XML: "+(n?M.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Et=/\[\]$/,Lt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;M.param=function(e,t){function n(e,t){t=x(t)?t():t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var r,a=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!M.isPlainObject(e))M.each(e,function(){n(this.name,this.value)});else for(r in e)!function n(r,e,a,i){if(Array.isArray(e))M.each(e,function(e,t){a||Et.test(r)?i(r,t):n(r+"["+("object"==typeof t&&null!=t?e:"")+"]",t,a,i)});else if(a||"object"!==h(e))i(r,e);else for(var t in e)n(r+"["+t+"]",e[t],a,i)}(r,e[r],t,n);return a.join("&")},M.fn.extend({serialize:function(){return M.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=M.prop(this,"elements");return e?M.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!M(this).is(":disabled")&&Dt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!ce.test(e))}).map(function(e,t){var n=M(this).val();return null==n?null:Array.isArray(n)?M.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Ot=/%20/g,Pt=/#.*$/,It=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,zt=/^\/\//,Ft={},jt={},Ht="*/".concat("*"),Bt=T.createElement("a");function qt(i){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,a=e.toLowerCase().match(I)||[];if(x(t))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(i[n]=i[n]||[]).unshift(t)):(i[n]=i[n]||[]).push(t)}}function Ut(t,r,a,i){var o={},s=t===jt;function l(e){var n;return o[e]=!0,M.each(t[e]||[],function(e,t){t=t(r,a,i);return"string"!=typeof t||s||o[t]?s?!(n=t):void 0:(r.dataTypes.unshift(t),l(t),!1)}),n}return l(r.dataTypes[0])||!o["*"]&&l("*")}function Yt(e,t){var n,r,a=M.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r=r||{})[n]=t[n]);return r&&M.extend(!0,e,r),e}Bt.href=kt.href,M.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":M.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,M.ajaxSettings),t):Yt(M.ajaxSettings,e)},ajaxPrefilter:qt(Ft),ajaxTransport:qt(jt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,u,n,d,f,p,r,a,h=M.ajaxSetup({},t=t||{}),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?M(m):M.event,y=M.Deferred(),v=M.Callbacks("once memory"),x=h.statusCode||{},i={},o={},s="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(f){if(!n)for(n={};t=Rt.exec(u);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?u:null},setRequestHeader:function(e,t){return null==f&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,i[e]=t),this},overrideMimeType:function(e){return null==f&&(h.mimeType=e),this},statusCode:function(e){if(e)if(f)b.always(e[b.status]);else for(var t in e)x[t]=[x[t],e[t]];return this},abort:function(e){e=e||s;return l&&l.abort(e),_(0,e),this}};if(y.promise(b),h.url=((e||h.url||kt.href)+"").replace(zt,kt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(I)||[""],null==h.crossDomain){a=T.createElement("a");try{a.href=h.url,a.href=a.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=a.protocol+"//"+a.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=M.param(h.data,h.traditional)),Ut(Ft,h,t,b),f)return b;for(r in(p=M.event&&h.global)&&0==M.active++&&M.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Nt.test(h.type),c=h.url.replace(Pt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Ot,"+")):(a=h.url.slice(c.length),h.data&&(h.processData||"string"==typeof h.data)&&(c+=(St.test(c)?"&":"?")+h.data,delete h.data),!1===h.cache&&(c=c.replace(It,"$1"),a=(St.test(c)?"&":"?")+"_="+At.guid+++a),h.url=c+a),h.ifModified&&(M.lastModified[c]&&b.setRequestHeader("If-Modified-Since",M.lastModified[c]),M.etag[c]&&b.setRequestHeader("If-None-Match",M.etag[c])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&b.setRequestHeader("Content-Type",h.contentType),b.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ht+"; q=0.01":""):h.accepts["*"]),h.headers)b.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(!1===h.beforeSend.call(m,b,h)||f))return b.abort();if(s="abort",v.add(h.complete),b.done(h.success),b.fail(h.error),l=Ut(jt,h,t,b)){if(b.readyState=1,p&&g.trigger("ajaxSend",[b,h]),f)return b;h.async&&0<h.timeout&&(d=w.setTimeout(function(){b.abort("timeout")},h.timeout));try{f=!1,l.send(i,_)}catch(e){if(f)throw e;_(-1,e)}}else _(-1,"No Transport");function _(e,t,n,r){var a,i,o,s=t;f||(f=!0,d&&w.clearTimeout(d),l=void 0,u=r||"",b.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(o=function(e,t,n){for(var r,a,i,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}o=o||a}i=i||o}if(i)return i!==l[0]&&l.unshift(i),n[i]}(h,b,n)),!r&&-1<M.inArray("script",h.dataTypes)&&M.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),o=function(e,t,n,r){var a,i,o,s,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(o=c[l+" "+i]||c["* "+i]))for(a in c)if((s=a.split(" "))[1]===i&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[a]:!0!==c[a]&&(i=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(h,o,b,r),r?(h.ifModified&&((n=b.getResponseHeader("Last-Modified"))&&(M.lastModified[c]=n),(n=b.getResponseHeader("etag"))&&(M.etag[c]=n)),204===e||"HEAD"===h.type?s="nocontent":304===e?s="notmodified":(s=o.state,a=o.data,r=!(i=o.error))):(i=s,!e&&s||(s="error",e<0&&(e=0))),b.status=e,b.statusText=(t||s)+"",r?y.resolveWith(m,[a,s,b]):y.rejectWith(m,[b,s,i]),b.statusCode(x),x=void 0,p&&g.trigger(r?"ajaxSuccess":"ajaxError",[b,h,r?a:i]),v.fireWith(m,[b,s]),p&&(g.trigger("ajaxComplete",[b,h]),--M.active||M.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,n){return M.get(e,t,n,"json")},getScript:function(e,t){return M.get(e,void 0,t,"script")}}),M.each(["get","post"],function(e,a){M[a]=function(e,t,n,r){return x(t)&&(r=r||n,n=t,t=void 0),M.ajax(M.extend({url:e,type:a,dataType:r,data:t,success:n},M.isPlainObject(e)&&e))}}),M.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),M._evalUrl=function(e,t,n){return M.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){M.globalEval(e,t,n)}})},M.fn.extend({wrapAll:function(e){return this[0]&&(x(e)&&(e=e.call(this[0])),e=M(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return x(n)?this.each(function(e){M(this).wrapInner(n.call(this,e))}):this.each(function(){var e=M(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=x(t);return this.each(function(e){M(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){M(this).replaceWith(this.childNodes)}),this}}),M.expr.pseudos.hidden=function(e){return!M.expr.pseudos.visible(e)},M.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},M.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=M.ajaxSettings.xhr();v.cors=!!Gt&&"withCredentials"in Gt,v.ajax=Gt=!!Gt,M.ajaxTransport(function(a){var i,o;if(v.cors||Gt&&!a.crossDomain)return{send:function(e,t){var n,r=a.xhr();if(r.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(n in a.xhrFields)r[n]=a.xhrFields[n];for(n in a.mimeType&&r.overrideMimeType&&r.overrideMimeType(a.mimeType),a.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);i=function(e){return function(){i&&(i=o=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Vt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),o=r.onerror=r.ontimeout=i("error"),void 0!==r.onabort?r.onabort=o:r.onreadystatechange=function(){4===r.readyState&&w.setTimeout(function(){i&&o()})},i=i("abort");try{r.send(a.hasContent&&a.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),M.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),M.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return M.globalEval(e),e}}}),M.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),M.ajaxTransport("script",function(n){var r,a;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=M("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",a=function(e){r.remove(),a=null,e&&t("error"===e.type?404:200,e.type)}),T.head.appendChild(r[0])},abort:function(){a&&a()}}});var Wt,Zt=[],$t=/(=)\?(?=&|$)|\?\?/;M.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||M.expando+"_"+At.guid++;return this[e]=!0,e}}),M.ajaxPrefilter("json jsonp",function(e,t,n){var r,a,i,o=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=x(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace($t,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return i||M.error(r+" was not called"),i[0]},e.dataTypes[0]="json",a=w[r],w[r]=function(){i=arguments},n.always(function(){void 0===a?M(w).removeProp(r):w[r]=a,e[r]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(r)),i&&x(a)&&a(i[0]),i=a=void 0}),"script"}),v.createHTMLDocument=((Wt=T.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),M.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=T.implementation.createHTMLDocument("")).createElement("base")).href=T.location.href,t.head.appendChild(r)):t=T),r=!n&&[],(n=S.exec(e))?[t.createElement(n[1])]:(n=ge([e],t,r),r&&r.length&&M(r).remove(),M.merge([],n.childNodes)));var r},M.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return-1<s&&(r=xt(e.slice(s)),e=e.slice(0,s)),x(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),0<o.length&&M.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?M("<div>").append(M.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},M.expr.pseudos.animated=function(t){return M.grep(M.timers,function(e){return t===e.elem}).length},M.offset={setOffset:function(e,t,n){var r,a,i,o,s=M.css(e,"position"),l=M(e),c={};"static"===s&&(e.style.position="relative"),i=l.offset(),r=M.css(e,"top"),o=M.css(e,"left"),o=("absolute"===s||"fixed"===s)&&-1<(r+o).indexOf("auto")?(a=(s=l.position()).top,s.left):(a=parseFloat(r)||0,parseFloat(o)||0),null!=(t=x(t)?t.call(e,n,M.extend({},i)):t).top&&(c.top=t.top-i.top+a),null!=t.left&&(c.left=t.left-i.left+o),"using"in t?t.using.call(e,c):l.css(c)}},M.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){M.offset.setOffset(this,t,e)});var e,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===M.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===M.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=M(e).offset()).top+=M.css(e,"borderTopWidth",!0),a.left+=M.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-M.css(r,"marginTop",!0),left:t.left-a.left-M.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===M.css(e,"position");)e=e.offsetParent;return e||ne})}}),M.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var i="pageYOffset"===a;M.fn[t]=function(e){return B(this,function(e,t,n){var r;return m(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n?r?r[a]:e[t]:void(r?r.scrollTo(i?r.pageXOffset:n,i?n:r.pageYOffset):e[t]=n)},t,e,arguments.length)}}),M.each(["top","left"],function(e,n){M.cssHooks[n]=We(v.pixelPosition,function(e,t){if(t)return t=Ge(e,n),Be.test(t)?M(e).position()[n]+"px":t})}),M.each({Height:"height",Width:"width"},function(o,s){M.each({padding:"inner"+o,content:s,"":"outer"+o},function(r,i){M.fn[i]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),a=r||(!0===e||!0===t?"margin":"border");return B(this,function(e,t,n){var r;return m(e)?0===i.indexOf("outer")?e["inner"+o]:e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?M.css(e,t,a):M.style(e,t,n,a)},s,n?e:void 0,n)}})}),M.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){M.fn[t]=function(e){return this.on(t,e)}}),M.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),M.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){M.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;M.proxy=function(e,t){var n,r;if("string"==typeof t&&(r=e[t],t=e,e=r),x(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||M.guid++,r},M.holdReady=function(e){e?M.readyWait++:M.ready(!0)},M.isArray=Array.isArray,M.parseJSON=JSON.parse,M.nodeName=A,M.isFunction=x,M.isWindow=m,M.camelCase=V,M.type=h,M.now=Date.now,M.isNumeric=function(e){var t=M.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},M.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return M});var Jt=w.jQuery,Kt=w.$;return M.noConflict=function(e){return w.$===M&&(w.$=Kt),e&&w.jQuery===M&&(w.jQuery=Jt),M},void 0===e&&(w.jQuery=w.$=M),M}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=e()}(function(){return function r(a,i,o){function s(t,e){if(!i[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},a[t][0].call(n.exports,function(e){return s(a[t][1][e]||e)},n,n.exports,r,a,i,o)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";var r,a=e("../src/lib"),i={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(r in i){var o=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(o,i[r])}},{"../src/lib":230}],2:[function(e,t,n){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":381}],3:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":331}],4:[function(e,t,n){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":98}],5:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":212}],6:[function(e,t,n){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":382}],7:[function(e,t,n){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":383}],8:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),t.exports=r},{"./aggregate":2,"./bar":3,"./calendars":4,"./core":5,"./filter":6,"./groupby":7,"./pie":9,"./sort":10}],9:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":346}],10:[function(e,t,n){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":385}],11:[function(e,Qs,t){!function(){var P={version:"3.6.1"},a=[].slice,f=function(e){return a.call(e)},I=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function R(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(I)try{f(I.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),I)try{I.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,r=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,o=i.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){r.call(this,e,t,n+"")},i.setProperty=function(e,t,n){o.call(this,e,t+"",n)}}function l(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function c(e){return null===e?NaN:+e}function u(e){return!isNaN(e)}function e(i){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;i(e[a],t)<0?n=1+a:r=a}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;0<i(e[a],t)?r=a:n=1+a}return n}}}P.ascending=l,P.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},P.min=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&r<n&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&r<n&&(n=r)}return n},P.max=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&n<r&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&n<r&&(n=r)}return n},P.extent=function(e,t){var n,r,a,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=e[i])&&(r<n&&(n=r),a<r&&(a=r))}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&(r<n&&(n=r),a<r&&(a=r))}return[n,a]},P.sum=function(e,t){var n,r=0,a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)u(n=+e[i])&&(r+=n);else for(;++i<a;)u(n=+t.call(e,e[i],i))&&(r+=n);return r},P.mean=function(e,t){var n,r=0,a=e.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)u(n=c(e[i]))?r+=n:--o;else for(;++i<a;)u(n=c(t.call(e,e[i],i)))?r+=n:--o;if(o)return r/o},P.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),t=+e[r-1],n=n-r;return n?t+n*(e[r]-t):t},P.median=function(e,t){var n,r=[],a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)u(n=c(e[i]))&&r.push(n);else for(;++i<a;)u(n=c(t.call(e,e[i],i)))&&r.push(n);if(r.length)return P.quantile(r.sort(l),.5)},P.variance=function(e,t){var n,r,a=e.length,i=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<a;)u(n=c(e[s]))&&(o+=(r=n-i)*(n-(i+=r/++l)));else for(;++s<a;)u(n=c(t.call(e,e[s],s)))&&(o+=(r=n-i)*(n-(i+=r/++l)));if(1<l)return o/(l-1)},P.deviation=function(){var e=P.variance.apply(this,arguments);return e&&Math.sqrt(e)};var d=e(l);function p(e){return e.length}P.bisectLeft=d.left,P.bisect=P.bisectRight=d.right,P.bisector=function(n){return e(1===n.length?function(e,t){return l(n(e),t)}:n)},P.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,i<2&&(t=0));for(var r,a,i=n-t;i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},P.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},P.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},P.transpose=function(e){if(!(a=e.length))return[];for(var t=-1,n=P.min(e,p),r=new Array(n);++t<n;)for(var a,i=-1,o=r[t]=new Array(a);++i<a;)o[i]=e[i][t];return r},P.zip=function(){return P.transpose(arguments)},P.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},P.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},P.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},P.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);0<=--a;)for(t=(r=e[a]).length;0<=--t;)n[--o]=r[t];return n};var D=Math.abs;function h(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function v(){this._=Object.create(null)}P.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,a=[],i=function(e){var t=1;for(;e*t%1;)t*=10;return t}(D(n)),o=-1;if(e*=i,t*=i,(n*=i)<0)for(;(r=e+n*++o)>t;)a.push(r/i);else for(;(r=e+n*++o)<t;)a.push(r/i);return a},P.map=function(e,t){var n=new v;if(e instanceof v)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,a=-1,i=e.length;if(1===arguments.length)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t.call(e,r=e[a],a),r)}else for(var o in e)n.set(o,e[o]);return n};var m="__proto__",g="\0";function y(e){return(e+="")===m||e[0]===g?g+e:e}function x(e){return(e+="")[0]===g?e.slice(1):e}function b(e){return y(e)in this._}function _(e){return(e=y(e))in this._&&delete this._[e]}function w(){var e,t=[];for(e in this._)t.push(x(e));return t}function T(){var e,t=0;for(e in this._)++t;return t}function M(){for(var e in this._)return!1;return!0}function k(){this._=Object.create(null)}function C(e){return e}function A(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=S.length;n<r;++n){var a=S[n]+t;if(a in e)return a}}h(v,{has:b,get:function(e){return this._[y(e)]},set:function(e,t){return this._[y(e)]=t},remove:_,keys:w,values:function(){var e,t=[];for(e in this._)t.push(this._[e]);return t},entries:function(){var e,t=[];for(e in this._)t.push({key:x(e),value:this._[e]});return t},size:T,empty:M,forEach:function(e){for(var t in this._)e.call(this,x(t),this._[t])}}),P.nest=function(){var d,f,p={},h=[],t=[];function m(n,e,r){if(r>=h.length)return f?f.call(p,e):d?e.sort(d):e;for(var t,a,i,o,s=-1,l=e.length,c=h[r++],u=new v;++s<l;)(o=u.get(t=c(a=e[s])))?o.push(a):u.set(t,[a]);return i=n?(a=n(),function(e,t){a.set(e,m(n,t,r))}):(a={},function(e,t){a[e]=m(n,t,r)}),u.forEach(i),a}return p.map=function(e,t){return m(t,e,0)},p.entries=function(e){return function n(e,r){if(r>=h.length)return e;var a=[],i=t[r++];return e.forEach(function(e,t){a.push({key:e,values:n(t,r)})}),i?a.sort(function(e,t){return i(e.key,t.key)}):a}(m(P.map,e,0),0)},p.key=function(e){return h.push(e),p},p.sortKeys=function(e){return t[h.length-1]=e,p},p.sortValues=function(e){return d=e,p},p.rollup=function(e){return f=e,p},p},P.set=function(e){var t=new k;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},h(k,{has:b,add:function(e){return this._[y(e+="")]=!0,e},remove:_,values:w,size:T,empty:M,forEach:function(e){for(var t in this._)e.call(this,x(t))}}),P.behavior={},P.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=function(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}(e,t,t[n]);return e};var S=["webkit","ms","moz","Moz","o","O"];function E(){}function L(){}function O(a){var i=[],r=new v;function e(){for(var e,t=i,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return a}return e.on=function(e,t){var n=r.get(e);return arguments.length<2?n&&n.on:(n&&(n.on=null,i=i.slice(0,n=i.indexOf(n)).concat(i.slice(n+1)),r.remove(e)),t&&i.push(r.set(e,{on:t})),a)},e}function N(){P.event.preventDefault()}function z(){for(var e,t=P.event;e=t.sourceEvent;)t=e;return t}function F(a){for(var i=new L,e=0,t=arguments.length;++e<t;)i[arguments[e]]=O(i);return i.of=function(n,r){return function(e){try{var t=e.sourceEvent=P.event;e.target=a,P.event=e,i[e.type].apply(n,r)}finally{P.event=t}}},i}P.dispatch=function(){for(var e=new L,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=O(e);return e},L.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},P.event=null,P.requote=function(e){return e.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function B(e){return H(e,V),e}var q=function(e,t){return t.querySelector(e)},U=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[A(e,"matchesSelector")];return(Y=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(q=function(e,t){return Sizzle(e,t)[0]||null},Y=(U=Sizzle).matchesSelector),P.selection=function(){return P.select(I.documentElement)};var V=P.selection.prototype=[];function G(e){return"function"==typeof e?e:function(){return q(e,this)}}function W(e){return"function"==typeof e?e:function(){return U(e,this)}}V.select=function(e){var t,n,r,a,i=[];e=G(e);for(var o=-1,s=this.length;++o<s;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(a=r[l])?(t.push(n=e.call(a,a.__data__,l,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return B(i)},V.selectAll=function(e){var t,n,r=[];e=W(e);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=f(e.call(n,n.__data__,s,a))),t.parentNode=n);return B(r)};var Z="http://www.w3.org/1999/xhtml",$={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(t,n){return t=P.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function J(e){return e.trim().replace(/\s+/g," ")}function K(e){return new RegExp("(?:^|\\s+)"+P.requote(e)+"(?:\\s+|$)","g")}function Q(e){return(e+"").trim().split(/^|\s+/)}function ee(n,r){var a=(n=Q(n).map(te)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<a;)n[e](this,t)}:function(){for(var e=-1;++e<a;)n[e](this,r)}}function te(r){var a=K(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(a.lastIndex=0,a.test(n)||e.setAttribute("class",J(n+" "+r))):e.setAttribute("class",J(n.replace(a," ")))}}function ne(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function re(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function ae(n){return"function"==typeof n?n:(n=P.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Z&&e.documentElement.namespaceURI===Z?e.createElement(n):e.createElementNS(t,n)}}function ie(){var e=this.parentNode;e&&e.removeChild(this)}function oe(e){return{__data__:e}}function se(e){return function(){return Y(this,e)}}function le(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,i=e[n],o=0,s=i.length;o<s;o++)(a=i[o])&&t(a,o,n);return e}function ce(e){return H(e,ue),e}P.ns={prefix:$,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),$.hasOwnProperty(n)?{space:$[n],local:e}:e}},V.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=P.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(X(t,e[t]));return this}return this.each(X(e,t))},V.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=Q(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!K(e[a]).test(t))return!1;return!0}for(t in e)this.each(ee(t,e[t]));return this}return this.each(ee(e,t))},V.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(ne(n,e[n],t));return this}if(r<2){r=this.node();return R(r).getComputedStyle(r,null).getPropertyValue(e)}n=""}return this.each(ne(e,t,n))},V.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))},V.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},V.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},V.append=function(e){return e=ae(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},V.insert=function(e,t){return e=ae(e),t=G(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},V.remove=function(){return this.each(ie)},V.data=function(e,h){var t,n,r=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(t=this[0]).length);++r<a;)(n=t[r])&&(e[r]=n.__data__);return e}function i(e,t){var n,r,a=e.length,i=t.length,o=Math.min(a,i),s=new Array(i),l=new Array(i),c=new Array(a);if(h){for(var u,d=new v,f=new Array(a),p=-1;++p<a;)(n=e[p])&&(d.has(u=h.call(n,n.__data__,p))?c[p]=n:d.set(u,n),f[p]=u);for(p=-1;++p<i;)(n=d.get(u=h.call(t,r=t[p],p)))?!0!==n&&((s[p]=n).__data__=r):l[p]=oe(r),d.set(u,!0);for(p=-1;++p<a;)p in f&&!0!==d.get(f[p])&&(c[p]=e[p])}else{for(p=-1;++p<o;)n=e[p],r=t[p],n?(n.__data__=r,s[p]=n):l[p]=oe(r);for(;p<i;++p)l[p]=oe(t[p]);for(;p<a;++p)c[p]=e[p]}l.update=s,l.parentNode=s.parentNode=c.parentNode=e.parentNode,m.push(l),g.push(s),y.push(c)}var m=ce([]),g=B([]),y=B([]);if("function"==typeof e)for(;++r<a;)i(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<a;)i(t=this[r],e);return g.enter=function(){return m},g.exit=function(){return y},g},V.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},V.filter=function(e){var t,n,r,a=[];"function"!=typeof e&&(e=se(e));for(var i=0,o=this.length;i<o;i++){a.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return B(a)},V.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,i=r[a];0<=--a;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},V.sort=function(e){e=function(n){arguments.length||(n=l);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},V.each=function(r){return le(this,function(e,t,n){r.call(e,e.__data__,t,n)})},V.call=function(e){var t=f(arguments);return e.apply(t[0]=this,t),this},V.empty=function(){return!this.node()},V.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var i=n[r];if(i)return i}return null},V.size=function(){var e=0;return le(this,function(){++e}),e};var ue=[];function de(a,t,n){var r="__on"+a,e=a.indexOf("."),i=pe;0<e&&(a=a.slice(0,e));var o=fe.get(a);function s(){var e=this[r];e&&(this.removeEventListener(a,e,e.$),delete this[r])}return o&&(a=o,i=he),e?t?function(){var e=i(t,f(arguments));s.call(this),this.addEventListener(a,this[r]=e,e.$=n),e._=t}:s:t?E:function(){var e,t,n,r=new RegExp("^__on([^.]+)"+P.requote(a)+"$");for(t in this)(e=t.match(r))&&(n=this[t],this.removeEventListener(e[1],n,n.$),delete this[t])}}P.selection.enter=ce,(P.selection.enter.prototype=ue).append=V.append,ue.empty=V.empty,ue.node=V.node,ue.call=V.call,ue.size=V.size,ue.select=function(e){for(var t,n,r,a,i,o=[],s=-1,l=this.length;++s<l;){r=(a=this[s]).update,o.push(t=[]),t.parentNode=a.parentNode;for(var c=-1,u=a.length;++c<u;)(i=a[c])?(t.push(r[c]=n=e.call(a.parentNode,i.__data__,c,s)),n.__data__=i.__data__):t.push(null)}return B(o)},ue.insert=function(e,t){var o,s,l;return arguments.length<2&&(o=this,t=function(e,t,n){var r,a=o[n].update,i=a.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=a[s])&&++s<i;);return r}),V.insert.call(this,e,t)},P.select=function(e){var t;return"string"==typeof e?(t=[q(e,I)]).parentNode=I.documentElement:(t=[e]).parentNode=s(e),B([t])},P.selectAll=function(e){var t;return"string"==typeof e?(t=f(U(e,I))).parentNode=I.documentElement:(t=f(e)).parentNode=null,B([t])},V.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(de(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(de(e,t,n))};var fe=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});function pe(n,r){return function(e){var t=P.event;P.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{P.event=t}}}function he(e,t){var n=pe(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}I&&fe.forEach(function(e){"on"+e in I&&fe.remove(e)});var me,ge=0;function ye(e){var n,r,a=".dragsuppress-"+ ++ge,i="click"+a,o=P.select(R(e)).on("touchmove"+a,N).on("dragstart"+a,N).on("selectstart"+a,N);return(me=null==me?!("onselectstart"in e)&&A(e.style,"userSelect"):me)&&(n=s(e).style,r=n[me],n[me]="none"),function(e){var t;o.on(a,null),me&&(n[me]=r),e&&(t=function(){o.on(i,null)},o.on(i,function(){N(),t()},!0),setTimeout(t,0))}}P.mouse=function(e){return xe(e,z())};var ve=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function xe(e,t){if(t.changedTouches&&(t=t.changedTouches[0]),(n=e.ownerSVGElement||e).createSVGPoint){var n,r,a=n.createSVGPoint();return ve<0&&(((r=R(e)).scrollX||r.scrollY)&&(r=(n=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),ve=!(r.f||r.e),n.remove())),ve?(a.x=t.pageX,a.y=t.pageY):(a.x=t.clientX,a.y=t.clientY),[(a=a.matrixTransform(e.getScreenCTM().inverse())).x,a.y]}a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function be(){return P.event.changedTouches[0].identifier}P.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=z().changedTouches),t)for(var r,a=0,i=t.length;a<i;++a)if((r=t[a]).identifier===n)return xe(e,r)},P.behavior.drag=function(){var m=F(n,"drag","dragstart","dragend"),g=null,e=r(E,P.mouse,R,"mousemove","mouseup"),t=r(be,P.touch,C,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(u,d,f,p,h){return function(){var r,e=P.event.target.correspondingElement||P.event.target,a=this.parentNode,i=m.of(this,arguments),o=0,s=u(),t=".drag"+(null==s?"":"-"+s),n=P.select(f(e)).on(p+t,function(){var e,t,n=d(a,s);n&&(e=n[0]-c[0],t=n[1]-c[1],o|=e|t,i({type:"drag",x:(c=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t}))}).on(h+t,function(){d(a,s)&&(n.on(p+t,null).on(h+t,null),l(o),i({type:"dragend"}))}),l=ye(e),c=d(a,s);r=g?[(r=g.apply(this,arguments)).x-c[0],r.y-c[1]]:[0,0],i({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(g=e,n):g},P.rebind(n,m,"on")},P.touches=function(n,e){return(e=arguments.length<2?z().touches:e)?f(e).map(function(e){var t=xe(n,e);return t.identifier=e.identifier,t}):[]};var _e=1e-6,we=_e*_e,Te=Math.PI,Me=2*Te,ke=Me-_e,Ae=Te/2,Se=Te/180,Ee=180/Te;function Le(e){return 0<e?1:e<0?-1:0}function Ce(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function De(e){return 1<e?0:e<-1?Te:Math.acos(e)}function Oe(e){return 1<e?Ae:e<-1?-Ae:Math.asin(e)}function Pe(e){return((e=Math.exp(e))+1/e)/2}function Ie(e){return(e=Math.sin(e/2))*e}var Re=Math.SQRT2;P.interpolateZoom=function(e,t){var r,a,i,n,o=e[0],s=e[1],l=e[2],c=t[0],e=t[1],t=t[2],u=c-o,d=e-s,c=u*u+d*d;return(n=c<we?(i=Math.log(t/l)/Re,function(e){return[o+e*u,s+e*d,l*Math.exp(Re*e*i)]}):(r=Math.sqrt(c),e=(t*t-l*l+4*c)/(2*l*2*r),n=(t*t-l*l-4*c)/(2*t*2*r),a=Math.log(Math.sqrt(e*e+1)-e),i=(Math.log(Math.sqrt(n*n+1)-n)-a)/Re,function(e){var t=e*i,n=Pe(a),e=l/(2*r)*(n*(e=Re*t+a,((e=Math.exp(2*e))-1)/(e+1))-(e=a,((e=Math.exp(a))-1/e)/2));return[o+e*u,s+e*d,l*n/Pe(Re*t+a)]})).duration=1e3*i,n},P.behavior.zoom=function(){var t,s,n,r,v,a,i,o,l,x={x:0,y:0,k:1},c=[960,500],u=Fe,d=250,f=0,b="mousedown.zoom",p="mousemove.zoom",h="mouseup.zoom",_="touchstart.zoom",w=F(m,"zoomstart","zoom","zoomend");function m(e){e.on(b,C).on(ze+".zoom",y).on("dblclick.zoom",O).on(_,D)}function T(e){return[(e[0]-x.x)/x.k,(e[1]-x.y)/x.k]}function M(e){x.k=Math.max(u[0],Math.min(u[1],e))}function k(e,t){var n;t=[(n=t)[0]*x.k+x.x,n[1]*x.k+x.y],x.x+=e[0]-t[0],x.y+=e[1]-t[1]}function A(e,t,n,r){e.__chart__={x:x.x,y:x.y,k:x.k},M(Math.pow(2,r)),k(s=t,n),e=P.select(e),(e=0<d?e.transition().duration(d):e).call(m.event)}function g(){i&&i.domain(a.range().map(function(e){return(e-x.x)/x.k}).map(a.invert)),l&&l.domain(o.range().map(function(e){return(e-x.y)/x.k}).map(o.invert))}function S(e){f++||e({type:"zoomstart"})}function E(e){g(),e({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function L(e){--f||(e({type:"zoomend"}),s=null)}function C(){var e=this,t=w.of(e,arguments),n=0,r=P.select(R(e)).on(p,function(){n=1,k(P.mouse(e),a),E(t)}).on(h,function(){r.on(p,null).on(h,null),i(n),L(t)}),a=T(P.mouse(e)),i=ye(e);ks.call(e),S(t)}function D(){var l,c=this,u=w.of(c,arguments),d={},f=0,a=".zoom-"+P.event.changedTouches[0].identifier,o="touchmove"+a,s="touchend"+a,p=[],i=P.select(c),h=ye(c);function m(){var e=P.touches(c);return l=x.k,e.forEach(function(e){e.identifier in d&&(d[e.identifier]=T(e))}),e}function e(){var e=P.event.target;P.select(e).on(o,g).on(s,y),p.push(e);for(var t=P.event.changedTouches,n=0,r=t.length;n<r;++n)d[t[n].identifier]=null;var a,i=m(),e=Date.now();1===i.length?(e-v<500&&(a=i[0],A(c,a,d[a.identifier],Math.floor(Math.log(x.k)/Math.LN2)+1),N()),v=e):1<i.length&&(a=i[0],e=i[1],i=a[0]-e[0],e=a[1]-e[1],f=i*i+e*e)}function g(){var e,t,n=P.touches(c);ks.call(c);for(var r,a,i,o=0,s=n.length;o<s;++o,t=null)if(e=n[o],t=d[e.identifier]){if(i)break;a=e,i=t}t&&(r=(r=e[0]-a[0])*r+(r=e[1]-a[1])*r,r=f&&Math.sqrt(r/f),a=[(a[0]+e[0])/2,(a[1]+e[1])/2],i=[(i[0]+t[0])/2,(i[1]+t[1])/2],M(r*l)),v=null,k(a,i),E(u)}function y(){if(P.event.touches.length){for(var e,t=P.event.changedTouches,n=0,r=t.length;n<r;++n)delete d[t[n].identifier];for(e in d)return void m()}P.selectAll(p).on(a,null),i.on(b,C).on(_,D),h(),L(u)}e(),S(u),i.on(b,null).on(_,e)}function y(){var e=w.of(this,arguments);r?clearTimeout(r):(ks.call(this),t=T(s=n||P.mouse(this)),S(e)),r=setTimeout(function(){r=null,L(e)},50),N(),M(Math.pow(2,.002*Ne())*x.k),k(s,t),E(e)}function O(){var e=P.mouse(this),t=Math.log(x.k)/Math.LN2;A(this,e,T(e),P.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return ze=ze||("onwheel"in I?(Ne=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in I?(Ne=function(){return P.event.wheelDelta},"mousewheel"):(Ne=function(){return-P.event.detail},"MozMousePixelScroll")),m.event=function(e){e.each(function(){var o=w.of(this,arguments),t=x;Es?P.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},S(o)}).tween("zoom:zoom",function(){var n=c[0],e=c[1],r=s?s[0]:n/2,a=s?s[1]:e/2,i=P.interpolateZoom([(r-x.x)/x.k,(a-x.y)/x.k,n/x.k],[(r-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(e){var t=i(e),e=n/t[2];this.__chart__=x={x:r-t[0]*e,y:a-t[1]*e,k:e},E(o)}}).each("interrupt.zoom",function(){L(o)}).each("end.zoom",function(){L(o)}):(this.__chart__=x,S(o),E(o),L(o))})},m.translate=function(e){return arguments.length?(x={x:+e[0],y:+e[1],k:x.k},g(),m):[x.x,x.y]},m.scale=function(e){return arguments.length?(x={x:x.x,y:x.y,k:null},M(+e),g(),m):x.k},m.scaleExtent=function(e){return arguments.length?(u=null==e?Fe:[+e[0],+e[1]],m):u},m.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],m):n},m.size=function(e){return arguments.length?(c=e&&[+e[0],+e[1]],m):c},m.duration=function(e){return arguments.length?(d=+e,m):d},m.x=function(e){return arguments.length?(a=(i=e).copy(),x={x:0,y:0,k:1},m):i},m.y=function(e){return arguments.length?(o=(l=e).copy(),x={x:0,y:0,k:1},m):l},P.rebind(m,w,"on")};var Ne,ze,Fe=[0,1/0];function je(){}function He(e,t,n){return this instanceof He?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.s,e.l):at(""+e,it,He):new He(e,t,n)}(P.color=je).prototype.toString=function(){return this.rgb()+""};t=(P.hsl=He).prototype=new je;function Be(e,t,n){var r,a;function i(e){return Math.round(255*(360<(e=e)?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new et(i(e+120),i(e),i(e-120))}function qe(e,t,n){return this instanceof qe?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof qe?new qe(e.h,e.c,e.l):Xe((e instanceof Ye?e:e=ot((e=P.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new qe(e,t,n)}t.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,this.l/e)},t.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,e*this.l)},t.rgb=function(){return Be(this.h,this.s,this.l)};i=(P.hcl=qe).prototype=new je;function Ue(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ye(n,Math.cos(e*=Se)*t,Math.sin(e)*t)}function Ye(e,t,n){return this instanceof Ye?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Ye?new Ye(e.l,e.a,e.b):e instanceof qe?Ue(e.h,e.c,e.l):ot((e=et(e)).r,e.g,e.b):new Ye(e,t,n)}i.brighter=function(e){return new qe(this.h,this.c,Math.min(100,this.l+Ve*(arguments.length?e:1)))},i.darker=function(e){return new qe(this.h,this.c,Math.max(0,this.l-Ve*(arguments.length?e:1)))},i.rgb=function(){return Ue(this.h,this.c,this.l).rgb()},P.lab=Ye;var Ve=18,Ge=.95047,We=1,Ze=1.08883,d=Ye.prototype=new je;function $e(e,t,n){e=(e+16)/116,n=e-n/200;return new et(Qe(3.2404542*(t=Je(t=e+t/500)*Ge)-1.5371385*(e=Je(e)*We)-.4985314*(n=Je(n)*Ze)),Qe(-.969266*t+1.8760108*e+.041556*n),Qe(.0556434*t-.2040259*e+1.0572252*n))}function Xe(e,t,n){return 0<e?new qe(Math.atan2(n,t)*Ee,Math.sqrt(t*t+n*n),e):new qe(NaN,NaN,e)}function Je(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function Ke(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function Qe(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function et(e,t,n){return this instanceof et?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof et?new et(e.r,e.g,e.b):at(""+e,et,Be):new et(e,t,n)}function tt(e){return new et(e>>16,e>>8&255,255&e)}function nt(e){return tt(e)+""}d.brighter=function(e){return new Ye(Math.min(100,this.l+Ve*(arguments.length?e:1)),this.a,this.b)},d.darker=function(e){return new Ye(Math.max(0,this.l-Ve*(arguments.length?e:1)),this.a,this.b)},d.rgb=function(){return $e(this.l,this.a,this.b)};t=(P.rgb=et).prototype=new je;function rt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function at(e,t,n){var r,a=0,i=0,o=0,s=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(s)switch(r=s[2].split(","),s[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(lt(r[0]),lt(r[1]),lt(r[2]))}return(s=ct.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&s)>>4,a|=a>>4,i=240&s,i|=i>>4,o=15&s,o|=o<<4):7===e.length&&(a=(16711680&s)>>16,i=(65280&s)>>8,o=255&s)),t(a,i,o))}function it(e,t,n){var r,a,i=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-i,l=(o+i)/2;return s?(a=l<.5?s/(o+i):s/(2-o-i),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=0<l&&l<1?0:r),new He(r,a,l)}function ot(e,t,n){var r=Ke((.4124564*(e=st(e))+.3575761*(t=st(t))+.1804375*(n=st(n)))/Ge),a=Ke((.2126729*e+.7151522*t+.072175*n)/We);return Ye(116*a-16,500*(r-a),200*(a-Ke((.0193339*e+.119192*t+.9503041*n)/Ze)))}function st(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function lt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}t.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new et(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new et(30,30,30)},t.darker=function(e){return new et((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},t.hsl=function(){return it(this.r,this.g,this.b)},t.toString=function(){return"#"+rt(this.r)+rt(this.g)+rt(this.b)};var ct=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ut(e){return"function"==typeof e?e:function(){return e}}function dt(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),ft(e,t,r,n)}}function ft(a,i,o,e){var n,s={},l=P.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function t(){var e,t,n,r=u.status;if(!r&&((n=(t=u).responseType)&&"text"!==n?t.response:t.responseText)||200<=r&&r<300||304===r){try{e=o.call(s,u)}catch(e){return void l.error.call(s,e)}l.load.call(s,e)}else l.error.call(s,u)}return"onload"in(u=self.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(a)?new XDomainRequest:u)?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=P.event;P.event=e;try{l.progress.call(s,u)}finally{P.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c[e]:(null==t?delete c[e]:c[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(i=null==e?null:e+"",s):i},s.responseType=function(e){return arguments.length?(d=e,s):d},s.response=function(e){return o=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(f(arguments)))}}),s.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),u.open(e,a,!0),null==i||"accept"in c||(c.accept=i+",*/*"),u.setRequestHeader)for(var r in c)u.setRequestHeader(r,c[r]);return null!=i&&u.overrideMimeType&&u.overrideMimeType(i),null!=d&&(u.responseType=d),null!=n&&s.on("error",n).on("load",function(e){n(null,e)}),l.beforesend.call(s,u),u.send(null==t?null:t),s},s.abort=function(){return u.abort(),s},P.rebind(s,l,"on"),null==e?s:s.get(1===(n=e).length?function(e,t){n(null==e?t:null)}:n)}ct.forEach(function(e,t){ct.set(e,tt(t))}),P.functor=ut,P.xhr=dt(C),P.dsv=function(a,i){var t=new RegExp('["'+a+"\n]"),f=a.charCodeAt(0);function o(e,t,n){arguments.length<3&&(n=t,t=null);var r=ft(e,i,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}function n(e){return e.map(c).join(a)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o.parse=function(e,r){var t;return o.parseRows(e,function(a,e){if(t)return t(a,e-1);function n(e){for(var t={},n=a.length,r=0;r<n;++r)t[a[r]]=e[r];return t}t=r?function(e,t){return r(n(e),t)}:n})},o.parseRows=function(a,e){var t,i,o={},s={},n=[],l=a.length,c=0,r=0;function u(){if(l<=c)return s;if(i)return i=!1,o;var e=c;if(34===a.charCodeAt(e)){for(var t=e;t++<l;)if(34===a.charCodeAt(t)){if(34!==a.charCodeAt(t+1))break;++t}return c=t+2,13===(n=a.charCodeAt(t+1))?(i=!0,10===a.charCodeAt(t+2)&&++c):10===n&&(i=!0),a.slice(e+1,t).replace(/""/g,'"')}for(;c<l;){var n,r=1;if(10===(n=a.charCodeAt(c++)))i=!0;else if(13===n)i=!0,10===a.charCodeAt(c)&&(++c,++r);else if(n!==f)continue;return a.slice(e,c-r)}return a.slice(e)}for(;(t=u())!==s;){for(var d=[];t!==o&&t!==s;)d.push(t),t=u();e&&null==(d=e(d,r++))||n.push(d)}return n},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new k,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(c).join(a)].concat(e.map(function(t){return r.map(function(e){return c(t[e])}).join(a)})).join("\n")},o.formatRows=function(e){return e.map(n).join("\n")},o},P.csv=P.dsv(",","text/csv"),P.tsv=P.dsv("\t","text/tab-separated-values");var pt,ht,mt,gt,yt=this[A(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function vt(e,t,n){var r=arguments.length;r<2&&(t=0);r={c:e,t:(n=r<3?Date.now():n)+t,n:null};return ht?ht.n=r:pt=r,ht=r,mt||(gt=clearTimeout(gt),mt=1,yt(xt)),r}function xt(){var e=bt(),e=_t()-e;24<e?(isFinite(e)&&(clearTimeout(gt),gt=setTimeout(xt,e)),mt=0):(mt=1,yt(xt))}function bt(){for(var e=Date.now(),t=pt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function _t(){for(var e,t=pt,n=1/0;t;)t=t.c?(t.t<n&&(n=t.t),(e=t).n):e?e.n=t.n:pt=t.n;return ht=e,n}function wt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}P.timer=function(){vt.apply(this,arguments)},P.timer.flush=function(){bt(),_t()},P.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Tt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*D(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}});P.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=P.round(e,wt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Tt[8+n/3]};var Mt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,kt=P.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=P.round(e,wt(e,t))).toFixed(Math.max(0,Math.min(20,wt(e*(1+1e-15),t))))}});function At(e){return e+""}var St=P.time={},Et=Date;function Lt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Lt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ct.setUTCDate.apply(this._,arguments)},setDay:function(){Ct.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ct.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ct.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ct.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ct.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ct.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ct.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ct.setTime.apply(this._,arguments)}};var Ct=Date.prototype;function Dt(r,i,o){function e(e){var t=r(e),n=a(t,1);return e-t<n-e?t:n}function s(e){return i(e=r(new Et(e-1)),1),e}function a(e,t){return i(e=new Et(+e),t),e}function l(e,t,n){var r=s(e),a=[];if(1<n)for(;r<t;)o(r)%n||a.push(new Date(+r)),i(r,1);else for(;r<t;)a.push(new Date(+r)),i(r,1);return a}(r.floor=r).round=e,r.ceil=s,r.offset=a,r.range=l;var t=r.utc=Ot(r);return(t.floor=t).round=Ot(e),t.ceil=Ot(s),t.offset=Ot(a),t.range=function(e,t,n){try{var r=new(Et=Lt);return r._=e,l(r,t,n)}finally{Et=Date}},r}function Ot(r){return function(e,t){try{var n=new(Et=Lt);return n._=e,r(n,t)._}finally{Et=Date}}}function Pt(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function c(s){var l=s.length;function e(e){for(var t,n,r,a=[],i=-1,o=0;++i<l;)37===s.charCodeAt(i)&&(a.push(s.slice(o,i)),null!=(n=It[t=s.charAt(++i)])&&(t=s.charAt(++i)),(r=b[t])&&(t=r(e,null==n?"e"===t?" ":"0":n)),a.push(t),o=i+1);return a.push(s.slice(o,i)),a.join("")}return e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(t,s,e,0)!=e.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var n=null!=t.Z&&Et!==Lt,e=new(n?Lt:Et);return"j"in t?e.setFullYear(t.y,0,t.j):"W"in t||"U"in t?("w"in t||(t.w="W"in t?1:0),e.setFullYear(t.y,0,1),e.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(e.getDay()+5)%7:t.w+7*t.U-(e.getDay()+6)%7)):e.setFullYear(t.y,t.m,t.d),e.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),n?e._:e},e.toString=function(){return s},e}function u(e,t,n,r){for(var a,i,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(a=t.charCodeAt(o++))){if(i=t.charAt(o++),!(i=_[i in It?t.charAt(o++):i])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var n=c(e);function t(e){try{var t=new(Et=Lt);return t._=e,n(t)}finally{Et=Date}}return t.parse=function(e){try{Et=Lt;var t=n.parse(e);return t&&t._}finally{Et=Date}},t.toString=n.toString,t},c.multi=c.utc.multi=tn;var d=P.map(),f=Ft(i),p=jt(i),h=Ft(o),m=jt(o),g=Ft(s),y=jt(s),v=Ft(l),x=jt(l);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(t),d:function(e,t){return zt(e.getDate(),t,2)},e:function(e,t){return zt(e.getDate(),t,2)},H:function(e,t){return zt(e.getHours(),t,2)},I:function(e,t){return zt(e.getHours()%12||12,t,2)},j:function(e,t){return zt(1+St.dayOfYear(e),t,3)},L:function(e,t){return zt(e.getMilliseconds(),t,3)},m:function(e,t){return zt(e.getMonth()+1,t,2)},M:function(e,t){return zt(e.getMinutes(),t,2)},p:function(e){return a[+(12<=e.getHours())]},S:function(e,t){return zt(e.getSeconds(),t,2)},U:function(e,t){return zt(St.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return zt(St.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return zt(e.getFullYear()%100,t,2)},Y:function(e,t){return zt(e.getFullYear()%1e4,t,4)},Z:Qt,"%":function(){return"%"}},_={a:function(e,t,n){h.lastIndex=0;t=h.exec(t.slice(n));return t?(e.w=m.get(t[0].toLowerCase()),n+t[0].length):-1},A:function(e,t,n){f.lastIndex=0;t=f.exec(t.slice(n));return t?(e.w=p.get(t[0].toLowerCase()),n+t[0].length):-1},b:function(e,t,n){v.lastIndex=0;t=v.exec(t.slice(n));return t?(e.m=x.get(t[0].toLowerCase()),n+t[0].length):-1},B:function(e,t,n){g.lastIndex=0;t=g.exec(t.slice(n));return t?(e.m=y.get(t[0].toLowerCase()),n+t[0].length):-1},c:function(e,t,n){return u(e,b.c.toString(),t,n)},d:Wt,e:Wt,H:$t,I:$t,j:Zt,L:Kt,m:Gt,M:Xt,p:function(e,t,n){t=d.get(t.slice(n,n+=2).toLowerCase());return null==t?-1:(e.p=t,n)},S:Jt,U:Bt,w:Ht,W:qt,x:function(e,t,n){return u(e,b.x.toString(),t,n)},X:function(e,t,n){return u(e,b.X.toString(),t,n)},y:Yt,Y:Ut,Z:Vt,"%":en};return c}St.year=Dt(function(e){return(e=St.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),St.years=St.year.range,St.years.utc=St.year.utc.range,St.day=Dt(function(e){var t=new Et(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),St.days=St.day.range,St.days.utc=St.day.utc.range,St.dayOfYear=function(e){var t=St.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,n){n=7-n;var t=St[e]=Dt(function(e){return(e=St.day(e)).setDate(e.getDate()-(e.getDay()+n)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)-(t!==n)});St[e+"s"]=t.range,St[e+"s"].utc=t.utc.range,St[e+"OfYear"]=function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)}}),St.week=St.sunday,St.weeks=St.sunday.range,St.weeks.utc=St.sunday.utc.range,St.weekOfYear=St.sundayOfYear;var It={"-":"",_:" ",0:"0"},Rt=/^\s*\d+/,Nt=/^%/;function zt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",e=a.length;return r+(e<n?new Array(n-e+1).join(t)+a:a)}function Ft(e){return new RegExp("^(?:"+e.map(P.requote).join("|")+")","i")}function jt(e){for(var t=new v,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ht(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function Bt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n));return t?(e.U=+t[0],n+t[0].length):-1}function qt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n));return t?(e.W=+t[0],n+t[0].length):-1}function Ut(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function Yt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.y=(e=+t[0])+(68<e?1900:2e3),n+t[0].length):-1}function Vt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Gt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function Wt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function Zt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+3));return t?(e.j=+t[0],n+t[0].length):-1}function $t(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function Xt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function Jt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function Kt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function Qt(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",e=D(t)/60|0,t=D(t)%60;return n+zt(e,"0",2)+zt(t,"0",2)}function en(e,t,n){Nt.lastIndex=0;t=Nt.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function tn(r){for(var e=r.length,t=-1;++t<e;)r[t][0]=this(r[t][0]);return function(e){for(var t=0,n=r[t];!n[1](e);)n=r[++t];return n[0](e)}}P.locale=function(e){return{numberFormat:(_=e.decimal,s=e.thousands,l=e.grouping,n=e.currency,w=l&&s?function(e,t){for(var n=e.length,r=[],a=0,i=l[0],o=0;0<n&&0<i&&(t<o+i+1&&(i=Math.max(1,t-o)),r.push(e.substring(n-=i,n+i)),!((o+=i+1)>t));)i=l[a=(a+1)%l.length];return r.reverse().join(s)}:C,function(e){var e=Mt.exec(e),s=e[1]||" ",l=e[2]||">",c=e[3]||"-",t=e[4]||"",u=e[5],d=+e[6],f=e[7],p=e[8],h=e[9],m=1,g="",y="",v=!1,x=!0,p=p&&+p.substring(1);switch((u||"0"===s&&"="===l)&&(u=s="0",l="="),h){case"n":f=!0,h="g";break;case"%":m=100,y="%",h="f";break;case"p":m=100,y="%",h="r";break;case"b":case"o":case"x":case"X":"#"===t&&(g="0"+h.toLowerCase());case"c":x=!1;case"d":v=!0,p=0;break;case"s":m=-1,h="r"}"$"===t&&(g=n[0],y=n[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):"e"!=h&&"f"!=h||(p=Math.max(0,Math.min(20,p))));var h=kt.get(h)||At,b=u&&f;return function(e){var t=y;if(v&&e%1)return"";var n=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===c?"":c;m<0?(e=(a=P.formatPrefix(e,p)).scale(e),t=a.symbol+y):e*=m;var r,a,i=(e=h(e,p)).lastIndexOf(".");a=i<0?(o=x?e.lastIndexOf("e"):-1)<0?(r=e,""):(r=e.substring(0,o),e.substring(o)):(r=e.substring(0,i),_+e.substring(i+1)),!u&&f&&(r=w(r,1/0));var o=g.length+r.length+a.length+(b?0:n.length),i=o<d?new Array(o=d-o+1).join(s):"";return b&&(r=w(i+r,i.length?d-a.length:1/0)),n+=g,e=r+a,("<"===l?n+e+i:">"===l?i+n+e:"^"===l?i.substring(0,o>>=1)+n+e+i.substring(o):n+(b?e:i+e))+t}}),timeFormat:Pt(e)};var _,s,l,n,w};i=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nn(){}P.format=i.numberFormat,P.geo={},nn.prototype={s:0,t:0,add:function(e){an(e,this.t,rn),an(rn.s,this.s,this),this.s?this.t+=rn.t:this.s=rn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rn=new nn;function an(e,t,n){var r=n.s=e+t,a=r-e;n.t=e-(r-a)+(t-a)}function on(e,t){e&&ln.hasOwnProperty(e.type)&&ln[e.type](e,t)}P.geo.stream=function(e,t){e&&sn.hasOwnProperty(e.type)?sn[e.type](e,t):on(e,t)};var sn={Feature:function(e,t){on(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)on(n[r].geometry,t)}},ln={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){cn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)cn(n[r],t,0)},Polygon:function(e,t){un(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)un(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)on(n[r],t)}};function cn(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function un(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)cn(e[n],t,1);t.polygonEnd()}P.geo.area=function(e){return dn=0,P.geo.stream(e,Nn),dn};var dn,fn,pn,hn,mn,gn,yn,vn,xn,bn,_n,wn,Tn,Mn,kn,An,Sn,En,Ln,Cn,Dn,On,Pn,In,Rn=new nn,Nn={sphere:function(){dn+=4*Te},point:E,lineStart:E,lineEnd:E,polygonStart:function(){Rn.reset(),Nn.lineStart=zn},polygonEnd:function(){var e=2*Rn;dn+=e<0?4*Te+e:e,Nn.lineStart=Nn.lineEnd=Nn.point=E}};function zn(){var n,r,s,l,c;function a(e,t){t=t*Se/2+Te/4;var n=(e*=Se)-s,r=0<=n?1:-1,a=r*n,i=Math.cos(t),o=Math.sin(t),n=c*o,t=l*i+n*Math.cos(a),a=n*r*Math.sin(a);Rn.add(Math.atan2(a,t)),s=e,l=i,c=o}Nn.point=function(e,t){Nn.point=a,s=(n=e)*Se,l=Math.cos(t=(r=t)*Se/2+Te/4),c=Math.sin(t)},Nn.lineEnd=function(){a(n,r)}}function Fn(e){var t=e[0],n=e[1],e=Math.cos(n);return[e*Math.cos(t),e*Math.sin(t),Math.sin(n)]}function jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Bn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function qn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Un(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Yn(e){return[Math.atan2(e[1],e[0]),Oe(e[2])]}function Vn(e,t){return D(e[0]-t[0])<_e&&D(e[1]-t[1])<_e}function Gn(e,t){_n.push(wn=[fn=e,hn=e]),t<pn&&(pn=t),mn<t&&(mn=t)}function Wn(e,t){var n,r,a,i,o,s=Fn([e*Se,t*Se]);xn?(a=Hn(xn,s),Un(n=Hn([a[1],-a[0],0],a)),n=Yn(n),i=e-gn,a=n[0]*Ee*(r=0<i?1:-1),(i=180<D(i))^(r*gn<a&&a<r*e)?(o=n[1]*Ee,mn<o&&(mn=o)):i^(r*gn<(a=(a+360)%360-180)&&a<r*e)?(o=-n[1]*Ee)<pn&&(pn=o):(t<pn&&(pn=t),mn<t&&(mn=t)),i?e<gn?Qn(fn,e)>Qn(fn,hn)&&(hn=e):Qn(e,hn)>Qn(fn,hn)&&(fn=e):fn<=hn?(e<fn&&(fn=e),hn<e&&(hn=e)):gn<e?Qn(fn,e)>Qn(fn,hn)&&(hn=e):Qn(e,hn)>Qn(fn,hn)&&(fn=e)):Gn(e,t),xn=s,gn=e}function Zn(){Tn.point=Wn}function $n(){wn[0]=fn,wn[1]=hn,Tn.point=Gn,xn=null}function Xn(e,t){var n;xn?bn+=180<D(n=e-gn)?n+(0<n?360:-360):n:(yn=e,vn=t),Nn.point(e,t),Wn(e,t)}function Jn(){Nn.lineStart()}function Kn(){Xn(yn,vn),Nn.lineEnd(),D(bn)>_e&&(fn=-(hn=180)),wn[0]=fn,wn[1]=hn,xn=null}function Qn(e,t){return(t-=e)<0?t+360:t}function er(e,t){return e[0]-t[0]}function tr(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}P.geo.bounds=(Tn={point:Gn,lineStart:Zn,lineEnd:$n,polygonStart:function(){Tn.point=Xn,Tn.lineStart=Jn,Tn.lineEnd=Kn,bn=0,Nn.polygonStart()},polygonEnd:function(){Nn.polygonEnd(),Tn.point=Gn,Tn.lineStart=Zn,Tn.lineEnd=$n,Rn<0?(fn=-(hn=180),pn=-(mn=90)):_e<bn?mn=90:bn<-_e&&(pn=-90),wn[0]=fn,wn[1]=hn}},function(e){if(mn=hn=-(fn=pn=1/0),_n=[],P.geo.stream(e,Tn),a=_n.length){_n.sort(er);for(var t=1,n=[s=_n[0]];t<a;++t)tr((i=_n[t])[0],s)||tr(i[1],s)?(Qn(s[0],i[1])>Qn(s[0],s[1])&&(s[1]=i[1]),Qn(i[0],s[1])>Qn(s[0],s[1])&&(s[0]=i[0])):n.push(s=i);for(var r,a,i,o=-1/0,t=0,s=n[a=n.length-1];t<=a;s=i,++t)i=n[t],(r=Qn(s[1],i[0]))>o&&(o=r,fn=i[0],hn=s[1])}return _n=wn=null,fn===1/0||pn===1/0?[[NaN,NaN],[NaN,NaN]]:[[fn,pn],[hn,mn]]}),P.geo.centroid=function(e){Mn=kn=An=Sn=En=Ln=Cn=Dn=On=Pn=In=0,P.geo.stream(e,nr);var t=On,n=Pn,r=In,e=t*t+n*n+r*r;return e<we&&(t=Ln,n=Cn,r=Dn,kn<_e&&(t=An,n=Sn,r=En),(e=t*t+n*n+r*r)<we)?[NaN,NaN]:[Math.atan2(n,t)*Ee,Oe(r/Math.sqrt(e))*Ee]};var nr={sphere:E,point:rr,lineStart:ir,lineEnd:or,polygonStart:function(){nr.lineStart=sr},polygonEnd:function(){nr.lineStart=ir}};function rr(e,t){e*=Se;var n=Math.cos(t*=Se);ar(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ar(e,t,n){An+=(e-An)/++Mn,Sn+=(t-Sn)/Mn,En+=(n-En)/Mn}function ir(){var a,i,o;function r(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),n=n*Math.sin(e),e=Math.sin(t),t=Math.atan2(Math.sqrt((t=i*e-o*n)*t+(t=o*r-a*e)*t+(t=a*n-i*r)*t),a*r+i*n+o*e);kn+=t,Ln+=t*(a+(a=r)),Cn+=t*(i+(i=n)),Dn+=t*(o+(o=e)),ar(a,i,o)}nr.point=function(e,t){e*=Se;var n=Math.cos(t*=Se);a=n*Math.cos(e),i=n*Math.sin(e),o=Math.sin(t),nr.point=r,ar(a,i,o)}}function or(){nr.point=rr}function sr(){var r,a,c,u,d;function i(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),a=n*Math.sin(e),i=Math.sin(t),o=u*i-d*a,s=d*r-c*i,l=c*a-u*r,n=Math.sqrt(o*o+s*s+l*l),e=c*r+u*a+d*i,t=n&&-De(e)/n,e=Math.atan2(n,e);On+=t*o,Pn+=t*s,In+=t*l,kn+=e,Ln+=e*(c+(c=r)),Cn+=e*(u+(u=a)),Dn+=e*(d+(d=i)),ar(c,u,d)}nr.point=function(e,t){r=e,a=t,nr.point=i,e*=Se;var n=Math.cos(t*=Se);c=n*Math.cos(e),u=n*Math.sin(e),d=Math.sin(t),ar(c,u,d)},nr.lineEnd=function(){i(r,a),nr.lineEnd=or,nr.point=rr}}function lr(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function cr(){return!0}function ur(e,t,n,r,s){var l=[],c=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Vn(n,r)){s.lineStart();for(var a=0;a<t;++a)s.point((n=e[a])[0],n[1]);s.lineEnd()}else{var i=new fr(n,e,null,!0),o=new fr(n,null,i,!1);i.o=o,l.push(i),c.push(o),i=new fr(r,e,null,!1),o=new fr(r,null,i,!0),i.o=o,l.push(i),c.push(o)}}}),c.sort(t),dr(l),dr(c),l.length){for(var a=0,i=n,o=c.length;a<o;++a)c[a].e=i=!i;for(var u,d=l[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;h=f.z,s.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,o=h.length;a<o;++a)s.point((u=h[a])[0],u[1]);else r(f.x,f.n.x,1,s);f=f.n}else{if(p)for(var h,a=(h=f.p.z).length-1;0<=a;--a)s.point((u=h[a])[0],u[1]);else r(f.x,f.p.x,-1,s);f=f.p}}while(h=(f=f.o).z,p=!p,!f.v);s.lineEnd()}}}function dr(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function fr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pr(v,x,b,_){return function(r,o){var s,n=x(o),t=r.invert(_[0],_[1]),a={point:i,lineStart:l,lineEnd:c,polygonStart:function(){a.point=m,a.lineStart=g,a.lineEnd=y,s=[],u=[]},polygonEnd:function(){a.point=i,a.lineStart=l,a.lineEnd=c,s=P.merge(s);var e=function(e,t){var n=e[0],r=e[1],a=[Math.sin(n),-Math.cos(n),0],i=0,o=0;Rn.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],f=d[0],p=d[1]/2+Te/4,h=Math.sin(p),m=Math.cos(p),g=1;;){var y=(e=c[g=g===u?0:g])[0],v=e[1]/2+Te/4,x=Math.sin(v),b=Math.cos(v),_=y-f,w=0<=_?1:-1,T=w*_,M=Te<T,v=h*x;if(Rn.add(Math.atan2(v*w*Math.sin(T),m*b+v*Math.cos(T))),i+=M?_+w*Me:_,M^n<=f^n<=y&&(Un(T=Hn(Fn(d),Fn(e))),Un(w=Hn(a,T)),((w=(M^0<=_?-1:1)*Oe(w[2]))<r||r===w&&(T[0]||T[1]))&&(o+=M^0<=_?1:-1)),!g++)break;f=y,h=x,m=b,d=e}}return(i<-_e||i<_e&&Rn<-_e)^1&o}(t,u);s.length?(h||(o.polygonStart(),h=!0),ur(s,gr,e,b,o)):e&&(h||(o.polygonStart(),h=!0),o.lineStart(),b(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),s=u=null},sphere:function(){o.polygonStart(),o.lineStart(),b(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function i(e,t){var n=r(e,t);v(e=n[0],t=n[1])&&o.point(e,t)}function e(e,t){t=r(e,t);n.point(t[0],t[1])}function l(){a.point=e,n.lineStart()}function c(){a.point=i,n.lineEnd()}var u,d,f=mr(),p=x(f),h=!1;function m(e,t){d.push([e,t]);t=r(e,t);p.point(t[0],t[1])}function g(){p.lineStart(),d=[]}function y(){m(d[0][0],d[0][1]),p.lineEnd();var e=p.clean(),t=f.buffer(),n=t.length;if(d.pop(),u.push(d),d=null,n)if(1&e){var r,a,i=-1;if(0<(n=(r=t[0]).length-1)){for(h||(o.polygonStart(),h=!0),o.lineStart();++i<n;)o.point((a=r[i])[0],a[1]);o.lineEnd()}}else 1<n&&2&e&&t.push(t.pop().concat(t.shift())),s.push(t.filter(hr))}return a}}function hr(e){return 1<e.length}function mr(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(e,t){n.push([e,t])},lineEnd:E,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function gr(e,t){return((e=e.x)[0]<0?e[1]-Ae-_e:Ae-e[1])-((t=t.x)[0]<0?t[1]-Ae-_e:Ae-t[1])}var yr=pr(cr,function(c){var u,d=NaN,f=NaN,p=NaN;return{lineStart:function(){c.lineStart(),u=1},point:function(e,t){var n,r,a,i,o,s=0<e?Te:-Te,l=D(e-d);D(l-Te)<_e?(c.point(d,f=0<(f+t)/2?Ae:-Ae),c.point(p,f),c.lineEnd(),c.lineStart(),c.point(s,f),c.point(e,f),u=0):p!==s&&Te<=l&&(D(d-p)<_e&&(d-=p*_e),D(e-s)<_e&&(e-=s*_e),n=d,r=f,a=e,i=t,o=Math.sin(n-a),f=D(o)>_e?Math.atan((Math.sin(r)*(l=Math.cos(i))*Math.sin(a)-Math.sin(i)*(a=Math.cos(r))*Math.sin(n))/(a*l*o)):(r+i)/2,c.point(p,f),c.lineEnd(),c.lineStart(),c.point(s,f),u=0),c.point(d=e,f=t),p=s},lineEnd:function(){c.lineEnd(),d=f=NaN},clean:function(){return 2-u}}},function(e,t,n,r){var a;null==e?(a=n*Ae,r.point(-Te,a),r.point(0,a),r.point(Te,a),r.point(Te,0),r.point(Te,-a),r.point(0,-a),r.point(-Te,-a),r.point(-Te,0),r.point(-Te,a)):D(e[0]-t[0])>_e?(e=e[0]<t[0]?Te:-Te,a=n*e/2,r.point(-e,a),r.point(0,a),r.point(e,a)):r.point(t[0],t[1])},[-Te,-Te/2]);function vr(a){var p=Math.cos(a),f=0<p,h=D(p)>_e;return pr(m,function(o){var s,l,c,u,d;return{lineStart:function(){u=c=!1,d=1},point:function(e,t){var n,r,a=[e,t],i=m(e,t),t=f?i?0:y(e,t):i?y(e+(e<0?Te:-Te),t):0;!s&&(u=c=i)&&o.lineStart(),i!==c&&(n=g(s,a),(Vn(s,n)||Vn(a,n))&&(a[0]+=_e,a[1]+=_e,i=m(a[0],a[1]))),i!==c?(d=0,i?(o.lineStart(),n=g(a,s),o.point(n[0],n[1])):(n=g(s,a),o.point(n[0],n[1]),o.lineEnd()),s=n):h&&s&&f^i&&(t&l||!(r=g(a,s,!0))||(d=0,f?(o.lineStart(),o.point(r[0][0],r[0][1]),o.point(r[1][0],r[1][1]),o.lineEnd()):(o.point(r[1][0],r[1][1]),o.lineEnd(),o.lineStart(),o.point(r[0][0],r[0][1])))),!i||s&&Vn(s,a)||o.point(a[0],a[1]),s=a,c=i,l=t},lineEnd:function(){c&&o.lineEnd(),s=null},clean:function(){return d|(u&&c)<<1}}},ea(a,6*Se),f?[0,-a]:[-Te,a-Te]);function m(e,t){return Math.cos(e)*Math.cos(t)>p}function g(e,t,n){var r=[1,0,0],a=Hn(Fn(e),Fn(t)),i=jn(a,a),o=a[0],s=i-o*o;if(!s)return!n&&e;var l=Hn(r,a),c=qn(r,p*i/s);Bn(c,qn(a,-p*o/s));var u=l,d=jn(c,u),r=jn(u,u),i=d*d-r*(jn(c,c)-1);if(!(i<0)){a=Math.sqrt(i),o=qn(u,(-d-a)/r);if(Bn(o,c),o=Yn(o),!n)return o;var f,s=e[0],l=t[0],i=e[1],n=t[1];l<s&&(f=s,s=l,l=f);e=l-s,t=D(e-Te)<_e;if(!t&&n<i&&(f=i,i=n,n=f),t||e<_e?t?0<i+n^o[1]<(D(o[0]-s)<_e?i:n):i<=o[1]&&o[1]<=n:Te<e^(s<=o[0]&&o[0]<=l)){r=qn(u,(-d+a)/r);return Bn(r,c),[o,Yn(r)]}}}function y(e,t){var n=f?a:Te-a,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}}function xr(l,c,u,d){return function(e){var t=e.a,n=e.b,r=t.x,a=t.y,i=0,o=1,s=n.x-r,t=n.y-a,n=l-r;if(s||!(0<n)){if(n/=s,s<0){if(n<i)return;n<o&&(o=n)}else if(0<s){if(o<n)return;i<n&&(i=n)}if(n=u-r,s||!(n<0)){if(n/=s,s<0){if(o<n)return;i<n&&(i=n)}else if(0<s){if(n<i)return;n<o&&(o=n)}if(n=c-a,t||!(0<n)){if(n/=t,t<0){if(n<i)return;n<o&&(o=n)}else if(0<t){if(o<n)return;i<n&&(i=n)}if(n=d-a,t||!(n<0)){if(n/=t,t<0){if(o<n)return;i<n&&(i=n)}else if(0<t){if(n<i)return;n<o&&(o=n)}return 0<i&&(e.a={x:r+i*s,y:a+i*t}),o<1&&(e.b={x:r+o*s,y:a+o*t}),e}}}}}}var br=1e9;function _r(b,_,w,T){return function(a){var r,u,i,o,s,l,c,d,f,p,h,m=a,e=mr(),g=xr(b,_,w,T),t={point:n,lineStart:function(){t.point=x,u&&u.push(i=[]);p=!0,f=!1,c=d=NaN},lineEnd:function(){r&&(x(o,s),l&&f&&e.rejoin(),r.push(e.buffer()));t.point=n,f&&a.lineEnd()},polygonStart:function(){a=e,r=[],u=[],h=!0},polygonEnd:function(){a=m,r=P.merge(r);var e=function(e){for(var t=0,n=u.length,r=e[1],a=0;a<n;++a)for(var i,o=1,s=u[a],l=s.length,c=s[0];o<l;++o)i=s[o],c[1]<=r?i[1]>r&&0<Ce(c,i,e)&&++t:i[1]<=r&&Ce(c,i,e)<0&&--t,c=i;return 0!==t}([b,T]),t=h&&e,n=r.length;(t||n)&&(a.polygonStart(),t&&(a.lineStart(),y(null,null,1,a),a.lineEnd()),n&&ur(r,k,e,y,a),a.polygonEnd()),r=u=i=null}};function y(e,t,n,r){var a=0,i=0;if(null==e||(a=M(e,n))!==(i=M(t,n))||A(e,t)<0^0<n)for(;r.point(0===a||3===a?b:w,1<a?T:_),(a=(a+n+4)%4)!==i;);else r.point(t[0],t[1])}function v(e,t){return b<=e&&e<=w&&_<=t&&t<=T}function n(e,t){v(e,t)&&a.point(e,t)}function x(e,t){var n,r=v(e=Math.max(-br,Math.min(br,e)),t=Math.max(-br,Math.min(br,t)));u&&i.push([e,t]),p?(o=e,s=t,p=!1,(l=r)&&(a.lineStart(),a.point(e,t))):r&&f?a.point(e,t):g(n={a:{x:c,y:d},b:{x:e,y:t}})?(f||(a.lineStart(),a.point(n.a.x,n.a.y)),a.point(n.b.x,n.b.y),r||a.lineEnd(),h=!1):r&&(a.lineStart(),a.point(e,t),h=!1),c=e,d=t,f=r}return t};function M(e,t){return D(e[0]-b)<_e?0<t?0:3:D(e[0]-w)<_e?0<t?2:1:D(e[1]-_)<_e?0<t?1:0:0<t?3:2}function k(e,t){return A(e.x,t.x)}function A(e,t){var n=M(e,1),r=M(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function wr(e){var t=0,n=Te/3,r=Gr(e),e=r(t,n);return e.parallels=function(e){return arguments.length?r(t=e[0]*Te/180,n=e[1]*Te/180):[t/Te*180,n/Te*180]},e}function Tr(e,t){var e=Math.sin(e),n=(e+Math.sin(t))/2,r=1+e*(2*n-e),a=Math.sqrt(r)/n;function i(e,t){t=Math.sqrt(r-2*n*Math.sin(t))/n;return[t*Math.sin(e*=n),a-t*Math.cos(e)]}return i.invert=function(e,t){t=a-t;return[Math.atan2(e,t)/n,Oe((r-(e*e+t*t)*n*n)/(2*n))]},i}P.geo.clipExtent=function(){var t,n,r,a,i,o,s={stream:function(e){return i&&(i.valid=!1),(i=o(e)).valid=!0,i},extent:function(e){return arguments.length?(o=_r(t=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),i&&(i.valid=!1,i=null),s):[[t,n],[r,a]]}};return s.extent([[0,0],[960,500]])},(P.geo.conicEqualArea=function(){return wr(Tr)}).raw=Tr,P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},P.geo.albersUsa=function(){var n,a,i,o,s=P.geo.albers(),l=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){n=[e,t]}};function d(e){var t=e[0],e=e[1];return n=null,a(t,e),n||(i(t,e),n)||o(t,e),n}return d.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,t=(e[1]-n[1])/t;return(.12<=t&&t<.234&&-.425<=r&&r<-.214?l:.166<=t&&t<.234&&-.214<=r&&r<-.115?c:s).invert(e)},d.stream=function(e){var n=s.stream(e),r=l.stream(e),a=c.stream(e);return{point:function(e,t){n.point(e,t),r.point(e,t),a.point(e,t)},sphere:function(){n.sphere(),r.sphere(),a.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),a.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),a.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),a.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),a.polygonEnd()}}},d.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),c.precision(e),d):s.precision()},d.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),c.scale(e),d.translate(s.translate())):s.scale()},d.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),n=+e[0],r=+e[1];return a=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(u).point,i=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+_e,r+.12*t+_e],[n-.214*t-_e,r+.234*t-_e]]).stream(u).point,o=c.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+_e,r+.166*t+_e],[n-.115*t-_e,r+.234*t-_e]]).stream(u).point,d},d.scale(1070)};var Mr,kr,Ar,Sr,Er,Lr,Cr={point:E,lineStart:E,lineEnd:E,polygonStart:function(){kr=0,Cr.lineStart=Dr},polygonEnd:function(){Cr.lineStart=Cr.lineEnd=Cr.point=E,Mr+=D(kr/2)}};function Dr(){var n,r,a,i;function o(e,t){kr+=i*e-a*t,a=e,i=t}Cr.point=function(e,t){Cr.point=o,n=a=e,r=i=t},Cr.lineEnd=function(){o(n,r)}}var Or={point:function(e,t){e<Ar&&(Ar=e);Er<e&&(Er=e);t<Sr&&(Sr=t);Lr<t&&(Lr=t)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Pr(){var n=Ir(4.5),r=[],a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(e){return n=Ir(e),a},result:function(){if(r.length){var e=r.join("");return r=[],e}}};function e(e,t){r.push("M",e,",",t,n)}function t(e,t){r.push("M",e,",",t),a.point=i}function i(e,t){r.push("L",e,",",t)}function o(){a.point=e}function s(){r.push("Z")}return a}function Ir(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Rr,Nr={point:zr,lineStart:Fr,lineEnd:jr,polygonStart:function(){Nr.lineStart=Hr},polygonEnd:function(){Nr.point=zr,Nr.lineStart=Fr,Nr.lineEnd=jr}};function zr(e,t){An+=e,Sn+=t,++En}function Fr(){var a,i;function n(e,t){var n=e-a,r=t-i,r=Math.sqrt(n*n+r*r);Ln+=r*(a+e)/2,Cn+=r*(i+t)/2,Dn+=r,zr(a=e,i=t)}Nr.point=function(e,t){Nr.point=n,zr(a=e,i=t)}}function jr(){Nr.point=zr}function Hr(){var n,r,a,i;function o(e,t){var n=e-a,r=t-i,r=Math.sqrt(n*n+r*r);Ln+=r*(a+e)/2,Cn+=r*(i+t)/2,Dn+=r,On+=(r=i*e-a*t)*(a+e),Pn+=r*(i+t),In+=3*r,zr(a=e,i=t)}Nr.point=function(e,t){Nr.point=o,zr(n=a=e,r=i=t)},Nr.lineEnd=function(){o(n,r)}}function Br(n){var r=4.5,a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(e){return r=e,a},result:E};function e(e,t){n.moveTo(e+r,t),n.arc(e,t,r,0,Me)}function t(e,t){n.moveTo(e,t),a.point=i}function i(e,t){n.lineTo(e,t)}function o(){a.point=e}function s(){n.closePath()}return a}function qr(S){var E=.5,L=Math.cos(30*Se),_=16;function t(e){return(_?r:n)(e)}function n(n){return Yr(n,function(e,t){e=S(e,t),n.point(e[0],e[1])})}function r(r){var n,a,i,o,s,l,c,u,d,f,p,h,m={point:e,lineStart:t,lineEnd:y,polygonStart:function(){r.polygonStart(),m.lineStart=v},polygonEnd:function(){r.polygonEnd(),m.lineStart=t}};function e(e,t){e=S(e,t),r.point(e[0],e[1])}function t(){u=NaN,m.point=g,r.lineStart()}function g(e,t){var n=Fn([e,t]),t=S(e,t);C(u,d,c,f,p,h,u=t[0],d=t[1],c=e,f=n[0],p=n[1],h=n[2],_,r),r.point(u,d)}function y(){m.point=e,r.lineEnd()}function v(){t(),m.point=x,m.lineEnd=b}function x(e,t){g(n=e,t),a=u,i=d,o=f,s=p,l=h,m.point=g}function b(){C(u,d,c,f,p,h,a,i,n,o,s,l,_,r),m.lineEnd=y,y()}return m}function C(e,t,n,r,a,i,o,s,l,c,u,d,f,p){var h,m,g,y,v,x,b,_,w,T,M=o-e,k=s-t,A=M*M+k*k;4*E<A&&f--&&(h=r+c,m=a+u,g=i+d,y=Math.sqrt(h*h+m*m+g*g),w=Math.asin(g/=y),v=D(D(g)-1)<_e||D(n-l)<_e?(n+l)/2:Math.atan2(m,h),x=(T=S(v,w))[0],b=T[1],(E<(T=k*(_=x-e)-M*(w=b-t))*T/A||.3<D((M*_+k*w)/A-.5)||r*c+a*u+i*d<L)&&(C(e,t,n,r,a,i,x,b,v,h/=y,m/=y,g,f,p),p.point(x,b),C(x,b,v,h,m,g,o,s,l,c,u,d,f,p)))}return t.precision=function(e){return arguments.length?(_=0<(E=e*e)&&16,t):Math.sqrt(E)},t}function Ur(e){this.stream=e}function Yr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Vr(e){return Gr(function(){return e})()}function Gr(e){var n,t,r,a,i,o,s=qr(function(e,t){return[(e=n(e,t))[0]*l+a,i-e[1]*l]}),l=150,c=480,u=250,d=0,f=0,p=0,h=0,m=0,g=yr,y=C,v=null,x=null;function b(e){return[(e=r(e[0]*Se,e[1]*Se))[0]*l+a,i-e[1]*l]}function _(e){return(e=r.invert((e[0]-a)/l,(i-e[1])/l))&&[e[0]*Ee,e[1]*Ee]}function w(){r=lr(t=Xr(p,h,m),n);var e=n(d,f);return a=c-e[0]*l,i=u+e[1]*l,T()}function T(){return o&&(o.valid=!1,o=null),b}return b.stream=function(e){return o&&(o.valid=!1),(o=Wr(g(t,s(y(e))))).valid=!0,o},b.clipAngle=function(e){return arguments.length?(g=null==e?(v=e,yr):vr((v=+e)*Se),T()):v},b.clipExtent=function(e){return arguments.length?(y=(x=e)?_r(e[0][0],e[0][1],e[1][0],e[1][1]):C,T()):x},b.scale=function(e){return arguments.length?(l=+e,w()):l},b.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],w()):[c,u]},b.center=function(e){return arguments.length?(d=e[0]%360*Se,f=e[1]%360*Se,w()):[d*Ee,f*Ee]},b.rotate=function(e){return arguments.length?(p=e[0]%360*Se,h=e[1]%360*Se,m=2<e.length?e[2]%360*Se:0,w()):[p*Ee,h*Ee,m*Ee]},P.rebind(b,s,"precision"),function(){return n=e.apply(this,arguments),b.invert=n.invert&&_,w()}}function Wr(n){return Yr(n,function(e,t){n.point(e*Se,t*Se)})}function Zr(e,t){return[e,t]}function $r(e,t){return[Te<e?e-Me:e<-Te?e+Me:e,t]}function Xr(e,t,n){return e?t||n?lr(Kr(e),Qr(t,n)):Kr(e):t||n?Qr(t,n):$r}function Jr(n){return function(e,t){return[Te<(e+=n)?e-Me:e<-Te?e+Me:e,t]}}function Kr(e){var t=Jr(e);return t.invert=Jr(-e),t}function Qr(e,t){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(t),s=Math.sin(t);function n(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*a+r*i;return[Math.atan2(e*o-t*s,r*a-n*i),Oe(t*o+e*s)]}return n.invert=function(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*o-e*s;return[Math.atan2(e*o+n*s,r*a+t*i),Oe(t*a-r*i)]},n}function ea(s,l){var c=Math.cos(s),u=Math.sin(s);return function(e,t,n,r){var a=n*l;null!=e?(e=ta(c,e),t=ta(c,t),(0<n?e<t:t<e)&&(e+=n*Me)):(e=s+n*Me,t=s-.5*a);for(var i,o=e;0<n?t<o:o<t;o-=a)r.point((i=Yn([c,-u*Math.cos(o),-u*Math.sin(o)]))[0],i[1])}}function ta(e,t){t=Fn(t);t[0]-=e,Un(t);e=De(-t[1]);return((-t[2]<0?-e:e)+2*Math.PI-_e)%(2*Math.PI)}function na(e,t,n){var r=P.range(e,t-_e,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function ra(e,t,n){var r=P.range(e,t-_e,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function aa(e){return e.source}function ia(e){return e.target}P.geo.path=function(){var r,t,a,n,i,o=4.5;function s(e){return e&&("function"==typeof o&&n.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=a(n)),P.geo.stream(e,i)),n.result()}function l(){return i=null,s}return s.area=function(e){return Mr=0,P.geo.stream(e,a(Cr)),Mr},s.centroid=function(e){return An=Sn=En=Ln=Cn=Dn=On=Pn=In=0,P.geo.stream(e,a(Nr)),In?[On/In,Pn/In]:Dn?[Ln/Dn,Cn/Dn]:En?[An/En,Sn/En]:[NaN,NaN]},s.bounds=function(e){return Er=Lr=-(Ar=Sr=1/0),P.geo.stream(e,a(Or)),[[Ar,Sr],[Er,Lr]]},s.projection=function(e){return arguments.length?(a=(r=e)?e.stream||(n=e,t=qr(function(e,t){return n([e*Ee,t*Ee])}),function(e){return Wr(t(e))}):C,l()):r;var n,t},s.context=function(e){return arguments.length?(n=null==(t=e)?new Pr:new Br(e),"function"!=typeof o&&n.pointRadius(o),l()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(n.pointRadius(+e),+e),s):o},s.projection(P.geo.albersUsa()).context(null)},P.geo.transform=function(r){return{stream:function(e){var t,n=new Ur(e);for(t in r)n[t]=r[t];return n}}},Ur.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},P.geo.projection=Vr,P.geo.projectionMutator=Gr,(P.geo.equirectangular=function(){return Vr(Zr)}).raw=Zr.invert=Zr,P.geo.rotation=function(t){function e(e){return(e=t(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e}return t=Xr(t[0]%360*Se,t[1]*Se,2<t.length?t[2]*Se:0),e.invert=function(e){return(e=t.invert(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e},e},$r.invert=Zr,P.geo.circle=function(){var t,a,i=[0,0],n=6;function r(){var e="function"==typeof i?i.apply(this,arguments):i,n=Xr(-e[0]*Se,-e[1]*Se,0).invert,r=[];return a(null,null,1,{point:function(e,t){r.push(e=n(e,t)),e[0]*=Ee,e[1]*=Ee}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(e){return arguments.length?(i=e,r):i},r.angle=function(e){return arguments.length?(a=ea((t=+e)*Se,n*Se),r):t},r.precision=function(e){return arguments.length?(a=ea(t*Se,(n=+e)*Se),r):n},r.angle(90)},P.geo.distance=function(e,t){var n=(t[0]-e[0])*Se,r=e[1]*Se,a=t[1]*Se,i=Math.sin(n),e=Math.cos(n),t=Math.sin(r),n=Math.cos(r),r=Math.sin(a),a=Math.cos(a);return Math.atan2(Math.sqrt((i=a*i)*i+(i=n*r-t*a*e)*i),t*r+n*a*e)},P.geo.graticule=function(){var t,n,r,a,i,o,s,l,c,u,d,f,p=10,h=p,m=90,g=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:e()}}function e(){return P.range(Math.ceil(a/m)*m,r,m).map(d).concat(P.range(Math.ceil(l/g)*g,s,g).map(f)).concat(P.range(Math.ceil(n/p)*p,t,p).filter(function(e){return D(e%m)>_e}).map(c)).concat(P.range(Math.ceil(o/h)*h,i,h).filter(function(e){return D(e%g)>_e}).map(u))}return v.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},v.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(s).slice(1),d(r).reverse().slice(1),f(l).reverse().slice(1))]}},v.extent=function(e){return arguments.length?v.majorExtent(e).minorExtent(e):v.minorExtent()},v.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<a&&(e=a,a=r,r=e),s<l&&(e=l,l=s,s=e),v.precision(y)):[[a,l],[r,s]]},v.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],t<n&&(e=n,n=t,t=e),i<o&&(e=o,o=i,i=e),v.precision(y)):[[n,o],[t,i]]},v.step=function(e){return arguments.length?v.majorStep(e).minorStep(e):v.minorStep()},v.majorStep=function(e){return arguments.length?(m=+e[0],g=+e[1],v):[m,g]},v.minorStep=function(e){return arguments.length?(p=+e[0],h=+e[1],v):[p,h]},v.precision=function(e){return arguments.length?(y=+e,c=na(o,i,90),u=ra(n,t,y),d=na(l,s,90),f=ra(a,r,y),v):y},v.majorExtent([[-180,-90+_e],[180,90-_e]]).minorExtent([[-180,-80-_e],[180,80+_e]])},P.geo.greatArc=function(){var t,n,r=aa,a=ia;function i(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||a.apply(this,arguments)]}}return i.distance=function(){return P.geo.distance(t||r.apply(this,arguments),n||a.apply(this,arguments))},i.source=function(e){return arguments.length?(t="function"==typeof(r=e)?null:e,i):r},i.target=function(e){return arguments.length?(n="function"==typeof(a=e)?null:e,i):a},i.precision=function(){return arguments.length?i:0},i},P.geo.interpolate=function(e,t){return n=e[0]*Se,r=e[1]*Se,a=t[0]*Se,i=t[1]*Se,e=Math.cos(r),o=Math.sin(r),t=Math.cos(i),s=Math.sin(i),l=e*Math.cos(n),c=e*Math.sin(n),u=t*Math.cos(a),d=t*Math.sin(a),f=2*Math.asin(Math.sqrt(Ie(i-r)+e*t*Ie(a-n))),p=1/Math.sin(f),(a=f?function(e){var t=Math.sin(e*=f)*p,n=Math.sin(f-e)*p,r=n*l+t*u,e=n*c+t*d,t=n*o+t*s;return[Math.atan2(e,r)*Ee,Math.atan2(t,Math.sqrt(r*r+e*e))*Ee]}:function(){return[n*Ee,r*Ee]}).distance=f,a;var n,r,a,i,o,s,l,c,u,d,f,p},P.geo.length=function(e){return Rr=0,P.geo.stream(e,oa),Rr};var oa={sphere:E,point:E,lineStart:function(){var i,o,s;function n(e,t){var n=Math.sin(t*=Se),r=Math.cos(t),a=D((e*=Se)-i),t=Math.cos(a);Rr+=Math.atan2(Math.sqrt((a=r*Math.sin(a))*a+(a=s*n-o*r*t)*a),o*n+s*r*t),i=e,o=n,s=r}oa.point=function(e,t){i=e*Se,o=Math.sin(t*=Se),s=Math.cos(t),oa.point=n},oa.lineEnd=function(){oa.point=oa.lineEnd=E}},lineEnd:E,polygonStart:E,polygonEnd:E};function sa(a,i){function e(e,t){var n=Math.cos(e),r=Math.cos(t),n=a(n*r);return[n*r*Math.sin(e),n*Math.sin(t)]}return e.invert=function(e,t){var n=Math.sqrt(e*e+t*t),r=i(n),a=Math.sin(r),r=Math.cos(r);return[Math.atan2(e*a,n*r),Math.asin(n&&t*a/n)]},e}var la=sa(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(P.geo.azimuthalEqualArea=function(){return Vr(la)}).raw=la;var ca=sa(function(e){e=Math.acos(e);return e&&e/Math.sin(e)},C);function ua(e,t){function n(e){return Math.tan(Te/4+e/2)}var r=Math.cos(e),a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),i=r*Math.pow(n(e),a)/a;return a?(o.invert=function(e,t){var n=i-t,t=Le(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(i/t,1/a))-Ae]},o):pa;function o(e,t){0<i?t<-Ae+_e&&(t=-Ae+_e):Ae-_e<t&&(t=Ae-_e);t=i/Math.pow(n(t),a);return[t*Math.sin(a*e),i-t*Math.cos(a*e)]}}function da(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;return D(r)<_e?Zr:(i.invert=function(e,t){t=a-t;return[Math.atan2(e,t)/r,a-Le(r)*Math.sqrt(e*e+t*t)]},i);function i(e,t){t=a-t;return[t*Math.sin(r*e),a-t*Math.cos(r*e)]}}(P.geo.azimuthalEquidistant=function(){return Vr(ca)}).raw=ca,(P.geo.conicConformal=function(){return wr(ua)}).raw=ua,(P.geo.conicEquidistant=function(){return wr(da)}).raw=da;var fa=sa(function(e){return 1/e},Math.atan);function pa(e,t){return[e,Math.log(Math.tan(Te/4+t/2))]}function ha(e){var a,i=Vr(e),o=i.scale,s=i.translate,l=i.clipExtent;return i.scale=function(){var e=o.apply(i,arguments);return e===i?a?i.clipExtent(null):i:e},i.translate=function(){var e=s.apply(i,arguments);return e===i?a?i.clipExtent(null):i:e},i.clipExtent=function(e){var t,n,r=l.apply(i,arguments);return r===i?(a=null==e)&&(t=Te*o(),n=s(),l([[n[0]-t,n[1]-t],[n[0]+t,n[1]+t]])):a&&(r=null),r},i.clipExtent(null)}(P.geo.gnomonic=function(){return Vr(fa)}).raw=fa,pa.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ae]},(P.geo.mercator=function(){return ha(pa)}).raw=pa;var ma=sa(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Vr(ma)}).raw=ma;var ga=sa(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function ya(e,t){return[Math.log(Math.tan(Te/4+t/2)),-e]}function va(e){return e[0]}function xa(e){return e[1]}function ba(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;a++){for(;1<r&&Ce(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function _a(e,t){return e[0]-t[0]||e[1]-t[1]}(P.geo.stereographic=function(){return Vr(ga)}).raw=ga,ya.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ae]},(P.geo.transverseMercator=function(){var e=ha(ya),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ya,P.geom={},P.geom.hull=function(e){var f=va,p=xa;return arguments.length?t(e):(t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(p=e,t):p},t);function t(e){if(e.length<3)return[];for(var t=ut(f),n=ut(p),r=e.length,a=[],i=[],o=0;o<r;o++)a.push([+t.call(this,e[o],o),+n.call(this,e[o],o),o]);for(a.sort(_a),o=0;o<r;o++)i.push([a[o][0],-a[o][1]]);var s=ba(a),l=ba(i),c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],d=[];for(o=s.length-1;0<=o;--o)d.push(e[a[s[o]][2]]);for(o=+c;o<l.length-u;++o)d.push(e[a[l[o]][2]]);return d}},P.geom.polygon=function(e){return H(e,wa),e};var wa=P.geom.polygon.prototype=[];function Ta(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ma(e,t,n,r){var a=e[0],i=n[0],o=t[0]-a,s=r[0]-i,e=e[1],n=n[1],t=t[1]-e,r=r[1]-n,s=(s*(e-n)-r*(a-i))/(r*o-s*t);return[a+s*o,e+s*t]}function ka(e){var t=e[0],e=e[e.length-1];return!(t[0]-e[0]||t[1]-e[1])}wa.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},wa.centroid=function(e){var t,n,r=-1,a=this.length,i=0,o=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[i*e,o*e]},wa.clip=function(e){for(var t,n,r,a,i,o,s=ka(e),l=-1,c=this.length-ka(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,a=this[l],i=t[(r=t.length-s)-1],n=-1;++n<r;)Ta(o=t[n],u,a)?(Ta(i,u,a)||e.push(Ma(i,o,u,a)),e.push(o)):Ta(i,u,a)&&e.push(Ma(i,o,u,a)),i=o;s&&e.push(e[0]),u=a}return e};var Aa,Sa,Ea,La,Ca,Da=[],Oa=[];function Pa(){Xa(this),this.edge=this.site=this.circle=null}function Ia(e){var t=Da.pop()||new Pa;return t.site=e,t}function Ra(e){Ua(e),Ea.remove(e),Da.push(e),Xa(e)}function Na(e){for(var t,n,r,a,i=e.x,o=e.y,s=Ea._;s;)if(r=za(s,o)-i,_e<r)s=s.L;else{if(a=i-function(e,t){var n=e.N;if(n)return za(n,t);e=e.site;return e.y===t?e.x:1/0}(s,o),!(_e<a)){-_e<r?(t=s.P,n=s):-_e<a?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l,c,u,d,f,p,h,m,g,y,v=Ia(e);if(Ea.insert(t,v),t||n){if(t===n)return Ua(t),n=Ia(t.site),Ea.insert(v,n),v.edge=n.edge=Ga(t.site,v.site),qa(t),void qa(n);n?(Ua(t),Ua(n),c=(l=t.site).x,y=l.y,u=e.x-c,h=e.y-y,f=(d=n.site).x-c,p=d.y-y,Wa(n.edge,l,d,y={x:(p*(m=u*u+h*h)-h*(g=f*f+p*p))/(h=2*(u*p-h*f))+c,y:(u*g-f*m)/h+y}),v.edge=Ga(l,e,null,y),n.edge=Ga(e,d,null,y),qa(t),qa(n)):v.edge=Ga(t.site,v.site)}}function za(e,t){var n=e.site,r=n.x,a=n.y,i=a-t;if(!i)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,e=l-t;if(!e)return s;o=s-r,n=1/i-1/e,t=o/e;return n?(-t+Math.sqrt(t*t-2*n*(o*o/(-2*e)-l+e/2+a-i/2)))/n+r:(r+s)/2}function Fa(e){this.site=e,this.edges=[]}function ja(e){for(var t,n,r,a,i,o,s,l,c,u=e[0][0],d=e[1][0],f=e[0][1],p=e[1][1],h=Sa,m=h.length;m--;)if((a=h[m])&&a.prepare())for(s=(o=a.edges).length,i=0;i<s;)n=(c=o[i].end()).x,r=c.y,t=(l=o[++i%s].start()).x,l=l.y,(D(n-t)>_e||D(r-l)>_e)&&(o.splice(i,0,new Za(function(e,t,n){e=new Va(e,null);return e.a=t,e.b=n,Aa.push(e),e}(a.site,c,D(n-u)<_e&&_e<p-r?{x:u,y:D(t-u)<_e?l:p}:D(r-p)<_e&&_e<d-n?{x:D(l-p)<_e?t:d,y:p}:D(n-d)<_e&&_e<r-f?{x:d,y:D(t-d)<_e?l:f}:D(r-f)<_e&&_e<n-u?{x:D(l-f)<_e?t:u,y:f}:null),a.site,null)),++s)}function Ha(e,t){return t.angle-e.angle}function Ba(){Xa(this),this.x=this.y=this.arc=this.site=this.cy=null}function qa(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,i=n.site;if(r!==i){var o=a.x,s=a.y,l=r.x-o,c=r.y-s,u=i.x-o,n=2*(l*(t=i.y-s)-c*u);if(!(-we<=n)){var r=l*l+c*c,i=u*u+t*t,c=(t*r-c*i)/n,n=(l*i-u*r)/n,t=n+s,d=Oa.pop()||new Ba;d.arc=e,d.site=a,d.x=c+o,d.y=t+Math.sqrt(c*c+n*n),d.cy=t,e.circle=d;for(var f=null,p=Ca._;p;)if(d.y<p.y||d.y===p.y&&d.x<=p.x){if(!p.L){f=p.P;break}p=p.L}else{if(!p.R){f=p;break}p=p.R}Ca.insert(f,d),f||(La=d)}}}}function Ua(e){var t=e.circle;t&&(t.P||(La=t.N),Ca.remove(t),Oa.push(t),Xa(t),e.circle=null)}function Ya(e){for(var t,n=Aa,r=xr(e[0][0],e[0][1],e[1][0],e[1][1]),a=n.length;a--;)(function(e,t){var n=e.b;if(n)return!0;var r=e.a,a=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,c=e.r,u=l.x,d=l.y,f=c.x,t=c.y,l=(u+f)/2,c=(d+t)/2;if(t===d){if(l<a||i<=l)return;if(f<u){if(r){if(r.y>=s)return}else r={x:l,y:o};n={x:l,y:s}}else{if(r){if(r.y<o)return}else r={x:l,y:s};n={x:l,y:o}}}else if(l=c-(c=(u-f)/(t-d))*l,c<-1||1<c)if(f<u){if(r){if(r.y>=s)return}else r={x:(o-l)/c,y:o};n={x:(s-l)/c,y:s}}else{if(r){if(r.y<o)return}else r={x:(s-l)/c,y:s};n={x:(o-l)/c,y:o}}else if(d<t){if(r){if(r.x>=i)return}else r={x:a,y:c*a+l};n={x:i,y:c*i+l}}else{if(r){if(r.x<a)return}else r={x:i,y:c*i+l};n={x:a,y:c*a+l}}return e.a=r,e.b=n,!0})(t=n[a],e)&&r(t)&&!(D(t.a.x-t.b.x)<_e&&D(t.a.y-t.b.y)<_e)||(t.a=t.b=null,n.splice(a,1))}function Va(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ga(e,t,n,r){var a=new Va(e,t);return Aa.push(a),n&&Wa(a,e,t,n),r&&Wa(a,t,e,r),Sa[e.i].edges.push(new Za(a,e,t)),Sa[t.i].edges.push(new Za(a,t,e)),a}function Wa(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Za(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function $a(){this._=null}function Xa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ja(e,t){var n=t,r=t.R,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ka(e,t){var n=t,r=t.L,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Qa(e){for(;e.L;)e=e.L;return e}function ei(e,t){var n,r,a,i=e.sort(ti).pop();for(Aa=[],Sa=new Array(e.length),Ea=new $a,Ca=new $a;;)if(a=La,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===n&&i.y===r||(Sa[i.i]=new Fa(i),Na(i),n=i.x,r=i.y),i=e.pop();else{if(!a)break;!function(e){var t=e.circle,n=t.x,r=t.cy,a={x:n,y:r},i=e.P,o=e.N,s=[e];Ra(e);for(var l=i;l.circle&&D(n-l.circle.x)<_e&&D(r-l.circle.cy)<_e;)i=l.P,s.unshift(l),Ra(l),l=i;s.unshift(l),Ua(l);for(var c=o;c.circle&&D(n-c.circle.x)<_e&&D(r-c.circle.cy)<_e;)o=c.N,s.push(c),Ra(c),c=o;s.push(c),Ua(c);for(var u=s.length,d=1;d<u;++d)c=s[d],l=s[d-1],Wa(c.edge,l.site,c.site,a);l=s[0],(c=s[u-1]).edge=Ga(l.site,c.site,null,a),qa(l),qa(c)}(a.arc)}t&&(Ya(t),ja(t));t={cells:Sa,edges:Aa};return Ea=Ca=Aa=Sa=null,t}function ti(e,t){return t.y-e.y||t.x-e.x}Fa.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ha),t.length},Za.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},$a.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=Qa(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(Ja(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ka(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(Ka(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ja(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r=e.U,a=e.L,i=e.R,o=a?i?Qa(i):a:i;if(r?r.L===e?r.L=o:r.R=o:this._=o,a&&i?(n=o.C,o.C=e.C,((o.L=a).U=o)!==i?(r=o.U,o.U=e.U,e=o.R,r.L=e,(o.R=i).U=o):(o.U=r,e=(r=o).R)):(n=e.C,e=o),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,Ja(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ka(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Ja(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Ka(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Ja(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Ka(this,r),e=this._;break}}while(t.C=!0,r=(e=r).U,!e.C);e&&(e.C=!1)}}},P.geom.voronoi=function(e){var t=va,n=xa,r=t,a=n,c=ni;return e?i(e):(i.links=function(t){return ei(f(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},i.triangles=function(u){var d=[];return ei(f(u)).cells.forEach(function(e,t){for(var n,r,a=e.site,i=e.edges.sort(Ha),o=-1,s=i.length,l=i[s-1].edge,c=l.l===a?l.r:l.l;++o<s;)n=c,c=(l=i[o].edge).l===a?l.r:l.l,t<n.i&&t<c.i&&(r=c,(a.x-r.x)*(n.y-a.y)-(a.x-n.x)*(r.y-a.y)<0)&&d.push([u[t],u[n.i],u[c.i]])}),d},i.x=function(e){return arguments.length?(r=ut(t=e),i):t},i.y=function(e){return arguments.length?(a=ut(n=e),i):n},i.clipExtent=function(e){return arguments.length?(c=null==e?ni:e,i):c===ni?null:c},i.size=function(e){return arguments.length?i.clipExtent(e&&[[0,0],e]):c===ni?null:c&&c[1]},i);function i(r){var a=new Array(r.length),i=c[0][0],o=c[0][1],s=c[1][0],l=c[1][1];return ei(f(r),c).cells.forEach(function(e,t){var n=e.edges,e=e.site;(a[t]=n.length?n.map(function(e){e=e.start();return[e.x,e.y]}):e.x>=i&&e.x<=s&&e.y>=o&&e.y<=l?[[i,l],[s,l],[s,o],[i,o]]:[]).point=r[t]}),a}function f(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/_e)*_e,y:Math.round(a(e,t)/_e)*_e,i:t}})}};var ni=[[-1e6,-1e6],[1e6,1e6]];function ri(e){return e.x}function ai(e){return e.y}function ii(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function oi(e,t){e=P.rgb(e),t=P.rgb(t);var n=e.r,r=e.g,a=e.b,i=t.r-n,o=t.g-r,s=t.b-a;return function(e){return"#"+rt(Math.round(n+i*e))+rt(Math.round(r+o*e))+rt(Math.round(a+s*e))}}function si(e,t){var n,r={},a={};for(n in e)n in t?r[n]=fi(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function li(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function ci(e,r){var t,n,a,i=ui.lastIndex=di.lastIndex=0,o=-1,s=[],l=[];for(e+="",r+="";(t=ui.exec(e))&&(n=di.exec(r));)(a=n.index)>i&&(a=r.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(t=t[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:li(t,n)})),i=di.lastIndex;return i<r.length&&(a=r.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}P.geom.delaunay=function(e){return P.geom.voronoi().triangles(e)},P.geom.quadtree=function(e,v,x,b,w){var T,M=va,k=xa;return(T=arguments.length)?(M=ri,k=ai,3===T&&(w=x,b=v,x=v=0),t(e)):(t.x=function(e){return arguments.length?(M=e,t):M},t.y=function(e){return arguments.length?(k=e,t):k},t.extent=function(e){return arguments.length?(null==e?v=x=b=w=null:(v=+e[0][0],x=+e[0][1],b=+e[1][0],w=+e[1][1]),t):null==v?null:[[v,x],[b,w]]},t.size=function(e){return arguments.length?(null==e?v=x=b=w=null:(v=x=0,b=+e[0],w=+e[1]),t):null==v?null:[b-v,w-x]},t);function t(e){var t,n,r,a,i,o,s,l,c,u=ut(M),d=ut(k);if(null!=v)o=v,s=x,l=b,c=w;else if(l=c=-(o=s=1/0),n=[],r=[],i=e.length,T)for(a=0;a<i;++a)(t=e[a]).x<o&&(o=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>c&&(c=t.y),n.push(t.x),r.push(t.y);else for(a=0;a<i;++a){var f=+u(t=e[a],a),p=+d(t,a);f<o&&(o=f),p<s&&(s=p),l<f&&(l=f),c<p&&(c=p),n.push(f),r.push(p)}var h=l-o,m=c-s;function g(e,t,n,r,a,i,o,s){var l,c,u;isNaN(n)||isNaN(r)||(e.leaf?(l=e.x,c=e.y,null!=l?(D(l-n)+D(c-r)<.01||(u=e.point,e.x=e.y=e.point=null,y(e,u,l,c,a,i,o,s)),y(e,t,n,r,a,i,o,s)):(e.x=n,e.y=r,e.point=t)):y(e,t,n,r,a,i,o,s))}function y(e,t,n,r,a,i,o,s){var l=.5*(a+o),c=.5*(i+s),u=l<=n,d=c<=r,f=d<<1|u;e.leaf=!1,u?a=l:o=l,d?i=c:s=c,g(e=e.nodes[f]||(e.nodes[f]=ii()),t,n,r,a,i,o,s)}m<h?c=s+h:l=o+m;var _=ii();if(_.add=function(e){g(_,e,+u(e,++a),+d(e,a),o,s,l,c)},_.visit=function(e){!function e(t,n,r,a,i,o){{var s,l;t(n,r,a,i,o)||(s=.5*(r+i),l=.5*(a+o),(n=n.nodes)[0]&&e(t,n[0],r,a,s,l),n[1]&&e(t,n[1],s,a,i,l),n[2]&&e(t,n[2],r,l,s,o),n[3]&&e(t,n[3],s,l,i,o))}}(e,_,o,s,l,c)},_.find=function(e){return p=e[0],h=e[1],b=1/0,function e(t,n,r,a,i){if(!(y<n||v<r||a<m||i<g)){var o,s;!(o=t.point)||(s=(s=p-t.x)*s+(s=h-t.y)*s)<b&&(s=Math.sqrt(b=s),m=p-s,g=h-s,y=p+s,v=h+s,x=o);for(var l=t.nodes,c=.5*(n+a),u=.5*(r+i),d=(u<=h)<<1|c<=p,f=d+4;d<f;++d)if(t=l[3&d])switch(3&d){case 0:e(t,n,r,c,u);break;case 1:e(t,c,r,a,u);break;case 2:e(t,n,u,c,i);break;case 3:e(t,c,u,a,i)}}}(_,m=o,g=s,y=l,v=c),x;var p,h,m,g,y,v,x,b},a=-1,null==v){for(;++a<i;)g(_,e[a],n[a],r[a],o,s,l,c);--a}else e.forEach(_.add);return n=r=e=t=null,_}},P.interpolateRgb=oi,P.interpolateObject=si,P.interpolateNumber=li,P.interpolateString=ci;var ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,di=new RegExp(ui.source,"g");function fi(e,t){for(var n,r=P.interpolators.length;0<=--r&&!(n=P.interpolators[r](e,t)););return n}function pi(e,t){for(var n=[],r=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),s=0;s<o;++s)n.push(fi(e[s],t[s]));for(;s<a;++s)r[s]=e[s];for(;s<i;++s)r[s]=t[s];return function(e){for(s=0;s<o;++s)r[s]=n[s](e);return r}}P.interpolate=fi,P.interpolators=[function(e,t){var n=typeof t;return("string"==n?ct.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?oi:ci:t instanceof je?oi:Array.isArray(t)?pi:"object"==n&&isNaN(t)?si:li)(e,t)}],P.interpolateArray=pi;function hi(){return C}var mi=P.map({linear:hi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return xi},cubic:function(){return bi},sin:function(){return wi},exp:function(){return Ti},circle:function(){return Mi},elastic:function(t,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/Me*Math.asin(1/t):(t=1,n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*Me/n)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ki}}),gi=P.map({in:C,out:yi,"in-out":vi,"out-in":function(e){return vi(yi(e))}});function yi(t){return function(e){return 1-t(1-e)}}function vi(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function xi(e){return e*e}function bi(e){return e*e*e}function _i(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function wi(e){return 1-Math.cos(e*Ae)}function Ti(e){return Math.pow(2,10*(e-1))}function Mi(e){return 1-Math.sqrt(1-e*e)}function ki(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ai(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Si(e){var t,n,r,a=[e.a,e.b],i=[e.c,e.d],o=Li(a),s=Ei(a,i),t=Li(((t=i)[0]+=(r=-s)*(n=a)[0],t[1]+=r*n[1],t))||0;a[0]*i[1]<i[0]*a[1]&&(a[0]*=-1,a[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(a[1],a[0]):Math.atan2(-i[0],i[1]))*Ee,this.translate=[e.e,e.f],this.scale=[o,t],this.skew=t?Math.atan2(s,t)*Ee:0}function Ei(e,t){return e[0]*t[0]+e[1]*t[1]}function Li(e){var t=Math.sqrt(Ei(e,e));return t&&(e[0]/=t,e[1]/=t),t}P.ease=function(e){var t,n=e.indexOf("-"),r=0<=n?e.slice(0,n):e,n=0<=n?e.slice(n+1):"in",r=mi.get(r)||hi,n=gi.get(n)||C;return t=n(r.apply(null,a.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},P.interpolateHcl=function(e,t){e=P.hcl(e),t=P.hcl(t);var n=e.h,r=e.c,a=e.l,i=t.h-n,o=t.c-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.c:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Ue(n+i*e,r+o*e,a+s*e)+""}},P.interpolateHsl=function(e,t){e=P.hsl(e),t=P.hsl(t);var n=e.h,r=e.s,a=e.l,i=t.h-n,o=t.s-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.s:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Be(n+i*e,r+o*e,a+s*e)+""}},P.interpolateLab=function(e,t){e=P.lab(e),t=P.lab(t);var n=e.l,r=e.a,a=e.b,i=t.l-n,o=t.a-r,s=t.b-a;return function(e){return $e(n+i*e,r+o*e,a+s*e)+""}},P.interpolateRound=Ai,P.transform=function(e){var n=I.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(e){var t;return null!=e&&(n.setAttribute("transform",e),t=n.transform.baseVal.consolidate()),new Si(t?t.matrix:Ci)})(e)},Si.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ci={a:1,b:0,c:0,d:1,e:0,f:0};function Di(e){return e.length?e.pop()+",":""}function Oi(e,t){var n,r,a,i,o,s=[],l=[];return e=P.transform(e),t=P.transform(t),r=e.translate,a=t.translate,o=s,i=l,r[0]!==a[0]||r[1]!==a[1]?(n=o.push("translate(",null,",",null,")"),i.push({i:n-4,x:li(r[0],a[0])},{i:n-2,x:li(r[1],a[1])})):(a[0]||a[1])&&o.push("translate("+a+")"),i=e.rotate,n=t.rotate,r=s,o=l,i!==n?(180<i-n?n+=360:180<n-i&&(i+=360),o.push({i:r.push(Di(r)+"rotate(",null,")")-2,x:li(i,n)})):n&&r.push(Di(r)+"rotate("+n+")"),a=e.skew,o=t.skew,i=s,r=l,a!==o?r.push({i:i.push(Di(i)+"skewX(",null,")")-2,x:li(a,o)}):o&&i.push(Di(i)+"skewX("+o+")"),n=e.scale,r=t.scale,a=s,i=l,n[0]!==r[0]||n[1]!==r[1]?(o=a.push(Di(a)+"scale(",null,",",null,")"),i.push({i:o-4,x:li(n[0],r[0])},{i:o-2,x:li(n[1],r[1])})):1===r[0]&&1===r[1]||a.push(Di(a)+"scale("+r+")"),e=t=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}function Pi(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Ii(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Ri(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function Ni(e){e.fixed|=2}function zi(e){e.fixed&=-7}function Fi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ji(e){e.fixed&=-5}P.interpolateTransform=Oi,P.layout={},P.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(function(e){var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Ri(e),r=Ri(t),a=n.pop(),i=r.pop(),o=null;for(;a===i;)o=a,a=n.pop(),i=r.pop();return o}(t,n),a=[t];for(;t!==r;)t=t.parent,a.push(t);var i=a.length;for(;n!==r;)a.splice(i,0,n),n=n.parent;return a}(e[n]));return t}},P.layout.chord=function(){var g,y,v,x,b,_,w,t={},T=0;function e(){var e,t,n,r,a,i={},o=[],s=P.range(x),l=[];for(g=[],y=[],e=0,r=-1;++r<x;){for(t=0,a=-1;++a<x;)t+=v[r][a];o.push(t),l.push(P.range(x)),e+=t}for(b&&s.sort(function(e,t){return b(o[e],o[t])}),_&&l.forEach(function(e,n){e.sort(function(e,t){return _(v[n][e],v[n][t])})}),e=(Me-T*x)/e,t=0,r=-1;++r<x;){for(n=t,a=-1;++a<x;){var c=s[r],u=l[c][a],d=v[c][u],f=t,p=t+=d*e;i[c+"-"+u]={index:c,subindex:u,startAngle:f,endAngle:p,value:d}}y[c]={index:c,startAngle:n,endAngle:t,value:o[c]},t+=T}for(r=-1;++r<x;)for(a=r-1;++a<x;){var h=i[r+"-"+a],m=i[a+"-"+r];(h.value||m.value)&&g.push(h.value<m.value?{source:m,target:h}:{source:h,target:m})}w&&M()}function M(){g.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(x=(v=e)&&v.length,g=y=null,t):v},t.padding=function(e){return arguments.length?(T=e,g=y=null,t):T},t.sortGroups=function(e){return arguments.length?(b=e,g=y=null,t):b},t.sortSubgroups=function(e){return arguments.length?(_=e,g=null,t):_},t.sortChords=function(e){return arguments.length?(w=e,g&&M(),t):w},t.chords=function(){return g||e(),g},t.groups=function(){return y||e(),y},t},P.layout.force=function(){var d,e,f,p,h,m,a={},g=P.dispatch("start","tick","end"),y=[1,1],v=.9,i=Hi,o=Bi,x=-30,b=qi,_=.1,w=.64,T=[],M=[];function t(e){e.px=P.event.x,e.py=P.event.y,a.resume()}return a.tick=function(){if((f*=.99)<.005)return d=null,g.end({type:"end",alpha:f=0}),!0;for(var e,t,n,r,a,i,o,s,l=T.length,c=M.length,u=0;u<c;++u)n=(t=M[u]).source,(a=(o=(r=t.target).x-n.x)*o+(s=r.y-n.y)*s)&&(o*=a=f*h[u]*((a=Math.sqrt(a))-p[u])/a,s*=a,r.x-=o*(i=n.weight+r.weight?n.weight/(n.weight+r.weight):.5),r.y-=s*i,n.x+=o*(i=1-i),n.y+=s*i);if((i=f*_)&&(o=y[0]/2,s=y[1]/2,u=-1,i))for(;++u<l;)(t=T[u]).x+=(o-t.x)*i,t.y+=(s-t.y)*i;if(x)for(!function e(t,n,r){var a=0,i=0;t.charge=0;if(!t.leaf)for(var o,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(o=s[c])&&(e(o,n,r),t.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);{var u;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),u=n*r[t.point.index],t.charge+=t.pointCharge=u,a+=u*t.point.x,i+=u*t.point.y)}t.cx=a/t.charge;t.cy=i/t.charge}(e=P.geom.quadtree(T),f,m),u=-1;++u<l;)(t=T[u]).fixed||e.visit(function(s){return function(e,t,n,r){if(e.point!==s){var a,i=e.cx-s.x,o=e.cy-s.y,r=r-t,t=i*i+o*o;if(r*r/w<t)return t<b&&(a=e.charge/t,s.px-=i*a,s.py-=o*a),!0;e.point&&t&&t<b&&(a=e.pointCharge/t,s.px-=i*a,s.py-=o*a)}return!e.charge}}(t));for(u=-1;++u<l;)(t=T[u]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*v,t.y-=(t.py-(t.py=t.y))*v);g.tick({type:"tick",alpha:f})},a.nodes=function(e){return arguments.length?(T=e,a):T},a.links=function(e){return arguments.length?(M=e,a):M},a.size=function(e){return arguments.length?(y=e,a):y},a.linkDistance=function(e){return arguments.length?(i="function"==typeof e?e:+e,a):i},a.distance=a.linkDistance,a.linkStrength=function(e){return arguments.length?(o="function"==typeof e?e:+e,a):o},a.friction=function(e){return arguments.length?(v=+e,a):v},a.charge=function(e){return arguments.length?(x="function"==typeof e?e:+e,a):x},a.chargeDistance=function(e){return arguments.length?(b=e*e,a):Math.sqrt(b)},a.gravity=function(e){return arguments.length?(_=+e,a):_},a.theta=function(e){return arguments.length?(w=e*e,a):Math.sqrt(w)},a.alpha=function(e){return arguments.length?(e=+e,f?0<e?f=e:(d.c=null,d.t=NaN,d=null,g.end({type:"end",alpha:f=0})):0<e&&(g.start({type:"start",alpha:f=e}),d=vt(a.tick)),a):f},a.start=function(){for(var s,e,l=T.length,c=M.length,t=y[0],n=y[1],u=0;u<l;++u)(e=T[u]).index=u,e.weight=0;for(u=0;u<c;++u)"number"==typeof(e=M[u]).source&&(e.source=T[e.source]),"number"==typeof e.target&&(e.target=T[e.target]),++e.source.weight,++e.target.weight;for(u=0;u<l;++u)e=T[u],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(p=[],"function"==typeof i)for(u=0;u<c;++u)p[u]=+i.call(this,M[u],u);else for(u=0;u<c;++u)p[u]=i;if(h=[],"function"==typeof o)for(u=0;u<c;++u)h[u]=+o.call(this,M[u],u);else for(u=0;u<c;++u)h[u]=o;if(m=[],"function"==typeof x)for(u=0;u<l;++u)m[u]=+x.call(this,T[u],u);else for(u=0;u<l;++u)m[u]=x;function r(e,t){if(!s){for(s=new Array(l),i=0;i<l;++i)s[i]=[];for(i=0;i<c;++i){var n=M[i];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var r,a=s[u],i=-1,o=a.length;++i<o;)if(!isNaN(r=a[i][e]))return r;return Math.random()*t}return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){if(e=e||P.behavior.drag().origin(C).on("dragstart.force",Ni).on("drag.force",t).on("dragend.force",zi),!arguments.length)return e;this.on("mouseover.force",Fi).on("mouseout.force",ji).call(e)},P.rebind(a,g,"on")};var Hi=20,Bi=1,qi=1/0;function Ui(e,t){return P.rebind(e,t,"sort","children","value"),(e.nodes=e).links=$i,e}function Yi(e,t){for(var n,r,a=[e];null!=(e=a.pop());)if(t(e),(r=e.children)&&(n=r.length))for(;0<=--n;)a.push(r[n])}function Vi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(e=r.pop());)t(e)}function Gi(e){return e.children}function Wi(e){return e.value}function Zi(e,t){return t.value-e.value}function $i(e){return P.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}P.layout.hierarchy=function(){var s=Zi,l=Gi,c=Wi;function u(e){var t,n,r,a,i=[e],o=[];for(e.depth=0;null!=(t=i.pop());)if(o.push(t),(r=l.call(u,t,t.depth))&&(n=r.length)){for(;0<=--n;)i.push(a=r[n]),a.parent=t,a.depth=t.depth+1;c&&(t.value=0),t.children=r}else c&&(t.value=+c.call(u,t,t.depth)||0),delete t.children;return Vi(e,function(e){var t,n;s&&(t=e.children)&&t.sort(s),c&&(n=e.parent)&&(n.value+=e.value)}),o}return u.sort=function(e){return arguments.length?(s=e,u):s},u.children=function(e){return arguments.length?(l=e,u):l},u.value=function(e){return arguments.length?(c=e,u):c},u.revalue=function(e){return c&&(Yi(e,function(e){e.children&&(e.value=0)}),Vi(e,function(e){var t;e.children||(e.value=+c.call(u,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},u},P.layout.partition=function(){var n=P.layout.hierarchy(),r=[1,1];function t(e,t){t=n.call(this,e,t);return function e(t,n,r,a){var i=t.children;if(t.x=n,t.y=t.depth*a,t.dx=r,t.dy=a,i&&(o=i.length)){var o,s,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=i[l],n,s=s.value*r,a),n+=s}}(t[0],0,r[0],r[1]/function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,i=-1;++i<a;)r=Math.max(r,e(n[i]));return 1+r}(t[0])),t}return t.size=function(e){return arguments.length?(r=e,t):r},Ui(t,n)},P.layout.pie=function(){var d=Number,f=Xi,p=0,h=Me,m=0;function g(n){var t,e=n.length,r=n.map(function(e,t){return+d.call(g,e,t)}),a=+("function"==typeof p?p.apply(this,arguments):p),i=("function"==typeof h?h.apply(this,arguments):h)-a,o=Math.min(Math.abs(i)/e,+("function"==typeof m?m.apply(this,arguments):m)),s=o*(i<0?-1:1),l=P.sum(r),c=l?(i-e*s)/l:0,e=P.range(e),u=[];return null!=f&&e.sort(f===Xi?function(e,t){return r[t]-r[e]}:function(e,t){return f(n[e],n[t])}),e.forEach(function(e){u[e]={data:n[e],value:t=r[e],startAngle:a,endAngle:a+=t*c+s,padAngle:o}}),u}return g.value=function(e){return arguments.length?(d=e,g):d},g.sort=function(e){return arguments.length?(f=e,g):f},g.startAngle=function(e){return arguments.length?(p=e,g):p},g.endAngle=function(e){return arguments.length?(h=e,g):h},g.padAngle=function(e){return arguments.length?(m=e,g):m},g};var Xi={};function Ji(e){return e.x}function Ki(e){return e.y}function Qi(e,t,n){e.y0=t,e.y=n}P.layout.stack=function(){var d=C,f=no,p=ro,h=Qi,m=Ji,g=Ki;function y(e,t){if(!(n=e.length))return e;for(var n,r,a,i=(s=e.map(function(e,t){return d.call(y,e,t)})).map(function(e){return e.map(function(e,t){return[m.call(y,e,t),g.call(y,e,t)]})}),o=f.call(y,i,t),s=P.permute(s,o),i=P.permute(i,o),l=p.call(y,i,t),c=s[0].length,u=0;u<c;++u)for(h.call(y,s[0][u],a=l[u],i[0][u][1]),r=1;r<n;++r)h.call(y,s[r][u],a+=i[r-1][u][1],i[r][u][1]);return e}return y.values=function(e){return arguments.length?(d=e,y):d},y.order=function(e){return arguments.length?(f="function"==typeof e?e:eo.get(e)||no,y):f},y.offset=function(e){return arguments.length?(p="function"==typeof e?e:to.get(e)||ro,y):p},y.x=function(e){return arguments.length?(m=e,y):m},y.y=function(e){return arguments.length?(g=e,y):g},y.out=function(e){return arguments.length?(h=e,y):h},y};var eo=P.map({"inside-out":function(e){for(var t,n=e.length,r=e.map(ao),a=e.map(io),i=P.range(n).sort(function(e,t){return r[e]-r[t]}),o=0,s=0,l=[],c=[],u=0;u<n;++u)t=i[u],o<s?(o+=a[t],l.push(t)):(s+=a[t],c.push(t));return c.reverse().concat(l)},reverse:function(e){return P.range(e.length).reverse()},default:no}),to=P.map({silhouette:function(e){for(var t,n,r=e.length,a=e[0].length,i=[],o=0,s=[],l=0;l<a;++l){for(n=t=0;t<r;t++)n+=e[t][l][1];o<n&&(o=n),i.push(n)}for(l=0;l<a;++l)s[l]=(o-i[l])/2;return s},wiggle:function(e){var t,n,r,a,i,o,s,l,c,u=e.length,d=e[0],f=d.length,p=[];for(p[0]=l=c=0,n=1;n<f;++n){for(a=t=0;t<u;++t)a+=e[t][n][1];for(s=d[n][i=t=0]-d[n-1][0];t<u;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;i+=o*e[t][n][1]}p[n]=l-=a?i/a*s:0,l<c&&(c=l)}for(n=0;n<f;++n)p[n]-=c;return p},expand:function(e){for(var t,n,r=e.length,a=e[0].length,i=1/r,o=[],s=0;s<a;++s){for(n=t=0;t<r;t++)n+=e[t][s][1];if(n)for(t=0;t<r;t++)e[t][s][1]/=n;else for(t=0;t<r;t++)e[t][s][1]=i}for(s=0;s<a;++s)o[s]=0;return o},zero:ro});function no(e){return P.range(e.length)}function ro(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ao(e){for(var t,n=1,r=0,a=e[0][1],i=e.length;n<i;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function io(e){return e.reduce(oo,0)}function oo(e,t){return e+t[1]}function so(e,t){return lo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function lo(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,i=[];++n<=t;)i[n]=a*n+r;return i}function co(e){return[P.min(e),P.max(e)]}function uo(e,t){return e.value-t.value}function fo(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function po(e,t){(e._pack_next=t)._pack_prev=e}function ho(e,t){var n=t.x-e.x,r=t.y-e.y,t=e.r+t.r;return n*n+r*r<.999*t*t}function mo(e){if((t=e.children)&&(o=t.length)){var t,n,r,a,i,o,s=1/0,l=-1/0,c=1/0,u=-1/0;if(t.forEach(go),(n=t[0]).x=-n.r,n.y=0,x(n),1<o&&((r=t[1]).x=r.r,r.y=0,x(r),2<o))for(vo(n,r,a=t[2]),x(a),fo(n,a),fo(n._pack_prev=a,r),r=n._pack_next,v=3;v<o;v++){vo(n,r,a=t[v]);for(var d=0,f=1,p=1,h=r._pack_next;h!==r;h=h._pack_next,f++)if(ho(h,a)){d=1;break}if(1==d)for(i=n._pack_prev;i!==h._pack_prev&&!ho(i,a);i=i._pack_prev,p++);d?(f<p||f==p&&r.r<n.r?po(n,r=h):po(n=i,r),v--):(fo(n,a),x(r=a))}for(var m=(s+l)/2,g=(c+u)/2,y=0,v=0;v<o;v++)(a=t[v]).x-=m,a.y-=g,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,t.forEach(yo)}function x(e){s=Math.min(e.x-e.r,s),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}}function go(e){e._pack_next=e._pack_prev=e}function yo(e){delete e._pack_next,delete e._pack_prev}function vo(e,t,n){var r,a,i=e.r+n.r,o=t.x-e.x,s=t.y-e.y;i&&(o||s)?(r=t.r+n.r,t=.5+((i*=i)-(r*=r))/(2*(a=o*o+s*s)),a=Math.sqrt(Math.max(0,2*r*(i+a)-(i-=a)*i-r*r))/(2*a),n.x=e.x+t*o+a*s,n.y=e.y+t*s-a*o):(n.x=e.x+i,n.y=e.y)}function xo(e,t){return e.parent==t.parent?1:2}function bo(e){var t=e.children;return t.length?t[0]:e.t}function _o(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function wo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function To(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],t=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),t<0&&(r+=t/2,t=0),{x:n,y:r,dx:a,dy:t}}function Mo(e){var t=e[0],e=e[e.length-1];return t<e?[t,e]:[e,t]}function ko(e){return e.rangeExtent?e.rangeExtent():Mo(e.range())}function Ao(e,t,n,r){var a=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(a(e))}}function So(e,t){var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Eo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Lo}P.layout.histogram=function(){var d=!0,f=Number,p=co,h=so;function n(e,t){for(var n,r,a=[],i=e.map(f,this),o=p.call(this,i,t),s=h.call(this,o,i,t),t=-1,l=i.length,c=s.length-1,u=d?1:1/l;++t<c;)(n=a[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<c)for(t=-1;++t<l;)(r=i[t])>=o[0]&&r<=o[1]&&((n=a[P.bisect(s,r,1,c)-1]).y+=u,n.push(e[t]));return a}return n.value=function(e){return arguments.length?(f=e,n):f},n.range=function(e){return arguments.length?(p=ut(e),n):p},n.bins=function(t){return arguments.length?(h="number"==typeof t?function(e){return lo(e,t)}:ut(t),n):h},n.frequency=function(e){return arguments.length?(d=!!e,n):d},n},P.layout.pack=function(){var o,s=P.layout.hierarchy().sort(uo),l=0,c=[1,1];function t(e,t){var n,r=s.call(this,e,t),a=r[0],e=c[0],t=c[1],i=null==o?Math.sqrt:"function"==typeof o?o:function(){return o};return a.x=a.y=0,Vi(a,function(e){e.r=+i(e.value)}),Vi(a,mo),l&&(n=l*(o?1:Math.max(2*a.r/e,2*a.r/t))/2,Vi(a,function(e){e.r+=n}),Vi(a,mo),Vi(a,function(e){e.r-=n})),function e(t,n,r,a){var i=t.children;t.x=n+=a*t.x;t.y=r+=a*t.y;t.r*=a;if(i)for(var o=-1,s=i.length;++o<s;)e(i[o],n,r,a)}(a,e/2,t/2,o?1:1/Math.max(2*a.r/e,2*a.r/t)),r}return t.size=function(e){return arguments.length?(c=e,t):c},t.radius=function(e){return arguments.length?(o=null==e||"function"==typeof e?e:+e,t):o},t.padding=function(e){return arguments.length?(l=+e,t):l},Ui(t,s)},P.layout.tree=function(){var c=P.layout.hierarchy().sort(null).value(null),f=xo,u=[1,1],d=null;function t(e,t){var n,r,a,i,o,s,l=c.call(this,e,t),e=l[0],t=function(e){var t,e={A:null,children:[e]},n=[e];for(;null!=(t=n.pop());)for(var r,a=t.children,i=0,o=a.length;i<o;++i)n.push((a[i]=r={_:a[i],parent:t,children:(r=a[i].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=r);return e.children[0]}(e);return Vi(t,p),t.parent.m=-t.z,Yi(t,h),d?Yi(e,m):(Yi(a=r=n=e,function(e){e.x<n.x&&(n=e),e.x>r.x&&(r=e),e.depth>a.depth&&(a=e)}),i=f(n,r)/2-n.x,o=u[0]/(r.x+f(r,n)/2+i),s=u[1]/(a.depth||1),Yi(e,function(e){e.x=(e.x+i)*o,e.y=e.depth*s})),l}function p(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;t.length?(function(e){var t,n=0,r=0,a=e.children,i=a.length;for(;0<=--i;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e),t=(t[0].z+t[t.length-1].z)/2,r?(e.z=r.z+f(e._,r._),e.m=e.z-t):e.z=t):r&&(e.z=r.z+f(e._,r._)),e.parent.A=function(e,t,n){if(t){for(var r,a=e,i=e,o=t,s=a.parent.children[0],l=a.m,c=i.m,u=o.m,d=s.m;o=_o(o),a=bo(a),o&&a;)s=bo(s),(i=_o(i)).a=e,0<(r=o.z+u-a.z-l+f(o._,a._))&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}(function(e,t,n){return e.a.parent===t.parent?e.a:n}(o,e,n),e,r),l+=r,c+=r),u+=o.m,l+=a.m,d+=s.m,c+=i.m;o&&!_o(i)&&(i.t=o,i.m+=u-c),a&&!bo(s)&&(s.t=a,s.m+=l-d,n=e)}return n}(e,r,e.parent.A||n[0])}function h(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=u[0],e.y=e.depth*u[1]}return t.separation=function(e){return arguments.length?(f=e,t):f},t.size=function(e){return arguments.length?(d=null==(u=e)?m:null,t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null==(u=e)?null:m,t):d?u:null},Ui(t,c)},P.layout.cluster=function(){var l=P.layout.hierarchy().sort(null).value(null),c=xo,u=[1,1],d=!1;function t(e,t){var r,n=l.call(this,e,t),a=n[0],i=0;Vi(a,function(e){var t,n=e.children;n&&n.length?(e.x=(t=n).reduce(function(e,t){return e+t.x},0)/t.length,e.y=1+P.max(n,function(e){return e.y})):(e.x=r?i+=c(e,r):0,e.y=0,r=e)});var e=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(a),t=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(a),o=e.x-c(e,t)/2,s=t.x+c(t,e)/2;return Vi(a,d?function(e){e.x=(e.x-a.x)*u[0],e.y=(a.y-e.y)*u[1]}:function(e){e.x=(e.x-o)/(s-o)*u[0],e.y=(1-(a.y?e.y/a.y:1))*u[1]}),n}return t.separation=function(e){return arguments.length?(c=e,t):c},t.size=function(e){return arguments.length?(d=null==(u=e),t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null!=(u=e),t):d?u:null},Ui(t,l)},P.layout.treemap=function(){var n,r=P.layout.hierarchy(),u=Math.round,a=[1,1],i=null,c=wo,o=!1,d="squarify",f=.5*(1+Math.sqrt(5));function p(e,t){for(var n,r,a=-1,i=e.length;++a<i;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function h(e){var t=e.children;if(t&&t.length){var n,r,a=c(e),i=[],o=t.slice(),s=1/0,l="slice"===d?a.dx:"dice"===d?a.dy:"slice-dice"===d?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(p(o,a.dx*a.dy/e.value),i.area=0;0<(r=o.length);)i.push(r=o[r-1]),i.area+=r.area,s="squarify"!==d||(n=function(e,t){var n,r=e.area,a=0,i=1/0,o=-1,s=e.length;for(;++o<s;)(n=e[o].area)&&(n<i&&(i=n),a<n&&(a=n));return t*=t,(r*=r)?Math.max(t*a*f/r,r/(t*i*f)):1/0}(i,l))<=s?(o.pop(),n):(i.area-=i.pop().area,m(i,l,a,!1),l=Math.min(a.dx,a.dy),1/(i.length=i.area=0));i.length&&(m(i,l,a,!0),i.length=i.area=0),t.forEach(h)}}function s(e){var t=e.children;if(t&&t.length){var n,r=c(e),a=t.slice(),i=[];for(p(a,r.dx*r.dy/e.value),i.area=0;n=a.pop();)i.push(n),i.area+=n.area,null!=n.z&&(m(i,n.z?r.dx:r.dy,r,!a.length),i.length=i.area=0);t.forEach(s)}}function m(e,t,n,r){var a,i=-1,o=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++i<o;)(a=e[i]).x=s,a.y=l,a.dy=c,s+=a.dx=Math.min(n.x+n.dx-s,c?u(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++i<o;)(a=e[i]).x=s,a.y=l,a.dx=c,l+=a.dy=Math.min(n.y+n.dy-l,c?u(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function l(e){var t=n||r(e),e=t[0];return e.x=e.y=0,e.value?(e.dx=a[0],e.dy=a[1]):e.dx=e.dy=0,n&&r.revalue(e),p([e],e.dx*e.dy/e.value),(n?s:h)(e),o&&(n=t),t}return l.size=function(e){return arguments.length?(a=e,l):a},l.padding=function(n){return arguments.length?(c=null==(i=n)?wo:"function"==(t=typeof n)?function(e){var t=n.call(l,e,e.depth);return null==t?wo(e):To(e,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(n=[n,n,n,n]),e),l):i;function e(e){return To(e,n)}var t},l.round=function(e){return arguments.length?(u=e?Math.round:Number,l):u!=Number},l.sticky=function(e){return arguments.length?(o=e,n=null,l):o},l.ratio=function(e){return arguments.length?(f=e,l):f},l.mode=function(e){return arguments.length?(d=e+"",l):d},Ui(l,r)},P.random={normal:function(r,a){var e=arguments.length;return e<2&&(a=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+a*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=P.random.normal.apply(P,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=P.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},P.scale={};var Lo={floor:C,ceil:C};function Co(n,e,t,r){var a=[],i=[],o=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<=s;)a.push(t(n[o-1],n[o])),i.push(r(e[o-1],e[o]));return function(e){var t=P.bisect(n,e,1,s)-1;return i[t](a[t](e))}}function Do(e,t){return P.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Oo(e,t){return So(e,Eo(Po(e,t)[2])),So(e,Eo(Po(e,t)[2])),e}function Po(e,t){null==t&&(t=10);var n=Mo(e),r=n[1]-n[0],e=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),r=t/r*e;return r<=.15?e*=10:r<=.35?e*=5:r<=.75&&(e*=2),n[0]=Math.ceil(n[0]/e)*e,n[1]=Math.floor(n[1]/e)*e+.5*e,n[2]=e,n}function Io(e,t){return P.range.apply(P,Po(e,t))}function Ro(e,t,n){var r,a=Po(e,t);if(n){var i=Mt.exec(n);if(i.shift(),"s"===i[8]){var o=P.formatPrefix(Math.max(D(a[0]),D(a[1])));return i[7]||(i[7]="."+zo(o.scale(a[2]))),i[8]="f",n=P.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+(r=i[8],t=zo((e=a)[2]),r in No?Math.abs(t-zo(Math.max(D(e[0]),D(e[1]))))+ +("e"!==r):t-2*("%"===r))),n=i.join("")}else n=",."+zo(a[2])+"f";return P.format(n)}P.scale.linear=function(){return function e(n,r,a,i){var o,s;function t(){var e=2<Math.min(n.length,r.length)?Co:Ao,t=i?Ii:Pi;return o=e(n,r,t,a),s=e(r,n,t,fi),l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(Ai)};l.clamp=function(e){return arguments.length?(i=e,t()):i};l.interpolate=function(e){return arguments.length?(a=e,t()):a};l.ticks=function(e){return Io(n,e)};l.tickFormat=function(e,t){return Ro(n,e,t)};l.nice=function(e){return Oo(n,e),t()};l.copy=function(){return e(n,r,a,i)};return t()}([0,1],[0,1],fi,!1)};var No={s:1,g:1,p:1,r:1,e:1};function zo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}P.scale.log=function(){return function e(t,l,c,u){function d(e){return(c?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function f(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function a(e){return t(d(e))}a.invert=function(e){return f(t.invert(e))};a.domain=function(e){return arguments.length?(c=0<=e[0],t.domain((u=e.map(Number)).map(d)),a):u};a.base=function(e){return arguments.length?(l=+e,t.domain(u.map(d)),a):l};a.nice=function(){var e=So(u.map(d),c?Math:jo);return t.domain(e),u=e.map(f),a};a.ticks=function(){var e=Mo(u),t=[],n=e[0],r=e[1],a=Math.floor(d(n)),i=Math.ceil(d(r)),o=l%1?2:l;if(isFinite(i-a)){if(c){for(;a<i;a++)for(var s=1;s<o;s++)t.push(f(a)*s);t.push(f(a))}else for(t.push(f(a));a++<i;)for(s=o-1;0<s;s--)t.push(f(a)*s);for(a=0;t[a]<n;a++);for(i=t.length;t[i-1]>r;i--);t=t.slice(a,i)}return t};a.tickFormat=function(e,n){if(!arguments.length)return Fo;arguments.length<2?n=Fo:"function"!=typeof n&&(n=P.format(n));var r=Math.max(1,l*e/a.ticks().length);return function(e){var t=e/f(Math.round(d(e)));return t*l<l-.5&&(t*=l),t<=r?n(e):""}};a.copy=function(){return e(t.copy(),l,c,u)};return Do(a,t)}(P.scale.linear().domain([0,1]),10,!0,[1,10])};var Fo=P.format(".0e"),jo={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Ho(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}P.scale.pow=function(){return function e(t,n,r){var a=Ho(n),i=Ho(1/n);function o(e){return t(a(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(a)),o):r};o.ticks=function(e){return Io(r,e)};o.tickFormat=function(e,t){return Ro(r,e,t)};o.nice=function(e){return o.domain(Oo(r,e))};o.exponent=function(e){return arguments.length?(a=Ho(n=e),i=Ho(1/n),t.domain(r.map(a)),o):n};o.copy=function(){return e(t.copy(),n,r)};return Do(o,t)}(P.scale.linear(),1,[0,1])},P.scale.sqrt=function(){return P.scale.pow().exponent(.5)},P.scale.ordinal=function(){return function e(s,l){var a,c,u;function d(e){return c[((a.get(e)||("range"===l.t?a.set(e,s.push(e)):NaN))-1)%c.length]}function f(t,n){return P.range(s.length).map(function(e){return t+n*e})}d.domain=function(e){if(!arguments.length)return s;s=[],a=new v;for(var t,n=-1,r=e.length;++n<r;)a.has(t=e[n])||a.set(t,s.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(c=e,u=0,l={t:"range",a:arguments},d):c};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],r=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+t);return c=f(n+r*t/2,r),u=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],a=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+t)|0;return c=f(n+Math.round(a*t/2+(r-n-(s.length-1+t)*a)/2),a),u=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[+r],i=e[1-r],i=(i-a)/(s.length-t+2*n);return c=f(a+i*n,i),r&&c.reverse(),u=i*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[+r],i=e[1-r],o=Math.floor((i-a)/(s.length-t+2*n));return c=f(a+Math.round((i-a-(s.length-t)*o)/2),o),r&&c.reverse(),u=Math.round(o*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return u};d.rangeExtent=function(){return Mo(l.a[0])};d.copy=function(){return e(s,l)};return d.domain(s)}([],{t:"range",a:[[]]})},P.scale.category10=function(){return P.scale.ordinal().range(Bo)},P.scale.category20=function(){return P.scale.ordinal().range(qo)},P.scale.category20b=function(){return P.scale.ordinal().range(Uo)},P.scale.category20c=function(){return P.scale.ordinal().range(Yo)};var Bo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nt),qo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nt),Uo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nt),Yo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nt);function Vo(){return 0}P.scale.quantile=function(){return function e(n,r){var a;function t(){var e=0,t=r.length;for(a=[];++e<t;)a[e-1]=P.quantile(n,e/t);return i}function i(e){if(!isNaN(e=+e))return r[P.bisect(a,e)]}i.domain=function(e){return arguments.length?(n=e.map(c).filter(u).sort(l),t()):n};i.range=function(e){return arguments.length?(r=e,t()):r};i.quantiles=function(){return a};i.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]};i.copy=function(){return e(n,r)};return t()}([],[])},P.scale.quantize=function(){return function e(t,n,r){var a,i;function o(e){return r[Math.max(0,Math.min(i,Math.floor(a*(e-t))))]}function s(){return a=r.length/(n-t),i=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};o.range=function(e){return arguments.length?(r=e,s()):r};o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/a+t,e+1/a]};o.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},P.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[P.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},P.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return Io(n,e)};t.tickFormat=function(e,t){return Ro(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},P.svg={},P.svg.arc=function(){var A=Wo,S=Zo,E=Vo,L=Go,C=$o,D=Xo,O=Jo;function t(){var e=Math.max(0,+A.apply(this,arguments)),t=Math.max(0,+S.apply(this,arguments)),n=C.apply(this,arguments)-Ae,r=D.apply(this,arguments)-Ae,a=Math.abs(r-n),i=r<n?0:1;if(t<e&&(o=t,t=e,e=o),ke<=a)return P(t,i)+(e?P(e,1-i):"")+"Z";var o,s,l,c,u,d,f,p,h,m,g,y,v,x,b,_,w,T=0,M=0,k=[];return(l=(+O.apply(this,arguments)||0)/2)&&(s=L===Go?Math.sqrt(e*e+t*t):+L.apply(this,arguments),i||(M*=-1),t&&(M=Oe(s/t*Math.sin(l))),e&&(T=Oe(s/e*Math.sin(l)))),t?(d=t*Math.cos(n+M),f=t*Math.sin(n+M),p=t*Math.cos(r-M),c=t*Math.sin(r-M),u=Math.abs(r-n-2*M)<=Te?0:1,M&&Ko(d,f,p,c)===i^u&&(_=(n+r)/2,d=t*Math.cos(_),f=t*Math.sin(_),p=c=null)):d=f=0,e?(g=e*Math.cos(r-T),y=e*Math.sin(r-T),v=e*Math.cos(n+T),h=e*Math.sin(n+T),m=Math.abs(n-r+2*T)<=Te?0:1,T&&Ko(g,y,v,h)===1-i^m&&(x=(n+r)/2,g=e*Math.cos(x),y=e*Math.sin(x),v=h=null)):g=y=0,_e<a&&.001<(o=Math.min(Math.abs(t-e)/2,+E.apply(this,arguments)))?(M=e<t^i?0:1,T=_=o,a<Te&&(r=d-(n=null==v?[g,y]:null==p?[d,f]:Ma([d,f],[v,h],[p,c],[g,y]))[0],x=f-n[1],a=p-n[0],b=c-n[1],b=1/Math.sin(Math.acos((r*a+x*b)/(Math.sqrt(r*r+x*x)*Math.sqrt(a*a+b*b)))/2),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),T=Math.min(o,(e-n)/(b-1)),_=Math.min(o,(t-n)/(1+b))),null!=p?(b=Qo(null==v?[g,y]:[v,h],[d,f],t,_,i),w=Qo([p,c],[g,y],t,_,i),o===_?k.push("M",b[0],"A",_,",",_," 0 0,",M," ",b[1],"A",t,",",t," 0 ",1-i^Ko(b[1][0],b[1][1],w[1][0],w[1][1]),",",i," ",w[1],"A",_,",",_," 0 0,",M," ",w[0]):k.push("M",b[0],"A",_,",",_," 0 1,",M," ",w[0])):k.push("M",d,",",f),null!=v?(_=Qo([d,f],[v,h],e,-T,i),w=Qo([g,y],null==p?[d,f]:[p,c],e,-T,i),o===T?k.push("L",w[0],"A",T,",",T," 0 0,",M," ",w[1],"A",e,",",e," 0 ",i^Ko(w[1][0],w[1][1],_[1][0],_[1][1]),",",1-i," ",_[1],"A",T,",",T," 0 0,",M," ",_[0]):k.push("L",w[0],"A",T,",",T," 0 0,",M," ",_[0])):k.push("L",g,",",y)):(k.push("M",d,",",f),null!=p&&k.push("A",t,",",t," 0 ",u,",",i," ",p,",",c),k.push("L",g,",",y),null!=v&&k.push("A",e,",",e," 0 ",m,",",1-i," ",v,",",h)),k.push("Z"),k.join("")}function P(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(A=ut(e),t):A},t.outerRadius=function(e){return arguments.length?(S=ut(e),t):S},t.cornerRadius=function(e){return arguments.length?(E=ut(e),t):E},t.padRadius=function(e){return arguments.length?(L=e==Go?Go:ut(e),t):L},t.startAngle=function(e){return arguments.length?(C=ut(e),t):C},t.endAngle=function(e){return arguments.length?(D=ut(e),t):D},t.padAngle=function(e){return arguments.length?(O=ut(e),t):O},t.centroid=function(){var e=(+A.apply(this,arguments)+ +S.apply(this,arguments))/2,t=(+C.apply(this,arguments)+ +D.apply(this,arguments))/2-Ae;return[Math.cos(t)*e,Math.sin(t)*e]},t};var Go="auto";function Wo(e){return e.innerRadius}function Zo(e){return e.outerRadius}function $o(e){return e.startAngle}function Xo(e){return e.endAngle}function Jo(e){return e&&e.padAngle}function Ko(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Qo(e,t,n,r,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?r:-r)/Math.sqrt(i*i+o*o),l=s*o,c=-s*i,u=e[0]+l,d=e[1]+c,f=t[0]+l,p=t[1]+c,a=(u+f)/2,o=(d+p)/2,s=f-u,i=p-d,e=s*s+i*i,t=n-r,r=u*p-f*d,u=(i<0?-1:1)*Math.sqrt(Math.max(0,t*t*e-r*r)),p=(r*i-s*u)/e,f=(-r*s-i*u)/e,d=(r*i+s*u)/e,i=(-r*s+i*u)/e,u=p-a,e=f-o,a=d-a,o=i-o;return a*a+o*o<u*u+e*e&&(p=d,f=i),[[p-l,f-c],[p*n/t,f*n/t]]}function es(c){var u=va,d=xa,f=cr,p=ns,t=p.key,h=.7;function n(e){var t,n=[],r=[],a=-1,i=e.length,o=ut(u),s=ut(d);function l(){n.push("M",p(c(r),h))}for(;++a<i;)f.call(this,t=e[a],a)?r.push([+o.call(this,t,a),+s.call(this,t,a)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(u=e,n):u},n.y=function(e){return arguments.length?(d=e,n):d},n.defined=function(e){return arguments.length?(f=e,n):f},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?p=e:(p=ts.get(e)||ns).key,n):t},n.tension=function(e){return arguments.length?(h=e,n):h},n}P.svg.line=function(){return es(C)};var ts=P.map({linear:ns,"linear-closed":rs,step:function(e){var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];for(;++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&a.push("H",r[0]);return a.join("")},"step-before":as,"step-after":is,basis:ls,"basis-open":function(e){if(e.length<4)return ns(e);var t,n=[],r=-1,a=e.length,i=[0],o=[0];for(;++r<3;)t=e[r],i.push(t[0]),o.push(t[1]);n.push(cs(fs,i)+","+cs(fs,o)),--r;for(;++r<a;)t=e[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),ps(n,i,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,a=e.length,i=a+4,o=[],s=[];for(;++r<4;)n=e[r%a],o.push(n[0]),s.push(n[1]);t=[cs(fs,o),",",cs(fs,s)],--r;for(;++r<i;)n=e[r%a],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),ps(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,i=e[0][0],o=e[0][1],s=e[n][0]-i,l=e[n][1]-o,c=-1;++c<=n;)r=e[c],a=c/n,r[0]=t*r[0]+(1-t)*(i+a*s),r[1]=t*r[1]+(1-t)*(o+a*l);return ls(e)},cardinal:function(e,t){return e.length<3?ns(e):e[0]+os(e,ss(e,t))},"cardinal-open":function(e,t){return e.length<4?ns(e):e[1]+os(e.slice(1,-1),ss(e,t))},"cardinal-closed":function(e,t){return e.length<3?rs(e):e[0]+os((e.push(e[0]),e),ss([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?ns(e):e[0]+os(e,function(e){var t,n,r,a,i=[],o=function(e){var t=0,n=e.length-1,r=[],a=e[0],i=e[1],o=r[0]=hs(a,i);for(;++t<n;)r[t]=(o+(o=hs(a=i,i=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=hs(e[s],e[s+1]),D(t)<_e?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,9<(a=n*n+r*r)&&(a=3*t/Math.sqrt(a),o[s]=a*n,o[s+1]=a*r));s=-1;for(;++s<=l;)a=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([a||0,o[s]*a||0]);return i}(e))}});function ns(e){return 1<e.length?e.join("L"):e+"Z"}function rs(e){return e.join("L")+"Z"}function as(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function is(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function os(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ns(e);var n=e.length!=t.length,r="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=e[1],l=2),1<t.length){s=t[1],i=e[l],l++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++)i=e[l],s=t[c],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}return n&&(n=e[l],r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+n[0]+","+n[1]),r}function ss(e,t){for(var n,r=[],a=(1-t)/2,i=e[0],o=e[1],s=1,l=e.length;++s<l;)n=i,i=o,o=e[s],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function ls(e){if(e.length<3)return ns(e);var t=1,n=e.length,r=e[0],a=r[0],i=r[1],o=[a,a,a,(r=e[1])[0]],s=[i,i,i,r[1]],l=[a,",",i,"L",cs(fs,o),",",cs(fs,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),ps(l,o,s);return e.pop(),l.push("L",r),l.join("")}function cs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ts.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var us=[0,2/3,1/3,0],ds=[0,1/3,2/3,0],fs=[0,1/6,2/3,1/6];function ps(e,t,n){e.push("C",cs(us,t),",",cs(us,n),",",cs(ds,t),",",cs(ds,n),",",cs(fs,t),",",cs(fs,n))}function hs(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ms(e){for(var t,n,r,a=-1,i=e.length;++a<i;)n=(t=e[a])[0],r=t[1]-Ae,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function gs(h){var m=va,g=va,y=0,v=xa,x=cr,b=ns,t=b.key,_=b,w="L",T=.7;function n(e){var t,n,r,a=[],i=[],o=[],s=-1,l=e.length,c=ut(m),u=ut(y),d=m===g?function(){return n}:ut(g),f=y===v?function(){return r}:ut(v);function p(){a.push("M",b(h(o),T),w,_(h(i.reverse()),T),"Z")}for(;++s<l;)x.call(this,t=e[s],s)?(i.push([n=+c.call(this,t,s),r=+u.call(this,t,s)]),o.push([+d.call(this,t,s),+f.call(this,t,s)])):i.length&&(p(),i=[],o=[]);return i.length&&p(),a.length?a.join(""):null}return n.x=function(e){return arguments.length?(m=g=e,n):g},n.x0=function(e){return arguments.length?(m=e,n):m},n.x1=function(e){return arguments.length?(g=e,n):g},n.y=function(e){return arguments.length?(y=v=e,n):v},n.y0=function(e){return arguments.length?(y=e,n):y},n.y1=function(e){return arguments.length?(v=e,n):v},n.defined=function(e){return arguments.length?(x=e,n):x},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?b=e:(b=ts.get(e)||ns).key,_=b.reverse||b,w=b.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(T=e,n):T},n}function ys(e){return e.radius}function vs(e){return[e.x,e.y]}function xs(){return 64}function bs(){return"circle"}function _s(e){e=Math.sqrt(e/Te);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}P.svg.line.radial=function(){var e=es(ms);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(as.reverse=is).reverse=as,P.svg.area=function(){return gs(C)},P.svg.area.radial=function(){var e=gs(ms);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},P.svg.chord=function(){var a=aa,i=ia,o=ys,s=$o,l=Xo;function t(e,t){var n=c(this,a,e,t),r=c(this,i,e,t);return"M"+n.p0+u(n.r,n.p1,n.a1-n.a0)+(e=r,(t=n).a0==e.a0&&t.a1==e.a1?d(n.r,n.p1,n.r,n.p0):d(n.r,n.p1,r.r,r.p0)+u(r.r,r.p1,r.a1-r.a0)+d(r.r,r.p1,n.r,n.p0))+"Z"}function c(e,t,n,r){var a=t.call(e,n,r),t=o.call(e,a,r),n=s.call(e,a,r)-Ae,r=l.call(e,a,r)-Ae;return{r:t,a0:n,a1:r,p0:[t*Math.cos(n),t*Math.sin(n)],p1:[t*Math.cos(r),t*Math.sin(r)]}}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(Te<n)+",1 "+t}function d(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(o=ut(e),t):o},t.source=function(e){return arguments.length?(a=ut(e),t):a},t.target=function(e){return arguments.length?(i=ut(e),t):i},t.startAngle=function(e){return arguments.length?(s=ut(e),t):s},t.endAngle=function(e){return arguments.length?(l=ut(e),t):l},t},P.svg.diagonal=function(){var r=aa,a=ia,i=vs;function t(e,t){var n=r.call(this,e,t),e=a.call(this,e,t),t=(n.y+e.y)/2,e=[n,{x:n.x,y:t},{x:e.x,y:t},e];return"M"+(e=e.map(i))[0]+"C"+e[1]+" "+e[2]+" "+e[3]}return t.source=function(e){return arguments.length?(r=ut(e),t):r},t.target=function(e){return arguments.length?(a=ut(e),t):a},t.projection=function(e){return arguments.length?(i=e,t):i},t},P.svg.diagonal.radial=function(){var e=P.svg.diagonal(),t=vs,r=e.projection;return e.projection=function(e){return arguments.length?r((n=t=e,function(){var e=n.apply(this,arguments),t=e[0],e=e[1]-Ae;return[t*Math.cos(e),t*Math.sin(e)]})):t;var n},e},P.svg.symbol=function(){var n=bs,r=xs;function t(e,t){return(ws.get(n.call(this,e,t))||_s)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=ut(e),t):n},t.size=function(e){return arguments.length?(r=ut(e),t):r},t};var ws=P.map({circle:_s,cross:function(e){e=Math.sqrt(e/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ms)),e=t*Ms;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(e){e=Math.sqrt(e)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});P.svg.symbolTypes=ws.keys();var Ts=Math.sqrt(3),Ms=Math.tan(30*Se);V.transition=function(e){for(var t,n,r=Es||++Ds,a=Is(e),i=[],o=Ls||{time:Date.now(),ease:_i,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Rs(n,u,a,r,o),t.push(n)}return Ss(i,a,r)},V.interrupt=function(e){return this.each(null==e?ks:As(Is(e)))};var ks=As(Is());function As(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ss(e,t,n){return H(e,Cs),e.namespace=t,e.id=n,e}var Es,Ls,Cs=[],Ds=0;function Os(e,r,a,i){var o=e.id,s=e.namespace;return le(e,"function"==typeof a?function(e,t,n){e[s][o].tween.set(r,i(a.call(e,e.__data__,t,n)))}:(a=i(a),function(e){e[s][o].tween.set(r,a)}))}function Ps(e){return null==e&&(e=""),function(){this.textContent=e}}function Is(e){return null==e?"__transition__":"__transition_"+e+"__"}function Rs(i,o,r,s,e){var l,c,u,d,f,p=i[r]||(i[r]={active:0,count:0}),h=p[s];function n(e){var t,n,r=p.active,a=p[r];for(t in a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[r],a.event&&a.event.interrupt.call(i,i.__data__,a.index)),p)+t<s&&((n=p[t]).timer.c=null,n.timer.t=NaN,--p.count,delete p[t]);c.c=m,vt(function(){return c.c&&m(e||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=s,h.event&&h.event.start.call(i,i.__data__,o),f=[],h.tween.forEach(function(e,t){(t=t.call(i,i.__data__,o))&&f.push(t)}),d=h.ease,u=h.duration}function m(e){for(var e=e/u,t=d(e),n=f.length;0<n;)f[--n].call(i,t);if(1<=e)return h.event&&h.event.end.call(i,i.__data__,o),--p.count?delete p[s]:delete i[r],1}h||(l=e.time,c=vt(function(e){var t=h.delay;if(c.t=t+l,t<=e)return n(e-t);c.c=n},0,l),h=p[s]={tween:new v,time:l,timer:c,delay:e.delay,duration:e.duration,ease:e.ease,index:o},e=null,++p.count)}Cs.call=V.call,Cs.empty=V.empty,Cs.node=V.node,Cs.size=V.size,P.transition=function(e,t){return e&&e.transition?Es?e.transition(t):e:P.selection().transition(e)},(P.transition.prototype=Cs).select=function(e){var t,n,r,a=this.id,i=this.namespace,o=[];e=G(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),Rs(n,u,i,a,r[i][a]),t.push(n)):t.push(null)}return Ss(o,i,a)},Cs.selectAll=function(e){var t,n,r,a,i,o=this.id,s=this.namespace,l=[];e=W(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],f=-1,p=d.length;++f<p;)if(r=d[f]){i=r[s][o],n=e.call(r,r.__data__,f,c),l.push(t=[]);for(var h=-1,m=n.length;++h<m;)(a=n[h])&&Rs(a,h,s,o,i),t.push(a)}return Ss(l,s,o)},Cs.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=se(e));for(var a=0,i=this.length;a<i;a++){r.push(t=[]);for(var o,s=0,l=(o=this[a]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return Ss(r,this.namespace,this.id)},Cs.tween=function(t,n){var r=this.id,a=this.namespace;return arguments.length<2?this.node()[a][r].tween.get(t):le(this,null==n?function(e){e[a][r].tween.remove(t)}:function(e){e[a][r].tween.set(t,n)})},Cs.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?Oi:fi,a=P.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return Os(this,"attr."+e,t,a.local?function(n){return null==n?o:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(n){return null==n?i:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=r(e,n),function(e){this.setAttribute(a,t(e))})})})},Cs.attrTween=function(e,r){var a=P.ns.qualify(e);return this.tween("attr."+e,a.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(a.space,a.local));return n&&function(e){this.setAttributeNS(a.space,a.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(a));return n&&function(e){this.setAttribute(a,n(e))}})},Cs.style=function(r,e,a){var t=arguments.length;if(t<3){if("string"!=typeof r){for(a in t<2&&(e=""),r)this.style(a,r[a],e);return this}a=""}function i(){this.style.removeProperty(r)}return Os(this,"style."+r,e,function(n){return null==n?i:(n+="",function(){var t,e=R(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=fi(e,n),function(e){this.style.setProperty(r,t(e),a)})})})},Cs.styleTween=function(r,a,i){return arguments.length<3&&(i=""),this.tween("style."+r,function(e,t){var n=a.call(this,e,t,R(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),i)}})},Cs.text=function(e){return Os(this,"text",e,Ps)},Cs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Cs.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=P.ease.apply(P,arguments)),le(this,function(e){e[r][n].ease=t}))},Cs.delay=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].delay:le(this,"function"==typeof r?function(e,t,n){e[i][a].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[i][a].delay=r}))},Cs.duration=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].duration:le(this,"function"==typeof r?function(e,t,n){e[i][a].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[i][a].duration=r}))},Cs.each=function(r,t){var a=this.id,i=this.namespace;if(arguments.length<2){var e=Ls,n=Es;try{Es=a,le(this,function(e,t,n){Ls=e[i][a],r.call(e,e.__data__,t,n)})}finally{Ls=e,Es=n}}else le(this,function(e){e=e[i][a];(e.event||(e.event=P.dispatch("start","end","interrupt"))).on(r,t)});return this},Cs.transition=function(){for(var e,t,n,r=this.id,a=++Ds,i=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&Rs(t,u,i,a,{time:(n=t[i][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ss(o,i,a)},P.svg.axis=function(){var _,w=P.scale.linear(),T=Ns,M=6,k=6,A=3,S=[10],E=null;function n(e){e.each(function(){var e,t=P.select(this),n=this.__chart__||w,r=this.__chart__=w.copy(),a=null==E?r.ticks?r.ticks.apply(r,S):r.domain():E,i=null==_?r.tickFormat?r.tickFormat.apply(r,S):C:_,o=t.selectAll(".tick").data(a,r),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",_e),l=P.transition(o.exit()).style("opacity",_e).remove(),c=P.transition(o.order()).style("opacity",1),u=Math.max(M,0)+A,d=ko(r),f=t.selectAll(".domain").data([0]),p=(f.enter().append("path").attr("class","domain"),P.transition(f));s.append("line"),s.append("text");var h,m,g,y,v,x,b=s.select("line"),a=c.select("line"),t=o.select("text").text(i),f=s.select("text"),o=c.select("text"),i="top"===T||"left"===T?-1:1;"bottom"===T||"top"===T?(e=Fs,h="x",g="y",m="x2",y="y2",t.attr("dy",i<0?"0em":".71em").style("text-anchor","middle"),p.attr("d","M"+d[0]+","+i*k+"V0H"+d[1]+"V"+i*k)):(e=js,h="y",g="x",m="y2",y="x2",t.attr("dy",".32em").style("text-anchor",i<0?"end":"start"),p.attr("d","M"+i*k+","+d[0]+"H0V"+d[1]+"H"+i*k)),b.attr(y,i*M),f.attr(g,i*u),a.attr(m,0).attr(y,i*M),o.attr(h,0).attr(g,i*u),r.rangeBand?(x=(v=r).rangeBand()/2,n=r=function(e){return v(e)+x}):n.rangeBand?n=r:l.call(e,r,n),s.call(e,n,r),c.call(e,r,r)})}return n.scale=function(e){return arguments.length?(w=e,n):w},n.orient=function(e){return arguments.length?(T=e in zs?e+"":Ns,n):T},n.ticks=function(){return arguments.length?(S=f(arguments),n):S},n.tickValues=function(e){return arguments.length?(E=e,n):E},n.tickFormat=function(e){return arguments.length?(_=e,n):_},n.tickSize=function(e){var t=arguments.length;return t?(M=+e,k=+arguments[t-1],n):M},n.innerTickSize=function(e){return arguments.length?(M=+e,n):M},n.outerTickSize=function(e){return arguments.length?(k=+e,n):k},n.tickPadding=function(e){return arguments.length?(A=+e,n):A},n.tickSubdivide=function(){return arguments.length&&n},n};var Ns="bottom",zs={top:1,right:1,bottom:1,left:1};function Fs(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function js(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}P.svg.brush=function(){var y,v,x=F(A,"brushstart","brush","brushend"),b=null,_=null,w=[0,0],T=[0,0],M=!0,k=!0,a=Bs[0];function A(e){e.each(function(){var e=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(a,C);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",A.empty()?"none":null);var r,e=P.transition(e),t=P.transition(t);b&&(r=ko(b),t.attr("x",r[0]).attr("width",r[1]-r[0]),E(e)),_&&(r=ko(_),t.attr("y",r[0]).attr("height",r[1]-r[0]),L(e)),S(e)})}function S(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+w[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function E(e){e.select(".extent").attr("x",w[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function L(e){e.select(".extent").attr("y",T[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function i(){var l,e,n,r=this,t=P.select(P.event.target),a=x.of(r,arguments),i=P.select(r),o=t.datum(),s=!/^(n|s)$/.test(o)&&b,c=!/^(e|w)$/.test(o)&&_,u=t.classed("extent"),d=ye(r),f=P.mouse(r),p=P.select(R(r)).on("keydown.brush",function(){32==P.event.keyCode&&(u||(l=null,f[0]-=w[1],f[1]-=T[1],u=2),N())}).on("keyup.brush",function(){32==P.event.keyCode&&2==u&&(f[0]+=w[1],f[1]+=T[1],u=0,N())});function h(){var e=P.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),u||(P.event.altKey?(l=l||[(w[0]+w[1])/2,(T[0]+T[1])/2],f[0]=w[+(e[0]<l[0])],f[1]=T[+(e[1]<l[1])]):l=null),s&&m(e,b,0)&&(E(i),t=!0),c&&m(e,_,1)&&(L(i),t=!0),t&&(S(i),a({type:"brush",mode:u?"move":"resize"}))}function m(e,t,n){var r,a=ko(t),i=a[0],o=a[1],s=f[n],t=n?T:w,a=t[1]-t[0];return u&&(i-=s,o-=a+s),e=(n?k:M)?Math.max(i,Math.min(o,e[n])):e[n],u?r=(e+=s)+a:(s=l?Math.max(i,Math.min(o,2*l[n]-e)):s)<e?(r=e,e=s):r=s,(t[0]!=e||t[1]!=r)&&(n?v=null:y=null,t[0]=e,t[1]=r,1)}function g(){h(),i.style("pointer-events","all").selectAll(".resize").style("display",A.empty()?"none":null),P.select("body").style("cursor",null),p.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),d(),a({type:"brushend"})}P.event.changedTouches?p.on("touchmove.brush",h).on("touchend.brush",g):p.on("mousemove.brush",h).on("mouseup.brush",g),i.interrupt().selectAll("*").interrupt(),u?(f[0]=w[0]-f[0],f[1]=T[0]-f[1]):o?(e=+/w$/.test(o),o=+/^n/.test(o),n=[w[1-e]-f[0],T[1-o]-f[1]],f[0]=w[e],f[1]=T[o]):P.event.altKey&&(l=f.slice()),i.style("pointer-events","none").selectAll(".resize").style("display",null),P.select("body").style("cursor",t.style("cursor")),a({type:"brushstart"}),h()}return A.event=function(e){e.each(function(){var r=x.of(this,arguments),a={x:w,y:T,i:y,j:v},e=this.__chart__||a;this.__chart__=a,Es?P.select(this).transition().each("start.brush",function(){y=e.i,v=e.j,w=e.x,T=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=pi(w,a.x),n=pi(T,a.y);return y=v=null,function(e){w=a.x=t(e),T=a.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=a.i,v=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},A.x=function(e){return arguments.length?(a=Bs[!(b=e)<<1|!_],A):b},A.y=function(e){return arguments.length?(a=Bs[!b<<1|!(_=e)],A):_},A.clamp=function(e){return arguments.length?(b&&_?(M=!!e[0],k=!!e[1]):b?M=!!e:_&&(k=!!e),A):b&&_?[M,k]:b?M:_?k:null},A.extent=function(e){var t,n,r,a,i;return arguments.length?(b&&(t=e[0],n=e[1],_&&(t=t[0],n=n[0]),y=[t,n],b.invert&&(t=b(t),n=b(n)),n<t&&(i=t,t=n,n=i),t==w[0]&&n==w[1]||(w=[t,n])),_&&(r=e[0],a=e[1],b&&(r=r[1],a=a[1]),v=[r,a],_.invert&&(r=_(r),a=_(a)),a<r&&(i=r,r=a,a=i),r==T[0]&&a==T[1]||(T=[r,a])),A):(b&&(y?(t=y[0],n=y[1]):(t=w[0],n=w[1],b.invert&&(t=b.invert(t),n=b.invert(n)),n<t&&(i=t,t=n,n=i))),_&&(v?(r=v[0],a=v[1]):(r=T[0],a=T[1],_.invert&&(r=_.invert(r),a=_.invert(a)),a<r&&(i=r,r=a,a=i))),b&&_?[[t,r],[n,a]]:b?[t,n]:_&&[r,a])},A.clear=function(){return A.empty()||(w=[0,0],T=[0,0],y=v=null),A},A.empty=function(){return!!b&&w[0]==w[1]||!!_&&T[0]==T[1]},P.rebind(A,x,"on")};var Hs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d=St.format=i.timeFormat,t=d.utc,i=t("%Y-%m-%dT%H:%M:%S.%LZ");function qs(e){return e.toISOString()}function Us(t,a,e){function i(e){return t(e)}function o(e,t){var n=(e[1]-e[0])/t,r=P.bisect(Vs,n);return r==Vs.length?[a.year,Po(e.map(function(e){return e/31536e6}),t)[2]]:r?a[n/Vs[r-1]<Vs[r]/n?r-1:r]:[Zs,Po(e,t)[2]]}return i.invert=function(e){return Ys(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Ys)},i.nice=function(t,n){var e=i.domain(),r=Mo(e),r=null==t?o(r,10):"number"==typeof t&&o(r,t);function a(e){return!isNaN(e)&&!t.range(e,Ys(+e+1),n).length}return r&&(t=r[0],n=r[1]),i.domain(So(e,1<n?{floor:function(e){for(;a(e=t.floor(e));)e=Ys(e-1);return e},ceil:function(e){for(;a(e=t.ceil(e));)e=Ys(+e+1);return e}}:t))},i.ticks=function(e,t){var n=Mo(i.domain()),r=null==e?o(n,10):"number"==typeof e?o(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],Ys(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return e},i.copy=function(){return Us(t.copy(),a,e)},Do(i,t)}function Ys(e){return new Date(e)}d.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qs:i,qs.parse=function(e){e=new Date(e);return isNaN(e)?null:e},qs.toString=i.toString,St.second=Dt(function(e){return new Et(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),St.seconds=St.second.range,St.seconds.utc=St.second.utc.range,St.minute=Dt(function(e){return new Et(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),St.minutes=St.minute.range,St.minutes.utc=St.minute.utc.range,St.hour=Dt(function(e){var t=e.getTimezoneOffset()/60;return new Et(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),St.hours=St.hour.range,St.hours.utc=St.hour.utc.range,St.month=Dt(function(e){return(e=St.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),St.months=St.month.range,St.months.utc=St.month.utc.range;var Vs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gs=[[St.second,1],[St.second,5],[St.second,15],[St.second,30],[St.minute,1],[St.minute,5],[St.minute,15],[St.minute,30],[St.hour,1],[St.hour,3],[St.hour,6],[St.hour,12],[St.day,1],[St.day,2],[St.week,1],[St.month,1],[St.month,3],[St.year,1]],Ws=d.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",cr]]),Zs={range:function(e,t,n){return P.range(Math.ceil(e/n)*n,+t,n).map(Ys)},floor:C,ceil:C};Gs.year=St.year,St.scale=function(){return Us(P.scale.linear(),Gs,Ws)};var $s=Gs.map(function(e){return[e[0].utc,e[1]]}),Xs=t.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",cr]]);function Js(e){return JSON.parse(e.responseText)}function Ks(e){var t=I.createRange();return t.selectNode(I.body),t.createContextualFragment(e.responseText)}$s.year=St.year.utc,St.scale.utc=function(){return Us(P.scale.linear(),$s,Xs)},P.text=dt(function(e){return e.responseText}),P.json=function(e,t){return ft(e,"application/json",Js,t)},P.html=function(e,t){return ft(e,"text/html",Ks,t)},P.xml=dt(function(e){return e.responseXML}),"object"==typeof Qs&&Qs.exports?Qs.exports=P:this.d3=P}.apply(self)},{}],12:[function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,l=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var a=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(a,i){return new Promise(function(e,t){function n(){void 0!==r&&a.removeListener("error",r),e([].slice.call(arguments))}var r;"error"!==i&&(r=function(e){a.removeListener(i,n),t(e)},a.once("error",r)),a.once(i,n)})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var a,i;return c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener||n),a=e._events),i=a[t]),void 0===i?(i=a[t]=n,++e._eventsCount):("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),0<(n=u(e))&&i.length>n&&!i.warned&&(i.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=i.length,n=n,console&&console.warn&&console.warn(n))),e}function f(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function p(e,t,n){e=e._events;if(void 0===e)return[];t=e[t];return void 0===t?[]:"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):m(t,t.length)}function h(e){var t=this._events;if(void 0!==t){e=t[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r,a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){if((r=0<t.length?t[0]:r)instanceof Error)throw r;a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}e=i[e];if(void 0===e)return!1;if("function"==typeof e)l(e,this,t);else for(var o=e.length,s=m(e,o),n=0;n<o;++n)l(s[n],this,t);return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,i,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,a=Object.keys(n),i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},{}],13:[function(e,t,n){var r,a;r=this,a=function(t,k){"use strict";function A(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function S(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function E(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,a=e.date,i=e.time,t=e.periods,n=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=C(t),u=D(t),d=C(n),f=D(n),p=C(o),h=D(o),m=C(s),g=D(s),y=C(l),v=D(l),x={a:function(e){return o[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:K,e:K,f:re,H:Q,I:ee,j:te,L:ne,m:ae,M:ie,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Pe,s:Ie,S:oe,u:se,U:le,V:ce,w:ue,W:de,x:null,X:null,y:fe,Y:pe,Z:he,"%":Oe},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:me,e:me,f:be,H:ge,I:ye,j:ve,L:xe,m:_e,M:we,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Pe,s:Ie,S:Te,u:Me,U:ke,V:Ae,w:Se,W:Ee,x:null,X:null,y:Le,Y:Ce,Z:De,"%":Oe},_={a:function(e,t,n){t=p.exec(t.slice(n));return t?(e.w=h[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=d.exec(t.slice(n));return t?(e.w=f[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=y.exec(t.slice(n));return t?(e.m=v[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=m.exec(t.slice(n));return t?(e.m=g[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return M(e,r,t,n)},d:q,e:q,f:Z,H:Y,I:Y,j:U,L:W,m:B,M:V,p:function(e,t,n){t=c.exec(t.slice(n));return t?(e.p=u[t[0].toLowerCase()],n+t[0].length):-1},q:H,Q:X,s:J,S:G,u:P,U:I,V:R,w:O,W:N,x:function(e,t,n){return M(e,a,t,n)},X:function(e,t,n){return M(e,i,t,n)},y:F,Y:z,Z:j,"%":$};function w(l,c){return function(e){var t,n,r,a=[],i=-1,o=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++i<s;)37===l.charCodeAt(i)&&(a.push(l.slice(o,i)),null!=(n=L[t=l.charAt(++i)])?t=l.charAt(++i):n="e"===t?" ":"0",(r=c[t])&&(t=r(e,n)),a.push(t),o=i+1);return a.push(l.slice(o,i)),a.join("")}}function T(a,i){return function(e){var t,n,r=E(1900,void 0,1);if(M(r,a,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!i||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=S(E(r.y,0,1))).getUTCDay())||0===n?k.utcMonday.ceil(t):k.utcMonday(t),t=k.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=A(E(r.y,0,1))).getDay())||0===n?k.timeMonday.ceil(t):k.timeMonday(t),t=k.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?S(E(r.y,0,1)).getUTCDay():A(E(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,S(r)):A(r)}}function M(e,t,n,r){for(var a,i,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=_[a in L?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return x.x=w(a,x),x.X=w(i,x),x.c=w(r,x),b.x=w(a,b),b.X=w(i,b),b.c=w(r,b),{format:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=T(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=T(e+="",!0);return t.toString=function(){return e},t}}}var r,L={"-":"",_:" ",0:"0"},a=/^\s*\d+/,i=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",e=a.length;return r+(e<n?new Array(n-e+1).join(t)+a:a)}function l(e){return e.replace(o,"\\$&")}function C(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function D(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function O(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function P(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function I(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function R(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function N(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function z(e,t,n){t=a.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function F(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function j(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function H(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function B(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function q(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function U(e,t,n){t=a.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function Y(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function V(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function G(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function W(e,t,n){t=a.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function Z(e,t,n){t=a.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function $(e,t,n){t=i.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function X(e,t,n){t=a.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function J(e,t,n){t=a.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function K(e,t){return s(e.getDate(),t,2)}function Q(e,t){return s(e.getHours(),t,2)}function ee(e,t){return s(e.getHours()%12||12,t,2)}function te(e,t){return s(1+k.timeDay.count(k.timeYear(e),e),t,3)}function ne(e,t){return s(e.getMilliseconds(),t,3)}function re(e,t){return ne(e,t)+"000"}function ae(e,t){return s(e.getMonth()+1,t,2)}function ie(e,t){return s(e.getMinutes(),t,2)}function oe(e,t){return s(e.getSeconds(),t,2)}function se(e){e=e.getDay();return 0===e?7:e}function le(e,t){return s(k.timeSunday.count(k.timeYear(e)-1,e),t,2)}function ce(e,t){var n=e.getDay();return e=4<=n||0===n?k.timeThursday(e):k.timeThursday.ceil(e),s(k.timeThursday.count(k.timeYear(e),e)+(4===k.timeYear(e).getDay()),t,2)}function ue(e){return e.getDay()}function de(e,t){return s(k.timeMonday.count(k.timeYear(e)-1,e),t,2)}function fe(e,t){return s(e.getFullYear()%100,t,2)}function pe(e,t){return s(e.getFullYear()%1e4,t,4)}function he(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function me(e,t){return s(e.getUTCDate(),t,2)}function ge(e,t){return s(e.getUTCHours(),t,2)}function ye(e,t){return s(e.getUTCHours()%12||12,t,2)}function ve(e,t){return s(1+k.utcDay.count(k.utcYear(e),e),t,3)}function xe(e,t){return s(e.getUTCMilliseconds(),t,3)}function be(e,t){return xe(e,t)+"000"}function _e(e,t){return s(e.getUTCMonth()+1,t,2)}function we(e,t){return s(e.getUTCMinutes(),t,2)}function Te(e,t){return s(e.getUTCSeconds(),t,2)}function Me(e){e=e.getUTCDay();return 0===e?7:e}function ke(e,t){return s(k.utcSunday.count(k.utcYear(e)-1,e),t,2)}function Ae(e,t){var n=e.getUTCDay();return e=4<=n||0===n?k.utcThursday(e):k.utcThursday.ceil(e),s(k.utcThursday.count(k.utcYear(e),e)+(4===k.utcYear(e).getUTCDay()),t,2)}function Se(e){return e.getUTCDay()}function Ee(e,t){return s(k.utcMonday.count(k.utcYear(e)-1,e),t,2)}function Le(e,t){return s(e.getUTCFullYear()%100,t,2)}function Ce(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function De(){return"+0000"}function Oe(){return"%"}function Pe(e){return+e}function Ie(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var c="%Y-%m-%dT%H:%M:%S.%LZ";var u=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(c);c=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:t.utcParse(c);t.isoFormat=u,t.isoParse=c,t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n,e("d3-time")):a((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":14}],14:[function(e,t,n){var r,a;r=this,a=function(e){"use strict";var a=new Date,l=new Date;function c(i,o,n,r){function s(e){return i(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return i(e=new Date(+e)),e},s.ceil=function(e){return i(e=new Date(e-1)),o(e,1),i(e),e},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,n){var r,a=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return a;for(;a.push(r=new Date(+e)),o(e,n),i(e),r<e&&e<t;);return a},s.filter=function(n){return c(function(e){if(e<=e)for(;i(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},n&&(s.count=function(e,t){return a.setTime(+e),l.setTime(+t),i(a),i(l),Math.floor(n(a,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var t=c(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?c(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null};var n=t.range,r=c(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),i=r.range,o=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),s=o.range,u=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),d=u.range,f=c(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),p=f.range;function h(t){return c(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var m=h(0),g=h(1),y=h(2),v=h(3),x=h(4),b=h(5),_=h(6),w=m.range,T=g.range,M=y.range,k=v.range,A=x.range,S=b.range,E=_.range,L=c(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),C=L.range,D=c(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});D.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var O=D.range,P=c(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),I=P.range,R=c(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),N=R.range,z=c(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),F=z.range;function j(t){return c(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var H=j(0),B=j(1),q=j(2),U=j(3),Y=j(4),V=j(5),G=j(6),W=H.range,Z=B.range,$=q.range,X=U.range,J=Y.range,K=V.range,Q=G.range,ee=c(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),te=ee.range,ne=c(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ne.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var re=ne.range;e.timeDay=f,e.timeDays=p,e.timeFriday=b,e.timeFridays=S,e.timeHour=u,e.timeHours=d,e.timeInterval=c,e.timeMillisecond=t,e.timeMilliseconds=n,e.timeMinute=o,e.timeMinutes=s,e.timeMonday=g,e.timeMondays=T,e.timeMonth=L,e.timeMonths=C,e.timeSaturday=_,e.timeSaturdays=E,e.timeSecond=r,e.timeSeconds=i,e.timeSunday=m,e.timeSundays=w,e.timeThursday=x,e.timeThursdays=A,e.timeTuesday=y,e.timeTuesdays=M,e.timeWednesday=v,e.timeWednesdays=k,e.timeWeek=m,e.timeWeeks=w,e.timeYear=D,e.timeYears=O,e.utcDay=z,e.utcDays=F,e.utcFriday=V,e.utcFridays=K,e.utcHour=R,e.utcHours=N,e.utcMillisecond=t,e.utcMilliseconds=n,e.utcMinute=P,e.utcMinutes=I,e.utcMonday=B,e.utcMondays=Z,e.utcMonth=ee,e.utcMonths=te,e.utcSaturday=G,e.utcSaturdays=Q,e.utcSecond=r,e.utcSeconds=i,e.utcSunday=H,e.utcSundays=W,e.utcThursday=Y,e.utcThursdays=J,e.utcTuesday=q,e.utcTuesdays=$,e.utcWednesday=U,e.utcWednesdays=X,e.utcWeek=H,e.utcWeeks=W,e.utcYear=ne,e.utcYears=re,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n):a((r=r||self).d3=r.d3||{})},{}],15:[function(e,t,n){"use strict";var r=e("is-string-blank");t.exports=function(e){var t=typeof e;if("string"==t){var n=e;if(0===(e=+e)&&r(n))return!1}else if("number"!=t)return!1;return e-e<1}},{"is-string-blank":50}],16:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],t=t[15];return e[0]=s*(f*t-p*g)-d*(l*t-c*g)+m*(l*p-c*f),e[1]=-(r*(f*t-p*g)-d*(a*t-i*g)+m*(a*p-i*f)),e[2]=r*(l*t-c*g)-s*(a*t-i*g)+m*(a*c-i*l),e[3]=-(r*(l*p-c*f)-s*(a*p-i*f)+d*(a*c-i*l)),e[4]=-(o*(f*t-p*g)-u*(l*t-c*g)+h*(l*p-c*f)),e[5]=n*(f*t-p*g)-u*(a*t-i*g)+h*(a*p-i*f),e[6]=-(n*(l*t-c*g)-o*(a*t-i*g)+h*(a*c-i*l)),e[7]=n*(l*p-c*f)-o*(a*p-i*f)+u*(a*c-i*l),e[8]=o*(d*t-p*m)-u*(s*t-c*m)+h*(s*p-c*d),e[9]=-(n*(d*t-p*m)-u*(r*t-i*m)+h*(r*p-i*d)),e[10]=n*(s*t-c*m)-o*(r*t-i*m)+h*(r*c-i*s),e[11]=-(n*(s*p-c*d)-o*(r*p-i*d)+u*(r*c-i*s)),e[12]=-(o*(d*g-f*m)-u*(s*g-l*m)+h*(s*f-l*d)),e[13]=n*(d*g-f*m)-u*(r*g-a*m)+h*(r*f-a*d),e[14]=-(n*(s*g-l*m)-o*(r*g-a*m)+h*(r*l-a*s)),e[15]=n*(s*f-l*d)-o*(r*f-a*d)+u*(r*l-a*s),e}},{}],17:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],18:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],19:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],20:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],p=e[12],h=e[13],m=e[14],e=e[15];return(t*o-n*i)*(d*e-f*m)-(t*s-r*i)*(u*e-f*h)+(t*l-a*i)*(u*m-d*h)+(n*s-r*o)*(c*e-f*p)-(n*l-a*o)*(c*m-d*p)+(r*l-a*s)*(c*h-u*p)}},{}],21:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,s=r+r,l=a+a,c=n*o,u=r*o,t=r*s,n=a*o,r=a*s,a=a*l,o=i*o,s=i*s,l=i*l;return e[0]=1-t-a,e[1]=u+l,e[2]=n-s,e[3]=0,e[4]=u-l,e[5]=1-c-a,e[6]=r+o,e[7]=0,e[8]=n+s,e[9]=r-o,e[10]=1-c-t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],22:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],a=n[1],i=n[2],o=Math.sqrt(r*r+a*a+i*i);if(Math.abs(o)<1e-6)return null;return r*=o=1/o,a*=o,i*=o,n=Math.sin(t),o=Math.cos(t),t=1-o,e[0]=r*r*t+o,e[1]=a*r*t+i*n,e[2]=i*r*t-a*n,e[3]=0,e[4]=r*a*t-i*n,e[5]=a*a*t+o,e[6]=i*a*t+r*n,e[7]=0,e[8]=r*i*t+a*n,e[9]=a*i*t-r*n,e[10]=i*i*t+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],23:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=r+r,l=a+a,c=i+i,u=r*s,d=r*l,t=r*c,r=a*l,a=a*c,i=i*c,s=o*s,l=o*l,c=o*c;return e[0]=1-(r+i),e[1]=d+c,e[2]=t-l,e[3]=0,e[4]=d-c,e[5]=1-(u+i),e[6]=a+s,e[7]=0,e[8]=t+l,e[9]=a-s,e[10]=1-(u+r),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],24:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],25:[function(e,t,n){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],26:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],27:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],28:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],29:[function(e,t,n){t.exports=function(e,t,n,r,a,i,o){var s=1/(n-t),l=1/(a-r),c=1/(i-o);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*l,e[10]=(o+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*c,e[15]=0,e}},{}],30:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],31:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":16,"./clone":17,"./copy":18,"./create":19,"./determinant":20,"./fromQuat":21,"./fromRotation":22,"./fromRotationTranslation":23,"./fromScaling":24,"./fromTranslation":25,"./fromXRotation":26,"./fromYRotation":27,"./fromZRotation":28,"./frustum":29,"./identity":30,"./invert":32,"./lookAt":33,"./multiply":34,"./ortho":35,"./perspective":36,"./perspectiveFromFieldOfView":37,"./rotate":38,"./rotateX":39,"./rotateY":40,"./rotateZ":41,"./scale":42,"./str":43,"./translate":44,"./transpose":45}],32:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*o,x=n*l-a*o,b=n*c-i*o,_=r*l-a*s,w=r*c-i*s,T=a*c-i*l,M=u*m-d*h,k=u*g-f*h,A=u*y-p*h,S=d*g-f*m,E=d*y-p*m,L=f*y-p*g,t=v*L-x*E+b*S+_*A-w*k+T*M;return t?(t=1/t,e[0]=(s*L-l*E+c*S)*t,e[1]=(a*E-r*L-i*S)*t,e[2]=(m*T-g*w+y*_)*t,e[3]=(f*w-d*T-p*_)*t,e[4]=(l*A-o*L-c*k)*t,e[5]=(n*L-a*A+i*k)*t,e[6]=(g*b-h*T-y*x)*t,e[7]=(u*T-f*b+p*x)*t,e[8]=(o*E-s*A+c*M)*t,e[9]=(r*A-n*E-i*M)*t,e[10]=(h*w-m*b+y*v)*t,e[11]=(d*b-u*w-p*v)*t,e[12]=(s*k-o*S-l*M)*t,e[13]=(n*S-r*k+a*M)*t,e[14]=(m*x-h*_-g*v)*t,e[15]=(u*_-d*x+f*v)*t,e):null}},{}],33:[function(e,t,n){var h=e("./identity");t.exports=function(e,t,n,r){var a,i=t[0],o=t[1],s=t[2],l=r[0],c=r[1],u=r[2],d=n[0],f=n[1],p=n[2];if(Math.abs(i-d)<1e-6&&Math.abs(o-f)<1e-6&&Math.abs(s-p)<1e-6)return h(e);a=i-d,t=o-f,r=s-p,n=1/Math.sqrt(a*a+t*t+r*r),d=c*(r*=n)-u*(t*=n),f=u*(a*=n)-l*r,p=l*t-c*a,(n=Math.sqrt(d*d+f*f+p*p))?(d*=n=1/n,f*=n,p*=n):p=f=d=0;u=t*p-r*f,l=r*d-a*p,c=a*f-t*d,(n=Math.sqrt(u*u+l*l+c*c))?(u*=n=1/n,l*=n,c*=n):c=l=u=0;return e[0]=d,e[1]=u,e[2]=a,e[3]=0,e[4]=f,e[5]=l,e[6]=t,e[7]=0,e[8]=p,e[9]=c,e[10]=r,e[11]=0,e[12]=-(d*i+f*o+p*s),e[13]=-(u*i+l*o+c*s),e[14]=-(a*i+t*o+r*s),e[15]=1,e}},{"./identity":30}],34:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],y=t[14],v=t[15],x=n[0],b=n[1],_=n[2],t=n[3];return e[0]=x*r+b*s+_*d+t*m,e[1]=x*a+b*l+_*f+t*g,e[2]=x*i+b*c+_*p+t*y,e[3]=x*o+b*u+_*h+t*v,x=n[4],b=n[5],_=n[6],t=n[7],e[4]=x*r+b*s+_*d+t*m,e[5]=x*a+b*l+_*f+t*g,e[6]=x*i+b*c+_*p+t*y,e[7]=x*o+b*u+_*h+t*v,x=n[8],b=n[9],_=n[10],t=n[11],e[8]=x*r+b*s+_*d+t*m,e[9]=x*a+b*l+_*f+t*g,e[10]=x*i+b*c+_*p+t*y,e[11]=x*o+b*u+_*h+t*v,x=n[12],b=n[13],_=n[14],t=n[15],e[12]=x*r+b*s+_*d+t*m,e[13]=x*a+b*l+_*f+t*g,e[14]=x*i+b*c+_*p+t*y,e[15]=x*o+b*u+_*h+t*v,e}},{}],35:[function(e,t,n){t.exports=function(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),c=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(o+i)*c,e[15]=1,e}},{}],36:[function(e,t,n){t.exports=function(e,t,n,r,a){var i=1/Math.tan(t/2),t=1/(r-a);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*t,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*t,e[15]=0,e}},{}],37:[function(e,t,n){t.exports=function(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),t=2/(a+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(a-i)*t*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},{}],38:[function(e,t,n){t.exports=function(e,t,n,r){var a,i,o,s,l,c,u,d,f,p,h,m,g,y,v,x,b,_,w,T=r[0],M=r[1],k=r[2],A=Math.sqrt(T*T+M*M+k*k);if(Math.abs(A)<1e-6)return null;T*=A=1/A,M*=A,k*=A,_=Math.sin(n),w=Math.cos(n),a=1-w,i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],f=t[7],p=t[8],h=t[9],m=t[10],g=t[11],y=T*T*a+w,v=M*T*a+k*_,x=k*T*a-M*_,b=T*M*a-k*_,r=M*M*a+w,A=k*M*a+T*_,n=T*k*a+M*_,_=M*k*a-T*_,w=k*k*a+w,e[0]=i*y+c*v+p*x,e[1]=o*y+u*v+h*x,e[2]=s*y+d*v+m*x,e[3]=l*y+f*v+g*x,e[4]=i*b+c*r+p*A,e[5]=o*b+u*r+h*A,e[6]=s*b+d*r+m*A,e[7]=l*b+f*r+g*A,e[8]=i*n+c*_+p*w,e[9]=o*n+u*_+h*w,e[10]=s*n+d*_+m*w,e[11]=l*n+f*_+g*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],39:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=i*a+c*r,e[5]=o*a+u*r,e[6]=s*a+d*r,e[7]=l*a+n*r,e[8]=c*a-i*r,e[9]=u*a-o*r,e[10]=d*a-s*r,e[11]=n*a-l*r,e}},{}],40:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*a-c*r,e[1]=o*a-u*r,e[2]=s*a-d*r,e[3]=l*a-n*r,e[8]=i*r+c*a,e[9]=o*r+u*a,e[10]=s*r+d*a,e[11]=l*r+n*a,e}},{}],41:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],n=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*a+c*r,e[1]=o*a+u*r,e[2]=s*a+d*r,e[3]=l*a+n*r,e[4]=c*a-i*r,e[5]=u*a-o*r,e[6]=d*a-s*r,e[7]=n*a-l*r,e}},{}],42:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],a=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],43:[function(e,t,n){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],44:[function(e,t,n){t.exports=function(e,t,n){var r,a,i,o,s,l,c,u,d,f,p,h=n[0],m=n[1],g=n[2];t===e?(e[12]=t[0]*h+t[4]*m+t[8]*g+t[12],e[13]=t[1]*h+t[5]*m+t[9]*g+t[13],e[14]=t[2]*h+t[6]*m+t[10]*g+t[14],e[15]=t[3]*h+t[7]*m+t[11]*g+t[15]):(r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],n=t[11],e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=f,e[10]=p,e[11]=n,e[12]=r*h+s*m+d*g+t[12],e[13]=a*h+l*m+f*g+t[13],e[14]=i*h+c*m+p*g+t[14],e[15]=o*h+u*m+n*g+t[15]);return e}},{}],45:[function(e,t,n){t.exports=function(e,t){{var n,r,a,i,o,s;e===t?(n=t[1],r=t[2],a=t[3],i=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e}},{}],46:[function(n,r,e){!function(t){!function(){"use strict";var e=n("is-browser"),e="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:e;r.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":48}],47:[function(e,t,n){"use strict";e=e("is-browser");t.exports=e&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":48}],48:[function(e,t,n){t.exports=!0},{}],49:[function(e,t,n){"use strict";t.exports=i,t.exports.isMobile=i,t.exports.default=i;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){var t=(e=e||{}).ua;if("string"!=typeof(t=(t=!t&&"undefined"!=typeof navigator?navigator.userAgent:t)&&t.headers&&"string"==typeof t.headers["user-agent"]?t.headers["user-agent"]:t))return!1;var n=(e.tablet?a:r).test(t);return n=!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")?!0:n}},{}],50:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],51:[function(e,t,n){var a={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,e=e.clientY||0,t=function(e){return e===window||e===document||e===document.body?a:e.getBoundingClientRect()}(t);return n[0]=r-t.left,n[1]=e-t.top,n}},{}],52:[function(e,a,t){!function(r,x){!function(){var e,t,n;n=function(){"use strict";var t,n,r,a,i,e=Object.prototype.toString,o=void 0!==x?function(e){return x(e)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(e,t,n){return e[t]=n,e}}function s(e,t){this.fn=e,this.self=t,this.next=void 0}function l(e,t){y.add(e,t),n=n||o(y.drain)}function c(e){var t,n=typeof e;return"function"==typeof(t=null!=e&&("object"==n||"function"==n)?e.then:t)&&t}function u(){for(var e=0;e<this.chain.length;e++)!function(e,t,n){var r,a;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(a=c(r))?a.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function d(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=c(e))?l(function(){var t=new h(r);try{n.call(e,function(){d.apply(t,arguments)},function(){f.apply(t,arguments)})}catch(e){f.call(t,e)}}):(r.msg=e,r.state=1,0<r.chain.length&&l(u,r))}catch(e){f.call(new h(r),e)}}}function f(e){var t=this;t.triggered||(t.triggered=!0,(t=t.def?t.def:t).msg=e,t.state=2,0<t.chain.length&&l(u,t))}function p(e,n,r,a){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},a)}(t)}function h(e){this.def=e,this.triggered=!1}function m(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new m(this);this.then=function(e,t){var n={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&l(u,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){d.call(r,e)},function(e){f.call(r,e)})}catch(e){f.call(r,e)}}var y={add:function(e,t){i=new s(e,t),a?a.next=i:r=i,a=i,i=void 0},drain:function(){var e=r;for(r=a=n=void 0;e;)e.fn.call(e.self),e=e.next}},v=t({},"constructor",g,!1);return t(g.prototype=v,"__NPO__",0,!1),t(g,"resolve",function(n){return n&&"object"==typeof n&&1===n.__NPO__?n:new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(n)})}),t(g,"reject",function(n){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(n)})}),t(g,"all",function(t){var o=this;return"[object Array]"!=e.call(t)?o.reject(TypeError("Not an array")):0===t.length?o.resolve([]):new o(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");var r=t.length,a=Array(r),i=0;p(o,t,function(e,t){a[e]=t,++i===r&&n(a)},e)})}),t(g,"race",function(t){var r=this;return"[object Array]"!=e.call(t)?r.reject(TypeError("Not an array")):new r(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");p(r,t,function(e,t){n(t)},e)})}),g},(t=void 0!==r?r:this)[e="Promise"]=t[e]||n(),void 0!==a&&a.exports&&(a.exports=t[e])}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:64}],53:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var i in n=Object(arguments[a]))c.call(n,i)&&(r[i]=n[i]);if(l)for(var o=l(n),s=0;s<o.length;s++)u.call(n,o[s])&&(r[o[s]]=n[o[s]])}return r}},{}],54:[function(e,t,n){t.exports=function(e){var a=[];return e.replace(r,function(e,t,n){var r=t.toLowerCase();for(n=function(e){e=e.match(o);return e?e.map(Number):[]}(n),"m"==r&&2<n.length&&(a.push([t].concat(n.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(n.length==i[r])return n.unshift(t),a.push(n);if(n.length<i[r])throw new Error("malformed path data");a.push([t].concat(n.splice(0,i[r])))}}),a};var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],55:[function(e,t,n){var r,a=e("./lib/build-log"),i=e("./lib/epsilon"),o=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),c=e("./lib/geojson"),u=!1,d=i();function f(e,t,n){e=r.segments(e),t=r.segments(t),t=n(r.combine(e,t));return r.polygon(t)}r={buildLog:function(e){return!0===e?u=a():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=o(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:o(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,d,e)},union:function(e,t){return f(e,t,r.selectUnion)},intersect:function(e,t){return f(e,t,r.selectIntersect)},difference:function(e,t){return f(e,t,r.selectDifference)},differenceRev:function(e,t){return f(e,t,r.selectDifferenceRev)},xor:function(e,t){return f(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},{"./lib/build-log":56,"./lib/epsilon":57,"./lib/geojson":58,"./lib/intersecter":59,"./lib/segment-chainer":61,"./lib/segment-selector":62}],56:[function(e,t,n){t.exports=function(){var n,e=0,t=!1;function r(e,t){return n.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),n}return n={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(e){return e===t?n:r("vert",{x:t=e})},log:function(e){return r("log",{txt:e="string"!=typeof e?JSON.stringify(e,!1,"  "):e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],57:[function(e,t,n){t.exports=function(u){"number"!=typeof u&&(u=1e-10);var n={epsilon:function(e){return u="number"==typeof e?e:u},pointAboveOrOnLine:function(e,t,n){var r=t[0],a=t[1],i=n[0],t=n[1],n=e[0],e=e[1];return-u<=(i-r)*(e-a)-(t-a)*(n-r)},pointBetween:function(e,t,n){var r=e[1]-t[1],a=n[0]-t[0],e=e[0]-t[0],t=n[1]-t[1],r=e*a+r*t;return!(r<u)&&!(-u<r-(a*a+t*t))},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<u},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<u},pointsSame:function(e,t){return n.pointsSameX(e,t)&&n.pointsSameY(e,t)},pointsCompare:function(e,t){return n.pointsSameX(e,t)?n.pointsSameY(e,t)?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1},pointsCollinear:function(e,t,n){var r=e[0]-t[0],a=e[1]-t[1],e=t[0]-n[0],n=t[1]-n[1];return Math.abs(r*n-e*a)<u},linesIntersect:function(e,t,n,r){var a=t[0]-e[0],i=t[1]-e[1],o=r[0]-n[0],s=r[1]-n[1],t=a*s-i*o;if(Math.abs(t)<u)return!1;r=e[0]-n[0],n=e[1]-n[1],s=(o*n-s*r)/t,t=(a*n-i*r)/t,i={alongA:0,alongB:0,pt:[e[0]+s*a,e[1]+s*i]};return i.alongA=s<=-u?-2:s<u?-1:s-1<=-u?0:s-1<u?1:2,i.alongB=t<=-u?-2:t<u?-1:t-1<=-u?0:t-1<u?1:2,i},pointInsideRegion:function(e,t){for(var n=e[0],r=e[1],a=t[t.length-1][0],i=t[t.length-1][1],o=!1,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];u<c-r!=u<i-r&&u<(a-l)*(r-c)/(i-c)+l-n&&(o=!o),a=l,i=c}return o}};return n}},{}],58:[function(e,t,n){var r={toPolygon:function(a,e){function t(e){if(e.length<=0)return a.segments({inverted:!1,regions:[]});function t(e){e=e.slice(0,e.length-1);return a.segments({inverted:!1,regions:[e]})}for(var n=t(e[0]),r=1;r<e.length;r++)n=a.selectDifference(a.combine(n,t(e[r])));return n}if("Polygon"===e.type)return a.polygon(t(e.coordinates));if("MultiPolygon"!==e.type)throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");for(var n=a.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=a.selectUnion(a.combine(n,t(e.coordinates[r])));return a.polygon(n)},fromPolygon:function(e,n,t){function o(e,t){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],t)}function s(e){return{region:e,children:[]}}t=e.polygon(e.segments(t));var r=s(null);for(var a=0;a<t.regions.length;a++){var i=t.regions[a];i.length<3||!function e(t,n){for(var r=0;r<t.children.length;r++)if(o(n,(a=t.children[r]).region))return void e(a,n);for(var a,i=s(n),r=0;r<t.children.length;r++)o((a=t.children[r]).region,n)&&(i.children.push(a),t.children.splice(r,1),r--);t.children.push(i)}(r,i)}function l(e,t){for(var n=0,r=e[e.length-1][0],a=e[e.length-1][1],i=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];i.push([s,l]),n+=l*r-s*a,r=s,a=l}return n<0!==t&&i.reverse(),i.push([i[0][0],i[0][1]]),i}var c=[];function u(e){var t=[l(e.region,!1)];c.push(t);for(var n=0;n<e.children.length;n++)t.push(function(e){for(var t=0;t<e.children.length;t++)u(e.children[t]);return l(e.region,!0)}(e.children[n]))}for(a=0;a<r.children.length;a++)u(r.children[a]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};t.exports=r},{}],59:[function(e,t,n){var y=e("./linked-list");t.exports=function(f,p,h){function a(e,t,n){return{id:h?h.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var m=y.create();function i(o,s){m.insertBefore(o,function(e){var t,n,r,a,i;return(t=o.isStart,n=o.pt,r=s,a=e.isStart,i=e.pt,e=e.other.pt,0!==(n=p.pointsCompare(n,i))?n:p.pointsSame(r,e)?0:t!==a?t?1:-1:p.pointAboveOrOnLine(r,a?i:e,a?e:i)?1:-1)<0})}function o(e,t){var n,r,n=(n=e,r=t,i(r=y.node({isStart:!0,pt:n.start,seg:n,primary:r,other:null,status:null}),n.end),r);return r=n,t=t,t=y.node({isStart:!1,pt:e.end,seg:e,primary:t,other:r,status:null}),i(r.other=t,r.pt),n}function g(e,t){var n,r=a(t,e.seg.end,e.seg);return n=e,t=t,h&&h.segmentChop(n.seg,t),n.other.remove(),n.seg.end=t,n.other.pt=t,i(n.other,n.pt),o(r,e.primary)}function s(e,t){var n=y.create();function r(a){return n.findTransition(function(e){var t,n,r;return 0<(t=a,n=e.ev,r=t.seg.start,e=t.seg.end,t=n.seg.start,n=n.seg.end,p.pointsCollinear(r,t,n)?p.pointsCollinear(e,t,n)||p.pointAboveOrOnLine(e,t,n)?1:-1:p.pointAboveOrOnLine(r,t,n)?1:-1)})}function a(e,t){var n=e.seg,r=t.seg,a=n.start,i=n.end,o=r.start,s=r.end;h&&h.checkIntersection(n,r);var l=p.linesIntersect(a,i,o,s);if(!1===l){if(!p.pointsCollinear(a,i,o))return!1;if(p.pointsSame(a,s)||p.pointsSame(i,o))return!1;var c=p.pointsSame(a,o),u=p.pointsSame(i,s);if(c&&u)return t;n=!c&&p.pointBetween(a,o,s),r=!u&&p.pointBetween(i,o,s);if(c)return r?g(t,i):g(e,s),t;n&&(u||(r?g(t,i):g(e,s)),g(t,a))}else 0===l.alongA&&(-1===l.alongB?g(e,o):0===l.alongB?g(e,l.pt):1===l.alongB&&g(e,s)),0===l.alongB&&(-1===l.alongA?g(t,a):0===l.alongA?g(t,l.pt):1===l.alongA&&g(t,i));return!1}for(var i=[];!m.isEmpty();){var o=m.getHead();if(h&&h.vert(o.pt[0]),o.isStart){h&&h.segmentNew(o.seg,o.primary);var s=r(o),l=s.before?s.before.ev:null,c=s.after?s.after.ev:null;h&&h.tempStatus(o.seg,!!l&&l.seg,!!c&&c.seg);var u,d=function(){if(l){var e=a(o,l);if(e)return e}return!!c&&a(o,c)}();if(d&&(f?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below)&&(d.seg.myFill.above=!d.seg.myFill.above):d.seg.otherFill=o.seg.myFill,h&&h.segmentUpdate(d.seg),o.other.remove(),o.remove()),m.getHead()!==o){h&&h.rewind(o.seg);continue}f?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below,o.seg.myFill.below=c?c.seg.myFill.above:e,o.seg.myFill.above=u?!o.seg.myFill.below:o.seg.myFill.below):null===o.seg.otherFill&&(d=c?(o.primary===c.primary?c.seg.otherFill:c.seg.myFill).above:o.primary?t:e,o.seg.otherFill={above:d,below:d}),h&&h.status(o.seg,!!l&&l.seg,!!c&&c.seg),o.other.status=s.insert(y.node({ev:o}))}else{s=o.status;if(null===s)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");n.exists(s.prev)&&n.exists(s.next)&&a(s.prev.ev,s.next.ev),h&&h.statusRemove(s.ev.seg),s.remove(),o.primary||(s=o.seg.myFill,o.seg.myFill=o.seg.otherFill,o.seg.otherFill=s),i.push(o.seg)}m.getHead().remove()}return h&&h.done(),i}return f?{addRegion:function(e){for(var t,n=e[e.length-1],r=0;r<e.length;r++){var a=n,n=e[r],i=p.pointsCompare(a,n);0!==i&&o((t=i<0?a:n,a=i<0?n:a,{id:h?h.segmentId():-1,start:t,end:a,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return s(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){o(a(e.start,e.end,e),!0)}),n.forEach(function(e){o(a(e.start,e.end,e),!1)}),s(t,r)}}}},{"./linked-list":60}],60:[function(e,t,n){t.exports={create:function(){var a={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==a.root},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(e,t){for(var n=a.root,r=a.root.next;null!==r;){if(t(r))return e.prev=r.prev,(e.next=r).prev.next=e,void(r.prev=e);r=(n=r).next}(n.next=e).prev=n,e.next=null},findTransition:function(e){for(var t=a.root,n=a.root.next;null!==n&&!e(n);)n=(t=n).next;return{before:t===a.root?null:t,after:n,insert:function(e){return e.prev=t,e.next=n,t.next=e,null!==n&&(n.prev=e),e}}}};return a},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],61:[function(e,t,n){t.exports=function(e,x,b){var _=[],w=[];return e.forEach(function(e){var t=e.start,n=e.end;if(x.pointsSame(t,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(e);for(var r={index:0,matches_head:!1,matches_pt1:!1},a={index:0,matches_head:!1,matches_pt1:!1},i=r,o=0;o<_.length;o++){var s=(f=_[o])[0],l=(f[1],f[f.length-1]);f[f.length-2];if(x.pointsSame(s,t)){if(g(o,!0,!0))break}else if(x.pointsSame(s,n)){if(g(o,!0,!1))break}else if(x.pointsSame(l,t)){if(g(o,!1,!0))break}else if(x.pointsSame(l,n)&&g(o,!1,!1))break}if(i===r)return _.push([t,n]),void(b&&b.chainNew(t,n));if(i===a){b&&b.chainMatch(r.index);var c=r.index,u=r.matches_pt1?n:t,d=r.matches_head,f=_[c],p=d?f[0]:f[f.length-1],h=d?f[1]:f[f.length-2],m=d?f[f.length-1]:f[0],e=d?f[f.length-2]:f[1];return(x.pointsCollinear(h,p,u)&&(d?(b&&b.chainRemoveHead(r.index,u),f.shift()):(b&&b.chainRemoveTail(r.index,u),f.pop()),p=h),x.pointsSame(m,u))?(_.splice(c,1),x.pointsCollinear(e,m,p)&&(d?(b&&b.chainRemoveTail(r.index,p),f.pop()):(b&&b.chainRemoveHead(r.index,p),f.shift())),b&&b.chainClose(r.index),void w.push(f)):void(d?(b&&b.chainAddHead(r.index,u),f.unshift(u)):(b&&b.chainAddTail(r.index,u),f.push(u)))}p=r.index,d=a.index;b&&b.chainConnect(p,d);u=_[p].length<_[d].length;r.matches_head?a.matches_head?u?(y(p),v(p,d)):(y(d),v(d,p)):v(d,p):a.matches_head?v(p,d):u?(y(p),v(d,p)):(y(d),v(p,d))}function g(e,t,n){if(i.index=e,i.matches_head=t,i.matches_pt1=n,i!==r)return i=null,1;i=a}function y(e){b&&b.chainReverse(e),_[e].reverse()}function v(e,t){var n=_[e],r=_[t],a=n[n.length-1],i=n[n.length-2],o=r[0],s=r[1];x.pointsCollinear(i,a,o)&&(b&&b.chainRemoveTail(e,a),n.pop(),a=i),x.pointsCollinear(a,o,s)&&(b&&b.chainRemoveHead(t,o),r.shift()),b&&b.chainJoin(e,t),_[e]=n.concat(r),_.splice(t,1)}}),w}},{}],62:[function(e,t,n){function r(e,n,r){var a=[];return e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==n[t]&&a.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===n[t],below:2===n[t]},otherFill:null})}),r&&r.selected(a),a}t.exports={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}},{}],63:[function(e,t,n){var r,a,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var l,c=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],64:[function(l,e,c){!function(n,s){!function(){var r=l("process/browser.js").nextTick,e=Function.prototype.apply,a=Array.prototype.slice,i={},o=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof n?n:function(e){var t=o++,n=!(arguments.length<2)&&a.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete i[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":63,timers:64}],65:[function(e,B,t){!function(l){var c=/^\s+/,u=/\s+$/,r=0,i=l.round,d=l.min,f=l.max,e=l.random;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(c,"").replace(u,"").toLowerCase();var t,n=!1;if(A[e])e=A[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=j.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=j.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=j.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=j.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=j.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=j.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=j.hex8.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),a:R(t[4]),format:n?"name":"hex8"};if(t=j.hex6.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),format:n?"name":"hex"};if(t=j.hex4.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),a:R(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=j.hex3.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(t=function(e,t,n){return{r:255*L(e,255),g:255*L(t,255),b:255*L(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(r=P(e.s),a=P(e.v),t=function(e,t,n){e=6*L(e,360),t=L(t,100),n=L(n,100);var r=l.floor(e),a=e-r,i=n*(1-t),e=n*(1-a*t),t=n*(1-(1-a)*t),r=r%6;return{r:255*[n,e,i,i,t,n][r],g:255*[t,n,n,e,i,i][r],b:255*[i,i,t,n,n,e][r]}}(e.h,r,a),o=!0,s="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(r=P(e.s),i=P(e.l),t=function(e,t,n){var r,a,i;function o(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e=L(e,360),t=L(t,100),n=L(n,100),0===t?r=a=i=n:(r=o(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),a=o(t,n,e),i=o(t,n,e-1/3));return{r:255*r,g:255*a,b:255*i}}(e.h,r,i),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=E(n),{ok:o,format:e.format||s,r:d(255,f(t.r,0)),g:d(255,f(t.g,0)),b:d(255,f(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=i(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=n.ok,this._tc_id=r++}function a(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var r,a=f(e,t,n),i=d(e,t,n),o=(a+i)/2;if(a==i)r=l=0;else{var s=a-i,l=.5<o?s/(2-a-i):s/(a+i);switch(a){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,l:o}}function o(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var r,a=f(e,t,n),i=d(e,t,n),o=a,s=a-i,l=0===a?0:s/a;if(a==i)r=0;else{switch(a){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,v:o}}function t(e,t,n,r){n=[O(i(e).toString(16)),O(i(t).toString(16)),O(i(n).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function s(e,t,n,r){return[O(I(r)),O(i(e).toString(16)),O(i(t).toString(16)),O(i(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.s-=t/100,e.s=C(e.s),p(e)}function h(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.s+=t/100,e.s=C(e.s),p(e)}function m(e){return p(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.l+=t/100,e.l=C(e.l),p(e)}function y(e,t){t=0===t?0:t||10;e=p(e).toRgb();return e.r=f(0,d(255,e.r-i(-t/100*255))),e.g=f(0,d(255,e.g-i(-t/100*255))),e.b=f(0,d(255,e.b-i(-t/100*255))),p(e)}function v(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.l-=t/100,e.l=C(e.l),p(e)}function x(e,t){e=p(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,p(e)}function b(e){e=p(e).toHsl();return e.h=(e.h+180)%360,p(e)}function _(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+120)%360,s:t.s,l:t.l}),p({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+90)%360,s:t.s,l:t.l}),p({h:(n+180)%360,s:t.s,l:t.l}),p({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+72)%360,s:t.s,l:t.l}),p({h:(n+216)%360,s:t.s,l:t.l})]}function M(e,t,n){t=t||6,n=n||30;var r=p(e).toHsl(),a=360/n,i=[p(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,i.push(p(r));return i}function k(e,t){t=t||6;for(var e=p(e).toHsv(),n=e.h,r=e.s,a=e.v,i=[],o=1/t;t--;)i.push(p({h:n,s:r,v:a})),a=(a+o)%1;return i}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:l.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:l.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:l.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=E(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),e=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),e=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){r=[O(i(e).toString(16)),O(i(t).toString(16)),O(i(n).toString(16)),O(I(r))];if(a&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*L(this._r,255))+"%",g:i(100*L(this._g,255))+"%",b:i(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*L(this._r,255))+"%, "+i(100*L(this._g,255))+"%, "+i(100*L(this._b,255))+"%)":"rgba("+i(100*L(this._r,255))+"%, "+i(100*L(this._g,255))+"%, "+i(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&S[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+s((e=p(e))._r,e._g,e._b,e._a):n)+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){t=e.apply(null,[this].concat([].slice.call(t)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:P(e[n]));e=r}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:e(),g:e(),b:e()})},p.mix=function(e,t,n){n=0===n?0:n||50;e=p(e).toRgb(),t=p(t).toRgb(),n/=100;return p({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},p.readability=function(e,t){e=p(e),t=p(t);return(l.max(e.getLuminance(),t.getLuminance())+.05)/(l.min(e.getLuminance(),t.getLuminance())+.05)},p.isReadable=function(e,t,n){var r=p.readability(e,t),a=!1,n=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(n);switch(n.level+n.size){case"AAsmall":case"AAAlarge":a=4.5<=r;break;case"AAlarge":a=3<=r;break;case"AAAsmall":a=7<=r}return a},p.mostReadable=function(e,t,n){for(var r,a=null,i=0,o=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,c=0;c<t.length;c++)i<(r=p.readability(e,t[c]))&&(i=r,a=p(t[c]));return p.isReadable(e,a,{level:s,size:l})||!o?a:(n.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],n))};var A=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=p.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(A);function E(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function L(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n,n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=d(t,f(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),l.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return d(1,f(0,e))}function D(e){return parseInt(e,16)}function O(e){return 1==e.length?"0"+e:""+e}function P(e){return e=e<=1?100*e+"%":e}function I(e){return l.round(255*parseFloat(e)).toString(16)}function R(e){return D(e)/255}var N,z,F,j=(z="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",F="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(e){return j.CSS_UNIT.exec(e)}void 0!==B&&B.exports?B.exports=p:window.tinycolor=p}(Math)},{}],66:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(o.prototype=new a.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e){var n=e.match(l);return n?n[0]:""}var r=this._validateYear(e),n=e.month(),e=""+this.toChineseMonth(r,n);return t&&e.length<2&&(e="0"+e),this.isIntercalaryMonth(r,n)&&(e+="i"),e},monthNames:function(e){if("string"==typeof e){var t=e.match(r);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},monthNamesShort:function(e){if("string"==typeof e){var t=e.match(c);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);return isNaN(r)?(""===t[0]&&(n=!0,t=t.substring(1)),""===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["","","","","","","","","","","",""].indexOf(t)):n="i"===(t=t[t.length-1])||"I"===t,this.toMonthIndex(e,r,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if("number"!=typeof(e=e.year?e.year():e)||e<1888||2111<e)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){e=this.intercalaryMonth(e);if(n&&t!==e||t<1||12<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||!n&&t<=e?t-1:t},toChineseMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);if(t<0||(e?12:11)<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||t<e?t+1:t},intercalaryMonth:function(e){return e=this._validateYear(e),f[e-f[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);return!!e&&e===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var r=this._validateYear(e,a.local.invalidyear),r=p[r-p[0]],r=i.newDate(r>>9&4095,r>>5&15,31&r);r.add(4-(r.dayOfWeek()||7),"d");r=this.toJD(e,t,n)-r.toJD();return 1+Math.floor(r/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);e=f[e-f[0]];if((e>>13?12:11)<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return e&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,void 0,n,a.local.invalidDate);e=this._validateYear(r.year()),t=r.month(),n=r.day();r=this.isIntercalaryMonth(e,t),r=function(e,t,n,r,a){var i,o;if("object"==typeof e)d=e,i=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=30))throw new Error("Lunar day outside range 1 - 30");i="object"==typeof r?(c=!1,r):(c=!!r,a||{}),d={year:e,month:t,day:n,isIntercalary:c}}o=d.day-1;var s,l=f[d.year-f[0]],c=l>>13;s=c&&(d.month>c||d.isIntercalary)?d.month:d.month-1;for(var u=0;u<s;u++)o+=l&1<<12-u?30:29;var d=p[d.year-p[0]],d=new Date(d>>9&4095,(d>>5&15)-1,(31&d)+o);return i.year=d.getFullYear(),i.month=1+d.getMonth(),i.day=d.getDate(),i}(e,this.toChineseMonth(e,t),n,r);return i.toJD(r.year,r.month,r.day)},fromJD:function(e){var t=i.fromJD(e),e=function(e,t,n,r){var a;if("object"==typeof e)o=e,a=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=31))throw new Error("Solar day outside range 1 - 31");o={year:e,month:t,day:n},a=r||{}}n=p[o.year-p[0]],r=o.year<<9|o.month<<5|o.day;a.year=n<=r?o.year:o.year-1,n=p[a.year-p[0]];var i,n=new Date(n>>9&4095,(n>>5&15)-1,31&n),o=new Date(o.year,o.month-1,o.day);i=Math.round((o-n)/864e5);var s,l=f[a.year-f[0]];for(s=0;s<13;s++){var c=l&1<<12-s?30:29;if(i<c)break;i-=c}n=l>>13;!n||s<n?(a.isIntercalary=!1,a.month=1+s):(a.isIntercalary=s===n,a.month=s);return a.day=1+i,a}(t.year(),t.month(),t.day()),t=this.toMonthIndex(e.year,e.month,e.isIntercalary);return this.newDate(e.year,t,e.day)},fromString:function(e){var t=e.match(s),n=this._validateYear(+t[1]),r=+t[2],e=!!t[3],e=this.toMonthIndex(n,r,e),t=+t[4];return this.newDate(n,e,t)},add:function(e,t,n){var r=e.year(),a=e.month(),i=this.isIntercalaryMonth(r,a),r=this.toChineseMonth(r,a),a=Object.getPrototypeOf(o.prototype).add.call(this,e,t,n);return"y"===n&&(e=a.year(),t=a.month(),n=this.isIntercalaryMonth(e,r),(r=i&&n?this.toMonthIndex(e,r,!0):this.toMonthIndex(e,r,!1))!==t&&a.month(r)),a}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,l=/^\d?\d[iI]?/m,r=/^??[]?/m,c=/^??[]?/m;a.calendars.chinese=o;var f=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":80,"object-assign":53}],67:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.coptic=a},{"../main":80,"object-assign":53}],68:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),400},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,a.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){n=this.dayOfWeek(e,t,n);return 2<=n&&n<=6},extraInfo:function(e,t,n){n=this._validate(e,t,n,a.local.invalidDate);return{century:i[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year()+(r.year()<0?1:0),t=r.month(),(n=r.day())+(1<t?16:0)+(2<t?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=15<e?16:0;var n=Math.floor(e/32)+1;return this.newDate(t<=0?t-1:t,n,e-32*(n-1)+1)}});var i={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=r},{"../main":80,"object-assign":53}],69:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.ethiopian=a},{"../main":80,"object-assign":53}],70:[function(e,t,n){var o=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new o.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this._leapYear(e.year())},_leapYear:function(e){return a(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,o.local.invalidMonth),12===t&&this.leapYear(e)||8===t&&5===a(this.daysInYear(e),10)?30:9===t&&3===a(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){n=this._validate(e,t,n,o.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=e<=0?e+1:e,a=this.jdEpoch+this._delay1(r)+this._delay2(r)+n+1;if(t<7){for(var i=7;i<=this.monthsInYear(e);i++)a+=this.daysInMonth(e,i);for(i=1;i<t;i++)a+=this.daysInMonth(e,i)}else for(i=7;i<t;i++)a+=this.daysInMonth(e,i);return a},_delay1:function(e){e=Math.floor((235*e-234)/19),e=29*e+Math.floor((12084+13753*e)/25920);return a(3*(e+1),7)<3&&e++,e},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),o.calendars.hebrew=r},{"../main":80,"object-assign":53}],71:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,a.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year(),t=r.month(),e=e<=0?e+1:e,(n=r.day())+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=(t=Math.floor((30*(e-this.jdEpoch)+10646)/10631))<=0?t-1:t,n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),e=e-this.toJD(t,n,1)+1;return this.newDate(t,n,e)}}),a.calendars.islamic=r},{"../main":80,"object-assign":53}],72:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return(e=t.year()<0?t.year()+1:t.year())%4==0},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5)+1524,n=Math.floor((t-122.1)/365.25),r=Math.floor(365.25*n),a=Math.floor((t-r)/30.6001),e=a-Math.floor(a<14?1:13),n=n-Math.floor(2<e?4716:4715),a=t-r-Math.floor(30.6001*a);return n<=0&&n--,this.newDate(n,e,a)}}),a.calendars.julian=r},{"../main":80,"object-assign":53}],73:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}function o(e,t){return i(e-1,t)+1}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year();var t=Math.floor(e/400);return e%=400,e+=e<0?400:0,t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(19<Math.abs(r)||0<n&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),!0},extraInfo:function(e,t,n){t=this._validate(e,t,n,r.local.invalidDate).toJD(),n=this._toHaab(t),t=this._toTzolkin(t);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[t[0]-1],tzolkinDay:t[0],tzolkinTrecena:t[1]}},_toHaab:function(e){e=i((e-=this.jdEpoch)+8+340,365);return[Math.floor(e/20)+1,i(e,20)]},_toTzolkin:function(e){return[o((e-=this.jdEpoch)+20,20),o(e+4,13)]},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20);return this.newDate(t,n,e%20)}}),r.calendars.mayan=a},{"../main":80,"object-assign":53}],74:[function(e,t,n){var o=e("../main"),e=e("object-assign");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}r.prototype=new o.baseCalendar;var s=o.instance("gregorian");e(r.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(e.year()+(e.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidMonth);(e=r.year())<0&&e++;for(var a=r.day(),i=1;i<r.month();i++)a+=this.daysPerMonth[i-1];return a+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),o.calendars.nanakshahi=r},{"../main":80,"object-assign":53}],75:[function(e,t,n){var s=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new s.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var t=0,n=this.minMonth;n<=12;n++)t+=this.NEPALI_CALENDAR_DATA[e][n];return t},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=s.instance(),a=0,i=t,o=e;this._createMissingCalendarData(e);e-=9<i||9===i&&n>=this.NEPALI_CALENDAR_DATA[o][0]?56:57;for(9!==t&&(a=n,i--);9!==i;)i<=0&&(i=12,o--),a+=this.NEPALI_CALENDAR_DATA[o][i],i--;return 9===t?(a+=n-this.NEPALI_CALENDAR_DATA[o][0])<0&&(a+=r.daysInYear(e)):a+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],r.newDate(e,1,1).add(a,"d").toJD()},fromJD:function(e){var t=s.instance().fromJD(e),e=t.year(),n=t.dayOfYear(),r=e+56;this._createMissingCalendarData(r);for(var a=9,e=this.NEPALI_CALENDAR_DATA[r][0],i=this.NEPALI_CALENDAR_DATA[r][a]-e+1;i<n;)12<++a&&(a=1,r++),i+=this.NEPALI_CALENDAR_DATA[r][a];e=this.NEPALI_CALENDAR_DATA[r][a]-(i-n);return this.newDate(r,a,e)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),s.calendars.nepali=r},{"../main":80,"object-assign":53}],76:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 682*((e.year()-(0<e.year()?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-(n.dayOfWeek()+1)%7,"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);e=r.year(),t=r.month(),n=r.day();r=e-(0<=e?474:473),e=474+i(r,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*e-110)/2816)+365*(e-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(t/1029983),r=i(t,1029983),a=2820;1029982!==r&&(t=Math.floor(r/366),r=i(r,366),a=Math.floor((2134*t+2816*r+2815)/1028522)+t+1);a=(a=a+2820*n+474)<=0?a-1:a,n=e-this.toJD(a,1,1)+1,n=n<=186?Math.ceil(n/31):Math.ceil((n-6)/30),e=e-this.toJD(a,n,1)+1;return this.newDate(a,n,e)}}),a.calendars.persian=r,a.calendars.jalali=r},{"../main":80,"object-assign":53}],77:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new a.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,a.local.invalidDate),e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)}}),a.calendars.taiwan=r},{"../main":80,"object-assign":53}],78:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new a.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,a.local.invalidDate),e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),a.calendars.thai=r},{"../main":80,"object-assign":53}],79:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return 355===this.daysInYear(e.year())},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,i.local.invalidMonth).toJD()-24e5+.5,r=0,a=0;a<o.length;a++){if(o[a]>n)return o[r]-o[r-1];r++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){t=this._validate(e,t,n,i.local.invalidDate),n=12*(t.year()-1)+t.month()-15292;return 24e5+(t.day()+o[n-1]-1)-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<o.length&&!(o[r]>t);r++)n++;var a=n+15292,i=Math.floor((a-1)/12),e=t-o[n-1]+1;return this.newDate(i+1,a-12*i,e)},isValid:function(e,t,n){return i.baseCalendar.prototype.isValid.apply(this,arguments)&&(1276<=(e=null!=e.year?e.year:e)&&e<=1500)},_validate:function(e,t,n,r){var a=i.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||1500<a.year)throw r.replace(/\{0\}/,this.local.name);return a}}),i.calendars.ummalqura=r;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":80,"object-assign":53}],80:[function(e,t,n){e=e("object-assign");function r(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function a(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function i(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function o(){this.shortYearCutoff="+10"}function s(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}e(r.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();var n=this._localCals[e+"-"+(t=t||"")];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,a){return(r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,a):r)||this.instance()).newDate(e,t,n)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(a,i){return function(e){for(var t="",n=0;0<e;){var r=e%10,t=(0==r?"":a[r]+i[n])+t;n++,e=Math.floor(e/10)}return(t=0===t.indexOf(a[1]+i[1])?t.substr(1):t)||a[0]}}}),e(a.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0==e?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+i(Math.abs(this.year()),4)+"-"+i(this.month(),2)+"-"+i(this.day(),2)}}),e(o.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new a(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+i(Math.abs(e.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return(t.month()+this.monthsInYear(t)-this.firstMonth)%this.monthsInYear(t)+this.minMonth},fromMonthOfYear:function(e,t){t=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth),t},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),r=e.calendar().fromJD(r);return this._validateLevel--,[r.year(),r.month(),r.day()]}try{var a=e.year()+("y"===n?t:0),i=e.monthOfYear()+("m"===n?t:0),r=e.day();"y"===n?(e.month()!==this.fromMonthOfYear(a,i)&&(i=this.newDate(a,e.month(),this.minDay).monthOfYear()),i=Math.min(i,this.monthsInYear(a)),r=Math.min(r,this.daysInMonth(a,this.fromMonthOfYear(a,i)))):"m"===n&&(function(e){for(;i<e.minMonth;)a--,i+=e.monthsInYear(a);for(var t=e.monthsInYear(a);i>t-1+e.minMonth;)a++,i-=t,t=e.monthsInYear(a)}(this),r=Math.min(r,this.daysInMonth(a,this.fromMonthOfYear(a,i))));var o=[a,this.fromMonthOfYear(a,i),r];return this._validateLevel--,o}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){return this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&0<e.year()==0<t[0]||(r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],t=this._add(e,n*r[0]+(n<0?-1:1)*r[1],r[2])),e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),a="m"===n?t:e.month(),t="d"===n?t:e.day();return"y"!==n&&"m"!==n||(t=Math.min(t,this.daysInMonth(r,a))),e.date(r,a,t)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;return r&&(e=this.newDate(e,t,this.minDay),r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(e)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(e)),this._validateLevel--,r},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return l.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(l.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var a=this.newDate(e,t,n);return this._validateLevel--,a}catch(e){throw this._validateLevel--,e}}}),e(s.prototype=new o,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);r=Math.floor(e/100),r=2-r+Math.floor(r/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25),r=1524+(n=t+1+n-Math.floor(n/4)),e=Math.floor((r-122.1)/365.25),t=Math.floor(365.25*e),n=Math.floor((r-t)/30.6001),t=r-t-Math.floor(30.6001*n),n=n-(13.5<n?13:1),e=e-(2.5<n?4716:4715);return e<=0&&e--,this.newDate(e,n,t)},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=new Date(n.year(),n.month()-1,n.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(12<n.getHours()?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var l=t.exports=new r;l.cdate=a,l.baseCalendar=o,l.calendars.gregorian=s},{"object-assign":53}],81:[function(e,t,n){var r=e("object-assign"),A=e("./main");r(A.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),A.local=A.regionalOptions[""],r(A.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(A.baseCalendar.prototype,{UNIX_EPOCH:A.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:A.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,e,t){if("string"!=typeof r&&(t=e,e=r,r=""),!e)return"";if(e.calendar()!==this)throw A.local.invalidFormat||A.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;function i(e,t){for(var n=1;_+n<r.length&&r.charAt(_+n)===e;)n++;return _+=n-1,1<Math.floor(n/(t||1))}function n(e,t,n,r){var a=""+t;if(i(e,r))for(;a.length<n;)a="0"+a;return a}for(var a,o,s,l,c,u,d=(t=t||{}).dayNamesShort||this.local.dayNamesShort,f=t.dayNames||this.local.dayNames,p=t.monthNumbers||this.local.monthNumbers,h=t.monthNamesShort||this.local.monthNamesShort,m=t.monthNames||this.local.monthNames,g=(t.calculateWeek||this.local.calculateWeek,this),y=this.local.digits,v=function(e){return t.localNumbers&&y?y(e):e},x="",b=!1,_=0;_<r.length;_++)if(b)"'"!==r.charAt(_)||i("'")?x+=r.charAt(_):b=!1;else switch(r.charAt(_)){case"d":x+=v(n("d",e.day(),2));break;case"D":x+=(s="D",l=e.dayOfWeek(),c=d,u=f,(i(s)?u:c)[l]);break;case"o":x+=n("o",e.dayOfYear(),3);break;case"w":x+=n("w",e.weekOfYear(),2);break;case"m":x+=(o=e,"function"==typeof p?p.call(g,o,i("m")):v(n("m",o.month(),2)));break;case"M":x+=(a=e,i("M")?"function"==typeof m?m.call(g,a):m[a.month()-g.minMonth]:"function"==typeof h?h.call(g,a):h[a.month()-g.minMonth]);break;case"y":x+=i("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":i("Y",2),x+=e.formatYear();break;case"J":x+=e.toJD();break;case"@":x+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?x+="'":b=!0;break;default:x+=r.charAt(_)}return x},parseDate:function(r,o,e){if(null==o)throw A.local.invalidArguments||A.regionalOptions[""].invalidArguments;if(""===(o="object"==typeof o?o.toString():o+""))return null;r=r||this.local.dateFormat;function s(e,t){for(var n=1;T+n<r.length&&r.charAt(T+n)===e;)n++;return T+=n-1,1<Math.floor(n/(t||1))}function t(e,t){if(t=s(e,t),e=[2,3,t?4:2,t?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],e=new RegExp("^-?\\d{1,"+e+"}"),!(e=o.substring(w).match(e)))throw(A.local.missingNumberAt||A.regionalOptions[""].missingNumberAt).replace(/\{0\}/,w);return w+=e[0].length,parseInt(e[0],10)}function n(e,t,n,r){for(var a=s(e,r)?n:t,i=0;i<a.length;i++)if(o.substr(w,a[i].length).toLowerCase()===a[i].toLowerCase())return w+=a[i].length,i+_.minMonth;throw(A.local.unknownNameAt||A.regionalOptions[""].unknownNameAt).replace(/\{0\}/,w)}function a(){if(o.charAt(w)!==r.charAt(T))throw(A.local.unexpectedLiteralAt||A.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,w);w++}for(var i="string"!=typeof(i=(e=e||{}).shortYearCutoff||this.shortYearCutoff)?i:this.today().year()%100+parseInt(i,10),l=e.dayNamesShort||this.local.dayNamesShort,c=e.dayNames||this.local.dayNames,u=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,f=e.monthNamesShort||this.local.monthNamesShort,p=e.monthNames||this.local.monthNames,h=-1,m=-1,g=-1,y=-1,v=-1,x=!1,b=!1,_=this,w=0,T=0;T<r.length;T++)if(b)"'"!==r.charAt(T)||s("'")?a():b=!1;else switch(r.charAt(T)){case"d":y=t("d");break;case"D":n("D",l,c);break;case"o":v=t("o");break;case"w":t("w");break;case"m":g=function(){if("function"!=typeof d)return t("m");s("m");var e=d.call(_,o.substring(w));return w+=e.length,e}();break;case"M":g=function(){if("function"!=typeof p)return n("M",f,p);var e=(s("M")?p:f).call(_,o.substring(w));return w+=e.length,e}();break;case"y":var M=T,x=!s("y",2),T=M,m=t("y",2);break;case"Y":m=t("Y",2);break;case"J":h=t("J")+.5,"."===o.charAt(w)&&(w++,t("J"));break;case"@":h=t("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":h=t("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":w=o.length;break;case"'":s("'")?a():b=!0;break;default:a()}if(w<o.length)throw A.local.unexpectedText||A.regionalOptions[""].unexpectedText;if(-1===m?m=this.today().year():m<100&&x&&(m+=-1===i?1900:this.today().year()-this.today().year()%100-(m<=i?0:100)),"string"==typeof g&&(g=u.call(this,m,g)),-1<v)for(var g=1,y=v,k=this.daysInMonth(m,g);k<y;k=this.daysInMonth(m,g))g++,y-=k;return-1<h?this.fromJD(h):this.newDate(m,g,y)},determineDate:function(e,t,a,i,o){a&&"object"!=typeof a&&(o=i,i=a,a=null),"string"!=typeof i&&(o=i,i="");var s=this;return t=t?t.newDate():null,e=null==e?t:"string"==typeof e?function(e){try{return s.parseDate(i,e,o)}catch(e){}for(var t=((e=e.toLowerCase()).match(/^c/)&&a?a.newDate():null)||s.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,r=n.exec(e);r;)t.add(parseInt(r[1],10),r[2]||"d"),r=n.exec(e);return t}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e)}})},{"./main":80,"object-assign":53}],82:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],83:[function(e,t,n){"use strict";var r=e("./arrow_paths"),a=e("../../plots/font_attributes"),i=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/font_attributes":305,"./arrow_paths":82}],84:[function(e,t,n){"use strict";var r=e("../../lib"),h=e("../../plots/cartesian/axes"),a=e("./draw").draw;function i(i){var e=i._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var t=h.getFromId(i,e.xref),n=h.getFromId(i,e.yref),r=h.getRefType(e.xref),a=h.getRefType(e.yref);e._extremes={},"range"===r&&o(e,t),"range"===a&&o(e,n)})}function o(e,t){var n=t._id,r=n.charAt(0),a=e[r],i=e["a"+r],o=e[r+"ref"],s=e["a"+r+"ref"],l=e["_"+r+"padplus"],c=e["_"+r+"padminus"],u={x:1,y:-1}[r]*e[r+"shift"],d=3*e.arrowsize*e.arrowwidth||0,f=d+u,p=d-u,r=3*e.startarrowsize*e.arrowwidth||0,d=r+u,u=r-u;u=s===o?(s=h.findExtremes(t,[t.r2c(a)],{ppadplus:f,ppadminus:p}),o=h.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,d),ppadminus:Math.max(c,u)}),{min:[s.min[0],o.min[0]],max:[s.max[0],o.max[0]]}):(d=i?d+i:d,u=i?u-i:u,h.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,f,d),ppadminus:Math.max(c,p,u)})),e._extremes[n]=u}t.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([a,i],e)}},{"../../lib":230,"../../plots/cartesian/axes":276,"./draw":89}],85:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../registry"),u=e("../../plot_api/plot_template").arrayEditor;function d(e,t){for(var n,r,a,i,o,s,l=e._fullLayout.annotations,c=[],u=[],d=[],f=(t||[]).length,p=0;p<l.length;p++)if(a=(r=l[p]).clicktoshow){for(n=0;n<f;n++)if(o=(i=t[n]).xaxis,s=i.yaxis,o._id===r.xref&&s._id===r.yref&&o.d2r(i.x)===h(r._xclick,o)&&s.d2r(i.y)===h(r._yclick,s)){(r.visible?"onout"===a?u:d:c).push(p);break}n===f&&r.visible&&"onout"===a&&u.push(p)}return{on:c,off:u,explicitOff:d}}function h(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){t=d(e,t);return 0<t.on.length||0<t.explicitOff.length},onClick:function(e,t){var n,r,t=d(e,t),a=t.on,i=t.off.concat(t.explicitOff),o={},s=e._fullLayout.annotations;if(a.length||i.length){for(n=0;n<a.length;n++)(r=u(e.layout,"annotations",s[a[n]])).modifyItem("visible",!0),l.extendFlat(o,r.getUpdateObj());for(n=0;n<i.length;n++)(r=u(e.layout,"annotations",s[i[n]])).modifyItem("visible",!1),l.extendFlat(o,r.getUpdateObj());return c.call("update",e,{},o)}}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313}],86:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../color");t.exports=function(e,t,n,r){r("opacity");var a=r("bgcolor"),i=r("bordercolor"),o=d.opacity(i);r("borderpad");var s,l,c=r("borderwidth"),i=r("showarrow");r("text",i?" ":n._dfltTitle.annotation),r("textangle"),u.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),i&&(-1!==(i=r("arrowside")).indexOf("end")&&(s=r("arrowhead"),l=r("arrowsize")),-1!==i.indexOf("start")&&(r("startarrowhead",s),r("startarrowsize",l)),r("arrowcolor",o?t.bordercolor:d.defaultLine),r("arrowwidth",2*(o&&c||1)),r("standoff"),r("startstandoff"));c=r("hovertext"),n=n.hoverlabel||{};c&&(a=r("hoverlabel.bgcolor",n.bgcolor||(d.opacity(a)?d.rgb(a):d.defaultLine)),a=r("hoverlabel.bordercolor",n.bordercolor||d.contrast(a)),u.coerceFont(r,"hoverlabel.font",{family:n.font.family,size:n.font.size,color:n.font.color||a})),r("captureevents",!!c)}},{"../../lib":230,"../color":100}],87:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib/to_log_range");t.exports=function(e,r,t,a){r=r||{};var i="log"===t&&"linear"===r.type,t="linear"===t&&"log"===r.type;if(i||t)for(var o,s,n=e._fullLayout.annotations,l=r._id.charAt(0),c=0;c<n.length;c++)o=n[c],s="annotations["+c+"].",o[l+"ref"]===r._id&&u(l),o["a"+l+"ref"]===r._id&&u("a"+l);function u(e){var t=o[e],n=null,n=i?f(t,r.range):Math.pow(10,t);d(n)||(n=null),a(s+e,n)}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],88:[function(e,t,n){"use strict";var m=e("../../lib"),g=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),y=e("./common_defaults"),v=e("./attributes");function a(n,r,e){function t(e,t){return m.coerce(n,r,v,e,t)}var a=t("visible"),i=t("clicktoshow");if(a||i){y(n,r,e,t);for(var o=r.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:e},u=0;u<2;u++){var d,f,p=s[u],h=g.coerceRef(n,r,c,p,"","paper");"paper"!==h&&g.getFromId(c,h)._annIndices.push(r._index),g.coercePosition(r,c,t,h,p,.5),o&&("pixel"!==(f=g.coerceRef(n,r,c,d="a"+p,"pixel",["pixel","paper"]))&&f!==h&&(f=r[d]="pixel"),g.coercePosition(r,c,t,f,d,"pixel"===f?l[u]:.4)),t(p+"anchor"),t(p+"shift")}m.noneOrAll(n,r,["x","y"]),o&&m.noneOrAll(n,r,["ax","ay"]),i&&(e=t("xclick"),i=t("yclick"),r._xclick=void 0===e?r.x:g.cleanPosition(e,c,r.xref),r._yclick=void 0===i?r.y:g.cleanPosition(i,c,r.yref))}}t.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:a})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":83,"./common_defaults":86}],89:[function(e,t,n){"use strict";var o=e("@plotly/d3"),ae=e("../../registry"),r=e("../../plots/plots"),ie=e("../../lib"),oe=ie.strTranslate,se=e("../../plots/cartesian/axes"),le=e("../color"),ce=e("../drawing"),s=e("../fx"),ue=e("../../lib/svg_text_utils"),de=e("../../lib/setcursor"),fe=e("../dragelement"),l=e("../../plot_api/plot_template").arrayEditor,pe=e("./draw_arrow_head");function a(e,t){var n=e._fullLayout.annotations[t]||{},r=se.getFromId(e,n.xref),a=se.getFromId(e,n.yref);r&&r.setScale(),a&&a.setScale(),i(e,n,t,!1,r,a)}function he(e,t,n,r,a){var i=a[n],a=a[n+"ref"],n=-1!==n.indexOf("y"),a="domain"===se.getRefType(a),r=n?r.h:r.w;return e?a?i+(n?-t:t)/e._length:e.p2r(e.r2p(i)+t):i+(n?-t:t)/r}function i(P,I,t,R,N,z){var F=P._fullLayout,j=P._fullLayout._size,H=P._context.edits,e=R?(r="annotation-"+R,R+".annotations"):(r="annotation","annotations"),e=l(P.layout,e,I),B=e.modifyBase,q=e.modifyItem,U=e.getUpdateObj;F._infolayer.selectAll("."+r+'[data-index="'+t+'"]').remove();var Y,V,G,W,Z,$,X,J,K,Q,ee,n,r,te,ne="clip"+F._uid+"_ann"+t;function re(e){e={index:t,annotation:I._input,fullAnnotation:I,event:e};return R&&(e.subplotId=R),e}function a(e){return e.call(ce.font,n).attr({"text-anchor":{left:"start",right:"end"}[I.align]||"middle"}),ue.convertToTspans(e,P,i),e}function i(){var e=te.selectAll("a");1===e.size()&&e.text()===te.text()&&$.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(K.node());var t=$.select(".annotation-text-math-group"),n=!t.empty(),r=ce.bBox((n?t:te).node()),a=r.width,i=r.height,o=I.width||a,s=I.height||i,l=Math.round(o+2*J),c=Math.round(s+2*J);function u(e,t){return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t="auto"===t?e<1/3?"left":2/3<e?"right":"center":t]}for(var d,f,p,h=!1,m=["x","y"],g=0;g<m.length;g++){var y,v,x,b,_,w=m[g],T=I[w+"ref"]||w,M=I["a"+w+"ref"],k={x:N,y:z}[w],A=(V+("x"===w?0:-90))*Math.PI/180,S=l*Math.cos(A),E=c*Math.sin(A),L=Math.abs(S)+Math.abs(E),C=I[w+"anchor"],D=I[w+"shift"]*("x"===w?1:-1),O=Y[w],A=se.getRefType(T);A=k&&"domain"!==A?(((v=k.r2fraction(I[w]))<0||1<v)&&(M!==T||(v=k.r2fraction(I["a"+w]))<0||1<v)&&(h=!0),v=k._offset+k.r2p(I[w]),.5):(_="domain"===A,v="x"===w?(y=I[w],_?k._offset+k._length*y:j.l+j.w*y):(y=1-I[w],_?k._offset+k._length*y:j.t+j.h*y),I.showarrow?.5:y),I.showarrow?(O.head=v,_=I["a"+w],x=S*u(.5,I.xanchor)-E*u(.5,I.yanchor),b=M===T?(b=se.getRefType(M),O.tail="domain"===b?k._offset+k._length*(_="y"===w?1-_:_):"paper"===b?"y"===w?j.t+j.h*(_=1-_):j.l+j.w*_:k._offset+k.r2p(_),x):(O.tail=v+_,x+_),O.text=O.tail+x,_=F["x"===w?"width":"height"],"paper"===T&&(O.head=ie.constrain(O.head,1,_-1)),"pixel"===M&&(M=-Math.max(O.tail-3,O.text),_=Math.min(O.tail+3,O.text)-_,0<M?(O.tail+=M,O.text+=M):0<_&&(O.tail-=_,O.text-=_)),O.tail+=D,O.head+=D):(b=x=L*u(A,C),O.text=v+x),O.text+=D,x+=D,b+=D,I["_"+w+"padplus"]=L/2+b,I["_"+w+"padminus"]=L/2-b,I["_"+w+"size"]=L,I["_"+w+"shift"]=x}h?$.remove():(e=d=0,"left"!==I.align&&(d=(o-a)*("center"===I.align?.5:1)),"top"!==I.valign&&(e=(s-i)*("middle"===I.valign?.5:1)),n?t.select("svg").attr({x:J+d-1,y:J+e}).call(ce.setClipUrl,Q?ne:null,P):(e=J+e-r.top,r=J+d-r.left,te.call(ue.positionText,r,e).call(ce.setClipUrl,Q?ne:null,P)),ee.select("rect").call(ce.setRect,J,J,o,s),K.call(ce.setRect,X/2,X/2,l-X,c-X),$.call(ce.setTranslate,Math.round(Y.x.text-l/2),Math.round(Y.y.text-c/2)),W.attr({transform:"rotate("+V+","+Y.x.text+","+Y.y.text+")"}),f=function(e,t){G.selectAll(".annotation-arrow-g").remove();var a,i,o,n=Y.x.head,r=Y.y.head,s=Y.x.tail+e,l=Y.y.tail+t,c=Y.x.text+e,u=Y.y.text+t,d=ie.rotationXYMatrix(V,c,u),f=ie.apply2DTransform(d),e=ie.apply2DTransform2(d),t=+K.attr("width"),d=+K.attr("height"),c=c-.5*t,t=c+t,u=u-.5*d,d=u+d,t=[[c,u,c,d],[c,d,t,d],[t,d,t,u],[t,u,c,u]].map(e);t.reduce(function(e,t){return e^!!ie.segmentsIntersect(n,r,n+1e6,r+1e6,t[0],t[1],t[2],t[3])},!1)||(t.forEach(function(e){e=ie.segmentsIntersect(s,l,n,r,e[0],e[1],e[2],e[3]);e&&(s=e.x,l=e.y)}),c=I.arrowwidth,u=I.arrowcolor,e=I.arrowside,t=(a=G.append("g").style({opacity:le.opacity(u)}).classed("annotation-arrow-g",!0)).append("path").attr("d","M"+s+","+l+"L"+n+","+r).style("stroke-width",c+"px").call(le.stroke,le.rgb(u)),pe(t,e,I),H.annotationPosition&&t.node().parentNode&&!R&&(u=n,e=r,I.standoff&&(t=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-l,2)),u+=I.standoff*(s-n)/t,e+=I.standoff*(l-r)/t),c=a.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(s-u)+","+(l-e),transform:oe(u,e)}).style("stroke-width",c+6+"px").call(le.stroke,"rgba(0,0,0,0)").call(le.fill,"rgba(0,0,0,0)"),fe.init({element:c.node(),gd:P,prepFn:function(){var e=ce.getTranslate($);i=e.x,o=e.y,N&&N.autorange&&B(N._name+".autorange",!0),z&&z.autorange&&B(z._name+".autorange",!0)},moveFn:function(e,t){var n=f(i,o),r=n[0]+e,n=n[1]+t;$.call(ce.setTranslate,r,n),q("x",he(N,e,"x",j,I)),q("y",he(z,t,"y",j,I)),I.axref===I.xref&&q("ax",he(N,e,"ax",j,I)),I.ayref===I.yref&&q("ay",he(z,t,"ay",j,I)),a.attr("transform",oe(e,t)),W.attr({transform:"rotate("+V+","+r+","+n+")"})},doneFn:function(){ae.call("_guiRelayout",P,U());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})))},I.showarrow&&f(0,0),Z&&fe.init({element:$.node(),gd:P,prepFn:function(){p=W.attr("transform")},moveFn:function(e,t){var n,r,a,i="pointer";if(I.showarrow)I.axref===I.xref?q("ax",he(N,e,"ax",j,I)):q("ax",I.ax+e),I.ayref===I.yref?q("ay",he(z,t,"ay",j.w,I)):q("ay",I.ay+t),f(e,t);else{if(R)return;n=N?he(N,e,"x",j,I):(r=I._xsize/j.w,n=I.x+(I._xshift-I.xshift)/j.w-r/2,fe.align(n+e/j.w,r,0,1,I.xanchor)),a=z?he(z,t,"y",j,I):(a=I._ysize/j.h,r=I.y-(I._yshift+I.yshift)/j.h-a/2,fe.align(r-t/j.h,a,0,1,I.yanchor)),q("x",n),q("y",a),N&&z||(i=fe.getCursor(N?.5:n,z?.5:a,I.xanchor,I.yanchor))}W.attr({transform:oe(e,t)+p}),de($,i)},clickFn:function(e,t){I.captureevents&&P.emit("plotly_clickannotation",re(t))},doneFn:function(){de($),ae.call("_guiRelayout",P,U());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}}))}I._input&&!1!==I.visible?(Y={x:{},y:{}},V=+I.textangle||0,G=F._infolayer.append("g").classed(r,!0).attr("data-index",String(t)).style("opacity",I.opacity),W=G.append("g").classed("annotation-text-g",!0),Z=H[I.showarrow?"annotationTail":"annotationPosition"],r=I.captureevents||H.annotationText||Z,$=W.append("g").style("pointer-events",r?"all":null).call(de,"pointer").on("click",function(){P._dragging=!1,P.emit("plotly_clickannotation",re(o.event))}),I.hovertext&&$.on("mouseover",function(){var e=I.hoverlabel,t=e.font,n=this.getBoundingClientRect(),r=P.getBoundingClientRect();s.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:I.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:P})}).on("mouseout",function(){s.loneUnhover(F._hoverlayer.node())}),X=I.borderwidth,r=I.borderpad,J=X+r,K=$.append("rect").attr("class","bg").style("stroke-width",X+"px").call(le.stroke,I.bordercolor).call(le.fill,I.bgcolor),Q=I.width||I.height,(ee=F._topclips.selectAll("#"+ne).data(Q?[0]:[])).enter().append("clipPath").classed("annclip",!0).attr("id",ne).append("rect"),ee.exit().remove(),n=I.font,r=F._meta?ie.templateString(I.text,F._meta):I.text,te=$.append("text").classed("annotation-text",!0).text(r),H.annotationText?te.call(ue.makeEditable,{delegate:$,gd:P}).call(a).on("edit",function(e){I.text=e,this.call(a),q("text",e),N&&N.autorange&&B(N._name+".autorange",!0),z&&z.autorange&&B(z._name+".autorange",!0),ae.call("_guiRelayout",P,U())}):te.call(a)):o.selectAll("#"+ne).remove()}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&a(e,n);return r.previousPromises(e)},drawOne:a,drawRaw:i}},{"../../lib":230,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../fx":140,"./draw_arrow_head":90,"@plotly/d3":11}],90:[function(e,t,n){"use strict";var T=e("@plotly/d3"),M=e("../color"),k=e("./arrow_paths"),e=e("../../lib"),A=e.strScale,S=e.strRotate,E=e.strTranslate;t.exports=function(a,e,i){var o=a.node(),t=k[i.arrowhead||0],n=k[i.startarrowhead||0],r=(i.arrowwidth||1)*(i.arrowsize||1),s=(i.arrowwidth||1)*(i.startarrowsize||1),l=0<=e.indexOf("start"),c=0<=e.indexOf("end"),u=t.backoff*r+i.standoff,d=n.backoff*s+i.startstandoff;if("line"===o.nodeName){var f,p={x:+a.attr("x1"),y:+a.attr("y1")},h={x:+a.attr("x2"),y:+a.attr("y2")},m=p.x-h.x,g=p.y-h.y,y=(f=Math.atan2(g,m))+Math.PI;if(u&&d&&u+d>Math.sqrt(m*m+g*g))return void _();if(u){if(m*m+g*g<u*u)return void _();var v=u*Math.cos(f),e=u*Math.sin(f);h.x+=v,h.y+=e,a.attr({x2:h.x,y2:h.y})}if(d){if(m*m+g*g<d*d)return void _();var x=d*Math.cos(f),b=d*Math.sin(f);p.x-=x,p.y-=b,a.attr({x1:p.x,y1:p.y})}}else if("path"===o.nodeName){m=o.getTotalLength();if(m<u+d)return void _();x=o.getPointAtLength(0),b=o.getPointAtLength(.1);f=Math.atan2(x.y-b.y,x.x-b.x),p=o.getPointAtLength(Math.min(d,m));g="0px,"+d+"px,",x=o.getPointAtLength(m),b=o.getPointAtLength(m-.1);y=Math.atan2(x.y-b.y,x.x-b.x),h=o.getPointAtLength(Math.max(0,m-u)),a.style("stroke-dasharray",g+=m-(g?d+u:u)+"px,"+m+"px")}function _(){a.style("stroke-dasharray","0px,100px")}function w(e,t,n,r){e.path&&(e.noRotate&&(n=0),T.select(o.parentNode).append("path").attr({class:a.attr("class"),d:e.path,transform:E(t.x,t.y)+S(180*n/Math.PI)+A(r)}).style({fill:M.rgb(i.arrowcolor),"stroke-width":0}))}l&&w(n,p,f,s),c&&w(t,h,y,r)}},{"../../lib":230,"../color":100,"./arrow_paths":82,"@plotly/d3":11}],91:[function(e,t,n){"use strict";var r=e("./draw"),a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":83,"./calc_autorange":84,"./click":85,"./convert_coords":87,"./defaults":88,"./draw":89}],92:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../plot_api/edit_types").overrideAll,e=e("../../plot_api/plot_template").templatedArray;t.exports=a(e("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../annotations/attributes":83}],93:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("../../plots/cartesian/axes");t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)!function(e,t){var n=t.fullSceneLayout.domain,r=t.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},a.extendFlat(e._xa,t),i.setConvert(e._xa),e._xa._offset=r.l+n.x[0]*r.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*r.w*(n.x[1]-n.x[0])},e._ya={},a.extendFlat(e._ya,t),i.setConvert(e._ya),e._ya._offset=r.t+(1-n.y[1])*r.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*r.h*(n.y[1]-n.y[0])}}(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":230,"../../plots/cartesian/axes":276}],94:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),l=e("../annotations/common_defaults"),c=e("./attributes");function a(n,r,a,e){function i(e,t){return o.coerce(n,r,c,e,t)}function t(e){var t=e+"axis",n={_fullLayout:{}};return n._fullLayout[t]=a[t],s.coercePosition(r,n,i,e,e,.5)}i("visible")&&(l(n,r,e.fullLayout,i),t("x"),t("y"),t("z"),o.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",i("ax",-10),i("ay",-30),o.noneOrAll(n,r,["ax","ay"])))}t.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:a,fullLayout:n.fullLayout})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"../annotations/common_defaults":86,"./attributes":92}],95:[function(e,t,n){"use strict";var u=e("../annotations/draw").drawRaw,d=e("../../plots/gl3d/project"),f=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,a=0;a<r.length;a++){for(var i=r[a],o=!1,s=0;s<3;s++){var l=f[s],c=i[l],c=t[l+"axis"].r2fraction(c);if(c<0||1<c){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+a+'"]').remove():(i._pdata=d(e.glplot.cameraParams,[t.xaxis.r2l(i.x)*n[0],t.yaxis.r2l(i.y)*n[1],t.zaxis.r2l(i.z)*n[2]]),u(e.graphDiv,i,a,e.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":308,"../annotations/draw":89}],96:[function(e,t,n){"use strict";var s=e("../../registry"),l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=s.subplotsRegistry.gl3d;if(n)for(var r=n.attrRegex,a=Object.keys(e),i=0;i<a.length;i++){var o=a[i];r.test(o)&&(e[o].annotations||[]).length&&(l.pushUnique(t._basePlotModules,n),l.pushUnique(t._subplots.gl3d,o))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":230,"../../registry":313,"./attributes":92,"./convert":93,"./defaults":94,"./draw":95}],97:[function(e,t,n){"use strict";t.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":66,"world-calendars/dist/calendars/coptic":67,"world-calendars/dist/calendars/discworld":68,"world-calendars/dist/calendars/ethiopian":69,"world-calendars/dist/calendars/hebrew":70,"world-calendars/dist/calendars/islamic":71,"world-calendars/dist/calendars/julian":72,"world-calendars/dist/calendars/mayan":73,"world-calendars/dist/calendars/nanakshahi":74,"world-calendars/dist/calendars/nepali":75,"world-calendars/dist/calendars/persian":76,"world-calendars/dist/calendars/taiwan":77,"world-calendars/dist/calendars/thai":78,"world-calendars/dist/calendars/ummalqura":79,"world-calendars/dist/main":80,"world-calendars/dist/plus":81}],98:[function(e,t,n){"use strict";function i(e,t,n,r){var a={};return a[n]=s,o.coerce(e,t,a,n,r)}var r=e("./calendars"),o=e("../../lib"),a=e("../../constants/numerical"),c=a.EPOCHJD,u=a.ONEDAY,s={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var l={};function f(e){var t=l[e];return t=t||(l[e]=r.instance(e))}function p(e){return o.extendFlat({},s,{description:e})}function h(e){return"Sets the calendar system to use with `"+e+"` date data."}var m={xcalendar:p(h("x"))},g=o.extendFlat({},m,{ycalendar:p(h("y"))}),e=o.extendFlat({},g,{zcalendar:p(h("z"))}),a=p(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:e,surface:e,mesh3d:e,scattergl:g,ohlc:m,candlestick:m},layout:{calendar:p(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:a},yaxis:{calendar:a},scene:{xaxis:{calendar:a},yaxis:{calendar:a},zaxis:{calendar:a}},polar:{radialaxis:{calendar:a}}},transforms:{filter:{valuecalendar:p(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:p(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:s,handleDefaults:i,handleTraceDefaults:function(e,t,n,r){for(var a=0;a<n.length;a++)i(e,t,n[a]+"calendar",r.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:f,worldCalFmt:function(e,t,n){for(var r,a,i,o,t=Math.floor((t+.05)/u)+c,s=f(n).fromJD(t),l=0;-1!==(l=e.indexOf("%",l));)"0"===(o=e.charAt(l+1))||"-"===o||"_"===o?(a=3,r=e.charAt(l+2),"_"===o&&(o="-")):(r=o,o="0",a=2),(i=d[r])?(o="##"===i?"##":s.formatDate(i[o]),e=e.substr(0,l)+o+e.substr(l+a),l+=o.length):l+=a;return e}}},{"../../constants/numerical":210,"../../lib":230,"./calendars":97}],99:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],100:[function(e,t,n){"use strict";var a=e("tinycolor2"),i=e("fast-isnumeric"),o=e("../../lib/array").isTypedArray,s=t.exports={},e=e("./attributes");s.defaults=e.defaults;var l=s.defaultLine=e.defaultLine;s.lightLine=e.lightLine;var c=s.background=e.background;function u(e){if(i(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),n="a"===t.charAt(3)&&4===r.length;if(!n&&3!==r.length)return e;for(var a=0;a<r.length;a++){if(!r[a].length)return e;if(r[a]=Number(r[a]),!(0<=r[a]))return e;if(3===a)1<r[a]&&(r[a]=1);else if(1<=r[a])return e}t=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return n?"rgba("+t+", "+r[3]+")":"rgb("+t+")"}s.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},s.rgb=function(e){return s.tinyRGB(a(e))},s.opacity=function(e){return e?a(e).getAlpha():0},s.addOpacity=function(e,t){e=a(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+t+")"},s.combine=function(e,t){var n=a(e).toRgb();if(1===n.a)return a(e).toRgbString();t=a(t||c).toRgb(),t=1===t.a?t:{r:255*(1-t.a)+t.r*t.a,g:255*(1-t.a)+t.g*t.a,b:255*(1-t.a)+t.b*t.a},n={r:t.r*(1-n.a)+n.r*n.a,g:t.g*(1-n.a)+n.g*n.a,b:t.b*(1-n.a)+n.b*n.a};return a(n).toRgbString()},s.contrast=function(e,t,n){var r=a(e);return((r=1!==r.getAlpha()?a(s.combine(e,c)):r).isDark()?t?r.lighten(t):c:n?r.darken(n):l).toString()},s.stroke=function(e,t){t=a(t);e.style({stroke:s.tinyRGB(t),"stroke-opacity":t.getAlpha()})},s.fill=function(e,t){t=a(t);e.style({fill:s.tinyRGB(t),"fill-opacity":t.getAlpha()})},s.clean=function(e){if(e&&"object"==typeof e)for(var t,n,r=Object.keys(e),a=0;a<r.length;a++)if(n=e[i=r[a]],"color"===i.substr(i.length-5))if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]=u(n[t]);else e[i]=u(n);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(n))for(t=0;t<n.length;t++)Array.isArray(n[t])&&(n[t][1]=u(n[t][1]));else if(Array.isArray(n)){var i=n[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(t=0;t<n.length;t++)s.clean(n[t])}else n&&"object"==typeof n&&!o(n)&&s.clean(n)}},{"../../lib/array":216,"./attributes":99,"fast-isnumeric":15,tinycolor2:65}],101:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),a=e("../../plots/font_attributes"),i=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;t.exports=e({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:i({},r.ticks,{dflt:""}),ticklabeloverflow:i({},r.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:a({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plots/cartesian/layout_attributes":291,"../../plots/font_attributes":305}],102:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],103:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../plot_api/plot_template"),c=e("../../plots/cartesian/tick_value_defaults"),u=e("../../plots/cartesian/tick_mark_defaults"),d=e("../../plots/cartesian/tick_label_defaults"),f=e("./attributes");t.exports=function(e,t,n){var r=l.newContainer(t,"colorbar"),a=e.colorbar||{};function i(e,t){return s.coerce(a,r,f,e,t)}var o=i("thicknessmode");i("thickness","fraction"===o?30/(n.width-n.margin.l-n.margin.r):30);t=i("lenmode");i("len","fraction"===t?1:n.height-n.margin.t-n.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),s.noneOrAll(a,r,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");e=i("ticklabelposition");i("ticklabeloverflow",-1!==e.indexOf("inside")?"hide past domain":"hide past div"),c(a,r,i,"linear");o=n.font,t={outerTicks:!1,font:o};-1!==e.indexOf("inside")&&(t.bgColor="black"),d(a,r,i,"linear",t),u(a,r,i,"linear",t),i("title.text",n._dfltTitle.colorbar);n=r.tickfont,n=s.extendFlat({},n,{color:o.color,size:s.bigFont(n.size)});s.coerceFont(i,"title.font",n),i("title.side")}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/tick_label_defaults":298,"../../plots/cartesian/tick_mark_defaults":299,"../../plots/cartesian/tick_value_defaults":300,"./attributes":101}],104:[function(e,t,n){"use strict";var P=e("@plotly/d3"),I=e("tinycolor2"),R=e("../../plots/plots"),d=e("../../registry"),N=e("../../plots/cartesian/axes"),f=e("../dragelement"),z=e("../../lib"),F=z.strTranslate,j=e("../../lib/extend").extendFlat,p=e("../../lib/setcursor"),H=e("../drawing"),B=e("../color"),q=e("../titles"),U=e("../../lib/svg_text_utils"),v=e("../colorscale/helpers").flipScale,Y=e("../../plots/cartesian/axis_defaults"),V=e("../../plots/cartesian/position_defaults"),G=e("../../plots/cartesian/layout_attributes"),r=e("../../constants/alignment"),W=r.LINE_SPACING,Z=r.FROM_TL,$=r.FROM_BR,X=e("./constants").cn;t.exports={draw:function(u){var e=u._fullLayout._infolayer.selectAll("g."+X.colorbar).data(function(e){var t,n,r,a,i=e._fullLayout,o=e.calcdata,s=[];function l(e){return j(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof a.calc?a.calc(e,r,t):(t._fillgradient=n.reversescale?v(n.colorscale):n.colorscale,t._zrange=[n[a.min],n[a.max]])}for(var u,d=0;d<o.length;d++){var f=o[d],f=(r=f[0].trace)._module.colorbar;if(!0===r.visible&&f)for(var p=Array.isArray(f),h=p?f:[f],m=0;m<h.length;m++){var g=(a=h[m]).container;(n=g?r[g]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(p&&g?"-"+g:""),t._traceIndex=r.index,t._propPrefix=(g?g+".":"")+"colorbar.",t._meta=r._meta,c(),s.push(t))}}for(u in i._colorAxes){var y;(n=i[u]).showscale&&(y=i._colorAxes[u],(t=l(n.colorbar))._id="cb"+u,t._propPrefix=u+".colorbar.",t._meta=i._meta,a={min:"cmin",max:"cmax"},"heatmap"!==y[0]&&(r=y[1],a.calc=r._module.colorbar.calc),c(),s.push(t))}return s}(u),function(e){return e._id});e.enter().append("g").attr("class",function(e){return e._id}).classed(X.colorbar,!0),e.each(function(e){var t=P.select(this);z.ensureSingle(t,"rect",X.cbbg),z.ensureSingle(t,"g",X.cbfills),z.ensureSingle(t,"g",X.cblines),z.ensureSingle(t,"g",X.cbaxis,function(e){e.classed(X.crisp,!0)}),z.ensureSingle(t,"g",X.cbtitleunshift,function(e){e.append("g").classed(X.cbtitle,!0)}),z.ensureSingle(t,"rect",X.cboutline);var n,r,a,i,o,s,l,c=function(o,s,l){var a=l._fullLayout,c=a._size,e=s._fillcolor,u=s._line,t=s.title,d=t.side,f=s._zrange||P.extent(("function"==typeof e?e:u.color).domain()),p="function"==typeof u.color?u.color:function(){return u.color},h="function"==typeof e?e:function(){return e},n=s._levels,r=function(e,t){var n,r,a=e._levels,i=[],o=[],s=a.end+a.size/100,l=a.size,c=1.001*t[0]-.001*t[1],u=1.001*t[1]-.001*t[0];for(r=0;r<1e5&&(n=a.start+r*l,!(0<l?s<=n:n<=s));r++)c<n&&n<u&&i.push(n);if(e._fillgradient)o=[0];else if("function"==typeof e._fillcolor){var d=e._filllevels;if(d)for(s=d.end+d.size/100,l=d.size,r=0;r<1e5&&(n=d.start+r*l,!(0<l?s<=n:n<=s));r++)n>t[0]&&n<t[1]&&o.push(n);else(o=i.map(function(e){return e-a.size/2})).push(o[o.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(o=[0]);a.size<0&&(i.reverse(),o.reverse());return{line:i,fill:o}}(s,f),m=r.fill,g=r.line,y=Math.round(s.thickness*("fraction"===s.thicknessmode?c.w:1)),i=y/c.w,v=Math.round(s.len*("fraction"===s.lenmode?c.h:1)),x=v/c.h,b=s.xpad/c.w,_=(s.borderwidth+s.outlinewidth)/2,w=s.ypad/c.h,T=Math.round(s.x*c.w+s.xpad),r=s.x-i*({middle:.5,right:1}[s.xanchor]||0),M=s.y+x*(({top:-.5,bottom:.5}[s.yanchor]||0)-.5),k=Math.round(c.h*(1-M)),A=k-v;s._lenFrac=x,s._thickFrac=i,s._xLeftFrac=r,s._yBottomFrac=M;var S=s._axis=function(e,t,n){var e=e._fullLayout,r={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:"right",position:1},a={type:"linear",_id:"y"+t._id},t={letter:"y",font:e.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:e.calendar};function i(e,t){return z.coerce(r,a,G,e,t)}return Y(r,a,i,t,e),V(r,a,i,t),a}(l,s,f);S.position=s.x+b+i,-1!==["top","bottom"].indexOf(d)&&(S.title.side=d,S.titlex=s.x+b,S.titley=M+("top"===t.side?x-w:w));u.color&&"auto"===s.tickmode&&(S.tickmode="linear",S.tick0=n.start,r=n.size,i=z.constrain((k-A)/50,4,15)+1,1<(t=(f[1]-f[0])/((s.nticks||i)*r))&&(i=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),r*=i*z.roundUp(t/i,[2,5,10]),(Math.abs(n.start)/n.size+1e-6)%1<2e-6&&(S.tick0=0)),S.dtick=r);S.domain=[M+w,M+x-w],S.setScale(),o.attr("transform",F(Math.round(c.l),Math.round(c.t)));var E,L=o.select("."+X.cbtitleunshift).attr("transform",F(-Math.round(c.l),-Math.round(c.t))),C=o.select("."+X.cbaxis),D=0;function O(e,t){var n={propContainer:S,propName:s._propPrefix+"title",traceIndex:s._traceIndex,_meta:s._meta,placeholder:a._dfltTitle.colorbar,containerGroup:o.select("."+X.cbtitle)},r="h"===e.charAt(0)?e.substr(1):"h"+e;o.selectAll("."+r+",."+r+"-math-group").remove(),q.draw(l,e,j(n,t||{}))}return z.syncOrAsync([R.previousPromises,function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(e=c.l+(s.x+b)*c.w,t=S.title.font.size,t="top"===d?(1-(M+x-w))*c.h+c.t+3+.75*t:(1-(M+w))*c.h+c.t-3-.25*t,O(S._id+"title",{attributes:{x:e,y:t,"text-anchor":"start"}}))},function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(t=(i=o.select("."+X.cbtitle)).select("text"),r=[-s.outlinewidth/2,s.outlinewidth/2],e=i.select(".h"+S._id+"title-math-group").node(),a=15.6,t.node()&&(a=parseInt(t.node().style.fontSize,10)*W),e?a<(D=H.bBox(e).height)&&(r[1]-=(D-a)/2):t.node()&&!t.classed(X.jsPlaceholder)&&(D=H.bBox(t.node()).height),D&&(D+=5,"top"===d?(S.domain[1]-=D/c.h,r[1]*=-1):(S.domain[0]+=D/c.h,t=U.lineCount(t),r[1]+=(1-t)*a),i.attr("transform",F(r[0],r[1])),S.setScale())),o.selectAll("."+X.cbfills+",."+X.cblines).attr("transform",F(0,Math.round(c.h*(1-S.domain[1])))),C.attr("transform",F(0,Math.round(-c.t))),(a=o.select("."+X.cbfills).selectAll("rect."+X.cbfill).attr("style","").data(m)).enter().append("rect").classed(X.cbfill,!0).style("stroke","none"),a.exit().remove();var n=f.map(S.c2p).map(Math.round).sort(function(e,t){return e-t});a.each(function(e,t){t=[0===t?f[0]:(m[t]+m[t-1])/2,t===m.length-1?f[1]:(m[t]+m[t+1])/2].map(S.c2p).map(Math.round);t[1]=z.constrain(t[1]+(t[1]>t[0])?1:-1,n[0],n[1]);t=P.select(this).attr({x:T,width:Math.max(y,2),y:P.min(t),height:Math.max(P.max(t)-P.min(t),2)});s._fillgradient?H.gradient(t,l,s._id,"vertical",s._fillgradient,"fill"):(e=h(e).replace("e-",""),t.attr("fill",I(e).toHexString()))}),(i=o.select("."+X.cblines).selectAll("path."+X.cbline).data(u.color&&u.width?g:[])).enter().append("path").classed(X.cbline,!0),i.exit().remove(),i.each(function(e){P.select(this).attr("d","M"+T+","+(Math.round(S.c2p(e))+u.width/2%1)+"h"+y).call(H.lineGroupStyle,u.width,p(e),u.dash)}),C.selectAll("g."+S._id+"tick,path").remove();var r=T+y+(s.outlinewidth||0)/2-("outside"===s.ticks?1:0),a=N.calcTicks(S),i=N.getTickSigns(S)[2];return N.drawTicks(l,S,{vals:"inside"===S.ticks?N.clipEnds(S,a):a,layer:C,path:N.makeTickPath(S,r,i),transFn:N.makeTransTickFn(S)}),N.drawLabels(l,S,{vals:a,layer:C,transFn:N.makeTransTickLabelFn(S),labelFns:N.makeLabelFns(S,r)})},function(){var e,t;-1===["top","bottom"].indexOf(d)&&(t=S.title.font.size,e=S._offset+S._length/2,t=c.l+(S.position||0)*c.w+("right"===S.side?10+t*(S.showticklabels?1:.5):-10-t*(S.showticklabels?.5:0)),O("h"+S._id+"title",{avoid:{selection:P.select(l).selectAll("g."+S._id+"tick"),side:d,offsetLeft:c.l,offsetTop:0,maxShift:a.width},attributes:{x:t,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}}))},R.previousPromises,function(){var e=y+s.outlinewidth/2;-1===S.ticklabelposition.indexOf("inside")&&(e+=H.bBox(C.node()).width),(E=L.select("text")).node()&&!E.classed(X.jsPlaceholder)&&(a=(r=L.select(".h"+S._id+"title-math-group").node())&&-1!==["top","bottom"].indexOf(d)?H.bBox(r).width:H.bBox(L.node()).right-T-c.l,e=Math.max(e,a));var t=2*s.xpad+e+s.borderwidth+s.outlinewidth/2,n=k-A;o.select("."+X.cbbg).attr({x:T-s.xpad-(s.borderwidth+s.outlinewidth)/2,y:A-_,width:Math.max(t,2),height:Math.max(n+2*_,2)}).call(B.fill,s.bgcolor).call(B.stroke,s.bordercolor).style("stroke-width",s.borderwidth),o.selectAll("."+X.cboutline).attr({x:T,y:A+s.ypad+("top"===d?D:0),width:Math.max(y,2),height:Math.max(n-2*s.ypad-D,2)}).call(B.stroke,s.outlinecolor).style({fill:"none","stroke-width":s.outlinewidth});var r=({center:.5,right:1}[s.xanchor]||0)*t;o.attr("transform",F(c.l-r,c.t));var a={},e=Z[s.yanchor],r=$[s.yanchor];"pixels"===s.lenmode?(a.y=s.y,a.t=n*e,a.b=n*r):(a.t=a.b=0,a.yt=s.y+s.len*e,a.yb=s.y-s.len*r),e=Z[s.xanchor],r=$[s.xanchor],"pixels"===s.thicknessmode?(a.x=s.x,a.l=t*e,a.r=t*r):(a.l=(t=t-y)*e,a.r=t*r,a.xl=s.x-s.thickness*e,a.xr=s.x+s.thickness*r),R.autoMargin(l,s._id,a)}],l)}(t,e,u);c&&c.then&&(u._promises||[]).push(c),u._context.edits.colorbarPosition&&(n=t,r=e,l=(a=u)._fullLayout._size,f.init({element:n.node(),gd:a,prepFn:function(){i=n.attr("transform"),p(n)},moveFn:function(e,t){n.attr("transform",i+F(e,t)),o=f.align(r._xLeftFrac+e/l.w,r._thickFrac,0,1,r.xanchor),s=f.align(r._yBottomFrac-t/l.h,r._lenFrac,0,1,r.yanchor);t=f.getCursor(o,s,r.xanchor,r.yanchor);p(n,t)},doneFn:function(){var e;p(n),void 0!==o&&void 0!==s&&((e={})[r._propPrefix+"x"]=o,e[r._propPrefix+"y"]=s,void 0!==r._traceIndex?d.call("_guiRestyle",a,e,r._traceIndex):d.call("_guiRelayout",a,e))}}))}),e.exit().each(function(e){R.autoMargin(u,e._id)}).remove(),e.order()}}},{"../../constants/alignment":205,"../../lib":230,"../../lib/extend":224,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_defaults":278,"../../plots/cartesian/layout_attributes":291,"../../plots/cartesian/position_defaults":294,"../../plots/plots":311,"../../registry":313,"../color":100,"../colorscale/helpers":111,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":102,"@plotly/d3":11,tinycolor2:65}],105:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":230}],106:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":101,"./defaults":103,"./draw":104,"./has_colorbar":105}],107:[function(e,t,n){"use strict";var p=e("../colorbar/attributes"),h=e("../../lib/regex").counter,m=e("./scales.js").scales;Object.keys(m);function g(e){return"`"+e+"`"}t.exports=function(e,t){e=e||"";var n,r=(t=t||{}).cLetter||"c",a=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),i="showScaleDflt"in t?t.showScaleDflt:"z"===r,o="string"==typeof t.colorscaleDflt?m[t.colorscaleDflt]:null,s=t.editTypeOverride||"",l=e?e+".":"",c="colorAttr"in t?(n=t.colorAttr,t.colorAttr):"in "+g(l+(n={z:"z",c:"color"}[r])),u=r+"auto",d=r+"min",e=r+"max",f=r+"mid",c={};c[d]=c[e]=void 0;r={};r[u]=!1;l={};return"color"===n&&(l.color={valType:"color",arrayOk:!0,editType:s||"style"},t.anim&&(l.color.anim=!0)),l[u]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},l[d]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[e]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[f]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},l.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},l.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},l.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(l.showscale={valType:"boolean",dflt:i,editType:"calc"},l.colorbar=p),t.noColorAxis||(l.coloraxis={valType:"subplotid",regex:h("coloraxis"),dflt:null,editType:"calc"}),l}},{"../../lib/regex":246,"../colorbar/attributes":101,"./scales.js":115}],108:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("../../lib"),f=e("./helpers").extractOpts;t.exports=function(e,t,n){var r=e._fullLayout,a=n.vals,i=n.containerStr,o=i?d.nestedProperty(t,i).get():t,s=f(o),l=!1!==s.auto,c=s.min,e=s.max,n=s.mid,i=function(){return d.aggNums(Math.min,null,a)},t=function(){return d.aggNums(Math.max,null,a)};void 0===c?c=i():l&&(c=o._colorAx&&u(c)?Math.min(c,i()):i()),void 0===e?e=t():l&&(e=o._colorAx&&u(e)?Math.max(e,t()):t()),l&&void 0!==n&&(n-c<e-n?c=n-(e-n):e-n<n-c&&(e=n+(n-c))),c===e&&(c-=.5,e+=.5),s._sync("min",c),s._sync("max",e),s.autocolorscale&&(r=c*e<0?r.colorscale.diverging:0<=c?r.colorscale.sequential:r.colorscale.sequentialminus,s._sync("colorscale",r))}},{"../../lib":230,"./helpers":111,"fast-isnumeric":15}],109:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("./helpers").hasColorscale,d=e("./helpers").extractOpts;t.exports=function(e,a){function i(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function t(e,t){var n,r=t.container?c.nestedProperty(e,t.container).get():e;r&&(r.coloraxis?r._colorAx=a[r.coloraxis]:(!(e=(n=d(r)).auto)&&void 0!==n.min||i(r,t.min),!e&&void 0!==n.max||i(r,t.max),n.autocolorscale&&i(r,"colorscale")))}for(var n,r=0;r<e.length;r++){var o=e[r],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)t(o,s[l]);else t(o,s);u(o,"marker.line")&&t(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(n in a._colorAxes)t(a[n],{min:"cmin",max:"cmax"})}},{"../../lib":230,"./helpers":111}],110:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),b=e("../../lib"),_=e("../colorbar/has_colorbar"),w=e("../colorbar/defaults"),T=e("./scales").isValid,M=e("../../registry").traceIs;function k(e,t){var n=t.slice(0,t.length-1);return t?b.nestedProperty(e,n).get()||{}:e}t.exports=function e(t,n,r,a,i){var o=i.prefix,s=i.cLetter,l="_module"in n,c=k(t,o),u=k(n,o),d=k(n._template||{},o)||{},f=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,r,a,i)};if(l){var p=r._colorAxes||{},h=a(o+"coloraxis");if(h){var m=M(n,"contour")&&b.nestedProperty(n,"contours.coloring").get()||"heatmap",g=p[h];return void(g?(g[2].push(f),g[0]!==m&&(g[0]=!1,b.warn(["Ignoring coloraxis:",h,"setting","as it is linked to incompatible colorscales."].join(" ")))):p[h]=[m,n,[f]])}}m=c[s+"min"],f=c[s+"max"],f=x(m)&&x(f)&&m<f;a(o+s+"auto",!f)?a(o+s+"mid"):(a(o+s+"min"),a(o+s+"max"));var y,v,f=c.colorscale,s=d.colorscale;void 0!==f&&(y=!T(f)),void 0!==s&&(y=!T(s)),a(o+"autocolorscale",y),a(o+"colorscale"),a(o+"reversescale"),"marker.line."!==o&&(o&&l&&(v=_(c)),a(o+"showscale",v)&&(o&&d&&(u._template=d),w(c,u,r)))}},{"../../lib":230,"../../registry":313,"../colorbar/defaults":103,"../colorbar/has_colorbar":105,"./scales":115,"fast-isnumeric":15}],111:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("tinycolor2"),d=e("fast-isnumeric"),o=e("../../lib"),f=e("../color"),s=e("./scales").isValid;var l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],p=["min","max","mid","auto"];function h(e){var n,t,r=e._colorAx,a=r||e,i={};for(s=0;s<l.length;s++)i[t=l[s]]=a[t];if(r)for(n="c",s=0;s<p.length;s++)i[t=p[s]]=a["c"+t];else{for(var o,s=0;s<p.length;s++)((o="c"+(t=p[s]))in a||(o="z"+t)in a)&&(i[t]=a[o]);n=o.charAt(0)}return i._sync=function(e,t){e=-1!==p.indexOf(e)?n+e:e;a[e]=a["_"+e]=t},i}function r(e){for(var e=h(e),t=e.min,n=e.max,r=e.reversescale?m(e.colorscale):e.colorscale,a=r.length,i=new Array(a),o=new Array(a),s=0;s<a;s++){var l=r[s];i[s]=t+l[0]*(n-t),o[s]=l[1]}return{domain:i,range:o}}function m(e){for(var t=e.length,n=new Array(t),r=t-1,a=0;0<=r;r--,a++){var i=e[r];n[a]=[1-i[0],i[1]]}return n}function a(e,t){t=t||{};for(var n=e.domain,r=e.range,a=r.length,i=new Array(a),o=0;o<a;o++){var s=u(r[o]).toRgb();i[o]=[s.r,s.g,s.b,s.a]}var l=c.scale.linear().domain(n).range(i).clamp(!0),n=t.noNumericCheck,t=t.returnArray,t=n&&t?l:n?function(e){return g(l(e))}:t?function(e){return d(e)?l(e):u(e).isValid()?e:f.defaultLine}:function(e){return d(e)?g(l(e)):u(e).isValid()?e:f.defaultLine};return t.domain=l.domain,t.range=function(){return r},t}function g(e){e={r:e[0],g:e[1],b:e[2],a:e[3]};return u(e).toRgbString()}t.exports={hasColorscale:function(e,t,n){var r=(e=t?o.nestedProperty(e,t).get()||{}:e)[n||"color"],a=!1;if(o.isArrayOrTypedArray(r))for(var i=0;i<r.length;i++)if(d(r[i])){a=!0;break}return o.isPlainObject(e)&&(a||!0===e.showscale||d(e.cmin)&&d(e.cmax)||s(e.colorscale)||o.isPlainObject(e.colorbar))},extractOpts:h,extractScale:r,flipScale:m,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(e,t){return a(r(e),t)}}},{"../../lib":230,"../color":100,"./scales":115,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],112:[function(e,t,n){"use strict";var r=e("./scales"),a=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},{"./attributes":107,"./calc":108,"./cross_trace_defaults":109,"./defaults":110,"./helpers":111,"./layout_attributes":113,"./layout_defaults":114,"./scales":115}],113:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,a=e("./attributes"),e=e("./scales").scales;t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:e.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:e.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:e.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":224,"./attributes":107,"./scales":115}],114:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plot_api/plot_template"),f=e("./layout_attributes"),p=e("./defaults");t.exports=function(n,r){function e(e,t){return u.coerce(n,r,f,e,t)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var a,i,t,o=r._colorAxes;function s(e,t){return u.coerce(a,i,f.coloraxis,e,t)}for(t in o){var l=o[t];if(l[0])a=n[t]||{},(i=d.newContainer(r,t,"coloraxis"))._name=t,p(a,i,r,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete r._colorAxes[t]}}}},{"../../lib":230,"../../plot_api/plot_template":265,"./defaults":110,"./layout_attributes":113}],115:[function(e,t,n){"use strict";var a=e("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},i=r.RdBu;function o(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!a(r[1]).isValid())return!1;t=+r[0]}return!0}t.exports={scales:r,defaultScale:i,get:function(t,n){return n=n||i,t?("string"==typeof t&&(e(),"string"==typeof t&&e()),o(t)?t:n):n;function e(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}},isValid:function(e){return void 0!==r[e]||o(e)}}},{tinycolor2:65}],116:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){e=(e-n)/(r-n),r=e+t/(r-n),n=(e+r)/2;return"left"===a||"bottom"===a?e:"center"===a||"middle"===a?n:"right"===a||"top"===a?r:e<2/3-n?e:4/3-n<r?r:n}},{}],117:[function(e,t,n){"use strict";var a=e("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:a.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:a.constrain(Math.floor(3*t),0,2),i[t][e]}},{"../../lib":230}],118:[function(e,t,n){"use strict";n.selectMode=function(e){return"lasso"===e||"select"===e},n.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.openMode=function(e){return"drawline"===e||"drawopenpath"===e},n.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},n.selectingOrDrawing=function(e){return n.freeMode(e)||n.rectMode(e)}},{}],119:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),v=e("has-hover"),x=e("has-passive-events"),b=e("../../lib").removeElement,_=e("../../plots/cartesian/constants"),w=t.exports={};w.align=e("./align"),w.getCursor=e("./cursor");e=e("./unhover");function T(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function M(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}w.unhover=e.wrapped,w.unhoverRaw=e.raw,w.init=function(a){var r,i,n,o,s,l,c,u,d=a.gd,f=1,p=d._context.doubleClickDelay,h=a.element;d._mouseDownTime||(d._mouseDownTime=0),h.style.pointerEvents="all",h.onmousedown=e,x?(h._ontouchstart&&h.removeEventListener("touchstart",h._ontouchstart),h._ontouchstart=e,h.addEventListener("touchstart",e,{passive:!1})):h.ontouchstart=e;var m=a.clampFn||function(e,t,n){return[e=Math.abs(e)<n?0:e,t=Math.abs(t)<n?0:t]};function e(e){d._dragged=!1,d._dragging=!0;var t=M(e);r=t[0],i=t[1],c=e.target,u=2===(l=e).buttons||e.ctrlKey,void 0===e.clientX&&void 0===e.clientY&&(e.clientX=r,e.clientY=i),(n=(new Date).getTime())-d._mouseDownTime<p?f+=1:(f=1,d._mouseDownTime=n),a.prepFn&&a.prepFn(e,r,i),v&&!u?(s=T()).style.cursor=window.getComputedStyle(h).cursor:v||(s=document,o=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(h).cursor),document.addEventListener("mouseup",y),document.addEventListener("touchend",y),!1!==a.dragmode&&(e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(e){e.preventDefault();var t=M(e),n=a.minDrag||_.MINDRAG,t=m(t[0]-r,t[1]-i,n),n=t[0],t=t[1];(n||t)&&(d._dragged=!0,w.unhover(d,e)),d._dragged&&a.moveFn&&!u&&(d._dragdata={element:h,dx:n,dy:t},a.moveFn(n,t))}function y(t){if(delete d._dragdata,!1!==a.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",y),document.removeEventListener("touchend",y),v?b(s):o&&(s.documentElement.style.cursor=o,o=null),d._dragging){if(d._dragging=!1,(new Date).getTime()-d._mouseDownTime>p&&(f=Math.max(f-1,1)),d._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(f,l),!u){try{n=new MouseEvent("click",t)}catch(e){var n,r=M(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}c.dispatchEvent(n)}d._dragging=!1,d._dragged=!1}else d._dragged=!1}},w.coverSlip=T},{"../../lib":230,"../../plots/cartesian/constants":283,"./align":116,"./cursor":117,"./unhover":120,"has-hover":46,"has-passive-events":47,"mouse-event-offset":51}],120:[function(e,t,n){"use strict";var a=e("../../lib/events"),r=e("../../lib/throttle"),i=e("../../lib/dom").getGraphDiv,o=e("../fx/constants"),s=t.exports={};s.wrapped=function(e,t,n){(e=i(e))._fullLayout&&r.clear(e._fullLayout._uid+o.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,r=e._hoverdata;(t=t||{}).target&&!e._dragged&&!1===a.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))}},{"../../lib/dom":222,"../../lib/events":223,"../../lib/throttle":253,"../fx/constants":134}],121:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],122:[function(e,t,n){"use strict";var k=e("@plotly/d3"),a=e("fast-isnumeric"),f=e("tinycolor2"),v=e("../../registry"),A=e("../color"),r=e("../colorscale"),S=e("../../lib"),l=S.strTranslate,d=e("../../lib/svg_text_utils"),i=e("../../constants/xmlns_namespaces"),c=e("../../constants/alignment").LINE_SPACING,x=e("../../constants/interactions").DESELECTDIM,o=e("../../traces/scatter/subtypes"),s=e("../../traces/scatter/make_bubble_size_func"),p=e("../../components/fx/helpers").appendArrayPointValue,m=t.exports={};m.font=function(e,t,n,r){S.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(A.fill,r)},m.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},m.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},m.setRect=function(e,t,n,r,a){e.call(m.setPosition,t,n).call(m.setSize,r,a)},m.translatePoint=function(e,t,n,r){n=n.c2p(e.x),e=r.c2p(e.y);return!!(a(n)&&a(e)&&t.node())&&("text"===t.node().nodeName?t.attr("x",n).attr("y",e):t.attr("transform",l(n,e)),!0)},m.translatePoints=function(e,n,r){e.each(function(e){var t=k.select(this);m.translatePoint(e,t,n,r)})},m.hideOutsideRangePoint=function(e,t,n,r,a,i){t.attr("display",n.isPtWithinRange(e,a)&&r.isPtWithinRange(e,i)?null:"none")},m.hideOutsideRangePoints=function(r,e){var a,i;e._hasClipOnAxisFalse&&(a=e.xaxis,i=e.yaxis,r.each(function(e){var e=e[0].trace,t=e.xcalendar,n=e.ycalendar,e=v.traceIs(e,"bar-like")?".bartext":".point,.textpoint";r.selectAll(e).each(function(e){m.hideOutsideRangePoint(e,k.select(this),a,i,t,n)})}))},m.crispRound=function(e,t,n){return t&&a(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},m.singleLineStyle=function(e,t,n,r,a){t.style("fill","none");e=(((e||[])[0]||{}).trace||{}).line||{},n=n||e.width||0,a=a||e.dash||"";A.stroke(t,r||e.color),m.dashLine(t,a,n)},m.lineGroupStyle=function(e,r,a,i){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{},n=r||t.width||0,e=i||t.dash||"";k.select(this).call(A.stroke,a||t.color).call(m.dashLine,e,n)})},m.dashLine=function(e,t,n){t=m.dashStyle(t,n=+n||0),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},m.dashStyle=function(e,t){t=+t||1;t=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=t+"px,"+t+"px":"dash"===e?e=3*t+"px,"+3*t+"px":"longdash"===e?e=5*t+"px,"+5*t+"px":"dashdot"===e?e=3*t+"px,"+t+"px,"+t+"px,"+t+"px":"longdashdot"===e&&(e=5*t+"px,"+2*t+"px,"+t+"px,"+2*t+"px"),e},m.singleFillStyle=function(e){var t=(((k.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(A.fill,t)},m.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=k.select(this);e[0].trace&&t.call(A.fill,e[0].trace.fillcolor)})};var u=e("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(u).forEach(function(e){var t=u[e],n=t.n;m.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),m.symbolNames[n]=e,m.symbolFuncs[n]=t.f,t.needLine&&(m.symbolNeedLines[n]=!0),t.noDot?m.symbolNoDot[n]=!0:m.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(m.symbolNoFill[n]=!0)});var h=m.symbolNames.length;function g(e,t){return m.symbolFuncs[e%100](t)+(200<=e?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(e){var t;return a(e)?e=+e:"string"==typeof e&&((t=0)<e.indexOf("-open")&&(t=100,e=e.replace("-open","")),0<e.indexOf("-dot")&&(t+=200,e=e.replace("-dot","")),0<=(e=m.symbolNames.indexOf(e))&&(e+=t)),h<=e%100||400<=e?0:Math.floor(Math.max(e,0))};var t={x1:1,x2:0,y1:0,y2:0},e={x1:0,x2:0,y1:1,y2:0},y=k.format("~.1f"),b={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:t},horizontalreversed:{node:"linearGradient",attrs:t,reversed:!0},vertical:{node:"linearGradient",attrs:e},verticalreversed:{node:"linearGradient",attrs:e,reversed:!0}};m.gradient=function(e,t,n,r,a,i){for(var o=a.length,s=b[r],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[y(100*(1-a[c][0])),a[c][1]]:l[c]=[y(100*a[c][0]),a[c][1]];var u=t._fullLayout,d="g"+u._uid+"-"+n,r=u._defs.select(".gradients").selectAll("#"+d).data([r+l.join(";")],S.identity);r.exit().remove(),r.enter().append(s.node).each(function(){var e=k.select(this);s.attrs&&e.attr(s.attrs),e.attr("id",d);e=e.selectAll("stop").data(l);e.exit().remove(),e.enter().append("stop"),e.each(function(e){var t=f(e[1]);k.select(this).attr({offset:e[0]+"%","stop-color":A.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(i,P(d,t)).style(i+"-opacity",null);i=function(e){return"."+e.attr("class").replace(/\s/g,".")},e=i(k.select(e.node().parentNode))+">"+i(e);u._gradientUrlQueryParts[e]=1},m.pattern=function(e,t,n,r,a,i,o,s,l,c,u,d){var f="legend"===t;s&&(u="overlay"===l?(c=s,A.contrast(c)):(c=void 0,s));var p,h,m,g,y,v,x,b,_,w,s=n._fullLayout,T="p"+s._uid+"-"+r,M={};switch(a){case"/":p=i*Math.sqrt(2),h=i*Math.sqrt(2),y="path",M={d:m="M-"+p/4+","+h/4+"l"+p/2+",-"+h/2+"M0,"+h+"L"+p+",0M"+p/4*3+","+h/4*5+"l"+p/2+",-"+h/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"\\":p=i*Math.sqrt(2),h=i*Math.sqrt(2),y="path",M={d:m="M"+p/4*3+",-"+h/4+"l"+p/2+","+h/2+"M0,0L"+p+","+h+"M-"+p/4+","+h/4*3+"l"+p/2+","+h/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"x":p=i*Math.sqrt(2),h=i*Math.sqrt(2),m="M-"+p/4+","+h/4+"l"+p/2+",-"+h/2+"M0,"+h+"L"+p+",0M"+p/4*3+","+h/4*5+"l"+p/2+",-"+h/2+"M"+p/4*3+",-"+h/4+"l"+p/2+","+h/2+"M0,0L"+p+","+h+"M-"+p/4+","+h/4*3+"l"+p/2+","+h/2,g=i-i*Math.sqrt(1-o),y="path",M={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case"|":y=y="path",M={d:m="M"+(p=i)/2+",0L"+p/2+","+(h=i),opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"-":y=y="path",M={d:m="M0,"+(h=p=i)/2+"L"+p+","+h/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"+":y="path",m="M"+(p=i)/2+",0L"+p/2+","+(h=i)+"M0,"+h/2+"L"+p+","+h/2,g=i-i*Math.sqrt(1-o),y="path",M={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case".":h=p=i,g=o<Math.PI/4?Math.sqrt(o*i*i/Math.PI):(v=o,x=Math.PI/4,b=1,_=i/2,w=i/Math.sqrt(2),_+(w-_)*(v-x)/(b-x)),y="circle",M={cx:p/2,cy:h/2,r:g,opacity:d,fill:u}}a=[a||"noSh",c||"noBg",u||"noFg",i,o].join(";"),a=s._defs.select(".patterns").selectAll("#"+T).data([a],S.identity);a.exit().remove(),a.enter().append("pattern").each(function(){var e,t=k.select(this);t.attr({id:T,width:p+"px",height:h+"px",patternUnits:"userSpaceOnUse",patternTransform:f?"scale(0.8)":""}),c&&((e=t.selectAll("rect").data([0])).exit().remove(),e.enter().append("rect").attr({width:p+"px",height:h+"px",fill:c}));t=t.selectAll(y).data([0]);t.exit().remove(),t.enter().append(y).attr(M)}),e.style("fill",P(T,n)).style("fill-opacity",null),e.classed("pattern_filled",!0);e="."+k.select(e.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";s._patternUrlQueryParts[e]=1},m.initGradients=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},m.initPatterns=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),e._patternUrlQueryParts={}},m.getPatternAttr=function(e,t,n){return e&&S.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},m.pointStyle=function(e,t,n){var r;e.size()&&(r=m.makePointStyleFns(t),e.each(function(e){m.singlePointStyle(e,k.select(this),t,r,n)}))},m.singlePointStyle=function(e,t,n,r,a){var i=n.marker,o=i.line;t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?i.opacity:e.mo),r.ms2mrc&&(u="various"===e.ms||"various"===i.size?3:r.ms2mrc(e.ms),e.mrc=u,r.selectedSizeFn&&(u=e.mrc=r.selectedSizeFn(e)),h=m.symbolNumber(e.mx||i.symbol)||0,e.om=100<=h%200,t.attr("d",g(h,u)));var s,l,c,u,d,f,p,h=!1;e.so?(l=o.outlierwidth,c=o.outliercolor,s=i.outliercolor):(f=(o||{}).width,l=(e.mlw+1||f+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,c="mlc"in e?e.mlcc=r.lineScale(e.mlc):S.isArrayOrTypedArray(o.color)?A.defaultLine:o.color,S.isArrayOrTypedArray(i.color)&&(s=A.defaultLine,h=!0),s="mc"in e?e.mcc=r.markerScale(e.mc):i.color||"rgba(0,0,0,0)",r.selectedColorFn&&(s=r.selectedColorFn(e))),e.om?t.call(A.stroke,s).style({"stroke-width":(l||1)+"px",fill:"none"}):(t.style("stroke-width",(e.isBlank?0:l)+"px"),u=i.gradient,(f=e.mgt)?h=!0:f=u&&u.type,S.isArrayOrTypedArray(f)&&(f=f[0],b[f]||(f=0)),r=(o=i.pattern)&&m.getPatternAttr(o.shape,e.i,""),f&&"none"!==f?((p=e.mgc)?h=!0:p=u.color,d=n.uid,h&&(d+="-"+e.i),m.gradient(t,a,d,f,[[0,p],[1,s]],"fill")):r?(i=m.getPatternAttr(o.bgcolor,e.i,null),u=m.getPatternAttr(o.fgcolor,e.i,null),h=o.fgopacity,d=m.getPatternAttr(o.size,e.i,8),f=m.getPatternAttr(o.solidity,e.i,.3),p=e.mcc||S.isArrayOrTypedArray(o.shape)||S.isArrayOrTypedArray(o.bgcolor)||S.isArrayOrTypedArray(o.size)||S.isArrayOrTypedArray(o.solidity),n=n.uid,p&&(n+="-"+e.i),m.pattern(t,"point",a,n,r,d,f,e.mcc,o.fillmode,i,u,h)):A.fill(t,s),l&&A.stroke(t,c))},m.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=m.tryColorscale(n,""),t.lineScale=m.tryColorscale(n,"line"),v.traceIs(e,"symbols")&&(t.ms2mrc=o.isBubble(e)?s(e):function(){return(n.size||6)/2}),e.selectedpoints&&S.extendFlat(t,m.makeSelectedPointStyleFns(e)),t},m.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},a=e.marker||{},i=n.marker||{},n=r.marker||{},r=a.opacity,o=i.opacity,s=n.opacity,l=void 0!==o,c=void 0!==s;(S.isArrayOrTypedArray(r)||l||c)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?a.opacity:e.mo;return e.selected?l?o:t:c?s:x*t});var u=a.color,d=i.color,f=n.color;(d||f)&&(t.selectedColorFn=function(e){var t=e.mcc||u;return e.selected?d||t:f||t});var p=a.size,h=i.size,m=n.size,g=void 0!==h,y=void 0!==m;return v.traceIs(e,"symbols")&&(g||y)&&(t.selectedSizeFn=function(e){var t=e.mrc||p/2;return e.selected?g?h/2:t:y?m/2:t}),t},m.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},e=e.textfont||{},n=n.textfont||{},r=r.textfont||{},a=e.color,i=n.color,o=r.color;return t.selectedTextColorFn=function(e){var t=e.tc||a;return e.selected?i||t:o||(i?t:A.addOpacity(t,x))},t},m.selectedPointStyle=function(e,t){var a,i,r;e.size()&&t.selectedpoints&&(a=m.makeSelectedPointStyleFns(t),i=t.marker||{},r=[],a.selectedOpacityFn&&r.push(function(e,t){e.style("opacity",a.selectedOpacityFn(t))}),a.selectedColorFn&&r.push(function(e,t){A.fill(e,a.selectedColorFn(t))}),a.selectedSizeFn&&r.push(function(e,t){var n=t.mx||i.symbol||0,r=a.selectedSizeFn(t);e.attr("d",g(m.symbolNumber(n),r)),t.mrc2=r}),r.length&&e.each(function(e){for(var t=k.select(this),n=0;n<r.length;n++)r[n](t,e)}))},m.tryColorscale=function(e,t){t=t?S.nestedProperty(e,t).get():e;if(t){e=t.color;if((t.colorscale||t._colorAx)&&S.isArrayOrTypedArray(e))return r.makeColorScaleFuncFromTrace(t)}return S.identity};var _={start:1,end:-1,middle:0,bottom:1,top:-1};function w(e,t,n,r){var a=k.select(e.node().parentNode),i=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",o=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",s=r?r/.8+1:0,t=(d.lineCount(e)-1)*c+1,r=_[o]*s,n=.75*n+_[i]*s+(_[i]-1)*t*n/2;e.attr("text-anchor",o),a.attr("transform",l(r,n))}function T(e,t){t=e.ts||t.textfont.size;return a(t)&&0<t?t:0}m.textPointStyle=function(e,o,s){var l,c,u;e.size()&&(o.selectedpoints&&(l=m.makeSelectedTextStyleFns(o).selectedTextColorFn),c=o.texttemplate,u=s._fullLayout,e.each(function(e){var t,n,r,a=k.select(this),i=c?S.extractOption(e,o,"txt","texttemplate"):S.extractOption(e,o,"tx","text");i||0===i?(c&&(t=(r=o._module.formatLabels)?r(e,o,u):{},p(n={},o,e.i),r=o._meta||{},i=S.texttemplateString(i,t,u._d3locale,n,e,r)),t=e.tp||o.textposition,n=T(e,o),r=l?l(e):e.tc||o.textfont.color,a.call(m.font,e.tf||o.textfont.family,n,r).text(i).call(d.convertToTspans,s).call(w,t,n,e.mrc)):a.remove()}))},m.selectedTextStyle=function(e,i){var o;e.size()&&i.selectedpoints&&(o=m.makeSelectedTextStyleFns(i),e.each(function(e){var t=k.select(this),n=o.selectedTextColorFn(e),r=e.tp||i.textposition,a=T(e,i);A.fill(t,n),w(t,r,a,e.mrc2||e.mrc)}))};var M=.5;function E(e,t,n,r){var a=e[0]-t[0],i=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],e=Math.pow(a*a+i*i,M/2),n=Math.pow(o*o+s*s,M/2),o=(n*n*a-e*e*o)*r,s=(n*n*i-e*e*s)*r,r=3*n*(e+n),n=3*e*(e+n);return[[k.round(t[0]+(r&&o/r),2),k.round(t[1]+(r&&s/r),2)],[k.round(t[0]-(n&&o/n),2),k.round(t[1]-(n&&s/n),2)]]}m.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");for(var n="M"+e[0],r=[],a=1;a<e.length-1;a++)r.push(E(e[a-1],e[a],e[a+1],t));for(n+="Q"+r[0][0]+" "+e[1],a=2;a<e.length-1;a++)n+="C"+r[a-2][1]+" "+r[a-1][0]+" "+e[a];return n+="Q"+r[e.length-3][1]+" "+e[e.length-1]},m.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";for(var n="M"+e[0],r=e.length-1,a=[E(e[r],e[0],e[1],t)],i=1;i<r;i++)a.push(E(e[i-1],e[i],e[i+1],t));for(a.push(E(e[r-1],e[r],e[0],t)),i=1;i<=r;i++)n+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i];return n+="C"+a[r][1]+" "+a[0][0]+" "+e[0]+"Z"};function L(e,t){return"L"+k.round(t[0],2)+","+k.round(t[1],2)}var C={hv:function(e,t){return"H"+k.round(t[0],2)+"V"+k.round(t[1],2)},vh:function(e,t){return"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},hvh:function(e,t){return"H"+k.round((e[0]+t[0])/2,2)+"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},vhv:function(e,t){return"V"+k.round((e[1]+t[1])/2,2)+"H"+k.round(t[0],2)+"V"+k.round(t[1],2)}};m.steps=function(e){var r=C[e]||L;return function(e){for(var t="M"+k.round(e[0][0],2)+","+k.round(e[0][1],2),n=1;n<e.length;n++)t+=r(e[n-1],e[n]);return t}},m.makeTester=function(){var e=S.ensureSingleById(k.select("body"),"svg","js-plotly-tester",function(e){e.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=S.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=e,m.testref=t},m.savedBBoxes={};var D=0;function O(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function P(e,t){if(!e)return null;t=t._context,t=!t._exportedPlot&&t._baseUrl||"";return t?"url('"+t+"#"+e+"')":"url(#"+e+")"}m.bBox=function(e,t,n){var r,a;if(n=n||O(e)){if(c=m.savedBBoxes[n])return S.extendFlat({},c)}else if(1===e.childNodes.length){var i=e.childNodes[0];if(n=O(i)){var o=+i.getAttribute("x")||0,s=+i.getAttribute("y")||0,l=i.getAttribute("transform");if(!l){i=m.bBox(i,!1,n);return o&&(i.left+=o,i.right+=o),s&&(i.top+=s,i.bottom+=s),i}if(c=m.savedBBoxes[n+="~"+o+"~"+s+"~"+l])return S.extendFlat({},c)}}t?r=e:(a=m.tester.node(),r=e.cloneNode(!0),a.appendChild(r)),k.select(r).attr("transform",null).call(d.positionText,0,0);var c=r.getBoundingClientRect(),e=m.testref.node().getBoundingClientRect();t||a.removeChild(r);e={height:c.height,width:c.width,left:c.left-e.left,top:c.top-e.top,right:c.right-e.left,bottom:c.bottom-e.top};return 1e4<=D&&(m.savedBBoxes={},D=0),n&&(m.savedBBoxes[n]=e),D++,S.extendFlat({},e)},m.setClipUrl=function(e,t,n){e.attr("clip-path",P(t,n))},m.getTranslate=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},m.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=l(t,n)).trim(),e[a]("transform",r),r},m.getScale=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},m.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+="scale("+t+","+n+")").trim(),e[a]("transform",r),r};var I=/\s*sc.*/;m.setPointGroupScale=function(e,t,n){var r;t=t||1,n=n||1,e&&(r=1===t&&1===n?"":"scale("+t+","+n+")",e.each(function(){var e=(this.getAttribute("transform")||"").replace(I,""),e=(e+=r).trim();this.setAttribute("transform",e)}))};var R=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(e,a,i){e&&e.each(function(){var e,t,n=k.select(this),r=n.select("text");r.node()&&(e=parseFloat(r.attr("x")||0),t=parseFloat(r.attr("y")||0),r=(n.attr("transform")||"").match(R),t=1===a&&1===i?[]:[l(e,t),"scale("+a+","+i+")",l(-e,-t)],r&&t.push(r),n.attr("transform",t.join("")))})}},{"../../components/fx/helpers":136,"../../constants/alignment":205,"../../constants/interactions":209,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../lib/svg_text_utils":252,"../../registry":313,"../../traces/scatter/make_bubble_size_func":370,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale":112,"./symbol_defs":123,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],123:[function(e,t,n){"use strict";var c=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){e=c.round(e,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(e){var t=c.round(.4*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H"+t+"V"+e+"H-"+t+"V"+t+"H-"+e+"V-"+t+"H-"+t+"V-"+e+"H"+t+"V-"+t+"H"+e+"Z"}},x:{n:4,f:function(e){var t=c.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,r="l"+t+",-"+t,a="l-"+t+",-"+t,e="l-"+t+","+t;return"M0,"+t+n+r+a+r+a+e+a+e+n+e+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+","+c.round(e/2,2)+"H"+t+"L0,-"+c.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+c.round(e/2,2)+"H"+t+"L0,"+c.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M"+c.round(e/2,2)+",-"+t+"V"+t+"L-"+c.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+c.round(e/2,2)+",-"+t+"V"+t+"L"+c.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+e+",-"+t+"H"+t+"V"+e+"Z"}},"triangle-se":{n:10,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+t+",-"+e+"V"+t+"H-"+e+"Z"}},"triangle-sw":{n:11,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H-"+t+"V-"+e+"Z"}},"triangle-nw":{n:12,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+t+","+e+"V-"+t+"H"+e+"Z"}},pentagon:{n:13,f:function(e){var t=c.round(.951*e,2),n=c.round(.588*e,2),r=c.round(-e,2),a=c.round(-.309*e,2);return"M"+t+","+a+"L"+n+","+c.round(.809*e,2)+"H-"+n+"L-"+t+","+a+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M"+e+",-"+n+"V"+n+"L0,"+t+"L-"+e+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+e+"H"+n+"L"+t+",0L"+n+",-"+e+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=c.round(.924*e,2),e=c.round(.383*e,2);return"M-"+e+",-"+t+"H"+e+"L"+t+",-"+e+"V"+e+"L"+e+","+t+"H-"+e+"L-"+t+","+e+"V-"+e+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=c.round(.225*t,2),r=c.round(.951*t,2),a=c.round(.363*t,2),i=c.round(.588*t,2),o=c.round(-t,2),s=c.round(-.309*t,2),l=c.round(.118*t,2),e=c.round(.809*t,2);return"M"+n+","+s+"H"+r+"L"+a+","+l+"L"+i+","+e+"L0,"+c.round(.382*t,2)+"L-"+i+","+e+"L-"+a+","+l+"L-"+r+","+s+"H-"+n+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=c.round(.66*e,2),n=c.round(.38*e,2),e=c.round(.76*e,2);return"M-"+e+",0l-"+n+",-"+t+"h"+e+"l"+n+",-"+t+"l"+n+","+t+"h"+e+"l-"+n+","+t+"l"+n+","+t+"h-"+e+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+","+n+e+t+","+n+e+"0,-"+r+e+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M"+t+",-"+n+e+"-"+t+",-"+n+e+"0,"+r+e+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=c.round(1.1*e,2),e=c.round(2*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",-"+t+e+"-"+t+","+t+e+t+","+t+e+t+",-"+t+e+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=c.round(1.4*e,2),e=c.round(1.9*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",0"+e+"0,"+t+e+t+",0"+e+"0,-"+t+e+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=c.round(.7*e,2),e=c.round(1.4*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=c.round(1.4*e,2),e=c.round(.7*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(e){e=c.round(e,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=c.round(e,2),e=c.round(e/Math.sqrt(2),2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=c.round(1.3*e,2),e=c.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+e+",-"+e+"L"+e+","+e+"M-"+e+","+e+"L"+e+",-"+e},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=c.round(1.2*e,2),e=c.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=c.round(e/2,2),e=c.round(e,2);return"M"+t+","+e+"V-"+e+"m-"+e+",0V"+e+"M"+e+","+t+"H-"+e+"m0,-"+e+"H"+e},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+","+e+"L0,0M"+t+","+e+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+",-"+e+"L0,0M"+t+",-"+e+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M"+e+","+t+"L0,0M"+e+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+e+","+t+"L0,0M-"+e+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){e=c.round(1.4*e,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){e=c.round(e,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L-"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L-"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":11}],124:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],125:[function(e,t,n){"use strict";var f=e("fast-isnumeric"),s=e("../../registry"),p=e("../../plots/cartesian/axes"),h=e("../../lib"),m=e("./compute_error");function l(e,t,n,r){var a=t["error_"+r]||{},i=[];if(a.visible&&-1!==["linear","log"].indexOf(n.type)){for(var o=m(a),s=0;s<e.length;s++){var l=e[s],c=l.i;if(void 0===c)c=s;else if(null===c)continue;var u,d=l[r];f(n.c2l(d))&&(u=o(d,c),f(u[0])&&f(u[1])&&(c=l[r+"s"]=d-u[0],u=l[r+"h"]=d+u[1],i.push(c,u)))}a=n._id,t=t._extremes[a],a=p.findExtremes(n,i,h.extendFlat({tozero:t.opts.tozero},{padded:!0}));t.min=t.min.concat(a.min),t.max=t.max.concat(a.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r,a,i=t[n],o=i[0].trace;!0===o.visible&&s.traceIs(o,"errorBarsOK")&&(r=p.getFromId(e,o.xaxis),a=p.getFromId(e,o.yaxis),l(i,o,r,"x"),l(i,o,a,"y"))}}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./compute_error":126,"fast-isnumeric":15}],126:[function(e,t,n){"use strict";function s(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var r=e.array||[];if(n)return function(e,t){t=+r[t];return[t,t]};var a=e.arrayminus||[];return function(e,t){var n=+r[t],t=+a[t];return isNaN(n)&&isNaN(t)?[NaN,NaN]:[t||0,n||0]}}var i=s(t,e.value),o=s(t,e.valueminus);return n||void 0===e.valueminus?function(e){e=i(e);return[e,e]}:function(e){return[o(e),i(e)]}}},{}],127:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../registry"),u=e("../../lib"),d=e("../../plot_api/plot_template"),f=e("./attributes");t.exports=function(e,t,n,r){var a="error_"+r.axis,i=d.newContainer(t,a),o=e[a]||{};function s(e,t){return u.coerce(o,i,f,e,t)}!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)&&(e=!0,"sqrt"!==(a=s("type","array"in o?"data":"percent"))&&(e=s("symmetric",!(("data"===a?"arrayminus":"valueminus")in o))),"data"===a?(s("array"),s("traceref"),e||(s("arrayminus"),s("tracerefminus"))):"percent"!==a&&"constant"!==a||(s("value"),e||s("valueminus")),e="copy_"+r.inherit+"style",r.inherit&&(t["error_"+r.inherit]||{}).visible&&s(e,!(o.color||l(o.thickness)||l(o.width))),r.inherit&&i[e]||(s("color",n),s("thickness"),s("width",c.traceIs(t,"gl3d")?0:4)))}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"./attributes":124,"fast-isnumeric":15}],128:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plot_api/edit_types").overrideAll,i=e("./attributes"),o={error_x:r.extendFlat({},i),error_y:r.extendFlat({},i)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;i={error_x:r.extendFlat({},i),error_y:r.extendFlat({},i),error_z:r.extendFlat({},i)};delete i.error_x.copy_ystyle,delete i.error_y.copy_ystyle,delete i.error_z.copy_ystyle,delete i.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(i,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":230,"../../plot_api/edit_types":258,"./attributes":124,"./calc":125,"./compute_error":126,"./defaults":127,"./plot":129,"./style":130}],129:[function(e,t,n){"use strict";var f=e("@plotly/d3"),p=e("fast-isnumeric"),h=e("../drawing"),m=e("../../traces/scatter/subtypes");t.exports=function(r,e,a,l){var c=a.xaxis,u=a.yaxis,d=l&&0<l.duration;e.each(function(e){var t=e[0].trace,i=t.error_x||{},o=t.error_y||{};t.ids&&(n=function(e){return e.id});var s=m.hasMarkers(t)&&0<t.marker.maxdisplayed;o.visible||i.visible||(e=[]);var n=f.select(this).selectAll("g.errorbar").data(e,n);n.exit().remove(),e.length&&(i.visible||n.selectAll("path.xerror").remove(),o.visible||n.selectAll("path.yerror").remove(),n.style("opacity",1),e=n.enter().append("g").classed("errorbar",!0),d&&e.style("opacity",0).transition().duration(l.duration).style("opacity",1),h.setClipUrl(n,a.layerClipId,r),n.each(function(e){var t,n,r=f.select(this),a=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),p(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),p(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,c,u);s&&!e.vis||(e=r.select("path.yerror"),o.visible&&p(a.x)&&p(a.yh)&&p(a.ys)?(n=o.width,t="M"+(a.x-n)+","+a.yh+"h"+2*n+"m-"+n+",0V"+a.ys,a.noYS||(t+="m-"+n+",0h"+2*n),!e.size()?e=r.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(e=e.transition().duration(l.duration).ease(l.easing)),e.attr("d",t)):e.remove(),n=r.select("path.xerror"),i.visible&&p(a.y)&&p(a.xh)&&p(a.xs)?(e=(i.copy_ystyle?o:i).width,t="M"+a.xh+","+(a.y-e)+"v"+2*e+"m0,-"+e+"H"+a.xs,a.noXS||(t+="m0,-"+e+"v"+2*e),!n.size()?n=r.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(n=n.transition().duration(l.duration).ease(l.easing)),n.attr("d",t)):n.remove())}))})}},{"../../traces/scatter/subtypes":378,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],130:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},e=t.error_x||{},t=r.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(a.stroke,n.color),e.copy_ystyle&&(e=n),t.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(a.stroke,e.color)})}},{"../color":100,"@plotly/d3":11}],131:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("./layout_attributes").hoverlabel,e=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:e({},a.bgcolor,{arrayOk:!0}),bordercolor:e({},a.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:e({},a.align,{arrayOk:!0}),namelength:e({},a.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":224,"../../plots/font_attributes":305,"./layout_attributes":141}],132:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");function c(e,t,n,r){r=r||s.identity,Array.isArray(e)&&(t[0][n]=r(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;for(var r=0;r<t.length;r++){var a,i=t[r],o=i[0].trace;l.traceIs(o,"pie-like")||((a=l.traceIs(o,"2dMap")?c:s.fillArray)(o.hoverinfo,i,"hi",function(t){return function(e){return s.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}(o)),o.hovertemplate&&a(o.hovertemplate,i,"ht"),o.hoverlabel&&(a(o.hoverlabel.bgcolor,i,"hbg"),a(o.hoverlabel.bordercolor,i,"hbc"),a(o.hoverlabel.font.size,i,"hts"),a(o.hoverlabel.font.color,i,"htc"),a(o.hoverlabel.font.family,i,"htf"),a(o.hoverlabel.namelength,i,"hnl"),a(o.hoverlabel.align,i,"hta")))}}},{"../../lib":230,"../../registry":313}],133:[function(e,t,n){"use strict";var i=e("../../registry"),o=e("./hover").hover;t.exports=function(e,t,n){var r=i.getComponentMethod("annotations","onClick")(e,e._hoverdata);function a(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&o(e,t,n,!0),e._hoverdata&&t&&t.target&&(r&&r.then?r.then(a):a(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":313,"./hover":137}],134:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],135:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./attributes"),o=e("./hoverlabel_defaults");t.exports=function(n,r,e,t){t=a.extendFlat({},t.hoverlabel);r.hovertemplate&&(t.namelength=-1),o(n,r,function(e,t){return a.coerce(n,r,i,e,t)},t)}},{"../../lib":230,"./attributes":131,"./hoverlabel_defaults":138}],136:[function(e,t,o){"use strict";var u=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},o.isTraceInSubplots=function(e,t){if("splom"!==e.type)return-1!==t.indexOf(o.getSubplot(e));for(var n=e.xaxes||[],r=e.yaxes||[],a=0;a<n.length;a++)for(var i=0;i<r.length;i++)if(-1!==t.indexOf(n[a]+r[i]))return!0;return!1},o.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},o.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},o.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||o.quadrature(t,n):"x"===e.charAt(0)?t:n},o.getClosest=function(e,t,n){if(!1!==n.index)0<=n.index&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var a=t(e[r]);a<=n.distance&&(n.index=r,n.distance=a)}return n},o.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},o.quadrature=function(n,r){return function(e){var t=n(e),e=r(e);return Math.sqrt(t*t+e*e)}},o.makeEventData=function(e,t,n){var r,a="index"in e?e.index:e.pointNumber,i={data:t._input,fullData:t,curveNumber:t.index,pointNumber:a};return t._indexToPoints?1===(r=t._indexToPoints[a]).length?i.pointIndex=r[0]:i.pointIndices=r:i.pointIndex=a,t._module.eventData?i=t._module.eventData(i,e,t,n,a):("xVal"in e?i.x=e.xVal:"x"in e&&(i.x=e.x),"yVal"in e?i.y=e.yVal:"y"in e&&(i.y=e.y),e.xa&&(i.xaxis=e.xa),e.ya&&(i.yaxis=e.ya),void 0!==e.zLabelVal&&(i.z=e.zLabelVal)),o.appendArrayPointValue(i,t,a),i},o.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var i=r[a],o=d(i);void 0!==e[o]||void 0!==(i=f(u.nestedProperty(t,i).get(),n))&&(e[o]=i)}},o.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var i=r[a],o=d(i);if(void 0===e[o]){for(var s=u.nestedProperty(t,i).get(),l=new Array(n.length),c=0;c<n.length;c++)l[c]=f(s,n[c]);e[o]=l}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function d(e){return n[e]||e}function f(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var r={x:!0,y:!0},a={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(e){return"string"==typeof e&&!!a[e]},o.isXYhover=function(e){return"string"==typeof e&&!!r[e]}},{"../../lib":230}],137:[function(e,t,n){"use strict";var te=e("@plotly/d3"),ne=e("fast-isnumeric"),_=e("tinycolor2"),re=e("../../lib"),D=re.strTranslate,O=re.strRotate,ae=e("../../lib/events"),P=e("../../lib/svg_text_utils"),ie=e("../../lib/override_cursor"),I=e("../drawing"),oe=e("../color"),se=e("../dragelement"),le=e("../../plots/cartesian/axes"),ce=e("../../registry"),ue=e("./helpers"),R=e("./constants"),N=e("../legend/defaults"),z=e("../legend/draw"),F=R.YANGLE,e=Math.PI*F/180,de=1/Math.sin(e),y=Math.cos(e),v=Math.sin(e),j=R.HOVERARROWSIZE,H=R.HOVERTEXTPAD,fe={box:!0,ohlc:!0,violin:!0,candlestick:!0};function pe(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}n.hover=function(e,t,n,r){e=re.getGraphDiv(e),re.throttle(e._fullLayout._uid+R.HOVERID,R.HOVERMINTIME,function(){!function(e,l,t,n){t=t||"xy";var c=Array.isArray(t)?t:[t],u=e._fullLayout,r=u._plots||[],t=r[t],d=u._has("cartesian");t&&(t=t.overlays.map(function(e){return e.id}),c=c.concat(t));for(var a=c.length,f=new Array(a),p=new Array(a),i=!1,o=0;o<a;o++){var s=c[o];if(r[s])i=!0,f[o]=r[s].xaxis,p[o]=r[s].yaxis;else{if(!u[s]||!u[s]._subplot)return re.warn("Unrecognized subplot: "+s);s=u[s]._subplot;f[o]=s.xaxis,p[o]=s.yaxis}}var h=l.hovermode||u.hovermode;h&&!i&&(h="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(h)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return se.unhoverRaw(e,l);var m=u.hoverdistance;-1===m&&(m=1/0);var g=u.spikedistance;-1===g&&(g=1/0);var y,v,x,b,_,w,T,M,k,A,S,E,L,C=[],D=[],O={hLinePoint:null,vLinePoint:null},P=!1;if(Array.isArray(l))for(h="array",x=0;x<l.length;x++)(_=e.calcdata[l[x].curveNumber||0])&&(w=_[0].trace,"skip"!==_[0].trace.hoverinfo&&(D.push(_),"h"===w.orientation&&(P=!0)));else{for(b=0;b<e.calcdata.length;b++)_=e.calcdata[b],"skip"!==(w=_[0].trace).hoverinfo&&ue.isTraceInSubplots(w,c)&&(D.push(_),"h"===w.orientation&&(P=!0));if(!l.target)j="xpx"in l?l.xpx:f[0]._length/2,H="ypx"in l?l.ypx:p[0]._length/2;else{if(!1===ae.triggerHandler(e,"plotly_beforehover",l))return;var I=l.composedPath&&l.composedPath()[0],I=(I=I||l.target).getBoundingClientRect();j=l.clientX-I.left,H=l.clientY-I.top,u._calcInverseTransform(e);I=re.apply3DTransform(u._invTransform)(j,H);if(j=I[0],H=I[1],j<0||j>f[0]._length||H<0||H>p[0]._length)return se.unhoverRaw(e,l)}if(l.pointerX=j+f[0]._offset,l.pointerY=H+p[0]._offset,y="xval"in l?ue.flat(c,l.xval):ue.p2c(f,j),v="yval"in l?ue.flat(c,l.yval):ue.p2c(p,H),!ne(y[0])||!ne(v[0]))return re.warn("Fx.hover failed",l,e),se.unhoverRaw(e,l)}var R=1/0;function N(e,t){for(b=0;b<D.length;b++)if((_=D[b])&&_[0]&&_[0].trace&&!0===(w=_[0].trace).visible&&0!==w._length&&-1===["carpet","contourcarpet"].indexOf(w._module.name)){var n,r,a;if("splom"===w.type?T=c[M=0]:(T=ue.getSubplot(w),M=c.indexOf(T)),k=h,ue.isUnifiedHover(k)&&(k=k.charAt(0)),E={cd:_,trace:w,xa:f[M],ya:p[M],maxHoverDistance:m,maxSpikeDistance:g,index:!1,distance:Math.min(R,m),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:oe.defaultLine,name:w.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[T]&&(E.subplot=u[T]._subplot),u._splomScenes&&u._splomScenes[w.uid]&&(E.scene=u._splomScenes[w.uid]),L=C.length,"array"===k?"pointNumber"in(r=l[b])?(E.index=r.pointNumber,k="closest"):(k="","xval"in r&&(A=r.xval,k="x"),"yval"in r&&(S=r.yval,k=k?"closest":"y")):S=void 0!==e&&void 0!==t?(A=e,t):(A=y[M],v[M]),0!==m)if(w._module&&w._module.hoverPoints){var i=w._module.hoverPoints(E,A,S,k,{finiteRange:!0,hoverLayer:u._hoverlayer});if(i)for(var o,s=0;s<i.length;s++)o=i[s],ne(o.x0)&&ne(o.y0)&&C.push(function(r,e){var n=r.index,a=r.trace||{},i=r.cd[0],o=r.cd[n]||{};function s(e){return e||ne(e)&&0===e}var l=Array.isArray(n)?function(e,t){e=re.castOption(i,n,e);return s(e)?e:re.extractOption({},a,"",t)}:function(e,t){return re.extractOption(o,a,e,t)};function t(e,t,n){n=l(t,n);s(n)&&(r[e]=n)}t("hoverinfo","hi","hoverinfo"),t("bgcolor","hbg","hoverlabel.bgcolor"),t("borderColor","hbc","hoverlabel.bordercolor"),t("fontFamily","htf","hoverlabel.font.family"),t("fontSize","hts","hoverlabel.font.size"),t("fontColor","htc","hoverlabel.font.color"),t("nameLength","hnl","hoverlabel.namelength"),t("textAlign","hta","hoverlabel.align"),r.posref="y"===e||"closest"===e&&"h"===a.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=re.constrain(r.x0,0,r.xa._length),r.x1=re.constrain(r.x1,0,r.xa._length),r.y0=re.constrain(r.y0,0,r.ya._length),r.y1=re.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:le.hoverLabelText(r.xa,r.xLabelVal,a.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal));void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:le.hoverLabelText(r.ya,r.yLabelVal,a.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal));void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal));isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0||(c=le.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text,void 0!==r.xerrneg?r.xLabel+=" +"+c+" / -"+le.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+="  "+c,"x"===e&&(r.distance+=1));{var c;isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0||(c=le.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text,void 0!==r.yerrneg?r.yLabel+=" +"+c+" / -"+le.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+="  "+c,"y"===e&&(r.distance+=1))}e=r.hoverinfo||r.trace.hoverinfo;e&&"all"!==e&&(-1===(e=Array.isArray(e)?e:e.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===e.indexOf("y")&&(r.yLabel=void 0),-1===e.indexOf("z")&&(r.zLabel=void 0),-1===e.indexOf("text")&&(r.text=void 0),-1===e.indexOf("name")&&(r.name=void 0));return r}(o,h))}else re.log("Unrecognized trace type in hover:",w);"closest"===h&&C.length>L&&(C.splice(0,L),R=C[0].distance),d&&0!==g&&0===C.length&&(E.distance=g,E.index=!1,(a=(a=w._module.hoverPoints(E,A,S,"closest",{hoverLayer:u._hoverlayer}))&&a.filter(function(e){return e.spikeDistance<=g}))&&a.length&&((r=a.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap})).length&&(r=r[0],ne(r.x0)&&ne(r.y0)&&(n=F(r),(!O.vLinePoint||O.vLinePoint.spikeDistance>n.spikeDistance)&&(O.vLinePoint=n))),(a=a.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap})).length&&(a=a[0],ne(a.x0)&&ne(a.y0)&&(n=F(a),(!O.hLinePoint||O.hLinePoint.spikeDistance>n.spikeDistance)&&(O.hLinePoint=n)))))}}function z(e,t){for(var n,r=null,a=1/0,i=0;i<e.length;i++)(n=e[i].spikeDistance)<=a&&n<=t&&(r=e[i],a=n);return r}function F(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}N();var I={fullLayout:u,container:u._hoverlayer,outerContainer:u._paperdiv,event:l},j=e._spikepoints,H={vLinePoint:O.vLinePoint,hLinePoint:O.hLinePoint};e._spikepoints=H,!d||0===g||0!==C.length&&(B=z(C.filter(function(e){return e.ya.showspikes}),g),O.hLinePoint=F(B),B=z(C.filter(function(e){return e.xa.showspikes}),g),O.vLinePoint=F(B));if(0===C.length){var B=se.unhoverRaw(e,l);return!d||null===O.hLinePoint&&null===O.vLinePoint||ye(j)&&ge(e,O,I)}d&&ye(j)&&ge(e,O,I);var q,I=function(){C.sort(function(e,t){return e.distance-t.distance}),C=function(e,t){for(var n=t.charAt(0),r=[],a=[],i=[],o=0;o<e.length;o++){var s=e[o];(ce.traceIs(s.trace,"bar-like")||ce.traceIs(s.trace,"box-violin")?i:s.trace[n+"period"]?a:r).push(s)}return r.concat(a).concat(i)}(C,h)};if(I(),ue.isXYhover(k)&&0!==C[0].length&&"splom"!==C[0].trace.type){var U=C[0],Y=(C=fe[U.trace.type]?C.filter(function(e){return e.trace.index===U.trace.index}):[U]).length,V=ve("x",U,u),G=ve("y",U,u);N(V,G);var W=[],Z={},$=0,X=function(e){var t,n,r=fe[e.trace.type]?pe(e):e.trace.index;Z[r]?(t=Z[r]-1,n=W[t],0<t&&Math.abs(e.distance)<Math.abs(n.distance)&&(W[t]=e)):($++,Z[r]=$,W.push(e))};for(q=0;q<Y;q++)X(C[q]);for(q=C.length-1;Y-1<q;q--)X(C[q]);C=W,I()}var V=e._hoverdata,J=[];for(x=0;x<C.length;x++){var K,Q=C[x],ee=ue.makeEventData(Q,Q.trace,Q.cd);!1!==Q.hovertemplate&&(K=!1,Q.cd[Q.index]&&Q.cd[Q.index].ht&&(K=Q.cd[Q.index].ht),Q.hovertemplate=K||Q.trace.hovertemplate||!1),Q.eventData=[ee],J.push(ee)}e._hoverdata=J;G="y"===h&&(1<D.length||1<C.length)||"closest"===h&&P&&1<C.length,I=oe.combine(u.plot_bgcolor||oe.background,u.paper_bgcolor),I={hovermode:h,rotateLabels:G,bgColor:I,container:u._hoverlayer,outerContainer:u._paperdiv,commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance},I=he(C,I,e);ue.isUnifiedHover(h)||(function(e,r,a){var i,o,s,l,c,u,t,n=0,d=1,f=e.size(),p=new Array(f),h=0;function m(e){var t=e[0],n=e[e.length-1];if(o=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,.01<o){for(c=e.length-1;0<=c;c--)e[c].dp+=o;i=!1}if(!(s<.01)){if(o<-.01){for(c=e.length-1;0<=c;c--)e[c].dp-=s;i=!1}if(i){var r=0;for(l=0;l<e.length;l++)(u=e[l]).pos+u.dp+u.size>t.pmax&&r++;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos>t.pmax-1&&(u.del=!0,r--);for(l=0;l<e.length&&!(r<=0);l++)if((u=e[l]).pos<t.pmin+1)for(u.del=!0,r--,s=2*u.size,c=e.length-1;0<=c;c--)e[c].dp-=s;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos+u.dp+u.size>t.pmax&&(u.del=!0,r--)}}}e.each(function(e){var t=e[r],n="x"===t._id.charAt(0),t=t.range;0===h&&t&&t[0]>t[1]!=n&&(d=-1),p[h++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(n?de:1)/2,pmin:0,pmax:n?a.width:a.height}]}),p.sort(function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)});for(;!i&&n<=f;){for(n++,i=!0,l=0;l<p.length-1;){var g=p[l],y=p[l+1],v=g[g.length-1],x=y[0];if(.01<(o=v.pos+v.dp+v.size-x.pos-x.dp+x.size)&&v.pmin===x.pmin&&v.pmax===x.pmax){for(c=y.length-1;0<=c;c--)y[c].dp+=o;for(g.push.apply(g,y),p.splice(l+1,1),t=0,c=g.length-1;0<=c;c--)t+=g[c].dp;for(s=t/g.length,c=g.length-1;0<=c;c--)g[c].dp-=s;i=!1}else l++}p.forEach(m)}for(l=p.length-1;0<=l;l--){var b=p[l];for(c=b.length-1;0<=c;c--){var _=b[c],w=_.datum;w.offset=_.dp,w.del=_.del}}}(I,G?"xa":"ya",u),me(I,G,u._invScaleX,u._invScaleY));l.target&&l.target.tagName&&(G=ce.getComponentMethod("annotations","hasClickToShow")(e,J),ie(te.select(l.target),G?"pointer":""));l.target&&!n&&function(e,t){if(!t||t.length!==e._hoverdata.length)return!0;for(var n=t.length-1;0<=n;n--){var r=t[n],a=e._hoverdata[n];if(r.curveNumber!==a.curveNumber||String(r.pointNumber)!==String(a.pointNumber)||String(r.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(e,V)&&(V&&e.emit("plotly_unhover",{event:l,points:V}),e.emit("plotly_hover",{event:l,points:e._hoverdata,xaxes:f,yaxes:p,xvals:y,yvals:v}))}(e,t,n,r)})},n.loneHover=function(e,r){var t=!0;Array.isArray(e)||(t=!1,e=[e]);var n=e.map(function(e){return{color:e.color||oe.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,eventData:e.eventData||!1,hovertemplateLabels:e.hovertemplateLabels||!1}}),a=te.select(r.container),i=r.outerContainer?te.select(r.outerContainer):a,e={hovermode:"closest",rotateLabels:!1,bgColor:r.bgColor||oe.background,container:a,outerContainer:i},a=he(n,e,r.gd),o=0,s=0;a.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var n=e.y0-e.by/2;e.offset=n-5<o?o-n+5:0,o=n+e.by+e.offset,t===r.anchorIndex&&(s=e.offset)}).each(function(e){e.offset-=s});i=r.gd._fullLayout._invScaleX,n=r.gd._fullLayout._invScaleY;return me(a,e.rotateLabels,i,n),t?a:a.node()};var l=/<extra>([\s\S]*)<\/extra>/;function he(e,t,g){var y=g._fullLayout,v=t.hovermode,h=t.rotateLabels,m=t.bgColor,n=t.container,r=t.outerContainer,x=t.commonLabelOpts||{},b=t.fontFamily||R.HOVERFONT,_=t.fontSize||R.HOVERFONTSIZE,w=e[0],T=w.xa,M=w.ya,a=v.charAt(0),k=w[a+"Label"],i=r.node().getBoundingClientRect(),A=i.top,S=i.width,E=i.height,L=void 0!==k&&w.distance<=t.hoverdistance&&("x"===v||"y"===v);if(L){for(var o=!0,s=0;s<e.length;s++)if(o&&void 0===e[s].zLabel&&(o=!1),l=e[s].hoverinfo||e[s].trace.hoverinfo){var l=Array.isArray(l)?l:l.split("+");if(-1===l.indexOf("all")&&-1===l.indexOf(v)){L=!1;break}}o&&(L=!1)}var c=n.selectAll("g.axistext").data(L?[0]:[]);if(c.enter().append("g").classed("axistext",!0),c.exit().remove(),c.each(function(){var e=te.select(this),t=re.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})}),n=re.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)}),r=x.bgcolor||oe.defaultLine,a=x.bordercolor||oe.contrast(r),i=oe.contrast(r),o={family:x.font.family||b,size:x.font.size||_,color:x.font.color||i};t.style({fill:r,stroke:a}),n.text(k).call(I.font,o).call(P.positionText,0,0).call(P.convertToTspans,g),e.attr("transform","");var s,l,c,u,d,f,p,h,m=n.node().getBoundingClientRect();"x"===v?(d="top"===T.side?"-":"",n.attr("text-anchor","middle").call(P.positionText,0,"top"===T.side?A-m.bottom-j-H:A-m.top+j+H),s=T._offset+(w.x0+w.x1)/2,l=M._offset+("top"===T.side?0:M._length),s<(a=m.width/2+H)?t.attr("d","M-"+((s=a)-j)+",0L-"+(a-2*j)+","+d+j+"H"+(H+m.width/2)+"v"+d+(2*H+m.height)+"H-"+a+"V"+d+j+"Z"):s>y.width-a?(s=y.width-a,t.attr("d","M"+(a-j)+",0L"+a+","+d+j+"v"+d+(2*H+m.height)+"H-"+a+"V"+d+j+"H"+(a-2*j)+"Z")):t.attr("d","M0,0L"+j+","+d+j+"H"+(H+m.width/2)+"v"+d+(2*H+m.height)+"H-"+(H+m.width/2)+"V"+d+j+"H-"+j+"Z")):(s="right"===M.side?(c="start",u=1,f="",T._offset+T._length):(c="end",u=-1,f="-",T._offset),l=M._offset+(w.y0+w.y1)/2,n.attr("text-anchor",c),t.attr("d","M0,0L"+f+j+","+j+"V"+(H+m.height/2)+"h"+f+(2*H+m.width)+"V-"+(H+m.height/2)+"H"+f+j+"V-"+j+"Z"),d=m.height/2,t=A-m.top-d,f="clip"+y._uid+"commonlabel"+M._id,s<m.width+2*H+j?(p="M-"+(j+H)+"-"+d+"h-"+(m.width-H)+"V"+d+"h"+(m.width-H)+"Z",h=m.width-s+H,P.positionText(n,h,t),"end"===c&&n.selectAll("tspan").each(function(){var e=te.select(this),t=I.tester.append("text").text(e.text()).call(I.font,o),n=t.node().getBoundingClientRect();Math.round(n.width)<Math.round(m.width)&&e.attr("x",h-n.width),t.remove()})):(P.positionText(n,u*(H+j),t),p=null),(t=y._topclips.selectAll("#"+f).data(p?[0]:[])).enter().append("clipPath").attr("id",f).append("path"),t.exit().remove(),t.select("path").attr("d",p),I.setClipUrl(n,p?f:null,g)),e.attr("transform",D(s,l))}),ue.isUnifiedHover(v)){if(n.selectAll("g.hovertext").remove(),0===e.length)return;a={showlegend:!0,legend:{title:{text:k,font:y.hoverlabel.font},font:y.hoverlabel.font,bgcolor:y.hoverlabel.bgcolor,bordercolor:y.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:y.legend?y.legend.traceorder:void 0,orientation:"v"}},r={};N(a,r,g._fullData);var u=r.legend;u.entries=[];for(var d=0;d<e.length;d++){var f=B(e[d],!0,v,y,k),p=f[0],C=f[1],f=e[d];f.name=C,f.text=""!==C?C+" : "+p:p;p=f.cd[f.index];p&&(p.mc&&(f.mc=p.mc),p.mcc&&(f.mc=p.mcc),p.mlc&&(f.mlc=p.mlc),p.mlcc&&(f.mlc=p.mlcc),p.mlw&&(f.mlw=p.mlw),p.mrc&&(f.mrc=p.mrc),p.dir&&(f.dir=p.dir)),f._distinct=!0,u.entries.push([f])}u.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),u.layer=n,u._inHover=!0,z(g,u);i=e[0],t=(i.y0+i.y1)/2,c=(i.x0+i.x1)/2,a=n.select("g.legend"),r=a.node().getBoundingClientRect();c+=T._offset,t+=M._offset-r.height/2;i=r.width+2*H;!(c+i<=S)&&0<=c-i?c-=i:c+=2*H;i=r.height+2*H,r=E<=t+i;return i<=E&&(t<=A?t=M._offset+2*H:r&&(t=E-i)),a.attr("transform",D(c,t)),a}n=n.selectAll("g.hovertext").data(e,pe);return n.enter().append("g").classed("hovertext",!0).each(function(){var e=te.select(this);e.append("rect").call(oe.fill,oe.addOpacity(m,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(I.font,b,_)}),n.exit().remove(),n.each(function(e){var t=te.select(this).attr("transform",""),n=e.color;Array.isArray(n)&&(n=n[e.eventData[0].pointNumber]);var r=e.bgcolor||n,a=oe.combine(oe.opacity(r)?r:oe.defaultLine,m),i=oe.combine(oe.opacity(n)?n:oe.defaultLine,m),o=e.borderColor||oe.contrast(a),s=B(e,L,v,y,k,t),l=s[0],c=s[1],u=t.select("text.nums").call(I.font,e.fontFamily||b,e.fontSize||_,e.fontColor||o).text(l).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),r=t.select("text.name"),n=0,s=0;c&&c!==l?(r.call(I.font,e.fontFamily||b,e.fontSize||_,i).text(c).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),n=(p=r.node().getBoundingClientRect()).width+2*H,s=p.height+2*H):(r.remove(),t.select("rect").remove()),t.select("path").style({fill:a,stroke:o});var d,f,l=u.node().getBoundingClientRect(),i=e.xa._offset+(e.x0+e.x1)/2,c=e.ya._offset+(e.y0+e.y1)/2,p=Math.abs(e.x1-e.x0),a=Math.abs(e.y1-e.y0),o=l.width+j+H+n;e.ty0=A-l.top,e.bx=l.width+2*H,e.by=Math.max(l.height+2*H,s),e.anchor="start",e.txwidth=l.width,e.tx2width=n,e.offset=0,h?(e.pos=i,f=c+a/2+o<=E,d=0<=c-a/2-o,"top"!==e.idealAlign&&f||!d?f?(c+=a/2,e.anchor="start"):e.anchor="middle":(c-=a/2,e.anchor="end")):(e.pos=c,f=i+p/2+o<=S,d=0<=i-p/2-o,"left"!==e.idealAlign&&f||!d?f?(i+=p/2,e.anchor="start"):(e.anchor="middle",o=i-(f=o/2),0<(f=i+f-S)&&(i-=f),o<0&&(i+=-o)):(i-=p/2,e.anchor="end")),u.attr("text-anchor",e.anchor),n&&r.attr("text-anchor",e.anchor),t.attr("transform",D(i,c)+(h?O(F):""))}),n}function B(n,e,t,r,a,i){var o="",s="";void 0!==n.nameOverride&&(n.name=n.nameOverride),n.name&&(n.trace._meta&&(n.name=re.templateString(n.name,n.trace._meta)),o=c(n.name,n.nameLength));t=t.charAt(0);void 0!==n.zLabel?(void 0!==n.xLabel&&(s+="x: "+n.xLabel+"<br>"),void 0!==n.yLabel&&(s+="y: "+n.yLabel+"<br>"),"choropleth"!==n.trace.type&&"choroplethmapbox"!==n.trace.type&&(s+=(s?"z: ":"")+n.zLabel)):e&&n[t+"Label"]===a?s=n[("x"===t?"y":"x")+"Label"]||"":void 0===n.xLabel?void 0!==n.yLabel&&"scattercarpet"!==n.trace.type&&(s=n.yLabel):s=void 0===n.yLabel?n.xLabel:"("+n.xLabel+", "+n.yLabel+")",!n.text&&0!==n.text||Array.isArray(n.text)||(s+=(s?"<br>":"")+n.text),void 0!==n.extraText&&(s+=(s?"<br>":"")+n.extraText),i&&""===s&&!n.hovertemplate&&(""===o&&i.remove(),s=o);e=n.hovertemplate||!1;return e&&(i=n.hovertemplateLabels||n,n[t+"Label"]!==a&&(i[t+"other"]=i[t+"Val"],i[t+"otherLabel"]=i[t+"Label"]),s=(s=re.hovertemplateString(e,i,r._d3locale,n.eventData[0]||{},n.trace._meta)).replace(l,function(e,t){return o=c(t,n.nameLength),""})),[s,o]}function me(e,f,p,h){function m(e){return e*p}function g(e){return e*h}e.each(function(e){var t=te.select(this);if(e.del)return t.remove();var n=t.select("text.nums"),r=e.anchor,a="end"===r?-1:1,i={start:1,end:-1,middle:0}[r],o=i*(j+H),s=o+i*(e.txwidth+H),l=0,c=e.offset,u="middle"===r;u&&(o-=e.tx2width/2,s+=e.txwidth/2+H),f&&(c*=-v,l=e.offset*y),t.select("path").attr("d",u?"M-"+m(e.bx/2+e.tx2width/2)+","+g(c-e.by/2)+"h"+m(e.bx)+"v"+g(e.by)+"h-"+m(e.bx)+"Z":"M0,0L"+m(a*j+l)+","+g(j+c)+"v"+g(e.by/2-j)+"h"+m(a*e.bx)+"v-"+g(e.by)+"H"+m(a*j+l)+"V"+g(c-j)+"Z");var d=l+o,a=c+e.ty0-e.by/2+H,o=e.textAlign||"auto";"auto"!==o&&("left"===o&&"start"!==r?(n.attr("text-anchor","start"),d=u?-e.bx/2-e.tx2width/2+H:-e.bx-H):"right"===o&&"end"!==r&&(n.attr("text-anchor","end"),d=u?e.bx/2-e.tx2width/2-H:e.bx+H)),n.call(P.positionText,d*p,a*h),e.tx2width&&(t.select("text.name").call(P.positionText,m(s+i*H+l),g(c+e.ty0-e.by/2+H)),t.select("rect").call(I.setRect,m(s+(i-1)*e.tx2width/2+l),g(c-e.by/2-1),m(e.tx2width),g(e.by+2)))})}function ge(e,t,n){var r,a,i,o,s,l,c,u,d,f,p,h,m=n.container,g=n.fullLayout,y=g._size,v=n.event,x=!!t.hLinePoint,b=!!t.vLinePoint;m.selectAll(".spikeline").remove(),(b||x)&&(r=oe.combine(g.plot_bgcolor,g.paper_bgcolor),x&&(a=(o=t.hLinePoint)&&o.xa,i="cursor"===(d=o&&o.ya).spikesnap?(c=v.pointerX,v.pointerY):(c=a._offset+o.x,d._offset+o.y),n=_.readability(o.color,r)<1.5?oe.contrast(r):o.color,g=d.spikemode,x=d.spikethickness,f=d.spikecolor||n,o=le.getPxPosition(e,d),-1===g.indexOf("toaxis")&&-1===g.indexOf("across")||(-1!==g.indexOf("toaxis")&&(s=o,l=c),-1!==g.indexOf("across")&&(n=d._counterDomainMin,c=d._counterDomainMax,"free"===d.anchor&&(n=Math.min(n,d.position),c=Math.max(c,d.position)),s=y.l+n*y.w,l=y.l+c*y.w),m.insert("line",":first-child").attr({x1:s,x2:l,y1:i,y2:i,"stroke-width":x,stroke:f,"stroke-dasharray":I.dashStyle(d.spikedash,x)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:s,x2:l,y1:i,y2:i,"stroke-width":x+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==g.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:o+("right"!==d.side?x:-x),cy:i,r:x,fill:f}).classed("spikeline",!0)),b&&(a=(f=t.vLinePoint)&&f.xa,d=f&&f.ya,b="cursor"===a.spikesnap?(u=v.pointerX,v.pointerY):(u=a._offset+f.x,d._offset+f.y),t=_.readability(f.color,r)<1.5?oe.contrast(r):f.color,v=a.spikemode,d=a.spikethickness,f=a.spikecolor||t,t=le.getPxPosition(e,a),-1===v.indexOf("toaxis")&&-1===v.indexOf("across")||(-1!==v.indexOf("toaxis")&&(p=t,h=b),-1!==v.indexOf("across")&&(e=a._counterDomainMin,b=a._counterDomainMax,"free"===a.anchor&&(e=Math.min(e,a.position),b=Math.max(b,a.position)),p=y.t+(1-b)*y.h,h=y.t+(1-e)*y.h),m.insert("line",":first-child").attr({x1:u,x2:u,y1:p,y2:h,"stroke-width":d,stroke:f,"stroke-dasharray":I.dashStyle(a.spikedash,d)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:u,x2:u,y1:p,y2:h,"stroke-width":d+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==v.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:u,cy:t-("top"!==a.side?d:-d),r:d,fill:f}).classed("spikeline",!0)))}function ye(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function c(e,t){return P.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function ve(e,t,n){var r=t[e+"a"],e=t[e+"Val"];"category"===r.type?e=r._categoriesMap[e]:"date"===r.type&&(e=r.d2c(e));t=t.cd[t.index];return t&&t.t&&t.t.posLetter===r._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(e+=t.t.dPos)),e}},{"../../lib":230,"../../lib/events":223,"../../lib/override_cursor":241,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../legend/defaults":152,"../legend/draw":153,"./constants":134,"./helpers":136,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],138:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../color"),s=e("./helpers").isUnifiedHover;t.exports=function(e,t,n,r){function a(e){r.font[e]||(r.font[e]=(t.legend||t).font[e])}r=r||{},t&&s(t.hovermode)&&(r.font||(r.font={}),a("size"),a("family"),a("color"),t.legend?(r.bgcolor||(r.bgcolor=o.combine(t.legend.bgcolor,t.paper_bgcolor)),r.bordercolor||(r.bordercolor=t.legend.bordercolor)):r.bgcolor||(r.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),i.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":230,"../color":100,"./helpers":136}],139:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return void 0!==r[e]?r[e]:a.coerce(n,r,i,e,t)}return e("clickmode"),e("hovermode")}},{"../../lib":230,"./layout_attributes":141}],140:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../../lib"),i=e("../dragelement"),o=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,n){return a.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(t,n,e){return a.castOption(t,e,"hoverinfo",function(e){return a.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)})},hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:function(e){e=a.isD3Selection(e)?e:r.select(e);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":230,"../dragelement":119,"./attributes":131,"./calc":132,"./click":133,"./constants":134,"./defaults":135,"./helpers":136,"./hover":137,"./layout_attributes":141,"./layout_defaults":142,"./layout_global_defaults":143,"@plotly/d3":11}],141:[function(e,t,n){"use strict";var r=e("./constants"),e=e("../../plots/font_attributes")({editType:"none"});e.family.dflt=r.HOVERFONT,e.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:e,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":305,"./constants":134}],142:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes"),l=e("./hovermode_defaults"),c=e("./hoverlabel_defaults");t.exports=function(n,r){function e(e,t){return o.coerce(n,r,s,e,t)}l(n,r)&&(e("hoverdistance"),e("spikedistance")),"select"===e("dragmode")&&e("selectdirection");var t=r._has("mapbox"),a=r._has("geo"),i=r._basePlotModules.length;"zoom"===r.dragmode&&((t||a)&&1===i||t&&a&&2===i)&&(r.dragmode="pan"),c(n,r,e)}},{"../../lib":230,"./hoverlabel_defaults":138,"./hovermode_defaults":139,"./layout_attributes":141}],143:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./hoverlabel_defaults"),o=e("./layout_attributes");t.exports=function(n,r){i(n,r,function(e,t){return a.coerce(n,r,o,e,t)})}},{"../../lib":230,"./hoverlabel_defaults":138,"./layout_attributes":141}],144:[function(e,t,n){"use strict";var h=e("../../lib"),r=e("../../lib/regex").counter,a=e("../../plots/domain").attributes,i=e("../../plots/cartesian/constants").idRegex,m=e("../../plot_api/plot_template"),g={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[i.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[i.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function D(e,t,n){t=t[n+"axes"],n=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(t)?t:n.length?n:void 0}function y(e,t,n,r,a,i){var o=t(e+"gap",n),n=t("domain."+e);t(e+"side",r);for(var s=new Array(a),l=n[0],c=(n[1]-l)/(a-o),u=c*(1-o),d=0;d<a;d++){var f=l+c*d;s[i?a-1-d:d]=[f,f+u]}return s}function O(e,n,t,r,a){var i,o=new Array(t);function s(e,t){-1!==n.indexOf(t)&&void 0===r[t]?(o[e]=t,r[t]=e):o[e]=""}if(Array.isArray(e))for(i=0;i<t;i++)s(i,e[i]);else for(s(0,a),i=1;i<t;i++)s(i,a+(i+1));return o}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:g}},layoutAttributes:g,sizeDefaults:function(e,t){var n,r,a,i,o,s,l,c,u=e.grid||{},d=D(t,u,"x"),f=D(t,u,"y");function p(e,t){return h.coerce(u,r,g,e,t)}(e.grid||d||f)&&(n=Array.isArray(u.subplots)&&Array.isArray(u.subplots[0]),o=Array.isArray(d),s=Array.isArray(f),e=o&&d!==u.xaxes&&s&&f!==u.yaxes,n?(a=u.subplots.length,i=u.subplots[0].length):(s&&(a=f.length),o&&(i=d.length)),r=m.newContainer(t,"grid"),1<(a=p("rows",a))*(i=p("columns",i))?(n||o||s||"independent"===p("pattern")&&(n=!0),r._hasSubplotGrid=n,o="top to bottom"===p("roworder"),s=n?.3:.1,e&&t._splomGridDflt&&(l=t._splomGridDflt.xside,c=t._splomGridDflt.yside),r._domains={x:y("x",p,n?.2:.1,l,i),y:y("y",p,s,c,a,o)}):delete t.grid)},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,a,i,o,s=e.grid||{},l=t._subplots,c=n._hasSubplotGrid,u=n.rows,d=n.columns,f="independent"===n.pattern,p=n._axisMap={};if(c)for(var h=s.subplots||[],m=n.subplots=new Array(u),g=1,y=0;y<u;y++)for(var v=m[y]=new Array(d),x=h[y]||[],b=0;b<d;b++)f?(i=1===g?"xy":"x"+g+"y"+g,g++):i=x[b],v[b]="",-1!==l.cartesian.indexOf(i)&&(o=i.indexOf("y"),r=i.slice(0,o),a=i.slice(o),void 0!==p[r]&&p[r]!==b||void 0!==p[a]&&p[a]!==y||(v[b]=i,p[r]=b,p[a]=y));else{e=D(t,s,"x"),s=D(t,s,"y");n.xaxes=O(e,l.xaxis,d,p,"x"),n.yaxes=O(s,l.yaxis,u,p,"y")}var _,w=n._anchors={},T="top to bottom"===n.roworder;for(_ in p){var M,k,A,S=_.charAt(0),E=n[S+"side"];if(E.length<8)w[_]="free";else if("x"===S){if(A="t"===E.charAt(0)==T?(M=0,k=1,u):(M=u-1,k=-1),c){var L=p[_];for(y=M;y!==A;y+=k)if((i=m[y][L])&&(o=i.indexOf("y"),i.slice(0,o)===_)){w[_]=i.slice(o);break}}else for(y=M;y!==A;y+=k)if(a=n.yaxes[y],-1!==l.cartesian.indexOf(_+a)){w[_]=a;break}}else if(A="l"===E.charAt(0)?(M=0,k=1,d):(M=d-1,k=-1),c){var C=p[_];for(y=M;y!==A;y+=k)if((i=m[C][y])&&(o=i.indexOf("y"),i.slice(o)===_)){w[_]=i.slice(0,o);break}}else for(y=M;y!==A;y+=k)if(r=n.xaxes[y],-1!==l.cartesian.indexOf(r+_)){w[_]=r;break}}}}}},{"../../lib":230,"../../lib/regex":246,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/domain":304}],145:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283}],146:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),m=e("../../lib/to_log_range");t.exports=function(e,t,n,r){t=t||{};var a="log"===n&&"linear"===t.type,n="linear"===n&&"log"===t.type;if(a||n)for(var i=e._fullLayout.images,o=t._id.charAt(0),s=0;s<i.length;s++){var l,c,u,d,f,p="images["+s+"].";(f=i[s])[o+"ref"]===t._id&&(l=f[o],c=f["size"+o],d=u=null,d=a?(u=m(l,t.range),f=c/Math.pow(10,u)/2,2*Math.log(f+Math.sqrt(1+f*f))/Math.LN10):(u=Math.pow(10,l))*(Math.pow(10,c/2)-Math.pow(10,-c/2)),h(u)?h(d)||(d=null):d=u=null,r(p+o,u),r(p+"size"+o,d))}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],147:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),f=e("./attributes");function a(n,r,e){function t(e,t){return u.coerce(n,r,f,e,t)}var a=t("source");if(!t("visible",!!a))return r;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var i={_fullLayout:e},o=["x","y"],s=0;s<2;s++){var l=o[s],c=d.coerceRef(n,r,i,l,"paper",void 0);"paper"!==c&&d.getFromId(i,c)._imgIndices.push(r._index),d.coercePosition(r,i,t,c,l,0)}return r}t.exports=function(e,t){r(e,t,{name:"images",handleItemDefaults:a})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":145}],148:[function(e,t,n){"use strict";var y=e("@plotly/d3"),v=e("../drawing"),x=e("../../plots/cartesian/axes"),b=e("../../plots/cartesian/axis_ids"),_=e("../../constants/xmlns_namespaces");t.exports=function(f){for(var p=f._fullLayout,e=[],t={},n=[],r=0;r<p.images.length;r++){var a,i,o=p.images[r];o.visible&&("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref?(a=b.ref2id(o.xref)+b.ref2id(o.yref),(i=p._plots[a])?(t[a=i.mainplot?i.mainplot.id:a]||(t[a]=[]),t[a].push(o)):n.push(o)):("above"===o.layer?e:n).push(o))}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var e,a=y.select(this);this._imgSrc!==r.source&&(a.attr("xmlns",_.svg),r.source&&"data:"===r.source.slice(0,5)?(a.attr("xlink:href",r.source),this._imgSrc=r.source):(e=new Promise(function(t){var e=new Image;function n(){a.remove(),t()}(this.img=e).setAttribute("crossOrigin","anonymous"),e.onerror=n,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);e=e.toDataURL("image/png");a.attr("xlink:href",e),t()},a.on("error",n),e.src=r.source,this._imgSrc=r.source}.bind(this)),f._promises.push(e)))}function l(e){var t=y.select(this),n=x.getFromId(f,e.xref),r=x.getFromId(f,e.yref),a="domain"===x.getRefType(e.xref),i="domain"===x.getRefType(e.yref),o=p._size,s=void 0!==n?"string"==typeof e.xref&&a?n._length*e.sizex:Math.abs(n.l2p(e.sizex)-n.l2p(0)):e.sizex*o.w,l=void 0!==r?"string"==typeof e.yref&&i?r._length*e.sizey:Math.abs(r.l2p(e.sizey)-r.l2p(0)):e.sizey*o.h,c=s*h[e.xanchor].offset,u=l*m[e.yanchor].offset,d=h[e.xanchor].sizing+m[e.yanchor].sizing,a=void 0!==n?"string"==typeof e.xref&&a?n._length*e.x+n._offset:n.r2p(e.x)+n._offset:e.x*o.w+o.l;switch(a+=c,o=void 0!==r?"string"==typeof e.yref&&i?r._length*(1-e.y)+r._offset:r.r2p(e.y)+r._offset:o.h-e.y*o.h+o.t,o+=u,e.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}t.attr({x:a,y:o,width:s,height:l,preserveAspectRatio:d,opacity:e.opacity});r=(n&&"domain"!==x.getRefType(e.xref)?n._id:"")+(r&&"domain"!==x.getRefType(e.yref)?r._id:"");v.setClipUrl(t,r?"clip"+p._uid+r:null,f)}var c=p._imageLowerLayer.selectAll("image").data(n),u=p._imageUpperLayer.selectAll("image").data(e);c.enter().append("image"),u.enter().append("image"),c.exit().remove(),u.exit().remove(),c.each(function(e){s.bind(this)(e),l.bind(this)(e)}),u.each(function(e){s.bind(this)(e),l.bind(this)(e)});var d=Object.keys(p._plots);for(r=0;r<d.length;r++){a=d[r];var g=p._plots[a];g.imagelayer&&((g=g.imagelayer.selectAll("image").data(t[a]||[])).enter().append("image"),g.exit().remove(),g.each(function(e){s.bind(this)(e),l.bind(this)(e)}))}}},{"../../constants/xmlns_namespaces":211,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_ids":280,"../drawing":122,"@plotly/d3":11}],149:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":145,"./convert_coords":146,"./defaults":147,"./draw":148}],150:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),e=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":305,"../color/attributes":99}],151:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],152:[function(e,t,n){"use strict";var m=e("../../registry"),g=e("../../lib"),y=e("../../plot_api/plot_template"),v=e("./attributes"),x=e("../../plots/layout_attributes"),b=e("./helpers");t.exports=function(e,t,n){for(var r=e.legend||{},a=0,i=!1,o="normal",s=0;s<n.length;s++){var l=n[s];l.visible&&(!l.showlegend&&(!l._dfltShowLegend||l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt)||(a++,l.showlegend&&(i=!0,!m.traceIs(l,"pie-like")&&!0!==l._input.showlegend||a++)),(m.traceIs(l,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(o=b.isGrouped({traceorder:o})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(o=b.isReversed({traceorder:o})?"reversed+grouped":"grouped"))}var c,u,d,f,p=g.coerce(e,t,x,"showlegend",i&&1<a);function h(e,t){return g.coerce(r,c,v,e,t)}!1===p&&!r.uirevision||(c=y.newContainer(t,"legend"),h("uirevision",t.uirevision),!1!==p&&(h("bgcolor",t.paper_bgcolor),h("bordercolor"),h("borderwidth"),f=g.coerceFont(h,"font",t.font),e=(p="h"===h("orientation"))?(u=0,m.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(d=1.1,"bottom"):(d=-.1,"top")):(u=1.02,d=1,"auto"),h("traceorder",o),b.isGrouped(t.legend)&&h("tracegroupgap"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("x",u),h("xanchor"),h("y",d),h("yanchor",e),h("valign"),g.noneOrAll(r,c,["x","y"]),h("title.text")&&(h("title.side",p?"left":"top"),f=g.extendFlat({},f,{size:g.bigFont(f.size)}),g.coerceFont(h,"title.font",f))))}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/layout_attributes":309,"../../registry":313,"./attributes":150,"./helpers":156}],153:[function(e,t,n){"use strict";var P=e("@plotly/d3"),D=e("../../lib"),O=e("../../plots/plots"),I=e("../../registry"),o=e("../../lib/events"),R=e("../dragelement"),N=e("../drawing"),s=e("../color"),m=e("../../lib/svg_text_utils"),l=e("./handle_click"),z=e("./constants"),r=e("../../constants/alignment"),g=r.LINE_SPACING,F=r.FROM_TL,j=r.FROM_BR,c=e("./get_legend_data"),u=e("./style"),H=e("./helpers"),y=1;function B(e,t,n,r,a){var i=n.data()[0][0].trace,a={event:a,node:n.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};i._group&&(a.group=i._group),I.traceIs(i,"pie-like")&&(a.label=n.datum()[0].label),!1!==o.triggerHandler(e,"plotly_legendclick",a)&&(1===r?t._clickTimeout=setTimeout(function(){e._fullLayout&&l(n,e,r)},e._context.doubleClickDelay):2===r&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==o.triggerHandler(e,"plotly_legenddoubleclick",a)&&l(n,e,r)))}function d(a,i,o){var e,s=a.data()[0][0],l=s.trace,t=I.traceIs(l,"pie-like"),n=!o._inHover&&i._context.edits.legendText&&!t,c=o._maxNameLength;s.groupTitle?(e=s.groupTitle.text,r=s.groupTitle.font):(r=o.font,o.entries?e=s.text:(e=t?s.label:l.name,l._meta&&(e=D.templateString(e,l._meta))));t=D.ensureSingle(a,"text","legendtext");t.attr("text-anchor","start").call(N.font,r).text(n?f(e,c):e);var r=o.itemwidth+2*z.itemGap;m.positionText(t,r,0),n?t.call(m.makeEditable,{gd:i,text:e}).call(h,a,i,o).on("edit",function(e){this.text(f(e,c)).call(h,a,i,o);var t,n=s.trace._fullInput||{},r={};return I.hasTransform(n,"groupby")?(t=(t=I.getTransformIndices(n,"groupby"))[t.length-1],(t=D.keyedContainer(n,"transforms["+t+"].styles","target","value.name")).set(s.trace._group,e),r=t.constructUpdate()):r.name=e,I.call("_guiRestyle",i,r,l.index)}):h(t,a,i,o)}function f(e,t){t=Math.max(4,t);if(e&&e.trim().length>=t/2)return e;for(var n=t-(e=e||"").length;0<n;n--)e+=" ";return e}function p(t,n){var e,r=n._context.doubleClickDelay,a=1,i=D.ensureSingle(t,"rect","legendtoggle",function(e){n._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(s.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(i.on("mousedown",function(){(e=(new Date).getTime())-n._legendMouseDownTime<r?a+=1:(a=1,n._legendMouseDownTime=e)}),i.on("mouseup",function(){var e;n._dragged||n._editing||(e=n._fullLayout.legend,(new Date).getTime()-n._legendMouseDownTime>r&&(a=Math.max(a-1,1)),B(n,e,t,a,P.event))}))}function h(e,d,f,p,h){p._inHover&&e.attr("data-notex",!0),m.convertToTspans(e,f,function(){var e,t,n,r,a,i,o,s,l,c,u;t=f,n=p,r=h,u=(e=d).data()[0][0],n._inHover||!u||u.trace.showlegend?(l=e.select("g[class*=math-group]"),o=l.node(),c=(n=n||t._fullLayout.legend).borderwidth,t=(r===y?n.title:u.groupTitle||n).font.size*g,o?(s=N.bBox(o),a=s.height,i=s.width,r===y?N.setTranslate(l,c,c+.75*a):N.setTranslate(l,0,.25*a)):(o=e.select(r===y?".legendtitletext":".legendtext"),s=m.lineCount(o),l=o.node(),a=t*s,i=l?N.bBox(l).width:0,r===y?("left"===n.title.side&&(i+=2*z.itemGap),m.positionText(o,c+z.titlePad,c+t)):(c=2*z.itemGap+n.itemwidth,u.groupTitle&&(c=z.itemGap,i-=n.itemwidth),m.positionText(o,c,-t*((s-1)/2-.3)))),r===y?(n._titleWidth=i,n._titleHeight=a):(u.lineHeight=t,u.height=Math.max(a,16)+3,u.width=i)):e.remove()})}function q(e){return D.isRightAnchor(e)?"right":D.isCenterAnchor(e)?"center":"left"}function U(e){return D.isBottomAnchor(e)?"bottom":D.isMiddleAnchor(e)?"middle":"top"}t.exports=function(e,t){return function(b,_){var w,e,T=b._fullLayout,M="legend"+T._uid,k=_._inHover;k?(w=_.layer,M+="-hover"):w=T._infolayer;if(w){if(b._legendMouseDownTime||(b._legendMouseDownTime=0),k){if(!_.entries)return;e=c(_.entries,_)}else{if(!b.calcdata)return;e=T.showlegend&&c(b.calcdata,_)}var n=T.hiddenlabels||[];if(!(k||T.showlegend&&e.length))return w.selectAll(".legend").remove(),T._topdefs.select("#"+M).remove(),O.autoMargin(b,"legend");var A=D.ensureSingle(w,"g","legend",function(e){k||e.attr("pointer-events","all")}),S=D.ensureSingleById(T._topdefs,"clipPath",M,function(e){e.append("rect")}),E=D.ensureSingle(A,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});E.call(s.stroke,_.bordercolor).call(s.fill,_.bgcolor).style("stroke-width",_.borderwidth+"px");var t,L=D.ensureSingle(A,"g","scrollbox"),r=_.title;_._titleWidth=0,_._titleHeight=0,r.text?((t=D.ensureSingle(L,"text","legendtitletext")).attr("text-anchor","start").call(N.font,r.font).text(r.text),h(t,L,b,_,y)):L.selectAll(".legendtitletext").remove();var C=D.ensureSingle(A,"rect","scrollbar",function(e){e.attr(z.scrollBarEnterAttrs).call(s.fill,z.scrollBarColor)}),a=L.selectAll("g.groups").data(e);a.enter().append("g").attr("class","groups"),a.exit().remove();var i=a.selectAll("g.traces").data(D.identity);i.enter().append("g").attr("class","traces"),i.exit().remove(),i.style("opacity",function(e){var t=e[0].trace;return I.traceIs(t,"pie-like")?-1!==n.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){P.select(this).call(d,b,_)}).call(u,b,_).each(function(){k||P.select(this).call(p,b)}),D.syncOrAsync([O.previousPromises,function(){return function(e,t,n,a){var r=e._fullLayout;a=a||r.legend;var i=r._size,o=H.isVertical(a),s=H.isGrouped(a),l=a.borderwidth,c=2*l,u=z.itemGap,d=a.itemwidth+2*u,f=2*(l+u),p=U(a),h=a.y<0||0===a.y&&"top"===p,m=1<a.y||1===a.y&&"bottom"===p,g=a.tracegroupgap;a._maxHeight=Math.max(h||m?r.height/2:i.h,30);var y=0;a._width=0,a._height=0;var v=function(e){var t=0,n=0,r=e.title.side;r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight));return[t,n]}(a);{var x,b,_,w,T,M,k,A,S,E,L,C,D;o?(n.each(function(e){var t=e[0].height;N.setTranslate(this,l+v[0],l+v[1]+a._height+t/2+u),a._height+=t,a._width=Math.max(a._width,e[0].width)}),y=d+a._width,a._width+=u+d+c,a._height+=f,s&&(t.each(function(e,t){N.setTranslate(this,0,t*a.tracegroupgap)}),a._height+=(a._lgroupsLength-1)*a.tracegroupgap)):(x=q(a),b=a.x<0||0===a.x&&"right"===x,p=1<a.x||1===a.x&&"left"===x,h=m||h,r=r.width/2,a._maxWidth=Math.max(b?h&&"left"===x?i.l+i.w:r:p?h&&"right"===x?i.r+i.w:r:i.w,2*d),w=_=0,n.each(function(e){e=e[0].width+d;_=Math.max(_,e),w+=e}),y=null,T=0,s?(A=k=M=0,t.each(function(){var n=0,r=0;P.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;N.setTranslate(this,v[0],v[1]+l+u+t/2+r),r+=t,n=Math.max(n,d+e[0].width)}),M=Math.max(M,r);var e=n+u;e+l+k>a._maxWidth&&(T=Math.max(T,k),k=0,A+=M+g,M=r),N.setTranslate(this,k,A),k+=e}),a._width=Math.max(T,k)+l,a._height=A+M+f):(t=n.size(),S=w+c+(t-1)*u<a._maxWidth,D=C=L=E=0,n.each(function(e){var t=e[0].height,n=d+e[0].width,e=(S?n:_)+u;e+l+L-u>=a._maxWidth&&(T=Math.max(T,D),L=0,C+=E,a._height+=E,E=0),N.setTranslate(this,v[0]+l+L,v[1]+l+C+t/2+u),D=L+n+u,L+=e,E=Math.max(E,t)}),S?(a._width=L+c,a._height=E+f):(a._width=Math.max(T,D)+c,a._height+=E+f)))}a._width=Math.ceil(Math.max(a._width+v[0],a._titleWidth+2*(l+z.titlePad))),a._height=Math.ceil(Math.max(a._height+v[1],a._titleHeight+2*(l+z.itemGap))),a._effHeight=Math.min(a._height,a._maxHeight);var e=e._context.edits,O=e.legendText||e.legendPosition;n.each(function(e){var t=P.select(this).select(".legendtoggle"),n=e[0].height,e=O?d:y||d+e[0].width;o||(e+=u/2),N.setRect(t,0,-n/2,e,n)})}(b,a,i,_)},function(){var n,r,e,t,a,i,o,s,l,c,u,d,f,p,h,m,g,y,v;function x(e,t,n){_._scrollY=b._fullLayout.legend._scrollY=e,N.setTranslate(L,0,-e),N.setRect(C,_._width,z.scrollBarMargin+e*n,z.scrollBarWidth,t),S.select("rect").attr("y",r+e)}!k&&(e=(a=b)._fullLayout.legend,i=q(e),t=U(e),O.autoMargin(a,"legend",{x:e.x,y:e.y,l:e._width*F[i],r:e._width*j[i],b:e._effHeight*j[t],t:e._effHeight*F[t]}))||(n=T._size,r=_.borderwidth,a=n.l+n.w*_.x-F[q(_)]*_._width,i=n.t+n.h*(1-_.y)-F[U(_)]*_._effHeight,!k&&T.margin.autoexpand&&(e=a,t=i,a=D.constrain(a,0,T.width-_._width),i=D.constrain(i,0,T.height-_._effHeight),a!==e&&D.log("Constrain legend.x to make legend fit inside graph"),i!==t&&D.log("Constrain legend.y to make legend fit inside graph")),k||N.setTranslate(A,a,i),C.on(".drag",null),A.on("wheel",null),k||_._height<=_._maxHeight||b._context.staticPlot?(h=_._effHeight,k&&(h=_._height),E.attr({width:_._width-r,height:h-r,x:r/2,y:r/2}),N.setTranslate(L,0,0),S.select("rect").attr({width:_._width-2*r,height:h-2*r,x:r,y:r}),N.setClipUrl(L,M,b),N.setRect(C,0,0,0,0),delete _._scrollY):(o=Math.max(z.scrollBarMinHeight,_._effHeight*_._effHeight/_._height),s=_._effHeight-o-2*z.scrollBarMargin,l=_._height-_._effHeight,c=s/l,u=Math.min(_._scrollY||0,l),E.attr({width:_._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:_._effHeight-r,x:r/2,y:r/2}),S.select("rect").attr({width:_._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:_._effHeight-2*r,x:r,y:r+u}),N.setClipUrl(L,M,b),x(u,o,c),A.on("wheel",function(){x(u=D.constrain(_._scrollY+P.event.deltaY/s*l,0,l),o,c),0!==u&&u!==l&&P.event.preventDefault()}),h=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;d=("touchstart"===e.type?e.changedTouches[0]:e).clientY,p=u}).on("drag",function(){var e,t,n=P.event.sourceEvent;2===n.buttons||n.ctrlKey||(f=("touchmove"===n.type?n.changedTouches[0]:n).clientY,e=p,t=d,n=f,x(u=D.constrain((n-t)/c+e,0,l),o,c))}),C.call(h),h=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;"touchstart"===e.type&&(d=e.changedTouches[0].clientY,p=u)}).on("drag",function(){var e,t,n=P.event.sourceEvent;"touchmove"===n.type&&(f=n.changedTouches[0].clientY,e=p,t=d,n=f,x(u=D.constrain((t-n)/c+e,0,l),o,c))}),L.call(h)),b._context.edits.legendPosition&&(A.classed("cursor-move",!0),R.init({element:A.node(),gd:b,prepFn:function(){var e=N.getTranslate(A);y=e.x,v=e.y},moveFn:function(e,t){e=y+e,t=v+t;N.setTranslate(A,e,t),m=R.align(e,0,n.l,n.l+n.w,_.xanchor),g=R.align(t,0,n.t+n.h,n.t,_.yanchor)},doneFn:function(){void 0!==m&&void 0!==g&&I.call("_guiRelayout",b,{"legend.x":m,"legend.y":g})},clickFn:function(e,t){var n=w.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});0<n.size()&&B(b,A,n,e,t)}})))}],b)}}(e,t=t||(e._fullLayout.legend||{}))}},{"../../constants/alignment":205,"../../lib":230,"../../lib/events":223,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":151,"./get_legend_data":154,"./handle_click":155,"./helpers":156,"./style":158,"@plotly/d3":11}],154:[function(e,t,n){"use strict";var S=e("../../registry"),E=e("./helpers");t.exports=function(e,n){var t=E.isGrouped(n),r=E.isReversed(n),a={},i=[],o=!1,s={},l=0,c=0;function u(e,t){""!==e&&E.isGrouped(n)?-1===i.indexOf(e)?(i.push(e),o=!0,a[e]=[t]):a[e].push(t):(e="~~i"+l,i.push(e),a[e]=[t],l++)}for(v=0;v<e.length;v++){var d=e[v],f=d[0],p=f.trace,h=p.legendgroup;if(n._inHover||p.visible&&p.showlegend)if(S.traceIs(p,"pie-like"))for(s[h]||(s[h]={}),_=0;_<d.length;_++){var m=d[_].label;s[h][m]||(u(h,{label:m,color:d[_].color,i:d[_].i,trace:p,pts:d[_].pts}),s[h][m]=!0,c=Math.max(c,(m||"").length))}else u(h,f),c=Math.max(c,(p.name||"").length)}if(!i.length)return[];for(var g=!o||!t,y=[],v=0;v<i.length;v++){var x=a[i[v]];g?y.push(x[0]):y.push(x)}for(g&&(y=[y]),v=0;v<y.length;v++){for(var b=1/0,_=0;_<y[v].length;_++){var w=y[v][_].trace.legendrank;w<b&&(b=w)}y[v][0]._groupMinRank=b,y[v][0]._preGroupSort=v}function T(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort}for(y.forEach(function(e,t){e[0]._preGroupSort=t}),y.sort(function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort}),v=0;v<y.length;v++){y[v].forEach(function(e,t){e._preSort=t}),y[v].sort(T);var M=y[v][0],k=null;for(_=0;_<y[v].length;_++){var A=y[v][_].trace.legendgrouptitle;if(A&&A.text){k=A;break}}for(r&&y[v].reverse(),k&&y[v].unshift({i:-1,groupTitle:k,trace:{showlegend:M.trace.showlegend}}),_=0;_<y[v].length;_++)y[v][_]=[y[v][_]]}return n._lgroupsLength=y.length,n._maxNameLength=c,y}},{"../../registry":313,"./helpers":156}],155:[function(e,t,n){"use strict";var P=e("../../lib"),I=e("../../registry"),R=!0;t.exports=function(e,t,n){var r=t._fullLayout;if(!t._dragged&&!t._editing){var a,i=r.legend.itemclick,o=r.legend.itemdoubleclick;if(R=(1===n&&"toggle"===i&&"toggleothers"===o&&R&&t.data&&t._context.showTips&&P.notifier(P._(t,"Double-click on legend to isolate one trace"),"long"),!1),1===n?a=i:2===n&&(a=o),a){var s=r.hiddenlabels?r.hiddenlabels.slice():[],e=e.data()[0][0];if(!e.groupTitle){var l,c,u,d=t._fullData,f=e.trace,p=f.legendgroup,h={},m=[],g=[],y=[];if(I.traceIs(f,"pie-like")){var v=e.label,e=s.indexOf(v);"toggle"===a?-1===e?s.push(v):s.splice(e,1):"toggleothers"===a&&(s=[],t.calcdata[0].forEach(function(e){v!==e.label&&s.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===s.length&&-1===e&&(s=[])),I.call("_guiRelayout",t,"hiddenlabels",s)}else{var x,b,_=p&&p.length,w=[];if(_)for(S=0;S<d.length;S++)(x=d[S]).visible&&x.legendgroup===p&&w.push(S);if("toggle"===a){switch(f.visible){case!0:b="legendonly";break;case!1:b=!1;break;case"legendonly":b=!0}if(_)for(S=0;S<d.length;S++)!1!==d[S].visible&&d[S].legendgroup===p&&O(d[S],b);else O(f,b)}else if("toggleothers"===a){for(var T,M,k,A=!0,S=0;S<d.length;S++)if(T=d[S]===f,k=!0!==d[S].showlegend,!(T||k||(M=_&&d[S].legendgroup===p)||!0!==d[S].visible||I.traceIs(d[S],"notLegendIsolatable"))){A=!1;break}for(S=0;S<d.length;S++)if(!1!==d[S].visible&&!I.traceIs(d[S],"notLegendIsolatable"))switch(f.visible){case"legendonly":O(d[S],!0);break;case!0:T=d[S]===f,k=!0!==d[S].showlegend&&!d[S].legendgroup,M=T||_&&d[S].legendgroup===p,O(d[S],!(!M&&!k)||(!!A||"legendonly"))}}for(S=0;S<g.length;S++)if(l=g[S])for(var E=l.constructUpdate(),L=Object.keys(E),C=0;C<L.length;C++)c=L[C],(h[c]=h[c]||[])[y[S]]=E[c];for(u=Object.keys(h),S=0;S<u.length;S++)for(c=u[S],C=0;C<m.length;C++)h[c].hasOwnProperty(C)||(h[c][C]=void 0);I.call("_guiRestyle",t,h,m)}}}}function D(e,t,n){var r=m.indexOf(e),a=(a=h[t])||(h[t]=[]);return-1===m.indexOf(e)&&(m.push(e),r=m.length-1),a[r]=n,r}function O(e,t){var n,r,a=e._fullInput;I.hasTransform(a,"groupby")?((n=g[a.index])||(r=(r=I.getTransformIndices(a,"groupby"))[r.length-1],n=P.keyedContainer(a,"transforms["+r+"].styles","target","value.visible"),g[a.index]=n),!1!==(r=void 0===(r=n.get(e._group))?!0:r)&&n.set(e._group,t),y[a.index]=D(a.index,"visible",!1!==a.visible)):(t=!1!==a.visible&&t,D(a.index,"visible",t))}}},{"../../lib":230,"../../registry":313}],156:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],157:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":150,"./defaults":152,"./draw":153,"./style":158}],158:[function(e,t,n){"use strict";var b=e("@plotly/d3"),o=e("../../registry"),m=e("../../lib"),i=m.strTranslate,_=e("../drawing"),w=e("../color"),T=e("../colorscale/helpers").extractOpts,M=e("../../traces/scatter/subtypes"),s=e("../../traces/pie/style_one"),l=e("../../traces/pie/helpers").castOption,a=e("./constants");function k(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function A(e){var t=e[0].trace,n=t.contours,r=M.hasLines(t),a=M.hasMarkers(t),i=t.visible&&t.fill&&"none"!==t.fill,o=!1,e=!1;return n&&("lines"===(t=n.coloring)?o=!0:r="none"===t||"heatmap"===t||n.showlines,"constraint"===n.type?i="="!==n._operation:"fill"!==t&&"heatmap"!==t||(e=!0)),{showMarker:a,showLine:r,showFill:i,showGradientLine:o,showGradientFill:e,anyLine:r||o,anyFill:i||e}}function S(e,t,n){return e&&m.isArrayOrTypedArray(e)?t:n<e?n:e}t.exports=function(e,g,y){var t=g._fullLayout,p="constant"===(y=y||t.legend).itemsizing,h=y.itemwidth,t=(h+2*a.itemGap)/2,v=i(t,0),x=function(e,t,n,r){var a;if(e+1)a=e;else{if(!(t&&0<t.width))return 0;a=t.width}return p?r:Math.min(a,n)};function r(e,t,n){var p=e[0].trace,h=p.marker||{},m=h.line||{},r=n?p.visible&&p.type===n:o.traceIs(p,"bar"),e=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(r?[e]:[]);e.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),e.exit().remove(),e.each(function(e){var t=b.select(this),n=e[0],r=x(n.mlw,h.line,5,2);t.style("stroke-width",r+"px");var a=n.mcc;!y._inHover&&"mc"in n&&(void 0===(c=(l=T(h)).mid)&&(c=(l.max+l.min)/2),a=_.tryColorscale(h,"")(c));var i,o,s,l,c,u=a||n.mc||h.color,d=h.pattern,f=d&&_.getPatternAttr(d.shape,0,"");f?(i=_.getPatternAttr(d.bgcolor,0,null),o=_.getPatternAttr(d.fgcolor,0,null),s=d.fgopacity,e=S(d.size,8,10),l=S(d.solidity,.5,1),c="legend-"+p.uid,t.call(_.pattern,"legend",g,c,f,e,l,a,d.fillmode,i,o,s)):t.call(w.fill,u),r&&w.stroke(t,n.mlc||m.color)})}function n(e,t,n){var r=e[0],a=r.trace,i=n?a.visible&&a.type===n:o.traceIs(a,n),i=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(i?[e]:[]);i.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),i.exit().remove(),i.size()&&(e=(a.marker||{}).line,n=x(l(e.width,r.pts),e,5,2),(n=m.minExtend(a,{marker:{line:{width:n}}})).marker.line.color=e.color,r=m.minExtend(r,{trace:n}),s(i,r,n))}e.each(function(e){var t=b.select(this),n=m.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity);var r=y.valign,a=e[0].lineHeight,t=e[0].height;"middle"!==r&&a&&t?n.attr("transform",i(0,{top:1,bottom:-1}[r]*(.5*(a-t+3)))):n.attr("transform",null),n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);n=n.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var l,c=e[0].trace,t=[];if(c.visible)switch(c.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]],l=!0;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]],l=!0;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],l="radial";break;case"cone":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]]);break;case"streamtube":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]]);break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],l=!0;break;case"mesh3d":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]]);break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],l=!0;break;case"isosurface":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]])}e=b.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);e.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n,r,a=b.select(this),i=T(c),o=i.colorscale,s=i.reversescale;o?l||(n=o.length,r=(0===t?o[s?n-1:0]:1===t?o[s?0:n-1]:o[Math.floor((n-1)/2)])[1]):(n=c.vertexcolor||c.facecolor||c.color,r=m.isArrayOrTypedArray(n)?n[t]||n[0]:n),a.attr("d",e[0]),r?a.call(w.fill,r):a.call(function(e){var t;e.size()&&(t="legendfill-"+c.uid,_.gradient(e,g,t,k(s,"radial"===l),o,"fill"))})})}).each(function(e){var a=e[0].trace,t="waterfall"===a.type;if(e[0]._distinct&&t){var n=e[0].trace[e[0].dir].marker;return e[0].mc=n.color,e[0].mlw=n.line.width,e[0].mlc=n.line.color,r(e,this,"waterfall")}n=[];a.visible&&t&&(n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);n=b.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);n.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e){var t=b.select(this),n=a[e[0]].marker,r=x(void 0,n.line,5,2);t.attr("d",e[1]).style("stroke-width",r+"px").call(w.fill,n.color),r&&t.call(w.stroke,n.line.color)})}).each(function(e){r(e,this,"funnel")}).each(function(e){r(e,this)}).each(function(e){var n=e[0].trace,r=b.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&o.traceIs(n,"box-violin")?[e]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),r.exit().remove(),r.each(function(){var e,t=b.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==w.opacity(n.fillcolor)||0!==w.opacity((n.line||{}).color)?(e=x(void 0,n.line,5,2),t.style("stroke-width",e+"px").call(w.fill,n.fillcolor),e&&w.stroke(t,n.line.color)):(t=m.minExtend(n,{marker:{size:p?12:m.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(_.pointStyle,t,g))})}).each(function(e){n(e,this,"funnelarea")}).each(function(e){n(e,this,"pie")}).each(function(e){var t=A(e),n=t.showFill,r=t.showLine,a=t.showGradientLine,i=t.showGradientFill,o=t.anyFill,s=t.anyLine,l=e[0],c=l.trace,t=T(c),u=t.colorscale,d=t.reversescale,o=M.hasMarkers(c)||!o?"M5,0":s?"M5,-2":"M5,-3",s=b.select(this),e=s.select(".legendfill").selectAll("path").data(n||i?[e]:[]);e.enter().append("path").classed("js-fill",!0),e.exit().remove(),e.attr("d",o+"h"+h+"v6h-"+h+"z").call(n?_.fillGroupStyle:function(e){var t;e.size()&&(t="legendfill-"+c.uid,_.gradient(e,g,t,k(d),u,"fill"))}),(r||a)&&(f=x(void 0,c.line,10,5),f=m.minExtend(c,{line:{width:f}}),f=[m.minExtend(l,{trace:f})]);var f=s.select(".legendlines").selectAll("path").data(r||a?[f]:[]);f.enter().append("path").classed("js-line",!0),f.exit().remove(),f.attr("d",o+(a?"l"+h+",0.0001":"h"+h)).call(r?_.lineGroupStyle:function(e){var t;e.size()&&(t="legendline-"+c.uid,_.lineGroupStyle(e),_.gradient(e,g,t,k(d),u,"stroke"))})}).each(function(e){var t=A(e),n=t.anyFill,r=t.anyLine,a=t.showLine,t=t.showMarker,i=e[0],o=i.trace,n=!t&&!r&&!n&&M.hasText(o);function s(e,t,n,r){e=m.nestedProperty(o,e).get(),e=m.isArrayOrTypedArray(e)&&t?t(e):e;if(p&&e&&void 0!==r&&(e=r),n){if(e<n[0])return n[0];if(e>n[1])return n[1]}return e}function l(e){return i._distinct&&i.index&&e[i.index]?e[i.index]:e[0]}{var c;(t||n||a)&&(u={},d={},t&&(u.mc=s("marker.color",l),u.mx=s("marker.symbol",l),u.mo=s("marker.opacity",m.mean,[.2,1]),u.mlc=s("marker.line.color",l),u.mlw=s("marker.line.width",m.mean,[0,5],2),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"},c=s("marker.size",m.mean,[2,16],12),u.ms=c,d.marker.size=c),a&&(d.line={width:s("line.width",l,[0,10],5)}),n&&(u.tx="Aa",u.tp=s("textposition",l),u.ts=10,u.tc=s("textfont.color",l),u.tf=s("textfont.family",l)),f=[m.minExtend(i,u)],(c=m.minExtend(o,d)).selectedpoints=null,c.texttemplate=null)}var u=b.select(this).select("g.legendpoints"),d=u.selectAll("path.scatterpts").data(t?f:[]);d.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),d.exit().remove(),d.call(_.pointStyle,c,g),t&&(f[0].mrc=3);var f=u.selectAll("g.pointtext").data(n?f:[]);f.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),f.exit().remove(),f.selectAll("text").call(_.textPointStyle,c,g)}).each(function(e){var a=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(a.visible&&"candlestick"===a.type?[e,e]:[]);e.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=a[t?"increasing":"decreasing"],t=x(void 0,r.line,5,2);n.style("stroke-width",t+"px").call(w.fill,r.fillcolor),t&&w.stroke(n,r.line.color)})}).each(function(e){var a=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(a.visible&&"ohlc"===a.type?[e,e]:[]);e.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=a[t?"increasing":"decreasing"],t=x(void 0,r.line,5,2);n.style("fill","none").call(_.dashLine,r.line.dash,t),t&&w.stroke(n,r.line.color)})})}},{"../../lib":230,"../../registry":313,"../../traces/pie/helpers":345,"../../traces/pie/style_one":351,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale/helpers":111,"../drawing":122,"./constants":151,"@plotly/d3":11}],159:[function(e,t,n){"use strict";e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":161}],160:[function(e,t,n){"use strict";var m=e("../../registry"),r=e("../../plots/plots"),g=e("../../plots/cartesian/axis_ids"),a=e("../../fonts/ploticon"),i=e("../shapes/draw").eraseActiveShape,o=e("../../lib"),s=o._,t=t.exports={};function l(e,t){var n=t.currentTarget,r=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,i=e._fullLayout,o={},s=g.list(e,null,!0),l=i._cartesianSpikesEnabled;if("zoom"===r)for(var c,u,d,t="in"===a?.5:2,f=(1+t)/2,p=(1-t)/2,h=0;h<s.length;h++)(d=s[h]).fixedrange||(u=d._name,"auto"===a?o[u+".autorange"]=!0:"reset"===a?(void 0===d._rangeInitial?o[u+".autorange"]=!0:(c=d._rangeInitial.slice(),o[u+".range[0]"]=c[0],o[u+".range[1]"]=c[1]),void 0!==d._showSpikeInitial&&(o[u+".showspikes"]=d._showSpikeInitial,"on"!==l||d._showSpikeInitial||(l="off"))):(c=[d.r2l(d.range[0]),d.r2l(d.range[1])],o[u+".range[0]"]=d.l2r((c=[f*c[0]+p*c[1],f*c[1]+p*c[0]])[0]),o[u+".range[1]"]=d.l2r(c[1])));else"hovermode"!==r||"x"!==a&&"y"!==a||(a=i._isHoriz?"y":"x",n.setAttribute("data-val",a)),o[r]=a;i._cartesianSpikesEnabled=l,m.call("_guiRelayout",e,o)}function c(e,t){for(var n=t.currentTarget,t=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],i={},o=t.split("."),s=0;s<a.length;s++)i[a[s]+"."+o[1]]=r;i.dragmode="pan"===r?r:"zoom",m.call("_guiRelayout",e,i)}function u(e,t){for(var t=t.currentTarget.getAttribute("data-attr"),n="resetLastSave"===t,r="resetDefault"===t,a=e._fullLayout,i=a._subplots.gl3d||[],o={},s=0;s<i.length;s++){var l,c=i[s],u=c+".camera",d=c+".aspectratio",f=c+".aspectmode",c=a[c]._scene;n?(o[u+".up"]=c.viewInitial.up,o[u+".eye"]=c.viewInitial.eye,o[u+".center"]=c.viewInitial.center,l=!0):r&&(o[u+".up"]=null,o[u+".eye"]=null,l=!(o[u+".center"]=null)),l&&(o[d+".x"]=c.viewInitial.aspectratio.x,o[d+".y"]=c.viewInitial.aspectratio.y,o[d+".z"]=c.viewInitial.aspectratio.z,o[f]=c.viewInitial.aspectmode)}m.call("_guiRelayout",e,o)}function d(e,t){var n=t.currentTarget,t=n._previousVal,r=e._fullLayout,a=r._subplots.gl3d||[],i=["xaxis","yaxis","zaxis"],o={},s={};if(t)s=t,n._previousVal=null;else{for(var l=0;l<a.length;l++){var c=a[l],u=r[c],d=c+".hovermode";o[d]=u.hovermode,s[d]=!1;for(var f=0;f<3;f++){var p=i[f],h=c+"."+p+".showspikes";s[h]=!1,o[h]=u[p].showspikes}}n._previousVal=o}return s}function f(e,t){for(var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,a=e._fullLayout,i=a._subplots.geo||[],o=0;o<i.length;o++){var s=i[o],l=a[s];"zoom"===n&&(l=l.projection.scale,m.call("_guiRelayout",e,s+".projection.scale","in"===r?2*l:.5*l))}"reset"===n&&v(e,"geo")}function p(e){e=e._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function h(e){var t=p(e);m.call("_guiRelayout",e,"hovermode",t)}function y(e,t){for(var n=t.currentTarget.getAttribute("data-val"),r=e._fullLayout,a=r._subplots.mapbox||[],i={},o=0;o<a.length;o++){var s=a[o],l=r[s].zoom;i[s+".zoom"]="in"===n?1.05*l:l/1.05}m.call("_guiRelayout",e,i)}function v(e,t){for(var n=e._fullLayout,r=n._subplots[t]||[],a={},i=0;i<r.length;i++)for(var o=r[i],s=n[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];a[o+"."+u]=s[u]}m.call("_guiRelayout",e,a)}t.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return s(e,"png"===t?"Download plot as a png":"Download plot")},icon:a.camera,click:function(t){var n=t._context.toImageButtonOptions,r={format:n.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&o.isIE()&&(o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(e){e in n&&(r[e]=n[e])}),m.call("downloadImage",t,r).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.disk,click:function(e){r.sendDataToCloud(e)}},t.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.pencil,click:function(e){r.sendDataToCloud(e)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:l},t.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:l},t.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:l},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:l},t.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:a.drawclosedpath,click:l},t.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:a.drawopenpath,click:l},t.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:a.drawline,click:l},t.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:a.drawrect,click:l},t.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:a.drawcircle,click:l},t.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:a.eraseshape,click:i},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:l},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:l},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:l},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:l},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:l},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:l},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:c},t.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:c},t.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:c},t.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:c},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:u},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:u},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);m.call("_guiRelayout",e,t)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:f},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:f},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:f},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:a.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var r=e._fullData[n]._viewInitial;t["node.groups"].push(r.node.groups.slice()),t["node.x"].push(r.node.x.slice()),t["node.y"].push(r.node.y.slice())}m.call("restyle",e,t)}},t.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);t.hovermode=p(e),m.call("_guiRelayout",e,t)}},t.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:a.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(e,t),n.setAttribute("data-attr","resetLastSave"),u(e,t),v(e,"geo"),v(e,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",m.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=g.list(e,null,!0),r={},a=0;a<n.length;a++){var i=n[a];r[i._name+".showspikes"]=t||i._showSpikeInitial}return r}(e))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:a.home,click:function(e){v(e,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:y},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:y}},{"../../fonts/ploticon":213,"../../lib":230,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../shapes/draw":184}],161:[function(e,t,n){"use strict";var r=e("./buttons"),a=Object.keys(r),e=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],i=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(e),o=[];a.forEach(function(e){var t;t=r[e],-1===i.indexOf(t._cat||t.name)&&(e=t.name,t=(t._cat||t.name).toLowerCase(),-1===o.indexOf(e)&&o.push(e),-1===o.indexOf(t)&&o.push(t))}),o.sort(),t.exports={DRAW_MODES:e,backButtons:i,foreButtons:o}},{"./buttons":160}],162:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../color"),s=e("../../plot_api/plot_template"),l=e("./attributes");t.exports=function(e,t){var n=e.modebar||{},r=s.newContainer(t,"modebar");function a(e,t){return i.coerce(n,r,l,e,t)}a("orientation"),a("bgcolor",o.addOpacity(t.paper_bgcolor,.5));e=o.contrast(o.rgb(t.modebar.bgcolor));a("color",o.addOpacity(e,.3)),a("activecolor",o.addOpacity(e,.7)),a("uirevision",t.uirevision),a("add"),a("remove")}},{"../../lib":230,"../../plot_api/plot_template":265,"../color":100,"./attributes":159}],163:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":159,"./defaults":162,"./manage":164}],164:[function(e,t,n){"use strict";var L=e("../../plots/cartesian/axis_ids"),C=e("../../traces/scatter/subtypes"),D=e("../../registry"),O=e("../fx/helpers").isUnifiedHover,i=e("./modebar"),P=e("./buttons"),I=e("./constants").DRAW_MODES;t.exports=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a=n.modeBarButtons,n=Array.isArray(a)&&a.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var a=n[r];if("string"==typeof a){if(void 0===P[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=P[a]}}return e}(a):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,r=e._context;function a(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return 1}else{var n=t.name,t=t._cat||t.name;if(n===e||t===e.toLowerCase())return 1}}var i=t.modebar.add;"string"==typeof i&&(i=[i]);var o=t.modebar.remove;"string"==typeof o&&(o=[o]);var s=r.modeBarButtonsToAdd.concat(i.filter(function(e){for(var t=0;t<r.modeBarButtonsToRemove.length;t++)if(a(e,r.modeBarButtonsToRemove[t]))return!1;return!0})),u=r.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<r.modeBarButtonsToAdd.length;t++)if(a(e,r.modeBarButtonsToAdd[t]))return!1;return!0})),l=t._has("cartesian"),c=t._has("gl3d"),d=t._has("geo"),f=t._has("pie"),p=t._has("funnelarea"),h=t._has("gl2d"),m=t._has("ternary"),g=t._has("mapbox"),y=t._has("polar"),v=t._has("sankey"),x=function(e){for(var t=L.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),e=O(t.hovermode),b=[];function _(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],a=P[r],i=a.name.toLowerCase(),o=(a._cat||a.name).toLowerCase(),s=!1,l=0;l<u.length;l++){var c=u[l].toLowerCase();if(c===i||c===o){s=!0;break}}s||t.push(P[r])}b.push(t)}}i=["toImage"];r.showEditInChartStudio?i.push("editInChartStudio"):r.showSendToCloud&&i.push("sendDataToCloud");_(i);var o=[],w=[],i=[],T=[];1<(l||h||f||p||m)+d+c+g+y?(w=["toggleHover"],i=["resetViews"]):d?(o=["zoomInGeo","zoomOutGeo"],w=["hoverClosestGeo"],i=["resetGeo"]):c?(w=["hoverClosest3d"],i=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(o=["zoomInMapbox","zoomOutMapbox"],w=["toggleHover"],i=["resetViewMapbox"]):h?w=["hoverClosestGl2d"]:f?w=["hoverClosestPie"]:v?(w=["hoverClosestCartesian","hoverCompareCartesian"],i=["resetViewSankey"]):w=["toggleHover"];l&&(w=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(e){for(var t=0;t<e.length;t++)if(!D.traceIs(e[t],"noHover"))return!1;return!0}(n)||e)&&(w=[]);!l&&!h||x||(o=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==i[0]&&(i=["resetScale2d"]));c?T=["zoom3d","pan3d","orbitRotation","tableRotation"]:(l||h)&&!x||m?T=["zoom2d","pan2d"]:g||d?T=["pan2d"]:y&&(T=["zoom2d"]);!function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(D.traceIs(r,"scatter-like")?(C.hasMarkers(r)||C.hasText(r))&&(t=!0):D.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(n)||T.push("select2d","lasso2d");function M(e){-1===k.indexOf(e)&&-1!==w.indexOf(e)&&k.push(e)}var k=[];if(Array.isArray(s)){for(var A=[],S=0;S<s.length;S++){var E=s[S];"string"==typeof E?(E=E.toLowerCase(),-1!==I.indexOf(E)?(t._has("mapbox")||t._has("cartesian"))&&T.push(E):"togglespikelines"===E?M("toggleSpikelines"):"togglehover"===E?M("toggleHover"):"hovercompare"===E?M("hoverCompareCartesian"):"hoverclosest"===E?(M("hoverClosestCartesian"),M("hoverClosestGeo"),M("hoverClosest3d"),M("hoverClosestGl2d"),M("hoverClosestPie")):"v1hovermode"===E&&(M("toggleHover"),M("hoverClosestCartesian"),M("hoverCompareCartesian"),M("hoverClosestGeo"),M("hoverClosest3d"),M("hoverClosestGl2d"),M("hoverClosestPie"))):A.push(E)}s=A}return _(T),_(o.concat(i)),_(k),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(b,s)}(e);r?r.update(e,n):t._modeBar=i(e,n)}else r&&(r.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":280,"../../registry":313,"../../traces/scatter/subtypes":378,"../fx/helpers":136,"./buttons":160,"./constants":161,"./modebar":165}],165:[function(e,t,n){"use strict";var o=e("@plotly/d3"),a=e("fast-isnumeric"),s=e("../../lib"),i=e("../../fonts/ploticon"),l=new DOMParser;function r(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}e=r.prototype;e.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,a="modebar-"+r._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var i=r.modebar,e="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(a),s.addRelatedStyleRule(a,e+"#"+a+" .modebar-group","background-color: "+i.bgcolor),s.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+i.color),s.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+i.activecolor),s.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+i.activecolor);e=!this.hasButtons(t),a=this.hasLogo!==n.displaylogo,i=this.locale!==n.locale;this.locale=n.locale,(e||a||i)&&(this.removeAllButtons(),this.updateButtons(t),(n.watermark||n.displaylogo)&&(t=this.getLogo(),n.watermark&&(t.className=t.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(t,this.element.childNodes[0]):this.element.appendChild(t),this.hasLogo=!0)),this.updateActiveButton()},e.updateButtons=function(e){var r=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=r.createGroup();e.forEach(function(e){var t=e.name;if(!t)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(t))throw new Error("button name '"+t+"' is taken");r.buttonsNames.push(t);e=r.createButton(e);r.buttonElements.push(e),n.appendChild(e)}),r.element.appendChild(n)})},e.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},e.createButton=function(t){var n=this,e=document.createElement("a");e.setAttribute("rel","tooltip"),e.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),!r&&0!==r||e.setAttribute("data-title",r),void 0!==t.attr&&e.setAttribute("data-attr",t.attr);r=t.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),e.setAttribute("data-val",r)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");e.addEventListener("click",function(e){t.click(n.graphInfo,e),n.updateActiveButton(e.currentTarget)}),e.setAttribute("data-toggle",t.toggle||!1),t.toggle&&o.select(e).classed("active",!0);r=t.icon;return"function"==typeof r?e.appendChild(r()):e.appendChild(this.createIcon(r||i.question)),e.setAttribute("data-gravity",t.gravity||"n"),e},e.createIcon=function(e){var t,n=a(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";return e.path&&((t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon"),(r=document.createElementNS(r,"path")).setAttribute("d",e.path),e.transform?r.setAttribute("transform",e.transform):void 0!==e.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(r)),(t=e.svg?l.parseFromString(e.svg,"application/xml").childNodes[0]:t).setAttribute("height","1em"),t.setAttribute("width","1em"),t},e.updateActiveButton=function(e){var a=this.graphInfo._fullLayout,i=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||!0,n=e.getAttribute("data-attr"),r="true"===e.getAttribute("data-toggle"),e=o.select(e);r?n===i&&e.classed("active",!e.classed("active")):(n=null===n?n:s.nestedProperty(a,n).get(),e.classed("active",n===t))})},e.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},e.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(i.newplotlylogo)),e.appendChild(t),e},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,t=new r({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&o.select(t.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),t}},{"../../fonts/ploticon":213,"../../lib":230,"@plotly/d3":11,"fast-isnumeric":15}],166:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),e=(0,e("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:e,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../color/attributes":99}],167:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],168:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../color"),u=e("../../plot_api/plot_template"),d=e("../../plots/array_container_defaults"),f=e("./attributes"),p=e("./constants");function h(n,r,e,t){var a=t.calendar;function i(e,t){return l.coerce(n,r,f.buttons,e,t)}i("visible")&&("all"!==(t=i("step"))&&(!a||"gregorian"===a||"month"!==t&&"year"!==t?i("stepmode"):r.stepmode="backward",i("count")),i("label"))}t.exports=function(e,t,n,r,a){var i=e.rangeselector||{},o=u.newContainer(t,"rangeselector");function s(e,t){return l.coerce(i,o,f,e,t)}s("visible",0<d(i,o,{name:"buttons",handleItemDefaults:h,calendar:a}).length)&&(s("x",(r=function(t,n,e){for(var r=e.filter(function(e){return n[e].anchor===t._id}),a=0,i=0;i<r.length;i++){var o=n[r[i]].domain;o&&(a=Math.max(o[1],a))}return[t.domain[0],a+p.yPad]}(t,n,r))[0]),s("y",r[1]),l.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),l.coerceFont(s,"font",n.font),n=s("bgcolor"),s("activecolor",c.contrast(n,p.lightAmount,p.darkAmount)),s("bordercolor"),s("borderwidth"))}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/array_container_defaults":271,"../color":100,"./attributes":166,"./constants":167}],169:[function(e,t,n){"use strict";var d=e("@plotly/d3"),o=e("../../registry"),f=e("../../plots/plots"),r=e("../color"),p=e("../drawing"),h=e("../../lib"),m=h.strTranslate,g=e("../../lib/svg_text_utils"),s=e("../../plots/cartesian/axis_ids"),a=e("../../constants/alignment"),y=a.LINE_SPACING,v=a.FROM_TL,x=a.FROM_BR,b=e("./constants"),l=e("./get_update_object");function c(e){return e._id}function u(e,t,n){e=h.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});e.attr({rx:b.rx,ry:b.ry}),e.call(r.stroke,t.bordercolor).call(r.fill,(e=t,(n=n)._isActive||n._isHovered?e.activecolor:e.bgcolor)).style("stroke-width",t.borderwidth+"px")}function _(e,t,n,r){h.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")}).call(p.font,t.font).text(function(e,t){if(e.label)return t?h.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,r._fullLayout._meta)).call(function(e){g.convertToTspans(e,r)})}t.exports=function(i){var e=i._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=s.list(e,"x",!0),n=[],r=0;r<t.length;r++){var a=t[r];a.rangeselector&&a.rangeselector.visible&&n.push(a)}return n}(i),c);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var t=d.select(this),r=e,a=r.rangeselector,e=t.selectAll("g.button").data(h.filterVisible(a.buttons));e.enter().append("g").classed("button",!0),e.exit().remove(),e.each(function(e){var t=d.select(this),n=l(r,e);e._isActive=function(e,t,n){{if("all"===t.step)return!0===e.autorange;t=Object.keys(n);return e.range[0]===n[t[0]]&&e.range[1]===n[t[1]]}}(r,e,n),t.call(u,a,e),t.call(_,a,e,i),t.on("click",function(){i._dragged||o.call("_guiRelayout",i,n)}),t.on("mouseover",function(){e._isHovered=!0,t.call(u,a,e)}),t.on("mouseout",function(){e._isHovered=!1,t.call(u,a,e)})}),function(e,t,o,n,r){var s=0,l=0,c=o.borderwidth;t.each(function(){var e=d.select(this).select(".selector-text"),t=o.font.size*y,e=Math.max(t*g.lineCount(e),16)+3;l=Math.max(l,e)}),t.each(function(){var e=d.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),r=n.node()&&p.bBox(n.node()).width,a=o.font.size*y,i=g.lineCount(n),r=Math.max(r+10,b.minButtonWidth);e.attr("transform",m(c+s,c)),t.attr({x:0,y:0,width:r,height:l}),g.positionText(n,r/2,l/2-(i-1)*a/2+3),s+=r+5});var a=e._fullLayout._size,i=a.l+a.w*o.x,u=a.t+a.h*(1-o.y),t="left";h.isRightAnchor(o)&&(i-=s,t="right");h.isCenterAnchor(o)&&(i-=s/2,t="center");a="top";h.isBottomAnchor(o)&&(u-=l,a="bottom");h.isMiddleAnchor(o)&&(u-=l/2,a="middle");s=Math.ceil(s),l=Math.ceil(l),i=Math.round(i),u=Math.round(u),f.autoMargin(e,n+"-range-selector",{x:o.x,y:o.y,l:s*v[t],r:s*x[t],b:l*x[a],t:l*v[a]}),r.attr("transform",m(i,u))}(i,e,a,r._name,t)})}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"./constants":167,"./get_update_object":170,"@plotly/d3":11}],170:[function(e,t,n){"use strict";var l=e("@plotly/d3");t.exports=function(e,t){var n=e._name,r={};return"all"===t.step?r[n+".autorange"]=!0:(t=function(e,t){var n,r=e.range,a=new Date(e.r2l(r[1])),i=t.step,o=t.count;switch(t.stepmode){case"backward":n=e.l2r(+l.time[i].utc.offset(a,-o));break;case"todate":var s=l.time[i].utc.offset(a,-o);n=e.l2r(+l.time[i].utc.ceil(s))}r=r[1];return[n,r]}(e,t),r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]),r}},{"@plotly/d3":11}],171:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":166,"./defaults":168,"./draw":169}],172:[function(e,t,n){"use strict";e=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:e.background,editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":99}],173:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axis_ids").list,o=e("../../plots/cartesian/autorange").getAutoRange,s=e("./constants");t.exports=function(e){for(var t=i(e,"x",!0),n=0;n<t.length;n++){var r=t[n],a=r[s.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=o(e,r))}}},{"../../plots/cartesian/autorange":275,"../../plots/cartesian/axis_ids":280,"./constants":174}],174:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],175:[function(e,t,n){"use strict";var h=e("../../lib"),m=e("../../plot_api/plot_template"),g=e("../../plots/cartesian/axis_ids"),y=e("./attributes"),v=e("./oppaxis_attributes");t.exports=function(e,t,n){var r=e[n],e=t[n];if(r.rangeslider||t._requestRangeslider[e._id]){h.isPlainObject(r.rangeslider)||(r.rangeslider={});var a=r.rangeslider,i=m.newContainer(e,"rangeslider");if(f("visible")){f("bgcolor",t.plot_bgcolor),f("bordercolor"),f("borderwidth"),f("thickness"),f("autorange",!e.isValidRange(a.range)),f("range");e=t._subplots;if(e)for(var e=e.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===g.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),o=h.simpleMap(e,g.id2name),s=0;s<o.length;s++){var l,c=o[s],u=a[c]||{},d=m.newContainer(i,c,"yaxis"),c=t[c];"match"!==p("rangemode",l=u.range&&c.isValidRange(u.range)?"fixed":l)&&p("range",c.range.slice())}i._input=a}}function f(e,t){return h.coerce(a,i,y,e,t)}function p(e,t){return h.coerce(u,d,v,e,t)}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_ids":280,"./attributes":172,"./oppaxis_attributes":179}],176:[function(e,t,n){"use strict";var S=e("@plotly/d3"),E=e("../../registry"),f=e("../../plots/plots"),L=e("../../lib"),C=L.strTranslate,o=e("../drawing"),l=e("../color"),D=e("../titles"),p=e("../../plots/cartesian"),O=e("../../plots/cartesian/axis_ids"),P=e("../dragelement"),I=e("../../lib/setcursor"),R=e("./constants");function N(e,t,n,r){var a=L.ensureSingle(e,"rect",R.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),i=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,e=-r._offsetShift,t=o.crispRound(t,r.borderwidth);a.attr({width:r._width+i,height:r._height+i,transform:C(e,e),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":t})}function z(e,t,n,r){t=t._fullLayout;L.ensureSingleById(t._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function F(e,s,l,c){var u,d=s.calcdata,e=e.selectAll("g."+R.rangePlotClassName).data(l._subplotsWith,L.identity);e.enter().append("g").attr("class",function(e){return R.rangePlotClassName+" "+e}).call(o.setClipUrl,c._clipId,s),e.order(),e.exit().remove(),e.each(function(e,t){var n=S.select(this),r=0===t,a=O.getFromId(s,e,"y"),i=a._name,o=c[i],t={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:c.range.slice(),calendar:l.calendar},width:c._width,height:c._height,margin:{t:0,b:0,l:0,r:0}},_context:s._context};l.rangebreaks&&(t.layout.xaxis.rangebreaks=l.rangebreaks),t.layout[i]={type:a.type,domain:[0,1],range:("match"!==o.rangemode?o:a).range.slice(),calendar:a.calendar},a.rangebreaks&&(t.layout[i].rangebreaks=a.rangebreaks),f.supplyDefaults(t);a=t._fullLayout.xaxis,i=t._fullLayout[i];a.clearCalc(),a.setScale(),i.clearCalc(),i.setScale();i={id:e,plotgroup:n,xaxis:a,yaxis:i,isRangePlot:!0};r?u=i:(i.mainplot="xy",i.mainplotinfo=u),p.rangePlot(s,i,function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],i=a[0].trace;i.xaxis+i.yaxis===t&&n.push(a)}return n}(d,e))})}function j(e,t,n,r,a){L.ensureSingle(e,"rect",R.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,R.maskColor),L.ensureSingle(e,"rect",R.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,R.maskColor),"match"!==a.rangemode&&(L.ensureSingle(e,"rect",R.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,R.maskOppAxisColor),L.ensureSingle(e,"rect",R.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",R.maskOppBorder).call(l.fill,R.maskOppAxisColor))}function H(e,t,n,r){t._context.staticPlot||L.ensureSingle(e,"rect",R.slideBoxClassName,function(e){e.attr({y:0,cursor:R.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:R.slideBoxFill})}function B(e,t,n,r){var a=L.ensureSingle(e,"g",R.grabberMinClassName),i=L.ensureSingle(e,"g",R.grabberMaxClassName),o={x:0,width:R.handleWidth,rx:R.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":R.handleStrokeWidth,"shape-rendering":"crispEdges"},e={y:Math.round(r._height/4),height:Math.round(r._height/2)};L.ensureSingle(a,"rect",R.handleMinClassName,function(e){e.attr(o)}).attr(e),L.ensureSingle(i,"rect",R.handleMaxClassName,function(e){e.attr(o)}).attr(e);var s={width:R.grabAreaWidth,x:0,y:0,fill:R.grabAreaFill,cursor:t._context.staticPlot?void 0:R.grabAreaCursor};L.ensureSingle(a,"rect",R.grabAreaMinClassName,function(e){e.attr(s)}).attr("height",r._height),L.ensureSingle(i,"rect",R.grabAreaMaxClassName,function(e){e.attr(s)}).attr("height",r._height)}t.exports=function(k){for(var A=k._fullLayout,e=A._rangeSliderData,t=0;t<e.length;t++){var n=e[t][R.name];n._clipId=n._id+"-"+A._uid}var r=A._infolayer.selectAll("g."+R.containerClassName).data(e,function(e){return e._name});r.exit().each(function(e){e=e[R.name];A._topdefs.select("#"+e._clipId).remove()}).remove(),0!==e.length&&(r.enter().append("g").classed(R.containerClassName,!0).attr("pointer-events","all"),r.each(function(e){var t=S.select(this),n=e[R.name],r=A[O.id2name(e.anchor)],a=n[O.id2name(e.anchor)];n.range&&(o=L.simpleMap(n.range,e.r2l),o=(i=L.simpleMap(e.range,e.r2l))[0]<i[1]?[Math.min(o[0],i[0]),Math.max(o[1],i[1])]:[Math.max(o[0],i[0]),Math.min(o[1],i[1])],n.range=n._input.range=L.simpleMap(o,e.l2r)),e.cleanRange("rangeslider.range");var i=A._size,o=e.domain;n._width=i.w*(o[1]-o[0]);o=Math.round(i.l+i.w*o[0]),i=Math.round(i.t+i.h*(1-e._counterDomainMin)+("bottom"===e.side?e._depth:0)+n._offsetShift+R.extraPad);t.attr("transform",C(o,i)),n._rl=L.simpleMap(n.range,e.r2l);var s,l,c,y,v,x,b,_,w,u=n._rl[0],o=n._rl[1],d=o-u;if(n.p2d=function(e){return e/n._width*d+u},n.d2p=function(e){return(e-u)/d*n._width},e.rangebreaks){var f=e.locateBreaks(u,o);if(f.length){for(var p,h=0,m=0;m<f.length;m++)h+=(p=f[m]).max-p.min;var g=n._width/(o-u-h),T=[-g*u];for(m=0;m<f.length;m++)p=f[m],T.push(T[T.length-1]-g*(p.max-p.min));for(n.d2p=function(e){for(var t=T[0],n=0;n<f.length;n++){var r=f[n];if(e>=r.max)t=T[n+1];else if(e<r.min)break}return t+g*e},m=0;m<f.length;m++)(p=f[m]).pmin=n.d2p(p.min),p.pmax=n.d2p(p.max);n.p2d=function(e){for(var t=T[0],n=0;n<f.length;n++){var r=f[n];if(e>=r.pmax)t=T[n+1];else if(e<r.pmin)break}return(e-t)/g}}}function M(){var e=S.event,d=e.target,f=e.clientX||e.touches[0].clientX,p=f-c.node().getBoundingClientRect().left,h=x.d2p(v._rl[0]),m=x.d2p(v._rl[1]),g=P.coverSlip();function t(e){var t,n,r,a,i,o,s,l,c=+(e.clientX||e.touches[0].clientX)-f;switch(d){case b:t="ew-resize",r=h+c,n=m+c;break;case _:t="col-resize",r=h+c,n=m;break;case w:t="col-resize",r=h,n=m+c;break;default:t="ew-resize",n=(r=p)+c}function u(e){return i.l2r(L.constrain(e,o._rl[0],o._rl[1]))}n<r&&(e=n,n=r,r=e),x._pixelMin=r,x._pixelMax=n,I(S.select(g),t),a=y,i=v,s=u((o=x).p2d(o._pixelMin)),l=u(o.p2d(o._pixelMax)),window.requestAnimationFrame(function(){E.call("_guiRelayout",a,i._name+".range",[s,l])})}function n(){g.removeEventListener("mousemove",t),g.removeEventListener("mouseup",n),this.removeEventListener("touchmove",t),this.removeEventListener("touchend",n),L.removeElement(g)}this.addEventListener("touchmove",t),this.addEventListener("touchend",n),g.addEventListener("mousemove",t),g.addEventListener("mouseup",n)}"match"!==a.rangemode&&(s=r.r2l(a.range[0]),l=r.r2l(a.range[1])-s,n.d2pOppAxis=function(e){return(e-s)/l*n._height}),t.call(N,k,e,n).call(z,k,e,n).call(F,k,e,n).call(j,k,e,n,a).call(H,k,e,n).call(B,k,e,n),c=t,v=e,x=n,(y=k)._context.staticPlot||(b=c.select("rect."+R.slideBoxClassName).node(),_=c.select("rect."+R.grabAreaMinClassName).node(),w=c.select("rect."+R.grabAreaMaxClassName).node(),c.on("mousedown",M),c.on("touchstart",M)),function(e,t,n,r,a){var i=R.handleWidth/2;function o(e){return L.constrain(e,0,n._width)}function s(e){return L.constrain(e,0,n._height)}function l(e){return L.constrain(e,-i,n._width+i)}var c=o(n.d2p(t._rl[0])),t=o(n.d2p(t._rl[1]));e.select("rect."+R.slideBoxClassName).attr("x",c).attr("width",t-c),e.select("rect."+R.maskMinClassName).attr("width",c),e.select("rect."+R.maskMaxClassName).attr("x",t).attr("width",n._width-t),"match"!==a.rangemode&&(a=n._height-s(n.d2pOppAxis(r._rl[1])),r=n._height-s(n.d2pOppAxis(r._rl[0])),e.select("rect."+R.maskMinOppAxisClassName).attr("x",c).attr("height",a).attr("width",t-c),e.select("rect."+R.maskMaxOppAxisClassName).attr("x",c).attr("y",r).attr("height",n._height-r).attr("width",t-c),e.select("rect."+R.slideBoxClassName).attr("y",a).attr("height",r-a));c=Math.round(l(c-i))-.5,t=Math.round(l(t-i))+.5;e.select("g."+R.grabberMinClassName).attr("transform",C(c,.5)),e.select("g."+R.grabberMaxClassName).attr("transform",C(t,.5))}(t,e,n,r,a),"bottom"===e.side&&D.draw(k,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:A._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:i+n._height+n._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":230,"../../lib/setcursor":250,"../../plots/cartesian":290,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":174,"@plotly/d3":11}],177:[function(e,t,n){"use strict";var s=e("../../plots/cartesian/axis_ids"),o=e("../../lib/svg_text_utils"),l=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,u=l.name;function d(e){e=e&&e[u];return e&&e.visible}n.isVisible=d,n.makeData=function(e){var t=s.list({_fullLayout:e},"x",!0),n=e.margin,r=[];if(!e._has("gl2d"))for(var a=0;a<t.length;a++){var i,o=t[a];d(o)&&(r.push(o),(i=o[u])._id=u+o._id,i._height=(e.height-n.b-n.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2))}e._rangeSliderData=r},n.autoMarginOpts=function(e,t){var n=e._fullLayout,r=t[u],a=t._id.charAt(0),i=0,e=0;return"bottom"===t.side&&(i=t._depth,t.title.text!==n._dfltTitle[a]&&(e=1.5*t.title.font.size+10+r._offsetShift,e+=(t.title.text.match(o.BR_TAG_ALL)||[]).length*t.title.font.size*c)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+i+Math.max(n.margin.b,e),pad:l.extraPad+2*r._offsetShift}}},{"../../constants/alignment":205,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"./constants":174}],178:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("./oppaxis_attributes"),o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":230,"./attributes":172,"./calc_autorange":173,"./defaults":175,"./draw":176,"./helpers":177,"./oppaxis_attributes":179}],179:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],180:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../traces/scatter/attributes").line,i=e("../drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../traces/scatter/attributes":353,"../annotations/attributes":83,"../drawing/attributes":121}],181:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),f=e("./constants"),p=e("./helpers");function h(e,t,n,r,a,i){var o=e/2,e=i;if("pixel"!==t)return{ppad:o};n=a?p.extractPathCoords(a,i?f.paramIsY:f.paramIsX):[n,r],r=u.aggNums(Math.max,null,n),n=u.aggNums(Math.min,null,n),n=n<0?Math.abs(n)+o:o,r=0<r?r+o:o;return{ppad:o,ppadplus:e?n:r,ppadminus:e?r:n}}function m(e,t,n,r,a){var i="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[i(t),i(n)];if(r){var o,s,l,c=1/0,u=-1/0,d=r.match(f.segmentRE);for("date"===e.type&&(i=p.decodeDate(i)),o=0;o<d.length;o++)void 0!==(l=a[d[o].charAt(0)].drawn)&&(!(s=d[o].substr(1).match(f.paramRE))||s.length<l||((l=i(s[l]))<c&&(c=l),u<l&&(u=l)));return c<=u?[c,u]:void 0}}t.exports=function(e){var t=e._fullLayout,n=u.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var a=n[r];a._extremes={};var i,o,s,l=d.getRefType(a.xref),c=d.getRefType(a.yref);"paper"!==a.xref&&"domain"!==l&&(o="pixel"===a.xsizemode?a.xanchor:a.x0,s="pixel"===a.xsizemode?a.xanchor:a.x1,(o=m(i=d.getFromId(e,a.xref),o,s,a.path,f.paramIsX))&&(a._extremes[i._id]=d.findExtremes(i,o,h(a.line.width,a.xsizemode,a.x0,a.x1,a.path,!1)))),"paper"!==a.yref&&"domain"!==c&&(s="pixel"===a.ysizemode?a.yanchor:a.y0,c="pixel"===a.ysizemode?a.yanchor:a.y1,(o=m(i=d.getFromId(e,a.yref),s,c,a.path,f.paramIsY))&&(a._extremes[i._id]=d.findExtremes(i,o,h(a.line.width,a.ysizemode,a.y0,a.y1,a.path,!0))))}}},{"../../lib":230,"../../plots/cartesian/axes":276,"./constants":182,"./helpers":191}],182:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],183:[function(e,t,n){"use strict";var b=e("../../lib"),_=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),w=e("./attributes"),T=e("./helpers");function a(n,r,e){function t(e,t){return b.coerce(n,r,w,e,t)}if(t("visible")){var a=t("path"),i=t("type",a?"path":"rect");"path"!==r.type&&delete r.path,t("editable"),t("layer"),t("opacity"),t("fillcolor"),t("fillrule"),t("line.width")&&(t("line.color"),t("line.dash"));for(var o=t("xsizemode"),s=t("ysizemode"),l=["x","y"],c=0;c<2;c++){var u,d,f,p,h=l[c],m=h+"anchor",g="x"===h?o:s,y={_fullLayout:e},v=_.coerceRef(n,r,y,h,void 0,"paper"),x="range"===_.getRefType(v)?((f=_.getFromId(y,v))._shapeIndices.push(r._index),u=T.rangeToShapePosition(f),T.shapePositionToRange(f)):u=b.identity;"path"!==i&&(p=n[d=h+"0"],h=n[f=h+"1"],n[d]=x(n[d],!0),n[f]=x(n[f],!0),"pixel"===g?(t(d,0),t(f,10)):(_.coercePosition(r,y,t,v,d,.25),_.coercePosition(r,y,t,v,f,.75)),r[d]=u(r[d]),r[f]=u(r[f]),n[d]=p,n[f]=h),"pixel"===g&&(g=n[m],n[m]=x(n[m],!0),_.coercePosition(r,y,t,v,m,.25),r[m]=u(r[m]),n[m]=g)}"path"===i?t("path"):b.noneOrAll(n,r,["x0","x1","y0","y1"])}}t.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:a})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":180,"./helpers":191}],184:[function(e,t,n){"use strict";var re=e("../../registry"),ae=e("../../lib"),ie=e("../../plots/cartesian/axes"),oe=e("./draw_newshape/helpers").readPaths,se=e("./draw_newshape/display_outlines"),i=e("../../plots/cartesian/handle_outline").clearOutlineControllers,le=e("../color"),ce=e("../drawing"),ue=e("../../plot_api/plot_template").arrayEditor,de=e("../dragelement"),fe=e("../../lib/setcursor"),pe=e("./constants"),he=e("./helpers");function me(e){var t,n=e._fullLayout;for(t in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._plots){var r=n._plots[t].shapelayer;r&&r.selectAll("path").remove()}for(var a=0;a<n.shapes.length;a++)n.shapes[a].visible&&o(e,a)}function ge(e){return e._fullLayout._drawing}function ye(e){return!e._context.edits.shapePosition}function o(Q,ee){Q._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+ee+'"]').remove();var e=he.makeOptionsAndPlotinfo(Q,ee),te=e.options,ne=e.plotinfo;function t(e){var t=xe(Q,te),n={"data-index":ee,"fill-rule":te.fillrule,d:t},r=te.opacity,a=te.fillcolor,i=te.line.width?te.line.color:"rgba(0,0,0,0)",o=te.line.width,s=te.line.dash;o||!0!==te.editable||(o=5,s="solid");var l="Z"!==t[t.length-1],c=ye(Q)&&te.editable&&Q._fullLayout._activeShapeIndex===ee;c&&(a=l?"rgba(0,0,0,0)":Q._fullLayout.activeshape.fillcolor,r=Q._fullLayout.activeshape.opacity);var u,d,f,p,h,m,g,y,v,x,b,_,w,T,M,k,A,S,E,L,C,D,O,P,I,R,N,z,F,j,H,B,q,U,Y,V,G,W=e.append("path").attr(n).style("opacity",r).call(le.stroke,i).call(le.fill,a).call(ce.dashLine,s,o);function Z(e){var t,n,r,a;D=ge(u)?null:N?"path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point":(t=(r=G.element.getBoundingClientRect()).right-r.left,a=r.bottom-r.top,n=e.clientX-r.left,r=e.clientY-r.top,a=!z&&O<t&&P<a&&!e.shiftKey?de.getCursor(n/t,1-r/a):"move",fe(d,a),a.split("-")[0])}function $(t,n){var e,r;"path"===f.type?(r=e=function(e){return e},I?F("xanchor",f.xanchor=Y(b+t)):(e=function(e){return Y(q(e)+t)},j&&"date"===j.type&&(e=he.encodeDate(e))),R?F("yanchor",f.yanchor=V(_+n)):(r=function(e){return V(U(e)+n)},H&&"date"===H.type&&(r=he.encodeDate(r))),F("path",f.path=be(C,e,r))):(I?F("xanchor",f.xanchor=Y(b+t)):(F("x0",f.x0=Y(g+t)),F("x1",f.x1=Y(v+t))),R?F("yanchor",f.yanchor=V(_+n)):(F("y0",f.y0=V(y+n)),F("y1",f.y1=V(x+n)))),d.attr("d",xe(u,f)),J(h,f)}function X(t,n){var e,r,a,i,o,s;z?(e=i=function(e){return e},I?F("xanchor",f.xanchor=Y(b+t)):(i=function(e){return Y(q(e)+t)},j&&"date"===j.type&&(i=he.encodeDate(i))),R?F("yanchor",f.yanchor=V(_+n)):(e=function(e){return V(U(e)+n)},H&&"date"===H.type&&(e=he.encodeDate(e))),F("path",f.path=be(C,i,e))):N?"resize-over-start-point"===D?(r=g+t,o=R?y-n:y+n,F("x0",f.x0=I?r:Y(r)),F("y0",f.y0=R?o:V(o))):"resize-over-end-point"===D&&(s=v+t,a=R?x-n:x+n,F("x1",f.x1=I?s:Y(s)),F("y1",f.y1=R?a:V(a))):(e=(i=function(e){return-1!==D.indexOf(e)})("n"),r=i("s"),o=i("w"),s=i("e"),a=e?w+n:w,i=r?T+n:T,o=o?M+t:M,s=s?k+t:k,R&&(e&&(a=w-n),r&&(i=T-n)),(!R&&P<i-a||R&&P<a-i)&&(F(A,f[A]=R?a:V(a)),F(S,f[S]=R?i:V(i))),O<s-o&&(F(E,f[E]=I?o:Y(o)),F(L,f[L]=I?s:Y(s)))),d.attr("d",xe(u,f)),J(h,f)}function J(a,i){(I||R)&&function(){var e="path"!==i.type,t=a.selectAll(".visual-cue").data([0]);t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var n=q(I?i.xanchor:ae.midRange(e?[i.x0,i.x1]:he.extractPathCoords(i.path,pe.paramIsX))),e=U(R?i.yanchor:ae.midRange(e?[i.y0,i.y1]:he.extractPathCoords(i.path,pe.paramIsY)));{var r;n=he.roundPositionForSharpStrokeRendering(n,1),e=he.roundPositionForSharpStrokeRendering(e,1),I&&R?(r="M"+(n-1-1)+","+(e-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",t.attr("d",r)):I?(r="M"+(n-1-1)+","+(e-9-1)+"v18 h2 v-18 Z",t.attr("d",r)):(e="M"+(n-9-1)+","+(e-1-1)+"h18 v2 h-18 Z",t.attr("d",e))}}()}function K(e){e.selectAll(".visual-cue").remove()}ve(W,Q,te),(c||Q._context.edits.shapePosition)&&(B=ue(Q.layout,"shapes",te)),c?(W.style({cursor:"move"}),c={element:W.node(),plotinfo:ne,gd:Q,editHelpers:B,isActiveShape:!0},t=oe(t,Q),se(t,W,c)):Q._context.edits.shapePosition?(u=Q,d=W,p=ee,h=e,m=B,P=O=10,I="pixel"===(f=te).xsizemode,R="pixel"===f.ysizemode,N="line"===f.type,z="path"===f.type,F=m.modifyItem,j=ie.getFromId(u,f.xref),e=ie.getRefType(f.xref),H=ie.getFromId(u,f.yref),B=ie.getRefType(f.yref),q=he.getDataToPixel(u,j,!1,e),U=he.getDataToPixel(u,H,!0,B),Y=he.getPixelToData(u,j,!1,e),V=he.getPixelToData(u,H,!0,B),B=N?function(){var e=Math.max(f.line.width,10),t=h.append("g").attr("data-index",p);t.append("path").attr("d",d.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"});var n={"fill-opacity":"0"},e=Math.max(e/2,10);return t.append("circle").attr({"data-line-point":"start-point",cx:I?q(f.xanchor)+f.x0:q(f.x0),cy:R?U(f.yanchor)-f.y0:U(f.y0),r:e}).style(n).classed("cursor-grab",!0),t.append("circle").attr({"data-line-point":"end-point",cx:I?q(f.xanchor)+f.x1:q(f.x1),cy:R?U(f.yanchor)-f.y1:U(f.y1),r:e}).style(n).classed("cursor-grab",!0),t}():d,G={element:B.node(),gd:u,prepFn:function(e){ge(u)||(I&&(b=q(f.xanchor)),R&&(_=U(f.yanchor)),"path"===f.type?C=f.path:(g=I?f.x0:q(f.x0),y=R?f.y0:U(f.y0),v=I?f.x1:q(f.x1),x=R?f.y1:U(f.y1)),L=g<v?(M=g,E="x0",k=v,"x1"):(M=v,E="x1",k=g,"x0"),S=!R&&y<x||R&&x<y?(w=y,A="y0",T=x,"y1"):(w=x,A="y1",T=y,"y0"),Z(e),J(h,f),function(e,t,n){var r=t.xref,a=t.yref,i=ie.getFromId(n,r),o=ie.getFromId(n,a),t="";"paper"===r||i.autorange||(t+=r);"paper"===a||o.autorange||(t+=a);ce.setClipUrl(e,t?"clip"+n._fullLayout._uid+t:null,n)}(d,f,u),G.moveFn="move"===D?$:X,G.altKey=e.altKey)},doneFn:function(){ge(u)||(fe(d),K(h),ve(d,u,f),re.call("_guiRelayout",u,m.getUpdateObj()))},clickFn:function(){ge(u)||K(h)}},de.init(G),B.node().onmousemove=Z):!0===te.editable&&W.style("pointer-events",l||le.opacity(a)*r<=.5?"stroke":"all"),W.node().addEventListener("click",function(){var e,t;t=W,!ye(e=Q)||0<=(t=+t.node().getAttribute("data-index"))&&(t!==e._fullLayout._activeShapeIndex?(e._fullLayout._activeShapeIndex=t,e._fullLayout._deactivateShape=_e,me(e)):_e(e))})}te._input&&!1!==te.visible&&("below"!==te.layer?t(Q._fullLayout._shapeUpperLayer):"paper"!==te.xref&&"paper"!==te.yref&&ne._hadPlotinfo?t((ne.mainplotinfo||ne).shapelayer):t(Q._fullLayout._shapeLowerLayer))}function ve(e,t,n){n=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ce.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function xe(e,t){var n,r,s,l,c,u,d,f,a=t.type,i=ie.getRefType(t.xref),o=ie.getRefType(t.yref),p=ie.getFromId(e,t.xref),h=ie.getFromId(e,t.yref),m=e._fullLayout._size,e=p?"domain"===i?function(e){return p._offset+p._length*e}:(n=he.shapePositionToRange(p),function(e){return p._offset+p.r2p(n(e,!0))}):function(e){return m.l+m.w*e},i=h?"domain"===o?function(e){return h._offset+h._length*(1-e)}:(r=he.shapePositionToRange(h),function(e){return h._offset+h.r2p(r(e,!0))}):function(e){return m.t+m.h*(1-e)};if("path"===a)return p&&"date"===p.type&&(e=he.decodeDate(e)),h&&"date"===h.type&&(i=he.decodeDate(i)),s=e,l=i,o=t.path,c=t.xsizemode,u=t.ysizemode,d=t.xanchor,f=t.yanchor,o.replace(pe.segmentRE,function(e){var t=0,n=e.charAt(0),r=pe.paramIsX[n],a=pe.paramIsY[n],i=pe.numParams[n],o=e.substr(1).replace(pe.paramRE,function(e){return r[t]?e="pixel"===c?s(d)+Number(e):s(e):a[t]&&(e="pixel"===u?l(f)-Number(e):l(e)),e=i<++t?"X":e});return i<t&&(o=o.replace(/[\s,]*X.*/,""),ae.log("Ignoring extra params in segment "+e)),n+o});if(g="pixel"===t.xsizemode?(y=(g=e(t.xanchor))+t.x0,g+t.x1):(y=e(t.x0),e(t.x1)),t="pixel"===t.ysizemode?(v=(e=i(t.yanchor))-t.y0,e-t.y1):(v=i(t.y0),i(t.y1)),"line"===a)return"M"+y+","+v+"L"+g+","+t;if("rect"===a)return"M"+y+","+v+"H"+g+"V"+t+"H"+y+"Z";var a=(y+g)/2,g=(v+t)/2,t=Math.abs(a-y),y=Math.abs(g-v),v="A"+t+","+y,t=a+t+","+g;return"M"+t+v+" 0 1,1 "+(a+","+(g-y))+v+" 0 0,1 "+t+"Z"}function be(e,o,s){return e.replace(pe.segmentRE,function(e){var t=0,n=e.charAt(0),r=pe.paramIsX[n],a=pe.paramIsY[n],i=pe.numParams[n];return n+e.substr(1).replace(pe.paramRE,function(e){return i<=t||(r[t]?e=o(e):a[t]&&(e=s(e)),t++),e})})}function _e(e){ye(e)&&0<=e._fullLayout._activeShapeIndex&&(i(e),delete e._fullLayout._activeShapeIndex,me(e))}t.exports={draw:me,drawOne:o,eraseActiveShape:function(e){if(ye(e)){i(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var r=[],a=0;a<n.length;a++)a!==t&&r.push(n[a]);delete e._fullLayout._activeShapeIndex,re.call("_guiRelayout",e,{shapes:r})}}}}},{"../../lib":230,"../../lib/setcursor":250,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/cartesian/handle_outline":287,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":182,"./draw_newshape/display_outlines":188,"./draw_newshape/helpers":189,"./helpers":191}],185:[function(e,t,n){"use strict";var r=e("../../drawing/attributes").dash,e=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:e({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":224,"../../drawing/attributes":121}],186:[function(e,t,n){"use strict";t.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],187:[function(e,t,n){"use strict";var r=e("../../color");t.exports=function(e,t,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(e=(e||{}).plot_bgcolor||"#FFF",n("newshape.line.color",r.contrast(e)),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":100}],188:[function(e,t,n){"use strict";var T=e("../../dragelement"),M=e("../../dragelement/helpers").drawMode,k=e("../../../registry"),r=e("./constants"),A=r.i000,S=r.i090,E=r.i180,L=r.i270,C=e("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=e("./helpers"),D=r.pointsShapeRectangle,O=r.pointsShapeEllipse,P=r.writePaths,I=e("./newshapes");t.exports=function e(u,n,r,t){t=t||0;var s=r.gd;function d(){e(u,n,r,t++),O(u[0])&&a({redrawing:!0})}function a(e){r.isActiveShape=!1;var t=I(n,r);Object.keys(t).length&&k.call((e||{}).redrawing?"relayout":"_guiRelayout",s,t)}var l,i,f,p,h,o=r.isActiveShape,c=s._fullLayout._zoomlayer,m=r.dragmode;function g(e){f=+e.srcElement.getAttribute("data-i"),p=+e.srcElement.getAttribute("data-j"),l[f][p].moveFn=y}function y(e,t){if(u.length){var n=h[f][p][1],r=h[f][p][2],a=u[f],i=a.length;if(D(a)){for(var o,s=0;s<i;s++)s!==p&&((o=a[s])[1]===a[p][1]&&(o[1]=n+e),o[2]===a[p][2]&&(o[2]=r+t));if(a[p][1]=n+e,a[p][2]=r+t,!D(a))for(var l=0;l<i;l++)for(var c=0;c<a[l].length;c++)a[l][c]=h[f][l][c]}else a[p][1]=n+e,a[p][2]=r+t;d()}}function v(){a()}function x(e,t){2===e&&(f=+t.srcElement.getAttribute("data-i"),p=+t.srcElement.getAttribute("data-j"),t=u[f],D(t)||O(t)||function(){if(u.length&&u[f]&&u[f].length){for(var e=[],t=0;t<u[f].length;t++)t!==p&&e.push(u[f][t]);1<e.length&&(2!==e.length||"Z"!==e[1][0])&&(0===p&&(e[0][0]="M"),u[f]=e,d(),a())}}())}function b(e,t){!function(e,t){if(u.length)for(var n=0;n<u.length;n++)for(var r=0;r<u[n].length;r++)for(var a=0;a+2<u[n][r].length;a+=2)u[n][r][a+1]=h[n][r][a+1]+e,u[n][r][a+2]=h[n][r][a+2]+t}(e,t),d()}function _(e){f=+e.srcElement.getAttribute("data-i"),i[f=f||0].moveFn=b}function w(){a()}M(m)?s._fullLayout._drawing=!0:0<=s._fullLayout._activeShapeIndex&&C(s),n.attr("d",P(u)),o&&!t&&(h=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var a=0;a<r.length;a++){e[n][a]=[];for(var i=0;i<r[a].length;i++)e[n][a][i]=r[a][i]}}return e}([],u),function(e){l=[];for(var t=0;t<u.length;t++){var n=u[t],r=!D(n)&&O(n);l[t]=[];for(var a,i,o=0;o<n.length;o++)"Z"!==n[o][0]&&(r&&o!==A&&o!==S&&o!==E&&o!==L||(a=n[o][1],i=n[o][2],i=e.append("circle").classed("cursor-grab",!0).attr("data-i",t).attr("data-j",o).attr("cx",a).attr("cy",i).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1}),l[t][o]={element:i.node(),gd:s,prepFn:g,doneFn:v,clickFn:x},T.init(l[t][o])))}}(c.append("g").attr("class","outline-controllers")),i=[],u.length&&(i[0]={element:n[0][0],gd:s,prepFn:_,doneFn:w},T.init(i[0])))}},{"../../../plots/cartesian/handle_outline":287,"../../../registry":313,"../../dragelement":119,"../../dragelement/helpers":118,"./constants":186,"./helpers":189,"./newshapes":190}],189:[function(e,t,u){"use strict";var I=e("parse-svg-path"),n=e("./constants"),R=n.CIRCLE_SIDES,d=n.SQRT2,e=e("../../../plots/cartesian/helpers"),N=e.p2r,z=e.r2p,f=[0,3,4,5,6,1,2],p=[0,3,4,1,2];function i(e,t){return Math.abs(e-t)<=1e-6}function o(e,t){var n=t[1]-e[1],e=t[2]-e[2];return Math.sqrt(n*n+e*e)}u.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var a=e[r].length,i=0;i<a;i++){var o=e[r][i][0];if("Z"===o)n+="Z";else for(var s=e[r][i].length,l=0;l<s;l++){var c=l;"Q"===o||"S"===o?c=p[l]:"C"===o&&(c=f[l]),n+=e[r][i][c],0<l&&l<s-1&&(n+=",")}}return n},u.readPaths=function(e,t,n,r){function a(){i=u,o=d}var i,o,s=I(e),l=[],c=-1,u=0,d=0;a();for(var f=0;f<s.length;f++){var p,h,m,g,y=[],v=s[f][0],x=v;switch(v){case"M":l[++c]=[],u=+s[f][1],d=+s[f][2],y.push([x,u,d]),a();break;case"Q":case"S":p=+s[f][1],m=+s[f][2],u=+s[f][3],d=+s[f][4],y.push([x,u,d,p,m]);break;case"C":p=+s[f][1],m=+s[f][2],h=+s[f][3],g=+s[f][4],u=+s[f][5],d=+s[f][6],y.push([x,u,d,p,m,h,g]);break;case"T":case"L":u=+s[f][1],d=+s[f][2],y.push([x,u,d]);break;case"H":u=+s[f][1],y.push([x="L",u,d]);break;case"V":d=+s[f][1],y.push([x="L",u,d]);break;case"A":var x="L",b=+s[f][1],_=+s[f][2];+s[f][4]||(b=-b,_=-_);for(var w=u-b,T=d,M=1;M<=R/2;M++){var k=2*Math.PI*M/R;y.push([x,w+b*Math.cos(k),T+_*Math.sin(k)])}break;case"Z":u===i&&d===o||(u=i,d=o,y.push([x,u,d]))}for(var A=(n||{}).domain,S=t._fullLayout._size,E=n&&"pixel"===n.xsizemode,L=n&&"pixel"===n.ysizemode,C=!1===r,D=0;D<y.length;D++){for(M=0;M+2<7;M+=2){var O=y[D][M+1],P=y[D][M+2];void 0!==O&&void 0!==P&&(u=O,d=P,n&&(n.xaxis&&n.xaxis.p2r?(C&&(O-=n.xaxis._offset),O=E?z(n.xaxis,n.xanchor)+O:N(n.xaxis,O)):(C&&(O-=S.l),A?O=A.x[0]+O/S.w:O/=S.w),P=n.yaxis&&n.yaxis.p2r?(C&&(P-=n.yaxis._offset),L?z(n.yaxis,n.yanchor)-P:N(n.yaxis,P)):(C&&(P-=S.t),A?A.y[1]-P/S.h:1-P/S.h)),y[D][M+1]=O,y[D][M+2]=P)}l[c].push(y[D].slice())}}return l},u.pointsShapeRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!i(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!i(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!i(e[0][1],e[1][1])&&!i(e[0][1],e[3][1]))&&!!(o(e[0],e[1])*o(e[0],e[3]))},u.pointsShapeEllipse=function(e){if((t=e.length)!==R+1)return!1;for(var t=R,n=0;n<t;n++){var r=(2*t-n)%t,a=(t/2+r)%t;if(!i(o(e[n],e[(t/2+n)%t]),o(e[r],e[a])))return!1}return!0},u.handleEllipse=function(e,t,n){if(!e)return[t,n];for(var n=u.ellipseOver({x0:t[0],y0:t[1],x1:n[0],y1:n[1]}),r=(n.x1+n.x0)/2,a=(n.y1+n.y0)/2,i=(n.x1-n.x0)/2,o=(n.y1-n.y0)/2,i=i||(o/=d),o=o||(i/=d),s=[],l=0;l<R;l++){var c=2*l*Math.PI/R;s.push([r+i*Math.cos(c),a+o*Math.sin(c)])}return s},u.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,a=e.y1,i=r-t,e=a-n,r=((t-=i)+r)/2,a=((n-=e)+a)/2;return{x0:r-(i*=d),y0:a-(e*=d),x1:r+i,y1:a+e}}},{"../../../plots/cartesian/helpers":288,"./constants":186,"parse-svg-path":54}],190:[function(e,t,n){"use strict";var r=e("../../dragelement/helpers"),C=r.drawMode,D=r.openMode,r=e("./constants"),O=r.i000,P=r.i090,I=r.i180,R=r.i270,N=r.cos45,z=r.sin45,r=e("../../../plots/cartesian/helpers"),F=r.p2r,j=r.r2p,H=e("../../../plots/cartesian/handle_outline").clearSelect,e=e("./helpers"),B=e.readPaths,q=e.writePaths,U=e.ellipseOver;t.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var r=n.getAttribute("d"),a=t.gd,i=a._fullLayout.newshape,o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=!!o.domain||!o.xaxis,u=!!o.domain||!o.yaxis,d=t.isActiveShape,f=t.dragmode,p=(a.layout||{}).shapes||[];if(!C(f)&&void 0!==d){var h=a._fullLayout._activeShapeIndex;if(h<p.length)switch(a._fullLayout.shapes[h].type){case"rect":f="drawrect";break;case"circle":f="drawcircle";break;case"line":f="drawline";break;case"path":var m=p[h].path||"",f="Z"===m[m.length-1]?"drawclosedpath":"drawopenpath"}}var g,y,v,x,b,_,w=D(f),T=B(r,a,o,d),M={editable:!0,xref:c?"paper":s._id,yref:u?"paper":l._id,layer:i.layer,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};w||(M.fillcolor=i.fillcolor,M.fillrule=i.fillrule),(g=1===T.length?T[0]:g)&&"drawrect"===f?(M.type="rect",M.x0=g[0][1],M.y0=g[0][2],M.x1=g[2][1],M.y1=g[2][2]):g&&"drawline"===f?(M.type="line",M.x0=g[0][1],M.y0=g[0][2],M.x1=g[1][1],M.y1=g[1][2]):g&&"drawcircle"===f?(M.type="circle",y=g[O][1],v=g[P][1],x=g[I][1],b=g[R][1],_=g[O][2],e=g[P][2],n=g[I][2],r=g[R][2],c=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),u=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type),c&&(y=j(o.xaxis,y),v=j(o.xaxis,v),x=j(o.xaxis,x),b=j(o.xaxis,b)),u&&(_=j(o.yaxis,_),e=j(o.yaxis,e),n=j(o.yaxis,n),r=j(o.yaxis,r)),_=U({x0:w=(v+b)/2,y0:i=(_+n)/2,x1:w+(b-v+x-y)/2*N,y1:i+(r-e+n-_)/2*z}),c&&(_.x0=F(o.xaxis,_.x0),_.x1=F(o.xaxis,_.x1)),u&&(_.y0=F(o.yaxis,_.y0),_.y1=F(o.yaxis,_.y1)),M.x0=_.x0,M.y0=_.y0,M.x1=_.x1,M.y1=_.y1):(M.type="path",s&&l&&function(e,t,n){var r="date"===t.type,a="date"===n.type;if(!r&&!a)return;for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++)for(var s=0;s+2<e[i][o].length;s+=2)r&&(e[i][o][s+1]=e[i][o][s+1].replace(" ","_")),a&&(e[i][o][s+2]=e[i][o][s+2].replace(" ","_"))}(T,s,l),M.path=q(T),g=null),H(a);for(var t=t.editHelpers,k=(t||{}).modifyItem,A=[],S=0;S<p.length;S++){var E=a._fullLayout.shapes[S];if(A[S]=E._input,void 0!==d&&S===a._fullLayout._activeShapeIndex){var L=M;switch(E.type){case"line":case"rect":case"circle":k("x0",L.x0),k("x1",L.x1),k("y0",L.y0),k("y1",L.y1);break;case"path":k("path",L.path)}}}return void 0===d?(A.push(M),A):t?t.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":287,"../../../plots/cartesian/helpers":288,"../../dragelement/helpers":118,"./constants":186,"./helpers":189}],191:[function(e,t,s){"use strict";var a=e("./constants"),i=e("../../lib");s.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},s.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},s.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},s.extractPathCoords=function(e,n){var r=[];return e.match(a.segmentRE).forEach(function(e){var t=n[e.charAt(0)].drawn;void 0!==t&&(!(e=e.substr(1).match(a.paramRE))||e.length<t||r.push(i.cleanNumber(e[t])))}),r},s.getDataToPixel=function(e,t,n,r){var a,i,o=e._fullLayout._size;return t?"domain"===r?i=function(e){return t._length*(n?1-e:e)+t._offset}:(a=s.shapePositionToRange(t),i=function(e){return t._offset+t.r2p(a(e,!0))},"date"===t.type&&(i=s.decodeDate(i))):i=n?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e},i},s.getPixelToData=function(e,t,n,r){var a,i=e._fullLayout._size;return t?"domain"===r?function(e){e=(e-t._offset)/t._length;return n?1-e:e}:(a=s.rangeToShapePosition(t),function(e){return a(t.p2r(e-t._offset))}):n?function(e){return 1-(e-i.t)/i.h}:function(e){return(e-i.l)/i.w}},s.roundPositionForSharpStrokeRendering=function(e,t){t=1===Math.round(t%2),e=Math.round(e);return t?e+.5:e},s.makeOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},t=e._fullLayout._plots[n.xref+n.yref];return!!t?t._hadPlotinfo=!0:(t={},n.xref&&"paper"!==n.xref&&(t.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(t.yaxis=e._fullLayout[n.yref+"axis"])),t.xsizemode=n.xsizemode,t.ysizemode=n.ysizemode,t.xanchor=n.xanchor,t.yanchor=n.yanchor,{options:n,plotinfo:t}}},{"../../lib":230,"./constants":182}],192:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":289,"./attributes":180,"./calc_autorange":181,"./defaults":183,"./draw":184,"./draw_newshape/defaults":187}],193:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../../plots/pad_attributes"),i=e("../../lib/extend").extendDeepAll,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,c=e("./constants"),e=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/animation_attributes":270,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"./constants":194}],194:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],195:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../plots/array_container_defaults"),u=e("./attributes"),r=e("./constants").name,a=u.steps;function i(n,r,e){function t(e,t){return l.coerce(n,r,u,e,t)}for(var a,i=c(n,r,{name:"steps",handleItemDefaults:d}),o=0,s=0;s<i.length;s++)i[s].visible&&o++;(o<2?r.visible=!1:t("visible"))&&(r._stepCount=o,a=r._visibleSteps=l.filterVisible(i),(i[t("active")]||{}).visible||(r.active=a[0]._index),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("len"),t("lenmode"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("currentvalue.visible")&&(t("currentvalue.xanchor"),t("currentvalue.prefix"),t("currentvalue.suffix"),t("currentvalue.offset"),l.coerceFont(t,"currentvalue.font",r.font)),t("transition.duration"),t("transition.easing"),t("bgcolor"),t("activebgcolor"),t("bordercolor"),t("borderwidth"),t("ticklen"),t("tickwidth"),t("tickcolor"),t("minorticklen"))}function d(n,r){function e(e,t){return l.coerce(n,r,a,e,t)}var t="skip"===n.method||Array.isArray(n.args)?e("visible"):r.visible=!1;t&&(e("method"),e("args"),t=e("label","step-"+r._index),e("value",t),e("execute"))}t.exports=function(e,t){c(e,t,{name:r,handleItemDefaults:i})}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":193,"./constants":194}],196:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("../../plots/plots"),l=e("../color"),d=e("../drawing"),f=e("../../lib"),s=f.strTranslate,p=e("../../lib/svg_text_utils"),h=e("../../plot_api/plot_template").arrayEditor,m=e("./constants"),e=e("../../constants/alignment"),g=e.LINE_SPACING,y=e.FROM_TL,v=e.FROM_BR;function x(e){return m.autoMarginIdRoot+e._index}function o(e){return e._index}function b(e,t,n){if(t.currentvalue.visible){var r,a,i=t._dims;switch(t.currentvalue.xanchor){case"right":r=i.inputAreaLength-m.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":r=.5*i.inputAreaLength,a="middle";break;default:r=m.currentValueInset,a="left"}var o=f.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":a,"data-notex":1})}),s=t.currentvalue.prefix||"";"string"==typeof n?s+=n:(e=t.steps[t.active].label,s+=e=(n=t._gd._fullLayout._meta)?f.templateString(e,n):e),t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(d.font,t.currentvalue.font).text(s).call(p.convertToTspans,t._gd);s=p.lineCount(o),t=(i.currentValueMaxLines+1-s)*t.currentvalue.font.size*g;return p.positionText(o,r,t),o}}function _(t,n,r){f.ensureSingle(t,"rect",m.gripRectClass,function(e){e.call(i,n,t,r).style("pointer-events","all")}).attr({width:m.gripWidth,height:m.gripHeight,rx:m.gripRadius,ry:m.gripRadius}).call(l.stroke,r.bordercolor).call(l.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function w(e,t,n){var r=f.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})}),e=t.step.label,t=n._gd._fullLayout._meta;return t&&(e=f.templateString(e,t)),r.call(d.font,n.font).text(e).call(p.convertToTspans,n._gd),r}function T(e,n){var e=f.ensureSingle(e,"g",m.labelsClass),r=n._dims,e=e.selectAll("g."+m.labelGroupClass).data(r.labelSteps);e.enter().append("g").classed(m.labelGroupClass,!0),e.exit().remove(),e.each(function(e){var t=c.select(this);t.call(w,e,n),d.setTranslate(t,E(n,e.fraction),m.tickOffset+n.ticklen+n.font.size*g+m.labelOffset+r.currentValueTotalHeight)})}function M(e,t,n,r,a){r=Math.round(r*(n._stepCount-1)),r=n._visibleSteps[r]._index;r!==n.active&&k(e,t,n,r,!0,a)}function k(t,n,e,r,a,i){var o=e.active;e.active=r,h(t.layout,m.name,e).applyUpdate("active",r);r=e.steps[e.active];n.call(S,e,i),n.call(b,e),t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:a,previousActive:o}),r&&r.method&&a&&(n._nextMethod?(n._nextMethod.step=r,n._nextMethod.doCallback=a,n._nextMethod.doTransition=i):(n._nextMethod={step:r,doCallback:a,doTransition:i},n._nextMethodRaf=window.requestAnimationFrame(function(){var e=n._nextMethod.step;e.method&&(e.execute&&u.executeAPICommand(t,e.method,e.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function i(e,r,a){var i=a.node(),o=c.select(r);function s(){return a.data()[0]}e.on("mousedown",function(){var e=s();r.emit("plotly_sliderstart",{slider:e});var t=a.select("."+m.gripRectClass);c.event.stopPropagation(),c.event.preventDefault(),t.call(l.fill,e.activebgcolor);var n=L(e,c.mouse(i)[0]);M(r,a,e,n,!0),e._dragging=!0,o.on("mousemove",function(){var e=s(),t=L(e,c.mouse(i)[0]);M(r,a,e,t,!1)}),o.on("mouseup",function(){var e=s();e._dragging=!1,t.call(l.fill,e.bgcolor),o.on("mouseup",null),o.on("mousemove",null),r.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function A(e,a){var e=e.selectAll("rect."+m.tickRectClass).data(a._visibleSteps),i=a._dims;e.enter().append("rect").classed(m.tickRectClass,!0),e.exit().remove(),e.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"}),e.each(function(e,t){var n=t%i.labelStride==0,r=c.select(this);r.attr({height:n?a.ticklen:a.minorticklen}).call(l.fill,a.tickcolor),d.setTranslate(r,E(a,t/(a._stepCount-1))-.5*a.tickwidth,(n?m.tickOffset:m.minorTickOffset)+i.currentValueTotalHeight)})}function S(e,t,n){for(var r=e.select("rect."+m.gripRectClass),a=0,i=0;i<t._stepCount;i++)if(t._visibleSteps[i]._index===t.active){a=i;break}var o=E(t,a/(t._stepCount-1));t._invokingCommand||(e=r,(e=n&&0<t.transition.duration?r.transition().duration(t.transition.duration).ease(t.transition.easing):e).attr("transform",s(o-.5*m.gripWidth,t._dims.currentValueTotalHeight)))}function E(e,t){e=e._dims;return e.inputAreaStart+m.stepInset+(e.inputAreaLength-2*m.stepInset)*Math.min(1,Math.max(0,t))}function L(e,t){e=e._dims;return Math.min(1,Math.max(0,(t-m.stepInset-e.inputAreaStart)/(e.inputAreaLength-2*m.stepInset-2*e.inputAreaStart)))}function C(t,n,r){var e=r._dims,a=f.ensureSingle(t,"rect",m.railTouchRectClass,function(e){e.call(i,n,t,r).style("pointer-events","all")});a.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,m.tickOffset+r.ticklen+e.labelHeight)}).call(l.fill,r.bgcolor).attr("opacity",0),d.setTranslate(a,0,e.currentValueTotalHeight)}function D(e,t){var n=t._dims,r=n.inputAreaLength-2*m.railInset,e=f.ensureSingle(e,"rect",m.railRectClass);e.attr({width:r,height:m.railWidth,rx:m.railRadius,ry:m.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),d.setTranslate(e,m.railInset,.5*(n.inputAreaWidth-m.railWidth)+n.currentValueTotalHeight)}t.exports=function(r){var e=r._fullLayout,t=function(e,t){for(var n=e[m.name],r=[],a=0;a<n.length;a++){var i=n[a];i.visible&&(i._gd=t,r.push(i))}return r}(e,r),e=e._infolayer.selectAll("g."+m.containerClassName).data(0<t.length?[0]:[]);function n(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),u.autoMargin(r,x(e))}if(e.enter().append("g").classed(m.containerClassName,!0).style("cursor","ew-resize"),e.exit().each(function(){c.select(this).selectAll("g."+m.groupClassName).each(n)}).remove(),0!==t.length){e=e.selectAll("g."+m.groupClassName).data(t,o);e.enter().append("g").classed(m.groupClassName,!0),e.exit().each(n).remove();for(var a=0;a<t.length;a++){var i=t[a];!function(e,n){var t=d.tester.selectAll("g."+m.labelGroupClass).data(n._visibleSteps);t.enter().append("g").classed(m.labelGroupClass,!0);var r=0,a=0;t.each(function(e){e=w(c.select(this),{step:e},n).node();e&&(e=d.bBox(e),a=Math.max(a,e.height),r=Math.max(r,e.width))}),t.remove();var i=n._dims={};i.inputAreaWidth=Math.max(m.railWidth,m.gripHeight);var o=e._fullLayout._size;i.lx=o.l+o.w*n.x,i.ly=o.t+o.h*(1-n.y),"fraction"===n.lenmode?i.outerLength=Math.round(o.w*n.len):i.outerLength=n.len;i.inputAreaStart=0,i.inputAreaLength=Math.round(i.outerLength-n.pad.l-n.pad.r);var s=(i.inputAreaLength-2*m.stepInset)/(n._stepCount-1),o=r+m.labelPadding;{var l;i.labelStride=Math.max(1,Math.ceil(o/s)),i.labelHeight=a,i.currentValueMaxWidth=0,i.currentValueHeight=0,i.currentValueTotalHeight=0,i.currentValueMaxLines=1,n.currentvalue.visible&&(l=d.tester.append("g"),t.each(function(e){var t=b(l,n,e.label),e=t.node()&&d.bBox(t.node())||{width:0,height:0},t=p.lineCount(t);i.currentValueMaxWidth=Math.max(i.currentValueMaxWidth,Math.ceil(e.width)),i.currentValueHeight=Math.max(i.currentValueHeight,Math.ceil(e.height)),i.currentValueMaxLines=Math.max(i.currentValueMaxLines,t)}),i.currentValueTotalHeight=i.currentValueHeight+n.currentvalue.offset,l.remove())}i.height=i.currentValueTotalHeight+m.tickOffset+n.ticklen+m.labelOffset+i.labelHeight+n.pad.t+n.pad.b;s="left";f.isRightAnchor(n)&&(i.lx-=i.outerLength,s="right");f.isCenterAnchor(n)&&(i.lx-=i.outerLength/2,s="center");t="top";f.isBottomAnchor(n)&&(i.ly-=i.height,t="bottom");f.isMiddleAnchor(n)&&(i.ly-=i.height/2,t="middle");i.outerLength=Math.ceil(i.outerLength),i.height=Math.ceil(i.height),i.lx=Math.round(i.lx),i.ly=Math.round(i.ly);t={y:n.y,b:i.height*v[t],t:i.height*y[t]};"fraction"===n.lenmode?(t.l=0,t.xl=n.x-n.len*y[s],t.r=0,t.xr=n.x+n.len*v[s]):(t.x=n.x,t.l=i.outerLength*y[s],t.r=i.outerLength*v[s]);u.autoMargin(e,x(n),t)}(r,i)}e.each(function(e){var n=c.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(e),u.manageCommandObserver(r,e,e._visibleSteps,function(e){var t=n.data()[0];t.active!==e.index&&(t._dragging||k(r,n,t,e.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(b,n).call(D,n).call(T,n).call(A,n).call(C,e,n).call(_,e,n);e=n._dims;d.setTranslate(t,e.lx+n.pad.l,e.ly+n.pad.t),t.call(S,n,!1),t.call(b,n)}(r,c.select(this),e)})}}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":194,"@plotly/d3":11}],197:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":193,"./constants":194,"./defaults":195,"./draw":196}],198:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),M=e("../../plots/plots"),k=e("../../registry"),A=e("../../lib"),S=A.strTranslate,E=e("../drawing"),L=e("../color"),C=e("../../lib/svg_text_utils"),D=e("../../constants/interactions"),O=e("../../constants/alignment").OPPOSITE_SIDE,P=/ [XY][0-9]* /;t.exports={draw:function(n,e,t){var r=t.propContainer,a=t.propName,i=t.placeholder,o=t.traceIndex,c=t.avoid||{},s=t.attributes,l=t.transform,u=t.containerGroup,d=n._fullLayout,f=1,p=!1,h=((r=r.title)&&r.text?r.text:"").trim(),m=(r=r&&r.font?r.font:{}).family,g=r.size,y=r.color;"title.text"===a?v="titleText":-1!==a.indexOf("axis")?v="axisTitleText":a.indexOf(!0)&&(v="colorbarTitleText");var v=n._context.edits[v];""===h?f=0:h.replace(P," % ")===i.replace(P," % ")&&(f=.2,p=!0,v||(h="")),t._meta?h=A.templateString(h,t._meta):d._meta&&(h=A.templateString(h,d._meta));t=h||v,r=(u=u||A.ensureSingle(d._infolayer,"g","g-"+e)).selectAll("text").data(t?[0]:[]);return r.enter().append("text"),r.text(h).attr("class",e),r.exit().remove(),t&&(r.call(x),v&&(h?r.on(".opacity",null):(p=!(f=0),r.text(i).on("mouseover.opacity",function(){w.select(this).transition().duration(D.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(D.HIDE_PLACEHOLDER).style("opacity",0)})),r.call(C.makeEditable,{gd:n}).on("edit",function(e){void 0!==o?k.call("_guiRestyle",n,a,e,o):k.call("_guiRelayout",n,a,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(x)}).on("input",function(e){this.text(e||" ").call(C.positionText,s.x,s.y)})),r.classed("js-placeholder",p)),u;function x(e){A.syncOrAsync([b,_],e)}function b(e){var t;return l?(t="",l.rotate&&(t+="rotate("+[l.rotate,s.x,s.y]+")"),l.offset&&(t+=S(0,l.offset))):t=null,e.attr("transform",t),e.style({"font-family":m,"font-size":w.round(g,2)+"px",fill:L.rgb(y),opacity:f*L.opacity(y),"font-weight":M.fontWeight}).attr(s).call(C.convertToTspans,n),M.previousPromises(n)}function _(e){var t,n,r,a,i,o,s,l=w.select(e.node().parentNode);c&&c.selection&&c.side&&h&&(l.attr("transform",null),t=O[c.side],n="left"===c.side||"top"===c.side?-1:1,r=T(c.pad)?c.pad:2,a=E.bBox(l.node()),i={left:0,top:0,right:d.width,bottom:d.height},o=c.maxShift||n*(i[c.side]-a[c.side]),((s=0)<(s=o<0?o:(e=c.offsetLeft||0,i=c.offsetTop||0,a.left-=e,a.right-=e,a.top-=i,a.bottom-=i,c.selection.each(function(){var e=E.bBox(this);A.bBoxIntersect(a,e,r)&&(s=Math.max(s,n*(e[c.side]-a[t])+r))}),Math.min(o,s)))||o<0)&&(o={left:[-s,0],right:[s,0],top:[0,-s],bottom:[0,s]}[c.side],l.attr("transform",S(o[0],o[1]))))}}}},{"../../constants/alignment":205,"../../constants/interactions":209,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],199:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),i=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l=e("../../plot_api/plot_template").templatedArray,e=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:e,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"../color/attributes":99}],200:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],201:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("../../plots/array_container_defaults"),o=e("./attributes"),r=e("./constants").name,s=o.buttons;function l(n,r,e){function t(e,t){return a.coerce(n,r,o,e,t)}t("visible",0<i(n,r,{name:"buttons",handleItemDefaults:c}).length)&&(t("active"),t("direction"),t("type"),t("showactive"),t("x"),t("y"),a.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),a.coerceFont(t,"font",e.font),t("bgcolor",e.paper_bgcolor),t("bordercolor"),t("borderwidth"))}function c(n,r){function e(e,t){return a.coerce(n,r,s,e,t)}e("visible","skip"===n.method||Array.isArray(n.args))&&(e("method"),e("args"),e("args2"),e("label"),e("execute"))}t.exports=function(e,t){i(e,t,{name:r,handleItemDefaults:l})}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":199,"./constants":200}],202:[function(e,t,n){"use strict";var d=e("@plotly/d3"),f=e("../../plots/plots"),i=e("../color"),u=e("../drawing"),p=e("../../lib"),h=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,m=e("../../constants/alignment").LINE_SPACING,g=e("./constants"),y=e("./scrollbox");function v(e){return e._index}function x(e,t){return+e.attr(g.menuIndexAttrName)===t._index}function b(e,t,n,r,a,i,o,s){t.active=o,l(e.layout,g.name,t).applyUpdate("active",o),"buttons"===t.type?w(e,r,null,null,t):"dropdown"===t.type&&(a.attr(g.menuIndexAttrName,"-1"),_(e,r,a,i,t),s||w(e,r,a,i,t))}function _(e,t,n,r,a){var i=p.ensureSingle(t,"g",g.headerClassName,function(e){e.style("pointer-events","all")}),o=a._dims,s=a.active,l=a.buttons[s]||g.blankHeaderOpts,c={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},s={width:o.headerWidth,height:o.headerHeight};i.call(T,a,l,e).call(E,a,c,s),p.ensureSingle(t,"text",g.headerArrowClassName,function(e){e.attr("text-anchor","end").call(u.font,a.font).text(g.arrowSymbol[a.direction])}).attr({x:o.headerWidth-g.arrowOffsetX+a.pad.l,y:o.headerHeight/2+g.textOffsetY+a.pad.t}),i.on("click",function(){n.call(L,String(x(n,a)?-1:a._index)),w(e,t,n,r,a)}),i.on("mouseover",function(){i.call(k)}),i.on("mouseout",function(){i.call(A,a)}),u.setTranslate(t,o.lx,o.ly)}function w(r,a,i,o,s){i||(i=a).attr("pointer-events","all");var e=-1!=+i.attr(g.menuIndexAttrName)||"buttons"===s.type?s.buttons:[],t="dropdown"===s.type?g.dropdownButtonClassName:g.buttonClassName,l=i.selectAll("g."+t).data(p.filterVisible(e)),n=l.enter().append("g").classed(t,!0),c=l.exit();"dropdown"===s.type?(n.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();e=0,t=0,n=s._dims,c=-1!==["up","down"].indexOf(s.direction);"dropdown"===s.type&&(c?t=n.headerHeight+g.gapButtonHeader:e=n.headerWidth+g.gapButtonHeader),"dropdown"===s.type&&"up"===s.direction&&(t=-g.gapButtonHeader+g.gapButton-n.openHeight),"dropdown"===s.type&&"left"===s.direction&&(e=-g.gapButtonHeader+g.gapButton-n.openWidth);var u={x:n.lx+e+s.pad.l,y:n.ly+t+s.pad.t,yPad:g.gapButton,xPad:g.gapButton,index:0},t={l:u.x+s.borderwidth,t:u.y+s.borderwidth};l.each(function(e,t){var n=d.select(this);n.call(T,s,e,r).call(E,s,u),n.on("click",function(){d.event.defaultPrevented||(e.execute&&(e.args2&&s.active===t?(b(r,s,0,a,i,o,-1),f.executeAPICommand(r,e.method,e.args2)):(b(r,s,0,a,i,o,t),f.executeAPICommand(r,e.method,e.args))),r.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active}))}),n.on("mouseover",function(){n.call(k)}),n.on("mouseout",function(){n.call(A,s),l.call(M,s)})}),l.call(M,s),c?(t.w=Math.max(n.openWidth,n.headerWidth),t.h=u.y-t.t):(t.w=u.x-t.l,t.h=Math.max(n.openHeight,n.headerHeight)),t.direction=s.direction,o&&(l.size()?function(e,t,n){var r,a,i,o=t.direction,o="up"===o||"down"===o,s=t._dims,l=t.active;if(o)for(i=a=0;i<l;i++)a+=s.heights[i]+g.gapButton;else for(i=r=0;i<l;i++)r+=s.widths[i]+g.gapButton;e.enable(n,r,a),e.hbar&&e.hbar.attr("opacity","0").transition().attr("opacity","1");e.vbar&&e.vbar.attr("opacity","0").transition().attr("opacity","1")}(o,s,t):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()});n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(o))}function T(e,t,n,r){e.call(a,t).call(o,t,n,r)}function a(e,t){p.ensureSingle(e,"rect",g.itemRectClassName,function(e){e.attr({rx:g.rx,ry:g.ry,"shape-rendering":"crispEdges"})}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,n,r){var a=p.ensureSingle(e,"text",g.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})}),e=n.label,n=r._fullLayout._meta;n&&(e=p.templateString(e,n)),a.call(u.font,t.font).text(e).call(h.convertToTspans,r)}function M(e,r){var a=r.active;e.each(function(e,t){var n=d.select(this);t===a&&r.showactive&&n.select("rect."+g.itemRectClassName).call(i.fill,g.activeColor)})}function k(e){e.select("rect."+g.itemRectClassName).call(i.fill,g.hoverColor)}function A(e,t){e.select("rect."+g.itemRectClassName).call(i.fill,t.bgcolor)}function S(e){return g.autoMarginIdRoot+e._index}function E(e,t,n,r){r=r||{};var a=e.select("."+g.itemRectClassName),i=e.select("."+g.itemTextClassName),o=t.borderwidth,s=n.index,l=t._dims;u.setTranslate(e,o+n.x,o+n.y);e=-1!==["up","down"].indexOf(t.direction),o=r.height||(e?l.heights[s]:l.height1);a.attr({x:0,y:0,width:r.width||(e?l.width1:l.widths[s]),height:o});r=t.font.size*m,t=h.lineCount(i);h.positionText(i,g.textOffsetX,o/2-(t-1)*r/2+g.textOffsetY),e?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function L(e,t){e.attr(g.menuIndexAttrName,t||"-1").selectAll("g."+g.dropdownButtonClassName).remove()}t.exports=function(a){var e=a._fullLayout,t=p.filterVisible(e[g.name]);function n(e){f.autoMargin(a,S(e))}var r=e._menulayer.selectAll("g."+g.containerClassName).data(0<t.length?[0]:[]);if(r.enter().append("g").classed(g.containerClassName,!0).style("cursor","pointer"),r.exit().each(function(){d.select(this).selectAll("g."+g.headerGroupClassName).each(n)}).remove(),0!==t.length){var i=r.selectAll("g."+g.headerGroupClassName).data(t,v);i.enter().append("g").classed(g.headerGroupClassName,!0);for(var o=p.ensureSingle(r,"g",g.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),s=0;s<t.length;s++){var l=t[s];!function(a,i){var o=i._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},e=u.tester.selectAll("g."+g.dropdownButtonClassName).data(p.filterVisible(i.buttons));e.enter().append("g").classed(g.dropdownButtonClassName,!0);var s=-1!==["up","down"].indexOf(i.direction);e.each(function(e,t){var n=d.select(this);n.call(T,i,e,a);var r=n.select("."+g.itemTextClassName),e=r.node()&&u.bBox(r.node()).width,n=Math.max(e+g.textPadX,g.minWidth),e=i.font.size*m,r=h.lineCount(r),r=Math.max(e*r,g.minHeight)+g.textOffsetY,r=Math.ceil(r),n=Math.ceil(n);o.widths[t]=n,o.heights[t]=r,o.height1=Math.max(o.height1,r),o.width1=Math.max(o.width1,n),s?(o.totalWidth=Math.max(o.totalWidth,n),o.openWidth=o.totalWidth,o.totalHeight+=r+g.gapButton,o.openHeight+=r+g.gapButton):(o.totalWidth+=n+g.gapButton,o.openWidth+=n+g.gapButton,o.totalHeight=Math.max(o.totalHeight,r),o.openHeight=o.totalHeight)}),s?o.totalHeight-=g.gapButton:o.totalWidth-=g.gapButton;o.headerWidth=o.width1+g.arrowPadX,o.headerHeight=o.height1,"dropdown"===i.type&&(s?(o.width1+=g.arrowPadX,o.totalHeight=o.height1):o.totalWidth=o.width1,o.totalWidth+=g.arrowPadX);e.remove();var t=o.totalWidth+i.pad.l+i.pad.r,n=o.totalHeight+i.pad.t+i.pad.b,r=a._fullLayout._size;o.lx=r.l+r.w*i.x,o.ly=r.t+r.h*(1-i.y);e="left";p.isRightAnchor(i)&&(o.lx-=t,e="right");p.isCenterAnchor(i)&&(o.lx-=t/2,e="center");r="top";p.isBottomAnchor(i)&&(o.ly-=n,r="bottom");p.isMiddleAnchor(i)&&(o.ly-=n/2,r="middle");o.totalWidth=Math.ceil(o.totalWidth),o.totalHeight=Math.ceil(o.totalHeight),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),f.autoMargin(a,S(i),{x:i.x,y:i.y,l:t*({right:1,center:.5}[e]||0),r:t*({left:1,center:.5}[e]||0),b:n*({top:1,middle:.5}[r]||0),t:n*({bottom:1,middle:.5}[r]||0)})}(a,l)}var e="updatemenus"+e._uid,c=new y(a,o,e);i.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(L)),i.exit().each(function(e){o.call(L),n(e)}).remove(),i.each(function(t){var n=d.select(this),r="dropdown"===t.type?o:null;f.manageCommandObserver(a,t,t.buttons,function(e){b(a,t,t.buttons[e.index],n,r,c,e.index,!0)}),"dropdown"===t.type?(_(a,n,o,c,t),x(o,t)&&w(a,n,o,c,t)):w(a,n,null,null,t)})}}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":200,"./scrollbox":204,"@plotly/d3":11}],203:[function(e,t,n){arguments[4][197][0].apply(n,arguments)},{"./attributes":199,"./constants":200,"./defaults":201,"./draw":202,dup:197}],204:[function(e,t,n){"use strict";t.exports=T;var b=e("@plotly/d3"),_=e("../color"),w=e("../drawing"),a=e("../../lib");function T(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(e,t,n){var r=this.gd._fullLayout,a=r.width,i=r.height;this.position=e;var o=this.position.l,s=this.position.w,l=this.position.t,c=this.position.h,u=this.position.direction,d="down"===u,f="left"===u,p="up"===u,h=s,m=c;d||f||"right"===u||p||(this.position.direction="down",d=!0),d||p?(y=(g=o)+h,m=d?(v=l,(x=Math.min(v+m,i))-v):(x=l+m)-(v=Math.max(x-m,0))):(x=(v=l)+m,h=f?(y=o+h)-(g=Math.max(y-h,0)):(g=o,(y=Math.min(g+h,a))-g)),this._box={l:g,t:v,w:h,h:m};e=h<s,u=T.barLength+2*T.barPad,p=T.barWidth+2*T.barPad,d=o,f=l+c;i<f+p&&(f=i-p);i=this.container.selectAll("rect.scrollbar-horizontal").data(e?[0]:[]);i.exit().on(".drag",null).remove(),i.enter().append("rect").classed("scrollbar-horizontal",!0).call(_.fill,T.barColor),e?(this.hbar=i.attr({rx:T.barRadius,ry:T.barRadius,x:d,y:f,width:u,height:p}),this._hbarXMin=d+u/2,this._hbarTranslateMax=h-u):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);i=m<c,f=T.barWidth+2*T.barPad,d=T.barLength+2*T.barPad,h=o+s,u=l;a<h+f&&(h=a-f);a=this.container.selectAll("rect.scrollbar-vertical").data(i?[0]:[]);a.exit().on(".drag",null).remove(),a.enter().append("rect").classed("scrollbar-vertical",!0).call(_.fill,T.barColor),i?(this.vbar=a.attr({rx:T.barRadius,ry:T.barRadius,x:h,y:u,width:f,height:d}),this._vbarYMin=u+d/2,this._vbarTranslateMax=m-d):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var d=this.id,g=g-.5,y=i?y+f+.5:y+.5,v=v-.5,x=e?x+p+.5:x+.5,r=r._topdefs.selectAll("#"+d).data(e||i?[0]:[]);r.exit().remove(),r.enter().append("clipPath").attr("id",d).append("rect"),e||i?(this._clipRect=r.select("rect").attr({x:Math.floor(g),y:Math.floor(v),width:Math.ceil(y)-Math.floor(g),height:Math.ceil(x)-Math.floor(v)}),this.container.call(w.setClipUrl,d,this.gd),this.bg.attr({x:o,y:l,width:s,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),(e||i)&&(c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(c),c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault(),b.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),e&&this.hbar.on(".drag",null).call(c),i&&this.vbar.on(".drag",null).call(c)),this.setTranslate(t,n)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=b.event.dx),this.vbar&&(t-=b.event.dy),this.setTranslate(e,t)},T.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=b.event.deltaY),this.vbar&&(t+=b.event.deltaY),this.setTranslate(e,t)},T.prototype._onBarDrag=function(){var e,t,n=this.translateX,r=this.translateY;this.hbar&&(e=(t=n+this._hbarXMin)+this._hbarTranslateMax,n=(a.constrain(b.event.x,t,e)-t)/(e-t)*(this.position.w-this._box.w)),this.vbar&&(t=(e=r+this._vbarYMin)+this._vbarTranslateMax,r=(a.constrain(b.event.y,e,t)-e)/(t-e)*(this.position.h-this._box.h)),this.setTranslate(n,r)},T.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;e=a.constrain(e||0,0,n),t=a.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(w.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(w.setTranslate,e+e/n*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(w.setTranslate,e,t+t/r*this._vbarTranslateMax)}},{"../../lib":230,"../color":100,"../drawing":122,"@plotly/d3":11}],205:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],206:[function(e,t,n){"use strict";t.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},{}],207:[function(e,t,n){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],208:[function(e,t,n){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],209:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],210:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],211:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],212:[function(e,t,n){"use strict";n.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var r=e("./registry"),a=n.register=r.register,i=e("./plot_api"),o=Object.keys(i),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=i[l]),a({moduleType:"apiMethod",name:l,fn:i[l]})}a(e("./traces/scatter")),a([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),a([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(a(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=e("./fonts/ploticon");var c=e("./components/fx"),r=e("./plots/plots");n.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},n.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":91,"./components/annotations3d":96,"./components/colorbar":106,"./components/colorscale":112,"./components/errorbars":128,"./components/fx":140,"./components/grid":144,"./components/images":149,"./components/legend":157,"./components/modebar":163,"./components/rangeselector":171,"./components/rangeslider":178,"./components/shapes":192,"./components/sliders":197,"./components/updatemenus":203,"./fonts/ploticon":213,"./locale-en":256,"./locale-en-us":255,"./plot_api":260,"./plot_api/plot_schema":264,"./plots/plots":311,"./registry":313,"./snapshot":318,"./traces/scatter":365,"./version":386,"native-promise-only":52}],213:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],214:[function(e,t,n){"use strict";n.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},{}],215:[function(e,t,n){"use strict";var e=e("./mod"),a=e.mod,r=e.modHalf,m=Math.PI,g=2*m;function y(e){return Math.abs(e[1]-e[0])>g-1e-14}function i(e,t){return r(t-e,g)}function o(e,t){if(y(t))return!0;var n=t[0]<t[1]?(r=t[0],t[1]):(r=t[1],t[0]),r=a(r,g);(n=a(n,g))<r&&(n+=g);t=a(e,g),e=t+g;return r<=t&&t<=n||r<=e&&e<=n}function s(e,t,n,r,a,i,o){a=a||0,i=i||0;var s,l,c,u=y([n,r]);function d(e,t){return[e*Math.cos(t)+a,i-e*Math.sin(t)]}var f,n=u?(s=0,l=m,g):n<r?(s=n,r):(s=r,n),e=e<t?(c=e,t):(c=t,e),p=Math.abs(n-s)<=m?0:1;function h(e,t,n){return"A"+[e,e]+" "+[0,p,n]+" "+d(e,t)}return u?f=null===c?"M"+d(e,s)+h(e,l,0)+h(e,n,0)+"Z":"M"+d(c,s)+h(c,l,0)+h(c,n,0)+"ZM"+d(e,s)+h(e,l,1)+h(e,n,1)+"Z":null===c?(f="M"+d(e,s)+h(e,n,0),o&&(f+="L0,0Z")):f="M"+d(c,s)+"L"+d(e,s)+h(e,n,0)+"L"+d(c,n)+h(c,s,1)+"Z",f}t.exports={deg2rad:function(e){return e/180*m},rad2deg:function(e){return e/m*180},angleDelta:i,angleDist:function(e,t){return Math.abs(i(e,t))},isFullCircle:y,isAngleInsideSector:o,isPtInsideSector:function(e,t,n,r){if(!o(t,r))return!1;var a,n=n[0]<n[1]?(a=n[0],n[1]):(a=n[1],n[0]);return a<=e&&e<=n},pathArc:function(e,t,n,r,a){return s(null,e,t,n,r,a,0)},pathSector:function(e,t,n,r,a){return s(null,e,t,n,r,a,1)},pathAnnulus:function(e,t,n,r,a,i){return s(e,t,n,r,a,i,1)}}},{"./mod":237}],216:[function(e,t,n){"use strict";var d=Array.isArray,r=ArrayBuffer,a=DataView;function i(e){return r.isView(e)&&!(e instanceof a)}function o(e){return d(e)||i(e)}function s(e,t,n){if(o(e)){if(o(e[0])){for(var r=n,a=0;a<e.length;a++)r=t(r,e[a].length);return r}return e.length}return 0}n.isTypedArray=i,n.isArrayOrTypedArray=o,n.isArray1D=function(e){return!o(e[0])},n.ensureArray=function(e,t){return(e=!d(e)?[]:e).length=t,e},n.concat=function(){for(var e,t,n,r,a,i,o,s=[],l=!0,c=0,u=0;u<arguments.length;u++)(a=(n=arguments[u]).length)&&(t?s.push(n):(t=n,r=a),d(n)?e=!1:(l=!1,c?e!==n.constructor&&(e=!1):e=n.constructor),c+=a);if(!c)return[];if(!s.length)return t;if(l)return t.concat.apply(t,s);if(e){for((i=new e(c)).set(t),u=0;u<s.length;u++)n=s[u],i.set(n,r),r+=n.length;return i}for(i=new Array(c),o=0;o<t.length;o++)i[o]=t[o];for(u=0;u<s.length;u++){for(n=s[u],o=0;o<n.length;o++)i[r+o]=n[o];r+=o}return i},n.maxRowLength=function(e){return s(e,Math.max,0)},n.minRowLength=function(e){return s(e,Math.min,1/0)}},{}],217:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../constants/numerical").BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(i,"")),r(e)?Number(e):a}},{"../constants/numerical":210,"fast-isnumeric":15}],218:[function(e,t,n){"use strict";t.exports=function(e){e=e._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],219:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],220:[function(e,t,y){"use strict";var a=e("fast-isnumeric"),r=e("tinycolor2"),o=e("../plots/attributes"),i=e("../components/colorscale/scales"),s=e("../components/color"),l=e("../constants/interactions").DESELECTDIM,c=e("./nested_property"),u=e("./regex").counter,d=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;function p(e,t){var n=y.valObjectMeta[t.valType];if(t.arrayOk&&f(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},a=r,i={set:function(e){a=e}};return n.coerceFunction(e,i,r,t),a!==r}y.valObjectMeta={data_array:{coerceFunction:function(e,t,n){f(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var a=String(n[r]);if("/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){if(new RegExp(a.substr(1,a.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){"string"!=typeof e?!0!==r.strict&&"number"==typeof e?t.set(String(e)):t.set(n):r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return r(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(i.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):a(e)?t.set(d(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){r=r.regex||u(n);"string"==typeof e&&r.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){t=t.dflt;return e===t||"string"==typeof e&&!!u(t).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var a=e.split("+"),i=0;i<a.length;){var o=a[i];-1===r.flags.indexOf(o)||a.indexOf(o)<i?a.splice(i,1):i++}a.length?t.set(a.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,n,r){function a(e,t,n){var r,a={set:function(e){r=e}};return void 0===n&&(n=t.dflt),y.valObjectMeta[t.valType].coerceFunction(e,a,n,t),r}var i=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var o,s,l,c,u,d,f=r.items,p=[],h=Array.isArray(f),r=h&&i&&Array.isArray(f[0]),m=i&&h&&!r,g=(h&&!m?f:e).length;if(n=Array.isArray(n)?n:[],i)for(o=0;o<g;o++)for(p[o]=[],l=Array.isArray(e[o])?e[o]:[],u=(m?f:h?f[o]:l).length,s=0;s<u;s++)c=m?f[s]:h?f[o][s]:f,void 0!==(d=a(l[s],c,(n[o]||[])[s]))&&(p[o][s]=d);else for(o=0;o<g;o++)void 0!==(d=a(e[o],h?f[o]:f,n[o]))&&(p[o]=d);t.set(p)}else t.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),a=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==n[i].length)return!1;for(var o=0;o<e[i].length;o++)if(!p(e[i][o],r?n[i][o]:n))return!1}else if(!p(e[i],r?n[i]:n))return!1;return!0}}},y.coerce=function(e,t,n,r,a){var i=c(n,r).get(),o=c(e,r),s=c(t,r),n=o.get(),e=t._template;if(void 0===n&&e&&(n=c(e,r).get(),e=0),void 0===a&&(a=i.dflt),i.arrayOk&&f(n))return s.set(n),n;o=y.valObjectMeta[i.valType].coerceFunction;o(n,s,a,i);t=s.get();return e&&t===a&&!p(n,i)&&(o(n=c(e,r).get(),s,a,i),t=s.get()),t},y.coerce2=function(e,t,n,r,a){var i=c(e,r),a=y.coerce(e,t,n,r,a),i=i.get();return null!=i&&a},y.coerceFont=function(e,t,n){var r={};return r.family=e(t+".family",(n=n||{}).family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},y.coercePattern=function(e,t,n,r){var a;e(t+".shape")&&(e(t+".solidity"),e(t+".size"),a="overlay"===e(t+".fillmode"),r||(r=e(t+".bgcolor",a?n:void 0),e(t+".fgcolor",a?s.contrast(r):n)),e(t+".fgopacity",a?.5:1))},y.coerceHoverinfo=function(e,t,n){var r,a=t._module.attributes,i=a.hoverinfo?a:o,a=i.hoverinfo;return 1===n._dataLength&&((r="all"===a.dflt?a.flags.slice():a.dflt.split("+")).splice(r.indexOf("name"),1),r=r.join("+")),y.coerce(e,t,i,"hoverinfo",r)},y.coerceSelectionMarkerOpacity=function(e,t){var n,r,a;!e.marker||void 0!==(n=e.marker.opacity)&&(f(n)||e.selected||e.unselected||(a=l*(r=n)),t("selected.marker.opacity",r),t("unselected.marker.opacity",a))},y.validate=p},{"../components/color":100,"../components/colorscale/scales":115,"../constants/interactions":209,"../plots/attributes":272,"./array":216,"./mod":237,"./nested_property":238,"./regex":246,"fast-isnumeric":15,tinycolor2:65}],221:[function(e,t,f){"use strict";var p,h,n=e("d3-time-format").timeFormat,u=e("fast-isnumeric"),s=e("./loggers"),m=e("./mod").mod,r=e("../constants/numerical"),g=r.BADNUM,y=r.ONEDAY,v=r.ONEHOUR,x=r.ONEMIN,b=r.ONESEC,_=r.EPOCHJD,w=e("../registry"),d=e("d3-time-format").utcFormat,T=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,M=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,k=(new Date).getFullYear()-70;function A(e){return e&&w.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function l(e,t){return String(e+Math.pow(10,t)).substr(1)}f.dateTick0=function(e,t){var n,r=(r=!!t,A(n=e)?(r?w.getComponentMethod("calendars","CANONICAL_SUNDAY"):w.getComponentMethod("calendars","CANONICAL_TICK"))[n]:r?"2000-01-02":"2000-01-01");if(t<2)return r;var r=f.dateTime2ms(r,e);return f.ms2DateTime(r+=y*(t-1),0,e)},f.dfltRange=function(e){return A(e)?w.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},f.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},f.dateTime2ms=function(e,t){if(f.isJSDate(e)){var n=e.getTimezoneOffset()*x,r=(e.getUTCMinutes()-e.getMinutes())*x+(e.getUTCSeconds()-e.getSeconds())*b+(e.getUTCMilliseconds()-e.getMilliseconds());return r&&(n=n-(l=3*x)/2+m(r-n+l/2,l)),e=Number(e)-n,p<=e&&e<=h?e:g}if("string"!=typeof e&&"number"!=typeof e)return g;e=String(e);var a=A(t),i=e.charAt(0);!a||"G"!==i&&"g"!==i||(e=e.substr(1),t="");var o=a&&"chinese"===t.substr(0,7),s=e.match(o?M:T);if(!s)return g;var r=s[1],l=s[3]||"1",n=Number(s[5]||1),i=Number(s[7]||0),e=Number(s[9]||0),s=Number(s[11]||0);if(a){if(2===r.length)return g;r=Number(r);try{var c,u,d=w.getComponentMethod("calendars","getCal")(t);u=o?(c="i"===l.charAt(l.length-1),l=parseInt(l,10),d.newDate(r,d.toMonthIndex(r,l,c),n)):d.newDate(r,Number(l),n)}catch(e){return g}return u?(u.toJD()-_)*y+i*v+e*x+s*b:g}r=2===r.length?(Number(r)+2e3-k)%100+k:Number(r),--l;e=new Date(Date.UTC(2e3,l,n,i,e));return e.setUTCFullYear(r),e.getUTCMonth()!==l||e.getUTCDate()!==n?g:e.getTime()+s*b},p=f.MIN_MS=f.dateTime2ms("-9999"),h=f.MAX_MS=f.dateTime2ms("9999-12-31 23:59:59.9999"),f.isDateTime=function(e,t){return f.dateTime2ms(e,t)!==g};var S=90*y,E=3*v,L=5*x;function C(e,t,n,r,a){if((t||n||r||a)&&(e+=" "+l(t,2)+":"+l(n,2),(r||a)&&(e+=":"+l(r,2),a))){for(var i=4;a%10==0;)--i,a/=10;e+="."+l(a,i)}return e}f.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(p<=e&&e<=h))return g;t=t||0;var r,a,i,o=Math.floor(10*m(e+.05,1)),s=Math.round(e-o/10);if(A(n)){var l=Math.floor(s/y)+_,c=Math.floor(m(e,y));try{r=w.getComponentMethod("calendars","getCal")(n).fromJD(l).formatDate("yyyy-mm-dd")}catch(e){r=d("G%Y-%m-%d")(new Date(s))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;a=t<S?Math.floor(c/v):0,i=t<S?Math.floor(c%v/x):0,l=t<E?Math.floor(c%x/b):0,c=t<L?c%b*10+o:0}else s=new Date(s),r=d("%Y-%m-%d")(s),a=t<S?s.getUTCHours():0,i=t<S?s.getUTCMinutes():0,l=t<E?s.getUTCSeconds():0,c=t<L?10*s.getUTCMilliseconds()+o:0;return C(r,a,i,l,c)},f.ms2DateTimeLocal=function(e){if(!(p+y<=e&&e<=h-y))return g;var t=Math.floor(10*m(e+.05,1)),e=new Date(Math.round(e-t/10));return C(n("%Y-%m-%d")(e),e.getHours(),e.getMinutes(),e.getSeconds(),10*e.getUTCMilliseconds()+t)},f.cleanDate=function(e,t,n){if(e===g)return t;if(f.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(A(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=f.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!f.isDateTime(e,n))return s.error("unrecognized date",e),t;return e};var i=/%\d?f/g,o=/%h/g,c={1:"1",2:"1",3:"2",4:"2"};function D(e,t,n,r){e=e.replace(i,function(e){e=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(e).substr(2).replace(/0+$/,"")||"0"});var a=new Date(Math.floor(t+.05));if(e=e.replace(o,function(){return c[n("%q")(a)]}),A(r))try{e=w.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(a)}var O=[59,59.9,59.99,59.999,59.9999];f.formatDate=function(e,t,n,r,a,i){if(a=A(a)&&a,!t)if("y"===n)t=i.year;else if("m"===n)t=i.month;else{if("d"!==n)return s=n,n=m((o=e)+.05,y),n=l(Math.floor(n/v),2)+":"+l(m(Math.floor(n/x),60),2),"M"!==s&&(u(s)||(s=0),o=(100+Math.min(m(o/b,60),O[s])).toFixed(s).substr(1),n+=":"+(o=0<s?o.replace(/0+$/,"").replace(/[\.]$/,""):o)),n+"\n"+D(i.dayMonthYear,e,r,a);t=i.dayMonth+"\n"+i.year}var o,s;return D(t,e,r,a)};var P=3*y;f.incrementMonth=function(t,e,n){n=A(n)&&n;var r=m(t,y);if(t=Math.round(t-r),n)try{var a=Math.round(t/y)+_,i=w.getComponentMethod("calendars","getCal")(n),o=i.fromJD(a);return e%12?i.add(o,e,"m"):i.add(o,e/12,"y"),(o.toJD()-_)*y+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}t=new Date(t+P);return t.setUTCMonth(t.getUTCMonth()+e)+r-P},f.findExactDates=function(e,t){for(var n,r,a=0,i=0,o=0,s=0,l=A(t)&&w.getComponentMethod("calendars","getCal")(t),c=0;c<e.length;c++)if(r=e[c],u(r)){if(!(r%y))if(l)try{1===(n=l.fromJD(r/y+_)).day()?1===n.month()?a++:i++:o++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?a++:i++:o++}else s++;t=e.length-s;return{exactYears:a/t,exactMonths:(i+=a)/t,exactDays:(o+=i)/t}}},{"../constants/numerical":210,"../registry":313,"./loggers":234,"./mod":237,"d3-time-format":13,"fast-isnumeric":15}],222:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("./loggers"),i=e("./matrix"),o=e("gl-mat4");function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r="plotly.js-style-"+e,e=document.getElementById(r);e||((e=document.createElement("style")).setAttribute("id",r),e.appendChild(document.createTextNode("")),document.head.appendChild(e));e=e.sheet;e.insertRule?e.insertRule(t+"{"+n+"}",0):e.addRule?e.addRule(t,n,0):a.warn("addStyleRule failed")}function c(e){e=window.getComputedStyle(e,null),e=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===e?null:e.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function u(e){for(var t,n=[];(t=e)&&(t instanceof Element||t instanceof HTMLElement);)n.push(e),e=e.parentNode;return n}t.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){return(e=r.select(e)).node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){(e=document.getElementById("plotly.js-style-"+e))&&s(e)},getFullTransformMatrix:function(e){var e=u(e),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(e){e=c(e);e&&(e=i.convertCssMatrix(e),t=o.multiply(t,t,e))}),t},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},{"./loggers":234,"./matrix":236,"@plotly/d3":11,"gl-mat4":31}],223:[function(e,t,n){"use strict";var i=e("events").EventEmitter,e={init:function(n){if(n._ev instanceof i)return n;var r=new i,a=new i;return n._ev=r,n._internalEv=a,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=a.on.bind(a),n._internalOnce=a.once.bind(a),n._removeInternalListener=a.removeListener.bind(a),n._removeAllInternalListeners=a.removeAllListeners.bind(a),n.emit=function(e,t){"undefined"!=typeof jQuery&&jQuery(n).trigger(e,t),r.emit(e,t),a.emit(e,t)},n},triggerHandler:function(e,t,n){var r;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var a=e._ev;if(!a)return r;var i,o=a._events[t];if(!o)return r;function s(e){return e.listener?(a.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(a,[n]))):e.apply(a,[n])}for(o=Array.isArray(o)?o:[o],i=0;i<o.length-1;i++)s(o[i]);return e=s(o[i]),void 0!==r?r:e},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=e},{events:12}],224:[function(e,t,n){"use strict";var f=e("./is_plain_object.js"),p=Array.isArray;function h(e,t,n,r){var a,i,o,s,l,c=e[0],u=e.length;if(2===u&&p(c)&&p(e[1])&&0===c.length){if(function(e,t){for(var n,r=0;r<e.length;r++){if(null!==(n=e[r])&&"object"==typeof n)return!1;void 0!==n&&(t[r]=n)}return!0}(e[1],c))return c;c.splice(0,c.length)}for(var d=1;d<u;d++)for(i in a=e[d])l=c[i],o=a[i],r&&p(o)?c[i]=o:t&&o&&(f(o)||(s=p(o)))?(l=s?(s=!1,l&&p(l)?l:[]):l&&f(l)?l:{},c[i]=h([l,o],t,n,r)):void 0===o&&!n||(c[i]=o);return c}n.extendFlat=function(){return h(arguments,!1,!1,!1)},n.extendDeep=function(){return h(arguments,!0,!1,!1)},n.extendDeepAll=function(){return h(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return h(arguments,!0,!1,!0)}},{"./is_plain_object.js":231}],225:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,a=0;a<e.length;a++){var i=e[a];1!==t[i]&&(t[i]=1,n[r++]=i)}return n}},{}],226:[function(e,t,n){"use strict";function o(e){return!0===e.visible}function s(e){e=e[0].trace;return!0===e.visible&&0!==e._length}t.exports=function(e){for(var t,n=(t=e,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?s:o),r=[],a=0;a<e.length;a++){var i=e[a];n(i)&&r.push(i)}return r}},{}],227:[function(e,t,n){"use strict";var o,s,l,c=e("./mod").mod;function h(e,t,n,r,a,i,o,s){var l=n-e,n=a-e,o=o-a,a=r-t,r=i-t,s=s-i,i=l*s-o*a;if(0==i)return null;o=(n*s-o*r)/i,i=(n*a-l*r)/i;return i<0||1<i||o<0||1<o?null:{x:e+l*o,y:t+a*o}}function m(e,t,n,r,a){var i=r*e+a*t;if(i<0)return r*r+a*a;if(n<i){var o=r-e,i=a-t;return o*o+i*i}e=r*t-a*e;return e*e/n}n.segmentsIntersect=h,n.segmentDistance=function(e,t,n,r,a,i,o,s){if(h(e,t,n,r,a,i,o,s))return 0;var l=n-e,c=r-t,u=o-a,d=s-i,f=l*l+c*c,p=u*u+d*d,i=Math.min(m(l,c,f,a-e,i-t),m(l,c,f,o-e,s-t),m(u,d,p,e-a,t-i),m(u,d,p,n-a,r-i));return Math.sqrt(i)},n.getTextLocation=function(e,t,n,r){if(e===s&&r===l||(o={},s=e,l=r),o[n])return o[n];var a=e.getPointAtLength(c(n-r/2,t)),i=e.getPointAtLength(c(n+r/2,t)),r=Math.atan((i.y-a.y)/(i.x-a.x)),t=e.getPointAtLength(c(n,t)),r={x:(4*t.x+a.x+i.x)/6,y:(4*t.y+a.y+i.y)/6,theta:r};return o[n]=r},n.clearLocationCache=function(){s=null},n.getVisibleSegment=function(n,e,t){var r,a,i=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=n.getTotalLength(),d=u;function f(e){var t=n.getPointAtLength(e);0===e?r=t:e===u&&(a=t);e=t.x<i?i-t.x:t.x>o?t.x-o:0,t=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(e*e+t*t)}for(var p=f(c);p;){if(d<(c+=p+t))return;p=f(c)}for(p=f(d);p;){if((d-=p+t)<c)return;p=f(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-a.x)<.1&&Math.abs(r.y-a.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var a,i,o,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,f=0,p=s;d<c;){if(o=(i=e.getPointAtLength(a=(f+p)/2))[n]-t,Math.abs(o)<l)return i;0<u*o?p=a:f=a,d++}return i}},{"./mod":237}],228:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],229:[function(e,t,n){"use strict";t.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),r=1<n?(n*e+n*t)/n:e+t,n=String(r).length;return 16<n&&(t=String(t).length,String(e).length+t<=n&&(-1===(n=parseFloat(r).toPrecision(12)).indexOf("e+")&&(r=+n))),r}},{}],230:[function(e,t,n){"use strict";var y=e("@plotly/d3"),v=e("d3-time-format").utcFormat,r=e("fast-isnumeric"),a=e("../constants/numerical"),i=a.FP_SAFE,o=-i,s=a.BADNUM,x=t.exports={};x.nestedProperty=e("./nested_property"),x.keyedContainer=e("./keyed_container"),x.relativeAttr=e("./relative_attr"),x.isPlainObject=e("./is_plain_object"),x.toLogRange=e("./to_log_range"),x.relinkPrivateKeys=e("./relink_private");t=e("./array");x.isTypedArray=t.isTypedArray,x.isArrayOrTypedArray=t.isArrayOrTypedArray,x.isArray1D=t.isArray1D,x.ensureArray=t.ensureArray,x.concat=t.concat,x.maxRowLength=t.maxRowLength,x.minRowLength=t.minRowLength;t=e("./mod");x.mod=t.mod,x.modHalf=t.modHalf;t=e("./coerce");x.valObjectMeta=t.valObjectMeta,x.coerce=t.coerce,x.coerce2=t.coerce2,x.coerceFont=t.coerceFont,x.coercePattern=t.coercePattern,x.coerceHoverinfo=t.coerceHoverinfo,x.coerceSelectionMarkerOpacity=t.coerceSelectionMarkerOpacity,x.validate=t.validate;t=e("./dates");x.dateTime2ms=t.dateTime2ms,x.isDateTime=t.isDateTime,x.ms2DateTime=t.ms2DateTime,x.ms2DateTimeLocal=t.ms2DateTimeLocal,x.cleanDate=t.cleanDate,x.isJSDate=t.isJSDate,x.formatDate=t.formatDate,x.incrementMonth=t.incrementMonth,x.dateTick0=t.dateTick0,x.dfltRange=t.dfltRange,x.findExactDates=t.findExactDates,x.MIN_MS=t.MIN_MS,x.MAX_MS=t.MAX_MS;t=e("./search");x.findBin=t.findBin,x.sorterAsc=t.sorterAsc,x.sorterDes=t.sorterDes,x.distinctVals=t.distinctVals,x.roundUp=t.roundUp,x.sort=t.sort,x.findIndexOfMin=t.findIndexOfMin;t=e("./stats");x.aggNums=t.aggNums,x.len=t.len,x.mean=t.mean,x.median=t.median,x.midRange=t.midRange,x.variance=t.variance,x.stdev=t.stdev,x.interp=t.interp;t=e("./matrix");x.init2dArray=t.init2dArray,x.transposeRagged=t.transposeRagged,x.dot=t.dot,x.translationMatrix=t.translationMatrix,x.rotationMatrix=t.rotationMatrix,x.rotationXYMatrix=t.rotationXYMatrix,x.apply3DTransform=t.apply3DTransform,x.apply2DTransform=t.apply2DTransform,x.apply2DTransform2=t.apply2DTransform2,x.convertCssMatrix=t.convertCssMatrix,x.inverseTransformMatrix=t.inverseTransformMatrix;t=e("./angles");x.deg2rad=t.deg2rad,x.rad2deg=t.rad2deg,x.angleDelta=t.angleDelta,x.angleDist=t.angleDist,x.isFullCircle=t.isFullCircle,x.isAngleInsideSector=t.isAngleInsideSector,x.isPtInsideSector=t.isPtInsideSector,x.pathArc=t.pathArc,x.pathSector=t.pathSector,x.pathAnnulus=t.pathAnnulus;t=e("./anchor_utils");x.isLeftAnchor=t.isLeftAnchor,x.isCenterAnchor=t.isCenterAnchor,x.isRightAnchor=t.isRightAnchor,x.isTopAnchor=t.isTopAnchor,x.isMiddleAnchor=t.isMiddleAnchor,x.isBottomAnchor=t.isBottomAnchor;t=e("./geometry2d");x.segmentsIntersect=t.segmentsIntersect,x.segmentDistance=t.segmentDistance,x.getTextLocation=t.getTextLocation,x.clearLocationCache=t.clearLocationCache,x.getVisibleSegment=t.getVisibleSegment,x.findPointOnPath=t.findPointOnPath;t=e("./extend");x.extendFlat=t.extendFlat,x.extendDeep=t.extendDeep,x.extendDeepAll=t.extendDeepAll,x.extendDeepNoArrays=t.extendDeepNoArrays;t=e("./loggers");x.log=t.log,x.warn=t.warn,x.error=t.error;t=e("./regex");x.counterRegex=t.counter;t=e("./throttle");x.throttle=t.throttle,x.throttleDone=t.done,x.clearThrottle=t.clear;t=e("./dom");function c(e){var t,n={};for(t in e)for(var r=e[t],a=0;a<r.length;a++)n[r[a]]=+t;return n}x.getGraphDiv=t.getGraphDiv,x.isPlotDiv=t.isPlotDiv,x.removeElement=t.removeElement,x.addStyleRule=t.addStyleRule,x.addRelatedStyleRule=t.addRelatedStyleRule,x.deleteRelatedStyleRule=t.deleteRelatedStyleRule,x.getFullTransformMatrix=t.getFullTransformMatrix,x.getElementTransformMatrix=t.getElementTransformMatrix,x.getElementAndAncestors=t.getElementAndAncestors,x.equalDomRects=t.equalDomRects,x.clearResponsive=e("./clear_responsive"),x.preserveDrawingBuffer=e("./preserve_drawing_buffer"),x.makeTraceGroups=e("./make_trace_groups"),x._=e("./localize"),x.notifier=e("./notifier"),x.filterUnique=e("./filter_unique"),x.filterVisible=e("./filter_visible"),x.pushUnique=e("./push_unique"),x.increment=e("./increment"),x.cleanNumber=e("./clean_number"),x.ensureNumber=function(e){return r(e)?(e=Number(e),i<e||e<o?s:e):s},x.isIndex=function(e,t){return!(void 0!==t&&t<=e)&&(r(e)&&0<=e&&e%1==0)},x.noop=e("./noop"),x.identity=e("./identity"),x.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},x.swapAttrs=function(e,t,n,r){n=n||"x",r=r||"y";for(var a=0;a<t.length;a++){var i=t[a],o=x.nestedProperty(e,i.replace("?",n)),s=x.nestedProperty(e,i.replace("?",r)),i=o.get();o.set(s.get()),s.set(i)}},x.raiseToTop=function(e){e.parentNode.appendChild(e)},x.cancelTransition=function(e){return e.transition().duration(0)},x.constrain=function(e,t,n){return n<t?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},x.bBoxIntersect=function(e,t,n){return e.left<=t.right+(n=n||0)&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},x.simpleMap=function(e,t,n,r,a){for(var i=e.length,o=new Array(i),s=0;s<i;s++)o[s]=t(e[s],n,r,a);return o},x.randstr=function e(t,n,r,a){if(r=r||16,(n=void 0===n?24:n)<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),o="",s=2;i===1/0;s*=2)i=Math.log(Math.pow(2,n/s))/Math.log(r)*s;var l=i-Math.floor(i);for(s=0;s<Math.floor(i);s++)o=Math.floor(Math.random()*r).toString(r)+o;l&&(c=Math.pow(r,l),o=Math.floor(Math.random()*c).toString(r)+o);var c=parseInt(o,r);return t&&t[o]||c!==1/0&&c>=Math.pow(2,n)?10<a?(x.warn("randstr failed uniqueness"),o):e(t,n,r,(a||0)+1):o},x.OptionControl=function(t,n){t=t||{};var r={optionList:[],_newoption:function(e){e[n]=t,r[e.name]=e,r.optionList.push(e)}};return r["_"+(n=n||"opt")]=t,r},x.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;for(var n,r,a,i=e.length,o=2*i,s=2*t-1,l=new Array(s),c=new Array(i),u=0;u<s;u++)l[u]=(1-Math.cos(Math.PI*(u+1)/t))/(2*t);for(u=0;u<i;u++){for(n=a=0;n<s;n++)(r=u+n+1-t)<-i?r-=o*Math.round(r/o):o<=r&&(r-=o*Math.floor(r/o)),r<0?r=-1-r:i<=r&&(r=o-1-r),a+=e[r]*l[n];c[u]=a}return c},x.syncOrAsync=function(e,t,n){var r;function a(){return x.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(a).then(void 0,x.promiseError);return n&&n(t)},x.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},x.noneOrAll=function(e,t,n){if(e){for(var r=!1,a=!0,i=0;i<n.length;i++)null!=e[n[i]]?r=!0:a=!1;if(r&&!a)for(i=0;i<n.length;i++)e[n[i]]=t[n[i]]}},x.mergeArray=function(e,t,n,r){var a="function"==typeof r;if(x.isArrayOrTypedArray(e))for(var i=Math.min(e.length,t.length),o=0;o<i;o++){var s=e[o];t[o][n]=a?r(s):s}},x.mergeArrayCastPositive=function(e,t,n){return x.mergeArray(e,t,n,function(e){e=+e;return isFinite(e)&&0<e?e:0})},x.fillArray=function(e,t,n,r){if(r=r||x.identity,x.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][n]=r(e[a])},x.castOption=function(e,t,n,r){r=r||x.identity;n=x.nestedProperty(e,n).get();return x.isArrayOrTypedArray(n)?Array.isArray(t)&&x.isArrayOrTypedArray(n[t[0]])?r(n[t[0]][t[1]]):r(n[t]):n},x.extractOption=function(e,t,n,r){if(n in e)return e[n];r=x.nestedProperty(t,r).get();return Array.isArray(r)?void 0:r},x.tagSelected=function(e,t,n){var r,a=t.selectedpoints,t=t._indexToPoints;t&&(r=c(t));for(var i,o=0;o<a.length;o++){var s,l=a[o];(x.isIndex(l)||x.isArrayOrTypedArray(l)&&x.isIndex(l[0])&&x.isIndex(l[1]))&&(l=r?r[l]:l,s=n?n[l]:l,void 0!==(i=s)&&i<e.length&&(e[s].selected=1))}},x.selIndices2selPoints=function(e){var t=e.selectedpoints,e=e._indexToPoints;if(e){for(var n=c(e),r=[],a=0;a<t.length;a++){var i=t[a];x.isIndex(i)&&(i=n[i],x.isIndex(i)&&r.push(i))}return r}return t},x.getTargetArray=function(e,t){t=t.target;if("string"==typeof t&&t){e=x.nestedProperty(e,t).get();return!!Array.isArray(e)&&e}return!!Array.isArray(t)&&t},x.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});for(var r,a,i=Object.keys(e),o=0;o<i.length;o++)a=e[r=i[o]],"_"!==r.charAt(0)&&"function"!=typeof a&&("module"===r?n[r]=a:Array.isArray(a)?n[r]="colorscale"===r?a.slice():a.slice(0,3):x.isTypedArray(a)?n[r]=a.subarray(0,3):n[r]=a&&"object"==typeof a?x.minExtend(e[r],t[r]):a);for(i=Object.keys(t),o=0;o<i.length;o++)"object"==typeof(a=t[r=i[o]])&&r in n&&"object"==typeof n[r]||(n[r]=a);return n},x.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},x.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},x.isIE=function(){return void 0!==window.navigator.msSaveBlob};var l=/Version\/[\d\.]+.*Safari/;x.isSafari=function(){return l.test(window.navigator.userAgent)};var u=/iPad|iPhone|iPod/;x.isIOS=function(){return u.test(window.navigator.userAgent)};var d=/Firefox\/(\d+)\.\d+/;x.getFirefoxVersion=function(){var e=d.exec(window.navigator.userAgent);if(e&&2===e.length){e=parseInt(e[1]);if(!isNaN(e))return e}return null},x.isD3Selection=function(e){return e instanceof y.selection},x.ensureSingle=function(e,t,n,r){var a=e.select(t+(n?"."+n:""));if(a.size())return a;t=e.append(t);return n&&t.classed(n,!0),r&&t.call(r),t},x.ensureSingleById=function(e,t,n,r){var a=e.select(t+"#"+n);if(a.size())return a;n=e.append(t).attr("id",n);return r&&n.call(r),n},x.objectFromPath=function(e,t){for(var n=e.split("."),e=s={},r=0;r<n.length;r++)var a,i=n[r],o=n[r].match(/(.*)\[([0-9]+)\]/),s=o?(i=o[1],a=o[2],s=s[i]=[],r===n.length-1?s[a]=t:s[a]={},s[a]):(r===n.length-1?s[i]=t:s[i]={},s[i]);return e};var f=/^([^\[\.]+)\.(.+)?/,p=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;x.expandObjectPaths=function(e){var t,n,r,a,i,o;if("object"==typeof e&&!Array.isArray(e))for(t in e)e.hasOwnProperty(t)&&((i=t.match(f))?(r=e[t],n=i[1],delete e[t],e[n]=x.extendDeepNoArrays(e[n]||{},x.objectFromPath(t,x.expandObjectPaths(r))[n])):(i=t.match(p))?(r=e[t],n=i[1],a=parseInt(i[2]),delete e[t],e[n]=e[n]||[],"."===i[3]?(o=i[4],i=e[n][a]=e[n][a]||{},x.extendDeepNoArrays(i,x.objectFromPath(o,x.expandObjectPaths(r)))):e[n][a]=x.expandObjectPaths(r)):e[t]=x.expandObjectPaths(e[t]));return e},x.numSeparate=function(e,t,n){if(n=n||!1,"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,a=t.charAt(0),i=t.charAt(1),e=e.split("."),o=e[0],a=1<e.length?a+e[1]:"";if(i&&(1<e.length||4<o.length||n))for(;r.test(o);)o=o.replace(r,"$1"+i+"$2");return o+a},x.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var b=/^\w*$/;x.templateString=function(e,n){var r={};return e.replace(x.TEMPLATE_STRING_REGEX,function(e,t){t=b.test(t)?n[t]:(r[t]=r[t]||x.nestedProperty(n,t).get,r[t]());return x.isValidTextValue(t)?t:""})};var h={max:10,count:0,name:"hovertemplate"};x.hovertemplateString=function(){return g.apply(h,arguments)};var m={max:10,count:0,name:"texttemplate"};x.texttemplateString=function(){return g.apply(m,arguments)};var _=/^[:|\|]/;function g(e,f,p){var h=this,m=arguments;f=f||{};var g={};return e.replace(x.TEMPLATE_STRING_REGEX,function(e,t,n){var r,a,i="_xother"===t||"_yother"===t,o="_xother_"===t||"_yother_"===t,s="xother_"===t||"yother_"===t,l="xother"===t||"yother"===t||i||s||o,c=t;if((i||o)&&(c=c.substring(1)),(s||o)&&(c=c.substring(0,c.length-1)),l){if(void 0===(r=f[c]))return""}else for(var u,d=3;d<m.length;d++)if(u=m[d]){if(u.hasOwnProperty(c)){r=u[c];break}if(b.test(c)||(r=x.nestedProperty(u,c).get(),(r=g[c]||x.nestedProperty(u,c).get())&&(g[c]=r)),void 0!==r)break}return void 0===r&&h?(h.count<h.max&&(x.warn("Variable '"+c+"' in "+h.name+" could not be found!"),r=e),h.count===h.max&&x.warn("Too many "+h.name+" warnings - additional warnings will be suppressed"),h.count++,e):(n?(":"===n[0]&&(r=(a=p?p.numberFormat:y.format)(n.replace(_,""))(r)),"|"===n[0]&&(a=p?p.timeFormat:v,e=x.dateTime2ms(r),r=x.formatDate(e,n.replace(_,""),!1,a))):f.hasOwnProperty(a=c+"Label")&&(r=f[a]),l&&(r="("+r+")",(i||o)&&(r=" "+r),(s||o)&&(r+=" ")),r)})}x.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,a=0,i=0;i<n;i++){var o=e.charCodeAt(i)||0,s=t.charCodeAt(i)||0,l=48<=o&&o<=57,c=48<=s&&s<=57;if(l&&(r=10*r+o-48),c&&(a=10*a+s-48),!l||!c){if(r!==a)return r-a;if(o!==s)return o-s}}return a-r};var w=2e9;x.seedPseudoRandom=function(){w=2e9},x.pseudoRandom=function(){var e=w;return w=(69069*w+1)%4294967296,Math.abs(w-e)<429496729?x.pseudoRandom():w/4294967296},x.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},a=x.extractOption(e,t,"htx","hovertext");if(x.isValidTextValue(a))return r(a);t=x.extractOption(e,t,"tx","text");return x.isValidTextValue(t)?r(t):void 0},x.isValidTextValue=function(e){return e||0===e},x.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},x.isHidden=function(e){e=window.getComputedStyle(e).display;return!e||"none"===e},x.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},x.strRotate=function(e){return e?"rotate("+e+")":""},x.strScale=function(e){return 1!==e?"scale("+e+")":""},x.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,a=e.targetX,i=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,e=e.scale;return e?1<e&&(e=1):e=0,x.strTranslate(a-e*(n+o),i-e*(r+s))+x.strScale(e)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},x.ensureUniformFontSize=function(e,t){var n=x.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},x.join2=function(e,t,n){var r=e.length;return 1<r?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},x.bigFont=function(e){return Math.round(1.2*e)};var e=x.getFirefoxVersion(),T=null!==e&&e<86;x.getPositionFromD3Event=function(){return T?[y.event.layerX,y.event.layerY]:[y.event.offsetX,y.event.offsetY]}},{"../constants/numerical":210,"./anchor_utils":214,"./angles":215,"./array":216,"./clean_number":217,"./clear_responsive":219,"./coerce":220,"./dates":221,"./dom":222,"./extend":224,"./filter_unique":225,"./filter_visible":226,"./geometry2d":227,"./identity":228,"./increment":229,"./is_plain_object":231,"./keyed_container":232,"./localize":233,"./loggers":234,"./make_trace_groups":235,"./matrix":236,"./mod":237,"./nested_property":238,"./noop":239,"./notifier":240,"./preserve_drawing_buffer":243,"./push_unique":244,"./regex":246,"./relative_attr":247,"./relink_private":248,"./search":249,"./stats":251,"./throttle":253,"./to_log_range":254,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],231:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},{}],232:[function(e,t,n){"use strict";var h=e("./nested_property"),a=/^\w*$/;t.exports=function(e,i,o,s){var r,l;o=o||"name",s=s||"value";var c={},u=i&&i.length?(l=h(e,i)).get():e;i=i||"";var d={};if(u)for(r=0;r<u.length;r++)d[u[r][o]]=r;var f=a.test(s),p={set:function(e,t){var n=null===t?4:0;if(!u){if(!l||4===n)return;u=[],l.set(u)}var r=d[e];if(void 0===r){if(4===n)return;n|=3,r=u.length,d[e]=r}else t!==(f?u[r][s]:h(u[r],s).get())&&(n|=2);var a=u[r]=u[r]||{};return a[o]=e,f?a[s]=t:h(a,s).set(t),null!==t&&(n&=-5),c[r]=c[r]|n,p},get:function(e){if(u){e=d[e];return void 0!==e?f?u[e][s]:h(u[e],s).get():void 0}},rename:function(e,t){var n=d[e];return void 0===n||(c[n]=1|c[n],d[t]=n,delete d[e],u[n][o]=t),p},remove:function(e){var t=d[e];if(void 0===t)return p;var n=u[t];if(2<Object.keys(n).length)return c[t]=2|c[t],p.set(e,null);if(f){for(r=t;r<u.length;r++)c[r]=3|c[r];for(r=t;r<u.length;r++)d[u[r][o]]--;u.splice(t,1),delete d[e]}else h(n,s).set(null),c[t]=6|c[t];return p},constructUpdate:function(){for(var e,t,n={},r=Object.keys(c),a=0;a<r.length;a++)t=r[a],e=i+"["+t+"]",u[t]?(1&c[t]&&(n[e+"."+o]=u[t][o]),2&c[t]&&(n[e+"."+s]=f?4&c[t]?null:u[t][s]:4&c[t]?null:h(u[t],s).get())):n[e]=null;return n}};return p}},{"./nested_property":238}],233:[function(e,t,n){"use strict";var l=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var a=e._context.locales,i=0;i<2;i++){var o=(a[n]||{}).dictionary;if(o){o=o[t];if(o)return o}a=l.localeRegistry}var s=n.split("-")[0];if(s===n)break;n=s}return t}},{"../registry":313}],234:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config").dfltConfig,a=e("./notifier"),t=t.exports={};t.log=function(){if(1<r.logging){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(1<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"long")}},t.warn=function(){if(0<r.logging){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}},t.error=function(){if(0<r.logging){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":263,"./notifier":240}],235:[function(e,t,n){"use strict";var a=e("@plotly/d3");t.exports=function(e,t,n){t=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});t.exit().remove(),t.enter().append("g").attr("class",n),t.order();var r=e.classed("rangeplot")?"nodeRangePlot3":"node3";return t.each(function(e){e[0][r]=a.select(this)}),t}},{"@plotly/d3":11}],236:[function(e,t,o){"use strict";var n=e("gl-mat4");o.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},o.transposeRagged=function(e){for(var t,n=0,r=e.length,a=0;a<r;a++)n=Math.max(n,e[a].length);var i=new Array(n);for(a=0;a<n;a++)for(i[a]=new Array(r),t=0;t<r;t++)i[a][t]=e[t][a];return i},o.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n=e.length;if(e[0].length)for(a=new Array(n),i=0;i<n;i++)a[i]=o.dot(e[i],t);else if(t[0].length)for(var r=o.transposeRagged(t),a=new Array(r.length),i=0;i<r.length;i++)a[i]=o.dot(e,r[i]);else for(i=a=0;i<n;i++)a+=e[i]*t[i];return a},o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},o.rotationMatrix=function(e){e=e*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},o.rotationXYMatrix=function(e,t,n){return o.dot(o.dot(o.translationMatrix(t,n),o.rotationMatrix(e)),o.translationMatrix(-t,-n))},o.apply3DTransform=function(t){return function(){var e=arguments,e=1===arguments.length?e[0]:[e[0],e[1],e[2]||0];return o.dot(t,[e[0],e[1],e[2],1]).slice(0,3)}},o.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);e=1===arguments.length?e[0]:[e[0],e[1]];return o.dot(t,[e[0],e[1],1]).slice(0,2)}},o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}},o.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(e){var t=[];return n.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":31}],237:[function(e,t,n){"use strict";t.exports={mod:function(e,t){return(e%=t)<0?e+t:e},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],238:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("./array").isArrayOrTypedArray;t.exports=function(e,t){if(u(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,a,i=0,o=t.split(".");i<o.length;){if(n=String(o[i]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[i]=n[1];else{if(0!==i)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),a=0;a<r.length;a++)i++,o.splice(i,0,Number(r[a]))}i++}return"object"!=typeof e?{set:function(){throw"bad container"},get:function(){},astr:t,parts:o,obj:e}:{set:p(e,o,t),get:function o(s,l){return function(){var e,t,n,r,a,i=s;for(r=0;r<l.length-1;r++){if(-1===(e=l[r])){for(t=!0,n=[],a=0;a<i.length;a++)n[a]=o(i[a],l.slice(r+1))(),n[a]!==n[0]&&(t=!1);return t?n[0]:n}if("number"==typeof e&&!d(i))return;if("object"!=typeof(i=i[e])||null===i)return}if("object"==typeof i&&null!==i&&null!==(n=i[l[r]]))return n}}(e,o),astr:t,parts:o,obj:e}};var r=/(^|\.)args\[/;function f(e,t){return void 0===e||null===e&&!t.match(r)}function p(s,l,c){return function(e){for(var t,n=s,r="",a=[[s,r]],i=f(e,c),o=0;o<l.length-1;o++){if("number"==typeof(t=l[o])&&!d(n))throw"array index but container is not an array";if(-1===t){if(i=!function(e,t,n,r){var a,i=d(n),o=!0,s=n,l=r.replace("-1",0),c=!i&&f(n,l),u=t[0];for(a=0;a<e.length;a++)l=r.replace("-1",a),i&&(s=n[a%n.length],c=f(s,l)),c&&(o=!1),h(e,a,u,c)&&p(e[a],t,r.replace("-1",a))(s);return o}(n,l.slice(o+1),e,c))break;return}if(!h(n,t,l[o+1],i))break;if("object"!=typeof(n=n[t])||null===n)throw"container is not an object";r=function(e,t){var n=t;u(t)?n="["+t+"]":e&&(n="."+t);return e+n}(r,t),a.push([n,r])}if(i){if(o===l.length-1&&(delete n[l[o]],Array.isArray(n)&&+l[o]==n.length-1))for(;n.length&&void 0===n[n.length-1];)n.pop()}else n[l[o]]=e}}function h(e,t,n,r){if(void 0===e[t]){if(r)return;e[t]="number"==typeof n?[]:{}}return 1}},{"./array":216,"fast-isnumeric":15}],239:[function(e,t,n){"use strict";t.exports=function(){}},{}],240:[function(e,t,n){"use strict";var l=e("@plotly/d3"),r=e("fast-isnumeric"),a=[];t.exports=function(e,i){var o;function s(e){e.duration(700).style("opacity",0).each("end",function(e){e=a.indexOf(e);-1!==e&&a.splice(e,1),l.select(this).remove()})}-1===a.indexOf(e)&&(a.push(e),o=1e3,r(i)?o=i:"long"===i&&(o=3e3),(e=l.select("body").selectAll(".plotly-notifier").data([0])).enter().append("div").classed("plotly-notifier",!0),e.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(s)});for(var n=t.append("p"),r=e.split(/<br\s*\/?>/g),a=0;a<r.length;a++)a&&n.append("br"),n.append("span").text(r[a]);"stick"===i?t.transition().duration(350).style("opacity",1):t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}))}},{"@plotly/d3":11,"fast-isnumeric":15}],241:[function(e,t,n){"use strict";var o=e("./setcursor"),s="data-savedcursor";t.exports=function(e,t){var n=e.attr(s);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),a=0;a<r.length;a++){var i=r[a];0===i.indexOf("cursor-")&&e.attr(s,i.substr(7)).classed(i,!1)}e.attr(s)||e.attr(s,"!!")}o(e,t)}else n&&(e.attr(s,null),"!!"===n?o(e):o(e,n))}},{"./setcursor":250}],242:[function(e,t,n){"use strict";var f=e("./matrix").dot,y=e("../constants/numerical").BADNUM,c=t.exports={};c.tester=function(e){var f=e.slice(),p=f[0][0],h=p,m=f[0][1],g=m;for(f.push(f[0]),r=1;r<f.length;r++)p=Math.min(p,f[r][0]),h=Math.max(h,f[r][0]),m=Math.min(m,f[r][1]),g=Math.max(g,f[r][1]);var a,e=!1;5===f.length&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(e=!0,a=function(e){return e[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(e=!0,a=function(e){return e[1]===f[0][1]}));for(var t=!0,n=f[0],r=1;r<f.length;r++)if(n[0]!==f[r][0]||n[1]!==f[r][1]){t=!1;break}return{xmin:p,xmax:h,ymin:m,ymax:g,pts:f,contains:e?function(e,t){var n=e[0],r=e[1];return!(n===y||n<p||h<n||r===y||r<m||g<r)&&(!t||!a(e))}:function(e,t){var n=e[0],r=e[1];if(n===y||n<p||h<n||r===y||r<m||g<r)return!1;for(var a,i,o,s=f.length,l=f[0][0],c=f[0][1],u=0,d=1;d<s;d++)if(o=l,a=c,l=f[d][0],c=f[d][1],!(n<(i=Math.min(o,l))||n>Math.max(o,l)||r>Math.max(a,c)))if(r<Math.min(a,c))n!==i&&u++;else{if(r===(o=l===o?r:a+(n-o)*(c-a)/(l-o)))return 1!==d||!t;r<=o&&n!==i&&u++}return u%2==1},isRect:e,degenerate:t}},c.isSegmentBent=function(e,t,n,r){for(var a,i,o=e[t],s=[e[n][0]-o[0],e[n][1]-o[1]],l=f(s,s),c=Math.sqrt(l),u=[-s[1]/c,s[0]/c],d=t+1;d<n;d++)if(a=[e[d][0]-o[0],e[d][1]-o[1]],(i=f(a,s))<0||l<i||Math.abs(f(a,u))>r)return!0;return!1},c.filter=function(a,i){var o=[a[0]],s=0,l=0;function e(e){a.push(e);var t=o.length,n=s;o.splice(l+1);for(var r=n+1;r<a.length;r++)r!==a.length-1&&!c.isSegmentBent(a,n,r+1,i)||(o.push(a[r]),o.length<t-2&&(s=r,l=o.length-1),n=r)}return 1<a.length&&e(a.pop()),{addPt:e,raw:a,filtered:o}}},{"../constants/numerical":210,"./matrix":236}],243:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),s=e("is-mobile");t.exports=function(e){var t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}();if("string"!=typeof t)return!0;e=s({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!e)for(var n=t.split(" "),r=1;r<n.length;r++)if(-1!==n[r].indexOf("Safari"))for(var a=r-1;-1<a;a--){var i=n[a];if("Version/"===i.substr(0,8)){i=i.substr(8).split(".")[0];if(13<=(i=o(i)?+i:i))return!0}}return e}},{"fast-isnumeric":15,"is-mobile":49}],244:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],245:[function(e,t,n){"use strict";var i=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;var r={add:function(e,t,n,r,a){var i,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),e.undoQueue.index+=1):i=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(t),i.undo.args.unshift(n),i.redo.calls.push(r),i.redo.args.push(a)),e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)r.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)r.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};r.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],a=0;a<t.length;a++)n=t[a],r[a]=n!==e&&"object"==typeof n?Array.isArray(n)?i.extendDeep([],n):i.extendDeepAll({},n):n;return r}(e,n),t.apply(null,n)},t.exports=r},{"../lib":230,"../plot_api/plot_config":263}],246:[function(e,t,n){"use strict";n.counter=function(e,t,n,r){n=(t||"")+(n?"":"$"),r=!1===r?"":"^";return"xy"===e?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(r+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],247:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,a=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(a))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],248:[function(e,t,n){"use strict";var l=e("./array").isArrayOrTypedArray,c=e("./is_plain_object");t.exports=function e(t,n){for(var r in n){var a=n[r],i=t[r];if(i!==a)if("_"===r.charAt(0)||"function"==typeof a)r in t||(t[r]=a);else if(l(a)&&l(i)&&c(a[0])){if("customdata"!==r&&"ids"!==r)for(var o=Math.min(a.length,i.length),s=0;s<o;s++)i[s]!==a[s]&&c(a[s])&&c(i[s])&&e(i[s],a[s])}else c(a)&&c(i)&&(e(i,a),Object.keys(i).length||delete t[r])}}},{"./array":216,"./is_plain_object":231}],249:[function(e,t,u){"use strict";var c=e("fast-isnumeric"),d=e("./loggers"),o=e("./identity"),f=e("../constants/numerical").BADNUM;function p(e,t){return e<t}function h(e,t){return e<=t}function m(e,t){return t<e}function g(e,t){return t<=e}u.findBin=function(e,t,n){if(c(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,a=0,i=t.length,o=0,s=1<i?(t[i-1]-t[0])/(i-1):1,l=0<=s?n?p:h:n?g:m;for(e+=1e-9*s*(n?-1:1)*(0<=s?1:-1);a<i&&o++<100;)l(t[r=Math.floor((a+i)/2)],e)?a=r+1:i=r;return 90<o&&d.log("Long binary search..."),a-1},u.sorterAsc=function(e,t){return e-t},u.sorterDes=function(e,t){return t-e},u.distinctVals=function(e){var t,n=e.slice();for(n.sort(u.sorterAsc),t=n.length-1;-1<t&&n[t]===f;t--);for(var r,a=n[t]-n[0]||1,i=a/(t||1)/1e4,o=[],s=0;s<=t;s++){var l=n[s],c=l-r;void 0===r?(o.push(l),r=l):i<c&&(a=Math.min(a,c),o.push(l),r=l)}return{vals:o,minDiff:a}},u.roundUp=function(e,t,n){for(var r,a=0,i=t.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;a<i&&o++<100;)t[r=c((a+i)/2)]<=e?a=r+s:i=r-l;return t[a]},u.sort=function(e,t){for(var n=0,r=0,a=1;a<e.length;a++){var i=t(e[a],e[a-1]);if(i<0?n=1:0<i&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},u.findIndexOfMin=function(e,t){t=t||o;for(var n,r=1/0,a=0;a<e.length;a++){var i=t(e[a]);i<r&&(r=i,n=a)}return n}},{"../constants/numerical":210,"./identity":228,"./loggers":234,"fast-isnumeric":15}],250:[function(e,t,n){"use strict";t.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],251:[function(e,t,o){"use strict";var s=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,n,r){var a,i;if((!r||r>n.length)&&(r=n.length),s(t)||(t=!1),l(n[0])){for(i=new Array(r),a=0;a<r;a++)i[a]=o.aggNums(e,t,n[a]);n=i}for(a=0;a<r;a++)s(t)?s(n[a])&&(t=e(+t,+n[a])):t=n[a];return t},o.len=function(e){return o.aggNums(function(e){return e+1},0,e)},o.mean=function(e,t){return t=t||o.len(e),o.aggNums(function(e,t){return e+t},0,e)/t},o.midRange=function(e){if(void 0!==e&&0!==e.length)return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2},o.variance=function(e,t,n){return t=t||o.len(e),s(n)||(n=o.mean(e,t)),o.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},o.stdev=function(e,t,n){return Math.sqrt(o.variance(e,t,n))},o.median=function(e){e=e.slice().sort();return o.interp(e,.5)},o.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./array":216,"fast-isnumeric":15}],252:[function(e,t,n){"use strict";var g=e("@plotly/d3"),y=e("../lib"),v=y.strTranslate,x=e("../constants/xmlns_namespaces"),b=e("../constants/alignment").LINE_SPACING;function _(e,t){return e.node().getBoundingClientRect()[t]}var r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(c,e,u){var d=c.text(),f=!c.attr("data-notex")&&"undefined"!=typeof MathJax&&d.match(r),p=g.select(c.node().parentNode);if(!p.empty()){var h=c.attr("class")?c.attr("class").split(" ")[0]:"text";return h+="-math",p.selectAll("svg."+h).remove(),p.selectAll("g."+h+"-group").remove(),c.style("display",null).attr({"data-unformatted":d,"data-math":"N"}),f?(e&&e._promises||[]).push(new Promise(function(o){c.style("display","none");var n,t,r,a,e,i,s,l=parseInt(c.node().style.fontSize,10);n=f[2],t={fontSize:l},r=function(e,t,n){p.selectAll("svg."+h).remove(),p.selectAll("g."+h+"-group").remove();var r=e&&e.select("svg");if(!r||!r.node())return m(),void o();var a=p.append("g").classed(h+"-group",!0).attr({"pointer-events":"none","data-unformatted":d,"data-math":"Y"});a.node().appendChild(r.node()),t&&t.node()&&r.node().insertBefore(t.node().cloneNode(!0),r.node().firstChild),r.attr({class:h,height:n.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var i=c.node().style.fill||"black",e=r.select("g");e.attr({fill:i,stroke:i});t=_(e,"width"),n=_(e,"height"),i=+c.attr("x")-t*{start:0,middle:.5,end:1}[c.attr("text-anchor")||"start"],e=-(l||_(c,"height"))/4;"y"===h[0]?(a.attr({transform:"rotate("+[-90,+c.attr("x"),+c.attr("y")]+")"+v(-t/2,e-n/2)}),r.attr({x:+c.attr("x"),y:+c.attr("y")})):"l"===h[0]?r.attr({x:c.attr("x"),y:e-n/2}):"a"===h[0]&&0!==h.indexOf("atitle")?r.attr({x:0,y:e}):r.attr({x:i,y:+c.attr("y")+e-n/2}),u&&u.call(c,a),o(a)},MathJax.Hub.Queue(function(){return e=y.extendDeepAll({},MathJax.Hub.config),i=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+y.randstr({},64);return s=g.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(n.replace(w,"\\lt ").replace(T,"\\gt ")),MathJax.Hub.Typeset(s.node())},function(){var e,t=g.select("body").select("#MathJax_SVG_glyphs");if(s.select(".MathJax_SVG").empty()||!s.select("svg").node()?(y.log("There was an error in the tex syntax.",n),r()):(e=s.select("svg").node().getBoundingClientRect(),r(s.select(".MathJax_SVG"),t,e)),s.remove(),"SVG"!==a)return MathJax.Hub.setRenderer(a)},function(){return void 0!==i&&(MathJax.Hub.processSectionDelay=i),MathJax.Hub.Config(e)})})):m(),c}function m(){p.empty()||(h=c.attr("class")+"-math",p.select("svg."+h).remove()),c.text("").style("white-space","pre"),function(r,n){n=n.replace(L," ");var s,e=!1,l=[],a=-1;function t(){a++;var e=document.createElementNS(x.svg,"tspan");g.select(e).attr({class:"line",dy:a*b+"em"}),r.appendChild(e);var t=l;if(l=[{node:s=e}],1<t.length)for(var n=1;n<t.length;n++)i(t[n])}function i(e){var t,n,r=e.type,a={};"a"===r?(i="a",t=e.target,n=e.href,o=e.popup,n&&(a={"xlink:xlink:show":"_blank"===t||"_"!==t.charAt(0)?"new":"replace",target:t,"xlink:xlink:href":n},o&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'))):i="tspan",e.style&&(a.style=e.style);var i,o=document.createElementNS(x.svg,i);"sup"===r||"sub"===r?(c(s,S),s.appendChild(o),c(i=document.createElementNS(x.svg,"tspan"),S),g.select(i).attr("dy",A[r]),a.dy=k[r],s.appendChild(o),s.appendChild(i)):s.appendChild(o),g.select(o).attr(a),s=e.node=o,l.push(e)}function c(e,t){e.appendChild(document.createTextNode(t))}O.test(n)?t():l=[{node:s=r}];for(var o=n.split(C),u=0;u<o.length;u++){var d,f=o[u],p=f.match(D),h=p&&p[2].toLowerCase(),m=M[h];"br"===h?t():void 0===m?c(s,j(f)):p[1]?function(e){var t;1!==l.length?(e!==(t=l.pop()).type&&y.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),s=l[l.length-1].node):y.log("Ignoring unexpected end tag </"+e+">.",n)}(h):(d=p[4],f={type:h},(p=z(d,P))?(p=p.replace(F,"$1 fill:"),m&&(p+=";"+m)):m&&(p=m),p&&(f.style=p),"a"===h&&(e=!0,(p=z(d,I))&&((h=document.createElement("a")).href=p,-1!==E.indexOf(h.protocol)&&(f.href=encodeURI(decodeURI(p)),f.target=z(d,R)||"_blank",f.popup=z(d,N)))),i(f))}return e}(c.node(),d)&&c.style("pointer-events","all"),n.positionText(c),u&&u.call(c)}};var w=/(<|&lt;|&#60;)/g,T=/(>|&gt;|&#62;)/g;var M={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},k={sub:"0.3em",sup:"-0.6em"},A={sub:"-0.21em",sup:"0.42em"},S="",E=["http:","https:","mailto:","",void 0,":"],L=n.NEWLINES=/(\r\n?|\n)/g,C=/(<[^<>]*>)/,D=/<(\/?)([^ >]*)(\s+(.*))?>/i,O=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var P=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,I=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,R=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,N=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function z(e,t){if(!e)return null;t=e.match(t),t=t&&(t[3]||t[4]);return t&&j(t)}var F=/(^|;)\s*color:/;n.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],a="...".length,i=e.split(C),o=[],s="",l=0,c=0;c<i.length;c++){var u=i[c],d=u.match(D),f=d&&d[2].toLowerCase();if(f)-1!==r.indexOf(f)&&(o.push(u),s=f);else{d=u.length;if(l+d<n)o.push(u),l+=d;else if(l<n){f=n-l;s&&("br"!==s||f<=a||d<=a)&&o.pop(),a<n?o.push(u.substr(0,f-a)+"..."):o.push(u.substr(0,f));break}s=""}}return o.join("")};var a={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},i=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function j(e){return e.replace(i,function(e,t){t="#"===t.charAt(0)?function(e){if(!(1114111<e)){var t=String.fromCodePoint;if(t)return t(e);t=String.fromCharCode;return e<=65535?t(e):t(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):a[t];return t||e})}function u(e,t,r){var a,n=r.horizontalAlign,i=r.verticalAlign||"top",o=e.node().getBoundingClientRect(),s=t.node().getBoundingClientRect(),l="bottom"===i?function(){return o.bottom-a.height}:"middle"===i?function(){return o.top+(o.height-a.height)/2}:function(){return o.top},c="right"===n?function(){return o.right-a.width}:"center"===n?function(){return o.left+(o.width-a.width)/2}:function(){return o.left};return function(){a=this.node().getBoundingClientRect();var e=c()-s.left,t=l()-s.top,n=r.gd||{};return r.gd&&(n._fullLayout._calcInverseTransform(n),e=(n=y.apply3DTransform(n._fullLayout._invTransform)(e,t))[0],t=n[1]),this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}n.convertEntities=j,n.sanitizeHTML=function(e){e=e.replace(L," ");for(var t=document.createElement("p"),n=t,r=[],a=e.split(C),i=0;i<a.length;i++){var o,s,l,c=a[i],u=c.match(D),d=u&&u[2].toLowerCase();d in M?u[1]?r.length&&(n=r.pop()):(o=(s=z(l=u[4],P))?{style:s}:{},"a"!==d||(u=z(l,I))&&((s=document.createElement("a")).href=u,-1!==E.indexOf(s.protocol)&&(o.href=encodeURI(decodeURI(u)),(l=z(l,R))&&(o.target=l))),d=document.createElement(d),n.appendChild(d),g.select(d).attr(o),r.push(n=d)):n.appendChild(document.createTextNode(j(c)))}return t.innerHTML},n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,a,i){return e.each(function(){var n=g.select(this);function e(e,t){return void 0===t?null===(t=n.attr(e))&&(n.attr(e,0),t=0):n.attr(e,t),t}var t=e("x",a),r=e("y",i);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:t,y:r})})};n.makeTextShadow=function(e){var t="1px ",n="1px ",r="1px ";return t+n+r+e+", -"+t+"-"+n+r+e+", "+t+"-"+n+r+e+", -"+t+n+r+e},n.makeEditable=function(i,o){var s=o.gd,e=o.delegate,l=g.dispatch("edit","input","cancel"),t=e||i;if(i.style({"pointer-events":e?"none":"all"}),1!==i.size())throw new Error("boo");function n(){!function(){var e=g.select(s).select(".svg-container"),t=e.append("div"),n=i.node().style,r=parseFloat(n.fontSize||12),a=o.text;void 0===a&&(a=i.attr("data-unformatted"));t.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:o.fill||n.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(a).call(u(i,e,o)).on("blur",function(){s._editing=!1,i.text(this.textContent).style({opacity:1});var e=g.select(this).attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(i.node().parentNode).select(e).style({opacity:0});e=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),l.edit.call(i,e)}).on("focus",function(){var e=this;s._editing=!0,g.select(document).on("mouseup",function(){return g.event.target!==e&&void(document.activeElement===t.node()&&t.node().blur())})}).on("keyup",function(){27===g.event.which?(s._editing=!1,i.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(i,this.textContent)):(l.input.call(i,this.textContent),g.select(this).call(u(i,e,o)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(c)}(),i.style({opacity:0});var e=t.attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(i.node().parentNode).select(e).style({opacity:0})}function c(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);e=window.getSelection();e.removeAllRanges(),e.addRange(n),t.focus()}return o.immediate?n():t.on("click",n),g.rebind(i,l,"on")}},{"../constants/alignment":205,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],253:[function(e,t,n){"use strict";var s={};function l(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var r=s[e],a=Date.now();if(!r){for(var i in s)s[i].ts<a-6e4&&delete s[i];r=s[e]={ts:0,timer:null}}function o(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),a>r.ts+t?o():r.timer=setTimeout(function(){o(),r.timer=null},t)},n.done=function(e){var n=s[e];return n&&n.timer?new Promise(function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)l(s[e]),delete s[e];else for(var t in s)n.clear(t)}},{}],254:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(0<e)return Math.log(e)/Math.LN10;e=Math.log(Math.min(t[0],t[1]))/Math.LN10;return e=!r(e)?Math.log(Math.max(t[0],t[1]))/Math.LN10-6:e}},{"fast-isnumeric":15}],255:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],256:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],257:[function(e,t,n){"use strict";var s=e("../registry");t.exports=function(e){for(var t,n,r=s.layoutArrayContainers,a=s.layoutArrayRegexes,i=e.split("[")[0],o=0;o<a.length;o++)if((n=e.match(a[o]))&&0===n.index){t=n[0];break}if(!(t=t||r[r.indexOf(i)]))return!1;i=e.substr(t.length);return i?!!(n=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":313}],258:[function(e,t,n){"use strict";var r=e("../lib"),s=r.extendFlat,o=r.isPlainObject,e={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=e.flags.slice().concat(["fullReplot"]),i=r.flags.slice().concat("layoutReplot");function l(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function c(e,t,n){var r,a=s({},e);for(r in a){var i=a[r];o(i)&&(a[r]=function e(t,n,r,a){{if(t.valType){var i=s({},t);if(i.editType=n,Array.isArray(t.items)){i.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)i.items[o]=e(t.items[o],n,"from-root")}return i}return c(t,n,"_"===a.charAt(0)?"nested":"from-root")}}(i,t,0,r))}return"from-root"===n&&(a.editType=t),a}t.exports={traces:e,layout:r,traceFlags:function(){return l(a)},layoutFlags:function(){return l(i)},update:function(e,t){t=t.editType;if(t&&"none"!==t)for(var n=t.split("+"),r=0;r<n.length;r++)e[n[r]]=!0},overrideAll:c}},{"../lib":230}],259:[function(e,t,w){"use strict";var l=e("fast-isnumeric"),T=e("gl-mat4/fromQuat"),m=e("../registry"),M=e("../lib"),k=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),A=e("../components/color"),S=n.cleanId,c=n.getFromTrace,g=m.traceIs;function E(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=S(n,r,!0))}function L(a){function e(e,t){var n=a[e],r=a.title&&a.title[t];n&&!r&&(a.title||(a.title={}),a.title[t]=a[e],delete a[e])}a&&("string"!=typeof a.title&&"number"!=typeof a.title||(a.title={text:a.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function y(e){if(!M.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function v(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function C(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}w.clearPromiseQueue=function(e){Array.isArray(e._promises)&&0<e._promises.length&&M.log("Clearing previous rejected promises from queue."),e._promises=[]},w.cleanLayout=function(e){(e=e||{}).xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);for(var t=(k.subplotsRegistry.cartesian||{}).attrRegex,n=(k.subplotsRegistry.polar||{}).attrRegex,r=(k.subplotsRegistry.ternary||{}).attrRegex,a=(k.subplotsRegistry.gl3d||{}).attrRegex,i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];if(t&&t.test(s)){var l=e[s];l.anchor&&"free"!==l.anchor&&(l.anchor=S(l.anchor)),l.overlaying&&(l.overlaying=S(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,C(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick),L(l)}else if(n&&n.test(s))L(e[s].radialaxis);else if(r&&r.test(s)){var c=e[s];L(c.aaxis),L(c.baxis),L(c.caxis)}else if(a&&a.test(s)){l=e[s],c=l.cameraposition;if(Array.isArray(c)&&4===c[0].length){for(var s=c[0],u=c[1],d=c[2],f=T([],s),p=[],h=0;h<3;++h)p[h]=u[h]+d*f[2+4*h];l.camera={eye:{x:p[0],y:p[1],z:p[2]},center:{x:u[0],y:u[1],z:u[2]},up:{x:0,y:0,z:1}},delete l.cameraposition}L(l.xaxis),L(l.yaxis),L(l.zaxis)}}var m=Array.isArray(e.annotations)?e.annotations.length:0;for(o=0;o<m;o++){var g=e.annotations[o];M.isPlainObject(g)&&(g.ref&&("paper"===g.ref?(g.xref="paper",g.yref="paper"):"data"===g.ref&&(g.xref="x",g.yref="y"),delete g.ref),E(g,"xref"),E(g,"yref"))}var y=Array.isArray(e.shapes)?e.shapes.length:0;for(o=0;o<y;o++){var v=e.shapes[o];M.isPlainObject(v)&&(E(v,"xref"),E(v,"yref"))}var x=Array.isArray(e.images)?e.images.length:0;for(o=0;o<x;o++){var b=e.images[o];M.isPlainObject(b)&&(E(b,"xref"),E(b,"yref"))}var _=e.legend;return _&&(3<_.x?(_.x=1.02,_.xanchor="left"):_.x<-2&&(_.x=-.02,_.xanchor="right"),3<_.y?(_.y=1.02,_.yanchor="bottom"):_.y<-2&&(_.y=-.02,_.yanchor="top")),L(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),A.clean(e),e.template&&e.template.layout&&w.cleanLayout(e.template.layout),e},w.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y&&(o=A.defaults,r=n.error_y.color||(g(n,"bar")?A.defaultLine:o[t%o.length]),n.error_y.color=A.addOpacity(A.rgb(r),A.opacity(r)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!g(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",w.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&w.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=S(n.xaxis,"x")),n.yaxis&&(n.yaxis=S(n.yaxis,"y")),g(n,"gl3d")&&n.scene&&(n.scene=k.subplotsRegistry.gl3d.cleanId(n.scene)),!g(n,"pie-like")&&!g(n,"bar-like"))if(Array.isArray(n.textposition))for(l=0;l<n.textposition.length;l++)n.textposition[l]=v(n.textposition[l]);else n.textposition&&(n.textposition=v(n.textposition));var r,a,i,o=m.getModule(n);if(o&&o.colorbar&&((i=(a=o.colorbar.container)?n[a]:n)&&i.colorscale&&("YIGnBu"===i.colorscale&&(i.colorscale="YlGnBu"),"YIOrRd"===i.colorscale&&(i.colorscale="YlOrRd"))),"surface"===n.type&&M.isPlainObject(n.contours))for(var s=["x","y","z"],l=0;l<s.length;l++){var c=n.contours[s[l]];M.isPlainObject(c)&&(c.highlightColor&&(c.highlightcolor=c.highlightColor,delete c.highlightColor),c.highlightWidth&&(c.highlightwidth=c.highlightWidth,delete c.highlightWidth))}if("candlestick"!==n.type&&"ohlc"!==n.type||(r=!1!==(n.increasing||{}).showlegend,o=!1!==(n.decreasing||{}).showlegend,a=y(n.increasing),i=y(n.decreasing),!1!==a&&!1!==i?(o=function(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var a,i=Math.min(e.length,t.length);for(a=0;a<i&&e.charAt(a)===t.charAt(a);a++);return e.substr(0,a).trim()}(a,i,r,o))&&(n.name=o):!a&&!i||n.name||(n.name=a||i)),Array.isArray(n.transforms)){var u=n.transforms;for(l=0;l<u.length;l++){var d=u[l];if(M.isPlainObject(d))switch(d.type){case"filter":d.filtersrc&&(d.target=d.filtersrc,delete d.filtersrc),d.calendar&&(d.valuecalendar||(d.valuecalendar=d.calendar),delete d.calendar);break;case"groupby":if(d.styles=d.styles||d.style,d.styles&&!Array.isArray(d.styles)){var f=d.styles,p=Object.keys(f);d.styles=[];for(var h=0;h<p.length;h++)d.styles.push({target:p[h],value:f[p[h]]})}}}}C(n,"line")&&delete n.line,"marker"in n&&(C(n.marker,"line")&&delete n.marker.line,C(n,"marker")&&delete n.marker),A.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),L(n),n.colorbar&&L(n.colorbar),n.marker&&n.marker.colorbar&&L(n.marker.colorbar),n.line&&n.line.colorbar&&L(n.line.colorbar),n.aaxis&&L(n.aaxis),n.baxis&&L(n.baxis)}},w.swapXYData=function(e){var t;if(M.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y&&(t="copy_ystyle"in(t=e.error_y)?t.copy_ystyle:!(t.color||t.thickness||t.width),M.swapAttrs(e,["error_?.copy_ystyle"]),t&&M.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])),"string"==typeof e.hoverinfo){for(var n=e.hoverinfo.split("+"),r=0;r<n.length;r++)"x"===n[r]?n[r]="y":"y"===n[r]&&(n[r]="x");e.hoverinfo=n.join("+")}},w.coerceTraceIndices=function(e,t){if(l(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)M.isIndex(t[r],e.data.length)?n.push(t[r]):M.warn("trace index (",t[r],") is not a number or is out of bounds");return n}return t},w.manageArrayContainers=function(e,t,n){var r=e.obj,a=e.parts,i=a.length,o=a[i-1],s=l(o);s&&null===t?(i=a.slice(0,i-1).join("."),M.nestedProperty(r,i).get().splice(o,1)):(s&&void 0===e.get()&&void 0===e.get()&&(n[e.astr]=null),e.set(t))};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(e){var t=e.search(r);if(0<t)return e.substr(0,t)}w.hasParent=function(e,t){for(var n=a(t);n;){if(n in e)return!0;n=a(n)}return!1};var u=["x","y","z"];w.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var a=e._fullData[r],i=0;i<3;i++){var o=c(e,a,u[i]);if(o&&"log"!==o.type){var s=o._name,o=o._id.substr(1);if("scene"===o.substr(0,5)){if(void 0!==n[o])continue;s=o+"."+s}o=s+".type";void 0===n[s]&&void 0===n[o]&&M.nestedProperty(e.layout,o).set(null)}}}},{"../components/color":100,"../lib":230,"../plots/cartesian/axis_ids":280,"../plots/plots":311,"../registry":313,"fast-isnumeric":15,"gl-mat4/fromQuat":21}],260:[function(e,t,n){"use strict";var r=e("./plot_api");n._doPlot=r._doPlot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download");e=e("./template_api");n.makeTemplate=e.makeTemplate,n.validateTemplate=e.validateTemplate},{"../snapshot/download":315,"./plot_api":262,"./template_api":267,"./to_image":268,"./validate":269}],261:[function(e,t,n){"use strict";var r=e("../lib/is_plain_object"),A=e("../lib/noop"),S=e("../lib/loggers"),E=e("../lib/search").sorterAsc,L=e("../registry");n.containerArrayMatch=e("./container_array_match");var C=n.isAddVal=function(e){return"add"===e||r(e)},D=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,r,a){var i=t.astr,o=L.getComponentMethod(i,"supplyLayoutDefaults"),s=L.getComponentMethod(i,"draw"),l=L.getComponentMethod(i,"drawOne"),c=r.replot||r.recalc||o===A||s===A,u=e.layout,r=e._fullLayout;if(n[""]){1<Object.keys(n).length&&S.warn("Full array edits are incompatible with other edits",i);var d=n[""][""];if(D(d))t.set(null);else{if(!Array.isArray(d))return S.warn("Unrecognized full array edit value",i,d),!0;t.set(d)}return c?!1:(o(u,r),s(e),!0)}for(var f,p,h,m,g,y,v,x=Object.keys(n).map(Number).sort(E),d=t.get(),b=d||[],_=a(r,i).get(),w=[],T=-1,M=b.length,k=0;k<x.length;k++)if(h=n[p=x[k]],m=Object.keys(h),g=h[""],y=C(g),p<0||p>b.length-(y?0:1))S.warn("index out of range",i,p);else if(void 0!==g)1<m.length&&S.warn("Insertion & removal are incompatible with edits to the same index.",i,p),D(g)?w.push(p):y?(b.splice(p,0,g="add"===g?{}:g),_&&_.splice(p,0,{})):S.warn("Unrecognized full object edit value",i,p,g),-1===T&&(T=p);else for(f=0;f<m.length;f++)a(b[p],m[f],i+"["+p+"].").set(h[m[f]]);for(k=w.length-1;0<=k;k--)b.splice(w[k],1),_&&_.splice(w[k],1);if(b.length?d||t.set(b):t.set(null),c)return!1;if(o(u,r),l!==A){if(-1===T)v=x;else{for(M=Math.max(b.length,M),v=[],k=0;k<x.length&&!(T<=(p=x[k]));k++)v.push(p);for(k=T;k<M;k++)v.push(k)}for(k=0;k<v.length;k++)l(e,v[k])}else s(e);return!0}},{"../lib/is_plain_object":231,"../lib/loggers":234,"../lib/noop":239,"../lib/search":249,"../registry":313,"./container_array_match":257}],262:[function(e,t,M){"use strict";var h=e("@plotly/d3"),f=e("fast-isnumeric"),u=e("has-hover"),j=e("../lib"),H=j.nestedProperty,m=e("../lib/events"),_=e("../lib/queue"),B=e("../registry"),q=e("./plot_schema"),F=e("../plots/plots"),U=e("../plots/cartesian/axes"),g=e("../components/drawing"),n=e("../components/color"),y=e("../plots/cartesian/graph_interact").initInteractions,v=e("../constants/xmlns_namespaces"),r=e("../plots/cartesian/select").clearSelect,d=e("./plot_config").dfltConfig,Y=e("./manage_arrays"),V=e("./helpers"),k=e("./subroutines"),G=e("./edit_types"),W=e("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function A(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function p(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){j.error(e)}}function x(e,t){p(e,n.combine(t,"white"))}function S(e,t){var n;e._context||(e._context=j.extendDeep({},d),n=h.select("base"),e._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:"");var r,a,i=e._context;if(t){for(r=Object.keys(t),c=0;c<r.length;c++)"editable"!==(a=r[c])&&"edits"!==a&&a in i&&("setBackground"===a&&"opaque"===t[a]?i[a]=x:i[a]=t[a]);t.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var o=t.editable;if(void 0!==o)for(i.editable=o,r=Object.keys(i.edits),c=0;c<r.length;c++)i.edits[r[c]]=o;if(t.edits)for(r=Object.keys(t.edits),c=0;c<r.length;c++)(a=r[c])in i.edits&&(i.edits[a]=t.edits[a]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),"hover"!==i.displayModeBar||u||(i.displayModeBar=!0),"transparent"!==i.setBackground&&"function"==typeof i.setBackground||(i.setBackground=p),i._hasZeroHeight=i._hasZeroHeight||0===e.clientHeight,i._hasZeroWidth=i._hasZeroWidth||0===e.clientWidth;var e=i.scrollZoom,s=i._scrollZoom={};if(!0===e)s.cartesian=1,s.gl3d=1,s.geo=1,s.mapbox=1;else if("string"==typeof e)for(var l=e.split("+"),c=0;c<l.length;c++)s[l[c]]=1;else!1!==e&&(s.gl3d=1,s.geo=1,s.mapbox=1)}function b(e,t){for(var n,r=t+1,a=[],i=0;i<e.length;i++)(n=e[i])<0?a.push(r+n):a.push(n);return a}function T(e,t,n){for(var r,a=0;a<t.length;a++){if((r=t[a])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=e.data.length||r<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<t.indexOf(r,a+1)||0<=r&&-1<t.indexOf(-e.data.length+r)||r<0&&-1<t.indexOf(e.data.length+r))throw new Error("each index in "+n+" must be unique.")}}function E(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(T(e,t=!Array.isArray(t)?[t]:t,"currentIndices"),void 0!==(n=void 0!==n&&!Array.isArray(n)?[n]:n)&&T(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function i(e,t,n,r,a){!function(e,t,n,r){var a,i=j.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!j.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(a in T(e,n,"indices"),t){if(!Array.isArray(t[a])||t[a].length!==n.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in r)||!Array.isArray(r[a])||r[a].length!==t[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var i=function(e,t,n,r){var a,i,o,s,l,c=j.isPlainObject(r),u=[];for(l in n=b(n=!Array.isArray(n)?[n]:n,e.data.length-1),t)for(var d=0;d<n.length;d++){if(s=e.data[n[d]],a=(i=H(s,l)).get(),o=t[l][d],!j.isArrayOrTypedArray(o))throw new Error("attribute: "+l+" index: "+d+" must be an array");if(!j.isArrayOrTypedArray(a))throw new Error("cannot extend missing or non-array attribute: "+l);if(a.constructor!==o.constructor)throw new Error("cannot extend array with an array of a different type: "+l);s=c?r[l][d]:r,f(s)||(s=-1),u.push({prop:i,target:a,insert:o,maxp:Math.floor(s)})}return u}(e,t,n,r),o={},s={},l=0;l<i.length;l++){var c=i[l].prop,u=i[l].maxp,u=a(i[l].target,i[l].insert,u);c.set(u[0]),Array.isArray(o[c.astr])||(o[c.astr]=[]),o[c.astr].push(u[1]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function s(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function o(e,t,n,r){e=j.getGraphDiv(e),V.clearPromiseQueue(e);var a={};if("string"==typeof t)a[t]=n;else{if(!j.isPlainObject(t))return j.warn("Restyle fail.",t,n,r),Promise.reject();a=j.extendFlat({},t),void 0===r&&(r=n)}Object.keys(a).length&&(e.changed=!0);var r=V.coerceTraceIndices(e,r),i=l(e,a,r),a=i.flags;a.calc&&(e.calcdata=void 0),a.clearAxisTypes&&V.clearAxisTypes(e,r,{});r=[];a.fullReplot?r.push(M._doPlot):(r.push(F.previousPromises),F.supplyDefaults(e),a.markerSize&&(F.doCalcdata(e),D(r)),a.style&&r.push(k.doTraceStyle),a.colorbars&&r.push(k.doColorBars),r.push(A)),r.push(F.rehover,F.redrag),_.add(e,o,[e,i.undoit,i.traces],o,[e,i.redoit,i.traces]);r=j.syncOrAsync(r,e);return(r=!r||!r.then?Promise.resolve():r).then(function(){return e.emit("plotly_restyle",i.eventData),e})}function Z(e){return void 0===e?null:e}function $(i,e){return e?function(e,t,n){var r=H(e,t),a=r.set;return r.set=function(e){L((n||"")+t,r.get(),e,i),a(e)},r}:H}function L(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var a=Array.isArray(t)?t:[],i=Array.isArray(n)?n:[],o=Math.max(a.length,i.length),s=0;s<o;s++)L(e+"["+s+"]",a[s],i[s],r);else if(j.isPlainObject(t)||j.isPlainObject(n)){var l,c=j.isPlainObject(t)?t:{},u=j.isPlainObject(n)?n:{};for(l in j.extendFlat({},c,u))L(e+"."+l,c[l],u[l],r)}else void 0===r[e]&&(r[e]=Z(t))}function l(a,i,o){var e,s=a._fullLayout,r=a._fullData,l=a.data,c=s._guiEditing,u=$(s._preGUI,c),t=j.extendDeepAll({},i);X(i);var n,d,f=G.traceFlags(),p={},h={};function m(){return o.map(function(){})}function g(e){e=U.id2name(e);-1===n.indexOf(e)&&n.push(e)}function y(e){return"LAYOUT"+e+".autorange"}function v(e){return"LAYOUT"+e+".range"}function x(e){for(var t=e;t<r.length;t++)if(r[t]._input===l[e])return r[t]}function b(e,t,n){var r;Array.isArray(e)?e.forEach(function(e){b(e,t,n)}):e in i||V.hasParent(i,e)||(r="LAYOUT"===e.substr(0,6)?u(a.layout,e.replace("LAYOUT","")):(r=o[n],$(s._tracePreGUI[x(r)._fullInput.uid],c)(l[r],e)),e in h||(h[e]=m()),void 0===h[e][n]&&(h[e][n]=Z(r.get())),void 0!==t&&r.set(t))}for(d in i){if(V.hasParent(i,d))throw new Error("cannot set "+d+" and a parent attribute simultaneously");var _,w,T=i[d];if("autobinx"!==d&&"autobiny"!==d||(d=d.charAt(d.length-1)+"bins",T=Array.isArray(T)?T.map(function(n){return function(e,t){return!1===e?r[o[t]][n]:null}}(d)):!1===T?o.map(function(t){return function(e){return r[e][t]}}(d)):null),p[d]=T,"LAYOUT"!==d.substr(0,6)){for(h[d]=m(),e=0;e<o.length;e++){var M,k,A=l[o[e]],S=x(o[e]),E=(M=$(s._tracePreGUI[S._fullInput.uid],c)(A,d)).get();if(void 0!==(k=Array.isArray(T)?T[e%T.length]:T)){var L,C,D=M.parts[M.parts.length-1],O=d.substr(0,d.length-D.length-1),P=O?O+".":"",O=O?H(S,O).get():S,I=q.getTraceValObject(S,M.parts);if(I&&I.impliedEdits&&null!==k)for(var R in I.impliedEdits)b(j.relativeAttr(d,R),I.impliedEdits[R],e);else"thicknessmode"!==D&&"lenmode"!==D||E===k||"fraction"!==k&&"pixels"!==k||!O?"type"!==d||"pie"===k==("pie"===E)&&"funnelarea"===k==("funnelarea"===E)||(L="x",C="y","bar"!==k&&"bar"!==E||"h"!==A.orientation||(L="y",C="x"),j.swapAttrs(A,["?","?src"],"labels",L),j.swapAttrs(A,["d?","?0"],"label",L),j.swapAttrs(A,["?","?src"],"values",C),"pie"===E||"funnelarea"===E?(H(A,"marker.color").set(H(A,"marker.colors").get()),s._pielayer.selectAll("g.trace").remove()):B.traceIs(A,"cartesian")&&H(A,"marker.colors").set(H(A,"marker.color").get())):(L=s._size,C="top"===(C=O.orient)||"bottom"===C,"thicknessmode"===D?(D=C?L.h:L.w,b(P+"thickness",O.thickness*("fraction"===k?1/D:D),e)):(N=C?L.w:L.h,b(P+"len",O.len*("fraction"===k?1/N:N),e)));h[d][e]=Z(E);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(d)){if("orientation"===d){M.set(k);var N=A.x&&!A.y?"h":"v";if((M.get()||N)===S.orientation)continue}else"orientationaxes"===d&&(A.orientation={v:"h",h:"v"}[S.orientation]);V.swapXYData(A),f.calc=f.clearAxisTypes=!0}else-1!==F.dataArrayContainers.indexOf(M.parts[0])?(V.manageArrayContainers(M,k,h),f.calc=!0):(!I||I.arrayOk&&!B.traceIs(S,"regl")&&(j.isArrayOrTypedArray(k)||j.isArrayOrTypedArray(E))?f.calc=!0:G.update(f,I),M.set(k))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(d)&&U.swap(a,o),"orientationaxes"===d&&("x"===(w=(_=H(a.layout,"hovermode")).get())?_.set("y"):"y"===w?_.set("x"):"x unified"===w?_.set("y unified"):"y unified"===w&&_.set("x unified")),-1!==["orientation","type"].indexOf(d)){for(n=[],e=0;e<o.length;e++){var z=l[o[e]];B.traceIs(z,"cartesian")&&(g(z.xaxis||"x"),g(z.yaxis||"y"))}b(n.map(y),!0,0),b(n.map(v),[0,1],0)}}else M=u(a.layout,d.replace("LAYOUT","")),h[d]=[Z(M.get())],M.set(Array.isArray(T)?T[0]:T),f.calc=!0}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:h,redoit:p,traces:o,eventData:j.extendDeepNoArrays([],[t,o])}}function X(n){for(var e,t,r=j.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,i=Object.keys(n),o=0;o<i.length;o++)e=i[o],t=n[e],"title"!==e&&!r.test(e)&&!a.test(e)||"string"!=typeof t&&"number"!=typeof t?-1<e.indexOf("titlefont")?s(e,e.replace("titlefont","title.font")):-1<e.indexOf("titleposition")?s(e,e.replace("titleposition","title.position")):-1<e.indexOf("titleside")?s(e,e.replace("titleside","title.side")):-1<e.indexOf("titleoffset")&&s(e,e.replace("titleoffset","title.offset")):s(e,e.replace("title","title.text"));function s(e,t){n[t]=n[e],delete n[e]}}function C(e,t,n){e=j.getGraphDiv(e),V.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!j.isPlainObject(t))return j.warn("Relayout fail.",t,n),Promise.reject();r=j.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var a=O(e,r),n=a.flags;n.calc&&(e.calcdata=void 0);t=[F.previousPromises];n.layoutReplot?t.push(k.layoutReplot):Object.keys(r).length&&(c(e,n,a)||F.supplyDefaults(e),n.legend&&t.push(k.doLegend),n.layoutstyle&&t.push(k.layoutStyles),n.axrange&&D(t,a.rangesAltered),n.ticks&&t.push(k.doTicksRelayout),n.modebar&&t.push(k.doModeBar),n.camera&&t.push(k.doCamera),n.colorbars&&t.push(k.doColorBars),t.push(A)),t.push(F.rehover,F.redrag),_.add(e,C,[e,a.undoit],C,[e,a.redoit]);t=j.syncOrAsync(t,e);return(t=!t||!t.then?Promise.resolve(e):t).then(function(){return e.emit("plotly_relayout",a.eventData),e})}function c(e,t,n){var r=e._fullLayout;if(t.axrange){for(var a in t)if("axrange"!==a&&t[a])return;for(var i in n.rangesAltered){var o=U.id2name(i),s=e.layout[o],l=r[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)c!==i&&((c=r[U.id2name(c)]).autorange=l.autorange,c.range=l.range.slice(),c._input.range=l.range.slice())}return 1}}function D(e,o){var t=o?function(e){var t,n=[],r=!0;for(t in o){var a=U.getFromId(e,t);if(n.push(t),-1!==(a.ticklabelposition||"").indexOf("inside")&&a._anchorAxis&&n.push(a._anchorAxis._id),a._matchGroup)for(var i in a._matchGroup)o[i]||n.push(i);a.automargin&&(r=!1)}return U.draw(e,n,{skipTitle:r})}:function(e){return U.draw(e,"redraw")};e.push(r,k.doAutoRangeAndConstraints,t,k.drawData,k.finalDraw)}var J=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,K=/^[xyz]axis[0-9]*\.autorange$/,Q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function O(e,r){var t,a=e.layout,n=e._fullLayout,i=n._guiEditing,o=$(n._preGUI,i),s=Object.keys(r),l=U.list(e),i=j.extendDeepAll({},r),c={};for(X(r),s=Object.keys(r),I=0;I<s.length;I++)if(0===s[I].indexOf("allaxes")){for(t=0;t<l.length;t++){var u=l[t]._id.substr(1),u=-1!==u.indexOf("scene")?u+".":"",u=s[I].replace("allaxes",u+l[t]._name);r[u]||(r[u]=r[s[I]])}delete r[s[I]]}var d=G.layoutFlags(),f={},p={};function h(e,t){var n;Array.isArray(e)?e.forEach(function(e){h(e,t)}):e in r||V.hasParent(r,e)||(n=o(a,e),e in p||(p[e]=Z(n.get())),void 0!==t&&n.set(t))}var m,g,y={};function v(e){e=U.name2id(e.split(".")[0]);return y[e]=1,e}for(m in r){if(V.hasParent(r,m))throw new Error("cannot set "+m+" and a parent attribute simultaneously");for(var x=o(a,m),b=r[m],_=x.parts.length-1;0<_&&"string"!=typeof x.parts[_];)_--;var w=x.parts[_],T=x.parts[_-1]+"."+w,M=x.parts.slice(0,_).join("."),k=H(e.layout,M).get(),A=H(n,M).get(),S=x.get();if(void 0!==b){f[m]=b,p[m]="reverse"===w?b:Z(S);var E,L,C,D=q.getLayoutValObject(n,x.parts);if(D&&D.impliedEdits&&null!==b)for(var O in D.impliedEdits)h(j.relativeAttr(m,O),D.impliedEdits[O]);-1!==["width","height"].indexOf(m)?b?(h("autosize",null),h(L="height"===m?"width":"height",n[L])):n[m]=e._initialAutoSize[m]:"autosize"===m?(h("width",b?null:n.width),h("height",b?null:n.height)):T.match(J)?(v(T),H(n,M+"._inputRange").set(null)):T.match(K)?(v(T),H(n,M+"._inputRange").set(null),(C=H(n,M).get())._inputDomain&&(C._input.domain=C._inputDomain.slice())):T.match(Q)&&H(n,M+"._inputDomain").set(null),"type"===w?(E=k,L="linear"===A.type&&"log"===b,C="log"===A.type&&"linear"===b,L||C?(E&&E.range?A.autorange?L&&(E.range=E.range[1]>E.range[0]?[1,2]:[2,1]):(T=E.range[0],C=E.range[1],L?(T<=0&&C<=0&&h(M+".autorange",!0),T<=0?T=C/1e6:C<=0&&(C=T/1e6),h(M+".range[0]",Math.log(T)/Math.LN10),h(M+".range[1]",Math.log(C)/Math.LN10)):(h(M+".range[0]",Math.pow(10,T)),h(M+".range[1]",Math.pow(10,C)))):h(M+".autorange",!0),Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[x.parts[0]]&&"radialaxis"===x.parts[1]&&delete n[x.parts[0]]._subplot.viewInitial["radialaxis.range"],B.getComponentMethod("annotations","convertCoords")(e,A,b,h),B.getComponentMethod("images","convertCoords")(e,A,b,h)):(h(M+".autorange",!0),h(M+".range",null)),H(n,M+"._inputRange").set(null)):w.match(W)&&(N=H(n,m).get(),(R=(b||{}).type)&&"-"!==R||(R="linear"),B.getComponentMethod("annotations","convertCoords")(e,N,R,h),B.getComponentMethod("images","convertCoords")(e,N,R,h));var P,I,R,N=Y.containerArrayMatch(m);N?(P=N.array,I=N.index,R=N.property,N=D||{editType:"calc"},""!==I&&""===R&&(Y.isAddVal(b)?p[m]=null:Y.isRemoveVal(b)?p[m]=(H(a,P).get()||[])[I]:j.warn("unrecognized full object value",r)),G.update(d,N),c[P]||(c[P]={}),(c[P][I]||(c[P][I]={}))[R]=b,delete r[m]):"reverse"===w?(k.range?k.range.reverse():(h(M+".autorange",!0),k.range=[1,0]),A.autorange?d.calc=!0:d.plot=!0):(n._has("scatter-like")&&n._has("regl")&&"dragmode"===m&&("lasso"===b||"select"===b)&&"lasso"!==S&&"select"!==S||n._has("gl2d")?d.plot=!0:D?G.update(d,D):d.calc=!0,x.set(b))}}for(P in c)Y.applyContainerArrayChanges(e,o(a,P),c[P],d,o)||(d.plot=!0);for(g in y){var z=(E=U.getFromId(e,g))&&E._constraintGroup;if(z)for(var F in d.calc=!0,z)y[F]||(U.getFromId(e,F)._constraintShrinkable=!0)}return(ee(e)||r.height||r.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,rangesAltered:y,undoit:p,redoit:f,eventData:i}}function ee(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&F.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function P(e,t,n,r){e=j.getGraphDiv(e),V.clearPromiseQueue(e),j.isPlainObject(t)||(t={}),j.isPlainObject(n)||(n={}),Object.keys(t).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var a=V.coerceTraceIndices(e,r),i=l(e,j.extendFlat({},t),a),r=i.flags,o=O(e,j.extendFlat({},n)),t=o.flags;(r.calc||t.calc)&&(e.calcdata=void 0),r.clearAxisTypes&&V.clearAxisTypes(e,a,n);n=[];t.layoutReplot?n.push(k.layoutReplot):r.fullReplot?n.push(M._doPlot):(n.push(F.previousPromises),c(e,t,o)||F.supplyDefaults(e),r.style&&n.push(k.doTraceStyle),(r.colorbars||t.colorbars)&&n.push(k.doColorBars),t.legend&&n.push(k.doLegend),t.layoutstyle&&n.push(k.layoutStyles),t.axrange&&D(n,o.rangesAltered),t.ticks&&n.push(k.doTicksRelayout),t.modebar&&n.push(k.doModeBar),t.camera&&n.push(k.doCamera),n.push(A)),n.push(F.rehover,F.redrag),_.add(e,P,[e,i.undoit,o.undoit,i.traces],P,[e,i.redoit,o.redoit,i.traces]);n=j.syncOrAsync(n,e);return(n=!n||!n.then?Promise.resolve(e):n).then(function(){return e.emit("plotly_update",{data:i.eventData,layout:o.eventData}),e})}function a(n){return function(e){e._fullLayout._guiEditing=!0;var t=n.apply(null,arguments);return e._fullLayout._guiEditing=!1,t}}var I=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],R=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function N(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=e.match(r.pattern);if(a)return{head:a[1],attr:r.attr}}}function z(e,t){var n=H(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();1<r.length;)if(r.pop(),void 0!==(n=H(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function te(e,t){var n=j.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&j.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function ne(e,t,n,r){var a,i,o,s,l,c,u,d,f=r._preGUI,p=[],h={};for(a in f){if(l=N(a,I)){if(i=l.attr||l.head+".uirevision",(s=(o=H(r,i).get())&&z(i,t))&&s===o&&(null===(c=f[a])&&(c=void 0),te(d=(u=H(t,a)).get(),c))){void 0===d&&"autorange"===a.substr(a.length-9)&&p.push(a.substr(0,a.length-10)),u.set(Z(H(r,a).get()));continue}}else j.warn("unrecognized GUI edit: "+a);delete f[a],"range["===a.substr(a.length-8,6)&&(h[a.substr(0,a.length-9)]=1)}for(var m=0;m<p.length;m++){var g=p[m];!h[g]||(g=H(t,g).get())&&delete g.autorange}var y,v=r._tracePreGUI;for(y in v){var x=v[y],b=null;for(a in x){if(!b){var _=function(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}(y,n);if(_<0){delete v[y];break}var w,_=function(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}(y,e,(w=n[_]._fullInput).index);if(_<0){delete v[y];break}b=e[_]}if(l=N(a,R)){if(l.attr?s=(o=H(r,l.attr).get())&&z(l.attr,t):(o=w.uirevision,void 0===(s=b.uirevision)&&(s=t.uirevision)),s&&s===o&&(null===(c=x[a])&&(c=void 0),te(d=(u=H(b,a)).get(),c))){u.set(Z(H(w,a).get()));continue}}else j.warn("unrecognized GUI edit: "+a+" in trace uid "+y);delete x[a]}}}function re(e,t,n,r){var a,i,o=r.getValObject,s=r.flags,l=r.immutable,c=r.inArray,u=r.arrayIndex;function d(){var e=a.editType;c&&-1!==e.indexOf("arraydraw")?j.pushUnique(s.arrays[c],u):(G.update(s,a),"none"!==e&&s.nChanges++,r.transition&&a.anim&&s.nChangesAnim++,(J.test(g)||K.test(g))&&(s.rangesAltered[n[0]]=1),Q.test(g)&&H(t,"_inputDomain").set(null),"datarevision"===i&&(s.newDataRevision=1))}function f(e){return"data_array"===e.valType||e.arrayOk}for(i in e){if(s.calc&&!r.transition)return;var p=e[i],h=t[i],m=n.concat(i),g=m.join(".");if("_"!==i.charAt(0)&&"function"!=typeof p&&p!==h){if(("tick0"===i||"dtick"===i)&&"geo"!==n[0]){var y=t.tickmode;if("auto"===y||"array"===y||!y)continue}if(("range"!==i||!t.autorange)&&("zmin"!==i&&"zmax"!==i||"contourcarpet"!==t.type)&&(a=o(m))&&(!a._compareAsJSON||JSON.stringify(p)!==JSON.stringify(h))){var v,x=a.valType,b=f(a),_=Array.isArray(p),w=Array.isArray(h);if(_&&w){var T="_input_"+i,y=e[T],T=t[T];if(Array.isArray(y)&&y===T)continue}if(void 0===h)b&&_?s.calc=!0:d();else if(a._isLinkedToArray){var M=[],T=!1;c||(s.arrays[i]=M);var k=Math.min(p.length,h.length),A=Math.max(p.length,h.length);if(k!==A){if("arraydraw"!==a.editType){d();continue}T=!0}for(v=0;v<k;v++)re(p[v],h[v],m.concat(v),j.extendFlat({inArray:i,arrayIndex:v},r));if(T)for(v=k;v<A;v++)M.push(v)}else!x&&j.isPlainObject(p)?re(p,h,m,r):b?_&&w?(l&&(s.calc=!0),(l||r.newDataRevision)&&d()):_!==w?s.calc=!0:d():_&&w&&p.length===h.length&&String(p)===String(h)||d()}}}for(i in t)if(!(i in e||"_"===i.charAt(0)||"function"==typeof t[i])){if(f(a=o(n.concat(i)))&&Array.isArray(t[i]))return void(s.calc=!0);d()}}function ae(e){var t=e._fullLayout,n=e.getBoundingClientRect();j.equalDomRects(n,t._lastBBox)||(e=t._invTransform=j.inverseTransformMatrix(j.getFullTransformMatrix(e)),t._invScaleX=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]+e[0][2]*e[0][2]),t._invScaleY=Math.sqrt(e[1][0]*e[1][0]+e[1][1]*e[1][1]+e[1][2]*e[1][2]),t._lastBBox=n)}M.animate=function(h,m,g){if(h=j.getGraphDiv(h),!j.isPlotDiv(h))throw new Error("This element is not a Plotly plot: "+h+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var y=h._transitionData;y._frameQueue||(y._frameQueue=[]);var v=(g=F.supplyAnimationDefaults(g)).transition,x=g.frame;return void 0===y._frameWaitingCnt&&(y._frameWaitingCnt=0),new Promise(function(i,o){function e(e){if(0!==e.length){for(var t=0;t<e.length;t++){var n="byname"===e[t].type?F.computeFrame(h,e[t].name):e[t].data,r=(a=t,Array.isArray(x)?a>=x.length?x[0]:x[a]:x),a=(a=t,Array.isArray(v)?a>=v.length?v[0]:v[a]:v);a.duration=Math.min(a.duration,r.duration);a={frame:n,name:e[t].name,frameOpts:r,transitionOpts:a};t===e.length-1&&(a.onComplete=function(e,t){var n=0;return function(){if(e&&++n===t)return e()}}(i,2),a.onInterrupt=o),y._frameQueue.push(a)}"immediate"===g.mode&&(y._lastFrameAt=-1/0),y._animationRaf||function(){h.emit("plotly_animating"),y._lastFrameAt=-1/0,y._timeToNext=0,y._runningTransitions=0,y._currentFrame=null;var e=function(){y._animationRaf=window.requestAnimationFrame(e),Date.now()-y._lastFrameAt>y._timeToNext&&function(){y._currentFrame&&y._currentFrame.onComplete&&y._currentFrame.onComplete();var e=y._currentFrame=y._frameQueue.shift();{var t;e?(t=e.name?e.name.toString():null,h._fullLayout._currentFrame=t,y._lastFrameAt=Date.now(),y._timeToNext=e.frameOpts.duration,F.transition(h,e.frame.data,e.frame.layout,V.coerceTraceIndices(h,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),h.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})):(h.emit("plotly_animated"),window.cancelAnimationFrame(y._animationRaf),y._animationRaf=null)}}()};e()}()}}var t,n=0;function r(e){return Array.isArray(v)?n>=v.length?e.transitionOpts=v[n]:e.transitionOpts=v[0]:e.transitionOpts=v,n++,e}var a=[],s=null==m,l=Array.isArray(m);if(!s&&!l&&j.isPlainObject(m))a.push({type:"object",data:r(j.extendFlat({},m))});else if(s||-1!==["string","number"].indexOf(typeof m))for(p=0;p<y._frames.length;p++)(t=y._frames[p])&&(!s&&String(t.group)!==String(m)||a.push({type:"byname",name:String(t.name),data:r({name:t.name})}));else if(l)for(p=0;p<m.length;p++){var c=m[p];-1!==["number","string"].indexOf(typeof c)?(c=String(c),a.push({type:"byname",name:c,data:r({name:c})})):j.isPlainObject(c)&&a.push({type:"object",data:r(j.extendFlat({},c))})}for(p=0;p<a.length;p++)if("byname"===(t=a[p]).type&&!y._frameHash[t.data.name])return j.warn('animate failure: frame not found: "'+t.data.name+'"'),void o();-1!==["next","immediate"].indexOf(g.mode)&&function(){if(0!==y._frameQueue.length){for(;y._frameQueue.length;){var e=y._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}h.emit("plotly_animationinterrupted",[])}}(),"reverse"===g.direction&&a.reverse();var u=h._fullLayout._currentFrame;if(u&&g.fromcurrent){var d=-1;for(p=0;p<a.length;p++)if("byname"===(t=a[p]).type&&t.name===u){d=p;break}if(0<d&&d<a.length-1){for(var f=[],p=0;p<a.length;p++)t=a[p],("byname"!==a[p].type||d<p)&&f.push(t);a=f}}0<a.length?e(a):(h.emit("plotly_animated"),i())})},M.addFrames=function(e,t,n){if(e=j.getGraphDiv(e),null==t)return Promise.resolve();if(!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,a,i,o=e._transitionData._frames,s=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);for(var l,c,u,d,f=o.length+2*t.length,p=[],h={},m=t.length-1;0<=m;m--)j.isPlainObject(t[m])&&(c=(s[l=t[m].name]||h[l]||{}).name,u=t[m].name,d=s[c]||h[c],c&&u&&"number"==typeof u&&d&&w<5&&(w++,j.warn('addFrames: overwriting frame "'+(s[c]||h[c]).name+'" with a frame whose name of type "number" also equates to "'+c+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&j.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[l]={name:l},p.push({frame:F.supplyFrameDefaults(t[m]),index:n&&void 0!==n[m]&&null!==n[m]?n[m]:f+m}));p.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var g=[],y=[],v=o.length;for(m=p.length-1;0<=m;m--){if("number"==typeof(r=p[m].frame).name&&j.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;s[r.name="frame "+e._transitionData._counter++];);if(s[r.name]){for(a=0;a<o.length&&(o[a]||{}).name!==r.name;a++);g.push({type:"replace",index:a,value:r}),y.unshift({type:"replace",index:a,value:o[a]})}else i=Math.max(0,Math.min(p[m].index,v)),g.push({type:"insert",index:i,value:r}),y.unshift({type:"delete",index:i}),v++}var x=F.modifyFrames,b=F.modifyFrames;return _&&_.add(e,x,[e,y],b,[e,g]),F.modifyFrames(e,g)},M.deleteFrames=function(e,t){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,a=e._transitionData._frames,i=[],o=[];if(!t)for(t=[],n=0;n<a.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;0<=n;n--)r=t[n],i.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:a[r]});var s=F.modifyFrames,l=F.modifyFrames;return _&&_.add(e,s,[e,o],l,[e,i]),F.modifyFrames(e,i)},M.addTraces=function e(t,n,r){t=j.getGraphDiv(t);var a,i,o=[],s=M.deleteTraces,l=e,c=[t,o],u=[t,n];for(function(e,t,n){var r,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(a=t[r])||Array.isArray(a)||null===a)throw new Error("all values in traces array must be non-array objects");if(void 0!==(n=void 0===n||Array.isArray(n)?n:[n])&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,n,r),n=(n=Array.isArray(n)?n:[n]).map(function(e){return j.extendFlat({},e)}),V.cleanData(n),a=0;a<n.length;a++)t.data.push(n[a]);for(a=0;a<n.length;a++)o.push(-n.length+a);if(void 0===r)return i=M.redraw(t),_.add(t,s,c,l,u),i;Array.isArray(r)||(r=[r]);try{E(t,o,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return _.startSequence(t),_.add(t,s,c,l,u),i=M.moveTraces(t,o,r),_.stopSequence(t),i},M.deleteTraces=function e(t,n){t=j.getGraphDiv(t);var r,a,i=[],o=M.addTraces,s=e,l=[t,i,n],c=[t,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(T(t,n=Array.isArray(n)?n:[n],"indices"),(n=b(n,t.data.length-1)).sort(j.sorterDes),r=0;r<n.length;r+=1)a=t.data.splice(n[r],1)[0],i.push(a);var u=M.redraw(t);return _.add(t,o,l,s,c),u},M.extendTraces=function e(t,n,r,a){n=i(t=j.getGraphDiv(t),n,r,a,function(e,t,n){var r,a,i,o;return j.isTypedArray(e)?n<0?(r=new e.constructor(0),a=s(e,t),r=n<0?(o=a,r):(o=r,a)):(o=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),r.set(e)):n<t.length?(i=t.length-n,o.set(t.subarray(i)),r.set(e),r.set(t.subarray(0,i),e.length)):(a=n-t.length,i=e.length-a,o.set(e.subarray(i)),o.set(t,a),r.set(e.subarray(0,i)))):(o=e.concat(t),r=0<=n&&n<o.length?o.splice(0,o.length-n):[]),[o,r]}),a=M.redraw(t),n=[t,n.update,r,n.maxPoints];return _.add(t,M.prependTraces,n,e,arguments),a},M.moveTraces=function e(t,n,r){var a,i=[],o=[],s=e,l=e,c=[t=j.getGraphDiv(t),r,n],u=[t,n,r];if(E(t,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],a=0;a<n.length;a++)r.push(-n.length+a);for(r=Array.isArray(r)?r:[r],n=b(n,t.data.length-1),r=b(r,t.data.length-1),a=0;a<t.data.length;a++)-1===n.indexOf(a)&&i.push(t.data[a]);for(a=0;a<n.length;a++)o.push({newIndex:r[a],trace:t.data[n[a]]});for(o.sort(function(e,t){return e.newIndex-t.newIndex}),a=0;a<o.length;a+=1)i.splice(o[a].newIndex,0,o[a].trace);t.data=i;var d=M.redraw(t);return _.add(t,s,c,l,u),d},M.prependTraces=function e(t,n,r,a){n=i(t=j.getGraphDiv(t),n,r,a,function(e,t,n){var r,a,i,o;return j.isTypedArray(e)?n<=0?(r=new e.constructor(0),a=s(t,e),a=n<0?(o=a,r):(o=r,a)):(o=new e.constructor(n),a=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),a.set(e)):n<t.length?(i=t.length-n,o.set(t.subarray(0,i)),a.set(t.subarray(i)),a.set(e,i)):(i=n-t.length,o.set(t),o.set(e.subarray(0,i),t.length),a.set(e.subarray(i)))):(o=t.concat(e),a=0<=n&&n<o.length?o.splice(n,o.length):[]),[o,a]}),a=M.redraw(t),n=[t,n.update,r,n.maxPoints];return _.add(t,M.extendTraces,n,e,arguments),a},M.newPlot=function(e,t,n,r){return e=j.getGraphDiv(e),F.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),F.purge(e),M._doPlot(e,t,n,r)},M._doPlot=function(a,e,t,n){var r,i;if(a=j.getGraphDiv(a),m.init(a),j.isPlainObject(e)&&(e=(i=e).data,t=i.layout,n=i.config,r=i.frames),!1===m.triggerHandler(a,"plotly_beforeplot",[e,t,n]))return Promise.reject();e||t||j.isPlotDiv(a)||j.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",a),S(a,n),t=t||{},h.select(a).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(a._promises)||(a._promises=[]);var o=0===(a.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(V.cleanData(e),o?a.data=e:a.data.push.apply(a.data,e),a.empty=!1),a.layout&&!o||(a.layout=V.cleanLayout(t)),F.supplyDefaults(a);var s=a._fullLayout,e=s._has("cartesian");s._replotting=!0,(o||s._shouldCreateBgLayer)&&(function(e){var t=h.select(e),n=e._fullLayout;{var r;n._calcInverseTransform=ae,n._calcInverseTransform(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),n._uid||(r={},h.selectAll("defs").each(function(){this.id&&(r[this.id.split("-")[1]]=1)}),n._uid=j.randstr(r))}n._paperdiv.selectAll(".main-svg").attr(v.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);t=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=t.append("g").classed("imagelayer",!0),n._shapeLowerLayer=t.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);t=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=t.append("g").classed("imagelayer",!0),n._shapeUpperLayer=t.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(a),s._shouldCreateBgLayer&&delete s._shouldCreateBgLayer),g.initGradients(a),g.initPatterns(a),o&&U.saveShowSpikeInitial(a);var l=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;l&&F.doCalcdata(a);for(var c=0;c<a.calcdata.length;c++)a.calcdata[c][0].trace=a._fullData[c];a._context.responsive?a._responsiveChartHandler||(a._responsiveChartHandler=function(){j.isHidden(a)||F.resize(a)},window.addEventListener("resize",a._responsiveChartHandler)):j.clearResponsive(a);var u=j.extendFlat({},s._size),d=0;function f(){if(F.clearAutoMarginIds(a),k.drawMarginPushers(a),U.allowAutoMargin(a),s._has("pie"))for(var e=a._fullData,t=0;t<e.length;t++){var n=e[t];"pie"===n.type&&n.automargin&&F.allowAutoMargin(a,"pie."+n.uid+".automargin")}return F.doAutoMargin(a),F.previousPromises(a)}function p(){a._transitioning||(k.doAutoRangeAndConstraints(a),o&&U.saveRangeInitial(a),B.getComponentMethod("rangeslider","calcAutorange")(a))}return t=[F.previousPromises,function(){if(r)return M.addFrames(a,r)},function e(){for(var t=s._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(a);if(!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),s._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),s._glcanvas){s._glcanvas.attr("width",s.width).attr("height",s.height);var r=s._glcanvas.data()[0].regl;if(r&&(Math.floor(s.width)!==r._gl.drawingBufferWidth||Math.floor(s.height)!==r._gl.drawingBufferHeight)){if(r="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!d)return j.log(r+" Clearing graph and plotting again."),F.cleanPlot([],{},a._fullData,s),F.supplyDefaults(a),s=a._fullLayout,F.doCalcdata(a),d++,e();j.error(r)}}return"h"===s.modebar.orientation?s._modebardiv.style("height",null).style("width","100%"):s._modebardiv.style("width",null).style("height",s.height+"px"),F.previousPromises(a)},f,function(){if(F.didMarginChange(u,s._size))return j.syncOrAsync([f,k.layoutStyles],a)}],e&&t.push(function(){if(l)return j.syncOrAsync([B.getComponentMethod("shapes","calcAutorange"),B.getComponentMethod("annotations","calcAutorange"),p],a);p()}),t.push(k.layoutStyles),e&&t.push(function(){return U.draw(a,o?"":"redraw")},function(e){e._fullLayout._insideTickLabelsAutorange&&C(e,e._fullLayout._insideTickLabelsAutorange).then(function(){e._fullLayout._insideTickLabelsAutorange=void 0})}),t.push(k.drawData,k.finalDraw,y,F.addLinks,F.rehover,F.redrag,F.doAutoMargin,function(e){e._fullLayout._insideTickLabelsAutorange&&o&&U.saveRangeInitial(e,!0)},F.previousPromises),(t=!(t=j.syncOrAsync(t,a))||!t.then?Promise.resolve():t).then(function(){return A(a),a})},M.purge=function(e){var t=(e=j.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return F.cleanPlot([],{},n,t),F.purge(e),m.purge(e),t._container&&t._container.remove(),delete e._context,e},M.react=function(e,t,n,r){var a;e=j.getGraphDiv(e),V.clearPromiseQueue(e);var i=e._fullData,o=e._fullLayout;if(j.isPlotDiv(e)&&i&&o){j.isPlainObject(t)&&(t=(d=t).data,n=d.layout,r=d.config,a=d.frames);var s=!1;r&&(p=j.extendDeep({},e._context),e._context=void 0,S(e,r),s=function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var a=t[r],i=n[r];if(a!==i)if(j.isPlainObject(a)&&j.isPlainObject(i)){if(e(a,i))return!0}else{if(!Array.isArray(a)||!Array.isArray(i))return!0;if(a.length!==i.length)return!0;for(var o=0;o<a.length;o++)if(a[o]!==i[o]){if(!j.isPlainObject(a[o])||!j.isPlainObject(i[o]))return!0;if(e(a[o],i[o]))return!0}}}}(p,e._context)),e.data=t||[],V.cleanData(e.data),e.layout=n||{},V.cleanLayout(e.layout),ne(e.data,e.layout,i,o),F.supplyDefaults(e,{skipUpdateCalc:!0});var l=e._fullData,c=e._fullLayout,u=void 0===c.datarevision,d=c.transition,f=function(e,t,n,r,a){var i=G.layoutFlags();i.arrays={},i.rangesAltered={},i.nChanges=0,i.nChangesAnim=0,re(t,n,[],{getValObject:function(e){return q.getLayoutValObject(n,e)},flags:i,immutable:r,transition:a,gd:e}),(i.plot||i.calc)&&(i.layoutReplot=!0);a&&i.nChanges&&i.nChangesAnim&&(i.anim=i.nChanges===i.nChangesAnim?"all":"some");return i}(e,o,c,u,d),p=f.newDataRevision,h=function(e,t,n,r,a,i){var o=t.length===n.length;if(!a&&!o)return{fullReplot:!0,calc:!0};var s,l,c=G.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(e){return e=q.getTraceValObject(l,e),!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:c,immutable:r,transition:a,newDataRevision:i,gd:e},d={};for(s=0;s<t.length;s++)n[s]&&(l=n[s]._fullInput,F.hasMakesDataTransform(l)&&(l=n[s]),d[l.uid]||(d[l.uid]=1,re(t[s]._fullInput,l,[],u)));(c.calc||c.plot)&&(c.fullReplot=!0);a&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(e,i,l,u,d,p);if(ee(e)&&(f.layoutReplot=!0),h.calc||f.calc){e.calcdata=void 0;for(var m=Object.getOwnPropertyNames(c),g=0;g<m.length;g++){var y=m[g],v=y.substring(0,5);"xaxis"!==v&&"yaxis"!==v||(y=c[y]._emptyCategories)&&y()}}else F.supplyDefaultsUpdateCalc(e.calcdata,l);var l=[];if(a&&(e._transitionData={},F.createTransitionData(e),l.push(function(){return M.addFrames(e,a)})),c.transition&&!s&&(h.anim||f.anim))f.ticks&&l.push(k.doTicksRelayout),F.doCalcdata(e),k.doAutoRangeAndConstraints(e),l.push(function(){return F.transitionFromReact(e,h,f,o)});else if(h.fullReplot||f.layoutReplot||s)e._fullLayout._skipDefaults=!0,l.push(M._doPlot);else{for(var x in f.arrays){var b=f.arrays[x];if(b.length){var _=B.getComponentMethod(x,"drawOne");if(_!==j.noop)for(var w=0;w<b.length;w++)_(e,b[w]);else{var T=B.getComponentMethod(x,"draw");if(T===j.noop)throw new Error("cannot draw components: "+x);T(e)}}}l.push(F.previousPromises),h.style&&l.push(k.doTraceStyle),(h.colorbars||f.colorbars)&&l.push(k.doColorBars),f.legend&&l.push(k.doLegend),f.layoutstyle&&l.push(k.layoutStyles),f.axrange&&D(l),f.ticks&&l.push(k.doTicksRelayout),f.modebar&&l.push(k.doModeBar),f.camera&&l.push(k.doCamera),l.push(A)}l.push(F.rehover,F.redrag),(l=j.syncOrAsync(l,e))&&l.then||(l=Promise.resolve(e))}else l=M.newPlot(e,t,n,r);return l.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},M.redraw=function(e){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return V.cleanData(e.data),V.cleanLayout(e.layout),e.calcdata=void 0,M._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})},M.relayout=C,M.restyle=o,M.setPlotConfig=function(e){return j.extendFlat(d,e)},M.update=P,M._guiRelayout=a(C),M._guiRestyle=a(o),M._guiUpdate=a(P),M._storeDirectGUIEdit=function(e,t,n){for(var r in n)L(r,H(e,r).get(),n[r],t)}},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"../lib/events":223,"../lib/queue":245,"../plots/cartesian/axes":276,"../plots/cartesian/constants":283,"../plots/cartesian/graph_interact":286,"../plots/cartesian/select":296,"../plots/plots":311,"../registry":313,"./edit_types":258,"./helpers":259,"./manage_arrays":261,"./plot_config":263,"./plot_schema":264,"./subroutines":266,"@plotly/d3":11,"fast-isnumeric":15,"has-hover":46}],263:[function(e,t,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},a={};!function e(t,n){for(var r in t){var a=t[r];a.valType?n[r]=a.dflt:(n[r]||(n[r]={}),e(a,n[r]))}}(r,a),t.exports={configAttributes:r,dfltConfig:a}},{}],264:[function(e,t,d){"use strict";var u=e("../registry"),n=e("../lib"),f=e("../plots/attributes"),p=e("../plots/layout_attributes"),r=e("../plots/frame_attributes"),i=e("../plots/animation_attributes"),o=e("./plot_config").configAttributes,s=e("./edit_types"),l=n.extendDeepAll,h=n.isPlainObject,m=n.isArrayOrTypedArray,c=n.nestedProperty,g=n.valObjectMeta,a="_isSubplotObj",y="_isLinkedToArray",n="_deprecated",v=[a,y,"_arrayAttrRegexps",n];function x(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(b(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!h(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!b(t[++n]))return!1}else if("info_array"===e.valType){var a=t[++n];if(!b(a))return!1;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;r=t[n];if(!b(r))return!1;e=i[a][r]}else e=i[a]}else e=i}}return e}function b(e){return e===Math.round(e)&&0<=e}function _(e){return d.crawl(e,function(e,t,n){d.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(n[t+"src"]={valType:"string",editType:"none"}):h(e)&&(e.role="object")}),d.crawl(e,function(e,t,n){var r;!e||(r=e[y])&&(delete e[y],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}),function e(t){for(var n in t)if(h(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e),e}function w(e,t,n){n=c(e,n),t=l({},t.layoutAttributes);t[a]=!0,n.set(t)}function T(e,t,n){n=c(e,n);n.set(l(n.get()||{},t))}d.IS_SUBPLOT_OBJ=a,d.IS_LINKED_TO_ARRAY=y,d.DEPRECATED=n,d.UNDERSCORE_ATTRS=v,d.get=function(){var t={};u.allTypes.forEach(function(e){t[e]=function(e){var t,n;t=u.modules[e]._module,n=t.basePlotModule;var r={type:null},i=l({},f),o=l({},t.attributes);d.crawl(o,function(e,t,n,r,a){c(i,a).set(void 0),void 0===e&&c(o,a).set(void 0)}),l(r,i),u.traceIs(e,"noOpacity")&&delete r.opacity;u.traceIs(e,"showLegend")||(delete r.showlegend,delete r.legendgroup);u.traceIs(e,"noHover")&&(delete r.hoverinfo,delete r.hoverlabel);t.selectPoints||delete r.selectedpoints;l(r,o),n.attributes&&l(r,n.attributes);r.type=e;e={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:_(r)};t.layoutAttributes&&(l(r={},t.layoutAttributes),e.layoutAttributes=_(r));t.animatable||d.crawl(e,function(e){d.isValObject(e)&&"anim"in e&&delete e.anim});return e}(e)});var e,a={};return Object.keys(u.transformsRegistry).forEach(function(e){var n,r;a[e]=(n=e,e=u.transformsRegistry[n],r=l({},e.attributes),Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];t.schema&&t.schema.transforms&&t.schema.transforms[n]&&Object.keys(t.schema.transforms[n]).forEach(function(e){T(r,t.schema.transforms[n][e],e)})}),{attributes:_(r)})}),{defs:{valObjects:g,metaKeys:v.concat(["description","role","editType","impliedEdits"]),editType:{traces:s.traces,layout:s.layout},impliedEdits:{}},traces:t,layout:function(){var e,t,n={};for(e in l(n,p),u.subplotsRegistry)if((t=u.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var r=0;r<t.attr.length;r++)w(n,t,t.attr[r]);else{var a="subplot"===t.attr?t.name:t.attr;w(n,t,a)}for(e in u.componentsRegistry){var i=(t=u.componentsRegistry[e]).schema;if(i&&(i.subplots||i.layout)){i=i.subplots;if(i&&i.xaxis&&!i.yaxis)for(var o in i.xaxis)delete n.yaxis[o]}else"colorscale"===t.name?l(n,t.layoutAttributes):t.layoutAttributes&&T(n,t.layoutAttributes,t.name)}return{layoutAttributes:_(n)}}(),transforms:a,frames:(_(e={frames:l({},r)}),e.frames),animation:_(i),config:_(o)}},d.crawl=function(r,a,e,i){var o=e||0;i=i||"",Object.keys(r).forEach(function(e){var t,n=r[e];-1===v.indexOf(e)&&(a(n,e,r,o,t=(i?i+".":"")+e),d.isValObject(n)||h(n)&&"impliedEdits"!==e&&d.crawl(n,a,o+1,t))})},d.isValObject=function(e){return e&&void 0!==e.valType},d.findArrayAttributes=function(e){var a,s,l=[],c=[],u=[];function t(e,t,n,r){c=c.slice(0,r).concat([t]),u=u.slice(0,r).concat([e&&e._isLinkedToArray]),!e||"data_array"!==e.valType&&!0!==e.arrayOk||"colorbar"===c[r-1]&&("ticktext"===t||"tickvals"===t)||function e(t,n,r){var a=t[c[n]];var i=r+c[n];if(n===c.length-1)m(a)&&l.push(s+i);else if(u[n]){if(Array.isArray(a))for(var o=0;o<a.length;o++)h(a[o])&&e(a[o],n+1,i+"["+o+"].")}else h(a)&&e(a,n+1,i+".")}(a,0,"")}a=e,s="",d.crawl(f,t),e._module&&e._module.attributes&&d.crawl(e._module.attributes,t);var n=e.transforms;if(n)for(var r=0;r<n.length;r++){var i=n[r],o=i._module;o&&(s="transforms["+r+"].",a=i,d.crawl(o.attributes,t))}return l},d.getTraceValObject=function(e,t){var n,r=t[0],a=1;if("transforms"===r){if(1===t.length)return f.transforms;var i=e.transforms;if(!Array.isArray(i)||!i.length)return!1;var o=t[1];if(!b(o)||o>=i.length)return!1;i=(n=(u.transformsRegistry[i[o].type]||{}).attributes)&&n[t[2]],a=3}else{o=e._module;if(!(o=o||(u.modules[e.type||f.type.dflt]||{})._module))return!1;(i=(n=o.attributes)&&n[r])||(o=o.basePlotModule)&&o.attributes&&(i=o.attributes[r]),i=i||f[r]}return x(i,t,a)},d.getLayoutValObject=function(e,t){return x(function(e,t){var n,r,a,i,o,s=e._basePlotModules;if(s){for(n=0;n<s.length;n++){if((a=s[n]).attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!o&&a.layoutAttributes&&(o=a.layoutAttributes)}var l=a.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(o)return o}var c=e._modules;if(c)for(n=0;n<c.length;n++)if((i=c[n].layoutAttributes)&&t in i)return i[t];for(r in u.componentsRegistry){if("colorscale"===(a=u.componentsRegistry[r]).name&&0===t.indexOf("coloraxis"))return a.layoutAttributes[t];if(!a.schema&&t===a.name)return a.layoutAttributes}return t in p&&p[t]}(e,t[0]),t,1)}},{"../lib":230,"../plots/animation_attributes":270,"../plots/attributes":272,"../plots/frame_attributes":306,"../plots/layout_attributes":309,"../registry":313,"./edit_types":258,"./plot_config":263}],265:[function(e,t,n){"use strict";var d=e("../lib"),o=e("../plots/attributes"),f="templateitemname",r={name:{valType:"string",editType:"none"}};function c(e){return e&&"string"==typeof e}function a(e){var t=e.length-1;return"s"!==e.charAt(t)&&d.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}r[f]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=r.name,t[f]=r[f],t},n.traceTemplater=function(n){var r,a,i={};for(r in n)a=n[r],Array.isArray(a)&&a.length&&(i[r]=0);return{newTrace:function(e){var t={type:r=d.coerce(e,{},o,"type"),_template:null};return r in i&&(a=n[r],e=i[r]%a.length,i[r]++,t._template=a[e]),t}}},n.newContainer=function(e,t,n){var r=e._template,n=r&&(r[t]||n&&r[n]);return d.isPlainObject(n)||(n=null),e[t]={_template:n}},n.arrayTemplater=function(e,t,i){var e=e._template,o=e&&e[a(t)],s=e&&e[t];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(e){var t={name:e.name,_input:e},n=t[f]=e[f];if(!c(n))return t._template=o,t;for(var r=0;r<s.length;r++){var a=s[r];if(a.name===n)return l[n]=1,t._template=a,t}return t[i]=e[i]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<s.length;t++){var n,r=s[t],a=r.name;c(a)&&!l[a]&&((n={_template:r,name:a,_input:{_templateitemname:a}})[f]=r[f],e.push(n),l[a]=1)}return e}}},n.arrayDefaultKey=a,n.arrayEditor=function(a,e,t){var n,r=(d.nestedProperty(a,e).get()||[]).length,i=t._index,o=r<=i&&(t._input||{})._templateitemname,s=e+"["+(i=o?r:i)+"]";function l(){n={},o&&(n[s]={},n[s][f]=o)}function c(e,t){o?d.nestedProperty(n[s],e).set(t):n[s+"."+e]=t}function u(){var e=n;return l(),e}return l(),{modifyBase:function(e,t){n[e]=t},modifyItem:c,getUpdateObj:u,applyUpdate:function(e,t){e&&c(e,t);var n,r=u();for(n in r)d.nestedProperty(a,n).set(r[n])}}}},{"../lib":230,"../plots/attributes":272}],266:[function(e,t,z){"use strict";var F=e("@plotly/d3"),u=e("../registry"),j=e("../plots/plots"),H=e("../lib"),d=e("../lib/clear_gl_canvases"),B=e("../components/color"),q=e("../components/drawing"),a=e("../components/titles"),U=e("../components/modebar"),Y=e("../plots/cartesian/axes"),V=e("../constants/alignment"),n=e("../plots/cartesian/constraints"),l=n.enforce,c=n.clean,f=e("../plots/cartesian/autorange").doAutoRange;function r(e){var t,r,n=e._fullLayout,a=n._size,i=a.p,o=Y.list(e,"",!0);if(n._paperdiv.style({width:e._context.responsive&&n.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":n.width+"px",height:e._context.responsive&&n.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":n.height+"px"}).selectAll(".main-svg").call(q.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor),z.drawMainTitle(e),U.manage(e),!n._has("cartesian"))return j.previousPromises(e);function s(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-i-r:t._offset+t._length+i+r:a.t+a.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+i+r:t._offset-i-r:a.l+a.w*(e.position||0)+r%1}for(t=0;t<o.length;t++){var l,c=(l=o[t])._anchorAxis;l._linepositions={},l._lw=q.crispRound(e,l.linewidth,1),l._mainLinePosition=s(l,c,l.side),l._mainMirrorPosition=l.mirror&&c?s(l,c,V.OPPOSITE_SIDE[l.side]):null}var u,d,f,p,h=[],m=[],g=[],y=1===B.opacity(n.paper_bgcolor)&&1===B.opacity(n.plot_bgcolor)&&n.paper_bgcolor===n.plot_bgcolor;for(r in n._plots)(p=n._plots[r]).mainplot?(p.bg&&p.bg.remove(),p.bg=void 0):(u=p.xaxis.domain,d=p.yaxis.domain,f=p.plotgroup,!function(e,t,n){for(var r=0;r<n.length;r++){var a=n[r][0],i=n[r][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&(i[0]<t[1]&&i[1]>t[0]))return 1}}(u,d,g)?(f.select("rect.bg").remove(),g.push([u,d]),y||(h.push(r),m.push(r))):(d=f.node(),f=p.bg=H.ensureSingle(f,"rect","bg"),d.insertBefore(f.node(),d.childNodes[0]),m.push(r)));var v,x,b,_,w,T,M=n._bgLayer.selectAll(".bg").data(h);for(M.enter().append("rect").classed("bg",!0),M.exit().remove(),M.each(function(e){n._plots[e].bg=F.select(this)}),t=0;t<m.length;t++)p=n._plots[m[t]],A=p.xaxis,S=p.yaxis,p.bg&&void 0!==A._offset&&void 0!==S._offset&&p.bg.call(q.setRect,A._offset-i,S._offset-i,A._length+2*i,S._length+2*i).call(B.fill,n.plot_bgcolor).style("stroke-width",0);if(!n._hasOnlyLargeSploms)for(r in n._plots){var k,A=(p=n._plots[r]).xaxis,S=p.yaxis,E=p.clipId="clip"+n._uid+r+"plot",L=H.ensureSingleById(n._clips,"clipPath",E,function(e){e.classed("plotclip",!0).append("rect")});p.clipRect=L.select("rect").attr({width:A._length,height:S._length}),q.setTranslate(p.plot,A._offset,S._offset),E=p._hasClipOnAxisFalse?(k=null,E):(k=E,null),q.setClipUrl(p.plot,k,e),p.layerClipId=E}function C(e){return"M"+v+","+e+"H"+x}function D(e){return"M"+A._offset+","+e+"h"+A._length}function O(e){return"M"+e+","+_+"V"+b}function P(e){return"M"+e+","+S._offset+"v"+S._length}function I(e,t,n){if(!e.showline||r!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);n=t(e._mainLinePosition);return e.mirror&&(n+=t(e._mainMirrorPosition)),n}for(r in n._plots){p=n._plots[r],A=p.xaxis,S=p.yaxis;var R="M0,0";G(A,r)&&(w=W(A,"left",S,o),v=A._offset-(w?i+w:0),T=W(A,"right",S,o),x=A._offset+A._length+(T?i+T:0),N=s(A,S,"bottom"),w=s(A,S,"top"),!(T=!A._anchorAxis||r!==A._mainSubplot)||"allticks"!==A.mirror&&"all"!==A.mirror||(A._linepositions[r]=[N,w]),R=I(A,C,D),T&&A.showline&&("all"===A.mirror||"allticks"===A.mirror)&&(R+=C(N)+C(w)),p.xlines.style("stroke-width",A._lw+"px").call(B.stroke,A.showline?A.linecolor:"rgba(0,0,0,0)")),p.xlines.attr("d",R);var N="M0,0";G(S,r)&&(w=W(S,"bottom",A,o),b=S._offset+S._length+(w?i:0),R=W(S,"top",A,o),_=S._offset-(R?i:0),w=s(S,A,"left"),R=s(S,A,"right"),!(T=!S._anchorAxis||r!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[r]=[w,R]),N=I(S,O,P),T&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(N+=O(w)+O(R)),p.ylines.style("stroke-width",S._lw+"px").call(B.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),p.ylines.attr("d",N)}return Y.makeClipPaths(e),j.previousPromises(e)}function G(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function o(e,t,n){if(n.showline&&n._lw){if("all"===n.mirror||"allticks"===n.mirror)return 1;var r=n._anchorAxis;if(r){var a=V.FROM_BL[t];return n.side===t?r.domain[a]===e.domain[a]:n.mirror&&r.domain[1-a]===e.domain[1-a]}}}function W(e,t,n,r){if(o(e,t,n))return n._lw;for(var a=0;a<r.length;a++){var i=r[a];if(i._mainAxis===n._mainAxis&&o(e,t,i))return i._lw}return 0}z.layoutStyles=function(e){return H.syncOrAsync([j.doAutoMargin,r],e)},z.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var t=e.title,e="middle";H.isRightAnchor(t)?e="end":H.isLeftAnchor(t)&&(e="start");return e}(t),r=function(e){var t=e.title,e="0em";H.isTopAnchor(t)?e=V.CAP_SHIFT+"em":H.isMiddleAnchor(t)&&(e=V.MID_SHIFT+"em");return e}(t);a.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:function(e,t){var n=e.title,r=e._size,a=0;"start"===t?a=n.pad.l:"end"===t&&(a=-n.pad.r);return"paper"!==n.xref?e.width*n.x+a:r.l+r.w*n.x+a}(t,n),y:function(e,t){var n=e.title,r=e._size,a=0;"0em"!==t&&t?t===V.CAP_SHIFT+"em"&&(a=n.pad.t):a=-n.pad.b;return"auto"===n.y?r.t/2:"paper"!==n.yref?e.height-e.height*n.y+a:r.t+r.h-r.h*n.y+a}(t,r),"text-anchor":n,dy:r}})},z.doTraceStyle=function(e){for(var t=e.calcdata,n=[],r=0;r<t.length;r++){var a=t[r],i=a[0]||{},o=i.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(a,o);s=s.editStyle;s&&n.push({fn:s,cd0:i})}if(n.length){for(r=0;r<n.length;r++){var c=n[r];c.fn(e,c.cd0)}d(e),z.redrawReglTraces(e)}return j.style(e),u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doColorBars=function(e){return u.getComponentMethod("colorbar","draw")(e),j.previousPromises(e)},z.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,u.call("_doPlot",e,"",t)},z.doLegend=function(e){return u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doTicksRelayout=function(e){return Y.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(u.subplotsRegistry.splom.updateGrid(e),d(e),z.redrawReglTraces(e)),z.drawMainTitle(e),j.previousPromises(e)},z.doModeBar=function(e){var t=e._fullLayout;U.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return j.previousPromises(e)},z.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var a=t[n[r]];a._scene.setViewport(a)}},z.drawData=function(e){var t=e._fullLayout;d(e);for(var n=t._basePlotModules,r=0;r<n.length;r++)n[r].plot(e);return z.redrawReglTraces(e),j.style(e),u.getComponentMethod("shapes","draw")(e),u.getComponentMethod("annotations","draw")(e),u.getComponentMethod("images","draw")(e),t._replotting=!1,j.previousPromises(e)},z.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,a=e._fullData,i=[],o=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<a.length;n++){var s=a[n];!0===s.visible&&0!==s._length&&("splom"===s.type?t._splomScenes[s.uid].draw():"scattergl"===s.type?H.pushUnique(i,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&H.pushUnique(o,s.subplot))}for(n=0;n<i.length;n++)(r=t._plots[i[n]])._scene&&r._scene.draw();for(n=0;n<o.length;n++)(r=t[o[n]]._subplot)._scene&&r._scene.draw()}},z.doAutoRangeAndConstraints=function(e){for(var t,n=Y.list(e,"",!0),r={},a=0;a<n.length;a++)if(!r[(t=n[a])._id]){r[t._id]=1,c(e,t),f(e,t);var i=t._matchGroup;if(i)for(var o in i){var s=Y.getFromId(e,o);f(e,s,t.range),r[o]=1}}l(e)},z.finalDraw=function(e){u.getComponentMethod("rangeslider","draw")(e),u.getComponentMethod("rangeselector","draw")(e)},z.drawMarginPushers=function(e){u.getComponentMethod("legend","draw")(e),u.getComponentMethod("rangeselector","draw")(e),u.getComponentMethod("sliders","draw")(e),u.getComponentMethod("updatemenus","draw")(e),u.getComponentMethod("colorbar","draw")(e)}},{"../components/color":100,"../components/drawing":122,"../components/modebar":163,"../components/titles":198,"../constants/alignment":205,"../lib":230,"../lib/clear_gl_canvases":218,"../plots/cartesian/autorange":275,"../plots/cartesian/axes":276,"../plots/cartesian/constraints":284,"../plots/plots":311,"../registry":313,"@plotly/d3":11}],267:[function(e,t,n){"use strict";var v=e("../lib"),x=v.isPlainObject,d=e("./plot_schema"),h=e("../plots/plots"),f=e("../plots/attributes"),b=e("./plot_template"),m=e("./plot_config").dfltConfig;function p(s,e){s=v.extendDeep({},s);var t,l,n=Object.keys(s).sort();function r(e,t,n){if(x(t)&&x(e))p(e,t);else if(Array.isArray(t)&&Array.isArray(e)){var r=b.arrayTemplater({_template:s},n);for(l=0;l<t.length;l++){var a=t[l],i=r.newItem(a)._template;i&&p(i,a)}var o=r.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(t=0;t<n.length;t++){var a=n[t],i=s[a];if(a in e?r(i,e[a],a):e[a]=i,_(a)===a)for(var o in e){var c=_(o);o===c||c!==a||o in s||r(i,e[o],a)}}}function _(e){return e.replace(/[0-9]+$/,"")}function w(e,t,n,r,a){var i,o=a&&n(a);for(i in e){var s,l=e[i],c=T(e,i,r),u=T(e,i,a),d=n(u);if(d||(s=_(i))!==i&&(d=n(u=T(e,s,a))),(!o||o!==d)&&!(!d||d._noTemplating||"data_array"===d.valType||d.arrayOk&&Array.isArray(l)))if(!d.valType&&x(l))w(l,t,n,c,u);else if(d._isLinkedToArray&&Array.isArray(l))for(var f=!1,p=0,h={},m=0;m<l.length;m++){var g,y=l[m];x(y)&&((g=y.name)?h[g]||(w(y,t,n,T(l,p,c),T(l,p,u)),p++,h[g]=1):f||(g=T(e,b.arrayDefaultKey(i),r),w(y,t,n,y=T(l,p,c),T(l,p,u)),y=v.nestedProperty(t,y),v.nestedProperty(t,g).set(y.get()),y.set(null),f=!0))}else v.nestedProperty(t,c).set(l)}}function T(e,t,n){t=n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t;return t}function g(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=v.isPlainObject(e)?e:v.getGraphDiv(e),e=v.extendDeep({_context:m},{data:e.data,layout:e.layout}),h.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var r={data:{},layout:{}};t.forEach(function(e){var t={};w(e,t,function(e,t){return d.getTraceValObject(e,v.nestedProperty({},t).parts)}.bind(null,e));e=v.coerce(e,{},f,"type");(r.data[e]||(r.data[e]=[])).push(t)}),w(n,r.layout,function(e,t){return d.getLayoutValObject(e,v.nestedProperty({},t).parts)}.bind(null,n)),delete r.layout.template;t=n.template;if(x(t)){var a,i,o,s,l,c,n=t.layout;x(n)&&p(n,r.layout);var u=t.data;if(x(u)){for(i in r.data)if(o=u[i],Array.isArray(o)){for(c=(l=r.data[i]).length,s=o.length,a=0;a<c;a++)p(o[a%s],l[a]);for(a=c;a<s;a++)l.push(v.extendDeep({},o[a]))}for(i in u)i in r.data||(r.data[i]=v.extendDeep([],u[i]))}}return r},n.validateTemplate=function(e,t){var n=v.extendDeep({},{_context:m,data:e.data,layout:e.layout}),r=n.layout||{},e=(t=!x(t)?r.template||{}:t).layout,a=t.data,i=[];n.layout=r,n.layout.template=t,h.supplyDefaults(n);var t=n._fullLayout,o=n._fullData,s={};if(x(e)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&x(t[r])){for(var a=_(r),i=[],o=0;o<n.length;o++)i.push(T(t,r,n[o])),a!==r&&i.push(T(t,a,n[o]));for(o=0;o<i.length;o++)s[i[o]]=1;e(t[r],i)}}(t,["layout"]),function e(t,n){for(var r in t){var a;-1===r.indexOf("defaults")&&x(t[r])&&(a=T(t,r,n),s[a]?e(t[r],a):i.push({code:"unused",path:a}))}}(e,"layout")):i.push({code:"layout"}),x(a)){for(var l={},c=0;c<o.length;c++){var u,d=o[c];l[u=d.type]=(l[u]||0)+1,d._fullInput._template||i.push({code:"missing",index:d._fullInput.index,traceType:u})}for(u in a){var f=a[u].length,p=l[u]||0;p<f?i.push({code:"unused",traceType:u,templateCount:f,dataCount:p}):f<p&&i.push({code:"reused",traceType:u,templateCount:f,dataCount:p})}}else i.push({code:"data"});if(!function e(t,n){for(var r in t){var a;"_"!==r.charAt(0)&&(a=t[r],r=T(t,r,n),x(a)?(Array.isArray(t)&&!1===a._template&&a.templateitemname&&i.push({code:"missing",path:r,templateitemname:a.templateitemname}),e(a,r)):Array.isArray(a)&&function(e){for(var t=0;t<e.length;t++)if(x(e[t]))return 1}(a)&&e(a,r))}}({data:o,layout:t},""),i.length)return i.map(g)}},{"../lib":230,"../plots/attributes":272,"../plots/plots":311,"./plot_config":263,"./plot_schema":264,"./plot_template":265}],268:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),_=e("./plot_api"),w=e("../plots/plots"),T=e("../lib"),M=e("../snapshot/helpers"),k=e("../snapshot/tosvg"),A=e("../snapshot/svgtoimg"),S=e("../version").version,E={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};t.exports=function(e,n){var r,t,a,i;function o(e){return!(e in n)||T.validate(n[e],E[e])}if(n=n||{},i=T.isPlainObject(e)?(r=e.data||[],t=e.layout||{},a=e.config||{},{}):(e=T.getGraphDiv(e),r=T.extendDeep([],e.data),t=T.extendDeep({},e.layout),a=e._context,e._fullLayout||{}),!o("width")&&null!==n.width||!o("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+T.join2(E.format.values,", "," or ")+".");var s={};function l(e,t){return T.coerce(n,s,E,e,t)}var c=l("format"),u=l("width"),d=l("height"),f=l("scale"),e=l("setBackground"),p=l("imageDataOnly"),h=document.createElement("div");h.style.position="absolute",h.style.left="-5000px",document.body.appendChild(h);var m=T.extendFlat({},t);u?m.width=u:null===n.width&&b(i.width)&&(m.width=i.width),d?m.height=d:null===n.height&&b(i.height)&&(m.height=i.height);var g=T.extendFlat({},a,{_exportedPlot:!0,staticPlot:!0,setBackground:e}),y=M.getRedrawFunc(h);function v(){return new Promise(function(e){setTimeout(e,M.getDelay(h._fullLayout))})}function x(){return new Promise(function(e,t){var n=k(h,c,f),r=h._fullLayout.width,a=h._fullLayout.height;function i(){_.purge(h),document.body.removeChild(h)}if("full-json"===c){var o=w.graphJson(h,!1,"keepdata","object",!0,!0);return o.version=S,o=JSON.stringify(o),i(),e(p?o:M.encodeJSON(o))}if(i(),"svg"===c)return e(p?n:M.encodeSVG(n));o=document.createElement("canvas");o.id=T.randstr(),A({format:c,width:r,height:a,scale:f,canvas:o,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(t,n){_.newPlot(h,r,m,g).then(y).then(v).then(x).then(function(e){t((e=e,p?e.replace(M.IMAGE_URL_PREFIX,""):e))}).catch(function(e){n(e)})})}},{"../lib":230,"../plots/plots":311,"../snapshot/helpers":317,"../snapshot/svgtoimg":319,"../snapshot/tosvg":321,"../version":386,"./plot_api":262,"fast-isnumeric":15}],269:[function(e,t,n){"use strict";var D=e("../lib"),b=e("../plots/plots"),_=e("./plot_schema"),w=e("./plot_config").dfltConfig,O=D.isPlainObject,P=Array.isArray,I=D.isArrayOrTypedArray;function R(e,t,n,r,a,i){i=i||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=i.slice();c.push(l);var u=e[l],d=t[l],f=function(e,t){if(t in e)return e[t];t=z(t);return e[t.keyMinusId]}(n,l),p=(f||{}).valType,h="info_array"===p,m="colorscale"===p,g=(f||{}).items;if(function(e,t){var n=z(t),r=n.keyMinusId,n=n.id;if(r in e&&e[r]._isSubplotObj&&n)return!0;return t in e}(n,l))if(O(u)&&O(d)&&"any"!==p)R(u,d,f,r,a,c);else if(h&&P(u)){u.length>d.length&&r.push(N("unused",a,c.concat(d.length)));var y,v,x,b,_=d.length,w=Array.isArray(g);if(w&&(_=Math.min(_,g.length)),2===f.dimensions)for(y=0;y<_;y++)if(P(u[y])){u[y].length>d[y].length&&r.push(N("unused",a,c.concat(y,d[y].length)));for(var T=d[y].length,M=0;M<(w?Math.min(T,g[y].length):T);M++)v=w?g[y][M]:g,x=u[y][M],b=d[y][M],D.validate(x,v)?b!==x&&b!==+x&&r.push(N("dynamic",a,c.concat(y,M),x,b)):r.push(N("value",a,c.concat(y,M),x))}else r.push(N("array",a,c.concat(y),u[y]));else for(y=0;y<_;y++)v=w?g[y]:g,x=u[y],b=d[y],D.validate(x,v)?b!==x&&b!==+x&&r.push(N("dynamic",a,c.concat(y),x,b)):r.push(N("value",a,c.concat(y),x))}else if(f.items&&!h&&P(u)){for(var k=g[Object.keys(g)[0]],A=[],S=0;S<d.length;S++){var E,L,C=d[S]._index||S;(L=c.slice()).push(C),O(u[C])&&O(d[S])&&(A.push(C),E=u[C],C=d[S],O(E)&&!1!==E.visible&&!1===C.visible?r.push(N("invisible",a,L)):R(E,C,k,r,a,L))}for(S=0;S<u.length;S++)(L=c.slice()).push(S),O(u[S])?-1===A.indexOf(S)&&r.push(N("unused",a,L)):r.push(N("object",a,L,u[S]))}else!O(u)&&O(d)?r.push(N("object",a,c,u)):I(u)||!I(d)||h||m?l in t?D.validate(u,f)?"enumerated"===f.valType&&(f.coerceNumber&&u!==+d||u!==d)&&r.push(N("dynamic",a,c,u,d)):r.push(N("value",a,c,u)):r.push(N("unused",a,c,u)):r.push(N("array",a,c,u));else r.push(N("schema",a,c))}}return r}t.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,r,a=_.get(),i=[],o={_context:D.extendFlat({},w)};P(e)?(o.data=D.extendDeep([],e),n=e):(o.data=[],n=[],i.push(N("array","data"))),O(t)?(o.layout=D.extendDeep({},t),r=t):(o.layout={},r={},1<arguments.length&&i.push(N("object","layout"))),b.supplyDefaults(o);for(var s=o._fullData,l=n.length,c=0;c<l;c++){var u=n[c],d=["data",c];if(O(u)){var f=s[c],p=f.type,h=a.traces[p].attributes;!(h.type={valType:"enumerated",values:[p]})===f.visible&&!1!==u.visible&&i.push(N("invisible",d)),R(u,f,h,i,d);var m=u.transforms,g=f.transforms;if(m){P(m)||i.push(N("array",d,["transforms"])),d.push("transforms");for(var y=0;y<m.length;y++){var v=["transforms",y],x=m[y].type;O(m[y])?((x=a.transforms[x]?a.transforms[x].attributes:{}).type={valType:"enumerated",values:Object.keys(a.transforms)},R(m[y],g[y],x,i,d,v)):i.push(N("object",d,v))}}}else i.push(N("object",d))}return R(r,o._fullLayout,function(e,t){for(var n=e.layout.layoutAttributes,r=0;r<t.length;r++){var a=t[r],i=e.traces[a.type],o=i.layoutAttributes;o&&(a.subplot?D.extendFlat(n[i.attributes.subplot.dflt],o):D.extendFlat(n,o))}return n}(a,s),i,"layout"),0===i.length?void 0:i};var l={object:function(e,t){t="layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":a(e)+"key "+t;return t+" must be linked to an object container"},array:function(e,t){t="data"===e?"The data argument":a(e)+"key "+t;return t+" must be linked to an array container"},schema:function(e,t){return a(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){n=O(n)?"container":"key";return a(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[a(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?a(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[a(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function a(e){return P(e)?"In data trace "+e[1]+", ":"In "+e+", "}function N(e,t,n,r,a){var i;n=n||"";var o=P(t)?(i=t[0],t[1]):(i=t,null),s=function(e){if(!P(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),a=l[e](t,s,r,a);return D.log(a),{code:e,container:i,trace:o,path:n,astr:s,msg:a}}var r=D.counterRegex("([a-z]+)");function z(e){e=e.match(r);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":230,"../plots/plots":311,"./plot_config":263,"./plot_schema":264}],270:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],271:[function(e,t,n){"use strict";var h=e("../lib"),m=e("../plot_api/plot_template");t.exports=function(e,t,n){var r,a=n.name,i=n.inclusionAttr||"visible",o=t[a],s=h.isArrayOrTypedArray(e[a])?e[a]:[],l=t[a]=[],c=m.arrayTemplater(t,a,i);for(p=0;p<s.length;p++){var u=s[p];h.isPlainObject(u)?r=c.newItem(u):(r=c.newItem({}))[i]=!1,r._index=p,!1!==r[i]&&n.handleItemDefaults(u,r,t,n),l.push(r)}var d=c.defaultItems();for(p=0;p<d.length;p++)(r=d[p])._index=l.length,n.handleItemDefaults({},r,t,n,{}),l.push(r);if(h.isArrayOrTypedArray(o))for(var f=Math.min(o.length,l.length),p=0;p<f;p++)h.relinkPrivateKeys(l[p],o[p]);return l}},{"../lib":230,"../plot_api/plot_template":265}],272:[function(e,t,n){"use strict";var r=e("./font_attributes"),e=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:r({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":131,"./font_attributes":305}],273:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),r=e("../../lib"),b=r.dateTime2ms,_=r.incrementMonth,w=e("../../constants/numerical").ONEAVGMONTH;t.exports=function(e,t,n,r){if("date"!==t.type)return r;var a=e[n+"periodalignment"];if(!a)return r;var i,o=e[n+"period"];if(x(o)){if((o=+o)<=0)return r}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(0<s&&Math.round(s)===s))return r;i=s}for(var l=t.calendar,c="start"===a,u="end"===a,n=e[n+"period0"],d=b(n,l)||0,f=[],p=r.length,h=0;h<p;h++){var m,g,y,v=r[h];if(i){for(m=Math.round((v-d)/(i*w)),y=_(d,i*m,l);v<y;)y=_(y,-i,l);for(;y<=v;)y=_(y,i,l);g=_(y,-i,l)}else{for(y=d+(m=Math.round((v-d)/o))*o;v<y;)y-=o;for(;y<=v;)y+=o;g=y-o}f[h]=c?g:u?y:(g+y)/2}return f}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],274:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],275:[function(e,t,n){"use strict";var p=e("@plotly/d3"),S=e("fast-isnumeric"),k=e("../../lib"),E=e("../../constants/numerical").FP_SAFE,i=e("../../registry"),h=e("../../components/drawing"),e=e("./axis_ids"),m=e.getFromId,s=e.isLinked;function o(e,t){var n,r=[],a=e._fullLayout,i=L(a,t,0),o=L(a,t,1),s=C(e,t),l=s.min,c=s.max;if(0===l.length||0===c.length)return k.simpleMap(t.range,t.r2l);for(var u=l[0].val,d=c[0].val,f=1;f<l.length&&u===d;f++)u=Math.min(u,l[f].val);for(f=1;f<c.length&&u===d;f++)d=Math.max(d,c[f].val);var p=!1;t.range&&(p=(b=k.simpleMap(t.range,t.r2l))[1]<b[0]),"reversed"===t.autorange&&(t.autorange=p=!0);var h,m,g,y,v,x,b,_=t.rangemode,a="tozero"===_,e="nonnegative"===_,w=t._length,T=w/10,M=0;for(f=0;f<l.length;f++)for(h=l[f],n=0;n<c.length;n++)0<(x=(m=c[n]).val-h.val-A(t,h.val,m.val))&&(T<(v=w-i(h)-o(m))?M<x/v&&(g=h,y=m,M=x/v):M<x/w&&(g={val:h.val,nopad:1},y={val:m.val,nopad:1},M=x/w));return r=u===d?(s=u-1,b=u+1,a?0===u?[0,1]:(_=(0<u?c:l).reduce(function(e,t){return Math.max(e,o(t))},0),_=u/(1-Math.min(.5,_/w)),0<u?[0,_]:[_,0]):e?[Math.max(0,s),Math.max(1,b)]:[s,b]):(a?(0<=g.val&&(g={val:0,nopad:1}),y.val<=0&&(y={val:0,nopad:1})):e&&(g.val-M*i(g)<0&&(g={val:0,nopad:1}),y.val<=0&&(y={val:1,nopad:1})),M=(y.val-g.val-A(t,h.val,m.val))/(w-i(g)-o(y)),[g.val-M*i(g),y.val+M*o(y)]),p&&r.reverse(),k.simpleMap(r,t.l2r||Number)}function A(e,t,n){var r=0;if(e.rangebreaks)for(var a=e.locateBreaks(t,n),i=0;i<a.length;i++){var o=a[i];r+=o.max-o.min}return r}function L(e,t,n){var r,a=.05*t._length,i=t._anchorAxis||{};-1===(t.ticklabelposition||"").indexOf("inside")&&-1===(i.ticklabelposition||"").indexOf("inside")||(r=!(r="reversed"===t.autorange)?(i=k.simpleMap(t.range,t.r2l))[1]<i[0]:r)&&(n=!n);var o=0;return s(e,t._id)||(o=function(e,t,n){var r,a=0,i="x"===t._id.charAt(0);for(r in e._plots){var o=e._plots[r];if(t._id===o.xaxis._id||t._id===o.yaxis._id){var s=(i?o.yaxis:o.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===s.side||"bottom"===s.side)||n&&("top"===s.side||"right"===s.side))){if(s._vals){var o=k.deg2rad(s._tickAngles[s._id+"tick"]||0),l=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o));s._vals[0].bb||(o=s._id+"tick",s._selections[o].each(function(e){var t=p.select(this);t.select(".text-math-group").empty()&&(e.bb=h.bBox(t.node()))}));for(var u=0;u<s._vals.length;u++){var d,f=s._vals[u].bb;f&&(d=2*g+f.width,f=2*g+f.height,a=Math.max(a,i?Math.max(d*l,f*c):Math.max(f*l,d*c)))}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(a+=s.ticklen||0)}}}return a}(e,t,n)),a=Math.max(o,a),"domain"===t.constrain&&t._inputDomain&&(a*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?a:o)}}t.exports={getAutoRange:o,makePadFn:L,doAutoRange:function(e,t,n){t.setScale(),t.autorange&&(t.range=n?n.slice():o(e,t),t._r=t.range.slice(),t._rl=k.simpleMap(t._r,t.r2l),a=t._input,(r={})[t._attr+".range"]=t.range,r[t._attr+".autorange"]=t.autorange,i.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,r),a.range=t.range.slice(),a.autorange=t.autorange);var r=t._anchorAxis;{var a;r&&r.rangeslider&&((a=r.rangeslider[t._name])&&"auto"===a.rangemode&&(a.range=o(e,t)),r._input.rangeslider[t._name]=k.extendFlat({},a))}},findExtremes:function(t,n,e){e=e||{};t._m||t.setScale();var r,a,i,o,s,l,c,u,d=[],f=[],p=n.length,h=e.padded||!1,m=e.tozero&&("linear"===t.type||"-"===t.type),g="log"===t.type,y=!1,v=e.vpadLinearized||!1;function x(t){if(Array.isArray(t))return y=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var b=x((0<t._m?e.ppadplus:e.ppadminus)||e.ppad||0),_=x((0<t._m?e.ppadminus:e.ppadplus)||e.ppad||0),w=x(e.vpadplus||e.vpad),T=x(e.vpadminus||e.vpad);if(!y){if(c=1/0,u=-1/0,g)for(r=0;r<p;r++)(a=n[r])<c&&0<a&&(c=a),u<a&&a<E&&(u=a);else for(r=0;r<p;r++)(a=n[r])<c&&-E<a&&(c=a),u<a&&a<E&&(u=a);n=[c,u],p=2}var M={tozero:m,extrapad:h};function k(e){o=n[e],S(o)&&(s=b(e),l=_(e),o=v?(i=t.c2l(o)-T(e),t.c2l(o)+w(e)):(c=o-T(e),u=o+w(e),g&&c<u/10&&(c=u/10),i=t.c2l(c),t.c2l(u)),m&&(i=Math.min(0,i),o=Math.max(0,o)),P(i)&&D(d,i,l,M),P(o)&&O(f,o,s,M))}var A=Math.min(6,p);for(r=0;r<A;r++)k(r);for(r=p-1;A<=r;r--)k(r);return{min:d,max:f,opts:e}},concatExtremes:C};var g=3;function C(e,t,n){var a,i,o=t._id,r=e._fullData,s=e._fullLayout,l=[],c=[];function u(e,t){for(a=0;a<t.length;a++){var n=e[t[a]],r=(n._extremes||{})[o];if(!0===n.visible&&r){for(h=0;h<r.min.length;h++)i=r.min[h],D(l,i.val,i.pad,{extrapad:i.extrapad});for(h=0;h<r.max.length;h++)i=r.max[h],O(c,i.val,i.pad,{extrapad:i.extrapad})}}}if(u(r,t._traceIndices),u(s.annotations||[],t._annIndices||[]),u(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var d in t._matchGroup)if(d!==t._id){for(var d=m(e,d),f=C(e,d,!0),p=t._length/d._length,h=0;h<f.min.length;h++)i=f.min[h],D(l,i.val,i.pad*p,{extrapad:i.extrapad});for(h=0;h<f.max.length;h++)i=f.max[h],O(c,i.val,i.pad*p,{extrapad:i.extrapad})}return{min:l,max:c}}function D(e,t,n,r){a(e,t,n,r,l)}function O(e,t,n,r){a(e,t,n,r,c)}function a(e,t,n,r,a){for(var i=r.tozero,o=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(a(c.val,t)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}a(t,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(e.splice(l,1),l--)}s&&e.push({val:t,pad:(i=i&&0===t)?0:n,extrapad:!i&&o})}function P(e){return S(e)&&Math.abs(e)<E}function l(e,t){return e<=t}function c(e,t){return t<=e}},{"../../components/drawing":122,"../../constants/numerical":210,"../../lib":230,"../../registry":313,"./axis_ids":280,"@plotly/d3":11,"fast-isnumeric":15}],276:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),j=e("../../plots/plots"),H=e("../../registry"),B=e("../../lib"),u=B.strTranslate,d=e("../../lib/svg_text_utils"),q=e("../../components/titles"),U=e("../../components/color"),Y=e("../../components/drawing"),b=e("./layout_attributes"),f=e("./clean_ticks"),r=e("../../constants/numerical"),M=r.ONEMAXYEAR,k=r.ONEAVGYEAR,A=r.ONEMINYEAR,S=r.ONEMAXQUARTER,E=r.ONEAVGQUARTER,L=r.ONEMINQUARTER,C=r.ONEMAXMONTH,D=r.ONEAVGMONTH,O=r.ONEMINMONTH,P=r.ONEWEEK,I=r.ONEDAY,R=I/2,N=r.ONEHOUR,s=r.ONEMIN,l=r.ONESEC,y=r.MINUS_SIGN,z=r.BADNUM,o={K:"zeroline"},F={K:"gridline",L:"path"},V={K:"tick",L:"path"},G={K:"tick",L:"text"},r=e("../../constants/alignment"),x=r.MID_SHIFT,_=r.CAP_SHIFT,W=r.LINE_SPACING,Z=r.OPPOSITE_SIDE,$=t.exports={};$.setConvert=e("./set_convert");var c=e("./axis_autotype"),t=e("./axis_ids"),i=t.idSort,X=t.isLinked;$.id2name=t.id2name,$.name2id=t.name2id,$.cleanId=t.cleanId,$.list=t.list,$.listIds=t.listIds,$.getFromId=t.getFromId,$.getFromTrace=t.getFromTrace;e=e("./autorange");$.getAutoRange=e.getAutoRange,$.findExtremes=e.findExtremes;var a=1e-4;function J(e){var t=(e[1]-e[0])*a;return[e[0]-t,e[1]+t]}$.coerceRef=function(e,t,n,r,a,i){var o=r.charAt(r.length-1),n=n._fullLayout._subplots[o+"axis"],o=r+"ref",r={};return a=a||(n[0]||("string"==typeof i?i:i[0])),i=i||a,n=n.concat(n.map(function(e){return e+" domain"})),r[o]={valType:"enumerated",values:n.concat(i?"string"==typeof i?[i]:i:[]),dflt:a},B.coerce(e,t,r,o)},$.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},$.coercePosition=function(e,t,n,r,a,i){var o,s;"range"!==$.getRefType(r)?(s=B.ensureNumber,o=n(a,i)):(o=n(a,i=(r=$.getFromId(t,r)).fraction2r(i)),s=r.cleanPos),e[a]=s(o)},$.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?B.ensureNumber:$.getFromId(t,n).cleanPos)(e)},$.redrawComponents=function(u,d){d=d||$.listIds(u);var f=u._fullLayout;function e(e,t,n,r){for(var a=H.getComponentMethod(e,t),i={},o=0;o<d.length;o++)for(var s=f[$.id2name(d[o])][n],l=0;l<s.length;l++){var c=s[l];if(!i[c]&&(a(u,c),i[c]=1,r))return}}e("annotations","drawOne","_annIndices"),e("shapes","drawOne","_shapeIndices"),e("images","draw","_imgIndices",!0)};var p=$.getDataConversions=function(e,t,n,r){var a,n="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(n)){if(a={type:c(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},$.setConvert(a),"category"===a.type)for(var i=0;i<r.length;i++)a.d2c(r[i])}else a=$.getFromTrace(e,t,n);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===n?{d2c:m,c2d:m}:{d2c:h,c2d:h}};function h(e){return+e}function m(e){return String(e)}function g(e){return+e.substring(1)}$.getDataToCoordFunc=function(e,t,n,r){return p(e,t,n,r).d2c},$.counterLetter=function(e){e=e.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},$.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):(2e-6<(t/e._minDtick+1e-6)%1||2e-6<((n-e._forceTick0)/e._minDtick%1+1.000001)%1)&&(e._minDtick=0)):e._minDtick=0},$.saveRangeInitial=function(e,t){for(var n=$.list(e,"",!0),r=!1,a=0;a<n.length;a++){var i=n[a],o=void 0===i._rangeInitial,s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);(o&&!1===i.autorange||t&&s)&&(i._rangeInitial=i.range.slice(),r=!0)}return r},$.saveShowSpikeInitial=function(e,t){for(var n=$.list(e,"",!0),r=!1,a="on",i=0;i<n.length;i++){var o=n[i],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==a||o.showspikes||(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,r},$.autoBin=function(e,t,n,r,a,i){var o,s=B.aggNums(Math.min,null,e),l=B.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(i)||1),_dataSpan:l-s};a=a||t.calendar,o="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:B.simpleMap([s,l],t.c2r,0,a),calendar:a},$.setConvert(o),(i=i&&f.dtick(i,o.type))?(o.dtick=i,o.tick0=f.tick0(void 0,o.type,a)):(n?d=(l-s)/n:(i=B.distinctVals(e),n=(n=Math.pow(10,Math.floor(Math.log(i.minDiff)/Math.LN10)))*B.roundUp(i.minDiff/n,[.9,1.9,4.9,9.9],!0),d=Math.max(n,2*B.stdev(e)/Math.pow(e.length,r?.25:.4)),T(d)||(d=1)),$.autoTicks(o,d));var c,u=o.dtick,d=$.tickIncrement($.tickFirst(o),u,"reverse",a);if("number"==typeof u)c=(d=function(t,e,n,r,a){var i=0,o=0,s=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:T(e[u])||l++,c(e[u])&&i++,c(e[u]+n.dtick/2)&&o++;var d=e.length-l;s===d&&"date"!==n.type?n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick):o<.1*d&&(.3*d<i||c(r)||c(a))&&(a=n.dtick/2,t+=t+a<r?a:-a);return t}(d,e,o,s,l))+(1+Math.floor((l-d)/u))*u;else for(c=d="M"===o.dtick.charAt(0)?function(e,t,n,r,a){t=B.findExactDates(t,a);if(.8<t.exactDays){a=Number(n.substr(1));.8<t.exactYears&&a%12==0?e=$.tickIncrement(e,"M6","reverse")+1.5*I:.8<t.exactMonths?e=$.tickIncrement(e,"M1","reverse")+15.5*I:e-=R;n=$.tickIncrement(e,n);if(n<=r)return n}return e}(d,e,u,s,a):d,0;c<=l;)c=$.tickIncrement(c,u,!1,a),0;return{start:t.c2r(d,0,a),end:t.c2r(c,0,a),size:u,_dataSpan:l-s}},$.prepTicks=function(e,t){var n,r=B.simpleMap(e.range,e.r2l,void 0,void 0,t);e._dtickInit=e.dtick,e._tick0Init=e.tick0,"auto"!==e.tickmode&&e.dtick||((t=e.nticks)||(t="category"===e.type||"multicategory"===e.type?(n=e.tickfont?B.bigFont(e.tickfont.size||12):15,e._length/n):(n="y"===e._id.charAt(0)?40:80,B.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(t*=2)),"array"===e.tickmode&&(t*=100),e._roughDTick=Math.abs(r[1]-r[0])/t,$.autoTicks(e,e._roughDTick),0<e._minDtick&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))),"period"===e.ticklabelmode&&function(e){var t;function n(){return!(T(e.dtick)||"M"!==e.dtick.charAt(0))}var r=n(),a=$.getTickFormat(e);{var i;a&&(i=e._dtickInit!==e.dtick,/%[fLQsSMX]/.test(a)||(/%[HI]/.test(a)?(t=N,i&&!r&&e.dtick<N&&(e.dtick=N)):/%p/.test(a)?(t=R,i&&!r&&e.dtick<R&&(e.dtick=R)):/%[Aadejuwx]/.test(a)?(t=I,i&&!r&&e.dtick<I&&(e.dtick=I)):/%[UVW]/.test(a)?(t=P,i&&!r&&e.dtick<P&&(e.dtick=P)):/%[Bbm]/.test(a)?(t=D,i&&(r?g(e.dtick)<1:e.dtick<O)&&(e.dtick="M1")):/%[q]/.test(a)?(t=E,i&&(r?g(e.dtick)<3:e.dtick<L)&&(e.dtick="M3")):/%[Yy]/.test(a)&&(t=k,i&&(r?g(e.dtick)<12:e.dtick<A)&&(e.dtick="M12"))))}(r=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0);e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),ie(e)},$.calcTicks=function(e,t){$.prepTicks(e,t);var n=B.simpleMap(e.range,e.r2l,void 0,void 0,t);if("array"===e.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,r=new Array(e.length),a=J(B.simpleMap(t.range,t.r2l)),i=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]),s=0;Array.isArray(n)||(n=[]);var l="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var c=0;c<e.length;c++){var u=l(e[c]);i<u&&u<o&&(void 0===n[c]?r[s]=$.tickText(t,u):r[s]=oe(t,u,String(n[c])),s++)}s<e.length&&r.splice(s,e.length-s);t.rangebreaks&&(r=r.filter(function(e){return t.maskBreaks(e.x)!==z}));return r}(e);var r=J(n),a=r[0],i=r[1],o=n[1]<n[0],s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]),c="log"===e.type&&!(T(e.dtick)||"L"===e.dtick.charAt(0)),r="period"===e.ticklabelmode;if(e._tmin=$.tickFirst(e,t),e._tmin<a!=o)return[];"category"!==e.type&&"multicategory"!==e.type||(i=o?Math.max(-.5,i):Math.min(e._categories.length-.5,i));var u=e._tmin;e.rangebreaks&&e._tick0Init!==e.tick0&&(u=_e(u,e),o||(u=$.tickIncrement(u,e.dtick,!o,e.calendar))),r&&(u=$.tickIncrement(u,e.dtick,!o,e.calendar));for(var d=Math.max(1e3,e._length||0),f=[],p=null;o?i<=u:u<=i;u=$.tickIncrement(u,e.dtick,o,e.calendar)){if(e.rangebreaks&&!o){if(u<a)continue;if(e.maskBreaks(u)===z&&_e(u,e)>=l)break}if(f.length>d||u===p)break;var p=u,h=c&&u!==(0|u)?!0:!1;f.push({minor:h,value:u})}if(r&&function(e,t,n){for(var r=0;r<e.length;r++){var a,i=e[r].value,o=r,s=r+1,s=r<e.length-1?(o=r)+1:0<r?(o=r-1,r):o=r,l=e[o].value,o=e[s].value,s=Math.abs(o-l),o=n||s,l=0;A<=o?l=A<=s&&s<=M?s:k:n===E&&L<=o?l=L<=s&&s<=S?s:E:O<=o?l=O<=s&&s<=C?s:D:n===P&&P<=o?l=P:I<=o?l=I:n===R&&R<=o?l=R:n===N&&N<=o&&(l=N),s<=l&&(l=s,a=!0);var c=i+l;if(t.rangebreaks&&0<l){for(var u=0,d=0;d<84;d++){var f=(d+.5)/84;t.maskBreaks(i*(1-f)+f*c)!==z&&u++}(l*=u/84)||(e[r].drop=!0),a&&P<s&&(l=s)}(0<l||0===r)&&(e[r].periodX=i+l/2)}}(f,e,e._definedDelta),e.rangebreaks){var m="y"===e._id.charAt(0),g=1;"auto"===e.tickmode&&(g=e.tickfont?e.tickfont.size:12);for(var y,v=NaN,x=f.length-1;-1<x;x--)f[x].drop?f.splice(x,1):(f[x].value=_e(f[x].value,e),y=e.c2p(f[x].value),(m?y-g<v:v<y+g)?f.splice(o?x+1:x,1):v=y)}be(e)&&360===Math.abs(n[1]-n[0])&&f.pop(),e._tmax=(f[f.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var b=[];for(x=0;x<f.length;x++){var _=f[x].minor,w=f[x].value,w=$.tickText(e,w,!1,_);void 0!==(_=f[x].periodX)&&(l<(w.periodX=_)||_<s)&&(l<_&&(w.periodX=l),_<s&&(w.periodX=s),w.text=" ",e._prevDateHead=""),b.push(w)}return e._inCalcTicks=!1,b};var v=[2,5,10],K=[1,2,3,6,12],Q=[1,2,5,10,15,30],ee=[1,2,3,7,14],te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ne=[-.301,0,.301,.699,1],re=[15,30,45,90,180];function ae(e,t,n){return t*B.roundUp(e/t,n)}function ie(e){var t,n,r,a,i=e.dtick;e._tickexponent=0,T(i)||"string"==typeof i||(i=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type?(t=e.r2l(e.tick0),r=(n=e.l2r(t).replace(/(^-|i)/g,"")).length,"M"===String(i).charAt(0)?10<r||"01-01"!==n.substr(5)?e._tickround="d":e._tickround=+i.substr(1)%12==0?"y":"m":I<=i&&r<=10||15*I<=i?e._tickround="d":s<=i&&r<=16||N<=i?e._tickround="M":l<=i&&r<=19||s<=i?e._tickround="S":(a=e.l2r(t+i).replace(/^-/,"").length,e._tickround=Math.max(r,a)-20,e._tickround<0&&(e._tickround=4))):T(i)||"L"===i.charAt(0)?(a=e.range.map(e.r2d||Number),T(i)||(i=Number(i.substr(1))),e._tickround=2-Math.floor(Math.log(i)/Math.LN10+.01),i=Math.max(Math.abs(a[0]),Math.abs(a[1])),a=Math.floor(Math.log(i)/Math.LN10+.01),i=void 0===e.minexponent?3:e.minexponent,Math.abs(a)>i&&(le(e.exponentformat)&&!ce(a)?e._tickexponent=3*Math.round((a-1)/3):e._tickexponent=a)):e._tickround=null}function oe(e,t,n){e=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:e.size,font:e.family,fontColor:e.color}}$.autoTicks=function(e,t){var n,r,a;function i(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type?(e.tick0=B.dateTick0(e.calendar,0),k<(a=2*t)?(t/=k,o=i(10),e.dtick="M"+12*ae(t,o,v)):D<a?(t/=D,e.dtick="M"+ae(t,1,K)):I<a?(e.dtick=ae(t,I,e._hasDayOfWeekBreaks?[1,2,7,14]:ee),n=$.getTickFormat(e),(r="period"===e.ticklabelmode)&&(e._rawTick0=e.tick0),/%[uVW]/.test(n)?e.tick0=B.dateTick0(e.calendar,2):e.tick0=B.dateTick0(e.calendar,1),r&&(e._dowTick0=e.tick0)):N<a?e.dtick=ae(t,N,K):s<a?e.dtick=ae(t,s,Q):l<a?e.dtick=ae(t,l,Q):(o=i(10),e.dtick=ae(t,o,v))):"log"===e.type?(e.tick0=0,r=B.simpleMap(e.range,e.r2l),.7<t?e.dtick=Math.ceil(t):Math.abs(r[1]-r[0])<1?(a=1.5*Math.abs((r[1]-r[0])/t),t=Math.abs(Math.pow(10,r[1])-Math.pow(10,r[0]))/a,o=i(10),e.dtick="L"+ae(t,o,v)):e.dtick=.3<t?"D2":"D1"):"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):be(e)?(e.tick0=0,e.dtick=ae(t,o=1,re)):(e.tick0=0,o=i(10),e.dtick=ae(t,o,v)),0===e.dtick&&(e.dtick=1),!T(e.dtick)&&"string"!=typeof e.dtick){var o=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(o)}},$.tickIncrement=function(e,t,n,r){var a=n?-1:1;if(T(t))return B.increment(e,a*t);var i=t.charAt(0),o=a*Number(t.substr(1));if("M"===i)return B.incrementMonth(e,o,r);if("L"===i)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"!==i)throw"unrecognized dtick "+String(t);t="D2"===t?ne:te,a=e+.01*a,n=B.roundUp(B.mod(a,1),t,n);return Math.floor(a)+Math.log(w.round(Math.pow(10,n),1))/Math.LN10},$.tickFirst=function(e,t){var n=e.r2l||Number,r=B.simpleMap(e.range,n,void 0,void 0,t),a=r[1]<r[0],t=a?Math.floor:Math.ceil,i=J(r)[0],o=e.dtick,r=n(e.tick0);if(T(o)){n=t((i-r)/o)*o+r;return n="category"===e.type||"multicategory"===e.type?B.constrain(n,0,e._categories.length-1):n}var s=o.charAt(0),l=Number(o.substr(1));if("M"===s){for(var c,u,d=0,f=r;d<10;){if(((u=$.tickIncrement(f,o,a,e.calendar))-i)*(f-i)<=0)return a?Math.min(f,u):Math.max(f,u);c=(i-(f+u)/2)/(u-f),u=s+(Math.abs(Math.round(c))||1)*l,f=$.tickIncrement(f,u,c<0?!a:a,e.calendar),d++}return B.error("tickFirst did not converge",e),f}if("L"===s)return Math.log(t((Math.pow(10,i)-r)/l)*l+r)/Math.LN10;if("D"!==s)throw"unrecognized dtick "+String(o);r="D2"===o?ne:te,r=B.roundUp(B.mod(i,1),r,a);return Math.floor(i)+Math.log(w.round(Math.pow(10,r),1))/Math.LN10},$.tickText=function(n,r,a,e){var t=oe(n,r),i="array"===n.tickmode,o=a||i,s=n.type,l="category"===s?n.d2l_noadd:n.d2l;if(i&&Array.isArray(n.ticktext)){for(var c=B.simpleMap(n.range,n.r2l),u=(Math.abs(c[1]-c[0])-(n._lBreaks||0))/1e4,d=0;d<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[d]))<u);d++);if(d<n.ticktext.length)return t.text=String(n.ticktext[d]),t}function f(e){if(void 0===e)return 1;if(a)return"none"===e;var t={first:n._tmin,last:n._tmax}[e];return"all"!==e&&r!==t}var p,h,m,g,c=a?"never":"none"!==n.exponentformat&&f(n.showexponent)?"hide":"";return"date"===s?function(e,t,n,r){var a=e._tickround,i=n&&e.hoverformat||$.getTickFormat(e);r&&(a=T(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var o,s=B.formatDate(t.x,i,a,e._dateFormat,e.calendar,e._extraFormat),i=s.indexOf("\n");-1!==i&&(o=s.substr(i+1),s=s.substr(0,i));r&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,"")));o&&(n?"d"===a?s+=", "+o:s=o+(s?", "+s:""):e._inCalcTicks&&e._prevDateHead===o?(n=we(e),a=e._realSide||e.side,(!n&&"top"===a||n&&"bottom"===a)&&(s+="<br> ")):(e._prevDateHead=o,s+="<br>"+o));t.text=s}(n,t,a,o):"log"===s?function(e,t,n,r){var a=e.dtick,i=t.x,o=e.tickformat,s="string"==typeof a&&a.charAt(0);"never"===r&&(r="");n&&"L"!==s&&(a="L3",s="L");if(o||"L"===s)t.text=ue(Math.pow(10,i),e,r,n);else if(T(a)||"D"===s&&B.mod(i+.01,1)<.1){o=Math.round(i),r=Math.abs(o),n=e.exponentformat;"power"===n||le(n)&&ce(o)?(t.text=0===o?1:1===o?"10":"10<sup>"+(1<o?"":y)+r+"</sup>",t.fontSize*=1.25):("e"===n||"E"===n)&&2<r?t.text="1"+n+(0<o?"+":y)+r:(t.text=ue(Math.pow(10,i),e,"","fakehover"),"D1"===a&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==s)throw"unrecognized dtick "+String(a);t.text=String(Math.round(Math.pow(10,B.mod(i,1)))),t.fontSize*=.75}"D1"===e.dtick&&("0"!==(a=String(t.text).charAt(0))&&"1"!==a||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(i<0?.5:.25))))}(n,t,o,c):"category"===s?function(e,t){e=e._categories[Math.round(t.x)];void 0===e&&(e="");t.text=String(e)}(n,t):"multicategory"===s?(p=n,h=t,m=a,g=Math.round(h.x),p=p._categories[g]||[],g=void 0===p[1]?"":String(p[1]),p=void 0===p[0]?"":String(p[0]),m?h.text=p+" - "+g:(h.text=g,h.text2=p)):be(n)?(s=t,m=a,g=o,h=c,"radians"!==(p=n).thetaunit||m?s.text=ue(s.x,p,h,g):0==(m=s.x/180)?s.text="0":100<=(m=function(e){function r(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){for(var t=1;!r(Math.round(e*t)/t,e);)t*=10;return t}(e),n=e*t,e=Math.abs(function e(t,n){return r(n,0)?t:e(n,t%n)}(n,t));return[Math.round(n/e),Math.round(t/e)]}(m))[1]?s.text=ue(B.deg2rad(s.x),p,h,g):(g=s.x<0,1===m[1]?1===m[0]?s.text="":s.text=m[0]+"":s.text=["<sup>",m[0],"</sup>","","<sub>",m[1],"</sub>",""].join(""),g&&(s.text=y+s.text))):function(e,t,n,r){"never"===r?r="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(r="hide");t.text=ue(t.x,e,r,n)}(n,t,o,c),e||(n.tickprefix&&!f(n.showtickprefix)&&(t.text=n.tickprefix+t.text),n.ticksuffix&&!f(n.showticksuffix)&&(t.text+=n.ticksuffix)),"boundaries"!==n.tickson&&!n.showdividers||(t.xbnd=[(e=function(e){var t=n.l2p(e);return 0<=t&&t<=n._length?e:null})(t.x-.5),e(t.x+n.dtick-.5)]),t},$.hoverLabelText=function(e,t,n){n&&(e=B.extendFlat({},e,{hoverformat:n}));var r=Array.isArray(t)?t[0]:t,t=Array.isArray(t)?t[1]:void 0;if(void 0!==t&&t!==r)return $.hoverLabelText(e,r,n)+" - "+$.hoverLabelText(e,t,n);n="log"===e.type&&r<=0,e=$.tickText(e,e.c2l(n?-r:r),"hover").text;return n?0===r?"0":y+e:e};var se=["f","p","n","","m","","k","M","G","T"];function le(e){return"SI"===e||"B"===e}function ce(e){return 14<e||e<-15}function ue(e,t,n,r){var a=e<0,i=t._tickround,o=n||t.exponentformat||"B",s=t._tickexponent,l=$.getTickFormat(t),n=t.separatethousands;if(r&&(ie(r={exponentformat:o,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:T(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]}),i=(Number(r._tickround)||0)+4,s=r._tickexponent,t.hoverformat&&(l=t.hoverformat)),l)return t._numFormat(l)(e).replace(/-/g,y);l=Math.pow(10,-i)/2;if("none"===o&&(s=0),(e=Math.abs(e))<l)a=!(e="0");else{if(e+=l,s&&(e*=Math.pow(10,-s),i+=s),0===i)e=String(Math.floor(e));else if(i<0){e=(e=String(Math.round(e))).substr(0,e.length+i);for(var c=i;c<0;c++)e+="0"}else{l=(e=String(e)).indexOf(".")+1;l&&(e=e.substr(0,l+i).replace(/\.?0+$/,""))}e=B.numSeparate(e,t._separators,n)}return s&&"hide"!==o&&(le(o)&&ce(s)&&(o="power"),n=s<0?y+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?e+=o+n:"power"===o?e+="10<sup>"+n+"</sup>":"B"===o&&9===s?e+="B":le(o)&&(e+=se[s/3+5])),a?y+e:e}function de(e){return void 0!==e.periodX?e.periodX:e.x}function fe(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function pe(e){var t=e.title.font.size,n=(e.title.text.match(d.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*(_+n*W):t*_:n?t*(n+1)*W:t}function he(e,t){t=e.l2p(t);return 1<t&&t<e._length-1}function me(e){var t=w.select(e),e=t.select(".text-math-group");return e.empty()?t.select("text"):e}function ge(e){return e._id+".automargin"}function ye(e){return ge(e)+".mirror"}function ve(e){return e._id+".rangeslider"}function xe(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function be(e){return"angularaxis"===e._id}function _e(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var a=t._rangebreaks[r];if(e>=a.min&&e<a.max)return a.max}return e}function we(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function Te(e,t){we(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}$.getTickFormat=function(e){var t,n,r,a,i,o,s,l,c,u,d,f;function p(e){return"string"!=typeof e?e:Number(e.replace("M",""))*D}function h(e,t){var n=["L","D"];if(typeof e!=typeof t)return"number"==typeof e?1:-1;if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),n=n.indexOf(t.charAt(0));return r===n?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-n}if(e.tickformatstops&&0<e.tickformatstops.length)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(c=e.dtick,u=r.dtickrange,f=void 0,f=(d=p)||function(e){return e},d=u[0],u=u[1],(!d&&"number"!=typeof d||f(d)<=f(c))&&(!u&&"number"!=typeof u||f(u)>=f(c)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(a=e.dtick,i=r.dtickrange,l=s=o=void 0,o=null===i[0],s=null===i[1],l=0<=h(a,i[0]),i=h(a,i[1])<=0,(o||l)&&(s||i))){n=r;break}}return n?n.value:e.tickformat},$.getSubplots=function(e,t){e=e._fullLayout._subplots,e=e.cartesian.concat(e.gl2d||[]),e=t?$.findSubplotsWithAxis(e,t):e;return e.sort(function(e,t){e=e.substr(1).split("y"),t=t.substr(1).split("y");return e[0]===t[0]?+e[1]-+t[1]:+e[0]-+t[0]}),e},$.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],a=0;a<e.length;a++){var i=e[a];n.test(i)&&r.push(i)}return r},$.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){for(var n,r={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},i=$.list(e,"x",!0),o=$.list(e,"y",!0),s=[],l=0;l<i.length;l++)for(s.push({x:i[l],y:a}),n=0;n<o.length;n++)0===l&&s.push({x:r,y:o[n]}),s.push({x:i[l],y:o[n]});e=t._clips.selectAll(".axesclip").data(s,function(e){return e.x._id+e.y._id});e.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),e.exit().remove(),e.each(function(e){w.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},$.draw=function(r,e,a){var i=r._fullLayout;"redraw"===e&&i._paper.selectAll("g.subplot").each(function(e){var t=e[0],n=i._plots[t];n&&(e=n.xaxis,t=n.yaxis,n.xaxislayer.selectAll("."+e._id+"tick").remove(),n.yaxislayer.selectAll("."+t._id+"tick").remove(),n.xaxislayer.selectAll("."+e._id+"tick2").remove(),n.yaxislayer.selectAll("."+t._id+"tick2").remove(),n.xaxislayer.selectAll("."+e._id+"divider").remove(),n.yaxislayer.selectAll("."+t._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+e._id+"title").remove(),i._infolayer.select(".g-"+t._id+"title").remove())});e=e&&"redraw"!==e?e:$.listIds(r);return B.syncOrAsync(e.map(function(n){return function(){if(n){var e=$.getFromId(r,n),t=$.drawOne(r,e,a);return e._r=e.range.slice(),e._rl=B.simpleMap(e._r,e.r2l),t}}}))},$.drawOne=function(u,d,e){e=e||{},d.setScale();var f=u._fullLayout,t=d._id,p=t.charAt(0),h=$.counterLetter(t),n=f._plots[d._mainSubplot];if(n){var i=n[p+"axislayer"],o=d._mainLinePosition,r=d._mainMirrorPosition,a=d._vals=$.calcTicks(d),s=[d.mirror,o,r].join("_");for(T=0;T<a.length;T++)a[T].axInfo=s;d._selections={},d._tickAngles&&(d._prevTickAngles=d._tickAngles),d._tickAngles={},d._depth=null;var l={};if(d.visible){var c,m=$.makeTransTickFn(d),g=$.makeTransTickLabelFn(d),y="inside"===d.ticks,v="outside"===d.ticks;c="boundaries"===d.tickson?(n=function(e){function t(e,t){null!==(t=e.xbnd[t])&&r.push(B.extendFlat({},e,{x:t}))}var n,r=[];if(e.length){for(n=0;n<e.length;n++)t(e[n],0);t(e[n-1],1)}return r}(a),D=$.clipEnds(d,n),y?D:n):(D=$.clipEnds(d,a),y&&"period"!==d.ticklabelmode?D:a);var x=d._gridVals=D,b=function(e,t){function n(e,t){null!==(t=e.xbnd[t])&&i.push(B.extendFlat({},e,{x:t}))}var r,a,i=[],o=t.length&&t[t.length-1].x<t[0].x;if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];s.text2!==a&&n(s,o?1:0),a=s.text2}n(t[r-1],o?0:1)}return i}(d,a);if(!f._hasOnlyLargeSploms)for(var _=d._subplotsWith,w={},T=0;T<_.length;T++){var M,k=_[T],A=(M=f._plots[k])[h+"axis"],S=A._mainAxis._id;w[S]||(w[S]=1,S="x"===p?"M0,"+A._offset+"v"+A._length:"M"+A._offset+",0h"+A._length,$.drawGrid(u,d,{vals:x,counterAxis:A,layer:M.gridlayer.select("."+t),path:S,transFn:m}),$.drawZeroLine(u,d,{counterAxis:A,layer:M.zerolinelayer,path:S,transFn:m}))}var E=$.getTickSigns(d),L=[];if(d.ticks){var C,D=$.makeTickPath(d,o,E[2]),O=d._anchorAxis&&d.mirror&&!0!==d.mirror?D+(C=$.makeTickPath(d,r,E[3])):(C="",D);if(d.showdividers&&v&&"boundaries"===d.tickson){var P={};for(T=0;T<b.length;T++)P[b[T].x]=1;N=function(e){return P[e.x]?C:O}}else N=O;$.drawTicks(u,d,{vals:c,layer:i,path:N,transFn:m}),"allticks"===d.mirror&&(L=Object.keys(d._linepositions||{}))}for(T=0;T<L.length;T++){k=L[T],M=f._plots[k];var I=d._linepositions[k]||[],I=$.makeTickPath(d,I[0],E[0])+$.makeTickPath(d,I[1],E[1]);$.drawTicks(u,d,{vals:c,layer:M[p+"axislayer"],path:I,transFn:m})}var R,N=[];N.push(function(){return $.drawLabels(u,d,{vals:a,layer:i,plotinfo:M,transFn:g,labelFns:$.makeLabelFns(d,o)})}),"multicategory"===d.type?(R={x:2,y:10}[p],N.push(function(){var e={x:"height",y:"width"}[p],e=F()[e]+R+(d._tickAngles[t+"tick"]?d.tickfont.size*W:0);return $.drawLabels(u,d,{vals:function(e,t){for(var n,r=[],a={},i=0;i<t.length;i++){var o=t[i];a[o.text2]?a[o.text2].push(o.x):a[o.text2]=[o.x]}for(n in a)r.push(oe(e,B.interp(a[n],.5),n));return r}(d,a),layer:i,cls:t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:m,labelFns:$.makeLabelFns(d,o+e*E[4])})}),N.push(function(){var e,t,n,r,a;d._depth=E[4]*(F("tick2")[d.side]-o),e=u,t=d,n={vals:b,layer:i,path:$.makeTickPath(d,o,E[4],d._depth),transFn:m},r=t._id+"divider",a=n.vals,(a=n.layer.selectAll("path."+r).data(a,fe)).exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(U.stroke,t.dividercolor).style("stroke-width",Y.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)})):d.title.hasOwnProperty("standoff")&&N.push(function(){d._depth=E[4]*(F()[d.side]-o)});var z=H.getComponentMethod("rangeslider","isVisible")(d);return N.push(function(){var e,t,n,r,a,i,o=d.side.charAt(0),s=Z[d.side].charAt(0),l=$.getPxPosition(u,d),c=v?d.ticklen:0;(d.automargin||z)&&("multicategory"===d.type?i=F("tick2"):(i=F(),"x"===p&&"b"===o&&(d._depth=Math.max(0<i.width?i.bottom-l:0,c)))),d.automargin&&(n={x:0,y:0,r:0,l:0,t:0,b:0},r=[0,1],"x"===p?("b"===o?n[o]=d._depth:(n[o]=d._depth=Math.max(0<i.width?l-i.top:0,c),r.reverse()),0<i.width&&(0<(a=i.right-(d._offset+d._length))&&(n.xr=1,n.r=a),0<(a=d._offset-i.left)&&(n.xl=0,n.l=a))):("l"===o?n[o]=d._depth=Math.max(0<i.height?l-i.left:0,c):(n[o]=d._depth=Math.max(0<i.height?i.right-l:0,c),r.reverse()),0<i.height&&(0<(l=i.bottom-(d._offset+d._length))&&(n.yb=0,n.b=l),0<(i=d._offset-i.top)&&(n.yt=1,n.t=i))),n[h]="free"===d.anchor?d.position:d._anchorAxis.domain[r[0]],d.title.text!==f._dfltTitle[p]&&(n[o]+=pe(d)+(d.title.standoff||0)),d.mirror&&"free"!==d.anchor&&((e={x:0,y:0,r:0,l:0,t:0,b:0})[s]=d.linewidth,d.mirror&&!0!==d.mirror&&(e[s]+=c),!0===d.mirror||"ticks"===d.mirror?e[h]=d._anchorAxis.domain[r[1]]:"all"!==d.mirror&&"allticks"!==d.mirror||(e[h]=[d._counterDomainMin,d._counterDomainMax][r[1]]))),z&&(t=H.getComponentMethod("rangeslider","autoMarginOpts")(u,d)),j.autoMargin(u,ge(d),n),j.autoMargin(u,ye(d),e),j.autoMargin(u,ve(d),t)}),e.skipTitle||z&&"bottom"===d.side||N.push(function(){return function(e,t){var n=e._fullLayout,r=t._id,a=r.charAt(0),i=t.title.font.size;{var o,s;t.title.hasOwnProperty("standoff")?f=t._depth+t.title.standoff+pe(t):(o=we(t),f="multicategory"===t.type?t._depth:(s=1.5*i,o&&(s=.5*i,"outside"===t.ticks&&(s+=t.ticklen)),10+s+(t.linewidth?t.linewidth-1:0)),o||(f+="x"===a?"top"===t.side?i*(t.showticklabels?1:0):i*(t.showticklabels?1.5:.5):"right"===t.side?i*(t.showticklabels?1:.5):i*(t.showticklabels?.5:0)))}var l,c,u,d,i=$.getPxPosition(e,t);"x"===a?(c=t._offset+t._length/2,u="top"===t.side?i-f:i+f):(u=t._offset+t._length/2,c="right"===t.side?i+f:i-f,l={rotate:"-90",offset:0});{var f;"multicategory"!==t.type&&(f=t._selections[t._id+"tick"],d={selection:f,side:t.side},f&&f.node()&&f.node().parentNode&&(f=Y.getTranslate(f.node().parentNode),d.offsetLeft=f.x,d.offsetTop=f.y),t.title.hasOwnProperty("standoff")&&(d.pad=0))}return q.draw(e,r+"title",{propContainer:t,propName:t._name+".title.text",placeholder:n._dfltTitle[a],avoid:d,transform:l,attributes:{x:c,y:u,"text-anchor":"middle"}})}(u,d)}),B.syncOrAsync(N)}}function F(e){e=t+(e||"tick");return l[e]||(l[e]=function(e,t){var n,r,a,i;e._selections[t].size()?(a=n=1/0,i=r=-1/0,e._selections[t].each(function(){var e=me(this),e=Y.bBox(e.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),a=Math.min(a,e.left),i=Math.max(i,e.right)})):i=a=r=n=0;return{top:n,bottom:r,left:a,right:i,height:r-n,width:i-a}}(d,e)),l[e]}},$.getTickSigns=function(e){var t=e._id.charAt(0),n=e.side==={x:"top",y:"right"}[t]?1:-1,n=[-1,1,n,-n];return"inside"!==e.ticks==("x"===t)&&(n=n.map(function(e){return-e})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n},$.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return u(t._offset+t.l2p(e.x),0)}:function(e){return u(0,t._offset+t.l2p(e.x))}},$.makeTransTickLabelFn=function(t){var e=function(e){var t=e.ticklabelposition||"",n=function(e){return-1!==t.indexOf(e)},r=n("top"),a=n("left"),i=n("right"),o=n("bottom"),s=n("inside"),l=o||a||r||i;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=3,n=e.tickfont?e.tickfont.size:12;(o||r)&&(u+=n*_,d+=(e.linewidth||0)/2);(a||i)&&(u+=(e.linewidth||0)/2,d+=3);s&&"top"===c&&(d-=n*(1-_));(a||r)&&(u=-u);"bottom"!==c&&"right"!==c||(d=-d);return[l?u:0,s?d:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return u(n+t._offset+t.l2p(de(e)),r)}:function(e){return u(r,n+t._offset+t.l2p(de(e)))}},$.makeTickPath=function(e,t,n,r){r=void 0!==r?r:e.ticklen;var a=e._id.charAt(0),e=(e.linewidth||1)/2;return"x"===a?"M0,"+(t+e*n)+"v"+r*n:"M"+(t+e*n)+",0h"+r*n},$.makeLabelFns=function(r,t,e){var n=r.ticklabelposition||"",a=function(e){return-1!==n.indexOf(e)},i=a("top"),o=a("left"),s=a("right"),l=a("bottom")||o||i||s,c=a("inside"),u="inside"===n&&"inside"===r.ticks||!c&&"outside"===r.ticks&&"boundaries"!==r.tickson,d=0,i=0,a=u?r.ticklen:0;c?a*=-1:l&&(a=0),u&&(d+=a,e&&(v=B.deg2rad(e),d=a*Math.cos(v)+1,i=a*Math.sin(v))),r.showticklabels&&(u||r.showline)&&(d+=.2*r.tickfont.size);var f,p,h,m,g,e={labelStandoff:d+=(r.linewidth||1)/2*(c?-1:1),labelShift:i},y=0,a=r.side,v=r._id.charAt(0),u=r.tickangle;return"x"===v?(g=(m=!c&&"bottom"===a||c&&"top"===a)?1:-1,c&&(g*=-1),f=i*g,p=t+d*g,h=m?1:-.2,90===Math.abs(u)&&(c?h+=x:h=-90===u&&"bottom"===a?_:90===u&&"top"===a?x:.5,y=x/2*(u/90)),e.xFn=function(e){return e.dx+f+y*e.fontSize},e.yFn=function(e){return e.dy+p+e.fontSize*h},e.anchorFn=function(e,t){if(l){if(o)return"end";if(s)return"start"}return T(t)&&0!==t&&180!==t?t*g<0!==c?"end":"start":"middle"},e.heightFn=function(e,t,n){return t<-60||60<t?-.5*n:"top"===r.side!==c?-n:0}):"y"===v&&(g=(m=!c&&"left"===a||c&&"right"===a)?1:-1,c&&(g*=-1),f=d,p=i*g,h=0,c||90!==Math.abs(u)||(h=-90===u&&"left"===a||90===u&&"right"===a?_:.5),!c||0!=(u=T(u)?+u:0)&&(u=B.deg2rad(u),y=Math.abs(Math.sin(u))*_*g,h=0),e.xFn=function(e){return e.dx+t-(f+e.fontSize*h)*g+y*e.fontSize},e.yFn=function(e){return e.dy+p+e.fontSize*x},e.anchorFn=function(e,t){return T(t)&&90===Math.abs(t)?"middle":m?"end":"start"},e.heightFn=function(e,t,n){return"right"===r.side&&(t*=-1),t<-30?-n:t<30?-.5*n:0}),e},$.drawTicks=function(e,t,n){var r=t._id+"tick",a=(n=n||{}).vals;"period"===t.ticklabelmode&&(a=a.slice()).shift();a=n.layer.selectAll("path."+r).data(t.ticks?a:[],fe);a.exit().remove(),a.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(U.stroke,t.tickcolor).style("stroke-width",Y.crispRound(e,t.tickwidth,1)+"px").attr("d",n.path).style("display",null),Te(t,[V]),a.attr("transform",n.transFn)},$.drawGrid=function(e,t,n){var r=t._id+"grid",a=(n=n||{}).vals,i=n.counterAxis;if(!1===t.showgrid)a=[];else if(i&&$.shouldShowZeroLine(e,t,i))for(var o="array"===t.tickmode,s=0;s<a.length;s++){var l=a[s].x;if(o?!l:Math.abs(l)<t.dtick/100){if(a=a.slice(0,s).concat(a.slice(s+1)),!o)break;s--}}i=n.layer.selectAll("path."+r).data(a,fe);i.exit().remove(),i.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),t._gw=Y.crispRound(e,t.gridwidth,1),i.attr("transform",n.transFn).attr("d",n.path).call(U.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),Te(t,[F]),"function"==typeof n.path&&i.attr("d",n.path)},$.drawZeroLine=function(e,t,n){var r=t._id+"zl",a=$.shouldShowZeroLine(e,t,n.counterAxis),a=n.layer.selectAll("path."+r).data(a?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(e,t){return i(e.id,t.id)})}),a.attr("transform",n.transFn).attr("d",n.path).call(U.stroke,t.zerolinecolor||U.defaultLine).style("stroke-width",Y.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),Te(t,[o])},$.drawLabels=function(f,h,m){m=m||{};var p=f._fullLayout,e=h._id,g=e.charAt(0),t=m.cls||e+"tick",y=m.vals,c=m.labelFns,v=m.secondary?0:h.tickangle,n=(h._prevTickAngles||{})[t],x=m.layer.selectAll("g."+t).data(h.showticklabels?y:[],fe),r=[];function b(e,l){e.each(function(e){var t,n=w.select(this),r=n.select(".text-math-group"),a=c.anchorFn(e,l),i=m.transFn.call(n.node(),e)+(T(l)&&0!=+l?" rotate("+l+","+c.xFn(e)+","+(c.yFn(e)-e.fontSize/2)+")":""),o=d.lineCount(n),s=W*e.fontSize,s=c.heightFn(e,T(l)?+l:0,(o-1)*s);s&&(i+=u(0,s)),r.empty()?((t=n.select("text")).attr({transform:i,"text-anchor":a}),t.style("opacity",1),h._adjustTickLabelsOverflow&&h._adjustTickLabelsOverflow()):(t=Y.bBox(r.node()).width,r.attr("transform",i+u(t*{end:-.5,start:.5}[a],0)))})}x.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=w.select(this),n=f._promises.length;t.call(d.positionText,c.xFn(e),c.yFn(e)).call(Y.font,e.font,e.fontSize,e.fontColor).text(e.text).call(d.convertToTspans,f),f._promises[n]?r.push(f._promises.pop().then(function(){b(t,v)})):b(t,v)}),Te(h,[G]),x.exit().remove(),m.repositionOnUpdate&&x.each(function(e){w.select(this).select("text").call(d.positionText,c.xFn(e),c.yFn(e))}),h._adjustTickLabelsOverflow=function(){var e=h.ticklabeloverflow;if(e&&"allow"!==e){var a=-1!==e.indexOf("hide"),i="x"===h._id.charAt(0),t=0,n=i?f._fullLayout.width:f._fullLayout.height;-1!==e.indexOf("domain")&&(e=B.simpleMap(h.range,h.r2l),t=h.l2p(e[0])+h._offset,n=h.l2p(e[1])+h._offset);var r,o=Math.min(t,n),s=Math.max(t,n),l=h.side,c=1/0,u=-1/0;for(r in x.each(function(e){var t,n,r=w.select(this);r.select(".text-math-group").empty()&&(t=Y.bBox(r.node()),n=0,i?(t.right>s||t.left<o)&&(n=1):(t.bottom>s||t.top+(h.tickangle?0:e.fontSize/4)<o)&&(n=1),r=r.select("text"),n?a&&r.style("opacity",0):(r.style("opacity",1),c="bottom"===l||"right"===l?Math.min(c,i?t.top:t.left):-1/0,u="top"===l||"left"===l?Math.max(u,i?t.bottom:t.right):1/0))}),p._plots){var d=p._plots[r];h._id!==d.xaxis._id&&h._id!==d.yaxis._id||(d=i?d.yaxis:d.xaxis)&&(d["_visibleLabelMin_"+h._id]=c,d["_visibleLabelMax_"+h._id]=u)}}},h._hideCounterAxisInsideTickLabels=function(e){var t,n="x"===h._id.charAt(0),r=[];for(t in p._plots){var a=p._plots[t];h._id!==a.xaxis._id&&h._id!==a.yaxis._id||r.push(n?a.yaxis:a.xaxis)}r.forEach(function(a,i){a&&we(a)&&(e||[o,F,V,G]).forEach(function(n){var r="tick"===n.K&&"text"===n.L&&"period"===h.ticklabelmode,e=p._plots[h._mainSubplot],e=n.K===o.K?e.zerolinelayer.selectAll("."+h._id+"zl"):n.K===F.K?e.gridlayer.selectAll("."+h._id):e[h._id.charAt(0)+"axislayer"];e.each(function(){var e=w.select(this);(e=n.L?e.selectAll(n.L):e).each(function(e){var t=h.l2p(r?de(e):e.x)+h._offset,e=w.select(this);t<h["_visibleLabelMax_"+a._id]&&t>h["_visibleLabelMin_"+a._id]?e.style("display","none"):"tick"!==n.K||i||e.style("display",null)})})})})},b(x,n+1?n:v);var _=null;h._selections&&(h._selections[t]=x);var a=[function(){return r.length&&Promise.all(r)}];h.automargin&&p._redrawFromAutoMarginCount&&90===n?(_=90,a.push(function(){b(x,n)})):a.push(function(){if(b(x,v),y.length&&"x"===g&&!T(v)&&("log"!==h.type||"D"!==String(h.dtick).charAt(0))){var n=_=0,r=[];if(x.each(function(e){n=Math.max(n,e.fontSize);var t=h.l2p(e.x),e=me(this),e=Y.bBox(e.node());r.push({top:0,bottom:10,height:10,left:t-e.width/2,right:t+e.width/2+2,width:e.width+2})}),"boundaries"!==h.tickson&&!h.showdividers||m.secondary){for(var e=y.length,t=Math.abs((y[e-1].x-y[0].x)*h._m)/(e-1),a=h.ticklabelposition||"",i=function(e){return-1!==a.indexOf(e)},o=i("top"),s=i("left"),e=i("right"),l=i("bottom")||s||o||e?(h.tickwidth||0)+6:0,c=t<2.5*n||"multicategory"===h.type,u=0;u<r.length-1;u++)if(B.bBoxIntersect(r[u],r[u+1],l)){_=c?90:30;break}}else{var d=2;for(h.ticks&&(d+=h.tickwidth/2),u=0;u<r.length;u++){var f=y[u].xbnd,p=r[u];if(null!==f[0]&&p.left-h.l2p(f[0])<d||null!==f[1]&&h.l2p(f[1])-p.right<d){_=90;break}}}_&&b(x,_)}}),h._tickAngles&&a.push(function(){h._tickAngles[t]=null===_?T(v)?v:0:_});e=h._anchorAxis;e&&e.autorange&&we(h)&&!X(p,h._id)&&(p._insideTickLabelsAutorange||(p._insideTickLabelsAutorange={}),p._insideTickLabelsAutorange[e._name+".autorange"]=e.autorange,a.push(function(){x.each(function(e,t){var n=me(this);n.select(".text-math-group").empty()&&(h._vals[t].bb=Y.bBox(n.node()))})}));a=B.syncOrAsync(a);return a&&a.then&&f._promises.push(a),a},$.getPxPosition=function(e,t){var n,r=e._fullLayout._size,a=t._id.charAt(0),e=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===a?n={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:"y"===a&&(n={_offset:r.l+(t.position||0)*r.w,_length:0}),"top"===e||"left"===e?n._offset:"bottom"===e||"right"===e?n._offset+n._length:void 0},$.shouldShowZeroLine=function(e,t,n){var r=B.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===z)&&(he(t,0)||!function(e,i,t,n){var r=t._mainAxis;if(r){var a=e._fullLayout,o=i._id.charAt(0),s=$.counterLetter(i._id),l=i._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:i._length),a=a._plots[t._mainSubplot];if(!(a.mainplotinfo||a).overlays.length)return f(t);for(var c=$.list(e,s),u=0;u<c.length;u++){var d=c[u];if(d._mainAxis===r&&f(d))return!0}}function f(e){if(!e.showline||!e.linewidth)return!1;var t=Math.max((e.linewidth+i.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-l)<t}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;var r,a=e._linepositions||{};for(r in a)if(n(a[r][0])||n(a[r][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,a=t._id.charAt(0),i=0;i<n.length;i++){var o=n[i];if(!0===o.visible&&o.xaxis+o.yaxis===r){if(H.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[a])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===a)return!0}}return!1}(e,t))},$.clipEnds=function(t,e){return e.filter(function(e){return he(t,e.x)})},$.allowAutoMargin=function(e){for(var t=$.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(j.allowAutoMargin(e,ge(r)),r.mirror&&j.allowAutoMargin(e,ye(r))),H.getComponentMethod("rangeslider","isVisible")(r)&&j.allowAutoMargin(e,ve(r))}},$.swap=function(e,t){for(var n=function(e,t){var n,r,a,i=[];for(n=0;n<t.length;n++){var o=[],s=e._fullData[t[n]].xaxis,l=e._fullData[t[n]].yaxis;if(s&&l){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(s)&&-1===i[r].y.indexOf(l)||o.push(r);if(o.length){var c=i[o[0]];if(1<o.length)for(r=1;r<o.length;r++)a=i[o[r]],xe(c.x,a.x),xe(c.y,a.y);xe(c.x,[s]),xe(c.y,[l])}else i.push({x:[s],y:[l]})}}return i}(e,t),r=0;r<n.length;r++)!function(e,t,n){var r,a,i=[],o=[],s=e.layout;for(r=0;r<t.length;r++)i.push($.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push($.getFromId(e,n[r]));var l=Object.keys(b),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(r=0;r<l.length;r++){var d=l[r],f=i[0][d],p=o[0][d],h=!0,m=!1,g=!1;if("_"!==d.charAt(0)&&"function"!=typeof f&&-1===c.indexOf(d)){for(a=1;a<i.length&&h;a++){var y=i[a][d];"type"===d&&-1!==u.indexOf(f)&&-1!==u.indexOf(y)&&f!==y?m=!0:y!==f&&(h=!1)}for(a=1;a<o.length&&h;a++){var v=o[a][d];"type"===d&&-1!==u.indexOf(p)&&-1!==u.indexOf(v)&&p!==v?g=!0:o[a][d]!==p&&(h=!1)}h&&(m&&(s[i[0]._name].type="linear"),g&&(s[o[0]._name].type="linear"),function(e,t,n,r,a){var i,o=B.nestedProperty,s=o(e[n[0]._name],t).get(),l=o(e[r[0]._name],t).get();"title"===t&&(s&&s.text===a.x&&(s.text=a.y),l&&l.text===a.y&&(l.text=a.x));for(i=0;i<n.length;i++)o(e,n[i]._name+"."+t).set(l);for(i=0;i<r.length;i++)o(e,r[i]._name+"."+t).set(s)}(s,d,i,o,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var x=e._fullLayout.annotations[r];-1!==t.indexOf(x.xref)&&-1!==n.indexOf(x.yref)&&B.swapAttrs(s.annotations[r],["?"])}}(e,n[r].x,n[r].y)}},{"../../components/color":100,"../../components/drawing":122,"../../components/titles":198,"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"./autorange":275,"./axis_autotype":277,"./axis_ids":280,"./clean_ticks":282,"./layout_attributes":291,"./set_convert":297,"@plotly/d3":11,"fast-isnumeric":15}],277:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),r=e("../../lib"),d=e("../../constants/numerical").BADNUM,l=r.isArrayOrTypedArray,f=r.isDateTime,p=r.cleanNumber,h=Math.round;function m(e){return Math.max(1,(e-1)/1e3)}t.exports=function(e,t,n){var r=e,a=n.noMultiCategory;if(l(r)&&!r.length)return"-";if(!a&&(l((e=r)[0])&&l(e[1])))return"multicategory";if(a&&Array.isArray(r[0])){for(var i=[],o=0;o<r.length;o++)if(l(r[o]))for(var s=0;s<r[o].length;s++)i.push(r[o][s]);r=i}if(function(e,t){for(var n=e.length,r=m(n),a=0,i=0,o={},s=0;s<n;s+=r){var l=h(s),c=e[l],l=String(c);o[l]||(o[l]=1,f(c,t)&&a++,u(c)&&i++)}return 2*i<a}(r,t))return"date";n="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=m(n),a=0,i=0,o={},s=0;s<n;s+=r){var l=h(s),c=e[l],l=String(c);o[l]||(o[l]=1,"boolean"==(l=typeof c)?i++:(t?p(c)!==d:"number"==l)?a++:"string"==l&&i++)}return 2*a<i}(r,n)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(function(e,t){return t?u(e):"number"==typeof e}(e[r],t))return!0;return!1}(r,n)?"linear":"-"}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],278:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),g=e("../../registry"),y=e("../../lib"),v=e("../array_container_defaults"),x=e("./layout_attributes"),b=e("./tick_value_defaults"),_=e("./tick_mark_defaults"),w=e("./tick_label_defaults"),T=e("./category_order_defaults"),M=e("./line_grid_defaults"),k=e("./set_convert"),A=e("./constants").WEEKDAY_PATTERN,d=e("./constants").HOUR_PATTERN;function S(n,r,e){function t(e,t){return y.coerce(n,r,x.rangebreaks,e,t)}if(t("enabled")){var a=t("bounds");if(a&&2<=a.length){var i,o,s="";if(2===a.length)for(i=0;i<2;i++)if(o=f(a[i])){s=A;break}var l=t("pattern",s);if(l===A)for(i=0;i<2;i++)(o=f(a[i]))&&(r.bounds[i]=a[i]=o-1);if(l)for(i=0;i<2;i++)switch(o=a[i],l){case A:if(!u(o))return void(r.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||7<=o)return void(r.enabled=!1);r.bounds[i]=a[i]=o;break;case d:if(!u(o))return void(r.enabled=!1);if((o=+o)<0||24<o)return void(r.enabled=!1);r.bounds[i]=a[i]=o}!1===e.autorange&&((c=e.range)[0]<c[1]?a[0]<c[0]&&a[1]>c[1]&&(r.enabled=!1):a[0]>c[0]&&a[1]<c[1]&&(r.enabled=!1))}else{var c=t("values");c&&c.length?t("dvalue"):r.enabled=!1}}}t.exports=function(e,t,n,r,a){var i=r.letter,o=r.font||{},s=r.splomStash||{},l=n("visible",!r.visibleDflt),c=t._template||{},u=t.type||c.type||"-";"date"===u&&(g.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(d=n("ticklabelmode")));c="";r.noTicklabelposition&&"multicategory"!==u||(c=y.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===d?["outside","inside"]:"x"===i?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==c.indexOf("inside")?"hide past domain":"category"===u||"multicategory"===u?"allow":"hide past div"),k(t,a);var d=!t.isValidRange(e.range);!n("autorange",d=d&&r.reverseDflt?"reversed":d)||"linear"!==u&&"-"!==u||n("rangemode"),n("range"),t.cleanRange(),T(e,t,n,r),"category"===u||r.noHover||n("hoverformat");c=n("color"),d=c!==x.color.dflt?c:o.color,i=s.label||a._dfltTitle[i];if(w(e,t,n,u,r,{pass:1}),!l)return t;n("title.text",i),y.coerceFont(n,"title.font",{family:o.family,size:y.bigFont(o.size),color:d}),b(e,t,n,u),w(e,t,n,u,r,{pass:2}),_(e,t,n,r),M(e,t,n,{dfltColor:c,bgColor:r.bgColor,showGrid:r.showGrid,attributes:x}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin");var f,c="multicategory"===u;if(r.noTickson||"category"!==u&&!c||!t.ticks&&!t.showgrid||"boundaries"===n("tickson",f=c?"boundaries":f)&&delete t.ticklabelposition,c&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===u)if(v(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:S}),t.rangebreaks.length){for(var p=0;p<t.rangebreaks.length;p++)if(t.rangebreaks[p].pattern===A){t._hasDayOfWeekBreaks=!0;break}if(k(t,a),a._has("scattergl")||a._has("splom"))for(var h=0;h<r.data.length;h++){var m=r.data[h];"scattergl"!==m.type&&"splom"!==m.type||(m.visible=!1,y.warn(m.type+" traces do not work on axes with rangebreaks. Setting trace "+m.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};var r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function f(e){if("string"==typeof e)return r[e.substr(0,3).toLowerCase()]}},{"../../lib":230,"../../registry":313,"../array_container_defaults":271,"./category_order_defaults":281,"./constants":283,"./layout_attributes":291,"./line_grid_defaults":293,"./set_convert":297,"./tick_label_defaults":298,"./tick_mark_defaults":299,"./tick_value_defaults":300,"fast-isnumeric":15}],279:[function(e,t,n){"use strict";var e=e("../../constants/docs"),r=e.FORMAT_LINK,a=e.DATE_FORMAT_LINK;function i(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+r+"."].join(" ")}function o(e,t){return i(e,t)+[" And for dates see: "+a+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?i:o)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:i,descriptionWithDates:o}},{"../../constants/docs":207}],280:[function(e,t,u){"use strict";var o=e("../../registry"),a=e("./constants");function n(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}u.id2name=function(e){if("string"==typeof e&&e.match(a.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},u.name2id=function(e){if(e.match(a.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},u.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(a.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||n)){t=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},u.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var a=u.listIds(e,t),i=new Array(a.length);for(l=0;l<a.length;l++){var o=a[l];i[l]=r[o.charAt(0)+"axis"+o.substr(1)]}if(!n)for(var s=r._subplots.gl3d||[],l=0;l<s.length;l++){var c=r[s[l]];t?i.push(c[t+"axis"]):i.push(c.xaxis,c.yaxis,c.zaxis)}return i},u.listIds=function(e,t){e=e._fullLayout;if(!e)return[];e=e._subplots;return t?e[t+"axis"]:e.xaxis.concat(e.yaxis)},u.getFromId=function(e,t,n){e=e._fullLayout;return t=void 0===t||"string"!=typeof t?t:t.replace(" domain",""),"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),e[u.id2name(t)]},u.getFromTrace=function(e,t,n){var r,a=e._fullLayout,i=null;return o.traceIs(t,"gl3d")?"scene"===(r=t.scene).substr(0,5)&&(i=a[r][n+"axis"]):i=u.getFromId(e,t[n+"axis"]||n),i},u.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?r<n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},u.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},u.isLinked=function(e,t){return n(t,e._axisMatchGroups)||n(t,e._axisConstraintGroups)}},{"../../registry":313,"./constants":283}],281:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a,i;"category"===t.type&&(e=e.categoryarray,"array"===(a=n("categoryorder",a=(e=Array.isArray(e)&&0<e.length)?"array":a))&&(i=n("categoryarray")),"trace"===(a=!e&&"array"===a?t.categoryorder="trace":a)?t._initialCategories=[]:"array"===a?t._initialCategories=i.slice():(i=function(e,t){var n,r,a=t.dataAttr||e._id.charAt(0),i={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var o=t.data[r];o[a+"axis"]===e._id&&n.push(o)}for(r=0;r<n.length;r++)for(var s=n[r][a],l=0;l<s.length;l++){var c=s[l];null!=c&&(i[c]=1)}return Object.keys(i)}(t,r).sort(),"category ascending"===a?t._initialCategories=i:"category descending"===a&&(t._initialCategories=i.reverse())))}},{}],282:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),a=e("../../lib"),e=e("../../constants/numerical"),s=e.ONEDAY,i=e.ONEWEEK;n.dtick=function(e,t){var n="log"===t,r="date"===t,a="category"===t,i=r?s:1;if(!e)return i;if(o(e))return(e=Number(e))<=0?i:a?Math.max(1,Math.round(e)):r?Math.max(.1,e):e;if("string"!=typeof e||!r&&!n)return i;t=e.charAt(0),a=e.substr(1);return(a=o(a)?Number(a):0)<=0||!(r&&"M"===t&&a===Math.round(a)||n&&"L"===t||n&&"D"===t&&(1===a||2===a))?i:e},n.tick0=function(e,t,n,r){return"date"===t?a.cleanDate(e,a.dateTick0(n,r%i==0?1:0)):"D1"!==r&&"D2"!==r?o(e)?Number(e):0:void 0}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],283:[function(e,t,n){"use strict";e=e("../../lib/regex").counter;t.exports={idRegex:{x:e("x","( domain)?"),y:e("y","( domain)?")},attrRegex:e("[xy]axis"),xAxisMatch:e("xaxis"),yAxisMatch:e("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":246}],284:[function(e,t,n){"use strict";var T=e("../../lib"),O=e("./autorange"),P=e("./axis_ids").id2name,M=e("./layout_attributes"),I=e("./scale_zoom"),k=e("./set_convert"),R=e("../../constants/numerical").ALMOST_EQUAL,a=e("../../constants/alignment").FROM_BL;function A(e,t){var n=t.domain;return(n=n||e[P(t.overlaying)].domain)[1]-n[0]}function S(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function E(e,t,n,r){var a,i,o,s=S(e,t);null===s?((s={})[t]=1,o=e.length,e.push(s)):o=e.indexOf(s);for(var l=Object.keys(s),c=0;c<e.length;c++)if(a=e[c],c!==o&&a[n]){for(var u=a[n],d=0;d<l.length;d++)a[i=l[d]]=p(u,p(r,s[i]));return void e.splice(o,1)}if(1!==r)for(d=0;d<l.length;d++){var f=l[d];s[f]=p(r,s[f])}s[n]=1}function p(e,t){var n,r,a="",i="";"string"==typeof e&&(n=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(r));var o=e*t;return n||r?n&&r&&a.charAt(0)!==i.charAt(0)?n===r?o:(r<n?a.substr(r):i.substr(n))+o:a+i+e*t:o}function N(e,t){var n=e._inputDomain,r=a[e.constraintoward],r=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[r+(n[0]-r)/t,r+(n[1]-r)/t],e.setScale()}n.handleDefaults=function(e,n,t){for(var r,a,i,o,s=t.axIds,l=t.axHasImage,c=n._axisConstraintGroups=[],u=n._axisMatchGroups=[],d=0;d<s.length;d++)!function(n,r,e){var t=e.axIds,a=e.layoutOut,i=e.hasImage,o=a._axisConstraintGroups,s=a._axisMatchGroups,l=r._id,c=l.charAt(0),e=((a._splomAxes||{})[c]||{})[l]||{},u=r._id,c="x"===u.charAt(0);function d(e,t){return T.coerce(n,r,M,e,t)}r._matchGroup=null,r._constraintGroup=null,d("constrain",i?"domain":"range"),T.coerce(n,r,{constraintoward:{valType:"enumerated",values:c?["left","center","right"]:["bottom","middle","top"],dflt:c?"center":"middle"}},"constraintoward");var f,p,h=r.type,m=[];for(f=0;f<t.length;f++)(p=t[f])!==u&&a[P(p)].type===h&&m.push(p);var g=S(o,u);if(g){var y=[];for(f=0;f<m.length;f++)p=m[f],g[p]||y.push(p);m=y}var v,x,l=m.length;l&&(n.matches||e.matches)&&(v=T.coerce(n,r,{matches:{valType:"enumerated",values:m,dflt:-1!==m.indexOf(e.matches)?e.matches:void 0}},"matches"));i=i&&!c?r.anchor:void 0;l&&!v&&(n.scaleanchor||i)&&(x=T.coerce(n,r,{scaleanchor:{valType:"enumerated",values:m}},"scaleanchor",i));v?(r._matchGroup=E(s,u,v,1),b=a[P(v)],b=A(a,r)/A(a,b),c!=("x"===v.charAt(0))&&(b=(c?"x":"y")+b),E(o,u,v,b)):n.matches&&-1!==t.indexOf(n.matches)&&T.warn("ignored "+r._name+'.matches: "'+n.matches+'" to avoid an infinite loop');{var b;x?(b=(b=d("scaleratio"))||(r.scaleratio=1),E(o,u,x,b)):n.scaleanchor&&-1!==t.indexOf(n.scaleanchor)&&T.warn("ignored "+r._name+'.scaleanchor: "'+n.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}}(i=e[a=P(s[d])],o=n[a],{axIds:s,layoutOut:n,hasImage:l[a]});function f(e,t){for(d=0;d<e.length;d++)for(r in v=e[d])n[P(r)][t]=v}for(f(u,"_matchGroup"),d=0;d<c.length;d++)for(r in v=c[d])if((o=n[P(r)]).fixedrange){for(var p in v){p=P(p);!1===(e[p]||{}).fixedrange&&T.warn("fixedrange was specified as false for axis "+p+" but was overridden because another axis in its constraint group has fixedrange true"),n[p].fixedrange=!0}break}for(d=0;d<c.length;){for(r in v=c[d]){(o=n[P(r)])._matchGroup&&Object.keys(o._matchGroup).length===Object.keys(v).length&&(c.splice(d,1),d--);break}d++}f(c,"_constraintGroup");var h=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],m=!1,g=!1;function y(){w=o[_],"rangebreaks"===_&&(g=o._hasDayOfWeekBreaks)}for(d=0;d<u.length;d++)for(var v=u[d],x=0;x<h.length;x++){var b,_=h[x],w=null;for(r in v)if(i=e[a=P(r)],o=n[a],_ in o){if(!o.matches&&(b=o,_ in i)){y();break}null===w&&_ in i&&y()}if("range"===_&&w&&(m=!0),null!==(w=null===(w="autorange"===_&&null===w&&m?!1:w)&&_ in b?b[_]:w))for(r in v)(o=n[P(r)])[_]="range"===_?w.slice():w,"rangebreaks"===_&&(o._hasDayOfWeekBreaks=g,k(o,n))}},n.enforce=function(e){for(var t,n,r,a,i=e._fullLayout,o=i._axisConstraintGroups||[],s=0;s<o.length;s++){for(var l=function(e,t){for(var n=(t=t._size).h/t.w,r={},a=Object.keys(e),i=0;i<a.length;i++){var o=a[i];if("string"==typeof(c=e[o]))for(var s=c.match(/^[xy]*/)[0],l=s.length,c=+c.substr(l),u="y"===s.charAt(0)?n:1/n,d=0;d<l;d++)c*=u;r[o]=c}return r}(o[s],i),c=Object.keys(l),u=1/0,d=0,f=1/0,p={},h={},m=!1,g=0;g<c.length;g++)h[t=c[g]]=n=i[P(t)],n._inputDomain?n.domain=n._inputDomain.slice():n._inputDomain=n.domain.slice(),n._inputRange||(n._inputRange=n.range.slice()),n.setScale(),p[t]=r=Math.abs(n._m)/l[t],u=Math.min(u,r),"domain"!==n.constrain&&n._constraintShrinkable||(f=Math.min(f,r)),delete n._constraintShrinkable,d=Math.max(d,r),"domain"===n.constrain&&(m=!0);if(!(R*d<u)||m)for(g=0;g<c.length;g++)if(r=p[t=c[g]],b=(n=h[t]).constrain,r!==f||"domain"===b)if(a=r/f,"range"===b)I(n,a);else{var y=n._inputDomain,v=(n.domain[1]-n.domain[0])/(y[1]-y[0]),x=(n.r2l(n.range[1])-n.r2l(n.range[0]))/(n.r2l(n._inputRange[1])-n.r2l(n._inputRange[0]));if((a/=v)*x<1)n.domain=n._input.domain=y.slice(),I(n,a);else{if(x<1&&(n.range=n._input.range=n._inputRange.slice(),a*=x),n.autorange){var b=n.r2l(n.range[0]),v=n.r2l(n.range[1]),y=(b+v)/2,_=y,w=y,x=Math.abs(v-y),T=y-x*a*1.0001,M=y+x*a*1.0001,k=O.makePadFn(i,n,0),A=O.makePadFn(i,n,1);N(n,a);for(var S,E=Math.abs(n._m),y=O.concatExtremes(e,n),L=y.min,C=y.max,D=0;D<L.length;D++)T<(S=L[D].val-k(L[D])/E)&&S<_&&(_=S);for(D=0;D<C.length;D++)(S=C[D].val+A(C[D])/E)<M&&w<S&&(w=S);a/=(w-_)/(2*x),_=n.l2r(_),w=n.l2r(w),n.range=n._input.range=b<v?[_,w]:[w,_]}N(n,a)}}}},n.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++)if(n[r][t])return"g"+r;return t},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,a=e._fullLayout._axisConstraintGroups,i=0;i<a.length;i++)if(a[i][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"./autorange":275,"./axis_ids":280,"./layout_attributes":291,"./scale_zoom":295,"./set_convert":297}],285:[function(e,t,n){"use strict";var he=e("@plotly/d3"),me=e("tinycolor2"),r=e("has-passive-events"),ge=e("../../registry"),ye=e("../../lib"),i=ye.strTranslate,ve=e("../../lib/svg_text_utils"),a=e("../../components/color"),xe=e("../../components/drawing"),be=e("../../components/fx"),_e=e("./axes"),o=e("../../lib/setcursor"),we=e("../../components/dragelement"),s=e("../../components/dragelement/helpers"),Te=s.selectingOrDrawing,Me=s.freeMode,ke=e("../../constants/alignment").FROM_TL,Ae=e("../../lib/clear_gl_canvases"),Se=e("../../plot_api/subroutines").redrawReglTraces,Ee=e("../plots"),Le=e("./axis_ids").getFromId,Ce=e("./select").prepSelect,De=e("./select").clearSelect,Oe=e("./select").selectOnClick,Pe=e("./scale_zoom"),Ie=e("./constants"),Re=Ie.MINDRAG,Ne=Ie.MINZOOM,l=!0;function c(t,e,n,r){n=ye.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return n.call(o,r),n.node()}function ze(e,t,n,r,a,i,o){n=c(e,"rect",t,n);return he.select(n).call(xe.setRect,r,a,i,o),n}function Fe(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function je(e,t,n,r,a){for(var i=0;i<e.length;i++){var o,s,l=e[i];l.fixedrange||(l.rangebreaks?(s=(o="y"===l._id.charAt(0))?1-n:n,r[l._name+".range[0]"]=l.l2r(l.p2l((o?1-t:t)*l._length)),r[l._name+".range[1]"]=l.l2r(l.p2l(s*l._length))):(o=l._rl[0],s=l._rl[1]-o,r[l._name+".range[0]"]=l.l2r(o+s*t),r[l._name+".range[1]"]=l.l2r(o+s*n)))}a&&a.length&&je(a,a=(t+(1-n))/2,1-a,r,[])}function He(e,t){for(var n=0;n<e.length;n++){var r,a=e[n];a.fixedrange||(a.rangebreaks?(r=a._length,r=(a.p2l(0+t)-a.p2l(0)+(a.p2l(r+t)-a.p2l(r)))/2,a.range=[a.l2r(a._rl[0]-r),a.l2r(a._rl[1]-r)]):a.range=[a.l2r(a._rl[0]-t/a._m),a.l2r(a._rl[1]-t/a._m)])}}function Be(e,t,n,r,a){return e.append("path").attr("class","zoombox").style({fill:.2<t?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(n,r)).attr("d",a+"Z")}function qe(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(t,n)).attr("d","M0,0Z")}function Ue(e,t,n,r,a,i){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),u(e,t,a,i)}function u(e,t,n,r){n||(e.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function Ye(e){he.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Ve(e){l&&e.data&&e._context.showTips&&(ye.notifier(ye._(e,"Double-click to zoom back out"),"long"),l=!1)}function Ge(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,Ne)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function We(e,t,n,r,a){for(var i,o,s,l,c=!1,u={},d={},f=(a||{}).xaHash,p=(a||{}).yaHash,h=0;h<t.length;h++){var m=t[h];for(i in n)if(m[i]){for(s in m)a&&(f[s]||p[s])||("x"===s.charAt(0)?n:r)[s]||(u[s]=i);for(o in r)a&&(f[o]||p[o])||!m[o]||(c=!0)}for(o in r)if(m[o])for(l in m)a&&(f[l]||p[l])||("x"===l.charAt(0)?n:r)[l]||(d[l]=o)}c&&(ye.extendFlat(u,d),d={});var g={},y=[];for(s in u){var v=Le(e,s);y.push(v),g[v._id]=v}var x={},b=[];for(l in d){var _=Le(e,l);b.push(_),x[_._id]=_}return{xaHash:g,yaHash:x,xaxes:y,yaxes:b,xLinks:u,yLinks:d,isSubplotConstrained:c}}function Ze(e,t){var n;r?(n=void 0!==e.onwheel?"wheel":"mousewheel",e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})):void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function $e(e){var t,n=[];for(t in e)n.push(e[t]);return n}t.exports={makeDragBox:function(v,s,e,t,n,r,x,b){var _,w,T,M,l,c,i,o,u,d,f,k,A,S,p,E,L,C,D,O,h,m,g,y=v._fullLayout._zoomlayer,P=x+b==="nsew",I=1===(x+b).length;function R(){if(_=s.xaxis,w=s.yaxis,u=_._length,d=w._length,i=_._offset,o=w._offset,(T={})[_._id]=_,(M={})[w._id]=w,x&&b)for(var e=s.overlays,t=0;t<e.length;t++){var n=e[t].xaxis;T[n._id]=n;n=e[t].yaxis;M[n._id]=n}l=$e(T),c=$e(M),A=Fe(l,b),S=Fe(c,x),p=!S&&!A,k=We(v,v._fullLayout._axisMatchGroups,T,M);var r=(f=We(v,v._fullLayout._axisConstraintGroups,T,M,k)).isSubplotConstrained||k.isSubplotConstrained;E=b||r,L=x||r;r=v._fullLayout;C=r._has("scattergl"),D=r._has("splom"),O=r._has("svg")}R();var a,N,z=(a=S+A,z=v._fullLayout.dragmode,N=P,a?"nsew"!==a?a.toLowerCase()+"-resize":N?"":"pan"===z?"move":"crosshair":"pointer"),F=ze(s,x+b+"drag",z,e,t,n,r);if(p&&!P)return F.onmousedown=null,F.style.pointerEvents="none",F;var j,H,B,q,U,Y,V,G,W,Z,$={element:F,gd:v,plotinfo:s};function X(){$.plotinfo.selection=!1,De(v)}function J(e,t){var n,r,a,i,o=$.gd;0<=o._fullLayout._activeShapeIndex?o._fullLayout._deactivateShape(o):(i=o._fullLayout.clickmode,Ye(o),2!==e||I||function(){if(!v._transitioningWithDuration){var e=v._context.doubleClick,t=[];A&&(t=t.concat(l)),S&&(t=t.concat(c)),k.xaxes&&(t=t.concat(k.xaxes)),k.yaxes&&(t=t.concat(k.yaxes));var n,r,a,i={};if("reset+autosize"===e)for(e="autosize",r=0;r<t.length;r++)if((n=t[r])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}if("autosize"===e)for(r=0;r<t.length;r++)(n=t[r]).fixedrange||(i[n._name+".autorange"]=!0);else if("reset"===e)for((A||f.isSubplotConstrained)&&(t=t.concat(f.xaxes)),S&&!f.isSubplotConstrained&&(t=t.concat(f.yaxes)),f.isSubplotConstrained&&(A?S||(t=t.concat(c)):t=t.concat(l)),r=0;r<t.length;r++)(n=t[r]).fixedrange||(n._rangeInitial?(a=n._rangeInitial,i[n._name+".range[0]"]=a[0],i[n._name+".range[1]"]=a[1]):i[n._name+".autorange"]=!0);v.emit("plotly_doubleclick",null),ge.call("_guiRelayout",v,i)}}(),P?(-1<i.indexOf("select")&&Oe(t,o,l,c,s.id,$),-1<i.indexOf("event")&&be.click(o,t,s.id)):1===e&&I&&(r=(n=x?w:_)._name+".range["+(i="s"===x||"w"===b?0:1)+"]",t=i,i=(e=n).range[t],t=Math.abs(i-e.range[1-t]),t="date"===e.type?i:"log"===e.type?(a=Math.ceil(Math.max(0,-Math.log(t)/Math.LN10))+3,he.format("."+a+"g")(Math.pow(10,i))):(a=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(t)/Math.LN10)+4,he.format("."+String(a)+"g")(i)),a="left",i="middle",n.fixedrange||(x?(i="n"===x?"top":"bottom","right"===n.side&&(a="right")):"e"===b&&(a="right"),o._context.showAxisRangeEntryBoxes&&he.select(F).call(ve.makeEditable,{gd:o,immediate:!0,background:o._fullLayout.paper_bgcolor,text:String(t),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:a,verticalAlign:i}).on("edit",function(e){e=n.d2r(e);void 0!==e&&ge.call("_guiRelayout",o,r,e)}))))}function K(e,t){if(v._transitioningWithDuration)return!1;var n,r,a=Math.max(0,Math.min(u,m*e+j)),i=Math.max(0,Math.min(d,g*t+H)),e=Math.abs(a-j),t=Math.abs(i-H);function o(){V="",B.r=B.l,B.t=B.b,W.attr("d","M0,0Z")}B.l=Math.min(j,a),B.r=Math.max(j,a),B.t=Math.min(H,i),B.b=Math.max(H,i),f.isSubplotConstrained?Ne<e||Ne<t?(V="xy",t/d<e/u?(t=e*d/u,i<H?B.t=H-t:B.b=H+t):(e=t*u/d,a<j?B.l=j-e:B.r=j+e),W.attr("d",Ge(B))):o():k.isSubplotConstrained?Ne<e||Ne<t?(V="xy",r=Math.min(B.l/u,(d-B.b)/d),n=Math.max(B.r/u,(d-B.t)/d),B.l=r*u,B.r=n*u,B.b=(1-r)*d,B.t=(1-n)*d,W.attr("d",Ge(B))):o():!S||t<Math.min(Math.max(.6*e,Re),Ne)?e<Re||!A?o():(B.t=0,B.b=d,V="x",W.attr("d",(r=H,"M"+((n=B).l-.5)+","+(r-Ne-.5)+"h-3v"+(2*Ne+1)+"h3ZM"+(n.r+.5)+","+(r-Ne-.5)+"h3v"+(2*Ne+1)+"h-3Z"))):!A||e<Math.min(.6*t,Ne)?(B.l=0,B.r=u,V="y",W.attr("d","M"+((e=j)-Ne-.5)+","+((t=B).t-.5)+"v-3h"+(2*Ne+1)+"v3ZM"+(e-Ne-.5)+","+(t.b+.5)+"v3h"+(2*Ne+1)+"v-3Z")):(V="xy",W.attr("d",Ge(B))),B.w=B.r-B.l,B.h=B.b-B.t,V&&(Z=!0),v._dragged=Z,Ue(G,W,B,U,Y,q),Q(),v.emit("plotly_relayouting",h),Y=!0}function Q(){h={},"xy"!==V&&"x"!==V||(je(l,B.l/u,B.r/u,h,f.xaxes),se("x",h)),"xy"!==V&&"y"!==V||(je(c,(d-B.b)/d,(d-B.t)/d,h,f.yaxes),se("y",h))}function ee(){Q(),Ye(v),ce(),Ve(v)}$.prepFn=function(e,t,n){var r=$.dragmode,a=v._fullLayout.dragmode;a!==r&&($.dragmode=a),R(),m=v._fullLayout._invScaleX,g=v._fullLayout._invScaleY,p||(P?e.shiftKey?"pan"===a?a="zoom":Te(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),Me(a)?$.minDrag=1:$.minDrag=void 0,Te(a)?($.xaxes=l,$.yaxes=c,Ce(e,t,n,$,a)):($.clickFn=J,Te(r)&&X(),p||("zoom"===a?($.moveFn=K,$.doneFn=ee,$.minDrag=1,function(e,t){var n=F.getBoundingClientRect();j=e-n.left,H=t-n.top,v._fullLayout._calcInverseTransform(v);n=ye.apply3DTransform(v._fullLayout._invTransform)(j,H);j=n[0],H=n[1],B={l:j,r:j,w:0,t:H,b:H,h:0},q=v._hmpixcount?v._hmlumcount/v._hmpixcount:me(v._fullLayout.plot_bgcolor).getLuminance(),V="xy",Z=Y=!1,G=Be(y,q,i,o,U="M0,0H"+u+"V"+d+"H0V0"),W=qe(y,i,o)}(t,n)):"pan"===a&&($.moveFn=oe,$.doneFn=ce))),v._fullLayout._redrag=function(){var e,t=v._dragdata;t&&t.element===F&&(e=v._fullLayout.dragmode,Te(e)||(R(),ue([0,0,u,d]),$.moveFn(t.dx,t.dy)))}},we.init($);var te=[0,0,u,d],ne=null,re=Ie.REDRAWDELAY,ae=s.mainplot?v._fullLayout._plots[s.mainplot]:s;function ie(e){if(v._context._scrollZoom.cartesian||v._fullLayout._enablescrollzoom){if(X(),v._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();R(),clearTimeout(ne);var t=-e.deltaY;if(isFinite(t)||(t=e.wheelDelta/10),isFinite(t)){var n,r=Math.exp(-Math.min(Math.max(t,-20),20)/200),t=ae.draglayer.select(".nsewdrag").node().getBoundingClientRect(),a=(e.clientX-t.left)/t.width,i=(t.bottom-e.clientY)/t.height;if(E){for(b||(a=.5),n=0;n<l.length;n++)o(l[n],a,r);se("x"),te[2]*=r,te[0]+=te[2]*a*(1/r-1)}if(L){for(x||(i=.5),n=0;n<c.length;n++)o(c[n],i,r);se("y"),te[3]*=r,te[1]+=te[3]*(1-i)*(1/r-1)}ue(te),le(),v.emit("plotly_relayouting",h),ne=setTimeout(function(){v._fullLayout&&(te=[0,0,u,d],ce())},re),e.preventDefault()}else ye.log("Did not find wheel motion attributes: ",e)}function o(t,e,n){var r,a;t.fixedrange||(r=ye.simpleMap(t.range,t.r2l),a=r[0]+(r[1]-r[0])*e,t.range=r.map(function(e){return t.l2r(a+(e-a)*n)}))}}function oe(e,t){if(e*=m,t*=g,!v._transitioningWithDuration){if(v._fullLayout._replotting=!0,"ew"===A||"ns"===S){var n=A?-e:0,r=S?-t:0;return k.isSubplotConstrained&&(A&&S&&(n=-(e=(i=(e/u-t/d)/2)*u),r=-(t=-i*d)),S?n=-r*u/d:r=-n*d/u),A&&(He(l,e),se("x")),S&&(He(c,t),se("y")),ue([n,r,u,d]),le(),void v.emit("plotly_relayouting",h)}var a,i="w"===A==("n"===S)?1:-1;if(A&&S&&(f.isSubplotConstrained||k.isSubplotConstrained)&&(e=(o=(e/u+i*t/d)/2)*u,t=i*o*d),"w"===A?e=s(l,0,e):"e"===A?e=s(l,1,-e):A||(e=0),"n"===S?t=s(c,1,t):"s"===S?t=s(c,0,-t):S||(t=0),n="w"===A?e:0,r="n"===S?t:0,f.isSubplotConstrained&&!k.isSubplotConstrained||k.isSubplotConstrained&&A&&S&&0<i){if(k.isSubplotConstrained||!A&&1===S.length){for(a=0;a<l.length;a++)l[a].range=l[a]._r.slice(),Pe(l[a],1-t/d);n=(e=t*u/d)/2}if(k.isSubplotConstrained||!S&&1===A.length){for(a=0;a<c.length;a++)c[a].range=c[a]._r.slice(),Pe(c[a],1-e/u);r=(t=e*d/u)/2}}k.isSubplotConstrained&&S||se("x"),k.isSubplotConstrained&&A||se("y");var o=u-e,i=d-t;!k.isSubplotConstrained||A&&S||(A?(r=n?0:e*d/u,i=o*d/u):(n=r?0:t*u/d,o=i*u/d)),ue([n,r,o,i]),le(),v.emit("plotly_relayouting",h)}function s(e,t,n){for(var r=1-t,a=0;a<e.length;a++){var i,o,s,l=e[a];l.fixedrange||(o=(i=l)._rl[r]+(l._rl[t]-l._rl[r])/(1-(0<=(s=n/l._length)?Math.min(s,.9):1/(1/Math.max(s,-.3)+3.222))),!1!==(s=l.l2r(o))&&void 0!==s&&(l.range[t]=s))}return i._length*(i._rl[t]-o)/(i._rl[t]-i._rl[r])}}function se(e,t){for(var n=k.isSubplotConstrained?{x:c,y:l}[e]:k[e+"axes"],r=k.isSubplotConstrained?{x:l,y:c}[e]:[],a=0;a<n.length;a++){var i=n[a],o=i._id,o=k.xLinks[o]||k.yLinks[o],o=r[0]||T[o]||M[o];o&&(t?(t[i._name+".range[0]"]=t[o._name+".range[0]"],t[i._name+".range[1]"]=t[o._name+".range[1]"]):i.range=o.range.slice())}}function le(){var t,n=[];function e(e){for(t=0;t<e.length;t++)e[t].fixedrange||n.push(e[t]._id)}for(E&&(e(l),e(f.xaxes),e(k.xaxes)),L&&(e(c),e(f.yaxes),e(k.yaxes)),h={},t=0;t<n.length;t++){var r=n[t],r=Le(v,r);_e.drawOne(v,r,{skipTitle:!0}),h[r._name+".range[0]"]=r.range[0],h[r._name+".range[1]"]=r.range[1]}_e.redrawComponents(v,n)}function ce(){ue([0,0,u,d]),ye.syncOrAsync([Ee.previousPromises,function(){v._fullLayout._replotting=!1,ge.call("_guiRelayout",v,h)}],v)}function ue(e){var t=v._fullLayout,n=t._plots,r=t._subplots.cartesian;if(D&&ge.subplotsRegistry.splom.drag(v),C)for(d=0;d<r.length;d++){var a,i,o,s=(o=n[r[d]]).xaxis,l=o.yaxis;o._scene&&(a=ye.simpleMap(s.range,s.r2l),i=ye.simpleMap(l.range,l.r2l),o._scene.update({range:[a[0],i[0],a[1],i[1]]}))}if((D||C)&&(Ae(v),Se(v)),O)for(var c=e[2]/_._length,u=e[3]/w._length,d=0;d<r.length;d++){s=(o=n[r[d]]).xaxis,l=o.yaxis;var f,p,h=(E||k.isSubplotConstrained)&&!s.fixedrange&&T[s._id],m=(L||k.isSubplotConstrained)&&!l.fixedrange&&M[l._id],g=h?(f=c,b||k.isSubplotConstrained?e[0]:pe(s,f)):k.xaHash[s._id]?(f=c,e[0]*s._length/_._length):k.yaHash[s._id]?(f=u,"ns"===S?-e[1]*s._length/w._length:pe(s,f,{n:"top",s:"bottom"}[S])):fe(s,f=de(s,c,u)),y=m?(p=u,x||k.isSubplotConstrained?e[1]:pe(l,p)):k.yaHash[l._id]?(p=u,e[1]*l._length/w._length):k.xaHash[l._id]?(p=c,"ew"===A?-e[0]*l._length/_._length:pe(l,p,{e:"right",w:"left"}[A])):fe(l,p=de(l,c,u));(f||p)&&(h=s._offset-g/(f=f||1),m=l._offset-y/(p=p||1),o.clipRect.call(xe.setTranslate,g,y).call(xe.setScale,f,p),o.plot.call(xe.setTranslate,h,m).call(xe.setScale,1/f,1/p),f===o.xScaleFactor&&p===o.yScaleFactor||(xe.setPointGroupScale(o.zoomScalePts,f,p),xe.setTextPointsScale(o.zoomScaleTxt,f,p)),xe.hideOutsideRangePoints(o.clipOnAxisFalseTraces,o),o.xScaleFactor=f,o.yScaleFactor=p)}}function de(e,t,n){return e.fixedrange?0:E&&f.xaHash[e._id]?t:L&&(f.isSubplotConstrained?f.xaHash:f.yaHash)[e._id]?n:0}function fe(e,t){return t?(e.range=e._r.slice(),Pe(e,t),pe(e,t)):0}function pe(e,t,n){return e._length*(1-t)*ke[n||e.constraintoward||"middle"]}return x.length*b.length!=1&&Ze(F,ie),F},makeDragger:c,makeRectDragger:ze,makeZoombox:Be,makeCorners:qe,updateZoombox:Ue,xyCorners:Ge,transitionZoombox:u,removeZoombox:Ye,showDoubleClickNotifier:Ve,attachWheelEventHandler:Ze}},{"../../components/color":100,"../../components/dragelement":119,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../constants/alignment":205,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/subroutines":266,"../../registry":313,"../plots":311,"./axes":276,"./axis_ids":280,"./constants":283,"./scale_zoom":295,"./select":296,"@plotly/d3":11,"has-passive-events":47,tinycolor2:65}],286:[function(e,t,n){"use strict";var r=e("@plotly/d3"),l=e("../../components/fx"),c=e("../../components/dragelement"),a=e("../../lib/setcursor"),u=e("./dragbox").makeDragBox,d=e("./constants").DRAGGERSIZE;n.initInteractions=function(o){var e,s=o._fullLayout;o._context.staticPlot?r.select(o).selectAll(".drag").remove():(s._has("cartesian")||s._has("splom"))&&(Object.keys(s._plots||{}).sort(function(e,t){if((s._plots[e].mainplot&&!0)!==(s._plots[t].mainplot&&!0))return s._plots[e].mainplot?1:-1;e=e.split("y"),t=t.split("y");return e[0]===t[0]?Number(e[1]||1)-Number(t[1]||1):Number(e[0]||1)-Number(t[0]||1)}).forEach(function(t){var n,e,r=s._plots[t],a=r.xaxis,i=r.yaxis;r.mainplot||((n=u(o,r,a._offset,i._offset,a._length,i._length,"ns","ew")).onmousemove=function(e){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===t&&o._fullLayout._plots[t]&&l.hover(o,e,t)},l.hover(o,e,t),o._fullLayout._lasthover=n,o._fullLayout._hoversubplot=t},n.onmouseout=function(e){o._dragging||(o._fullLayout._hoversubplot=null,c.unhover(o,e))},o._context.showAxisDragHandles&&(u(o,r,a._offset-d,i._offset-d,d,d,"n","w"),u(o,r,a._offset+a._length,i._offset-d,d,d,"n","e"),u(o,r,a._offset-d,i._offset+i._length,d,d,"s","w"),u(o,r,a._offset+a._length,i._offset+i._length,d,d,"s","e"))),o._context.showAxisDragHandles&&(t===a._mainSubplot&&(e=a._mainLinePosition,"top"===a.side&&(e-=d),u(o,r,a._offset+.1*a._length,e,.8*a._length,d,"","ew"),u(o,r,a._offset,e,.1*a._length,d,"","w"),u(o,r,a._offset+.9*a._length,e,.1*a._length,d,"","e")),t===i._mainSubplot&&(a=i._mainLinePosition,"right"!==i.side&&(a-=d),u(o,r,a,i._offset+.1*i._length,d,.8*i._length,"ns",""),u(o,r,a,i._offset+.9*i._length,d,.1*i._length,"s",""),u(o,r,a,i._offset,d,.1*i._length,"n","")))}),(e=s._hoverlayer.node()).onmousemove=function(e){e.target=o._fullLayout._lasthover,l.hover(o,e,s._hoversubplot)},e.onclick=function(e){e.target=o._fullLayout._lasthover,l.click(o,e)},e.onmousedown=function(e){o._fullLayout._lasthover.onmousedown(e)},n.updateFx(o))},n.updateFx=function(e){var t=e._fullLayout,e="pan"===t.dragmode?"move":"crosshair";a(t._draggers,e)}},{"../../components/dragelement":119,"../../components/fx":140,"../../lib/setcursor":250,"./constants":283,"./dragbox":285,"@plotly/d3":11}],287:[function(e,t,n){"use strict";t.exports={clearOutlineControllers:function(e){(e=e._fullLayout._zoomlayer)&&e.selectAll(".outline-controllers").remove()},clearSelect:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}}},{}],288:[function(e,t,n){"use strict";var r=e("../../lib").strTranslate;function a(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}t.exports={p2r:a,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(t){var n="y"===t._id.charAt(0)?1:0;return function(e){return a(t,e[n])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},{"../../lib":230}],289:[function(e,t,n){"use strict";var g=e("../../registry"),y=e("../../lib"),v=e("./axis_ids");t.exports=function(m){return function(e,t){var n=e[m];if(Array.isArray(n))for(var r=g.subplotsRegistry.cartesian,a=r.idRegex,e=t._subplots,i=e.xaxis,o=e.yaxis,s=e.cartesian,l=t._has("cartesian")||t._has("gl2d"),c=0;c<n.length;c++){var u,d,f,p,h=n[c];y.isPlainObject(h)&&(u=v.cleanId(h.xref,"x",!1),d=v.cleanId(h.yref,"y",!1),f=a.x.test(u),p=a.y.test(d),(f||p)&&(l||y.pushUnique(t._basePlotModules,r),h=!1,f&&-1===i.indexOf(u)&&(i.push(u),h=!0),p&&-1===o.indexOf(d)&&(o.push(d),h=!0),h&&f&&p&&s.push(u+d)))}}}},{"../../lib":230,"../../registry":313,"./axis_ids":280}],290:[function(e,t,n){"use strict";var v=e("@plotly/d3"),x=e("../../registry"),p=e("../../lib"),r=e("../plots"),b=e("../../components/drawing"),_=e("../get_data").getModuleCalcData,m=e("./axis_ids"),w=e("./constants"),a=e("../../constants/xmlns_namespaces"),u=p.ensureSingle;function d(e,t,n){return p.ensureSingle(e,t,n,function(e){e.datum(n)})}function g(r,a,e,i,o){for(var t=w.traceLayerClasses,n=r._fullLayout,s=n._modules,l=[],c=[],u=0;u<s.length;u++){var d,f,p,h,m=(d=s[u]).name,g=x.modules[m].categories;g.svg&&(f=d.layerName||m+"layer",p=d.plot,h=(m=_(e,p))[0],e=m[1],h.length&&l.push({i:t.indexOf(f),className:f,plotMethod:p,cdModule:h}),g.zoomScale&&c.push("."+f))}l.sort(function(e,t){return e.i-t.i});var y=a.plot.selectAll("g.mlayer").data(l,function(e){return e.className});y.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0).classed("rangeplot",a.isRangePlot),y.exit().remove(),y.order(),y.each(function(e){var t=v.select(this),n=e.className;e.plotMethod(r,a,e.cdModule,t,i,o),-1===w.clipOnAxisFalseQuery.indexOf("."+n)&&b.setClipUrl(t,a.layerClipId,r)}),n._has("scattergl")&&(d=x.getModule("scattergl"),h=_(e,d)[0],d.plot(r,a,h)),r._context.staticPlot||(a._hasClipOnAxisFalse&&(a.clipOnAxisFalseTraces=a.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),c.length&&(n=a.plot.selectAll(c.join(",")).selectAll(".trace"),a.zoomScalePts=n.selectAll("path.point"),a.zoomScaleTxt=n.selectAll(".textpoint")))}function i(e,t){var n,r,a,i=t.plotgroup,o=t.id,s=w.layerValue2layerClass[t.xaxis.layer],l=w.layerValue2layerClass[t.yaxis.layer],c=e._fullLayout._hasOnlyLargeSploms;t.mainplot?(r=(n=t.mainplotinfo).plotgroup,e=o+"-x",a=o+"-y",t.gridlayer=n.gridlayer,t.zerolinelayer=n.zerolinelayer,u(n.overlinesBelow,"path",e),u(n.overlinesBelow,"path",a),u(n.overaxesBelow,"g",e),u(n.overaxesBelow,"g",a),t.plot=u(n.overplot,"g",o),u(n.overlinesAbove,"path",e),u(n.overlinesAbove,"path",a),u(n.overaxesAbove,"g",e),u(n.overaxesAbove,"g",a),t.xlines=r.select(".overlines-"+s).select("."+e),t.ylines=r.select(".overlines-"+l).select("."+a),t.xaxislayer=r.select(".overaxes-"+s).select("."+e),t.yaxislayer=r.select(".overaxes-"+l).select("."+a)):c?(t.xlines=u(i,"path","xlines-above"),t.ylines=u(i,"path","ylines-above"),t.xaxislayer=u(i,"g","xaxislayer-above"),t.yaxislayer=u(i,"g","yaxislayer-above")):(a=u(i,"g","layer-subplot"),t.shapelayer=u(a,"g","shapelayer"),t.imagelayer=u(a,"g","imagelayer"),t.gridlayer=u(i,"g","gridlayer"),t.zerolinelayer=u(i,"g","zerolinelayer"),u(i,"path","xlines-below"),u(i,"path","ylines-below"),t.overlinesBelow=u(i,"g","overlines-below"),u(i,"g","xaxislayer-below"),u(i,"g","yaxislayer-below"),t.overaxesBelow=u(i,"g","overaxes-below"),t.plot=u(i,"g","plot"),t.overplot=u(i,"g","overplot"),t.xlines=u(i,"path","xlines-above"),t.ylines=u(i,"path","ylines-above"),t.overlinesAbove=u(i,"g","overlines-above"),u(i,"g","xaxislayer-above"),u(i,"g","yaxislayer-above"),t.overaxesAbove=u(i,"g","overaxes-above"),t.xlines=i.select(".xlines-"+s),t.ylines=i.select(".ylines-"+l),t.xaxislayer=i.select(".xaxislayer-"+s),t.yaxislayer=i.select(".yaxislayer-"+l)),c||(d(t.gridlayer,"g",t.xaxis._id),d(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(m.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function y(e,t){if(e){var n,r={};for(n in e.each(function(e){e=e[0];v.select(this).remove(),T(e,t),r[e]=!0}),t._plots)for(var a=t._plots[n].overlays||[],i=0;i<a.length;i++){var o=a[i];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function T(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=w.idRegex,n.attrRegex=w.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){for(var n,r,t=t._subplots,a=t.xaxis,i=t.yaxis,o=t.cartesian,s=o.concat(t.gl2d||[]),l={},c={},u=0;u<s.length;u++){var d=s[u].split("y");c["y"+d[l[d[0]]=1]]=1}for(u=0;u<a.length;u++)l[n=a[u]]||(r=(e[m.id2name(n)]||{}).anchor,w.idRegex.y.test(r)||(r="y"),o.push(n+r),s.push(n+r),c[r]||(c[r]=1,p.pushUnique(i,r)));for(u=0;u<i.length;u++)c[r=i[u]]||(n=(e[m.id2name(r)]||{}).anchor,w.idRegex.x.test(n)||(n="x"),o.push(n+r),s.push(n+r),l[n]||(l[n]=1,p.pushUnique(a,n)));if(!s.length){for(var f in r=n="",e)w.attrRegex.test(f)&&("x"===f.charAt(0)?(!n||+f.substr(5)<+n.substr(5))&&(n=f):(!r||+f.substr(5)<+r.substr(5))&&(r=f));n=n?m.name2id(n):"x",r=r?m.name2id(r):"y",a.push(n),i.push(r),o.push(n+r)}},n.plot=function(e,t,n,r){var a,i=e._fullLayout,o=i._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],a=0;a<s.length;a++)t.push(a);for(a=0;a<o.length;a++){for(var l,c=o[a],u=i._plots[c],d=[],f=0;f<s.length;f++){var p=s[f],h=p[0].trace;h.xaxis+h.yaxis===c&&(-1===t.indexOf(h.index)&&!h.carpet||(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(h.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(p)),l=p)}g(e,u,d,n,r)}},n.clean=function(e,t,n,r){var a,i,o=r._plots||{},s=t._plots||{},l=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(i in o)(a=o[i]).plotgroup&&a.plotgroup.remove();var c=r._has&&r._has("gl"),u=t._has&&t._has("gl");if(c&&!u)for(i in o)(a=o[i])._scene&&a._scene.destroy();if(l.xaxis&&l.yaxis)for(var d=m.listIds({_fullLayout:r}),f=0;f<d.length;f++){var p=d[f];t[m.id2name(p)]||r._infolayer.selectAll(".g-"+p+"title").remove()}c=r._has&&r._has("cartesian"),u=t._has&&t._has("cartesian");if(c&&!u)y(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(l.cartesian)for(f=0;f<l.cartesian.length;f++){var h=l.cartesian[f];s[h]||(r._cartesianlayer.selectAll("."+h+",."+h+"-x,."+h+"-y").remove(),T(h,r))}},n.drawFramework=function(n){var r=n._fullLayout,e=function(e){var t,n,r,a,i,o,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){r=l[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var f=i._mainAxis,p=o._mainAxis,f=f._id+p._id,p=s._plots[f];a.overlays=[],f!==r&&p?(a.mainplot=f,a.mainplotinfo=p,d.push(r)):(a.mainplot=void 0,a.mainplotinfo=void 0,u.push(r))}for(t=0;t<d.length;t++)r=d[t],(a=s._plots[r]).mainplotinfo.overlays.push(a);var h=u.concat(d),m=new Array(c);for(t=0;t<c;t++){r=h[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var g=[r,i.layer,o.layer,i.overlaying||"",o.overlaying||""];for(n=0;n<a.overlays.length;n++)g.push(a.overlays[n].id);m[t]=g}return m}(n),e=r._cartesianlayer.selectAll(".subplot").data(e,String);e.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),e.order(),e.exit().call(y,r),e.each(function(e){var t=e[0],e=r._plots[t];e.plotgroup=v.select(this),i(n,e),e.draglayer=u(r._draggers,"g",t)})},n.rangePlot=function(e,t,n){i(e,t),g(e,t,n),r.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=v.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:a.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":122,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../registry":313,"../get_data":307,"../plots":311,"./attributes":274,"./axis_ids":280,"./constants":283,"./graph_interact":286,"./layout_attributes":291,"./layout_defaults":292,"./transition_axes":301,"@plotly/d3":11}],291:[function(e,t,n){"use strict";var r=e("../font_attributes"),a=e("../../components/color/attributes"),i=e("../../components/drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,c=e("../../constants/numerical").ONEDAY,u=e("./constants"),d=u.HOUR_PATTERN,e=u.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,d,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":99,"../../components/drawing/attributes":121,"../../constants/numerical":210,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_format_attributes":279,"../font_attributes":305,"./constants":283}],292:[function(e,t,n){"use strict";var K=e("../../lib"),Q=e("../../components/color"),ee=e("../../components/fx/helpers").isUnifiedHover,te=e("../../components/fx/hovermode_defaults"),ne=e("../../plot_api/plot_template"),re=e("../layout_attributes"),ae=e("./layout_attributes"),ie=e("./type_defaults"),oe=e("./axis_defaults"),se=e("./constraints"),le=e("./position_defaults"),ce=e("./axis_ids"),ue=ce.id2name,de=ce.name2id,fe=e("./constants").AX_ID_PATTERN,e=e("../../registry"),pe=e.traceIs,he=e.getComponentMethod;function me(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(o,e,t){for(var n,r=e.autotypenumbers,a={},i={},s={},l={},c={},u={},d={},f={},p={},h={},m=0;m<t.length;m++){var g,y,v=t[m];if(pe(v,"cartesian")||pe(v,"gl2d")){if(v.xaxis)g=ue(v.xaxis),me(a,g,v);else if(v.xaxes)for(n=0;n<v.xaxes.length;n++)me(a,ue(v.xaxes[n]),v);if(v.yaxis)y=ue(v.yaxis),me(a,y,v);else if(v.yaxes)for(n=0;n<v.yaxes.length;n++)me(a,ue(v.yaxes[n]),v);"funnel"===v.type?"h"===v.orientation?(g&&(i[g]=!0),y&&(d[y]=!0)):y&&(s[y]=!0):"image"===v.type?(y&&(f[y]=!0),g&&(f[g]=!0)):(y&&(c[y]=!0,u[y]=!0),pe(v,"carpet")&&("carpet"!==v.type||v._cheater)||g&&(l[g]=!0)),"carpet"===v.type&&v._cheater&&g&&(i[g]=!0),pe(v,"2dMap")&&(p[g]=!0,p[y]=!0),pe(v,"oriented")&&(h["h"===v.orientation?y:g]=!0)}}var x=e._subplots,b=x.xaxis,_=x.yaxis,w=K.simpleMap(b,ue),T=K.simpleMap(_,ue),M=w.concat(T),x=Q.background;b.length&&_.length&&(x=K.coerce(o,e,re,"plot_bgcolor"));var k,A,S=Q.combine(x,e.paper_bgcolor);function E(){var e=a[Z]||[];X._traceIndices=e.map(function(e){return e._expandedIndex}),X._annIndices=[],X._shapeIndices=[],X._imgIndices=[],X._subplotsWith=[],X._counterAxes=[],X._name=X._attr=Z,X._id=k}function L(e,t){return K.coerce($,X,ae,e,t)}function C(e,t){return K.coerce2($,X,ae,e,t)}function D(e,t){for(var n="x"===e?w:T,r=[],a=0;a<n.length;a++){var i=n[a];i===t||(o[i]||{}).overlaying||r.push(de(i))}return r}var O={x:_,y:b},P=O.x.concat(O.y),I={},R=[];function N(){var e=$.matches;fe.test(e)&&-1===P.indexOf(e)&&(I[e]=$.type,R=Object.keys(I))}var z=te(o,e),F=ee(z);for(m=0;m<M.length;m++){Z=M[m],k=de(Z),A=Z.charAt(0),K.isPlainObject(o[Z])||(o[Z]={}),$=o[Z],X=ne.newContainer(e,Z,A+"axis"),E();var j="x"===A&&!l[Z]&&i[Z]||"y"===A&&!c[Z]&&s[Z],H="y"===A&&(!u[Z]&&d[Z]||f[Z]),B={letter:A,font:e.font,outerTicks:p[Z],showGrid:!h[Z],data:a[Z]||[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:j,reverseDflt:H,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[A]||{})[k]};L("uirevision",e.uirevision),ie($,X,L,B),oe($,X,L,B,e);var q=F&&A===z.charAt(0),U=C("spikecolor",F?X.color:void 0),Y=C("spikethickness",F?1.5:void 0),j=C("spikedash",F?"dot":void 0),H=C("spikemode",F?"across":void 0),B=C("spikesnap");L("showspikes",!!(q||U||Y||j||H||B))||(delete X.spikecolor,delete X.spikethickness,delete X.spikedash,delete X.spikemode,delete X.spikesnap),le($,X,L,{letter:A,counterAxes:O[A],overlayableAxes:D(A,Z),grid:e.grid}),L("title.standoff"),N(),X._input=$}for(m=0;m<R.length;){k=R[m++],A=(Z=ue(k)).charAt(0),K.isPlainObject(o[Z])||(o[Z]={}),$=o[Z],X=ne.newContainer(e,Z,A+"axis"),E();var V={letter:A,font:e.font,outerTicks:p[Z],showGrid:!h[Z],data:[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[A]||{})[k]};L("uirevision",e.uirevision),X.type=I[k]||"linear",oe($,X,L,V,e),le($,X,L,{letter:A,counterAxes:O[A],overlayableAxes:D(A,Z),grid:e.grid}),L("fixedrange"),N(),X._input=$}var G=he("rangeslider","handleDefaults"),W=he("rangeselector","handleDefaults");for(m=0;m<w.length;m++)Z=w[m],$=o[Z],X=e[Z],G(o,e,Z),"date"===X.type&&W($,X,e,T,X.calendar),L("fixedrange");for(m=0;m<T.length;m++){var Z=T[m],$=o[Z],X=e[Z],J=e[ue(X.anchor)];L("fixedrange",he("rangeslider","isVisible")(J))}se.handleDefaults(o,e,{axIds:P.concat(R).sort(ce.idSort),axHasImage:f})}},{"../../components/color":100,"../../components/fx/helpers":136,"../../components/fx/hovermode_defaults":139,"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"../layout_attributes":309,"./axis_defaults":278,"./axis_ids":280,"./constants":283,"./constraints":284,"./layout_attributes":291,"./position_defaults":294,"./type_defaults":302}],293:[function(e,t,n){"use strict";var l=e("tinycolor2").mix,c=e("../../components/color/attributes").lightFraction,u=e("../../lib");t.exports=function(n,r,e,a){var t=(a=a||{}).dfltColor;function i(e,t){return u.coerce2(n,r,a.attributes,e,t)}var o=i("linecolor",t),s=i("linewidth");e("showline",a.showLine||!!o||!!s)||(delete r.linecolor,delete r.linewidth);o=i("gridcolor",l(t,a.bgColor,a.blend||c).toRgbString()),s=i("gridwidth");e("showgrid",a.showGrid||!!o||!!s)||(delete r.gridcolor,delete r.gridwidth),a.noZeroLine||(s=i("zerolinecolor",t),t=i("zerolinewidth"),e("zeroline",a.showGrid||!!s||!!t)||(delete r.zerolinecolor,delete r.zerolinewidth))}},{"../../components/color/attributes":99,"../../lib":230,tinycolor2:65}],294:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib");t.exports=function(e,t,n,r){var a=r.counterAxes||[],i=r.overlayableAxes||[],o=r.letter,r=r.grid;r&&(s=r._domains[o][r._axisMap[t._id]],l=r._anchors[t._id],s&&(c=r[o+"side"].split(" ")[0],u=r.domain[o]["right"===c||"top"===c?1:0]));var s=s||[0,1],l=l||!d(e.position)&&a[0]||"free",c=c||("x"===o?"bottom":"left"),u=u||0;"free"===f.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:l}},"anchor")&&n("position",u),f.coerce(e,t,{side:{valType:"enumerated",values:"x"===o?["bottom","top"]:["left","right"],dflt:c}},"side");c=!1;return(c=i.length?f.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying"):c)||((c=n("domain",s))[0]>c[1]-1/4096&&(t.domain=s),f.noneOrAll(e.domain,t.domain,s)),n("layer"),t}},{"../../lib":230,"fast-isnumeric":15}],295:[function(e,t,n){"use strict";var a=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=a[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],n=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(n+(r[0]-n)*t),e.l2r(n+(r[1]-n)*t)],e.setScale()}},{"../../constants/alignment":205}],296:[function(e,t,n){"use strict";var q=e("polybooljs"),h=e("../../registry"),U=e("../../components/drawing").dashStyle,Y=e("../../components/color"),V=e("../../components/fx"),i=e("../../components/fx/helpers").makeEventData,r=e("../../components/dragelement/helpers"),G=r.freeMode,W=r.rectMode,Z=r.drawMode,$=r.openMode,X=r.selectMode,J=e("../../components/shapes/draw_newshape/display_outlines"),K=e("../../components/shapes/draw_newshape/helpers").handleEllipse,a=e("../../components/shapes/draw_newshape/newshapes"),Q=e("../../lib"),l=e("../../lib/polygon"),ee=e("../../lib/throttle"),f=e("./axis_ids").getFromId,m=e("../../lib/clear_gl_canvases"),g=e("../../plot_api/subroutines").redrawReglTraces,te=e("./constants"),ne=te.MINSELECT,re=l.filter,ae=l.tester,s=e("./handle_outline").clearSelect,e=e("./helpers"),ie=e.p2r,oe=e.axValue,se=e.getTransform;function le(e,t,n,r,a,i,o){var s,l,c,u=t._hoverdata,d=-1<t._fullLayout.clickmode.indexOf("event"),f=[];if((c=u)&&Array.isArray(c)&&!0!==c[0].hoverOnBox){ue(e,t,i);var p,a=function(e,t){var n,r,a=e[0],i=-1,o=[];for(r=0;r<t.length;r++)if(n=t[r],a.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===a.hoverOnBox)break;void 0!==a.pointNumber?i=a.pointNumber:void 0!==a.binNumber&&(i=a.binNumber,o=a.pointNumbers);break}return{pointNumber:i,pointNumbers:o,searchInfo:n}}(u,p=fe(t,n,r,a));if(0<a.pointNumbers.length?function(e,t){var n,r,a,i=[];for(a=0;a<e.length;a++)(n=e[a]).cd[0].trace.selectedpoints&&0<n.cd[0].trace.selectedpoints.length&&i.push(n);if(1===i.length&&i[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(a=0;a<t.pointNumbers.length;a++)if(r.selectedpoints.indexOf(t.pointNumbers[a])<0)return!1;return!0}return!1}(p,a):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if(t=e[n],(t=t.cd[0].trace).selectedpoints){if(1<t.selectedpoints.length)return!1;if(1<(r+=t.selectedpoints.length))return!1}return 1===r}(p)&&(h=v(a))){for(o&&o.remove(),g=0;g<p.length;g++)(s=p[g])._module.selectPoints(s,!1);pe(t,p),de(i),d&&t.emit("plotly_deselect",null)}else{for(var e=e.shiftKey&&(void 0!==h?h:v(a)),h={pointNumber:a.pointNumber,searchInfo:a.searchInfo,subtract:e},m=ce(i.selectionDefs.concat([h])),g=0;g<p.length;g++)if(l=he(p[g]._module.selectPoints(p[g],m),p[g]),f.length)for(var y=0;y<l.length;y++)f.push(l[y]);else f=l;pe(t,p,a={points:f}),i&&i.selectionDefs.push(h),o&&(e=i.mergedPolygons,h=$(i.dragmode),J(me(e,h),o,i)),d&&t.emit("plotly_selected",a)}}}function c(e){return"pointNumber"in e&&"searchInfo"in e}function ce(e){for(var t,o=[],n=c(e[0])?0:e[0][0][0],r=n,a=c(e[0])?0:e[0][0][1],i=a,s=0;s<e.length;s++)c(e[s])?o.push(function(i){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,n,r){var a=i.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===a&&n===i.pointNumber},isRect:!1,degenerate:!1,subtract:i.subtract}}(e[s])):((t=l.tester(e[s])).subtract=e[s].subtract,o.push(t),n=Math.min(n,t.xmin),r=Math.max(r,t.xmax),a=Math.min(a,t.ymin),i=Math.max(i,t.ymax));return{xmin:n,xmax:r,ymin:a,ymax:i,pts:[],contains:function(e,t,n,r){for(var a=!1,i=0;i<o.length;i++)o[i].contains(e,t,n,r)&&(a=!1===o[i].subtract);return a},isRect:!1,degenerate:!1}}function ue(e,t,n){t._fullLayout._drawing=!1;var r=t._fullLayout,a=n.plotinfo,i=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===a.id,i=(e.shiftKey||e.altKey)&&!(Z(i)&&$(i));o&&i&&a.selection&&a.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=a.selection.selectionDefs,n.mergedPolygons=a.selection.mergedPolygons):i&&a.selection||de(n),o||(s(t),r._lastSelectedSubplot=a.id)}function de(e){var t=e.dragmode,n=e.plotinfo,r=e.gd;0<=r._fullLayout._activeShapeIndex&&r._fullLayout._deactivateShape(r),!Z(t)||(t=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id))&&r._fullLayout._drawing&&((t=a(t,e))&&h.call("_guiRelayout",r,{shapes:t}),r._fullLayout._drawing=!1),n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function fe(e,t,n,r){for(var a,i,o,s=[],l=t.map(function(e){return e._id}),c=n.map(function(e){return e._id}),u=0;u<e.calcdata.length;u++)!0===(o=(a=e.calcdata[u])[0].trace).visible&&o._module&&o._module.selectPoints&&(!r||o.subplot!==r&&o.geo!==r?"splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[c[0]]?((i=d(o._module,a,t[0],n[0])).scene=e._fullLayout._splomScenes[o.uid],s.push(i)):"sankey"===o.type?(i=d(o._module,a,t[0],n[0]),s.push(i)):-1!==l.indexOf(o.xaxis)&&-1!==c.indexOf(o.yaxis)&&s.push(d(o._module,a,f(e,o.xaxis),f(e,o.yaxis))):s.push(d(o._module,a,t[0],n[0])));return s;function d(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function v(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,e=e.pointNumbers,n=0<e.length?e[0]:n;return!!t.selectedpoints&&-1<t.selectedpoints.indexOf(n)}function pe(e,t,n){var r,a;for(l=0;l<t.length;l++){var i=t[l].cd[0].trace._fullInput,o=e._fullLayout._tracePreGUI[i.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=i._input.selectedpoints||null)}if(n){for(var s=n.points||[],l=0;l<t.length;l++)(a=t[l].cd[0].trace)._input.selectedpoints=a._fullInput.selectedpoints=[],a._fullInput!==a&&(a.selectedpoints=[]);for(l=0;l<s.length;l++){var c=s[l],u=c.data,d=c.fullData;c.pointIndices?([].push.apply(u.selectedpoints,c.pointIndices),a._fullInput!==a&&[].push.apply(d.selectedpoints,c.pointIndices)):(u.selectedpoints.push(c.pointIndex),a._fullInput!==a&&d.selectedpoints.push(c.pointIndex))}}else for(l=0;l<t.length;l++)delete(a=t[l].cd[0].trace).selectedpoints,delete a._input.selectedpoints,a._fullInput!==a&&delete a._fullInput.selectedpoints;var f=!1;for(l=0;l<t.length;l++){a=(r=(p=t[l]).cd)[0].trace,h.traceIs(a,"regl")&&(f=!0);var p=p._module,p=p.styleOnSelect||p.style;p&&(p(e,r,r[0].node3),r[0].nodeRangePlot3&&p(e,r,r[0].nodeRangePlot3))}f&&(m(e),g(e))}function he(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,a=0;a<e.length;a++)e[a]=i(e[a],r,n);return e}function me(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var a=0;a<e[r].length;a++){n[r][a]=[],n[r][a][0]=a?"L":"M";for(var i=0;i<e[r][a].length;i++)n[r][a].push(e[r][a][i])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}t.exports={prepSelect:function(e,t,n,s,r){var l=G(r),c=W(r),u=$(r),d=Z(r),f=X(r),p="drawcircle"===r,h="drawline"===r||p,m=s.gd,g=m._fullLayout,a=g._zoomlayer,i=s.element.getBoundingClientRect(),o=s.plotinfo,y=se(o),v=t-i.left,x=n-i.top;g._calcInverseTransform(m);var b,_,w,T,M,k,A,S,E,v=(i=Q.apply3DTransform(g._invTransform)(v,x))[0],x=i[1],L=g._invScaleX,C=g._invScaleY,i="M"+v+","+x,D=s.xaxes[0]._length,O=s.yaxes[0]._length,P=s.xaxes.concat(s.yaxes),I=e.altKey&&!(Z(r)&&u);ue(e,m,s),l&&(w=re([[v,x]],te.BENDPX));var R=a.selectAll("path.select-outline-"+o.id).data(d?[0]:[1,2]),e=g.newshape;R.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+o.id}).style(d?{opacity:e.opacity/2,fill:u?void 0:e.fillcolor,stroke:e.line.color,"stroke-dasharray":U(e.line.dash,e.line.width),"stroke-width":e.line.width+"px"}:{}).attr("fill-rule",e.fillrule).classed("cursor-move",!!d).attr("transform",y).attr("d",i+"Z");var N,z=a.append("path").attr("class","zoombox-corners").style({fill:Y.background,stroke:Y.defaultLine,"stroke-width":1}).attr("transform",y).attr("d","M0,0Z"),F=g._uid+te.SELECTID,j=[],H=fe(m,s.xaxes,s.yaxes,s.subplot);function B(e,t){return e-t}N=o.fillRangeItems||(c?function(e,t){var n=e.range={};for(A=0;A<P.length;A++){var r=P[A],a=r._id.charAt(0);n[r._id]=[ie(r,t[a+"min"]),ie(r,t[a+"max"])].sort(B)}}:function(e,t,n){var r=e.lassoPoints={};for(A=0;A<P.length;A++){var a=P[A];r[a._id]=n.filtered.map(oe(a))}}),s.moveFn=function(e,t){b=Math.max(0,Math.min(D,L*e+v)),_=Math.max(0,Math.min(O,C*t+x));var n,r,a=Math.abs(b-v),i=Math.abs(_-x);if(c){if(f){var o,t=g.selectdirection;switch(o="any"===t?i<Math.min(.6*a,ne)?"h":a<Math.min(.6*i,ne)?"v":"d":t){case"h":n=p?O/2:0,r=O;break;case"v":n=p?D/2:0,r=D}}if(d)switch(g.newshape.drawdirection){case"vertical":o="h",n=p?O/2:0,r=O;break;case"horizontal":o="v",n=p?D/2:0,r=D;break;case"ortho":r=a<i?(o="h",n=x,_):(o="v",n=v,b);break;default:o="d"}"h"===o?((k=h?K(p,[b,n],[b,r]):[[v,n],[v,r],[b,r],[b,n]]).xmin=h?b:Math.min(v,b),k.xmax=h?b:Math.max(v,b),k.ymin=Math.min(n,r),k.ymax=Math.max(n,r),z.attr("d","M"+k.xmin+","+(x-ne)+"h-4v"+2*ne+"h4ZM"+(k.xmax-1)+","+(x-ne)+"h4v"+2*ne+"h-4Z")):"v"===o?((k=h?K(p,[n,_],[r,_]):[[n,x],[n,_],[r,_],[r,x]]).xmin=Math.min(n,r),k.xmax=Math.max(n,r),k.ymin=h?_:Math.min(x,_),k.ymax=h?_:Math.max(x,_),z.attr("d","M"+(v-ne)+","+k.ymin+"v-4h"+2*ne+"v4ZM"+(v-ne)+","+(k.ymax-1)+"v4h"+2*ne+"v-4Z")):"d"===o&&((k=h?K(p,[v,x],[b,_]):[[v,x],[v,_],[b,_],[b,x]]).xmin=Math.min(v,b),k.xmax=Math.max(v,b),k.ymin=Math.min(x,_),k.ymax=Math.max(x,_),z.attr("d","M0,0Z"))}else l&&(w.addPt([b,_]),k=w.filtered);T=s.selectionDefs&&s.selectionDefs.length?(M=function(e,t,n){if(n)return q.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions;return q.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(s.mergedPolygons,k,I),k.subtract=I,ce(s.selectionDefs.concat([k]))):(M=[k],ae(k)),J(me(M,u),R,s),f&&ee.throttle(F,te.SELECTDELAY,function(){var e;j=[];var t,n=[];for(A=0;A<H.length;A++)if(t=(S=H[A])._module.selectPoints(S,T),n.push(t),e=he(t,S),j.length)for(var r=0;r<e.length;r++)j.push(e[r]);else j=e;pe(m,H,E={points:j}),N(E,k,w),s.gd.emit("plotly_selecting",E)})},s.clickFn=function(e,t){var n;z.remove(),0<=m._fullLayout._activeShapeIndex?m._fullLayout._deactivateShape(m):d||(n=g.clickmode,ee.done(F).then(function(){if(ee.clear(F),2===e){for(R.remove(),A=0;A<H.length;A++)(S=H[A])._module.selectPoints(S,!1);pe(m,H),de(s),m.emit("plotly_deselect",null)}else-1<n.indexOf("select")&&le(t,m,s.xaxes,s.yaxes,s.subplot,s,R),"event"===n&&m.emit("plotly_selected",void 0);V.click(m,t)}).catch(Q.error))},s.doneFn=function(){z.remove(),ee.done(F).then(function(){ee.clear(F),s.gd.emit("plotly_selected",E),k&&s.selectionDefs&&(k.subtract=I,s.selectionDefs.push(k),s.mergedPolygons.length=0,[].push.apply(s.mergedPolygons,M)),s.doneFnCompleted&&s.doneFnCompleted(j)}).catch(Q.error),d&&de(s)}},clearSelect:s,clearSelectionsCache:de,selectOnClick:le}},{"../../components/color":100,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../components/fx/helpers":136,"../../components/shapes/draw_newshape/display_outlines":188,"../../components/shapes/draw_newshape/helpers":189,"../../components/shapes/draw_newshape/newshapes":190,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/polygon":242,"../../lib/throttle":253,"../../plot_api/subroutines":266,"../../registry":313,"./axis_ids":280,"./constants":283,"./handle_outline":287,"./helpers":288,polybooljs:55}],297:[function(e,t,n){"use strict";var y=e("@plotly/d3"),x=e("d3-time-format").utcFormat,b=e("fast-isnumeric"),_=e("../../lib"),w=_.cleanNumber,T=_.ms2DateTime,M=_.dateTime2ms,k=_.ensureNumber,A=_.isArrayOrTypedArray,r=e("../../constants/numerical"),S=r.FP_SAFE,E=r.BADNUM,L=r.LOG_CLIP,C=r.ONEWEEK,D=r.ONEDAY,O=r.ONEHOUR,P=r.ONEMIN,I=r.ONESEC,R=e("./axis_ids"),N=e("./constants"),z=N.HOUR_PATTERN,F=N.WEEKDAY_PATTERN;function j(e){return Math.pow(10,e)}function H(e){return null!=e}t.exports=function(v,p){p=p||{};var h=v._id||"x",m=h.charAt(0);function n(e,t){if(0<e)return Math.log(e)/Math.LN10;if(e<=0&&t&&v.range&&2===v.range.length){e=v.range[0],t=v.range[1];return.5*(e+t-2*L*Math.abs(e-t))}return E}function r(e,t,n,r){if((r||{}).msUTC&&b(e))return+e;if((r=M(e,n||v.calendar))===E){if(!b(e))return E;e=+e;n=Math.floor(10*_.mod(e+.05,1)),e=Math.round(e-n/10),r=M(new Date(e))+n/10}return r}function a(e,t,n){return T(e,t,n||v.calendar)}function t(e){return v._categories[Math.round(e)]}function g(e){if(H(e)){if(void 0===v._categoriesMap&&(v._categoriesMap={}),void 0!==v._categoriesMap[e])return v._categoriesMap[e];v._categories.push("number"==typeof e?String(e):e);var t=v._categories.length-1;return v._categoriesMap[e]=t}return E}function d(e){if(v._categoriesMap)return v._categoriesMap[e]}function i(e){var t=d(e);return void 0!==t?t:b(e)?+e:void 0}function o(e){return b(e)?+e:d(e)}function c(e,t,n){return y.round(n+t*e,2)}function s(e,t,n){return(e-n)/t}var u,l=function(e){return b(e)?c(e,v._m,v._b):E},f=function(e){return s(e,v._m,v._b)};v.rangebreaks&&(u="y"===m,l=function(e){if(!b(e))return E;var t=v._rangebreaks.length;if(!t)return c(e,v._m,v._b);for(var n=u,r=(n=v.range[0]>v.range[1]?!n:n)?-1:1,a=r*e,i=0,o=0;o<t;o++){var s=r*v._rangebreaks[o].min,l=r*v._rangebreaks[o].max;if(a<s)break;if(!(l<a)){i=a<(s+l)/2?o:o+1;break}i=o+1}n=v._B[i]||0;return isFinite(n)?c(e,v._m2,n):0},f=function(e){var t=v._rangebreaks.length;if(!t)return s(e,v._m,v._b);for(var n=0,r=0;r<t&&!(e<v._rangebreaks[r].pmin);r++)e>v._rangebreaks[r].pmax&&(n=r+1);return s(e,v._m2,v._B[n])}),v.c2l="log"===v.type?n:k,v.l2c="log"===v.type?j:k,v.l2p=l,v.p2l=f,v.c2p="log"===v.type?function(e,t){return l(n(e,t))}:l,v.p2c="log"===v.type?function(e){return j(f(e))}:f,-1!==["linear","-"].indexOf(v.type)?(v.d2r=v.r2d=v.d2c=v.r2c=v.d2l=v.r2l=w,v.c2d=v.c2r=v.l2d=v.l2r=k,v.d2p=v.r2p=function(e){return v.l2p(w(e))},v.p2d=v.p2r=f,v.cleanPos=k):"log"===v.type?(v.d2r=v.d2l=function(e,t){return n(w(e),t)},v.r2d=v.r2c=function(e){return j(w(e))},v.d2c=v.r2l=w,v.c2d=v.l2r=k,v.c2r=n,v.l2d=j,v.d2p=function(e,t){return v.l2p(v.d2r(e,t))},v.p2d=function(e){return j(f(e))},v.r2p=function(e){return v.l2p(w(e))},v.p2r=f,v.cleanPos=k):"date"===v.type?(v.d2r=v.r2d=_.identity,v.d2c=v.r2c=v.d2l=v.r2l=r,v.c2d=v.c2r=v.l2d=v.l2r=a,v.d2p=v.r2p=function(e,t,n){return v.l2p(r(e,0,n))},v.p2d=v.p2r=function(e,t,n){return a(f(e),t,n)},v.cleanPos=function(e){return _.cleanDate(e,E,v.calendar)}):"category"===v.type?(v.d2c=v.d2l=g,v.r2d=v.c2d=v.l2d=t,v.d2r=v.d2l_noadd=i,v.r2c=function(e){e=o(e);return void 0!==e?e:v.fraction2r(.5)},v.l2r=v.c2r=k,v.r2l=o,v.d2p=function(e){return v.l2p(v.r2c(e))},v.p2d=function(e){return t(f(e))},v.r2p=v.d2p,v.p2r=f,v.cleanPos=function(e){return"string"==typeof e&&""!==e?e:k(e)}):"multicategory"===v.type&&(v.r2d=v.c2d=v.l2d=t,v.d2r=v.d2l_noadd=i,v.r2c=function(e){e=i(e);return void 0!==e?e:v.fraction2r(.5)},v.r2c_just_indices=d,v.l2r=v.c2r=k,v.r2l=i,v.d2p=function(e){return v.l2p(v.r2c(e))},v.p2d=function(e){return t(f(e))},v.r2p=v.d2p,v.p2r=f,v.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:k(e)},v.setupMultiCategory=function(e){var t,n=v._traceIndices,r=v._matchGroup;if(r&&0===v._categories.length)for(var a in r)a!==h&&(a=p[R.id2name(a)],n=n.concat(a._traceIndices));for(var i=[[0,{}],[0,{}]],o=[],s=0;s<n.length;s++){var l=e[n[s]];if(m in l){var c=l[m],u=l._length||_.minRowLength(c);if(A(c[0])&&A(c[1]))for(t=0;t<u;t++){var d=c[0][t],f=c[1][t];H(d)&&H(f)&&(o.push([d,f]),d in i[0][1]||(i[0][1][d]=i[0][0]++),f in i[1][1]||(i[1][1][f]=i[1][0]++))}}}for(o.sort(function(e,t){var n=i[0][1],n=n[e[0]]-n[t[0]];if(n)return n;n=i[1][1];return n[e[1]]-n[t[1]]}),s=0;s<o.length;s++)g(o[s])}),v.fraction2r=function(e){var t=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return v.l2r(t+e*(n-t))},v.r2fraction=function(e){var t=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return(v.r2l(e)-t)/(n-t)},v.cleanRange=function(e,t){t=t||{};var n,r=_.nestedProperty(v,e=e||"range").get(),a="date"===v.type?_.dfltRange(v.calendar):"y"===m?N.DFLTRANGEY:t.dfltRange||N.DFLTRANGEX;if(a=a.slice(),"tozero"!==v.rangemode&&"nonnegative"!==v.rangemode||(a[0]=0),r&&2===r.length)for("date"!==v.type||v.autorange||(r[0]=_.cleanDate(r[0],E,v.calendar),r[1]=_.cleanDate(r[1],E,v.calendar)),n=0;n<2;n++)if("date"===v.type){if(!_.isDateTime(r[n],v.calendar)){v[e]=a;break}if(v.r2l(r[0])===v.r2l(r[1])){var i=_.constrain(v.r2l(r[0]),_.MIN_MS+1e3,_.MAX_MS-1e3);r[0]=v.l2r(i-1e3),r[1]=v.l2r(i+1e3);break}}else{if(!b(r[n])){if(!b(r[1-n])){v[e]=a;break}r[n]=r[1-n]*(n?10:.1)}r[n]<-S?r[n]=-S:r[n]>S&&(r[n]=S),r[0]===r[1]&&(i=Math.max(1,Math.abs(1e-6*r[0])),r[0]-=i,r[1]+=i)}else _.nestedProperty(v,e).set(a)},v.setScale=function(e){var t=p._size;v.overlaying&&(r=R.getFromId({_fullLayout:p},v.overlaying),v.domain=r.domain);var n=e&&v._r?"_r":"range",r=v.calendar;v.cleanRange(n);var a,i,e=v.r2l(v[n][0],r),n=v.r2l(v[n][1],r),r="y"===m;if((r?(v._offset=t.t+(1-v.domain[1])*t.h,v._length=t.h*(v.domain[1]-v.domain[0]),v._m=v._length/(e-n),v._b=-v._m*n):(v._offset=t.l+v.domain[0]*t.w,v._length=t.w*(v.domain[1]-v.domain[0]),v._m=v._length/(n-e),v._b=-v._m*e),v._rangebreaks=[],v._lBreaks=0,v._m2=0,v._B=[],v.rangebreaks)&&(v._rangebreaks=v.locateBreaks(Math.min(e,n),Math.max(e,n)),v._rangebreaks.length)){for(a=0;a<v._rangebreaks.length;a++)i=v._rangebreaks[a],v._lBreaks+=Math.abs(i.max-i.min);t=r;(t=n<e?!r:r)&&v._rangebreaks.reverse();var o=t?-1:1;for(v._m2=o*v._length/(Math.abs(n-e)-v._lBreaks),v._B.push(-v._m2*(r?n:e)),a=0;a<v._rangebreaks.length;a++)i=v._rangebreaks[a],v._B.push(v._B[v._B.length-1]-o*v._m2*(i.max-i.min));for(a=0;a<v._rangebreaks.length;a++)(i=v._rangebreaks[a]).pmin=l(i.min),i.pmax=l(i.max)}if(!isFinite(v._m)||!isFinite(v._b)||v._length<0)throw p._replotting=!1,new Error("Something went wrong with axis scaling")},v.maskBreaks=function(e){var t=v.rangebreaks||[];t._cachedPatterns||(t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?_.simpleMap(e.bounds,e.pattern?w:v.d2c):null})),t._cachedValues||(t._cachedValues=t.map(function(e){return e.enabled&&e.values?_.simpleMap(e.values,v.d2c).sort(_.sorterAsc):null}));for(var n=0;n<t.length;n++){var r=t[n];if(r.enabled)if(r.bounds){var a,i=r.pattern,o=(a=t._cachedPatterns[n])[0],s=a[1];switch(i){case F:c=(l=new Date(e)).getUTCDay(),s<o&&(s+=7,c<o&&(c+=7));break;case z:var l,c=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5);s<o&&(s+=24,c<o&&(c+=24));break;case"":c=e}if(o<=c&&c<s)return E}else for(var u=t._cachedValues[n],d=0;d<u.length;d++)if(s=(o=u[d])+r.dvalue,o<=e&&e<s)return E}return e},v.locateBreaks=function(i,o){var s=[];if(!v.rangebreaks)return s;for(var e=v.rangebreaks.slice().sort(function(e,t){return e.pattern===F&&t.pattern===z?-1:t.pattern===F&&e.pattern===z?1:0}),t=function(e,t){if((e=_.constrain(e,i,o))!==(t=_.constrain(t,i,o))){for(var n=!0,r=0;r<s.length;r++){var a=s[r];e<a.max&&t>=a.min&&(e<a.min&&(a.min=e),t>a.max&&(a.max=t),n=!1)}n&&s.push({min:e,max:t})}},n=0;n<e.length;n++){var r=e[n];if(r.enabled)if(r.bounds){var a=i,l=o;r.pattern&&(a=Math.floor(a));var c,u,d,f=(c=_.simpleMap(r.bounds,r.pattern?w:v.r2l))[0],p=c[1],h=new Date(a);switch(r.pattern){case F:d=C,u=(p-f+(p<f?7:0))*D,a+=f*D-(h.getUTCDay()*D+h.getUTCHours()*O+h.getUTCMinutes()*P+h.getUTCSeconds()*I+h.getUTCMilliseconds());break;case z:d=D,u=(p-f+(p<f?24:0))*O,a+=f*O-(h.getUTCHours()*O+h.getUTCMinutes()*P+h.getUTCSeconds()*I+h.getUTCMilliseconds());break;default:a=Math.min(c[0],c[1]),u=d=(l=Math.max(c[0],c[1]))-a}for(var m=a;m<l;m+=d)t(m,m+u)}else for(var g=_.simpleMap(r.values,v.d2c),y=0;y<g.length;y++)t(f=g[y],p=f+r.dvalue)}return s.sort(function(e,t){return e.min-t.min}),s},v.makeCalcdata=function(e,t,n){var r=v.type,a="date"===r&&e[t+"calendar"];if(t in e){if(s=e[t],l=e._length||_.minRowLength(s),_.isTypedArray(s)&&("linear"===r||"log"===r)){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}if("multicategory"===r)return function(e,t){for(var n=new Array(t),r=0;r<t;r++){var a=(e[0]||[])[r],i=(e[1]||[])[r];n[r]=d([a,i])}return n}(s,l);for(c=new Array(l),u=0;u<l;u++)c[u]=v.d2c(s[u],0,a,n)}else for(var i=(t+"0"in e?v.d2c(e[t+"0"],0,a):0),o=e["d"+t]?Number(e["d"+t]):1,s=e[{x:"y",y:"x"}[t]],l=e._length||s.length,c=new Array(l),u=0;u<l;u++)c[u]=i+u*o;if(v.rangebreaks)for(u=0;u<l;u++)c[u]=v.maskBreaks(c[u]);return c},v.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&b(v.r2l(e[0]))&&b(v.r2l(e[1]))},v.isPtWithinRange=function(e,t){var n=v.c2l(e[m],null,t),e=v.r2l(v.range[0]),t=v.r2l(v.range[1]);return e<t?e<=n&&n<=t:t<=n&&n<=e},v._emptyCategories=function(){v._categories=[],v._categoriesMap={}},v.clearCalc=function(){var e=v._matchGroup;if(e){var t,n=null,r=null;for(t in e){var a=p[R.id2name(t)];if(a._categories){n=a._categories,r=a._categoriesMap;break}}n&&r?(v._categories=n,v._categoriesMap=r):v._emptyCategories()}else v._emptyCategories();if(v._initialCategories)for(var i=0;i<v._initialCategories.length;i++)g(v._initialCategories[i])},v.sortByInitialCategories=function(){var e=[];if(v._emptyCategories(),v._initialCategories)for(var t=0;t<v._initialCategories.length;t++)g(v._initialCategories[t]);var n,r,e=e.concat(v._traceIndices);for(n in v._matchGroup)h!==n&&((r=p[R.id2name(n)])._categories=v._categories,r._categoriesMap=v._categoriesMap,e=e.concat(r._traceIndices));return e};var e=p._d3locale;"date"===v.type&&(v._dateFormat=e?e.timeFormat:x,v._extraFormat=p._extraFormat),v._separators=p.separators,v._numFormat=e?e.numberFormat:y.format,delete v._minDtick,delete v._forceTick0}},{"../../constants/numerical":210,"../../lib":230,"./axis_ids":280,"./constants":283,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],298:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../components/color").contrast,u=e("./layout_attributes"),d=e("../array_container_defaults");function f(t){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(n.every(function(e){return t[e]===t[n[0]]})||1===n.length)return t[n[0]]}function p(n,r){function e(e,t){return l.coerce(n,r,u.tickformatstops,e,t)}e("enabled")&&(e("dtickrange"),e("value"))}t.exports=function(e,t,n,r,a,i){i&&1!==i.pass||function(e,t,n){e=f(e);t("tickprefix")&&t("showtickprefix",e);t("ticksuffix",n.tickSuffixDflt)&&t("showticksuffix",e)}(e,n,a),i&&2!==i.pass||function(e,t,n,r,a){var i=f(e);n("tickprefix")&&n("showtickprefix",i);n("ticksuffix",a.tickSuffixDflt)&&n("showticksuffix",i);{var o,s;n("showticklabels")&&(o=a.font||{},s=t.color,s=-1!==(t.ticklabelposition||"").indexOf("inside")?c(a.bgColor):s&&s!==u.color.dflt?s:o.color,l.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:s}),n("tickangle"),"category"!==r&&(s=n("tickformat"),d(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),t.tickformatstops.length||delete t.tickformatstops,s||"date"===r||(n("showexponent",i),n("exponentformat"),n("minexponent"),n("separatethousands"))))}}(e,t,n,r,a)}},{"../../components/color":100,"../../lib":230,"../array_container_defaults":271,"./layout_attributes":291}],299:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes");t.exports=function(e,t,n,r){var a=o.coerce2(e,t,s,"ticklen"),i=o.coerce2(e,t,s,"tickwidth"),e=o.coerce2(e,t,s,"tickcolor",t.color);n("ticks",r.outerTicks||a||i||e?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":230,"./layout_attributes":291}],300:[function(e,t,n){"use strict";var l=e("./clean_ticks"),c=e("../../lib").isArrayOrTypedArray;t.exports=function(n,r,e,t){function a(e){var t=n[e];return void 0!==t?t:(r._template||{})[e]}var i=a("tick0"),o=a("dtick"),s=a("tickvals"),s=e("tickmode",c(s)?"array":o?"linear":"auto");"auto"===s?e("nticks"):"linear"===s?(o=r.dtick=l.dtick(o,t),r.tick0=l.tick0(i,t,r.calendar,o)):"multicategory"!==t&&(void 0===e("tickvals")?r.tickmode="auto":e("ticktext"))}},{"../../lib":230,"./clean_ticks":282}],301:[function(e,t,n){"use strict";var f=e("@plotly/d3"),p=e("../../registry"),v=e("../../lib"),x=e("../../components/drawing"),b=e("./axes");t.exports=function(y,i,a,e){var o,s,l,c,r=y._fullLayout;if(0!==i.length){e&&(o=e());var u=f.ease(a.easing);return y._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var e={},t=0;t<i.length;t++){var n=i[t],r=n.plotinfo.xaxis,a=n.plotinfo.yaxis;n.xr0&&(e[r._name+".range"]=n.xr0.slice()),n.yr0&&(e[a._name+".range"]=n.yr0.slice())}return p.call("relayout",y,e).then(function(){for(var e=0;e<i.length;e++)d(i[e].plotinfo)})}()}),s=Date.now(),c=window.requestAnimationFrame(function e(){l=Date.now();for(var t=Math.min(1,(l-s)/a.duration),n=u(t),r=0;r<i.length;r++)!function(e,t){var n,r,a,i,o=e.plotinfo,s=o.xaxis,l=o.yaxis,c=s._length,u=l._length,d=!!e.xr1,f=!!e.yr1,p=[];d?(n=v.simpleMap(e.xr0,s.r2l),r=v.simpleMap(e.xr1,s.r2l),a=n[1]-n[0],i=r[1]-r[0],p[0]=(n[0]*(1-t)+t*r[0]-n[0])/(n[1]-n[0])*c,p[2]=c*(1-t+t*i/a),s.range[0]=s.l2r(n[0]*(1-t)+t*r[0]),s.range[1]=s.l2r(n[1]*(1-t)+t*r[1])):(p[0]=0,p[2]=c),f?(m=v.simpleMap(e.yr0,l.r2l),g=v.simpleMap(e.yr1,l.r2l),h=m[1]-m[0],e=g[1]-g[0],p[1]=(m[1]*(1-t)+t*g[1]-m[1])/(m[0]-m[1])*u,p[3]=u*(1-t+t*e/h),l.range[0]=s.l2r(m[0]*(1-t)+t*g[0]),l.range[1]=l.l2r(m[1]*(1-t)+t*g[1])):(p[1]=0,p[3]=u),b.drawOne(y,s,{skipTitle:!0}),b.drawOne(y,l,{skipTitle:!0}),b.redrawComponents(y,[s._id,l._id]);var h=d?c/p[2]:1,m=f?u/p[3]:1,t=d?p[0]:0,g=f?p[1]:0,c=d?p[0]/p[2]*c:0,u=f?p[1]/p[3]*u:0,c=s._offset-c,u=l._offset-u;o.clipRect.call(x.setTranslate,t,g).call(x.setScale,1/h,1/m),o.plot.call(x.setTranslate,c,u).call(x.setScale,h,m),x.setPointGroupScale(o.zoomScalePts,1/h,1/m),x.setTextPointsScale(o.zoomScaleTxt,1/h,1/m)}(i[r],n);c=l-s>a.duration?(function(){for(var e={},t=0;t<i.length;t++){var n=i[t],r=n.plotinfo.xaxis,a=n.plotinfo.yaxis;n.xr1&&(e[r._name+".range"]=n.xr1.slice()),n.yr1&&(e[a._name+".range"]=n.yr1.slice())}o&&o(),p.call("relayout",y,e).then(function(){for(var e=0;e<i.length;e++)d(i[e].plotinfo)})}(),window.cancelAnimationFrame(e)):window.requestAnimationFrame(e)}),Promise.resolve()}function d(e){var t=e.xaxis,n=e.yaxis;r._defs.select("#"+e.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),e.plot.call(x.setTranslate,t._offset,n._offset).call(x.setScale,1,1);n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(x.setPointGroupScale,1,1),n.selectAll(".textpoint").call(x.setTextPointsScale,1,1),n.call(x.hideOutsideRangePoints,e)}b.redrawComponents(y)}},{"../../components/drawing":122,"../../lib":230,"../../registry":313,"./axes":276,"@plotly/d3":11}],302:[function(e,t,n){"use strict";var p=e("../../registry").traceIs,h=e("./axis_autotype");function m(e){return{v:"x",h:"y"}[e.orientation||"v"]}function g(e,t){var n=m(e),r=p(e,"box-violin"),a=p(e._fullInput||{},"candlestick");return r&&!a&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,r){n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)&&(function(e,t){if("-"===e.type){var n,r=e._id,a=r.charAt(0);-1!==r.indexOf("scene")&&(r=a);var i=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if("splom"===a.type&&0<a._length&&(a["_"+n+"axes"]||{})[t])return a;if((a[n+"axis"]||n)===t){if(g(a,n))return a;if((a[n]||[]).length||a[n+"0"])return a}}}(t,r,a);if(i)if("histogram"!==i.type||a!=={v:"y",h:"x"}[i.orientation||"v"]){var o,s=a+"calendar",l=i[s],c={noMultiCategory:!p(i,"cartesian")||p(i,"noMultiCategory")};if("box"===i.type&&i._hasPreCompStats&&a==={h:"x",v:"y"}[i.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=e.autotypenumbers,g(i,a)){var u=m(i),d=[];for(n=0;n<t.length;n++){var f=t[n];p(f,"box-violin")&&(f[a+"axis"]||a)===r&&(void 0!==f[u]?d.push(f[u][0]):void 0!==f.name?d.push(f.name):d.push("text"),f[s]!==l&&(l=void 0))}e.type=h(d,l,c)}else"splom"===i.type?(o=i.dimensions[i._axesDim[r]]).visible&&(e.type=h(o.values,l,c)):e.type=h(i[a]||[i[a+"0"]],l,c)}else e.type="linear"}}(t,r.data),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":313,"./axis_autotype":277}],303:[function(e,t,u){"use strict";var o=e("../registry"),f=e("../lib");function c(e,t,n){var r,a=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return r=f.nestedProperty(r,t.prop).get(),{changed:a=(n=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&n[t.prop]!==r?!0:a,value:n[t.prop]=r}}function i(e,t){var r=[],n=t[0],a={};if("string"==typeof n)a[n]=t[1];else{if(!f.isPlainObject(n))return r;a=n}return l(a,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0),r}function s(c,e){var u=[],t=e[0],n=e[1],d=e[2],e={};if("string"==typeof t)e[t]=n;else{if(!f.isPlainObject(t))return u;e=t,void 0===d&&(d=n)}return void 0===d&&(d=null),l(e,function(e,t,n){if(Array.isArray(n)){var r=n.slice(),a=Math.min(r.length,c.data.length);d&&(a=Math.min(a,d.length));for(var i=[],o=0;o<a;o++)i[o]=d?d[o]:o}else r=n,i=d?d.slice():null;if(null===i)Array.isArray(r)&&(r=r[0]);else if(Array.isArray(i)){if(!Array.isArray(r)){var s=r;r=[];for(var l=0;l<i.length;l++)r[l]=s}r.length=Math.min(i.length,r.length)}u.push({type:"data",prop:e,traces:i,value:r})},"",0),u}function l(r,a,i,o){Object.keys(r).forEach(function(e){var t,n=r[e];"_"!==e[0]&&(t=i+(0<o?".":"")+e,f.isPlainObject(n)?l(n,a,t,o+1):a(t,e,n))})}u.manageCommandObserver=function(t,e,n,r){var a={},i=!0;(a=e&&e._commandObserver?e._commandObserver:a).cache||(a.cache={}),a.lookupTable={};var o=u.hasSimpleAPICommandBindings(t,n,a.lookupTable);if(e&&e._commandObserver){if(o)return a;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,a}if(o){c(t,o,a.cache),a.check=function(){if(i){var e=c(t,o,a.cache);return e.changed&&r&&void 0!==a.lookupTable[e.value]&&(a.disable(),Promise.resolve(r({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:a.lookupTable[e.value]})).then(a.enable,a.enable)),e.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],a.check);a.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],a.check)}}else f.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){i=!1},a.enable=function(){i=!0},e&&(e._commandObserver=a),a},u.hasSimpleAPICommandBindings=function(e,t,n){for(var r,a=t.length,i=0;i<a;i++){var o=t[i],s=o.method,o=o.args;if(Array.isArray(o)||(o=[]),!s)return!1;o=u.computeAPICommandBindings(e,s,o);if(1!==o.length)return!1;if(r){if((c=o[0]).type!==r.type)return!1;if(c.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var l=0;l<r.traces.length;l++)if(r.traces[l]!==c.traces[l])return!1}else if(c.prop!==r.prop)return!1}else r=o[0],Array.isArray(r.traces)&&r.traces.sort();var c,o=(c=o[0]).value;if(Array.isArray(o)){if(1!==o.length)return!1;o=o[0]}n&&(n[o]=i)}return r},u.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=o.apiMethodRegistry[t],a=[e];Array.isArray(n)||(n=[]);for(var i=0;i<n.length;i++)a.push(n[i]);return r.apply(null,a).catch(function(e){return f.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},u.computeAPICommandBindings=function(e,t,n){var r,a;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=i(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(i(0,[n[1]]));break;case"animate":a=n,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":230,"../registry":313}],304:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},n=(e.name&&e.name,e.trace,(t=t||{}).description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:e.editType},n.column={valType:"integer",min:0,dflt:0,editType:e.editType}),n},n.defaults=function(e,t,n,r){var a=r&&r.x||[0,1],r=r&&r.y||[0,1],t=t.grid;t&&(void 0!==(i=n("domain.column"))&&(i<t.columns?a=t._domains.x[i]:delete e.domain.column),void 0!==(i=n("domain.row"))&&(i<t.rows?r=t._domains.y[i]:delete e.domain.row));var i=n("domain.x",a),n=n("domain.y",r);i[0]<i[1]||(e.domain.x=a.slice()),n[0]<n[1]||(e.domain.y=r.slice())}},{"../lib/extend":224}],305:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType,t={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n=void 0===n?t:n},editType:t};return e.arrayOk&&(t.family.arrayOk=!0,t.size.arrayOk=!0,t.color.arrayOk=!0),t}},{}],306:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],307:[function(e,t,n){"use strict";var u=e("../registry"),d=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){t=u.subplotsRegistry[t];if(!t)return[];for(var r=t.attr,a=[],i=0;i<e.length;i++){var o=e[i];o[0].trace[r]===n&&a.push(o)}return a},n.getModuleCalcData=function(e,t){var n=[],r=[],a="string"==typeof t?u.getModule(t).plot:"function"==typeof t?t:t.plot;if(!a)return[n,e];for(var i=0;i<e.length;i++){var o=e[i],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===a?n:r).push(o)}return[n,r]},n.getSubplotData=function(e,t,n){if(!u.subplotsRegistry[t])return[];var r,a,i,o,s=u.subplotsRegistry[t].attr,l=[];"gl2d"===t&&(i="x"+(a=n.match(d))[1],o="y"+a[2]);for(var c=0;c<e.length;c++)r=e[c],"gl2d"===t&&u.traceIs(r,"gl2d")?r[s[0]]===i&&r[s[1]]===o&&l.push(r):r[s]===n&&l.push(r);return l}},{"../registry":313,"./cartesian/constants":283}],308:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[0,0,0,0],a=0;a<4;++a)for(n=0;n<4;++n)r[n]+=e[4*a+n]*t[a];return r}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],309:[function(e,t,n){"use strict";var r=e("./font_attributes"),a=e("./animation_attributes"),i=e("../components/color/attributes"),o=e("../components/shapes/draw_newshape/attributes"),s=e("./pad_attributes"),l=e("../lib/extend").extendFlat,e=r({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=i.defaultLine,t.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":99,"../components/shapes/draw_newshape/attributes":185,"../lib/extend":224,"./animation_attributes":270,"./font_attributes":305,"./pad_attributes":310}],310:[function(e,t,n){"use strict";t.exports=function(e){e=e.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],311:[function(e,t,n){"use strict";var k=e("@plotly/d3"),A=e("d3-time-format").timeFormatLocale,E=e("fast-isnumeric"),C=e("../registry"),y=e("../plot_api/plot_schema"),T=e("../plot_api/plot_template"),D=e("../lib"),m=e("../components/color"),v=e("../constants/numerical").BADNUM,O=e("./cartesian/axis_ids"),S=e("./cartesian/handle_outline").clearSelect,a=e("./animation_attributes"),i=e("./frame_attributes"),o=e("../plots/get_data").getModuleCalcData,L=D.relinkPrivateKeys,P=D._,I=t.exports={};D.extendFlat(I,C),I.attributes=e("./attributes"),I.attributes.type.values=I.allTypes,I.fontAttrs=e("./font_attributes"),I.layoutAttributes=e("./layout_attributes"),I.fontWeight="normal";var M=I.transformsRegistry,e=e("./command");I.executeAPICommand=e.executeAPICommand,I.computeAPICommandBindings=e.computeAPICommandBindings,I.manageCommandObserver=e.manageCommandObserver,I.hasSimpleAPICommandBindings=e.hasSimpleAPICommandBindings,I.redrawText=function(t){return t=D.getGraphDiv(t),new Promise(function(e){setTimeout(function(){t._fullLayout&&(C.getComponentMethod("annotations","draw")(t),C.getComponentMethod("legend","draw")(t),C.getComponentMethod("colorbar","draw")(t),e(I.previousPromises(t)))},300)})},I.resize=function(n){var r;n=D.getGraphDiv(n);var e=new Promise(function(t,e){n&&!D.isHidden(n)||e(new Error("Resize must be passed a displayed plot div element.")),n._redrawTimer&&clearTimeout(n._redrawTimer),n._resolveResize&&(r=n._resolveResize),n._resolveResize=t,n._redrawTimer=setTimeout(function(){var e;!n.layout||n.layout.width&&n.layout.height||D.isHidden(n)?t(n):(delete n.layout.width,delete n.layout.height,e=n.changed,n.autoplay=!0,C.call("relayout",n,{autosize:!0}).then(function(){n.changed=e,n._resolveResize===t&&(delete n._resolveResize,t(n))}))},100)});return r&&r(e),e},I.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},I.addLinks=function(e){var t,n,r,a;(e._context.showLink||e._context.showSources)&&(n=e._fullLayout,t=(a=D.ensureSingle(n._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:m.defaultLine,"pointer-events":"all"}).each(function(){var e=k.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})})).node(),r={y:n._paper.attr("height")-9},document.body.contains(t)&&t.getComputedTextLength()>=n.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=n._paper.attr("width")-7),a.attr(r),n=a.select(".js-link-to-tool"),r=a.select(".js-link-spacer"),a=a.select(".js-sourcelinks"),e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));{var r;e._context.sendData?n.on("click",function(){I.sendDataToCloud(e)}):(r=window.location.pathname.split("/"),t=window.location.search,n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+t}))}}(e,n),r.text(n.text()&&a.text()?" - ":""))},I.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=k.select(e).append("div").attr("id","hiddenform").style("display","none"),t=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return t.append("input").attr({type:"text",name:"data"}).node().value=I.graphJson(e,!1,"keepdata"),t.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var R=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],N=["year","month","dayMonth","dayMonthYear"];function z(e,a){var t=(t=e._context.locale)||"en-US",i=!1,o={};function n(e){for(var t=!0,n=0;n<a.length;n++){var r=a[n];o[r]||(e[r]?o[r]=e[r]:t=!1)}t&&(i=!0)}for(var r=0;r<2;r++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[t]||{}).format;if(c&&(n(c),i))break;s=C.localeRegistry}var u=t.split("-")[0];if(i||u===t)break;t=u}return i||n(C.localeRegistry.en.format),o}function g(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],r=r._module||M[r.type];if(r&&r.makesData)return!0}return!1}function c(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function F(e){var t=e.margin;e._size||((t=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)}).w=Math.round(e.width)-t.l-t.r,t.h=Math.round(e.height)-t.t-t.b),e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}I.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var a=e._fullLayout={},i=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],c=e.calcdata||[],u=e._context||{};e._transitionData||I.createTransitionData(e),a._dfltTitle={plot:P(e,"Click to enter Plot title"),x:P(e,"Click to enter X axis title"),y:P(e,"Click to enter Y axis title"),colorbar:P(e,"Click to enter Colorscale title"),annotation:P(e,"new text")},a._traceWord=P(e,"trace");var d,f=z(e,R);a._mapboxAccessToken=u.mapboxAccessToken,r._initialAutoSizeIsDone?(t=r.width,d=r.height,I.supplyLayoutGlobalDefaults(i,a,f),i.width||(a.width=t),i.height||(a.height=d),I.sanitizeMargins(a)):(I.supplyLayoutGlobalDefaults(i,a,f),h=!i.width||!i.height,d=a.autosize,u=u.autosizable,h&&(d||u)?I.plotAutoSize(e,i,a):h&&I.sanitizeMargins(a),!d&&h&&(i.width=a.width,i.height=a.height)),a._d3locale=(h=f,f=a.separators,h.decimal=f.charAt(0),h.thousands=f.charAt(1),{numberFormat:k.locale(h).numberFormat,timeFormat:A(h).utcFormat}),a._extraFormat=z(e,N),a._initialAutoSizeIsDone=!0,a._dataLength=l.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var p=a._subplots=function(){var e,t,n=C.collectableSubplotTypes,r={};if(!n){n=[];var a,i=C.subplotsRegistry;for(a in i){var o=i[a].attr;if(o&&(n.push(a),Array.isArray(o)))for(t=0;t<o.length;t++)D.pushUnique(n,o[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}(),f=a._splomAxes={x:{},y:{}},h=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=function(e,t){var n,r,a=t.length,i=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==r&&i.push(o),r=o}var s=i.length,l=new Array(a),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){return e&&"string"==typeof e&&!c[e]&&(u(e,t),1)}for(n=0;n<a;n++){var f=t[n].uid;d(f="number"==typeof f?String(f):f,n)||n<s&&d(i[n].uid,n)||u(D.randstr(c),n)}return l}(o,l),a._globalTransforms=(e._context||{}).globalTransforms,I.supplyDataDefaults(l,s,i,a);var m=Object.keys(f.x),g=Object.keys(f.y);if(1<m.length&&1<g.length){for(C.getComponentMethod("grid","sizeDefaults")(i,a),b=0;b<m.length;b++)D.pushUnique(p.xaxis,m[b]);for(b=0;b<g.length;b++)D.pushUnique(p.yaxis,g[b]);for(var y in h)D.pushUnique(p.cartesian,y)}if(a._has=I._hasPlotType.bind(a),o.length===s.length)for(b=0;b<s.length;b++)L(s[b],o[b]);I.supplyLayoutModuleDefaults(i,a,s,e._transitionData);for(var v=a._visibleModules,x=[],b=0;b<v.length;b++){var _=v[b].crossTraceDefaults;_&&D.pushUnique(x,_)}for(b=0;b<x.length;b++)x[b](s,a);a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&15<m.length&&15<g.length&&0===a.shapes.length&&0===a.images.length,I.linkSubplots(s,a,o,r),I.cleanPlot(s,a,o,r);h=!(!r._has||!r._has("gl2d")),i=!(!a._has||!a._has("gl2d")),h=!(!r._has||!r._has("cartesian"))||h,i=!(!a._has||!a._has("cartesian"))||i;h&&!i?r._bgLayer.remove():i&&!h&&(a._shouldCreateBgLayer=!0),r._zoomlayer&&!e._dragging&&S({_fullLayout:r}),function(e,t){var n,r=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var a=0;a<e.length;a++){var i=e[a];i.meta?r[i.index]=i._meta={meta:i.meta}:t.meta&&(i._meta={meta:t.meta}),t.meta&&(i._meta.layout={meta:t.meta})}r.length&&((n=n||(t._meta={})).data=r)}(s,a),L(a,r),C.getComponentMethod("colorscale","crossTraceDefaults")(s,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var w,T=a._tracePreGUI,M={};for(w in T)M[w]="old";for(b=0;b<s.length;b++)M[w=s[b]._fullInput.uid]||(T[w]={}),M[w]="new";for(w in M)"old"===M[w]&&delete T[w];F(a),C.getComponentMethod("rangeslider","makeData")(a),n||c.length!==s.length||I.supplyDefaultsUpdateCalc(c,s)}},I.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=(e[n]||[])[0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform)for(var o,s,l=i._arrayAttrs,c=0;c<l.length;c++)o=l[c],s=D.nestedProperty(i,o).get().slice(),D.nestedProperty(r,o).set(s);a.trace=r}}},I.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},I._hasPlotType=function(e){for(var t=this._basePlotModules||[],n=0;n<t.length;n++)if(t[n].name===e)return!0;var r=this._modules||[];for(n=0;n<r.length;n++){var a=r[n].name;if(a===e)return!0;a=C.modules[a];if(a&&a.categories[e])return!0}return!1},I.cleanPlot=function(e,t,n,r){for(var a=r._basePlotModules||[],i=0;i<a.length;i++){var o=a[i];o.clean&&o.clean(e,t,n,r)}var s=r._has&&r._has("gl"),l=t._has&&t._has("gl");s&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var c=!!r._infolayer;e:for(i=0;i<n.length;i++){for(var u=n[i].uid,d=0;d<e.length;d++)if(u===e[d].uid)continue e;c&&r._infolayer.select(".cb"+u).remove()}},I.linkSubplots=function(e,t,n,r){for(var a=r._plots||{},i=t._plots={},r=t._subplots,o={_fullData:e,_fullLayout:t},s=r.cartesian.concat(r.gl2d||[]),l=0;l<s.length;l++){var c,u=s[l],d=a[u],f=O.getFromId(o,u,"x"),p=O.getFromId(o,u,"y");for(d?c=i[u]=d:(c=i[u]={}).id=u,f._counterAxes.push(p._id),p._counterAxes.push(f._id),f._subplotsWith.push(u),p._subplotsWith.push(u),c.xaxis=f,c.yaxis=p,c._hasClipOnAxisFalse=!1,b=0;b<e.length;b++){var h=e[b];if(h.xaxis===c.xaxis._id&&h.yaxis===c.yaxis._id&&!1===h.cliponaxis){c._hasClipOnAxisFalse=!0;break}}}var m=O.list(o,null,!0);for(l=0;l<m.length;l++){var g,y=null;(g=m[l]).overlaying&&(y=O.getFromId(o,g.overlaying))&&y.overlaying&&(g.overlaying=!1,y=null),g._mainAxis=y||g,y&&(g.domain=y.domain.slice()),g._anchorAxis="free"===g.anchor?null:O.getFromId(o,g.anchor)}for(l=0;l<m.length;l++)if((g=m[l])._counterAxes.sort(O.idSort),g._subplotsWith.sort(D.subplotSort),g._mainSubplot=function(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),a=e._mainAxis._anchorAxis,i="",o="",s="";a&&(s=a._mainAxis._id,i=r?e._id+s:s+e._id);if(!i||!t._plots[i]){i="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=r?e._id+u:u+e._id;o=o||d;u=O.getFromId(n,u);if(s&&u.overlaying===s){i=d;break}}}return i||o}(g,t),g._counterAxes.length&&(g.spikemode&&-1!==g.spikemode.indexOf("across")||g.automargin&&g.mirror&&"free"!==g.anchor||C.getComponentMethod("rangeslider","isVisible")(g))){for(var v=1,x=0,b=0;b<g._counterAxes.length;b++)var _=O.getFromId(o,g._counterAxes[b]),v=Math.min(v,_.domain[0]),x=Math.max(x,_.domain[1]);v<x&&(g._counterDomainMin=v,g._counterDomainMax=x)}},I.clearExpandedTraceDefaultColors=function(e){var a,i,t;for(i=[],(a=e._module._colorAttrs)||(e._module._colorAttrs=a=[],y.crawl(e._module.attributes,function(e,t,n,r){i[r]=t,i.length=r+1,"color"===e.valType&&void 0===e.dflt&&a.push(i.join("."))})),t=0;t<a.length;t++)D.nestedProperty(e,"_input."+a[t]).get()||D.nestedProperty(e,a[t]).set(null)},I.supplyDataDefaults=function(e,n,t,r){var a,i=r._modules,o=r._visibleModules,s=r._basePlotModules,l=0,c=0;function u(e){n.push(e);var t=e._module;t&&(D.pushUnique(i,t),!0===e.visible&&D.pushUnique(o,t),D.pushUnique(s,e._module.basePlotModule),l++,!1!==e._input.visible&&c++)}r._transformModules=[];for(var d,f,p={},h=[],m=(t.template||{}).data||{},g=T.traceTemplater(m),y=0;y<e.length;y++){if(a=e[y],(f=g.newTrace(a)).uid=r._traceUids[y],I.supplyTraceDefaults(a,f,c,r,y),f.index=y,f._input=a,f._expandedIndex=l,f.transforms&&f.transforms.length)for(var v=!1!==a.visible&&!1===f.visible,x=function(e,t,n,r){for(var a=e.transforms,i=[e],o=0;o<a.length;o++){var s=a[o],l=M[s.type];l&&l.transform&&(i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return i}(f,n,t,r),b=0;b<x.length;b++){var _=x[b],w={_template:f._template,type:f.type,uid:f.uid+b};v&&!1===_.visible&&delete _.visible,I.supplyTraceDefaults(_,w,l,r,y),L(w,_),w.index=y,w._input=a,w._fullInput=f,w._expandedIndex=l,w._expandedInput=_,u(w)}else u((f._fullInput=f)._expandedInput=f);C.traceIs(f,"carpetAxis")&&(p[f.carpet]=f),C.traceIs(f,"carpetDependent")&&h.push(y)}for(y=0;y<h.length;y++)(f=n[h[y]]).visible&&(d=p[f.carpet],(f._carpet=d)&&d.visible?(f.xaxis=d.xaxis,f.yaxis=d.yaxis):f.visible=!1)},I.supplyAnimationDefaults=function(n){var e;n=n||{};var r={};function t(e,t){return D.coerce(n||{},r,a,e,t)}if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],e=0;e<n.frame.length;e++)r.frame[e]=I.supplyAnimationFrameDefaults(n.frame[e]||{});else r.frame=I.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],e=0;e<n.transition.length;e++)r.transition[e]=I.supplyAnimationTransitionDefaults(n.transition[e]||{});else r.transition=I.supplyAnimationTransitionDefaults(n.transition||{});return r},I.supplyAnimationFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,a.frame,e,t)}return e("duration"),e("redraw"),r},I.supplyAnimationTransitionDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,a.transition,e,t)}return e("duration"),e("easing"),r},I.supplyFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n,r,i,e,t)}return e("group"),e("name"),e("traces"),e("baseframe"),e("data"),e("layout"),r},I.supplyTraceDefaults=function(n,r,e,t,a){var i,o=t.colorway||m.defaults,s=o[e%o.length];function l(e,t){return D.coerce(n,r,I.attributes,e,t)}e=l("visible");l("type"),l("name",t._traceWord+" "+a),l("uirevision",t.uirevision);o=I.getModule(r);if(r._module=o){var a=o.basePlotModule,c=a.attr,u=a.attributes;if(c&&u){var d=t._subplots,f="";if(e||"gl2d"!==a.name){if(Array.isArray(c))for(i=0;i<c.length;i++){var p=c[i],h=D.coerce(n,r,u,p);d[p]&&D.pushUnique(d[p],h),f+=h}else f=D.coerce(n,r,u,c);d[a.name]&&D.pushUnique(d[a.name],f)}}}return e&&(l("customdata"),l("ids"),l("meta"),C.traceIs(r,"showLegend")?(D.coerce(n,r,(o.attributes.showlegend?o:I).attributes,"showlegend"),l("legendgroup"),l("legendgrouptitle.text")&&D.coerceFont(l,"legendgrouptitle.font",D.extendFlat({},t.font,{size:Math.round(1.1*t.font.size)})),l("legendrank"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,o&&o.supplyDefaults(n,r,s,t),C.traceIs(r,"noOpacity")||l("opacity"),C.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),C.traceIs(r,"noHover")||(r.hovertemplate||D.coerceHoverinfo(n,r,t),"parcats"!==r.type&&C.getComponentMethod("fx","supplyDefaults")(n,r,s,t)),o&&o.selectPoints&&l("selectedpoints"),I.supplyTransformDefaults(n,r,t)),r},I.hasMakesDataTransform=g,I.supplyTransformDefaults=function(e,t,n){if(t._length||g(e)){var r=n._globalTransforms||[],a=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var i=e.transforms||[],o=r.concat(i),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,f=M[d],p=!(u._module&&u._module===f),h=f&&"function"==typeof f.transform;f||D.warn("Unrecognized transform type "+d+"."),f&&f.supplyDefaults&&(p||h)?((c=f.supplyDefaults(u,t,n,e)).type=d,c._module=f,D.pushUnique(a,f)):c=D.extendFlat({},u),s.push(c)}}},I.supplyLayoutGlobalDefaults=function(n,r,e){function t(e,t){return D.coerce(n,r,I.layoutAttributes,e,t)}var a=n.template;D.isPlainObject(a)&&(r.template=a,r._template=a.layout,r._dataTemplate=a.data),t("autotypenumbers");a=D.coerceFont(t,"font");t("title.text",r._dfltTitle.plot),D.coerceFont(t,"title.font",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),t("title.xref"),t("title.yref"),t("title.x"),t("title.y"),t("title.xanchor"),t("title.yanchor"),t("title.pad.t"),t("title.pad.r"),t("title.pad.b"),t("title.pad.l"),t("uniformtext.mode")&&t("uniformtext.minsize"),t("autosize",!(n.width&&n.height)),t("width"),t("height"),t("margin.l"),t("margin.r"),t("margin.t"),t("margin.b"),t("margin.pad"),t("margin.autoexpand"),n.width&&n.height&&I.sanitizeMargins(r),C.getComponentMethod("grid","sizeDefaults")(n,r),t("paper_bgcolor"),t("separators",e.decimal+e.thousands),t("hidesources"),t("colorway"),t("datarevision");e=t("uirevision");t("editrevision",e),t("selectionrevision",e),C.getComponentMethod("modebar","supplyLayoutDefaults")(n,r),C.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(n,r,t),t("meta"),D.isPlainObject(n.transition)&&(t("transition.duration"),t("transition.easing"),t("transition.ordering")),C.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),C.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,t)},I.plotAutoSize=function(e,t,n){var r,a,i=e._context||{},o=i.frameMargins,s=D.isPlotDiv(e);s&&e.emit("plotly_autosize"),i.fillFrame?(r=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden"):(r=c((s=s?window.getComputedStyle(e):{}).width)||c(s.maxWidth)||n.width,a=c(s.height)||c(s.maxHeight)||n.height,E(o)&&0<o&&(l=1-2*o,r=Math.round(l*r),a=Math.round(l*a)));var o=I.layoutAttributes.width.min,l=I.layoutAttributes.height.min;r<o&&(r=o),a<l&&(a=l);l=!t.width&&1<Math.abs(n.width-r),t=!t.height&&1<Math.abs(n.height-a);(t||l)&&(l&&(n.width=r),t&&(n.height=a)),e._initialAutoSize||(e._initialAutoSize={width:r,height:a}),I.sanitizeMargins(n)},I.supplyLayoutModuleDefaults=function(e,t,n,r){var a,i,o,s=C.componentsRegistry,l=t._basePlotModules,c=C.subplotsRegistry.cartesian;for(a in s)(i=s[a]).includeBasePlot&&i.includeBasePlot(e,t);for(o in l.length||l.push(c),t._has("cartesian")&&(C.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[o].sort(D.subplotSort);for(d=0;d<l.length;d++)(i=l[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);for(var u=t._modules,d=0;d<u.length;d++)(i=u[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);var f=t._transformModules;for(d=0;d<f.length;d++)(i=f[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n,r);for(a in s)(i=s[a]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n)},I.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),D.clearThrottle(),D.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},I.style=function(e){for(var t=e._fullLayout._visibleModules,n=[],r=0;r<t.length;r++){var a=t[r];a.style&&D.pushUnique(n,a.style)}for(r=0;r<n.length;r++)n[r](e)},I.sanitizeMargins=function(e){var t,n,r,a,i;e&&e.margin&&(t=e.width,n=e.height,a=t-((r=e.margin).l+r.r),e=n-(r.t+r.b),a<0&&(i=(t-1)/(r.l+r.r),r.l=Math.floor(i*r.l),r.r=Math.floor(i*r.r)),e<0&&(i=(n-1)/(r.t+r.b),r.t=Math.floor(i*r.t),r.b=Math.floor(i*r.b)))},I.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},I.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};I.autoMargin=function(e,t,n){var r,a,i=e._fullLayout,o=i.width,s=i.height,l=i.margin,c=D.constrain(o-l.l-l.r,2,64),u=D.constrain(s-l.t-l.b,2,64),d=Math.max(0,o-c),o=Math.max(0,s-u),c=i._pushmargin,s=i._pushmarginIds;if(!1!==l.autoexpand&&(n?(void 0===(u=n.pad)&&(u=Math.min(12,l.l,l.r,l.t,l.b)),!d||1<(r=(n.l+n.r)/d)&&(n.l/=r,n.r/=r),!o||1<(a=(n.t+n.b)/o)&&(n.t/=a,n.b/=a),d=void 0!==n.xl?n.xl:n.x,r=void 0!==n.xr?n.xr:n.x,o=void 0!==n.yt?n.yt:n.y,a=void 0!==n.yb?n.yb:n.y,c[t]={l:{val:d,size:n.l+u},r:{val:r,size:n.r+u},b:{val:a,size:n.b+u},t:{val:o,size:n.t+u}},s[t]=1):(delete c[t],delete s[t]),!i._replotting))return I.doAutoMargin(e)},I.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height;t._size||(t._size={}),F(t);var a=t._size,i=t.margin,o=D.extendFlat({},a),s=i.l,l=i.r,c=i.t,u=i.b,d=t._pushmargin,f=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var p in d)f[p]||delete d[p];for(var h in d.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}},d){var m,g,y,v,x,b=d[h].l||{},h=d[h].b||{},_=b.val,w=b.size,T=h.val,M=h.size;for(m in d)E(w)&&d[m].r&&(x=d[m].r.val,g=d[m].r.size,_<x&&(s+l<(y=(w*x+(g-n)*_)/(x-_))+(v=(g*(1-_)+(w-n)*(1-x))/(x-_))&&(s=y,l=v))),E(M)&&d[m].t&&(x=d[m].t.val,y=d[m].t.size,T<x&&(u+c<(v=(M*x+(y-r)*T)/(x-T))+(x=(y*(1-T)+(M-r)*(1-x))/(x-T))&&(u=v,c=x)))}}var k,A=D.constrain(n-i.l-i.r,2,64),S=D.constrain(r-i.t-i.b,2,64),A=Math.max(0,n-A),S=Math.max(0,r-S);if(!A||1<(A=(s+l)/A)&&(s/=A,l/=A),!S||1<(S=(u+c)/S)&&(u/=S,c/=S),a.l=Math.round(s),a.r=Math.round(l),a.t=Math.round(c),a.b=Math.round(u),a.p=Math.round(i.pad),a.w=Math.round(n)-a.l-a.r,a.h=Math.round(r)-a.t-a.b,!t._replotting&&I.didMarginChange(o,a)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;a=3*(1+Object.keys(f).length);if(t._redrawFromAutoMarginCount<a)return C.call("_doPlot",e);t._size=o,D.warn("Too many auto-margin redraws.")}k=O.list(e,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<k.length;t++){var n=k[t][e];n&&n()}})};var s=["l","r","t","b","p","w","h"];function r(a,i,o){var s=!1;var e=[I.previousPromises,function(){if(a._transitionData)return a._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(a._transitionData._interruptCallbacks)},o.prepareFn,I.rehover,function(){return a.emit("plotly_transitioning",[]),new Promise(function(e){a._transitioning=!0,0<i.duration&&(a._transitioningWithDuration=!0),a._transitionData._interruptCallbacks.push(function(){s=!0}),o.redraw&&a._transitionData._interruptCallbacks.push(function(){return C.call("redraw",a)}),a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var t=0,n=0;function r(){return t++,function(){n++,s||n!==t||function(e){if(a._transitionData)(function(e){if(e)for(;e.length;)e.shift()})(a._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(o.redraw)return C.call("redraw",a)}).then(function(){a._transitioning=!1,a._transitioningWithDuration=!1,a.emit("plotly_transitioned",[])}).then(e)}(e)}}o.runFn(r),setTimeout(r())})}],e=D.syncOrAsync(e,a);return(e=!e||!e.then?Promise.resolve():e).then(function(){return a})}I.didMarginChange=function(e,t){for(var n=0;n<s.length;n++){var r=s[n],a=e[r],r=t[r];if(!E(a)||1<Math.abs(r-a))return!0}return!1},I.graphJson=function(e,t,i,n,r,a){(r&&t&&!e._fullData||r&&!t&&!e._fullLayout)&&I.supplyDefaults(e);var o=r?e._fullData:e.data,s=r?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(t,n){if("function"==typeof t)return n?"_function_":null;if(D.isPlainObject(t)){var r,a={};return Object.keys(t).sort().forEach(function(e){if(-1===["_","["].indexOf(e.charAt(0)))if("function"!=typeof t[e]){if("keepdata"===i){if("src"===e.substr(e.length-3))return}else if("keepstream"===i){if("string"==typeof(r=t[e+"src"])&&0<r.indexOf(":")&&!D.isPlainObject(t.stream))return}else if("keepall"!==i&&"string"==typeof(r=t[e+"src"])&&0<r.indexOf(":"))return;a[e]=c(t[e],n)}else n&&(a[e]="_function")}),a}return Array.isArray(t)?t.map(function(e){return c(e,n)}):D.isTypedArray(t)?D.simpleMap(t,D.identity):D.isJSDate(t)?D.ms2DateTimeLocal(+t):t}o={data:(o||[]).map(function(e){e=c(e);return t&&delete e.fit,e})};return t||(o.layout=c(s),r&&(s=s._size,o.layout.computed={margin:{b:s.b,l:s.l,r:s.r,t:s.t}})),l&&(o.frames=c(l)),a&&(o.config=c(e._context,!0)),"object"===n?o:JSON.stringify(o)},I.modifyFrames=function(e,t){for(var n,r=e._transitionData._frames,a=e._transitionData._frameHash,i=0;i<t.length;i++)switch((n=t[i]).type){case"replace":var o=n.value,s=(r[n.index]||{}).name,l=o.name;r[n.index]=a[l]=o,l!==s&&(delete a[s],a[l]=o);break;case"insert":a[(o=n.value).name]=o,r.splice(n.index,0,o);break;case"delete":delete a[(o=r[n.index]).name],r.splice(n.index,1)}return Promise.resolve()},I.computeFrame=function(e,t){var n,r,a,i,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=I.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(a=r[n])&&(-1===(i=u.traces.indexOf(a))&&(i=u.data.length,u.traces[i]=a),u.data[i]=I.extendTrace(u.data[i],s.data[n]))}return u},I.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var a=n[r];a&&a.name&&(t[a.name]=a)}},I.extendObjectWithContainers=function(e,t,n){var r,a,i,o,s,l,c,t=D.extendDeepNoArrays({},t||{}),u=D.expandObjectPaths(t),d={};if(n&&n.length)for(i=0;i<n.length;i++)void 0===(a=(r=D.nestedProperty(u,n[i])).get())?D.nestedProperty(d,n[i]).set(null):(r.set(null),D.nestedProperty(d,n[i]).set(a));if(e=D.extendDeepNoArrays(e||{},u),n&&n.length)for(i=0;i<n.length;i++)if(l=D.nestedProperty(d,n[i]).get()){for(c=(s=D.nestedProperty(e,n[i])).get(),Array.isArray(c)||s.set(c=[]),o=0;o<l.length;o++){var f=l[o];c[o]=null===f?null:I.extendObjectWithContainers(c[o],f)}s.set(c)}return e},I.dataArrayContainers=["transforms","dimensions"],I.layoutArrayContainers=C.layoutArrayContainers,I.extendTrace=function(e,t){return I.extendObjectWithContainers(e,t,I.dataArrayContainers)},I.extendLayout=function(e,t){return I.extendObjectWithContainers(e,t,I.layoutArrayContainers)},I.transition=function(b,_,w,T,e,s){var e={redraw:e.redraw},M={},k=[];return e.prepareFn=function(){for(var e=Array.isArray(_)?_.length:0,t=T.slice(0,e),n=0;n<t.length;n++){var r=t[n],a=b._fullData[r]._module;a&&(a.animatable&&(a=a.basePlotModule.name,M[a]||(M[a]=[]),M[a].push(r)),b.data[t[n]]=I.extendTrace(b.data[t[n]],_[n]))}var i,o=D.expandObjectPaths(D.extendDeepNoArrays({},w)),s=/^[xy]axis[0-9]*$/;for(i in o)s.test(i)&&delete o[i].range;I.extendLayout(b.layout,o),delete b.calcdata,I.supplyDefaults(b),I.doCalcdata(b);var l=D.expandObjectPaths(w);if(l){var c,u=b._fullLayout._plots;for(c in u){var d=u[c],f=d.xaxis,p=d.yaxis,h=f.range.slice(),m=p.range.slice(),g=null,y=null,v=null,x=null;Array.isArray(l[f._name+".range"])?g=l[f._name+".range"].slice():Array.isArray((l[f._name]||{}).range)&&(g=l[f._name].range.slice()),Array.isArray(l[p._name+".range"])?y=l[p._name+".range"].slice():Array.isArray((l[p._name]||{}).range)&&(y=l[p._name].range.slice()),h&&g&&(f.r2l(h[0])!==f.r2l(g[0])||f.r2l(h[1])!==f.r2l(g[1]))&&(v={xr0:h,xr1:g}),m&&y&&(p.r2l(m[0])!==p.r2l(y[0])||p.r2l(m[1])!==p.r2l(y[1]))&&(x={yr0:m,yr1:y}),(v||x)&&k.push(D.extendFlat({plotinfo:d},v,x))}}return Promise.resolve()},e.runFn=function(e){var t,n,r,a=b._fullLayout._basePlotModules,i=k.length;if(w)for(n=0;n<a.length;n++)a[n].transitionAxes&&a[n].transitionAxes(b,k,s,e);for(r in i?((t=D.extendFlat({},s)).duration=0,delete M.cartesian):t=s,M){var o=M[r];b._fullData[o[0]]._module.basePlotModule.plot(b,o,t,e)}},r(b,s,e)},I.transitionFromReact=function(u,d,f,p){var h=u._fullLayout,m=h.transition,g={},y=[];return g.prepareFn=function(){var e,t=h._plots;for(e in g.redraw=!1,"some"===d.anim&&(g.redraw=!0),"some"===f.anim&&(g.redraw=!0),t){var n=t[e],r=n.xaxis,a=n.yaxis,i=p[r._name].range.slice(),o=p[a._name].range.slice(),s=r.range.slice(),l=a.range.slice();r.setScale(),a.setScale();var c=null,u=null;r.r2l(i[0])===r.r2l(s[0])&&r.r2l(i[1])===r.r2l(s[1])||(c={xr0:i,xr1:s}),a.r2l(o[0])===a.r2l(l[0])&&a.r2l(o[1])===a.r2l(l[1])||(u={yr0:o,yr1:l}),(c||u)&&y.push(D.extendFlat({plotinfo:n},c,u))}return Promise.resolve()},g.runFn=function(t){for(var n,r,a,e=u._fullData,i=u._fullLayout._basePlotModules,o=[],s=0;s<e.length;s++)o.push(s);function l(){if(u._fullLayout)for(var e=0;e<i.length;e++)i[e].transitionAxes&&i[e].transitionAxes(u,y,n,t)}function c(){if(u._fullLayout)for(var e=0;e<i.length;e++)i[e].plot(u,a,r,t)}y.length&&d.anim?"traces first"===m.ordering?(n=D.extendFlat({},m,{duration:0}),a=o,r=m,setTimeout(l,m.duration),c()):(n=m,a=null,r=D.extendFlat({},m,{duration:0}),setTimeout(c,n.duration),l()):y.length?(n=m,l()):d.anim&&(a=o,r=m,c())},r(u,m,g)},I.doCalcdata=function(r,e){var a,i,o,t=O.list(r),s=r._fullData,n=r._fullLayout,l=new Array(s.length),c=(r.calcdata||[]).slice();for(r.calcdata=l,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},f=0;f<s.length;f++)Array.isArray(e)&&-1===e.indexOf(f)&&(l[f]=c[f]);for(f=0;f<s.length;f++)(a=s[f])._arrayAttrs=y.findArrayAttributes(a),a._extremes={};for(var u,d=n._subplots.polar||[],f=0;f<d.length;f++)t.push(n[d[f]].radialaxis,n[d[f]].angularaxis);for(u in n._colorAxes){var p=n[u];!1!==p.cauto&&(delete p.cmin,delete p.cmax)}var h=!1;function m(e,t){if(a=s[e],!!(i=a._module).isContainer===t){t=[];if(!0===a.visible&&0!==a._length){delete a._indexToPoints;var n=a.transforms||[];for(o=n.length-1;0<=o;o--)if(n[o].enabled){a._indexToPoints=n[o]._indexToPoints;break}i&&i.calc&&(t=i.calc(r,a))}(t=!Array.isArray(t)||!t[0]?[{x:v,y:v}]:t)[0].t||(t[0].t={}),t[0].trace=a,l[e]=t}}for(x(t,s,n),f=0;f<s.length;f++)m(f,!0);for(f=0;f<s.length;f++)!function(e){if(a=s[e],i=a._module,!0===a.visible&&a.transforms)for(i&&i.calc&&((e=i.calc(r,a))[0]&&e[0].t&&e[0].t._scene&&delete e[0].t._scene.dirty),o=0;o<a.transforms.length;o++){var t=a.transforms[o];(i=M[t.type])&&i.calcTransform&&(a._hasCalcTransform=!0,h=!0,i.calcTransform(r,a,t))}}(f);for(h&&x(t,s,n),f=0;f<s.length;f++)m(f,!0);for(f=0;f<s.length;f++)m(f,!1);b(r);var g=function(e,o){var t,n,r,a,i,s=[];var l,c,u={min:function(e){return D.aggNums(Math.min,null,e)},max:function(e){return D.aggNums(Math.max,null,e)},sum:function(e){return D.aggNums(function(e,t){return e+t},null,e)},total:function(e){return D.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return D.mean(e)},median:function(e){return D.median(e)}};for(t=0;t<e.length;t++){var d=e[t];if("category"===d.type){var f=d.categoryorder.match(j);if(f){var p=f[1],f=f[2],h=d._id.charAt(0),m="x"===h,g=[];for(n=0;n<d._categories.length;n++)g.push([d._categories[n],[]]);for(n=0;n<d._traceIndices.length;n++){var y=d._traceIndices[n],v=o._fullData[y];if(!0===v.visible){var x=v.type;C.traceIs(v,"histogram")&&(delete v._xautoBinFinished,delete v._yautoBinFinished);var b="splom"===x,_="scattergl"===x,w=o.calcdata[y];for(r=0;r<w.length;r++){var T=w[r];if(b){var M,k=v._axesDim[d._id];m||(M=v._diag[k][0])&&(d=o._fullLayout[O.id2name(M)]);var A,S=T.trace.dimensions[k].values;for(a=0;a<S.length;a++)for(l=d._categoriesMap[S[a]],i=0;i<T.trace.dimensions.length;i++)i!==k&&(A=T.trace.dimensions[i],g[l][1].push(A.values[a]))}else if(_){for(a=0;a<T.t.x.length;a++)c=m?(l=T.t.x[a],T.t.y[a]):(l=T.t.y[a],T.t.x[a]),g[l][1].push(c);T.t&&T.t._scene&&delete T.t._scene.dirty}else if(T.hasOwnProperty("z")){c=T.z;var E=function(e,t,n){var r=t._id.charAt(0);if("histogram2dcontour"!==e)return function(e,t){return"y"===r?t:e};var e=t._counterAxes[0],t=O.getFromId(o,e),a="x"===r||"x"===e&&"category"===t.type,i="y"===r||"y"===e&&"category"===t.type;return function(e,t){return 0===e||0===t||a&&e===n[t].length-1||i&&t===n.length-1?-1:("y"===r?t:e)-1}}(v.type,d,c);for(a=0;a<c.length;a++)for(i=0;i<c[a].length;i++)(l=E(i,a))+1&&g[l][1].push(c[a][i])}else for(void 0===(l=T.p)&&(l=T[h]),void 0===(c=void 0===(c=T.s)?T.v:c)&&(c=m?T.y:T.x),Array.isArray(c)||(c=void 0===c?[]:[c]),a=0;a<c.length;a++)g[l][1].push(c[a])}}}d._categoriesValue=g;var L=[];for(n=0;n<g.length;n++)L.push([g[n][0],u[p](g[n][1])]);L.sort(function(e,t){return e[1]-t[1]}),d._categoriesAggregatedValue=L,d._initialCategories=L.map(function(e){return e[0]}),"descending"===f&&d._initialCategories.reverse(),s=s.concat(d.sortByInitialCategories())}}}return s}(t,r);if(g.length){for(n._numBoxes=0,f=n._numViolins=0;f<g.length;f++)m(g[f],!0);for(f=0;f<g.length;f++)m(g[f],!1);b(r)}C.getComponentMethod("fx","calc")(r),C.getComponentMethod("errorbars","calc")(r)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function x(e,t,n){var r={};function a(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}D.simpleMap(e,a);for(var i=n._axisMatchGroups||[],o=0;o<i.length;o++)for(var s in i[o])r[s]||a(n[O.id2name(s)])}function b(e){var t,n,r=e._fullLayout,a=r._visibleModules,i={};for(f=0;f<a.length;f++){var o=a[f],s=o.crossTraceCalc;s&&(i[o=o.basePlotModule.name]?D.pushUnique(i[o],s):i[o]=[s])}for(n in i){var l=i[n],c=r._subplots[n];if(Array.isArray(c))for(t=0;t<c.length;t++)for(var u=c[t],d=("cartesian"===n?r._plots:r)[u],f=0;f<l.length;f++)l[f](e,d,u);else for(f=0;f<l.length;f++)l[f](e)}}I.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},I.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},I.generalUpdatePerTraceModule=function(e,t,n,r){for(var a,i,o,s=t.traceHash,l={},c=0;c<n.length;c++){var u=n[c],d=u[0].trace;d.visible&&(l[d.type]=l[d.type]||[],l[d.type].push(u))}for(a in s)l[a]||((i=s[a][0])[0].trace.visible=!1,l[a]=[i]);for(o in l){var f=l[o];f[0][0].trace._module.plot(e,t,D.filterVisible(f),r)}t.traceHash=l},I.plotBasePlot=function(e,t,n,r,a){var i=C.getModule(e),e=o(t.calcdata,i)[0];i.plot(t,e,r,a)},I.cleanBasePlot=function(e,t,n,r,a){var i=a._has&&a._has(e),n=n._has&&n._has(e);i&&!n&&a["_"+e+"layer"].selectAll("g.trace").remove()}},{"../components/color":100,"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plot_api/plot_template":265,"../plots/get_data":307,"../registry":313,"./animation_attributes":270,"./attributes":272,"./cartesian/axis_ids":280,"./cartesian/handle_outline":287,"./command":303,"./font_attributes":305,"./frame_attributes":306,"./layout_attributes":309,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],312:[function(e,t,n){"use strict";e=e("../constants/docs"),e.FORMAT_LINK,e.DATE_FORMAT_LINK;function r(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(0<n.length){for(var r=[],a=0;a<n.length;a++)r[a]="`"+n[a]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}n.hovertemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(t.arrayOk=!0),t},n.texttemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(t.arrayOk=!0),t}},{"../constants/docs":207}],313:[function(e,t,c){"use strict";var u=e("./lib/loggers"),n=e("./lib/noop"),i=e("./lib/push_unique"),o=e("./lib/is_plain_object"),d=e("./lib/dom").addStyleRule,r=e("./lib/extend"),a=e("./plots/attributes"),s=e("./plots/layout_attributes"),f=r.extendFlat,l=r.extendDeepAll;function p(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)i(c.layoutArrayRegexes,t[n])}}function h(e,t){e=c.componentsRegistry[e].schema;e&&e.traces&&((e=e.traces[t])&&l(c.modules[t]._module.attributes,e))}function m(e,t){e=c.componentsRegistry[e].schema;e&&e.transforms&&((e=e.transforms[t])&&l(c.transformsRegistry[t].attributes,e))}function g(e,t){var n=c.componentsRegistry[e].schema;n&&n.subplots&&(t=(e=c.subplotsRegistry[t]).layoutAttributes,e="subplot"===e.attr?e.name:e.attr,Array.isArray(e)&&(e=e[0]),e=n.subplots[e],t&&e&&l(t,e))}function y(e){return e="object"==typeof e?e.type:e}c.modules={},c.allCategories={},c.allTypes=[],c.subplotsRegistry={},c.transformsRegistry={},c.componentsRegistry={},c.layoutArrayContainers=[],c.layoutArrayRegexes=[],c.traceLayoutAttributes={},c.localeRegistry={},c.apiMethodRegistry={},c.collectableSubplotTypes=null,c.register=function(e){if(c.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":!function(e){var t=e.name,n=e.categories,r=e.meta;if(c.modules[t])u.log("Type "+t+" already registered");else{c.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(c.subplotsRegistry[t])u.log("Plot type "+t+" already registered.");else for(var n in p(e),c.subplotsRegistry[t]=e,c.componentsRegistry)g(n,e.name)}(e.basePlotModule);for(var a,i={},o=0;o<n.length;o++)i[n[o]]=!0,c.allCategories[n[o]]=!0;for(a in c.modules[t]={_module:e,categories:i},r&&Object.keys(r).length&&(c.modules[t].meta=r),c.allTypes.push(t),c.componentsRegistry)h(a,t);e.layoutAttributes&&f(c.traceLayoutAttributes,e.layoutAttributes);r=e.basePlotModule,e=r.name;if("mapbox"===e){var s,l=r.constants.styleRules;for(s in l)d(".js-plotly-plot .plotly .mapboxgl-"+s,l[s])}"geo"!==e&&"mapbox"!==e||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}(n);break;case"transform":!function(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t,n="Transform module "+e.name,r="function"==typeof e.transform,a="function"==typeof e.calcTransform;if(!r&&!a)throw new Error(n+" is missing a *transform* or *calcTransform* method.");r&&a&&u.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "));o(e.attributes)||u.log(n+" registered without an *attributes* object.");"function"!=typeof e.supplyDefaults&&u.log(n+" registered without a *supplyDefaults* method.");for(t in c.transformsRegistry[e.name]=e,c.componentsRegistry)m(t,e.name)}(n);break;case"component":!function(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t,n,r,a=e.name;(c.componentsRegistry[a]=e).layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&i(c.layoutArrayContainers,a),p(e));for(t in c.modules)h(a,t);for(n in c.subplotsRegistry)g(a,n);for(r in c.transformsRegistry)m(a,r);e.schema&&e.schema.layout&&l(s,e.schema.layout)}(n);break;case"locale":!function(e){var t=e.name,n=t.split("-")[0],r=e.dictionary,a=e.format,i=r&&Object.keys(r).length,o=a&&Object.keys(a).length,s=c.localeRegistry,e=s[t];e||(s[t]=e={});n!==t&&((t=s[n])||(s[n]=t={}),i&&t.dictionary===e.dictionary&&(t.dictionary=r),o&&t.format===e.format&&(t.format=a));i&&(e.dictionary=r);o&&(e.format=a)}(n);break;case"apiMethod":var r=n.name;c.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},c.getModule=function(e){e=c.modules[y(e)];return!!e&&e._module},c.traceIs=function(e,t){if("various"===(e=y(e)))return!1;var n=c.modules[e];return n||(e&&u.log("Unrecognized trace type "+e+"."),n=c.modules[a.type.dflt]),!!n.categories[t]},c.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],a=0;a<r.length;a++)r[a].type===t&&n.push(a);return n},c.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},c.getComponentMethod=function(e,t){e=c.componentsRegistry[e];return e&&e[t]||n},c.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return c.apiMethodRegistry[e].apply(null,t)}},{"./lib/dom":222,"./lib/extend":224,"./lib/is_plain_object":231,"./lib/loggers":234,"./lib/noop":239,"./lib/push_unique":244,"./plots/attributes":272,"./plots/layout_attributes":309}],314:[function(e,t,n){"use strict";var p=e("../registry"),e=e("../lib"),h=e.extendFlat,m=e.extendDeep;function g(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}t.exports=function(e,t){var n,r=e.data,a=e.layout,i=m([],r),o=m({},a,g(t.tileClass)),a=e._context||{};if(t.width&&(o.width=t.width),t.height&&(o.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){o.annotations=[];for(var s=Object.keys(o),l=0;l<s.length;l++)n=s[l],-1<["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))&&(o[s[l]].title={text:""});for(l=0;l<i.length;l++){var c=i[l];c.showscale=!1,c.marker&&(c.marker.showscale=!1),p.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(t.annotations))for(l=0;l<t.annotations.length;l++)o.annotations.push(t.annotations[l]);var u=Object.keys(o).filter(function(e){return e.match(/^scene\d*$/)});if(u.length){var d={};for("thumbnail"===t.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<u.length;l++){var f=o[u[l]];f.xaxis||(f.xaxis={}),f.yaxis||(f.yaxis={}),f.zaxis||(f.zaxis={}),h(f.xaxis,d),h(f.yaxis,d),h(f.zaxis,d),f._scene=null}}e=document.createElement("div");t.tileClass&&(e.className=t.tileClass);a={gd:e,td:e,layout:o,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};return"transparent"!==t.setBackground&&(a.config.setBackground=t.setBackground||"opaque"),a.gd.defaultLayout=g(t.tileClass),a}},{"../lib":230,"../registry":313}],315:[function(e,t,n){"use strict";var s=e("../lib"),l=e("../plot_api/to_image"),c=e("./filesaver"),u=e("./helpers");t.exports=function(a,i){var o;return s.isPlainObject(a)||(o=s.getGraphDiv(a)),(i=i||{}).format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(t,n){o&&o._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==i.format&&n(new Error(u.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var e=l(a,i),r=i.filename||a.fn||"newplot";r+="."+i.format.replace("-","."),e.then(function(e){return o&&(o._snapshotInProgress=!1),c(e,r,i.format)}).then(function(e){t(e)}).catch(function(e){o&&(o._snapshotInProgress=!1),n(e)})})}},{"../lib":230,"../plot_api/to_image":268,"./filesaver":316,"./helpers":317}],316:[function(e,t,n){"use strict";var c=e("../lib"),u=e("./helpers");t.exports=function(a,i,o){var s=document.createElement("a"),l="download"in s;return new Promise(function(e,t){var n,r;return c.isSafari()?(u.octetStream(("svg"===o?",":";base64,")+encodeURIComponent(a)),e(i)):c.isIE()?(n=u.createBlob(a,"svg"),window.navigator.msSaveBlob(n,i),n=null,e(i)):l?(n=u.createBlob(a,o),r=u.createObjectURL(n),s.href=r,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),u.revokeObjectURL(r),n=null,e(i)):void t(new Error("download error"))})}},{"../lib":230,"./helpers":317}],317:[function(e,t,n){"use strict";var r=e("../registry");n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},n.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},n.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var a=window.URL||window.webkitURL;n.createObjectURL=function(e){return a.createObjectURL(e)},n.revokeObjectURL=function(e){return a.revokeObjectURL(e)},n.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});e=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}(window.atob(e));return new window.Blob([e],{type:"image/"+t})},n.octetStream=function(e){document.location.href="data:application/octet-stream"+e},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":313}],318:[function(e,t,n){"use strict";var r=e("./helpers"),e={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=e},{"./cloneplot":314,"./download":315,"./helpers":317,"./svgtoimg":319,"./toimage":320,"./tosvg":321}],319:[function(e,t,n){"use strict";var v=e("../lib"),r=e("events").EventEmitter,x=e("./helpers");t.exports=function(m){var g=m.emitter||new r,y=new Promise(function(n,r){var e=window.Image,t=m.svg,a=m.format||"png";if(v.isIE()&&"svg"!==a){var i=new Error(x.MSG_IE_BAD_FORMAT);return r(i),m.promise?y:g.emit("error",i)}var o,s=m.canvas,l=m.scale||1,c=m.width||300,i=m.height||150,u=l*c,d=l*i,f=s.getContext("2d"),p=new e,h="svg"===a||v.isSafari()?x.encodeSVG(t):(o=x.createBlob(t,"svg"),x.createObjectURL(o));s.width=u,s.height=d,p.onload=function(){var e;switch(o=null,x.revokeObjectURL(h),"svg"!==a&&f.drawImage(p,0,0,u,d),a){case"jpeg":e=s.toDataURL("image/jpeg");break;case"png":e=s.toDataURL("image/png");break;case"webp":e=s.toDataURL("image/webp");break;case"svg":e=h;break;default:var t="Image format is not jpeg, png, svg or webp.";if(r(new Error(t)),!m.promise)return g.emit("error",t)}n(e),m.promise||g.emit("success",e)},p.onerror=function(e){if(o=null,x.revokeObjectURL(h),r(e),!m.promise)return g.emit("error",e)},p.src=h});return m.promise?y:g}},{"../lib":230,"./helpers":317,events:12}],320:[function(e,t,n){"use strict";var i=e("events").EventEmitter,o=e("../registry"),s=e("../lib"),l=e("./helpers"),c=e("./cloneplot"),u=e("./tosvg"),d=e("./svgtoimg");t.exports=function(e,n){var r=new i,t=c(e,{format:"png"}),a=t.gd;return a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a),e=l.getRedrawFunc(a),o.call("_doPlot",a,t.data,t.layout,t.config).then(e).then(function(){var e=l.getDelay(a._fullLayout);setTimeout(function(){var e=u(a),t=document.createElement("canvas");t.id=s.randstr(),(r=d({format:n.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:t,emitter:r,svg:e})).clean=function(){a&&document.body.removeChild(a)}},e)}).catch(function(e){r.emit("error",e)}),r}},{"../lib":230,"../registry":313,"./cloneplot":314,"./helpers":317,"./svgtoimg":319,"./tosvg":321,events:12}],321:[function(e,t,n){"use strict";var g=e("@plotly/d3"),y=e("../lib"),v=e("../components/drawing"),x=e("../components/color"),b=e("../constants/xmlns_namespaces"),_=/"/g,w="TOBESTRIPPED",T=new RegExp('("'+w+")|("+w+'")',"g");t.exports=function(e,t,n){var r,a=e._fullLayout,i=a._paper,o=a._toppaper,s=a.width,l=a.height;i.insert("rect",":first-child").call(v.setRect,0,0,s,l).call(x.fill,a.paper_bgcolor);var c=a._basePlotModules||[];for(f=0;f<c.length;f++){var u=c[f];u.toSVG&&u.toSVG(e)}if(o)for(var o=o.node().childNodes,d=Array.prototype.slice.call(o),f=0;f<d.length;f++){var p=d[f];p.childNodes.length&&i.node().appendChild(p)}a._draggers&&a._draggers.remove(),i.node().style.background="",i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e,t=g.select(this);"hidden"!==this.style.visibility&&"none"!==this.style.display?(t.style({visibility:null,display:null}),(e=this.style.fontFamily)&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(_,w))):t.remove()});var h=[];if(a._gradientUrlQueryParts)for(r in a._gradientUrlQueryParts)h.push(r);if(a._patternUrlQueryParts)for(r in a._patternUrlQueryParts)h.push(r);h.length&&i.selectAll(h.join(",")).each(function(){var e=g.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(_,w));t=this.style.stroke;t&&-1!==t.indexOf("url(")&&e.style("stroke",t.replace(_,w))}),"pdf"!==t&&"eps"!==t||i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),i.node().setAttributeNS(b.xmlns,"xmlns",b.svg),i.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),"svg"===t&&n&&(i.attr("width",n*s),i.attr("height",n*l),i.attr("viewBox","0 0 "+s+" "+l));var m,s=(new window.XMLSerializer).serializeToString(i.node());return l=s,m=g.select("body").append("div").style({display:"none"}).html(""),l=l.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":m.html(e).text()}),m.remove(),s=(s=(s=l).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(T,"'"),s=y.isIE()?(s=(s=s.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"'):s}},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],322:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");t=t.marker;t&&(r.mergeArray(t.opacity,e,"mo",!0),r.mergeArray(t.color,e,"mc"),(t=t.line)&&(r.mergeArray(t.color,e,"mlc"),r.mergeArrayCastPositive(t.width,e,"mlw")))}},{"../../lib":230}],323:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../components/colorscale/attributes"),l=e("../../plots/font_attributes"),c=e("./constants"),u=e("../../components/drawing/attributes").pattern,d=e("../../lib/extend").extendFlat,e=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=d({},r.marker.line.width,{dflt:0}),l=d({width:l,editType:"calc"},s("marker.line")),u=d({line:l,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:u});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:d({},e,{}),insidetextfont:d({},e,{}),outsidetextfont:d({},e,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:d({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":107,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"../scatter/attributes":353,"./constants":325}],324:[function(e,t,n){"use strict";var f=e("../../plots/cartesian/axes"),p=e("../../plots/cartesian/align_period"),h=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/calc"),g=e("./arrays_to_calcdata"),y=e("../scatter/calc_selection");t.exports=function(e,t){for(var n,r,a,i=f.getFromId(e,t.xaxis||"x"),o=f.getFromId(e,t.yaxis||"y"),s={msUTC:!(!t.base&&0!==t.base)},l="h"===t.orientation?(n=i.makeCalcdata(t,"x",s),a=o.makeCalcdata(t,"y"),r=p(t,o,"y",a),!!t.yperiodalignment):(n=o.makeCalcdata(t,"y",s),a=i.makeCalcdata(t,"x"),r=p(t,i,"x",a),!!t.xperiodalignment),c=Math.min(r.length,n.length),u=new Array(c),d=0;d<c;d++)u[d]={p:r[d],s:n[d]},l&&(u[d].orig_p=a[d]),t.ids&&(u[d].id=String(t.ids[d]));return h(t,"marker")&&m(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),h(t,"marker.line")&&m(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),g(u,t),y(u,t),u}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"../scatter/calc_selection":355,"./arrays_to_calcdata":322}],325:[function(e,t,n){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],326:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),f=e("../../lib").isArrayOrTypedArray,_=e("../../constants/numerical").BADNUM,p=e("../../registry"),w=e("../../plots/cartesian/axes"),v=e("../../plots/cartesian/constraints").getAxisGroup,c=e("./sieve.js");function h(e,t,n,r,a){if(r.length){var i,o,s,l;switch(!function(e,t){var n,r,a;for(n=0;n<t.length;n++){var i=t[n],o=i[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(f(s)){for(r=0;r<Math.min(s.length,i.length);r++)a=c(s[r],0,l),b(a)?(i[r].b=+a,i[r].hasB=1):i[r].b=0;for(;r<i.length;r++)i[r].b=0}else{a=c(s,0,l);var u=b(a);for(a=u?a:0,r=0;r<i.length;r++)i[r].b=a,u&&(i[r].hasB=1)}}}(n,r),a.mode){case"overlay":u(t,n,r,a);break;case"group":for(i=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.offset?o:i).push(l);o.length&&function(e,t,n,r,a){r=new c(r,{posAxis:t,sepNegVal:!1,overlapNoMerge:!a.norm});(function(e,t,n,r){for(var a,i=e._fullLayout,o=n.positions,e=n.distinctPositions,s=n.minDiff,l=n.traces,c=l.length,u=o.length!==e.length,d=s*(1-r.gap),e=v(i,t._id)+l[0][0].trace.orientation,f=i._alignmentOpts[e]||{},p=0;p<c;p++){var h=l[p],m=h[0].trace,g=f[m.alignmentgroup]||{},y=Object.keys(g.offsetGroups||{}).length,g=(a=y?d/y:u?d/c:d)*(1-(r.groupgap||0));a=y?((2*m._offsetIndex+1-y)*a-g)/2:u?((2*p+1-c)*a-g)/2:-g/2;h=h[0].t;h.barwidth=g,h.poffset=a,h.bargroupwidth=d,h.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,x(n),T(t,n),M(t,n,u)})(e,t,r,a),function(e,t){for(var n=e.traces,r=0;r<n.length;r++){var a=n[r];if(void 0===a[0].trace.base)for(var i=new c([a],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<a.length;o++){var s,l=a[o];l.p===_||(s=i.put(l.p,l.b+l.s))&&(l.b=s)}}}(r,t),a.norm?(g(r),y(n,r,a)):m(n,r)}(e,t,n,o,a),i.length&&u(t,n,i,a);break;case"stack":case"relative":for(i=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.base?o:i).push(l);o.length&&function(e,t,n,r){var a=new c(n,{posAxis:e,sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});d(e,a,r),function(e,t,n){var r,a,i,o,s,l,c=k(e),u=t.traces;for(o=0;o<u.length;o++)if(r=u[o],"funnel"===(a=r[0].trace).type)for(s=0;s<r.length;s++)(l=r[s]).s!==_&&t.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){r=u[o],a=r[0].trace,i="funnel"===a.type;var d,f,p=[];for(s=0;s<r.length;s++)(l=r[s]).s!==_&&(f=i?l.s:l.s+l.b,d=t.put(l.p,f),f=d+f,l.b=d,l[c]=f,n.norm||(p.push(f),l.hasB&&p.push(d)));n.norm||(a._extremes[e._id]=w.findExtremes(e,p,{tozero:!0,padded:!0}))}}(t,a,r);for(var i=0;i<n.length;i++)for(var o=n[i],s=0;s<o.length;s++){var l=o[s];l.s!==_&&l.b+l.s===a.get(l.p,l.s)&&(l._outmost=!0)}r.norm&&y(t,a,r)}(t,n,o,a),i.length&&u(t,n,i,a)}!function(e,t){var n,r,a,i=k(t),o={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++){var c=a[r].p;b(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=o.round=function(e){return String(Math.round(u*(e-s)))};for(n=0;n<e.length;n++){(a=e[n])[0].t.extents=o;var f=a[0].t.poffset,p=Array.isArray(f);for(r=0;r<a.length;r++){var h,m,g=a[r],y=g[i]-g.w/2;b(y)&&(h=g[i]+g.w/2,m=d(g.p),o[m]?o[m]=[Math.min(y,o[m][0]),Math.max(h,o[m][1])]:o[m]=[y,h]),g.p0=g.p+(p?f[r]:f),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(r,t)}}function u(e,t,n,r){for(var a=0;a<n.length;a++){var i=n[a],i=new c([i],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});d(e,i,r),r.norm?(g(i),y(t,i,r)):m(t,i)}}function d(e,t,n){for(var r=t.minDiff,a=t.traces,i=r*(1-n.gap),o=i*(1-(n.groupgap||0)),s=-o/2,l=0;l<a.length;l++){var c=a[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=i,c.bardelta=r}t.binWidth=a[0][0].t.barwidth/100,x(t),T(e,t),M(e,t)}function x(e){for(var t=e.traces,n=0;n<t.length;n++){var r,a=t[n],i=a[0],o=i.trace,s=i.t,i=o._offset||o.offset,l=s.poffset;if(f(i)){for(r=Array.prototype.slice.call(i,0,a.length),d=0;d<r.length;d++)b(r[d])||(r[d]=l);for(d=r.length;d<a.length;d++)r.push(l);s.poffset=r}else void 0!==i&&(s.poffset=i);var o=o._width||o.width,c=s.barwidth;if(f(o)){for(var u=Array.prototype.slice.call(o,0,a.length),d=0;d<u.length;d++)b(u[d])||(u[d]=c);for(d=u.length;d<a.length;d++)u.push(c);if(s.barwidth=u,void 0===i){for(r=[],d=0;d<a.length;d++)r.push(l+(c-u[d])/2);s.poffset=r}}else void 0!==o&&(s.barwidth=o,void 0===i&&(s.poffset=l+(c-o)/2))}}function T(e,t){for(var n=t.traces,r=k(e),a=0;a<n.length;a++)for(var i=n[a],o=i[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<i.length;d++){var f=i[d],p=f.w=u?c[d]:c;f[r]=f.p+(l?s[d]:s)+p/2}}function M(e,t,n){var r=t.traces,a=t.minDiff/2;w.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var i=0;i<r.length;i++){var o=r[i],s=o[0],l=s.trace,c=[];for(h=0;h<o.length;h++)m=(g=o[h]).p-a,x=g.p+a,c.push(m,x);if(l.width||l.offset)for(var s=s.t,u=s.poffset,d=s.barwidth,f=Array.isArray(u),p=Array.isArray(d),h=0;h<o.length;h++){var m,g=o[h],y=f?u[h]:u,v=p?d[h]:d,x=(m=g.p+y)+v;c.push(m,x)}l._extremes[e._id]=w.findExtremes(e,c,{padded:!1})}}function m(e,t){for(var n=t.traces,r=k(e),a=0;a<n.length;a++){for(var i=n[a],o=i[0].trace,s=[],l=!1,c=0;c<i.length;c++){var u=i[c],d=u.b,f=d+u.s;u[r]=f,s.push(f),u.hasB&&s.push(d),u.hasB&&u.b||(l=!0)}o._extremes[e._id]=w.findExtremes(e,s,{tozero:l,padded:!0})}}function g(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],a=0;a<r.length;a++){var i=r[a];i.s!==_&&e.put(i.p,i.b+i.s)}}function y(t,e,n){var r=e.traces,a=k(t),i="fraction"===n.norm?1:100,o=i/1e9,s=t.l2c(t.c2l(0)),l="stack"===n.mode?i:s;function c(e){return b(t.c2l(e))&&(e<s-o||l+o<e||!b(s))}for(var u=0;u<r.length;u++){for(var d=r[u],f=d[0].trace,p=[],h=!1,m=!1,g=0;g<d.length;g++){var y,v,x=d[g];x.s!==_&&(v=Math.abs(i/e.get(x.p,x.s)),x.b*=v,x.s*=v,v=(y=x.b)+x.s,x[a]=v,p.push(v),m=m||c(v),x.hasB&&(p.push(y),m=m||c(y)),x.hasB&&x.b||(h=!0))}f._extremes[t._id]=w.findExtremes(t,p,{tozero:h,padded:m})}}function k(e){return e._id.charAt(0)}t.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,t=e._fullLayout,a=e._fullData,i=e.calcdata,o=[],s=[],l=0;l<a.length;l++){var c=a[l];if(!0===c.visible&&p.traceIs(c,"bar")&&c.xaxis===n._id&&c.yaxis===r._id&&(("h"===c.orientation?o:s).push(i[l]),c._computePh))for(var u=e.calcdata[l],d=0;d<u.length;d++)"function"==typeof u[d].ph0&&(u[d].ph0=u[d].ph0()),"function"==typeof u[d].ph1&&(u[d].ph1=u[d].ph1())}t={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap},h(e,n,r,s,t),h(e,r,n,o,t)},setGroupPositions:h}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../plots/cartesian/constraints":284,"../../registry":313,"./sieve.js":336,"fast-isnumeric":15}],327:[function(e,t,n){"use strict";var h=e("../../lib"),o=e("../../components/color"),s=e("../../registry"),l=e("../scatter/xy_defaults"),c=e("../scatter/period_defaults"),u=e("./style_defaults"),d=e("../../plots/cartesian/constraints").getAxisGroup,f=e("./attributes"),m=h.coerceFont;function i(e,t,n,r){var a=t.orientation,i=t[{v:"x",h:"y"}[a]+"axis"],o=d(n,i)+a,i=n._alignmentOpts||{},a=r("alignmentgroup"),n=i[o],o=(n=n||(i[o]={}))[a];o?o.traces.push(t):o=n[a]={traces:[t],alignmentIndex:Object.keys(n).length,offsetGroups:{}};n=r("offsetgroup"),r=o.offsetGroups,o=r[n];n&&(o=o||(r[n]={offsetIndex:Object.keys(r).length}),t._offsetIndex=o.offsetIndex)}function p(e,t,n,r,a,i){var o=!(!1===(i=i||{}).moduleHasSelected),s=!(!1===i.moduleHasUnselected),l=!(!1===i.moduleHasConstrain),c=!(!1===i.moduleHasCliponaxis),u=!(!1===i.moduleHasTextangle),d=!(!1===i.moduleHasInsideanchor),f=!!i.hasPathbar,p=Array.isArray(a)||"auto"===a,i=p||"inside"===a,p=p||"outside"===a;(i||p)&&(a=m(r,"textfont",n.font),n=h.extendFlat({},a),(e=!(e.textfont&&e.textfont.color))&&delete n.color,m(r,"insidetextfont",n),f&&(f=h.extendFlat({},a),e&&delete f.color,m(r,"pathbar.textfont",f)),p&&m(r,"outsidetextfont",a),o&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),c&&r("cliponaxis"),u&&r("textangle"),r("texttemplate")),i&&d&&r("insidetextanchor")}t.exports={supplyDefaults:function(n,r,e,t){function a(e,t){return h.coerce(n,r,f,e,t)}var i;l(n,r,t,a)?(c(n,r,t,a),a("xhoverformat"),a("yhoverformat"),a("orientation",r.x&&!r.y?"h":"v"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),i=a("textposition"),p(n,0,t,a,i,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u(n,r,a,e,t),e=(r.marker.line||{}).color,(t=s.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||o.defaultLine,{axis:"y"}),t(n,r,e||o.defaultLine,{axis:"x",inherit:"y"}),h.coerceSelectionMarkerOpacity(r,a)):r.visible=!1},crossTraceDefaults:function(e,t){var n;function r(e){return h.coerce(n._input,n,f,e)}if("group"===t.barmode)for(var a=0;a<e.length;a++)"bar"===(n=e[a]).type&&(n._input,i(0,n,t,r))},handleGroupingDefaults:i,handleText:p}},{"../../components/color":100,"../../lib":230,"../../plots/cartesian/constraints":284,"../../registry":313,"../scatter/period_defaults":373,"../scatter/xy_defaults":380,"./attributes":323,"./style_defaults":338}],328:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},{}],329:[function(e,t,n){"use strict";var i=e("fast-isnumeric"),r=e("tinycolor2"),a=e("../../lib").isArrayOrTypedArray;n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(i(t)){t=+t;var r=e.min,a=e.max;if(!(void 0!==r&&t<r||void 0!==a&&a<t))return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return r(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},n.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:a(e.marker.line.width)?0:e.marker.line.width}},{"../../lib":230,"fast-isnumeric":15,tinycolor2:65}],330:[function(e,t,n){"use strict";var I=e("../../components/fx"),i=e("../../registry"),a=e("../../components/color"),R=e("../../lib").fillText,o=e("./helpers").getLineWidth,N=e("../../plots/cartesian/axes").hoverLabelText,z=e("../../constants/numerical").BADNUM;function s(e,t,n,r,a){var i,o,s,l,c,u,d=e.cd,f=d[0].trace,p=d[0].t,h="closest"===r,m="waterfall"===f.type,g=e.maxHoverDistance,y=e.maxSpikeDistance;"h"===f.orientation?(i=n,o=t,s="y",l="x",c=S,u=k):(i=t,o=n,s="x",l="y",u=S,c=k);var v=f[s+"period"];function x(e){return _(e,-1)}function b(e){return _(e,1)}function _(e,t){return v?e.p+t*Math.abs(e.p-e.orig_p):e[s]+t*e.w/2}var w=h||v?x:function(e){return Math.min(x(e),e.p-p.bardelta/2)},T=h||v?b:function(e){return Math.max(b(e),e.p+p.bardelta/2)};function M(e,t,n){return a.finiteRange&&(n=0),I.inbox(e-i,t-i,n+Math.min(1,Math.abs(t-e)/E)-1)}function k(e){return M(w(e),T(e),g)}function A(e){var t=e[l];return m&&(e=Math.abs(e.rawS)||0,0<o?t+=e:o<0&&(t-=e)),t}function S(e){var t=o,n=e.b,e=A(e);return I.inbox(n-t,e-t,g+(e-t)/(e-n)-1)}t=e[s+"a"],n=e[l+"a"];var E=Math.abs(t.r2c(t.range[1])-t.r2c(t.range[0])),r=I.getDistanceFunction(r,c,u,function(e){return(c(e)+u(e))/2});if(I.getClosest(d,r,e),!1!==e.index&&d[e.index].p!==z){h||(w=function(e){return Math.min(x(e),e.p-p.bargroupwidth/2)},T=function(e){return Math.max(b(e),e.p+p.bargroupwidth/2)});var L=d[e.index],d=f.base?L.b+L.s:L.s;e[l+"0"]=e[l+"1"]=n.c2p(L[l],!0),e[l+"LabelVal"]=d;d=p.extents[p.extents.round(L.p)];e[s+"0"]=t.c2p(h?w(L):d[0],!0),e[s+"1"]=t.c2p(h?T(L):d[1],!0);var C,D,O,P,d=void 0!==L.orig_p;return e[s+"LabelVal"]=d?L.orig_p:L.p,e.labelLabel=N(t,e[s+"LabelVal"],f[s+"hoverformat"]),e.valueLabel=N(n,e[l+"LabelVal"],f[l+"hoverformat"]),e.baseLabel=N(n,L.b,f[l+"hoverformat"]),e.spikeDistance=(O=o,P=(D=L).b,D=A(D),(I.inbox(P-O,D-O,y+(D-O)/(D-P)-1)+M(x(C=L),b(C),y))/2),e[s+"Spike"]=t.c2p(L.p,!0),R(L,f,e),e.hovertemplate=f.hovertemplate,e}}function l(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,t=o(e,t);return a.opacity(n)?n:a.opacity(r)&&t?r:void 0}t.exports={hoverPoints:function(e,t,n,r,a){if(n=s(e,t,n,r,a)){r=n.cd,a=r[0].trace,r=r[n.index];return n.color=l(a,r),i.getComponentMethod("errorbars","hoverInfo")(r,a,n),[n]}},hoverOnBars:s,getTraceColor:l}},{"../../components/color":100,"../../components/fx":140,"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./helpers":329}],331:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":290,"../scatter/marker_colorbar":371,"./arrays_to_calcdata":322,"./attributes":323,"./calc":324,"./cross_trace_calc":326,"./defaults":327,"./event_data":328,"./hover":330,"./layout_attributes":332,"./layout_defaults":333,"./plot":334,"./select":335,"./style":337}],332:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],333:[function(e,t,n){"use strict";var f=e("../../registry"),p=e("../../plots/cartesian/axes"),h=e("../../lib"),m=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return h.coerce(n,r,m,e,t)}for(var a=!1,i=!1,o=!1,s={},l=t("barmode"),c=0;c<e.length;c++){var u,d=e[c];f.traceIs(d,"bar")&&d.visible&&(a=!0,"group"===l&&(s[u=d.xaxis+d.yaxis]&&(o=!0),s[u]=!0),d.visible&&"histogram"===d.type&&"category"!==p.getFromId({_fullLayout:r},d["v"===d.orientation?"xaxis":"yaxis"]).type&&(i=!0))}a?("overlay"!==l&&t("barnorm"),t("bargap",i&&!o?0:.2),t("bargroupgap")):delete r.barmode}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./layout_attributes":332}],334:[function(e,t,n){"use strict";var A=e("@plotly/d3"),S=e("fast-isnumeric"),E=e("../../lib"),L=e("../../lib/svg_text_utils"),C=e("../../components/color"),D=e("../../components/drawing"),r=e("../../registry"),O=e("../../plots/cartesian/axes").tickText,a=e("./uniform_text"),P=a.recordMinTextSize,i=a.clearMinTextSize,I=e("./style"),R=e("./helpers"),o=e("./constants"),a=e("./attributes"),N=a.text,z=a.textposition,F=e("../../components/fx/helpers").appendArrayPointValue,j=o.TEXTPAD;function s(e){return e.id}function H(e,t,n,r){return t.uniformtext.mode||!l(n)?e:(r&&(a=r()),e.transition().duration(n.duration).ease(n.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}));var a}function l(e){return e&&0<e.duration}function B(e){return"auto"===e?0:e}function q(e,t){var n=Math.PI/180*t,t=Math.abs(Math.sin(n)),n=Math.abs(Math.cos(n));return{x:e.width*n+e.height*t,y:e.width*t+e.height*n}}function U(e,t,n,r,a,i){var o=!!i.isHorizontal,s=!!i.constrained,l=i.angle||0,c=i.anchor||"end",u="end"===c,d="start"===c,f=((i.leftToRight||0)+1)/2,p=1-f,h=a.width,m=a.height,g=Math.abs(t-e),y=Math.abs(r-n),c=2*j<g&&2*j<y?j:0;g-=2*c,y-=2*c;i=B(l);"auto"!==l||h<=g&&m<=y||!(g<h||y<m)||(y<h||g<m)&&h<m==g<y||(i+=90);h=q(a,i),m=1;s&&(m=Math.min(1,g/h.x,y/h.y));s=a.left*p+a.right*f,g=(a.top+a.bottom)/2,y=(e+j)*p+(t-j)*f,a=(n+r)/2,p=0,f=0;return(d||u)&&(u=(o?h.x:h.y)/2,h=o?e<t?1:-1:n<r?1:-1,o?p=d?(y=e+h*c,-h*u):(y=t-h*c,h*u):f=d?(a=n+h*c,-h*u):(a=r-h*c,h*u)),{textX:s,textY:g,targetX:y,targetY:a,anchorX:p,anchorY:f,scale:m,rotate:i}}t.exports={plot:function(x,b,e,t,_,w){var T=b.xaxis,M=b.yaxis,k=x._fullLayout;_||(_={mode:k.barmode,norm:k.barmode,gap:k.bargap,groupgap:k.bargroupgap},i("bar",k)),e=E.makeTraceGroups(t,e,"trace bars").each(function(p){var e=A.select(this),h=p[0].trace,t="waterfall"===h.type,n="funnel"===h.type,m="bar"===h.type||n,g=0;t&&h.connector.visible&&"between"===h.connector.mode&&(g=h.connector.line.width/2);var y="h"===h.orientation,v=l(_),n=E.ensureSingle(e,"g","points"),t=function(e){if(e.ids)return s}(h),t=n.selectAll("g.point").data(E.identity,t);t.enter().append("g").classed("point",!0),t.exit().remove(),t.each(function(e,t){var n,r,a,i=A.select(this),o=(s=e,o=T,u=M,c=[],n=(l=y)?o:u,o=l?u:o,(u=[])[0]=n.c2p(s.s0,!0),c[0]=o.c2p(s.p0,!0),u[1]=n.c2p(s.s1,!0),c[1]=o.c2p(s.p1,!0),l?[u,c]:[c,u]),s=o[0][0],l=o[0][1],c=o[1][0],u=o[1][1],o=0==(y?l-s:u-c);function d(e){var t=A.round(r/2%1,2);return 0===_.gap&&0===_.groupgap?A.round(Math.round(e)-t,2):e}o=(o=o&&m&&R.getLineWidth(h,e)?!1:o)||!(S(s)&&S(l)&&S(c)&&S(u)),(e.isBlank=o)&&(y?l=s:u=c),g&&!o&&(y?l+=((s-=(s<l?1:-1)*g)<l?1:-1)*g:u+=((c-=(c<u?1:-1)*g)<u?1:-1)*g),"waterfall"===h.type?o||(a=h[e.dir].marker,r=a.line.width,a=a.color):(r=R.getLineWidth(h,e),a=e.mc||h.marker.color),x._context.staticPlot||(s=(f=C.opacity(a)<1||.01<r?d:function(e,t,n){return n&&e===t?e:2<=Math.abs(e-t)?d(e):t<e?Math.ceil(e):Math.floor(e)})(s,l,y),l=f(l,s,y),c=f(c,u,!y),u=f(u,c,!y));var o,f=H(E.ensureSingle(i,"path"),k,_,w);f.style("vector-effect","non-scaling-stroke").attr("d",isNaN((l-s)*(u-c))||o&&x._context.staticPlot?"M0,0Z":"M"+s+","+c+"V"+u+"H"+l+"V"+c+"Z").call(D.setClipUrl,b.layerClipId,x),!k.uniformtext.mode&&v&&(o=D.makePointStyleFns(h),D.singlePointStyle(e,f,h,o,x)),function(r,e,t,n,a,i,o,s,l,c,u){var d,f=e.xaxis,p=e.yaxis,h=r._fullLayout;function m(e,t,n){return E.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(D.font,n).call(L.convertToTspans,r)}var g=n[0].trace,y="h"===g.orientation,v=function(e,t,n,r,a){var i=t[0].trace;n=i.texttemplate?function(e,t,n,r,a){var i=t[0].trace,o=E.castOption(i,n,"texttemplate");if(!o)return"";var s,l,c="waterfall"===i.type,u="funnel"===i.type;l="h"===i.orientation?(f="y",s=a,p="x",r):(f="x",s=r,p="y",a);function d(e){return O(l,l.c2l(e),!0).text}t=t[n],n={};n.label=t.p,n.labelLabel=n[f+"Label"]=function(e){return O(s,s.c2l(e),!0).text}(t.p);var f=E.castOption(i,t.i,"text");0!==f&&!f||(n.text=f);n.value=t.s,n.valueLabel=n[p+"Label"]=d(t.s);var p={};F(p,i,t.i),c&&(n.delta=+t.rawS||t.s,n.deltaLabel=d(n.delta),n.final=t.v,n.finalLabel=d(n.final),n.initial=n.final-n.delta,n.initialLabel=d(n.initial));u&&(n.value=t.s,n.valueLabel=d(n.value),n.percentInitial=t.begR,n.percentInitialLabel=E.formatPercent(t.begR),n.percentPrevious=t.difR,n.percentPreviousLabel=E.formatPercent(t.difR),n.percentTotal=t.sumR,n.percenTotalLabel=E.formatPercent(t.sumR));t=E.castOption(i,t.i,"customdata");t&&(n.customdata=t);return E.texttemplateString(o,n,e._d3locale,p,n,i._meta||{})}(e,t,n,r,a):i.textinfo?function(e,t,n,r){var a=e[0].trace,i="h"===a.orientation,o="waterfall"===a.type,s="funnel"===a.type;function l(e){return O(i?n:r,+e,!0).text}var c,u=a.textinfo,d=e[t],f=u.split("+"),p=[],u=function(e){return-1!==f.indexOf(e)};u("label")&&p.push(function(e){return O(i?r:n,e,!0).text}(e[t].p));u("text")&&(0!==(c=E.castOption(a,d.i,"text"))&&!c||p.push(c));o&&(t=+d.rawS||d.s,a=d.v,o=a-t,u("initial")&&p.push(l(o)),u("delta")&&p.push(l(t)),u("final")&&p.push(l(a)));s&&(u("value")&&p.push(l(d.s)),s=0,u("percent initial")&&s++,u("percent previous")&&s++,u("percent total")&&s++,s=1<s,u("percent initial")&&(c=E.formatPercent(d.begR),s&&(c+=" of initial"),p.push(c)),u("percent previous")&&(c=E.formatPercent(d.difR),s&&(c+=" of previous"),p.push(c)),u("percent total")&&(c=E.formatPercent(d.sumR),s&&(c+=" of total"),p.push(c)));return p.join("<br>")}(t,n,r,a):R.getValue(i.text,n);return R.coerceString(N,n)}(h,n,a,f,p);d=function(e,t){t=R.getValue(e.textposition,t);return R.coerceEnumerated(z,t)}(g,a);var x="stack"===c.mode||"relative"===c.mode,b=n[a],e=!x||b._outmost;if(v&&"none"!==d&&(!b.isBlank&&i!==o&&s!==l||"auto"!==d&&"inside"!==d)){x=h.font,n=I.getBarColor(n[a],g),n=I.getInsideTextFont(g,a,x,n),a=I.getOutsideTextFont(g,a,x),x=t.datum();y?"log"===f.type&&x.s0<=0&&(i=f.range[0]<f.range[1]?0:f._length):"log"===p.type&&x.s0<=0&&(s=p.range[0]<p.range[1]?p._length:0);var _,w,T,M,f=Math.abs(o-i)-2*j,x=Math.abs(l-s)-2*j;if("outside"===d&&(e||b.hasB||(d="inside")),"auto"===d&&(e?(d="inside",M=E.ensureUniformFontSize(r,n),_=m(t,v,M),w=D.bBox(_.node()),T=w.width,A=w.height,p=T<=f&&A<=x,e=T<=x&&A<=f,x=y?T*(x/A)<=f:A*(f/T)<=x,0<T&&0<A&&(p||e||x)?d="inside":(d="outside",_.remove(),_=null)):d="inside"),!_){M=E.ensureUniformFontSize(r,"outside"===d?a:n);v=(_=m(t,v,M)).attr("transform");if(_.attr("transform",""),w=D.bBox(_.node()),T=w.width,A=w.height,_.attr("transform",v),T<=0||A<=0)return _.remove()}var k,A=g.textangle;(A="outside"===d?(k="both"===g.constraintext||"outside"===g.constraintext,function(e,t,n,r,a,i){var o,s=!!i.isHorizontal,l=!!i.constrained,c=i.angle||0,u=a.width,d=a.height,f=Math.abs(t-e),p=Math.abs(r-n);o=s?2*j<p?j:0:2*j<f?j:0;var h=1;l&&(h=s?Math.min(1,p/d):Math.min(1,f/u));i=B(c),l=q(a,i),p=(s?l.x:l.y)/2,d=(a.left+a.right)/2,f=(a.top+a.bottom)/2,u=(e+t)/2,c=(n+r)/2,l=0,a=0,n=s?t<e?1:-1:n<r?1:-1;s?(u=t-n*o,l=n*p):(c=r+n*o,a=-n*p);return{textX:d,textY:f,targetX:u,targetY:c,anchorX:l,anchorY:a,scale:h,rotate:i}}(i,o,s,l,w,{isHorizontal:y,constrained:k,angle:A})):(k="both"===g.constraintext||"inside"===g.constraintext,U(i,o,s,l,w,{isHorizontal:y,constrained:k,angle:A,anchor:g.insidetextanchor}))).fontSize=M.size,P(g.type,A,h),b.transform=A,H(_,h,c,u).attr("transform",E.getTextTransform(A))}else t.select("text").remove()}(x,b,i,p,t,s,l,c,u,_,w),b.layerClipId&&D.hideOutsideRangePoint(e,i.select("text"),T,M,h.xcalendar,h.ycalendar)});t=!1===h.cliponaxis;D.setClipUrl(e,t?null:b.layerClipId,x)}),r.getComponentMethod("errorbars","plot")(x,e,b,_)},toMoveInsideBar:U}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx/helpers":136,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"./attributes":323,"./constants":325,"./helpers":329,"./style":337,"./uniform_text":339,"@plotly/d3":11,"fast-isnumeric":15}],335:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a,i,o,s,l,c=e.cd,u=e.xaxis,d=e.yaxis,f=c[0].trace,p="funnel"===f.type,h="h"===f.orientation,m=[];if(!1===t)for(n=0;n<c.length;n++)c[n].selected=0;else for(n=0;n<c.length;n++){var g=c[n],y="ct"in g?g.ct:(y=g,a=d,i=h,o=p,l=s=void 0,s=(r=u).c2p(i?y.s0:y.p0,!0),l=r.c2p(i?y.s1:y.p1,!0),r=a.c2p(i?y.p0:y.s0,!0),y=a.c2p(i?y.p1:y.s1,!0),o?[(s+l)/2,(r+y)/2]:i?[l,(r+y)/2]:[(s+l)/2,y]);t.contains(y,!1,n,e)?(m.push({pointNumber:n,x:u.c2d(g.x),y:d.c2d(g.y)}),g.selected=1):g.selected=0}return m}},{}],336:[function(e,t,n){"use strict";t.exports=r;var c=e("../../lib").distinctVals,u=e("../../constants/numerical").BADNUM;function r(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,r=[],a=0;a<e.length;a++){for(var i=e[a],o=0;o<i.length;o++){var s=i[o];s.p!==u&&r.push(s.p)}i[0]&&i[0].width1&&(n=Math.min(i[0].width1,n))}this.positions=r;var l=c(r);this.distinctPositions=l.vals,1===l.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(l.minDiff,n);t=(t.posAxis||{}).type;"category"!==t&&"multicategory"!==t||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(e,t){var n=this.getLabel(e,t),e=this.bins[n]||0;return this.bins[n]=e+t,e},r.prototype.get=function(e,t){t=this.getLabel(e,t);return this.bins[t]||0},r.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":210,"../../lib":230}],337:[function(e,t,n){"use strict";var o=e("@plotly/d3"),a=e("../../components/color"),s=e("../../components/drawing"),l=e("../../lib"),c=e("../../registry"),i=e("./uniform_text").resizeText,r=e("./attributes"),u=r.textfont,d=r.insidetextfont,f=r.outsidetextfont,p=e("./helpers");function h(e,t,n){s.pointStyle(e.selectAll("path"),t,n),m(e,t,n)}function m(e,n,r){e.selectAll("text").each(function(e){var t=o.select(this),e=l.ensureUniformFontSize(r,g(t,e,n,r));s.font(t,e)})}function g(e,t,n,r){var a=r._fullLayout.font,i=n.textfont;return e.classed("bartext-inside")?(r=_(t,n),i=v(n,t.i,a,r)):e.classed("bartext-outside")&&(i=x(n,t.i,a)),i}function y(e,t,n){return b(u,e.textfont,t,n)}function v(e,t,n,r){n=y(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(n={color:a.contrast(r),family:n.family,size:n.size}),b(d,e.insidetextfont,t,n)}function x(e,t,n){n=y(e,t,n);return b(f,e.outsidetextfont,t,n)}function b(e,t,n,r){var a=p.getValue((t=t||{}).family,n),i=p.getValue(t.size,n),n=p.getValue(t.color,n);return{family:p.coerceString(e.family,a,r.family),size:p.coerceNumber(e.size,i,r.size),color:p.coerceColor(e.color,n,r.color)}}function _(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}t.exports={style:function(t){var e=o.select(t).selectAll("g.barlayer").selectAll("g.trace");i(t,e,"bar");var n=e.size(),r=t._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!e[0].trace.marker.line.width)&&o.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){h(o.select(this),e[0].trace,t)}),c.getComponentMethod("errorbars","style")(e)},styleTextPoints:m,styleOnSelect:function(e,t,n){var r,a,i=t[0].trace;i.selectedpoints?(r=n,a=i,t=e,s.selectedPointStyle(r.selectAll("path"),a),function(e,r,a){e.each(function(e){var t,n=o.select(this);e.selected?(t=l.ensureUniformFontSize(a,g(n,e,r,a)),(e=r.selected.textfont&&r.selected.textfont.color)&&(t.color=e),s.font(n,t)):s.selectedTextStyle(n,r)})}(r.selectAll("text"),a,t)):(h(n,i,e),c.getComponentMethod("errorbars","style")(n))},getInsideTextFont:v,getOutsideTextFont:x,getBarColor:_,resizeText:i}},{"../../components/color":100,"../../components/drawing":122,"../../lib":230,"../../registry":313,"./attributes":323,"./helpers":329,"./uniform_text":339,"@plotly/d3":11}],338:[function(e,t,n){"use strict";var o=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("../../lib").coercePattern;t.exports=function(e,t,n,r,a){var i=n("marker.color",r),r=s(e,"marker");r&&l(e,t,a,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",o.defaultLine),s(e,"marker.line")&&l(e,t,a,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),c(n,"marker.pattern",i,r),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],339:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../lib");function i(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:function(e,t,n){var r,a;n.uniformtext.mode&&(r=i(e),a=n.uniformtext.minsize,e=t.scale*t.fontSize,t.hide=e<a,n[r]=n[r]||1/0,t.hide||(n[r]=Math.min(n[r],Math.max(e,a))))},clearMinTextSize:function(e,t){t[i(e)]=void 0},resizeText:function(e,t,n){var r=(e=e._fullLayout)["_"+n+"Text_minsize"];if(r){var a,i="hide"===e.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}t.selectAll(a).each(function(e){e=e.transform;e&&(e.scale=i&&e.hide?0:r/e.fontSize,o.select(this).select("text").attr("transform",s.getTextTransform(e)))})}}}},{"../../lib":230,"@plotly/d3":11}],340:[function(e,t,n){"use strict";var r=e("../../plots/attributes"),a=e("../../plots/domain").attributes,i=e("../../plots/font_attributes"),o=e("../../components/color/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,e=e("../../lib/extend").extendFlat,i=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:e({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:e({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:e({},i,{}),outsidetextfont:e({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:e({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:e({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":99,"../../lib/extend":224,"../../plots/attributes":272,"../../plots/domain":304,"../../plots/font_attributes":305,"../../plots/template_attributes":312}],341:[function(e,t,a){"use strict";var i=e("../../plots/plots");a.name="pie",a.plot=function(e,t,n,r){i.plotBasePlot(a.name,e,t,n,r)},a.clean=function(e,t,n,r){i.cleanBasePlot(a.name,e,t,n,r)}},{"../../plots/plots":311}],342:[function(e,t,n){"use strict";var v=e("fast-isnumeric"),i=e("tinycolor2"),r=e("../../components/color"),d={};function x(n){return function(e,t){return!!e&&(!!(e=i(e)).isValid()&&(e=r.addOpacity(e,e.getAlpha()),n[t]||(n[t]=e),e))}}function f(e,t){var n,r=JSON.stringify(e),a=t[r];if(!a){for(a=e.slice(),n=0;n<e.length;n++)a.push(i(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)a.push(i(e[n]).darken(20).toHexString());t[r]=a}return a}t.exports={calc:function(e,t){var n=[],r=(e=e._fullLayout).hiddenlabels||[],a=t.labels,i=t.marker.colors||[],o=t.values,s=t._length,l=t._hasValues&&s;if(t.dlabel)for(a=new Array(s),m=0;m<s;m++)a[m]=String(t.label0+m*t.dlabel);for(var c,u,d={},f=x(e["_"+t.type+"colormap"]),p=0,h=!1,m=0;m<s;m++){if(l){if(c=o[m],!v(c))continue;if((c=+c)<0)continue}else c=1;void 0!==(g=a[m])&&""!==g||(g=m);var g,y=d[g=String(g)];void 0===y?(d[g]=n.length,(u=-1!==r.indexOf(g))||(p+=c),n.push({v:c,label:g,color:f(i[m],g),i:m,pts:[m],hidden:u})):(h=!0,(y=n[y]).v+=c,y.pts.push(m),y.hidden||(p+=c),!1===y.color&&i[m]&&(y.color=f(i[m],g)))}return("funnelarea"===t.type?h:t.sort)&&n.sort(function(e,t){return t.v-e.v}),n[0]&&(n[0].vTotal=p),n},crossTraceCalc:function(e,t){var n=(n=(t||{}).type)||"pie",t=e._fullLayout,r=e.calcdata,a=t[n+"colorway"],i=t["_"+n+"colormap"];t["extend"+n+"colors"]&&(a=f(a,d));for(var o=0,s=0;s<r.length;s++){var l=r[s];if(l[0].trace.type===n)for(var c=0;c<l.length;c++){var u=l[c];!1===u.color&&(i[u.label]?u.color=i[u.label]:(i[u.label]=u.color=a[o%a.length],o++))}}},makePullColorFn:x,generateExtendedColors:f}},{"../../components/color":100,"fast-isnumeric":15,tinycolor2:65}],343:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../lib"),u=e("./attributes"),d=e("../../plots/domain").defaults,f=e("../bar/defaults").handleText;function p(e,t){var n=Array.isArray(e),r=c.isArrayOrTypedArray(t),a=Math.min(n?e.length:1/0,r?t.length:1/0);if((a=!isFinite(a)?0:a)&&r){for(var i,o=0;o<a;o++){var s=t[o];if(l(s)&&0<s){i=!0;break}}i||(a=0)}return{hasLabels:n,hasValues:r,len:a}}t.exports={handleLabelsAndValues:p,supplyDefaults:function(n,r,e,t){function a(e,t){return c.coerce(n,r,u,e,t)}var i,o,s=p(a("labels"),a("values")),l=s.len;r._hasLabels=s.hasLabels,r._hasValues=s.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),l?(r._length=l,a("marker.line.width")&&a("marker.line.color"),a("marker.colors"),a("scalegroup"),s=a("text"),(l=a("texttemplate"))||(i=a("textinfo",Array.isArray(s)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),(l||i&&"none"!==i)&&(o=a("textposition"),f(n,r,t,a,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),!Array.isArray(o)&&"auto"!==o&&"outside"!==o||a("automargin"),"inside"!==o&&"auto"!==o&&!Array.isArray(o)||a("insidetextorientation")),d(r,t,a),i=a("hole"),a("title.text")&&(o=a("title.position",i?"middle center":"top center"),i||"middle center"!==o||(r.title.position="top center"),c.coerceFont(a,"title.font",t.font)),a("sort"),a("direction"),a("rotation"),a("pull")):r.visible=!1}}},{"../../lib":230,"../../plots/domain":304,"../bar/defaults":327,"./attributes":340,"fast-isnumeric":15}],344:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},{"../../components/fx/helpers":136}],345:[function(e,t,n){"use strict";var r=e("../../lib");function a(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function(e,t){e=a((100*e).toPrecision(3));return r.numSeparate(e,t)+"%"},n.formatPieValue=function(e,t){e=a(e.toPrecision(10));return r.numSeparate(e,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r||""===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0},n.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},{"../../lib":230}],346:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":340,"./base_plot":341,"./calc":342,"./defaults":343,"./layout_attributes":347,"./layout_defaults":348,"./plot":349,"./style":350,"./style_one":351}],347:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],348:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return a.coerce(n,r,i,e,t)}e("hiddenlabels"),e("piecolorway",r.colorway),e("extendpiecolors")}},{"../../lib":230,"./layout_attributes":347}],349:[function(e,t,n){"use strict";var x=e("@plotly/d3"),l=e("../../plots/plots"),m=e("../../components/fx"),c=e("../../components/color"),b=e("../../components/drawing"),_=e("../../lib"),u=_.strScale,d=_.strTranslate,w=e("../../lib/svg_text_utils"),r=e("../bar/uniform_text"),T=r.recordMinTextSize,a=r.clearMinTextSize,o=e("../bar/constants").TEXTPAD,M=e("./helpers"),g=e("./event_data"),p=e("../../lib").isValidTextValue;function k(e,u,t){var d=t[0],f=d.trace,p=d.cx,h=d.cy;"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),e.on("mouseover",function(e){var t,n,r,a,i,o,s,l=u._fullLayout,c=u._fullData[f.index];u._dragging||!1===l.hovermode||(t=c.hoverinfo,"all"===(t=Array.isArray(t)?m.castHoverinfo({hoverinfo:[M.castOption(t,e.pts)],_module:f._module},l,0):t)&&(t="label+text+value+percent+name"),(c.hovertemplate||"none"!==t&&"skip"!==t&&t)&&(n=e.rInscribed||0,r=p+e.pxmid[0]*(1-n),a=h+e.pxmid[1]*(1-n),s=l.separators,i=[],t&&-1!==t.indexOf("label")&&i.push(e.label),e.text=M.castOption(c.hovertext||c.text,e.pts),t&&-1!==t.indexOf("text")&&(o=e.text,_.isValidTextValue(o)&&i.push(o)),e.value=e.v,e.valueLabel=M.formatPieValue(e.v,s),t&&-1!==t.indexOf("value")&&i.push(e.valueLabel),e.percent=e.v/d.vTotal,e.percentLabel=M.formatPiePercent(e.percent,s),t&&-1!==t.indexOf("percent")&&i.push(e.percentLabel),s=(o=c.hoverlabel).font,m.loneHover({trace:f,x0:r-n*d.r,x1:r+n*d.r,y:a,text:i.join("<br>"),name:c.hovertemplate||-1!==t.indexOf("name")?c.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:M.castOption(o.bgcolor,e.pts)||e.color,borderColor:M.castOption(o.bordercolor,e.pts),fontFamily:M.castOption(s.family,e.pts),fontSize:M.castOption(s.size,e.pts),fontColor:M.castOption(s.color,e.pts),nameLength:M.castOption(o.namelength,e.pts),textAlign:M.castOption(o.align,e.pts),hovertemplate:M.castOption(c.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[g(e,c)]},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:u}),f._hasHoverLabel=!0),f._hasHoverEvent=!0,u.emit("plotly_hover",{points:[g(e,c)],event:x.event}))}),e.on("mouseout",function(e){var t=u._fullLayout,n=u._fullData[f.index],r=x.select(this).datum();f._hasHoverEvent&&(e.originalEvent=x.event,u.emit("plotly_unhover",{points:[g(r,n)],event:x.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(m.loneUnhover(t._hoverlayer.node()),f._hasHoverLabel=!1)}),e.on("click",function(e){var t=u._fullLayout,n=u._fullData[f.index];u._dragging||!1===t.hovermode||(u._hoverdata=[g(e,n)],m.click(u,x.event))})}function A(e,t,n){var r=M.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=M.castOption(e._input.textfont.color,t.pts));var a=M.castOption(e.insidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||n.family,n=M.castOption(e.insidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||n.size;return{color:r||c.contrast(t.color),family:a,size:n}}function i(e,t){for(var n,r,a,i=0;i<e.length;i++)(a=(r=e[i][0]).trace).title.text&&(n=a.title.text,a._meta&&(n=_.templateString(n,a._meta)),n=b.tester.append("text").attr("data-notex",1).text(n).call(b.font,a.title.font).call(w.convertToTspans,t),a=b.bBox(n.node(),!0),r.titleBox={width:a.width,height:a.height},n.remove())}function S(i,o,e){var s=e.r||o.rpx1,t=o.rInscribed;if(o.startangle===o.stopangle)return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0};var l=o.ring,n=1===l&&Math.abs(o.startangle-o.stopangle)===2*Math.PI,r=o.halfangle,a=o.midangle,c=e.trace.insidetextorientation,u="horizontal"===c,d="tangential"===c,e="radial"===c,f="auto"===c,p=[];if(!f){var h,m=function(e,t){var n,r,a;r=e,a=(n=o).startangle,n=n.stopangle,(r<a&&n<r||a<r&&r<n)&&(n=(r=Math.abs(e-o.startangle))<(n=Math.abs(e-o.stopangle))?r:n,(g="tan"===t?L(i,s,l,n,0):E(i,s,l,n,Math.PI/2)).textPosAngle=e,p.push(g))};if(u||d){for(h=4;-4<=h;h-=2)m(Math.PI*h,"tan");for(h=4;-4<=h;h-=2)m(Math.PI*(h+1),"tan")}if(u||e){for(h=4;-4<=h;h-=2)m(Math.PI*(h+1.5),"rad");for(h=4;-4<=h;h-=2)m(Math.PI*(h+.5),"rad")}}if(n||f||u){var g,u=Math.sqrt(i.width*i.width+i.height*i.height);if((g={scale:t*s*2/u,rCenter:1-t,rotate:0}).textPosAngle=(o.startangle+o.stopangle)/2,1<=g.scale)return g;p.push(g)}(f||e)&&((g=E(i,s,l,r,a)).textPosAngle=(o.startangle+o.stopangle)/2,p.push(g)),(f||d)&&((g=L(i,s,l,r,a)).textPosAngle=(o.startangle+o.stopangle)/2,p.push(g));for(var y=0,v=0,x=0;x<p.length;x++){var b=p[x].scale;if(v<b&&(v=b,y=x),!f&&1<=v)break}return p[y]}function E(e,t,n,r,a){t=Math.max(0,t-2*o);var i=e.width/e.height,n=h(i,r,t,n);return{scale:2*n/e.height,rCenter:s(i,n/t),rotate:f(a)}}function L(e,t,n,r,a){t=Math.max(0,t-2*o);var i=e.height/e.width,n=h(i,r,t,n);return{scale:2*n/e.width,rCenter:s(i,n/t),rotate:f(a+Math.PI/2)}}function s(e,t){return Math.cos(t)-e*t}function f(e){return(180/Math.PI*e+720)%180-90}function h(e,t,n,r){t=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(t*t+.5)+t),r/(Math.sqrt(e*e+r/2)+e))}function C(e,t){var n=t.pxmid[0],r=t.pxmid[1],t=e.width/2,e=e.height/2;return n<0&&(t*=-1),r<0&&(e*=-1),{scale:1,rCenter:1,rotate:0,x:t+Math.abs(e)*(0<t?1:-1)/2,y:e/(1+n*n/(r*r)),outside:!0}}function D(e,t){var n,r,a,i=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=i.title.font.size,a=v(i),-1!==i.title.position.indexOf("top")?(o.y-=(1+a)*e.r,s.ty-=e.titleBox.height):-1!==i.title.position.indexOf("bottom")&&(o.y+=(1+a)*e.r);var l,l=(l=e.r,c=e.trace.aspectratio,l/(void 0===c?1:c)),c=t.w*(i.domain.x[1]-i.domain.x[0])/2;return-1!==i.title.position.indexOf("left")?(c+=l,o.x-=(1+a)*l,s.tx+=e.titleBox.width/2):-1!==i.title.position.indexOf("center")?c*=2:-1!==i.title.position.indexOf("right")&&(c+=l,o.x+=(1+a)*l,s.tx-=e.titleBox.width/2),n=c/e.titleBox.width,r=y(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(n,r),tx:s.tx,ty:s.ty}}function y(e,t){var n=e.trace,n=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function v(e){var t,n=e.pull;if(!n)return 0;if(Array.isArray(n))for(t=n=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}function O(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r][0],i=a.trace,o=i.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);i.title.text&&"middle center"!==i.title.position&&(l-=y(a,t));o=l/2;"funnelarea"!==i.type||i.scalegroup||(o/=i.aspectratio),a.r=Math.min(s/2,o)/(1+v(i)),a.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2,a.cy=t.t+t.h*(1-i.domain.y[0])-l/2,i.title.text&&-1!==i.title.position.indexOf("bottom")&&(a.cy-=y(a,t)),i.scalegroup&&-1===n.indexOf(i.scalegroup)&&n.push(i.scalegroup)}!function(e,t){for(var n,r,a,i,o,s,l=0;l<t.length;l++){var c,u=1/0,d=t[l];for(r=0;r<e.length;r++)n=e[r][0],(a=n.trace).scalegroup===d&&("pie"===a.type?i=n.r*n.r:"funnelarea"===a.type&&(1<a.aspectratio?(o=n.r,s=o/a.aspectratio):(s=n.r,o=s*a.aspectratio),o*=(1+a.baseratio)/2,i=o*s),u=Math.min(u,i/n.vTotal));for(r=0;r<e.length;r++)n=e[r][0],(a=n.trace).scalegroup===d&&(c=u*n.vTotal,"funnelarea"===a.type&&(c/=(1+a.baseratio)/2,c/=a.aspectratio),n.r=Math.sqrt(c))}}(e,n)}function P(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function I(e,t,n){var r,a,i,o,s,l,c=e._fullLayout,u=n.trace,d=u.texttemplate,f=u.textinfo;!d&&f&&"none"!==f&&(r=f.split("+"),s=(o=function(e){return-1!==r.indexOf(e)})("label"),i=o("text"),a=o("value"),f=o("percent"),o=c.separators,s=s?[t.label]:[],i&&(i=M.getFirstFilled(u.text,t.pts),p(i)&&s.push(i)),a&&s.push(M.formatPieValue(t.v,o)),f&&s.push(M.formatPiePercent(t.v/n.vTotal,o)),t.text=s.join("<br>")),d&&((o=_.castOption(u,t.i,"texttemplate"))?(s={label:(l=t).label,value:l.v,valueLabel:M.formatPieValue(l.v,c.separators),percent:l.v/n.vTotal,percentLabel:M.formatPiePercent(l.v/n.vTotal,c.separators),color:l.color,text:l.text,customdata:_.castOption(u,l.i,"customdata")},d=M.getFirstFilled(u.text,t.pts),!p(d)&&""!==d||(s.text=d),t.text=_.texttemplateString(o,s,e._fullLayout._d3locale,s,u._meta||{})):t.text="")}function R(e,t){var n=e.rotate*Math.PI/180,r=Math.cos(n),a=Math.sin(n),n=(t.left+t.right)/2,t=(t.top+t.bottom)/2;e.textX=n*r-t*a,e.textY=n*a+t*r,e.noCenter=!0}t.exports={plot:function(y,e){var v=y._fullLayout,o=v._size;a("pie",v),i(e,y),O(e,o);var t=_.makeTraceGroups(v._pielayer,e,"trace").each(function(h){var a=x.select(this),m=h[0],g=m.trace;!function(e){var t,n,r,a=e[0],i=a.r,o=a.trace,s=M.getRotationAngle(o.rotation),l=2*Math.PI/a.vTotal,c="px0",u="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;s+=l*e[t].v,l*=-1,c="px1",u="px0"}for(r=P(i,s),t=0;t<e.length;t++)(n=e[t]).hidden||(n[c]=r,n.startangle=s,s+=l*n.v/2,n.pxmid=P(i,s),n.midangle=s,s+=l*n.v/2,r=P(i,s),n.stopangle=s,n[u]=r,n.largeArc=n.v>a.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/a.vTotal,.5),n.ring=1-o.hole,n.rInscribed=function(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}(n,a))}(h),a.attr("stroke-linejoin","round"),a.each(function(){var e=x.select(this).selectAll("g.slice").data(h);e.enter().append("g").classed("slice",!0),e.exit().remove();var i=[[[],[]],[[],[]]],p=!1;e.each(function(l,c){var u,d,e,t,n,f,r;function a(e,t,n,r){var a=r*(t[0]-e[0]),e=r*(t[1]-e[1]);return"a"+r*m.r+","+r*m.r+" 0 "+l.largeArc+(n?" 1 ":" 0 ")+a+","+e}l.hidden?x.select(this).selectAll("path,g").remove():(l.pointNumber=l.i,l.curveNumber=g.index,i[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l),u=m.cx,d=m.cy,(e=(r=x.select(this)).selectAll("path.surface").data([l])).enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),r.call(k,y,h),!g.pull||0<(n=+M.castOption(g.pull,l.pts)||0)&&(u+=n*l.pxmid[0],d+=n*l.pxmid[1]),l.cxFinal=u,l.cyFinal=d,n=g.hole,l.v===m.vTotal?(t="M"+(u+l.px0[0])+","+(d+l.px0[1])+a(l.px0,l.pxmid,!0,1)+a(l.pxmid,l.px0,!0,1)+"Z",n?e.attr("d","M"+(u+n*l.px0[0])+","+(d+n*l.px0[1])+a(l.px0,l.pxmid,!1,n)+a(l.pxmid,l.px0,!1,n)+"Z"+t):e.attr("d",t)):(t=a(l.px0,l.px1,!0,1),n?e.attr("d","M"+(u+n*l.px1[0])+","+(d+n*l.px1[1])+a(l.px1,l.px0,!1,n)+"l"+(n=1-n)*l.px0[0]+","+n*l.px0[1]+t+"Z"):e.attr("d","M"+u+","+d+"l"+l.px0[0]+","+l.px0[1]+t+"Z")),I(y,l,m),f=M.castOption(g.textposition,l.pts),(r=r.selectAll("g.slicetext").data(l.text&&"none"!==f?[0]:[])).enter().append("g").classed("slicetext",!0),r.exit().remove(),r.each(function(){var e,t,n,r,a=_.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)}),r=_.ensureUniformFontSize(y,"outside"===f?(e=g,t=l,o=v.font,n=M.castOption(e.outsidetextfont.color,t.pts)||M.castOption(e.textfont.color,t.pts)||o.color,r=M.castOption(e.outsidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||o.family,o=M.castOption(e.outsidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||o.size,{color:n,family:r,size:o}):A(g,l,v.font));a.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,r).call(w.convertToTspans,y);var i,o=b.bBox(a.node());"outside"===f?i=C(o,l):(i=S(o,l,m),"auto"===f&&i.scale<1&&(s=_.ensureUniformFontSize(y,g.outsidetextfont),a.call(b.font,s),i=C(o=b.bBox(a.node()),l)));var s=i.textPosAngle,s=void 0===s?l.pxmid:P(m.r,s);i.targetX=u+s[0]*i.rCenter+(i.x||0),i.targetY=d+s[1]*i.rCenter+(i.y||0),R(i,o),i.outside&&(s=i.targetY,l.yLabelMin=s-o.height/2,l.yLabelMid=s,l.yLabelMax=s+o.height/2,l.labelExtraX=0,l.labelExtraY=0,p=!0),i.fontSize=r.size,T(g.type,i,v),h[c].transform=i,a.attr("transform",_.getTextTransform(i))}))});var s,t,n,r=x.select(this).selectAll("g.titletext").data(g.title.text?[0]:[]);r.enter().append("g").classed("titletext",!0),r.exit().remove(),r.each(function(){var e,t=_.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)}),n=g.title.text;g._meta&&(n=_.templateString(n,g._meta)),t.text(n).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,g.title.font).call(w.convertToTspans,y),e="middle center"===g.title.position?(e=m,n=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height),{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/n,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}):D(m,o),t.attr("transform",d(e.x,e.y)+u(Math.min(1,e.scale))+d(e.tx,e.ty))}),p&&function(e,c){var t,u,n,d,f,p,h,r,a,m,i,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function g(e,t){return t.pxmid[1]-e.pxmid[1]}for(u=0;u<2;u++)for(n=u?l:g,f=u?Math.max:Math.min,h=u?1:-1,t=0;t<2;t++){for(d=t?Math.max:Math.min,p=t?1:-1,(r=e[u][t]).sort(n),a=e[1-u][t],m=a.concat(r),o=[],i=0;i<r.length;i++)void 0!==r[i].yLabelMid&&o.push(r[i]);for(s=!1,i=0;u&&i<a.length;i++)if(void 0!==a[i].yLabelMid){s=a[i];break}for(i=0;i<o.length;i++){var y=i&&o[i-1];s&&!i&&(y=s),function(e,t){var n,r,a,t=(t=t||{}).labelExtraY+(u?t.yLabelMax:t.yLabelMin),i=u?e.yLabelMin:e.yLabelMax,o=u?e.yLabelMax:e.yLabelMin,s=e.cyFinal+f(e.px0[1],e.px1[1]),l=t-i;if(0<l*h&&(e.labelExtraY=l),Array.isArray(c.pull))for(n=0;n<m.length;n++)(r=m[n])===e||(M.castOption(c.pull,e.pts)||0)>=(M.castOption(c.pull,r.pts)||0)||(0<(e.pxmid[1]-r.pxmid[1])*h?0<(l=r.cyFinal+f(r.px0[1],r.px1[1])-i-e.labelExtraY)*h&&(e.labelExtraY+=l):0<(o+e.labelExtraY-s)*h&&(a=3*p*Math.abs(n-m.indexOf(e)),0<(a=r.cxFinal+d(r.px0[0],r.px1[0])+a-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*p&&(e.labelExtraX+=a)))}(o[i],y)}}}(i,g),s=g,e.each(function(e){var t,n,r,a,i,o=x.select(this);e.labelExtraX||e.labelExtraY?(i=o.select("g.slicetext text"),e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,i.attr("transform",_.getTextTransform(e.transform)),n="M"+(t=e.cxFinal+e.pxmid[0])+","+(e.cyFinal+e.pxmid[1]),r=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4,e.labelExtraX?(a=e.labelExtraX*e.pxmid[1]/e.pxmid[0],i=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]),Math.abs(a)>Math.abs(i)?n+="l"+i*e.pxmid[0]/e.pxmid[1]+","+i+"H"+(t+e.labelExtraX+r):n+="l"+e.labelExtraX+","+a+"v"+(i-a)+"h"+r):n+="V"+(e.yLabelMid+e.labelExtraY)+"h"+r,_.ensureSingle(o,"path","textline").call(c.stroke,s.outsidetextfont.color).attr({"stroke-width":Math.min(2,s.outsidetextfont.size/8),d:n,fill:"none"})):o.select("path.textline").remove()}),p&&g.automargin&&(t=b.bBox(a.node()),n=g.domain,r=o.w*(n.x[1]-n.x[0]),e=o.h*(n.y[1]-n.y[0]),r=(.5*r-m.r)/o.w,e=(.5*e-m.r)/o.h,l.autoMargin(y,"pie."+g.uid+".automargin",{xl:n.x[0]-r,xr:n.x[1]+r,yb:n.y[0]-e,yt:n.y[1]+e,l:Math.max(m.cx-m.r-t.left,0),r:Math.max(t.right-(m.cx+m.r),0),b:Math.max(t.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-t.top,0),pad:5}))})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=x.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},formatSliceLabel:I,transformInsideText:S,determineInsideTextFont:A,positionTitleOutside:D,prerenderTitles:i,layoutAreas:O,attachFxHandlers:k,computeTransform:R}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx":140,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../bar/constants":325,"../bar/uniform_text":339,"./event_data":344,"./helpers":345,"@plotly/d3":11}],350:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("./style_one"),i=e("../bar/uniform_text").resizeText;t.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");i(e,t,"pie"),t.each(function(e){var t=e[0].trace,e=r.select(this);e.style({opacity:t.opacity}),e.selectAll("path.surface").each(function(e){r.select(this).call(a,e,t)})})}},{"../bar/uniform_text":339,"./style_one":351,"@plotly/d3":11}],351:[function(e,t,n){"use strict";var a=e("../../components/color"),i=e("./helpers").castOption;t.exports=function(e,t,n){var r=n.marker.line,n=i(r.color,t.pts)||a.defaultLine,r=i(r.width,t.pts)||0;e.style("stroke-width",r).call(a.fill,t.color).call(a.stroke,n)}},{"../../components/color":100,"./helpers":345}],352:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;a.mergeArray(t.text,e,"tx"),a.mergeArray(t.texttemplate,e,"txt"),a.mergeArray(t.hovertext,e,"htx"),a.mergeArray(t.customdata,e,"data"),a.mergeArray(t.textposition,e,"tp"),t.textfont&&(a.mergeArrayCastPositive(t.textfont.size,e,"ts"),a.mergeArray(t.textfont.color,e,"tc"),a.mergeArray(t.textfont.family,e,"tf"));var r=t.marker;r&&(a.mergeArrayCastPositive(r.size,e,"ms"),a.mergeArrayCastPositive(r.opacity,e,"mo"),a.mergeArray(r.symbol,e,"mx"),a.mergeArray(r.color,e,"mc"),t=r.line,r.line&&(a.mergeArray(t.color,e,"mlc"),a.mergeArrayCastPositive(t.width,e,"mlw")),(r=r.gradient)&&"none"!==r.type&&(a.mergeArray(r.type,e,"mgt"),a.mergeArray(r.color,e,"mgc")))}},{"../../lib":230}],353:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../components/colorscale/attributes"),s=e("../../plots/font_attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../components/drawing"),u=e("./constants"),e=e("../../lib/extend").extendFlat;function d(){return{valType:"any",dflt:0,editType:"calc"}}function f(){return{valType:"any",editType:"calc"}}function p(){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:d(),yperiod:d(),xperiod0:f(),yperiod0:f(),xperiodalignment:p(),yperiodalignment:p(),xhoverformat:r("x"),yhoverformat:r("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:a({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:e({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:e({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:e({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},o("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":107,"../../components/drawing":122,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"./constants":357}],354:[function(e,t,n){"use strict";var D=e("fast-isnumeric"),O=e("../../lib"),P=e("../../plots/cartesian/axes"),I=e("../../plots/cartesian/align_period"),R=e("../../constants/numerical").BADNUM,h=e("./subtypes"),N=e("./colorscale_calc"),z=e("./arrays_to_calcdata"),F=e("./calc_selection");function j(e,t,n,r,a,i,o){var s=t._length,l=e._fullLayout,c=n._id,u=r._id,d=l._firstScatter[m(t)]===t.uid,f=(q(t,l,n,r)||{}).orientation,p=t.fill;n._minDtick=0;e={padded:!(r._minDtick=0)},l={padded:!0};o&&(e.ppad=l.ppad=o);s=s<2||a[0]!==a[s-1]||i[0]!==i[s-1];s&&("tozerox"===p||"tonextx"===p&&(d||"h"===f))?e.tozero=!0:(t.error_y||{}).visible||"tonexty"!==p&&"tozeroy"!==p&&(h.hasMarkers(t)||h.hasText(t))||(e.padded=!1,e.ppad=0),s&&("tozeroy"===p||"tonexty"===p&&(d||"v"===f))?l.tozero=!0:"tonextx"!==p&&"tozerox"!==p||(l.padded=!1),c&&(t._extremes[c]=P.findExtremes(n,a,e)),u&&(t._extremes[u]=P.findExtremes(r,i,l))}function H(e,t){if(h.hasMarkers(e)){var n=e.marker,r=1.6*(e.marker.sizeref||1),a="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)};if(O.isArrayOrTypedArray(n.size)){var i={type:"linear"};P.setConvert(i);for(var o=i.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=a(o[l]);return s}return a(n.size)}}function B(e,t){var n=m(t),e=e._firstScatter;e[n]||(e[n]=t.uid)}function m(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function q(e,t,n,r){e=e.stackgroup;if(e){e=t._scatterStackOpts[n._id+r._id][e],n="v"===e.orientation?r:n;return"linear"===n.type||"log"===n.type?e:void 0}}t.exports={calc:function(e,t){var n,r,a,i,o,s=e._fullLayout,l=P.getFromId(e,t.xaxis||"x"),c=P.getFromId(e,t.yaxis||"y"),u=l.makeCalcdata(t,"x"),d=c.makeCalcdata(t,"y"),f=I(t,l,"x",u),p=I(t,c,"y",d),h=t._length,m=new Array(h),g=t.ids,y=q(t,s,l,c),v=!1;B(s,t);var x,b="x",_="y";y?(O.pushUnique(y.traceIndices,t._expandedIndex),n="v"===y.orientation,x=n?(_="s","x"):(b="s","y"),i="interpolate"===y.stackgaps):j(e,t,l,c,f,p,H(t,h));for(var w=!!t.xperiodalignment,T=!!t.yperiodalignment,M=0;M<h;M++){var k=m[M]={},A=D(f[M]),S=D(p[M]);A&&S?(k[b]=f[M],k[_]=p[M],w&&(k.orig_x=u[M]),T&&(k.orig_y=d[M])):y&&(n?A:S)?(k[x]=(n?f:p)[M],k.gap=!0,i?(k.s=R,v=!0):k.s=0):k[b]=k[_]=R,g&&(k.id=String(g[M]))}if(z(m,t),N(e,t),F(m,t),y){for(M=0;M<m.length;)m[M][x]===R?m.splice(M,1):M++;if(O.sort(m,function(e,t){return e[x]-t[x]||e.i-t.i}),v){for(M=0;M<m.length-1&&m[M].gap;)M++;for(o=(o=m[M].s)||(m[M].s=0),r=0;r<M;r++)m[r].s=o;for(a=m.length-1;M<a&&m[a].gap;)a--;for(o=m[a].s,r=m.length-1;a<r;r--)m[r].s=o;for(;M<a;)if(m[++M].gap){for(r=M+1;m[r].gap;)r++;for(var E=m[M-1][x],L=m[M-1].s,C=(m[r].s-L)/(m[r][x]-E);M<r;)m[M].s=L+(m[M][x]-E)*C,M++}}}return m},calcMarkerSize:H,calcAxisExpansion:j,setFirstScatter:B,getStackOpts:q}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"./arrays_to_calcdata":352,"./calc_selection":355,"./colorscale_calc":356,"./subtypes":378,"fast-isnumeric":15}],355:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":230}],356:[function(e,t,n){"use strict";var r=e("../../components/colorscale/helpers").hasColorscale,a=e("../../components/colorscale/calc"),i=e("./subtypes");t.exports=function(e,t){i.hasLines(t)&&r(t,"line")&&a(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(t)&&(r(t,"marker")&&a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"./subtypes":378}],357:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],358:[function(e,t,n){"use strict";var O=e("./calc");function P(e,t,n,r,a,i,o){a={i:null,gap:a[r]=!0,s:0};a[o]=n,e.splice(t,0,a),t&&n===e[t-1][o]?(r=e[t-1],a.s=r.s,a.i=r.i,a.gap=r.gap):i&&(a.s=(i=n,a=o,o=e[(n=t)-1],(n=e[n+1])?o?o.s+(n.s-o.s)*(i-o[a])/(n[a]-o[a]):n.s:o.s)),t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,r=t.yaxis,t=n._id+r._id,a=e._fullLayout._scatterStackOpts[t];if(a){var i,o,s,l,c,u,d,f,p,h,m,g=e.calcdata;for(m in a){var y,v=(y=a[m]).traceIndices;if(v.length){for(u="interpolate"===y.stackgaps,d=y.groupnorm,p="v"===y.orientation?(f="x","y"):(f="y","x"),h=new Array(v.length),_=0;_<h.length;_++)h[_]=!1;for(var x=g[v[0]],b=new Array(x.length),_=0;_<x.length;_++)b[_]=x[_][f];for(_=1;_<v.length;_++){for(M=g[v[_]],L=i=0;L<M.length;L++){for(s=M[L][f];s>b[i]&&i<b.length;i++)P(M,L,b[i],_,h,u,f),L++;if(s!==b[i]){for(o=0;o<_;o++)P(g[v[o]],i,s,o,h,u,f);b.splice(i,0,s)}i++}for(;i<b.length;i++)P(M,L,b[i],_,h,u,f),L++}var w=b.length;for(L=0;L<x.length;L++){for(l=x[L][p]=x[L].s,_=1;_<v.length;_++)(M=g[v[_]])[0].trace._rawLength=M[0].trace._length,M[0].trace._length=w,l+=M[L].s,M[L][p]=l;if(d)for(c=("fraction"===d?l:l/100)||1,_=0;_<v.length;_++){var T=g[v[_]][L];T[p]/=c,T.sNorm=T.s/c}}for(_=0;_<v.length;_++){var M,k=(M=g[v[_]])[0].trace,A=O.calcMarkerSize(k,k._rawLength),S=Array.isArray(A);if(A&&h[_]||S)for(var E=A,A=new Array(w),L=0;L<w;L++)A[L]=M[L].gap?0:S?E[M[L].i]:E;var C=new Array(w),D=new Array(w);for(L=0;L<w;L++)C[L]=M[L].x,D[L]=M[L].y;O.calcAxisExpansion(e,k,n,r,C,D,A),M[0].t.orientation=y.orientation}}}}}},{"./calc":354}],359:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var a=t-1;0<=a;a--){var i=e[a];if("scatter"===i.type&&i.xaxis===n.xaxis&&i.yaxis===n.yaxis){i.opacity=void 0;break}}}}}},{}],360:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry"),c=e("./attributes"),u=e("./constants"),d=e("./subtypes"),f=e("./xy_defaults"),p=e("./period_defaults"),h=e("./stack_defaults"),m=e("./marker_defaults"),g=e("./line_defaults"),y=e("./line_shape_defaults"),v=e("./text_defaults"),x=e("./fillcolor_defaults");t.exports=function(n,r,e,t){function a(e,t){return s.coerce(n,r,c,e,t)}var i,o=f(n,r,t,a);o||(r.visible=!1),r.visible&&(p(n,r,t,a),a("xhoverformat"),a("yhoverformat"),o=!(i=h(n,r,t,a))&&o<u.PTS_LINESONLY?"lines+markers":"lines",a("text"),a("hovertext"),a("mode",o),d.hasLines(r)&&(g(n,r,e,t,a),y(n,r,a),a("connectgaps"),a("line.simplify")),d.hasMarkers(r)&&m(n,r,e,t,a,{gradient:!0}),d.hasText(r)&&(a("texttemplate"),v(n,r,t,a)),o=[],(d.hasMarkers(r)||d.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),o.push("points")),a("fill",i?i.fillDflt:"none"),"none"!==r.fill&&(x(n,r,e,a),d.hasLines(r)||y(n,r,a)),t=(r.line||{}).color,i=(r.marker||{}).color,"tonext"!==r.fill&&"toself"!==r.fill||o.push("fills"),a("hoveron",o.join("+")||"points"),"fills"!==r.hoveron&&a("hovertemplate"),(o=l.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||i||e,{axis:"y"}),o(n,r,t||i||e,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(r,a))}},{"../../lib":230,"../../registry":313,"./attributes":353,"./constants":357,"./fillcolor_defaults":361,"./line_defaults":366,"./line_shape_defaults":368,"./marker_defaults":372,"./period_defaults":373,"./stack_defaults":376,"./subtypes":378,"./text_defaults":379,"./xy_defaults":380}],361:[function(e,t,n){"use strict";var s=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r){var a,i,o=!1;t.marker&&(a=t.marker.color,i=(t.marker.line||{}).color,a&&!l(a)?o=a:i&&!l(i)&&(o=i)),r("fillcolor",s.addOpacity((t.line||{}).color||o||n,.5))}},{"../../components/color":100,"../../lib":230}],362:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},a={_fullLayout:n},n=i.getFromTrace(a,t,"x"),t=i.getFromTrace(a,t,"y");return r.xLabel=i.tickText(n,n.c2l(e.x),!0).text,r.yLabel=i.tickText(t,t.c2l(e.y),!0).text,r}},{"../../plots/cartesian/axes":276}],363:[function(e,t,n){"use strict";var i=e("../../components/color"),o=e("./subtypes");t.exports=function(e,t){var n;if("lines"===e.mode)return(n=e.line.color)&&i.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var r=t.mcc||(e.marker||{}).color,a=t.mlcc||((e.marker||{}).line||{}).color;return(a=r&&i.opacity(r)?r:a&&i.opacity(a)&&(t.mlw||((e.marker||{}).line||{}).width)?a:"")?i.opacity(a)<.3?i.addOpacity(a,.3):a:(n=(e.line||{}).color)&&i.opacity(n)&&o.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":100,"./subtypes":378}],364:[function(e,t,n){"use strict";var P=e("../../lib"),I=e("../../components/fx"),R=e("../../registry"),N=e("./get_trace_color"),z=e("../../components/color"),F=P.fillText;t.exports=function(e,t,n,r){var a=e.cd,i=a[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),c=s.c2p(n),u=[l,c],d=i.hoveron||"",f=-1!==i.mode.indexOf("markers")?3:.5;if(-1!==d.indexOf("points")){var p=function(e){var t=Math.max(f,e.mrc||0),n=o.c2p(e.x)-l,e=s.c2p(e.y)-c;return Math.max(Math.sqrt(n*n+e*e)-t,1-f/t)},h=I.getDistanceFunction(r,function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(o.c2p(e.x)-l);return void 0!==e.orig_x&&(r+=o.c2p(e.orig_x)-o.c2p(e.x)),r<t?n*r/t:r-t+n},function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(s.c2p(e.y)-c);return void 0!==e.orig_y&&(r+=s.c2p(e.orig_y)-s.c2p(e.y)),r<t?n*r/t:r-t+n},p);if(I.getClosest(a,h,e),!1!==e.index){var m=a[e.index],g=o.c2p(m.x,!0),t=s.c2p(m.y,!0),n=m.mrc||1;e.index=m.i;r=a[0].t.orientation,h=r&&(m.sNorm||m.s),a="h"===r?h:void 0!==m.orig_x?m.orig_x:m.x,h="v"===r?h:void 0!==m.orig_y?m.orig_y:m.y;return P.extendFlat(e,{color:N(i,m),x0:g-n,x1:g+n,xLabelVal:a,y0:t-n,y1:t+n,yLabelVal:h,spikeDistance:p(m),hovertemplate:i.hovertemplate}),F(m,i,e),R.getComponentMethod("errorbars","hoverInfo")(m,i,e),[e]}}if(-1!==d.indexOf("fills")&&i._polygons){var y,v,x,b,_,w,T,M=i._polygons,k=[],A=!1,S=1/0,E=-1/0,L=1/0,C=-1/0;for(O=0;O<M.length;O++)(v=M[O]).contains(u)&&(A=!A,k.push(v),L=Math.min(L,v.ymin),C=Math.max(C,v.ymax));if(A){for(var D=((L=Math.max(L,0))+(C=Math.min(C,s._length)))/2,O=0;O<k.length;O++)for(x=k[O].pts,y=1;y<x.length;y++)D<(w=x[y-1][1])!=D<=(T=x[y][1])&&(b=x[y-1][0],_=x[y][0],T-w&&(w=b+(_-b)*(D-w)/(T-w),S=Math.min(S,w),E=Math.max(E,w)));S=Math.max(S,0),E=Math.min(E,o._length),d=z.defaultLine;return z.opacity(i.fillcolor)?d=i.fillcolor:z.opacity((i.line||{}).color)&&(d=i.line.color),P.extendFlat(e,{distance:e.maxHoverDistance,x0:S,x1:E,y0:D,y1:D,color:d,hovertemplate:!1}),delete e.index,i.text&&!Array.isArray(i.text)?e.text=String(i.text):e.text=i.name,[e]}}}},{"../../components/color":100,"../../components/fx":140,"../../lib":230,"../../registry":313,"./get_trace_color":363}],365:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":290,"./arrays_to_calcdata":352,"./attributes":353,"./calc":354,"./cross_trace_calc":358,"./cross_trace_defaults":359,"./defaults":360,"./format_labels":362,"./hover":364,"./marker_colorbar":371,"./plot":374,"./select":375,"./style":377,"./subtypes":378}],366:[function(e,t,n){"use strict";var s=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,a,i){var o=(e.marker||{}).color;a("line.color",n),l(e,"line")?c(e,t,r,a,{prefix:"line.",cLetter:"c"}):a("line.color",!s(o)&&o||n),a("line.width"),(i||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],367:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),ie=r.BADNUM,r=r.LOG_CLIP,oe=r+.5,se=r-.5,le=e("../../lib"),ce=le.segmentsIntersect,ue=le.constrain,de=e("./constants");t.exports=function(r,a){var e,t,n,i,o,s,l,c,u,d,f,p,h,m,g,y,v=a.xaxis,x=a.yaxis,b="log"===v.type,_="log"===x.type,w=v._length,T=x._length,M=a.connectGaps,k=a.baseTolerance,A=a.shape,S="linear"===A,E=a.fill&&"none"!==a.fill,L=[],C=de.minTolerance,D=r.length,O=new Array(D),P=0;function I(e){var t=r[e];if(!t)return!1;var n=a.linearized?v.l2p(t.x):v.c2p(t.x),e=a.linearized?x.l2p(t.y):x.c2p(t.y);if(n===ie){if((n=b?v.c2p(t.x,!0):n)===ie)return!1;_&&e===ie&&(n*=Math.abs(v._m*T*(0<v._m?oe:se)/(x._m*w*(0<x._m?oe:se)))),n*=1e3}if(e===ie){if((e=_?x.c2p(t.y,!0):e)===ie)return!1;e*=1e3}return[n,e]}function R(e,t,n,r){var a=n-e,i=r-t,n=.5-e,r=.5-t,e=a*a+i*i,t=a*n+i*r;if(0<t&&t<e){a=n*i-r*a;return a*a<e?1:void 0}}function N(e,t){var n=e[0]/w,r=e[1]/T,e=Math.max(0,-n,n-1,-r,r-1);return(e=e&&void 0!==g&&R(n,r,g,y)?0:e)&&t&&R(n,r,t[0]/w,t[1]/T)&&(e=0),(1+de.toleranceGrowth*e)*k}function z(e,t){var n=e[0]-t[0],t=e[1]-t[1];return Math.sqrt(n*n+t*t)}var F,j,H,B,q,U,Y,V=de.maxScreensAway,G=-w*V,W=w*(1+V),Z=-T*V,$=T*(1+V),X=[[G,Z,W,Z],[W,Z,W,$],[W,$,G,$],[G,$,G,Z]];function J(e){if(e[0]<G||e[0]>W||e[1]<Z||e[1]>$)return[ue(e[0],G,W),ue(e[1],Z,$)]}function K(e,t){return e[0]===t[0]&&(e[0]===G||e[0]===W)||e[1]===t[1]&&(e[1]===Z||e[1]===$)}function Q(i,o,s){return function(e,t){var n=J(e),r=J(t),a=[];if(n&&r&&K(n,r))return a;n&&a.push(n),r&&a.push(r);t=2*le.constrain((e[i]+t[i])/2,o,s)-((n||e)[i]+(r||t)[i]);return t&&((n&&r?0<t==n[i]>r[i]?n:r:n||r)[i]+=t),a}}function ee(e){var t,n,r=e[0],a=e[1],i=r===O[P-1][0],o=a===O[P-1][1];i&&o||(1<P?(t=r===O[P-2][0],n=a===O[P-2][1],i&&(r===G||r===W)&&t?n?P--:O[P-1]=e:o&&(a===Z||a===$)&&n?t?P--:O[P-1]=e:O[P++]=e):O[P++]=e)}function te(e){O[P-1][0]!==e[0]&&O[P-1][1]!==e[1]&&ee([H,B]),ee(e),q=null,H=B=0}function ne(e){var t,n,r;g=e[0]/w,y=e[1]/T,F=e[0]<G?G:e[0]>W?W:0,j=e[1]<Z?Z:e[1]>$?$:0,F||j?(P?q?1<(n=Y(q,e)).length&&(te(n[0]),O[P++]=n[1]):(U=Y(O[P-1],e)[0],O[P++]=U):O[P++]=[F||e[0],j||e[1]],r=O[P-1],F&&j&&(r[0]!==F||r[1]!==j)?(q&&(H!==F&&B!==j?ee(H&&B?(t=q,n=e[0]-t[0],r=(e[1]-t[1])/n,0<(t[1]*e[0]-e[1]*t[0])/n?[0<r?G:W,$]:[0<r?W:G,Z]):[H||F,B||j]):H&&B&&ee([H,B])),ee([F,j])):H-F&&B-j&&ee([F||H,j||B]),q=e,H=F,B=j):(q&&te(Y(q,e)[0]),O[P++]=e)}for("linear"===A||"spline"===A?Y=function(e,t){for(var n=[],r=0,a=0;a<4;a++){var i=X[a],i=ce(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);i&&(!r||1<Math.abs(i.x-n[0][0])||1<Math.abs(i.y-n[0][1]))&&(i=[i.x,i.y],r&&z(i,e)<z(n[0],e)?n.unshift(i):n.push(i),r++)}return n}:"hv"===A||"vh"===A?Y=function(e,t){var n=[],e=J(e),t=J(t);return e&&t&&K(e,t)||(e&&n.push(e),t&&n.push(t)),n}:"hvh"===A?Y=Q(0,G,W):"vhv"===A&&(Y=Q(1,Z,$)),e=0;e<D;e++)if(t=I(e)){for(P=0,q=null,ne(t),e++;e<D;e++){if(!(i=I(e))){if(M)continue;break}if(S&&a.simplify){var re=I(e+1),ae=z(i,t);if(E&&(0===P||P===D-1)||!(ae<N(i,re)*C)){for(o=t,l=!(c=[(i[d=p=h=0]-t[0])/(u=ae),(i[1]-t[1])/ae]),n=i,e++;e<r.length;e++){if(s=re,re=I(e+1),!s){if(M)continue;break}if(m=(f=[s[0]-t[0],s[1]-t[1]])[0]*c[1]-f[1]*c[0],p=Math.min(p,m),(h=Math.max(h,m))-p>N(s,re))break;n=s,u<(f=f[0]*c[0]+f[1]*c[1])?(u=f,i=s,l=!1):f<d&&(d=f,o=s,l=!0)}if(l?(ne(i),n!==o&&ne(o)):(o!==t&&ne(o),n!==i&&ne(i)),ne(n),e>=r.length||!s)break;ne(s),t=s}}else ne(i)}q&&ee([H||q[0],B||q[1]]),L.push(O.slice(0,P))}return L}},{"../../constants/numerical":210,"../../lib":230,"./constants":357}],368:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],369:[function(e,t,n){"use strict";var m={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){for(var r,a,i,o,s={},l=!1,c=-1,u=0,d=-1,f=0;f<n.length;f++)(a=(r=n[f][0].trace).stackgroup||"")?a in s?o=s[a]:(o=s[a]=u,u++):r.fill in m&&0<=d?o=d:(o=d=u,u++),o<c&&(l=!0),r._groupIndex=c=o;var p=n.slice();l&&p.sort(function(e,t){e=e[0].trace,t=t[0].trace;return e._groupIndex-t._groupIndex||e.index-t.index});var h={};for(f=0;f<p.length;f++)a=(r=p[f][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in m&&(i=h[a],r._prevtrace=i||null,i&&(i._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),h[a]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return p}},{}],370:[function(e,t,n){"use strict";var a=e("fast-isnumeric");t.exports=function(e){var e=e.marker,t=e.sizeref||1,n=e.sizemin||0,r="area"===e.sizemode?function(e){return Math.sqrt(e/t)}:function(e){return e/t};return function(e){e=r(e/2);return a(e)&&0<e?Math.max(e,n):0}}},{"fast-isnumeric":15}],371:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],372:[function(e,t,n){"use strict";var l=e("../../components/color"),c=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),d=e("./subtypes");t.exports=function(e,t,n,r,a,i){var o=d.isBubble(e),s=(e.line||{}).color;i=i||{},s&&(n=s),a("marker.symbol"),a("marker.opacity",o?.7:1),a("marker.size"),a("marker.color",n),c(e,"marker")&&u(e,t,r,a,{prefix:"marker.",cLetter:"c"}),i.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),i.noLine||(a("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:o?l.background:l.defaultLine),c(e,"marker.line")&&u(e,t,r,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",o?1:0)),o&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),i.gradient&&"none"!==a("marker.gradient.type")&&a("marker.gradient.color")}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"./subtypes":378}],373:[function(e,t,n){"use strict";var r=e("../../lib").dateTick0,a=e("../../constants/numerical").ONEWEEK;function o(e,t){return r(t,e%a==0?1:0)}t.exports=function(e,t,n,r,a){var i;!(a=a||{x:!0,y:!0}).x||(i=r("xperiod"))&&(r("xperiod0",o(i,t.xcalendar)),r("xperiodalignment")),!a.y||(a=r("yperiod"))&&(r("yperiod0",o(a,t.ycalendar)),r("yperiodalignment"))}},{"../../constants/numerical":210,"../../lib":230}],374:[function(e,t,n){"use strict";var q=e("@plotly/d3"),U=e("../../registry"),Y=e("../../lib"),V=Y.ensureSingle,G=Y.identity,W=e("../../components/drawing"),Z=e("./subtypes"),$=e("./line_points"),f=e("./link_traces"),X=e("../../lib/polygon").tester;function p(f,e,p,n,t,r,a){var i,o,s,l,c,u,d;o=e,w=n,_=t,e=(b=p).xaxis,b=b.yaxis,u=q.extent(Y.simpleMap(e.range,e.r2c)),d=q.extent(Y.simpleMap(b.range,b.r2c)),e=w[0].trace,!Z.hasMarkers(e)||0!==(b=e.marker.maxdisplayed)&&(e=w.filter(function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=d[0]&&e.y<=d[1]}),s=Math.ceil(e.length/b),l=0,_.forEach(function(e,t){e=e[0].trace;Z.hasMarkers(e)&&0<e.marker.maxdisplayed&&t<o&&l++}),c=Math.round(l*s/3+Math.floor(l/3)*s/7.1),w.forEach(function(e){delete e.vis}),e.forEach(function(e,t){0===Math.round((t+c)%s)&&(e.vis=!0)}));var h=!!a&&0<a.duration;function m(e){return h?e.transition():e}var g=p.xaxis,y=p.yaxis,v=n[0].trace,x=v.line,t=q.select(r),b=V(t,"g","errorbars"),_=V(t,"g","lines"),w=V(t,"g","points"),e=V(t,"g","text");if(U.getComponentMethod("errorbars","plot")(f,b,p,a),!0===v.visible){m(t).style("opacity",v.opacity);var T=v.fill.charAt(v.fill.length-1);"x"!==T&&"y"!==T&&(T=""),n[0][p.isRangePlot?"nodeRangePlot3":"node3"]=t;var M,k,r="",b=[],a=v._prevtrace;a&&(r=a._prevRevpath||"",R=a._nextFill,b=a._polygons);var A,S,E,L,C,D,O="",P="",I=[],t=Y.noop,a=v._ownFill;if(Z.hasLines(v)||"none"!==v.fill){for(R&&R.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(x.shape)?(A=W.steps(x.shape),S=W.steps(x.shape.split("").reverse().join(""))):A=S="spline"===x.shape?function(e){var t=e[e.length-1];return 1<e.length&&e[0][0]===t[0]&&e[0][1]===t[1]?W.smoothclosed(e.slice(1),x.smoothing):W.smoothopen(e,x.smoothing)}:function(e){return"M"+e.join("L")},E=function(e){return S(e.reverse())},I=$(n,{xaxis:g,yaxis:y,connectGaps:v.connectgaps,baseTolerance:Math.max(x.width||1,3)/4,shape:x.shape,simplify:x.simplify,fill:v.fill}),D=v._polygons=new Array(I.length),i=0;i<I.length;i++)v._polygons[i]=X(I[i]);I.length&&(L=I[0][0],C=(C=I[I.length-1])[C.length-1]),t=function(t){return function(e){M=A(e),k=E(e),P=O?T?(O+="L"+M.substr(1),k+("L"+P.substr(1))):(O+="Z"+M,k+"Z"+P):(O=M,k),Z.hasLines(v)&&1<e.length&&((e=q.select(this)).datum(n),t?m(e.style("opacity",0).attr("d",M).call(W.lineGroupStyle)).style("opacity",1):((e=m(e)).attr("d",M),W.singleLineStyle(n,e)))}}}_=_.selectAll(".js-line").data(I);m(_.exit()).style("opacity",0).remove(),_.each(t(!1)),_.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(W.lineGroupStyle).each(t(!0)),W.setClipUrl(_,p.layerClipId,f),I.length?(a?(a.datum(n),L&&C&&(T?("y"===T?L[1]=C[1]=y.c2p(0,!0):"x"===T&&(L[0]=C[0]=g.c2p(0,!0)),m(a).attr("d","M"+C+"L"+L+"L"+O.substr(1)).call(W.singleFillStyle)):m(a).attr("d",O+"Z").call(W.singleFillStyle))):R&&("tonext"===v.fill.substr(0,6)&&O&&r?(("tonext"===v.fill?m(R).attr("d",O+"Z"+r+"Z"):m(R).attr("d",O+"L"+r.substr(1)+"Z")).call(W.singleFillStyle),v._polygons=v._polygons.concat(b)):(N(R),v._polygons=null)),v._prevRevpath=P,v._prevPolygons=D):(a?N(a):R&&N(R),v._polygons=v._prevRevpath=v._prevPolygons=null),w.datum(n),e.datum(n),function(e,t,n){var r,a,i=n[0].trace,o=Z.hasMarkers(i),s=Z.hasText(i),l=function(e){if(e.ids)return H}(i),c=B,u=B;(o||s)&&(r=G,n=(a=i.stackgroup)&&"infer zero"===f._fullLayout._scatterStackOpts[g._id+y._id][a].stackgaps,i.marker.maxdisplayed||i._needsCull?r=n?F:z:a&&!n&&(r=j),o&&(c=r),s&&(u=r));var d,c=(e=e.selectAll("path.point").data(c,l)).enter().append("path").classed("point",!0);h&&c.call(W.pointStyle,i,f).call(W.translatePoints,g,y).style("opacity",0).transition().style("opacity",1),e.order(),o&&(d=W.makePointStyleFns(i)),e.each(function(e){var t=q.select(this),n=m(t);W.translatePoint(e,n,g,y)?(W.singlePointStyle(e,n,i,d,f),p.layerClipId&&W.hideOutsideRangePoint(e,n,g,y,i.xcalendar,i.ycalendar),i.customdata&&t.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):n.remove()}),(h?e.exit().transition().style("opacity",0):e.exit()).remove(),(e=t.selectAll("g").data(u,l)).enter().append("g").classed("textpoint",!0).append("text"),e.order(),e.each(function(e){var t=q.select(this),n=m(t.select("text"));W.translatePoint(e,n,g,y)?p.layerClipId&&W.hideOutsideRangePoint(e,t,g,y,i.xcalendar,i.ycalendar):t.remove()}),e.selectAll("text").call(W.textPointStyle,i,f).each(function(e){var t=g.c2p(e.x),n=y.c2p(e.y);q.select(this).selectAll("tspan.line").each(function(){m(q.select(this)).attr({x:t,y:n})})}),e.exit().remove()}(w,e,n);var R=!1===v.cliponaxis?null:p.layerClipId;W.setClipUrl(w,R,f),W.setClipUrl(e,R,f)}function N(e){m(e).attr("d","M0,0Z")}function z(e){return e.filter(function(e){return!e.gap&&e.vis})}function F(e){return e.filter(function(e){return e.vis})}function j(e){return e.filter(function(e){return!e.gap})}function H(e){return e.id}function B(){return!1}}t.exports=function(n,r,e,t,a,i){var o,s,l,c=!a,u=!!a&&0<a.duration,d=f(n,r,e),e=t.selectAll("g.trace").data(d,function(e){return e[0].trace.uid});e.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),e.order(),s=n,l=r,e.each(function(e){var t=V(q.select(this),"g","fills");W.setClipUrl(t,l.layerClipId,s);var n=e[0].trace,e=[];n._ownfill&&e.push("_ownFill"),n._nexttrace&&e.push("_nextFill");e=t.selectAll("g").data(e,G);e.enter().append("g"),e.exit().each(function(e){n[e]=null}).remove(),e.order().each(function(e){n[e]=V(q.select(this),"path","js-fill")})}),u?(i&&(o=i()),q.transition().duration(a.duration).ease(a.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){t.selectAll("g.trace").each(function(e,t){p(n,t,r,e,d,this,a)})})):e.each(function(e,t){p(n,t,r,e,d,this,a)}),c&&e.exit().remove(),t.selectAll("path:not([d])").remove()}},{"../../components/drawing":122,"../../lib":230,"../../lib/polygon":242,"../../registry":313,"./line_points":367,"./link_traces":369,"./subtypes":378,"@plotly/d3":11}],375:[function(e,t,n){"use strict";var d=e("./subtypes");t.exports=function(e,t){var n,r,a,i,o=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=o[0].trace;if(!d.hasMarkers(u)&&!d.hasText(u))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],a=s.c2p(r.x),i=l.c2p(r.y),null!==r.i&&t.contains([a,i],!1,n,e)?(c.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return c}},{"./subtypes":378}],376:[function(e,t,n){"use strict";var y=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,r){var a=n._scatterStackOpts,i=r("stackgroup");if(i){var o=t.xaxis+t.yaxis,n=a[o],s=(n=n||(a[o]={}))[i],l=!1;s?s.traces.push(t):(s=n[i]={traceIndices:[],traces:[t]},l=!0);for(var c={orientation:t.x&&!t.y?"h":"v"},u=0;u<y.length;u++){var d=y[u],f=d+"Found";if(!s[f]){var p=void 0!==e[d],h="orientation"===d;if((p||l)&&(s[d]=r(d,c[d]),h&&(s.fillDflt="h"===s[d]?"tonextx":"tonexty"),p&&(s[f]=!0,!l&&(delete s.traces[0][d],h))))for(var m=0;m<s.traces.length-1;m++){var g=s.traces[m];g._input.fill!==g.fill&&(g.fill=s.fillDflt)}}}return s}}},{}],377:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../../components/drawing"),i=e("../../registry");function o(e,t,n){a.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){a.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity}),e.selectAll("g.points").each(function(e){o(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(a.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(a.fillGroupStyle),i.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(e,t,n){(t=t[0].trace).selectedpoints?(a.selectedPointStyle(n.selectAll("path.point"),t),a.selectedTextStyle(n.selectAll("text"),t)):(o(n,t,e),s(n,t,e))}}},{"../../components/drawing":122,"../../registry":313,"@plotly/d3":11}],378:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":230}],379:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t,n,r,a){a=a||{},r("textposition"),i.coerceFont(r,"textfont",n.font),a.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":230}],380:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");t.exports=function(e,t,n,r){var a,i=r("x"),o=r("y");if(l.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),i){i=s.minRowLength(i);o?a=Math.min(i,s.minRowLength(o)):(a=i,r("y0"),r("dy"))}else{if(!o)return 0;a=s.minRowLength(o),r("x0"),r("dx")}return t._length=a}},{"../../lib":230,"../../registry":313}],381:[function(e,t,n){"use strict";var u=e("../plots/cartesian/axes"),h=e("../lib"),p=e("../plot_api/plot_schema"),m=e("./helpers").pointsAccessorFunction,d=e("../constants/numerical").BADNUM;n.moduleType="transform",n.name="aggregate";var g=n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},y=g.aggregations;function v(e,t,n,r){if(r.enabled){for(var a=r.target,i=h.nestedProperty(t,a),o=i.get(),s=function(c,e){var t=c.func,u=e.d2c,l=e.c2d;switch(t){case"count":return f;case"first":return x;case"last":return b;case"sum":return function(e,t){for(var n=0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n+=a)}return l(n)};case"avg":return function(e,t){for(var n=0,r=0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n+=i,r++)}return r?l(n/r):d};case"min":return function(e,t){for(var n=1/0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n=Math.min(n,a))}return n===1/0?d:l(n)};case"max":return function(e,t){for(var n=-1/0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n=Math.max(n,a))}return n===-1/0?d:l(n)};case"range":return function(e,t){for(var n=1/0,r=-1/0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n=Math.min(n,i),r=Math.max(r,i))}return r===-1/0||n===1/0?d:l(r-n)};case"change":return function(e,t){var n=u(e[t[0]]),t=u(e[t[t.length-1]]);return n===d||t===d?d:l(t-n)};case"median":return function(e,t){for(var n=[],r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&n.push(a)}if(!n.length)return d;n.sort(h.sorterAsc);var i=(n.length-1)/2;return l((n[Math.floor(i)]+n[Math.ceil(i)])/2)};case"mode":return function(e,t){for(var n={},r=0,a=d,i=0;i<t.length;i++){var o,s=u(e[t[i]]);s===d||r<(o=n[s]=(n[s]||0)+1)&&(r=o,a=s)}return r?l(a):d};case"rms":return function(e,t){for(var n=0,r=0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n+=i*i,r++)}return r?l(Math.sqrt(n/r)):d};case"stddev":return function(e,t){for(var n=0,r=0,a=1,i=d,o=0;o<t.length&&i===d;o++)i=u(e[t[o]]);if(i===d)return d;for(;o<t.length;o++){var s=u(e[t[o]]);s!==d&&(n+=s=s-i,r+=s*s,a++)}var l="sample"===c.funcmode?a-1:a;return l?Math.sqrt((r-n*n/a)/l):0}}}(r,u.getDataConversions(e,t,a,o)),l=new Array(n.length),c=0;c<n.length;c++)l[c]=s(o,n[c]);i.set(l),"count"===r.func&&h.pushUnique(t._arrayAttrs,a)}}function f(e,t){return t.length}function x(e,t){return e[t[0]]}function b(e,t){return e[t[t.length-1]]}n.supplyDefaults=function(n,e){var r={};function t(e,t){return h.coerce(n,r,g,e,t)}if(!t("enabled"))return r;for(var a=p.findArrayAttributes(e),i={},o=0;o<a.length;o++)i[a[o]]=1;e=t("groups");if(!Array.isArray(e)){if(!i[e])return r.enabled=!1,r;i[e]=0}var s=n.aggregations||[],l=r.aggregations=new Array(s.length);function c(e,t){return h.coerce(s[o],u,y,e,t)}for(o=0;o<s.length;o++){var u={_index:o},d=c("target"),f=c("func");c("enabled")&&d&&(i[d]||"count"===f&&void 0===i[d])?("stddev"===f&&c("funcmode"),i[d]=0,l[o]=u):l[o]={enabled:!1,_index:o}}for(o=0;o<a.length;o++)i[a[o]]&&l.push({target:a[o],func:y.func.dflt,enabled:!0,_index:-1});return r},n.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,a=h.getTargetArray(t,{target:r});if(a){var i,o,s={},l={},c=[],u=m(t.transforms,n),d=a.length;for(t._length&&(d=Math.min(d,t._length)),p=0;p<d;p++)void 0===(o=s[i=a[p]])?(s[i]=c.length,c.push([p]),l[s[i]]=u(p)):(c[o].push(p),l[s[i]]=(l[s[i]]||[]).concat(u(p)));n._indexToPoints=l;for(var f=n.aggregations,p=0;p<f.length;p++)v(e,t,c,f[p]);"string"==typeof r&&v(e,t,c,{target:r,func:"first",enabled:!0}),t._length=c.length}}}},{"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plots/cartesian/axes":276,"./helpers":384}],382:[function(e,t,a){"use strict";var x=e("../lib"),i=e("../registry"),b=e("../plots/cartesian/axes"),_=e("./helpers").pointsAccessorFunction,e=e("../constants/filter_ops"),w=e.COMPARISON_OPS,T=e.INTERVAL_OPS,M=e.SET_OPS;a.moduleType="transform",a.name="filter",a.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(w).concat(T).concat(M),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},a.supplyDefaults=function(n){var r={};function e(e,t){return x.coerce(n,r,a.attributes,e,t)}if(e("enabled")){var t=e("target");if(x.isArrayOrTypedArray(t)&&0===t.length)return r.enabled=!1,r;e("preservegaps"),e("operation"),e("value");t=i.getComponentMethod("calendars","handleDefaults");t(n,r,"valuecalendar",null),t(n,r,"targetcalendar",null)}return r},a.calcTransform=function(e,r,t){if(t.enabled){var n=x.getTargetArray(r,t);if(n){var a=t.target,i=n.length;r._length&&(i=Math.min(i,r._length));var o,s=t.targetcalendar,l=r._arrayAttrs,c=t.preservegaps;"string"!=typeof a||(o=x.nestedProperty(r,a+"calendar").get())&&(s=o);var u,d=function(t,n,r){var a=t.operation,e=t.value,i=Array.isArray(e);function o(e){return-1!==e.indexOf(a)}function s(e){return n(e,0,t.valuecalendar)}function l(e){return n(e,0,r)}var c;o(w)?c=s(i?e[0]:e):o(T)?c=i?[s(e[0]),s(e[1])]:[s(e),s(e)]:o(M)&&(c=i?e.map(s):[s(e)]);switch(a){case"=":return function(e){return l(e)===c};case"!=":return function(e){return l(e)!==c};case"<":return function(e){return l(e)<c};case"<=":return function(e){return l(e)<=c};case">":return function(e){return l(e)>c};case">=":return function(e){return l(e)>=c};case"[]":return function(e){e=l(e);return e>=c[0]&&e<=c[1]};case"()":return function(e){e=l(e);return e>c[0]&&e<c[1]};case"[)":return function(e){e=l(e);return e>=c[0]&&e<c[1]};case"(]":return function(e){e=l(e);return e>c[0]&&e<=c[1]};case"][":return function(e){e=l(e);return e<=c[0]||e>=c[1]};case")(":return function(e){e=l(e);return e<c[0]||e>c[1]};case"](":return function(e){e=l(e);return e<=c[0]||e>c[1]};case")[":return function(e){e=l(e);return e<c[0]||e>=c[1]};case"{}":return function(e){return-1!==c.indexOf(l(e))};case"}{":return function(e){return-1===c.indexOf(l(e))}}}(t,b.getDataToCoordFunc(e,r,a,n),s),f={},p={},h=0,m=c?(u=function(e){f[e.astr]=x.extendDeep([],e.get()),e.set(new Array(i))},function(e,t){var n=f[e.astr][t];e.get()[t]=n}):(u=function(e){f[e.astr]=x.extendDeep([],e.get()),e.set([])},function(e,t){t=f[e.astr][t];e.get().push(t)});v(u);for(var g=_(r.transforms,t),y=0;y<i;y++)d(n[y])?(v(m,y),p[h++]=g(y)):c&&h++;t._indexToPoints=p,r._length=h}}function v(e,t){for(var n=0;n<l.length;n++)e(x.nestedProperty(r,l[n]),t)}}},{"../constants/filter_ops":208,"../lib":230,"../plots/cartesian/axes":276,"../registry":313,"./helpers":384}],383:[function(e,t,u){"use strict";var k=e("../lib"),A=e("../plot_api/plot_schema"),S=e("../plots/plots"),E=e("./helpers").pointsAccessorFunction;u.moduleType="transform",u.name="groupby",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},u.supplyDefaults=function(n,e,t){var r,a={};function i(e,t){return k.coerce(n,a,u.attributes,e,t)}if(!i("enabled"))return a;i("groups"),i("nameformat",1<t._dataLength?"%{group} (%{trace})":"%{group}");var o=n.styles,s=a.styles=[];if(o)for(r=0;r<o.length;r++){var l=s[r]={};k.coerce(o[r],s[r],u.attributes.styles,"target");var c=k.coerce(o[r],s[r],u.attributes.styles,"value");k.isPlainObject(c)?l.value=k.extendDeep({},c):c&&delete l.value}return a},u.transform=function(e,t){for(var n,r,a=[],i=0;i<e.length;i++)for(n=function(e,t){var n,r,a,i,o,s,l,c,u,d,f=t.transform,p=t.transformIndex,h=e.transforms[p].groups,m=E(e.transforms,f);if(!k.isArrayOrTypedArray(h)||0===h.length)return[e];var g=k.filterUnique(h),y=new Array(g.length),v=h.length,x=A.findArrayAttributes(e),b=f.styles||[],_={};for(n=0;n<b.length;n++)_[b[n].target]=b[n].value;f.styles&&(d=k.keyedContainer(f,"styles","target","value.name"));var w={},T={};for(n=0;n<g.length;n++){s=g[n],w[s]=n,T[s]=0,(l=y[n]=k.extendDeepNoArrays({},e))._group=s,l.transforms[p]._indexToPoints={};var M=null;for(d&&(M=d.get(s)),l.name=M||""===M?M:k.templateString(f.nameformat,{trace:e.name,group:s}),c=l.transforms,l.transforms=[],r=0;r<c.length;r++)l.transforms[r]=k.extendDeepNoArrays({},c[r]);for(r=0;r<x.length;r++)k.nestedProperty(l,x[r]).set([])}for(a=0;a<x.length;a++){for(i=x[a],r=0,u=[];r<g.length;r++)u[r]=k.nestedProperty(y[r],i).get();for(o=k.nestedProperty(e,i).get(),r=0;r<v;r++)u[w[h[r]]].push(o[r])}for(r=0;r<v;r++)(l=y[w[h[r]]]).transforms[p]._indexToPoints[T[h[r]]]=m(r),T[h[r]]++;for(n=0;n<g.length;n++)s=g[n],l=y[n],S.clearExpandedTraceDefaultColors(l),l=k.extendDeepNoArrays(l,_[s]||{});return y}(e[i],t),r=0;r<n.length;r++)a.push(n[r]);return a}},{"../lib":230,"../plot_api/plot_schema":264,"../plots/plots":311,"./helpers":384}],384:[function(e,t,n){"use strict";n.pointsAccessorFunction=function(e,t){for(var n,r,a=0;a<e.length&&(n=e[a])!==t;a++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);return r?function(e){return r[e]}:function(e){return[e]}}},{}],385:[function(e,t,a){"use strict";var m=e("../lib"),g=e("../plots/cartesian/axes"),y=e("./helpers").pointsAccessorFunction,v=e("../constants/numerical").BADNUM;a.moduleType="transform",a.name="sort",a.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},a.supplyDefaults=function(n){var r={};function e(e,t){return m.coerce(n,r,a.attributes,e,t)}return e("enabled")&&(e("target"),e("order")),r},a.calcTransform=function(e,t,n){if(n.enabled){var r=m.getTargetArray(t,n);if(r){var a=n.target,i=r.length;t._length&&(i=Math.min(i,t._length));for(var o=t._arrayAttrs,s=function(e,t,n,r){var a,i=new Array(r),o=new Array(r);for(a=0;a<r;a++)i[a]={v:t[a],i:a};for(i.sort(function(e,n){switch(e.order){case"ascending":return function(e,t){e=n(e.v),t=n(t.v);return e===v?1:t===v?-1:e-t};case"descending":return function(e,t){e=n(e.v),t=n(t.v);return e===v?1:t===v?-1:t-e}}}(e,n)),a=0;a<r;a++)o[a]=i[a].i;return o}(n,r,g.getDataToCoordFunc(e,t,a,r),i),l=y(t.transforms,n),c={},u=0;u<o.length;u++){for(var d=m.nestedProperty(t,o[u]),f=d.get(),p=new Array(i),h=0;h<i;h++)p[h]=f[s[h]];d.set(p)}for(h=0;h<i;h++)c[h]=l(s[h]);n._indexToPoints=c,t._length=i}}}},{"../constants/numerical":210,"../lib":230,"../plots/cartesian/axes":276,"./helpers":384}],386:[function(e,t,n){"use strict";n.version="2.2.0"},{}]},{},[8])(8)}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=e()}(function(){return function r(a,i,o){function s(t,e){if(!i[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},a[t][0].call(n.exports,function(e){return s(a[t][1][e]||e)},n,n.exports,r,a,i,o)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";var r,a=e("../src/lib"),i={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(r in i){var o=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(o,i[r])}},{"../src/lib":285}],2:[function(e,t,n){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":541}],3:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":391}],4:[function(e,t,n){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":406}],5:[function(e,t,n){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":153}],6:[function(e,t,n){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":426}],7:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":267}],8:[function(e,t,n){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":542}],9:[function(e,t,n){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":543}],10:[function(e,t,n){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":442}],11:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":460}],12:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":466}],13:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":470}],14:[function(e,t,n){"use strict";t.exports=e("../src/traces/image")},{"../src/traces/image":478}],15:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./image"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),t.exports=r},{"./aggregate":2,"./bar":3,"./box":4,"./calendars":5,"./contour":6,"./core":7,"./filter":8,"./groupby":9,"./heatmap":10,"./histogram":11,"./histogram2d":12,"./histogram2dcontour":13,"./image":14,"./pie":16,"./scatterternary":17,"./sort":18,"./violin":19}],16:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":487}],17:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":528}],18:[function(e,t,n){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":545}],19:[function(e,t,n){"use strict";t.exports=e("../src/traces/violin")},{"../src/traces/violin":536}],20:[function(e,Qs,t){!function(){var P={version:"3.6.1"},a=[].slice,f=function(e){return a.call(e)},I=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function R(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(I)try{f(I.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),I)try{I.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,r=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,o=i.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){r.call(this,e,t,n+"")},i.setProperty=function(e,t,n){o.call(this,e,t+"",n)}}function l(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function c(e){return null===e?NaN:+e}function u(e){return!isNaN(e)}function e(i){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;i(e[a],t)<0?n=1+a:r=a}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;0<i(e[a],t)?r=a:n=1+a}return n}}}P.ascending=l,P.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},P.min=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&r<n&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&r<n&&(n=r)}return n},P.max=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&n<r&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&n<r&&(n=r)}return n},P.extent=function(e,t){var n,r,a,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=e[i])&&(r<n&&(n=r),a<r&&(a=r))}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&(r<n&&(n=r),a<r&&(a=r))}return[n,a]},P.sum=function(e,t){var n,r=0,a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)u(n=+e[i])&&(r+=n);else for(;++i<a;)u(n=+t.call(e,e[i],i))&&(r+=n);return r},P.mean=function(e,t){var n,r=0,a=e.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)u(n=c(e[i]))?r+=n:--o;else for(;++i<a;)u(n=c(t.call(e,e[i],i)))?r+=n:--o;if(o)return r/o},P.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),t=+e[r-1],n=n-r;return n?t+n*(e[r]-t):t},P.median=function(e,t){var n,r=[],a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)u(n=c(e[i]))&&r.push(n);else for(;++i<a;)u(n=c(t.call(e,e[i],i)))&&r.push(n);if(r.length)return P.quantile(r.sort(l),.5)},P.variance=function(e,t){var n,r,a=e.length,i=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<a;)u(n=c(e[s]))&&(o+=(r=n-i)*(n-(i+=r/++l)));else for(;++s<a;)u(n=c(t.call(e,e[s],s)))&&(o+=(r=n-i)*(n-(i+=r/++l)));if(1<l)return o/(l-1)},P.deviation=function(){var e=P.variance.apply(this,arguments);return e&&Math.sqrt(e)};var d=e(l);function p(e){return e.length}P.bisectLeft=d.left,P.bisect=P.bisectRight=d.right,P.bisector=function(n){return e(1===n.length?function(e,t){return l(n(e),t)}:n)},P.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,i<2&&(t=0));for(var r,a,i=n-t;i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},P.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},P.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},P.transpose=function(e){if(!(a=e.length))return[];for(var t=-1,n=P.min(e,p),r=new Array(n);++t<n;)for(var a,i=-1,o=r[t]=new Array(a);++i<a;)o[i]=e[i][t];return r},P.zip=function(){return P.transpose(arguments)},P.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},P.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},P.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},P.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);0<=--a;)for(t=(r=e[a]).length;0<=--t;)n[--o]=r[t];return n};var D=Math.abs;function h(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function v(){this._=Object.create(null)}P.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,a=[],i=function(e){var t=1;for(;e*t%1;)t*=10;return t}(D(n)),o=-1;if(e*=i,t*=i,(n*=i)<0)for(;(r=e+n*++o)>t;)a.push(r/i);else for(;(r=e+n*++o)<t;)a.push(r/i);return a},P.map=function(e,t){var n=new v;if(e instanceof v)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,a=-1,i=e.length;if(1===arguments.length)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t.call(e,r=e[a],a),r)}else for(var o in e)n.set(o,e[o]);return n};var m="__proto__",g="\0";function y(e){return(e+="")===m||e[0]===g?g+e:e}function x(e){return(e+="")[0]===g?e.slice(1):e}function b(e){return y(e)in this._}function _(e){return(e=y(e))in this._&&delete this._[e]}function w(){var e,t=[];for(e in this._)t.push(x(e));return t}function T(){var e,t=0;for(e in this._)++t;return t}function M(){for(var e in this._)return!1;return!0}function k(){this._=Object.create(null)}function C(e){return e}function A(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=S.length;n<r;++n){var a=S[n]+t;if(a in e)return a}}h(v,{has:b,get:function(e){return this._[y(e)]},set:function(e,t){return this._[y(e)]=t},remove:_,keys:w,values:function(){var e,t=[];for(e in this._)t.push(this._[e]);return t},entries:function(){var e,t=[];for(e in this._)t.push({key:x(e),value:this._[e]});return t},size:T,empty:M,forEach:function(e){for(var t in this._)e.call(this,x(t),this._[t])}}),P.nest=function(){var d,f,p={},h=[],t=[];function m(n,e,r){if(r>=h.length)return f?f.call(p,e):d?e.sort(d):e;for(var t,a,i,o,s=-1,l=e.length,c=h[r++],u=new v;++s<l;)(o=u.get(t=c(a=e[s])))?o.push(a):u.set(t,[a]);return i=n?(a=n(),function(e,t){a.set(e,m(n,t,r))}):(a={},function(e,t){a[e]=m(n,t,r)}),u.forEach(i),a}return p.map=function(e,t){return m(t,e,0)},p.entries=function(e){return function n(e,r){if(r>=h.length)return e;var a=[],i=t[r++];return e.forEach(function(e,t){a.push({key:e,values:n(t,r)})}),i?a.sort(function(e,t){return i(e.key,t.key)}):a}(m(P.map,e,0),0)},p.key=function(e){return h.push(e),p},p.sortKeys=function(e){return t[h.length-1]=e,p},p.sortValues=function(e){return d=e,p},p.rollup=function(e){return f=e,p},p},P.set=function(e){var t=new k;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},h(k,{has:b,add:function(e){return this._[y(e+="")]=!0,e},remove:_,values:w,size:T,empty:M,forEach:function(e){for(var t in this._)e.call(this,x(t))}}),P.behavior={},P.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=function(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}(e,t,t[n]);return e};var S=["webkit","ms","moz","Moz","o","O"];function E(){}function L(){}function O(a){var i=[],r=new v;function e(){for(var e,t=i,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return a}return e.on=function(e,t){var n=r.get(e);return arguments.length<2?n&&n.on:(n&&(n.on=null,i=i.slice(0,n=i.indexOf(n)).concat(i.slice(n+1)),r.remove(e)),t&&i.push(r.set(e,{on:t})),a)},e}function N(){P.event.preventDefault()}function z(){for(var e,t=P.event;e=t.sourceEvent;)t=e;return t}function F(a){for(var i=new L,e=0,t=arguments.length;++e<t;)i[arguments[e]]=O(i);return i.of=function(n,r){return function(e){try{var t=e.sourceEvent=P.event;e.target=a,P.event=e,i[e.type].apply(n,r)}finally{P.event=t}}},i}P.dispatch=function(){for(var e=new L,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=O(e);return e},L.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},P.event=null,P.requote=function(e){return e.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function B(e){return H(e,V),e}var q=function(e,t){return t.querySelector(e)},U=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[A(e,"matchesSelector")];return(Y=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(q=function(e,t){return Sizzle(e,t)[0]||null},Y=(U=Sizzle).matchesSelector),P.selection=function(){return P.select(I.documentElement)};var V=P.selection.prototype=[];function G(e){return"function"==typeof e?e:function(){return q(e,this)}}function W(e){return"function"==typeof e?e:function(){return U(e,this)}}V.select=function(e){var t,n,r,a,i=[];e=G(e);for(var o=-1,s=this.length;++o<s;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(a=r[l])?(t.push(n=e.call(a,a.__data__,l,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return B(i)},V.selectAll=function(e){var t,n,r=[];e=W(e);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=f(e.call(n,n.__data__,s,a))),t.parentNode=n);return B(r)};var Z="http://www.w3.org/1999/xhtml",$={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(t,n){return t=P.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function J(e){return e.trim().replace(/\s+/g," ")}function K(e){return new RegExp("(?:^|\\s+)"+P.requote(e)+"(?:\\s+|$)","g")}function Q(e){return(e+"").trim().split(/^|\s+/)}function ee(n,r){var a=(n=Q(n).map(te)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<a;)n[e](this,t)}:function(){for(var e=-1;++e<a;)n[e](this,r)}}function te(r){var a=K(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(a.lastIndex=0,a.test(n)||e.setAttribute("class",J(n+" "+r))):e.setAttribute("class",J(n.replace(a," ")))}}function ne(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function re(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function ae(n){return"function"==typeof n?n:(n=P.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Z&&e.documentElement.namespaceURI===Z?e.createElement(n):e.createElementNS(t,n)}}function ie(){var e=this.parentNode;e&&e.removeChild(this)}function oe(e){return{__data__:e}}function se(e){return function(){return Y(this,e)}}function le(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,i=e[n],o=0,s=i.length;o<s;o++)(a=i[o])&&t(a,o,n);return e}function ce(e){return H(e,ue),e}P.ns={prefix:$,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),$.hasOwnProperty(n)?{space:$[n],local:e}:e}},V.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=P.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(X(t,e[t]));return this}return this.each(X(e,t))},V.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=Q(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!K(e[a]).test(t))return!1;return!0}for(t in e)this.each(ee(t,e[t]));return this}return this.each(ee(e,t))},V.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(ne(n,e[n],t));return this}if(r<2){r=this.node();return R(r).getComputedStyle(r,null).getPropertyValue(e)}n=""}return this.each(ne(e,t,n))},V.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))},V.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},V.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},V.append=function(e){return e=ae(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},V.insert=function(e,t){return e=ae(e),t=G(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},V.remove=function(){return this.each(ie)},V.data=function(e,h){var t,n,r=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(t=this[0]).length);++r<a;)(n=t[r])&&(e[r]=n.__data__);return e}function i(e,t){var n,r,a=e.length,i=t.length,o=Math.min(a,i),s=new Array(i),l=new Array(i),c=new Array(a);if(h){for(var u,d=new v,f=new Array(a),p=-1;++p<a;)(n=e[p])&&(d.has(u=h.call(n,n.__data__,p))?c[p]=n:d.set(u,n),f[p]=u);for(p=-1;++p<i;)(n=d.get(u=h.call(t,r=t[p],p)))?!0!==n&&((s[p]=n).__data__=r):l[p]=oe(r),d.set(u,!0);for(p=-1;++p<a;)p in f&&!0!==d.get(f[p])&&(c[p]=e[p])}else{for(p=-1;++p<o;)n=e[p],r=t[p],n?(n.__data__=r,s[p]=n):l[p]=oe(r);for(;p<i;++p)l[p]=oe(t[p]);for(;p<a;++p)c[p]=e[p]}l.update=s,l.parentNode=s.parentNode=c.parentNode=e.parentNode,m.push(l),g.push(s),y.push(c)}var m=ce([]),g=B([]),y=B([]);if("function"==typeof e)for(;++r<a;)i(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<a;)i(t=this[r],e);return g.enter=function(){return m},g.exit=function(){return y},g},V.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},V.filter=function(e){var t,n,r,a=[];"function"!=typeof e&&(e=se(e));for(var i=0,o=this.length;i<o;i++){a.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return B(a)},V.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,i=r[a];0<=--a;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},V.sort=function(e){e=function(n){arguments.length||(n=l);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},V.each=function(r){return le(this,function(e,t,n){r.call(e,e.__data__,t,n)})},V.call=function(e){var t=f(arguments);return e.apply(t[0]=this,t),this},V.empty=function(){return!this.node()},V.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var i=n[r];if(i)return i}return null},V.size=function(){var e=0;return le(this,function(){++e}),e};var ue=[];function de(a,t,n){var r="__on"+a,e=a.indexOf("."),i=pe;0<e&&(a=a.slice(0,e));var o=fe.get(a);function s(){var e=this[r];e&&(this.removeEventListener(a,e,e.$),delete this[r])}return o&&(a=o,i=he),e?t?function(){var e=i(t,f(arguments));s.call(this),this.addEventListener(a,this[r]=e,e.$=n),e._=t}:s:t?E:function(){var e,t,n,r=new RegExp("^__on([^.]+)"+P.requote(a)+"$");for(t in this)(e=t.match(r))&&(n=this[t],this.removeEventListener(e[1],n,n.$),delete this[t])}}P.selection.enter=ce,(P.selection.enter.prototype=ue).append=V.append,ue.empty=V.empty,ue.node=V.node,ue.call=V.call,ue.size=V.size,ue.select=function(e){for(var t,n,r,a,i,o=[],s=-1,l=this.length;++s<l;){r=(a=this[s]).update,o.push(t=[]),t.parentNode=a.parentNode;for(var c=-1,u=a.length;++c<u;)(i=a[c])?(t.push(r[c]=n=e.call(a.parentNode,i.__data__,c,s)),n.__data__=i.__data__):t.push(null)}return B(o)},ue.insert=function(e,t){var o,s,l;return arguments.length<2&&(o=this,t=function(e,t,n){var r,a=o[n].update,i=a.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=a[s])&&++s<i;);return r}),V.insert.call(this,e,t)},P.select=function(e){var t;return"string"==typeof e?(t=[q(e,I)]).parentNode=I.documentElement:(t=[e]).parentNode=s(e),B([t])},P.selectAll=function(e){var t;return"string"==typeof e?(t=f(U(e,I))).parentNode=I.documentElement:(t=f(e)).parentNode=null,B([t])},V.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(de(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(de(e,t,n))};var fe=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});function pe(n,r){return function(e){var t=P.event;P.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{P.event=t}}}function he(e,t){var n=pe(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}I&&fe.forEach(function(e){"on"+e in I&&fe.remove(e)});var me,ge=0;function ye(e){var n,r,a=".dragsuppress-"+ ++ge,i="click"+a,o=P.select(R(e)).on("touchmove"+a,N).on("dragstart"+a,N).on("selectstart"+a,N);return(me=null==me?!("onselectstart"in e)&&A(e.style,"userSelect"):me)&&(n=s(e).style,r=n[me],n[me]="none"),function(e){var t;o.on(a,null),me&&(n[me]=r),e&&(t=function(){o.on(i,null)},o.on(i,function(){N(),t()},!0),setTimeout(t,0))}}P.mouse=function(e){return xe(e,z())};var ve=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function xe(e,t){if(t.changedTouches&&(t=t.changedTouches[0]),(n=e.ownerSVGElement||e).createSVGPoint){var n,r,a=n.createSVGPoint();return ve<0&&(((r=R(e)).scrollX||r.scrollY)&&(r=(n=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),ve=!(r.f||r.e),n.remove())),ve?(a.x=t.pageX,a.y=t.pageY):(a.x=t.clientX,a.y=t.clientY),[(a=a.matrixTransform(e.getScreenCTM().inverse())).x,a.y]}a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function be(){return P.event.changedTouches[0].identifier}P.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=z().changedTouches),t)for(var r,a=0,i=t.length;a<i;++a)if((r=t[a]).identifier===n)return xe(e,r)},P.behavior.drag=function(){var m=F(n,"drag","dragstart","dragend"),g=null,e=r(E,P.mouse,R,"mousemove","mouseup"),t=r(be,P.touch,C,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(u,d,f,p,h){return function(){var r,e=P.event.target.correspondingElement||P.event.target,a=this.parentNode,i=m.of(this,arguments),o=0,s=u(),t=".drag"+(null==s?"":"-"+s),n=P.select(f(e)).on(p+t,function(){var e,t,n=d(a,s);n&&(e=n[0]-c[0],t=n[1]-c[1],o|=e|t,i({type:"drag",x:(c=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t}))}).on(h+t,function(){d(a,s)&&(n.on(p+t,null).on(h+t,null),l(o),i({type:"dragend"}))}),l=ye(e),c=d(a,s);r=g?[(r=g.apply(this,arguments)).x-c[0],r.y-c[1]]:[0,0],i({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(g=e,n):g},P.rebind(n,m,"on")},P.touches=function(n,e){return(e=arguments.length<2?z().touches:e)?f(e).map(function(e){var t=xe(n,e);return t.identifier=e.identifier,t}):[]};var _e=1e-6,we=_e*_e,Te=Math.PI,Me=2*Te,ke=Me-_e,Ae=Te/2,Se=Te/180,Ee=180/Te;function Le(e){return 0<e?1:e<0?-1:0}function Ce(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function De(e){return 1<e?0:e<-1?Te:Math.acos(e)}function Oe(e){return 1<e?Ae:e<-1?-Ae:Math.asin(e)}function Pe(e){return((e=Math.exp(e))+1/e)/2}function Ie(e){return(e=Math.sin(e/2))*e}var Re=Math.SQRT2;P.interpolateZoom=function(e,t){var r,a,i,n,o=e[0],s=e[1],l=e[2],c=t[0],e=t[1],t=t[2],u=c-o,d=e-s,c=u*u+d*d;return(n=c<we?(i=Math.log(t/l)/Re,function(e){return[o+e*u,s+e*d,l*Math.exp(Re*e*i)]}):(r=Math.sqrt(c),e=(t*t-l*l+4*c)/(2*l*2*r),n=(t*t-l*l-4*c)/(2*t*2*r),a=Math.log(Math.sqrt(e*e+1)-e),i=(Math.log(Math.sqrt(n*n+1)-n)-a)/Re,function(e){var t=e*i,n=Pe(a),e=l/(2*r)*(n*(e=Re*t+a,((e=Math.exp(2*e))-1)/(e+1))-(e=a,((e=Math.exp(a))-1/e)/2));return[o+e*u,s+e*d,l*n/Pe(Re*t+a)]})).duration=1e3*i,n},P.behavior.zoom=function(){var t,s,n,r,v,a,i,o,l,x={x:0,y:0,k:1},c=[960,500],u=Fe,d=250,f=0,b="mousedown.zoom",p="mousemove.zoom",h="mouseup.zoom",_="touchstart.zoom",w=F(m,"zoomstart","zoom","zoomend");function m(e){e.on(b,C).on(ze+".zoom",y).on("dblclick.zoom",O).on(_,D)}function T(e){return[(e[0]-x.x)/x.k,(e[1]-x.y)/x.k]}function M(e){x.k=Math.max(u[0],Math.min(u[1],e))}function k(e,t){var n;t=[(n=t)[0]*x.k+x.x,n[1]*x.k+x.y],x.x+=e[0]-t[0],x.y+=e[1]-t[1]}function A(e,t,n,r){e.__chart__={x:x.x,y:x.y,k:x.k},M(Math.pow(2,r)),k(s=t,n),e=P.select(e),(e=0<d?e.transition().duration(d):e).call(m.event)}function g(){i&&i.domain(a.range().map(function(e){return(e-x.x)/x.k}).map(a.invert)),l&&l.domain(o.range().map(function(e){return(e-x.y)/x.k}).map(o.invert))}function S(e){f++||e({type:"zoomstart"})}function E(e){g(),e({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function L(e){--f||(e({type:"zoomend"}),s=null)}function C(){var e=this,t=w.of(e,arguments),n=0,r=P.select(R(e)).on(p,function(){n=1,k(P.mouse(e),a),E(t)}).on(h,function(){r.on(p,null).on(h,null),i(n),L(t)}),a=T(P.mouse(e)),i=ye(e);ks.call(e),S(t)}function D(){var l,c=this,u=w.of(c,arguments),d={},f=0,a=".zoom-"+P.event.changedTouches[0].identifier,o="touchmove"+a,s="touchend"+a,p=[],i=P.select(c),h=ye(c);function m(){var e=P.touches(c);return l=x.k,e.forEach(function(e){e.identifier in d&&(d[e.identifier]=T(e))}),e}function e(){var e=P.event.target;P.select(e).on(o,g).on(s,y),p.push(e);for(var t=P.event.changedTouches,n=0,r=t.length;n<r;++n)d[t[n].identifier]=null;var a,i=m(),e=Date.now();1===i.length?(e-v<500&&(a=i[0],A(c,a,d[a.identifier],Math.floor(Math.log(x.k)/Math.LN2)+1),N()),v=e):1<i.length&&(a=i[0],e=i[1],i=a[0]-e[0],e=a[1]-e[1],f=i*i+e*e)}function g(){var e,t,n=P.touches(c);ks.call(c);for(var r,a,i,o=0,s=n.length;o<s;++o,t=null)if(e=n[o],t=d[e.identifier]){if(i)break;a=e,i=t}t&&(r=(r=e[0]-a[0])*r+(r=e[1]-a[1])*r,r=f&&Math.sqrt(r/f),a=[(a[0]+e[0])/2,(a[1]+e[1])/2],i=[(i[0]+t[0])/2,(i[1]+t[1])/2],M(r*l)),v=null,k(a,i),E(u)}function y(){if(P.event.touches.length){for(var e,t=P.event.changedTouches,n=0,r=t.length;n<r;++n)delete d[t[n].identifier];for(e in d)return void m()}P.selectAll(p).on(a,null),i.on(b,C).on(_,D),h(),L(u)}e(),S(u),i.on(b,null).on(_,e)}function y(){var e=w.of(this,arguments);r?clearTimeout(r):(ks.call(this),t=T(s=n||P.mouse(this)),S(e)),r=setTimeout(function(){r=null,L(e)},50),N(),M(Math.pow(2,.002*Ne())*x.k),k(s,t),E(e)}function O(){var e=P.mouse(this),t=Math.log(x.k)/Math.LN2;A(this,e,T(e),P.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return ze=ze||("onwheel"in I?(Ne=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in I?(Ne=function(){return P.event.wheelDelta},"mousewheel"):(Ne=function(){return-P.event.detail},"MozMousePixelScroll")),m.event=function(e){e.each(function(){var o=w.of(this,arguments),t=x;Es?P.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},S(o)}).tween("zoom:zoom",function(){var n=c[0],e=c[1],r=s?s[0]:n/2,a=s?s[1]:e/2,i=P.interpolateZoom([(r-x.x)/x.k,(a-x.y)/x.k,n/x.k],[(r-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(e){var t=i(e),e=n/t[2];this.__chart__=x={x:r-t[0]*e,y:a-t[1]*e,k:e},E(o)}}).each("interrupt.zoom",function(){L(o)}).each("end.zoom",function(){L(o)}):(this.__chart__=x,S(o),E(o),L(o))})},m.translate=function(e){return arguments.length?(x={x:+e[0],y:+e[1],k:x.k},g(),m):[x.x,x.y]},m.scale=function(e){return arguments.length?(x={x:x.x,y:x.y,k:null},M(+e),g(),m):x.k},m.scaleExtent=function(e){return arguments.length?(u=null==e?Fe:[+e[0],+e[1]],m):u},m.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],m):n},m.size=function(e){return arguments.length?(c=e&&[+e[0],+e[1]],m):c},m.duration=function(e){return arguments.length?(d=+e,m):d},m.x=function(e){return arguments.length?(a=(i=e).copy(),x={x:0,y:0,k:1},m):i},m.y=function(e){return arguments.length?(o=(l=e).copy(),x={x:0,y:0,k:1},m):l},P.rebind(m,w,"on")};var Ne,ze,Fe=[0,1/0];function je(){}function He(e,t,n){return this instanceof He?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.s,e.l):at(""+e,it,He):new He(e,t,n)}(P.color=je).prototype.toString=function(){return this.rgb()+""};t=(P.hsl=He).prototype=new je;function Be(e,t,n){var r,a;function i(e){return Math.round(255*(360<(e=e)?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new et(i(e+120),i(e),i(e-120))}function qe(e,t,n){return this instanceof qe?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof qe?new qe(e.h,e.c,e.l):Xe((e instanceof Ye?e:e=ot((e=P.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new qe(e,t,n)}t.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,this.l/e)},t.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,e*this.l)},t.rgb=function(){return Be(this.h,this.s,this.l)};i=(P.hcl=qe).prototype=new je;function Ue(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ye(n,Math.cos(e*=Se)*t,Math.sin(e)*t)}function Ye(e,t,n){return this instanceof Ye?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Ye?new Ye(e.l,e.a,e.b):e instanceof qe?Ue(e.h,e.c,e.l):ot((e=et(e)).r,e.g,e.b):new Ye(e,t,n)}i.brighter=function(e){return new qe(this.h,this.c,Math.min(100,this.l+Ve*(arguments.length?e:1)))},i.darker=function(e){return new qe(this.h,this.c,Math.max(0,this.l-Ve*(arguments.length?e:1)))},i.rgb=function(){return Ue(this.h,this.c,this.l).rgb()},P.lab=Ye;var Ve=18,Ge=.95047,We=1,Ze=1.08883,d=Ye.prototype=new je;function $e(e,t,n){e=(e+16)/116,n=e-n/200;return new et(Qe(3.2404542*(t=Je(t=e+t/500)*Ge)-1.5371385*(e=Je(e)*We)-.4985314*(n=Je(n)*Ze)),Qe(-.969266*t+1.8760108*e+.041556*n),Qe(.0556434*t-.2040259*e+1.0572252*n))}function Xe(e,t,n){return 0<e?new qe(Math.atan2(n,t)*Ee,Math.sqrt(t*t+n*n),e):new qe(NaN,NaN,e)}function Je(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function Ke(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function Qe(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function et(e,t,n){return this instanceof et?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof et?new et(e.r,e.g,e.b):at(""+e,et,Be):new et(e,t,n)}function tt(e){return new et(e>>16,e>>8&255,255&e)}function nt(e){return tt(e)+""}d.brighter=function(e){return new Ye(Math.min(100,this.l+Ve*(arguments.length?e:1)),this.a,this.b)},d.darker=function(e){return new Ye(Math.max(0,this.l-Ve*(arguments.length?e:1)),this.a,this.b)},d.rgb=function(){return $e(this.l,this.a,this.b)};t=(P.rgb=et).prototype=new je;function rt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function at(e,t,n){var r,a=0,i=0,o=0,s=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(s)switch(r=s[2].split(","),s[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(lt(r[0]),lt(r[1]),lt(r[2]))}return(s=ct.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&s)>>4,a|=a>>4,i=240&s,i|=i>>4,o=15&s,o|=o<<4):7===e.length&&(a=(16711680&s)>>16,i=(65280&s)>>8,o=255&s)),t(a,i,o))}function it(e,t,n){var r,a,i=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-i,l=(o+i)/2;return s?(a=l<.5?s/(o+i):s/(2-o-i),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=0<l&&l<1?0:r),new He(r,a,l)}function ot(e,t,n){var r=Ke((.4124564*(e=st(e))+.3575761*(t=st(t))+.1804375*(n=st(n)))/Ge),a=Ke((.2126729*e+.7151522*t+.072175*n)/We);return Ye(116*a-16,500*(r-a),200*(a-Ke((.0193339*e+.119192*t+.9503041*n)/Ze)))}function st(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function lt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}t.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new et(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new et(30,30,30)},t.darker=function(e){return new et((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},t.hsl=function(){return it(this.r,this.g,this.b)},t.toString=function(){return"#"+rt(this.r)+rt(this.g)+rt(this.b)};var ct=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ut(e){return"function"==typeof e?e:function(){return e}}function dt(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),ft(e,t,r,n)}}function ft(a,i,o,e){var n,s={},l=P.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function t(){var e,t,n,r=u.status;if(!r&&((n=(t=u).responseType)&&"text"!==n?t.response:t.responseText)||200<=r&&r<300||304===r){try{e=o.call(s,u)}catch(e){return void l.error.call(s,e)}l.load.call(s,e)}else l.error.call(s,u)}return"onload"in(u=self.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(a)?new XDomainRequest:u)?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=P.event;P.event=e;try{l.progress.call(s,u)}finally{P.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c[e]:(null==t?delete c[e]:c[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(i=null==e?null:e+"",s):i},s.responseType=function(e){return arguments.length?(d=e,s):d},s.response=function(e){return o=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(f(arguments)))}}),s.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),u.open(e,a,!0),null==i||"accept"in c||(c.accept=i+",*/*"),u.setRequestHeader)for(var r in c)u.setRequestHeader(r,c[r]);return null!=i&&u.overrideMimeType&&u.overrideMimeType(i),null!=d&&(u.responseType=d),null!=n&&s.on("error",n).on("load",function(e){n(null,e)}),l.beforesend.call(s,u),u.send(null==t?null:t),s},s.abort=function(){return u.abort(),s},P.rebind(s,l,"on"),null==e?s:s.get(1===(n=e).length?function(e,t){n(null==e?t:null)}:n)}ct.forEach(function(e,t){ct.set(e,tt(t))}),P.functor=ut,P.xhr=dt(C),P.dsv=function(a,i){var t=new RegExp('["'+a+"\n]"),f=a.charCodeAt(0);function o(e,t,n){arguments.length<3&&(n=t,t=null);var r=ft(e,i,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}function n(e){return e.map(c).join(a)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o.parse=function(e,r){var t;return o.parseRows(e,function(a,e){if(t)return t(a,e-1);function n(e){for(var t={},n=a.length,r=0;r<n;++r)t[a[r]]=e[r];return t}t=r?function(e,t){return r(n(e),t)}:n})},o.parseRows=function(a,e){var t,i,o={},s={},n=[],l=a.length,c=0,r=0;function u(){if(l<=c)return s;if(i)return i=!1,o;var e=c;if(34===a.charCodeAt(e)){for(var t=e;t++<l;)if(34===a.charCodeAt(t)){if(34!==a.charCodeAt(t+1))break;++t}return c=t+2,13===(n=a.charCodeAt(t+1))?(i=!0,10===a.charCodeAt(t+2)&&++c):10===n&&(i=!0),a.slice(e+1,t).replace(/""/g,'"')}for(;c<l;){var n,r=1;if(10===(n=a.charCodeAt(c++)))i=!0;else if(13===n)i=!0,10===a.charCodeAt(c)&&(++c,++r);else if(n!==f)continue;return a.slice(e,c-r)}return a.slice(e)}for(;(t=u())!==s;){for(var d=[];t!==o&&t!==s;)d.push(t),t=u();e&&null==(d=e(d,r++))||n.push(d)}return n},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new k,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(c).join(a)].concat(e.map(function(t){return r.map(function(e){return c(t[e])}).join(a)})).join("\n")},o.formatRows=function(e){return e.map(n).join("\n")},o},P.csv=P.dsv(",","text/csv"),P.tsv=P.dsv("\t","text/tab-separated-values");var pt,ht,mt,gt,yt=this[A(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function vt(e,t,n){var r=arguments.length;r<2&&(t=0);r={c:e,t:(n=r<3?Date.now():n)+t,n:null};return ht?ht.n=r:pt=r,ht=r,mt||(gt=clearTimeout(gt),mt=1,yt(xt)),r}function xt(){var e=bt(),e=_t()-e;24<e?(isFinite(e)&&(clearTimeout(gt),gt=setTimeout(xt,e)),mt=0):(mt=1,yt(xt))}function bt(){for(var e=Date.now(),t=pt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function _t(){for(var e,t=pt,n=1/0;t;)t=t.c?(t.t<n&&(n=t.t),(e=t).n):e?e.n=t.n:pt=t.n;return ht=e,n}function wt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}P.timer=function(){vt.apply(this,arguments)},P.timer.flush=function(){bt(),_t()},P.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Tt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*D(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}});P.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=P.round(e,wt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Tt[8+n/3]};var Mt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,kt=P.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=P.round(e,wt(e,t))).toFixed(Math.max(0,Math.min(20,wt(e*(1+1e-15),t))))}});function At(e){return e+""}var St=P.time={},Et=Date;function Lt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Lt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ct.setUTCDate.apply(this._,arguments)},setDay:function(){Ct.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ct.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ct.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ct.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ct.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ct.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ct.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ct.setTime.apply(this._,arguments)}};var Ct=Date.prototype;function Dt(r,i,o){function e(e){var t=r(e),n=a(t,1);return e-t<n-e?t:n}function s(e){return i(e=r(new Et(e-1)),1),e}function a(e,t){return i(e=new Et(+e),t),e}function l(e,t,n){var r=s(e),a=[];if(1<n)for(;r<t;)o(r)%n||a.push(new Date(+r)),i(r,1);else for(;r<t;)a.push(new Date(+r)),i(r,1);return a}(r.floor=r).round=e,r.ceil=s,r.offset=a,r.range=l;var t=r.utc=Ot(r);return(t.floor=t).round=Ot(e),t.ceil=Ot(s),t.offset=Ot(a),t.range=function(e,t,n){try{var r=new(Et=Lt);return r._=e,l(r,t,n)}finally{Et=Date}},r}function Ot(r){return function(e,t){try{var n=new(Et=Lt);return n._=e,r(n,t)._}finally{Et=Date}}}function Pt(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function c(s){var l=s.length;function e(e){for(var t,n,r,a=[],i=-1,o=0;++i<l;)37===s.charCodeAt(i)&&(a.push(s.slice(o,i)),null!=(n=It[t=s.charAt(++i)])&&(t=s.charAt(++i)),(r=b[t])&&(t=r(e,null==n?"e"===t?" ":"0":n)),a.push(t),o=i+1);return a.push(s.slice(o,i)),a.join("")}return e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(t,s,e,0)!=e.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var n=null!=t.Z&&Et!==Lt,e=new(n?Lt:Et);return"j"in t?e.setFullYear(t.y,0,t.j):"W"in t||"U"in t?("w"in t||(t.w="W"in t?1:0),e.setFullYear(t.y,0,1),e.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(e.getDay()+5)%7:t.w+7*t.U-(e.getDay()+6)%7)):e.setFullYear(t.y,t.m,t.d),e.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),n?e._:e},e.toString=function(){return s},e}function u(e,t,n,r){for(var a,i,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(a=t.charCodeAt(o++))){if(i=t.charAt(o++),!(i=_[i in It?t.charAt(o++):i])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var n=c(e);function t(e){try{var t=new(Et=Lt);return t._=e,n(t)}finally{Et=Date}}return t.parse=function(e){try{Et=Lt;var t=n.parse(e);return t&&t._}finally{Et=Date}},t.toString=n.toString,t},c.multi=c.utc.multi=tn;var d=P.map(),f=Ft(i),p=jt(i),h=Ft(o),m=jt(o),g=Ft(s),y=jt(s),v=Ft(l),x=jt(l);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(t),d:function(e,t){return zt(e.getDate(),t,2)},e:function(e,t){return zt(e.getDate(),t,2)},H:function(e,t){return zt(e.getHours(),t,2)},I:function(e,t){return zt(e.getHours()%12||12,t,2)},j:function(e,t){return zt(1+St.dayOfYear(e),t,3)},L:function(e,t){return zt(e.getMilliseconds(),t,3)},m:function(e,t){return zt(e.getMonth()+1,t,2)},M:function(e,t){return zt(e.getMinutes(),t,2)},p:function(e){return a[+(12<=e.getHours())]},S:function(e,t){return zt(e.getSeconds(),t,2)},U:function(e,t){return zt(St.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return zt(St.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return zt(e.getFullYear()%100,t,2)},Y:function(e,t){return zt(e.getFullYear()%1e4,t,4)},Z:Qt,"%":function(){return"%"}},_={a:function(e,t,n){h.lastIndex=0;t=h.exec(t.slice(n));return t?(e.w=m.get(t[0].toLowerCase()),n+t[0].length):-1},A:function(e,t,n){f.lastIndex=0;t=f.exec(t.slice(n));return t?(e.w=p.get(t[0].toLowerCase()),n+t[0].length):-1},b:function(e,t,n){v.lastIndex=0;t=v.exec(t.slice(n));return t?(e.m=x.get(t[0].toLowerCase()),n+t[0].length):-1},B:function(e,t,n){g.lastIndex=0;t=g.exec(t.slice(n));return t?(e.m=y.get(t[0].toLowerCase()),n+t[0].length):-1},c:function(e,t,n){return u(e,b.c.toString(),t,n)},d:Wt,e:Wt,H:$t,I:$t,j:Zt,L:Kt,m:Gt,M:Xt,p:function(e,t,n){t=d.get(t.slice(n,n+=2).toLowerCase());return null==t?-1:(e.p=t,n)},S:Jt,U:Bt,w:Ht,W:qt,x:function(e,t,n){return u(e,b.x.toString(),t,n)},X:function(e,t,n){return u(e,b.X.toString(),t,n)},y:Yt,Y:Ut,Z:Vt,"%":en};return c}St.year=Dt(function(e){return(e=St.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),St.years=St.year.range,St.years.utc=St.year.utc.range,St.day=Dt(function(e){var t=new Et(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),St.days=St.day.range,St.days.utc=St.day.utc.range,St.dayOfYear=function(e){var t=St.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,n){n=7-n;var t=St[e]=Dt(function(e){return(e=St.day(e)).setDate(e.getDate()-(e.getDay()+n)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)-(t!==n)});St[e+"s"]=t.range,St[e+"s"].utc=t.utc.range,St[e+"OfYear"]=function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)}}),St.week=St.sunday,St.weeks=St.sunday.range,St.weeks.utc=St.sunday.utc.range,St.weekOfYear=St.sundayOfYear;var It={"-":"",_:" ",0:"0"},Rt=/^\s*\d+/,Nt=/^%/;function zt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",e=a.length;return r+(e<n?new Array(n-e+1).join(t)+a:a)}function Ft(e){return new RegExp("^(?:"+e.map(P.requote).join("|")+")","i")}function jt(e){for(var t=new v,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ht(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function Bt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n));return t?(e.U=+t[0],n+t[0].length):-1}function qt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n));return t?(e.W=+t[0],n+t[0].length):-1}function Ut(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function Yt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.y=(e=+t[0])+(68<e?1900:2e3),n+t[0].length):-1}function Vt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Gt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function Wt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function Zt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+3));return t?(e.j=+t[0],n+t[0].length):-1}function $t(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function Xt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function Jt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function Kt(e,t,n){Rt.lastIndex=0;t=Rt.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function Qt(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",e=D(t)/60|0,t=D(t)%60;return n+zt(e,"0",2)+zt(t,"0",2)}function en(e,t,n){Nt.lastIndex=0;t=Nt.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function tn(r){for(var e=r.length,t=-1;++t<e;)r[t][0]=this(r[t][0]);return function(e){for(var t=0,n=r[t];!n[1](e);)n=r[++t];return n[0](e)}}P.locale=function(e){return{numberFormat:(_=e.decimal,s=e.thousands,l=e.grouping,n=e.currency,w=l&&s?function(e,t){for(var n=e.length,r=[],a=0,i=l[0],o=0;0<n&&0<i&&(t<o+i+1&&(i=Math.max(1,t-o)),r.push(e.substring(n-=i,n+i)),!((o+=i+1)>t));)i=l[a=(a+1)%l.length];return r.reverse().join(s)}:C,function(e){var e=Mt.exec(e),s=e[1]||" ",l=e[2]||">",c=e[3]||"-",t=e[4]||"",u=e[5],d=+e[6],f=e[7],p=e[8],h=e[9],m=1,g="",y="",v=!1,x=!0,p=p&&+p.substring(1);switch((u||"0"===s&&"="===l)&&(u=s="0",l="="),h){case"n":f=!0,h="g";break;case"%":m=100,y="%",h="f";break;case"p":m=100,y="%",h="r";break;case"b":case"o":case"x":case"X":"#"===t&&(g="0"+h.toLowerCase());case"c":x=!1;case"d":v=!0,p=0;break;case"s":m=-1,h="r"}"$"===t&&(g=n[0],y=n[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):"e"!=h&&"f"!=h||(p=Math.max(0,Math.min(20,p))));var h=kt.get(h)||At,b=u&&f;return function(e){var t=y;if(v&&e%1)return"";var n=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===c?"":c;m<0?(e=(a=P.formatPrefix(e,p)).scale(e),t=a.symbol+y):e*=m;var r,a,i=(e=h(e,p)).lastIndexOf(".");a=i<0?(o=x?e.lastIndexOf("e"):-1)<0?(r=e,""):(r=e.substring(0,o),e.substring(o)):(r=e.substring(0,i),_+e.substring(i+1)),!u&&f&&(r=w(r,1/0));var o=g.length+r.length+a.length+(b?0:n.length),i=o<d?new Array(o=d-o+1).join(s):"";return b&&(r=w(i+r,i.length?d-a.length:1/0)),n+=g,e=r+a,("<"===l?n+e+i:">"===l?i+n+e:"^"===l?i.substring(0,o>>=1)+n+e+i.substring(o):n+(b?e:i+e))+t}}),timeFormat:Pt(e)};var _,s,l,n,w};i=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nn(){}P.format=i.numberFormat,P.geo={},nn.prototype={s:0,t:0,add:function(e){an(e,this.t,rn),an(rn.s,this.s,this),this.s?this.t+=rn.t:this.s=rn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rn=new nn;function an(e,t,n){var r=n.s=e+t,a=r-e;n.t=e-(r-a)+(t-a)}function on(e,t){e&&ln.hasOwnProperty(e.type)&&ln[e.type](e,t)}P.geo.stream=function(e,t){e&&sn.hasOwnProperty(e.type)?sn[e.type](e,t):on(e,t)};var sn={Feature:function(e,t){on(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)on(n[r].geometry,t)}},ln={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){cn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)cn(n[r],t,0)},Polygon:function(e,t){un(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)un(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)on(n[r],t)}};function cn(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function un(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)cn(e[n],t,1);t.polygonEnd()}P.geo.area=function(e){return dn=0,P.geo.stream(e,Nn),dn};var dn,fn,pn,hn,mn,gn,yn,vn,xn,bn,_n,wn,Tn,Mn,kn,An,Sn,En,Ln,Cn,Dn,On,Pn,In,Rn=new nn,Nn={sphere:function(){dn+=4*Te},point:E,lineStart:E,lineEnd:E,polygonStart:function(){Rn.reset(),Nn.lineStart=zn},polygonEnd:function(){var e=2*Rn;dn+=e<0?4*Te+e:e,Nn.lineStart=Nn.lineEnd=Nn.point=E}};function zn(){var n,r,s,l,c;function a(e,t){t=t*Se/2+Te/4;var n=(e*=Se)-s,r=0<=n?1:-1,a=r*n,i=Math.cos(t),o=Math.sin(t),n=c*o,t=l*i+n*Math.cos(a),a=n*r*Math.sin(a);Rn.add(Math.atan2(a,t)),s=e,l=i,c=o}Nn.point=function(e,t){Nn.point=a,s=(n=e)*Se,l=Math.cos(t=(r=t)*Se/2+Te/4),c=Math.sin(t)},Nn.lineEnd=function(){a(n,r)}}function Fn(e){var t=e[0],n=e[1],e=Math.cos(n);return[e*Math.cos(t),e*Math.sin(t),Math.sin(n)]}function jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Bn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function qn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Un(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Yn(e){return[Math.atan2(e[1],e[0]),Oe(e[2])]}function Vn(e,t){return D(e[0]-t[0])<_e&&D(e[1]-t[1])<_e}function Gn(e,t){_n.push(wn=[fn=e,hn=e]),t<pn&&(pn=t),mn<t&&(mn=t)}function Wn(e,t){var n,r,a,i,o,s=Fn([e*Se,t*Se]);xn?(a=Hn(xn,s),Un(n=Hn([a[1],-a[0],0],a)),n=Yn(n),i=e-gn,a=n[0]*Ee*(r=0<i?1:-1),(i=180<D(i))^(r*gn<a&&a<r*e)?(o=n[1]*Ee,mn<o&&(mn=o)):i^(r*gn<(a=(a+360)%360-180)&&a<r*e)?(o=-n[1]*Ee)<pn&&(pn=o):(t<pn&&(pn=t),mn<t&&(mn=t)),i?e<gn?Qn(fn,e)>Qn(fn,hn)&&(hn=e):Qn(e,hn)>Qn(fn,hn)&&(fn=e):fn<=hn?(e<fn&&(fn=e),hn<e&&(hn=e)):gn<e?Qn(fn,e)>Qn(fn,hn)&&(hn=e):Qn(e,hn)>Qn(fn,hn)&&(fn=e)):Gn(e,t),xn=s,gn=e}function Zn(){Tn.point=Wn}function $n(){wn[0]=fn,wn[1]=hn,Tn.point=Gn,xn=null}function Xn(e,t){var n;xn?bn+=180<D(n=e-gn)?n+(0<n?360:-360):n:(yn=e,vn=t),Nn.point(e,t),Wn(e,t)}function Jn(){Nn.lineStart()}function Kn(){Xn(yn,vn),Nn.lineEnd(),D(bn)>_e&&(fn=-(hn=180)),wn[0]=fn,wn[1]=hn,xn=null}function Qn(e,t){return(t-=e)<0?t+360:t}function er(e,t){return e[0]-t[0]}function tr(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}P.geo.bounds=(Tn={point:Gn,lineStart:Zn,lineEnd:$n,polygonStart:function(){Tn.point=Xn,Tn.lineStart=Jn,Tn.lineEnd=Kn,bn=0,Nn.polygonStart()},polygonEnd:function(){Nn.polygonEnd(),Tn.point=Gn,Tn.lineStart=Zn,Tn.lineEnd=$n,Rn<0?(fn=-(hn=180),pn=-(mn=90)):_e<bn?mn=90:bn<-_e&&(pn=-90),wn[0]=fn,wn[1]=hn}},function(e){if(mn=hn=-(fn=pn=1/0),_n=[],P.geo.stream(e,Tn),a=_n.length){_n.sort(er);for(var t=1,n=[s=_n[0]];t<a;++t)tr((i=_n[t])[0],s)||tr(i[1],s)?(Qn(s[0],i[1])>Qn(s[0],s[1])&&(s[1]=i[1]),Qn(i[0],s[1])>Qn(s[0],s[1])&&(s[0]=i[0])):n.push(s=i);for(var r,a,i,o=-1/0,t=0,s=n[a=n.length-1];t<=a;s=i,++t)i=n[t],(r=Qn(s[1],i[0]))>o&&(o=r,fn=i[0],hn=s[1])}return _n=wn=null,fn===1/0||pn===1/0?[[NaN,NaN],[NaN,NaN]]:[[fn,pn],[hn,mn]]}),P.geo.centroid=function(e){Mn=kn=An=Sn=En=Ln=Cn=Dn=On=Pn=In=0,P.geo.stream(e,nr);var t=On,n=Pn,r=In,e=t*t+n*n+r*r;return e<we&&(t=Ln,n=Cn,r=Dn,kn<_e&&(t=An,n=Sn,r=En),(e=t*t+n*n+r*r)<we)?[NaN,NaN]:[Math.atan2(n,t)*Ee,Oe(r/Math.sqrt(e))*Ee]};var nr={sphere:E,point:rr,lineStart:ir,lineEnd:or,polygonStart:function(){nr.lineStart=sr},polygonEnd:function(){nr.lineStart=ir}};function rr(e,t){e*=Se;var n=Math.cos(t*=Se);ar(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ar(e,t,n){An+=(e-An)/++Mn,Sn+=(t-Sn)/Mn,En+=(n-En)/Mn}function ir(){var a,i,o;function r(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),n=n*Math.sin(e),e=Math.sin(t),t=Math.atan2(Math.sqrt((t=i*e-o*n)*t+(t=o*r-a*e)*t+(t=a*n-i*r)*t),a*r+i*n+o*e);kn+=t,Ln+=t*(a+(a=r)),Cn+=t*(i+(i=n)),Dn+=t*(o+(o=e)),ar(a,i,o)}nr.point=function(e,t){e*=Se;var n=Math.cos(t*=Se);a=n*Math.cos(e),i=n*Math.sin(e),o=Math.sin(t),nr.point=r,ar(a,i,o)}}function or(){nr.point=rr}function sr(){var r,a,c,u,d;function i(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),a=n*Math.sin(e),i=Math.sin(t),o=u*i-d*a,s=d*r-c*i,l=c*a-u*r,n=Math.sqrt(o*o+s*s+l*l),e=c*r+u*a+d*i,t=n&&-De(e)/n,e=Math.atan2(n,e);On+=t*o,Pn+=t*s,In+=t*l,kn+=e,Ln+=e*(c+(c=r)),Cn+=e*(u+(u=a)),Dn+=e*(d+(d=i)),ar(c,u,d)}nr.point=function(e,t){r=e,a=t,nr.point=i,e*=Se;var n=Math.cos(t*=Se);c=n*Math.cos(e),u=n*Math.sin(e),d=Math.sin(t),ar(c,u,d)},nr.lineEnd=function(){i(r,a),nr.lineEnd=or,nr.point=rr}}function lr(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function cr(){return!0}function ur(e,t,n,r,s){var l=[],c=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Vn(n,r)){s.lineStart();for(var a=0;a<t;++a)s.point((n=e[a])[0],n[1]);s.lineEnd()}else{var i=new fr(n,e,null,!0),o=new fr(n,null,i,!1);i.o=o,l.push(i),c.push(o),i=new fr(r,e,null,!1),o=new fr(r,null,i,!0),i.o=o,l.push(i),c.push(o)}}}),c.sort(t),dr(l),dr(c),l.length){for(var a=0,i=n,o=c.length;a<o;++a)c[a].e=i=!i;for(var u,d=l[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;h=f.z,s.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,o=h.length;a<o;++a)s.point((u=h[a])[0],u[1]);else r(f.x,f.n.x,1,s);f=f.n}else{if(p)for(var h,a=(h=f.p.z).length-1;0<=a;--a)s.point((u=h[a])[0],u[1]);else r(f.x,f.p.x,-1,s);f=f.p}}while(h=(f=f.o).z,p=!p,!f.v);s.lineEnd()}}}function dr(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function fr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pr(v,x,b,_){return function(r,o){var s,n=x(o),t=r.invert(_[0],_[1]),a={point:i,lineStart:l,lineEnd:c,polygonStart:function(){a.point=m,a.lineStart=g,a.lineEnd=y,s=[],u=[]},polygonEnd:function(){a.point=i,a.lineStart=l,a.lineEnd=c,s=P.merge(s);var e=function(e,t){var n=e[0],r=e[1],a=[Math.sin(n),-Math.cos(n),0],i=0,o=0;Rn.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],f=d[0],p=d[1]/2+Te/4,h=Math.sin(p),m=Math.cos(p),g=1;;){var y=(e=c[g=g===u?0:g])[0],v=e[1]/2+Te/4,x=Math.sin(v),b=Math.cos(v),_=y-f,w=0<=_?1:-1,T=w*_,M=Te<T,v=h*x;if(Rn.add(Math.atan2(v*w*Math.sin(T),m*b+v*Math.cos(T))),i+=M?_+w*Me:_,M^n<=f^n<=y&&(Un(T=Hn(Fn(d),Fn(e))),Un(w=Hn(a,T)),((w=(M^0<=_?-1:1)*Oe(w[2]))<r||r===w&&(T[0]||T[1]))&&(o+=M^0<=_?1:-1)),!g++)break;f=y,h=x,m=b,d=e}}return(i<-_e||i<_e&&Rn<-_e)^1&o}(t,u);s.length?(h||(o.polygonStart(),h=!0),ur(s,gr,e,b,o)):e&&(h||(o.polygonStart(),h=!0),o.lineStart(),b(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),s=u=null},sphere:function(){o.polygonStart(),o.lineStart(),b(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function i(e,t){var n=r(e,t);v(e=n[0],t=n[1])&&o.point(e,t)}function e(e,t){t=r(e,t);n.point(t[0],t[1])}function l(){a.point=e,n.lineStart()}function c(){a.point=i,n.lineEnd()}var u,d,f=mr(),p=x(f),h=!1;function m(e,t){d.push([e,t]);t=r(e,t);p.point(t[0],t[1])}function g(){p.lineStart(),d=[]}function y(){m(d[0][0],d[0][1]),p.lineEnd();var e=p.clean(),t=f.buffer(),n=t.length;if(d.pop(),u.push(d),d=null,n)if(1&e){var r,a,i=-1;if(0<(n=(r=t[0]).length-1)){for(h||(o.polygonStart(),h=!0),o.lineStart();++i<n;)o.point((a=r[i])[0],a[1]);o.lineEnd()}}else 1<n&&2&e&&t.push(t.pop().concat(t.shift())),s.push(t.filter(hr))}return a}}function hr(e){return 1<e.length}function mr(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(e,t){n.push([e,t])},lineEnd:E,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function gr(e,t){return((e=e.x)[0]<0?e[1]-Ae-_e:Ae-e[1])-((t=t.x)[0]<0?t[1]-Ae-_e:Ae-t[1])}var yr=pr(cr,function(c){var u,d=NaN,f=NaN,p=NaN;return{lineStart:function(){c.lineStart(),u=1},point:function(e,t){var n,r,a,i,o,s=0<e?Te:-Te,l=D(e-d);D(l-Te)<_e?(c.point(d,f=0<(f+t)/2?Ae:-Ae),c.point(p,f),c.lineEnd(),c.lineStart(),c.point(s,f),c.point(e,f),u=0):p!==s&&Te<=l&&(D(d-p)<_e&&(d-=p*_e),D(e-s)<_e&&(e-=s*_e),n=d,r=f,a=e,i=t,o=Math.sin(n-a),f=D(o)>_e?Math.atan((Math.sin(r)*(l=Math.cos(i))*Math.sin(a)-Math.sin(i)*(a=Math.cos(r))*Math.sin(n))/(a*l*o)):(r+i)/2,c.point(p,f),c.lineEnd(),c.lineStart(),c.point(s,f),u=0),c.point(d=e,f=t),p=s},lineEnd:function(){c.lineEnd(),d=f=NaN},clean:function(){return 2-u}}},function(e,t,n,r){var a;null==e?(a=n*Ae,r.point(-Te,a),r.point(0,a),r.point(Te,a),r.point(Te,0),r.point(Te,-a),r.point(0,-a),r.point(-Te,-a),r.point(-Te,0),r.point(-Te,a)):D(e[0]-t[0])>_e?(e=e[0]<t[0]?Te:-Te,a=n*e/2,r.point(-e,a),r.point(0,a),r.point(e,a)):r.point(t[0],t[1])},[-Te,-Te/2]);function vr(a){var p=Math.cos(a),f=0<p,h=D(p)>_e;return pr(m,function(o){var s,l,c,u,d;return{lineStart:function(){u=c=!1,d=1},point:function(e,t){var n,r,a=[e,t],i=m(e,t),t=f?i?0:y(e,t):i?y(e+(e<0?Te:-Te),t):0;!s&&(u=c=i)&&o.lineStart(),i!==c&&(n=g(s,a),(Vn(s,n)||Vn(a,n))&&(a[0]+=_e,a[1]+=_e,i=m(a[0],a[1]))),i!==c?(d=0,i?(o.lineStart(),n=g(a,s),o.point(n[0],n[1])):(n=g(s,a),o.point(n[0],n[1]),o.lineEnd()),s=n):h&&s&&f^i&&(t&l||!(r=g(a,s,!0))||(d=0,f?(o.lineStart(),o.point(r[0][0],r[0][1]),o.point(r[1][0],r[1][1]),o.lineEnd()):(o.point(r[1][0],r[1][1]),o.lineEnd(),o.lineStart(),o.point(r[0][0],r[0][1])))),!i||s&&Vn(s,a)||o.point(a[0],a[1]),s=a,c=i,l=t},lineEnd:function(){c&&o.lineEnd(),s=null},clean:function(){return d|(u&&c)<<1}}},ea(a,6*Se),f?[0,-a]:[-Te,a-Te]);function m(e,t){return Math.cos(e)*Math.cos(t)>p}function g(e,t,n){var r=[1,0,0],a=Hn(Fn(e),Fn(t)),i=jn(a,a),o=a[0],s=i-o*o;if(!s)return!n&&e;var l=Hn(r,a),c=qn(r,p*i/s);Bn(c,qn(a,-p*o/s));var u=l,d=jn(c,u),r=jn(u,u),i=d*d-r*(jn(c,c)-1);if(!(i<0)){a=Math.sqrt(i),o=qn(u,(-d-a)/r);if(Bn(o,c),o=Yn(o),!n)return o;var f,s=e[0],l=t[0],i=e[1],n=t[1];l<s&&(f=s,s=l,l=f);e=l-s,t=D(e-Te)<_e;if(!t&&n<i&&(f=i,i=n,n=f),t||e<_e?t?0<i+n^o[1]<(D(o[0]-s)<_e?i:n):i<=o[1]&&o[1]<=n:Te<e^(s<=o[0]&&o[0]<=l)){r=qn(u,(-d+a)/r);return Bn(r,c),[o,Yn(r)]}}}function y(e,t){var n=f?a:Te-a,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}}function xr(l,c,u,d){return function(e){var t=e.a,n=e.b,r=t.x,a=t.y,i=0,o=1,s=n.x-r,t=n.y-a,n=l-r;if(s||!(0<n)){if(n/=s,s<0){if(n<i)return;n<o&&(o=n)}else if(0<s){if(o<n)return;i<n&&(i=n)}if(n=u-r,s||!(n<0)){if(n/=s,s<0){if(o<n)return;i<n&&(i=n)}else if(0<s){if(n<i)return;n<o&&(o=n)}if(n=c-a,t||!(0<n)){if(n/=t,t<0){if(n<i)return;n<o&&(o=n)}else if(0<t){if(o<n)return;i<n&&(i=n)}if(n=d-a,t||!(n<0)){if(n/=t,t<0){if(o<n)return;i<n&&(i=n)}else if(0<t){if(n<i)return;n<o&&(o=n)}return 0<i&&(e.a={x:r+i*s,y:a+i*t}),o<1&&(e.b={x:r+o*s,y:a+o*t}),e}}}}}}var br=1e9;function _r(b,_,w,T){return function(a){var r,u,i,o,s,l,c,d,f,p,h,m=a,e=mr(),g=xr(b,_,w,T),t={point:n,lineStart:function(){t.point=x,u&&u.push(i=[]);p=!0,f=!1,c=d=NaN},lineEnd:function(){r&&(x(o,s),l&&f&&e.rejoin(),r.push(e.buffer()));t.point=n,f&&a.lineEnd()},polygonStart:function(){a=e,r=[],u=[],h=!0},polygonEnd:function(){a=m,r=P.merge(r);var e=function(e){for(var t=0,n=u.length,r=e[1],a=0;a<n;++a)for(var i,o=1,s=u[a],l=s.length,c=s[0];o<l;++o)i=s[o],c[1]<=r?i[1]>r&&0<Ce(c,i,e)&&++t:i[1]<=r&&Ce(c,i,e)<0&&--t,c=i;return 0!==t}([b,T]),t=h&&e,n=r.length;(t||n)&&(a.polygonStart(),t&&(a.lineStart(),y(null,null,1,a),a.lineEnd()),n&&ur(r,k,e,y,a),a.polygonEnd()),r=u=i=null}};function y(e,t,n,r){var a=0,i=0;if(null==e||(a=M(e,n))!==(i=M(t,n))||A(e,t)<0^0<n)for(;r.point(0===a||3===a?b:w,1<a?T:_),(a=(a+n+4)%4)!==i;);else r.point(t[0],t[1])}function v(e,t){return b<=e&&e<=w&&_<=t&&t<=T}function n(e,t){v(e,t)&&a.point(e,t)}function x(e,t){var n,r=v(e=Math.max(-br,Math.min(br,e)),t=Math.max(-br,Math.min(br,t)));u&&i.push([e,t]),p?(o=e,s=t,p=!1,(l=r)&&(a.lineStart(),a.point(e,t))):r&&f?a.point(e,t):g(n={a:{x:c,y:d},b:{x:e,y:t}})?(f||(a.lineStart(),a.point(n.a.x,n.a.y)),a.point(n.b.x,n.b.y),r||a.lineEnd(),h=!1):r&&(a.lineStart(),a.point(e,t),h=!1),c=e,d=t,f=r}return t};function M(e,t){return D(e[0]-b)<_e?0<t?0:3:D(e[0]-w)<_e?0<t?2:1:D(e[1]-_)<_e?0<t?1:0:0<t?3:2}function k(e,t){return A(e.x,t.x)}function A(e,t){var n=M(e,1),r=M(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function wr(e){var t=0,n=Te/3,r=Gr(e),e=r(t,n);return e.parallels=function(e){return arguments.length?r(t=e[0]*Te/180,n=e[1]*Te/180):[t/Te*180,n/Te*180]},e}function Tr(e,t){var e=Math.sin(e),n=(e+Math.sin(t))/2,r=1+e*(2*n-e),a=Math.sqrt(r)/n;function i(e,t){t=Math.sqrt(r-2*n*Math.sin(t))/n;return[t*Math.sin(e*=n),a-t*Math.cos(e)]}return i.invert=function(e,t){t=a-t;return[Math.atan2(e,t)/n,Oe((r-(e*e+t*t)*n*n)/(2*n))]},i}P.geo.clipExtent=function(){var t,n,r,a,i,o,s={stream:function(e){return i&&(i.valid=!1),(i=o(e)).valid=!0,i},extent:function(e){return arguments.length?(o=_r(t=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),i&&(i.valid=!1,i=null),s):[[t,n],[r,a]]}};return s.extent([[0,0],[960,500]])},(P.geo.conicEqualArea=function(){return wr(Tr)}).raw=Tr,P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},P.geo.albersUsa=function(){var n,a,i,o,s=P.geo.albers(),l=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){n=[e,t]}};function d(e){var t=e[0],e=e[1];return n=null,a(t,e),n||(i(t,e),n)||o(t,e),n}return d.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,t=(e[1]-n[1])/t;return(.12<=t&&t<.234&&-.425<=r&&r<-.214?l:.166<=t&&t<.234&&-.214<=r&&r<-.115?c:s).invert(e)},d.stream=function(e){var n=s.stream(e),r=l.stream(e),a=c.stream(e);return{point:function(e,t){n.point(e,t),r.point(e,t),a.point(e,t)},sphere:function(){n.sphere(),r.sphere(),a.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),a.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),a.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),a.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),a.polygonEnd()}}},d.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),c.precision(e),d):s.precision()},d.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),c.scale(e),d.translate(s.translate())):s.scale()},d.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),n=+e[0],r=+e[1];return a=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(u).point,i=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+_e,r+.12*t+_e],[n-.214*t-_e,r+.234*t-_e]]).stream(u).point,o=c.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+_e,r+.166*t+_e],[n-.115*t-_e,r+.234*t-_e]]).stream(u).point,d},d.scale(1070)};var Mr,kr,Ar,Sr,Er,Lr,Cr={point:E,lineStart:E,lineEnd:E,polygonStart:function(){kr=0,Cr.lineStart=Dr},polygonEnd:function(){Cr.lineStart=Cr.lineEnd=Cr.point=E,Mr+=D(kr/2)}};function Dr(){var n,r,a,i;function o(e,t){kr+=i*e-a*t,a=e,i=t}Cr.point=function(e,t){Cr.point=o,n=a=e,r=i=t},Cr.lineEnd=function(){o(n,r)}}var Or={point:function(e,t){e<Ar&&(Ar=e);Er<e&&(Er=e);t<Sr&&(Sr=t);Lr<t&&(Lr=t)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Pr(){var n=Ir(4.5),r=[],a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(e){return n=Ir(e),a},result:function(){if(r.length){var e=r.join("");return r=[],e}}};function e(e,t){r.push("M",e,",",t,n)}function t(e,t){r.push("M",e,",",t),a.point=i}function i(e,t){r.push("L",e,",",t)}function o(){a.point=e}function s(){r.push("Z")}return a}function Ir(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Rr,Nr={point:zr,lineStart:Fr,lineEnd:jr,polygonStart:function(){Nr.lineStart=Hr},polygonEnd:function(){Nr.point=zr,Nr.lineStart=Fr,Nr.lineEnd=jr}};function zr(e,t){An+=e,Sn+=t,++En}function Fr(){var a,i;function n(e,t){var n=e-a,r=t-i,r=Math.sqrt(n*n+r*r);Ln+=r*(a+e)/2,Cn+=r*(i+t)/2,Dn+=r,zr(a=e,i=t)}Nr.point=function(e,t){Nr.point=n,zr(a=e,i=t)}}function jr(){Nr.point=zr}function Hr(){var n,r,a,i;function o(e,t){var n=e-a,r=t-i,r=Math.sqrt(n*n+r*r);Ln+=r*(a+e)/2,Cn+=r*(i+t)/2,Dn+=r,On+=(r=i*e-a*t)*(a+e),Pn+=r*(i+t),In+=3*r,zr(a=e,i=t)}Nr.point=function(e,t){Nr.point=o,zr(n=a=e,r=i=t)},Nr.lineEnd=function(){o(n,r)}}function Br(n){var r=4.5,a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(e){return r=e,a},result:E};function e(e,t){n.moveTo(e+r,t),n.arc(e,t,r,0,Me)}function t(e,t){n.moveTo(e,t),a.point=i}function i(e,t){n.lineTo(e,t)}function o(){a.point=e}function s(){n.closePath()}return a}function qr(S){var E=.5,L=Math.cos(30*Se),_=16;function t(e){return(_?r:n)(e)}function n(n){return Yr(n,function(e,t){e=S(e,t),n.point(e[0],e[1])})}function r(r){var n,a,i,o,s,l,c,u,d,f,p,h,m={point:e,lineStart:t,lineEnd:y,polygonStart:function(){r.polygonStart(),m.lineStart=v},polygonEnd:function(){r.polygonEnd(),m.lineStart=t}};function e(e,t){e=S(e,t),r.point(e[0],e[1])}function t(){u=NaN,m.point=g,r.lineStart()}function g(e,t){var n=Fn([e,t]),t=S(e,t);C(u,d,c,f,p,h,u=t[0],d=t[1],c=e,f=n[0],p=n[1],h=n[2],_,r),r.point(u,d)}function y(){m.point=e,r.lineEnd()}function v(){t(),m.point=x,m.lineEnd=b}function x(e,t){g(n=e,t),a=u,i=d,o=f,s=p,l=h,m.point=g}function b(){C(u,d,c,f,p,h,a,i,n,o,s,l,_,r),m.lineEnd=y,y()}return m}function C(e,t,n,r,a,i,o,s,l,c,u,d,f,p){var h,m,g,y,v,x,b,_,w,T,M=o-e,k=s-t,A=M*M+k*k;4*E<A&&f--&&(h=r+c,m=a+u,g=i+d,y=Math.sqrt(h*h+m*m+g*g),w=Math.asin(g/=y),v=D(D(g)-1)<_e||D(n-l)<_e?(n+l)/2:Math.atan2(m,h),x=(T=S(v,w))[0],b=T[1],(E<(T=k*(_=x-e)-M*(w=b-t))*T/A||.3<D((M*_+k*w)/A-.5)||r*c+a*u+i*d<L)&&(C(e,t,n,r,a,i,x,b,v,h/=y,m/=y,g,f,p),p.point(x,b),C(x,b,v,h,m,g,o,s,l,c,u,d,f,p)))}return t.precision=function(e){return arguments.length?(_=0<(E=e*e)&&16,t):Math.sqrt(E)},t}function Ur(e){this.stream=e}function Yr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Vr(e){return Gr(function(){return e})()}function Gr(e){var n,t,r,a,i,o,s=qr(function(e,t){return[(e=n(e,t))[0]*l+a,i-e[1]*l]}),l=150,c=480,u=250,d=0,f=0,p=0,h=0,m=0,g=yr,y=C,v=null,x=null;function b(e){return[(e=r(e[0]*Se,e[1]*Se))[0]*l+a,i-e[1]*l]}function _(e){return(e=r.invert((e[0]-a)/l,(i-e[1])/l))&&[e[0]*Ee,e[1]*Ee]}function w(){r=lr(t=Xr(p,h,m),n);var e=n(d,f);return a=c-e[0]*l,i=u+e[1]*l,T()}function T(){return o&&(o.valid=!1,o=null),b}return b.stream=function(e){return o&&(o.valid=!1),(o=Wr(g(t,s(y(e))))).valid=!0,o},b.clipAngle=function(e){return arguments.length?(g=null==e?(v=e,yr):vr((v=+e)*Se),T()):v},b.clipExtent=function(e){return arguments.length?(y=(x=e)?_r(e[0][0],e[0][1],e[1][0],e[1][1]):C,T()):x},b.scale=function(e){return arguments.length?(l=+e,w()):l},b.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],w()):[c,u]},b.center=function(e){return arguments.length?(d=e[0]%360*Se,f=e[1]%360*Se,w()):[d*Ee,f*Ee]},b.rotate=function(e){return arguments.length?(p=e[0]%360*Se,h=e[1]%360*Se,m=2<e.length?e[2]%360*Se:0,w()):[p*Ee,h*Ee,m*Ee]},P.rebind(b,s,"precision"),function(){return n=e.apply(this,arguments),b.invert=n.invert&&_,w()}}function Wr(n){return Yr(n,function(e,t){n.point(e*Se,t*Se)})}function Zr(e,t){return[e,t]}function $r(e,t){return[Te<e?e-Me:e<-Te?e+Me:e,t]}function Xr(e,t,n){return e?t||n?lr(Kr(e),Qr(t,n)):Kr(e):t||n?Qr(t,n):$r}function Jr(n){return function(e,t){return[Te<(e+=n)?e-Me:e<-Te?e+Me:e,t]}}function Kr(e){var t=Jr(e);return t.invert=Jr(-e),t}function Qr(e,t){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(t),s=Math.sin(t);function n(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*a+r*i;return[Math.atan2(e*o-t*s,r*a-n*i),Oe(t*o+e*s)]}return n.invert=function(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*o-e*s;return[Math.atan2(e*o+n*s,r*a+t*i),Oe(t*a-r*i)]},n}function ea(s,l){var c=Math.cos(s),u=Math.sin(s);return function(e,t,n,r){var a=n*l;null!=e?(e=ta(c,e),t=ta(c,t),(0<n?e<t:t<e)&&(e+=n*Me)):(e=s+n*Me,t=s-.5*a);for(var i,o=e;0<n?t<o:o<t;o-=a)r.point((i=Yn([c,-u*Math.cos(o),-u*Math.sin(o)]))[0],i[1])}}function ta(e,t){t=Fn(t);t[0]-=e,Un(t);e=De(-t[1]);return((-t[2]<0?-e:e)+2*Math.PI-_e)%(2*Math.PI)}function na(e,t,n){var r=P.range(e,t-_e,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function ra(e,t,n){var r=P.range(e,t-_e,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function aa(e){return e.source}function ia(e){return e.target}P.geo.path=function(){var r,t,a,n,i,o=4.5;function s(e){return e&&("function"==typeof o&&n.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=a(n)),P.geo.stream(e,i)),n.result()}function l(){return i=null,s}return s.area=function(e){return Mr=0,P.geo.stream(e,a(Cr)),Mr},s.centroid=function(e){return An=Sn=En=Ln=Cn=Dn=On=Pn=In=0,P.geo.stream(e,a(Nr)),In?[On/In,Pn/In]:Dn?[Ln/Dn,Cn/Dn]:En?[An/En,Sn/En]:[NaN,NaN]},s.bounds=function(e){return Er=Lr=-(Ar=Sr=1/0),P.geo.stream(e,a(Or)),[[Ar,Sr],[Er,Lr]]},s.projection=function(e){return arguments.length?(a=(r=e)?e.stream||(n=e,t=qr(function(e,t){return n([e*Ee,t*Ee])}),function(e){return Wr(t(e))}):C,l()):r;var n,t},s.context=function(e){return arguments.length?(n=null==(t=e)?new Pr:new Br(e),"function"!=typeof o&&n.pointRadius(o),l()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(n.pointRadius(+e),+e),s):o},s.projection(P.geo.albersUsa()).context(null)},P.geo.transform=function(r){return{stream:function(e){var t,n=new Ur(e);for(t in r)n[t]=r[t];return n}}},Ur.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},P.geo.projection=Vr,P.geo.projectionMutator=Gr,(P.geo.equirectangular=function(){return Vr(Zr)}).raw=Zr.invert=Zr,P.geo.rotation=function(t){function e(e){return(e=t(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e}return t=Xr(t[0]%360*Se,t[1]*Se,2<t.length?t[2]*Se:0),e.invert=function(e){return(e=t.invert(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e},e},$r.invert=Zr,P.geo.circle=function(){var t,a,i=[0,0],n=6;function r(){var e="function"==typeof i?i.apply(this,arguments):i,n=Xr(-e[0]*Se,-e[1]*Se,0).invert,r=[];return a(null,null,1,{point:function(e,t){r.push(e=n(e,t)),e[0]*=Ee,e[1]*=Ee}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(e){return arguments.length?(i=e,r):i},r.angle=function(e){return arguments.length?(a=ea((t=+e)*Se,n*Se),r):t},r.precision=function(e){return arguments.length?(a=ea(t*Se,(n=+e)*Se),r):n},r.angle(90)},P.geo.distance=function(e,t){var n=(t[0]-e[0])*Se,r=e[1]*Se,a=t[1]*Se,i=Math.sin(n),e=Math.cos(n),t=Math.sin(r),n=Math.cos(r),r=Math.sin(a),a=Math.cos(a);return Math.atan2(Math.sqrt((i=a*i)*i+(i=n*r-t*a*e)*i),t*r+n*a*e)},P.geo.graticule=function(){var t,n,r,a,i,o,s,l,c,u,d,f,p=10,h=p,m=90,g=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:e()}}function e(){return P.range(Math.ceil(a/m)*m,r,m).map(d).concat(P.range(Math.ceil(l/g)*g,s,g).map(f)).concat(P.range(Math.ceil(n/p)*p,t,p).filter(function(e){return D(e%m)>_e}).map(c)).concat(P.range(Math.ceil(o/h)*h,i,h).filter(function(e){return D(e%g)>_e}).map(u))}return v.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},v.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(s).slice(1),d(r).reverse().slice(1),f(l).reverse().slice(1))]}},v.extent=function(e){return arguments.length?v.majorExtent(e).minorExtent(e):v.minorExtent()},v.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<a&&(e=a,a=r,r=e),s<l&&(e=l,l=s,s=e),v.precision(y)):[[a,l],[r,s]]},v.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],t<n&&(e=n,n=t,t=e),i<o&&(e=o,o=i,i=e),v.precision(y)):[[n,o],[t,i]]},v.step=function(e){return arguments.length?v.majorStep(e).minorStep(e):v.minorStep()},v.majorStep=function(e){return arguments.length?(m=+e[0],g=+e[1],v):[m,g]},v.minorStep=function(e){return arguments.length?(p=+e[0],h=+e[1],v):[p,h]},v.precision=function(e){return arguments.length?(y=+e,c=na(o,i,90),u=ra(n,t,y),d=na(l,s,90),f=ra(a,r,y),v):y},v.majorExtent([[-180,-90+_e],[180,90-_e]]).minorExtent([[-180,-80-_e],[180,80+_e]])},P.geo.greatArc=function(){var t,n,r=aa,a=ia;function i(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||a.apply(this,arguments)]}}return i.distance=function(){return P.geo.distance(t||r.apply(this,arguments),n||a.apply(this,arguments))},i.source=function(e){return arguments.length?(t="function"==typeof(r=e)?null:e,i):r},i.target=function(e){return arguments.length?(n="function"==typeof(a=e)?null:e,i):a},i.precision=function(){return arguments.length?i:0},i},P.geo.interpolate=function(e,t){return n=e[0]*Se,r=e[1]*Se,a=t[0]*Se,i=t[1]*Se,e=Math.cos(r),o=Math.sin(r),t=Math.cos(i),s=Math.sin(i),l=e*Math.cos(n),c=e*Math.sin(n),u=t*Math.cos(a),d=t*Math.sin(a),f=2*Math.asin(Math.sqrt(Ie(i-r)+e*t*Ie(a-n))),p=1/Math.sin(f),(a=f?function(e){var t=Math.sin(e*=f)*p,n=Math.sin(f-e)*p,r=n*l+t*u,e=n*c+t*d,t=n*o+t*s;return[Math.atan2(e,r)*Ee,Math.atan2(t,Math.sqrt(r*r+e*e))*Ee]}:function(){return[n*Ee,r*Ee]}).distance=f,a;var n,r,a,i,o,s,l,c,u,d,f,p},P.geo.length=function(e){return Rr=0,P.geo.stream(e,oa),Rr};var oa={sphere:E,point:E,lineStart:function(){var i,o,s;function n(e,t){var n=Math.sin(t*=Se),r=Math.cos(t),a=D((e*=Se)-i),t=Math.cos(a);Rr+=Math.atan2(Math.sqrt((a=r*Math.sin(a))*a+(a=s*n-o*r*t)*a),o*n+s*r*t),i=e,o=n,s=r}oa.point=function(e,t){i=e*Se,o=Math.sin(t*=Se),s=Math.cos(t),oa.point=n},oa.lineEnd=function(){oa.point=oa.lineEnd=E}},lineEnd:E,polygonStart:E,polygonEnd:E};function sa(a,i){function e(e,t){var n=Math.cos(e),r=Math.cos(t),n=a(n*r);return[n*r*Math.sin(e),n*Math.sin(t)]}return e.invert=function(e,t){var n=Math.sqrt(e*e+t*t),r=i(n),a=Math.sin(r),r=Math.cos(r);return[Math.atan2(e*a,n*r),Math.asin(n&&t*a/n)]},e}var la=sa(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(P.geo.azimuthalEqualArea=function(){return Vr(la)}).raw=la;var ca=sa(function(e){e=Math.acos(e);return e&&e/Math.sin(e)},C);function ua(e,t){function n(e){return Math.tan(Te/4+e/2)}var r=Math.cos(e),a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),i=r*Math.pow(n(e),a)/a;return a?(o.invert=function(e,t){var n=i-t,t=Le(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(i/t,1/a))-Ae]},o):pa;function o(e,t){0<i?t<-Ae+_e&&(t=-Ae+_e):Ae-_e<t&&(t=Ae-_e);t=i/Math.pow(n(t),a);return[t*Math.sin(a*e),i-t*Math.cos(a*e)]}}function da(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;return D(r)<_e?Zr:(i.invert=function(e,t){t=a-t;return[Math.atan2(e,t)/r,a-Le(r)*Math.sqrt(e*e+t*t)]},i);function i(e,t){t=a-t;return[t*Math.sin(r*e),a-t*Math.cos(r*e)]}}(P.geo.azimuthalEquidistant=function(){return Vr(ca)}).raw=ca,(P.geo.conicConformal=function(){return wr(ua)}).raw=ua,(P.geo.conicEquidistant=function(){return wr(da)}).raw=da;var fa=sa(function(e){return 1/e},Math.atan);function pa(e,t){return[e,Math.log(Math.tan(Te/4+t/2))]}function ha(e){var a,i=Vr(e),o=i.scale,s=i.translate,l=i.clipExtent;return i.scale=function(){var e=o.apply(i,arguments);return e===i?a?i.clipExtent(null):i:e},i.translate=function(){var e=s.apply(i,arguments);return e===i?a?i.clipExtent(null):i:e},i.clipExtent=function(e){var t,n,r=l.apply(i,arguments);return r===i?(a=null==e)&&(t=Te*o(),n=s(),l([[n[0]-t,n[1]-t],[n[0]+t,n[1]+t]])):a&&(r=null),r},i.clipExtent(null)}(P.geo.gnomonic=function(){return Vr(fa)}).raw=fa,pa.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ae]},(P.geo.mercator=function(){return ha(pa)}).raw=pa;var ma=sa(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Vr(ma)}).raw=ma;var ga=sa(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function ya(e,t){return[Math.log(Math.tan(Te/4+t/2)),-e]}function va(e){return e[0]}function xa(e){return e[1]}function ba(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;a++){for(;1<r&&Ce(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function _a(e,t){return e[0]-t[0]||e[1]-t[1]}(P.geo.stereographic=function(){return Vr(ga)}).raw=ga,ya.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ae]},(P.geo.transverseMercator=function(){var e=ha(ya),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ya,P.geom={},P.geom.hull=function(e){var f=va,p=xa;return arguments.length?t(e):(t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(p=e,t):p},t);function t(e){if(e.length<3)return[];for(var t=ut(f),n=ut(p),r=e.length,a=[],i=[],o=0;o<r;o++)a.push([+t.call(this,e[o],o),+n.call(this,e[o],o),o]);for(a.sort(_a),o=0;o<r;o++)i.push([a[o][0],-a[o][1]]);var s=ba(a),l=ba(i),c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],d=[];for(o=s.length-1;0<=o;--o)d.push(e[a[s[o]][2]]);for(o=+c;o<l.length-u;++o)d.push(e[a[l[o]][2]]);return d}},P.geom.polygon=function(e){return H(e,wa),e};var wa=P.geom.polygon.prototype=[];function Ta(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ma(e,t,n,r){var a=e[0],i=n[0],o=t[0]-a,s=r[0]-i,e=e[1],n=n[1],t=t[1]-e,r=r[1]-n,s=(s*(e-n)-r*(a-i))/(r*o-s*t);return[a+s*o,e+s*t]}function ka(e){var t=e[0],e=e[e.length-1];return!(t[0]-e[0]||t[1]-e[1])}wa.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},wa.centroid=function(e){var t,n,r=-1,a=this.length,i=0,o=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[i*e,o*e]},wa.clip=function(e){for(var t,n,r,a,i,o,s=ka(e),l=-1,c=this.length-ka(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,a=this[l],i=t[(r=t.length-s)-1],n=-1;++n<r;)Ta(o=t[n],u,a)?(Ta(i,u,a)||e.push(Ma(i,o,u,a)),e.push(o)):Ta(i,u,a)&&e.push(Ma(i,o,u,a)),i=o;s&&e.push(e[0]),u=a}return e};var Aa,Sa,Ea,La,Ca,Da=[],Oa=[];function Pa(){Xa(this),this.edge=this.site=this.circle=null}function Ia(e){var t=Da.pop()||new Pa;return t.site=e,t}function Ra(e){Ua(e),Ea.remove(e),Da.push(e),Xa(e)}function Na(e){for(var t,n,r,a,i=e.x,o=e.y,s=Ea._;s;)if(r=za(s,o)-i,_e<r)s=s.L;else{if(a=i-function(e,t){var n=e.N;if(n)return za(n,t);e=e.site;return e.y===t?e.x:1/0}(s,o),!(_e<a)){-_e<r?(t=s.P,n=s):-_e<a?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l,c,u,d,f,p,h,m,g,y,v=Ia(e);if(Ea.insert(t,v),t||n){if(t===n)return Ua(t),n=Ia(t.site),Ea.insert(v,n),v.edge=n.edge=Ga(t.site,v.site),qa(t),void qa(n);n?(Ua(t),Ua(n),c=(l=t.site).x,y=l.y,u=e.x-c,h=e.y-y,f=(d=n.site).x-c,p=d.y-y,Wa(n.edge,l,d,y={x:(p*(m=u*u+h*h)-h*(g=f*f+p*p))/(h=2*(u*p-h*f))+c,y:(u*g-f*m)/h+y}),v.edge=Ga(l,e,null,y),n.edge=Ga(e,d,null,y),qa(t),qa(n)):v.edge=Ga(t.site,v.site)}}function za(e,t){var n=e.site,r=n.x,a=n.y,i=a-t;if(!i)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,e=l-t;if(!e)return s;o=s-r,n=1/i-1/e,t=o/e;return n?(-t+Math.sqrt(t*t-2*n*(o*o/(-2*e)-l+e/2+a-i/2)))/n+r:(r+s)/2}function Fa(e){this.site=e,this.edges=[]}function ja(e){for(var t,n,r,a,i,o,s,l,c,u=e[0][0],d=e[1][0],f=e[0][1],p=e[1][1],h=Sa,m=h.length;m--;)if((a=h[m])&&a.prepare())for(s=(o=a.edges).length,i=0;i<s;)n=(c=o[i].end()).x,r=c.y,t=(l=o[++i%s].start()).x,l=l.y,(D(n-t)>_e||D(r-l)>_e)&&(o.splice(i,0,new Za(function(e,t,n){e=new Va(e,null);return e.a=t,e.b=n,Aa.push(e),e}(a.site,c,D(n-u)<_e&&_e<p-r?{x:u,y:D(t-u)<_e?l:p}:D(r-p)<_e&&_e<d-n?{x:D(l-p)<_e?t:d,y:p}:D(n-d)<_e&&_e<r-f?{x:d,y:D(t-d)<_e?l:f}:D(r-f)<_e&&_e<n-u?{x:D(l-f)<_e?t:u,y:f}:null),a.site,null)),++s)}function Ha(e,t){return t.angle-e.angle}function Ba(){Xa(this),this.x=this.y=this.arc=this.site=this.cy=null}function qa(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,i=n.site;if(r!==i){var o=a.x,s=a.y,l=r.x-o,c=r.y-s,u=i.x-o,n=2*(l*(t=i.y-s)-c*u);if(!(-we<=n)){var r=l*l+c*c,i=u*u+t*t,c=(t*r-c*i)/n,n=(l*i-u*r)/n,t=n+s,d=Oa.pop()||new Ba;d.arc=e,d.site=a,d.x=c+o,d.y=t+Math.sqrt(c*c+n*n),d.cy=t,e.circle=d;for(var f=null,p=Ca._;p;)if(d.y<p.y||d.y===p.y&&d.x<=p.x){if(!p.L){f=p.P;break}p=p.L}else{if(!p.R){f=p;break}p=p.R}Ca.insert(f,d),f||(La=d)}}}}function Ua(e){var t=e.circle;t&&(t.P||(La=t.N),Ca.remove(t),Oa.push(t),Xa(t),e.circle=null)}function Ya(e){for(var t,n=Aa,r=xr(e[0][0],e[0][1],e[1][0],e[1][1]),a=n.length;a--;)(function(e,t){var n=e.b;if(n)return!0;var r=e.a,a=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,c=e.r,u=l.x,d=l.y,f=c.x,t=c.y,l=(u+f)/2,c=(d+t)/2;if(t===d){if(l<a||i<=l)return;if(f<u){if(r){if(r.y>=s)return}else r={x:l,y:o};n={x:l,y:s}}else{if(r){if(r.y<o)return}else r={x:l,y:s};n={x:l,y:o}}}else if(l=c-(c=(u-f)/(t-d))*l,c<-1||1<c)if(f<u){if(r){if(r.y>=s)return}else r={x:(o-l)/c,y:o};n={x:(s-l)/c,y:s}}else{if(r){if(r.y<o)return}else r={x:(s-l)/c,y:s};n={x:(o-l)/c,y:o}}else if(d<t){if(r){if(r.x>=i)return}else r={x:a,y:c*a+l};n={x:i,y:c*i+l}}else{if(r){if(r.x<a)return}else r={x:i,y:c*i+l};n={x:a,y:c*a+l}}return e.a=r,e.b=n,!0})(t=n[a],e)&&r(t)&&!(D(t.a.x-t.b.x)<_e&&D(t.a.y-t.b.y)<_e)||(t.a=t.b=null,n.splice(a,1))}function Va(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ga(e,t,n,r){var a=new Va(e,t);return Aa.push(a),n&&Wa(a,e,t,n),r&&Wa(a,t,e,r),Sa[e.i].edges.push(new Za(a,e,t)),Sa[t.i].edges.push(new Za(a,t,e)),a}function Wa(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Za(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function $a(){this._=null}function Xa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ja(e,t){var n=t,r=t.R,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ka(e,t){var n=t,r=t.L,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Qa(e){for(;e.L;)e=e.L;return e}function ei(e,t){var n,r,a,i=e.sort(ti).pop();for(Aa=[],Sa=new Array(e.length),Ea=new $a,Ca=new $a;;)if(a=La,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===n&&i.y===r||(Sa[i.i]=new Fa(i),Na(i),n=i.x,r=i.y),i=e.pop();else{if(!a)break;!function(e){var t=e.circle,n=t.x,r=t.cy,a={x:n,y:r},i=e.P,o=e.N,s=[e];Ra(e);for(var l=i;l.circle&&D(n-l.circle.x)<_e&&D(r-l.circle.cy)<_e;)i=l.P,s.unshift(l),Ra(l),l=i;s.unshift(l),Ua(l);for(var c=o;c.circle&&D(n-c.circle.x)<_e&&D(r-c.circle.cy)<_e;)o=c.N,s.push(c),Ra(c),c=o;s.push(c),Ua(c);for(var u=s.length,d=1;d<u;++d)c=s[d],l=s[d-1],Wa(c.edge,l.site,c.site,a);l=s[0],(c=s[u-1]).edge=Ga(l.site,c.site,null,a),qa(l),qa(c)}(a.arc)}t&&(Ya(t),ja(t));t={cells:Sa,edges:Aa};return Ea=Ca=Aa=Sa=null,t}function ti(e,t){return t.y-e.y||t.x-e.x}Fa.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ha),t.length},Za.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},$a.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=Qa(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(Ja(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ka(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(Ka(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ja(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r=e.U,a=e.L,i=e.R,o=a?i?Qa(i):a:i;if(r?r.L===e?r.L=o:r.R=o:this._=o,a&&i?(n=o.C,o.C=e.C,((o.L=a).U=o)!==i?(r=o.U,o.U=e.U,e=o.R,r.L=e,(o.R=i).U=o):(o.U=r,e=(r=o).R)):(n=e.C,e=o),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,Ja(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ka(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Ja(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Ka(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Ja(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Ka(this,r),e=this._;break}}while(t.C=!0,r=(e=r).U,!e.C);e&&(e.C=!1)}}},P.geom.voronoi=function(e){var t=va,n=xa,r=t,a=n,c=ni;return e?i(e):(i.links=function(t){return ei(f(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},i.triangles=function(u){var d=[];return ei(f(u)).cells.forEach(function(e,t){for(var n,r,a=e.site,i=e.edges.sort(Ha),o=-1,s=i.length,l=i[s-1].edge,c=l.l===a?l.r:l.l;++o<s;)n=c,c=(l=i[o].edge).l===a?l.r:l.l,t<n.i&&t<c.i&&(r=c,(a.x-r.x)*(n.y-a.y)-(a.x-n.x)*(r.y-a.y)<0)&&d.push([u[t],u[n.i],u[c.i]])}),d},i.x=function(e){return arguments.length?(r=ut(t=e),i):t},i.y=function(e){return arguments.length?(a=ut(n=e),i):n},i.clipExtent=function(e){return arguments.length?(c=null==e?ni:e,i):c===ni?null:c},i.size=function(e){return arguments.length?i.clipExtent(e&&[[0,0],e]):c===ni?null:c&&c[1]},i);function i(r){var a=new Array(r.length),i=c[0][0],o=c[0][1],s=c[1][0],l=c[1][1];return ei(f(r),c).cells.forEach(function(e,t){var n=e.edges,e=e.site;(a[t]=n.length?n.map(function(e){e=e.start();return[e.x,e.y]}):e.x>=i&&e.x<=s&&e.y>=o&&e.y<=l?[[i,l],[s,l],[s,o],[i,o]]:[]).point=r[t]}),a}function f(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/_e)*_e,y:Math.round(a(e,t)/_e)*_e,i:t}})}};var ni=[[-1e6,-1e6],[1e6,1e6]];function ri(e){return e.x}function ai(e){return e.y}function ii(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function oi(e,t){e=P.rgb(e),t=P.rgb(t);var n=e.r,r=e.g,a=e.b,i=t.r-n,o=t.g-r,s=t.b-a;return function(e){return"#"+rt(Math.round(n+i*e))+rt(Math.round(r+o*e))+rt(Math.round(a+s*e))}}function si(e,t){var n,r={},a={};for(n in e)n in t?r[n]=fi(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function li(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function ci(e,r){var t,n,a,i=ui.lastIndex=di.lastIndex=0,o=-1,s=[],l=[];for(e+="",r+="";(t=ui.exec(e))&&(n=di.exec(r));)(a=n.index)>i&&(a=r.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(t=t[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:li(t,n)})),i=di.lastIndex;return i<r.length&&(a=r.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}P.geom.delaunay=function(e){return P.geom.voronoi().triangles(e)},P.geom.quadtree=function(e,v,x,b,w){var T,M=va,k=xa;return(T=arguments.length)?(M=ri,k=ai,3===T&&(w=x,b=v,x=v=0),t(e)):(t.x=function(e){return arguments.length?(M=e,t):M},t.y=function(e){return arguments.length?(k=e,t):k},t.extent=function(e){return arguments.length?(null==e?v=x=b=w=null:(v=+e[0][0],x=+e[0][1],b=+e[1][0],w=+e[1][1]),t):null==v?null:[[v,x],[b,w]]},t.size=function(e){return arguments.length?(null==e?v=x=b=w=null:(v=x=0,b=+e[0],w=+e[1]),t):null==v?null:[b-v,w-x]},t);function t(e){var t,n,r,a,i,o,s,l,c,u=ut(M),d=ut(k);if(null!=v)o=v,s=x,l=b,c=w;else if(l=c=-(o=s=1/0),n=[],r=[],i=e.length,T)for(a=0;a<i;++a)(t=e[a]).x<o&&(o=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>c&&(c=t.y),n.push(t.x),r.push(t.y);else for(a=0;a<i;++a){var f=+u(t=e[a],a),p=+d(t,a);f<o&&(o=f),p<s&&(s=p),l<f&&(l=f),c<p&&(c=p),n.push(f),r.push(p)}var h=l-o,m=c-s;function g(e,t,n,r,a,i,o,s){var l,c,u;isNaN(n)||isNaN(r)||(e.leaf?(l=e.x,c=e.y,null!=l?(D(l-n)+D(c-r)<.01||(u=e.point,e.x=e.y=e.point=null,y(e,u,l,c,a,i,o,s)),y(e,t,n,r,a,i,o,s)):(e.x=n,e.y=r,e.point=t)):y(e,t,n,r,a,i,o,s))}function y(e,t,n,r,a,i,o,s){var l=.5*(a+o),c=.5*(i+s),u=l<=n,d=c<=r,f=d<<1|u;e.leaf=!1,u?a=l:o=l,d?i=c:s=c,g(e=e.nodes[f]||(e.nodes[f]=ii()),t,n,r,a,i,o,s)}m<h?c=s+h:l=o+m;var _=ii();if(_.add=function(e){g(_,e,+u(e,++a),+d(e,a),o,s,l,c)},_.visit=function(e){!function e(t,n,r,a,i,o){{var s,l;t(n,r,a,i,o)||(s=.5*(r+i),l=.5*(a+o),(n=n.nodes)[0]&&e(t,n[0],r,a,s,l),n[1]&&e(t,n[1],s,a,i,l),n[2]&&e(t,n[2],r,l,s,o),n[3]&&e(t,n[3],s,l,i,o))}}(e,_,o,s,l,c)},_.find=function(e){return p=e[0],h=e[1],b=1/0,function e(t,n,r,a,i){if(!(y<n||v<r||a<m||i<g)){var o,s;!(o=t.point)||(s=(s=p-t.x)*s+(s=h-t.y)*s)<b&&(s=Math.sqrt(b=s),m=p-s,g=h-s,y=p+s,v=h+s,x=o);for(var l=t.nodes,c=.5*(n+a),u=.5*(r+i),d=(u<=h)<<1|c<=p,f=d+4;d<f;++d)if(t=l[3&d])switch(3&d){case 0:e(t,n,r,c,u);break;case 1:e(t,c,r,a,u);break;case 2:e(t,n,u,c,i);break;case 3:e(t,c,u,a,i)}}}(_,m=o,g=s,y=l,v=c),x;var p,h,m,g,y,v,x,b},a=-1,null==v){for(;++a<i;)g(_,e[a],n[a],r[a],o,s,l,c);--a}else e.forEach(_.add);return n=r=e=t=null,_}},P.interpolateRgb=oi,P.interpolateObject=si,P.interpolateNumber=li,P.interpolateString=ci;var ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,di=new RegExp(ui.source,"g");function fi(e,t){for(var n,r=P.interpolators.length;0<=--r&&!(n=P.interpolators[r](e,t)););return n}function pi(e,t){for(var n=[],r=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),s=0;s<o;++s)n.push(fi(e[s],t[s]));for(;s<a;++s)r[s]=e[s];for(;s<i;++s)r[s]=t[s];return function(e){for(s=0;s<o;++s)r[s]=n[s](e);return r}}P.interpolate=fi,P.interpolators=[function(e,t){var n=typeof t;return("string"==n?ct.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?oi:ci:t instanceof je?oi:Array.isArray(t)?pi:"object"==n&&isNaN(t)?si:li)(e,t)}],P.interpolateArray=pi;function hi(){return C}var mi=P.map({linear:hi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return xi},cubic:function(){return bi},sin:function(){return wi},exp:function(){return Ti},circle:function(){return Mi},elastic:function(t,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/Me*Math.asin(1/t):(t=1,n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*Me/n)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ki}}),gi=P.map({in:C,out:yi,"in-out":vi,"out-in":function(e){return vi(yi(e))}});function yi(t){return function(e){return 1-t(1-e)}}function vi(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function xi(e){return e*e}function bi(e){return e*e*e}function _i(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function wi(e){return 1-Math.cos(e*Ae)}function Ti(e){return Math.pow(2,10*(e-1))}function Mi(e){return 1-Math.sqrt(1-e*e)}function ki(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ai(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Si(e){var t,n,r,a=[e.a,e.b],i=[e.c,e.d],o=Li(a),s=Ei(a,i),t=Li(((t=i)[0]+=(r=-s)*(n=a)[0],t[1]+=r*n[1],t))||0;a[0]*i[1]<i[0]*a[1]&&(a[0]*=-1,a[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(a[1],a[0]):Math.atan2(-i[0],i[1]))*Ee,this.translate=[e.e,e.f],this.scale=[o,t],this.skew=t?Math.atan2(s,t)*Ee:0}function Ei(e,t){return e[0]*t[0]+e[1]*t[1]}function Li(e){var t=Math.sqrt(Ei(e,e));return t&&(e[0]/=t,e[1]/=t),t}P.ease=function(e){var t,n=e.indexOf("-"),r=0<=n?e.slice(0,n):e,n=0<=n?e.slice(n+1):"in",r=mi.get(r)||hi,n=gi.get(n)||C;return t=n(r.apply(null,a.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},P.interpolateHcl=function(e,t){e=P.hcl(e),t=P.hcl(t);var n=e.h,r=e.c,a=e.l,i=t.h-n,o=t.c-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.c:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Ue(n+i*e,r+o*e,a+s*e)+""}},P.interpolateHsl=function(e,t){e=P.hsl(e),t=P.hsl(t);var n=e.h,r=e.s,a=e.l,i=t.h-n,o=t.s-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.s:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Be(n+i*e,r+o*e,a+s*e)+""}},P.interpolateLab=function(e,t){e=P.lab(e),t=P.lab(t);var n=e.l,r=e.a,a=e.b,i=t.l-n,o=t.a-r,s=t.b-a;return function(e){return $e(n+i*e,r+o*e,a+s*e)+""}},P.interpolateRound=Ai,P.transform=function(e){var n=I.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(e){var t;return null!=e&&(n.setAttribute("transform",e),t=n.transform.baseVal.consolidate()),new Si(t?t.matrix:Ci)})(e)},Si.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ci={a:1,b:0,c:0,d:1,e:0,f:0};function Di(e){return e.length?e.pop()+",":""}function Oi(e,t){var n,r,a,i,o,s=[],l=[];return e=P.transform(e),t=P.transform(t),r=e.translate,a=t.translate,o=s,i=l,r[0]!==a[0]||r[1]!==a[1]?(n=o.push("translate(",null,",",null,")"),i.push({i:n-4,x:li(r[0],a[0])},{i:n-2,x:li(r[1],a[1])})):(a[0]||a[1])&&o.push("translate("+a+")"),i=e.rotate,n=t.rotate,r=s,o=l,i!==n?(180<i-n?n+=360:180<n-i&&(i+=360),o.push({i:r.push(Di(r)+"rotate(",null,")")-2,x:li(i,n)})):n&&r.push(Di(r)+"rotate("+n+")"),a=e.skew,o=t.skew,i=s,r=l,a!==o?r.push({i:i.push(Di(i)+"skewX(",null,")")-2,x:li(a,o)}):o&&i.push(Di(i)+"skewX("+o+")"),n=e.scale,r=t.scale,a=s,i=l,n[0]!==r[0]||n[1]!==r[1]?(o=a.push(Di(a)+"scale(",null,",",null,")"),i.push({i:o-4,x:li(n[0],r[0])},{i:o-2,x:li(n[1],r[1])})):1===r[0]&&1===r[1]||a.push(Di(a)+"scale("+r+")"),e=t=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}function Pi(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Ii(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Ri(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function Ni(e){e.fixed|=2}function zi(e){e.fixed&=-7}function Fi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ji(e){e.fixed&=-5}P.interpolateTransform=Oi,P.layout={},P.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(function(e){var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Ri(e),r=Ri(t),a=n.pop(),i=r.pop(),o=null;for(;a===i;)o=a,a=n.pop(),i=r.pop();return o}(t,n),a=[t];for(;t!==r;)t=t.parent,a.push(t);var i=a.length;for(;n!==r;)a.splice(i,0,n),n=n.parent;return a}(e[n]));return t}},P.layout.chord=function(){var g,y,v,x,b,_,w,t={},T=0;function e(){var e,t,n,r,a,i={},o=[],s=P.range(x),l=[];for(g=[],y=[],e=0,r=-1;++r<x;){for(t=0,a=-1;++a<x;)t+=v[r][a];o.push(t),l.push(P.range(x)),e+=t}for(b&&s.sort(function(e,t){return b(o[e],o[t])}),_&&l.forEach(function(e,n){e.sort(function(e,t){return _(v[n][e],v[n][t])})}),e=(Me-T*x)/e,t=0,r=-1;++r<x;){for(n=t,a=-1;++a<x;){var c=s[r],u=l[c][a],d=v[c][u],f=t,p=t+=d*e;i[c+"-"+u]={index:c,subindex:u,startAngle:f,endAngle:p,value:d}}y[c]={index:c,startAngle:n,endAngle:t,value:o[c]},t+=T}for(r=-1;++r<x;)for(a=r-1;++a<x;){var h=i[r+"-"+a],m=i[a+"-"+r];(h.value||m.value)&&g.push(h.value<m.value?{source:m,target:h}:{source:h,target:m})}w&&M()}function M(){g.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(x=(v=e)&&v.length,g=y=null,t):v},t.padding=function(e){return arguments.length?(T=e,g=y=null,t):T},t.sortGroups=function(e){return arguments.length?(b=e,g=y=null,t):b},t.sortSubgroups=function(e){return arguments.length?(_=e,g=null,t):_},t.sortChords=function(e){return arguments.length?(w=e,g&&M(),t):w},t.chords=function(){return g||e(),g},t.groups=function(){return y||e(),y},t},P.layout.force=function(){var d,e,f,p,h,m,a={},g=P.dispatch("start","tick","end"),y=[1,1],v=.9,i=Hi,o=Bi,x=-30,b=qi,_=.1,w=.64,T=[],M=[];function t(e){e.px=P.event.x,e.py=P.event.y,a.resume()}return a.tick=function(){if((f*=.99)<.005)return d=null,g.end({type:"end",alpha:f=0}),!0;for(var e,t,n,r,a,i,o,s,l=T.length,c=M.length,u=0;u<c;++u)n=(t=M[u]).source,(a=(o=(r=t.target).x-n.x)*o+(s=r.y-n.y)*s)&&(o*=a=f*h[u]*((a=Math.sqrt(a))-p[u])/a,s*=a,r.x-=o*(i=n.weight+r.weight?n.weight/(n.weight+r.weight):.5),r.y-=s*i,n.x+=o*(i=1-i),n.y+=s*i);if((i=f*_)&&(o=y[0]/2,s=y[1]/2,u=-1,i))for(;++u<l;)(t=T[u]).x+=(o-t.x)*i,t.y+=(s-t.y)*i;if(x)for(!function e(t,n,r){var a=0,i=0;t.charge=0;if(!t.leaf)for(var o,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(o=s[c])&&(e(o,n,r),t.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);{var u;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),u=n*r[t.point.index],t.charge+=t.pointCharge=u,a+=u*t.point.x,i+=u*t.point.y)}t.cx=a/t.charge;t.cy=i/t.charge}(e=P.geom.quadtree(T),f,m),u=-1;++u<l;)(t=T[u]).fixed||e.visit(function(s){return function(e,t,n,r){if(e.point!==s){var a,i=e.cx-s.x,o=e.cy-s.y,r=r-t,t=i*i+o*o;if(r*r/w<t)return t<b&&(a=e.charge/t,s.px-=i*a,s.py-=o*a),!0;e.point&&t&&t<b&&(a=e.pointCharge/t,s.px-=i*a,s.py-=o*a)}return!e.charge}}(t));for(u=-1;++u<l;)(t=T[u]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*v,t.y-=(t.py-(t.py=t.y))*v);g.tick({type:"tick",alpha:f})},a.nodes=function(e){return arguments.length?(T=e,a):T},a.links=function(e){return arguments.length?(M=e,a):M},a.size=function(e){return arguments.length?(y=e,a):y},a.linkDistance=function(e){return arguments.length?(i="function"==typeof e?e:+e,a):i},a.distance=a.linkDistance,a.linkStrength=function(e){return arguments.length?(o="function"==typeof e?e:+e,a):o},a.friction=function(e){return arguments.length?(v=+e,a):v},a.charge=function(e){return arguments.length?(x="function"==typeof e?e:+e,a):x},a.chargeDistance=function(e){return arguments.length?(b=e*e,a):Math.sqrt(b)},a.gravity=function(e){return arguments.length?(_=+e,a):_},a.theta=function(e){return arguments.length?(w=e*e,a):Math.sqrt(w)},a.alpha=function(e){return arguments.length?(e=+e,f?0<e?f=e:(d.c=null,d.t=NaN,d=null,g.end({type:"end",alpha:f=0})):0<e&&(g.start({type:"start",alpha:f=e}),d=vt(a.tick)),a):f},a.start=function(){for(var s,e,l=T.length,c=M.length,t=y[0],n=y[1],u=0;u<l;++u)(e=T[u]).index=u,e.weight=0;for(u=0;u<c;++u)"number"==typeof(e=M[u]).source&&(e.source=T[e.source]),"number"==typeof e.target&&(e.target=T[e.target]),++e.source.weight,++e.target.weight;for(u=0;u<l;++u)e=T[u],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(p=[],"function"==typeof i)for(u=0;u<c;++u)p[u]=+i.call(this,M[u],u);else for(u=0;u<c;++u)p[u]=i;if(h=[],"function"==typeof o)for(u=0;u<c;++u)h[u]=+o.call(this,M[u],u);else for(u=0;u<c;++u)h[u]=o;if(m=[],"function"==typeof x)for(u=0;u<l;++u)m[u]=+x.call(this,T[u],u);else for(u=0;u<l;++u)m[u]=x;function r(e,t){if(!s){for(s=new Array(l),i=0;i<l;++i)s[i]=[];for(i=0;i<c;++i){var n=M[i];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var r,a=s[u],i=-1,o=a.length;++i<o;)if(!isNaN(r=a[i][e]))return r;return Math.random()*t}return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){if(e=e||P.behavior.drag().origin(C).on("dragstart.force",Ni).on("drag.force",t).on("dragend.force",zi),!arguments.length)return e;this.on("mouseover.force",Fi).on("mouseout.force",ji).call(e)},P.rebind(a,g,"on")};var Hi=20,Bi=1,qi=1/0;function Ui(e,t){return P.rebind(e,t,"sort","children","value"),(e.nodes=e).links=$i,e}function Yi(e,t){for(var n,r,a=[e];null!=(e=a.pop());)if(t(e),(r=e.children)&&(n=r.length))for(;0<=--n;)a.push(r[n])}function Vi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(e=r.pop());)t(e)}function Gi(e){return e.children}function Wi(e){return e.value}function Zi(e,t){return t.value-e.value}function $i(e){return P.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}P.layout.hierarchy=function(){var s=Zi,l=Gi,c=Wi;function u(e){var t,n,r,a,i=[e],o=[];for(e.depth=0;null!=(t=i.pop());)if(o.push(t),(r=l.call(u,t,t.depth))&&(n=r.length)){for(;0<=--n;)i.push(a=r[n]),a.parent=t,a.depth=t.depth+1;c&&(t.value=0),t.children=r}else c&&(t.value=+c.call(u,t,t.depth)||0),delete t.children;return Vi(e,function(e){var t,n;s&&(t=e.children)&&t.sort(s),c&&(n=e.parent)&&(n.value+=e.value)}),o}return u.sort=function(e){return arguments.length?(s=e,u):s},u.children=function(e){return arguments.length?(l=e,u):l},u.value=function(e){return arguments.length?(c=e,u):c},u.revalue=function(e){return c&&(Yi(e,function(e){e.children&&(e.value=0)}),Vi(e,function(e){var t;e.children||(e.value=+c.call(u,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},u},P.layout.partition=function(){var n=P.layout.hierarchy(),r=[1,1];function t(e,t){t=n.call(this,e,t);return function e(t,n,r,a){var i=t.children;if(t.x=n,t.y=t.depth*a,t.dx=r,t.dy=a,i&&(o=i.length)){var o,s,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=i[l],n,s=s.value*r,a),n+=s}}(t[0],0,r[0],r[1]/function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,i=-1;++i<a;)r=Math.max(r,e(n[i]));return 1+r}(t[0])),t}return t.size=function(e){return arguments.length?(r=e,t):r},Ui(t,n)},P.layout.pie=function(){var d=Number,f=Xi,p=0,h=Me,m=0;function g(n){var t,e=n.length,r=n.map(function(e,t){return+d.call(g,e,t)}),a=+("function"==typeof p?p.apply(this,arguments):p),i=("function"==typeof h?h.apply(this,arguments):h)-a,o=Math.min(Math.abs(i)/e,+("function"==typeof m?m.apply(this,arguments):m)),s=o*(i<0?-1:1),l=P.sum(r),c=l?(i-e*s)/l:0,e=P.range(e),u=[];return null!=f&&e.sort(f===Xi?function(e,t){return r[t]-r[e]}:function(e,t){return f(n[e],n[t])}),e.forEach(function(e){u[e]={data:n[e],value:t=r[e],startAngle:a,endAngle:a+=t*c+s,padAngle:o}}),u}return g.value=function(e){return arguments.length?(d=e,g):d},g.sort=function(e){return arguments.length?(f=e,g):f},g.startAngle=function(e){return arguments.length?(p=e,g):p},g.endAngle=function(e){return arguments.length?(h=e,g):h},g.padAngle=function(e){return arguments.length?(m=e,g):m},g};var Xi={};function Ji(e){return e.x}function Ki(e){return e.y}function Qi(e,t,n){e.y0=t,e.y=n}P.layout.stack=function(){var d=C,f=no,p=ro,h=Qi,m=Ji,g=Ki;function y(e,t){if(!(n=e.length))return e;for(var n,r,a,i=(s=e.map(function(e,t){return d.call(y,e,t)})).map(function(e){return e.map(function(e,t){return[m.call(y,e,t),g.call(y,e,t)]})}),o=f.call(y,i,t),s=P.permute(s,o),i=P.permute(i,o),l=p.call(y,i,t),c=s[0].length,u=0;u<c;++u)for(h.call(y,s[0][u],a=l[u],i[0][u][1]),r=1;r<n;++r)h.call(y,s[r][u],a+=i[r-1][u][1],i[r][u][1]);return e}return y.values=function(e){return arguments.length?(d=e,y):d},y.order=function(e){return arguments.length?(f="function"==typeof e?e:eo.get(e)||no,y):f},y.offset=function(e){return arguments.length?(p="function"==typeof e?e:to.get(e)||ro,y):p},y.x=function(e){return arguments.length?(m=e,y):m},y.y=function(e){return arguments.length?(g=e,y):g},y.out=function(e){return arguments.length?(h=e,y):h},y};var eo=P.map({"inside-out":function(e){for(var t,n=e.length,r=e.map(ao),a=e.map(io),i=P.range(n).sort(function(e,t){return r[e]-r[t]}),o=0,s=0,l=[],c=[],u=0;u<n;++u)t=i[u],o<s?(o+=a[t],l.push(t)):(s+=a[t],c.push(t));return c.reverse().concat(l)},reverse:function(e){return P.range(e.length).reverse()},default:no}),to=P.map({silhouette:function(e){for(var t,n,r=e.length,a=e[0].length,i=[],o=0,s=[],l=0;l<a;++l){for(n=t=0;t<r;t++)n+=e[t][l][1];o<n&&(o=n),i.push(n)}for(l=0;l<a;++l)s[l]=(o-i[l])/2;return s},wiggle:function(e){var t,n,r,a,i,o,s,l,c,u=e.length,d=e[0],f=d.length,p=[];for(p[0]=l=c=0,n=1;n<f;++n){for(a=t=0;t<u;++t)a+=e[t][n][1];for(s=d[n][i=t=0]-d[n-1][0];t<u;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;i+=o*e[t][n][1]}p[n]=l-=a?i/a*s:0,l<c&&(c=l)}for(n=0;n<f;++n)p[n]-=c;return p},expand:function(e){for(var t,n,r=e.length,a=e[0].length,i=1/r,o=[],s=0;s<a;++s){for(n=t=0;t<r;t++)n+=e[t][s][1];if(n)for(t=0;t<r;t++)e[t][s][1]/=n;else for(t=0;t<r;t++)e[t][s][1]=i}for(s=0;s<a;++s)o[s]=0;return o},zero:ro});function no(e){return P.range(e.length)}function ro(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ao(e){for(var t,n=1,r=0,a=e[0][1],i=e.length;n<i;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function io(e){return e.reduce(oo,0)}function oo(e,t){return e+t[1]}function so(e,t){return lo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function lo(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,i=[];++n<=t;)i[n]=a*n+r;return i}function co(e){return[P.min(e),P.max(e)]}function uo(e,t){return e.value-t.value}function fo(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function po(e,t){(e._pack_next=t)._pack_prev=e}function ho(e,t){var n=t.x-e.x,r=t.y-e.y,t=e.r+t.r;return n*n+r*r<.999*t*t}function mo(e){if((t=e.children)&&(o=t.length)){var t,n,r,a,i,o,s=1/0,l=-1/0,c=1/0,u=-1/0;if(t.forEach(go),(n=t[0]).x=-n.r,n.y=0,x(n),1<o&&((r=t[1]).x=r.r,r.y=0,x(r),2<o))for(vo(n,r,a=t[2]),x(a),fo(n,a),fo(n._pack_prev=a,r),r=n._pack_next,v=3;v<o;v++){vo(n,r,a=t[v]);for(var d=0,f=1,p=1,h=r._pack_next;h!==r;h=h._pack_next,f++)if(ho(h,a)){d=1;break}if(1==d)for(i=n._pack_prev;i!==h._pack_prev&&!ho(i,a);i=i._pack_prev,p++);d?(f<p||f==p&&r.r<n.r?po(n,r=h):po(n=i,r),v--):(fo(n,a),x(r=a))}for(var m=(s+l)/2,g=(c+u)/2,y=0,v=0;v<o;v++)(a=t[v]).x-=m,a.y-=g,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,t.forEach(yo)}function x(e){s=Math.min(e.x-e.r,s),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}}function go(e){e._pack_next=e._pack_prev=e}function yo(e){delete e._pack_next,delete e._pack_prev}function vo(e,t,n){var r,a,i=e.r+n.r,o=t.x-e.x,s=t.y-e.y;i&&(o||s)?(r=t.r+n.r,t=.5+((i*=i)-(r*=r))/(2*(a=o*o+s*s)),a=Math.sqrt(Math.max(0,2*r*(i+a)-(i-=a)*i-r*r))/(2*a),n.x=e.x+t*o+a*s,n.y=e.y+t*s-a*o):(n.x=e.x+i,n.y=e.y)}function xo(e,t){return e.parent==t.parent?1:2}function bo(e){var t=e.children;return t.length?t[0]:e.t}function _o(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function wo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function To(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],t=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),t<0&&(r+=t/2,t=0),{x:n,y:r,dx:a,dy:t}}function Mo(e){var t=e[0],e=e[e.length-1];return t<e?[t,e]:[e,t]}function ko(e){return e.rangeExtent?e.rangeExtent():Mo(e.range())}function Ao(e,t,n,r){var a=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(a(e))}}function So(e,t){var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Eo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Lo}P.layout.histogram=function(){var d=!0,f=Number,p=co,h=so;function n(e,t){for(var n,r,a=[],i=e.map(f,this),o=p.call(this,i,t),s=h.call(this,o,i,t),t=-1,l=i.length,c=s.length-1,u=d?1:1/l;++t<c;)(n=a[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<c)for(t=-1;++t<l;)(r=i[t])>=o[0]&&r<=o[1]&&((n=a[P.bisect(s,r,1,c)-1]).y+=u,n.push(e[t]));return a}return n.value=function(e){return arguments.length?(f=e,n):f},n.range=function(e){return arguments.length?(p=ut(e),n):p},n.bins=function(t){return arguments.length?(h="number"==typeof t?function(e){return lo(e,t)}:ut(t),n):h},n.frequency=function(e){return arguments.length?(d=!!e,n):d},n},P.layout.pack=function(){var o,s=P.layout.hierarchy().sort(uo),l=0,c=[1,1];function t(e,t){var n,r=s.call(this,e,t),a=r[0],e=c[0],t=c[1],i=null==o?Math.sqrt:"function"==typeof o?o:function(){return o};return a.x=a.y=0,Vi(a,function(e){e.r=+i(e.value)}),Vi(a,mo),l&&(n=l*(o?1:Math.max(2*a.r/e,2*a.r/t))/2,Vi(a,function(e){e.r+=n}),Vi(a,mo),Vi(a,function(e){e.r-=n})),function e(t,n,r,a){var i=t.children;t.x=n+=a*t.x;t.y=r+=a*t.y;t.r*=a;if(i)for(var o=-1,s=i.length;++o<s;)e(i[o],n,r,a)}(a,e/2,t/2,o?1:1/Math.max(2*a.r/e,2*a.r/t)),r}return t.size=function(e){return arguments.length?(c=e,t):c},t.radius=function(e){return arguments.length?(o=null==e||"function"==typeof e?e:+e,t):o},t.padding=function(e){return arguments.length?(l=+e,t):l},Ui(t,s)},P.layout.tree=function(){var c=P.layout.hierarchy().sort(null).value(null),f=xo,u=[1,1],d=null;function t(e,t){var n,r,a,i,o,s,l=c.call(this,e,t),e=l[0],t=function(e){var t,e={A:null,children:[e]},n=[e];for(;null!=(t=n.pop());)for(var r,a=t.children,i=0,o=a.length;i<o;++i)n.push((a[i]=r={_:a[i],parent:t,children:(r=a[i].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=r);return e.children[0]}(e);return Vi(t,p),t.parent.m=-t.z,Yi(t,h),d?Yi(e,m):(Yi(a=r=n=e,function(e){e.x<n.x&&(n=e),e.x>r.x&&(r=e),e.depth>a.depth&&(a=e)}),i=f(n,r)/2-n.x,o=u[0]/(r.x+f(r,n)/2+i),s=u[1]/(a.depth||1),Yi(e,function(e){e.x=(e.x+i)*o,e.y=e.depth*s})),l}function p(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;t.length?(function(e){var t,n=0,r=0,a=e.children,i=a.length;for(;0<=--i;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e),t=(t[0].z+t[t.length-1].z)/2,r?(e.z=r.z+f(e._,r._),e.m=e.z-t):e.z=t):r&&(e.z=r.z+f(e._,r._)),e.parent.A=function(e,t,n){if(t){for(var r,a=e,i=e,o=t,s=a.parent.children[0],l=a.m,c=i.m,u=o.m,d=s.m;o=_o(o),a=bo(a),o&&a;)s=bo(s),(i=_o(i)).a=e,0<(r=o.z+u-a.z-l+f(o._,a._))&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}(function(e,t,n){return e.a.parent===t.parent?e.a:n}(o,e,n),e,r),l+=r,c+=r),u+=o.m,l+=a.m,d+=s.m,c+=i.m;o&&!_o(i)&&(i.t=o,i.m+=u-c),a&&!bo(s)&&(s.t=a,s.m+=l-d,n=e)}return n}(e,r,e.parent.A||n[0])}function h(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=u[0],e.y=e.depth*u[1]}return t.separation=function(e){return arguments.length?(f=e,t):f},t.size=function(e){return arguments.length?(d=null==(u=e)?m:null,t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null==(u=e)?null:m,t):d?u:null},Ui(t,c)},P.layout.cluster=function(){var l=P.layout.hierarchy().sort(null).value(null),c=xo,u=[1,1],d=!1;function t(e,t){var r,n=l.call(this,e,t),a=n[0],i=0;Vi(a,function(e){var t,n=e.children;n&&n.length?(e.x=(t=n).reduce(function(e,t){return e+t.x},0)/t.length,e.y=1+P.max(n,function(e){return e.y})):(e.x=r?i+=c(e,r):0,e.y=0,r=e)});var e=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(a),t=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(a),o=e.x-c(e,t)/2,s=t.x+c(t,e)/2;return Vi(a,d?function(e){e.x=(e.x-a.x)*u[0],e.y=(a.y-e.y)*u[1]}:function(e){e.x=(e.x-o)/(s-o)*u[0],e.y=(1-(a.y?e.y/a.y:1))*u[1]}),n}return t.separation=function(e){return arguments.length?(c=e,t):c},t.size=function(e){return arguments.length?(d=null==(u=e),t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null!=(u=e),t):d?u:null},Ui(t,l)},P.layout.treemap=function(){var n,r=P.layout.hierarchy(),u=Math.round,a=[1,1],i=null,c=wo,o=!1,d="squarify",f=.5*(1+Math.sqrt(5));function p(e,t){for(var n,r,a=-1,i=e.length;++a<i;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function h(e){var t=e.children;if(t&&t.length){var n,r,a=c(e),i=[],o=t.slice(),s=1/0,l="slice"===d?a.dx:"dice"===d?a.dy:"slice-dice"===d?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(p(o,a.dx*a.dy/e.value),i.area=0;0<(r=o.length);)i.push(r=o[r-1]),i.area+=r.area,s="squarify"!==d||(n=function(e,t){var n,r=e.area,a=0,i=1/0,o=-1,s=e.length;for(;++o<s;)(n=e[o].area)&&(n<i&&(i=n),a<n&&(a=n));return t*=t,(r*=r)?Math.max(t*a*f/r,r/(t*i*f)):1/0}(i,l))<=s?(o.pop(),n):(i.area-=i.pop().area,m(i,l,a,!1),l=Math.min(a.dx,a.dy),1/(i.length=i.area=0));i.length&&(m(i,l,a,!0),i.length=i.area=0),t.forEach(h)}}function s(e){var t=e.children;if(t&&t.length){var n,r=c(e),a=t.slice(),i=[];for(p(a,r.dx*r.dy/e.value),i.area=0;n=a.pop();)i.push(n),i.area+=n.area,null!=n.z&&(m(i,n.z?r.dx:r.dy,r,!a.length),i.length=i.area=0);t.forEach(s)}}function m(e,t,n,r){var a,i=-1,o=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++i<o;)(a=e[i]).x=s,a.y=l,a.dy=c,s+=a.dx=Math.min(n.x+n.dx-s,c?u(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++i<o;)(a=e[i]).x=s,a.y=l,a.dx=c,l+=a.dy=Math.min(n.y+n.dy-l,c?u(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function l(e){var t=n||r(e),e=t[0];return e.x=e.y=0,e.value?(e.dx=a[0],e.dy=a[1]):e.dx=e.dy=0,n&&r.revalue(e),p([e],e.dx*e.dy/e.value),(n?s:h)(e),o&&(n=t),t}return l.size=function(e){return arguments.length?(a=e,l):a},l.padding=function(n){return arguments.length?(c=null==(i=n)?wo:"function"==(t=typeof n)?function(e){var t=n.call(l,e,e.depth);return null==t?wo(e):To(e,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(n=[n,n,n,n]),e),l):i;function e(e){return To(e,n)}var t},l.round=function(e){return arguments.length?(u=e?Math.round:Number,l):u!=Number},l.sticky=function(e){return arguments.length?(o=e,n=null,l):o},l.ratio=function(e){return arguments.length?(f=e,l):f},l.mode=function(e){return arguments.length?(d=e+"",l):d},Ui(l,r)},P.random={normal:function(r,a){var e=arguments.length;return e<2&&(a=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+a*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=P.random.normal.apply(P,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=P.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},P.scale={};var Lo={floor:C,ceil:C};function Co(n,e,t,r){var a=[],i=[],o=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<=s;)a.push(t(n[o-1],n[o])),i.push(r(e[o-1],e[o]));return function(e){var t=P.bisect(n,e,1,s)-1;return i[t](a[t](e))}}function Do(e,t){return P.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Oo(e,t){return So(e,Eo(Po(e,t)[2])),So(e,Eo(Po(e,t)[2])),e}function Po(e,t){null==t&&(t=10);var n=Mo(e),r=n[1]-n[0],e=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),r=t/r*e;return r<=.15?e*=10:r<=.35?e*=5:r<=.75&&(e*=2),n[0]=Math.ceil(n[0]/e)*e,n[1]=Math.floor(n[1]/e)*e+.5*e,n[2]=e,n}function Io(e,t){return P.range.apply(P,Po(e,t))}function Ro(e,t,n){var r,a=Po(e,t);if(n){var i=Mt.exec(n);if(i.shift(),"s"===i[8]){var o=P.formatPrefix(Math.max(D(a[0]),D(a[1])));return i[7]||(i[7]="."+zo(o.scale(a[2]))),i[8]="f",n=P.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+(r=i[8],t=zo((e=a)[2]),r in No?Math.abs(t-zo(Math.max(D(e[0]),D(e[1]))))+ +("e"!==r):t-2*("%"===r))),n=i.join("")}else n=",."+zo(a[2])+"f";return P.format(n)}P.scale.linear=function(){return function e(n,r,a,i){var o,s;function t(){var e=2<Math.min(n.length,r.length)?Co:Ao,t=i?Ii:Pi;return o=e(n,r,t,a),s=e(r,n,t,fi),l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(Ai)};l.clamp=function(e){return arguments.length?(i=e,t()):i};l.interpolate=function(e){return arguments.length?(a=e,t()):a};l.ticks=function(e){return Io(n,e)};l.tickFormat=function(e,t){return Ro(n,e,t)};l.nice=function(e){return Oo(n,e),t()};l.copy=function(){return e(n,r,a,i)};return t()}([0,1],[0,1],fi,!1)};var No={s:1,g:1,p:1,r:1,e:1};function zo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}P.scale.log=function(){return function e(t,l,c,u){function d(e){return(c?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function f(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function a(e){return t(d(e))}a.invert=function(e){return f(t.invert(e))};a.domain=function(e){return arguments.length?(c=0<=e[0],t.domain((u=e.map(Number)).map(d)),a):u};a.base=function(e){return arguments.length?(l=+e,t.domain(u.map(d)),a):l};a.nice=function(){var e=So(u.map(d),c?Math:jo);return t.domain(e),u=e.map(f),a};a.ticks=function(){var e=Mo(u),t=[],n=e[0],r=e[1],a=Math.floor(d(n)),i=Math.ceil(d(r)),o=l%1?2:l;if(isFinite(i-a)){if(c){for(;a<i;a++)for(var s=1;s<o;s++)t.push(f(a)*s);t.push(f(a))}else for(t.push(f(a));a++<i;)for(s=o-1;0<s;s--)t.push(f(a)*s);for(a=0;t[a]<n;a++);for(i=t.length;t[i-1]>r;i--);t=t.slice(a,i)}return t};a.tickFormat=function(e,n){if(!arguments.length)return Fo;arguments.length<2?n=Fo:"function"!=typeof n&&(n=P.format(n));var r=Math.max(1,l*e/a.ticks().length);return function(e){var t=e/f(Math.round(d(e)));return t*l<l-.5&&(t*=l),t<=r?n(e):""}};a.copy=function(){return e(t.copy(),l,c,u)};return Do(a,t)}(P.scale.linear().domain([0,1]),10,!0,[1,10])};var Fo=P.format(".0e"),jo={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Ho(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}P.scale.pow=function(){return function e(t,n,r){var a=Ho(n),i=Ho(1/n);function o(e){return t(a(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(a)),o):r};o.ticks=function(e){return Io(r,e)};o.tickFormat=function(e,t){return Ro(r,e,t)};o.nice=function(e){return o.domain(Oo(r,e))};o.exponent=function(e){return arguments.length?(a=Ho(n=e),i=Ho(1/n),t.domain(r.map(a)),o):n};o.copy=function(){return e(t.copy(),n,r)};return Do(o,t)}(P.scale.linear(),1,[0,1])},P.scale.sqrt=function(){return P.scale.pow().exponent(.5)},P.scale.ordinal=function(){return function e(s,l){var a,c,u;function d(e){return c[((a.get(e)||("range"===l.t?a.set(e,s.push(e)):NaN))-1)%c.length]}function f(t,n){return P.range(s.length).map(function(e){return t+n*e})}d.domain=function(e){if(!arguments.length)return s;s=[],a=new v;for(var t,n=-1,r=e.length;++n<r;)a.has(t=e[n])||a.set(t,s.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(c=e,u=0,l={t:"range",a:arguments},d):c};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],r=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+t);return c=f(n+r*t/2,r),u=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],a=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+t)|0;return c=f(n+Math.round(a*t/2+(r-n-(s.length-1+t)*a)/2),a),u=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[+r],i=e[1-r],i=(i-a)/(s.length-t+2*n);return c=f(a+i*n,i),r&&c.reverse(),u=i*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[+r],i=e[1-r],o=Math.floor((i-a)/(s.length-t+2*n));return c=f(a+Math.round((i-a-(s.length-t)*o)/2),o),r&&c.reverse(),u=Math.round(o*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return u};d.rangeExtent=function(){return Mo(l.a[0])};d.copy=function(){return e(s,l)};return d.domain(s)}([],{t:"range",a:[[]]})},P.scale.category10=function(){return P.scale.ordinal().range(Bo)},P.scale.category20=function(){return P.scale.ordinal().range(qo)},P.scale.category20b=function(){return P.scale.ordinal().range(Uo)},P.scale.category20c=function(){return P.scale.ordinal().range(Yo)};var Bo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nt),qo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nt),Uo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nt),Yo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nt);function Vo(){return 0}P.scale.quantile=function(){return function e(n,r){var a;function t(){var e=0,t=r.length;for(a=[];++e<t;)a[e-1]=P.quantile(n,e/t);return i}function i(e){if(!isNaN(e=+e))return r[P.bisect(a,e)]}i.domain=function(e){return arguments.length?(n=e.map(c).filter(u).sort(l),t()):n};i.range=function(e){return arguments.length?(r=e,t()):r};i.quantiles=function(){return a};i.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]};i.copy=function(){return e(n,r)};return t()}([],[])},P.scale.quantize=function(){return function e(t,n,r){var a,i;function o(e){return r[Math.max(0,Math.min(i,Math.floor(a*(e-t))))]}function s(){return a=r.length/(n-t),i=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};o.range=function(e){return arguments.length?(r=e,s()):r};o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/a+t,e+1/a]};o.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},P.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[P.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},P.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return Io(n,e)};t.tickFormat=function(e,t){return Ro(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},P.svg={},P.svg.arc=function(){var A=Wo,S=Zo,E=Vo,L=Go,C=$o,D=Xo,O=Jo;function t(){var e=Math.max(0,+A.apply(this,arguments)),t=Math.max(0,+S.apply(this,arguments)),n=C.apply(this,arguments)-Ae,r=D.apply(this,arguments)-Ae,a=Math.abs(r-n),i=r<n?0:1;if(t<e&&(o=t,t=e,e=o),ke<=a)return P(t,i)+(e?P(e,1-i):"")+"Z";var o,s,l,c,u,d,f,p,h,m,g,y,v,x,b,_,w,T=0,M=0,k=[];return(l=(+O.apply(this,arguments)||0)/2)&&(s=L===Go?Math.sqrt(e*e+t*t):+L.apply(this,arguments),i||(M*=-1),t&&(M=Oe(s/t*Math.sin(l))),e&&(T=Oe(s/e*Math.sin(l)))),t?(d=t*Math.cos(n+M),f=t*Math.sin(n+M),p=t*Math.cos(r-M),c=t*Math.sin(r-M),u=Math.abs(r-n-2*M)<=Te?0:1,M&&Ko(d,f,p,c)===i^u&&(_=(n+r)/2,d=t*Math.cos(_),f=t*Math.sin(_),p=c=null)):d=f=0,e?(g=e*Math.cos(r-T),y=e*Math.sin(r-T),v=e*Math.cos(n+T),h=e*Math.sin(n+T),m=Math.abs(n-r+2*T)<=Te?0:1,T&&Ko(g,y,v,h)===1-i^m&&(x=(n+r)/2,g=e*Math.cos(x),y=e*Math.sin(x),v=h=null)):g=y=0,_e<a&&.001<(o=Math.min(Math.abs(t-e)/2,+E.apply(this,arguments)))?(M=e<t^i?0:1,T=_=o,a<Te&&(r=d-(n=null==v?[g,y]:null==p?[d,f]:Ma([d,f],[v,h],[p,c],[g,y]))[0],x=f-n[1],a=p-n[0],b=c-n[1],b=1/Math.sin(Math.acos((r*a+x*b)/(Math.sqrt(r*r+x*x)*Math.sqrt(a*a+b*b)))/2),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),T=Math.min(o,(e-n)/(b-1)),_=Math.min(o,(t-n)/(1+b))),null!=p?(b=Qo(null==v?[g,y]:[v,h],[d,f],t,_,i),w=Qo([p,c],[g,y],t,_,i),o===_?k.push("M",b[0],"A",_,",",_," 0 0,",M," ",b[1],"A",t,",",t," 0 ",1-i^Ko(b[1][0],b[1][1],w[1][0],w[1][1]),",",i," ",w[1],"A",_,",",_," 0 0,",M," ",w[0]):k.push("M",b[0],"A",_,",",_," 0 1,",M," ",w[0])):k.push("M",d,",",f),null!=v?(_=Qo([d,f],[v,h],e,-T,i),w=Qo([g,y],null==p?[d,f]:[p,c],e,-T,i),o===T?k.push("L",w[0],"A",T,",",T," 0 0,",M," ",w[1],"A",e,",",e," 0 ",i^Ko(w[1][0],w[1][1],_[1][0],_[1][1]),",",1-i," ",_[1],"A",T,",",T," 0 0,",M," ",_[0]):k.push("L",w[0],"A",T,",",T," 0 0,",M," ",_[0])):k.push("L",g,",",y)):(k.push("M",d,",",f),null!=p&&k.push("A",t,",",t," 0 ",u,",",i," ",p,",",c),k.push("L",g,",",y),null!=v&&k.push("A",e,",",e," 0 ",m,",",1-i," ",v,",",h)),k.push("Z"),k.join("")}function P(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(A=ut(e),t):A},t.outerRadius=function(e){return arguments.length?(S=ut(e),t):S},t.cornerRadius=function(e){return arguments.length?(E=ut(e),t):E},t.padRadius=function(e){return arguments.length?(L=e==Go?Go:ut(e),t):L},t.startAngle=function(e){return arguments.length?(C=ut(e),t):C},t.endAngle=function(e){return arguments.length?(D=ut(e),t):D},t.padAngle=function(e){return arguments.length?(O=ut(e),t):O},t.centroid=function(){var e=(+A.apply(this,arguments)+ +S.apply(this,arguments))/2,t=(+C.apply(this,arguments)+ +D.apply(this,arguments))/2-Ae;return[Math.cos(t)*e,Math.sin(t)*e]},t};var Go="auto";function Wo(e){return e.innerRadius}function Zo(e){return e.outerRadius}function $o(e){return e.startAngle}function Xo(e){return e.endAngle}function Jo(e){return e&&e.padAngle}function Ko(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Qo(e,t,n,r,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?r:-r)/Math.sqrt(i*i+o*o),l=s*o,c=-s*i,u=e[0]+l,d=e[1]+c,f=t[0]+l,p=t[1]+c,a=(u+f)/2,o=(d+p)/2,s=f-u,i=p-d,e=s*s+i*i,t=n-r,r=u*p-f*d,u=(i<0?-1:1)*Math.sqrt(Math.max(0,t*t*e-r*r)),p=(r*i-s*u)/e,f=(-r*s-i*u)/e,d=(r*i+s*u)/e,i=(-r*s+i*u)/e,u=p-a,e=f-o,a=d-a,o=i-o;return a*a+o*o<u*u+e*e&&(p=d,f=i),[[p-l,f-c],[p*n/t,f*n/t]]}function es(c){var u=va,d=xa,f=cr,p=ns,t=p.key,h=.7;function n(e){var t,n=[],r=[],a=-1,i=e.length,o=ut(u),s=ut(d);function l(){n.push("M",p(c(r),h))}for(;++a<i;)f.call(this,t=e[a],a)?r.push([+o.call(this,t,a),+s.call(this,t,a)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(u=e,n):u},n.y=function(e){return arguments.length?(d=e,n):d},n.defined=function(e){return arguments.length?(f=e,n):f},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?p=e:(p=ts.get(e)||ns).key,n):t},n.tension=function(e){return arguments.length?(h=e,n):h},n}P.svg.line=function(){return es(C)};var ts=P.map({linear:ns,"linear-closed":rs,step:function(e){var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];for(;++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&a.push("H",r[0]);return a.join("")},"step-before":as,"step-after":is,basis:ls,"basis-open":function(e){if(e.length<4)return ns(e);var t,n=[],r=-1,a=e.length,i=[0],o=[0];for(;++r<3;)t=e[r],i.push(t[0]),o.push(t[1]);n.push(cs(fs,i)+","+cs(fs,o)),--r;for(;++r<a;)t=e[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),ps(n,i,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,a=e.length,i=a+4,o=[],s=[];for(;++r<4;)n=e[r%a],o.push(n[0]),s.push(n[1]);t=[cs(fs,o),",",cs(fs,s)],--r;for(;++r<i;)n=e[r%a],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),ps(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,i=e[0][0],o=e[0][1],s=e[n][0]-i,l=e[n][1]-o,c=-1;++c<=n;)r=e[c],a=c/n,r[0]=t*r[0]+(1-t)*(i+a*s),r[1]=t*r[1]+(1-t)*(o+a*l);return ls(e)},cardinal:function(e,t){return e.length<3?ns(e):e[0]+os(e,ss(e,t))},"cardinal-open":function(e,t){return e.length<4?ns(e):e[1]+os(e.slice(1,-1),ss(e,t))},"cardinal-closed":function(e,t){return e.length<3?rs(e):e[0]+os((e.push(e[0]),e),ss([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?ns(e):e[0]+os(e,function(e){var t,n,r,a,i=[],o=function(e){var t=0,n=e.length-1,r=[],a=e[0],i=e[1],o=r[0]=hs(a,i);for(;++t<n;)r[t]=(o+(o=hs(a=i,i=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=hs(e[s],e[s+1]),D(t)<_e?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,9<(a=n*n+r*r)&&(a=3*t/Math.sqrt(a),o[s]=a*n,o[s+1]=a*r));s=-1;for(;++s<=l;)a=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([a||0,o[s]*a||0]);return i}(e))}});function ns(e){return 1<e.length?e.join("L"):e+"Z"}function rs(e){return e.join("L")+"Z"}function as(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function is(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function os(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ns(e);var n=e.length!=t.length,r="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=e[1],l=2),1<t.length){s=t[1],i=e[l],l++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++)i=e[l],s=t[c],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}return n&&(n=e[l],r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+n[0]+","+n[1]),r}function ss(e,t){for(var n,r=[],a=(1-t)/2,i=e[0],o=e[1],s=1,l=e.length;++s<l;)n=i,i=o,o=e[s],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function ls(e){if(e.length<3)return ns(e);var t=1,n=e.length,r=e[0],a=r[0],i=r[1],o=[a,a,a,(r=e[1])[0]],s=[i,i,i,r[1]],l=[a,",",i,"L",cs(fs,o),",",cs(fs,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),ps(l,o,s);return e.pop(),l.push("L",r),l.join("")}function cs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ts.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var us=[0,2/3,1/3,0],ds=[0,1/3,2/3,0],fs=[0,1/6,2/3,1/6];function ps(e,t,n){e.push("C",cs(us,t),",",cs(us,n),",",cs(ds,t),",",cs(ds,n),",",cs(fs,t),",",cs(fs,n))}function hs(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ms(e){for(var t,n,r,a=-1,i=e.length;++a<i;)n=(t=e[a])[0],r=t[1]-Ae,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function gs(h){var m=va,g=va,y=0,v=xa,x=cr,b=ns,t=b.key,_=b,w="L",T=.7;function n(e){var t,n,r,a=[],i=[],o=[],s=-1,l=e.length,c=ut(m),u=ut(y),d=m===g?function(){return n}:ut(g),f=y===v?function(){return r}:ut(v);function p(){a.push("M",b(h(o),T),w,_(h(i.reverse()),T),"Z")}for(;++s<l;)x.call(this,t=e[s],s)?(i.push([n=+c.call(this,t,s),r=+u.call(this,t,s)]),o.push([+d.call(this,t,s),+f.call(this,t,s)])):i.length&&(p(),i=[],o=[]);return i.length&&p(),a.length?a.join(""):null}return n.x=function(e){return arguments.length?(m=g=e,n):g},n.x0=function(e){return arguments.length?(m=e,n):m},n.x1=function(e){return arguments.length?(g=e,n):g},n.y=function(e){return arguments.length?(y=v=e,n):v},n.y0=function(e){return arguments.length?(y=e,n):y},n.y1=function(e){return arguments.length?(v=e,n):v},n.defined=function(e){return arguments.length?(x=e,n):x},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?b=e:(b=ts.get(e)||ns).key,_=b.reverse||b,w=b.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(T=e,n):T},n}function ys(e){return e.radius}function vs(e){return[e.x,e.y]}function xs(){return 64}function bs(){return"circle"}function _s(e){e=Math.sqrt(e/Te);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}P.svg.line.radial=function(){var e=es(ms);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(as.reverse=is).reverse=as,P.svg.area=function(){return gs(C)},P.svg.area.radial=function(){var e=gs(ms);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},P.svg.chord=function(){var a=aa,i=ia,o=ys,s=$o,l=Xo;function t(e,t){var n=c(this,a,e,t),r=c(this,i,e,t);return"M"+n.p0+u(n.r,n.p1,n.a1-n.a0)+(e=r,(t=n).a0==e.a0&&t.a1==e.a1?d(n.r,n.p1,n.r,n.p0):d(n.r,n.p1,r.r,r.p0)+u(r.r,r.p1,r.a1-r.a0)+d(r.r,r.p1,n.r,n.p0))+"Z"}function c(e,t,n,r){var a=t.call(e,n,r),t=o.call(e,a,r),n=s.call(e,a,r)-Ae,r=l.call(e,a,r)-Ae;return{r:t,a0:n,a1:r,p0:[t*Math.cos(n),t*Math.sin(n)],p1:[t*Math.cos(r),t*Math.sin(r)]}}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(Te<n)+",1 "+t}function d(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(o=ut(e),t):o},t.source=function(e){return arguments.length?(a=ut(e),t):a},t.target=function(e){return arguments.length?(i=ut(e),t):i},t.startAngle=function(e){return arguments.length?(s=ut(e),t):s},t.endAngle=function(e){return arguments.length?(l=ut(e),t):l},t},P.svg.diagonal=function(){var r=aa,a=ia,i=vs;function t(e,t){var n=r.call(this,e,t),e=a.call(this,e,t),t=(n.y+e.y)/2,e=[n,{x:n.x,y:t},{x:e.x,y:t},e];return"M"+(e=e.map(i))[0]+"C"+e[1]+" "+e[2]+" "+e[3]}return t.source=function(e){return arguments.length?(r=ut(e),t):r},t.target=function(e){return arguments.length?(a=ut(e),t):a},t.projection=function(e){return arguments.length?(i=e,t):i},t},P.svg.diagonal.radial=function(){var e=P.svg.diagonal(),t=vs,r=e.projection;return e.projection=function(e){return arguments.length?r((n=t=e,function(){var e=n.apply(this,arguments),t=e[0],e=e[1]-Ae;return[t*Math.cos(e),t*Math.sin(e)]})):t;var n},e},P.svg.symbol=function(){var n=bs,r=xs;function t(e,t){return(ws.get(n.call(this,e,t))||_s)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=ut(e),t):n},t.size=function(e){return arguments.length?(r=ut(e),t):r},t};var ws=P.map({circle:_s,cross:function(e){e=Math.sqrt(e/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ms)),e=t*Ms;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(e){e=Math.sqrt(e)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});P.svg.symbolTypes=ws.keys();var Ts=Math.sqrt(3),Ms=Math.tan(30*Se);V.transition=function(e){for(var t,n,r=Es||++Ds,a=Is(e),i=[],o=Ls||{time:Date.now(),ease:_i,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Rs(n,u,a,r,o),t.push(n)}return Ss(i,a,r)},V.interrupt=function(e){return this.each(null==e?ks:As(Is(e)))};var ks=As(Is());function As(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ss(e,t,n){return H(e,Cs),e.namespace=t,e.id=n,e}var Es,Ls,Cs=[],Ds=0;function Os(e,r,a,i){var o=e.id,s=e.namespace;return le(e,"function"==typeof a?function(e,t,n){e[s][o].tween.set(r,i(a.call(e,e.__data__,t,n)))}:(a=i(a),function(e){e[s][o].tween.set(r,a)}))}function Ps(e){return null==e&&(e=""),function(){this.textContent=e}}function Is(e){return null==e?"__transition__":"__transition_"+e+"__"}function Rs(i,o,r,s,e){var l,c,u,d,f,p=i[r]||(i[r]={active:0,count:0}),h=p[s];function n(e){var t,n,r=p.active,a=p[r];for(t in a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[r],a.event&&a.event.interrupt.call(i,i.__data__,a.index)),p)+t<s&&((n=p[t]).timer.c=null,n.timer.t=NaN,--p.count,delete p[t]);c.c=m,vt(function(){return c.c&&m(e||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=s,h.event&&h.event.start.call(i,i.__data__,o),f=[],h.tween.forEach(function(e,t){(t=t.call(i,i.__data__,o))&&f.push(t)}),d=h.ease,u=h.duration}function m(e){for(var e=e/u,t=d(e),n=f.length;0<n;)f[--n].call(i,t);if(1<=e)return h.event&&h.event.end.call(i,i.__data__,o),--p.count?delete p[s]:delete i[r],1}h||(l=e.time,c=vt(function(e){var t=h.delay;if(c.t=t+l,t<=e)return n(e-t);c.c=n},0,l),h=p[s]={tween:new v,time:l,timer:c,delay:e.delay,duration:e.duration,ease:e.ease,index:o},e=null,++p.count)}Cs.call=V.call,Cs.empty=V.empty,Cs.node=V.node,Cs.size=V.size,P.transition=function(e,t){return e&&e.transition?Es?e.transition(t):e:P.selection().transition(e)},(P.transition.prototype=Cs).select=function(e){var t,n,r,a=this.id,i=this.namespace,o=[];e=G(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),Rs(n,u,i,a,r[i][a]),t.push(n)):t.push(null)}return Ss(o,i,a)},Cs.selectAll=function(e){var t,n,r,a,i,o=this.id,s=this.namespace,l=[];e=W(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],f=-1,p=d.length;++f<p;)if(r=d[f]){i=r[s][o],n=e.call(r,r.__data__,f,c),l.push(t=[]);for(var h=-1,m=n.length;++h<m;)(a=n[h])&&Rs(a,h,s,o,i),t.push(a)}return Ss(l,s,o)},Cs.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=se(e));for(var a=0,i=this.length;a<i;a++){r.push(t=[]);for(var o,s=0,l=(o=this[a]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return Ss(r,this.namespace,this.id)},Cs.tween=function(t,n){var r=this.id,a=this.namespace;return arguments.length<2?this.node()[a][r].tween.get(t):le(this,null==n?function(e){e[a][r].tween.remove(t)}:function(e){e[a][r].tween.set(t,n)})},Cs.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?Oi:fi,a=P.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return Os(this,"attr."+e,t,a.local?function(n){return null==n?o:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(n){return null==n?i:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=r(e,n),function(e){this.setAttribute(a,t(e))})})})},Cs.attrTween=function(e,r){var a=P.ns.qualify(e);return this.tween("attr."+e,a.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(a.space,a.local));return n&&function(e){this.setAttributeNS(a.space,a.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(a));return n&&function(e){this.setAttribute(a,n(e))}})},Cs.style=function(r,e,a){var t=arguments.length;if(t<3){if("string"!=typeof r){for(a in t<2&&(e=""),r)this.style(a,r[a],e);return this}a=""}function i(){this.style.removeProperty(r)}return Os(this,"style."+r,e,function(n){return null==n?i:(n+="",function(){var t,e=R(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=fi(e,n),function(e){this.style.setProperty(r,t(e),a)})})})},Cs.styleTween=function(r,a,i){return arguments.length<3&&(i=""),this.tween("style."+r,function(e,t){var n=a.call(this,e,t,R(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),i)}})},Cs.text=function(e){return Os(this,"text",e,Ps)},Cs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Cs.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=P.ease.apply(P,arguments)),le(this,function(e){e[r][n].ease=t}))},Cs.delay=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].delay:le(this,"function"==typeof r?function(e,t,n){e[i][a].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[i][a].delay=r}))},Cs.duration=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].duration:le(this,"function"==typeof r?function(e,t,n){e[i][a].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[i][a].duration=r}))},Cs.each=function(r,t){var a=this.id,i=this.namespace;if(arguments.length<2){var e=Ls,n=Es;try{Es=a,le(this,function(e,t,n){Ls=e[i][a],r.call(e,e.__data__,t,n)})}finally{Ls=e,Es=n}}else le(this,function(e){e=e[i][a];(e.event||(e.event=P.dispatch("start","end","interrupt"))).on(r,t)});return this},Cs.transition=function(){for(var e,t,n,r=this.id,a=++Ds,i=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&Rs(t,u,i,a,{time:(n=t[i][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ss(o,i,a)},P.svg.axis=function(){var _,w=P.scale.linear(),T=Ns,M=6,k=6,A=3,S=[10],E=null;function n(e){e.each(function(){var e,t=P.select(this),n=this.__chart__||w,r=this.__chart__=w.copy(),a=null==E?r.ticks?r.ticks.apply(r,S):r.domain():E,i=null==_?r.tickFormat?r.tickFormat.apply(r,S):C:_,o=t.selectAll(".tick").data(a,r),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",_e),l=P.transition(o.exit()).style("opacity",_e).remove(),c=P.transition(o.order()).style("opacity",1),u=Math.max(M,0)+A,d=ko(r),f=t.selectAll(".domain").data([0]),p=(f.enter().append("path").attr("class","domain"),P.transition(f));s.append("line"),s.append("text");var h,m,g,y,v,x,b=s.select("line"),a=c.select("line"),t=o.select("text").text(i),f=s.select("text"),o=c.select("text"),i="top"===T||"left"===T?-1:1;"bottom"===T||"top"===T?(e=Fs,h="x",g="y",m="x2",y="y2",t.attr("dy",i<0?"0em":".71em").style("text-anchor","middle"),p.attr("d","M"+d[0]+","+i*k+"V0H"+d[1]+"V"+i*k)):(e=js,h="y",g="x",m="y2",y="x2",t.attr("dy",".32em").style("text-anchor",i<0?"end":"start"),p.attr("d","M"+i*k+","+d[0]+"H0V"+d[1]+"H"+i*k)),b.attr(y,i*M),f.attr(g,i*u),a.attr(m,0).attr(y,i*M),o.attr(h,0).attr(g,i*u),r.rangeBand?(x=(v=r).rangeBand()/2,n=r=function(e){return v(e)+x}):n.rangeBand?n=r:l.call(e,r,n),s.call(e,n,r),c.call(e,r,r)})}return n.scale=function(e){return arguments.length?(w=e,n):w},n.orient=function(e){return arguments.length?(T=e in zs?e+"":Ns,n):T},n.ticks=function(){return arguments.length?(S=f(arguments),n):S},n.tickValues=function(e){return arguments.length?(E=e,n):E},n.tickFormat=function(e){return arguments.length?(_=e,n):_},n.tickSize=function(e){var t=arguments.length;return t?(M=+e,k=+arguments[t-1],n):M},n.innerTickSize=function(e){return arguments.length?(M=+e,n):M},n.outerTickSize=function(e){return arguments.length?(k=+e,n):k},n.tickPadding=function(e){return arguments.length?(A=+e,n):A},n.tickSubdivide=function(){return arguments.length&&n},n};var Ns="bottom",zs={top:1,right:1,bottom:1,left:1};function Fs(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function js(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}P.svg.brush=function(){var y,v,x=F(A,"brushstart","brush","brushend"),b=null,_=null,w=[0,0],T=[0,0],M=!0,k=!0,a=Bs[0];function A(e){e.each(function(){var e=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(a,C);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",A.empty()?"none":null);var r,e=P.transition(e),t=P.transition(t);b&&(r=ko(b),t.attr("x",r[0]).attr("width",r[1]-r[0]),E(e)),_&&(r=ko(_),t.attr("y",r[0]).attr("height",r[1]-r[0]),L(e)),S(e)})}function S(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+w[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function E(e){e.select(".extent").attr("x",w[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function L(e){e.select(".extent").attr("y",T[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function i(){var l,e,n,r=this,t=P.select(P.event.target),a=x.of(r,arguments),i=P.select(r),o=t.datum(),s=!/^(n|s)$/.test(o)&&b,c=!/^(e|w)$/.test(o)&&_,u=t.classed("extent"),d=ye(r),f=P.mouse(r),p=P.select(R(r)).on("keydown.brush",function(){32==P.event.keyCode&&(u||(l=null,f[0]-=w[1],f[1]-=T[1],u=2),N())}).on("keyup.brush",function(){32==P.event.keyCode&&2==u&&(f[0]+=w[1],f[1]+=T[1],u=0,N())});function h(){var e=P.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),u||(P.event.altKey?(l=l||[(w[0]+w[1])/2,(T[0]+T[1])/2],f[0]=w[+(e[0]<l[0])],f[1]=T[+(e[1]<l[1])]):l=null),s&&m(e,b,0)&&(E(i),t=!0),c&&m(e,_,1)&&(L(i),t=!0),t&&(S(i),a({type:"brush",mode:u?"move":"resize"}))}function m(e,t,n){var r,a=ko(t),i=a[0],o=a[1],s=f[n],t=n?T:w,a=t[1]-t[0];return u&&(i-=s,o-=a+s),e=(n?k:M)?Math.max(i,Math.min(o,e[n])):e[n],u?r=(e+=s)+a:(s=l?Math.max(i,Math.min(o,2*l[n]-e)):s)<e?(r=e,e=s):r=s,(t[0]!=e||t[1]!=r)&&(n?v=null:y=null,t[0]=e,t[1]=r,1)}function g(){h(),i.style("pointer-events","all").selectAll(".resize").style("display",A.empty()?"none":null),P.select("body").style("cursor",null),p.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),d(),a({type:"brushend"})}P.event.changedTouches?p.on("touchmove.brush",h).on("touchend.brush",g):p.on("mousemove.brush",h).on("mouseup.brush",g),i.interrupt().selectAll("*").interrupt(),u?(f[0]=w[0]-f[0],f[1]=T[0]-f[1]):o?(e=+/w$/.test(o),o=+/^n/.test(o),n=[w[1-e]-f[0],T[1-o]-f[1]],f[0]=w[e],f[1]=T[o]):P.event.altKey&&(l=f.slice()),i.style("pointer-events","none").selectAll(".resize").style("display",null),P.select("body").style("cursor",t.style("cursor")),a({type:"brushstart"}),h()}return A.event=function(e){e.each(function(){var r=x.of(this,arguments),a={x:w,y:T,i:y,j:v},e=this.__chart__||a;this.__chart__=a,Es?P.select(this).transition().each("start.brush",function(){y=e.i,v=e.j,w=e.x,T=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=pi(w,a.x),n=pi(T,a.y);return y=v=null,function(e){w=a.x=t(e),T=a.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=a.i,v=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},A.x=function(e){return arguments.length?(a=Bs[!(b=e)<<1|!_],A):b},A.y=function(e){return arguments.length?(a=Bs[!b<<1|!(_=e)],A):_},A.clamp=function(e){return arguments.length?(b&&_?(M=!!e[0],k=!!e[1]):b?M=!!e:_&&(k=!!e),A):b&&_?[M,k]:b?M:_?k:null},A.extent=function(e){var t,n,r,a,i;return arguments.length?(b&&(t=e[0],n=e[1],_&&(t=t[0],n=n[0]),y=[t,n],b.invert&&(t=b(t),n=b(n)),n<t&&(i=t,t=n,n=i),t==w[0]&&n==w[1]||(w=[t,n])),_&&(r=e[0],a=e[1],b&&(r=r[1],a=a[1]),v=[r,a],_.invert&&(r=_(r),a=_(a)),a<r&&(i=r,r=a,a=i),r==T[0]&&a==T[1]||(T=[r,a])),A):(b&&(y?(t=y[0],n=y[1]):(t=w[0],n=w[1],b.invert&&(t=b.invert(t),n=b.invert(n)),n<t&&(i=t,t=n,n=i))),_&&(v?(r=v[0],a=v[1]):(r=T[0],a=T[1],_.invert&&(r=_.invert(r),a=_.invert(a)),a<r&&(i=r,r=a,a=i))),b&&_?[[t,r],[n,a]]:b?[t,n]:_&&[r,a])},A.clear=function(){return A.empty()||(w=[0,0],T=[0,0],y=v=null),A},A.empty=function(){return!!b&&w[0]==w[1]||!!_&&T[0]==T[1]},P.rebind(A,x,"on")};var Hs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d=St.format=i.timeFormat,t=d.utc,i=t("%Y-%m-%dT%H:%M:%S.%LZ");function qs(e){return e.toISOString()}function Us(t,a,e){function i(e){return t(e)}function o(e,t){var n=(e[1]-e[0])/t,r=P.bisect(Vs,n);return r==Vs.length?[a.year,Po(e.map(function(e){return e/31536e6}),t)[2]]:r?a[n/Vs[r-1]<Vs[r]/n?r-1:r]:[Zs,Po(e,t)[2]]}return i.invert=function(e){return Ys(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Ys)},i.nice=function(t,n){var e=i.domain(),r=Mo(e),r=null==t?o(r,10):"number"==typeof t&&o(r,t);function a(e){return!isNaN(e)&&!t.range(e,Ys(+e+1),n).length}return r&&(t=r[0],n=r[1]),i.domain(So(e,1<n?{floor:function(e){for(;a(e=t.floor(e));)e=Ys(e-1);return e},ceil:function(e){for(;a(e=t.ceil(e));)e=Ys(+e+1);return e}}:t))},i.ticks=function(e,t){var n=Mo(i.domain()),r=null==e?o(n,10):"number"==typeof e?o(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],Ys(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return e},i.copy=function(){return Us(t.copy(),a,e)},Do(i,t)}function Ys(e){return new Date(e)}d.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qs:i,qs.parse=function(e){e=new Date(e);return isNaN(e)?null:e},qs.toString=i.toString,St.second=Dt(function(e){return new Et(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),St.seconds=St.second.range,St.seconds.utc=St.second.utc.range,St.minute=Dt(function(e){return new Et(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),St.minutes=St.minute.range,St.minutes.utc=St.minute.utc.range,St.hour=Dt(function(e){var t=e.getTimezoneOffset()/60;return new Et(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),St.hours=St.hour.range,St.hours.utc=St.hour.utc.range,St.month=Dt(function(e){return(e=St.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),St.months=St.month.range,St.months.utc=St.month.utc.range;var Vs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gs=[[St.second,1],[St.second,5],[St.second,15],[St.second,30],[St.minute,1],[St.minute,5],[St.minute,15],[St.minute,30],[St.hour,1],[St.hour,3],[St.hour,6],[St.hour,12],[St.day,1],[St.day,2],[St.week,1],[St.month,1],[St.month,3],[St.year,1]],Ws=d.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",cr]]),Zs={range:function(e,t,n){return P.range(Math.ceil(e/n)*n,+t,n).map(Ys)},floor:C,ceil:C};Gs.year=St.year,St.scale=function(){return Us(P.scale.linear(),Gs,Ws)};var $s=Gs.map(function(e){return[e[0].utc,e[1]]}),Xs=t.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",cr]]);function Js(e){return JSON.parse(e.responseText)}function Ks(e){var t=I.createRange();return t.selectNode(I.body),t.createContextualFragment(e.responseText)}$s.year=St.year.utc,St.scale.utc=function(){return Us(P.scale.linear(),$s,Xs)},P.text=dt(function(e){return e.responseText}),P.json=function(e,t){return ft(e,"application/json",Js,t)},P.html=function(e,t){return ft(e,"text/html",Ks,t)},P.xml=dt(function(e){return e.responseXML}),"object"==typeof Qs&&Qs.exports?Qs.exports=P:this.d3=P}.apply(self)},{}],21:[function(w,T,e){!function(_){!function(){"use strict";var e=w("object-assign");function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function o(e){return _.Buffer&&"function"==typeof _.Buffer.isBuffer?_.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var u=w("util/"),r=Object.prototype.hasOwnProperty,d=Array.prototype.slice,t="foo"===function(){}.name;function s(e){return Object.prototype.toString.call(e)}function l(e){return!o(e)&&("function"==typeof _.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var c=T.exports=m,n=/\s*function\s+([^\(\s]*)\s*/;function a(e){if(u.isFunction(e)){if(t)return e.name;e=e.toString().match(n);return e&&e[1]}}function f(e,t){return"string"!=typeof e||e.length<t?e:e.slice(0,t)}function p(e){if(t||!u.isFunction(e))return u.inspect(e);e=a(e);return"[Function"+(e?": "+e:"")+"]"}function h(e,t,n,r,a){throw new c.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function m(e,t){e||h(e,!0,t,"==",c.ok)}function g(e,t,n,r){if(e===t)return!0;if(o(e)&&o(t))return 0===i(e,t);if(u.isDate(e)&&u.isDate(t))return e.getTime()===t.getTime();if(u.isRegExp(e)&&u.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(u.isPrimitive(e)||u.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=y(e),i=y(t);if(a&&!i||!a&&i)return!1;if(a)return e=d.call(e),t=d.call(t),g(e,t,n);var o,s,l=b(e),c=b(t);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;0<=s;s--)if(l[s]!==c[s])return!1;for(s=l.length-1;0<=s;s--)if(o=l[s],!g(e[o],t[o],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function v(e,t){if(e&&t){if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return 1}catch(e){}return Error.isPrototypeOf(t)?void 0:!0===t.call({},e)}}function x(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&h(a,n,"Missing expected exception"+r);var i="string"==typeof r,t=!e&&a&&!n;if((!e&&u.isError(a)&&i&&v(a,n)||t)&&h(a,n,"Got unwanted exception"+r),e&&a&&n&&!v(a,n)||!e&&a)throw a}c.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=f(p((t=this).actual),128)+" "+t.operator+" "+f(p(t.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||h;Error.captureStackTrace?Error.captureStackTrace(this,t):(e=new Error).stack&&(e=e.stack,t=a(t),0<=(t=e.indexOf("\n"+t))&&(t=e.indexOf("\n",t+1),e=e.substring(t+1)),this.stack=e)},u.inherits(c.AssertionError,Error),c.fail=h,c.ok=m,c.equal=function(e,t,n){e!=t&&h(e,t,n,"==",c.equal)},c.notEqual=function(e,t,n){e==t&&h(e,t,n,"!=",c.notEqual)},c.deepEqual=function(e,t,n){g(e,t,!1)||h(e,t,n,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(e,t,n){g(e,t,!0)||h(e,t,n,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(e,t,n){g(e,t,!1)&&h(e,t,n,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=function e(t,n,r){g(t,n,!0)&&h(t,n,r,"notDeepStrictEqual",e)},c.strictEqual=function(e,t,n){e!==t&&h(e,t,n,"===",c.strictEqual)},c.notStrictEqual=function(e,t,n){e===t&&h(e,t,n,"!==",c.notStrictEqual)},c.throws=function(e,t,n){x(!0,e,t,n)},c.doesNotThrow=function(e,t,n){x(!1,e,t,n)},c.ifError=function(e){if(e)throw e},c.strict=e(function e(t,n){t||h(t,!0,n,"==",e)},c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual}),c.strict.strict=c.strict;var b=Object.keys||function(e){var t,n=[];for(t in e)r.call(e,t)&&n.push(t);return n}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":71,"util/":24}],22:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],23:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],24:[function(A,e,S){!function(M,k){!function(){var s=/%[sdj%]/g;S.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,i=String(e).replace(s,function(e){if("%%"===e)return"%";if(a<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),o=r[n];n<a;o=r[++n])h(o)||!x(o)?i+=" "+o:i+=" "+l(o);return i},S.deprecate=function(e,t){if(y(k.process))return function(){return S.deprecate(e,t).apply(this,arguments)};if(!0===M.noDeprecation)return e;var n=!1;return function(){if(!n){if(M.throwDeprecation)throw new Error(t);M.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function l(e,t){var n={seen:[],stylize:i};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),p(t)?n.showHidden=t:t&&S._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),c(n,e,n.depth)}function a(e,t){t=l.styles[t];return t?"["+l.colors[t][0]+"m"+e+"["+l.colors[t][1]+"m":e}function i(e,t){return e}function c(t,n,r){if(t.customInspect&&n&&w(n.inspect)&&n.inspect!==S.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return e=!g(e)?c(t,e,r):e}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}(t,n);if(a)return a;var i,e=Object.keys(n),o=(i={},e.forEach(function(e,t){i[e]=!0}),i);if(t.showHidden&&(e=Object.getOwnPropertyNames(n)),_(n)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return u(n);if(0===e.length){if(w(n)){var s=n.name?": "+n.name:"";return t.stylize("[Function"+s+"]","special")}if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return u(n)}var a="",l=!1,s=["{","}"];return f(n)&&(l=!0,s=["[","]"]),w(n)&&(a=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(a=" "+RegExp.prototype.toString.call(n)),b(n)&&(a=" "+Date.prototype.toUTCString.call(n)),_(n)&&(a=" "+u(n)),0!==e.length||l&&0!=n.length?r<0?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),e=l?function(t,n,r,a,e){for(var i=[],o=0,s=n.length;o<s;++o)T(n,String(o))?i.push(d(t,n,r,a,String(o),!0)):i.push("");return e.forEach(function(e){e.match(/^\d+$/)||i.push(d(t,n,r,a,e,!0))}),i}(t,n,r,o,e):e.map(function(e){return d(t,n,r,o,e,l)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(e,a,s)):s[0]+a+s[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,a,i){var o,s,t=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]};if(t.get?s=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(s=e.stylize("[Setter]","special")),T(r,a)||(o="["+a+"]"),s||(e.seen.indexOf(t.value)<0?-1<(s=h(n)?c(e,t.value,null):c(e,t.value,n-1)).indexOf("\n")&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(o)){if(i&&a.match(/^\d+$/))return s;o=(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(o,"string"))}return o+": "+s}function f(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return x(e)&&"[object RegExp]"===t(e)}function x(e){return"object"==typeof e&&null!==e}function b(e){return x(e)&&"[object Date]"===t(e)}function _(e){return x(e)&&("[object Error]"===t(e)||e instanceof Error)}function w(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}S.debuglog=function(t){var n;return y(e)&&(e=M.env.NODE_DEBUG||""),t=t.toUpperCase(),r[t]||(new RegExp("\\b"+t+"\\b","i").test(e)?(n=M.pid,r[t]=function(){var e=S.format.apply(S,arguments);console.error("%s %d: %s",t,n,e)}):r[t]=function(){}),r[t]},(S.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},S.isArray=f,S.isBoolean=p,S.isNull=h,S.isNullOrUndefined=function(e){return null==e},S.isNumber=m,S.isString=g,S.isSymbol=function(e){return"symbol"==typeof e},S.isUndefined=y,S.isRegExp=v,S.isObject=x,S.isDate=b,S.isError=_,S.isFunction=w,S.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},S.isBuffer=A("./support/isBuffer");var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),o[e.getMonth()],t].join(" ")),S.format.apply(S,arguments))},S.inherits=A("inherits"),S._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}.call(this)}.call(this,A("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":23,_process:96,inherits:22}],25:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),e=t[0],t=t[1];return 3*(e+t)/4-t},n.toByteArray=function(e){var t,n,r=u(e),a=r[0],r=r[1],i=new c(function(e,t){return 3*(e+t)/4-t}(a,r)),o=0,s=0<r?a-4:a;for(n=0;n<s;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=255&t;2===r&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,i[o++]=255&t);1===r&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,i[o++]=t>>8&255,i[o++]=255&t);return i},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,a=[],i=0,o=n-r;i<o;i+=16383)a.push(function(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return a.join("")}(e,i,o<i+16383?o:i+16383));1==r?(t=e[n-1],a.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],a.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return a.join("")};for(var s=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=r.length;a<i;++a)s[a]=r[a],l[r.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],26:[function(e,t,n){},{}],27:[function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,l=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var a=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(a,i){return new Promise(function(e,t){function n(){void 0!==r&&a.removeListener("error",r),e([].slice.call(arguments))}var r;"error"!==i&&(r=function(e){a.removeListener(i,n),t(e)},a.once("error",r)),a.once(i,n)})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var a,i;return c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener||n),a=e._events),i=a[t]),void 0===i?(i=a[t]=n,++e._eventsCount):("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),0<(n=u(e))&&i.length>n&&!i.warned&&(i.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=i.length,n=n,console&&console.warn&&console.warn(n))),e}function f(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function p(e,t,n){e=e._events;if(void 0===e)return[];t=e[t];return void 0===t?[]:"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):m(t,t.length)}function h(e){var t=this._events;if(void 0!==t){e=t[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r,a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){if((r=0<t.length?t[0]:r)instanceof Error)throw r;a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}e=i[e];if(void 0===e)return!1;if("function"==typeof e)l(e,this,t);else for(var o=e.length,s=m(e,o),n=0;n<o;++n)l(s[n],this,t);return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,i,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,a=Object.keys(n),i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},{}],28:[function(D,e,O){!function(e){!function(){"use strict";var s=D("base64-js"),i=D("ieee754");O.Buffer=d,O.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},O.INSPECT_MAX_BYTES=50;var t=2147483647;function a(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=d.prototype,e}function d(e,t,n){if("number"!=typeof e)return r(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function r(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=a(n),t=r.write(e,t);t!==n&&(r=r.slice(0,t));return r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');n=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return n.__proto__=d.prototype,n}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);r=function(e){if(d.isBuffer(e)){var t=0|u(e.length),n=a(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||C(e.length)?a(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return o(e),a(e<0?0:0|u(e))}function c(e){for(var t=e.length<0?0:0|u(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function f(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return S(e).length;default:if(a)return r?-1:A(e).length;t=(""+t).toLowerCase(),a=!0}}function n(e,t,n){var r,a,i,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var a="",i=t;i<n;++i)a+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[i]);return a}(this,t,n);case"utf8":case"utf-8":return v(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}(this,t,n);case"base64":return r=this,i=n,0===(a=t)&&i===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(a,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function h(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=C(n=+n)?a?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(a?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):m(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,a){var i=1,o=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o/=i=2,s/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a)for(var c=-1,u=n;u<o;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===s)return c*i}else-1!==c&&(u-=u-c),c=-1;else for(u=n=o<n+s?o-s:n;0<=u;u--){for(var d=!0,f=0;f<s;f++)if(l(e,u+f)!==l(t,f)){d=!1;break}if(d)return u}return-1}function g(e,t,n,r){return E(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return E(function(e,t){for(var n,r,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,r=r%256,a.push(r),a.push(n);return a}(t,e.length-n),e,n,r)}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,l,c=e[a],u=null,d=239<c?4:223<c?3:191<c?2:1;if(a+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[a+1]))&&127<(l=(31&c)<<6|63&i)&&(u=l);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&2047<(l=(15&c)<<12|(63&i)<<6|63&o)&&(l<55296||57343<l)&&(u=l);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),a+=d}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}O.kMaxLength=t,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=r,d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(e,t,n){return t=t,n=n,o(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)},d.allocUnsafe=l,d.allocUnsafeSlow=l,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(L(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(a=t=0;a<e.length;++a)t+=e[a].length;for(var n=d.allocUnsafe(t),r=0,a=0;a<e.length;++a){var i=e[a];if(L(i,Uint8Array)&&(i=d.from(i)),!d.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):n.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",t=O.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},d.prototype.compare=function(e,t,n,r,a){if(L(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(a<=r&&n<=t)return 0;if(a<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(i,o),l=this.slice(r,a),c=e.slice(t,n),u=0;u<s;++u)if(l[u]!==c[u]){i=l[u],o=c[u];break}return i<o?-1:o<i?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return h(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return h(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,o,s,l=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var a=e.length-n;(!r||a<(r=Number(r)))&&(r=a),(a=t.length)/2<r&&(r=a/2);for(var i=0;i<r;++i){var o=parseInt(t.substr(2*i,2),16);if(C(o))return i;e[n+i]=o}return i}(this,e,t,n);case"utf8":case"utf-8":return o=t,s=n,E(A(e,(i=this).length-o),i,o,s);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return g(this,e,t,n);case"base64":return i=this,o=t,s=n,E(S(e),i,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function b(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,r,a,i){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function w(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,r,a){return t=+t,n>>>=0,a||w(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,a){return t=+t,n>>>=0,a||w(e,0,n,8),i.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);t=this.subarray(e,t);return t.__proto__=d.prototype,t},d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},d.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return(a*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=t,a=1,i=this[e+--r];0<r&&(a*=256);)i+=this[e+--r]*a;return(a*=128)<=i&&(i-=Math.pow(2,8*t)),i},d.prototype.readInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},d.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=e/i&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=0,i=1,o=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/i>>0)-o&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=n-1,i=1,o=0;for(this[t+a]=255&e;0<=--a&&(i*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/i>>0)-o&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var a=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=a-1;0<=i;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return a},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var a;1===e.length&&(a=e.charCodeAt(0),("utf8"===r&&a<128||"latin1"===r)&&(e=a))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(i=t;i<n;++i)this[i]=e;else{var o=d.isBuffer(e)?e:d.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};var k=/[^+/0-9A-Za-z-_]/g;function A(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&i.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&i.push(239,191,189);if(a=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function S(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function E(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function C(e){return e!=e}}.call(this)}.call(this,D("buffer").Buffer)},{"base64-js":25,buffer:28,ieee754:64}],29:[function(e,t,n){var r,a;r=this,a=function(t,k){"use strict";function A(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function S(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function E(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,a=e.date,i=e.time,t=e.periods,n=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=C(t),u=D(t),d=C(n),f=D(n),p=C(o),h=D(o),m=C(s),g=D(s),y=C(l),v=D(l),x={a:function(e){return o[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:K,e:K,f:re,H:Q,I:ee,j:te,L:ne,m:ae,M:ie,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Pe,s:Ie,S:oe,u:se,U:le,V:ce,w:ue,W:de,x:null,X:null,y:fe,Y:pe,Z:he,"%":Oe},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:me,e:me,f:be,H:ge,I:ye,j:ve,L:xe,m:_e,M:we,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Pe,s:Ie,S:Te,u:Me,U:ke,V:Ae,w:Se,W:Ee,x:null,X:null,y:Le,Y:Ce,Z:De,"%":Oe},_={a:function(e,t,n){t=p.exec(t.slice(n));return t?(e.w=h[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=d.exec(t.slice(n));return t?(e.w=f[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=y.exec(t.slice(n));return t?(e.m=v[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=m.exec(t.slice(n));return t?(e.m=g[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return M(e,r,t,n)},d:q,e:q,f:Z,H:Y,I:Y,j:U,L:W,m:B,M:V,p:function(e,t,n){t=c.exec(t.slice(n));return t?(e.p=u[t[0].toLowerCase()],n+t[0].length):-1},q:H,Q:X,s:J,S:G,u:P,U:I,V:R,w:O,W:N,x:function(e,t,n){return M(e,a,t,n)},X:function(e,t,n){return M(e,i,t,n)},y:F,Y:z,Z:j,"%":$};function w(l,c){return function(e){var t,n,r,a=[],i=-1,o=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++i<s;)37===l.charCodeAt(i)&&(a.push(l.slice(o,i)),null!=(n=L[t=l.charAt(++i)])?t=l.charAt(++i):n="e"===t?" ":"0",(r=c[t])&&(t=r(e,n)),a.push(t),o=i+1);return a.push(l.slice(o,i)),a.join("")}}function T(a,i){return function(e){var t,n,r=E(1900,void 0,1);if(M(r,a,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!i||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=S(E(r.y,0,1))).getUTCDay())||0===n?k.utcMonday.ceil(t):k.utcMonday(t),t=k.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=A(E(r.y,0,1))).getDay())||0===n?k.timeMonday.ceil(t):k.timeMonday(t),t=k.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?S(E(r.y,0,1)).getUTCDay():A(E(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,S(r)):A(r)}}function M(e,t,n,r){for(var a,i,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=_[a in L?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return x.x=w(a,x),x.X=w(i,x),x.c=w(r,x),b.x=w(a,b),b.X=w(i,b),b.c=w(r,b),{format:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=T(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=T(e+="",!0);return t.toString=function(){return e},t}}}var r,L={"-":"",_:" ",0:"0"},a=/^\s*\d+/,i=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",e=a.length;return r+(e<n?new Array(n-e+1).join(t)+a:a)}function l(e){return e.replace(o,"\\$&")}function C(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function D(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function O(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function P(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function I(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function R(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function N(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function z(e,t,n){t=a.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function F(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function j(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function H(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function B(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function q(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function U(e,t,n){t=a.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function Y(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function V(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function G(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function W(e,t,n){t=a.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function Z(e,t,n){t=a.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function $(e,t,n){t=i.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function X(e,t,n){t=a.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function J(e,t,n){t=a.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function K(e,t){return s(e.getDate(),t,2)}function Q(e,t){return s(e.getHours(),t,2)}function ee(e,t){return s(e.getHours()%12||12,t,2)}function te(e,t){return s(1+k.timeDay.count(k.timeYear(e),e),t,3)}function ne(e,t){return s(e.getMilliseconds(),t,3)}function re(e,t){return ne(e,t)+"000"}function ae(e,t){return s(e.getMonth()+1,t,2)}function ie(e,t){return s(e.getMinutes(),t,2)}function oe(e,t){return s(e.getSeconds(),t,2)}function se(e){e=e.getDay();return 0===e?7:e}function le(e,t){return s(k.timeSunday.count(k.timeYear(e)-1,e),t,2)}function ce(e,t){var n=e.getDay();return e=4<=n||0===n?k.timeThursday(e):k.timeThursday.ceil(e),s(k.timeThursday.count(k.timeYear(e),e)+(4===k.timeYear(e).getDay()),t,2)}function ue(e){return e.getDay()}function de(e,t){return s(k.timeMonday.count(k.timeYear(e)-1,e),t,2)}function fe(e,t){return s(e.getFullYear()%100,t,2)}function pe(e,t){return s(e.getFullYear()%1e4,t,4)}function he(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function me(e,t){return s(e.getUTCDate(),t,2)}function ge(e,t){return s(e.getUTCHours(),t,2)}function ye(e,t){return s(e.getUTCHours()%12||12,t,2)}function ve(e,t){return s(1+k.utcDay.count(k.utcYear(e),e),t,3)}function xe(e,t){return s(e.getUTCMilliseconds(),t,3)}function be(e,t){return xe(e,t)+"000"}function _e(e,t){return s(e.getUTCMonth()+1,t,2)}function we(e,t){return s(e.getUTCMinutes(),t,2)}function Te(e,t){return s(e.getUTCSeconds(),t,2)}function Me(e){e=e.getUTCDay();return 0===e?7:e}function ke(e,t){return s(k.utcSunday.count(k.utcYear(e)-1,e),t,2)}function Ae(e,t){var n=e.getUTCDay();return e=4<=n||0===n?k.utcThursday(e):k.utcThursday.ceil(e),s(k.utcThursday.count(k.utcYear(e),e)+(4===k.utcYear(e).getUTCDay()),t,2)}function Se(e){return e.getUTCDay()}function Ee(e,t){return s(k.utcMonday.count(k.utcYear(e)-1,e),t,2)}function Le(e,t){return s(e.getUTCFullYear()%100,t,2)}function Ce(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function De(){return"+0000"}function Oe(){return"%"}function Pe(e){return+e}function Ie(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var c="%Y-%m-%dT%H:%M:%S.%LZ";var u=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(c);c=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:t.utcParse(c);t.isoFormat=u,t.isoParse=c,t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n,e("d3-time")):a((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":30}],30:[function(e,t,n){var r,a;r=this,a=function(e){"use strict";var a=new Date,l=new Date;function c(i,o,n,r){function s(e){return i(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return i(e=new Date(+e)),e},s.ceil=function(e){return i(e=new Date(e-1)),o(e,1),i(e),e},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,n){var r,a=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return a;for(;a.push(r=new Date(+e)),o(e,n),i(e),r<e&&e<t;);return a},s.filter=function(n){return c(function(e){if(e<=e)for(;i(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},n&&(s.count=function(e,t){return a.setTime(+e),l.setTime(+t),i(a),i(l),Math.floor(n(a,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var t=c(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?c(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null};var n=t.range,r=c(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),i=r.range,o=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),s=o.range,u=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),d=u.range,f=c(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),p=f.range;function h(t){return c(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var m=h(0),g=h(1),y=h(2),v=h(3),x=h(4),b=h(5),_=h(6),w=m.range,T=g.range,M=y.range,k=v.range,A=x.range,S=b.range,E=_.range,L=c(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),C=L.range,D=c(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});D.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var O=D.range,P=c(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),I=P.range,R=c(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),N=R.range,z=c(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),F=z.range;function j(t){return c(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var H=j(0),B=j(1),q=j(2),U=j(3),Y=j(4),V=j(5),G=j(6),W=H.range,Z=B.range,$=q.range,X=U.range,J=Y.range,K=V.range,Q=G.range,ee=c(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),te=ee.range,ne=c(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ne.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var re=ne.range;e.timeDay=f,e.timeDays=p,e.timeFriday=b,e.timeFridays=S,e.timeHour=u,e.timeHours=d,e.timeInterval=c,e.timeMillisecond=t,e.timeMilliseconds=n,e.timeMinute=o,e.timeMinutes=s,e.timeMonday=g,e.timeMondays=T,e.timeMonth=L,e.timeMonths=C,e.timeSaturday=_,e.timeSaturdays=E,e.timeSecond=r,e.timeSeconds=i,e.timeSunday=m,e.timeSundays=w,e.timeThursday=x,e.timeThursdays=A,e.timeTuesday=y,e.timeTuesdays=M,e.timeWednesday=v,e.timeWednesdays=k,e.timeWeek=m,e.timeWeeks=w,e.timeYear=D,e.timeYears=O,e.utcDay=z,e.utcDays=F,e.utcFriday=V,e.utcFridays=K,e.utcHour=R,e.utcHours=N,e.utcMillisecond=t,e.utcMilliseconds=n,e.utcMinute=P,e.utcMinutes=I,e.utcMonday=B,e.utcMondays=Z,e.utcMonth=ee,e.utcMonths=te,e.utcSaturday=G,e.utcSaturdays=Q,e.utcSecond=r,e.utcSeconds=i,e.utcSunday=H,e.utcSundays=W,e.utcThursday=Y,e.utcThursdays=J,e.utcTuesday=q,e.utcTuesdays=$,e.utcWednesday=U,e.utcWednesdays=X,e.utcWeek=H,e.utcWeeks=W,e.utcYear=ne,e.utcYears=re,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n):a((r=r||self).d3=r.d3||{})},{}],31:[function(e,t,n){"use strict";var r=e("is-string-blank");t.exports=function(e){var t=typeof e;if("string"==t){var n=e;if(0===(e=+e)&&r(n))return!1}else if("number"!=t)return!1;return e-e<1}},{"is-string-blank":68}],32:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],t=t[15];return e[0]=s*(f*t-p*g)-d*(l*t-c*g)+m*(l*p-c*f),e[1]=-(r*(f*t-p*g)-d*(a*t-i*g)+m*(a*p-i*f)),e[2]=r*(l*t-c*g)-s*(a*t-i*g)+m*(a*c-i*l),e[3]=-(r*(l*p-c*f)-s*(a*p-i*f)+d*(a*c-i*l)),e[4]=-(o*(f*t-p*g)-u*(l*t-c*g)+h*(l*p-c*f)),e[5]=n*(f*t-p*g)-u*(a*t-i*g)+h*(a*p-i*f),e[6]=-(n*(l*t-c*g)-o*(a*t-i*g)+h*(a*c-i*l)),e[7]=n*(l*p-c*f)-o*(a*p-i*f)+u*(a*c-i*l),e[8]=o*(d*t-p*m)-u*(s*t-c*m)+h*(s*p-c*d),e[9]=-(n*(d*t-p*m)-u*(r*t-i*m)+h*(r*p-i*d)),e[10]=n*(s*t-c*m)-o*(r*t-i*m)+h*(r*c-i*s),e[11]=-(n*(s*p-c*d)-o*(r*p-i*d)+u*(r*c-i*s)),e[12]=-(o*(d*g-f*m)-u*(s*g-l*m)+h*(s*f-l*d)),e[13]=n*(d*g-f*m)-u*(r*g-a*m)+h*(r*f-a*d),e[14]=-(n*(s*g-l*m)-o*(r*g-a*m)+h*(r*l-a*s)),e[15]=n*(s*f-l*d)-o*(r*f-a*d)+u*(r*l-a*s),e}},{}],33:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],34:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],35:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],36:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],p=e[12],h=e[13],m=e[14],e=e[15];return(t*o-n*i)*(d*e-f*m)-(t*s-r*i)*(u*e-f*h)+(t*l-a*i)*(u*m-d*h)+(n*s-r*o)*(c*e-f*p)-(n*l-a*o)*(c*m-d*p)+(r*l-a*s)*(c*h-u*p)}},{}],37:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,s=r+r,l=a+a,c=n*o,u=r*o,t=r*s,n=a*o,r=a*s,a=a*l,o=i*o,s=i*s,l=i*l;return e[0]=1-t-a,e[1]=u+l,e[2]=n-s,e[3]=0,e[4]=u-l,e[5]=1-c-a,e[6]=r+o,e[7]=0,e[8]=n+s,e[9]=r-o,e[10]=1-c-t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],38:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],a=n[1],i=n[2],o=Math.sqrt(r*r+a*a+i*i);if(Math.abs(o)<1e-6)return null;return r*=o=1/o,a*=o,i*=o,n=Math.sin(t),o=Math.cos(t),t=1-o,e[0]=r*r*t+o,e[1]=a*r*t+i*n,e[2]=i*r*t-a*n,e[3]=0,e[4]=r*a*t-i*n,e[5]=a*a*t+o,e[6]=i*a*t+r*n,e[7]=0,e[8]=r*i*t+a*n,e[9]=a*i*t-r*n,e[10]=i*i*t+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],39:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=r+r,l=a+a,c=i+i,u=r*s,d=r*l,t=r*c,r=a*l,a=a*c,i=i*c,s=o*s,l=o*l,c=o*c;return e[0]=1-(r+i),e[1]=d+c,e[2]=t-l,e[3]=0,e[4]=d-c,e[5]=1-(u+i),e[6]=a+s,e[7]=0,e[8]=t+l,e[9]=a-s,e[10]=1-(u+r),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],40:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],41:[function(e,t,n){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],42:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],43:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],44:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],45:[function(e,t,n){t.exports=function(e,t,n,r,a,i,o){var s=1/(n-t),l=1/(a-r),c=1/(i-o);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*l,e[10]=(o+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*c,e[15]=0,e}},{}],46:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],47:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":32,"./clone":33,"./copy":34,"./create":35,"./determinant":36,"./fromQuat":37,"./fromRotation":38,"./fromRotationTranslation":39,"./fromScaling":40,"./fromTranslation":41,"./fromXRotation":42,"./fromYRotation":43,"./fromZRotation":44,"./frustum":45,"./identity":46,"./invert":48,"./lookAt":49,"./multiply":50,"./ortho":51,"./perspective":52,"./perspectiveFromFieldOfView":53,"./rotate":54,"./rotateX":55,"./rotateY":56,"./rotateZ":57,"./scale":58,"./str":59,"./translate":60,"./transpose":61}],48:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*o,x=n*l-a*o,b=n*c-i*o,_=r*l-a*s,w=r*c-i*s,T=a*c-i*l,M=u*m-d*h,k=u*g-f*h,A=u*y-p*h,S=d*g-f*m,E=d*y-p*m,L=f*y-p*g,t=v*L-x*E+b*S+_*A-w*k+T*M;return t?(t=1/t,e[0]=(s*L-l*E+c*S)*t,e[1]=(a*E-r*L-i*S)*t,e[2]=(m*T-g*w+y*_)*t,e[3]=(f*w-d*T-p*_)*t,e[4]=(l*A-o*L-c*k)*t,e[5]=(n*L-a*A+i*k)*t,e[6]=(g*b-h*T-y*x)*t,e[7]=(u*T-f*b+p*x)*t,e[8]=(o*E-s*A+c*M)*t,e[9]=(r*A-n*E-i*M)*t,e[10]=(h*w-m*b+y*v)*t,e[11]=(d*b-u*w-p*v)*t,e[12]=(s*k-o*S-l*M)*t,e[13]=(n*S-r*k+a*M)*t,e[14]=(m*x-h*_-g*v)*t,e[15]=(u*_-d*x+f*v)*t,e):null}},{}],49:[function(e,t,n){var h=e("./identity");t.exports=function(e,t,n,r){var a,i=t[0],o=t[1],s=t[2],l=r[0],c=r[1],u=r[2],d=n[0],f=n[1],p=n[2];if(Math.abs(i-d)<1e-6&&Math.abs(o-f)<1e-6&&Math.abs(s-p)<1e-6)return h(e);a=i-d,t=o-f,r=s-p,n=1/Math.sqrt(a*a+t*t+r*r),d=c*(r*=n)-u*(t*=n),f=u*(a*=n)-l*r,p=l*t-c*a,(n=Math.sqrt(d*d+f*f+p*p))?(d*=n=1/n,f*=n,p*=n):p=f=d=0;u=t*p-r*f,l=r*d-a*p,c=a*f-t*d,(n=Math.sqrt(u*u+l*l+c*c))?(u*=n=1/n,l*=n,c*=n):c=l=u=0;return e[0]=d,e[1]=u,e[2]=a,e[3]=0,e[4]=f,e[5]=l,e[6]=t,e[7]=0,e[8]=p,e[9]=c,e[10]=r,e[11]=0,e[12]=-(d*i+f*o+p*s),e[13]=-(u*i+l*o+c*s),e[14]=-(a*i+t*o+r*s),e[15]=1,e}},{"./identity":46}],50:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],y=t[14],v=t[15],x=n[0],b=n[1],_=n[2],t=n[3];return e[0]=x*r+b*s+_*d+t*m,e[1]=x*a+b*l+_*f+t*g,e[2]=x*i+b*c+_*p+t*y,e[3]=x*o+b*u+_*h+t*v,x=n[4],b=n[5],_=n[6],t=n[7],e[4]=x*r+b*s+_*d+t*m,e[5]=x*a+b*l+_*f+t*g,e[6]=x*i+b*c+_*p+t*y,e[7]=x*o+b*u+_*h+t*v,x=n[8],b=n[9],_=n[10],t=n[11],e[8]=x*r+b*s+_*d+t*m,e[9]=x*a+b*l+_*f+t*g,e[10]=x*i+b*c+_*p+t*y,e[11]=x*o+b*u+_*h+t*v,x=n[12],b=n[13],_=n[14],t=n[15],e[12]=x*r+b*s+_*d+t*m,e[13]=x*a+b*l+_*f+t*g,e[14]=x*i+b*c+_*p+t*y,e[15]=x*o+b*u+_*h+t*v,e}},{}],51:[function(e,t,n){t.exports=function(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),c=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(o+i)*c,e[15]=1,e}},{}],52:[function(e,t,n){t.exports=function(e,t,n,r,a){var i=1/Math.tan(t/2),t=1/(r-a);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*t,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*t,e[15]=0,e}},{}],53:[function(e,t,n){t.exports=function(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),t=2/(a+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(a-i)*t*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},{}],54:[function(e,t,n){t.exports=function(e,t,n,r){var a,i,o,s,l,c,u,d,f,p,h,m,g,y,v,x,b,_,w,T=r[0],M=r[1],k=r[2],A=Math.sqrt(T*T+M*M+k*k);if(Math.abs(A)<1e-6)return null;T*=A=1/A,M*=A,k*=A,_=Math.sin(n),w=Math.cos(n),a=1-w,i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],f=t[7],p=t[8],h=t[9],m=t[10],g=t[11],y=T*T*a+w,v=M*T*a+k*_,x=k*T*a-M*_,b=T*M*a-k*_,r=M*M*a+w,A=k*M*a+T*_,n=T*k*a+M*_,_=M*k*a-T*_,w=k*k*a+w,e[0]=i*y+c*v+p*x,e[1]=o*y+u*v+h*x,e[2]=s*y+d*v+m*x,e[3]=l*y+f*v+g*x,e[4]=i*b+c*r+p*A,e[5]=o*b+u*r+h*A,e[6]=s*b+d*r+m*A,e[7]=l*b+f*r+g*A,e[8]=i*n+c*_+p*w,e[9]=o*n+u*_+h*w,e[10]=s*n+d*_+m*w,e[11]=l*n+f*_+g*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],55:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=i*a+c*r,e[5]=o*a+u*r,e[6]=s*a+d*r,e[7]=l*a+n*r,e[8]=c*a-i*r,e[9]=u*a-o*r,e[10]=d*a-s*r,e[11]=n*a-l*r,e}},{}],56:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*a-c*r,e[1]=o*a-u*r,e[2]=s*a-d*r,e[3]=l*a-n*r,e[8]=i*r+c*a,e[9]=o*r+u*a,e[10]=s*r+d*a,e[11]=l*r+n*a,e}},{}],57:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],n=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*a+c*r,e[1]=o*a+u*r,e[2]=s*a+d*r,e[3]=l*a+n*r,e[4]=c*a-i*r,e[5]=u*a-o*r,e[6]=d*a-s*r,e[7]=n*a-l*r,e}},{}],58:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],a=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],59:[function(e,t,n){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],60:[function(e,t,n){t.exports=function(e,t,n){var r,a,i,o,s,l,c,u,d,f,p,h=n[0],m=n[1],g=n[2];t===e?(e[12]=t[0]*h+t[4]*m+t[8]*g+t[12],e[13]=t[1]*h+t[5]*m+t[9]*g+t[13],e[14]=t[2]*h+t[6]*m+t[10]*g+t[14],e[15]=t[3]*h+t[7]*m+t[11]*g+t[15]):(r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],n=t[11],e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=f,e[10]=p,e[11]=n,e[12]=r*h+s*m+d*g+t[12],e[13]=a*h+l*m+f*g+t[13],e[14]=i*h+c*m+p*g+t[14],e[15]=o*h+u*m+n*g+t[15]);return e}},{}],61:[function(e,t,n){t.exports=function(e,t){{var n,r,a,i,o,s;e===t?(n=t[1],r=t[2],a=t[3],i=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e}},{}],62:[function(n,r,e){!function(t){!function(){"use strict";var e=n("is-browser"),e="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:e;r.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":66}],63:[function(e,t,n){"use strict";e=e("is-browser");t.exports=e&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":66}],64:[function(e,t,n){n.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?a-1:0,f=n?-1:1,n=e[t+d];for(d+=f,i=n&(1<<-u)-1,n>>=-u,u+=s;0<u;i=256*i+e[t+d],d+=f,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;0<u;o=256*o+e[t+d],d+=f,u-=8);if(0===i)i=1-c;else{if(i===l)return o?NaN:1/0*(n?-1:1);o+=Math.pow(2,r),i-=c}return(n?-1:1)*o*Math.pow(2,i-r)},n.write=function(e,t,n,r,a,i){var o,s,l=8*i-a-1,c=(1<<l)-1,u=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(t+=1<=o+u?d/r:d*Math.pow(2,1-u))*r&&(o++,r/=2),c<=o+u?(s=0,o=c):1<=o+u?(s=(t*r-1)*Math.pow(2,a),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,a),o=0));8<=a;e[n+f]=255&s,f+=p,s/=256,a-=8);for(o=o<<a|s,l+=a;0<l;e[n+f]=255&o,f+=p,o/=256,l-=8);e[n+f-p]|=128*i}},{}],65:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},{}],66:[function(e,t,n){t.exports=!0},{}],67:[function(e,t,n){"use strict";t.exports=i,t.exports.isMobile=i,t.exports.default=i;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){var t=(e=e||{}).ua;if("string"!=typeof(t=(t=!t&&"undefined"!=typeof navigator?navigator.userAgent:t)&&t.headers&&"string"==typeof t.headers["user-agent"]?t.headers["user-agent"]:t))return!1;var n=(e.tablet?a:r).test(t);return n=!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")?!0:n}},{}],68:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],69:[function(e,t,n){var a={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,e=e.clientY||0,t=function(e){return e===window||e===document||e===document.body?a:e.getBoundingClientRect()}(t);return n[0]=r-t.left,n[1]=e-t.top,n}},{}],70:[function(e,a,t){!function(r,x){!function(){var e,t,n;n=function(){"use strict";var t,n,r,a,i,e=Object.prototype.toString,o=void 0!==x?function(e){return x(e)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(e,t,n){return e[t]=n,e}}function s(e,t){this.fn=e,this.self=t,this.next=void 0}function l(e,t){y.add(e,t),n=n||o(y.drain)}function c(e){var t,n=typeof e;return"function"==typeof(t=null!=e&&("object"==n||"function"==n)?e.then:t)&&t}function u(){for(var e=0;e<this.chain.length;e++)!function(e,t,n){var r,a;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(a=c(r))?a.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function d(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=c(e))?l(function(){var t=new h(r);try{n.call(e,function(){d.apply(t,arguments)},function(){f.apply(t,arguments)})}catch(e){f.call(t,e)}}):(r.msg=e,r.state=1,0<r.chain.length&&l(u,r))}catch(e){f.call(new h(r),e)}}}function f(e){var t=this;t.triggered||(t.triggered=!0,(t=t.def?t.def:t).msg=e,t.state=2,0<t.chain.length&&l(u,t))}function p(e,n,r,a){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},a)}(t)}function h(e){this.def=e,this.triggered=!1}function m(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new m(this);this.then=function(e,t){var n={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&l(u,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){d.call(r,e)},function(e){f.call(r,e)})}catch(e){f.call(r,e)}}var y={add:function(e,t){i=new s(e,t),a?a.next=i:r=i,a=i,i=void 0},drain:function(){var e=r;for(r=a=n=void 0;e;)e.fn.call(e.self),e=e.next}},v=t({},"constructor",g,!1);return t(g.prototype=v,"__NPO__",0,!1),t(g,"resolve",function(n){return n&&"object"==typeof n&&1===n.__NPO__?n:new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(n)})}),t(g,"reject",function(n){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(n)})}),t(g,"all",function(t){var o=this;return"[object Array]"!=e.call(t)?o.reject(TypeError("Not an array")):0===t.length?o.resolve([]):new o(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");var r=t.length,a=Array(r),i=0;p(o,t,function(e,t){a[e]=t,++i===r&&n(a)},e)})}),t(g,"race",function(t){var r=this;return"[object Array]"!=e.call(t)?r.reject(TypeError("Not an array")):new r(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");p(r,t,function(e,t){n(t)},e)})}),g},(t=void 0!==r?r:this)[e="Promise"]=t[e]||n(),void 0!==a&&a.exports&&(a.exports=t[e])}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:118}],71:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var i in n=Object(arguments[a]))c.call(n,i)&&(r[i]=n[i]);if(l)for(var o=l(n),s=0;s<o.length;s++)u.call(n,o[s])&&(r[o[s]]=n[o[s]])}return r}},{}],72:[function(e,t,n){t.exports=function(e){var a=[];return e.replace(r,function(e,t,n){var r=t.toLowerCase();for(n=function(e){e=e.match(o);return e?e.map(Number):[]}(n),"m"==r&&2<n.length&&(a.push([t].concat(n.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(n.length==i[r])return n.unshift(t),a.push(n);if(n.length<i[r])throw new Error("malformed path data");a.push([t].concat(n.splice(0,i[r])))}}),a};var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],73:[function(e,t,n){var r,a=e("./lib/build-log"),i=e("./lib/epsilon"),o=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),c=e("./lib/geojson"),u=!1,d=i();function f(e,t,n){e=r.segments(e),t=r.segments(t),t=n(r.combine(e,t));return r.polygon(t)}r={buildLog:function(e){return!0===e?u=a():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=o(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:o(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,d,e)},union:function(e,t){return f(e,t,r.selectUnion)},intersect:function(e,t){return f(e,t,r.selectIntersect)},difference:function(e,t){return f(e,t,r.selectDifference)},differenceRev:function(e,t){return f(e,t,r.selectDifferenceRev)},xor:function(e,t){return f(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},{"./lib/build-log":74,"./lib/epsilon":75,"./lib/geojson":76,"./lib/intersecter":77,"./lib/segment-chainer":79,"./lib/segment-selector":80}],74:[function(e,t,n){t.exports=function(){var n,e=0,t=!1;function r(e,t){return n.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),n}return n={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(e){return e===t?n:r("vert",{x:t=e})},log:function(e){return r("log",{txt:e="string"!=typeof e?JSON.stringify(e,!1,"  "):e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],75:[function(e,t,n){t.exports=function(u){"number"!=typeof u&&(u=1e-10);var n={epsilon:function(e){return u="number"==typeof e?e:u},pointAboveOrOnLine:function(e,t,n){var r=t[0],a=t[1],i=n[0],t=n[1],n=e[0],e=e[1];return-u<=(i-r)*(e-a)-(t-a)*(n-r)},pointBetween:function(e,t,n){var r=e[1]-t[1],a=n[0]-t[0],e=e[0]-t[0],t=n[1]-t[1],r=e*a+r*t;return!(r<u)&&!(-u<r-(a*a+t*t))},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<u},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<u},pointsSame:function(e,t){return n.pointsSameX(e,t)&&n.pointsSameY(e,t)},pointsCompare:function(e,t){return n.pointsSameX(e,t)?n.pointsSameY(e,t)?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1},pointsCollinear:function(e,t,n){var r=e[0]-t[0],a=e[1]-t[1],e=t[0]-n[0],n=t[1]-n[1];return Math.abs(r*n-e*a)<u},linesIntersect:function(e,t,n,r){var a=t[0]-e[0],i=t[1]-e[1],o=r[0]-n[0],s=r[1]-n[1],t=a*s-i*o;if(Math.abs(t)<u)return!1;r=e[0]-n[0],n=e[1]-n[1],s=(o*n-s*r)/t,t=(a*n-i*r)/t,i={alongA:0,alongB:0,pt:[e[0]+s*a,e[1]+s*i]};return i.alongA=s<=-u?-2:s<u?-1:s-1<=-u?0:s-1<u?1:2,i.alongB=t<=-u?-2:t<u?-1:t-1<=-u?0:t-1<u?1:2,i},pointInsideRegion:function(e,t){for(var n=e[0],r=e[1],a=t[t.length-1][0],i=t[t.length-1][1],o=!1,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];u<c-r!=u<i-r&&u<(a-l)*(r-c)/(i-c)+l-n&&(o=!o),a=l,i=c}return o}};return n}},{}],76:[function(e,t,n){var r={toPolygon:function(a,e){function t(e){if(e.length<=0)return a.segments({inverted:!1,regions:[]});function t(e){e=e.slice(0,e.length-1);return a.segments({inverted:!1,regions:[e]})}for(var n=t(e[0]),r=1;r<e.length;r++)n=a.selectDifference(a.combine(n,t(e[r])));return n}if("Polygon"===e.type)return a.polygon(t(e.coordinates));if("MultiPolygon"!==e.type)throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");for(var n=a.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=a.selectUnion(a.combine(n,t(e.coordinates[r])));return a.polygon(n)},fromPolygon:function(e,n,t){function o(e,t){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],t)}function s(e){return{region:e,children:[]}}t=e.polygon(e.segments(t));var r=s(null);for(var a=0;a<t.regions.length;a++){var i=t.regions[a];i.length<3||!function e(t,n){for(var r=0;r<t.children.length;r++)if(o(n,(a=t.children[r]).region))return void e(a,n);for(var a,i=s(n),r=0;r<t.children.length;r++)o((a=t.children[r]).region,n)&&(i.children.push(a),t.children.splice(r,1),r--);t.children.push(i)}(r,i)}function l(e,t){for(var n=0,r=e[e.length-1][0],a=e[e.length-1][1],i=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];i.push([s,l]),n+=l*r-s*a,r=s,a=l}return n<0!==t&&i.reverse(),i.push([i[0][0],i[0][1]]),i}var c=[];function u(e){var t=[l(e.region,!1)];c.push(t);for(var n=0;n<e.children.length;n++)t.push(function(e){for(var t=0;t<e.children.length;t++)u(e.children[t]);return l(e.region,!0)}(e.children[n]))}for(a=0;a<r.children.length;a++)u(r.children[a]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};t.exports=r},{}],77:[function(e,t,n){var y=e("./linked-list");t.exports=function(f,p,h){function a(e,t,n){return{id:h?h.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var m=y.create();function i(o,s){m.insertBefore(o,function(e){var t,n,r,a,i;return(t=o.isStart,n=o.pt,r=s,a=e.isStart,i=e.pt,e=e.other.pt,0!==(n=p.pointsCompare(n,i))?n:p.pointsSame(r,e)?0:t!==a?t?1:-1:p.pointAboveOrOnLine(r,a?i:e,a?e:i)?1:-1)<0})}function o(e,t){var n,r,n=(n=e,r=t,i(r=y.node({isStart:!0,pt:n.start,seg:n,primary:r,other:null,status:null}),n.end),r);return r=n,t=t,t=y.node({isStart:!1,pt:e.end,seg:e,primary:t,other:r,status:null}),i(r.other=t,r.pt),n}function g(e,t){var n,r=a(t,e.seg.end,e.seg);return n=e,t=t,h&&h.segmentChop(n.seg,t),n.other.remove(),n.seg.end=t,n.other.pt=t,i(n.other,n.pt),o(r,e.primary)}function s(e,t){var n=y.create();function r(a){return n.findTransition(function(e){var t,n,r;return 0<(t=a,n=e.ev,r=t.seg.start,e=t.seg.end,t=n.seg.start,n=n.seg.end,p.pointsCollinear(r,t,n)?p.pointsCollinear(e,t,n)||p.pointAboveOrOnLine(e,t,n)?1:-1:p.pointAboveOrOnLine(r,t,n)?1:-1)})}function a(e,t){var n=e.seg,r=t.seg,a=n.start,i=n.end,o=r.start,s=r.end;h&&h.checkIntersection(n,r);var l=p.linesIntersect(a,i,o,s);if(!1===l){if(!p.pointsCollinear(a,i,o))return!1;if(p.pointsSame(a,s)||p.pointsSame(i,o))return!1;var c=p.pointsSame(a,o),u=p.pointsSame(i,s);if(c&&u)return t;n=!c&&p.pointBetween(a,o,s),r=!u&&p.pointBetween(i,o,s);if(c)return r?g(t,i):g(e,s),t;n&&(u||(r?g(t,i):g(e,s)),g(t,a))}else 0===l.alongA&&(-1===l.alongB?g(e,o):0===l.alongB?g(e,l.pt):1===l.alongB&&g(e,s)),0===l.alongB&&(-1===l.alongA?g(t,a):0===l.alongA?g(t,l.pt):1===l.alongA&&g(t,i));return!1}for(var i=[];!m.isEmpty();){var o=m.getHead();if(h&&h.vert(o.pt[0]),o.isStart){h&&h.segmentNew(o.seg,o.primary);var s=r(o),l=s.before?s.before.ev:null,c=s.after?s.after.ev:null;h&&h.tempStatus(o.seg,!!l&&l.seg,!!c&&c.seg);var u,d=function(){if(l){var e=a(o,l);if(e)return e}return!!c&&a(o,c)}();if(d&&(f?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below)&&(d.seg.myFill.above=!d.seg.myFill.above):d.seg.otherFill=o.seg.myFill,h&&h.segmentUpdate(d.seg),o.other.remove(),o.remove()),m.getHead()!==o){h&&h.rewind(o.seg);continue}f?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below,o.seg.myFill.below=c?c.seg.myFill.above:e,o.seg.myFill.above=u?!o.seg.myFill.below:o.seg.myFill.below):null===o.seg.otherFill&&(d=c?(o.primary===c.primary?c.seg.otherFill:c.seg.myFill).above:o.primary?t:e,o.seg.otherFill={above:d,below:d}),h&&h.status(o.seg,!!l&&l.seg,!!c&&c.seg),o.other.status=s.insert(y.node({ev:o}))}else{s=o.status;if(null===s)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");n.exists(s.prev)&&n.exists(s.next)&&a(s.prev.ev,s.next.ev),h&&h.statusRemove(s.ev.seg),s.remove(),o.primary||(s=o.seg.myFill,o.seg.myFill=o.seg.otherFill,o.seg.otherFill=s),i.push(o.seg)}m.getHead().remove()}return h&&h.done(),i}return f?{addRegion:function(e){for(var t,n=e[e.length-1],r=0;r<e.length;r++){var a=n,n=e[r],i=p.pointsCompare(a,n);0!==i&&o((t=i<0?a:n,a=i<0?n:a,{id:h?h.segmentId():-1,start:t,end:a,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return s(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){o(a(e.start,e.end,e),!0)}),n.forEach(function(e){o(a(e.start,e.end,e),!1)}),s(t,r)}}}},{"./linked-list":78}],78:[function(e,t,n){t.exports={create:function(){var a={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==a.root},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(e,t){for(var n=a.root,r=a.root.next;null!==r;){if(t(r))return e.prev=r.prev,(e.next=r).prev.next=e,void(r.prev=e);r=(n=r).next}(n.next=e).prev=n,e.next=null},findTransition:function(e){for(var t=a.root,n=a.root.next;null!==n&&!e(n);)n=(t=n).next;return{before:t===a.root?null:t,after:n,insert:function(e){return e.prev=t,e.next=n,t.next=e,null!==n&&(n.prev=e),e}}}};return a},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],79:[function(e,t,n){t.exports=function(e,x,b){var _=[],w=[];return e.forEach(function(e){var t=e.start,n=e.end;if(x.pointsSame(t,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(e);for(var r={index:0,matches_head:!1,matches_pt1:!1},a={index:0,matches_head:!1,matches_pt1:!1},i=r,o=0;o<_.length;o++){var s=(f=_[o])[0],l=(f[1],f[f.length-1]);f[f.length-2];if(x.pointsSame(s,t)){if(g(o,!0,!0))break}else if(x.pointsSame(s,n)){if(g(o,!0,!1))break}else if(x.pointsSame(l,t)){if(g(o,!1,!0))break}else if(x.pointsSame(l,n)&&g(o,!1,!1))break}if(i===r)return _.push([t,n]),void(b&&b.chainNew(t,n));if(i===a){b&&b.chainMatch(r.index);var c=r.index,u=r.matches_pt1?n:t,d=r.matches_head,f=_[c],p=d?f[0]:f[f.length-1],h=d?f[1]:f[f.length-2],m=d?f[f.length-1]:f[0],e=d?f[f.length-2]:f[1];return(x.pointsCollinear(h,p,u)&&(d?(b&&b.chainRemoveHead(r.index,u),f.shift()):(b&&b.chainRemoveTail(r.index,u),f.pop()),p=h),x.pointsSame(m,u))?(_.splice(c,1),x.pointsCollinear(e,m,p)&&(d?(b&&b.chainRemoveTail(r.index,p),f.pop()):(b&&b.chainRemoveHead(r.index,p),f.shift())),b&&b.chainClose(r.index),void w.push(f)):void(d?(b&&b.chainAddHead(r.index,u),f.unshift(u)):(b&&b.chainAddTail(r.index,u),f.push(u)))}p=r.index,d=a.index;b&&b.chainConnect(p,d);u=_[p].length<_[d].length;r.matches_head?a.matches_head?u?(y(p),v(p,d)):(y(d),v(d,p)):v(d,p):a.matches_head?v(p,d):u?(y(p),v(d,p)):(y(d),v(p,d))}function g(e,t,n){if(i.index=e,i.matches_head=t,i.matches_pt1=n,i!==r)return i=null,1;i=a}function y(e){b&&b.chainReverse(e),_[e].reverse()}function v(e,t){var n=_[e],r=_[t],a=n[n.length-1],i=n[n.length-2],o=r[0],s=r[1];x.pointsCollinear(i,a,o)&&(b&&b.chainRemoveTail(e,a),n.pop(),a=i),x.pointsCollinear(a,o,s)&&(b&&b.chainRemoveHead(t,o),r.shift()),b&&b.chainJoin(e,t),_[e]=n.concat(r),_.splice(t,1)}}),w}},{}],80:[function(e,t,n){function r(e,n,r){var a=[];return e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==n[t]&&a.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===n[t],below:2===n[t]},otherFill:null})}),r&&r.selected(a),a}t.exports={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}},{}],81:[function(e,t,n){"use strict";var r=e("stream").Transform;function a(){r.call(this,{readableObjectMode:!0})}function i(e,t,n){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,t&&(this.code=t),n&&(this.statusCode=n)}e("stream-parser")(((a.prototype=Object.create(r.prototype)).constructor=a).prototype),n.ParserStream=a,n.sliceEq=function(e,t,n){for(var r=t,a=0;a<n.length;)if(e[r++]!==n[a++])return!1;return!0},n.str2arr=function(e,t){var n=[],r=0;if(t&&"hex"===t)for(;r<e.length;)n.push(parseInt(e.slice(r,r+2),16)),r+=2;else for(;r<e.length;r++)n.push(255&e.charCodeAt(r));return n},n.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8},n.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8},n.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|16777216*e[t+3]},n.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|16777216*e[t]},i.prototype=Object.create(Error.prototype),n.ProbeError=i.prototype.constructor=i},{stream:98,"stream-parser":114}],82:[function(e,t,n){"use strict";function g(e,t){e=new Error(e);return e.code=t,e}function r(e,t,n){this.input=e.subarray(t,n),this.start=t;t=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==t&&"MM\0*"!==t)throw g("invalid TIFF signature","EBADDATA");this.big_endian="M"===t[0]}r.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];0<this.ifds_to_read.length&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,e)}},r.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?256*t[e]+t[e+1]:t[e]+256*t[e+1]},r.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?16777216*t[e]+65536*t[e+1]+256*t[e+2]+t[e+3]:t[e]+256*t[e+1]+65536*t[e+2]+16777216*t[e+3]},r.prototype.is_subifd_link=function(e,t){return 0===e&&34665===t||0===e&&34853===t||34665===e&&40965===t},r.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},r.prototype.exif_format_read=function(e,t){var n;switch(e){case 1:case 2:return n=this.input[t];case 6:return(n=this.input[t])|33554430*(128&n);case 3:return n=this.read_uint16(t);case 8:return(n=this.read_uint16(t))|131070*(32768&n);case 4:return n=this.read_uint32(t);case 9:return 0|(n=this.read_uint32(t));default:return null}},r.prototype.scan_ifd=function(e,t,n){var r=this.read_uint16(t);t+=2;for(var a=0;a<r;a++){var i=this.read_uint16(t),o=this.read_uint16(t+2),s=this.read_uint32(t+4),l=this.exif_format_length(o),c=s*l,u=c<=4?t+8:this.read_uint32(t+8),d=!1;if(u+c>this.input.length)throw g("unexpected EOF","EBADDATA");for(var f=[],p=u,h=0;h<s;h++,p+=l){var m=this.exif_format_read(o,p);if(null===m){f=null;break}f.push(m)}if(Array.isArray(f)&&2===o&&(f=function(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}(String.fromCharCode.apply(null,f)))&&"\0"===f[f.length-1]&&(f=f.slice(0,-1)),this.is_subifd_link(e,i)&&Array.isArray(f)&&Number.isInteger(f[0])&&0<f[0]&&(this.ifds_to_read.push({id:i,offset:f[0]}),d=!0),!1===n({is_big_endian:this.big_endian,ifd:e,tag:i,format:o,count:s,entry_offset:t+this.start,data_length:c,data_offset:u+this.start,value:f,is_subifd_link:d}))return void(this.aborted=!0);t+=12}0===e&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},t.exports.ExifParser=r,t.exports.get_orientation=function(e){var t=0;try{return new r(e,0,e.length).each(function(e){if(0===e.ifd&&274===e.tag&&Array.isArray(e.value))return t=e.value[0],!1}),t}catch(e){return-1}}},{}],83:[function(e,t,n){"use strict";var p=e("./common").readUInt16BE,a=e("./common").readUInt32BE;function c(e,t){if(e.length<4+t)return null;var n=a(e,t);return e.length<n+t||n<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+n),end:t+n}}function h(e,t,n){for(var r=0,a=0;a<n;a++)r=256*r+(e[t+a]||0);return r}function i(e,t){for(var n=0;;){var r=c(e,n);if(!r)break;"ipco"===r.boxtype&&function(e,t){for(var n=0;;){var r=c(e,n);if(!r)break;switch(r.boxtype){case"ispe":t.sizes.push({width:a(r.data,4),height:a(r.data,8)});break;case"irot":t.transforms.push({type:"irot",value:3&r.data[0]});break;case"imir":t.transforms.push({type:"imir",value:1&r.data[0]})}n=r.end}}(r.data,t),n=r.end}}function r(e,t){for(var n=4;;){var r=c(e,n);if(!r)break;"iprp"===r.boxtype&&i(r.data,t),"iloc"===r.boxtype&&function(e,t){for(var n=e[4]>>4&15,r=15&e[4],a=e[5]>>4&15,i=p(e,6),o=8,s=0;s<i;s++){var l,c=p(e,o),u=p(e,o+=2),d=h(e,o+=2,a),f=p(e,o+=a);o+=2,0===u&&1===f&&(l=h(e,o,n),u=h(e,o+n,r),t.item_loc[c]={length:u,offset:l+d}),o+=f*(n+r)}}(r.data,t),"iinf"===r.boxtype&&function(e,t){for(var n=p(e,4),r=6,a=0;a<n;a++){var i=c(e,r);if(!i)break;if("infe"===i.boxtype){for(var o=p(i.data,4),s="",l=8;l<i.data.length&&i.data[l];l++)s+=String.fromCharCode(i.data[l]);t.item_inf[s]=o}r=i.end}}(r.data,t),n=r.end}}t.exports.unbox=c,t.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(e,t),t.sizes.length){var e=(n=t.sizes,e=n.reduce(function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?e:t}),n=n.reduce(function(e,t){return e.height>t.height||e.height===t.height&&e.width>t.width?e:t}),n=e.width>n.height||e.width===n.height&&e.height>n.width?e:n),a=1;t.transforms.forEach(function(e){var t={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},n={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===e.type&&(a=0===e.value?n[a]:t[a=t[a=n[a]]]),"irot"===e.type)for(var r=0;r<e.value;r++)a=t[a]});var n=null;return t.item_inf.Exif&&(n=t.item_loc[t.item_inf.Exif]),{width:e.width,height:e.height,orientation:t.transforms.length?a:null,variants:t.sizes,exif_location:n}}},t.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4)),n={};n[t]=!0;for(var r=8;r<e.length;r+=4)n[String.fromCharCode.apply(null,e.slice(r,r+4))]=!0;if(n.mif1||n.msf1||n.miaf)return"avif"===t||"avis"===t||"avio"===t?{type:"avif",mime:"image/avif"}:"heic"===t||"heix"===t?{type:"heic",mime:"image/heic"}:"hevc"===t||"hevx"===t?{type:"heic",mime:"image/heic-sequence"}:!n.avif&&!n.avis&&(n.heic||n.heix||n.hevc||n.hevx||n.heis)?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":81}],84:[function(e,t,n){"use strict";var r=e("../common").str2arr,s=e("../common").sliceEq,l=e("../common").readUInt32BE,c=e("../miaf_utils"),u=e("../exif_utils"),d=r("ftyp");t.exports=function(e){if(s(e,4,d)){var t=c.unbox(e,0);if(t){var n=c.getMimeType(t.data);if(n){for(var r,a=t.end;;){var i=c.unbox(e,a);if(!i)break;if(a=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){r=i.data;break}}if(r){var o=c.readSizeFromMeta(r);if(o){t={width:o.width,height:o.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};return 1<o.variants.length&&(t.variants=o.variants),o.orientation&&(t.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=e.length&&(n=l(e,o.exif_location.offset),o=e.slice(o.exif_location.offset+n+4,o.exif_location.offset+o.exif_location.length),0<(o=u.get_orientation(o))&&(t.orientation=o)),t}}}}}}},{"../common":81,"../exif_utils":82,"../miaf_utils":83}],85:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt16LE,o=r("BM");t.exports=function(e){if(!(e.length<26)&&a(e,0,o))return{width:i(e,18),height:i(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":81}],86:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt16LE,o=r("GIF87a"),s=r("GIF89a");t.exports=function(e){if(!(e.length<10)&&(a(e,0,o)||a(e,0,s)))return{width:i(e,6),height:i(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":81}],87:[function(e,t,n){"use strict";var u=e("../common").readUInt16LE;t.exports=function(e){var t=u(e,0),n=u(e,2),r=u(e,4);if(0===t&&1===n&&r){for(var a=[],i={width:0,height:0},o=0;o<r;o++){var s=e[6+16*o]||256,l=e[6+16*o+1]||256,c={width:s,height:l};a.push(c),(s>i.width||l>i.height)&&(i=c)}return{width:i.width,height:i.height,variants:a,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":81}],88:[function(e,t,n){"use strict";var o=e("../common").readUInt16BE,r=e("../common").str2arr,s=e("../common").sliceEq,l=e("../exif_utils"),c=r("Exif\0\0");t.exports=function(e){if(!(e.length<2)&&255===e[0]&&216===e[1])for(var t=2;;){if(e.length-t<2)return;if(255!==e[t++])return;for(var n,r,a=e[t++];255===a;)a=e[t++];if(208<=a&&a<=217||1===a)n=0;else{if(!(192<=a&&a<=254))return;if(e.length-t<2)return;n=o(e,t)-2,t+=2}if(217===a||218===a)return;if(225===a&&10<=n&&s(e,t,c)&&(r=l.get_orientation(e.slice(t+6,t+n))),5<=n&&192<=a&&a<=207&&196!==a&&200!==a&&204!==a){if(e.length-t<n)return;var i={width:o(e,t+3),height:o(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return 0<r&&(i.orientation=r),i}t+=n}}},{"../common":81,"../exif_utils":82}],89:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt32BE,o=r("PNG\r\n\n"),s=r("IHDR");t.exports=function(e){if(!(e.length<24)&&a(e,0,o)&&a(e,12,s))return{width:i(e,16),height:i(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":81}],90:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt32BE,o=r("8BPS\0");t.exports=function(e){if(!(e.length<22)&&a(e,0,o))return{width:i(e,18),height:i(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":81}],91:[function(e,t,n){"use strict";function u(e){return"number"==typeof e&&isFinite(e)&&0<e}var d=/<[-_.:a-zA-Z0-9][^>]*>/,f=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,p=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,h=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,m=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function g(e){return r.test(e)?e.match(r)[0]:"px"}t.exports=function(e){if(function(e){var t,n=0,r=e.length;for(239===e[0]&&187===e[1]&&191===e[2]&&(n=3);n<r&&(32===(t=e[n])||9===t||13===t||10===t);)n++;return n!==r&&60===e[n]}(e)){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);var r=(t.match(d)||[""])[0];if(f.test(r)){var a=(s=(c=r).match(p),l=c.match(h),c=c.match(m),{width:s&&(s[1]||s[2]),height:l&&(l[1]||l[2]),viewbox:c&&(c[1]||c[2])}),i=parseFloat(a.width),o=parseFloat(a.height);if(a.width&&a.height)return u(i)&&u(o)?{width:i,height:o,type:"svg",mime:"image/svg+xml",wUnits:g(a.width),hUnits:g(a.height)}:void 0;var r=(a.viewbox||"").split(" "),s={width:r[2],height:r[3]},l=parseFloat(s.width),c=parseFloat(s.height);if(u(l)&&u(c)&&g(s.width)===g(s.height)){r=l/c;return a.width?u(i)?{width:i,height:i/r,type:"svg",mime:"image/svg+xml",wUnits:g(a.width),hUnits:g(a.width)}:void 0:a.height?u(o)?{width:o*r,height:o,type:"svg",mime:"image/svg+xml",wUnits:g(a.height),hUnits:g(a.height)}:void 0:{width:l,height:c,type:"svg",mime:"image/svg+xml",wUnits:g(s.width),hUnits:g(s.height)}}}}}},{}],92:[function(e,t,n){"use strict";var r=e("../common").str2arr,c=e("../common").sliceEq,a=e("../common").readUInt16LE,i=e("../common").readUInt16BE,o=e("../common").readUInt32LE,s=e("../common").readUInt32BE,u=r("II*\0"),d=r("MM\0*");function f(e,t,n){return(n?i:a)(e,t)}function p(e,t,n){return(n?s:o)(e,t)}function h(e,t,n){var r=f(e,t+2,n);return 1!==p(e,t+4,n)||3!==r&&4!==r?null:(3===r?f:p)(e,t+8,n)}t.exports=function(e){if(!(e.length<8)&&(c(e,0,u)||c(e,0,d))){var t=77===e[0],n=p(e,4,t)-8;if(!(n<0)){var r=8+n;if(!(e.length-r<2)){var a=12*f(e,r,t);if(!(a<=0||e.length-(r+=2)<a)){for(var i,o,s,l=0;l<a;l+=12)256===(s=f(e,r+l,t))?i=h(e,r+l,t):257===s&&(o=h(e,r+l,t));return i&&o?{width:i,height:o,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":81}],93:[function(e,t,n){"use strict";var r=e("../common").str2arr,l=e("../common").sliceEq,c=e("../common").readUInt16LE,u=e("../common").readUInt32LE,d=e("../exif_utils"),f=r("RIFF"),p=r("WEBP");t.exports=function(e){if(!(e.length<16)&&(l(e,0,f)||l(e,8,p))){var t,n,r,a=12,i=null,o=0,s=u(e,4)+8;if(!(s>e.length)){for(;a+8<s;)0!==e[a]?(t=String.fromCharCode.apply(null,e.slice(a,a+4)),n=u(e,a+4),"VP8 "===t&&10<=n?i=i||function(e,t){if(157===e[t+3]&&1===e[t+4]&&42===e[t+5])return{width:16383&c(e,t+6),height:16383&c(e,t+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}(e,a+8):"VP8L"===t&&9<=n?i=i||function(e,t){if(47===e[t]){t=u(e,t+1);return{width:1+(16383&t),height:1+(t>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}(e,a+8):"VP8X"===t&&10<=n?i=i||{width:1+(e[(r=a+8)+6]<<16|e[r+5]<<8|e[r+4]),height:1+(e[r+9]<<r|e[r+8]<<8|e[r+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}:"EXIF"===t&&(o=d.get_orientation(e.slice(a+8,a+8+n)),a=1/0),a+=8+n):a++;if(i)return 0<o&&(i.orientation=o),i}}}},{"../common":81,"../exif_utils":82}],94:[function(e,t,n){"use strict";t.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":84,"./parse_sync/bmp":85,"./parse_sync/gif":86,"./parse_sync/ico":87,"./parse_sync/jpeg":88,"./parse_sync/png":89,"./parse_sync/psd":90,"./parse_sync/svg":91,"./parse_sync/tiff":92,"./parse_sync/webp":93}],95:[function(e,t,n){"use strict";var a=e("./lib/parsers_sync");t.exports=function(e){for(var t=Object.keys(a),n=0;n<t.length;n++){var r=a[t[n]](e);if(r)return r}return null},t.exports.parsers=a},{"./lib/parsers_sync":94}],96:[function(e,t,n){var r,a,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var l,c=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],97:[function(e,t,n){var r=e("buffer"),a=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=a(e);return void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:28}],98:[function(e,t,n){t.exports=r;var u=e("events").EventEmitter;function r(){u.call(this)}e("inherits")(r,u),r.Readable=e("readable-stream/lib/_stream_readable.js"),r.Writable=e("readable-stream/lib/_stream_writable.js"),r.Duplex=e("readable-stream/lib/_stream_duplex.js"),r.Transform=e("readable-stream/lib/_stream_transform.js"),r.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),r.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),r.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",a),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var i=!1;function o(){i||(i=!0,t.end())}function s(){i||(i=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(c(),0===u.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),t.removeListener("drain",a),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},{events:27,inherits:65,"readable-stream/lib/_stream_duplex.js":100,"readable-stream/lib/_stream_passthrough.js":101,"readable-stream/lib/_stream_readable.js":102,"readable-stream/lib/_stream_transform.js":103,"readable-stream/lib/_stream_writable.js":104,"readable-stream/lib/internal/streams/end-of-stream.js":108,"readable-stream/lib/internal/streams/pipeline.js":110}],99:[function(e,t,n){"use strict";var r={};function a(e,a,t){var n=function(r){var e,t;function n(e,t,n){return r.call(this,(e=e,t=t,n=n,"string"==typeof a?a:a(e,t,n)))||this}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n}(t=t||Error);n.prototype.name=t.name,n.prototype.code=e,r[e]=n}function l(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}a("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,a,i,o,s;return"string"==typeof t&&(o="not ",t.substr(!i||i<0?0:+i,o.length)===o)?(r="must not be",t=t.replace(/^not /,"")):r="must be",i=e,o=" argument",(void 0===s||s>i.length)&&(s=i.length),t=i.substring(s-o.length,s)===o?"The ".concat(e," ").concat(r," ").concat(l(t,"type")):(a=(a="number"!=typeof a?0:a)+(s=".").length>(o=e).length||-1===o.indexOf(s,a)?"argument":"property",'The "'.concat(e,'" ').concat(a," ").concat(r," ").concat(l(t,"type"))),t+=". Received type ".concat(typeof n)},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],100:[function(u,d,e){!function(c){!function(){"use strict";var e=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n};d.exports=o;var t=u("./_stream_readable"),n=u("./_stream_writable");u("inherits")(o,t);for(var r=e(n.prototype),a=0;a<r.length;a++){var i=r[a];o.prototype[i]||(o.prototype[i]=n.prototype[i])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||c.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,u("_process"))},{"./_stream_readable":102,"./_stream_writable":104,_process:96,inherits:65}],101:[function(e,t,n){"use strict";t.exports=a;var r=e("./_stream_transform");function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}e("inherits")(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":103,inherits:65}],102:[function(j,H,e){!function(z,F){!function(){"use strict";var r;(H.exports=b).ReadableState=x;function h(e,t){return e.listeners(t).length}j("events").EventEmitter;var a=j("./internal/streams/stream"),u=j("buffer").Buffer,d=F.Uint8Array||function(){};var i,e,n,t=j("util"),m=t&&t.debuglog?t.debuglog("stream"):function(){},o=j("./internal/streams/buffer_list"),s=j("./internal/streams/destroy"),l=j("./internal/streams/state").getHighWaterMark,t=j("../errors").codes,f=t.ERR_INVALID_ARG_TYPE,p=t.ERR_STREAM_PUSH_AFTER_EOF,c=t.ERR_METHOD_NOT_IMPLEMENTED,g=t.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;j("inherits")(b,a);var y=s.errorOrDestroy,v=["error","close","destroy","pause","resume"];function x(e,t,n){r=r||j("./_stream_duplex"),"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!(e=e||{}).objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=l(this,e,"readableHighWaterMark",n),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(i=i||j("string_decoder/").StringDecoder,this.decoder=new i(e.encoding),this.encoding=e.encoding)}function b(e){if(r=r||j("./_stream_duplex"),!(this instanceof b))return new b(e);var t=this instanceof r;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function _(e,t,n,r,a){m("readableAddChunk",t);var i,o,s,l,c=e._readableState;if(null===t)c.reading=!1,o=e,s=c,m("onEofChunk"),s.ended||(!s.decoder||(l=s.decoder.end())&&l.length&&(s.buffer.push(l),s.length+=s.objectMode?1:l.length),s.ended=!0,s.sync?k(o):(s.needReadable=!1,s.emittedReadable||(s.emittedReadable=!0,A(o))));else if(i=!a?function(e,t){var n;(function(e){return u.isBuffer(e)||e instanceof d})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new f("chunk",["string","Buffer","Uint8Array"],t));return n}(c,t):i)y(e,i);else if(c.objectMode||t&&0<t.length)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===u.prototype||(i=t,t=u.from(i)),r)c.endEmitted?y(e,new g):w(e,c,t,!0);else if(c.ended)y(e,new p);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?w(e,c,t,!1):S(e,c)):w(e,c,t,!1)}else r||(c.reading=!1,S(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),S(e,t)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=s.destroy,b.prototype._undestroy=s.undestroy,b.prototype._destroy=function(e,t){t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){var t=new(i=i||j("string_decoder/").StringDecoder)(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var T=1073741824;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(T<=(n=e)?n=T:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function k(e){var t=e._readableState;m("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,z.nextTick(A,e))}function A(e){var t=e._readableState;m("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,O(e)}function S(e,t){t.readingMore||(t.readingMore=!0,z.nextTick(E,e,t))}function E(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(m("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function C(e){m("readable nexttick read 0"),e.read(0)}function D(e,t){m("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function I(e){var t=e._readableState;m("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,z.nextTick(R,t,e))}function R(e,t){m("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),!e.autoDestroy||(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:0<t.length)||t.ended))return m("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?I:k)(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&I(this),null;var r=t.needReadable;return m("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&m("length less than watermark",r=!0),t.ended||t.reading?m("reading or ended",r=!1):r&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(n,t))),null===(r=0<e?P(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){y(this,new c("_read()"))},b.prototype.pipe=function(n,e){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=n;break;case 1:a.pipes=[a.pipes,n];break;default:a.pipes.push(n)}a.pipesCount+=1,m("pipe count=%d opts=%j",a.pipesCount,e);e=(!e||!1!==e.end)&&n!==z.stdout&&n!==z.stderr?o:p;function i(e,t){m("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,m("cleanup"),n.removeListener("close",d),n.removeListener("finish",f),n.removeListener("drain",s),n.removeListener("error",u),n.removeListener("unpipe",i),r.removeListener("end",o),r.removeListener("end",p),r.removeListener("data",c),l=!0,!a.awaitDrain||n._writableState&&!n._writableState.needDrain||s())}function o(){m("onend"),n.end()}a.endEmitted?z.nextTick(e):r.once("end",e),n.on("unpipe",i);var t,s=(t=r,function(){var e=t._readableState;m("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&h(t,"data")&&(e.flowing=!0,O(t))});n.on("drain",s);var l=!1;function c(e){m("ondata");e=n.write(e);m("dest.write",e),!1===e&&((1===a.pipesCount&&a.pipes===n||1<a.pipesCount&&-1!==N(a.pipes,n))&&!l&&(m("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function u(e){m("onerror",e),p(),n.removeListener("error",u),0===h(n,"error")&&y(n,e)}function d(){n.removeListener("finish",f),p()}function f(){m("onfinish"),n.removeListener("close",d),p()}function p(){m("unpipe"),r.unpipe(n)}return r.on("data",c),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",u),n.once("close",d),n.once("finish",f),n.emit("pipe",r),a.flowing||(m("pipe resume"),r.resume()),n},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=N(t.pipes,e);return-1===o||(t.pipes.splice(o,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},b.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),t=this._readableState;return"data"===e?(t.readableListening=0<this.listenerCount("readable"),!1!==t.flowing&&this.resume()):"readable"===e&&(t.endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.flowing=!1,t.emittedReadable=!1,m("on readable",t.length,t.reading),t.length?k(this):t.reading||z.nextTick(C,this))),n},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(e,t){t=a.prototype.removeListener.call(this,e,t);return"readable"===e&&z.nextTick(L,this),t},b.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||z.nextTick(L,this),t},b.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(m("resume"),n.flowing=!n.readableListening,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,z.nextTick(D,e,t))),n.paused=!1,this},b.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(t){var e,n=this,r=this._readableState,a=!1;for(e in t.on("end",function(){var e;m("wrapped end"),!r.decoder||r.ended||(e=r.decoder.end())&&e.length&&n.push(e),n.push(null)}),t.on("data",function(e){m("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(a=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var i=0;i<v.length;i++)t.on(v[i],this.emit.bind(this,v[i]));return this._read=function(e){m("wrapped _read",e),a&&(a=!1,t.resume())},this},"function"==typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?j("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),b._fromList=P,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(b.from=function(e,t){return(n=void 0===n?j("./internal/streams/from"):n)(b,e,t)})}.call(this)}.call(this,j("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/async_iterator":105,"./internal/streams/buffer_list":106,"./internal/streams/destroy":107,"./internal/streams/from":109,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,events:27,inherits:65,"string_decoder/":113,util:26}],103:[function(e,t,n){"use strict";t.exports=l;var t=e("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,a=t.ERR_MULTIPLE_CALLBACK,i=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,s=e("./_stream_duplex");function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new a);n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e),(e=this._readableState).reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(e,t){u(n,e,t)})}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new i;return e.push(null)}e("inherits")(l,s),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new r("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t,r.transforming||(t=this._readableState,(r.needTransform||t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark))},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":99,"./_stream_duplex":100,inherits:65}],104:[function(C,D,e){!function(E,L){!function(){"use strict";function u(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var r;(D.exports=_).WritableState=b;var e={deprecate:C("util-deprecate")},n=C("./internal/streams/stream"),d=C("buffer").Buffer,f=L.Uint8Array||function(){};var a,t=C("./internal/streams/destroy"),i=C("./internal/streams/state").getHighWaterMark,o=C("../errors").codes,p=o.ERR_INVALID_ARG_TYPE,s=o.ERR_METHOD_NOT_IMPLEMENTED,l=o.ERR_MULTIPLE_CALLBACK,c=o.ERR_STREAM_CANNOT_PIPE,h=o.ERR_STREAM_DESTROYED,m=o.ERR_STREAM_NULL_VALUES,g=o.ERR_STREAM_WRITE_AFTER_END,y=o.ERR_UNKNOWN_ENCODING,v=t.errorOrDestroy;function x(){}function b(e,t,n){r=r||C("./_stream_duplex"),"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!(e=e||{}).objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=i(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;n=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if("function"!=typeof a)throw new l;(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0})(n),t?function(e,t,n,r,a){--t.pendingcb,n?(E.nextTick(a,r),E.nextTick(S,e,t),e._writableState.errorEmitted=!0,v(e,r)):(a(r),e._writableState.errorEmitted=!0,v(e,r),S(e,t))}(e,n,r,t,a):((t=k(n)||e.destroyed)||n.corked||n.bufferProcessing||!n.bufferedRequest||M(e,n),r?E.nextTick(T,e,n,t,a):T(e,n,t,a))}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function _(e){var t=this instanceof(r=r||C("./_stream_duplex"));if(!t&&!a.call(_,this))return new _(e);this._writableState=new b(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n.call(this)}function w(e,t,n,r,a,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new h("write")):n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function T(e,t,n,r){var a;n||(a=e,0===(n=t).length&&n.needDrain&&(n.needDrain=!1,a.emit("drain"))),t.pendingcb--,r(),S(e,t)}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),r=t.corkedRequestsFree;r.entry=n;for(var i=0,o=!0;n;)(a[i]=n).isBuf||(o=!1),n=n.next,i+=1;a.allBuffers=o,w(e,t,!0,t.length,a,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new u(t),t.bufferedRequestCount=0}else{for(;n;){var s=n.chunk,l=n.encoding,c=n.callback;if(w(e,t,!1,t.objectMode?1:s.length,s,l,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(t,n){t._final(function(e){n.pendingcb--,e&&v(t,e),n.prefinished=!0,t.emit("prefinish"),S(t,n)})}function S(e,t){var n,r,a=k(t);return a&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,E.nextTick(A,n,r))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),!t.autoDestroy||(!(t=e._readableState)||t.autoDestroy&&t.endEmitted)&&e.destroy())),a}C("inherits")(_,n),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===_&&(e&&e._writableState instanceof b)}})):a=function(e){return e instanceof this},_.prototype.pipe=function(){v(this,new c)},_.prototype.write=function(e,t,n){var r,a,i,o,s,l,c=this._writableState,u=!1,r=!c.objectMode&&(r=e,d.isBuffer(r)||r instanceof f);return r&&!d.isBuffer(e)&&(a=e,e=d.from(a)),"function"==typeof t&&(n=t,t=null),t=r?"buffer":t||c.defaultEncoding,"function"!=typeof n&&(n=x),c.ending?(o=this,s=n,l=new g,v(o,l),E.nextTick(s,l)):!r&&(a=this,o=c,s=n,null===(l=e)?i=new m:"string"==typeof l||o.objectMode||(i=new p("chunk",["string","Buffer"],l)),i&&(v(a,i),!void E.nextTick(s,i)))||(c.pendingcb++,u=function(e,t,n,r,a,i){n||(l=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,a),r!==l&&(n=!0,a="buffer",r=l));var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;s||(t.needDrain=!0);{var l;t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):w(e,t,!1,o,r,a,i)}return s}(this,c,r,e,t,n)),u},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new y(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,n){n(new s("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?E.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=t.destroy,_.prototype._undestroy=t.undestroy,_.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,C("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/destroy":107,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,inherits:65,"util-deprecate":120}],105:[function(r,g,e){!function(m){!function(){"use strict";var e;function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=r("./end-of-stream"),i=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t,n=e[i];null===n||null!==(t=e[d].read())&&(e[c]=null,e[i]=null,e[o]=null,n(f(t,!1)))}var t=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((n(e={get stream(){return this[d]},next:function(){var n=this,e=this[s];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise(function(e,t){m.nextTick(function(){n[s]?t(n[s]):e(f(void 0,!0))})});var t,r,a,e=this[c];if(e)t=new Promise((r=e,a=this,function(e,t){r.then(function(){a[l]?e(f(void 0,!0)):a[u](e,t)},t)}));else{e=this[d].read();if(null!==e)return Promise.resolve(f(e,!1));t=new Promise(this[u])}return this[c]=t}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var e=this;return new Promise(function(t,n){e[d].destroy(null,function(e){e?n(e):t(f(void 0,!0))})})}),e),t);g.exports=function(e){var t,r=Object.create(h,(n(t={},d,{value:e,writable:!0}),n(t,i,{value:null,writable:!0}),n(t,o,{value:null,writable:!0}),n(t,s,{value:null,writable:!0}),n(t,l,{value:e._readableState.endEmitted,writable:!0}),n(t,u,{value:function(e,t){var n=r[d].read();n?(r[c]=null,r[i]=null,r[o]=null,e(f(n,!1))):(r[i]=e,r[o]=t)},writable:!0}),t));return r[c]=null,a(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];return null!==t&&(r[c]=null,r[i]=null,r[o]=null,t(e)),void(r[s]=e)}e=r[i];null!==e&&(r[c]=null,r[i]=null,e(f(void 0,!(r[o]=null)))),r[l]=!0}),e.on("readable",function(e){m.nextTick(p,e)}.bind(null,r)),r}}.call(this)}.call(this,r("_process"))},{"./end-of-stream":108,_process:96}],106:[function(e,t,n){"use strict";function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function a(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach(function(e){var t,n;t=r,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=e("buffer").Buffer,l=e("util").inspect,c=l&&l.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r=s.allocUnsafe(e>>>0),a=this.head,i=0;a;)t=a.data,n=i,s.prototype.copy.call(t,r,n),i+=a.data.length,a=a.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var a=t.data,i=e>a.length?a.length:e;if(i===a.length?r+=a:r+=a.slice(0,e),0===(e-=i)){i===a.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=a.slice(i);break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,i=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,i),0===(e-=i)){i===a.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=a.slice(i);break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return l(this,a({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),r&&o(t,r),e}()},{buffer:28,util:26}],107:[function(e,t,n){!function(l){!function(){"use strict";function i(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(s,this,e)):l.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?l.nextTick(o,n):(n._writableState.errorEmitted=!0,l.nextTick(i,n,e)):l.nextTick(i,n,e):t?(l.nextTick(o,n),t(e)):l.nextTick(o,n)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:96}],108:[function(e,t,n){"use strict";var y=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function v(){}t.exports=function e(t,n,r){if("function"==typeof n)return e(t,null,n);var a,i;a=r||v,i=!1,r=function(){if(!i){i=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(this,t)}};function o(){t.writable||m()}function s(){g=!(f=!1),p||r.call(t)}function l(e){r.call(t,e)}function c(){var e;return f&&!g?(t._readableState&&t._readableState.ended||(e=new y),r.call(t,e)):p&&!h?(t._writableState&&t._writableState.ended||(e=new y),r.call(t,e)):void 0}function u(){t.req.on("finish",m)}var d,f=(n=n||{}).readable||!1!==n.readable&&t.readable,p=n.writable||!1!==n.writable&&t.writable,h=t._writableState&&t._writableState.finished,m=function(){h=!(p=!1),f||r.call(t)},g=t._readableState&&t._readableState.endEmitted;return(d=t).setHeader&&"function"==typeof d.abort?(t.on("complete",m),t.on("abort",c),t.req?u():t.on("request",u)):p&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",s),t.on("finish",m),!1!==n.error&&t.on("error",l),t.on("close",c),function(){t.removeListener("complete",m),t.removeListener("abort",c),t.removeListener("request",u),t.req&&t.req.removeListener("finish",m),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",m),t.removeListener("end",s),t.removeListener("error",l),t.removeListener("close",c)}}},{"../../../errors":99}],109:[function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],110:[function(l,e,t){"use strict";var c;var n=l("../../../errors").codes,s=n.ERR_MISSING_ARGS,u=n.ERR_STREAM_DESTROYED;function d(e){if(e)throw e}function f(n,e,t,r){var a,i;a=r,i=!1;var o=!(r=function(){i||(i=!0,a.apply(void 0,arguments))});n.on("close",function(){o=!0}),(c=void 0===c?l("./end-of-stream"):c)(n,{readable:e,writable:t},function(e){return e?r(e):(o=!0,void r())});var s=!1;return function(e){var t;if(!o&&!s)return s=!0,(t=n).setHeader&&"function"==typeof t.abort?n.abort():"function"==typeof n.destroy?n.destroy():void r(e||new u("pipe"))}}function p(e){e()}function h(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n,a,i=!(n=r).length||"function"!=typeof n[n.length-1]?d:n.pop();if((r=Array.isArray(r[0])?r[0]:r).length<2)throw new s("streams");var o=r.map(function(e,t){var n=t<r.length-1;return f(e,n,0<t,function(e){a=a||e,e&&o.forEach(p),n||(o.forEach(p),i(a))})});return r.reduce(h)}},{"../../../errors":99,"./end-of-stream":108}],111:[function(e,t,n){"use strict";var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,r){var a,i=(a=r,i=n,null!=(t=t).highWaterMark?t.highWaterMark:a?t[i]:null);if(null==i)return e.objectMode?16:16384;if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new o(r?n:"highWaterMark",i);return Math.floor(i)}}},{"../../../errors":99}],112:[function(e,t,n){t.exports=e("events").EventEmitter},{events:27}],113:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=d,this.end=f,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t,n,r=this.lastTotal-this.lastNeed,t=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==t?t:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){t=n.charCodeAt(n.length-1);if(55296<=t&&t<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function d(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=s(t[r]);if(0<=a)return 0<a&&(e.lastNeed=a-1),a;if(--r<n||-2===a)return 0;if(0<=(a=s(t[r])))return 0<a&&(e.lastNeed=a-2),a;if(--r<n||-2===a)return 0;if(0<=(a=s(t[r])))return 0<a&&(2===a?a=0:e.lastNeed=a-3),a;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;n=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":97}],114:[function(t,y,e){!function(e,g){!function(){var n=t("assert"),o=t("debug")("stream-parser");y.exports=function(e){var t=e&&"function"==typeof e._transform,n=e&&"function"==typeof e._write;if(!t&&!n)throw new Error("must pass a Writable or Transform stream in");o("extending Parser into stream"),e._bytes=i,e._skipBytes=u,t&&(e._passthrough=d);t?e._transform=p:e._write=f};var s=-1,l=0,r=1,c=2;function a(e){o("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=s,e._parserCallback=null,"function"==typeof e.push&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function i(e,t){n(!this._parserCallback,'there is already a "callback" set!'),n(isFinite(e)&&0<e,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||a(this),o("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=l}function u(e,t){n(!this._parserCallback,'there is already a "callback" set!'),n(0<e,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||a(this),o("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=r}function d(e,t){n(!this._parserCallback,'There is already a "callback" set!'),n(0<e,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||a(this),o("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=c}function f(e,t,n){this._parserInit||a(this),o("write(%o bytes)",e.length),h(this,e,null,n="function"==typeof t?t:n)}function p(e,t,n){this._parserInit||a(this),o("transform(%o bytes)",e.length),"function"!=typeof t&&(t=this._parserOutput),h(this,e,t,n)}function e(e,t,n,r){if(e._parserBytesLeft-=t.length,o("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===l?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===c&&n(t),0!==e._parserBytesLeft)return r;var a=e._parserCallback;if(a&&e._parserState===l&&1<e._parserBuffers.length&&(t=g.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==l&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=s,e._parserBuffers.splice(0),a){var i=[];t&&i.push(t),n&&i.push(n);n=a.length>i.length;n&&i.push(m(r));i=a.apply(e,i);if(!n||r===i)return r}}var h=m(function n(r,a,i,o){return r._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):a.length<=r._parserBytesLeft?function(){return e(r,a,i,o)}:function(){var t=a.slice(0,r._parserBytesLeft);return e(r,t,i,function(e){return e?o(e):a.length>t.length?function(){return n(r,a.slice(t.length),i,o)}:void 0})}});function m(t){return function(){for(var e=t.apply(this,arguments);"function"==typeof e;)e=e();return e}}}.call(this)}.call(this,t("_process"),t("buffer").Buffer)},{_process:96,assert:21,buffer:28,debug:115}],115:[function(n,r,a){!function(t){!function(){function e(){var e;try{e=a.storage.debug}catch(e){}return e=!e&&void 0!==t&&"env"in t?t.env.DEBUG:e}(a=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t,n,r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+a.humanize(this.diff),r&&(r="color: "+this.color,e.splice(1,0,r,"color: inherit"),e[n=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(n=t))}),e.splice(n,0,r))},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=e,a.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(e())}.call(this)}.call(this,n("_process"))},{"./debug":116,_process:96}],116:[function(e,t,s){var l;function n(e){function o(){if(o.enabled){var r=o,e=+new Date,t=e-(l||e);r.diff=t,r.prev=l,r.curr=e,l=e;for(var a=new Array(arguments.length),n=0;n<a.length;n++)a[n]=arguments[n];a[0]=s.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var i=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;i++;var n=s.formatters[t];return"function"==typeof n&&(t=a[i],e=n.call(r,t),a.splice(i,1),i--),e}),s.formatArgs.call(r,a),(o.log||s.log||console.log.bind(console)).apply(r,a)}}return o.namespace=e,o.enabled=s.enabled(e),o.useColors=s.useColors(),o.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return s.colors[Math.abs(n)%s.colors.length]}(e),"function"==typeof s.init&&s.init(o),o}(s=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},s.disable=function(){s.enable("")},s.enable=function(e){s.save(e),s.names=[],s.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")))},s.enabled=function(e){var t,n;for(t=0,n=s.skips.length;t<n;t++)if(s.skips[t].test(e))return!1;for(t=0,n=s.names.length;t<n;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=e("ms"),s.names=[],s.skips=[],s.formatters={}},{ms:117}],117:[function(e,t,n){function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(e);if("number"==n&&!1===isNaN(e))return t.long?r(t=e,864e5,"day")||r(t,36e5,"hour")||r(t,6e4,"minute")||r(t,1e3,"second")||t+" ms":function(e){if(864e5<=e)return Math.round(e/864e5)+"d";if(36e5<=e)return Math.round(e/36e5)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],118:[function(l,e,c){!function(n,s){!function(){var r=l("process/browser.js").nextTick,e=Function.prototype.apply,a=Array.prototype.slice,i={},o=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof n?n:function(e){var t=o++,n=!(arguments.length<2)&&a.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete i[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":96,timers:118}],119:[function(e,B,t){!function(l){var c=/^\s+/,u=/\s+$/,r=0,i=l.round,d=l.min,f=l.max,e=l.random;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(c,"").replace(u,"").toLowerCase();var t,n=!1;if(A[e])e=A[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=j.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=j.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=j.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=j.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=j.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=j.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=j.hex8.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),a:R(t[4]),format:n?"name":"hex8"};if(t=j.hex6.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),format:n?"name":"hex"};if(t=j.hex4.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),a:R(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=j.hex3.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(t=function(e,t,n){return{r:255*L(e,255),g:255*L(t,255),b:255*L(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(r=P(e.s),a=P(e.v),t=function(e,t,n){e=6*L(e,360),t=L(t,100),n=L(n,100);var r=l.floor(e),a=e-r,i=n*(1-t),e=n*(1-a*t),t=n*(1-(1-a)*t),r=r%6;return{r:255*[n,e,i,i,t,n][r],g:255*[t,n,n,e,i,i][r],b:255*[i,i,t,n,n,e][r]}}(e.h,r,a),o=!0,s="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(r=P(e.s),i=P(e.l),t=function(e,t,n){var r,a,i;function o(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e=L(e,360),t=L(t,100),n=L(n,100),0===t?r=a=i=n:(r=o(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),a=o(t,n,e),i=o(t,n,e-1/3));return{r:255*r,g:255*a,b:255*i}}(e.h,r,i),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=E(n),{ok:o,format:e.format||s,r:d(255,f(t.r,0)),g:d(255,f(t.g,0)),b:d(255,f(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=i(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=n.ok,this._tc_id=r++}function a(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var r,a=f(e,t,n),i=d(e,t,n),o=(a+i)/2;if(a==i)r=l=0;else{var s=a-i,l=.5<o?s/(2-a-i):s/(a+i);switch(a){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,l:o}}function o(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var r,a=f(e,t,n),i=d(e,t,n),o=a,s=a-i,l=0===a?0:s/a;if(a==i)r=0;else{switch(a){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,v:o}}function t(e,t,n,r){n=[O(i(e).toString(16)),O(i(t).toString(16)),O(i(n).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function s(e,t,n,r){return[O(I(r)),O(i(e).toString(16)),O(i(t).toString(16)),O(i(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.s-=t/100,e.s=C(e.s),p(e)}function h(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.s+=t/100,e.s=C(e.s),p(e)}function m(e){return p(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.l+=t/100,e.l=C(e.l),p(e)}function y(e,t){t=0===t?0:t||10;e=p(e).toRgb();return e.r=f(0,d(255,e.r-i(-t/100*255))),e.g=f(0,d(255,e.g-i(-t/100*255))),e.b=f(0,d(255,e.b-i(-t/100*255))),p(e)}function v(e,t){t=0===t?0:t||10;e=p(e).toHsl();return e.l-=t/100,e.l=C(e.l),p(e)}function x(e,t){e=p(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,p(e)}function b(e){e=p(e).toHsl();return e.h=(e.h+180)%360,p(e)}function _(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+120)%360,s:t.s,l:t.l}),p({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+90)%360,s:t.s,l:t.l}),p({h:(n+180)%360,s:t.s,l:t.l}),p({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+72)%360,s:t.s,l:t.l}),p({h:(n+216)%360,s:t.s,l:t.l})]}function M(e,t,n){t=t||6,n=n||30;var r=p(e).toHsl(),a=360/n,i=[p(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,i.push(p(r));return i}function k(e,t){t=t||6;for(var e=p(e).toHsv(),n=e.h,r=e.s,a=e.v,i=[],o=1/t;t--;)i.push(p({h:n,s:r,v:a})),a=(a+o)%1;return i}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:l.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:l.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:l.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=E(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),e=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),e=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){r=[O(i(e).toString(16)),O(i(t).toString(16)),O(i(n).toString(16)),O(I(r))];if(a&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*L(this._r,255))+"%",g:i(100*L(this._g,255))+"%",b:i(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*L(this._r,255))+"%, "+i(100*L(this._g,255))+"%, "+i(100*L(this._b,255))+"%)":"rgba("+i(100*L(this._r,255))+"%, "+i(100*L(this._g,255))+"%, "+i(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&S[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+s((e=p(e))._r,e._g,e._b,e._a):n)+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){t=e.apply(null,[this].concat([].slice.call(t)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:P(e[n]));e=r}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:e(),g:e(),b:e()})},p.mix=function(e,t,n){n=0===n?0:n||50;e=p(e).toRgb(),t=p(t).toRgb(),n/=100;return p({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},p.readability=function(e,t){e=p(e),t=p(t);return(l.max(e.getLuminance(),t.getLuminance())+.05)/(l.min(e.getLuminance(),t.getLuminance())+.05)},p.isReadable=function(e,t,n){var r=p.readability(e,t),a=!1,n=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(n);switch(n.level+n.size){case"AAsmall":case"AAAlarge":a=4.5<=r;break;case"AAlarge":a=3<=r;break;case"AAAsmall":a=7<=r}return a},p.mostReadable=function(e,t,n){for(var r,a=null,i=0,o=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,c=0;c<t.length;c++)i<(r=p.readability(e,t[c]))&&(i=r,a=p(t[c]));return p.isReadable(e,a,{level:s,size:l})||!o?a:(n.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],n))};var A=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=p.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(A);function E(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function L(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n,n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=d(t,f(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),l.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return d(1,f(0,e))}function D(e){return parseInt(e,16)}function O(e){return 1==e.length?"0"+e:""+e}function P(e){return e=e<=1?100*e+"%":e}function I(e){return l.round(255*parseFloat(e)).toString(16)}function R(e){return D(e)/255}var N,z,F,j=(z="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",F="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(e){return j.CSS_UNIT.exec(e)}void 0!==B&&B.exports?B.exports=p:window.tinycolor=p}(Math)},{}],120:[function(e,n,t){!function(t){!function(){function r(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}n.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],121:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(o.prototype=new a.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e){var n=e.match(l);return n?n[0]:""}var r=this._validateYear(e),n=e.month(),e=""+this.toChineseMonth(r,n);return t&&e.length<2&&(e="0"+e),this.isIntercalaryMonth(r,n)&&(e+="i"),e},monthNames:function(e){if("string"==typeof e){var t=e.match(r);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},monthNamesShort:function(e){if("string"==typeof e){var t=e.match(c);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);return isNaN(r)?(""===t[0]&&(n=!0,t=t.substring(1)),""===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["","","","","","","","","","","",""].indexOf(t)):n="i"===(t=t[t.length-1])||"I"===t,this.toMonthIndex(e,r,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if("number"!=typeof(e=e.year?e.year():e)||e<1888||2111<e)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){e=this.intercalaryMonth(e);if(n&&t!==e||t<1||12<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||!n&&t<=e?t-1:t},toChineseMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);if(t<0||(e?12:11)<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||t<e?t+1:t},intercalaryMonth:function(e){return e=this._validateYear(e),f[e-f[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);return!!e&&e===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var r=this._validateYear(e,a.local.invalidyear),r=p[r-p[0]],r=i.newDate(r>>9&4095,r>>5&15,31&r);r.add(4-(r.dayOfWeek()||7),"d");r=this.toJD(e,t,n)-r.toJD();return 1+Math.floor(r/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);e=f[e-f[0]];if((e>>13?12:11)<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return e&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,void 0,n,a.local.invalidDate);e=this._validateYear(r.year()),t=r.month(),n=r.day();r=this.isIntercalaryMonth(e,t),r=function(e,t,n,r,a){var i,o;if("object"==typeof e)d=e,i=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=30))throw new Error("Lunar day outside range 1 - 30");i="object"==typeof r?(c=!1,r):(c=!!r,a||{}),d={year:e,month:t,day:n,isIntercalary:c}}o=d.day-1;var s,l=f[d.year-f[0]],c=l>>13;s=c&&(d.month>c||d.isIntercalary)?d.month:d.month-1;for(var u=0;u<s;u++)o+=l&1<<12-u?30:29;var d=p[d.year-p[0]],d=new Date(d>>9&4095,(d>>5&15)-1,(31&d)+o);return i.year=d.getFullYear(),i.month=1+d.getMonth(),i.day=d.getDate(),i}(e,this.toChineseMonth(e,t),n,r);return i.toJD(r.year,r.month,r.day)},fromJD:function(e){var t=i.fromJD(e),e=function(e,t,n,r){var a;if("object"==typeof e)o=e,a=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=31))throw new Error("Solar day outside range 1 - 31");o={year:e,month:t,day:n},a=r||{}}n=p[o.year-p[0]],r=o.year<<9|o.month<<5|o.day;a.year=n<=r?o.year:o.year-1,n=p[a.year-p[0]];var i,n=new Date(n>>9&4095,(n>>5&15)-1,31&n),o=new Date(o.year,o.month-1,o.day);i=Math.round((o-n)/864e5);var s,l=f[a.year-f[0]];for(s=0;s<13;s++){var c=l&1<<12-s?30:29;if(i<c)break;i-=c}n=l>>13;!n||s<n?(a.isIntercalary=!1,a.month=1+s):(a.isIntercalary=s===n,a.month=s);return a.day=1+i,a}(t.year(),t.month(),t.day()),t=this.toMonthIndex(e.year,e.month,e.isIntercalary);return this.newDate(e.year,t,e.day)},fromString:function(e){var t=e.match(s),n=this._validateYear(+t[1]),r=+t[2],e=!!t[3],e=this.toMonthIndex(n,r,e),t=+t[4];return this.newDate(n,e,t)},add:function(e,t,n){var r=e.year(),a=e.month(),i=this.isIntercalaryMonth(r,a),r=this.toChineseMonth(r,a),a=Object.getPrototypeOf(o.prototype).add.call(this,e,t,n);return"y"===n&&(e=a.year(),t=a.month(),n=this.isIntercalaryMonth(e,r),(r=i&&n?this.toMonthIndex(e,r,!0):this.toMonthIndex(e,r,!1))!==t&&a.month(r)),a}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,l=/^\d?\d[iI]?/m,r=/^??[]?/m,c=/^??[]?/m;a.calendars.chinese=o;var f=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":135,"object-assign":71}],122:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.coptic=a},{"../main":135,"object-assign":71}],123:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),400},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,a.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){n=this.dayOfWeek(e,t,n);return 2<=n&&n<=6},extraInfo:function(e,t,n){n=this._validate(e,t,n,a.local.invalidDate);return{century:i[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year()+(r.year()<0?1:0),t=r.month(),(n=r.day())+(1<t?16:0)+(2<t?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=15<e?16:0;var n=Math.floor(e/32)+1;return this.newDate(t<=0?t-1:t,n,e-32*(n-1)+1)}});var i={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=r},{"../main":135,"object-assign":71}],124:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.ethiopian=a},{"../main":135,"object-assign":71}],125:[function(e,t,n){var o=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new o.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this._leapYear(e.year())},_leapYear:function(e){return a(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,o.local.invalidMonth),12===t&&this.leapYear(e)||8===t&&5===a(this.daysInYear(e),10)?30:9===t&&3===a(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){n=this._validate(e,t,n,o.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=e<=0?e+1:e,a=this.jdEpoch+this._delay1(r)+this._delay2(r)+n+1;if(t<7){for(var i=7;i<=this.monthsInYear(e);i++)a+=this.daysInMonth(e,i);for(i=1;i<t;i++)a+=this.daysInMonth(e,i)}else for(i=7;i<t;i++)a+=this.daysInMonth(e,i);return a},_delay1:function(e){e=Math.floor((235*e-234)/19),e=29*e+Math.floor((12084+13753*e)/25920);return a(3*(e+1),7)<3&&e++,e},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),o.calendars.hebrew=r},{"../main":135,"object-assign":71}],126:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,a.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year(),t=r.month(),e=e<=0?e+1:e,(n=r.day())+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=(t=Math.floor((30*(e-this.jdEpoch)+10646)/10631))<=0?t-1:t,n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),e=e-this.toJD(t,n,1)+1;return this.newDate(t,n,e)}}),a.calendars.islamic=r},{"../main":135,"object-assign":71}],127:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return(e=t.year()<0?t.year()+1:t.year())%4==0},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5)+1524,n=Math.floor((t-122.1)/365.25),r=Math.floor(365.25*n),a=Math.floor((t-r)/30.6001),e=a-Math.floor(a<14?1:13),n=n-Math.floor(2<e?4716:4715),a=t-r-Math.floor(30.6001*a);return n<=0&&n--,this.newDate(n,e,a)}}),a.calendars.julian=r},{"../main":135,"object-assign":71}],128:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}function o(e,t){return i(e-1,t)+1}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year();var t=Math.floor(e/400);return e%=400,e+=e<0?400:0,t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(19<Math.abs(r)||0<n&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),!0},extraInfo:function(e,t,n){t=this._validate(e,t,n,r.local.invalidDate).toJD(),n=this._toHaab(t),t=this._toTzolkin(t);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[t[0]-1],tzolkinDay:t[0],tzolkinTrecena:t[1]}},_toHaab:function(e){e=i((e-=this.jdEpoch)+8+340,365);return[Math.floor(e/20)+1,i(e,20)]},_toTzolkin:function(e){return[o((e-=this.jdEpoch)+20,20),o(e+4,13)]},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20);return this.newDate(t,n,e%20)}}),r.calendars.mayan=a},{"../main":135,"object-assign":71}],129:[function(e,t,n){var o=e("../main"),e=e("object-assign");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}r.prototype=new o.baseCalendar;var s=o.instance("gregorian");e(r.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(e.year()+(e.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidMonth);(e=r.year())<0&&e++;for(var a=r.day(),i=1;i<r.month();i++)a+=this.daysPerMonth[i-1];return a+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),o.calendars.nanakshahi=r},{"../main":135,"object-assign":71}],130:[function(e,t,n){var s=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new s.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var t=0,n=this.minMonth;n<=12;n++)t+=this.NEPALI_CALENDAR_DATA[e][n];return t},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=s.instance(),a=0,i=t,o=e;this._createMissingCalendarData(e);e-=9<i||9===i&&n>=this.NEPALI_CALENDAR_DATA[o][0]?56:57;for(9!==t&&(a=n,i--);9!==i;)i<=0&&(i=12,o--),a+=this.NEPALI_CALENDAR_DATA[o][i],i--;return 9===t?(a+=n-this.NEPALI_CALENDAR_DATA[o][0])<0&&(a+=r.daysInYear(e)):a+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],r.newDate(e,1,1).add(a,"d").toJD()},fromJD:function(e){var t=s.instance().fromJD(e),e=t.year(),n=t.dayOfYear(),r=e+56;this._createMissingCalendarData(r);for(var a=9,e=this.NEPALI_CALENDAR_DATA[r][0],i=this.NEPALI_CALENDAR_DATA[r][a]-e+1;i<n;)12<++a&&(a=1,r++),i+=this.NEPALI_CALENDAR_DATA[r][a];e=this.NEPALI_CALENDAR_DATA[r][a]-(i-n);return this.newDate(r,a,e)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),s.calendars.nepali=r},{"../main":135,"object-assign":71}],131:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 682*((e.year()-(0<e.year()?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-(n.dayOfWeek()+1)%7,"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);e=r.year(),t=r.month(),n=r.day();r=e-(0<=e?474:473),e=474+i(r,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*e-110)/2816)+365*(e-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(t/1029983),r=i(t,1029983),a=2820;1029982!==r&&(t=Math.floor(r/366),r=i(r,366),a=Math.floor((2134*t+2816*r+2815)/1028522)+t+1);a=(a=a+2820*n+474)<=0?a-1:a,n=e-this.toJD(a,1,1)+1,n=n<=186?Math.ceil(n/31):Math.ceil((n-6)/30),e=e-this.toJD(a,n,1)+1;return this.newDate(a,n,e)}}),a.calendars.persian=r,a.calendars.jalali=r},{"../main":135,"object-assign":71}],132:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new a.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,a.local.invalidDate),e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)}}),a.calendars.taiwan=r},{"../main":135,"object-assign":71}],133:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new a.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,a.local.invalidDate),e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),a.calendars.thai=r},{"../main":135,"object-assign":71}],134:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return 355===this.daysInYear(e.year())},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,i.local.invalidMonth).toJD()-24e5+.5,r=0,a=0;a<o.length;a++){if(o[a]>n)return o[r]-o[r-1];r++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){t=this._validate(e,t,n,i.local.invalidDate),n=12*(t.year()-1)+t.month()-15292;return 24e5+(t.day()+o[n-1]-1)-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<o.length&&!(o[r]>t);r++)n++;var a=n+15292,i=Math.floor((a-1)/12),e=t-o[n-1]+1;return this.newDate(i+1,a-12*i,e)},isValid:function(e,t,n){return i.baseCalendar.prototype.isValid.apply(this,arguments)&&(1276<=(e=null!=e.year?e.year:e)&&e<=1500)},_validate:function(e,t,n,r){var a=i.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||1500<a.year)throw r.replace(/\{0\}/,this.local.name);return a}}),i.calendars.ummalqura=r;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":135,"object-assign":71}],135:[function(e,t,n){e=e("object-assign");function r(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function a(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function i(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function o(){this.shortYearCutoff="+10"}function s(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}e(r.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();var n=this._localCals[e+"-"+(t=t||"")];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,a){return(r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,a):r)||this.instance()).newDate(e,t,n)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(a,i){return function(e){for(var t="",n=0;0<e;){var r=e%10,t=(0==r?"":a[r]+i[n])+t;n++,e=Math.floor(e/10)}return(t=0===t.indexOf(a[1]+i[1])?t.substr(1):t)||a[0]}}}),e(a.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0==e?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+i(Math.abs(this.year()),4)+"-"+i(this.month(),2)+"-"+i(this.day(),2)}}),e(o.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new a(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+i(Math.abs(e.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return(t.month()+this.monthsInYear(t)-this.firstMonth)%this.monthsInYear(t)+this.minMonth},fromMonthOfYear:function(e,t){t=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth),t},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),r=e.calendar().fromJD(r);return this._validateLevel--,[r.year(),r.month(),r.day()]}try{var a=e.year()+("y"===n?t:0),i=e.monthOfYear()+("m"===n?t:0),r=e.day();"y"===n?(e.month()!==this.fromMonthOfYear(a,i)&&(i=this.newDate(a,e.month(),this.minDay).monthOfYear()),i=Math.min(i,this.monthsInYear(a)),r=Math.min(r,this.daysInMonth(a,this.fromMonthOfYear(a,i)))):"m"===n&&(function(e){for(;i<e.minMonth;)a--,i+=e.monthsInYear(a);for(var t=e.monthsInYear(a);i>t-1+e.minMonth;)a++,i-=t,t=e.monthsInYear(a)}(this),r=Math.min(r,this.daysInMonth(a,this.fromMonthOfYear(a,i))));var o=[a,this.fromMonthOfYear(a,i),r];return this._validateLevel--,o}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){return this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&0<e.year()==0<t[0]||(r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],t=this._add(e,n*r[0]+(n<0?-1:1)*r[1],r[2])),e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),a="m"===n?t:e.month(),t="d"===n?t:e.day();return"y"!==n&&"m"!==n||(t=Math.min(t,this.daysInMonth(r,a))),e.date(r,a,t)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;return r&&(e=this.newDate(e,t,this.minDay),r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(e)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(e)),this._validateLevel--,r},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return l.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(l.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var a=this.newDate(e,t,n);return this._validateLevel--,a}catch(e){throw this._validateLevel--,e}}}),e(s.prototype=new o,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);r=Math.floor(e/100),r=2-r+Math.floor(r/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25),r=1524+(n=t+1+n-Math.floor(n/4)),e=Math.floor((r-122.1)/365.25),t=Math.floor(365.25*e),n=Math.floor((r-t)/30.6001),t=r-t-Math.floor(30.6001*n),n=n-(13.5<n?13:1),e=e-(2.5<n?4716:4715);return e<=0&&e--,this.newDate(e,n,t)},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=new Date(n.year(),n.month()-1,n.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(12<n.getHours()?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var l=t.exports=new r;l.cdate=a,l.baseCalendar=o,l.calendars.gregorian=s},{"object-assign":71}],136:[function(e,t,n){var r=e("object-assign"),A=e("./main");r(A.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),A.local=A.regionalOptions[""],r(A.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(A.baseCalendar.prototype,{UNIX_EPOCH:A.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:A.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,e,t){if("string"!=typeof r&&(t=e,e=r,r=""),!e)return"";if(e.calendar()!==this)throw A.local.invalidFormat||A.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;function i(e,t){for(var n=1;_+n<r.length&&r.charAt(_+n)===e;)n++;return _+=n-1,1<Math.floor(n/(t||1))}function n(e,t,n,r){var a=""+t;if(i(e,r))for(;a.length<n;)a="0"+a;return a}for(var a,o,s,l,c,u,d=(t=t||{}).dayNamesShort||this.local.dayNamesShort,f=t.dayNames||this.local.dayNames,p=t.monthNumbers||this.local.monthNumbers,h=t.monthNamesShort||this.local.monthNamesShort,m=t.monthNames||this.local.monthNames,g=(t.calculateWeek||this.local.calculateWeek,this),y=this.local.digits,v=function(e){return t.localNumbers&&y?y(e):e},x="",b=!1,_=0;_<r.length;_++)if(b)"'"!==r.charAt(_)||i("'")?x+=r.charAt(_):b=!1;else switch(r.charAt(_)){case"d":x+=v(n("d",e.day(),2));break;case"D":x+=(s="D",l=e.dayOfWeek(),c=d,u=f,(i(s)?u:c)[l]);break;case"o":x+=n("o",e.dayOfYear(),3);break;case"w":x+=n("w",e.weekOfYear(),2);break;case"m":x+=(o=e,"function"==typeof p?p.call(g,o,i("m")):v(n("m",o.month(),2)));break;case"M":x+=(a=e,i("M")?"function"==typeof m?m.call(g,a):m[a.month()-g.minMonth]:"function"==typeof h?h.call(g,a):h[a.month()-g.minMonth]);break;case"y":x+=i("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":i("Y",2),x+=e.formatYear();break;case"J":x+=e.toJD();break;case"@":x+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?x+="'":b=!0;break;default:x+=r.charAt(_)}return x},parseDate:function(r,o,e){if(null==o)throw A.local.invalidArguments||A.regionalOptions[""].invalidArguments;if(""===(o="object"==typeof o?o.toString():o+""))return null;r=r||this.local.dateFormat;function s(e,t){for(var n=1;T+n<r.length&&r.charAt(T+n)===e;)n++;return T+=n-1,1<Math.floor(n/(t||1))}function t(e,t){if(t=s(e,t),e=[2,3,t?4:2,t?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],e=new RegExp("^-?\\d{1,"+e+"}"),!(e=o.substring(w).match(e)))throw(A.local.missingNumberAt||A.regionalOptions[""].missingNumberAt).replace(/\{0\}/,w);return w+=e[0].length,parseInt(e[0],10)}function n(e,t,n,r){for(var a=s(e,r)?n:t,i=0;i<a.length;i++)if(o.substr(w,a[i].length).toLowerCase()===a[i].toLowerCase())return w+=a[i].length,i+_.minMonth;throw(A.local.unknownNameAt||A.regionalOptions[""].unknownNameAt).replace(/\{0\}/,w)}function a(){if(o.charAt(w)!==r.charAt(T))throw(A.local.unexpectedLiteralAt||A.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,w);w++}for(var i="string"!=typeof(i=(e=e||{}).shortYearCutoff||this.shortYearCutoff)?i:this.today().year()%100+parseInt(i,10),l=e.dayNamesShort||this.local.dayNamesShort,c=e.dayNames||this.local.dayNames,u=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,f=e.monthNamesShort||this.local.monthNamesShort,p=e.monthNames||this.local.monthNames,h=-1,m=-1,g=-1,y=-1,v=-1,x=!1,b=!1,_=this,w=0,T=0;T<r.length;T++)if(b)"'"!==r.charAt(T)||s("'")?a():b=!1;else switch(r.charAt(T)){case"d":y=t("d");break;case"D":n("D",l,c);break;case"o":v=t("o");break;case"w":t("w");break;case"m":g=function(){if("function"!=typeof d)return t("m");s("m");var e=d.call(_,o.substring(w));return w+=e.length,e}();break;case"M":g=function(){if("function"!=typeof p)return n("M",f,p);var e=(s("M")?p:f).call(_,o.substring(w));return w+=e.length,e}();break;case"y":var M=T,x=!s("y",2),T=M,m=t("y",2);break;case"Y":m=t("Y",2);break;case"J":h=t("J")+.5,"."===o.charAt(w)&&(w++,t("J"));break;case"@":h=t("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":h=t("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":w=o.length;break;case"'":s("'")?a():b=!0;break;default:a()}if(w<o.length)throw A.local.unexpectedText||A.regionalOptions[""].unexpectedText;if(-1===m?m=this.today().year():m<100&&x&&(m+=-1===i?1900:this.today().year()-this.today().year()%100-(m<=i?0:100)),"string"==typeof g&&(g=u.call(this,m,g)),-1<v)for(var g=1,y=v,k=this.daysInMonth(m,g);k<y;k=this.daysInMonth(m,g))g++,y-=k;return-1<h?this.fromJD(h):this.newDate(m,g,y)},determineDate:function(e,t,a,i,o){a&&"object"!=typeof a&&(o=i,i=a,a=null),"string"!=typeof i&&(o=i,i="");var s=this;return t=t?t.newDate():null,e=null==e?t:"string"==typeof e?function(e){try{return s.parseDate(i,e,o)}catch(e){}for(var t=((e=e.toLowerCase()).match(/^c/)&&a?a.newDate():null)||s.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,r=n.exec(e);r;)t.add(parseInt(r[1],10),r[2]||"d"),r=n.exec(e);return t}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e)}})},{"./main":135,"object-assign":71}],137:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],138:[function(e,t,n){"use strict";var r=e("./arrow_paths"),a=e("../../plots/font_attributes"),i=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/font_attributes":360,"./arrow_paths":137}],139:[function(e,t,n){"use strict";var r=e("../../lib"),h=e("../../plots/cartesian/axes"),a=e("./draw").draw;function i(i){var e=i._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var t=h.getFromId(i,e.xref),n=h.getFromId(i,e.yref),r=h.getRefType(e.xref),a=h.getRefType(e.yref);e._extremes={},"range"===r&&o(e,t),"range"===a&&o(e,n)})}function o(e,t){var n=t._id,r=n.charAt(0),a=e[r],i=e["a"+r],o=e[r+"ref"],s=e["a"+r+"ref"],l=e["_"+r+"padplus"],c=e["_"+r+"padminus"],u={x:1,y:-1}[r]*e[r+"shift"],d=3*e.arrowsize*e.arrowwidth||0,f=d+u,p=d-u,r=3*e.startarrowsize*e.arrowwidth||0,d=r+u,u=r-u;u=s===o?(s=h.findExtremes(t,[t.r2c(a)],{ppadplus:f,ppadminus:p}),o=h.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,d),ppadminus:Math.max(c,u)}),{min:[s.min[0],o.min[0]],max:[s.max[0],o.max[0]]}):(d=i?d+i:d,u=i?u-i:u,h.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,f,d),ppadminus:Math.max(c,p,u)})),e._extremes[n]=u}t.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([a,i],e)}},{"../../lib":285,"../../plots/cartesian/axes":331,"./draw":144}],140:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../registry"),u=e("../../plot_api/plot_template").arrayEditor;function d(e,t){for(var n,r,a,i,o,s,l=e._fullLayout.annotations,c=[],u=[],d=[],f=(t||[]).length,p=0;p<l.length;p++)if(a=(r=l[p]).clicktoshow){for(n=0;n<f;n++)if(o=(i=t[n]).xaxis,s=i.yaxis,o._id===r.xref&&s._id===r.yref&&o.d2r(i.x)===h(r._xclick,o)&&s.d2r(i.y)===h(r._yclick,s)){(r.visible?"onout"===a?u:d:c).push(p);break}n===f&&r.visible&&"onout"===a&&u.push(p)}return{on:c,off:u,explicitOff:d}}function h(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){t=d(e,t);return 0<t.on.length||0<t.explicitOff.length},onClick:function(e,t){var n,r,t=d(e,t),a=t.on,i=t.off.concat(t.explicitOff),o={},s=e._fullLayout.annotations;if(a.length||i.length){for(n=0;n<a.length;n++)(r=u(e.layout,"annotations",s[a[n]])).modifyItem("visible",!0),l.extendFlat(o,r.getUpdateObj());for(n=0;n<i.length;n++)(r=u(e.layout,"annotations",s[i[n]])).modifyItem("visible",!1),l.extendFlat(o,r.getUpdateObj());return c.call("update",e,{},o)}}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373}],141:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../color");t.exports=function(e,t,n,r){r("opacity");var a=r("bgcolor"),i=r("bordercolor"),o=d.opacity(i);r("borderpad");var s,l,c=r("borderwidth"),i=r("showarrow");r("text",i?" ":n._dfltTitle.annotation),r("textangle"),u.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),i&&(-1!==(i=r("arrowside")).indexOf("end")&&(s=r("arrowhead"),l=r("arrowsize")),-1!==i.indexOf("start")&&(r("startarrowhead",s),r("startarrowsize",l)),r("arrowcolor",o?t.bordercolor:d.defaultLine),r("arrowwidth",2*(o&&c||1)),r("standoff"),r("startstandoff"));c=r("hovertext"),n=n.hoverlabel||{};c&&(a=r("hoverlabel.bgcolor",n.bgcolor||(d.opacity(a)?d.rgb(a):d.defaultLine)),a=r("hoverlabel.bordercolor",n.bordercolor||d.contrast(a)),u.coerceFont(r,"hoverlabel.font",{family:n.font.family,size:n.font.size,color:n.font.color||a})),r("captureevents",!!c)}},{"../../lib":285,"../color":155}],142:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib/to_log_range");t.exports=function(e,r,t,a){r=r||{};var i="log"===t&&"linear"===r.type,t="linear"===t&&"log"===r.type;if(i||t)for(var o,s,n=e._fullLayout.annotations,l=r._id.charAt(0),c=0;c<n.length;c++)o=n[c],s="annotations["+c+"].",o[l+"ref"]===r._id&&u(l),o["a"+l+"ref"]===r._id&&u("a"+l);function u(e){var t=o[e],n=null,n=i?f(t,r.range):Math.pow(10,t);d(n)||(n=null),a(s+e,n)}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],143:[function(e,t,n){"use strict";var m=e("../../lib"),g=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),y=e("./common_defaults"),v=e("./attributes");function a(n,r,e){function t(e,t){return m.coerce(n,r,v,e,t)}var a=t("visible"),i=t("clicktoshow");if(a||i){y(n,r,e,t);for(var o=r.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:e},u=0;u<2;u++){var d,f,p=s[u],h=g.coerceRef(n,r,c,p,"","paper");"paper"!==h&&g.getFromId(c,h)._annIndices.push(r._index),g.coercePosition(r,c,t,h,p,.5),o&&("pixel"!==(f=g.coerceRef(n,r,c,d="a"+p,"pixel",["pixel","paper"]))&&f!==h&&(f=r[d]="pixel"),g.coercePosition(r,c,t,f,d,"pixel"===f?l[u]:.4)),t(p+"anchor"),t(p+"shift")}m.noneOrAll(n,r,["x","y"]),o&&m.noneOrAll(n,r,["ax","ay"]),i&&(e=t("xclick"),i=t("yclick"),r._xclick=void 0===e?r.x:g.cleanPosition(e,c,r.xref),r._yclick=void 0===i?r.y:g.cleanPosition(i,c,r.yref))}}t.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:a})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":138,"./common_defaults":141}],144:[function(e,t,n){"use strict";var o=e("@plotly/d3"),ae=e("../../registry"),r=e("../../plots/plots"),ie=e("../../lib"),oe=ie.strTranslate,se=e("../../plots/cartesian/axes"),le=e("../color"),ce=e("../drawing"),s=e("../fx"),ue=e("../../lib/svg_text_utils"),de=e("../../lib/setcursor"),fe=e("../dragelement"),l=e("../../plot_api/plot_template").arrayEditor,pe=e("./draw_arrow_head");function a(e,t){var n=e._fullLayout.annotations[t]||{},r=se.getFromId(e,n.xref),a=se.getFromId(e,n.yref);r&&r.setScale(),a&&a.setScale(),i(e,n,t,!1,r,a)}function he(e,t,n,r,a){var i=a[n],a=a[n+"ref"],n=-1!==n.indexOf("y"),a="domain"===se.getRefType(a),r=n?r.h:r.w;return e?a?i+(n?-t:t)/e._length:e.p2r(e.r2p(i)+t):i+(n?-t:t)/r}function i(P,I,t,R,N,z){var F=P._fullLayout,j=P._fullLayout._size,H=P._context.edits,e=R?(r="annotation-"+R,R+".annotations"):(r="annotation","annotations"),e=l(P.layout,e,I),B=e.modifyBase,q=e.modifyItem,U=e.getUpdateObj;F._infolayer.selectAll("."+r+'[data-index="'+t+'"]').remove();var Y,V,G,W,Z,$,X,J,K,Q,ee,n,r,te,ne="clip"+F._uid+"_ann"+t;function re(e){e={index:t,annotation:I._input,fullAnnotation:I,event:e};return R&&(e.subplotId=R),e}function a(e){return e.call(ce.font,n).attr({"text-anchor":{left:"start",right:"end"}[I.align]||"middle"}),ue.convertToTspans(e,P,i),e}function i(){var e=te.selectAll("a");1===e.size()&&e.text()===te.text()&&$.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(K.node());var t=$.select(".annotation-text-math-group"),n=!t.empty(),r=ce.bBox((n?t:te).node()),a=r.width,i=r.height,o=I.width||a,s=I.height||i,l=Math.round(o+2*J),c=Math.round(s+2*J);function u(e,t){return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t="auto"===t?e<1/3?"left":2/3<e?"right":"center":t]}for(var d,f,p,h=!1,m=["x","y"],g=0;g<m.length;g++){var y,v,x,b,_,w=m[g],T=I[w+"ref"]||w,M=I["a"+w+"ref"],k={x:N,y:z}[w],A=(V+("x"===w?0:-90))*Math.PI/180,S=l*Math.cos(A),E=c*Math.sin(A),L=Math.abs(S)+Math.abs(E),C=I[w+"anchor"],D=I[w+"shift"]*("x"===w?1:-1),O=Y[w],A=se.getRefType(T);A=k&&"domain"!==A?(((v=k.r2fraction(I[w]))<0||1<v)&&(M!==T||(v=k.r2fraction(I["a"+w]))<0||1<v)&&(h=!0),v=k._offset+k.r2p(I[w]),.5):(_="domain"===A,v="x"===w?(y=I[w],_?k._offset+k._length*y:j.l+j.w*y):(y=1-I[w],_?k._offset+k._length*y:j.t+j.h*y),I.showarrow?.5:y),I.showarrow?(O.head=v,_=I["a"+w],x=S*u(.5,I.xanchor)-E*u(.5,I.yanchor),b=M===T?(b=se.getRefType(M),O.tail="domain"===b?k._offset+k._length*(_="y"===w?1-_:_):"paper"===b?"y"===w?j.t+j.h*(_=1-_):j.l+j.w*_:k._offset+k.r2p(_),x):(O.tail=v+_,x+_),O.text=O.tail+x,_=F["x"===w?"width":"height"],"paper"===T&&(O.head=ie.constrain(O.head,1,_-1)),"pixel"===M&&(M=-Math.max(O.tail-3,O.text),_=Math.min(O.tail+3,O.text)-_,0<M?(O.tail+=M,O.text+=M):0<_&&(O.tail-=_,O.text-=_)),O.tail+=D,O.head+=D):(b=x=L*u(A,C),O.text=v+x),O.text+=D,x+=D,b+=D,I["_"+w+"padplus"]=L/2+b,I["_"+w+"padminus"]=L/2-b,I["_"+w+"size"]=L,I["_"+w+"shift"]=x}h?$.remove():(e=d=0,"left"!==I.align&&(d=(o-a)*("center"===I.align?.5:1)),"top"!==I.valign&&(e=(s-i)*("middle"===I.valign?.5:1)),n?t.select("svg").attr({x:J+d-1,y:J+e}).call(ce.setClipUrl,Q?ne:null,P):(e=J+e-r.top,r=J+d-r.left,te.call(ue.positionText,r,e).call(ce.setClipUrl,Q?ne:null,P)),ee.select("rect").call(ce.setRect,J,J,o,s),K.call(ce.setRect,X/2,X/2,l-X,c-X),$.call(ce.setTranslate,Math.round(Y.x.text-l/2),Math.round(Y.y.text-c/2)),W.attr({transform:"rotate("+V+","+Y.x.text+","+Y.y.text+")"}),f=function(e,t){G.selectAll(".annotation-arrow-g").remove();var a,i,o,n=Y.x.head,r=Y.y.head,s=Y.x.tail+e,l=Y.y.tail+t,c=Y.x.text+e,u=Y.y.text+t,d=ie.rotationXYMatrix(V,c,u),f=ie.apply2DTransform(d),e=ie.apply2DTransform2(d),t=+K.attr("width"),d=+K.attr("height"),c=c-.5*t,t=c+t,u=u-.5*d,d=u+d,t=[[c,u,c,d],[c,d,t,d],[t,d,t,u],[t,u,c,u]].map(e);t.reduce(function(e,t){return e^!!ie.segmentsIntersect(n,r,n+1e6,r+1e6,t[0],t[1],t[2],t[3])},!1)||(t.forEach(function(e){e=ie.segmentsIntersect(s,l,n,r,e[0],e[1],e[2],e[3]);e&&(s=e.x,l=e.y)}),c=I.arrowwidth,u=I.arrowcolor,e=I.arrowside,t=(a=G.append("g").style({opacity:le.opacity(u)}).classed("annotation-arrow-g",!0)).append("path").attr("d","M"+s+","+l+"L"+n+","+r).style("stroke-width",c+"px").call(le.stroke,le.rgb(u)),pe(t,e,I),H.annotationPosition&&t.node().parentNode&&!R&&(u=n,e=r,I.standoff&&(t=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-l,2)),u+=I.standoff*(s-n)/t,e+=I.standoff*(l-r)/t),c=a.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(s-u)+","+(l-e),transform:oe(u,e)}).style("stroke-width",c+6+"px").call(le.stroke,"rgba(0,0,0,0)").call(le.fill,"rgba(0,0,0,0)"),fe.init({element:c.node(),gd:P,prepFn:function(){var e=ce.getTranslate($);i=e.x,o=e.y,N&&N.autorange&&B(N._name+".autorange",!0),z&&z.autorange&&B(z._name+".autorange",!0)},moveFn:function(e,t){var n=f(i,o),r=n[0]+e,n=n[1]+t;$.call(ce.setTranslate,r,n),q("x",he(N,e,"x",j,I)),q("y",he(z,t,"y",j,I)),I.axref===I.xref&&q("ax",he(N,e,"ax",j,I)),I.ayref===I.yref&&q("ay",he(z,t,"ay",j,I)),a.attr("transform",oe(e,t)),W.attr({transform:"rotate("+V+","+r+","+n+")"})},doneFn:function(){ae.call("_guiRelayout",P,U());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})))},I.showarrow&&f(0,0),Z&&fe.init({element:$.node(),gd:P,prepFn:function(){p=W.attr("transform")},moveFn:function(e,t){var n,r,a,i="pointer";if(I.showarrow)I.axref===I.xref?q("ax",he(N,e,"ax",j,I)):q("ax",I.ax+e),I.ayref===I.yref?q("ay",he(z,t,"ay",j.w,I)):q("ay",I.ay+t),f(e,t);else{if(R)return;n=N?he(N,e,"x",j,I):(r=I._xsize/j.w,n=I.x+(I._xshift-I.xshift)/j.w-r/2,fe.align(n+e/j.w,r,0,1,I.xanchor)),a=z?he(z,t,"y",j,I):(a=I._ysize/j.h,r=I.y-(I._yshift+I.yshift)/j.h-a/2,fe.align(r-t/j.h,a,0,1,I.yanchor)),q("x",n),q("y",a),N&&z||(i=fe.getCursor(N?.5:n,z?.5:a,I.xanchor,I.yanchor))}W.attr({transform:oe(e,t)+p}),de($,i)},clickFn:function(e,t){I.captureevents&&P.emit("plotly_clickannotation",re(t))},doneFn:function(){de($),ae.call("_guiRelayout",P,U());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}}))}I._input&&!1!==I.visible?(Y={x:{},y:{}},V=+I.textangle||0,G=F._infolayer.append("g").classed(r,!0).attr("data-index",String(t)).style("opacity",I.opacity),W=G.append("g").classed("annotation-text-g",!0),Z=H[I.showarrow?"annotationTail":"annotationPosition"],r=I.captureevents||H.annotationText||Z,$=W.append("g").style("pointer-events",r?"all":null).call(de,"pointer").on("click",function(){P._dragging=!1,P.emit("plotly_clickannotation",re(o.event))}),I.hovertext&&$.on("mouseover",function(){var e=I.hoverlabel,t=e.font,n=this.getBoundingClientRect(),r=P.getBoundingClientRect();s.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:I.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:P})}).on("mouseout",function(){s.loneUnhover(F._hoverlayer.node())}),X=I.borderwidth,r=I.borderpad,J=X+r,K=$.append("rect").attr("class","bg").style("stroke-width",X+"px").call(le.stroke,I.bordercolor).call(le.fill,I.bgcolor),Q=I.width||I.height,(ee=F._topclips.selectAll("#"+ne).data(Q?[0]:[])).enter().append("clipPath").classed("annclip",!0).attr("id",ne).append("rect"),ee.exit().remove(),n=I.font,r=F._meta?ie.templateString(I.text,F._meta):I.text,te=$.append("text").classed("annotation-text",!0).text(r),H.annotationText?te.call(ue.makeEditable,{delegate:$,gd:P}).call(a).on("edit",function(e){I.text=e,this.call(a),q("text",e),N&&N.autorange&&B(N._name+".autorange",!0),z&&z.autorange&&B(z._name+".autorange",!0),ae.call("_guiRelayout",P,U())}):te.call(a)):o.selectAll("#"+ne).remove()}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&a(e,n);return r.previousPromises(e)},drawOne:a,drawRaw:i}},{"../../lib":285,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../fx":195,"./draw_arrow_head":145,"@plotly/d3":20}],145:[function(e,t,n){"use strict";var T=e("@plotly/d3"),M=e("../color"),k=e("./arrow_paths"),e=e("../../lib"),A=e.strScale,S=e.strRotate,E=e.strTranslate;t.exports=function(a,e,i){var o=a.node(),t=k[i.arrowhead||0],n=k[i.startarrowhead||0],r=(i.arrowwidth||1)*(i.arrowsize||1),s=(i.arrowwidth||1)*(i.startarrowsize||1),l=0<=e.indexOf("start"),c=0<=e.indexOf("end"),u=t.backoff*r+i.standoff,d=n.backoff*s+i.startstandoff;if("line"===o.nodeName){var f,p={x:+a.attr("x1"),y:+a.attr("y1")},h={x:+a.attr("x2"),y:+a.attr("y2")},m=p.x-h.x,g=p.y-h.y,y=(f=Math.atan2(g,m))+Math.PI;if(u&&d&&u+d>Math.sqrt(m*m+g*g))return void _();if(u){if(m*m+g*g<u*u)return void _();var v=u*Math.cos(f),e=u*Math.sin(f);h.x+=v,h.y+=e,a.attr({x2:h.x,y2:h.y})}if(d){if(m*m+g*g<d*d)return void _();var x=d*Math.cos(f),b=d*Math.sin(f);p.x-=x,p.y-=b,a.attr({x1:p.x,y1:p.y})}}else if("path"===o.nodeName){m=o.getTotalLength();if(m<u+d)return void _();x=o.getPointAtLength(0),b=o.getPointAtLength(.1);f=Math.atan2(x.y-b.y,x.x-b.x),p=o.getPointAtLength(Math.min(d,m));g="0px,"+d+"px,",x=o.getPointAtLength(m),b=o.getPointAtLength(m-.1);y=Math.atan2(x.y-b.y,x.x-b.x),h=o.getPointAtLength(Math.max(0,m-u)),a.style("stroke-dasharray",g+=m-(g?d+u:u)+"px,"+m+"px")}function _(){a.style("stroke-dasharray","0px,100px")}function w(e,t,n,r){e.path&&(e.noRotate&&(n=0),T.select(o.parentNode).append("path").attr({class:a.attr("class"),d:e.path,transform:E(t.x,t.y)+S(180*n/Math.PI)+A(r)}).style({fill:M.rgb(i.arrowcolor),"stroke-width":0}))}l&&w(n,p,f,s),c&&w(t,h,y,r)}},{"../../lib":285,"../color":155,"./arrow_paths":137,"@plotly/d3":20}],146:[function(e,t,n){"use strict";var r=e("./draw"),a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":138,"./calc_autorange":139,"./click":140,"./convert_coords":142,"./defaults":143,"./draw":144}],147:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../plot_api/edit_types").overrideAll,e=e("../../plot_api/plot_template").templatedArray;t.exports=a(e("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../annotations/attributes":138}],148:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("../../plots/cartesian/axes");t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)!function(e,t){var n=t.fullSceneLayout.domain,r=t.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},a.extendFlat(e._xa,t),i.setConvert(e._xa),e._xa._offset=r.l+n.x[0]*r.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*r.w*(n.x[1]-n.x[0])},e._ya={},a.extendFlat(e._ya,t),i.setConvert(e._ya),e._ya._offset=r.t+(1-n.y[1])*r.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*r.h*(n.y[1]-n.y[0])}}(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":285,"../../plots/cartesian/axes":331}],149:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),l=e("../annotations/common_defaults"),c=e("./attributes");function a(n,r,a,e){function i(e,t){return o.coerce(n,r,c,e,t)}function t(e){var t=e+"axis",n={_fullLayout:{}};return n._fullLayout[t]=a[t],s.coercePosition(r,n,i,e,e,.5)}i("visible")&&(l(n,r,e.fullLayout,i),t("x"),t("y"),t("z"),o.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",i("ax",-10),i("ay",-30),o.noneOrAll(n,r,["ax","ay"])))}t.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:a,fullLayout:n.fullLayout})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"../annotations/common_defaults":141,"./attributes":147}],150:[function(e,t,n){"use strict";var u=e("../annotations/draw").drawRaw,d=e("../../plots/gl3d/project"),f=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,a=0;a<r.length;a++){for(var i=r[a],o=!1,s=0;s<3;s++){var l=f[s],c=i[l],c=t[l+"axis"].r2fraction(c);if(c<0||1<c){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+a+'"]').remove():(i._pdata=d(e.glplot.cameraParams,[t.xaxis.r2l(i.x)*n[0],t.yaxis.r2l(i.y)*n[1],t.zaxis.r2l(i.z)*n[2]]),u(e.graphDiv,i,a,e.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":363,"../annotations/draw":144}],151:[function(e,t,n){"use strict";var s=e("../../registry"),l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=s.subplotsRegistry.gl3d;if(n)for(var r=n.attrRegex,a=Object.keys(e),i=0;i<a.length;i++){var o=a[i];r.test(o)&&(e[o].annotations||[]).length&&(l.pushUnique(t._basePlotModules,n),l.pushUnique(t._subplots.gl3d,o))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":285,"../../registry":373,"./attributes":147,"./convert":148,"./defaults":149,"./draw":150}],152:[function(e,t,n){"use strict";t.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":121,"world-calendars/dist/calendars/coptic":122,"world-calendars/dist/calendars/discworld":123,"world-calendars/dist/calendars/ethiopian":124,"world-calendars/dist/calendars/hebrew":125,"world-calendars/dist/calendars/islamic":126,"world-calendars/dist/calendars/julian":127,"world-calendars/dist/calendars/mayan":128,"world-calendars/dist/calendars/nanakshahi":129,"world-calendars/dist/calendars/nepali":130,"world-calendars/dist/calendars/persian":131,"world-calendars/dist/calendars/taiwan":132,"world-calendars/dist/calendars/thai":133,"world-calendars/dist/calendars/ummalqura":134,"world-calendars/dist/main":135,"world-calendars/dist/plus":136}],153:[function(e,t,n){"use strict";function i(e,t,n,r){var a={};return a[n]=s,o.coerce(e,t,a,n,r)}var r=e("./calendars"),o=e("../../lib"),a=e("../../constants/numerical"),c=a.EPOCHJD,u=a.ONEDAY,s={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var l={};function f(e){var t=l[e];return t=t||(l[e]=r.instance(e))}function p(e){return o.extendFlat({},s,{description:e})}function h(e){return"Sets the calendar system to use with `"+e+"` date data."}var m={xcalendar:p(h("x"))},g=o.extendFlat({},m,{ycalendar:p(h("y"))}),e=o.extendFlat({},g,{zcalendar:p(h("z"))}),a=p(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:e,surface:e,mesh3d:e,scattergl:g,ohlc:m,candlestick:m},layout:{calendar:p(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:a},yaxis:{calendar:a},scene:{xaxis:{calendar:a},yaxis:{calendar:a},zaxis:{calendar:a}},polar:{radialaxis:{calendar:a}}},transforms:{filter:{valuecalendar:p(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:p(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:s,handleDefaults:i,handleTraceDefaults:function(e,t,n,r){for(var a=0;a<n.length;a++)i(e,t,n[a]+"calendar",r.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:f,worldCalFmt:function(e,t,n){for(var r,a,i,o,t=Math.floor((t+.05)/u)+c,s=f(n).fromJD(t),l=0;-1!==(l=e.indexOf("%",l));)"0"===(o=e.charAt(l+1))||"-"===o||"_"===o?(a=3,r=e.charAt(l+2),"_"===o&&(o="-")):(r=o,o="0",a=2),(i=d[r])?(o="##"===i?"##":s.formatDate(i[o]),e=e.substr(0,l)+o+e.substr(l+a),l+=o.length):l+=a;return e}}},{"../../constants/numerical":265,"../../lib":285,"./calendars":152}],154:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],155:[function(e,t,n){"use strict";var a=e("tinycolor2"),i=e("fast-isnumeric"),o=e("../../lib/array").isTypedArray,s=t.exports={},e=e("./attributes");s.defaults=e.defaults;var l=s.defaultLine=e.defaultLine;s.lightLine=e.lightLine;var c=s.background=e.background;function u(e){if(i(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),n="a"===t.charAt(3)&&4===r.length;if(!n&&3!==r.length)return e;for(var a=0;a<r.length;a++){if(!r[a].length)return e;if(r[a]=Number(r[a]),!(0<=r[a]))return e;if(3===a)1<r[a]&&(r[a]=1);else if(1<=r[a])return e}t=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return n?"rgba("+t+", "+r[3]+")":"rgb("+t+")"}s.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},s.rgb=function(e){return s.tinyRGB(a(e))},s.opacity=function(e){return e?a(e).getAlpha():0},s.addOpacity=function(e,t){e=a(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+t+")"},s.combine=function(e,t){var n=a(e).toRgb();if(1===n.a)return a(e).toRgbString();t=a(t||c).toRgb(),t=1===t.a?t:{r:255*(1-t.a)+t.r*t.a,g:255*(1-t.a)+t.g*t.a,b:255*(1-t.a)+t.b*t.a},n={r:t.r*(1-n.a)+n.r*n.a,g:t.g*(1-n.a)+n.g*n.a,b:t.b*(1-n.a)+n.b*n.a};return a(n).toRgbString()},s.contrast=function(e,t,n){var r=a(e);return((r=1!==r.getAlpha()?a(s.combine(e,c)):r).isDark()?t?r.lighten(t):c:n?r.darken(n):l).toString()},s.stroke=function(e,t){t=a(t);e.style({stroke:s.tinyRGB(t),"stroke-opacity":t.getAlpha()})},s.fill=function(e,t){t=a(t);e.style({fill:s.tinyRGB(t),"fill-opacity":t.getAlpha()})},s.clean=function(e){if(e&&"object"==typeof e)for(var t,n,r=Object.keys(e),a=0;a<r.length;a++)if(n=e[i=r[a]],"color"===i.substr(i.length-5))if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]=u(n[t]);else e[i]=u(n);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(n))for(t=0;t<n.length;t++)Array.isArray(n[t])&&(n[t][1]=u(n[t][1]));else if(Array.isArray(n)){var i=n[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(t=0;t<n.length;t++)s.clean(n[t])}else n&&"object"==typeof n&&!o(n)&&s.clean(n)}},{"../../lib/array":271,"./attributes":154,"fast-isnumeric":31,tinycolor2:119}],156:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),a=e("../../plots/font_attributes"),i=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;t.exports=e({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:i({},r.ticks,{dflt:""}),ticklabeloverflow:i({},r.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:a({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plots/cartesian/layout_attributes":346,"../../plots/font_attributes":360}],157:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],158:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../plot_api/plot_template"),c=e("../../plots/cartesian/tick_value_defaults"),u=e("../../plots/cartesian/tick_mark_defaults"),d=e("../../plots/cartesian/tick_label_defaults"),f=e("./attributes");t.exports=function(e,t,n){var r=l.newContainer(t,"colorbar"),a=e.colorbar||{};function i(e,t){return s.coerce(a,r,f,e,t)}var o=i("thicknessmode");i("thickness","fraction"===o?30/(n.width-n.margin.l-n.margin.r):30);t=i("lenmode");i("len","fraction"===t?1:n.height-n.margin.t-n.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),s.noneOrAll(a,r,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");e=i("ticklabelposition");i("ticklabeloverflow",-1!==e.indexOf("inside")?"hide past domain":"hide past div"),c(a,r,i,"linear");o=n.font,t={outerTicks:!1,font:o};-1!==e.indexOf("inside")&&(t.bgColor="black"),d(a,r,i,"linear",t),u(a,r,i,"linear",t),i("title.text",n._dfltTitle.colorbar);n=r.tickfont,n=s.extendFlat({},n,{color:o.color,size:s.bigFont(n.size)});s.coerceFont(i,"title.font",n),i("title.side")}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/tick_label_defaults":353,"../../plots/cartesian/tick_mark_defaults":354,"../../plots/cartesian/tick_value_defaults":355,"./attributes":156}],159:[function(e,t,n){"use strict";var P=e("@plotly/d3"),I=e("tinycolor2"),R=e("../../plots/plots"),d=e("../../registry"),N=e("../../plots/cartesian/axes"),f=e("../dragelement"),z=e("../../lib"),F=z.strTranslate,j=e("../../lib/extend").extendFlat,p=e("../../lib/setcursor"),H=e("../drawing"),B=e("../color"),q=e("../titles"),U=e("../../lib/svg_text_utils"),v=e("../colorscale/helpers").flipScale,Y=e("../../plots/cartesian/axis_defaults"),V=e("../../plots/cartesian/position_defaults"),G=e("../../plots/cartesian/layout_attributes"),r=e("../../constants/alignment"),W=r.LINE_SPACING,Z=r.FROM_TL,$=r.FROM_BR,X=e("./constants").cn;t.exports={draw:function(u){var e=u._fullLayout._infolayer.selectAll("g."+X.colorbar).data(function(e){var t,n,r,a,i=e._fullLayout,o=e.calcdata,s=[];function l(e){return j(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof a.calc?a.calc(e,r,t):(t._fillgradient=n.reversescale?v(n.colorscale):n.colorscale,t._zrange=[n[a.min],n[a.max]])}for(var u,d=0;d<o.length;d++){var f=o[d],f=(r=f[0].trace)._module.colorbar;if(!0===r.visible&&f)for(var p=Array.isArray(f),h=p?f:[f],m=0;m<h.length;m++){var g=(a=h[m]).container;(n=g?r[g]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(p&&g?"-"+g:""),t._traceIndex=r.index,t._propPrefix=(g?g+".":"")+"colorbar.",t._meta=r._meta,c(),s.push(t))}}for(u in i._colorAxes){var y;(n=i[u]).showscale&&(y=i._colorAxes[u],(t=l(n.colorbar))._id="cb"+u,t._propPrefix=u+".colorbar.",t._meta=i._meta,a={min:"cmin",max:"cmax"},"heatmap"!==y[0]&&(r=y[1],a.calc=r._module.colorbar.calc),c(),s.push(t))}return s}(u),function(e){return e._id});e.enter().append("g").attr("class",function(e){return e._id}).classed(X.colorbar,!0),e.each(function(e){var t=P.select(this);z.ensureSingle(t,"rect",X.cbbg),z.ensureSingle(t,"g",X.cbfills),z.ensureSingle(t,"g",X.cblines),z.ensureSingle(t,"g",X.cbaxis,function(e){e.classed(X.crisp,!0)}),z.ensureSingle(t,"g",X.cbtitleunshift,function(e){e.append("g").classed(X.cbtitle,!0)}),z.ensureSingle(t,"rect",X.cboutline);var n,r,a,i,o,s,l,c=function(o,s,l){var a=l._fullLayout,c=a._size,e=s._fillcolor,u=s._line,t=s.title,d=t.side,f=s._zrange||P.extent(("function"==typeof e?e:u.color).domain()),p="function"==typeof u.color?u.color:function(){return u.color},h="function"==typeof e?e:function(){return e},n=s._levels,r=function(e,t){var n,r,a=e._levels,i=[],o=[],s=a.end+a.size/100,l=a.size,c=1.001*t[0]-.001*t[1],u=1.001*t[1]-.001*t[0];for(r=0;r<1e5&&(n=a.start+r*l,!(0<l?s<=n:n<=s));r++)c<n&&n<u&&i.push(n);if(e._fillgradient)o=[0];else if("function"==typeof e._fillcolor){var d=e._filllevels;if(d)for(s=d.end+d.size/100,l=d.size,r=0;r<1e5&&(n=d.start+r*l,!(0<l?s<=n:n<=s));r++)n>t[0]&&n<t[1]&&o.push(n);else(o=i.map(function(e){return e-a.size/2})).push(o[o.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(o=[0]);a.size<0&&(i.reverse(),o.reverse());return{line:i,fill:o}}(s,f),m=r.fill,g=r.line,y=Math.round(s.thickness*("fraction"===s.thicknessmode?c.w:1)),i=y/c.w,v=Math.round(s.len*("fraction"===s.lenmode?c.h:1)),x=v/c.h,b=s.xpad/c.w,_=(s.borderwidth+s.outlinewidth)/2,w=s.ypad/c.h,T=Math.round(s.x*c.w+s.xpad),r=s.x-i*({middle:.5,right:1}[s.xanchor]||0),M=s.y+x*(({top:-.5,bottom:.5}[s.yanchor]||0)-.5),k=Math.round(c.h*(1-M)),A=k-v;s._lenFrac=x,s._thickFrac=i,s._xLeftFrac=r,s._yBottomFrac=M;var S=s._axis=function(e,t,n){var e=e._fullLayout,r={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:"right",position:1},a={type:"linear",_id:"y"+t._id},t={letter:"y",font:e.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:e.calendar};function i(e,t){return z.coerce(r,a,G,e,t)}return Y(r,a,i,t,e),V(r,a,i,t),a}(l,s,f);S.position=s.x+b+i,-1!==["top","bottom"].indexOf(d)&&(S.title.side=d,S.titlex=s.x+b,S.titley=M+("top"===t.side?x-w:w));u.color&&"auto"===s.tickmode&&(S.tickmode="linear",S.tick0=n.start,r=n.size,i=z.constrain((k-A)/50,4,15)+1,1<(t=(f[1]-f[0])/((s.nticks||i)*r))&&(i=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),r*=i*z.roundUp(t/i,[2,5,10]),(Math.abs(n.start)/n.size+1e-6)%1<2e-6&&(S.tick0=0)),S.dtick=r);S.domain=[M+w,M+x-w],S.setScale(),o.attr("transform",F(Math.round(c.l),Math.round(c.t)));var E,L=o.select("."+X.cbtitleunshift).attr("transform",F(-Math.round(c.l),-Math.round(c.t))),C=o.select("."+X.cbaxis),D=0;function O(e,t){var n={propContainer:S,propName:s._propPrefix+"title",traceIndex:s._traceIndex,_meta:s._meta,placeholder:a._dfltTitle.colorbar,containerGroup:o.select("."+X.cbtitle)},r="h"===e.charAt(0)?e.substr(1):"h"+e;o.selectAll("."+r+",."+r+"-math-group").remove(),q.draw(l,e,j(n,t||{}))}return z.syncOrAsync([R.previousPromises,function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(e=c.l+(s.x+b)*c.w,t=S.title.font.size,t="top"===d?(1-(M+x-w))*c.h+c.t+3+.75*t:(1-(M+w))*c.h+c.t-3-.25*t,O(S._id+"title",{attributes:{x:e,y:t,"text-anchor":"start"}}))},function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(t=(i=o.select("."+X.cbtitle)).select("text"),r=[-s.outlinewidth/2,s.outlinewidth/2],e=i.select(".h"+S._id+"title-math-group").node(),a=15.6,t.node()&&(a=parseInt(t.node().style.fontSize,10)*W),e?a<(D=H.bBox(e).height)&&(r[1]-=(D-a)/2):t.node()&&!t.classed(X.jsPlaceholder)&&(D=H.bBox(t.node()).height),D&&(D+=5,"top"===d?(S.domain[1]-=D/c.h,r[1]*=-1):(S.domain[0]+=D/c.h,t=U.lineCount(t),r[1]+=(1-t)*a),i.attr("transform",F(r[0],r[1])),S.setScale())),o.selectAll("."+X.cbfills+",."+X.cblines).attr("transform",F(0,Math.round(c.h*(1-S.domain[1])))),C.attr("transform",F(0,Math.round(-c.t))),(a=o.select("."+X.cbfills).selectAll("rect."+X.cbfill).attr("style","").data(m)).enter().append("rect").classed(X.cbfill,!0).style("stroke","none"),a.exit().remove();var n=f.map(S.c2p).map(Math.round).sort(function(e,t){return e-t});a.each(function(e,t){t=[0===t?f[0]:(m[t]+m[t-1])/2,t===m.length-1?f[1]:(m[t]+m[t+1])/2].map(S.c2p).map(Math.round);t[1]=z.constrain(t[1]+(t[1]>t[0])?1:-1,n[0],n[1]);t=P.select(this).attr({x:T,width:Math.max(y,2),y:P.min(t),height:Math.max(P.max(t)-P.min(t),2)});s._fillgradient?H.gradient(t,l,s._id,"vertical",s._fillgradient,"fill"):(e=h(e).replace("e-",""),t.attr("fill",I(e).toHexString()))}),(i=o.select("."+X.cblines).selectAll("path."+X.cbline).data(u.color&&u.width?g:[])).enter().append("path").classed(X.cbline,!0),i.exit().remove(),i.each(function(e){P.select(this).attr("d","M"+T+","+(Math.round(S.c2p(e))+u.width/2%1)+"h"+y).call(H.lineGroupStyle,u.width,p(e),u.dash)}),C.selectAll("g."+S._id+"tick,path").remove();var r=T+y+(s.outlinewidth||0)/2-("outside"===s.ticks?1:0),a=N.calcTicks(S),i=N.getTickSigns(S)[2];return N.drawTicks(l,S,{vals:"inside"===S.ticks?N.clipEnds(S,a):a,layer:C,path:N.makeTickPath(S,r,i),transFn:N.makeTransTickFn(S)}),N.drawLabels(l,S,{vals:a,layer:C,transFn:N.makeTransTickLabelFn(S),labelFns:N.makeLabelFns(S,r)})},function(){var e,t;-1===["top","bottom"].indexOf(d)&&(t=S.title.font.size,e=S._offset+S._length/2,t=c.l+(S.position||0)*c.w+("right"===S.side?10+t*(S.showticklabels?1:.5):-10-t*(S.showticklabels?.5:0)),O("h"+S._id+"title",{avoid:{selection:P.select(l).selectAll("g."+S._id+"tick"),side:d,offsetLeft:c.l,offsetTop:0,maxShift:a.width},attributes:{x:t,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}}))},R.previousPromises,function(){var e=y+s.outlinewidth/2;-1===S.ticklabelposition.indexOf("inside")&&(e+=H.bBox(C.node()).width),(E=L.select("text")).node()&&!E.classed(X.jsPlaceholder)&&(a=(r=L.select(".h"+S._id+"title-math-group").node())&&-1!==["top","bottom"].indexOf(d)?H.bBox(r).width:H.bBox(L.node()).right-T-c.l,e=Math.max(e,a));var t=2*s.xpad+e+s.borderwidth+s.outlinewidth/2,n=k-A;o.select("."+X.cbbg).attr({x:T-s.xpad-(s.borderwidth+s.outlinewidth)/2,y:A-_,width:Math.max(t,2),height:Math.max(n+2*_,2)}).call(B.fill,s.bgcolor).call(B.stroke,s.bordercolor).style("stroke-width",s.borderwidth),o.selectAll("."+X.cboutline).attr({x:T,y:A+s.ypad+("top"===d?D:0),width:Math.max(y,2),height:Math.max(n-2*s.ypad-D,2)}).call(B.stroke,s.outlinecolor).style({fill:"none","stroke-width":s.outlinewidth});var r=({center:.5,right:1}[s.xanchor]||0)*t;o.attr("transform",F(c.l-r,c.t));var a={},e=Z[s.yanchor],r=$[s.yanchor];"pixels"===s.lenmode?(a.y=s.y,a.t=n*e,a.b=n*r):(a.t=a.b=0,a.yt=s.y+s.len*e,a.yb=s.y-s.len*r),e=Z[s.xanchor],r=$[s.xanchor],"pixels"===s.thicknessmode?(a.x=s.x,a.l=t*e,a.r=t*r):(a.l=(t=t-y)*e,a.r=t*r,a.xl=s.x-s.thickness*e,a.xr=s.x+s.thickness*r),R.autoMargin(l,s._id,a)}],l)}(t,e,u);c&&c.then&&(u._promises||[]).push(c),u._context.edits.colorbarPosition&&(n=t,r=e,l=(a=u)._fullLayout._size,f.init({element:n.node(),gd:a,prepFn:function(){i=n.attr("transform"),p(n)},moveFn:function(e,t){n.attr("transform",i+F(e,t)),o=f.align(r._xLeftFrac+e/l.w,r._thickFrac,0,1,r.xanchor),s=f.align(r._yBottomFrac-t/l.h,r._lenFrac,0,1,r.yanchor);t=f.getCursor(o,s,r.xanchor,r.yanchor);p(n,t)},doneFn:function(){var e;p(n),void 0!==o&&void 0!==s&&((e={})[r._propPrefix+"x"]=o,e[r._propPrefix+"y"]=s,void 0!==r._traceIndex?d.call("_guiRestyle",a,e,r._traceIndex):d.call("_guiRelayout",a,e))}}))}),e.exit().each(function(e){R.autoMargin(u,e._id)}).remove(),e.order()}}},{"../../constants/alignment":260,"../../lib":285,"../../lib/extend":279,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_defaults":333,"../../plots/cartesian/layout_attributes":346,"../../plots/cartesian/position_defaults":349,"../../plots/plots":366,"../../registry":373,"../color":155,"../colorscale/helpers":166,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":157,"@plotly/d3":20,tinycolor2:119}],160:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":285}],161:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":156,"./defaults":158,"./draw":159,"./has_colorbar":160}],162:[function(e,t,n){"use strict";var p=e("../colorbar/attributes"),h=e("../../lib/regex").counter,m=e("./scales.js").scales;Object.keys(m);function g(e){return"`"+e+"`"}t.exports=function(e,t){e=e||"";var n,r=(t=t||{}).cLetter||"c",a=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),i="showScaleDflt"in t?t.showScaleDflt:"z"===r,o="string"==typeof t.colorscaleDflt?m[t.colorscaleDflt]:null,s=t.editTypeOverride||"",l=e?e+".":"",c="colorAttr"in t?(n=t.colorAttr,t.colorAttr):"in "+g(l+(n={z:"z",c:"color"}[r])),u=r+"auto",d=r+"min",e=r+"max",f=r+"mid",c={};c[d]=c[e]=void 0;r={};r[u]=!1;l={};return"color"===n&&(l.color={valType:"color",arrayOk:!0,editType:s||"style"},t.anim&&(l.color.anim=!0)),l[u]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},l[d]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[e]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[f]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},l.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},l.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},l.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(l.showscale={valType:"boolean",dflt:i,editType:"calc"},l.colorbar=p),t.noColorAxis||(l.coloraxis={valType:"subplotid",regex:h("coloraxis"),dflt:null,editType:"calc"}),l}},{"../../lib/regex":301,"../colorbar/attributes":156,"./scales.js":170}],163:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("../../lib"),f=e("./helpers").extractOpts;t.exports=function(e,t,n){var r=e._fullLayout,a=n.vals,i=n.containerStr,o=i?d.nestedProperty(t,i).get():t,s=f(o),l=!1!==s.auto,c=s.min,e=s.max,n=s.mid,i=function(){return d.aggNums(Math.min,null,a)},t=function(){return d.aggNums(Math.max,null,a)};void 0===c?c=i():l&&(c=o._colorAx&&u(c)?Math.min(c,i()):i()),void 0===e?e=t():l&&(e=o._colorAx&&u(e)?Math.max(e,t()):t()),l&&void 0!==n&&(n-c<e-n?c=n-(e-n):e-n<n-c&&(e=n+(n-c))),c===e&&(c-=.5,e+=.5),s._sync("min",c),s._sync("max",e),s.autocolorscale&&(r=c*e<0?r.colorscale.diverging:0<=c?r.colorscale.sequential:r.colorscale.sequentialminus,s._sync("colorscale",r))}},{"../../lib":285,"./helpers":166,"fast-isnumeric":31}],164:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("./helpers").hasColorscale,d=e("./helpers").extractOpts;t.exports=function(e,a){function i(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function t(e,t){var n,r=t.container?c.nestedProperty(e,t.container).get():e;r&&(r.coloraxis?r._colorAx=a[r.coloraxis]:(!(e=(n=d(r)).auto)&&void 0!==n.min||i(r,t.min),!e&&void 0!==n.max||i(r,t.max),n.autocolorscale&&i(r,"colorscale")))}for(var n,r=0;r<e.length;r++){var o=e[r],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)t(o,s[l]);else t(o,s);u(o,"marker.line")&&t(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(n in a._colorAxes)t(a[n],{min:"cmin",max:"cmax"})}},{"../../lib":285,"./helpers":166}],165:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),b=e("../../lib"),_=e("../colorbar/has_colorbar"),w=e("../colorbar/defaults"),T=e("./scales").isValid,M=e("../../registry").traceIs;function k(e,t){var n=t.slice(0,t.length-1);return t?b.nestedProperty(e,n).get()||{}:e}t.exports=function e(t,n,r,a,i){var o=i.prefix,s=i.cLetter,l="_module"in n,c=k(t,o),u=k(n,o),d=k(n._template||{},o)||{},f=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,r,a,i)};if(l){var p=r._colorAxes||{},h=a(o+"coloraxis");if(h){var m=M(n,"contour")&&b.nestedProperty(n,"contours.coloring").get()||"heatmap",g=p[h];return void(g?(g[2].push(f),g[0]!==m&&(g[0]=!1,b.warn(["Ignoring coloraxis:",h,"setting","as it is linked to incompatible colorscales."].join(" ")))):p[h]=[m,n,[f]])}}m=c[s+"min"],f=c[s+"max"],f=x(m)&&x(f)&&m<f;a(o+s+"auto",!f)?a(o+s+"mid"):(a(o+s+"min"),a(o+s+"max"));var y,v,f=c.colorscale,s=d.colorscale;void 0!==f&&(y=!T(f)),void 0!==s&&(y=!T(s)),a(o+"autocolorscale",y),a(o+"colorscale"),a(o+"reversescale"),"marker.line."!==o&&(o&&l&&(v=_(c)),a(o+"showscale",v)&&(o&&d&&(u._template=d),w(c,u,r)))}},{"../../lib":285,"../../registry":373,"../colorbar/defaults":158,"../colorbar/has_colorbar":160,"./scales":170,"fast-isnumeric":31}],166:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("tinycolor2"),d=e("fast-isnumeric"),o=e("../../lib"),f=e("../color"),s=e("./scales").isValid;var l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],p=["min","max","mid","auto"];function h(e){var n,t,r=e._colorAx,a=r||e,i={};for(s=0;s<l.length;s++)i[t=l[s]]=a[t];if(r)for(n="c",s=0;s<p.length;s++)i[t=p[s]]=a["c"+t];else{for(var o,s=0;s<p.length;s++)((o="c"+(t=p[s]))in a||(o="z"+t)in a)&&(i[t]=a[o]);n=o.charAt(0)}return i._sync=function(e,t){e=-1!==p.indexOf(e)?n+e:e;a[e]=a["_"+e]=t},i}function r(e){for(var e=h(e),t=e.min,n=e.max,r=e.reversescale?m(e.colorscale):e.colorscale,a=r.length,i=new Array(a),o=new Array(a),s=0;s<a;s++){var l=r[s];i[s]=t+l[0]*(n-t),o[s]=l[1]}return{domain:i,range:o}}function m(e){for(var t=e.length,n=new Array(t),r=t-1,a=0;0<=r;r--,a++){var i=e[r];n[a]=[1-i[0],i[1]]}return n}function a(e,t){t=t||{};for(var n=e.domain,r=e.range,a=r.length,i=new Array(a),o=0;o<a;o++){var s=u(r[o]).toRgb();i[o]=[s.r,s.g,s.b,s.a]}var l=c.scale.linear().domain(n).range(i).clamp(!0),n=t.noNumericCheck,t=t.returnArray,t=n&&t?l:n?function(e){return g(l(e))}:t?function(e){return d(e)?l(e):u(e).isValid()?e:f.defaultLine}:function(e){return d(e)?g(l(e)):u(e).isValid()?e:f.defaultLine};return t.domain=l.domain,t.range=function(){return r},t}function g(e){e={r:e[0],g:e[1],b:e[2],a:e[3]};return u(e).toRgbString()}t.exports={hasColorscale:function(e,t,n){var r=(e=t?o.nestedProperty(e,t).get()||{}:e)[n||"color"],a=!1;if(o.isArrayOrTypedArray(r))for(var i=0;i<r.length;i++)if(d(r[i])){a=!0;break}return o.isPlainObject(e)&&(a||!0===e.showscale||d(e.cmin)&&d(e.cmax)||s(e.colorscale)||o.isPlainObject(e.colorbar))},extractOpts:h,extractScale:r,flipScale:m,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(e,t){return a(r(e),t)}}},{"../../lib":285,"../color":155,"./scales":170,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],167:[function(e,t,n){"use strict";var r=e("./scales"),a=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},{"./attributes":162,"./calc":163,"./cross_trace_defaults":164,"./defaults":165,"./helpers":166,"./layout_attributes":168,"./layout_defaults":169,"./scales":170}],168:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,a=e("./attributes"),e=e("./scales").scales;t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:e.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:e.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:e.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":279,"./attributes":162,"./scales":170}],169:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plot_api/plot_template"),f=e("./layout_attributes"),p=e("./defaults");t.exports=function(n,r){function e(e,t){return u.coerce(n,r,f,e,t)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var a,i,t,o=r._colorAxes;function s(e,t){return u.coerce(a,i,f.coloraxis,e,t)}for(t in o){var l=o[t];if(l[0])a=n[t]||{},(i=d.newContainer(r,t,"coloraxis"))._name=t,p(a,i,r,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete r._colorAxes[t]}}}},{"../../lib":285,"../../plot_api/plot_template":320,"./defaults":165,"./layout_attributes":168}],170:[function(e,t,n){"use strict";var a=e("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},i=r.RdBu;function o(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!a(r[1]).isValid())return!1;t=+r[0]}return!0}t.exports={scales:r,defaultScale:i,get:function(t,n){return n=n||i,t?("string"==typeof t&&(e(),"string"==typeof t&&e()),o(t)?t:n):n;function e(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}},isValid:function(e){return void 0!==r[e]||o(e)}}},{tinycolor2:119}],171:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){e=(e-n)/(r-n),r=e+t/(r-n),n=(e+r)/2;return"left"===a||"bottom"===a?e:"center"===a||"middle"===a?n:"right"===a||"top"===a?r:e<2/3-n?e:4/3-n<r?r:n}},{}],172:[function(e,t,n){"use strict";var a=e("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:a.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:a.constrain(Math.floor(3*t),0,2),i[t][e]}},{"../../lib":285}],173:[function(e,t,n){"use strict";n.selectMode=function(e){return"lasso"===e||"select"===e},n.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.openMode=function(e){return"drawline"===e||"drawopenpath"===e},n.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},n.selectingOrDrawing=function(e){return n.freeMode(e)||n.rectMode(e)}},{}],174:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),v=e("has-hover"),x=e("has-passive-events"),b=e("../../lib").removeElement,_=e("../../plots/cartesian/constants"),w=t.exports={};w.align=e("./align"),w.getCursor=e("./cursor");e=e("./unhover");function T(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function M(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}w.unhover=e.wrapped,w.unhoverRaw=e.raw,w.init=function(a){var r,i,n,o,s,l,c,u,d=a.gd,f=1,p=d._context.doubleClickDelay,h=a.element;d._mouseDownTime||(d._mouseDownTime=0),h.style.pointerEvents="all",h.onmousedown=e,x?(h._ontouchstart&&h.removeEventListener("touchstart",h._ontouchstart),h._ontouchstart=e,h.addEventListener("touchstart",e,{passive:!1})):h.ontouchstart=e;var m=a.clampFn||function(e,t,n){return[e=Math.abs(e)<n?0:e,t=Math.abs(t)<n?0:t]};function e(e){d._dragged=!1,d._dragging=!0;var t=M(e);r=t[0],i=t[1],c=e.target,u=2===(l=e).buttons||e.ctrlKey,void 0===e.clientX&&void 0===e.clientY&&(e.clientX=r,e.clientY=i),(n=(new Date).getTime())-d._mouseDownTime<p?f+=1:(f=1,d._mouseDownTime=n),a.prepFn&&a.prepFn(e,r,i),v&&!u?(s=T()).style.cursor=window.getComputedStyle(h).cursor:v||(s=document,o=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(h).cursor),document.addEventListener("mouseup",y),document.addEventListener("touchend",y),!1!==a.dragmode&&(e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(e){e.preventDefault();var t=M(e),n=a.minDrag||_.MINDRAG,t=m(t[0]-r,t[1]-i,n),n=t[0],t=t[1];(n||t)&&(d._dragged=!0,w.unhover(d,e)),d._dragged&&a.moveFn&&!u&&(d._dragdata={element:h,dx:n,dy:t},a.moveFn(n,t))}function y(t){if(delete d._dragdata,!1!==a.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",y),document.removeEventListener("touchend",y),v?b(s):o&&(s.documentElement.style.cursor=o,o=null),d._dragging){if(d._dragging=!1,(new Date).getTime()-d._mouseDownTime>p&&(f=Math.max(f-1,1)),d._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(f,l),!u){try{n=new MouseEvent("click",t)}catch(e){var n,r=M(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}c.dispatchEvent(n)}d._dragging=!1,d._dragged=!1}else d._dragged=!1}},w.coverSlip=T},{"../../lib":285,"../../plots/cartesian/constants":338,"./align":171,"./cursor":172,"./unhover":175,"has-hover":62,"has-passive-events":63,"mouse-event-offset":69}],175:[function(e,t,n){"use strict";var a=e("../../lib/events"),r=e("../../lib/throttle"),i=e("../../lib/dom").getGraphDiv,o=e("../fx/constants"),s=t.exports={};s.wrapped=function(e,t,n){(e=i(e))._fullLayout&&r.clear(e._fullLayout._uid+o.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,r=e._hoverdata;(t=t||{}).target&&!e._dragged&&!1===a.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))}},{"../../lib/dom":277,"../../lib/events":278,"../../lib/throttle":308,"../fx/constants":189}],176:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],177:[function(e,t,n){"use strict";var k=e("@plotly/d3"),a=e("fast-isnumeric"),f=e("tinycolor2"),v=e("../../registry"),A=e("../color"),r=e("../colorscale"),S=e("../../lib"),l=S.strTranslate,d=e("../../lib/svg_text_utils"),i=e("../../constants/xmlns_namespaces"),c=e("../../constants/alignment").LINE_SPACING,x=e("../../constants/interactions").DESELECTDIM,o=e("../../traces/scatter/subtypes"),s=e("../../traces/scatter/make_bubble_size_func"),p=e("../../components/fx/helpers").appendArrayPointValue,m=t.exports={};m.font=function(e,t,n,r){S.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(A.fill,r)},m.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},m.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},m.setRect=function(e,t,n,r,a){e.call(m.setPosition,t,n).call(m.setSize,r,a)},m.translatePoint=function(e,t,n,r){n=n.c2p(e.x),e=r.c2p(e.y);return!!(a(n)&&a(e)&&t.node())&&("text"===t.node().nodeName?t.attr("x",n).attr("y",e):t.attr("transform",l(n,e)),!0)},m.translatePoints=function(e,n,r){e.each(function(e){var t=k.select(this);m.translatePoint(e,t,n,r)})},m.hideOutsideRangePoint=function(e,t,n,r,a,i){t.attr("display",n.isPtWithinRange(e,a)&&r.isPtWithinRange(e,i)?null:"none")},m.hideOutsideRangePoints=function(r,e){var a,i;e._hasClipOnAxisFalse&&(a=e.xaxis,i=e.yaxis,r.each(function(e){var e=e[0].trace,t=e.xcalendar,n=e.ycalendar,e=v.traceIs(e,"bar-like")?".bartext":".point,.textpoint";r.selectAll(e).each(function(e){m.hideOutsideRangePoint(e,k.select(this),a,i,t,n)})}))},m.crispRound=function(e,t,n){return t&&a(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},m.singleLineStyle=function(e,t,n,r,a){t.style("fill","none");e=(((e||[])[0]||{}).trace||{}).line||{},n=n||e.width||0,a=a||e.dash||"";A.stroke(t,r||e.color),m.dashLine(t,a,n)},m.lineGroupStyle=function(e,r,a,i){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{},n=r||t.width||0,e=i||t.dash||"";k.select(this).call(A.stroke,a||t.color).call(m.dashLine,e,n)})},m.dashLine=function(e,t,n){t=m.dashStyle(t,n=+n||0),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},m.dashStyle=function(e,t){t=+t||1;t=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=t+"px,"+t+"px":"dash"===e?e=3*t+"px,"+3*t+"px":"longdash"===e?e=5*t+"px,"+5*t+"px":"dashdot"===e?e=3*t+"px,"+t+"px,"+t+"px,"+t+"px":"longdashdot"===e&&(e=5*t+"px,"+2*t+"px,"+t+"px,"+2*t+"px"),e},m.singleFillStyle=function(e){var t=(((k.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(A.fill,t)},m.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=k.select(this);e[0].trace&&t.call(A.fill,e[0].trace.fillcolor)})};var u=e("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(u).forEach(function(e){var t=u[e],n=t.n;m.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),m.symbolNames[n]=e,m.symbolFuncs[n]=t.f,t.needLine&&(m.symbolNeedLines[n]=!0),t.noDot?m.symbolNoDot[n]=!0:m.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(m.symbolNoFill[n]=!0)});var h=m.symbolNames.length;function g(e,t){return m.symbolFuncs[e%100](t)+(200<=e?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(e){var t;return a(e)?e=+e:"string"==typeof e&&((t=0)<e.indexOf("-open")&&(t=100,e=e.replace("-open","")),0<e.indexOf("-dot")&&(t+=200,e=e.replace("-dot","")),0<=(e=m.symbolNames.indexOf(e))&&(e+=t)),h<=e%100||400<=e?0:Math.floor(Math.max(e,0))};var t={x1:1,x2:0,y1:0,y2:0},e={x1:0,x2:0,y1:1,y2:0},y=k.format("~.1f"),b={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:t},horizontalreversed:{node:"linearGradient",attrs:t,reversed:!0},vertical:{node:"linearGradient",attrs:e},verticalreversed:{node:"linearGradient",attrs:e,reversed:!0}};m.gradient=function(e,t,n,r,a,i){for(var o=a.length,s=b[r],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[y(100*(1-a[c][0])),a[c][1]]:l[c]=[y(100*a[c][0]),a[c][1]];var u=t._fullLayout,d="g"+u._uid+"-"+n,r=u._defs.select(".gradients").selectAll("#"+d).data([r+l.join(";")],S.identity);r.exit().remove(),r.enter().append(s.node).each(function(){var e=k.select(this);s.attrs&&e.attr(s.attrs),e.attr("id",d);e=e.selectAll("stop").data(l);e.exit().remove(),e.enter().append("stop"),e.each(function(e){var t=f(e[1]);k.select(this).attr({offset:e[0]+"%","stop-color":A.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(i,P(d,t)).style(i+"-opacity",null);i=function(e){return"."+e.attr("class").replace(/\s/g,".")},e=i(k.select(e.node().parentNode))+">"+i(e);u._gradientUrlQueryParts[e]=1},m.pattern=function(e,t,n,r,a,i,o,s,l,c,u,d){var f="legend"===t;s&&(u="overlay"===l?(c=s,A.contrast(c)):(c=void 0,s));var p,h,m,g,y,v,x,b,_,w,s=n._fullLayout,T="p"+s._uid+"-"+r,M={};switch(a){case"/":p=i*Math.sqrt(2),h=i*Math.sqrt(2),y="path",M={d:m="M-"+p/4+","+h/4+"l"+p/2+",-"+h/2+"M0,"+h+"L"+p+",0M"+p/4*3+","+h/4*5+"l"+p/2+",-"+h/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"\\":p=i*Math.sqrt(2),h=i*Math.sqrt(2),y="path",M={d:m="M"+p/4*3+",-"+h/4+"l"+p/2+","+h/2+"M0,0L"+p+","+h+"M-"+p/4+","+h/4*3+"l"+p/2+","+h/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"x":p=i*Math.sqrt(2),h=i*Math.sqrt(2),m="M-"+p/4+","+h/4+"l"+p/2+",-"+h/2+"M0,"+h+"L"+p+",0M"+p/4*3+","+h/4*5+"l"+p/2+",-"+h/2+"M"+p/4*3+",-"+h/4+"l"+p/2+","+h/2+"M0,0L"+p+","+h+"M-"+p/4+","+h/4*3+"l"+p/2+","+h/2,g=i-i*Math.sqrt(1-o),y="path",M={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case"|":y=y="path",M={d:m="M"+(p=i)/2+",0L"+p/2+","+(h=i),opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"-":y=y="path",M={d:m="M0,"+(h=p=i)/2+"L"+p+","+h/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"+":y="path",m="M"+(p=i)/2+",0L"+p/2+","+(h=i)+"M0,"+h/2+"L"+p+","+h/2,g=i-i*Math.sqrt(1-o),y="path",M={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case".":h=p=i,g=o<Math.PI/4?Math.sqrt(o*i*i/Math.PI):(v=o,x=Math.PI/4,b=1,_=i/2,w=i/Math.sqrt(2),_+(w-_)*(v-x)/(b-x)),y="circle",M={cx:p/2,cy:h/2,r:g,opacity:d,fill:u}}a=[a||"noSh",c||"noBg",u||"noFg",i,o].join(";"),a=s._defs.select(".patterns").selectAll("#"+T).data([a],S.identity);a.exit().remove(),a.enter().append("pattern").each(function(){var e,t=k.select(this);t.attr({id:T,width:p+"px",height:h+"px",patternUnits:"userSpaceOnUse",patternTransform:f?"scale(0.8)":""}),c&&((e=t.selectAll("rect").data([0])).exit().remove(),e.enter().append("rect").attr({width:p+"px",height:h+"px",fill:c}));t=t.selectAll(y).data([0]);t.exit().remove(),t.enter().append(y).attr(M)}),e.style("fill",P(T,n)).style("fill-opacity",null),e.classed("pattern_filled",!0);e="."+k.select(e.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";s._patternUrlQueryParts[e]=1},m.initGradients=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},m.initPatterns=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),e._patternUrlQueryParts={}},m.getPatternAttr=function(e,t,n){return e&&S.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},m.pointStyle=function(e,t,n){var r;e.size()&&(r=m.makePointStyleFns(t),e.each(function(e){m.singlePointStyle(e,k.select(this),t,r,n)}))},m.singlePointStyle=function(e,t,n,r,a){var i=n.marker,o=i.line;t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?i.opacity:e.mo),r.ms2mrc&&(u="various"===e.ms||"various"===i.size?3:r.ms2mrc(e.ms),e.mrc=u,r.selectedSizeFn&&(u=e.mrc=r.selectedSizeFn(e)),h=m.symbolNumber(e.mx||i.symbol)||0,e.om=100<=h%200,t.attr("d",g(h,u)));var s,l,c,u,d,f,p,h=!1;e.so?(l=o.outlierwidth,c=o.outliercolor,s=i.outliercolor):(f=(o||{}).width,l=(e.mlw+1||f+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,c="mlc"in e?e.mlcc=r.lineScale(e.mlc):S.isArrayOrTypedArray(o.color)?A.defaultLine:o.color,S.isArrayOrTypedArray(i.color)&&(s=A.defaultLine,h=!0),s="mc"in e?e.mcc=r.markerScale(e.mc):i.color||"rgba(0,0,0,0)",r.selectedColorFn&&(s=r.selectedColorFn(e))),e.om?t.call(A.stroke,s).style({"stroke-width":(l||1)+"px",fill:"none"}):(t.style("stroke-width",(e.isBlank?0:l)+"px"),u=i.gradient,(f=e.mgt)?h=!0:f=u&&u.type,S.isArrayOrTypedArray(f)&&(f=f[0],b[f]||(f=0)),r=(o=i.pattern)&&m.getPatternAttr(o.shape,e.i,""),f&&"none"!==f?((p=e.mgc)?h=!0:p=u.color,d=n.uid,h&&(d+="-"+e.i),m.gradient(t,a,d,f,[[0,p],[1,s]],"fill")):r?(i=m.getPatternAttr(o.bgcolor,e.i,null),u=m.getPatternAttr(o.fgcolor,e.i,null),h=o.fgopacity,d=m.getPatternAttr(o.size,e.i,8),f=m.getPatternAttr(o.solidity,e.i,.3),p=e.mcc||S.isArrayOrTypedArray(o.shape)||S.isArrayOrTypedArray(o.bgcolor)||S.isArrayOrTypedArray(o.size)||S.isArrayOrTypedArray(o.solidity),n=n.uid,p&&(n+="-"+e.i),m.pattern(t,"point",a,n,r,d,f,e.mcc,o.fillmode,i,u,h)):A.fill(t,s),l&&A.stroke(t,c))},m.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=m.tryColorscale(n,""),t.lineScale=m.tryColorscale(n,"line"),v.traceIs(e,"symbols")&&(t.ms2mrc=o.isBubble(e)?s(e):function(){return(n.size||6)/2}),e.selectedpoints&&S.extendFlat(t,m.makeSelectedPointStyleFns(e)),t},m.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},a=e.marker||{},i=n.marker||{},n=r.marker||{},r=a.opacity,o=i.opacity,s=n.opacity,l=void 0!==o,c=void 0!==s;(S.isArrayOrTypedArray(r)||l||c)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?a.opacity:e.mo;return e.selected?l?o:t:c?s:x*t});var u=a.color,d=i.color,f=n.color;(d||f)&&(t.selectedColorFn=function(e){var t=e.mcc||u;return e.selected?d||t:f||t});var p=a.size,h=i.size,m=n.size,g=void 0!==h,y=void 0!==m;return v.traceIs(e,"symbols")&&(g||y)&&(t.selectedSizeFn=function(e){var t=e.mrc||p/2;return e.selected?g?h/2:t:y?m/2:t}),t},m.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},e=e.textfont||{},n=n.textfont||{},r=r.textfont||{},a=e.color,i=n.color,o=r.color;return t.selectedTextColorFn=function(e){var t=e.tc||a;return e.selected?i||t:o||(i?t:A.addOpacity(t,x))},t},m.selectedPointStyle=function(e,t){var a,i,r;e.size()&&t.selectedpoints&&(a=m.makeSelectedPointStyleFns(t),i=t.marker||{},r=[],a.selectedOpacityFn&&r.push(function(e,t){e.style("opacity",a.selectedOpacityFn(t))}),a.selectedColorFn&&r.push(function(e,t){A.fill(e,a.selectedColorFn(t))}),a.selectedSizeFn&&r.push(function(e,t){var n=t.mx||i.symbol||0,r=a.selectedSizeFn(t);e.attr("d",g(m.symbolNumber(n),r)),t.mrc2=r}),r.length&&e.each(function(e){for(var t=k.select(this),n=0;n<r.length;n++)r[n](t,e)}))},m.tryColorscale=function(e,t){t=t?S.nestedProperty(e,t).get():e;if(t){e=t.color;if((t.colorscale||t._colorAx)&&S.isArrayOrTypedArray(e))return r.makeColorScaleFuncFromTrace(t)}return S.identity};var _={start:1,end:-1,middle:0,bottom:1,top:-1};function w(e,t,n,r){var a=k.select(e.node().parentNode),i=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",o=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",s=r?r/.8+1:0,t=(d.lineCount(e)-1)*c+1,r=_[o]*s,n=.75*n+_[i]*s+(_[i]-1)*t*n/2;e.attr("text-anchor",o),a.attr("transform",l(r,n))}function T(e,t){t=e.ts||t.textfont.size;return a(t)&&0<t?t:0}m.textPointStyle=function(e,o,s){var l,c,u;e.size()&&(o.selectedpoints&&(l=m.makeSelectedTextStyleFns(o).selectedTextColorFn),c=o.texttemplate,u=s._fullLayout,e.each(function(e){var t,n,r,a=k.select(this),i=c?S.extractOption(e,o,"txt","texttemplate"):S.extractOption(e,o,"tx","text");i||0===i?(c&&(t=(r=o._module.formatLabels)?r(e,o,u):{},p(n={},o,e.i),r=o._meta||{},i=S.texttemplateString(i,t,u._d3locale,n,e,r)),t=e.tp||o.textposition,n=T(e,o),r=l?l(e):e.tc||o.textfont.color,a.call(m.font,e.tf||o.textfont.family,n,r).text(i).call(d.convertToTspans,s).call(w,t,n,e.mrc)):a.remove()}))},m.selectedTextStyle=function(e,i){var o;e.size()&&i.selectedpoints&&(o=m.makeSelectedTextStyleFns(i),e.each(function(e){var t=k.select(this),n=o.selectedTextColorFn(e),r=e.tp||i.textposition,a=T(e,i);A.fill(t,n),w(t,r,a,e.mrc2||e.mrc)}))};var M=.5;function E(e,t,n,r){var a=e[0]-t[0],i=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],e=Math.pow(a*a+i*i,M/2),n=Math.pow(o*o+s*s,M/2),o=(n*n*a-e*e*o)*r,s=(n*n*i-e*e*s)*r,r=3*n*(e+n),n=3*e*(e+n);return[[k.round(t[0]+(r&&o/r),2),k.round(t[1]+(r&&s/r),2)],[k.round(t[0]-(n&&o/n),2),k.round(t[1]-(n&&s/n),2)]]}m.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");for(var n="M"+e[0],r=[],a=1;a<e.length-1;a++)r.push(E(e[a-1],e[a],e[a+1],t));for(n+="Q"+r[0][0]+" "+e[1],a=2;a<e.length-1;a++)n+="C"+r[a-2][1]+" "+r[a-1][0]+" "+e[a];return n+="Q"+r[e.length-3][1]+" "+e[e.length-1]},m.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";for(var n="M"+e[0],r=e.length-1,a=[E(e[r],e[0],e[1],t)],i=1;i<r;i++)a.push(E(e[i-1],e[i],e[i+1],t));for(a.push(E(e[r-1],e[r],e[0],t)),i=1;i<=r;i++)n+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i];return n+="C"+a[r][1]+" "+a[0][0]+" "+e[0]+"Z"};function L(e,t){return"L"+k.round(t[0],2)+","+k.round(t[1],2)}var C={hv:function(e,t){return"H"+k.round(t[0],2)+"V"+k.round(t[1],2)},vh:function(e,t){return"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},hvh:function(e,t){return"H"+k.round((e[0]+t[0])/2,2)+"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},vhv:function(e,t){return"V"+k.round((e[1]+t[1])/2,2)+"H"+k.round(t[0],2)+"V"+k.round(t[1],2)}};m.steps=function(e){var r=C[e]||L;return function(e){for(var t="M"+k.round(e[0][0],2)+","+k.round(e[0][1],2),n=1;n<e.length;n++)t+=r(e[n-1],e[n]);return t}},m.makeTester=function(){var e=S.ensureSingleById(k.select("body"),"svg","js-plotly-tester",function(e){e.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=S.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=e,m.testref=t},m.savedBBoxes={};var D=0;function O(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function P(e,t){if(!e)return null;t=t._context,t=!t._exportedPlot&&t._baseUrl||"";return t?"url('"+t+"#"+e+"')":"url(#"+e+")"}m.bBox=function(e,t,n){var r,a;if(n=n||O(e)){if(c=m.savedBBoxes[n])return S.extendFlat({},c)}else if(1===e.childNodes.length){var i=e.childNodes[0];if(n=O(i)){var o=+i.getAttribute("x")||0,s=+i.getAttribute("y")||0,l=i.getAttribute("transform");if(!l){i=m.bBox(i,!1,n);return o&&(i.left+=o,i.right+=o),s&&(i.top+=s,i.bottom+=s),i}if(c=m.savedBBoxes[n+="~"+o+"~"+s+"~"+l])return S.extendFlat({},c)}}t?r=e:(a=m.tester.node(),r=e.cloneNode(!0),a.appendChild(r)),k.select(r).attr("transform",null).call(d.positionText,0,0);var c=r.getBoundingClientRect(),e=m.testref.node().getBoundingClientRect();t||a.removeChild(r);e={height:c.height,width:c.width,left:c.left-e.left,top:c.top-e.top,right:c.right-e.left,bottom:c.bottom-e.top};return 1e4<=D&&(m.savedBBoxes={},D=0),n&&(m.savedBBoxes[n]=e),D++,S.extendFlat({},e)},m.setClipUrl=function(e,t,n){e.attr("clip-path",P(t,n))},m.getTranslate=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},m.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=l(t,n)).trim(),e[a]("transform",r),r},m.getScale=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},m.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+="scale("+t+","+n+")").trim(),e[a]("transform",r),r};var I=/\s*sc.*/;m.setPointGroupScale=function(e,t,n){var r;t=t||1,n=n||1,e&&(r=1===t&&1===n?"":"scale("+t+","+n+")",e.each(function(){var e=(this.getAttribute("transform")||"").replace(I,""),e=(e+=r).trim();this.setAttribute("transform",e)}))};var R=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(e,a,i){e&&e.each(function(){var e,t,n=k.select(this),r=n.select("text");r.node()&&(e=parseFloat(r.attr("x")||0),t=parseFloat(r.attr("y")||0),r=(n.attr("transform")||"").match(R),t=1===a&&1===i?[]:[l(e,t),"scale("+a+","+i+")",l(-e,-t)],r&&t.push(r),n.attr("transform",t.join("")))})}},{"../../components/fx/helpers":191,"../../constants/alignment":260,"../../constants/interactions":264,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../lib/svg_text_utils":307,"../../registry":373,"../../traces/scatter/make_bubble_size_func":511,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale":167,"./symbol_defs":178,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],178:[function(e,t,n){"use strict";var c=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){e=c.round(e,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(e){var t=c.round(.4*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H"+t+"V"+e+"H-"+t+"V"+t+"H-"+e+"V-"+t+"H-"+t+"V-"+e+"H"+t+"V-"+t+"H"+e+"Z"}},x:{n:4,f:function(e){var t=c.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,r="l"+t+",-"+t,a="l-"+t+",-"+t,e="l-"+t+","+t;return"M0,"+t+n+r+a+r+a+e+a+e+n+e+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+","+c.round(e/2,2)+"H"+t+"L0,-"+c.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+c.round(e/2,2)+"H"+t+"L0,"+c.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M"+c.round(e/2,2)+",-"+t+"V"+t+"L-"+c.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+c.round(e/2,2)+",-"+t+"V"+t+"L"+c.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+e+",-"+t+"H"+t+"V"+e+"Z"}},"triangle-se":{n:10,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+t+",-"+e+"V"+t+"H-"+e+"Z"}},"triangle-sw":{n:11,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H-"+t+"V-"+e+"Z"}},"triangle-nw":{n:12,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+t+","+e+"V-"+t+"H"+e+"Z"}},pentagon:{n:13,f:function(e){var t=c.round(.951*e,2),n=c.round(.588*e,2),r=c.round(-e,2),a=c.round(-.309*e,2);return"M"+t+","+a+"L"+n+","+c.round(.809*e,2)+"H-"+n+"L-"+t+","+a+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M"+e+",-"+n+"V"+n+"L0,"+t+"L-"+e+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+e+"H"+n+"L"+t+",0L"+n+",-"+e+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=c.round(.924*e,2),e=c.round(.383*e,2);return"M-"+e+",-"+t+"H"+e+"L"+t+",-"+e+"V"+e+"L"+e+","+t+"H-"+e+"L-"+t+","+e+"V-"+e+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=c.round(.225*t,2),r=c.round(.951*t,2),a=c.round(.363*t,2),i=c.round(.588*t,2),o=c.round(-t,2),s=c.round(-.309*t,2),l=c.round(.118*t,2),e=c.round(.809*t,2);return"M"+n+","+s+"H"+r+"L"+a+","+l+"L"+i+","+e+"L0,"+c.round(.382*t,2)+"L-"+i+","+e+"L-"+a+","+l+"L-"+r+","+s+"H-"+n+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=c.round(.66*e,2),n=c.round(.38*e,2),e=c.round(.76*e,2);return"M-"+e+",0l-"+n+",-"+t+"h"+e+"l"+n+",-"+t+"l"+n+","+t+"h"+e+"l-"+n+","+t+"l"+n+","+t+"h-"+e+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+","+n+e+t+","+n+e+"0,-"+r+e+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M"+t+",-"+n+e+"-"+t+",-"+n+e+"0,"+r+e+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=c.round(1.1*e,2),e=c.round(2*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",-"+t+e+"-"+t+","+t+e+t+","+t+e+t+",-"+t+e+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=c.round(1.4*e,2),e=c.round(1.9*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",0"+e+"0,"+t+e+t+",0"+e+"0,-"+t+e+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=c.round(.7*e,2),e=c.round(1.4*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=c.round(1.4*e,2),e=c.round(.7*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(e){e=c.round(e,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=c.round(e,2),e=c.round(e/Math.sqrt(2),2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=c.round(1.3*e,2),e=c.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+e+",-"+e+"L"+e+","+e+"M-"+e+","+e+"L"+e+",-"+e},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=c.round(1.2*e,2),e=c.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=c.round(e/2,2),e=c.round(e,2);return"M"+t+","+e+"V-"+e+"m-"+e+",0V"+e+"M"+e+","+t+"H-"+e+"m0,-"+e+"H"+e},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+","+e+"L0,0M"+t+","+e+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+",-"+e+"L0,0M"+t+",-"+e+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M"+e+","+t+"L0,0M"+e+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+e+","+t+"L0,0M-"+e+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){e=c.round(1.4*e,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){e=c.round(e,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L-"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L-"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":20}],179:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],180:[function(e,t,n){"use strict";var f=e("fast-isnumeric"),s=e("../../registry"),p=e("../../plots/cartesian/axes"),h=e("../../lib"),m=e("./compute_error");function l(e,t,n,r){var a=t["error_"+r]||{},i=[];if(a.visible&&-1!==["linear","log"].indexOf(n.type)){for(var o=m(a),s=0;s<e.length;s++){var l=e[s],c=l.i;if(void 0===c)c=s;else if(null===c)continue;var u,d=l[r];f(n.c2l(d))&&(u=o(d,c),f(u[0])&&f(u[1])&&(c=l[r+"s"]=d-u[0],u=l[r+"h"]=d+u[1],i.push(c,u)))}a=n._id,t=t._extremes[a],a=p.findExtremes(n,i,h.extendFlat({tozero:t.opts.tozero},{padded:!0}));t.min=t.min.concat(a.min),t.max=t.max.concat(a.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r,a,i=t[n],o=i[0].trace;!0===o.visible&&s.traceIs(o,"errorBarsOK")&&(r=p.getFromId(e,o.xaxis),a=p.getFromId(e,o.yaxis),l(i,o,r,"x"),l(i,o,a,"y"))}}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./compute_error":181,"fast-isnumeric":31}],181:[function(e,t,n){"use strict";function s(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var r=e.array||[];if(n)return function(e,t){t=+r[t];return[t,t]};var a=e.arrayminus||[];return function(e,t){var n=+r[t],t=+a[t];return isNaN(n)&&isNaN(t)?[NaN,NaN]:[t||0,n||0]}}var i=s(t,e.value),o=s(t,e.valueminus);return n||void 0===e.valueminus?function(e){e=i(e);return[e,e]}:function(e){return[o(e),i(e)]}}},{}],182:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../registry"),u=e("../../lib"),d=e("../../plot_api/plot_template"),f=e("./attributes");t.exports=function(e,t,n,r){var a="error_"+r.axis,i=d.newContainer(t,a),o=e[a]||{};function s(e,t){return u.coerce(o,i,f,e,t)}!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)&&(e=!0,"sqrt"!==(a=s("type","array"in o?"data":"percent"))&&(e=s("symmetric",!(("data"===a?"arrayminus":"valueminus")in o))),"data"===a?(s("array"),s("traceref"),e||(s("arrayminus"),s("tracerefminus"))):"percent"!==a&&"constant"!==a||(s("value"),e||s("valueminus")),e="copy_"+r.inherit+"style",r.inherit&&(t["error_"+r.inherit]||{}).visible&&s(e,!(o.color||l(o.thickness)||l(o.width))),r.inherit&&i[e]||(s("color",n),s("thickness"),s("width",c.traceIs(t,"gl3d")?0:4)))}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"./attributes":179,"fast-isnumeric":31}],183:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plot_api/edit_types").overrideAll,i=e("./attributes"),o={error_x:r.extendFlat({},i),error_y:r.extendFlat({},i)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;i={error_x:r.extendFlat({},i),error_y:r.extendFlat({},i),error_z:r.extendFlat({},i)};delete i.error_x.copy_ystyle,delete i.error_y.copy_ystyle,delete i.error_z.copy_ystyle,delete i.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(i,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":285,"../../plot_api/edit_types":313,"./attributes":179,"./calc":180,"./compute_error":181,"./defaults":182,"./plot":184,"./style":185}],184:[function(e,t,n){"use strict";var f=e("@plotly/d3"),p=e("fast-isnumeric"),h=e("../drawing"),m=e("../../traces/scatter/subtypes");t.exports=function(r,e,a,l){var c=a.xaxis,u=a.yaxis,d=l&&0<l.duration;e.each(function(e){var t=e[0].trace,i=t.error_x||{},o=t.error_y||{};t.ids&&(n=function(e){return e.id});var s=m.hasMarkers(t)&&0<t.marker.maxdisplayed;o.visible||i.visible||(e=[]);var n=f.select(this).selectAll("g.errorbar").data(e,n);n.exit().remove(),e.length&&(i.visible||n.selectAll("path.xerror").remove(),o.visible||n.selectAll("path.yerror").remove(),n.style("opacity",1),e=n.enter().append("g").classed("errorbar",!0),d&&e.style("opacity",0).transition().duration(l.duration).style("opacity",1),h.setClipUrl(n,a.layerClipId,r),n.each(function(e){var t,n,r=f.select(this),a=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),p(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),p(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,c,u);s&&!e.vis||(e=r.select("path.yerror"),o.visible&&p(a.x)&&p(a.yh)&&p(a.ys)?(n=o.width,t="M"+(a.x-n)+","+a.yh+"h"+2*n+"m-"+n+",0V"+a.ys,a.noYS||(t+="m-"+n+",0h"+2*n),!e.size()?e=r.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(e=e.transition().duration(l.duration).ease(l.easing)),e.attr("d",t)):e.remove(),n=r.select("path.xerror"),i.visible&&p(a.y)&&p(a.xh)&&p(a.xs)?(e=(i.copy_ystyle?o:i).width,t="M"+a.xh+","+(a.y-e)+"v"+2*e+"m0,-"+e+"H"+a.xs,a.noXS||(t+="m0,-"+e+"v"+2*e),!n.size()?n=r.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(n=n.transition().duration(l.duration).ease(l.easing)),n.attr("d",t)):n.remove())}))})}},{"../../traces/scatter/subtypes":519,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],185:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},e=t.error_x||{},t=r.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(a.stroke,n.color),e.copy_ystyle&&(e=n),t.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(a.stroke,e.color)})}},{"../color":155,"@plotly/d3":20}],186:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("./layout_attributes").hoverlabel,e=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:e({},a.bgcolor,{arrayOk:!0}),bordercolor:e({},a.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:e({},a.align,{arrayOk:!0}),namelength:e({},a.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":279,"../../plots/font_attributes":360,"./layout_attributes":196}],187:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");function c(e,t,n,r){r=r||s.identity,Array.isArray(e)&&(t[0][n]=r(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;for(var r=0;r<t.length;r++){var a,i=t[r],o=i[0].trace;l.traceIs(o,"pie-like")||((a=l.traceIs(o,"2dMap")?c:s.fillArray)(o.hoverinfo,i,"hi",function(t){return function(e){return s.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}(o)),o.hovertemplate&&a(o.hovertemplate,i,"ht"),o.hoverlabel&&(a(o.hoverlabel.bgcolor,i,"hbg"),a(o.hoverlabel.bordercolor,i,"hbc"),a(o.hoverlabel.font.size,i,"hts"),a(o.hoverlabel.font.color,i,"htc"),a(o.hoverlabel.font.family,i,"htf"),a(o.hoverlabel.namelength,i,"hnl"),a(o.hoverlabel.align,i,"hta")))}}},{"../../lib":285,"../../registry":373}],188:[function(e,t,n){"use strict";var i=e("../../registry"),o=e("./hover").hover;t.exports=function(e,t,n){var r=i.getComponentMethod("annotations","onClick")(e,e._hoverdata);function a(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&o(e,t,n,!0),e._hoverdata&&t&&t.target&&(r&&r.then?r.then(a):a(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":373,"./hover":192}],189:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],190:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./attributes"),o=e("./hoverlabel_defaults");t.exports=function(n,r,e,t){t=a.extendFlat({},t.hoverlabel);r.hovertemplate&&(t.namelength=-1),o(n,r,function(e,t){return a.coerce(n,r,i,e,t)},t)}},{"../../lib":285,"./attributes":186,"./hoverlabel_defaults":193}],191:[function(e,t,o){"use strict";var u=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},o.isTraceInSubplots=function(e,t){if("splom"!==e.type)return-1!==t.indexOf(o.getSubplot(e));for(var n=e.xaxes||[],r=e.yaxes||[],a=0;a<n.length;a++)for(var i=0;i<r.length;i++)if(-1!==t.indexOf(n[a]+r[i]))return!0;return!1},o.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},o.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},o.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||o.quadrature(t,n):"x"===e.charAt(0)?t:n},o.getClosest=function(e,t,n){if(!1!==n.index)0<=n.index&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var a=t(e[r]);a<=n.distance&&(n.index=r,n.distance=a)}return n},o.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},o.quadrature=function(n,r){return function(e){var t=n(e),e=r(e);return Math.sqrt(t*t+e*e)}},o.makeEventData=function(e,t,n){var r,a="index"in e?e.index:e.pointNumber,i={data:t._input,fullData:t,curveNumber:t.index,pointNumber:a};return t._indexToPoints?1===(r=t._indexToPoints[a]).length?i.pointIndex=r[0]:i.pointIndices=r:i.pointIndex=a,t._module.eventData?i=t._module.eventData(i,e,t,n,a):("xVal"in e?i.x=e.xVal:"x"in e&&(i.x=e.x),"yVal"in e?i.y=e.yVal:"y"in e&&(i.y=e.y),e.xa&&(i.xaxis=e.xa),e.ya&&(i.yaxis=e.ya),void 0!==e.zLabelVal&&(i.z=e.zLabelVal)),o.appendArrayPointValue(i,t,a),i},o.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var i=r[a],o=d(i);void 0!==e[o]||void 0!==(i=f(u.nestedProperty(t,i).get(),n))&&(e[o]=i)}},o.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var i=r[a],o=d(i);if(void 0===e[o]){for(var s=u.nestedProperty(t,i).get(),l=new Array(n.length),c=0;c<n.length;c++)l[c]=f(s,n[c]);e[o]=l}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function d(e){return n[e]||e}function f(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var r={x:!0,y:!0},a={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(e){return"string"==typeof e&&!!a[e]},o.isXYhover=function(e){return"string"==typeof e&&!!r[e]}},{"../../lib":285}],192:[function(e,t,n){"use strict";var te=e("@plotly/d3"),ne=e("fast-isnumeric"),_=e("tinycolor2"),re=e("../../lib"),D=re.strTranslate,O=re.strRotate,ae=e("../../lib/events"),P=e("../../lib/svg_text_utils"),ie=e("../../lib/override_cursor"),I=e("../drawing"),oe=e("../color"),se=e("../dragelement"),le=e("../../plots/cartesian/axes"),ce=e("../../registry"),ue=e("./helpers"),R=e("./constants"),N=e("../legend/defaults"),z=e("../legend/draw"),F=R.YANGLE,e=Math.PI*F/180,de=1/Math.sin(e),y=Math.cos(e),v=Math.sin(e),j=R.HOVERARROWSIZE,H=R.HOVERTEXTPAD,fe={box:!0,ohlc:!0,violin:!0,candlestick:!0};function pe(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}n.hover=function(e,t,n,r){e=re.getGraphDiv(e),re.throttle(e._fullLayout._uid+R.HOVERID,R.HOVERMINTIME,function(){!function(e,l,t,n){t=t||"xy";var c=Array.isArray(t)?t:[t],u=e._fullLayout,r=u._plots||[],t=r[t],d=u._has("cartesian");t&&(t=t.overlays.map(function(e){return e.id}),c=c.concat(t));for(var a=c.length,f=new Array(a),p=new Array(a),i=!1,o=0;o<a;o++){var s=c[o];if(r[s])i=!0,f[o]=r[s].xaxis,p[o]=r[s].yaxis;else{if(!u[s]||!u[s]._subplot)return re.warn("Unrecognized subplot: "+s);s=u[s]._subplot;f[o]=s.xaxis,p[o]=s.yaxis}}var h=l.hovermode||u.hovermode;h&&!i&&(h="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(h)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return se.unhoverRaw(e,l);var m=u.hoverdistance;-1===m&&(m=1/0);var g=u.spikedistance;-1===g&&(g=1/0);var y,v,x,b,_,w,T,M,k,A,S,E,L,C=[],D=[],O={hLinePoint:null,vLinePoint:null},P=!1;if(Array.isArray(l))for(h="array",x=0;x<l.length;x++)(_=e.calcdata[l[x].curveNumber||0])&&(w=_[0].trace,"skip"!==_[0].trace.hoverinfo&&(D.push(_),"h"===w.orientation&&(P=!0)));else{for(b=0;b<e.calcdata.length;b++)_=e.calcdata[b],"skip"!==(w=_[0].trace).hoverinfo&&ue.isTraceInSubplots(w,c)&&(D.push(_),"h"===w.orientation&&(P=!0));if(!l.target)j="xpx"in l?l.xpx:f[0]._length/2,H="ypx"in l?l.ypx:p[0]._length/2;else{if(!1===ae.triggerHandler(e,"plotly_beforehover",l))return;var I=l.composedPath&&l.composedPath()[0],I=(I=I||l.target).getBoundingClientRect();j=l.clientX-I.left,H=l.clientY-I.top,u._calcInverseTransform(e);I=re.apply3DTransform(u._invTransform)(j,H);if(j=I[0],H=I[1],j<0||j>f[0]._length||H<0||H>p[0]._length)return se.unhoverRaw(e,l)}if(l.pointerX=j+f[0]._offset,l.pointerY=H+p[0]._offset,y="xval"in l?ue.flat(c,l.xval):ue.p2c(f,j),v="yval"in l?ue.flat(c,l.yval):ue.p2c(p,H),!ne(y[0])||!ne(v[0]))return re.warn("Fx.hover failed",l,e),se.unhoverRaw(e,l)}var R=1/0;function N(e,t){for(b=0;b<D.length;b++)if((_=D[b])&&_[0]&&_[0].trace&&!0===(w=_[0].trace).visible&&0!==w._length&&-1===["carpet","contourcarpet"].indexOf(w._module.name)){var n,r,a;if("splom"===w.type?T=c[M=0]:(T=ue.getSubplot(w),M=c.indexOf(T)),k=h,ue.isUnifiedHover(k)&&(k=k.charAt(0)),E={cd:_,trace:w,xa:f[M],ya:p[M],maxHoverDistance:m,maxSpikeDistance:g,index:!1,distance:Math.min(R,m),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:oe.defaultLine,name:w.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[T]&&(E.subplot=u[T]._subplot),u._splomScenes&&u._splomScenes[w.uid]&&(E.scene=u._splomScenes[w.uid]),L=C.length,"array"===k?"pointNumber"in(r=l[b])?(E.index=r.pointNumber,k="closest"):(k="","xval"in r&&(A=r.xval,k="x"),"yval"in r&&(S=r.yval,k=k?"closest":"y")):S=void 0!==e&&void 0!==t?(A=e,t):(A=y[M],v[M]),0!==m)if(w._module&&w._module.hoverPoints){var i=w._module.hoverPoints(E,A,S,k,{finiteRange:!0,hoverLayer:u._hoverlayer});if(i)for(var o,s=0;s<i.length;s++)o=i[s],ne(o.x0)&&ne(o.y0)&&C.push(function(r,e){var n=r.index,a=r.trace||{},i=r.cd[0],o=r.cd[n]||{};function s(e){return e||ne(e)&&0===e}var l=Array.isArray(n)?function(e,t){e=re.castOption(i,n,e);return s(e)?e:re.extractOption({},a,"",t)}:function(e,t){return re.extractOption(o,a,e,t)};function t(e,t,n){n=l(t,n);s(n)&&(r[e]=n)}t("hoverinfo","hi","hoverinfo"),t("bgcolor","hbg","hoverlabel.bgcolor"),t("borderColor","hbc","hoverlabel.bordercolor"),t("fontFamily","htf","hoverlabel.font.family"),t("fontSize","hts","hoverlabel.font.size"),t("fontColor","htc","hoverlabel.font.color"),t("nameLength","hnl","hoverlabel.namelength"),t("textAlign","hta","hoverlabel.align"),r.posref="y"===e||"closest"===e&&"h"===a.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=re.constrain(r.x0,0,r.xa._length),r.x1=re.constrain(r.x1,0,r.xa._length),r.y0=re.constrain(r.y0,0,r.ya._length),r.y1=re.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:le.hoverLabelText(r.xa,r.xLabelVal,a.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal));void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:le.hoverLabelText(r.ya,r.yLabelVal,a.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal));void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal));isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0||(c=le.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text,void 0!==r.xerrneg?r.xLabel+=" +"+c+" / -"+le.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+="  "+c,"x"===e&&(r.distance+=1));{var c;isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0||(c=le.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text,void 0!==r.yerrneg?r.yLabel+=" +"+c+" / -"+le.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+="  "+c,"y"===e&&(r.distance+=1))}e=r.hoverinfo||r.trace.hoverinfo;e&&"all"!==e&&(-1===(e=Array.isArray(e)?e:e.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===e.indexOf("y")&&(r.yLabel=void 0),-1===e.indexOf("z")&&(r.zLabel=void 0),-1===e.indexOf("text")&&(r.text=void 0),-1===e.indexOf("name")&&(r.name=void 0));return r}(o,h))}else re.log("Unrecognized trace type in hover:",w);"closest"===h&&C.length>L&&(C.splice(0,L),R=C[0].distance),d&&0!==g&&0===C.length&&(E.distance=g,E.index=!1,(a=(a=w._module.hoverPoints(E,A,S,"closest",{hoverLayer:u._hoverlayer}))&&a.filter(function(e){return e.spikeDistance<=g}))&&a.length&&((r=a.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap})).length&&(r=r[0],ne(r.x0)&&ne(r.y0)&&(n=F(r),(!O.vLinePoint||O.vLinePoint.spikeDistance>n.spikeDistance)&&(O.vLinePoint=n))),(a=a.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap})).length&&(a=a[0],ne(a.x0)&&ne(a.y0)&&(n=F(a),(!O.hLinePoint||O.hLinePoint.spikeDistance>n.spikeDistance)&&(O.hLinePoint=n)))))}}function z(e,t){for(var n,r=null,a=1/0,i=0;i<e.length;i++)(n=e[i].spikeDistance)<=a&&n<=t&&(r=e[i],a=n);return r}function F(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}N();var I={fullLayout:u,container:u._hoverlayer,outerContainer:u._paperdiv,event:l},j=e._spikepoints,H={vLinePoint:O.vLinePoint,hLinePoint:O.hLinePoint};e._spikepoints=H,!d||0===g||0!==C.length&&(B=z(C.filter(function(e){return e.ya.showspikes}),g),O.hLinePoint=F(B),B=z(C.filter(function(e){return e.xa.showspikes}),g),O.vLinePoint=F(B));if(0===C.length){var B=se.unhoverRaw(e,l);return!d||null===O.hLinePoint&&null===O.vLinePoint||ye(j)&&ge(e,O,I)}d&&ye(j)&&ge(e,O,I);var q,I=function(){C.sort(function(e,t){return e.distance-t.distance}),C=function(e,t){for(var n=t.charAt(0),r=[],a=[],i=[],o=0;o<e.length;o++){var s=e[o];(ce.traceIs(s.trace,"bar-like")||ce.traceIs(s.trace,"box-violin")?i:s.trace[n+"period"]?a:r).push(s)}return r.concat(a).concat(i)}(C,h)};if(I(),ue.isXYhover(k)&&0!==C[0].length&&"splom"!==C[0].trace.type){var U=C[0],Y=(C=fe[U.trace.type]?C.filter(function(e){return e.trace.index===U.trace.index}):[U]).length,V=ve("x",U,u),G=ve("y",U,u);N(V,G);var W=[],Z={},$=0,X=function(e){var t,n,r=fe[e.trace.type]?pe(e):e.trace.index;Z[r]?(t=Z[r]-1,n=W[t],0<t&&Math.abs(e.distance)<Math.abs(n.distance)&&(W[t]=e)):($++,Z[r]=$,W.push(e))};for(q=0;q<Y;q++)X(C[q]);for(q=C.length-1;Y-1<q;q--)X(C[q]);C=W,I()}var V=e._hoverdata,J=[];for(x=0;x<C.length;x++){var K,Q=C[x],ee=ue.makeEventData(Q,Q.trace,Q.cd);!1!==Q.hovertemplate&&(K=!1,Q.cd[Q.index]&&Q.cd[Q.index].ht&&(K=Q.cd[Q.index].ht),Q.hovertemplate=K||Q.trace.hovertemplate||!1),Q.eventData=[ee],J.push(ee)}e._hoverdata=J;G="y"===h&&(1<D.length||1<C.length)||"closest"===h&&P&&1<C.length,I=oe.combine(u.plot_bgcolor||oe.background,u.paper_bgcolor),I={hovermode:h,rotateLabels:G,bgColor:I,container:u._hoverlayer,outerContainer:u._paperdiv,commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance},I=he(C,I,e);ue.isUnifiedHover(h)||(function(e,r,a){var i,o,s,l,c,u,t,n=0,d=1,f=e.size(),p=new Array(f),h=0;function m(e){var t=e[0],n=e[e.length-1];if(o=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,.01<o){for(c=e.length-1;0<=c;c--)e[c].dp+=o;i=!1}if(!(s<.01)){if(o<-.01){for(c=e.length-1;0<=c;c--)e[c].dp-=s;i=!1}if(i){var r=0;for(l=0;l<e.length;l++)(u=e[l]).pos+u.dp+u.size>t.pmax&&r++;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos>t.pmax-1&&(u.del=!0,r--);for(l=0;l<e.length&&!(r<=0);l++)if((u=e[l]).pos<t.pmin+1)for(u.del=!0,r--,s=2*u.size,c=e.length-1;0<=c;c--)e[c].dp-=s;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos+u.dp+u.size>t.pmax&&(u.del=!0,r--)}}}e.each(function(e){var t=e[r],n="x"===t._id.charAt(0),t=t.range;0===h&&t&&t[0]>t[1]!=n&&(d=-1),p[h++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(n?de:1)/2,pmin:0,pmax:n?a.width:a.height}]}),p.sort(function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)});for(;!i&&n<=f;){for(n++,i=!0,l=0;l<p.length-1;){var g=p[l],y=p[l+1],v=g[g.length-1],x=y[0];if(.01<(o=v.pos+v.dp+v.size-x.pos-x.dp+x.size)&&v.pmin===x.pmin&&v.pmax===x.pmax){for(c=y.length-1;0<=c;c--)y[c].dp+=o;for(g.push.apply(g,y),p.splice(l+1,1),t=0,c=g.length-1;0<=c;c--)t+=g[c].dp;for(s=t/g.length,c=g.length-1;0<=c;c--)g[c].dp-=s;i=!1}else l++}p.forEach(m)}for(l=p.length-1;0<=l;l--){var b=p[l];for(c=b.length-1;0<=c;c--){var _=b[c],w=_.datum;w.offset=_.dp,w.del=_.del}}}(I,G?"xa":"ya",u),me(I,G,u._invScaleX,u._invScaleY));l.target&&l.target.tagName&&(G=ce.getComponentMethod("annotations","hasClickToShow")(e,J),ie(te.select(l.target),G?"pointer":""));l.target&&!n&&function(e,t){if(!t||t.length!==e._hoverdata.length)return!0;for(var n=t.length-1;0<=n;n--){var r=t[n],a=e._hoverdata[n];if(r.curveNumber!==a.curveNumber||String(r.pointNumber)!==String(a.pointNumber)||String(r.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(e,V)&&(V&&e.emit("plotly_unhover",{event:l,points:V}),e.emit("plotly_hover",{event:l,points:e._hoverdata,xaxes:f,yaxes:p,xvals:y,yvals:v}))}(e,t,n,r)})},n.loneHover=function(e,r){var t=!0;Array.isArray(e)||(t=!1,e=[e]);var n=e.map(function(e){return{color:e.color||oe.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,eventData:e.eventData||!1,hovertemplateLabels:e.hovertemplateLabels||!1}}),a=te.select(r.container),i=r.outerContainer?te.select(r.outerContainer):a,e={hovermode:"closest",rotateLabels:!1,bgColor:r.bgColor||oe.background,container:a,outerContainer:i},a=he(n,e,r.gd),o=0,s=0;a.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var n=e.y0-e.by/2;e.offset=n-5<o?o-n+5:0,o=n+e.by+e.offset,t===r.anchorIndex&&(s=e.offset)}).each(function(e){e.offset-=s});i=r.gd._fullLayout._invScaleX,n=r.gd._fullLayout._invScaleY;return me(a,e.rotateLabels,i,n),t?a:a.node()};var l=/<extra>([\s\S]*)<\/extra>/;function he(e,t,g){var y=g._fullLayout,v=t.hovermode,h=t.rotateLabels,m=t.bgColor,n=t.container,r=t.outerContainer,x=t.commonLabelOpts||{},b=t.fontFamily||R.HOVERFONT,_=t.fontSize||R.HOVERFONTSIZE,w=e[0],T=w.xa,M=w.ya,a=v.charAt(0),k=w[a+"Label"],i=r.node().getBoundingClientRect(),A=i.top,S=i.width,E=i.height,L=void 0!==k&&w.distance<=t.hoverdistance&&("x"===v||"y"===v);if(L){for(var o=!0,s=0;s<e.length;s++)if(o&&void 0===e[s].zLabel&&(o=!1),l=e[s].hoverinfo||e[s].trace.hoverinfo){var l=Array.isArray(l)?l:l.split("+");if(-1===l.indexOf("all")&&-1===l.indexOf(v)){L=!1;break}}o&&(L=!1)}var c=n.selectAll("g.axistext").data(L?[0]:[]);if(c.enter().append("g").classed("axistext",!0),c.exit().remove(),c.each(function(){var e=te.select(this),t=re.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})}),n=re.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)}),r=x.bgcolor||oe.defaultLine,a=x.bordercolor||oe.contrast(r),i=oe.contrast(r),o={family:x.font.family||b,size:x.font.size||_,color:x.font.color||i};t.style({fill:r,stroke:a}),n.text(k).call(I.font,o).call(P.positionText,0,0).call(P.convertToTspans,g),e.attr("transform","");var s,l,c,u,d,f,p,h,m=n.node().getBoundingClientRect();"x"===v?(d="top"===T.side?"-":"",n.attr("text-anchor","middle").call(P.positionText,0,"top"===T.side?A-m.bottom-j-H:A-m.top+j+H),s=T._offset+(w.x0+w.x1)/2,l=M._offset+("top"===T.side?0:M._length),s<(a=m.width/2+H)?t.attr("d","M-"+((s=a)-j)+",0L-"+(a-2*j)+","+d+j+"H"+(H+m.width/2)+"v"+d+(2*H+m.height)+"H-"+a+"V"+d+j+"Z"):s>y.width-a?(s=y.width-a,t.attr("d","M"+(a-j)+",0L"+a+","+d+j+"v"+d+(2*H+m.height)+"H-"+a+"V"+d+j+"H"+(a-2*j)+"Z")):t.attr("d","M0,0L"+j+","+d+j+"H"+(H+m.width/2)+"v"+d+(2*H+m.height)+"H-"+(H+m.width/2)+"V"+d+j+"H-"+j+"Z")):(s="right"===M.side?(c="start",u=1,f="",T._offset+T._length):(c="end",u=-1,f="-",T._offset),l=M._offset+(w.y0+w.y1)/2,n.attr("text-anchor",c),t.attr("d","M0,0L"+f+j+","+j+"V"+(H+m.height/2)+"h"+f+(2*H+m.width)+"V-"+(H+m.height/2)+"H"+f+j+"V-"+j+"Z"),d=m.height/2,t=A-m.top-d,f="clip"+y._uid+"commonlabel"+M._id,s<m.width+2*H+j?(p="M-"+(j+H)+"-"+d+"h-"+(m.width-H)+"V"+d+"h"+(m.width-H)+"Z",h=m.width-s+H,P.positionText(n,h,t),"end"===c&&n.selectAll("tspan").each(function(){var e=te.select(this),t=I.tester.append("text").text(e.text()).call(I.font,o),n=t.node().getBoundingClientRect();Math.round(n.width)<Math.round(m.width)&&e.attr("x",h-n.width),t.remove()})):(P.positionText(n,u*(H+j),t),p=null),(t=y._topclips.selectAll("#"+f).data(p?[0]:[])).enter().append("clipPath").attr("id",f).append("path"),t.exit().remove(),t.select("path").attr("d",p),I.setClipUrl(n,p?f:null,g)),e.attr("transform",D(s,l))}),ue.isUnifiedHover(v)){if(n.selectAll("g.hovertext").remove(),0===e.length)return;a={showlegend:!0,legend:{title:{text:k,font:y.hoverlabel.font},font:y.hoverlabel.font,bgcolor:y.hoverlabel.bgcolor,bordercolor:y.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:y.legend?y.legend.traceorder:void 0,orientation:"v"}},r={};N(a,r,g._fullData);var u=r.legend;u.entries=[];for(var d=0;d<e.length;d++){var f=B(e[d],!0,v,y,k),p=f[0],C=f[1],f=e[d];f.name=C,f.text=""!==C?C+" : "+p:p;p=f.cd[f.index];p&&(p.mc&&(f.mc=p.mc),p.mcc&&(f.mc=p.mcc),p.mlc&&(f.mlc=p.mlc),p.mlcc&&(f.mlc=p.mlcc),p.mlw&&(f.mlw=p.mlw),p.mrc&&(f.mrc=p.mrc),p.dir&&(f.dir=p.dir)),f._distinct=!0,u.entries.push([f])}u.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),u.layer=n,u._inHover=!0,z(g,u);i=e[0],t=(i.y0+i.y1)/2,c=(i.x0+i.x1)/2,a=n.select("g.legend"),r=a.node().getBoundingClientRect();c+=T._offset,t+=M._offset-r.height/2;i=r.width+2*H;!(c+i<=S)&&0<=c-i?c-=i:c+=2*H;i=r.height+2*H,r=E<=t+i;return i<=E&&(t<=A?t=M._offset+2*H:r&&(t=E-i)),a.attr("transform",D(c,t)),a}n=n.selectAll("g.hovertext").data(e,pe);return n.enter().append("g").classed("hovertext",!0).each(function(){var e=te.select(this);e.append("rect").call(oe.fill,oe.addOpacity(m,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(I.font,b,_)}),n.exit().remove(),n.each(function(e){var t=te.select(this).attr("transform",""),n=e.color;Array.isArray(n)&&(n=n[e.eventData[0].pointNumber]);var r=e.bgcolor||n,a=oe.combine(oe.opacity(r)?r:oe.defaultLine,m),i=oe.combine(oe.opacity(n)?n:oe.defaultLine,m),o=e.borderColor||oe.contrast(a),s=B(e,L,v,y,k,t),l=s[0],c=s[1],u=t.select("text.nums").call(I.font,e.fontFamily||b,e.fontSize||_,e.fontColor||o).text(l).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),r=t.select("text.name"),n=0,s=0;c&&c!==l?(r.call(I.font,e.fontFamily||b,e.fontSize||_,i).text(c).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),n=(p=r.node().getBoundingClientRect()).width+2*H,s=p.height+2*H):(r.remove(),t.select("rect").remove()),t.select("path").style({fill:a,stroke:o});var d,f,l=u.node().getBoundingClientRect(),i=e.xa._offset+(e.x0+e.x1)/2,c=e.ya._offset+(e.y0+e.y1)/2,p=Math.abs(e.x1-e.x0),a=Math.abs(e.y1-e.y0),o=l.width+j+H+n;e.ty0=A-l.top,e.bx=l.width+2*H,e.by=Math.max(l.height+2*H,s),e.anchor="start",e.txwidth=l.width,e.tx2width=n,e.offset=0,h?(e.pos=i,f=c+a/2+o<=E,d=0<=c-a/2-o,"top"!==e.idealAlign&&f||!d?f?(c+=a/2,e.anchor="start"):e.anchor="middle":(c-=a/2,e.anchor="end")):(e.pos=c,f=i+p/2+o<=S,d=0<=i-p/2-o,"left"!==e.idealAlign&&f||!d?f?(i+=p/2,e.anchor="start"):(e.anchor="middle",o=i-(f=o/2),0<(f=i+f-S)&&(i-=f),o<0&&(i+=-o)):(i-=p/2,e.anchor="end")),u.attr("text-anchor",e.anchor),n&&r.attr("text-anchor",e.anchor),t.attr("transform",D(i,c)+(h?O(F):""))}),n}function B(n,e,t,r,a,i){var o="",s="";void 0!==n.nameOverride&&(n.name=n.nameOverride),n.name&&(n.trace._meta&&(n.name=re.templateString(n.name,n.trace._meta)),o=c(n.name,n.nameLength));t=t.charAt(0);void 0!==n.zLabel?(void 0!==n.xLabel&&(s+="x: "+n.xLabel+"<br>"),void 0!==n.yLabel&&(s+="y: "+n.yLabel+"<br>"),"choropleth"!==n.trace.type&&"choroplethmapbox"!==n.trace.type&&(s+=(s?"z: ":"")+n.zLabel)):e&&n[t+"Label"]===a?s=n[("x"===t?"y":"x")+"Label"]||"":void 0===n.xLabel?void 0!==n.yLabel&&"scattercarpet"!==n.trace.type&&(s=n.yLabel):s=void 0===n.yLabel?n.xLabel:"("+n.xLabel+", "+n.yLabel+")",!n.text&&0!==n.text||Array.isArray(n.text)||(s+=(s?"<br>":"")+n.text),void 0!==n.extraText&&(s+=(s?"<br>":"")+n.extraText),i&&""===s&&!n.hovertemplate&&(""===o&&i.remove(),s=o);e=n.hovertemplate||!1;return e&&(i=n.hovertemplateLabels||n,n[t+"Label"]!==a&&(i[t+"other"]=i[t+"Val"],i[t+"otherLabel"]=i[t+"Label"]),s=(s=re.hovertemplateString(e,i,r._d3locale,n.eventData[0]||{},n.trace._meta)).replace(l,function(e,t){return o=c(t,n.nameLength),""})),[s,o]}function me(e,f,p,h){function m(e){return e*p}function g(e){return e*h}e.each(function(e){var t=te.select(this);if(e.del)return t.remove();var n=t.select("text.nums"),r=e.anchor,a="end"===r?-1:1,i={start:1,end:-1,middle:0}[r],o=i*(j+H),s=o+i*(e.txwidth+H),l=0,c=e.offset,u="middle"===r;u&&(o-=e.tx2width/2,s+=e.txwidth/2+H),f&&(c*=-v,l=e.offset*y),t.select("path").attr("d",u?"M-"+m(e.bx/2+e.tx2width/2)+","+g(c-e.by/2)+"h"+m(e.bx)+"v"+g(e.by)+"h-"+m(e.bx)+"Z":"M0,0L"+m(a*j+l)+","+g(j+c)+"v"+g(e.by/2-j)+"h"+m(a*e.bx)+"v-"+g(e.by)+"H"+m(a*j+l)+"V"+g(c-j)+"Z");var d=l+o,a=c+e.ty0-e.by/2+H,o=e.textAlign||"auto";"auto"!==o&&("left"===o&&"start"!==r?(n.attr("text-anchor","start"),d=u?-e.bx/2-e.tx2width/2+H:-e.bx-H):"right"===o&&"end"!==r&&(n.attr("text-anchor","end"),d=u?e.bx/2-e.tx2width/2-H:e.bx+H)),n.call(P.positionText,d*p,a*h),e.tx2width&&(t.select("text.name").call(P.positionText,m(s+i*H+l),g(c+e.ty0-e.by/2+H)),t.select("rect").call(I.setRect,m(s+(i-1)*e.tx2width/2+l),g(c-e.by/2-1),m(e.tx2width),g(e.by+2)))})}function ge(e,t,n){var r,a,i,o,s,l,c,u,d,f,p,h,m=n.container,g=n.fullLayout,y=g._size,v=n.event,x=!!t.hLinePoint,b=!!t.vLinePoint;m.selectAll(".spikeline").remove(),(b||x)&&(r=oe.combine(g.plot_bgcolor,g.paper_bgcolor),x&&(a=(o=t.hLinePoint)&&o.xa,i="cursor"===(d=o&&o.ya).spikesnap?(c=v.pointerX,v.pointerY):(c=a._offset+o.x,d._offset+o.y),n=_.readability(o.color,r)<1.5?oe.contrast(r):o.color,g=d.spikemode,x=d.spikethickness,f=d.spikecolor||n,o=le.getPxPosition(e,d),-1===g.indexOf("toaxis")&&-1===g.indexOf("across")||(-1!==g.indexOf("toaxis")&&(s=o,l=c),-1!==g.indexOf("across")&&(n=d._counterDomainMin,c=d._counterDomainMax,"free"===d.anchor&&(n=Math.min(n,d.position),c=Math.max(c,d.position)),s=y.l+n*y.w,l=y.l+c*y.w),m.insert("line",":first-child").attr({x1:s,x2:l,y1:i,y2:i,"stroke-width":x,stroke:f,"stroke-dasharray":I.dashStyle(d.spikedash,x)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:s,x2:l,y1:i,y2:i,"stroke-width":x+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==g.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:o+("right"!==d.side?x:-x),cy:i,r:x,fill:f}).classed("spikeline",!0)),b&&(a=(f=t.vLinePoint)&&f.xa,d=f&&f.ya,b="cursor"===a.spikesnap?(u=v.pointerX,v.pointerY):(u=a._offset+f.x,d._offset+f.y),t=_.readability(f.color,r)<1.5?oe.contrast(r):f.color,v=a.spikemode,d=a.spikethickness,f=a.spikecolor||t,t=le.getPxPosition(e,a),-1===v.indexOf("toaxis")&&-1===v.indexOf("across")||(-1!==v.indexOf("toaxis")&&(p=t,h=b),-1!==v.indexOf("across")&&(e=a._counterDomainMin,b=a._counterDomainMax,"free"===a.anchor&&(e=Math.min(e,a.position),b=Math.max(b,a.position)),p=y.t+(1-b)*y.h,h=y.t+(1-e)*y.h),m.insert("line",":first-child").attr({x1:u,x2:u,y1:p,y2:h,"stroke-width":d,stroke:f,"stroke-dasharray":I.dashStyle(a.spikedash,d)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:u,x2:u,y1:p,y2:h,"stroke-width":d+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==v.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:u,cy:t-("top"!==a.side?d:-d),r:d,fill:f}).classed("spikeline",!0)))}function ye(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function c(e,t){return P.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function ve(e,t,n){var r=t[e+"a"],e=t[e+"Val"];"category"===r.type?e=r._categoriesMap[e]:"date"===r.type&&(e=r.d2c(e));t=t.cd[t.index];return t&&t.t&&t.t.posLetter===r._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(e+=t.t.dPos)),e}},{"../../lib":285,"../../lib/events":278,"../../lib/override_cursor":296,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../legend/defaults":207,"../legend/draw":208,"./constants":189,"./helpers":191,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],193:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../color"),s=e("./helpers").isUnifiedHover;t.exports=function(e,t,n,r){function a(e){r.font[e]||(r.font[e]=(t.legend||t).font[e])}r=r||{},t&&s(t.hovermode)&&(r.font||(r.font={}),a("size"),a("family"),a("color"),t.legend?(r.bgcolor||(r.bgcolor=o.combine(t.legend.bgcolor,t.paper_bgcolor)),r.bordercolor||(r.bordercolor=t.legend.bordercolor)):r.bgcolor||(r.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),i.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":285,"../color":155,"./helpers":191}],194:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return void 0!==r[e]?r[e]:a.coerce(n,r,i,e,t)}return e("clickmode"),e("hovermode")}},{"../../lib":285,"./layout_attributes":196}],195:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../../lib"),i=e("../dragelement"),o=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,n){return a.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(t,n,e){return a.castOption(t,e,"hoverinfo",function(e){return a.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)})},hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:function(e){e=a.isD3Selection(e)?e:r.select(e);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":285,"../dragelement":174,"./attributes":186,"./calc":187,"./click":188,"./constants":189,"./defaults":190,"./helpers":191,"./hover":192,"./layout_attributes":196,"./layout_defaults":197,"./layout_global_defaults":198,"@plotly/d3":20}],196:[function(e,t,n){"use strict";var r=e("./constants"),e=e("../../plots/font_attributes")({editType:"none"});e.family.dflt=r.HOVERFONT,e.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:e,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":360,"./constants":189}],197:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes"),l=e("./hovermode_defaults"),c=e("./hoverlabel_defaults");t.exports=function(n,r){function e(e,t){return o.coerce(n,r,s,e,t)}l(n,r)&&(e("hoverdistance"),e("spikedistance")),"select"===e("dragmode")&&e("selectdirection");var t=r._has("mapbox"),a=r._has("geo"),i=r._basePlotModules.length;"zoom"===r.dragmode&&((t||a)&&1===i||t&&a&&2===i)&&(r.dragmode="pan"),c(n,r,e)}},{"../../lib":285,"./hoverlabel_defaults":193,"./hovermode_defaults":194,"./layout_attributes":196}],198:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./hoverlabel_defaults"),o=e("./layout_attributes");t.exports=function(n,r){i(n,r,function(e,t){return a.coerce(n,r,o,e,t)})}},{"../../lib":285,"./hoverlabel_defaults":193,"./layout_attributes":196}],199:[function(e,t,n){"use strict";var h=e("../../lib"),r=e("../../lib/regex").counter,a=e("../../plots/domain").attributes,i=e("../../plots/cartesian/constants").idRegex,m=e("../../plot_api/plot_template"),g={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[i.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[i.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function D(e,t,n){t=t[n+"axes"],n=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(t)?t:n.length?n:void 0}function y(e,t,n,r,a,i){var o=t(e+"gap",n),n=t("domain."+e);t(e+"side",r);for(var s=new Array(a),l=n[0],c=(n[1]-l)/(a-o),u=c*(1-o),d=0;d<a;d++){var f=l+c*d;s[i?a-1-d:d]=[f,f+u]}return s}function O(e,n,t,r,a){var i,o=new Array(t);function s(e,t){-1!==n.indexOf(t)&&void 0===r[t]?(o[e]=t,r[t]=e):o[e]=""}if(Array.isArray(e))for(i=0;i<t;i++)s(i,e[i]);else for(s(0,a),i=1;i<t;i++)s(i,a+(i+1));return o}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:g}},layoutAttributes:g,sizeDefaults:function(e,t){var n,r,a,i,o,s,l,c,u=e.grid||{},d=D(t,u,"x"),f=D(t,u,"y");function p(e,t){return h.coerce(u,r,g,e,t)}(e.grid||d||f)&&(n=Array.isArray(u.subplots)&&Array.isArray(u.subplots[0]),o=Array.isArray(d),s=Array.isArray(f),e=o&&d!==u.xaxes&&s&&f!==u.yaxes,n?(a=u.subplots.length,i=u.subplots[0].length):(s&&(a=f.length),o&&(i=d.length)),r=m.newContainer(t,"grid"),1<(a=p("rows",a))*(i=p("columns",i))?(n||o||s||"independent"===p("pattern")&&(n=!0),r._hasSubplotGrid=n,o="top to bottom"===p("roworder"),s=n?.3:.1,e&&t._splomGridDflt&&(l=t._splomGridDflt.xside,c=t._splomGridDflt.yside),r._domains={x:y("x",p,n?.2:.1,l,i),y:y("y",p,s,c,a,o)}):delete t.grid)},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,a,i,o,s=e.grid||{},l=t._subplots,c=n._hasSubplotGrid,u=n.rows,d=n.columns,f="independent"===n.pattern,p=n._axisMap={};if(c)for(var h=s.subplots||[],m=n.subplots=new Array(u),g=1,y=0;y<u;y++)for(var v=m[y]=new Array(d),x=h[y]||[],b=0;b<d;b++)f?(i=1===g?"xy":"x"+g+"y"+g,g++):i=x[b],v[b]="",-1!==l.cartesian.indexOf(i)&&(o=i.indexOf("y"),r=i.slice(0,o),a=i.slice(o),void 0!==p[r]&&p[r]!==b||void 0!==p[a]&&p[a]!==y||(v[b]=i,p[r]=b,p[a]=y));else{e=D(t,s,"x"),s=D(t,s,"y");n.xaxes=O(e,l.xaxis,d,p,"x"),n.yaxes=O(s,l.yaxis,u,p,"y")}var _,w=n._anchors={},T="top to bottom"===n.roworder;for(_ in p){var M,k,A,S=_.charAt(0),E=n[S+"side"];if(E.length<8)w[_]="free";else if("x"===S){if(A="t"===E.charAt(0)==T?(M=0,k=1,u):(M=u-1,k=-1),c){var L=p[_];for(y=M;y!==A;y+=k)if((i=m[y][L])&&(o=i.indexOf("y"),i.slice(0,o)===_)){w[_]=i.slice(o);break}}else for(y=M;y!==A;y+=k)if(a=n.yaxes[y],-1!==l.cartesian.indexOf(_+a)){w[_]=a;break}}else if(A="l"===E.charAt(0)?(M=0,k=1,d):(M=d-1,k=-1),c){var C=p[_];for(y=M;y!==A;y+=k)if((i=m[C][y])&&(o=i.indexOf("y"),i.slice(o)===_)){w[_]=i.slice(0,o);break}}else for(y=M;y!==A;y+=k)if(r=n.xaxes[y],-1!==l.cartesian.indexOf(r+_)){w[_]=r;break}}}}}},{"../../lib":285,"../../lib/regex":301,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/domain":359}],200:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338}],201:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),m=e("../../lib/to_log_range");t.exports=function(e,t,n,r){t=t||{};var a="log"===n&&"linear"===t.type,n="linear"===n&&"log"===t.type;if(a||n)for(var i=e._fullLayout.images,o=t._id.charAt(0),s=0;s<i.length;s++){var l,c,u,d,f,p="images["+s+"].";(f=i[s])[o+"ref"]===t._id&&(l=f[o],c=f["size"+o],d=u=null,d=a?(u=m(l,t.range),f=c/Math.pow(10,u)/2,2*Math.log(f+Math.sqrt(1+f*f))/Math.LN10):(u=Math.pow(10,l))*(Math.pow(10,c/2)-Math.pow(10,-c/2)),h(u)?h(d)||(d=null):d=u=null,r(p+o,u),r(p+"size"+o,d))}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],202:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),f=e("./attributes");function a(n,r,e){function t(e,t){return u.coerce(n,r,f,e,t)}var a=t("source");if(!t("visible",!!a))return r;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var i={_fullLayout:e},o=["x","y"],s=0;s<2;s++){var l=o[s],c=d.coerceRef(n,r,i,l,"paper",void 0);"paper"!==c&&d.getFromId(i,c)._imgIndices.push(r._index),d.coercePosition(r,i,t,c,l,0)}return r}t.exports=function(e,t){r(e,t,{name:"images",handleItemDefaults:a})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":200}],203:[function(e,t,n){"use strict";var y=e("@plotly/d3"),v=e("../drawing"),x=e("../../plots/cartesian/axes"),b=e("../../plots/cartesian/axis_ids"),_=e("../../constants/xmlns_namespaces");t.exports=function(f){for(var p=f._fullLayout,e=[],t={},n=[],r=0;r<p.images.length;r++){var a,i,o=p.images[r];o.visible&&("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref?(a=b.ref2id(o.xref)+b.ref2id(o.yref),(i=p._plots[a])?(t[a=i.mainplot?i.mainplot.id:a]||(t[a]=[]),t[a].push(o)):n.push(o)):("above"===o.layer?e:n).push(o))}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var e,a=y.select(this);this._imgSrc!==r.source&&(a.attr("xmlns",_.svg),r.source&&"data:"===r.source.slice(0,5)?(a.attr("xlink:href",r.source),this._imgSrc=r.source):(e=new Promise(function(t){var e=new Image;function n(){a.remove(),t()}(this.img=e).setAttribute("crossOrigin","anonymous"),e.onerror=n,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);e=e.toDataURL("image/png");a.attr("xlink:href",e),t()},a.on("error",n),e.src=r.source,this._imgSrc=r.source}.bind(this)),f._promises.push(e)))}function l(e){var t=y.select(this),n=x.getFromId(f,e.xref),r=x.getFromId(f,e.yref),a="domain"===x.getRefType(e.xref),i="domain"===x.getRefType(e.yref),o=p._size,s=void 0!==n?"string"==typeof e.xref&&a?n._length*e.sizex:Math.abs(n.l2p(e.sizex)-n.l2p(0)):e.sizex*o.w,l=void 0!==r?"string"==typeof e.yref&&i?r._length*e.sizey:Math.abs(r.l2p(e.sizey)-r.l2p(0)):e.sizey*o.h,c=s*h[e.xanchor].offset,u=l*m[e.yanchor].offset,d=h[e.xanchor].sizing+m[e.yanchor].sizing,a=void 0!==n?"string"==typeof e.xref&&a?n._length*e.x+n._offset:n.r2p(e.x)+n._offset:e.x*o.w+o.l;switch(a+=c,o=void 0!==r?"string"==typeof e.yref&&i?r._length*(1-e.y)+r._offset:r.r2p(e.y)+r._offset:o.h-e.y*o.h+o.t,o+=u,e.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}t.attr({x:a,y:o,width:s,height:l,preserveAspectRatio:d,opacity:e.opacity});r=(n&&"domain"!==x.getRefType(e.xref)?n._id:"")+(r&&"domain"!==x.getRefType(e.yref)?r._id:"");v.setClipUrl(t,r?"clip"+p._uid+r:null,f)}var c=p._imageLowerLayer.selectAll("image").data(n),u=p._imageUpperLayer.selectAll("image").data(e);c.enter().append("image"),u.enter().append("image"),c.exit().remove(),u.exit().remove(),c.each(function(e){s.bind(this)(e),l.bind(this)(e)}),u.each(function(e){s.bind(this)(e),l.bind(this)(e)});var d=Object.keys(p._plots);for(r=0;r<d.length;r++){a=d[r];var g=p._plots[a];g.imagelayer&&((g=g.imagelayer.selectAll("image").data(t[a]||[])).enter().append("image"),g.exit().remove(),g.each(function(e){s.bind(this)(e),l.bind(this)(e)}))}}},{"../../constants/xmlns_namespaces":266,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_ids":335,"../drawing":177,"@plotly/d3":20}],204:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":200,"./convert_coords":201,"./defaults":202,"./draw":203}],205:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),e=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":360,"../color/attributes":154}],206:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],207:[function(e,t,n){"use strict";var m=e("../../registry"),g=e("../../lib"),y=e("../../plot_api/plot_template"),v=e("./attributes"),x=e("../../plots/layout_attributes"),b=e("./helpers");t.exports=function(e,t,n){for(var r=e.legend||{},a=0,i=!1,o="normal",s=0;s<n.length;s++){var l=n[s];l.visible&&(!l.showlegend&&(!l._dfltShowLegend||l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt)||(a++,l.showlegend&&(i=!0,!m.traceIs(l,"pie-like")&&!0!==l._input.showlegend||a++)),(m.traceIs(l,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(o=b.isGrouped({traceorder:o})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(o=b.isReversed({traceorder:o})?"reversed+grouped":"grouped"))}var c,u,d,f,p=g.coerce(e,t,x,"showlegend",i&&1<a);function h(e,t){return g.coerce(r,c,v,e,t)}!1===p&&!r.uirevision||(c=y.newContainer(t,"legend"),h("uirevision",t.uirevision),!1!==p&&(h("bgcolor",t.paper_bgcolor),h("bordercolor"),h("borderwidth"),f=g.coerceFont(h,"font",t.font),e=(p="h"===h("orientation"))?(u=0,m.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(d=1.1,"bottom"):(d=-.1,"top")):(u=1.02,d=1,"auto"),h("traceorder",o),b.isGrouped(t.legend)&&h("tracegroupgap"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("x",u),h("xanchor"),h("y",d),h("yanchor",e),h("valign"),g.noneOrAll(r,c,["x","y"]),h("title.text")&&(h("title.side",p?"left":"top"),f=g.extendFlat({},f,{size:g.bigFont(f.size)}),g.coerceFont(h,"title.font",f))))}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/layout_attributes":364,"../../registry":373,"./attributes":205,"./helpers":211}],208:[function(e,t,n){"use strict";var P=e("@plotly/d3"),D=e("../../lib"),O=e("../../plots/plots"),I=e("../../registry"),o=e("../../lib/events"),R=e("../dragelement"),N=e("../drawing"),s=e("../color"),m=e("../../lib/svg_text_utils"),l=e("./handle_click"),z=e("./constants"),r=e("../../constants/alignment"),g=r.LINE_SPACING,F=r.FROM_TL,j=r.FROM_BR,c=e("./get_legend_data"),u=e("./style"),H=e("./helpers"),y=1;function B(e,t,n,r,a){var i=n.data()[0][0].trace,a={event:a,node:n.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};i._group&&(a.group=i._group),I.traceIs(i,"pie-like")&&(a.label=n.datum()[0].label),!1!==o.triggerHandler(e,"plotly_legendclick",a)&&(1===r?t._clickTimeout=setTimeout(function(){e._fullLayout&&l(n,e,r)},e._context.doubleClickDelay):2===r&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==o.triggerHandler(e,"plotly_legenddoubleclick",a)&&l(n,e,r)))}function d(a,i,o){var e,s=a.data()[0][0],l=s.trace,t=I.traceIs(l,"pie-like"),n=!o._inHover&&i._context.edits.legendText&&!t,c=o._maxNameLength;s.groupTitle?(e=s.groupTitle.text,r=s.groupTitle.font):(r=o.font,o.entries?e=s.text:(e=t?s.label:l.name,l._meta&&(e=D.templateString(e,l._meta))));t=D.ensureSingle(a,"text","legendtext");t.attr("text-anchor","start").call(N.font,r).text(n?f(e,c):e);var r=o.itemwidth+2*z.itemGap;m.positionText(t,r,0),n?t.call(m.makeEditable,{gd:i,text:e}).call(h,a,i,o).on("edit",function(e){this.text(f(e,c)).call(h,a,i,o);var t,n=s.trace._fullInput||{},r={};return I.hasTransform(n,"groupby")?(t=(t=I.getTransformIndices(n,"groupby"))[t.length-1],(t=D.keyedContainer(n,"transforms["+t+"].styles","target","value.name")).set(s.trace._group,e),r=t.constructUpdate()):r.name=e,I.call("_guiRestyle",i,r,l.index)}):h(t,a,i,o)}function f(e,t){t=Math.max(4,t);if(e&&e.trim().length>=t/2)return e;for(var n=t-(e=e||"").length;0<n;n--)e+=" ";return e}function p(t,n){var e,r=n._context.doubleClickDelay,a=1,i=D.ensureSingle(t,"rect","legendtoggle",function(e){n._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(s.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(i.on("mousedown",function(){(e=(new Date).getTime())-n._legendMouseDownTime<r?a+=1:(a=1,n._legendMouseDownTime=e)}),i.on("mouseup",function(){var e;n._dragged||n._editing||(e=n._fullLayout.legend,(new Date).getTime()-n._legendMouseDownTime>r&&(a=Math.max(a-1,1)),B(n,e,t,a,P.event))}))}function h(e,d,f,p,h){p._inHover&&e.attr("data-notex",!0),m.convertToTspans(e,f,function(){var e,t,n,r,a,i,o,s,l,c,u;t=f,n=p,r=h,u=(e=d).data()[0][0],n._inHover||!u||u.trace.showlegend?(l=e.select("g[class*=math-group]"),o=l.node(),c=(n=n||t._fullLayout.legend).borderwidth,t=(r===y?n.title:u.groupTitle||n).font.size*g,o?(s=N.bBox(o),a=s.height,i=s.width,r===y?N.setTranslate(l,c,c+.75*a):N.setTranslate(l,0,.25*a)):(o=e.select(r===y?".legendtitletext":".legendtext"),s=m.lineCount(o),l=o.node(),a=t*s,i=l?N.bBox(l).width:0,r===y?("left"===n.title.side&&(i+=2*z.itemGap),m.positionText(o,c+z.titlePad,c+t)):(c=2*z.itemGap+n.itemwidth,u.groupTitle&&(c=z.itemGap,i-=n.itemwidth),m.positionText(o,c,-t*((s-1)/2-.3)))),r===y?(n._titleWidth=i,n._titleHeight=a):(u.lineHeight=t,u.height=Math.max(a,16)+3,u.width=i)):e.remove()})}function q(e){return D.isRightAnchor(e)?"right":D.isCenterAnchor(e)?"center":"left"}function U(e){return D.isBottomAnchor(e)?"bottom":D.isMiddleAnchor(e)?"middle":"top"}t.exports=function(e,t){return function(b,_){var w,e,T=b._fullLayout,M="legend"+T._uid,k=_._inHover;k?(w=_.layer,M+="-hover"):w=T._infolayer;if(w){if(b._legendMouseDownTime||(b._legendMouseDownTime=0),k){if(!_.entries)return;e=c(_.entries,_)}else{if(!b.calcdata)return;e=T.showlegend&&c(b.calcdata,_)}var n=T.hiddenlabels||[];if(!(k||T.showlegend&&e.length))return w.selectAll(".legend").remove(),T._topdefs.select("#"+M).remove(),O.autoMargin(b,"legend");var A=D.ensureSingle(w,"g","legend",function(e){k||e.attr("pointer-events","all")}),S=D.ensureSingleById(T._topdefs,"clipPath",M,function(e){e.append("rect")}),E=D.ensureSingle(A,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});E.call(s.stroke,_.bordercolor).call(s.fill,_.bgcolor).style("stroke-width",_.borderwidth+"px");var t,L=D.ensureSingle(A,"g","scrollbox"),r=_.title;_._titleWidth=0,_._titleHeight=0,r.text?((t=D.ensureSingle(L,"text","legendtitletext")).attr("text-anchor","start").call(N.font,r.font).text(r.text),h(t,L,b,_,y)):L.selectAll(".legendtitletext").remove();var C=D.ensureSingle(A,"rect","scrollbar",function(e){e.attr(z.scrollBarEnterAttrs).call(s.fill,z.scrollBarColor)}),a=L.selectAll("g.groups").data(e);a.enter().append("g").attr("class","groups"),a.exit().remove();var i=a.selectAll("g.traces").data(D.identity);i.enter().append("g").attr("class","traces"),i.exit().remove(),i.style("opacity",function(e){var t=e[0].trace;return I.traceIs(t,"pie-like")?-1!==n.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){P.select(this).call(d,b,_)}).call(u,b,_).each(function(){k||P.select(this).call(p,b)}),D.syncOrAsync([O.previousPromises,function(){return function(e,t,n,a){var r=e._fullLayout;a=a||r.legend;var i=r._size,o=H.isVertical(a),s=H.isGrouped(a),l=a.borderwidth,c=2*l,u=z.itemGap,d=a.itemwidth+2*u,f=2*(l+u),p=U(a),h=a.y<0||0===a.y&&"top"===p,m=1<a.y||1===a.y&&"bottom"===p,g=a.tracegroupgap;a._maxHeight=Math.max(h||m?r.height/2:i.h,30);var y=0;a._width=0,a._height=0;var v=function(e){var t=0,n=0,r=e.title.side;r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight));return[t,n]}(a);{var x,b,_,w,T,M,k,A,S,E,L,C,D;o?(n.each(function(e){var t=e[0].height;N.setTranslate(this,l+v[0],l+v[1]+a._height+t/2+u),a._height+=t,a._width=Math.max(a._width,e[0].width)}),y=d+a._width,a._width+=u+d+c,a._height+=f,s&&(t.each(function(e,t){N.setTranslate(this,0,t*a.tracegroupgap)}),a._height+=(a._lgroupsLength-1)*a.tracegroupgap)):(x=q(a),b=a.x<0||0===a.x&&"right"===x,p=1<a.x||1===a.x&&"left"===x,h=m||h,r=r.width/2,a._maxWidth=Math.max(b?h&&"left"===x?i.l+i.w:r:p?h&&"right"===x?i.r+i.w:r:i.w,2*d),w=_=0,n.each(function(e){e=e[0].width+d;_=Math.max(_,e),w+=e}),y=null,T=0,s?(A=k=M=0,t.each(function(){var n=0,r=0;P.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;N.setTranslate(this,v[0],v[1]+l+u+t/2+r),r+=t,n=Math.max(n,d+e[0].width)}),M=Math.max(M,r);var e=n+u;e+l+k>a._maxWidth&&(T=Math.max(T,k),k=0,A+=M+g,M=r),N.setTranslate(this,k,A),k+=e}),a._width=Math.max(T,k)+l,a._height=A+M+f):(t=n.size(),S=w+c+(t-1)*u<a._maxWidth,D=C=L=E=0,n.each(function(e){var t=e[0].height,n=d+e[0].width,e=(S?n:_)+u;e+l+L-u>=a._maxWidth&&(T=Math.max(T,D),L=0,C+=E,a._height+=E,E=0),N.setTranslate(this,v[0]+l+L,v[1]+l+C+t/2+u),D=L+n+u,L+=e,E=Math.max(E,t)}),S?(a._width=L+c,a._height=E+f):(a._width=Math.max(T,D)+c,a._height+=E+f)))}a._width=Math.ceil(Math.max(a._width+v[0],a._titleWidth+2*(l+z.titlePad))),a._height=Math.ceil(Math.max(a._height+v[1],a._titleHeight+2*(l+z.itemGap))),a._effHeight=Math.min(a._height,a._maxHeight);var e=e._context.edits,O=e.legendText||e.legendPosition;n.each(function(e){var t=P.select(this).select(".legendtoggle"),n=e[0].height,e=O?d:y||d+e[0].width;o||(e+=u/2),N.setRect(t,0,-n/2,e,n)})}(b,a,i,_)},function(){var n,r,e,t,a,i,o,s,l,c,u,d,f,p,h,m,g,y,v;function x(e,t,n){_._scrollY=b._fullLayout.legend._scrollY=e,N.setTranslate(L,0,-e),N.setRect(C,_._width,z.scrollBarMargin+e*n,z.scrollBarWidth,t),S.select("rect").attr("y",r+e)}!k&&(e=(a=b)._fullLayout.legend,i=q(e),t=U(e),O.autoMargin(a,"legend",{x:e.x,y:e.y,l:e._width*F[i],r:e._width*j[i],b:e._effHeight*j[t],t:e._effHeight*F[t]}))||(n=T._size,r=_.borderwidth,a=n.l+n.w*_.x-F[q(_)]*_._width,i=n.t+n.h*(1-_.y)-F[U(_)]*_._effHeight,!k&&T.margin.autoexpand&&(e=a,t=i,a=D.constrain(a,0,T.width-_._width),i=D.constrain(i,0,T.height-_._effHeight),a!==e&&D.log("Constrain legend.x to make legend fit inside graph"),i!==t&&D.log("Constrain legend.y to make legend fit inside graph")),k||N.setTranslate(A,a,i),C.on(".drag",null),A.on("wheel",null),k||_._height<=_._maxHeight||b._context.staticPlot?(h=_._effHeight,k&&(h=_._height),E.attr({width:_._width-r,height:h-r,x:r/2,y:r/2}),N.setTranslate(L,0,0),S.select("rect").attr({width:_._width-2*r,height:h-2*r,x:r,y:r}),N.setClipUrl(L,M,b),N.setRect(C,0,0,0,0),delete _._scrollY):(o=Math.max(z.scrollBarMinHeight,_._effHeight*_._effHeight/_._height),s=_._effHeight-o-2*z.scrollBarMargin,l=_._height-_._effHeight,c=s/l,u=Math.min(_._scrollY||0,l),E.attr({width:_._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:_._effHeight-r,x:r/2,y:r/2}),S.select("rect").attr({width:_._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:_._effHeight-2*r,x:r,y:r+u}),N.setClipUrl(L,M,b),x(u,o,c),A.on("wheel",function(){x(u=D.constrain(_._scrollY+P.event.deltaY/s*l,0,l),o,c),0!==u&&u!==l&&P.event.preventDefault()}),h=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;d=("touchstart"===e.type?e.changedTouches[0]:e).clientY,p=u}).on("drag",function(){var e,t,n=P.event.sourceEvent;2===n.buttons||n.ctrlKey||(f=("touchmove"===n.type?n.changedTouches[0]:n).clientY,e=p,t=d,n=f,x(u=D.constrain((n-t)/c+e,0,l),o,c))}),C.call(h),h=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;"touchstart"===e.type&&(d=e.changedTouches[0].clientY,p=u)}).on("drag",function(){var e,t,n=P.event.sourceEvent;"touchmove"===n.type&&(f=n.changedTouches[0].clientY,e=p,t=d,n=f,x(u=D.constrain((t-n)/c+e,0,l),o,c))}),L.call(h)),b._context.edits.legendPosition&&(A.classed("cursor-move",!0),R.init({element:A.node(),gd:b,prepFn:function(){var e=N.getTranslate(A);y=e.x,v=e.y},moveFn:function(e,t){e=y+e,t=v+t;N.setTranslate(A,e,t),m=R.align(e,0,n.l,n.l+n.w,_.xanchor),g=R.align(t,0,n.t+n.h,n.t,_.yanchor)},doneFn:function(){void 0!==m&&void 0!==g&&I.call("_guiRelayout",b,{"legend.x":m,"legend.y":g})},clickFn:function(e,t){var n=w.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});0<n.size()&&B(b,A,n,e,t)}})))}],b)}}(e,t=t||(e._fullLayout.legend||{}))}},{"../../constants/alignment":260,"../../lib":285,"../../lib/events":278,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":206,"./get_legend_data":209,"./handle_click":210,"./helpers":211,"./style":213,"@plotly/d3":20}],209:[function(e,t,n){"use strict";var S=e("../../registry"),E=e("./helpers");t.exports=function(e,n){var t=E.isGrouped(n),r=E.isReversed(n),a={},i=[],o=!1,s={},l=0,c=0;function u(e,t){""!==e&&E.isGrouped(n)?-1===i.indexOf(e)?(i.push(e),o=!0,a[e]=[t]):a[e].push(t):(e="~~i"+l,i.push(e),a[e]=[t],l++)}for(v=0;v<e.length;v++){var d=e[v],f=d[0],p=f.trace,h=p.legendgroup;if(n._inHover||p.visible&&p.showlegend)if(S.traceIs(p,"pie-like"))for(s[h]||(s[h]={}),_=0;_<d.length;_++){var m=d[_].label;s[h][m]||(u(h,{label:m,color:d[_].color,i:d[_].i,trace:p,pts:d[_].pts}),s[h][m]=!0,c=Math.max(c,(m||"").length))}else u(h,f),c=Math.max(c,(p.name||"").length)}if(!i.length)return[];for(var g=!o||!t,y=[],v=0;v<i.length;v++){var x=a[i[v]];g?y.push(x[0]):y.push(x)}for(g&&(y=[y]),v=0;v<y.length;v++){for(var b=1/0,_=0;_<y[v].length;_++){var w=y[v][_].trace.legendrank;w<b&&(b=w)}y[v][0]._groupMinRank=b,y[v][0]._preGroupSort=v}function T(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort}for(y.forEach(function(e,t){e[0]._preGroupSort=t}),y.sort(function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort}),v=0;v<y.length;v++){y[v].forEach(function(e,t){e._preSort=t}),y[v].sort(T);var M=y[v][0],k=null;for(_=0;_<y[v].length;_++){var A=y[v][_].trace.legendgrouptitle;if(A&&A.text){k=A;break}}for(r&&y[v].reverse(),k&&y[v].unshift({i:-1,groupTitle:k,trace:{showlegend:M.trace.showlegend}}),_=0;_<y[v].length;_++)y[v][_]=[y[v][_]]}return n._lgroupsLength=y.length,n._maxNameLength=c,y}},{"../../registry":373,"./helpers":211}],210:[function(e,t,n){"use strict";var P=e("../../lib"),I=e("../../registry"),R=!0;t.exports=function(e,t,n){var r=t._fullLayout;if(!t._dragged&&!t._editing){var a,i=r.legend.itemclick,o=r.legend.itemdoubleclick;if(R=(1===n&&"toggle"===i&&"toggleothers"===o&&R&&t.data&&t._context.showTips&&P.notifier(P._(t,"Double-click on legend to isolate one trace"),"long"),!1),1===n?a=i:2===n&&(a=o),a){var s=r.hiddenlabels?r.hiddenlabels.slice():[],e=e.data()[0][0];if(!e.groupTitle){var l,c,u,d=t._fullData,f=e.trace,p=f.legendgroup,h={},m=[],g=[],y=[];if(I.traceIs(f,"pie-like")){var v=e.label,e=s.indexOf(v);"toggle"===a?-1===e?s.push(v):s.splice(e,1):"toggleothers"===a&&(s=[],t.calcdata[0].forEach(function(e){v!==e.label&&s.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===s.length&&-1===e&&(s=[])),I.call("_guiRelayout",t,"hiddenlabels",s)}else{var x,b,_=p&&p.length,w=[];if(_)for(S=0;S<d.length;S++)(x=d[S]).visible&&x.legendgroup===p&&w.push(S);if("toggle"===a){switch(f.visible){case!0:b="legendonly";break;case!1:b=!1;break;case"legendonly":b=!0}if(_)for(S=0;S<d.length;S++)!1!==d[S].visible&&d[S].legendgroup===p&&O(d[S],b);else O(f,b)}else if("toggleothers"===a){for(var T,M,k,A=!0,S=0;S<d.length;S++)if(T=d[S]===f,k=!0!==d[S].showlegend,!(T||k||(M=_&&d[S].legendgroup===p)||!0!==d[S].visible||I.traceIs(d[S],"notLegendIsolatable"))){A=!1;break}for(S=0;S<d.length;S++)if(!1!==d[S].visible&&!I.traceIs(d[S],"notLegendIsolatable"))switch(f.visible){case"legendonly":O(d[S],!0);break;case!0:T=d[S]===f,k=!0!==d[S].showlegend&&!d[S].legendgroup,M=T||_&&d[S].legendgroup===p,O(d[S],!(!M&&!k)||(!!A||"legendonly"))}}for(S=0;S<g.length;S++)if(l=g[S])for(var E=l.constructUpdate(),L=Object.keys(E),C=0;C<L.length;C++)c=L[C],(h[c]=h[c]||[])[y[S]]=E[c];for(u=Object.keys(h),S=0;S<u.length;S++)for(c=u[S],C=0;C<m.length;C++)h[c].hasOwnProperty(C)||(h[c][C]=void 0);I.call("_guiRestyle",t,h,m)}}}}function D(e,t,n){var r=m.indexOf(e),a=(a=h[t])||(h[t]=[]);return-1===m.indexOf(e)&&(m.push(e),r=m.length-1),a[r]=n,r}function O(e,t){var n,r,a=e._fullInput;I.hasTransform(a,"groupby")?((n=g[a.index])||(r=(r=I.getTransformIndices(a,"groupby"))[r.length-1],n=P.keyedContainer(a,"transforms["+r+"].styles","target","value.visible"),g[a.index]=n),!1!==(r=void 0===(r=n.get(e._group))?!0:r)&&n.set(e._group,t),y[a.index]=D(a.index,"visible",!1!==a.visible)):(t=!1!==a.visible&&t,D(a.index,"visible",t))}}},{"../../lib":285,"../../registry":373}],211:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],212:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":205,"./defaults":207,"./draw":208,"./style":213}],213:[function(e,t,n){"use strict";var b=e("@plotly/d3"),o=e("../../registry"),m=e("../../lib"),i=m.strTranslate,_=e("../drawing"),w=e("../color"),T=e("../colorscale/helpers").extractOpts,M=e("../../traces/scatter/subtypes"),s=e("../../traces/pie/style_one"),l=e("../../traces/pie/helpers").castOption,a=e("./constants");function k(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function A(e){var t=e[0].trace,n=t.contours,r=M.hasLines(t),a=M.hasMarkers(t),i=t.visible&&t.fill&&"none"!==t.fill,o=!1,e=!1;return n&&("lines"===(t=n.coloring)?o=!0:r="none"===t||"heatmap"===t||n.showlines,"constraint"===n.type?i="="!==n._operation:"fill"!==t&&"heatmap"!==t||(e=!0)),{showMarker:a,showLine:r,showFill:i,showGradientLine:o,showGradientFill:e,anyLine:r||o,anyFill:i||e}}function S(e,t,n){return e&&m.isArrayOrTypedArray(e)?t:n<e?n:e}t.exports=function(e,g,y){var t=g._fullLayout,p="constant"===(y=y||t.legend).itemsizing,h=y.itemwidth,t=(h+2*a.itemGap)/2,v=i(t,0),x=function(e,t,n,r){var a;if(e+1)a=e;else{if(!(t&&0<t.width))return 0;a=t.width}return p?r:Math.min(a,n)};function r(e,t,n){var p=e[0].trace,h=p.marker||{},m=h.line||{},r=n?p.visible&&p.type===n:o.traceIs(p,"bar"),e=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(r?[e]:[]);e.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),e.exit().remove(),e.each(function(e){var t=b.select(this),n=e[0],r=x(n.mlw,h.line,5,2);t.style("stroke-width",r+"px");var a=n.mcc;!y._inHover&&"mc"in n&&(void 0===(c=(l=T(h)).mid)&&(c=(l.max+l.min)/2),a=_.tryColorscale(h,"")(c));var i,o,s,l,c,u=a||n.mc||h.color,d=h.pattern,f=d&&_.getPatternAttr(d.shape,0,"");f?(i=_.getPatternAttr(d.bgcolor,0,null),o=_.getPatternAttr(d.fgcolor,0,null),s=d.fgopacity,e=S(d.size,8,10),l=S(d.solidity,.5,1),c="legend-"+p.uid,t.call(_.pattern,"legend",g,c,f,e,l,a,d.fillmode,i,o,s)):t.call(w.fill,u),r&&w.stroke(t,n.mlc||m.color)})}function n(e,t,n){var r=e[0],a=r.trace,i=n?a.visible&&a.type===n:o.traceIs(a,n),i=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(i?[e]:[]);i.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),i.exit().remove(),i.size()&&(e=(a.marker||{}).line,n=x(l(e.width,r.pts),e,5,2),(n=m.minExtend(a,{marker:{line:{width:n}}})).marker.line.color=e.color,r=m.minExtend(r,{trace:n}),s(i,r,n))}e.each(function(e){var t=b.select(this),n=m.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity);var r=y.valign,a=e[0].lineHeight,t=e[0].height;"middle"!==r&&a&&t?n.attr("transform",i(0,{top:1,bottom:-1}[r]*(.5*(a-t+3)))):n.attr("transform",null),n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);n=n.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var l,c=e[0].trace,t=[];if(c.visible)switch(c.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]],l=!0;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]],l=!0;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],l="radial";break;case"cone":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]]);break;case"streamtube":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]]);break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],l=!0;break;case"mesh3d":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]]);break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],l=!0;break;case"isosurface":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]])}e=b.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);e.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n,r,a=b.select(this),i=T(c),o=i.colorscale,s=i.reversescale;o?l||(n=o.length,r=(0===t?o[s?n-1:0]:1===t?o[s?0:n-1]:o[Math.floor((n-1)/2)])[1]):(n=c.vertexcolor||c.facecolor||c.color,r=m.isArrayOrTypedArray(n)?n[t]||n[0]:n),a.attr("d",e[0]),r?a.call(w.fill,r):a.call(function(e){var t;e.size()&&(t="legendfill-"+c.uid,_.gradient(e,g,t,k(s,"radial"===l),o,"fill"))})})}).each(function(e){var a=e[0].trace,t="waterfall"===a.type;if(e[0]._distinct&&t){var n=e[0].trace[e[0].dir].marker;return e[0].mc=n.color,e[0].mlw=n.line.width,e[0].mlc=n.line.color,r(e,this,"waterfall")}n=[];a.visible&&t&&(n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);n=b.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);n.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e){var t=b.select(this),n=a[e[0]].marker,r=x(void 0,n.line,5,2);t.attr("d",e[1]).style("stroke-width",r+"px").call(w.fill,n.color),r&&t.call(w.stroke,n.line.color)})}).each(function(e){r(e,this,"funnel")}).each(function(e){r(e,this)}).each(function(e){var n=e[0].trace,r=b.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&o.traceIs(n,"box-violin")?[e]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),r.exit().remove(),r.each(function(){var e,t=b.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==w.opacity(n.fillcolor)||0!==w.opacity((n.line||{}).color)?(e=x(void 0,n.line,5,2),t.style("stroke-width",e+"px").call(w.fill,n.fillcolor),e&&w.stroke(t,n.line.color)):(t=m.minExtend(n,{marker:{size:p?12:m.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(_.pointStyle,t,g))})}).each(function(e){n(e,this,"funnelarea")}).each(function(e){n(e,this,"pie")}).each(function(e){var t=A(e),n=t.showFill,r=t.showLine,a=t.showGradientLine,i=t.showGradientFill,o=t.anyFill,s=t.anyLine,l=e[0],c=l.trace,t=T(c),u=t.colorscale,d=t.reversescale,o=M.hasMarkers(c)||!o?"M5,0":s?"M5,-2":"M5,-3",s=b.select(this),e=s.select(".legendfill").selectAll("path").data(n||i?[e]:[]);e.enter().append("path").classed("js-fill",!0),e.exit().remove(),e.attr("d",o+"h"+h+"v6h-"+h+"z").call(n?_.fillGroupStyle:function(e){var t;e.size()&&(t="legendfill-"+c.uid,_.gradient(e,g,t,k(d),u,"fill"))}),(r||a)&&(f=x(void 0,c.line,10,5),f=m.minExtend(c,{line:{width:f}}),f=[m.minExtend(l,{trace:f})]);var f=s.select(".legendlines").selectAll("path").data(r||a?[f]:[]);f.enter().append("path").classed("js-line",!0),f.exit().remove(),f.attr("d",o+(a?"l"+h+",0.0001":"h"+h)).call(r?_.lineGroupStyle:function(e){var t;e.size()&&(t="legendline-"+c.uid,_.lineGroupStyle(e),_.gradient(e,g,t,k(d),u,"stroke"))})}).each(function(e){var t=A(e),n=t.anyFill,r=t.anyLine,a=t.showLine,t=t.showMarker,i=e[0],o=i.trace,n=!t&&!r&&!n&&M.hasText(o);function s(e,t,n,r){e=m.nestedProperty(o,e).get(),e=m.isArrayOrTypedArray(e)&&t?t(e):e;if(p&&e&&void 0!==r&&(e=r),n){if(e<n[0])return n[0];if(e>n[1])return n[1]}return e}function l(e){return i._distinct&&i.index&&e[i.index]?e[i.index]:e[0]}{var c;(t||n||a)&&(u={},d={},t&&(u.mc=s("marker.color",l),u.mx=s("marker.symbol",l),u.mo=s("marker.opacity",m.mean,[.2,1]),u.mlc=s("marker.line.color",l),u.mlw=s("marker.line.width",m.mean,[0,5],2),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"},c=s("marker.size",m.mean,[2,16],12),u.ms=c,d.marker.size=c),a&&(d.line={width:s("line.width",l,[0,10],5)}),n&&(u.tx="Aa",u.tp=s("textposition",l),u.ts=10,u.tc=s("textfont.color",l),u.tf=s("textfont.family",l)),f=[m.minExtend(i,u)],(c=m.minExtend(o,d)).selectedpoints=null,c.texttemplate=null)}var u=b.select(this).select("g.legendpoints"),d=u.selectAll("path.scatterpts").data(t?f:[]);d.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),d.exit().remove(),d.call(_.pointStyle,c,g),t&&(f[0].mrc=3);var f=u.selectAll("g.pointtext").data(n?f:[]);f.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),f.exit().remove(),f.selectAll("text").call(_.textPointStyle,c,g)}).each(function(e){var a=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(a.visible&&"candlestick"===a.type?[e,e]:[]);e.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=a[t?"increasing":"decreasing"],t=x(void 0,r.line,5,2);n.style("stroke-width",t+"px").call(w.fill,r.fillcolor),t&&w.stroke(n,r.line.color)})}).each(function(e){var a=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(a.visible&&"ohlc"===a.type?[e,e]:[]);e.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=a[t?"increasing":"decreasing"],t=x(void 0,r.line,5,2);n.style("fill","none").call(_.dashLine,r.line.dash,t),t&&w.stroke(n,r.line.color)})})}},{"../../lib":285,"../../registry":373,"../../traces/pie/helpers":486,"../../traces/pie/style_one":492,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale/helpers":166,"../drawing":177,"./constants":206,"@plotly/d3":20}],214:[function(e,t,n){"use strict";e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":216}],215:[function(e,t,n){"use strict";var m=e("../../registry"),r=e("../../plots/plots"),g=e("../../plots/cartesian/axis_ids"),a=e("../../fonts/ploticon"),i=e("../shapes/draw").eraseActiveShape,o=e("../../lib"),s=o._,t=t.exports={};function l(e,t){var n=t.currentTarget,r=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,i=e._fullLayout,o={},s=g.list(e,null,!0),l=i._cartesianSpikesEnabled;if("zoom"===r)for(var c,u,d,t="in"===a?.5:2,f=(1+t)/2,p=(1-t)/2,h=0;h<s.length;h++)(d=s[h]).fixedrange||(u=d._name,"auto"===a?o[u+".autorange"]=!0:"reset"===a?(void 0===d._rangeInitial?o[u+".autorange"]=!0:(c=d._rangeInitial.slice(),o[u+".range[0]"]=c[0],o[u+".range[1]"]=c[1]),void 0!==d._showSpikeInitial&&(o[u+".showspikes"]=d._showSpikeInitial,"on"!==l||d._showSpikeInitial||(l="off"))):(c=[d.r2l(d.range[0]),d.r2l(d.range[1])],o[u+".range[0]"]=d.l2r((c=[f*c[0]+p*c[1],f*c[1]+p*c[0]])[0]),o[u+".range[1]"]=d.l2r(c[1])));else"hovermode"!==r||"x"!==a&&"y"!==a||(a=i._isHoriz?"y":"x",n.setAttribute("data-val",a)),o[r]=a;i._cartesianSpikesEnabled=l,m.call("_guiRelayout",e,o)}function c(e,t){for(var n=t.currentTarget,t=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],i={},o=t.split("."),s=0;s<a.length;s++)i[a[s]+"."+o[1]]=r;i.dragmode="pan"===r?r:"zoom",m.call("_guiRelayout",e,i)}function u(e,t){for(var t=t.currentTarget.getAttribute("data-attr"),n="resetLastSave"===t,r="resetDefault"===t,a=e._fullLayout,i=a._subplots.gl3d||[],o={},s=0;s<i.length;s++){var l,c=i[s],u=c+".camera",d=c+".aspectratio",f=c+".aspectmode",c=a[c]._scene;n?(o[u+".up"]=c.viewInitial.up,o[u+".eye"]=c.viewInitial.eye,o[u+".center"]=c.viewInitial.center,l=!0):r&&(o[u+".up"]=null,o[u+".eye"]=null,l=!(o[u+".center"]=null)),l&&(o[d+".x"]=c.viewInitial.aspectratio.x,o[d+".y"]=c.viewInitial.aspectratio.y,o[d+".z"]=c.viewInitial.aspectratio.z,o[f]=c.viewInitial.aspectmode)}m.call("_guiRelayout",e,o)}function d(e,t){var n=t.currentTarget,t=n._previousVal,r=e._fullLayout,a=r._subplots.gl3d||[],i=["xaxis","yaxis","zaxis"],o={},s={};if(t)s=t,n._previousVal=null;else{for(var l=0;l<a.length;l++){var c=a[l],u=r[c],d=c+".hovermode";o[d]=u.hovermode,s[d]=!1;for(var f=0;f<3;f++){var p=i[f],h=c+"."+p+".showspikes";s[h]=!1,o[h]=u[p].showspikes}}n._previousVal=o}return s}function f(e,t){for(var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,a=e._fullLayout,i=a._subplots.geo||[],o=0;o<i.length;o++){var s=i[o],l=a[s];"zoom"===n&&(l=l.projection.scale,m.call("_guiRelayout",e,s+".projection.scale","in"===r?2*l:.5*l))}"reset"===n&&v(e,"geo")}function p(e){e=e._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function h(e){var t=p(e);m.call("_guiRelayout",e,"hovermode",t)}function y(e,t){for(var n=t.currentTarget.getAttribute("data-val"),r=e._fullLayout,a=r._subplots.mapbox||[],i={},o=0;o<a.length;o++){var s=a[o],l=r[s].zoom;i[s+".zoom"]="in"===n?1.05*l:l/1.05}m.call("_guiRelayout",e,i)}function v(e,t){for(var n=e._fullLayout,r=n._subplots[t]||[],a={},i=0;i<r.length;i++)for(var o=r[i],s=n[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];a[o+"."+u]=s[u]}m.call("_guiRelayout",e,a)}t.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return s(e,"png"===t?"Download plot as a png":"Download plot")},icon:a.camera,click:function(t){var n=t._context.toImageButtonOptions,r={format:n.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&o.isIE()&&(o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(e){e in n&&(r[e]=n[e])}),m.call("downloadImage",t,r).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.disk,click:function(e){r.sendDataToCloud(e)}},t.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.pencil,click:function(e){r.sendDataToCloud(e)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:l},t.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:l},t.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:l},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:l},t.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:a.drawclosedpath,click:l},t.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:a.drawopenpath,click:l},t.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:a.drawline,click:l},t.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:a.drawrect,click:l},t.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:a.drawcircle,click:l},t.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:a.eraseshape,click:i},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:l},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:l},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:l},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:l},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:l},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:l},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:c},t.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:c},t.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:c},t.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:c},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:u},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:u},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);m.call("_guiRelayout",e,t)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:f},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:f},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:f},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:a.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var r=e._fullData[n]._viewInitial;t["node.groups"].push(r.node.groups.slice()),t["node.x"].push(r.node.x.slice()),t["node.y"].push(r.node.y.slice())}m.call("restyle",e,t)}},t.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);t.hovermode=p(e),m.call("_guiRelayout",e,t)}},t.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:a.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(e,t),n.setAttribute("data-attr","resetLastSave"),u(e,t),v(e,"geo"),v(e,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",m.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=g.list(e,null,!0),r={},a=0;a<n.length;a++){var i=n[a];r[i._name+".showspikes"]=t||i._showSpikeInitial}return r}(e))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:a.home,click:function(e){v(e,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:y},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:y}},{"../../fonts/ploticon":268,"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../shapes/draw":239}],216:[function(e,t,n){"use strict";var r=e("./buttons"),a=Object.keys(r),e=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],i=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(e),o=[];a.forEach(function(e){var t;t=r[e],-1===i.indexOf(t._cat||t.name)&&(e=t.name,t=(t._cat||t.name).toLowerCase(),-1===o.indexOf(e)&&o.push(e),-1===o.indexOf(t)&&o.push(t))}),o.sort(),t.exports={DRAW_MODES:e,backButtons:i,foreButtons:o}},{"./buttons":215}],217:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../color"),s=e("../../plot_api/plot_template"),l=e("./attributes");t.exports=function(e,t){var n=e.modebar||{},r=s.newContainer(t,"modebar");function a(e,t){return i.coerce(n,r,l,e,t)}a("orientation"),a("bgcolor",o.addOpacity(t.paper_bgcolor,.5));e=o.contrast(o.rgb(t.modebar.bgcolor));a("color",o.addOpacity(e,.3)),a("activecolor",o.addOpacity(e,.7)),a("uirevision",t.uirevision),a("add"),a("remove")}},{"../../lib":285,"../../plot_api/plot_template":320,"../color":155,"./attributes":214}],218:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":214,"./defaults":217,"./manage":219}],219:[function(e,t,n){"use strict";var L=e("../../plots/cartesian/axis_ids"),C=e("../../traces/scatter/subtypes"),D=e("../../registry"),O=e("../fx/helpers").isUnifiedHover,i=e("./modebar"),P=e("./buttons"),I=e("./constants").DRAW_MODES;t.exports=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a=n.modeBarButtons,n=Array.isArray(a)&&a.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var a=n[r];if("string"==typeof a){if(void 0===P[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=P[a]}}return e}(a):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,r=e._context;function a(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return 1}else{var n=t.name,t=t._cat||t.name;if(n===e||t===e.toLowerCase())return 1}}var i=t.modebar.add;"string"==typeof i&&(i=[i]);var o=t.modebar.remove;"string"==typeof o&&(o=[o]);var s=r.modeBarButtonsToAdd.concat(i.filter(function(e){for(var t=0;t<r.modeBarButtonsToRemove.length;t++)if(a(e,r.modeBarButtonsToRemove[t]))return!1;return!0})),u=r.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<r.modeBarButtonsToAdd.length;t++)if(a(e,r.modeBarButtonsToAdd[t]))return!1;return!0})),l=t._has("cartesian"),c=t._has("gl3d"),d=t._has("geo"),f=t._has("pie"),p=t._has("funnelarea"),h=t._has("gl2d"),m=t._has("ternary"),g=t._has("mapbox"),y=t._has("polar"),v=t._has("sankey"),x=function(e){for(var t=L.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),e=O(t.hovermode),b=[];function _(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],a=P[r],i=a.name.toLowerCase(),o=(a._cat||a.name).toLowerCase(),s=!1,l=0;l<u.length;l++){var c=u[l].toLowerCase();if(c===i||c===o){s=!0;break}}s||t.push(P[r])}b.push(t)}}i=["toImage"];r.showEditInChartStudio?i.push("editInChartStudio"):r.showSendToCloud&&i.push("sendDataToCloud");_(i);var o=[],w=[],i=[],T=[];1<(l||h||f||p||m)+d+c+g+y?(w=["toggleHover"],i=["resetViews"]):d?(o=["zoomInGeo","zoomOutGeo"],w=["hoverClosestGeo"],i=["resetGeo"]):c?(w=["hoverClosest3d"],i=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(o=["zoomInMapbox","zoomOutMapbox"],w=["toggleHover"],i=["resetViewMapbox"]):h?w=["hoverClosestGl2d"]:f?w=["hoverClosestPie"]:v?(w=["hoverClosestCartesian","hoverCompareCartesian"],i=["resetViewSankey"]):w=["toggleHover"];l&&(w=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(e){for(var t=0;t<e.length;t++)if(!D.traceIs(e[t],"noHover"))return!1;return!0}(n)||e)&&(w=[]);!l&&!h||x||(o=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==i[0]&&(i=["resetScale2d"]));c?T=["zoom3d","pan3d","orbitRotation","tableRotation"]:(l||h)&&!x||m?T=["zoom2d","pan2d"]:g||d?T=["pan2d"]:y&&(T=["zoom2d"]);!function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(D.traceIs(r,"scatter-like")?(C.hasMarkers(r)||C.hasText(r))&&(t=!0):D.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(n)||T.push("select2d","lasso2d");function M(e){-1===k.indexOf(e)&&-1!==w.indexOf(e)&&k.push(e)}var k=[];if(Array.isArray(s)){for(var A=[],S=0;S<s.length;S++){var E=s[S];"string"==typeof E?(E=E.toLowerCase(),-1!==I.indexOf(E)?(t._has("mapbox")||t._has("cartesian"))&&T.push(E):"togglespikelines"===E?M("toggleSpikelines"):"togglehover"===E?M("toggleHover"):"hovercompare"===E?M("hoverCompareCartesian"):"hoverclosest"===E?(M("hoverClosestCartesian"),M("hoverClosestGeo"),M("hoverClosest3d"),M("hoverClosestGl2d"),M("hoverClosestPie")):"v1hovermode"===E&&(M("toggleHover"),M("hoverClosestCartesian"),M("hoverCompareCartesian"),M("hoverClosestGeo"),M("hoverClosest3d"),M("hoverClosestGl2d"),M("hoverClosestPie"))):A.push(E)}s=A}return _(T),_(o.concat(i)),_(k),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(b,s)}(e);r?r.update(e,n):t._modeBar=i(e,n)}else r&&(r.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":335,"../../registry":373,"../../traces/scatter/subtypes":519,"../fx/helpers":191,"./buttons":215,"./constants":216,"./modebar":220}],220:[function(e,t,n){"use strict";var o=e("@plotly/d3"),a=e("fast-isnumeric"),s=e("../../lib"),i=e("../../fonts/ploticon"),l=new DOMParser;function r(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}e=r.prototype;e.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,a="modebar-"+r._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var i=r.modebar,e="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(a),s.addRelatedStyleRule(a,e+"#"+a+" .modebar-group","background-color: "+i.bgcolor),s.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+i.color),s.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+i.activecolor),s.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+i.activecolor);e=!this.hasButtons(t),a=this.hasLogo!==n.displaylogo,i=this.locale!==n.locale;this.locale=n.locale,(e||a||i)&&(this.removeAllButtons(),this.updateButtons(t),(n.watermark||n.displaylogo)&&(t=this.getLogo(),n.watermark&&(t.className=t.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(t,this.element.childNodes[0]):this.element.appendChild(t),this.hasLogo=!0)),this.updateActiveButton()},e.updateButtons=function(e){var r=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=r.createGroup();e.forEach(function(e){var t=e.name;if(!t)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(t))throw new Error("button name '"+t+"' is taken");r.buttonsNames.push(t);e=r.createButton(e);r.buttonElements.push(e),n.appendChild(e)}),r.element.appendChild(n)})},e.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},e.createButton=function(t){var n=this,e=document.createElement("a");e.setAttribute("rel","tooltip"),e.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),!r&&0!==r||e.setAttribute("data-title",r),void 0!==t.attr&&e.setAttribute("data-attr",t.attr);r=t.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),e.setAttribute("data-val",r)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");e.addEventListener("click",function(e){t.click(n.graphInfo,e),n.updateActiveButton(e.currentTarget)}),e.setAttribute("data-toggle",t.toggle||!1),t.toggle&&o.select(e).classed("active",!0);r=t.icon;return"function"==typeof r?e.appendChild(r()):e.appendChild(this.createIcon(r||i.question)),e.setAttribute("data-gravity",t.gravity||"n"),e},e.createIcon=function(e){var t,n=a(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";return e.path&&((t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon"),(r=document.createElementNS(r,"path")).setAttribute("d",e.path),e.transform?r.setAttribute("transform",e.transform):void 0!==e.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(r)),(t=e.svg?l.parseFromString(e.svg,"application/xml").childNodes[0]:t).setAttribute("height","1em"),t.setAttribute("width","1em"),t},e.updateActiveButton=function(e){var a=this.graphInfo._fullLayout,i=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||!0,n=e.getAttribute("data-attr"),r="true"===e.getAttribute("data-toggle"),e=o.select(e);r?n===i&&e.classed("active",!e.classed("active")):(n=null===n?n:s.nestedProperty(a,n).get(),e.classed("active",n===t))})},e.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},e.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(i.newplotlylogo)),e.appendChild(t),e},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,t=new r({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&o.select(t.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),t}},{"../../fonts/ploticon":268,"../../lib":285,"@plotly/d3":20,"fast-isnumeric":31}],221:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),e=(0,e("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:e,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../color/attributes":154}],222:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],223:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../color"),u=e("../../plot_api/plot_template"),d=e("../../plots/array_container_defaults"),f=e("./attributes"),p=e("./constants");function h(n,r,e,t){var a=t.calendar;function i(e,t){return l.coerce(n,r,f.buttons,e,t)}i("visible")&&("all"!==(t=i("step"))&&(!a||"gregorian"===a||"month"!==t&&"year"!==t?i("stepmode"):r.stepmode="backward",i("count")),i("label"))}t.exports=function(e,t,n,r,a){var i=e.rangeselector||{},o=u.newContainer(t,"rangeselector");function s(e,t){return l.coerce(i,o,f,e,t)}s("visible",0<d(i,o,{name:"buttons",handleItemDefaults:h,calendar:a}).length)&&(s("x",(r=function(t,n,e){for(var r=e.filter(function(e){return n[e].anchor===t._id}),a=0,i=0;i<r.length;i++){var o=n[r[i]].domain;o&&(a=Math.max(o[1],a))}return[t.domain[0],a+p.yPad]}(t,n,r))[0]),s("y",r[1]),l.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),l.coerceFont(s,"font",n.font),n=s("bgcolor"),s("activecolor",c.contrast(n,p.lightAmount,p.darkAmount)),s("bordercolor"),s("borderwidth"))}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/array_container_defaults":326,"../color":155,"./attributes":221,"./constants":222}],224:[function(e,t,n){"use strict";var d=e("@plotly/d3"),o=e("../../registry"),f=e("../../plots/plots"),r=e("../color"),p=e("../drawing"),h=e("../../lib"),m=h.strTranslate,g=e("../../lib/svg_text_utils"),s=e("../../plots/cartesian/axis_ids"),a=e("../../constants/alignment"),y=a.LINE_SPACING,v=a.FROM_TL,x=a.FROM_BR,b=e("./constants"),l=e("./get_update_object");function c(e){return e._id}function u(e,t,n){e=h.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});e.attr({rx:b.rx,ry:b.ry}),e.call(r.stroke,t.bordercolor).call(r.fill,(e=t,(n=n)._isActive||n._isHovered?e.activecolor:e.bgcolor)).style("stroke-width",t.borderwidth+"px")}function _(e,t,n,r){h.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")}).call(p.font,t.font).text(function(e,t){if(e.label)return t?h.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,r._fullLayout._meta)).call(function(e){g.convertToTspans(e,r)})}t.exports=function(i){var e=i._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=s.list(e,"x",!0),n=[],r=0;r<t.length;r++){var a=t[r];a.rangeselector&&a.rangeselector.visible&&n.push(a)}return n}(i),c);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var t=d.select(this),r=e,a=r.rangeselector,e=t.selectAll("g.button").data(h.filterVisible(a.buttons));e.enter().append("g").classed("button",!0),e.exit().remove(),e.each(function(e){var t=d.select(this),n=l(r,e);e._isActive=function(e,t,n){{if("all"===t.step)return!0===e.autorange;t=Object.keys(n);return e.range[0]===n[t[0]]&&e.range[1]===n[t[1]]}}(r,e,n),t.call(u,a,e),t.call(_,a,e,i),t.on("click",function(){i._dragged||o.call("_guiRelayout",i,n)}),t.on("mouseover",function(){e._isHovered=!0,t.call(u,a,e)}),t.on("mouseout",function(){e._isHovered=!1,t.call(u,a,e)})}),function(e,t,o,n,r){var s=0,l=0,c=o.borderwidth;t.each(function(){var e=d.select(this).select(".selector-text"),t=o.font.size*y,e=Math.max(t*g.lineCount(e),16)+3;l=Math.max(l,e)}),t.each(function(){var e=d.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),r=n.node()&&p.bBox(n.node()).width,a=o.font.size*y,i=g.lineCount(n),r=Math.max(r+10,b.minButtonWidth);e.attr("transform",m(c+s,c)),t.attr({x:0,y:0,width:r,height:l}),g.positionText(n,r/2,l/2-(i-1)*a/2+3),s+=r+5});var a=e._fullLayout._size,i=a.l+a.w*o.x,u=a.t+a.h*(1-o.y),t="left";h.isRightAnchor(o)&&(i-=s,t="right");h.isCenterAnchor(o)&&(i-=s/2,t="center");a="top";h.isBottomAnchor(o)&&(u-=l,a="bottom");h.isMiddleAnchor(o)&&(u-=l/2,a="middle");s=Math.ceil(s),l=Math.ceil(l),i=Math.round(i),u=Math.round(u),f.autoMargin(e,n+"-range-selector",{x:o.x,y:o.y,l:s*v[t],r:s*x[t],b:l*x[a],t:l*v[a]}),r.attr("transform",m(i,u))}(i,e,a,r._name,t)})}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"./constants":222,"./get_update_object":225,"@plotly/d3":20}],225:[function(e,t,n){"use strict";var l=e("@plotly/d3");t.exports=function(e,t){var n=e._name,r={};return"all"===t.step?r[n+".autorange"]=!0:(t=function(e,t){var n,r=e.range,a=new Date(e.r2l(r[1])),i=t.step,o=t.count;switch(t.stepmode){case"backward":n=e.l2r(+l.time[i].utc.offset(a,-o));break;case"todate":var s=l.time[i].utc.offset(a,-o);n=e.l2r(+l.time[i].utc.ceil(s))}r=r[1];return[n,r]}(e,t),r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]),r}},{"@plotly/d3":20}],226:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":221,"./defaults":223,"./draw":224}],227:[function(e,t,n){"use strict";e=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:e.background,editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":154}],228:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axis_ids").list,o=e("../../plots/cartesian/autorange").getAutoRange,s=e("./constants");t.exports=function(e){for(var t=i(e,"x",!0),n=0;n<t.length;n++){var r=t[n],a=r[s.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=o(e,r))}}},{"../../plots/cartesian/autorange":330,"../../plots/cartesian/axis_ids":335,"./constants":229}],229:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],230:[function(e,t,n){"use strict";var h=e("../../lib"),m=e("../../plot_api/plot_template"),g=e("../../plots/cartesian/axis_ids"),y=e("./attributes"),v=e("./oppaxis_attributes");t.exports=function(e,t,n){var r=e[n],e=t[n];if(r.rangeslider||t._requestRangeslider[e._id]){h.isPlainObject(r.rangeslider)||(r.rangeslider={});var a=r.rangeslider,i=m.newContainer(e,"rangeslider");if(f("visible")){f("bgcolor",t.plot_bgcolor),f("bordercolor"),f("borderwidth"),f("thickness"),f("autorange",!e.isValidRange(a.range)),f("range");e=t._subplots;if(e)for(var e=e.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===g.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),o=h.simpleMap(e,g.id2name),s=0;s<o.length;s++){var l,c=o[s],u=a[c]||{},d=m.newContainer(i,c,"yaxis"),c=t[c];"match"!==p("rangemode",l=u.range&&c.isValidRange(u.range)?"fixed":l)&&p("range",c.range.slice())}i._input=a}}function f(e,t){return h.coerce(a,i,y,e,t)}function p(e,t){return h.coerce(u,d,v,e,t)}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_ids":335,"./attributes":227,"./oppaxis_attributes":234}],231:[function(e,t,n){"use strict";var S=e("@plotly/d3"),E=e("../../registry"),f=e("../../plots/plots"),L=e("../../lib"),C=L.strTranslate,o=e("../drawing"),l=e("../color"),D=e("../titles"),p=e("../../plots/cartesian"),O=e("../../plots/cartesian/axis_ids"),P=e("../dragelement"),I=e("../../lib/setcursor"),R=e("./constants");function N(e,t,n,r){var a=L.ensureSingle(e,"rect",R.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),i=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,e=-r._offsetShift,t=o.crispRound(t,r.borderwidth);a.attr({width:r._width+i,height:r._height+i,transform:C(e,e),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":t})}function z(e,t,n,r){t=t._fullLayout;L.ensureSingleById(t._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function F(e,s,l,c){var u,d=s.calcdata,e=e.selectAll("g."+R.rangePlotClassName).data(l._subplotsWith,L.identity);e.enter().append("g").attr("class",function(e){return R.rangePlotClassName+" "+e}).call(o.setClipUrl,c._clipId,s),e.order(),e.exit().remove(),e.each(function(e,t){var n=S.select(this),r=0===t,a=O.getFromId(s,e,"y"),i=a._name,o=c[i],t={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:c.range.slice(),calendar:l.calendar},width:c._width,height:c._height,margin:{t:0,b:0,l:0,r:0}},_context:s._context};l.rangebreaks&&(t.layout.xaxis.rangebreaks=l.rangebreaks),t.layout[i]={type:a.type,domain:[0,1],range:("match"!==o.rangemode?o:a).range.slice(),calendar:a.calendar},a.rangebreaks&&(t.layout[i].rangebreaks=a.rangebreaks),f.supplyDefaults(t);a=t._fullLayout.xaxis,i=t._fullLayout[i];a.clearCalc(),a.setScale(),i.clearCalc(),i.setScale();i={id:e,plotgroup:n,xaxis:a,yaxis:i,isRangePlot:!0};r?u=i:(i.mainplot="xy",i.mainplotinfo=u),p.rangePlot(s,i,function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],i=a[0].trace;i.xaxis+i.yaxis===t&&n.push(a)}return n}(d,e))})}function j(e,t,n,r,a){L.ensureSingle(e,"rect",R.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,R.maskColor),L.ensureSingle(e,"rect",R.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,R.maskColor),"match"!==a.rangemode&&(L.ensureSingle(e,"rect",R.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,R.maskOppAxisColor),L.ensureSingle(e,"rect",R.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",R.maskOppBorder).call(l.fill,R.maskOppAxisColor))}function H(e,t,n,r){t._context.staticPlot||L.ensureSingle(e,"rect",R.slideBoxClassName,function(e){e.attr({y:0,cursor:R.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:R.slideBoxFill})}function B(e,t,n,r){var a=L.ensureSingle(e,"g",R.grabberMinClassName),i=L.ensureSingle(e,"g",R.grabberMaxClassName),o={x:0,width:R.handleWidth,rx:R.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":R.handleStrokeWidth,"shape-rendering":"crispEdges"},e={y:Math.round(r._height/4),height:Math.round(r._height/2)};L.ensureSingle(a,"rect",R.handleMinClassName,function(e){e.attr(o)}).attr(e),L.ensureSingle(i,"rect",R.handleMaxClassName,function(e){e.attr(o)}).attr(e);var s={width:R.grabAreaWidth,x:0,y:0,fill:R.grabAreaFill,cursor:t._context.staticPlot?void 0:R.grabAreaCursor};L.ensureSingle(a,"rect",R.grabAreaMinClassName,function(e){e.attr(s)}).attr("height",r._height),L.ensureSingle(i,"rect",R.grabAreaMaxClassName,function(e){e.attr(s)}).attr("height",r._height)}t.exports=function(k){for(var A=k._fullLayout,e=A._rangeSliderData,t=0;t<e.length;t++){var n=e[t][R.name];n._clipId=n._id+"-"+A._uid}var r=A._infolayer.selectAll("g."+R.containerClassName).data(e,function(e){return e._name});r.exit().each(function(e){e=e[R.name];A._topdefs.select("#"+e._clipId).remove()}).remove(),0!==e.length&&(r.enter().append("g").classed(R.containerClassName,!0).attr("pointer-events","all"),r.each(function(e){var t=S.select(this),n=e[R.name],r=A[O.id2name(e.anchor)],a=n[O.id2name(e.anchor)];n.range&&(o=L.simpleMap(n.range,e.r2l),o=(i=L.simpleMap(e.range,e.r2l))[0]<i[1]?[Math.min(o[0],i[0]),Math.max(o[1],i[1])]:[Math.max(o[0],i[0]),Math.min(o[1],i[1])],n.range=n._input.range=L.simpleMap(o,e.l2r)),e.cleanRange("rangeslider.range");var i=A._size,o=e.domain;n._width=i.w*(o[1]-o[0]);o=Math.round(i.l+i.w*o[0]),i=Math.round(i.t+i.h*(1-e._counterDomainMin)+("bottom"===e.side?e._depth:0)+n._offsetShift+R.extraPad);t.attr("transform",C(o,i)),n._rl=L.simpleMap(n.range,e.r2l);var s,l,c,y,v,x,b,_,w,u=n._rl[0],o=n._rl[1],d=o-u;if(n.p2d=function(e){return e/n._width*d+u},n.d2p=function(e){return(e-u)/d*n._width},e.rangebreaks){var f=e.locateBreaks(u,o);if(f.length){for(var p,h=0,m=0;m<f.length;m++)h+=(p=f[m]).max-p.min;var g=n._width/(o-u-h),T=[-g*u];for(m=0;m<f.length;m++)p=f[m],T.push(T[T.length-1]-g*(p.max-p.min));for(n.d2p=function(e){for(var t=T[0],n=0;n<f.length;n++){var r=f[n];if(e>=r.max)t=T[n+1];else if(e<r.min)break}return t+g*e},m=0;m<f.length;m++)(p=f[m]).pmin=n.d2p(p.min),p.pmax=n.d2p(p.max);n.p2d=function(e){for(var t=T[0],n=0;n<f.length;n++){var r=f[n];if(e>=r.pmax)t=T[n+1];else if(e<r.pmin)break}return(e-t)/g}}}function M(){var e=S.event,d=e.target,f=e.clientX||e.touches[0].clientX,p=f-c.node().getBoundingClientRect().left,h=x.d2p(v._rl[0]),m=x.d2p(v._rl[1]),g=P.coverSlip();function t(e){var t,n,r,a,i,o,s,l,c=+(e.clientX||e.touches[0].clientX)-f;switch(d){case b:t="ew-resize",r=h+c,n=m+c;break;case _:t="col-resize",r=h+c,n=m;break;case w:t="col-resize",r=h,n=m+c;break;default:t="ew-resize",n=(r=p)+c}function u(e){return i.l2r(L.constrain(e,o._rl[0],o._rl[1]))}n<r&&(e=n,n=r,r=e),x._pixelMin=r,x._pixelMax=n,I(S.select(g),t),a=y,i=v,s=u((o=x).p2d(o._pixelMin)),l=u(o.p2d(o._pixelMax)),window.requestAnimationFrame(function(){E.call("_guiRelayout",a,i._name+".range",[s,l])})}function n(){g.removeEventListener("mousemove",t),g.removeEventListener("mouseup",n),this.removeEventListener("touchmove",t),this.removeEventListener("touchend",n),L.removeElement(g)}this.addEventListener("touchmove",t),this.addEventListener("touchend",n),g.addEventListener("mousemove",t),g.addEventListener("mouseup",n)}"match"!==a.rangemode&&(s=r.r2l(a.range[0]),l=r.r2l(a.range[1])-s,n.d2pOppAxis=function(e){return(e-s)/l*n._height}),t.call(N,k,e,n).call(z,k,e,n).call(F,k,e,n).call(j,k,e,n,a).call(H,k,e,n).call(B,k,e,n),c=t,v=e,x=n,(y=k)._context.staticPlot||(b=c.select("rect."+R.slideBoxClassName).node(),_=c.select("rect."+R.grabAreaMinClassName).node(),w=c.select("rect."+R.grabAreaMaxClassName).node(),c.on("mousedown",M),c.on("touchstart",M)),function(e,t,n,r,a){var i=R.handleWidth/2;function o(e){return L.constrain(e,0,n._width)}function s(e){return L.constrain(e,0,n._height)}function l(e){return L.constrain(e,-i,n._width+i)}var c=o(n.d2p(t._rl[0])),t=o(n.d2p(t._rl[1]));e.select("rect."+R.slideBoxClassName).attr("x",c).attr("width",t-c),e.select("rect."+R.maskMinClassName).attr("width",c),e.select("rect."+R.maskMaxClassName).attr("x",t).attr("width",n._width-t),"match"!==a.rangemode&&(a=n._height-s(n.d2pOppAxis(r._rl[1])),r=n._height-s(n.d2pOppAxis(r._rl[0])),e.select("rect."+R.maskMinOppAxisClassName).attr("x",c).attr("height",a).attr("width",t-c),e.select("rect."+R.maskMaxOppAxisClassName).attr("x",c).attr("y",r).attr("height",n._height-r).attr("width",t-c),e.select("rect."+R.slideBoxClassName).attr("y",a).attr("height",r-a));c=Math.round(l(c-i))-.5,t=Math.round(l(t-i))+.5;e.select("g."+R.grabberMinClassName).attr("transform",C(c,.5)),e.select("g."+R.grabberMaxClassName).attr("transform",C(t,.5))}(t,e,n,r,a),"bottom"===e.side&&D.draw(k,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:A._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:i+n._height+n._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":285,"../../lib/setcursor":305,"../../plots/cartesian":345,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":229,"@plotly/d3":20}],232:[function(e,t,n){"use strict";var s=e("../../plots/cartesian/axis_ids"),o=e("../../lib/svg_text_utils"),l=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,u=l.name;function d(e){e=e&&e[u];return e&&e.visible}n.isVisible=d,n.makeData=function(e){var t=s.list({_fullLayout:e},"x",!0),n=e.margin,r=[];if(!e._has("gl2d"))for(var a=0;a<t.length;a++){var i,o=t[a];d(o)&&(r.push(o),(i=o[u])._id=u+o._id,i._height=(e.height-n.b-n.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2))}e._rangeSliderData=r},n.autoMarginOpts=function(e,t){var n=e._fullLayout,r=t[u],a=t._id.charAt(0),i=0,e=0;return"bottom"===t.side&&(i=t._depth,t.title.text!==n._dfltTitle[a]&&(e=1.5*t.title.font.size+10+r._offsetShift,e+=(t.title.text.match(o.BR_TAG_ALL)||[]).length*t.title.font.size*c)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+i+Math.max(n.margin.b,e),pad:l.extraPad+2*r._offsetShift}}},{"../../constants/alignment":260,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"./constants":229}],233:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("./oppaxis_attributes"),o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":285,"./attributes":227,"./calc_autorange":228,"./defaults":230,"./draw":231,"./helpers":232,"./oppaxis_attributes":234}],234:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],235:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../traces/scatter/attributes").line,i=e("../drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../traces/scatter/attributes":494,"../annotations/attributes":138,"../drawing/attributes":176}],236:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),f=e("./constants"),p=e("./helpers");function h(e,t,n,r,a,i){var o=e/2,e=i;if("pixel"!==t)return{ppad:o};n=a?p.extractPathCoords(a,i?f.paramIsY:f.paramIsX):[n,r],r=u.aggNums(Math.max,null,n),n=u.aggNums(Math.min,null,n),n=n<0?Math.abs(n)+o:o,r=0<r?r+o:o;return{ppad:o,ppadplus:e?n:r,ppadminus:e?r:n}}function m(e,t,n,r,a){var i="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[i(t),i(n)];if(r){var o,s,l,c=1/0,u=-1/0,d=r.match(f.segmentRE);for("date"===e.type&&(i=p.decodeDate(i)),o=0;o<d.length;o++)void 0!==(l=a[d[o].charAt(0)].drawn)&&(!(s=d[o].substr(1).match(f.paramRE))||s.length<l||((l=i(s[l]))<c&&(c=l),u<l&&(u=l)));return c<=u?[c,u]:void 0}}t.exports=function(e){var t=e._fullLayout,n=u.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var a=n[r];a._extremes={};var i,o,s,l=d.getRefType(a.xref),c=d.getRefType(a.yref);"paper"!==a.xref&&"domain"!==l&&(o="pixel"===a.xsizemode?a.xanchor:a.x0,s="pixel"===a.xsizemode?a.xanchor:a.x1,(o=m(i=d.getFromId(e,a.xref),o,s,a.path,f.paramIsX))&&(a._extremes[i._id]=d.findExtremes(i,o,h(a.line.width,a.xsizemode,a.x0,a.x1,a.path,!1)))),"paper"!==a.yref&&"domain"!==c&&(s="pixel"===a.ysizemode?a.yanchor:a.y0,c="pixel"===a.ysizemode?a.yanchor:a.y1,(o=m(i=d.getFromId(e,a.yref),s,c,a.path,f.paramIsY))&&(a._extremes[i._id]=d.findExtremes(i,o,h(a.line.width,a.ysizemode,a.y0,a.y1,a.path,!0))))}}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":237,"./helpers":246}],237:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],238:[function(e,t,n){"use strict";var b=e("../../lib"),_=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),w=e("./attributes"),T=e("./helpers");function a(n,r,e){function t(e,t){return b.coerce(n,r,w,e,t)}if(t("visible")){var a=t("path"),i=t("type",a?"path":"rect");"path"!==r.type&&delete r.path,t("editable"),t("layer"),t("opacity"),t("fillcolor"),t("fillrule"),t("line.width")&&(t("line.color"),t("line.dash"));for(var o=t("xsizemode"),s=t("ysizemode"),l=["x","y"],c=0;c<2;c++){var u,d,f,p,h=l[c],m=h+"anchor",g="x"===h?o:s,y={_fullLayout:e},v=_.coerceRef(n,r,y,h,void 0,"paper"),x="range"===_.getRefType(v)?((f=_.getFromId(y,v))._shapeIndices.push(r._index),u=T.rangeToShapePosition(f),T.shapePositionToRange(f)):u=b.identity;"path"!==i&&(p=n[d=h+"0"],h=n[f=h+"1"],n[d]=x(n[d],!0),n[f]=x(n[f],!0),"pixel"===g?(t(d,0),t(f,10)):(_.coercePosition(r,y,t,v,d,.25),_.coercePosition(r,y,t,v,f,.75)),r[d]=u(r[d]),r[f]=u(r[f]),n[d]=p,n[f]=h),"pixel"===g&&(g=n[m],n[m]=x(n[m],!0),_.coercePosition(r,y,t,v,m,.25),r[m]=u(r[m]),n[m]=g)}"path"===i?t("path"):b.noneOrAll(n,r,["x0","x1","y0","y1"])}}t.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:a})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":235,"./helpers":246}],239:[function(e,t,n){"use strict";var re=e("../../registry"),ae=e("../../lib"),ie=e("../../plots/cartesian/axes"),oe=e("./draw_newshape/helpers").readPaths,se=e("./draw_newshape/display_outlines"),i=e("../../plots/cartesian/handle_outline").clearOutlineControllers,le=e("../color"),ce=e("../drawing"),ue=e("../../plot_api/plot_template").arrayEditor,de=e("../dragelement"),fe=e("../../lib/setcursor"),pe=e("./constants"),he=e("./helpers");function me(e){var t,n=e._fullLayout;for(t in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._plots){var r=n._plots[t].shapelayer;r&&r.selectAll("path").remove()}for(var a=0;a<n.shapes.length;a++)n.shapes[a].visible&&o(e,a)}function ge(e){return e._fullLayout._drawing}function ye(e){return!e._context.edits.shapePosition}function o(Q,ee){Q._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+ee+'"]').remove();var e=he.makeOptionsAndPlotinfo(Q,ee),te=e.options,ne=e.plotinfo;function t(e){var t=xe(Q,te),n={"data-index":ee,"fill-rule":te.fillrule,d:t},r=te.opacity,a=te.fillcolor,i=te.line.width?te.line.color:"rgba(0,0,0,0)",o=te.line.width,s=te.line.dash;o||!0!==te.editable||(o=5,s="solid");var l="Z"!==t[t.length-1],c=ye(Q)&&te.editable&&Q._fullLayout._activeShapeIndex===ee;c&&(a=l?"rgba(0,0,0,0)":Q._fullLayout.activeshape.fillcolor,r=Q._fullLayout.activeshape.opacity);var u,d,f,p,h,m,g,y,v,x,b,_,w,T,M,k,A,S,E,L,C,D,O,P,I,R,N,z,F,j,H,B,q,U,Y,V,G,W=e.append("path").attr(n).style("opacity",r).call(le.stroke,i).call(le.fill,a).call(ce.dashLine,s,o);function Z(e){var t,n,r,a;D=ge(u)?null:N?"path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point":(t=(r=G.element.getBoundingClientRect()).right-r.left,a=r.bottom-r.top,n=e.clientX-r.left,r=e.clientY-r.top,a=!z&&O<t&&P<a&&!e.shiftKey?de.getCursor(n/t,1-r/a):"move",fe(d,a),a.split("-")[0])}function $(t,n){var e,r;"path"===f.type?(r=e=function(e){return e},I?F("xanchor",f.xanchor=Y(b+t)):(e=function(e){return Y(q(e)+t)},j&&"date"===j.type&&(e=he.encodeDate(e))),R?F("yanchor",f.yanchor=V(_+n)):(r=function(e){return V(U(e)+n)},H&&"date"===H.type&&(r=he.encodeDate(r))),F("path",f.path=be(C,e,r))):(I?F("xanchor",f.xanchor=Y(b+t)):(F("x0",f.x0=Y(g+t)),F("x1",f.x1=Y(v+t))),R?F("yanchor",f.yanchor=V(_+n)):(F("y0",f.y0=V(y+n)),F("y1",f.y1=V(x+n)))),d.attr("d",xe(u,f)),J(h,f)}function X(t,n){var e,r,a,i,o,s;z?(e=i=function(e){return e},I?F("xanchor",f.xanchor=Y(b+t)):(i=function(e){return Y(q(e)+t)},j&&"date"===j.type&&(i=he.encodeDate(i))),R?F("yanchor",f.yanchor=V(_+n)):(e=function(e){return V(U(e)+n)},H&&"date"===H.type&&(e=he.encodeDate(e))),F("path",f.path=be(C,i,e))):N?"resize-over-start-point"===D?(r=g+t,o=R?y-n:y+n,F("x0",f.x0=I?r:Y(r)),F("y0",f.y0=R?o:V(o))):"resize-over-end-point"===D&&(s=v+t,a=R?x-n:x+n,F("x1",f.x1=I?s:Y(s)),F("y1",f.y1=R?a:V(a))):(e=(i=function(e){return-1!==D.indexOf(e)})("n"),r=i("s"),o=i("w"),s=i("e"),a=e?w+n:w,i=r?T+n:T,o=o?M+t:M,s=s?k+t:k,R&&(e&&(a=w-n),r&&(i=T-n)),(!R&&P<i-a||R&&P<a-i)&&(F(A,f[A]=R?a:V(a)),F(S,f[S]=R?i:V(i))),O<s-o&&(F(E,f[E]=I?o:Y(o)),F(L,f[L]=I?s:Y(s)))),d.attr("d",xe(u,f)),J(h,f)}function J(a,i){(I||R)&&function(){var e="path"!==i.type,t=a.selectAll(".visual-cue").data([0]);t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var n=q(I?i.xanchor:ae.midRange(e?[i.x0,i.x1]:he.extractPathCoords(i.path,pe.paramIsX))),e=U(R?i.yanchor:ae.midRange(e?[i.y0,i.y1]:he.extractPathCoords(i.path,pe.paramIsY)));{var r;n=he.roundPositionForSharpStrokeRendering(n,1),e=he.roundPositionForSharpStrokeRendering(e,1),I&&R?(r="M"+(n-1-1)+","+(e-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",t.attr("d",r)):I?(r="M"+(n-1-1)+","+(e-9-1)+"v18 h2 v-18 Z",t.attr("d",r)):(e="M"+(n-9-1)+","+(e-1-1)+"h18 v2 h-18 Z",t.attr("d",e))}}()}function K(e){e.selectAll(".visual-cue").remove()}ve(W,Q,te),(c||Q._context.edits.shapePosition)&&(B=ue(Q.layout,"shapes",te)),c?(W.style({cursor:"move"}),c={element:W.node(),plotinfo:ne,gd:Q,editHelpers:B,isActiveShape:!0},t=oe(t,Q),se(t,W,c)):Q._context.edits.shapePosition?(u=Q,d=W,p=ee,h=e,m=B,P=O=10,I="pixel"===(f=te).xsizemode,R="pixel"===f.ysizemode,N="line"===f.type,z="path"===f.type,F=m.modifyItem,j=ie.getFromId(u,f.xref),e=ie.getRefType(f.xref),H=ie.getFromId(u,f.yref),B=ie.getRefType(f.yref),q=he.getDataToPixel(u,j,!1,e),U=he.getDataToPixel(u,H,!0,B),Y=he.getPixelToData(u,j,!1,e),V=he.getPixelToData(u,H,!0,B),B=N?function(){var e=Math.max(f.line.width,10),t=h.append("g").attr("data-index",p);t.append("path").attr("d",d.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"});var n={"fill-opacity":"0"},e=Math.max(e/2,10);return t.append("circle").attr({"data-line-point":"start-point",cx:I?q(f.xanchor)+f.x0:q(f.x0),cy:R?U(f.yanchor)-f.y0:U(f.y0),r:e}).style(n).classed("cursor-grab",!0),t.append("circle").attr({"data-line-point":"end-point",cx:I?q(f.xanchor)+f.x1:q(f.x1),cy:R?U(f.yanchor)-f.y1:U(f.y1),r:e}).style(n).classed("cursor-grab",!0),t}():d,G={element:B.node(),gd:u,prepFn:function(e){ge(u)||(I&&(b=q(f.xanchor)),R&&(_=U(f.yanchor)),"path"===f.type?C=f.path:(g=I?f.x0:q(f.x0),y=R?f.y0:U(f.y0),v=I?f.x1:q(f.x1),x=R?f.y1:U(f.y1)),L=g<v?(M=g,E="x0",k=v,"x1"):(M=v,E="x1",k=g,"x0"),S=!R&&y<x||R&&x<y?(w=y,A="y0",T=x,"y1"):(w=x,A="y1",T=y,"y0"),Z(e),J(h,f),function(e,t,n){var r=t.xref,a=t.yref,i=ie.getFromId(n,r),o=ie.getFromId(n,a),t="";"paper"===r||i.autorange||(t+=r);"paper"===a||o.autorange||(t+=a);ce.setClipUrl(e,t?"clip"+n._fullLayout._uid+t:null,n)}(d,f,u),G.moveFn="move"===D?$:X,G.altKey=e.altKey)},doneFn:function(){ge(u)||(fe(d),K(h),ve(d,u,f),re.call("_guiRelayout",u,m.getUpdateObj()))},clickFn:function(){ge(u)||K(h)}},de.init(G),B.node().onmousemove=Z):!0===te.editable&&W.style("pointer-events",l||le.opacity(a)*r<=.5?"stroke":"all"),W.node().addEventListener("click",function(){var e,t;t=W,!ye(e=Q)||0<=(t=+t.node().getAttribute("data-index"))&&(t!==e._fullLayout._activeShapeIndex?(e._fullLayout._activeShapeIndex=t,e._fullLayout._deactivateShape=_e,me(e)):_e(e))})}te._input&&!1!==te.visible&&("below"!==te.layer?t(Q._fullLayout._shapeUpperLayer):"paper"!==te.xref&&"paper"!==te.yref&&ne._hadPlotinfo?t((ne.mainplotinfo||ne).shapelayer):t(Q._fullLayout._shapeLowerLayer))}function ve(e,t,n){n=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ce.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function xe(e,t){var n,r,s,l,c,u,d,f,a=t.type,i=ie.getRefType(t.xref),o=ie.getRefType(t.yref),p=ie.getFromId(e,t.xref),h=ie.getFromId(e,t.yref),m=e._fullLayout._size,e=p?"domain"===i?function(e){return p._offset+p._length*e}:(n=he.shapePositionToRange(p),function(e){return p._offset+p.r2p(n(e,!0))}):function(e){return m.l+m.w*e},i=h?"domain"===o?function(e){return h._offset+h._length*(1-e)}:(r=he.shapePositionToRange(h),function(e){return h._offset+h.r2p(r(e,!0))}):function(e){return m.t+m.h*(1-e)};if("path"===a)return p&&"date"===p.type&&(e=he.decodeDate(e)),h&&"date"===h.type&&(i=he.decodeDate(i)),s=e,l=i,o=t.path,c=t.xsizemode,u=t.ysizemode,d=t.xanchor,f=t.yanchor,o.replace(pe.segmentRE,function(e){var t=0,n=e.charAt(0),r=pe.paramIsX[n],a=pe.paramIsY[n],i=pe.numParams[n],o=e.substr(1).replace(pe.paramRE,function(e){return r[t]?e="pixel"===c?s(d)+Number(e):s(e):a[t]&&(e="pixel"===u?l(f)-Number(e):l(e)),e=i<++t?"X":e});return i<t&&(o=o.replace(/[\s,]*X.*/,""),ae.log("Ignoring extra params in segment "+e)),n+o});if(g="pixel"===t.xsizemode?(y=(g=e(t.xanchor))+t.x0,g+t.x1):(y=e(t.x0),e(t.x1)),t="pixel"===t.ysizemode?(v=(e=i(t.yanchor))-t.y0,e-t.y1):(v=i(t.y0),i(t.y1)),"line"===a)return"M"+y+","+v+"L"+g+","+t;if("rect"===a)return"M"+y+","+v+"H"+g+"V"+t+"H"+y+"Z";var a=(y+g)/2,g=(v+t)/2,t=Math.abs(a-y),y=Math.abs(g-v),v="A"+t+","+y,t=a+t+","+g;return"M"+t+v+" 0 1,1 "+(a+","+(g-y))+v+" 0 0,1 "+t+"Z"}function be(e,o,s){return e.replace(pe.segmentRE,function(e){var t=0,n=e.charAt(0),r=pe.paramIsX[n],a=pe.paramIsY[n],i=pe.numParams[n];return n+e.substr(1).replace(pe.paramRE,function(e){return i<=t||(r[t]?e=o(e):a[t]&&(e=s(e)),t++),e})})}function _e(e){ye(e)&&0<=e._fullLayout._activeShapeIndex&&(i(e),delete e._fullLayout._activeShapeIndex,me(e))}t.exports={draw:me,drawOne:o,eraseActiveShape:function(e){if(ye(e)){i(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var r=[],a=0;a<n.length;a++)a!==t&&r.push(n[a]);delete e._fullLayout._activeShapeIndex,re.call("_guiRelayout",e,{shapes:r})}}}}},{"../../lib":285,"../../lib/setcursor":305,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/cartesian/handle_outline":342,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":237,"./draw_newshape/display_outlines":243,"./draw_newshape/helpers":244,"./helpers":246}],240:[function(e,t,n){"use strict";var r=e("../../drawing/attributes").dash,e=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:e({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":279,"../../drawing/attributes":176}],241:[function(e,t,n){"use strict";t.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],242:[function(e,t,n){"use strict";var r=e("../../color");t.exports=function(e,t,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(e=(e||{}).plot_bgcolor||"#FFF",n("newshape.line.color",r.contrast(e)),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":155}],243:[function(e,t,n){"use strict";var T=e("../../dragelement"),M=e("../../dragelement/helpers").drawMode,k=e("../../../registry"),r=e("./constants"),A=r.i000,S=r.i090,E=r.i180,L=r.i270,C=e("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=e("./helpers"),D=r.pointsShapeRectangle,O=r.pointsShapeEllipse,P=r.writePaths,I=e("./newshapes");t.exports=function e(u,n,r,t){t=t||0;var s=r.gd;function d(){e(u,n,r,t++),O(u[0])&&a({redrawing:!0})}function a(e){r.isActiveShape=!1;var t=I(n,r);Object.keys(t).length&&k.call((e||{}).redrawing?"relayout":"_guiRelayout",s,t)}var l,i,f,p,h,o=r.isActiveShape,c=s._fullLayout._zoomlayer,m=r.dragmode;function g(e){f=+e.srcElement.getAttribute("data-i"),p=+e.srcElement.getAttribute("data-j"),l[f][p].moveFn=y}function y(e,t){if(u.length){var n=h[f][p][1],r=h[f][p][2],a=u[f],i=a.length;if(D(a)){for(var o,s=0;s<i;s++)s!==p&&((o=a[s])[1]===a[p][1]&&(o[1]=n+e),o[2]===a[p][2]&&(o[2]=r+t));if(a[p][1]=n+e,a[p][2]=r+t,!D(a))for(var l=0;l<i;l++)for(var c=0;c<a[l].length;c++)a[l][c]=h[f][l][c]}else a[p][1]=n+e,a[p][2]=r+t;d()}}function v(){a()}function x(e,t){2===e&&(f=+t.srcElement.getAttribute("data-i"),p=+t.srcElement.getAttribute("data-j"),t=u[f],D(t)||O(t)||function(){if(u.length&&u[f]&&u[f].length){for(var e=[],t=0;t<u[f].length;t++)t!==p&&e.push(u[f][t]);1<e.length&&(2!==e.length||"Z"!==e[1][0])&&(0===p&&(e[0][0]="M"),u[f]=e,d(),a())}}())}function b(e,t){!function(e,t){if(u.length)for(var n=0;n<u.length;n++)for(var r=0;r<u[n].length;r++)for(var a=0;a+2<u[n][r].length;a+=2)u[n][r][a+1]=h[n][r][a+1]+e,u[n][r][a+2]=h[n][r][a+2]+t}(e,t),d()}function _(e){f=+e.srcElement.getAttribute("data-i"),i[f=f||0].moveFn=b}function w(){a()}M(m)?s._fullLayout._drawing=!0:0<=s._fullLayout._activeShapeIndex&&C(s),n.attr("d",P(u)),o&&!t&&(h=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var a=0;a<r.length;a++){e[n][a]=[];for(var i=0;i<r[a].length;i++)e[n][a][i]=r[a][i]}}return e}([],u),function(e){l=[];for(var t=0;t<u.length;t++){var n=u[t],r=!D(n)&&O(n);l[t]=[];for(var a,i,o=0;o<n.length;o++)"Z"!==n[o][0]&&(r&&o!==A&&o!==S&&o!==E&&o!==L||(a=n[o][1],i=n[o][2],i=e.append("circle").classed("cursor-grab",!0).attr("data-i",t).attr("data-j",o).attr("cx",a).attr("cy",i).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1}),l[t][o]={element:i.node(),gd:s,prepFn:g,doneFn:v,clickFn:x},T.init(l[t][o])))}}(c.append("g").attr("class","outline-controllers")),i=[],u.length&&(i[0]={element:n[0][0],gd:s,prepFn:_,doneFn:w},T.init(i[0])))}},{"../../../plots/cartesian/handle_outline":342,"../../../registry":373,"../../dragelement":174,"../../dragelement/helpers":173,"./constants":241,"./helpers":244,"./newshapes":245}],244:[function(e,t,u){"use strict";var I=e("parse-svg-path"),n=e("./constants"),R=n.CIRCLE_SIDES,d=n.SQRT2,e=e("../../../plots/cartesian/helpers"),N=e.p2r,z=e.r2p,f=[0,3,4,5,6,1,2],p=[0,3,4,1,2];function i(e,t){return Math.abs(e-t)<=1e-6}function o(e,t){var n=t[1]-e[1],e=t[2]-e[2];return Math.sqrt(n*n+e*e)}u.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var a=e[r].length,i=0;i<a;i++){var o=e[r][i][0];if("Z"===o)n+="Z";else for(var s=e[r][i].length,l=0;l<s;l++){var c=l;"Q"===o||"S"===o?c=p[l]:"C"===o&&(c=f[l]),n+=e[r][i][c],0<l&&l<s-1&&(n+=",")}}return n},u.readPaths=function(e,t,n,r){function a(){i=u,o=d}var i,o,s=I(e),l=[],c=-1,u=0,d=0;a();for(var f=0;f<s.length;f++){var p,h,m,g,y=[],v=s[f][0],x=v;switch(v){case"M":l[++c]=[],u=+s[f][1],d=+s[f][2],y.push([x,u,d]),a();break;case"Q":case"S":p=+s[f][1],m=+s[f][2],u=+s[f][3],d=+s[f][4],y.push([x,u,d,p,m]);break;case"C":p=+s[f][1],m=+s[f][2],h=+s[f][3],g=+s[f][4],u=+s[f][5],d=+s[f][6],y.push([x,u,d,p,m,h,g]);break;case"T":case"L":u=+s[f][1],d=+s[f][2],y.push([x,u,d]);break;case"H":u=+s[f][1],y.push([x="L",u,d]);break;case"V":d=+s[f][1],y.push([x="L",u,d]);break;case"A":var x="L",b=+s[f][1],_=+s[f][2];+s[f][4]||(b=-b,_=-_);for(var w=u-b,T=d,M=1;M<=R/2;M++){var k=2*Math.PI*M/R;y.push([x,w+b*Math.cos(k),T+_*Math.sin(k)])}break;case"Z":u===i&&d===o||(u=i,d=o,y.push([x,u,d]))}for(var A=(n||{}).domain,S=t._fullLayout._size,E=n&&"pixel"===n.xsizemode,L=n&&"pixel"===n.ysizemode,C=!1===r,D=0;D<y.length;D++){for(M=0;M+2<7;M+=2){var O=y[D][M+1],P=y[D][M+2];void 0!==O&&void 0!==P&&(u=O,d=P,n&&(n.xaxis&&n.xaxis.p2r?(C&&(O-=n.xaxis._offset),O=E?z(n.xaxis,n.xanchor)+O:N(n.xaxis,O)):(C&&(O-=S.l),A?O=A.x[0]+O/S.w:O/=S.w),P=n.yaxis&&n.yaxis.p2r?(C&&(P-=n.yaxis._offset),L?z(n.yaxis,n.yanchor)-P:N(n.yaxis,P)):(C&&(P-=S.t),A?A.y[1]-P/S.h:1-P/S.h)),y[D][M+1]=O,y[D][M+2]=P)}l[c].push(y[D].slice())}}return l},u.pointsShapeRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!i(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!i(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!i(e[0][1],e[1][1])&&!i(e[0][1],e[3][1]))&&!!(o(e[0],e[1])*o(e[0],e[3]))},u.pointsShapeEllipse=function(e){if((t=e.length)!==R+1)return!1;for(var t=R,n=0;n<t;n++){var r=(2*t-n)%t,a=(t/2+r)%t;if(!i(o(e[n],e[(t/2+n)%t]),o(e[r],e[a])))return!1}return!0},u.handleEllipse=function(e,t,n){if(!e)return[t,n];for(var n=u.ellipseOver({x0:t[0],y0:t[1],x1:n[0],y1:n[1]}),r=(n.x1+n.x0)/2,a=(n.y1+n.y0)/2,i=(n.x1-n.x0)/2,o=(n.y1-n.y0)/2,i=i||(o/=d),o=o||(i/=d),s=[],l=0;l<R;l++){var c=2*l*Math.PI/R;s.push([r+i*Math.cos(c),a+o*Math.sin(c)])}return s},u.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,a=e.y1,i=r-t,e=a-n,r=((t-=i)+r)/2,a=((n-=e)+a)/2;return{x0:r-(i*=d),y0:a-(e*=d),x1:r+i,y1:a+e}}},{"../../../plots/cartesian/helpers":343,"./constants":241,"parse-svg-path":72}],245:[function(e,t,n){"use strict";var r=e("../../dragelement/helpers"),C=r.drawMode,D=r.openMode,r=e("./constants"),O=r.i000,P=r.i090,I=r.i180,R=r.i270,N=r.cos45,z=r.sin45,r=e("../../../plots/cartesian/helpers"),F=r.p2r,j=r.r2p,H=e("../../../plots/cartesian/handle_outline").clearSelect,e=e("./helpers"),B=e.readPaths,q=e.writePaths,U=e.ellipseOver;t.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var r=n.getAttribute("d"),a=t.gd,i=a._fullLayout.newshape,o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=!!o.domain||!o.xaxis,u=!!o.domain||!o.yaxis,d=t.isActiveShape,f=t.dragmode,p=(a.layout||{}).shapes||[];if(!C(f)&&void 0!==d){var h=a._fullLayout._activeShapeIndex;if(h<p.length)switch(a._fullLayout.shapes[h].type){case"rect":f="drawrect";break;case"circle":f="drawcircle";break;case"line":f="drawline";break;case"path":var m=p[h].path||"",f="Z"===m[m.length-1]?"drawclosedpath":"drawopenpath"}}var g,y,v,x,b,_,w=D(f),T=B(r,a,o,d),M={editable:!0,xref:c?"paper":s._id,yref:u?"paper":l._id,layer:i.layer,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};w||(M.fillcolor=i.fillcolor,M.fillrule=i.fillrule),(g=1===T.length?T[0]:g)&&"drawrect"===f?(M.type="rect",M.x0=g[0][1],M.y0=g[0][2],M.x1=g[2][1],M.y1=g[2][2]):g&&"drawline"===f?(M.type="line",M.x0=g[0][1],M.y0=g[0][2],M.x1=g[1][1],M.y1=g[1][2]):g&&"drawcircle"===f?(M.type="circle",y=g[O][1],v=g[P][1],x=g[I][1],b=g[R][1],_=g[O][2],e=g[P][2],n=g[I][2],r=g[R][2],c=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),u=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type),c&&(y=j(o.xaxis,y),v=j(o.xaxis,v),x=j(o.xaxis,x),b=j(o.xaxis,b)),u&&(_=j(o.yaxis,_),e=j(o.yaxis,e),n=j(o.yaxis,n),r=j(o.yaxis,r)),_=U({x0:w=(v+b)/2,y0:i=(_+n)/2,x1:w+(b-v+x-y)/2*N,y1:i+(r-e+n-_)/2*z}),c&&(_.x0=F(o.xaxis,_.x0),_.x1=F(o.xaxis,_.x1)),u&&(_.y0=F(o.yaxis,_.y0),_.y1=F(o.yaxis,_.y1)),M.x0=_.x0,M.y0=_.y0,M.x1=_.x1,M.y1=_.y1):(M.type="path",s&&l&&function(e,t,n){var r="date"===t.type,a="date"===n.type;if(!r&&!a)return;for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++)for(var s=0;s+2<e[i][o].length;s+=2)r&&(e[i][o][s+1]=e[i][o][s+1].replace(" ","_")),a&&(e[i][o][s+2]=e[i][o][s+2].replace(" ","_"))}(T,s,l),M.path=q(T),g=null),H(a);for(var t=t.editHelpers,k=(t||{}).modifyItem,A=[],S=0;S<p.length;S++){var E=a._fullLayout.shapes[S];if(A[S]=E._input,void 0!==d&&S===a._fullLayout._activeShapeIndex){var L=M;switch(E.type){case"line":case"rect":case"circle":k("x0",L.x0),k("x1",L.x1),k("y0",L.y0),k("y1",L.y1);break;case"path":k("path",L.path)}}}return void 0===d?(A.push(M),A):t?t.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":342,"../../../plots/cartesian/helpers":343,"../../dragelement/helpers":173,"./constants":241,"./helpers":244}],246:[function(e,t,s){"use strict";var a=e("./constants"),i=e("../../lib");s.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},s.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},s.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},s.extractPathCoords=function(e,n){var r=[];return e.match(a.segmentRE).forEach(function(e){var t=n[e.charAt(0)].drawn;void 0!==t&&(!(e=e.substr(1).match(a.paramRE))||e.length<t||r.push(i.cleanNumber(e[t])))}),r},s.getDataToPixel=function(e,t,n,r){var a,i,o=e._fullLayout._size;return t?"domain"===r?i=function(e){return t._length*(n?1-e:e)+t._offset}:(a=s.shapePositionToRange(t),i=function(e){return t._offset+t.r2p(a(e,!0))},"date"===t.type&&(i=s.decodeDate(i))):i=n?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e},i},s.getPixelToData=function(e,t,n,r){var a,i=e._fullLayout._size;return t?"domain"===r?function(e){e=(e-t._offset)/t._length;return n?1-e:e}:(a=s.rangeToShapePosition(t),function(e){return a(t.p2r(e-t._offset))}):n?function(e){return 1-(e-i.t)/i.h}:function(e){return(e-i.l)/i.w}},s.roundPositionForSharpStrokeRendering=function(e,t){t=1===Math.round(t%2),e=Math.round(e);return t?e+.5:e},s.makeOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},t=e._fullLayout._plots[n.xref+n.yref];return!!t?t._hadPlotinfo=!0:(t={},n.xref&&"paper"!==n.xref&&(t.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(t.yaxis=e._fullLayout[n.yref+"axis"])),t.xsizemode=n.xsizemode,t.ysizemode=n.ysizemode,t.xanchor=n.xanchor,t.yanchor=n.yanchor,{options:n,plotinfo:t}}},{"../../lib":285,"./constants":237}],247:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":344,"./attributes":235,"./calc_autorange":236,"./defaults":238,"./draw":239,"./draw_newshape/defaults":242}],248:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../../plots/pad_attributes"),i=e("../../lib/extend").extendDeepAll,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,c=e("./constants"),e=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/animation_attributes":325,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"./constants":249}],249:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],250:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../plots/array_container_defaults"),u=e("./attributes"),r=e("./constants").name,a=u.steps;function i(n,r,e){function t(e,t){return l.coerce(n,r,u,e,t)}for(var a,i=c(n,r,{name:"steps",handleItemDefaults:d}),o=0,s=0;s<i.length;s++)i[s].visible&&o++;(o<2?r.visible=!1:t("visible"))&&(r._stepCount=o,a=r._visibleSteps=l.filterVisible(i),(i[t("active")]||{}).visible||(r.active=a[0]._index),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("len"),t("lenmode"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("currentvalue.visible")&&(t("currentvalue.xanchor"),t("currentvalue.prefix"),t("currentvalue.suffix"),t("currentvalue.offset"),l.coerceFont(t,"currentvalue.font",r.font)),t("transition.duration"),t("transition.easing"),t("bgcolor"),t("activebgcolor"),t("bordercolor"),t("borderwidth"),t("ticklen"),t("tickwidth"),t("tickcolor"),t("minorticklen"))}function d(n,r){function e(e,t){return l.coerce(n,r,a,e,t)}var t="skip"===n.method||Array.isArray(n.args)?e("visible"):r.visible=!1;t&&(e("method"),e("args"),t=e("label","step-"+r._index),e("value",t),e("execute"))}t.exports=function(e,t){c(e,t,{name:r,handleItemDefaults:i})}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":248,"./constants":249}],251:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("../../plots/plots"),l=e("../color"),d=e("../drawing"),f=e("../../lib"),s=f.strTranslate,p=e("../../lib/svg_text_utils"),h=e("../../plot_api/plot_template").arrayEditor,m=e("./constants"),e=e("../../constants/alignment"),g=e.LINE_SPACING,y=e.FROM_TL,v=e.FROM_BR;function x(e){return m.autoMarginIdRoot+e._index}function o(e){return e._index}function b(e,t,n){if(t.currentvalue.visible){var r,a,i=t._dims;switch(t.currentvalue.xanchor){case"right":r=i.inputAreaLength-m.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":r=.5*i.inputAreaLength,a="middle";break;default:r=m.currentValueInset,a="left"}var o=f.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":a,"data-notex":1})}),s=t.currentvalue.prefix||"";"string"==typeof n?s+=n:(e=t.steps[t.active].label,s+=e=(n=t._gd._fullLayout._meta)?f.templateString(e,n):e),t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(d.font,t.currentvalue.font).text(s).call(p.convertToTspans,t._gd);s=p.lineCount(o),t=(i.currentValueMaxLines+1-s)*t.currentvalue.font.size*g;return p.positionText(o,r,t),o}}function _(t,n,r){f.ensureSingle(t,"rect",m.gripRectClass,function(e){e.call(i,n,t,r).style("pointer-events","all")}).attr({width:m.gripWidth,height:m.gripHeight,rx:m.gripRadius,ry:m.gripRadius}).call(l.stroke,r.bordercolor).call(l.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function w(e,t,n){var r=f.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})}),e=t.step.label,t=n._gd._fullLayout._meta;return t&&(e=f.templateString(e,t)),r.call(d.font,n.font).text(e).call(p.convertToTspans,n._gd),r}function T(e,n){var e=f.ensureSingle(e,"g",m.labelsClass),r=n._dims,e=e.selectAll("g."+m.labelGroupClass).data(r.labelSteps);e.enter().append("g").classed(m.labelGroupClass,!0),e.exit().remove(),e.each(function(e){var t=c.select(this);t.call(w,e,n),d.setTranslate(t,E(n,e.fraction),m.tickOffset+n.ticklen+n.font.size*g+m.labelOffset+r.currentValueTotalHeight)})}function M(e,t,n,r,a){r=Math.round(r*(n._stepCount-1)),r=n._visibleSteps[r]._index;r!==n.active&&k(e,t,n,r,!0,a)}function k(t,n,e,r,a,i){var o=e.active;e.active=r,h(t.layout,m.name,e).applyUpdate("active",r);r=e.steps[e.active];n.call(S,e,i),n.call(b,e),t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:a,previousActive:o}),r&&r.method&&a&&(n._nextMethod?(n._nextMethod.step=r,n._nextMethod.doCallback=a,n._nextMethod.doTransition=i):(n._nextMethod={step:r,doCallback:a,doTransition:i},n._nextMethodRaf=window.requestAnimationFrame(function(){var e=n._nextMethod.step;e.method&&(e.execute&&u.executeAPICommand(t,e.method,e.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function i(e,r,a){var i=a.node(),o=c.select(r);function s(){return a.data()[0]}e.on("mousedown",function(){var e=s();r.emit("plotly_sliderstart",{slider:e});var t=a.select("."+m.gripRectClass);c.event.stopPropagation(),c.event.preventDefault(),t.call(l.fill,e.activebgcolor);var n=L(e,c.mouse(i)[0]);M(r,a,e,n,!0),e._dragging=!0,o.on("mousemove",function(){var e=s(),t=L(e,c.mouse(i)[0]);M(r,a,e,t,!1)}),o.on("mouseup",function(){var e=s();e._dragging=!1,t.call(l.fill,e.bgcolor),o.on("mouseup",null),o.on("mousemove",null),r.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function A(e,a){var e=e.selectAll("rect."+m.tickRectClass).data(a._visibleSteps),i=a._dims;e.enter().append("rect").classed(m.tickRectClass,!0),e.exit().remove(),e.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"}),e.each(function(e,t){var n=t%i.labelStride==0,r=c.select(this);r.attr({height:n?a.ticklen:a.minorticklen}).call(l.fill,a.tickcolor),d.setTranslate(r,E(a,t/(a._stepCount-1))-.5*a.tickwidth,(n?m.tickOffset:m.minorTickOffset)+i.currentValueTotalHeight)})}function S(e,t,n){for(var r=e.select("rect."+m.gripRectClass),a=0,i=0;i<t._stepCount;i++)if(t._visibleSteps[i]._index===t.active){a=i;break}var o=E(t,a/(t._stepCount-1));t._invokingCommand||(e=r,(e=n&&0<t.transition.duration?r.transition().duration(t.transition.duration).ease(t.transition.easing):e).attr("transform",s(o-.5*m.gripWidth,t._dims.currentValueTotalHeight)))}function E(e,t){e=e._dims;return e.inputAreaStart+m.stepInset+(e.inputAreaLength-2*m.stepInset)*Math.min(1,Math.max(0,t))}function L(e,t){e=e._dims;return Math.min(1,Math.max(0,(t-m.stepInset-e.inputAreaStart)/(e.inputAreaLength-2*m.stepInset-2*e.inputAreaStart)))}function C(t,n,r){var e=r._dims,a=f.ensureSingle(t,"rect",m.railTouchRectClass,function(e){e.call(i,n,t,r).style("pointer-events","all")});a.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,m.tickOffset+r.ticklen+e.labelHeight)}).call(l.fill,r.bgcolor).attr("opacity",0),d.setTranslate(a,0,e.currentValueTotalHeight)}function D(e,t){var n=t._dims,r=n.inputAreaLength-2*m.railInset,e=f.ensureSingle(e,"rect",m.railRectClass);e.attr({width:r,height:m.railWidth,rx:m.railRadius,ry:m.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),d.setTranslate(e,m.railInset,.5*(n.inputAreaWidth-m.railWidth)+n.currentValueTotalHeight)}t.exports=function(r){var e=r._fullLayout,t=function(e,t){for(var n=e[m.name],r=[],a=0;a<n.length;a++){var i=n[a];i.visible&&(i._gd=t,r.push(i))}return r}(e,r),e=e._infolayer.selectAll("g."+m.containerClassName).data(0<t.length?[0]:[]);function n(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),u.autoMargin(r,x(e))}if(e.enter().append("g").classed(m.containerClassName,!0).style("cursor","ew-resize"),e.exit().each(function(){c.select(this).selectAll("g."+m.groupClassName).each(n)}).remove(),0!==t.length){e=e.selectAll("g."+m.groupClassName).data(t,o);e.enter().append("g").classed(m.groupClassName,!0),e.exit().each(n).remove();for(var a=0;a<t.length;a++){var i=t[a];!function(e,n){var t=d.tester.selectAll("g."+m.labelGroupClass).data(n._visibleSteps);t.enter().append("g").classed(m.labelGroupClass,!0);var r=0,a=0;t.each(function(e){e=w(c.select(this),{step:e},n).node();e&&(e=d.bBox(e),a=Math.max(a,e.height),r=Math.max(r,e.width))}),t.remove();var i=n._dims={};i.inputAreaWidth=Math.max(m.railWidth,m.gripHeight);var o=e._fullLayout._size;i.lx=o.l+o.w*n.x,i.ly=o.t+o.h*(1-n.y),"fraction"===n.lenmode?i.outerLength=Math.round(o.w*n.len):i.outerLength=n.len;i.inputAreaStart=0,i.inputAreaLength=Math.round(i.outerLength-n.pad.l-n.pad.r);var s=(i.inputAreaLength-2*m.stepInset)/(n._stepCount-1),o=r+m.labelPadding;{var l;i.labelStride=Math.max(1,Math.ceil(o/s)),i.labelHeight=a,i.currentValueMaxWidth=0,i.currentValueHeight=0,i.currentValueTotalHeight=0,i.currentValueMaxLines=1,n.currentvalue.visible&&(l=d.tester.append("g"),t.each(function(e){var t=b(l,n,e.label),e=t.node()&&d.bBox(t.node())||{width:0,height:0},t=p.lineCount(t);i.currentValueMaxWidth=Math.max(i.currentValueMaxWidth,Math.ceil(e.width)),i.currentValueHeight=Math.max(i.currentValueHeight,Math.ceil(e.height)),i.currentValueMaxLines=Math.max(i.currentValueMaxLines,t)}),i.currentValueTotalHeight=i.currentValueHeight+n.currentvalue.offset,l.remove())}i.height=i.currentValueTotalHeight+m.tickOffset+n.ticklen+m.labelOffset+i.labelHeight+n.pad.t+n.pad.b;s="left";f.isRightAnchor(n)&&(i.lx-=i.outerLength,s="right");f.isCenterAnchor(n)&&(i.lx-=i.outerLength/2,s="center");t="top";f.isBottomAnchor(n)&&(i.ly-=i.height,t="bottom");f.isMiddleAnchor(n)&&(i.ly-=i.height/2,t="middle");i.outerLength=Math.ceil(i.outerLength),i.height=Math.ceil(i.height),i.lx=Math.round(i.lx),i.ly=Math.round(i.ly);t={y:n.y,b:i.height*v[t],t:i.height*y[t]};"fraction"===n.lenmode?(t.l=0,t.xl=n.x-n.len*y[s],t.r=0,t.xr=n.x+n.len*v[s]):(t.x=n.x,t.l=i.outerLength*y[s],t.r=i.outerLength*v[s]);u.autoMargin(e,x(n),t)}(r,i)}e.each(function(e){var n=c.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(e),u.manageCommandObserver(r,e,e._visibleSteps,function(e){var t=n.data()[0];t.active!==e.index&&(t._dragging||k(r,n,t,e.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(b,n).call(D,n).call(T,n).call(A,n).call(C,e,n).call(_,e,n);e=n._dims;d.setTranslate(t,e.lx+n.pad.l,e.ly+n.pad.t),t.call(S,n,!1),t.call(b,n)}(r,c.select(this),e)})}}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":249,"@plotly/d3":20}],252:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":248,"./constants":249,"./defaults":250,"./draw":251}],253:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),M=e("../../plots/plots"),k=e("../../registry"),A=e("../../lib"),S=A.strTranslate,E=e("../drawing"),L=e("../color"),C=e("../../lib/svg_text_utils"),D=e("../../constants/interactions"),O=e("../../constants/alignment").OPPOSITE_SIDE,P=/ [XY][0-9]* /;t.exports={draw:function(n,e,t){var r=t.propContainer,a=t.propName,i=t.placeholder,o=t.traceIndex,c=t.avoid||{},s=t.attributes,l=t.transform,u=t.containerGroup,d=n._fullLayout,f=1,p=!1,h=((r=r.title)&&r.text?r.text:"").trim(),m=(r=r&&r.font?r.font:{}).family,g=r.size,y=r.color;"title.text"===a?v="titleText":-1!==a.indexOf("axis")?v="axisTitleText":a.indexOf(!0)&&(v="colorbarTitleText");var v=n._context.edits[v];""===h?f=0:h.replace(P," % ")===i.replace(P," % ")&&(f=.2,p=!0,v||(h="")),t._meta?h=A.templateString(h,t._meta):d._meta&&(h=A.templateString(h,d._meta));t=h||v,r=(u=u||A.ensureSingle(d._infolayer,"g","g-"+e)).selectAll("text").data(t?[0]:[]);return r.enter().append("text"),r.text(h).attr("class",e),r.exit().remove(),t&&(r.call(x),v&&(h?r.on(".opacity",null):(p=!(f=0),r.text(i).on("mouseover.opacity",function(){w.select(this).transition().duration(D.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(D.HIDE_PLACEHOLDER).style("opacity",0)})),r.call(C.makeEditable,{gd:n}).on("edit",function(e){void 0!==o?k.call("_guiRestyle",n,a,e,o):k.call("_guiRelayout",n,a,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(x)}).on("input",function(e){this.text(e||" ").call(C.positionText,s.x,s.y)})),r.classed("js-placeholder",p)),u;function x(e){A.syncOrAsync([b,_],e)}function b(e){var t;return l?(t="",l.rotate&&(t+="rotate("+[l.rotate,s.x,s.y]+")"),l.offset&&(t+=S(0,l.offset))):t=null,e.attr("transform",t),e.style({"font-family":m,"font-size":w.round(g,2)+"px",fill:L.rgb(y),opacity:f*L.opacity(y),"font-weight":M.fontWeight}).attr(s).call(C.convertToTspans,n),M.previousPromises(n)}function _(e){var t,n,r,a,i,o,s,l=w.select(e.node().parentNode);c&&c.selection&&c.side&&h&&(l.attr("transform",null),t=O[c.side],n="left"===c.side||"top"===c.side?-1:1,r=T(c.pad)?c.pad:2,a=E.bBox(l.node()),i={left:0,top:0,right:d.width,bottom:d.height},o=c.maxShift||n*(i[c.side]-a[c.side]),((s=0)<(s=o<0?o:(e=c.offsetLeft||0,i=c.offsetTop||0,a.left-=e,a.right-=e,a.top-=i,a.bottom-=i,c.selection.each(function(){var e=E.bBox(this);A.bBoxIntersect(a,e,r)&&(s=Math.max(s,n*(e[c.side]-a[t])+r))}),Math.min(o,s)))||o<0)&&(o={left:[-s,0],right:[s,0],top:[0,-s],bottom:[0,s]}[c.side],l.attr("transform",S(o[0],o[1]))))}}}},{"../../constants/alignment":260,"../../constants/interactions":264,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],254:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),i=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l=e("../../plot_api/plot_template").templatedArray,e=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:e,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"../color/attributes":154}],255:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],256:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("../../plots/array_container_defaults"),o=e("./attributes"),r=e("./constants").name,s=o.buttons;function l(n,r,e){function t(e,t){return a.coerce(n,r,o,e,t)}t("visible",0<i(n,r,{name:"buttons",handleItemDefaults:c}).length)&&(t("active"),t("direction"),t("type"),t("showactive"),t("x"),t("y"),a.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),a.coerceFont(t,"font",e.font),t("bgcolor",e.paper_bgcolor),t("bordercolor"),t("borderwidth"))}function c(n,r){function e(e,t){return a.coerce(n,r,s,e,t)}e("visible","skip"===n.method||Array.isArray(n.args))&&(e("method"),e("args"),e("args2"),e("label"),e("execute"))}t.exports=function(e,t){i(e,t,{name:r,handleItemDefaults:l})}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":254,"./constants":255}],257:[function(e,t,n){"use strict";var d=e("@plotly/d3"),f=e("../../plots/plots"),i=e("../color"),u=e("../drawing"),p=e("../../lib"),h=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,m=e("../../constants/alignment").LINE_SPACING,g=e("./constants"),y=e("./scrollbox");function v(e){return e._index}function x(e,t){return+e.attr(g.menuIndexAttrName)===t._index}function b(e,t,n,r,a,i,o,s){t.active=o,l(e.layout,g.name,t).applyUpdate("active",o),"buttons"===t.type?w(e,r,null,null,t):"dropdown"===t.type&&(a.attr(g.menuIndexAttrName,"-1"),_(e,r,a,i,t),s||w(e,r,a,i,t))}function _(e,t,n,r,a){var i=p.ensureSingle(t,"g",g.headerClassName,function(e){e.style("pointer-events","all")}),o=a._dims,s=a.active,l=a.buttons[s]||g.blankHeaderOpts,c={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},s={width:o.headerWidth,height:o.headerHeight};i.call(T,a,l,e).call(E,a,c,s),p.ensureSingle(t,"text",g.headerArrowClassName,function(e){e.attr("text-anchor","end").call(u.font,a.font).text(g.arrowSymbol[a.direction])}).attr({x:o.headerWidth-g.arrowOffsetX+a.pad.l,y:o.headerHeight/2+g.textOffsetY+a.pad.t}),i.on("click",function(){n.call(L,String(x(n,a)?-1:a._index)),w(e,t,n,r,a)}),i.on("mouseover",function(){i.call(k)}),i.on("mouseout",function(){i.call(A,a)}),u.setTranslate(t,o.lx,o.ly)}function w(r,a,i,o,s){i||(i=a).attr("pointer-events","all");var e=-1!=+i.attr(g.menuIndexAttrName)||"buttons"===s.type?s.buttons:[],t="dropdown"===s.type?g.dropdownButtonClassName:g.buttonClassName,l=i.selectAll("g."+t).data(p.filterVisible(e)),n=l.enter().append("g").classed(t,!0),c=l.exit();"dropdown"===s.type?(n.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();e=0,t=0,n=s._dims,c=-1!==["up","down"].indexOf(s.direction);"dropdown"===s.type&&(c?t=n.headerHeight+g.gapButtonHeader:e=n.headerWidth+g.gapButtonHeader),"dropdown"===s.type&&"up"===s.direction&&(t=-g.gapButtonHeader+g.gapButton-n.openHeight),"dropdown"===s.type&&"left"===s.direction&&(e=-g.gapButtonHeader+g.gapButton-n.openWidth);var u={x:n.lx+e+s.pad.l,y:n.ly+t+s.pad.t,yPad:g.gapButton,xPad:g.gapButton,index:0},t={l:u.x+s.borderwidth,t:u.y+s.borderwidth};l.each(function(e,t){var n=d.select(this);n.call(T,s,e,r).call(E,s,u),n.on("click",function(){d.event.defaultPrevented||(e.execute&&(e.args2&&s.active===t?(b(r,s,0,a,i,o,-1),f.executeAPICommand(r,e.method,e.args2)):(b(r,s,0,a,i,o,t),f.executeAPICommand(r,e.method,e.args))),r.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active}))}),n.on("mouseover",function(){n.call(k)}),n.on("mouseout",function(){n.call(A,s),l.call(M,s)})}),l.call(M,s),c?(t.w=Math.max(n.openWidth,n.headerWidth),t.h=u.y-t.t):(t.w=u.x-t.l,t.h=Math.max(n.openHeight,n.headerHeight)),t.direction=s.direction,o&&(l.size()?function(e,t,n){var r,a,i,o=t.direction,o="up"===o||"down"===o,s=t._dims,l=t.active;if(o)for(i=a=0;i<l;i++)a+=s.heights[i]+g.gapButton;else for(i=r=0;i<l;i++)r+=s.widths[i]+g.gapButton;e.enable(n,r,a),e.hbar&&e.hbar.attr("opacity","0").transition().attr("opacity","1");e.vbar&&e.vbar.attr("opacity","0").transition().attr("opacity","1")}(o,s,t):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()});n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(o))}function T(e,t,n,r){e.call(a,t).call(o,t,n,r)}function a(e,t){p.ensureSingle(e,"rect",g.itemRectClassName,function(e){e.attr({rx:g.rx,ry:g.ry,"shape-rendering":"crispEdges"})}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,n,r){var a=p.ensureSingle(e,"text",g.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})}),e=n.label,n=r._fullLayout._meta;n&&(e=p.templateString(e,n)),a.call(u.font,t.font).text(e).call(h.convertToTspans,r)}function M(e,r){var a=r.active;e.each(function(e,t){var n=d.select(this);t===a&&r.showactive&&n.select("rect."+g.itemRectClassName).call(i.fill,g.activeColor)})}function k(e){e.select("rect."+g.itemRectClassName).call(i.fill,g.hoverColor)}function A(e,t){e.select("rect."+g.itemRectClassName).call(i.fill,t.bgcolor)}function S(e){return g.autoMarginIdRoot+e._index}function E(e,t,n,r){r=r||{};var a=e.select("."+g.itemRectClassName),i=e.select("."+g.itemTextClassName),o=t.borderwidth,s=n.index,l=t._dims;u.setTranslate(e,o+n.x,o+n.y);e=-1!==["up","down"].indexOf(t.direction),o=r.height||(e?l.heights[s]:l.height1);a.attr({x:0,y:0,width:r.width||(e?l.width1:l.widths[s]),height:o});r=t.font.size*m,t=h.lineCount(i);h.positionText(i,g.textOffsetX,o/2-(t-1)*r/2+g.textOffsetY),e?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function L(e,t){e.attr(g.menuIndexAttrName,t||"-1").selectAll("g."+g.dropdownButtonClassName).remove()}t.exports=function(a){var e=a._fullLayout,t=p.filterVisible(e[g.name]);function n(e){f.autoMargin(a,S(e))}var r=e._menulayer.selectAll("g."+g.containerClassName).data(0<t.length?[0]:[]);if(r.enter().append("g").classed(g.containerClassName,!0).style("cursor","pointer"),r.exit().each(function(){d.select(this).selectAll("g."+g.headerGroupClassName).each(n)}).remove(),0!==t.length){var i=r.selectAll("g."+g.headerGroupClassName).data(t,v);i.enter().append("g").classed(g.headerGroupClassName,!0);for(var o=p.ensureSingle(r,"g",g.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),s=0;s<t.length;s++){var l=t[s];!function(a,i){var o=i._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},e=u.tester.selectAll("g."+g.dropdownButtonClassName).data(p.filterVisible(i.buttons));e.enter().append("g").classed(g.dropdownButtonClassName,!0);var s=-1!==["up","down"].indexOf(i.direction);e.each(function(e,t){var n=d.select(this);n.call(T,i,e,a);var r=n.select("."+g.itemTextClassName),e=r.node()&&u.bBox(r.node()).width,n=Math.max(e+g.textPadX,g.minWidth),e=i.font.size*m,r=h.lineCount(r),r=Math.max(e*r,g.minHeight)+g.textOffsetY,r=Math.ceil(r),n=Math.ceil(n);o.widths[t]=n,o.heights[t]=r,o.height1=Math.max(o.height1,r),o.width1=Math.max(o.width1,n),s?(o.totalWidth=Math.max(o.totalWidth,n),o.openWidth=o.totalWidth,o.totalHeight+=r+g.gapButton,o.openHeight+=r+g.gapButton):(o.totalWidth+=n+g.gapButton,o.openWidth+=n+g.gapButton,o.totalHeight=Math.max(o.totalHeight,r),o.openHeight=o.totalHeight)}),s?o.totalHeight-=g.gapButton:o.totalWidth-=g.gapButton;o.headerWidth=o.width1+g.arrowPadX,o.headerHeight=o.height1,"dropdown"===i.type&&(s?(o.width1+=g.arrowPadX,o.totalHeight=o.height1):o.totalWidth=o.width1,o.totalWidth+=g.arrowPadX);e.remove();var t=o.totalWidth+i.pad.l+i.pad.r,n=o.totalHeight+i.pad.t+i.pad.b,r=a._fullLayout._size;o.lx=r.l+r.w*i.x,o.ly=r.t+r.h*(1-i.y);e="left";p.isRightAnchor(i)&&(o.lx-=t,e="right");p.isCenterAnchor(i)&&(o.lx-=t/2,e="center");r="top";p.isBottomAnchor(i)&&(o.ly-=n,r="bottom");p.isMiddleAnchor(i)&&(o.ly-=n/2,r="middle");o.totalWidth=Math.ceil(o.totalWidth),o.totalHeight=Math.ceil(o.totalHeight),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),f.autoMargin(a,S(i),{x:i.x,y:i.y,l:t*({right:1,center:.5}[e]||0),r:t*({left:1,center:.5}[e]||0),b:n*({top:1,middle:.5}[r]||0),t:n*({bottom:1,middle:.5}[r]||0)})}(a,l)}var e="updatemenus"+e._uid,c=new y(a,o,e);i.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(L)),i.exit().each(function(e){o.call(L),n(e)}).remove(),i.each(function(t){var n=d.select(this),r="dropdown"===t.type?o:null;f.manageCommandObserver(a,t,t.buttons,function(e){b(a,t,t.buttons[e.index],n,r,c,e.index,!0)}),"dropdown"===t.type?(_(a,n,o,c,t),x(o,t)&&w(a,n,o,c,t)):w(a,n,null,null,t)})}}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":255,"./scrollbox":259,"@plotly/d3":20}],258:[function(e,t,n){arguments[4][252][0].apply(n,arguments)},{"./attributes":254,"./constants":255,"./defaults":256,"./draw":257,dup:252}],259:[function(e,t,n){"use strict";t.exports=T;var b=e("@plotly/d3"),_=e("../color"),w=e("../drawing"),a=e("../../lib");function T(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(e,t,n){var r=this.gd._fullLayout,a=r.width,i=r.height;this.position=e;var o=this.position.l,s=this.position.w,l=this.position.t,c=this.position.h,u=this.position.direction,d="down"===u,f="left"===u,p="up"===u,h=s,m=c;d||f||"right"===u||p||(this.position.direction="down",d=!0),d||p?(y=(g=o)+h,m=d?(v=l,(x=Math.min(v+m,i))-v):(x=l+m)-(v=Math.max(x-m,0))):(x=(v=l)+m,h=f?(y=o+h)-(g=Math.max(y-h,0)):(g=o,(y=Math.min(g+h,a))-g)),this._box={l:g,t:v,w:h,h:m};e=h<s,u=T.barLength+2*T.barPad,p=T.barWidth+2*T.barPad,d=o,f=l+c;i<f+p&&(f=i-p);i=this.container.selectAll("rect.scrollbar-horizontal").data(e?[0]:[]);i.exit().on(".drag",null).remove(),i.enter().append("rect").classed("scrollbar-horizontal",!0).call(_.fill,T.barColor),e?(this.hbar=i.attr({rx:T.barRadius,ry:T.barRadius,x:d,y:f,width:u,height:p}),this._hbarXMin=d+u/2,this._hbarTranslateMax=h-u):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);i=m<c,f=T.barWidth+2*T.barPad,d=T.barLength+2*T.barPad,h=o+s,u=l;a<h+f&&(h=a-f);a=this.container.selectAll("rect.scrollbar-vertical").data(i?[0]:[]);a.exit().on(".drag",null).remove(),a.enter().append("rect").classed("scrollbar-vertical",!0).call(_.fill,T.barColor),i?(this.vbar=a.attr({rx:T.barRadius,ry:T.barRadius,x:h,y:u,width:f,height:d}),this._vbarYMin=u+d/2,this._vbarTranslateMax=m-d):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var d=this.id,g=g-.5,y=i?y+f+.5:y+.5,v=v-.5,x=e?x+p+.5:x+.5,r=r._topdefs.selectAll("#"+d).data(e||i?[0]:[]);r.exit().remove(),r.enter().append("clipPath").attr("id",d).append("rect"),e||i?(this._clipRect=r.select("rect").attr({x:Math.floor(g),y:Math.floor(v),width:Math.ceil(y)-Math.floor(g),height:Math.ceil(x)-Math.floor(v)}),this.container.call(w.setClipUrl,d,this.gd),this.bg.attr({x:o,y:l,width:s,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),(e||i)&&(c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(c),c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault(),b.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),e&&this.hbar.on(".drag",null).call(c),i&&this.vbar.on(".drag",null).call(c)),this.setTranslate(t,n)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=b.event.dx),this.vbar&&(t-=b.event.dy),this.setTranslate(e,t)},T.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=b.event.deltaY),this.vbar&&(t+=b.event.deltaY),this.setTranslate(e,t)},T.prototype._onBarDrag=function(){var e,t,n=this.translateX,r=this.translateY;this.hbar&&(e=(t=n+this._hbarXMin)+this._hbarTranslateMax,n=(a.constrain(b.event.x,t,e)-t)/(e-t)*(this.position.w-this._box.w)),this.vbar&&(t=(e=r+this._vbarYMin)+this._vbarTranslateMax,r=(a.constrain(b.event.y,e,t)-e)/(t-e)*(this.position.h-this._box.h)),this.setTranslate(n,r)},T.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;e=a.constrain(e||0,0,n),t=a.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(w.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(w.setTranslate,e+e/n*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(w.setTranslate,e,t+t/r*this._vbarTranslateMax)}},{"../../lib":285,"../color":155,"../drawing":177,"@plotly/d3":20}],260:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],261:[function(e,t,n){"use strict";t.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},{}],262:[function(e,t,n){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],263:[function(e,t,n){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],264:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],265:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],266:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],267:[function(e,t,n){"use strict";n.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var r=e("./registry"),a=n.register=r.register,i=e("./plot_api"),o=Object.keys(i),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=i[l]),a({moduleType:"apiMethod",name:l,fn:i[l]})}a(e("./traces/scatter")),a([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),a([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(a(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=e("./fonts/ploticon");var c=e("./components/fx"),r=e("./plots/plots");n.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},n.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":146,"./components/annotations3d":151,"./components/colorbar":161,"./components/colorscale":167,"./components/errorbars":183,"./components/fx":195,"./components/grid":199,"./components/images":204,"./components/legend":212,"./components/modebar":218,"./components/rangeselector":226,"./components/rangeslider":233,"./components/shapes":247,"./components/sliders":252,"./components/updatemenus":258,"./fonts/ploticon":268,"./locale-en":311,"./locale-en-us":310,"./plot_api":315,"./plot_api/plot_schema":319,"./plots/plots":366,"./registry":373,"./snapshot":378,"./traces/scatter":506,"./version":546,"native-promise-only":70}],268:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],269:[function(e,t,n){"use strict";n.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},{}],270:[function(e,t,n){"use strict";var e=e("./mod"),a=e.mod,r=e.modHalf,m=Math.PI,g=2*m;function y(e){return Math.abs(e[1]-e[0])>g-1e-14}function i(e,t){return r(t-e,g)}function o(e,t){if(y(t))return!0;var n=t[0]<t[1]?(r=t[0],t[1]):(r=t[1],t[0]),r=a(r,g);(n=a(n,g))<r&&(n+=g);t=a(e,g),e=t+g;return r<=t&&t<=n||r<=e&&e<=n}function s(e,t,n,r,a,i,o){a=a||0,i=i||0;var s,l,c,u=y([n,r]);function d(e,t){return[e*Math.cos(t)+a,i-e*Math.sin(t)]}var f,n=u?(s=0,l=m,g):n<r?(s=n,r):(s=r,n),e=e<t?(c=e,t):(c=t,e),p=Math.abs(n-s)<=m?0:1;function h(e,t,n){return"A"+[e,e]+" "+[0,p,n]+" "+d(e,t)}return u?f=null===c?"M"+d(e,s)+h(e,l,0)+h(e,n,0)+"Z":"M"+d(c,s)+h(c,l,0)+h(c,n,0)+"ZM"+d(e,s)+h(e,l,1)+h(e,n,1)+"Z":null===c?(f="M"+d(e,s)+h(e,n,0),o&&(f+="L0,0Z")):f="M"+d(c,s)+"L"+d(e,s)+h(e,n,0)+"L"+d(c,n)+h(c,s,1)+"Z",f}t.exports={deg2rad:function(e){return e/180*m},rad2deg:function(e){return e/m*180},angleDelta:i,angleDist:function(e,t){return Math.abs(i(e,t))},isFullCircle:y,isAngleInsideSector:o,isPtInsideSector:function(e,t,n,r){if(!o(t,r))return!1;var a,n=n[0]<n[1]?(a=n[0],n[1]):(a=n[1],n[0]);return a<=e&&e<=n},pathArc:function(e,t,n,r,a){return s(null,e,t,n,r,a,0)},pathSector:function(e,t,n,r,a){return s(null,e,t,n,r,a,1)},pathAnnulus:function(e,t,n,r,a,i){return s(e,t,n,r,a,i,1)}}},{"./mod":292}],271:[function(e,t,n){"use strict";var d=Array.isArray,r=ArrayBuffer,a=DataView;function i(e){return r.isView(e)&&!(e instanceof a)}function o(e){return d(e)||i(e)}function s(e,t,n){if(o(e)){if(o(e[0])){for(var r=n,a=0;a<e.length;a++)r=t(r,e[a].length);return r}return e.length}return 0}n.isTypedArray=i,n.isArrayOrTypedArray=o,n.isArray1D=function(e){return!o(e[0])},n.ensureArray=function(e,t){return(e=!d(e)?[]:e).length=t,e},n.concat=function(){for(var e,t,n,r,a,i,o,s=[],l=!0,c=0,u=0;u<arguments.length;u++)(a=(n=arguments[u]).length)&&(t?s.push(n):(t=n,r=a),d(n)?e=!1:(l=!1,c?e!==n.constructor&&(e=!1):e=n.constructor),c+=a);if(!c)return[];if(!s.length)return t;if(l)return t.concat.apply(t,s);if(e){for((i=new e(c)).set(t),u=0;u<s.length;u++)n=s[u],i.set(n,r),r+=n.length;return i}for(i=new Array(c),o=0;o<t.length;o++)i[o]=t[o];for(u=0;u<s.length;u++){for(n=s[u],o=0;o<n.length;o++)i[r+o]=n[o];r+=o}return i},n.maxRowLength=function(e){return s(e,Math.max,0)},n.minRowLength=function(e){return s(e,Math.min,1/0)}},{}],272:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../constants/numerical").BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(i,"")),r(e)?Number(e):a}},{"../constants/numerical":265,"fast-isnumeric":31}],273:[function(e,t,n){"use strict";t.exports=function(e){e=e._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],274:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],275:[function(e,t,y){"use strict";var a=e("fast-isnumeric"),r=e("tinycolor2"),o=e("../plots/attributes"),i=e("../components/colorscale/scales"),s=e("../components/color"),l=e("../constants/interactions").DESELECTDIM,c=e("./nested_property"),u=e("./regex").counter,d=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;function p(e,t){var n=y.valObjectMeta[t.valType];if(t.arrayOk&&f(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},a=r,i={set:function(e){a=e}};return n.coerceFunction(e,i,r,t),a!==r}y.valObjectMeta={data_array:{coerceFunction:function(e,t,n){f(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var a=String(n[r]);if("/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){if(new RegExp(a.substr(1,a.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){"string"!=typeof e?!0!==r.strict&&"number"==typeof e?t.set(String(e)):t.set(n):r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return r(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(i.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):a(e)?t.set(d(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){r=r.regex||u(n);"string"==typeof e&&r.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){t=t.dflt;return e===t||"string"==typeof e&&!!u(t).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var a=e.split("+"),i=0;i<a.length;){var o=a[i];-1===r.flags.indexOf(o)||a.indexOf(o)<i?a.splice(i,1):i++}a.length?t.set(a.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,n,r){function a(e,t,n){var r,a={set:function(e){r=e}};return void 0===n&&(n=t.dflt),y.valObjectMeta[t.valType].coerceFunction(e,a,n,t),r}var i=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var o,s,l,c,u,d,f=r.items,p=[],h=Array.isArray(f),r=h&&i&&Array.isArray(f[0]),m=i&&h&&!r,g=(h&&!m?f:e).length;if(n=Array.isArray(n)?n:[],i)for(o=0;o<g;o++)for(p[o]=[],l=Array.isArray(e[o])?e[o]:[],u=(m?f:h?f[o]:l).length,s=0;s<u;s++)c=m?f[s]:h?f[o][s]:f,void 0!==(d=a(l[s],c,(n[o]||[])[s]))&&(p[o][s]=d);else for(o=0;o<g;o++)void 0!==(d=a(e[o],h?f[o]:f,n[o]))&&(p[o]=d);t.set(p)}else t.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),a=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==n[i].length)return!1;for(var o=0;o<e[i].length;o++)if(!p(e[i][o],r?n[i][o]:n))return!1}else if(!p(e[i],r?n[i]:n))return!1;return!0}}},y.coerce=function(e,t,n,r,a){var i=c(n,r).get(),o=c(e,r),s=c(t,r),n=o.get(),e=t._template;if(void 0===n&&e&&(n=c(e,r).get(),e=0),void 0===a&&(a=i.dflt),i.arrayOk&&f(n))return s.set(n),n;o=y.valObjectMeta[i.valType].coerceFunction;o(n,s,a,i);t=s.get();return e&&t===a&&!p(n,i)&&(o(n=c(e,r).get(),s,a,i),t=s.get()),t},y.coerce2=function(e,t,n,r,a){var i=c(e,r),a=y.coerce(e,t,n,r,a),i=i.get();return null!=i&&a},y.coerceFont=function(e,t,n){var r={};return r.family=e(t+".family",(n=n||{}).family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},y.coercePattern=function(e,t,n,r){var a;e(t+".shape")&&(e(t+".solidity"),e(t+".size"),a="overlay"===e(t+".fillmode"),r||(r=e(t+".bgcolor",a?n:void 0),e(t+".fgcolor",a?s.contrast(r):n)),e(t+".fgopacity",a?.5:1))},y.coerceHoverinfo=function(e,t,n){var r,a=t._module.attributes,i=a.hoverinfo?a:o,a=i.hoverinfo;return 1===n._dataLength&&((r="all"===a.dflt?a.flags.slice():a.dflt.split("+")).splice(r.indexOf("name"),1),r=r.join("+")),y.coerce(e,t,i,"hoverinfo",r)},y.coerceSelectionMarkerOpacity=function(e,t){var n,r,a;!e.marker||void 0!==(n=e.marker.opacity)&&(f(n)||e.selected||e.unselected||(a=l*(r=n)),t("selected.marker.opacity",r),t("unselected.marker.opacity",a))},y.validate=p},{"../components/color":155,"../components/colorscale/scales":170,"../constants/interactions":264,"../plots/attributes":327,"./array":271,"./mod":292,"./nested_property":293,"./regex":301,"fast-isnumeric":31,tinycolor2:119}],276:[function(e,t,f){"use strict";var p,h,n=e("d3-time-format").timeFormat,u=e("fast-isnumeric"),s=e("./loggers"),m=e("./mod").mod,r=e("../constants/numerical"),g=r.BADNUM,y=r.ONEDAY,v=r.ONEHOUR,x=r.ONEMIN,b=r.ONESEC,_=r.EPOCHJD,w=e("../registry"),d=e("d3-time-format").utcFormat,T=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,M=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,k=(new Date).getFullYear()-70;function A(e){return e&&w.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function l(e,t){return String(e+Math.pow(10,t)).substr(1)}f.dateTick0=function(e,t){var n,r=(r=!!t,A(n=e)?(r?w.getComponentMethod("calendars","CANONICAL_SUNDAY"):w.getComponentMethod("calendars","CANONICAL_TICK"))[n]:r?"2000-01-02":"2000-01-01");if(t<2)return r;var r=f.dateTime2ms(r,e);return f.ms2DateTime(r+=y*(t-1),0,e)},f.dfltRange=function(e){return A(e)?w.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},f.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},f.dateTime2ms=function(e,t){if(f.isJSDate(e)){var n=e.getTimezoneOffset()*x,r=(e.getUTCMinutes()-e.getMinutes())*x+(e.getUTCSeconds()-e.getSeconds())*b+(e.getUTCMilliseconds()-e.getMilliseconds());return r&&(n=n-(l=3*x)/2+m(r-n+l/2,l)),e=Number(e)-n,p<=e&&e<=h?e:g}if("string"!=typeof e&&"number"!=typeof e)return g;e=String(e);var a=A(t),i=e.charAt(0);!a||"G"!==i&&"g"!==i||(e=e.substr(1),t="");var o=a&&"chinese"===t.substr(0,7),s=e.match(o?M:T);if(!s)return g;var r=s[1],l=s[3]||"1",n=Number(s[5]||1),i=Number(s[7]||0),e=Number(s[9]||0),s=Number(s[11]||0);if(a){if(2===r.length)return g;r=Number(r);try{var c,u,d=w.getComponentMethod("calendars","getCal")(t);u=o?(c="i"===l.charAt(l.length-1),l=parseInt(l,10),d.newDate(r,d.toMonthIndex(r,l,c),n)):d.newDate(r,Number(l),n)}catch(e){return g}return u?(u.toJD()-_)*y+i*v+e*x+s*b:g}r=2===r.length?(Number(r)+2e3-k)%100+k:Number(r),--l;e=new Date(Date.UTC(2e3,l,n,i,e));return e.setUTCFullYear(r),e.getUTCMonth()!==l||e.getUTCDate()!==n?g:e.getTime()+s*b},p=f.MIN_MS=f.dateTime2ms("-9999"),h=f.MAX_MS=f.dateTime2ms("9999-12-31 23:59:59.9999"),f.isDateTime=function(e,t){return f.dateTime2ms(e,t)!==g};var S=90*y,E=3*v,L=5*x;function C(e,t,n,r,a){if((t||n||r||a)&&(e+=" "+l(t,2)+":"+l(n,2),(r||a)&&(e+=":"+l(r,2),a))){for(var i=4;a%10==0;)--i,a/=10;e+="."+l(a,i)}return e}f.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(p<=e&&e<=h))return g;t=t||0;var r,a,i,o=Math.floor(10*m(e+.05,1)),s=Math.round(e-o/10);if(A(n)){var l=Math.floor(s/y)+_,c=Math.floor(m(e,y));try{r=w.getComponentMethod("calendars","getCal")(n).fromJD(l).formatDate("yyyy-mm-dd")}catch(e){r=d("G%Y-%m-%d")(new Date(s))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;a=t<S?Math.floor(c/v):0,i=t<S?Math.floor(c%v/x):0,l=t<E?Math.floor(c%x/b):0,c=t<L?c%b*10+o:0}else s=new Date(s),r=d("%Y-%m-%d")(s),a=t<S?s.getUTCHours():0,i=t<S?s.getUTCMinutes():0,l=t<E?s.getUTCSeconds():0,c=t<L?10*s.getUTCMilliseconds()+o:0;return C(r,a,i,l,c)},f.ms2DateTimeLocal=function(e){if(!(p+y<=e&&e<=h-y))return g;var t=Math.floor(10*m(e+.05,1)),e=new Date(Math.round(e-t/10));return C(n("%Y-%m-%d")(e),e.getHours(),e.getMinutes(),e.getSeconds(),10*e.getUTCMilliseconds()+t)},f.cleanDate=function(e,t,n){if(e===g)return t;if(f.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(A(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=f.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!f.isDateTime(e,n))return s.error("unrecognized date",e),t;return e};var i=/%\d?f/g,o=/%h/g,c={1:"1",2:"1",3:"2",4:"2"};function D(e,t,n,r){e=e.replace(i,function(e){e=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(e).substr(2).replace(/0+$/,"")||"0"});var a=new Date(Math.floor(t+.05));if(e=e.replace(o,function(){return c[n("%q")(a)]}),A(r))try{e=w.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(a)}var O=[59,59.9,59.99,59.999,59.9999];f.formatDate=function(e,t,n,r,a,i){if(a=A(a)&&a,!t)if("y"===n)t=i.year;else if("m"===n)t=i.month;else{if("d"!==n)return s=n,n=m((o=e)+.05,y),n=l(Math.floor(n/v),2)+":"+l(m(Math.floor(n/x),60),2),"M"!==s&&(u(s)||(s=0),o=(100+Math.min(m(o/b,60),O[s])).toFixed(s).substr(1),n+=":"+(o=0<s?o.replace(/0+$/,"").replace(/[\.]$/,""):o)),n+"\n"+D(i.dayMonthYear,e,r,a);t=i.dayMonth+"\n"+i.year}var o,s;return D(t,e,r,a)};var P=3*y;f.incrementMonth=function(t,e,n){n=A(n)&&n;var r=m(t,y);if(t=Math.round(t-r),n)try{var a=Math.round(t/y)+_,i=w.getComponentMethod("calendars","getCal")(n),o=i.fromJD(a);return e%12?i.add(o,e,"m"):i.add(o,e/12,"y"),(o.toJD()-_)*y+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}t=new Date(t+P);return t.setUTCMonth(t.getUTCMonth()+e)+r-P},f.findExactDates=function(e,t){for(var n,r,a=0,i=0,o=0,s=0,l=A(t)&&w.getComponentMethod("calendars","getCal")(t),c=0;c<e.length;c++)if(r=e[c],u(r)){if(!(r%y))if(l)try{1===(n=l.fromJD(r/y+_)).day()?1===n.month()?a++:i++:o++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?a++:i++:o++}else s++;t=e.length-s;return{exactYears:a/t,exactMonths:(i+=a)/t,exactDays:(o+=i)/t}}},{"../constants/numerical":265,"../registry":373,"./loggers":289,"./mod":292,"d3-time-format":29,"fast-isnumeric":31}],277:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("./loggers"),i=e("./matrix"),o=e("gl-mat4");function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r="plotly.js-style-"+e,e=document.getElementById(r);e||((e=document.createElement("style")).setAttribute("id",r),e.appendChild(document.createTextNode("")),document.head.appendChild(e));e=e.sheet;e.insertRule?e.insertRule(t+"{"+n+"}",0):e.addRule?e.addRule(t,n,0):a.warn("addStyleRule failed")}function c(e){e=window.getComputedStyle(e,null),e=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===e?null:e.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function u(e){for(var t,n=[];(t=e)&&(t instanceof Element||t instanceof HTMLElement);)n.push(e),e=e.parentNode;return n}t.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){return(e=r.select(e)).node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){(e=document.getElementById("plotly.js-style-"+e))&&s(e)},getFullTransformMatrix:function(e){var e=u(e),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(e){e=c(e);e&&(e=i.convertCssMatrix(e),t=o.multiply(t,t,e))}),t},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},{"./loggers":289,"./matrix":291,"@plotly/d3":20,"gl-mat4":47}],278:[function(e,t,n){"use strict";var i=e("events").EventEmitter,e={init:function(n){if(n._ev instanceof i)return n;var r=new i,a=new i;return n._ev=r,n._internalEv=a,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=a.on.bind(a),n._internalOnce=a.once.bind(a),n._removeInternalListener=a.removeListener.bind(a),n._removeAllInternalListeners=a.removeAllListeners.bind(a),n.emit=function(e,t){"undefined"!=typeof jQuery&&jQuery(n).trigger(e,t),r.emit(e,t),a.emit(e,t)},n},triggerHandler:function(e,t,n){var r;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var a=e._ev;if(!a)return r;var i,o=a._events[t];if(!o)return r;function s(e){return e.listener?(a.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(a,[n]))):e.apply(a,[n])}for(o=Array.isArray(o)?o:[o],i=0;i<o.length-1;i++)s(o[i]);return e=s(o[i]),void 0!==r?r:e},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=e},{events:27}],279:[function(e,t,n){"use strict";var f=e("./is_plain_object.js"),p=Array.isArray;function h(e,t,n,r){var a,i,o,s,l,c=e[0],u=e.length;if(2===u&&p(c)&&p(e[1])&&0===c.length){if(function(e,t){for(var n,r=0;r<e.length;r++){if(null!==(n=e[r])&&"object"==typeof n)return!1;void 0!==n&&(t[r]=n)}return!0}(e[1],c))return c;c.splice(0,c.length)}for(var d=1;d<u;d++)for(i in a=e[d])l=c[i],o=a[i],r&&p(o)?c[i]=o:t&&o&&(f(o)||(s=p(o)))?(l=s?(s=!1,l&&p(l)?l:[]):l&&f(l)?l:{},c[i]=h([l,o],t,n,r)):void 0===o&&!n||(c[i]=o);return c}n.extendFlat=function(){return h(arguments,!1,!1,!1)},n.extendDeep=function(){return h(arguments,!0,!1,!1)},n.extendDeepAll=function(){return h(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return h(arguments,!0,!1,!0)}},{"./is_plain_object.js":286}],280:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,a=0;a<e.length;a++){var i=e[a];1!==t[i]&&(t[i]=1,n[r++]=i)}return n}},{}],281:[function(e,t,n){"use strict";function o(e){return!0===e.visible}function s(e){e=e[0].trace;return!0===e.visible&&0!==e._length}t.exports=function(e){for(var t,n=(t=e,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?s:o),r=[],a=0;a<e.length;a++){var i=e[a];n(i)&&r.push(i)}return r}},{}],282:[function(e,t,n){"use strict";var o,s,l,c=e("./mod").mod;function h(e,t,n,r,a,i,o,s){var l=n-e,n=a-e,o=o-a,a=r-t,r=i-t,s=s-i,i=l*s-o*a;if(0==i)return null;o=(n*s-o*r)/i,i=(n*a-l*r)/i;return i<0||1<i||o<0||1<o?null:{x:e+l*o,y:t+a*o}}function m(e,t,n,r,a){var i=r*e+a*t;if(i<0)return r*r+a*a;if(n<i){var o=r-e,i=a-t;return o*o+i*i}e=r*t-a*e;return e*e/n}n.segmentsIntersect=h,n.segmentDistance=function(e,t,n,r,a,i,o,s){if(h(e,t,n,r,a,i,o,s))return 0;var l=n-e,c=r-t,u=o-a,d=s-i,f=l*l+c*c,p=u*u+d*d,i=Math.min(m(l,c,f,a-e,i-t),m(l,c,f,o-e,s-t),m(u,d,p,e-a,t-i),m(u,d,p,n-a,r-i));return Math.sqrt(i)},n.getTextLocation=function(e,t,n,r){if(e===s&&r===l||(o={},s=e,l=r),o[n])return o[n];var a=e.getPointAtLength(c(n-r/2,t)),i=e.getPointAtLength(c(n+r/2,t)),r=Math.atan((i.y-a.y)/(i.x-a.x)),t=e.getPointAtLength(c(n,t)),r={x:(4*t.x+a.x+i.x)/6,y:(4*t.y+a.y+i.y)/6,theta:r};return o[n]=r},n.clearLocationCache=function(){s=null},n.getVisibleSegment=function(n,e,t){var r,a,i=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=n.getTotalLength(),d=u;function f(e){var t=n.getPointAtLength(e);0===e?r=t:e===u&&(a=t);e=t.x<i?i-t.x:t.x>o?t.x-o:0,t=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(e*e+t*t)}for(var p=f(c);p;){if(d<(c+=p+t))return;p=f(c)}for(p=f(d);p;){if((d-=p+t)<c)return;p=f(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-a.x)<.1&&Math.abs(r.y-a.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var a,i,o,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,f=0,p=s;d<c;){if(o=(i=e.getPointAtLength(a=(f+p)/2))[n]-t,Math.abs(o)<l)return i;0<u*o?p=a:f=a,d++}return i}},{"./mod":292}],283:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],284:[function(e,t,n){"use strict";t.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),r=1<n?(n*e+n*t)/n:e+t,n=String(r).length;return 16<n&&(t=String(t).length,String(e).length+t<=n&&(-1===(n=parseFloat(r).toPrecision(12)).indexOf("e+")&&(r=+n))),r}},{}],285:[function(e,t,n){"use strict";var y=e("@plotly/d3"),v=e("d3-time-format").utcFormat,r=e("fast-isnumeric"),a=e("../constants/numerical"),i=a.FP_SAFE,o=-i,s=a.BADNUM,x=t.exports={};x.nestedProperty=e("./nested_property"),x.keyedContainer=e("./keyed_container"),x.relativeAttr=e("./relative_attr"),x.isPlainObject=e("./is_plain_object"),x.toLogRange=e("./to_log_range"),x.relinkPrivateKeys=e("./relink_private");t=e("./array");x.isTypedArray=t.isTypedArray,x.isArrayOrTypedArray=t.isArrayOrTypedArray,x.isArray1D=t.isArray1D,x.ensureArray=t.ensureArray,x.concat=t.concat,x.maxRowLength=t.maxRowLength,x.minRowLength=t.minRowLength;t=e("./mod");x.mod=t.mod,x.modHalf=t.modHalf;t=e("./coerce");x.valObjectMeta=t.valObjectMeta,x.coerce=t.coerce,x.coerce2=t.coerce2,x.coerceFont=t.coerceFont,x.coercePattern=t.coercePattern,x.coerceHoverinfo=t.coerceHoverinfo,x.coerceSelectionMarkerOpacity=t.coerceSelectionMarkerOpacity,x.validate=t.validate;t=e("./dates");x.dateTime2ms=t.dateTime2ms,x.isDateTime=t.isDateTime,x.ms2DateTime=t.ms2DateTime,x.ms2DateTimeLocal=t.ms2DateTimeLocal,x.cleanDate=t.cleanDate,x.isJSDate=t.isJSDate,x.formatDate=t.formatDate,x.incrementMonth=t.incrementMonth,x.dateTick0=t.dateTick0,x.dfltRange=t.dfltRange,x.findExactDates=t.findExactDates,x.MIN_MS=t.MIN_MS,x.MAX_MS=t.MAX_MS;t=e("./search");x.findBin=t.findBin,x.sorterAsc=t.sorterAsc,x.sorterDes=t.sorterDes,x.distinctVals=t.distinctVals,x.roundUp=t.roundUp,x.sort=t.sort,x.findIndexOfMin=t.findIndexOfMin;t=e("./stats");x.aggNums=t.aggNums,x.len=t.len,x.mean=t.mean,x.median=t.median,x.midRange=t.midRange,x.variance=t.variance,x.stdev=t.stdev,x.interp=t.interp;t=e("./matrix");x.init2dArray=t.init2dArray,x.transposeRagged=t.transposeRagged,x.dot=t.dot,x.translationMatrix=t.translationMatrix,x.rotationMatrix=t.rotationMatrix,x.rotationXYMatrix=t.rotationXYMatrix,x.apply3DTransform=t.apply3DTransform,x.apply2DTransform=t.apply2DTransform,x.apply2DTransform2=t.apply2DTransform2,x.convertCssMatrix=t.convertCssMatrix,x.inverseTransformMatrix=t.inverseTransformMatrix;t=e("./angles");x.deg2rad=t.deg2rad,x.rad2deg=t.rad2deg,x.angleDelta=t.angleDelta,x.angleDist=t.angleDist,x.isFullCircle=t.isFullCircle,x.isAngleInsideSector=t.isAngleInsideSector,x.isPtInsideSector=t.isPtInsideSector,x.pathArc=t.pathArc,x.pathSector=t.pathSector,x.pathAnnulus=t.pathAnnulus;t=e("./anchor_utils");x.isLeftAnchor=t.isLeftAnchor,x.isCenterAnchor=t.isCenterAnchor,x.isRightAnchor=t.isRightAnchor,x.isTopAnchor=t.isTopAnchor,x.isMiddleAnchor=t.isMiddleAnchor,x.isBottomAnchor=t.isBottomAnchor;t=e("./geometry2d");x.segmentsIntersect=t.segmentsIntersect,x.segmentDistance=t.segmentDistance,x.getTextLocation=t.getTextLocation,x.clearLocationCache=t.clearLocationCache,x.getVisibleSegment=t.getVisibleSegment,x.findPointOnPath=t.findPointOnPath;t=e("./extend");x.extendFlat=t.extendFlat,x.extendDeep=t.extendDeep,x.extendDeepAll=t.extendDeepAll,x.extendDeepNoArrays=t.extendDeepNoArrays;t=e("./loggers");x.log=t.log,x.warn=t.warn,x.error=t.error;t=e("./regex");x.counterRegex=t.counter;t=e("./throttle");x.throttle=t.throttle,x.throttleDone=t.done,x.clearThrottle=t.clear;t=e("./dom");function c(e){var t,n={};for(t in e)for(var r=e[t],a=0;a<r.length;a++)n[r[a]]=+t;return n}x.getGraphDiv=t.getGraphDiv,x.isPlotDiv=t.isPlotDiv,x.removeElement=t.removeElement,x.addStyleRule=t.addStyleRule,x.addRelatedStyleRule=t.addRelatedStyleRule,x.deleteRelatedStyleRule=t.deleteRelatedStyleRule,x.getFullTransformMatrix=t.getFullTransformMatrix,x.getElementTransformMatrix=t.getElementTransformMatrix,x.getElementAndAncestors=t.getElementAndAncestors,x.equalDomRects=t.equalDomRects,x.clearResponsive=e("./clear_responsive"),x.preserveDrawingBuffer=e("./preserve_drawing_buffer"),x.makeTraceGroups=e("./make_trace_groups"),x._=e("./localize"),x.notifier=e("./notifier"),x.filterUnique=e("./filter_unique"),x.filterVisible=e("./filter_visible"),x.pushUnique=e("./push_unique"),x.increment=e("./increment"),x.cleanNumber=e("./clean_number"),x.ensureNumber=function(e){return r(e)?(e=Number(e),i<e||e<o?s:e):s},x.isIndex=function(e,t){return!(void 0!==t&&t<=e)&&(r(e)&&0<=e&&e%1==0)},x.noop=e("./noop"),x.identity=e("./identity"),x.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},x.swapAttrs=function(e,t,n,r){n=n||"x",r=r||"y";for(var a=0;a<t.length;a++){var i=t[a],o=x.nestedProperty(e,i.replace("?",n)),s=x.nestedProperty(e,i.replace("?",r)),i=o.get();o.set(s.get()),s.set(i)}},x.raiseToTop=function(e){e.parentNode.appendChild(e)},x.cancelTransition=function(e){return e.transition().duration(0)},x.constrain=function(e,t,n){return n<t?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},x.bBoxIntersect=function(e,t,n){return e.left<=t.right+(n=n||0)&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},x.simpleMap=function(e,t,n,r,a){for(var i=e.length,o=new Array(i),s=0;s<i;s++)o[s]=t(e[s],n,r,a);return o},x.randstr=function e(t,n,r,a){if(r=r||16,(n=void 0===n?24:n)<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),o="",s=2;i===1/0;s*=2)i=Math.log(Math.pow(2,n/s))/Math.log(r)*s;var l=i-Math.floor(i);for(s=0;s<Math.floor(i);s++)o=Math.floor(Math.random()*r).toString(r)+o;l&&(c=Math.pow(r,l),o=Math.floor(Math.random()*c).toString(r)+o);var c=parseInt(o,r);return t&&t[o]||c!==1/0&&c>=Math.pow(2,n)?10<a?(x.warn("randstr failed uniqueness"),o):e(t,n,r,(a||0)+1):o},x.OptionControl=function(t,n){t=t||{};var r={optionList:[],_newoption:function(e){e[n]=t,r[e.name]=e,r.optionList.push(e)}};return r["_"+(n=n||"opt")]=t,r},x.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;for(var n,r,a,i=e.length,o=2*i,s=2*t-1,l=new Array(s),c=new Array(i),u=0;u<s;u++)l[u]=(1-Math.cos(Math.PI*(u+1)/t))/(2*t);for(u=0;u<i;u++){for(n=a=0;n<s;n++)(r=u+n+1-t)<-i?r-=o*Math.round(r/o):o<=r&&(r-=o*Math.floor(r/o)),r<0?r=-1-r:i<=r&&(r=o-1-r),a+=e[r]*l[n];c[u]=a}return c},x.syncOrAsync=function(e,t,n){var r;function a(){return x.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(a).then(void 0,x.promiseError);return n&&n(t)},x.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},x.noneOrAll=function(e,t,n){if(e){for(var r=!1,a=!0,i=0;i<n.length;i++)null!=e[n[i]]?r=!0:a=!1;if(r&&!a)for(i=0;i<n.length;i++)e[n[i]]=t[n[i]]}},x.mergeArray=function(e,t,n,r){var a="function"==typeof r;if(x.isArrayOrTypedArray(e))for(var i=Math.min(e.length,t.length),o=0;o<i;o++){var s=e[o];t[o][n]=a?r(s):s}},x.mergeArrayCastPositive=function(e,t,n){return x.mergeArray(e,t,n,function(e){e=+e;return isFinite(e)&&0<e?e:0})},x.fillArray=function(e,t,n,r){if(r=r||x.identity,x.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][n]=r(e[a])},x.castOption=function(e,t,n,r){r=r||x.identity;n=x.nestedProperty(e,n).get();return x.isArrayOrTypedArray(n)?Array.isArray(t)&&x.isArrayOrTypedArray(n[t[0]])?r(n[t[0]][t[1]]):r(n[t]):n},x.extractOption=function(e,t,n,r){if(n in e)return e[n];r=x.nestedProperty(t,r).get();return Array.isArray(r)?void 0:r},x.tagSelected=function(e,t,n){var r,a=t.selectedpoints,t=t._indexToPoints;t&&(r=c(t));for(var i,o=0;o<a.length;o++){var s,l=a[o];(x.isIndex(l)||x.isArrayOrTypedArray(l)&&x.isIndex(l[0])&&x.isIndex(l[1]))&&(l=r?r[l]:l,s=n?n[l]:l,void 0!==(i=s)&&i<e.length&&(e[s].selected=1))}},x.selIndices2selPoints=function(e){var t=e.selectedpoints,e=e._indexToPoints;if(e){for(var n=c(e),r=[],a=0;a<t.length;a++){var i=t[a];x.isIndex(i)&&(i=n[i],x.isIndex(i)&&r.push(i))}return r}return t},x.getTargetArray=function(e,t){t=t.target;if("string"==typeof t&&t){e=x.nestedProperty(e,t).get();return!!Array.isArray(e)&&e}return!!Array.isArray(t)&&t},x.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});for(var r,a,i=Object.keys(e),o=0;o<i.length;o++)a=e[r=i[o]],"_"!==r.charAt(0)&&"function"!=typeof a&&("module"===r?n[r]=a:Array.isArray(a)?n[r]="colorscale"===r?a.slice():a.slice(0,3):x.isTypedArray(a)?n[r]=a.subarray(0,3):n[r]=a&&"object"==typeof a?x.minExtend(e[r],t[r]):a);for(i=Object.keys(t),o=0;o<i.length;o++)"object"==typeof(a=t[r=i[o]])&&r in n&&"object"==typeof n[r]||(n[r]=a);return n},x.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},x.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},x.isIE=function(){return void 0!==window.navigator.msSaveBlob};var l=/Version\/[\d\.]+.*Safari/;x.isSafari=function(){return l.test(window.navigator.userAgent)};var u=/iPad|iPhone|iPod/;x.isIOS=function(){return u.test(window.navigator.userAgent)};var d=/Firefox\/(\d+)\.\d+/;x.getFirefoxVersion=function(){var e=d.exec(window.navigator.userAgent);if(e&&2===e.length){e=parseInt(e[1]);if(!isNaN(e))return e}return null},x.isD3Selection=function(e){return e instanceof y.selection},x.ensureSingle=function(e,t,n,r){var a=e.select(t+(n?"."+n:""));if(a.size())return a;t=e.append(t);return n&&t.classed(n,!0),r&&t.call(r),t},x.ensureSingleById=function(e,t,n,r){var a=e.select(t+"#"+n);if(a.size())return a;n=e.append(t).attr("id",n);return r&&n.call(r),n},x.objectFromPath=function(e,t){for(var n=e.split("."),e=s={},r=0;r<n.length;r++)var a,i=n[r],o=n[r].match(/(.*)\[([0-9]+)\]/),s=o?(i=o[1],a=o[2],s=s[i]=[],r===n.length-1?s[a]=t:s[a]={},s[a]):(r===n.length-1?s[i]=t:s[i]={},s[i]);return e};var f=/^([^\[\.]+)\.(.+)?/,p=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;x.expandObjectPaths=function(e){var t,n,r,a,i,o;if("object"==typeof e&&!Array.isArray(e))for(t in e)e.hasOwnProperty(t)&&((i=t.match(f))?(r=e[t],n=i[1],delete e[t],e[n]=x.extendDeepNoArrays(e[n]||{},x.objectFromPath(t,x.expandObjectPaths(r))[n])):(i=t.match(p))?(r=e[t],n=i[1],a=parseInt(i[2]),delete e[t],e[n]=e[n]||[],"."===i[3]?(o=i[4],i=e[n][a]=e[n][a]||{},x.extendDeepNoArrays(i,x.objectFromPath(o,x.expandObjectPaths(r)))):e[n][a]=x.expandObjectPaths(r)):e[t]=x.expandObjectPaths(e[t]));return e},x.numSeparate=function(e,t,n){if(n=n||!1,"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,a=t.charAt(0),i=t.charAt(1),e=e.split("."),o=e[0],a=1<e.length?a+e[1]:"";if(i&&(1<e.length||4<o.length||n))for(;r.test(o);)o=o.replace(r,"$1"+i+"$2");return o+a},x.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var b=/^\w*$/;x.templateString=function(e,n){var r={};return e.replace(x.TEMPLATE_STRING_REGEX,function(e,t){t=b.test(t)?n[t]:(r[t]=r[t]||x.nestedProperty(n,t).get,r[t]());return x.isValidTextValue(t)?t:""})};var h={max:10,count:0,name:"hovertemplate"};x.hovertemplateString=function(){return g.apply(h,arguments)};var m={max:10,count:0,name:"texttemplate"};x.texttemplateString=function(){return g.apply(m,arguments)};var _=/^[:|\|]/;function g(e,f,p){var h=this,m=arguments;f=f||{};var g={};return e.replace(x.TEMPLATE_STRING_REGEX,function(e,t,n){var r,a,i="_xother"===t||"_yother"===t,o="_xother_"===t||"_yother_"===t,s="xother_"===t||"yother_"===t,l="xother"===t||"yother"===t||i||s||o,c=t;if((i||o)&&(c=c.substring(1)),(s||o)&&(c=c.substring(0,c.length-1)),l){if(void 0===(r=f[c]))return""}else for(var u,d=3;d<m.length;d++)if(u=m[d]){if(u.hasOwnProperty(c)){r=u[c];break}if(b.test(c)||(r=x.nestedProperty(u,c).get(),(r=g[c]||x.nestedProperty(u,c).get())&&(g[c]=r)),void 0!==r)break}return void 0===r&&h?(h.count<h.max&&(x.warn("Variable '"+c+"' in "+h.name+" could not be found!"),r=e),h.count===h.max&&x.warn("Too many "+h.name+" warnings - additional warnings will be suppressed"),h.count++,e):(n?(":"===n[0]&&(r=(a=p?p.numberFormat:y.format)(n.replace(_,""))(r)),"|"===n[0]&&(a=p?p.timeFormat:v,e=x.dateTime2ms(r),r=x.formatDate(e,n.replace(_,""),!1,a))):f.hasOwnProperty(a=c+"Label")&&(r=f[a]),l&&(r="("+r+")",(i||o)&&(r=" "+r),(s||o)&&(r+=" ")),r)})}x.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,a=0,i=0;i<n;i++){var o=e.charCodeAt(i)||0,s=t.charCodeAt(i)||0,l=48<=o&&o<=57,c=48<=s&&s<=57;if(l&&(r=10*r+o-48),c&&(a=10*a+s-48),!l||!c){if(r!==a)return r-a;if(o!==s)return o-s}}return a-r};var w=2e9;x.seedPseudoRandom=function(){w=2e9},x.pseudoRandom=function(){var e=w;return w=(69069*w+1)%4294967296,Math.abs(w-e)<429496729?x.pseudoRandom():w/4294967296},x.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},a=x.extractOption(e,t,"htx","hovertext");if(x.isValidTextValue(a))return r(a);t=x.extractOption(e,t,"tx","text");return x.isValidTextValue(t)?r(t):void 0},x.isValidTextValue=function(e){return e||0===e},x.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},x.isHidden=function(e){e=window.getComputedStyle(e).display;return!e||"none"===e},x.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},x.strRotate=function(e){return e?"rotate("+e+")":""},x.strScale=function(e){return 1!==e?"scale("+e+")":""},x.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,a=e.targetX,i=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,e=e.scale;return e?1<e&&(e=1):e=0,x.strTranslate(a-e*(n+o),i-e*(r+s))+x.strScale(e)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},x.ensureUniformFontSize=function(e,t){var n=x.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},x.join2=function(e,t,n){var r=e.length;return 1<r?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},x.bigFont=function(e){return Math.round(1.2*e)};var e=x.getFirefoxVersion(),T=null!==e&&e<86;x.getPositionFromD3Event=function(){return T?[y.event.layerX,y.event.layerY]:[y.event.offsetX,y.event.offsetY]}},{"../constants/numerical":265,"./anchor_utils":269,"./angles":270,"./array":271,"./clean_number":272,"./clear_responsive":274,"./coerce":275,"./dates":276,"./dom":277,"./extend":279,"./filter_unique":280,"./filter_visible":281,"./geometry2d":282,"./identity":283,"./increment":284,"./is_plain_object":286,"./keyed_container":287,"./localize":288,"./loggers":289,"./make_trace_groups":290,"./matrix":291,"./mod":292,"./nested_property":293,"./noop":294,"./notifier":295,"./preserve_drawing_buffer":298,"./push_unique":299,"./regex":301,"./relative_attr":302,"./relink_private":303,"./search":304,"./stats":306,"./throttle":308,"./to_log_range":309,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],286:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},{}],287:[function(e,t,n){"use strict";var h=e("./nested_property"),a=/^\w*$/;t.exports=function(e,i,o,s){var r,l;o=o||"name",s=s||"value";var c={},u=i&&i.length?(l=h(e,i)).get():e;i=i||"";var d={};if(u)for(r=0;r<u.length;r++)d[u[r][o]]=r;var f=a.test(s),p={set:function(e,t){var n=null===t?4:0;if(!u){if(!l||4===n)return;u=[],l.set(u)}var r=d[e];if(void 0===r){if(4===n)return;n|=3,r=u.length,d[e]=r}else t!==(f?u[r][s]:h(u[r],s).get())&&(n|=2);var a=u[r]=u[r]||{};return a[o]=e,f?a[s]=t:h(a,s).set(t),null!==t&&(n&=-5),c[r]=c[r]|n,p},get:function(e){if(u){e=d[e];return void 0!==e?f?u[e][s]:h(u[e],s).get():void 0}},rename:function(e,t){var n=d[e];return void 0===n||(c[n]=1|c[n],d[t]=n,delete d[e],u[n][o]=t),p},remove:function(e){var t=d[e];if(void 0===t)return p;var n=u[t];if(2<Object.keys(n).length)return c[t]=2|c[t],p.set(e,null);if(f){for(r=t;r<u.length;r++)c[r]=3|c[r];for(r=t;r<u.length;r++)d[u[r][o]]--;u.splice(t,1),delete d[e]}else h(n,s).set(null),c[t]=6|c[t];return p},constructUpdate:function(){for(var e,t,n={},r=Object.keys(c),a=0;a<r.length;a++)t=r[a],e=i+"["+t+"]",u[t]?(1&c[t]&&(n[e+"."+o]=u[t][o]),2&c[t]&&(n[e+"."+s]=f?4&c[t]?null:u[t][s]:4&c[t]?null:h(u[t],s).get())):n[e]=null;return n}};return p}},{"./nested_property":293}],288:[function(e,t,n){"use strict";var l=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var a=e._context.locales,i=0;i<2;i++){var o=(a[n]||{}).dictionary;if(o){o=o[t];if(o)return o}a=l.localeRegistry}var s=n.split("-")[0];if(s===n)break;n=s}return t}},{"../registry":373}],289:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config").dfltConfig,a=e("./notifier"),t=t.exports={};t.log=function(){if(1<r.logging){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(1<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"long")}},t.warn=function(){if(0<r.logging){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}},t.error=function(){if(0<r.logging){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":318,"./notifier":295}],290:[function(e,t,n){"use strict";var a=e("@plotly/d3");t.exports=function(e,t,n){t=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});t.exit().remove(),t.enter().append("g").attr("class",n),t.order();var r=e.classed("rangeplot")?"nodeRangePlot3":"node3";return t.each(function(e){e[0][r]=a.select(this)}),t}},{"@plotly/d3":20}],291:[function(e,t,o){"use strict";var n=e("gl-mat4");o.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},o.transposeRagged=function(e){for(var t,n=0,r=e.length,a=0;a<r;a++)n=Math.max(n,e[a].length);var i=new Array(n);for(a=0;a<n;a++)for(i[a]=new Array(r),t=0;t<r;t++)i[a][t]=e[t][a];return i},o.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n=e.length;if(e[0].length)for(a=new Array(n),i=0;i<n;i++)a[i]=o.dot(e[i],t);else if(t[0].length)for(var r=o.transposeRagged(t),a=new Array(r.length),i=0;i<r.length;i++)a[i]=o.dot(e,r[i]);else for(i=a=0;i<n;i++)a+=e[i]*t[i];return a},o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},o.rotationMatrix=function(e){e=e*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},o.rotationXYMatrix=function(e,t,n){return o.dot(o.dot(o.translationMatrix(t,n),o.rotationMatrix(e)),o.translationMatrix(-t,-n))},o.apply3DTransform=function(t){return function(){var e=arguments,e=1===arguments.length?e[0]:[e[0],e[1],e[2]||0];return o.dot(t,[e[0],e[1],e[2],1]).slice(0,3)}},o.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);e=1===arguments.length?e[0]:[e[0],e[1]];return o.dot(t,[e[0],e[1],1]).slice(0,2)}},o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}},o.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(e){var t=[];return n.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":47}],292:[function(e,t,n){"use strict";t.exports={mod:function(e,t){return(e%=t)<0?e+t:e},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],293:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("./array").isArrayOrTypedArray;t.exports=function(e,t){if(u(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,a,i=0,o=t.split(".");i<o.length;){if(n=String(o[i]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[i]=n[1];else{if(0!==i)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),a=0;a<r.length;a++)i++,o.splice(i,0,Number(r[a]))}i++}return"object"!=typeof e?{set:function(){throw"bad container"},get:function(){},astr:t,parts:o,obj:e}:{set:p(e,o,t),get:function o(s,l){return function(){var e,t,n,r,a,i=s;for(r=0;r<l.length-1;r++){if(-1===(e=l[r])){for(t=!0,n=[],a=0;a<i.length;a++)n[a]=o(i[a],l.slice(r+1))(),n[a]!==n[0]&&(t=!1);return t?n[0]:n}if("number"==typeof e&&!d(i))return;if("object"!=typeof(i=i[e])||null===i)return}if("object"==typeof i&&null!==i&&null!==(n=i[l[r]]))return n}}(e,o),astr:t,parts:o,obj:e}};var r=/(^|\.)args\[/;function f(e,t){return void 0===e||null===e&&!t.match(r)}function p(s,l,c){return function(e){for(var t,n=s,r="",a=[[s,r]],i=f(e,c),o=0;o<l.length-1;o++){if("number"==typeof(t=l[o])&&!d(n))throw"array index but container is not an array";if(-1===t){if(i=!function(e,t,n,r){var a,i=d(n),o=!0,s=n,l=r.replace("-1",0),c=!i&&f(n,l),u=t[0];for(a=0;a<e.length;a++)l=r.replace("-1",a),i&&(s=n[a%n.length],c=f(s,l)),c&&(o=!1),h(e,a,u,c)&&p(e[a],t,r.replace("-1",a))(s);return o}(n,l.slice(o+1),e,c))break;return}if(!h(n,t,l[o+1],i))break;if("object"!=typeof(n=n[t])||null===n)throw"container is not an object";r=function(e,t){var n=t;u(t)?n="["+t+"]":e&&(n="."+t);return e+n}(r,t),a.push([n,r])}if(i){if(o===l.length-1&&(delete n[l[o]],Array.isArray(n)&&+l[o]==n.length-1))for(;n.length&&void 0===n[n.length-1];)n.pop()}else n[l[o]]=e}}function h(e,t,n,r){if(void 0===e[t]){if(r)return;e[t]="number"==typeof n?[]:{}}return 1}},{"./array":271,"fast-isnumeric":31}],294:[function(e,t,n){"use strict";t.exports=function(){}},{}],295:[function(e,t,n){"use strict";var l=e("@plotly/d3"),r=e("fast-isnumeric"),a=[];t.exports=function(e,i){var o;function s(e){e.duration(700).style("opacity",0).each("end",function(e){e=a.indexOf(e);-1!==e&&a.splice(e,1),l.select(this).remove()})}-1===a.indexOf(e)&&(a.push(e),o=1e3,r(i)?o=i:"long"===i&&(o=3e3),(e=l.select("body").selectAll(".plotly-notifier").data([0])).enter().append("div").classed("plotly-notifier",!0),e.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(s)});for(var n=t.append("p"),r=e.split(/<br\s*\/?>/g),a=0;a<r.length;a++)a&&n.append("br"),n.append("span").text(r[a]);"stick"===i?t.transition().duration(350).style("opacity",1):t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}))}},{"@plotly/d3":20,"fast-isnumeric":31}],296:[function(e,t,n){"use strict";var o=e("./setcursor"),s="data-savedcursor";t.exports=function(e,t){var n=e.attr(s);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),a=0;a<r.length;a++){var i=r[a];0===i.indexOf("cursor-")&&e.attr(s,i.substr(7)).classed(i,!1)}e.attr(s)||e.attr(s,"!!")}o(e,t)}else n&&(e.attr(s,null),"!!"===n?o(e):o(e,n))}},{"./setcursor":305}],297:[function(e,t,n){"use strict";var f=e("./matrix").dot,y=e("../constants/numerical").BADNUM,c=t.exports={};c.tester=function(e){var f=e.slice(),p=f[0][0],h=p,m=f[0][1],g=m;for(f.push(f[0]),r=1;r<f.length;r++)p=Math.min(p,f[r][0]),h=Math.max(h,f[r][0]),m=Math.min(m,f[r][1]),g=Math.max(g,f[r][1]);var a,e=!1;5===f.length&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(e=!0,a=function(e){return e[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(e=!0,a=function(e){return e[1]===f[0][1]}));for(var t=!0,n=f[0],r=1;r<f.length;r++)if(n[0]!==f[r][0]||n[1]!==f[r][1]){t=!1;break}return{xmin:p,xmax:h,ymin:m,ymax:g,pts:f,contains:e?function(e,t){var n=e[0],r=e[1];return!(n===y||n<p||h<n||r===y||r<m||g<r)&&(!t||!a(e))}:function(e,t){var n=e[0],r=e[1];if(n===y||n<p||h<n||r===y||r<m||g<r)return!1;for(var a,i,o,s=f.length,l=f[0][0],c=f[0][1],u=0,d=1;d<s;d++)if(o=l,a=c,l=f[d][0],c=f[d][1],!(n<(i=Math.min(o,l))||n>Math.max(o,l)||r>Math.max(a,c)))if(r<Math.min(a,c))n!==i&&u++;else{if(r===(o=l===o?r:a+(n-o)*(c-a)/(l-o)))return 1!==d||!t;r<=o&&n!==i&&u++}return u%2==1},isRect:e,degenerate:t}},c.isSegmentBent=function(e,t,n,r){for(var a,i,o=e[t],s=[e[n][0]-o[0],e[n][1]-o[1]],l=f(s,s),c=Math.sqrt(l),u=[-s[1]/c,s[0]/c],d=t+1;d<n;d++)if(a=[e[d][0]-o[0],e[d][1]-o[1]],(i=f(a,s))<0||l<i||Math.abs(f(a,u))>r)return!0;return!1},c.filter=function(a,i){var o=[a[0]],s=0,l=0;function e(e){a.push(e);var t=o.length,n=s;o.splice(l+1);for(var r=n+1;r<a.length;r++)r!==a.length-1&&!c.isSegmentBent(a,n,r+1,i)||(o.push(a[r]),o.length<t-2&&(s=r,l=o.length-1),n=r)}return 1<a.length&&e(a.pop()),{addPt:e,raw:a,filtered:o}}},{"../constants/numerical":265,"./matrix":291}],298:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),s=e("is-mobile");t.exports=function(e){var t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}();if("string"!=typeof t)return!0;e=s({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!e)for(var n=t.split(" "),r=1;r<n.length;r++)if(-1!==n[r].indexOf("Safari"))for(var a=r-1;-1<a;a--){var i=n[a];if("Version/"===i.substr(0,8)){i=i.substr(8).split(".")[0];if(13<=(i=o(i)?+i:i))return!0}}return e}},{"fast-isnumeric":31,"is-mobile":67}],299:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],300:[function(e,t,n){"use strict";var i=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;var r={add:function(e,t,n,r,a){var i,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),e.undoQueue.index+=1):i=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(t),i.undo.args.unshift(n),i.redo.calls.push(r),i.redo.args.push(a)),e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)r.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)r.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};r.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],a=0;a<t.length;a++)n=t[a],r[a]=n!==e&&"object"==typeof n?Array.isArray(n)?i.extendDeep([],n):i.extendDeepAll({},n):n;return r}(e,n),t.apply(null,n)},t.exports=r},{"../lib":285,"../plot_api/plot_config":318}],301:[function(e,t,n){"use strict";n.counter=function(e,t,n,r){n=(t||"")+(n?"":"$"),r=!1===r?"":"^";return"xy"===e?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(r+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],302:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,a=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(a))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],303:[function(e,t,n){"use strict";var l=e("./array").isArrayOrTypedArray,c=e("./is_plain_object");t.exports=function e(t,n){for(var r in n){var a=n[r],i=t[r];if(i!==a)if("_"===r.charAt(0)||"function"==typeof a)r in t||(t[r]=a);else if(l(a)&&l(i)&&c(a[0])){if("customdata"!==r&&"ids"!==r)for(var o=Math.min(a.length,i.length),s=0;s<o;s++)i[s]!==a[s]&&c(a[s])&&c(i[s])&&e(i[s],a[s])}else c(a)&&c(i)&&(e(i,a),Object.keys(i).length||delete t[r])}}},{"./array":271,"./is_plain_object":286}],304:[function(e,t,u){"use strict";var c=e("fast-isnumeric"),d=e("./loggers"),o=e("./identity"),f=e("../constants/numerical").BADNUM;function p(e,t){return e<t}function h(e,t){return e<=t}function m(e,t){return t<e}function g(e,t){return t<=e}u.findBin=function(e,t,n){if(c(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,a=0,i=t.length,o=0,s=1<i?(t[i-1]-t[0])/(i-1):1,l=0<=s?n?p:h:n?g:m;for(e+=1e-9*s*(n?-1:1)*(0<=s?1:-1);a<i&&o++<100;)l(t[r=Math.floor((a+i)/2)],e)?a=r+1:i=r;return 90<o&&d.log("Long binary search..."),a-1},u.sorterAsc=function(e,t){return e-t},u.sorterDes=function(e,t){return t-e},u.distinctVals=function(e){var t,n=e.slice();for(n.sort(u.sorterAsc),t=n.length-1;-1<t&&n[t]===f;t--);for(var r,a=n[t]-n[0]||1,i=a/(t||1)/1e4,o=[],s=0;s<=t;s++){var l=n[s],c=l-r;void 0===r?(o.push(l),r=l):i<c&&(a=Math.min(a,c),o.push(l),r=l)}return{vals:o,minDiff:a}},u.roundUp=function(e,t,n){for(var r,a=0,i=t.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;a<i&&o++<100;)t[r=c((a+i)/2)]<=e?a=r+s:i=r-l;return t[a]},u.sort=function(e,t){for(var n=0,r=0,a=1;a<e.length;a++){var i=t(e[a],e[a-1]);if(i<0?n=1:0<i&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},u.findIndexOfMin=function(e,t){t=t||o;for(var n,r=1/0,a=0;a<e.length;a++){var i=t(e[a]);i<r&&(r=i,n=a)}return n}},{"../constants/numerical":265,"./identity":283,"./loggers":289,"fast-isnumeric":31}],305:[function(e,t,n){"use strict";t.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],306:[function(e,t,o){"use strict";var s=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,n,r){var a,i;if((!r||r>n.length)&&(r=n.length),s(t)||(t=!1),l(n[0])){for(i=new Array(r),a=0;a<r;a++)i[a]=o.aggNums(e,t,n[a]);n=i}for(a=0;a<r;a++)s(t)?s(n[a])&&(t=e(+t,+n[a])):t=n[a];return t},o.len=function(e){return o.aggNums(function(e){return e+1},0,e)},o.mean=function(e,t){return t=t||o.len(e),o.aggNums(function(e,t){return e+t},0,e)/t},o.midRange=function(e){if(void 0!==e&&0!==e.length)return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2},o.variance=function(e,t,n){return t=t||o.len(e),s(n)||(n=o.mean(e,t)),o.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},o.stdev=function(e,t,n){return Math.sqrt(o.variance(e,t,n))},o.median=function(e){e=e.slice().sort();return o.interp(e,.5)},o.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./array":271,"fast-isnumeric":31}],307:[function(e,t,n){"use strict";var g=e("@plotly/d3"),y=e("../lib"),v=y.strTranslate,x=e("../constants/xmlns_namespaces"),b=e("../constants/alignment").LINE_SPACING;function _(e,t){return e.node().getBoundingClientRect()[t]}var r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(c,e,u){var d=c.text(),f=!c.attr("data-notex")&&"undefined"!=typeof MathJax&&d.match(r),p=g.select(c.node().parentNode);if(!p.empty()){var h=c.attr("class")?c.attr("class").split(" ")[0]:"text";return h+="-math",p.selectAll("svg."+h).remove(),p.selectAll("g."+h+"-group").remove(),c.style("display",null).attr({"data-unformatted":d,"data-math":"N"}),f?(e&&e._promises||[]).push(new Promise(function(o){c.style("display","none");var n,t,r,a,e,i,s,l=parseInt(c.node().style.fontSize,10);n=f[2],t={fontSize:l},r=function(e,t,n){p.selectAll("svg."+h).remove(),p.selectAll("g."+h+"-group").remove();var r=e&&e.select("svg");if(!r||!r.node())return m(),void o();var a=p.append("g").classed(h+"-group",!0).attr({"pointer-events":"none","data-unformatted":d,"data-math":"Y"});a.node().appendChild(r.node()),t&&t.node()&&r.node().insertBefore(t.node().cloneNode(!0),r.node().firstChild),r.attr({class:h,height:n.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var i=c.node().style.fill||"black",e=r.select("g");e.attr({fill:i,stroke:i});t=_(e,"width"),n=_(e,"height"),i=+c.attr("x")-t*{start:0,middle:.5,end:1}[c.attr("text-anchor")||"start"],e=-(l||_(c,"height"))/4;"y"===h[0]?(a.attr({transform:"rotate("+[-90,+c.attr("x"),+c.attr("y")]+")"+v(-t/2,e-n/2)}),r.attr({x:+c.attr("x"),y:+c.attr("y")})):"l"===h[0]?r.attr({x:c.attr("x"),y:e-n/2}):"a"===h[0]&&0!==h.indexOf("atitle")?r.attr({x:0,y:e}):r.attr({x:i,y:+c.attr("y")+e-n/2}),u&&u.call(c,a),o(a)},MathJax.Hub.Queue(function(){return e=y.extendDeepAll({},MathJax.Hub.config),i=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+y.randstr({},64);return s=g.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(n.replace(w,"\\lt ").replace(T,"\\gt ")),MathJax.Hub.Typeset(s.node())},function(){var e,t=g.select("body").select("#MathJax_SVG_glyphs");if(s.select(".MathJax_SVG").empty()||!s.select("svg").node()?(y.log("There was an error in the tex syntax.",n),r()):(e=s.select("svg").node().getBoundingClientRect(),r(s.select(".MathJax_SVG"),t,e)),s.remove(),"SVG"!==a)return MathJax.Hub.setRenderer(a)},function(){return void 0!==i&&(MathJax.Hub.processSectionDelay=i),MathJax.Hub.Config(e)})})):m(),c}function m(){p.empty()||(h=c.attr("class")+"-math",p.select("svg."+h).remove()),c.text("").style("white-space","pre"),function(r,n){n=n.replace(L," ");var s,e=!1,l=[],a=-1;function t(){a++;var e=document.createElementNS(x.svg,"tspan");g.select(e).attr({class:"line",dy:a*b+"em"}),r.appendChild(e);var t=l;if(l=[{node:s=e}],1<t.length)for(var n=1;n<t.length;n++)i(t[n])}function i(e){var t,n,r=e.type,a={};"a"===r?(i="a",t=e.target,n=e.href,o=e.popup,n&&(a={"xlink:xlink:show":"_blank"===t||"_"!==t.charAt(0)?"new":"replace",target:t,"xlink:xlink:href":n},o&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'))):i="tspan",e.style&&(a.style=e.style);var i,o=document.createElementNS(x.svg,i);"sup"===r||"sub"===r?(c(s,S),s.appendChild(o),c(i=document.createElementNS(x.svg,"tspan"),S),g.select(i).attr("dy",A[r]),a.dy=k[r],s.appendChild(o),s.appendChild(i)):s.appendChild(o),g.select(o).attr(a),s=e.node=o,l.push(e)}function c(e,t){e.appendChild(document.createTextNode(t))}O.test(n)?t():l=[{node:s=r}];for(var o=n.split(C),u=0;u<o.length;u++){var d,f=o[u],p=f.match(D),h=p&&p[2].toLowerCase(),m=M[h];"br"===h?t():void 0===m?c(s,j(f)):p[1]?function(e){var t;1!==l.length?(e!==(t=l.pop()).type&&y.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),s=l[l.length-1].node):y.log("Ignoring unexpected end tag </"+e+">.",n)}(h):(d=p[4],f={type:h},(p=z(d,P))?(p=p.replace(F,"$1 fill:"),m&&(p+=";"+m)):m&&(p=m),p&&(f.style=p),"a"===h&&(e=!0,(p=z(d,I))&&((h=document.createElement("a")).href=p,-1!==E.indexOf(h.protocol)&&(f.href=encodeURI(decodeURI(p)),f.target=z(d,R)||"_blank",f.popup=z(d,N)))),i(f))}return e}(c.node(),d)&&c.style("pointer-events","all"),n.positionText(c),u&&u.call(c)}};var w=/(<|&lt;|&#60;)/g,T=/(>|&gt;|&#62;)/g;var M={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},k={sub:"0.3em",sup:"-0.6em"},A={sub:"-0.21em",sup:"0.42em"},S="",E=["http:","https:","mailto:","",void 0,":"],L=n.NEWLINES=/(\r\n?|\n)/g,C=/(<[^<>]*>)/,D=/<(\/?)([^ >]*)(\s+(.*))?>/i,O=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var P=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,I=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,R=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,N=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function z(e,t){if(!e)return null;t=e.match(t),t=t&&(t[3]||t[4]);return t&&j(t)}var F=/(^|;)\s*color:/;n.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],a="...".length,i=e.split(C),o=[],s="",l=0,c=0;c<i.length;c++){var u=i[c],d=u.match(D),f=d&&d[2].toLowerCase();if(f)-1!==r.indexOf(f)&&(o.push(u),s=f);else{d=u.length;if(l+d<n)o.push(u),l+=d;else if(l<n){f=n-l;s&&("br"!==s||f<=a||d<=a)&&o.pop(),a<n?o.push(u.substr(0,f-a)+"..."):o.push(u.substr(0,f));break}s=""}}return o.join("")};var a={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},i=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function j(e){return e.replace(i,function(e,t){t="#"===t.charAt(0)?function(e){if(!(1114111<e)){var t=String.fromCodePoint;if(t)return t(e);t=String.fromCharCode;return e<=65535?t(e):t(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):a[t];return t||e})}function u(e,t,r){var a,n=r.horizontalAlign,i=r.verticalAlign||"top",o=e.node().getBoundingClientRect(),s=t.node().getBoundingClientRect(),l="bottom"===i?function(){return o.bottom-a.height}:"middle"===i?function(){return o.top+(o.height-a.height)/2}:function(){return o.top},c="right"===n?function(){return o.right-a.width}:"center"===n?function(){return o.left+(o.width-a.width)/2}:function(){return o.left};return function(){a=this.node().getBoundingClientRect();var e=c()-s.left,t=l()-s.top,n=r.gd||{};return r.gd&&(n._fullLayout._calcInverseTransform(n),e=(n=y.apply3DTransform(n._fullLayout._invTransform)(e,t))[0],t=n[1]),this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}n.convertEntities=j,n.sanitizeHTML=function(e){e=e.replace(L," ");for(var t=document.createElement("p"),n=t,r=[],a=e.split(C),i=0;i<a.length;i++){var o,s,l,c=a[i],u=c.match(D),d=u&&u[2].toLowerCase();d in M?u[1]?r.length&&(n=r.pop()):(o=(s=z(l=u[4],P))?{style:s}:{},"a"!==d||(u=z(l,I))&&((s=document.createElement("a")).href=u,-1!==E.indexOf(s.protocol)&&(o.href=encodeURI(decodeURI(u)),(l=z(l,R))&&(o.target=l))),d=document.createElement(d),n.appendChild(d),g.select(d).attr(o),r.push(n=d)):n.appendChild(document.createTextNode(j(c)))}return t.innerHTML},n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,a,i){return e.each(function(){var n=g.select(this);function e(e,t){return void 0===t?null===(t=n.attr(e))&&(n.attr(e,0),t=0):n.attr(e,t),t}var t=e("x",a),r=e("y",i);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:t,y:r})})};n.makeTextShadow=function(e){var t="1px ",n="1px ",r="1px ";return t+n+r+e+", -"+t+"-"+n+r+e+", "+t+"-"+n+r+e+", -"+t+n+r+e},n.makeEditable=function(i,o){var s=o.gd,e=o.delegate,l=g.dispatch("edit","input","cancel"),t=e||i;if(i.style({"pointer-events":e?"none":"all"}),1!==i.size())throw new Error("boo");function n(){!function(){var e=g.select(s).select(".svg-container"),t=e.append("div"),n=i.node().style,r=parseFloat(n.fontSize||12),a=o.text;void 0===a&&(a=i.attr("data-unformatted"));t.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:o.fill||n.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(a).call(u(i,e,o)).on("blur",function(){s._editing=!1,i.text(this.textContent).style({opacity:1});var e=g.select(this).attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(i.node().parentNode).select(e).style({opacity:0});e=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),l.edit.call(i,e)}).on("focus",function(){var e=this;s._editing=!0,g.select(document).on("mouseup",function(){return g.event.target!==e&&void(document.activeElement===t.node()&&t.node().blur())})}).on("keyup",function(){27===g.event.which?(s._editing=!1,i.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(i,this.textContent)):(l.input.call(i,this.textContent),g.select(this).call(u(i,e,o)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(c)}(),i.style({opacity:0});var e=t.attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(i.node().parentNode).select(e).style({opacity:0})}function c(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);e=window.getSelection();e.removeAllRanges(),e.addRange(n),t.focus()}return o.immediate?n():t.on("click",n),g.rebind(i,l,"on")}},{"../constants/alignment":260,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],308:[function(e,t,n){"use strict";var s={};function l(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var r=s[e],a=Date.now();if(!r){for(var i in s)s[i].ts<a-6e4&&delete s[i];r=s[e]={ts:0,timer:null}}function o(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),a>r.ts+t?o():r.timer=setTimeout(function(){o(),r.timer=null},t)},n.done=function(e){var n=s[e];return n&&n.timer?new Promise(function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)l(s[e]),delete s[e];else for(var t in s)n.clear(t)}},{}],309:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(0<e)return Math.log(e)/Math.LN10;e=Math.log(Math.min(t[0],t[1]))/Math.LN10;return e=!r(e)?Math.log(Math.max(t[0],t[1]))/Math.LN10-6:e}},{"fast-isnumeric":31}],310:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],311:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],312:[function(e,t,n){"use strict";var s=e("../registry");t.exports=function(e){for(var t,n,r=s.layoutArrayContainers,a=s.layoutArrayRegexes,i=e.split("[")[0],o=0;o<a.length;o++)if((n=e.match(a[o]))&&0===n.index){t=n[0];break}if(!(t=t||r[r.indexOf(i)]))return!1;i=e.substr(t.length);return i?!!(n=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":373}],313:[function(e,t,n){"use strict";var r=e("../lib"),s=r.extendFlat,o=r.isPlainObject,e={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=e.flags.slice().concat(["fullReplot"]),i=r.flags.slice().concat("layoutReplot");function l(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function c(e,t,n){var r,a=s({},e);for(r in a){var i=a[r];o(i)&&(a[r]=function e(t,n,r,a){{if(t.valType){var i=s({},t);if(i.editType=n,Array.isArray(t.items)){i.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)i.items[o]=e(t.items[o],n,"from-root")}return i}return c(t,n,"_"===a.charAt(0)?"nested":"from-root")}}(i,t,0,r))}return"from-root"===n&&(a.editType=t),a}t.exports={traces:e,layout:r,traceFlags:function(){return l(a)},layoutFlags:function(){return l(i)},update:function(e,t){t=t.editType;if(t&&"none"!==t)for(var n=t.split("+"),r=0;r<n.length;r++)e[n[r]]=!0},overrideAll:c}},{"../lib":285}],314:[function(e,t,w){"use strict";var l=e("fast-isnumeric"),T=e("gl-mat4/fromQuat"),m=e("../registry"),M=e("../lib"),k=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),A=e("../components/color"),S=n.cleanId,c=n.getFromTrace,g=m.traceIs;function E(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=S(n,r,!0))}function L(a){function e(e,t){var n=a[e],r=a.title&&a.title[t];n&&!r&&(a.title||(a.title={}),a.title[t]=a[e],delete a[e])}a&&("string"!=typeof a.title&&"number"!=typeof a.title||(a.title={text:a.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function y(e){if(!M.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function v(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function C(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}w.clearPromiseQueue=function(e){Array.isArray(e._promises)&&0<e._promises.length&&M.log("Clearing previous rejected promises from queue."),e._promises=[]},w.cleanLayout=function(e){(e=e||{}).xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);for(var t=(k.subplotsRegistry.cartesian||{}).attrRegex,n=(k.subplotsRegistry.polar||{}).attrRegex,r=(k.subplotsRegistry.ternary||{}).attrRegex,a=(k.subplotsRegistry.gl3d||{}).attrRegex,i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];if(t&&t.test(s)){var l=e[s];l.anchor&&"free"!==l.anchor&&(l.anchor=S(l.anchor)),l.overlaying&&(l.overlaying=S(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,C(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick),L(l)}else if(n&&n.test(s))L(e[s].radialaxis);else if(r&&r.test(s)){var c=e[s];L(c.aaxis),L(c.baxis),L(c.caxis)}else if(a&&a.test(s)){l=e[s],c=l.cameraposition;if(Array.isArray(c)&&4===c[0].length){for(var s=c[0],u=c[1],d=c[2],f=T([],s),p=[],h=0;h<3;++h)p[h]=u[h]+d*f[2+4*h];l.camera={eye:{x:p[0],y:p[1],z:p[2]},center:{x:u[0],y:u[1],z:u[2]},up:{x:0,y:0,z:1}},delete l.cameraposition}L(l.xaxis),L(l.yaxis),L(l.zaxis)}}var m=Array.isArray(e.annotations)?e.annotations.length:0;for(o=0;o<m;o++){var g=e.annotations[o];M.isPlainObject(g)&&(g.ref&&("paper"===g.ref?(g.xref="paper",g.yref="paper"):"data"===g.ref&&(g.xref="x",g.yref="y"),delete g.ref),E(g,"xref"),E(g,"yref"))}var y=Array.isArray(e.shapes)?e.shapes.length:0;for(o=0;o<y;o++){var v=e.shapes[o];M.isPlainObject(v)&&(E(v,"xref"),E(v,"yref"))}var x=Array.isArray(e.images)?e.images.length:0;for(o=0;o<x;o++){var b=e.images[o];M.isPlainObject(b)&&(E(b,"xref"),E(b,"yref"))}var _=e.legend;return _&&(3<_.x?(_.x=1.02,_.xanchor="left"):_.x<-2&&(_.x=-.02,_.xanchor="right"),3<_.y?(_.y=1.02,_.yanchor="bottom"):_.y<-2&&(_.y=-.02,_.yanchor="top")),L(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),A.clean(e),e.template&&e.template.layout&&w.cleanLayout(e.template.layout),e},w.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y&&(o=A.defaults,r=n.error_y.color||(g(n,"bar")?A.defaultLine:o[t%o.length]),n.error_y.color=A.addOpacity(A.rgb(r),A.opacity(r)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!g(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",w.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&w.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=S(n.xaxis,"x")),n.yaxis&&(n.yaxis=S(n.yaxis,"y")),g(n,"gl3d")&&n.scene&&(n.scene=k.subplotsRegistry.gl3d.cleanId(n.scene)),!g(n,"pie-like")&&!g(n,"bar-like"))if(Array.isArray(n.textposition))for(l=0;l<n.textposition.length;l++)n.textposition[l]=v(n.textposition[l]);else n.textposition&&(n.textposition=v(n.textposition));var r,a,i,o=m.getModule(n);if(o&&o.colorbar&&((i=(a=o.colorbar.container)?n[a]:n)&&i.colorscale&&("YIGnBu"===i.colorscale&&(i.colorscale="YlGnBu"),"YIOrRd"===i.colorscale&&(i.colorscale="YlOrRd"))),"surface"===n.type&&M.isPlainObject(n.contours))for(var s=["x","y","z"],l=0;l<s.length;l++){var c=n.contours[s[l]];M.isPlainObject(c)&&(c.highlightColor&&(c.highlightcolor=c.highlightColor,delete c.highlightColor),c.highlightWidth&&(c.highlightwidth=c.highlightWidth,delete c.highlightWidth))}if("candlestick"!==n.type&&"ohlc"!==n.type||(r=!1!==(n.increasing||{}).showlegend,o=!1!==(n.decreasing||{}).showlegend,a=y(n.increasing),i=y(n.decreasing),!1!==a&&!1!==i?(o=function(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var a,i=Math.min(e.length,t.length);for(a=0;a<i&&e.charAt(a)===t.charAt(a);a++);return e.substr(0,a).trim()}(a,i,r,o))&&(n.name=o):!a&&!i||n.name||(n.name=a||i)),Array.isArray(n.transforms)){var u=n.transforms;for(l=0;l<u.length;l++){var d=u[l];if(M.isPlainObject(d))switch(d.type){case"filter":d.filtersrc&&(d.target=d.filtersrc,delete d.filtersrc),d.calendar&&(d.valuecalendar||(d.valuecalendar=d.calendar),delete d.calendar);break;case"groupby":if(d.styles=d.styles||d.style,d.styles&&!Array.isArray(d.styles)){var f=d.styles,p=Object.keys(f);d.styles=[];for(var h=0;h<p.length;h++)d.styles.push({target:p[h],value:f[p[h]]})}}}}C(n,"line")&&delete n.line,"marker"in n&&(C(n.marker,"line")&&delete n.marker.line,C(n,"marker")&&delete n.marker),A.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),L(n),n.colorbar&&L(n.colorbar),n.marker&&n.marker.colorbar&&L(n.marker.colorbar),n.line&&n.line.colorbar&&L(n.line.colorbar),n.aaxis&&L(n.aaxis),n.baxis&&L(n.baxis)}},w.swapXYData=function(e){var t;if(M.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y&&(t="copy_ystyle"in(t=e.error_y)?t.copy_ystyle:!(t.color||t.thickness||t.width),M.swapAttrs(e,["error_?.copy_ystyle"]),t&&M.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])),"string"==typeof e.hoverinfo){for(var n=e.hoverinfo.split("+"),r=0;r<n.length;r++)"x"===n[r]?n[r]="y":"y"===n[r]&&(n[r]="x");e.hoverinfo=n.join("+")}},w.coerceTraceIndices=function(e,t){if(l(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)M.isIndex(t[r],e.data.length)?n.push(t[r]):M.warn("trace index (",t[r],") is not a number or is out of bounds");return n}return t},w.manageArrayContainers=function(e,t,n){var r=e.obj,a=e.parts,i=a.length,o=a[i-1],s=l(o);s&&null===t?(i=a.slice(0,i-1).join("."),M.nestedProperty(r,i).get().splice(o,1)):(s&&void 0===e.get()&&void 0===e.get()&&(n[e.astr]=null),e.set(t))};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(e){var t=e.search(r);if(0<t)return e.substr(0,t)}w.hasParent=function(e,t){for(var n=a(t);n;){if(n in e)return!0;n=a(n)}return!1};var u=["x","y","z"];w.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var a=e._fullData[r],i=0;i<3;i++){var o=c(e,a,u[i]);if(o&&"log"!==o.type){var s=o._name,o=o._id.substr(1);if("scene"===o.substr(0,5)){if(void 0!==n[o])continue;s=o+"."+s}o=s+".type";void 0===n[s]&&void 0===n[o]&&M.nestedProperty(e.layout,o).set(null)}}}},{"../components/color":155,"../lib":285,"../plots/cartesian/axis_ids":335,"../plots/plots":366,"../registry":373,"fast-isnumeric":31,"gl-mat4/fromQuat":37}],315:[function(e,t,n){"use strict";var r=e("./plot_api");n._doPlot=r._doPlot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download");e=e("./template_api");n.makeTemplate=e.makeTemplate,n.validateTemplate=e.validateTemplate},{"../snapshot/download":375,"./plot_api":317,"./template_api":322,"./to_image":323,"./validate":324}],316:[function(e,t,n){"use strict";var r=e("../lib/is_plain_object"),A=e("../lib/noop"),S=e("../lib/loggers"),E=e("../lib/search").sorterAsc,L=e("../registry");n.containerArrayMatch=e("./container_array_match");var C=n.isAddVal=function(e){return"add"===e||r(e)},D=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,r,a){var i=t.astr,o=L.getComponentMethod(i,"supplyLayoutDefaults"),s=L.getComponentMethod(i,"draw"),l=L.getComponentMethod(i,"drawOne"),c=r.replot||r.recalc||o===A||s===A,u=e.layout,r=e._fullLayout;if(n[""]){1<Object.keys(n).length&&S.warn("Full array edits are incompatible with other edits",i);var d=n[""][""];if(D(d))t.set(null);else{if(!Array.isArray(d))return S.warn("Unrecognized full array edit value",i,d),!0;t.set(d)}return c?!1:(o(u,r),s(e),!0)}for(var f,p,h,m,g,y,v,x=Object.keys(n).map(Number).sort(E),d=t.get(),b=d||[],_=a(r,i).get(),w=[],T=-1,M=b.length,k=0;k<x.length;k++)if(h=n[p=x[k]],m=Object.keys(h),g=h[""],y=C(g),p<0||p>b.length-(y?0:1))S.warn("index out of range",i,p);else if(void 0!==g)1<m.length&&S.warn("Insertion & removal are incompatible with edits to the same index.",i,p),D(g)?w.push(p):y?(b.splice(p,0,g="add"===g?{}:g),_&&_.splice(p,0,{})):S.warn("Unrecognized full object edit value",i,p,g),-1===T&&(T=p);else for(f=0;f<m.length;f++)a(b[p],m[f],i+"["+p+"].").set(h[m[f]]);for(k=w.length-1;0<=k;k--)b.splice(w[k],1),_&&_.splice(w[k],1);if(b.length?d||t.set(b):t.set(null),c)return!1;if(o(u,r),l!==A){if(-1===T)v=x;else{for(M=Math.max(b.length,M),v=[],k=0;k<x.length&&!(T<=(p=x[k]));k++)v.push(p);for(k=T;k<M;k++)v.push(k)}for(k=0;k<v.length;k++)l(e,v[k])}else s(e);return!0}},{"../lib/is_plain_object":286,"../lib/loggers":289,"../lib/noop":294,"../lib/search":304,"../registry":373,"./container_array_match":312}],317:[function(e,t,M){"use strict";var h=e("@plotly/d3"),f=e("fast-isnumeric"),u=e("has-hover"),j=e("../lib"),H=j.nestedProperty,m=e("../lib/events"),_=e("../lib/queue"),B=e("../registry"),q=e("./plot_schema"),F=e("../plots/plots"),U=e("../plots/cartesian/axes"),g=e("../components/drawing"),n=e("../components/color"),y=e("../plots/cartesian/graph_interact").initInteractions,v=e("../constants/xmlns_namespaces"),r=e("../plots/cartesian/select").clearSelect,d=e("./plot_config").dfltConfig,Y=e("./manage_arrays"),V=e("./helpers"),k=e("./subroutines"),G=e("./edit_types"),W=e("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function A(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function p(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){j.error(e)}}function x(e,t){p(e,n.combine(t,"white"))}function S(e,t){var n;e._context||(e._context=j.extendDeep({},d),n=h.select("base"),e._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:"");var r,a,i=e._context;if(t){for(r=Object.keys(t),c=0;c<r.length;c++)"editable"!==(a=r[c])&&"edits"!==a&&a in i&&("setBackground"===a&&"opaque"===t[a]?i[a]=x:i[a]=t[a]);t.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var o=t.editable;if(void 0!==o)for(i.editable=o,r=Object.keys(i.edits),c=0;c<r.length;c++)i.edits[r[c]]=o;if(t.edits)for(r=Object.keys(t.edits),c=0;c<r.length;c++)(a=r[c])in i.edits&&(i.edits[a]=t.edits[a]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),"hover"!==i.displayModeBar||u||(i.displayModeBar=!0),"transparent"!==i.setBackground&&"function"==typeof i.setBackground||(i.setBackground=p),i._hasZeroHeight=i._hasZeroHeight||0===e.clientHeight,i._hasZeroWidth=i._hasZeroWidth||0===e.clientWidth;var e=i.scrollZoom,s=i._scrollZoom={};if(!0===e)s.cartesian=1,s.gl3d=1,s.geo=1,s.mapbox=1;else if("string"==typeof e)for(var l=e.split("+"),c=0;c<l.length;c++)s[l[c]]=1;else!1!==e&&(s.gl3d=1,s.geo=1,s.mapbox=1)}function b(e,t){for(var n,r=t+1,a=[],i=0;i<e.length;i++)(n=e[i])<0?a.push(r+n):a.push(n);return a}function T(e,t,n){for(var r,a=0;a<t.length;a++){if((r=t[a])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=e.data.length||r<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<t.indexOf(r,a+1)||0<=r&&-1<t.indexOf(-e.data.length+r)||r<0&&-1<t.indexOf(e.data.length+r))throw new Error("each index in "+n+" must be unique.")}}function E(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(T(e,t=!Array.isArray(t)?[t]:t,"currentIndices"),void 0!==(n=void 0!==n&&!Array.isArray(n)?[n]:n)&&T(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function i(e,t,n,r,a){!function(e,t,n,r){var a,i=j.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!j.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(a in T(e,n,"indices"),t){if(!Array.isArray(t[a])||t[a].length!==n.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in r)||!Array.isArray(r[a])||r[a].length!==t[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var i=function(e,t,n,r){var a,i,o,s,l,c=j.isPlainObject(r),u=[];for(l in n=b(n=!Array.isArray(n)?[n]:n,e.data.length-1),t)for(var d=0;d<n.length;d++){if(s=e.data[n[d]],a=(i=H(s,l)).get(),o=t[l][d],!j.isArrayOrTypedArray(o))throw new Error("attribute: "+l+" index: "+d+" must be an array");if(!j.isArrayOrTypedArray(a))throw new Error("cannot extend missing or non-array attribute: "+l);if(a.constructor!==o.constructor)throw new Error("cannot extend array with an array of a different type: "+l);s=c?r[l][d]:r,f(s)||(s=-1),u.push({prop:i,target:a,insert:o,maxp:Math.floor(s)})}return u}(e,t,n,r),o={},s={},l=0;l<i.length;l++){var c=i[l].prop,u=i[l].maxp,u=a(i[l].target,i[l].insert,u);c.set(u[0]),Array.isArray(o[c.astr])||(o[c.astr]=[]),o[c.astr].push(u[1]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function s(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function o(e,t,n,r){e=j.getGraphDiv(e),V.clearPromiseQueue(e);var a={};if("string"==typeof t)a[t]=n;else{if(!j.isPlainObject(t))return j.warn("Restyle fail.",t,n,r),Promise.reject();a=j.extendFlat({},t),void 0===r&&(r=n)}Object.keys(a).length&&(e.changed=!0);var r=V.coerceTraceIndices(e,r),i=l(e,a,r),a=i.flags;a.calc&&(e.calcdata=void 0),a.clearAxisTypes&&V.clearAxisTypes(e,r,{});r=[];a.fullReplot?r.push(M._doPlot):(r.push(F.previousPromises),F.supplyDefaults(e),a.markerSize&&(F.doCalcdata(e),D(r)),a.style&&r.push(k.doTraceStyle),a.colorbars&&r.push(k.doColorBars),r.push(A)),r.push(F.rehover,F.redrag),_.add(e,o,[e,i.undoit,i.traces],o,[e,i.redoit,i.traces]);r=j.syncOrAsync(r,e);return(r=!r||!r.then?Promise.resolve():r).then(function(){return e.emit("plotly_restyle",i.eventData),e})}function Z(e){return void 0===e?null:e}function $(i,e){return e?function(e,t,n){var r=H(e,t),a=r.set;return r.set=function(e){L((n||"")+t,r.get(),e,i),a(e)},r}:H}function L(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var a=Array.isArray(t)?t:[],i=Array.isArray(n)?n:[],o=Math.max(a.length,i.length),s=0;s<o;s++)L(e+"["+s+"]",a[s],i[s],r);else if(j.isPlainObject(t)||j.isPlainObject(n)){var l,c=j.isPlainObject(t)?t:{},u=j.isPlainObject(n)?n:{};for(l in j.extendFlat({},c,u))L(e+"."+l,c[l],u[l],r)}else void 0===r[e]&&(r[e]=Z(t))}function l(a,i,o){var e,s=a._fullLayout,r=a._fullData,l=a.data,c=s._guiEditing,u=$(s._preGUI,c),t=j.extendDeepAll({},i);X(i);var n,d,f=G.traceFlags(),p={},h={};function m(){return o.map(function(){})}function g(e){e=U.id2name(e);-1===n.indexOf(e)&&n.push(e)}function y(e){return"LAYOUT"+e+".autorange"}function v(e){return"LAYOUT"+e+".range"}function x(e){for(var t=e;t<r.length;t++)if(r[t]._input===l[e])return r[t]}function b(e,t,n){var r;Array.isArray(e)?e.forEach(function(e){b(e,t,n)}):e in i||V.hasParent(i,e)||(r="LAYOUT"===e.substr(0,6)?u(a.layout,e.replace("LAYOUT","")):(r=o[n],$(s._tracePreGUI[x(r)._fullInput.uid],c)(l[r],e)),e in h||(h[e]=m()),void 0===h[e][n]&&(h[e][n]=Z(r.get())),void 0!==t&&r.set(t))}for(d in i){if(V.hasParent(i,d))throw new Error("cannot set "+d+" and a parent attribute simultaneously");var _,w,T=i[d];if("autobinx"!==d&&"autobiny"!==d||(d=d.charAt(d.length-1)+"bins",T=Array.isArray(T)?T.map(function(n){return function(e,t){return!1===e?r[o[t]][n]:null}}(d)):!1===T?o.map(function(t){return function(e){return r[e][t]}}(d)):null),p[d]=T,"LAYOUT"!==d.substr(0,6)){for(h[d]=m(),e=0;e<o.length;e++){var M,k,A=l[o[e]],S=x(o[e]),E=(M=$(s._tracePreGUI[S._fullInput.uid],c)(A,d)).get();if(void 0!==(k=Array.isArray(T)?T[e%T.length]:T)){var L,C,D=M.parts[M.parts.length-1],O=d.substr(0,d.length-D.length-1),P=O?O+".":"",O=O?H(S,O).get():S,I=q.getTraceValObject(S,M.parts);if(I&&I.impliedEdits&&null!==k)for(var R in I.impliedEdits)b(j.relativeAttr(d,R),I.impliedEdits[R],e);else"thicknessmode"!==D&&"lenmode"!==D||E===k||"fraction"!==k&&"pixels"!==k||!O?"type"!==d||"pie"===k==("pie"===E)&&"funnelarea"===k==("funnelarea"===E)||(L="x",C="y","bar"!==k&&"bar"!==E||"h"!==A.orientation||(L="y",C="x"),j.swapAttrs(A,["?","?src"],"labels",L),j.swapAttrs(A,["d?","?0"],"label",L),j.swapAttrs(A,["?","?src"],"values",C),"pie"===E||"funnelarea"===E?(H(A,"marker.color").set(H(A,"marker.colors").get()),s._pielayer.selectAll("g.trace").remove()):B.traceIs(A,"cartesian")&&H(A,"marker.colors").set(H(A,"marker.color").get())):(L=s._size,C="top"===(C=O.orient)||"bottom"===C,"thicknessmode"===D?(D=C?L.h:L.w,b(P+"thickness",O.thickness*("fraction"===k?1/D:D),e)):(N=C?L.w:L.h,b(P+"len",O.len*("fraction"===k?1/N:N),e)));h[d][e]=Z(E);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(d)){if("orientation"===d){M.set(k);var N=A.x&&!A.y?"h":"v";if((M.get()||N)===S.orientation)continue}else"orientationaxes"===d&&(A.orientation={v:"h",h:"v"}[S.orientation]);V.swapXYData(A),f.calc=f.clearAxisTypes=!0}else-1!==F.dataArrayContainers.indexOf(M.parts[0])?(V.manageArrayContainers(M,k,h),f.calc=!0):(!I||I.arrayOk&&!B.traceIs(S,"regl")&&(j.isArrayOrTypedArray(k)||j.isArrayOrTypedArray(E))?f.calc=!0:G.update(f,I),M.set(k))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(d)&&U.swap(a,o),"orientationaxes"===d&&("x"===(w=(_=H(a.layout,"hovermode")).get())?_.set("y"):"y"===w?_.set("x"):"x unified"===w?_.set("y unified"):"y unified"===w&&_.set("x unified")),-1!==["orientation","type"].indexOf(d)){for(n=[],e=0;e<o.length;e++){var z=l[o[e]];B.traceIs(z,"cartesian")&&(g(z.xaxis||"x"),g(z.yaxis||"y"))}b(n.map(y),!0,0),b(n.map(v),[0,1],0)}}else M=u(a.layout,d.replace("LAYOUT","")),h[d]=[Z(M.get())],M.set(Array.isArray(T)?T[0]:T),f.calc=!0}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:h,redoit:p,traces:o,eventData:j.extendDeepNoArrays([],[t,o])}}function X(n){for(var e,t,r=j.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,i=Object.keys(n),o=0;o<i.length;o++)e=i[o],t=n[e],"title"!==e&&!r.test(e)&&!a.test(e)||"string"!=typeof t&&"number"!=typeof t?-1<e.indexOf("titlefont")?s(e,e.replace("titlefont","title.font")):-1<e.indexOf("titleposition")?s(e,e.replace("titleposition","title.position")):-1<e.indexOf("titleside")?s(e,e.replace("titleside","title.side")):-1<e.indexOf("titleoffset")&&s(e,e.replace("titleoffset","title.offset")):s(e,e.replace("title","title.text"));function s(e,t){n[t]=n[e],delete n[e]}}function C(e,t,n){e=j.getGraphDiv(e),V.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!j.isPlainObject(t))return j.warn("Relayout fail.",t,n),Promise.reject();r=j.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var a=O(e,r),n=a.flags;n.calc&&(e.calcdata=void 0);t=[F.previousPromises];n.layoutReplot?t.push(k.layoutReplot):Object.keys(r).length&&(c(e,n,a)||F.supplyDefaults(e),n.legend&&t.push(k.doLegend),n.layoutstyle&&t.push(k.layoutStyles),n.axrange&&D(t,a.rangesAltered),n.ticks&&t.push(k.doTicksRelayout),n.modebar&&t.push(k.doModeBar),n.camera&&t.push(k.doCamera),n.colorbars&&t.push(k.doColorBars),t.push(A)),t.push(F.rehover,F.redrag),_.add(e,C,[e,a.undoit],C,[e,a.redoit]);t=j.syncOrAsync(t,e);return(t=!t||!t.then?Promise.resolve(e):t).then(function(){return e.emit("plotly_relayout",a.eventData),e})}function c(e,t,n){var r=e._fullLayout;if(t.axrange){for(var a in t)if("axrange"!==a&&t[a])return;for(var i in n.rangesAltered){var o=U.id2name(i),s=e.layout[o],l=r[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)c!==i&&((c=r[U.id2name(c)]).autorange=l.autorange,c.range=l.range.slice(),c._input.range=l.range.slice())}return 1}}function D(e,o){var t=o?function(e){var t,n=[],r=!0;for(t in o){var a=U.getFromId(e,t);if(n.push(t),-1!==(a.ticklabelposition||"").indexOf("inside")&&a._anchorAxis&&n.push(a._anchorAxis._id),a._matchGroup)for(var i in a._matchGroup)o[i]||n.push(i);a.automargin&&(r=!1)}return U.draw(e,n,{skipTitle:r})}:function(e){return U.draw(e,"redraw")};e.push(r,k.doAutoRangeAndConstraints,t,k.drawData,k.finalDraw)}var J=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,K=/^[xyz]axis[0-9]*\.autorange$/,Q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function O(e,r){var t,a=e.layout,n=e._fullLayout,i=n._guiEditing,o=$(n._preGUI,i),s=Object.keys(r),l=U.list(e),i=j.extendDeepAll({},r),c={};for(X(r),s=Object.keys(r),I=0;I<s.length;I++)if(0===s[I].indexOf("allaxes")){for(t=0;t<l.length;t++){var u=l[t]._id.substr(1),u=-1!==u.indexOf("scene")?u+".":"",u=s[I].replace("allaxes",u+l[t]._name);r[u]||(r[u]=r[s[I]])}delete r[s[I]]}var d=G.layoutFlags(),f={},p={};function h(e,t){var n;Array.isArray(e)?e.forEach(function(e){h(e,t)}):e in r||V.hasParent(r,e)||(n=o(a,e),e in p||(p[e]=Z(n.get())),void 0!==t&&n.set(t))}var m,g,y={};function v(e){e=U.name2id(e.split(".")[0]);return y[e]=1,e}for(m in r){if(V.hasParent(r,m))throw new Error("cannot set "+m+" and a parent attribute simultaneously");for(var x=o(a,m),b=r[m],_=x.parts.length-1;0<_&&"string"!=typeof x.parts[_];)_--;var w=x.parts[_],T=x.parts[_-1]+"."+w,M=x.parts.slice(0,_).join("."),k=H(e.layout,M).get(),A=H(n,M).get(),S=x.get();if(void 0!==b){f[m]=b,p[m]="reverse"===w?b:Z(S);var E,L,C,D=q.getLayoutValObject(n,x.parts);if(D&&D.impliedEdits&&null!==b)for(var O in D.impliedEdits)h(j.relativeAttr(m,O),D.impliedEdits[O]);-1!==["width","height"].indexOf(m)?b?(h("autosize",null),h(L="height"===m?"width":"height",n[L])):n[m]=e._initialAutoSize[m]:"autosize"===m?(h("width",b?null:n.width),h("height",b?null:n.height)):T.match(J)?(v(T),H(n,M+"._inputRange").set(null)):T.match(K)?(v(T),H(n,M+"._inputRange").set(null),(C=H(n,M).get())._inputDomain&&(C._input.domain=C._inputDomain.slice())):T.match(Q)&&H(n,M+"._inputDomain").set(null),"type"===w?(E=k,L="linear"===A.type&&"log"===b,C="log"===A.type&&"linear"===b,L||C?(E&&E.range?A.autorange?L&&(E.range=E.range[1]>E.range[0]?[1,2]:[2,1]):(T=E.range[0],C=E.range[1],L?(T<=0&&C<=0&&h(M+".autorange",!0),T<=0?T=C/1e6:C<=0&&(C=T/1e6),h(M+".range[0]",Math.log(T)/Math.LN10),h(M+".range[1]",Math.log(C)/Math.LN10)):(h(M+".range[0]",Math.pow(10,T)),h(M+".range[1]",Math.pow(10,C)))):h(M+".autorange",!0),Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[x.parts[0]]&&"radialaxis"===x.parts[1]&&delete n[x.parts[0]]._subplot.viewInitial["radialaxis.range"],B.getComponentMethod("annotations","convertCoords")(e,A,b,h),B.getComponentMethod("images","convertCoords")(e,A,b,h)):(h(M+".autorange",!0),h(M+".range",null)),H(n,M+"._inputRange").set(null)):w.match(W)&&(N=H(n,m).get(),(R=(b||{}).type)&&"-"!==R||(R="linear"),B.getComponentMethod("annotations","convertCoords")(e,N,R,h),B.getComponentMethod("images","convertCoords")(e,N,R,h));var P,I,R,N=Y.containerArrayMatch(m);N?(P=N.array,I=N.index,R=N.property,N=D||{editType:"calc"},""!==I&&""===R&&(Y.isAddVal(b)?p[m]=null:Y.isRemoveVal(b)?p[m]=(H(a,P).get()||[])[I]:j.warn("unrecognized full object value",r)),G.update(d,N),c[P]||(c[P]={}),(c[P][I]||(c[P][I]={}))[R]=b,delete r[m]):"reverse"===w?(k.range?k.range.reverse():(h(M+".autorange",!0),k.range=[1,0]),A.autorange?d.calc=!0:d.plot=!0):(n._has("scatter-like")&&n._has("regl")&&"dragmode"===m&&("lasso"===b||"select"===b)&&"lasso"!==S&&"select"!==S||n._has("gl2d")?d.plot=!0:D?G.update(d,D):d.calc=!0,x.set(b))}}for(P in c)Y.applyContainerArrayChanges(e,o(a,P),c[P],d,o)||(d.plot=!0);for(g in y){var z=(E=U.getFromId(e,g))&&E._constraintGroup;if(z)for(var F in d.calc=!0,z)y[F]||(U.getFromId(e,F)._constraintShrinkable=!0)}return(ee(e)||r.height||r.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,rangesAltered:y,undoit:p,redoit:f,eventData:i}}function ee(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&F.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function P(e,t,n,r){e=j.getGraphDiv(e),V.clearPromiseQueue(e),j.isPlainObject(t)||(t={}),j.isPlainObject(n)||(n={}),Object.keys(t).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var a=V.coerceTraceIndices(e,r),i=l(e,j.extendFlat({},t),a),r=i.flags,o=O(e,j.extendFlat({},n)),t=o.flags;(r.calc||t.calc)&&(e.calcdata=void 0),r.clearAxisTypes&&V.clearAxisTypes(e,a,n);n=[];t.layoutReplot?n.push(k.layoutReplot):r.fullReplot?n.push(M._doPlot):(n.push(F.previousPromises),c(e,t,o)||F.supplyDefaults(e),r.style&&n.push(k.doTraceStyle),(r.colorbars||t.colorbars)&&n.push(k.doColorBars),t.legend&&n.push(k.doLegend),t.layoutstyle&&n.push(k.layoutStyles),t.axrange&&D(n,o.rangesAltered),t.ticks&&n.push(k.doTicksRelayout),t.modebar&&n.push(k.doModeBar),t.camera&&n.push(k.doCamera),n.push(A)),n.push(F.rehover,F.redrag),_.add(e,P,[e,i.undoit,o.undoit,i.traces],P,[e,i.redoit,o.redoit,i.traces]);n=j.syncOrAsync(n,e);return(n=!n||!n.then?Promise.resolve(e):n).then(function(){return e.emit("plotly_update",{data:i.eventData,layout:o.eventData}),e})}function a(n){return function(e){e._fullLayout._guiEditing=!0;var t=n.apply(null,arguments);return e._fullLayout._guiEditing=!1,t}}var I=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],R=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function N(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=e.match(r.pattern);if(a)return{head:a[1],attr:r.attr}}}function z(e,t){var n=H(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();1<r.length;)if(r.pop(),void 0!==(n=H(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function te(e,t){var n=j.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&j.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function ne(e,t,n,r){var a,i,o,s,l,c,u,d,f=r._preGUI,p=[],h={};for(a in f){if(l=N(a,I)){if(i=l.attr||l.head+".uirevision",(s=(o=H(r,i).get())&&z(i,t))&&s===o&&(null===(c=f[a])&&(c=void 0),te(d=(u=H(t,a)).get(),c))){void 0===d&&"autorange"===a.substr(a.length-9)&&p.push(a.substr(0,a.length-10)),u.set(Z(H(r,a).get()));continue}}else j.warn("unrecognized GUI edit: "+a);delete f[a],"range["===a.substr(a.length-8,6)&&(h[a.substr(0,a.length-9)]=1)}for(var m=0;m<p.length;m++){var g=p[m];!h[g]||(g=H(t,g).get())&&delete g.autorange}var y,v=r._tracePreGUI;for(y in v){var x=v[y],b=null;for(a in x){if(!b){var _=function(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}(y,n);if(_<0){delete v[y];break}var w,_=function(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}(y,e,(w=n[_]._fullInput).index);if(_<0){delete v[y];break}b=e[_]}if(l=N(a,R)){if(l.attr?s=(o=H(r,l.attr).get())&&z(l.attr,t):(o=w.uirevision,void 0===(s=b.uirevision)&&(s=t.uirevision)),s&&s===o&&(null===(c=x[a])&&(c=void 0),te(d=(u=H(b,a)).get(),c))){u.set(Z(H(w,a).get()));continue}}else j.warn("unrecognized GUI edit: "+a+" in trace uid "+y);delete x[a]}}}function re(e,t,n,r){var a,i,o=r.getValObject,s=r.flags,l=r.immutable,c=r.inArray,u=r.arrayIndex;function d(){var e=a.editType;c&&-1!==e.indexOf("arraydraw")?j.pushUnique(s.arrays[c],u):(G.update(s,a),"none"!==e&&s.nChanges++,r.transition&&a.anim&&s.nChangesAnim++,(J.test(g)||K.test(g))&&(s.rangesAltered[n[0]]=1),Q.test(g)&&H(t,"_inputDomain").set(null),"datarevision"===i&&(s.newDataRevision=1))}function f(e){return"data_array"===e.valType||e.arrayOk}for(i in e){if(s.calc&&!r.transition)return;var p=e[i],h=t[i],m=n.concat(i),g=m.join(".");if("_"!==i.charAt(0)&&"function"!=typeof p&&p!==h){if(("tick0"===i||"dtick"===i)&&"geo"!==n[0]){var y=t.tickmode;if("auto"===y||"array"===y||!y)continue}if(("range"!==i||!t.autorange)&&("zmin"!==i&&"zmax"!==i||"contourcarpet"!==t.type)&&(a=o(m))&&(!a._compareAsJSON||JSON.stringify(p)!==JSON.stringify(h))){var v,x=a.valType,b=f(a),_=Array.isArray(p),w=Array.isArray(h);if(_&&w){var T="_input_"+i,y=e[T],T=t[T];if(Array.isArray(y)&&y===T)continue}if(void 0===h)b&&_?s.calc=!0:d();else if(a._isLinkedToArray){var M=[],T=!1;c||(s.arrays[i]=M);var k=Math.min(p.length,h.length),A=Math.max(p.length,h.length);if(k!==A){if("arraydraw"!==a.editType){d();continue}T=!0}for(v=0;v<k;v++)re(p[v],h[v],m.concat(v),j.extendFlat({inArray:i,arrayIndex:v},r));if(T)for(v=k;v<A;v++)M.push(v)}else!x&&j.isPlainObject(p)?re(p,h,m,r):b?_&&w?(l&&(s.calc=!0),(l||r.newDataRevision)&&d()):_!==w?s.calc=!0:d():_&&w&&p.length===h.length&&String(p)===String(h)||d()}}}for(i in t)if(!(i in e||"_"===i.charAt(0)||"function"==typeof t[i])){if(f(a=o(n.concat(i)))&&Array.isArray(t[i]))return void(s.calc=!0);d()}}function ae(e){var t=e._fullLayout,n=e.getBoundingClientRect();j.equalDomRects(n,t._lastBBox)||(e=t._invTransform=j.inverseTransformMatrix(j.getFullTransformMatrix(e)),t._invScaleX=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]+e[0][2]*e[0][2]),t._invScaleY=Math.sqrt(e[1][0]*e[1][0]+e[1][1]*e[1][1]+e[1][2]*e[1][2]),t._lastBBox=n)}M.animate=function(h,m,g){if(h=j.getGraphDiv(h),!j.isPlotDiv(h))throw new Error("This element is not a Plotly plot: "+h+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var y=h._transitionData;y._frameQueue||(y._frameQueue=[]);var v=(g=F.supplyAnimationDefaults(g)).transition,x=g.frame;return void 0===y._frameWaitingCnt&&(y._frameWaitingCnt=0),new Promise(function(i,o){function e(e){if(0!==e.length){for(var t=0;t<e.length;t++){var n="byname"===e[t].type?F.computeFrame(h,e[t].name):e[t].data,r=(a=t,Array.isArray(x)?a>=x.length?x[0]:x[a]:x),a=(a=t,Array.isArray(v)?a>=v.length?v[0]:v[a]:v);a.duration=Math.min(a.duration,r.duration);a={frame:n,name:e[t].name,frameOpts:r,transitionOpts:a};t===e.length-1&&(a.onComplete=function(e,t){var n=0;return function(){if(e&&++n===t)return e()}}(i,2),a.onInterrupt=o),y._frameQueue.push(a)}"immediate"===g.mode&&(y._lastFrameAt=-1/0),y._animationRaf||function(){h.emit("plotly_animating"),y._lastFrameAt=-1/0,y._timeToNext=0,y._runningTransitions=0,y._currentFrame=null;var e=function(){y._animationRaf=window.requestAnimationFrame(e),Date.now()-y._lastFrameAt>y._timeToNext&&function(){y._currentFrame&&y._currentFrame.onComplete&&y._currentFrame.onComplete();var e=y._currentFrame=y._frameQueue.shift();{var t;e?(t=e.name?e.name.toString():null,h._fullLayout._currentFrame=t,y._lastFrameAt=Date.now(),y._timeToNext=e.frameOpts.duration,F.transition(h,e.frame.data,e.frame.layout,V.coerceTraceIndices(h,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),h.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})):(h.emit("plotly_animated"),window.cancelAnimationFrame(y._animationRaf),y._animationRaf=null)}}()};e()}()}}var t,n=0;function r(e){return Array.isArray(v)?n>=v.length?e.transitionOpts=v[n]:e.transitionOpts=v[0]:e.transitionOpts=v,n++,e}var a=[],s=null==m,l=Array.isArray(m);if(!s&&!l&&j.isPlainObject(m))a.push({type:"object",data:r(j.extendFlat({},m))});else if(s||-1!==["string","number"].indexOf(typeof m))for(p=0;p<y._frames.length;p++)(t=y._frames[p])&&(!s&&String(t.group)!==String(m)||a.push({type:"byname",name:String(t.name),data:r({name:t.name})}));else if(l)for(p=0;p<m.length;p++){var c=m[p];-1!==["number","string"].indexOf(typeof c)?(c=String(c),a.push({type:"byname",name:c,data:r({name:c})})):j.isPlainObject(c)&&a.push({type:"object",data:r(j.extendFlat({},c))})}for(p=0;p<a.length;p++)if("byname"===(t=a[p]).type&&!y._frameHash[t.data.name])return j.warn('animate failure: frame not found: "'+t.data.name+'"'),void o();-1!==["next","immediate"].indexOf(g.mode)&&function(){if(0!==y._frameQueue.length){for(;y._frameQueue.length;){var e=y._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}h.emit("plotly_animationinterrupted",[])}}(),"reverse"===g.direction&&a.reverse();var u=h._fullLayout._currentFrame;if(u&&g.fromcurrent){var d=-1;for(p=0;p<a.length;p++)if("byname"===(t=a[p]).type&&t.name===u){d=p;break}if(0<d&&d<a.length-1){for(var f=[],p=0;p<a.length;p++)t=a[p],("byname"!==a[p].type||d<p)&&f.push(t);a=f}}0<a.length?e(a):(h.emit("plotly_animated"),i())})},M.addFrames=function(e,t,n){if(e=j.getGraphDiv(e),null==t)return Promise.resolve();if(!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,a,i,o=e._transitionData._frames,s=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);for(var l,c,u,d,f=o.length+2*t.length,p=[],h={},m=t.length-1;0<=m;m--)j.isPlainObject(t[m])&&(c=(s[l=t[m].name]||h[l]||{}).name,u=t[m].name,d=s[c]||h[c],c&&u&&"number"==typeof u&&d&&w<5&&(w++,j.warn('addFrames: overwriting frame "'+(s[c]||h[c]).name+'" with a frame whose name of type "number" also equates to "'+c+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&j.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[l]={name:l},p.push({frame:F.supplyFrameDefaults(t[m]),index:n&&void 0!==n[m]&&null!==n[m]?n[m]:f+m}));p.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var g=[],y=[],v=o.length;for(m=p.length-1;0<=m;m--){if("number"==typeof(r=p[m].frame).name&&j.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;s[r.name="frame "+e._transitionData._counter++];);if(s[r.name]){for(a=0;a<o.length&&(o[a]||{}).name!==r.name;a++);g.push({type:"replace",index:a,value:r}),y.unshift({type:"replace",index:a,value:o[a]})}else i=Math.max(0,Math.min(p[m].index,v)),g.push({type:"insert",index:i,value:r}),y.unshift({type:"delete",index:i}),v++}var x=F.modifyFrames,b=F.modifyFrames;return _&&_.add(e,x,[e,y],b,[e,g]),F.modifyFrames(e,g)},M.deleteFrames=function(e,t){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,a=e._transitionData._frames,i=[],o=[];if(!t)for(t=[],n=0;n<a.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;0<=n;n--)r=t[n],i.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:a[r]});var s=F.modifyFrames,l=F.modifyFrames;return _&&_.add(e,s,[e,o],l,[e,i]),F.modifyFrames(e,i)},M.addTraces=function e(t,n,r){t=j.getGraphDiv(t);var a,i,o=[],s=M.deleteTraces,l=e,c=[t,o],u=[t,n];for(function(e,t,n){var r,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(a=t[r])||Array.isArray(a)||null===a)throw new Error("all values in traces array must be non-array objects");if(void 0!==(n=void 0===n||Array.isArray(n)?n:[n])&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,n,r),n=(n=Array.isArray(n)?n:[n]).map(function(e){return j.extendFlat({},e)}),V.cleanData(n),a=0;a<n.length;a++)t.data.push(n[a]);for(a=0;a<n.length;a++)o.push(-n.length+a);if(void 0===r)return i=M.redraw(t),_.add(t,s,c,l,u),i;Array.isArray(r)||(r=[r]);try{E(t,o,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return _.startSequence(t),_.add(t,s,c,l,u),i=M.moveTraces(t,o,r),_.stopSequence(t),i},M.deleteTraces=function e(t,n){t=j.getGraphDiv(t);var r,a,i=[],o=M.addTraces,s=e,l=[t,i,n],c=[t,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(T(t,n=Array.isArray(n)?n:[n],"indices"),(n=b(n,t.data.length-1)).sort(j.sorterDes),r=0;r<n.length;r+=1)a=t.data.splice(n[r],1)[0],i.push(a);var u=M.redraw(t);return _.add(t,o,l,s,c),u},M.extendTraces=function e(t,n,r,a){n=i(t=j.getGraphDiv(t),n,r,a,function(e,t,n){var r,a,i,o;return j.isTypedArray(e)?n<0?(r=new e.constructor(0),a=s(e,t),r=n<0?(o=a,r):(o=r,a)):(o=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),r.set(e)):n<t.length?(i=t.length-n,o.set(t.subarray(i)),r.set(e),r.set(t.subarray(0,i),e.length)):(a=n-t.length,i=e.length-a,o.set(e.subarray(i)),o.set(t,a),r.set(e.subarray(0,i)))):(o=e.concat(t),r=0<=n&&n<o.length?o.splice(0,o.length-n):[]),[o,r]}),a=M.redraw(t),n=[t,n.update,r,n.maxPoints];return _.add(t,M.prependTraces,n,e,arguments),a},M.moveTraces=function e(t,n,r){var a,i=[],o=[],s=e,l=e,c=[t=j.getGraphDiv(t),r,n],u=[t,n,r];if(E(t,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],a=0;a<n.length;a++)r.push(-n.length+a);for(r=Array.isArray(r)?r:[r],n=b(n,t.data.length-1),r=b(r,t.data.length-1),a=0;a<t.data.length;a++)-1===n.indexOf(a)&&i.push(t.data[a]);for(a=0;a<n.length;a++)o.push({newIndex:r[a],trace:t.data[n[a]]});for(o.sort(function(e,t){return e.newIndex-t.newIndex}),a=0;a<o.length;a+=1)i.splice(o[a].newIndex,0,o[a].trace);t.data=i;var d=M.redraw(t);return _.add(t,s,c,l,u),d},M.prependTraces=function e(t,n,r,a){n=i(t=j.getGraphDiv(t),n,r,a,function(e,t,n){var r,a,i,o;return j.isTypedArray(e)?n<=0?(r=new e.constructor(0),a=s(t,e),a=n<0?(o=a,r):(o=r,a)):(o=new e.constructor(n),a=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),a.set(e)):n<t.length?(i=t.length-n,o.set(t.subarray(0,i)),a.set(t.subarray(i)),a.set(e,i)):(i=n-t.length,o.set(t),o.set(e.subarray(0,i),t.length),a.set(e.subarray(i)))):(o=t.concat(e),a=0<=n&&n<o.length?o.splice(n,o.length):[]),[o,a]}),a=M.redraw(t),n=[t,n.update,r,n.maxPoints];return _.add(t,M.extendTraces,n,e,arguments),a},M.newPlot=function(e,t,n,r){return e=j.getGraphDiv(e),F.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),F.purge(e),M._doPlot(e,t,n,r)},M._doPlot=function(a,e,t,n){var r,i;if(a=j.getGraphDiv(a),m.init(a),j.isPlainObject(e)&&(e=(i=e).data,t=i.layout,n=i.config,r=i.frames),!1===m.triggerHandler(a,"plotly_beforeplot",[e,t,n]))return Promise.reject();e||t||j.isPlotDiv(a)||j.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",a),S(a,n),t=t||{},h.select(a).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(a._promises)||(a._promises=[]);var o=0===(a.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(V.cleanData(e),o?a.data=e:a.data.push.apply(a.data,e),a.empty=!1),a.layout&&!o||(a.layout=V.cleanLayout(t)),F.supplyDefaults(a);var s=a._fullLayout,e=s._has("cartesian");s._replotting=!0,(o||s._shouldCreateBgLayer)&&(function(e){var t=h.select(e),n=e._fullLayout;{var r;n._calcInverseTransform=ae,n._calcInverseTransform(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),n._uid||(r={},h.selectAll("defs").each(function(){this.id&&(r[this.id.split("-")[1]]=1)}),n._uid=j.randstr(r))}n._paperdiv.selectAll(".main-svg").attr(v.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);t=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=t.append("g").classed("imagelayer",!0),n._shapeLowerLayer=t.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);t=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=t.append("g").classed("imagelayer",!0),n._shapeUpperLayer=t.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(a),s._shouldCreateBgLayer&&delete s._shouldCreateBgLayer),g.initGradients(a),g.initPatterns(a),o&&U.saveShowSpikeInitial(a);var l=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;l&&F.doCalcdata(a);for(var c=0;c<a.calcdata.length;c++)a.calcdata[c][0].trace=a._fullData[c];a._context.responsive?a._responsiveChartHandler||(a._responsiveChartHandler=function(){j.isHidden(a)||F.resize(a)},window.addEventListener("resize",a._responsiveChartHandler)):j.clearResponsive(a);var u=j.extendFlat({},s._size),d=0;function f(){if(F.clearAutoMarginIds(a),k.drawMarginPushers(a),U.allowAutoMargin(a),s._has("pie"))for(var e=a._fullData,t=0;t<e.length;t++){var n=e[t];"pie"===n.type&&n.automargin&&F.allowAutoMargin(a,"pie."+n.uid+".automargin")}return F.doAutoMargin(a),F.previousPromises(a)}function p(){a._transitioning||(k.doAutoRangeAndConstraints(a),o&&U.saveRangeInitial(a),B.getComponentMethod("rangeslider","calcAutorange")(a))}return t=[F.previousPromises,function(){if(r)return M.addFrames(a,r)},function e(){for(var t=s._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(a);if(!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),s._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),s._glcanvas){s._glcanvas.attr("width",s.width).attr("height",s.height);var r=s._glcanvas.data()[0].regl;if(r&&(Math.floor(s.width)!==r._gl.drawingBufferWidth||Math.floor(s.height)!==r._gl.drawingBufferHeight)){if(r="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!d)return j.log(r+" Clearing graph and plotting again."),F.cleanPlot([],{},a._fullData,s),F.supplyDefaults(a),s=a._fullLayout,F.doCalcdata(a),d++,e();j.error(r)}}return"h"===s.modebar.orientation?s._modebardiv.style("height",null).style("width","100%"):s._modebardiv.style("width",null).style("height",s.height+"px"),F.previousPromises(a)},f,function(){if(F.didMarginChange(u,s._size))return j.syncOrAsync([f,k.layoutStyles],a)}],e&&t.push(function(){if(l)return j.syncOrAsync([B.getComponentMethod("shapes","calcAutorange"),B.getComponentMethod("annotations","calcAutorange"),p],a);p()}),t.push(k.layoutStyles),e&&t.push(function(){return U.draw(a,o?"":"redraw")},function(e){e._fullLayout._insideTickLabelsAutorange&&C(e,e._fullLayout._insideTickLabelsAutorange).then(function(){e._fullLayout._insideTickLabelsAutorange=void 0})}),t.push(k.drawData,k.finalDraw,y,F.addLinks,F.rehover,F.redrag,F.doAutoMargin,function(e){e._fullLayout._insideTickLabelsAutorange&&o&&U.saveRangeInitial(e,!0)},F.previousPromises),(t=!(t=j.syncOrAsync(t,a))||!t.then?Promise.resolve():t).then(function(){return A(a),a})},M.purge=function(e){var t=(e=j.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return F.cleanPlot([],{},n,t),F.purge(e),m.purge(e),t._container&&t._container.remove(),delete e._context,e},M.react=function(e,t,n,r){var a;e=j.getGraphDiv(e),V.clearPromiseQueue(e);var i=e._fullData,o=e._fullLayout;if(j.isPlotDiv(e)&&i&&o){j.isPlainObject(t)&&(t=(d=t).data,n=d.layout,r=d.config,a=d.frames);var s=!1;r&&(p=j.extendDeep({},e._context),e._context=void 0,S(e,r),s=function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var a=t[r],i=n[r];if(a!==i)if(j.isPlainObject(a)&&j.isPlainObject(i)){if(e(a,i))return!0}else{if(!Array.isArray(a)||!Array.isArray(i))return!0;if(a.length!==i.length)return!0;for(var o=0;o<a.length;o++)if(a[o]!==i[o]){if(!j.isPlainObject(a[o])||!j.isPlainObject(i[o]))return!0;if(e(a[o],i[o]))return!0}}}}(p,e._context)),e.data=t||[],V.cleanData(e.data),e.layout=n||{},V.cleanLayout(e.layout),ne(e.data,e.layout,i,o),F.supplyDefaults(e,{skipUpdateCalc:!0});var l=e._fullData,c=e._fullLayout,u=void 0===c.datarevision,d=c.transition,f=function(e,t,n,r,a){var i=G.layoutFlags();i.arrays={},i.rangesAltered={},i.nChanges=0,i.nChangesAnim=0,re(t,n,[],{getValObject:function(e){return q.getLayoutValObject(n,e)},flags:i,immutable:r,transition:a,gd:e}),(i.plot||i.calc)&&(i.layoutReplot=!0);a&&i.nChanges&&i.nChangesAnim&&(i.anim=i.nChanges===i.nChangesAnim?"all":"some");return i}(e,o,c,u,d),p=f.newDataRevision,h=function(e,t,n,r,a,i){var o=t.length===n.length;if(!a&&!o)return{fullReplot:!0,calc:!0};var s,l,c=G.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(e){return e=q.getTraceValObject(l,e),!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:c,immutable:r,transition:a,newDataRevision:i,gd:e},d={};for(s=0;s<t.length;s++)n[s]&&(l=n[s]._fullInput,F.hasMakesDataTransform(l)&&(l=n[s]),d[l.uid]||(d[l.uid]=1,re(t[s]._fullInput,l,[],u)));(c.calc||c.plot)&&(c.fullReplot=!0);a&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(e,i,l,u,d,p);if(ee(e)&&(f.layoutReplot=!0),h.calc||f.calc){e.calcdata=void 0;for(var m=Object.getOwnPropertyNames(c),g=0;g<m.length;g++){var y=m[g],v=y.substring(0,5);"xaxis"!==v&&"yaxis"!==v||(y=c[y]._emptyCategories)&&y()}}else F.supplyDefaultsUpdateCalc(e.calcdata,l);var l=[];if(a&&(e._transitionData={},F.createTransitionData(e),l.push(function(){return M.addFrames(e,a)})),c.transition&&!s&&(h.anim||f.anim))f.ticks&&l.push(k.doTicksRelayout),F.doCalcdata(e),k.doAutoRangeAndConstraints(e),l.push(function(){return F.transitionFromReact(e,h,f,o)});else if(h.fullReplot||f.layoutReplot||s)e._fullLayout._skipDefaults=!0,l.push(M._doPlot);else{for(var x in f.arrays){var b=f.arrays[x];if(b.length){var _=B.getComponentMethod(x,"drawOne");if(_!==j.noop)for(var w=0;w<b.length;w++)_(e,b[w]);else{var T=B.getComponentMethod(x,"draw");if(T===j.noop)throw new Error("cannot draw components: "+x);T(e)}}}l.push(F.previousPromises),h.style&&l.push(k.doTraceStyle),(h.colorbars||f.colorbars)&&l.push(k.doColorBars),f.legend&&l.push(k.doLegend),f.layoutstyle&&l.push(k.layoutStyles),f.axrange&&D(l),f.ticks&&l.push(k.doTicksRelayout),f.modebar&&l.push(k.doModeBar),f.camera&&l.push(k.doCamera),l.push(A)}l.push(F.rehover,F.redrag),(l=j.syncOrAsync(l,e))&&l.then||(l=Promise.resolve(e))}else l=M.newPlot(e,t,n,r);return l.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},M.redraw=function(e){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return V.cleanData(e.data),V.cleanLayout(e.layout),e.calcdata=void 0,M._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})},M.relayout=C,M.restyle=o,M.setPlotConfig=function(e){return j.extendFlat(d,e)},M.update=P,M._guiRelayout=a(C),M._guiRestyle=a(o),M._guiUpdate=a(P),M._storeDirectGUIEdit=function(e,t,n){for(var r in n)L(r,H(e,r).get(),n[r],t)}},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"../lib/events":278,"../lib/queue":300,"../plots/cartesian/axes":331,"../plots/cartesian/constants":338,"../plots/cartesian/graph_interact":341,"../plots/cartesian/select":351,"../plots/plots":366,"../registry":373,"./edit_types":313,"./helpers":314,"./manage_arrays":316,"./plot_config":318,"./plot_schema":319,"./subroutines":321,"@plotly/d3":20,"fast-isnumeric":31,"has-hover":62}],318:[function(e,t,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},a={};!function e(t,n){for(var r in t){var a=t[r];a.valType?n[r]=a.dflt:(n[r]||(n[r]={}),e(a,n[r]))}}(r,a),t.exports={configAttributes:r,dfltConfig:a}},{}],319:[function(e,t,d){"use strict";var u=e("../registry"),n=e("../lib"),f=e("../plots/attributes"),p=e("../plots/layout_attributes"),r=e("../plots/frame_attributes"),i=e("../plots/animation_attributes"),o=e("./plot_config").configAttributes,s=e("./edit_types"),l=n.extendDeepAll,h=n.isPlainObject,m=n.isArrayOrTypedArray,c=n.nestedProperty,g=n.valObjectMeta,a="_isSubplotObj",y="_isLinkedToArray",n="_deprecated",v=[a,y,"_arrayAttrRegexps",n];function x(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(b(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!h(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!b(t[++n]))return!1}else if("info_array"===e.valType){var a=t[++n];if(!b(a))return!1;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;r=t[n];if(!b(r))return!1;e=i[a][r]}else e=i[a]}else e=i}}return e}function b(e){return e===Math.round(e)&&0<=e}function _(e){return d.crawl(e,function(e,t,n){d.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(n[t+"src"]={valType:"string",editType:"none"}):h(e)&&(e.role="object")}),d.crawl(e,function(e,t,n){var r;!e||(r=e[y])&&(delete e[y],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}),function e(t){for(var n in t)if(h(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e),e}function w(e,t,n){n=c(e,n),t=l({},t.layoutAttributes);t[a]=!0,n.set(t)}function T(e,t,n){n=c(e,n);n.set(l(n.get()||{},t))}d.IS_SUBPLOT_OBJ=a,d.IS_LINKED_TO_ARRAY=y,d.DEPRECATED=n,d.UNDERSCORE_ATTRS=v,d.get=function(){var t={};u.allTypes.forEach(function(e){t[e]=function(e){var t,n;t=u.modules[e]._module,n=t.basePlotModule;var r={type:null},i=l({},f),o=l({},t.attributes);d.crawl(o,function(e,t,n,r,a){c(i,a).set(void 0),void 0===e&&c(o,a).set(void 0)}),l(r,i),u.traceIs(e,"noOpacity")&&delete r.opacity;u.traceIs(e,"showLegend")||(delete r.showlegend,delete r.legendgroup);u.traceIs(e,"noHover")&&(delete r.hoverinfo,delete r.hoverlabel);t.selectPoints||delete r.selectedpoints;l(r,o),n.attributes&&l(r,n.attributes);r.type=e;e={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:_(r)};t.layoutAttributes&&(l(r={},t.layoutAttributes),e.layoutAttributes=_(r));t.animatable||d.crawl(e,function(e){d.isValObject(e)&&"anim"in e&&delete e.anim});return e}(e)});var e,a={};return Object.keys(u.transformsRegistry).forEach(function(e){var n,r;a[e]=(n=e,e=u.transformsRegistry[n],r=l({},e.attributes),Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];t.schema&&t.schema.transforms&&t.schema.transforms[n]&&Object.keys(t.schema.transforms[n]).forEach(function(e){T(r,t.schema.transforms[n][e],e)})}),{attributes:_(r)})}),{defs:{valObjects:g,metaKeys:v.concat(["description","role","editType","impliedEdits"]),editType:{traces:s.traces,layout:s.layout},impliedEdits:{}},traces:t,layout:function(){var e,t,n={};for(e in l(n,p),u.subplotsRegistry)if((t=u.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var r=0;r<t.attr.length;r++)w(n,t,t.attr[r]);else{var a="subplot"===t.attr?t.name:t.attr;w(n,t,a)}for(e in u.componentsRegistry){var i=(t=u.componentsRegistry[e]).schema;if(i&&(i.subplots||i.layout)){i=i.subplots;if(i&&i.xaxis&&!i.yaxis)for(var o in i.xaxis)delete n.yaxis[o]}else"colorscale"===t.name?l(n,t.layoutAttributes):t.layoutAttributes&&T(n,t.layoutAttributes,t.name)}return{layoutAttributes:_(n)}}(),transforms:a,frames:(_(e={frames:l({},r)}),e.frames),animation:_(i),config:_(o)}},d.crawl=function(r,a,e,i){var o=e||0;i=i||"",Object.keys(r).forEach(function(e){var t,n=r[e];-1===v.indexOf(e)&&(a(n,e,r,o,t=(i?i+".":"")+e),d.isValObject(n)||h(n)&&"impliedEdits"!==e&&d.crawl(n,a,o+1,t))})},d.isValObject=function(e){return e&&void 0!==e.valType},d.findArrayAttributes=function(e){var a,s,l=[],c=[],u=[];function t(e,t,n,r){c=c.slice(0,r).concat([t]),u=u.slice(0,r).concat([e&&e._isLinkedToArray]),!e||"data_array"!==e.valType&&!0!==e.arrayOk||"colorbar"===c[r-1]&&("ticktext"===t||"tickvals"===t)||function e(t,n,r){var a=t[c[n]];var i=r+c[n];if(n===c.length-1)m(a)&&l.push(s+i);else if(u[n]){if(Array.isArray(a))for(var o=0;o<a.length;o++)h(a[o])&&e(a[o],n+1,i+"["+o+"].")}else h(a)&&e(a,n+1,i+".")}(a,0,"")}a=e,s="",d.crawl(f,t),e._module&&e._module.attributes&&d.crawl(e._module.attributes,t);var n=e.transforms;if(n)for(var r=0;r<n.length;r++){var i=n[r],o=i._module;o&&(s="transforms["+r+"].",a=i,d.crawl(o.attributes,t))}return l},d.getTraceValObject=function(e,t){var n,r=t[0],a=1;if("transforms"===r){if(1===t.length)return f.transforms;var i=e.transforms;if(!Array.isArray(i)||!i.length)return!1;var o=t[1];if(!b(o)||o>=i.length)return!1;i=(n=(u.transformsRegistry[i[o].type]||{}).attributes)&&n[t[2]],a=3}else{o=e._module;if(!(o=o||(u.modules[e.type||f.type.dflt]||{})._module))return!1;(i=(n=o.attributes)&&n[r])||(o=o.basePlotModule)&&o.attributes&&(i=o.attributes[r]),i=i||f[r]}return x(i,t,a)},d.getLayoutValObject=function(e,t){return x(function(e,t){var n,r,a,i,o,s=e._basePlotModules;if(s){for(n=0;n<s.length;n++){if((a=s[n]).attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!o&&a.layoutAttributes&&(o=a.layoutAttributes)}var l=a.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(o)return o}var c=e._modules;if(c)for(n=0;n<c.length;n++)if((i=c[n].layoutAttributes)&&t in i)return i[t];for(r in u.componentsRegistry){if("colorscale"===(a=u.componentsRegistry[r]).name&&0===t.indexOf("coloraxis"))return a.layoutAttributes[t];if(!a.schema&&t===a.name)return a.layoutAttributes}return t in p&&p[t]}(e,t[0]),t,1)}},{"../lib":285,"../plots/animation_attributes":325,"../plots/attributes":327,"../plots/frame_attributes":361,"../plots/layout_attributes":364,"../registry":373,"./edit_types":313,"./plot_config":318}],320:[function(e,t,n){"use strict";var d=e("../lib"),o=e("../plots/attributes"),f="templateitemname",r={name:{valType:"string",editType:"none"}};function c(e){return e&&"string"==typeof e}function a(e){var t=e.length-1;return"s"!==e.charAt(t)&&d.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}r[f]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=r.name,t[f]=r[f],t},n.traceTemplater=function(n){var r,a,i={};for(r in n)a=n[r],Array.isArray(a)&&a.length&&(i[r]=0);return{newTrace:function(e){var t={type:r=d.coerce(e,{},o,"type"),_template:null};return r in i&&(a=n[r],e=i[r]%a.length,i[r]++,t._template=a[e]),t}}},n.newContainer=function(e,t,n){var r=e._template,n=r&&(r[t]||n&&r[n]);return d.isPlainObject(n)||(n=null),e[t]={_template:n}},n.arrayTemplater=function(e,t,i){var e=e._template,o=e&&e[a(t)],s=e&&e[t];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(e){var t={name:e.name,_input:e},n=t[f]=e[f];if(!c(n))return t._template=o,t;for(var r=0;r<s.length;r++){var a=s[r];if(a.name===n)return l[n]=1,t._template=a,t}return t[i]=e[i]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<s.length;t++){var n,r=s[t],a=r.name;c(a)&&!l[a]&&((n={_template:r,name:a,_input:{_templateitemname:a}})[f]=r[f],e.push(n),l[a]=1)}return e}}},n.arrayDefaultKey=a,n.arrayEditor=function(a,e,t){var n,r=(d.nestedProperty(a,e).get()||[]).length,i=t._index,o=r<=i&&(t._input||{})._templateitemname,s=e+"["+(i=o?r:i)+"]";function l(){n={},o&&(n[s]={},n[s][f]=o)}function c(e,t){o?d.nestedProperty(n[s],e).set(t):n[s+"."+e]=t}function u(){var e=n;return l(),e}return l(),{modifyBase:function(e,t){n[e]=t},modifyItem:c,getUpdateObj:u,applyUpdate:function(e,t){e&&c(e,t);var n,r=u();for(n in r)d.nestedProperty(a,n).set(r[n])}}}},{"../lib":285,"../plots/attributes":327}],321:[function(e,t,z){"use strict";var F=e("@plotly/d3"),u=e("../registry"),j=e("../plots/plots"),H=e("../lib"),d=e("../lib/clear_gl_canvases"),B=e("../components/color"),q=e("../components/drawing"),a=e("../components/titles"),U=e("../components/modebar"),Y=e("../plots/cartesian/axes"),V=e("../constants/alignment"),n=e("../plots/cartesian/constraints"),l=n.enforce,c=n.clean,f=e("../plots/cartesian/autorange").doAutoRange;function r(e){var t,r,n=e._fullLayout,a=n._size,i=a.p,o=Y.list(e,"",!0);if(n._paperdiv.style({width:e._context.responsive&&n.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":n.width+"px",height:e._context.responsive&&n.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":n.height+"px"}).selectAll(".main-svg").call(q.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor),z.drawMainTitle(e),U.manage(e),!n._has("cartesian"))return j.previousPromises(e);function s(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-i-r:t._offset+t._length+i+r:a.t+a.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+i+r:t._offset-i-r:a.l+a.w*(e.position||0)+r%1}for(t=0;t<o.length;t++){var l,c=(l=o[t])._anchorAxis;l._linepositions={},l._lw=q.crispRound(e,l.linewidth,1),l._mainLinePosition=s(l,c,l.side),l._mainMirrorPosition=l.mirror&&c?s(l,c,V.OPPOSITE_SIDE[l.side]):null}var u,d,f,p,h=[],m=[],g=[],y=1===B.opacity(n.paper_bgcolor)&&1===B.opacity(n.plot_bgcolor)&&n.paper_bgcolor===n.plot_bgcolor;for(r in n._plots)(p=n._plots[r]).mainplot?(p.bg&&p.bg.remove(),p.bg=void 0):(u=p.xaxis.domain,d=p.yaxis.domain,f=p.plotgroup,!function(e,t,n){for(var r=0;r<n.length;r++){var a=n[r][0],i=n[r][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&(i[0]<t[1]&&i[1]>t[0]))return 1}}(u,d,g)?(f.select("rect.bg").remove(),g.push([u,d]),y||(h.push(r),m.push(r))):(d=f.node(),f=p.bg=H.ensureSingle(f,"rect","bg"),d.insertBefore(f.node(),d.childNodes[0]),m.push(r)));var v,x,b,_,w,T,M=n._bgLayer.selectAll(".bg").data(h);for(M.enter().append("rect").classed("bg",!0),M.exit().remove(),M.each(function(e){n._plots[e].bg=F.select(this)}),t=0;t<m.length;t++)p=n._plots[m[t]],A=p.xaxis,S=p.yaxis,p.bg&&void 0!==A._offset&&void 0!==S._offset&&p.bg.call(q.setRect,A._offset-i,S._offset-i,A._length+2*i,S._length+2*i).call(B.fill,n.plot_bgcolor).style("stroke-width",0);if(!n._hasOnlyLargeSploms)for(r in n._plots){var k,A=(p=n._plots[r]).xaxis,S=p.yaxis,E=p.clipId="clip"+n._uid+r+"plot",L=H.ensureSingleById(n._clips,"clipPath",E,function(e){e.classed("plotclip",!0).append("rect")});p.clipRect=L.select("rect").attr({width:A._length,height:S._length}),q.setTranslate(p.plot,A._offset,S._offset),E=p._hasClipOnAxisFalse?(k=null,E):(k=E,null),q.setClipUrl(p.plot,k,e),p.layerClipId=E}function C(e){return"M"+v+","+e+"H"+x}function D(e){return"M"+A._offset+","+e+"h"+A._length}function O(e){return"M"+e+","+_+"V"+b}function P(e){return"M"+e+","+S._offset+"v"+S._length}function I(e,t,n){if(!e.showline||r!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);n=t(e._mainLinePosition);return e.mirror&&(n+=t(e._mainMirrorPosition)),n}for(r in n._plots){p=n._plots[r],A=p.xaxis,S=p.yaxis;var R="M0,0";G(A,r)&&(w=W(A,"left",S,o),v=A._offset-(w?i+w:0),T=W(A,"right",S,o),x=A._offset+A._length+(T?i+T:0),N=s(A,S,"bottom"),w=s(A,S,"top"),!(T=!A._anchorAxis||r!==A._mainSubplot)||"allticks"!==A.mirror&&"all"!==A.mirror||(A._linepositions[r]=[N,w]),R=I(A,C,D),T&&A.showline&&("all"===A.mirror||"allticks"===A.mirror)&&(R+=C(N)+C(w)),p.xlines.style("stroke-width",A._lw+"px").call(B.stroke,A.showline?A.linecolor:"rgba(0,0,0,0)")),p.xlines.attr("d",R);var N="M0,0";G(S,r)&&(w=W(S,"bottom",A,o),b=S._offset+S._length+(w?i:0),R=W(S,"top",A,o),_=S._offset-(R?i:0),w=s(S,A,"left"),R=s(S,A,"right"),!(T=!S._anchorAxis||r!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[r]=[w,R]),N=I(S,O,P),T&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(N+=O(w)+O(R)),p.ylines.style("stroke-width",S._lw+"px").call(B.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),p.ylines.attr("d",N)}return Y.makeClipPaths(e),j.previousPromises(e)}function G(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function o(e,t,n){if(n.showline&&n._lw){if("all"===n.mirror||"allticks"===n.mirror)return 1;var r=n._anchorAxis;if(r){var a=V.FROM_BL[t];return n.side===t?r.domain[a]===e.domain[a]:n.mirror&&r.domain[1-a]===e.domain[1-a]}}}function W(e,t,n,r){if(o(e,t,n))return n._lw;for(var a=0;a<r.length;a++){var i=r[a];if(i._mainAxis===n._mainAxis&&o(e,t,i))return i._lw}return 0}z.layoutStyles=function(e){return H.syncOrAsync([j.doAutoMargin,r],e)},z.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var t=e.title,e="middle";H.isRightAnchor(t)?e="end":H.isLeftAnchor(t)&&(e="start");return e}(t),r=function(e){var t=e.title,e="0em";H.isTopAnchor(t)?e=V.CAP_SHIFT+"em":H.isMiddleAnchor(t)&&(e=V.MID_SHIFT+"em");return e}(t);a.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:function(e,t){var n=e.title,r=e._size,a=0;"start"===t?a=n.pad.l:"end"===t&&(a=-n.pad.r);return"paper"!==n.xref?e.width*n.x+a:r.l+r.w*n.x+a}(t,n),y:function(e,t){var n=e.title,r=e._size,a=0;"0em"!==t&&t?t===V.CAP_SHIFT+"em"&&(a=n.pad.t):a=-n.pad.b;return"auto"===n.y?r.t/2:"paper"!==n.yref?e.height-e.height*n.y+a:r.t+r.h-r.h*n.y+a}(t,r),"text-anchor":n,dy:r}})},z.doTraceStyle=function(e){for(var t=e.calcdata,n=[],r=0;r<t.length;r++){var a=t[r],i=a[0]||{},o=i.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(a,o);s=s.editStyle;s&&n.push({fn:s,cd0:i})}if(n.length){for(r=0;r<n.length;r++){var c=n[r];c.fn(e,c.cd0)}d(e),z.redrawReglTraces(e)}return j.style(e),u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doColorBars=function(e){return u.getComponentMethod("colorbar","draw")(e),j.previousPromises(e)},z.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,u.call("_doPlot",e,"",t)},z.doLegend=function(e){return u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doTicksRelayout=function(e){return Y.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(u.subplotsRegistry.splom.updateGrid(e),d(e),z.redrawReglTraces(e)),z.drawMainTitle(e),j.previousPromises(e)},z.doModeBar=function(e){var t=e._fullLayout;U.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return j.previousPromises(e)},z.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var a=t[n[r]];a._scene.setViewport(a)}},z.drawData=function(e){var t=e._fullLayout;d(e);for(var n=t._basePlotModules,r=0;r<n.length;r++)n[r].plot(e);return z.redrawReglTraces(e),j.style(e),u.getComponentMethod("shapes","draw")(e),u.getComponentMethod("annotations","draw")(e),u.getComponentMethod("images","draw")(e),t._replotting=!1,j.previousPromises(e)},z.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,a=e._fullData,i=[],o=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<a.length;n++){var s=a[n];!0===s.visible&&0!==s._length&&("splom"===s.type?t._splomScenes[s.uid].draw():"scattergl"===s.type?H.pushUnique(i,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&H.pushUnique(o,s.subplot))}for(n=0;n<i.length;n++)(r=t._plots[i[n]])._scene&&r._scene.draw();for(n=0;n<o.length;n++)(r=t[o[n]]._subplot)._scene&&r._scene.draw()}},z.doAutoRangeAndConstraints=function(e){for(var t,n=Y.list(e,"",!0),r={},a=0;a<n.length;a++)if(!r[(t=n[a])._id]){r[t._id]=1,c(e,t),f(e,t);var i=t._matchGroup;if(i)for(var o in i){var s=Y.getFromId(e,o);f(e,s,t.range),r[o]=1}}l(e)},z.finalDraw=function(e){u.getComponentMethod("rangeslider","draw")(e),u.getComponentMethod("rangeselector","draw")(e)},z.drawMarginPushers=function(e){u.getComponentMethod("legend","draw")(e),u.getComponentMethod("rangeselector","draw")(e),u.getComponentMethod("sliders","draw")(e),u.getComponentMethod("updatemenus","draw")(e),u.getComponentMethod("colorbar","draw")(e)}},{"../components/color":155,"../components/drawing":177,"../components/modebar":218,"../components/titles":253,"../constants/alignment":260,"../lib":285,"../lib/clear_gl_canvases":273,"../plots/cartesian/autorange":330,"../plots/cartesian/axes":331,"../plots/cartesian/constraints":339,"../plots/plots":366,"../registry":373,"@plotly/d3":20}],322:[function(e,t,n){"use strict";var v=e("../lib"),x=v.isPlainObject,d=e("./plot_schema"),h=e("../plots/plots"),f=e("../plots/attributes"),b=e("./plot_template"),m=e("./plot_config").dfltConfig;function p(s,e){s=v.extendDeep({},s);var t,l,n=Object.keys(s).sort();function r(e,t,n){if(x(t)&&x(e))p(e,t);else if(Array.isArray(t)&&Array.isArray(e)){var r=b.arrayTemplater({_template:s},n);for(l=0;l<t.length;l++){var a=t[l],i=r.newItem(a)._template;i&&p(i,a)}var o=r.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(t=0;t<n.length;t++){var a=n[t],i=s[a];if(a in e?r(i,e[a],a):e[a]=i,_(a)===a)for(var o in e){var c=_(o);o===c||c!==a||o in s||r(i,e[o],a)}}}function _(e){return e.replace(/[0-9]+$/,"")}function w(e,t,n,r,a){var i,o=a&&n(a);for(i in e){var s,l=e[i],c=T(e,i,r),u=T(e,i,a),d=n(u);if(d||(s=_(i))!==i&&(d=n(u=T(e,s,a))),(!o||o!==d)&&!(!d||d._noTemplating||"data_array"===d.valType||d.arrayOk&&Array.isArray(l)))if(!d.valType&&x(l))w(l,t,n,c,u);else if(d._isLinkedToArray&&Array.isArray(l))for(var f=!1,p=0,h={},m=0;m<l.length;m++){var g,y=l[m];x(y)&&((g=y.name)?h[g]||(w(y,t,n,T(l,p,c),T(l,p,u)),p++,h[g]=1):f||(g=T(e,b.arrayDefaultKey(i),r),w(y,t,n,y=T(l,p,c),T(l,p,u)),y=v.nestedProperty(t,y),v.nestedProperty(t,g).set(y.get()),y.set(null),f=!0))}else v.nestedProperty(t,c).set(l)}}function T(e,t,n){t=n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t;return t}function g(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=v.isPlainObject(e)?e:v.getGraphDiv(e),e=v.extendDeep({_context:m},{data:e.data,layout:e.layout}),h.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var r={data:{},layout:{}};t.forEach(function(e){var t={};w(e,t,function(e,t){return d.getTraceValObject(e,v.nestedProperty({},t).parts)}.bind(null,e));e=v.coerce(e,{},f,"type");(r.data[e]||(r.data[e]=[])).push(t)}),w(n,r.layout,function(e,t){return d.getLayoutValObject(e,v.nestedProperty({},t).parts)}.bind(null,n)),delete r.layout.template;t=n.template;if(x(t)){var a,i,o,s,l,c,n=t.layout;x(n)&&p(n,r.layout);var u=t.data;if(x(u)){for(i in r.data)if(o=u[i],Array.isArray(o)){for(c=(l=r.data[i]).length,s=o.length,a=0;a<c;a++)p(o[a%s],l[a]);for(a=c;a<s;a++)l.push(v.extendDeep({},o[a]))}for(i in u)i in r.data||(r.data[i]=v.extendDeep([],u[i]))}}return r},n.validateTemplate=function(e,t){var n=v.extendDeep({},{_context:m,data:e.data,layout:e.layout}),r=n.layout||{},e=(t=!x(t)?r.template||{}:t).layout,a=t.data,i=[];n.layout=r,n.layout.template=t,h.supplyDefaults(n);var t=n._fullLayout,o=n._fullData,s={};if(x(e)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&x(t[r])){for(var a=_(r),i=[],o=0;o<n.length;o++)i.push(T(t,r,n[o])),a!==r&&i.push(T(t,a,n[o]));for(o=0;o<i.length;o++)s[i[o]]=1;e(t[r],i)}}(t,["layout"]),function e(t,n){for(var r in t){var a;-1===r.indexOf("defaults")&&x(t[r])&&(a=T(t,r,n),s[a]?e(t[r],a):i.push({code:"unused",path:a}))}}(e,"layout")):i.push({code:"layout"}),x(a)){for(var l={},c=0;c<o.length;c++){var u,d=o[c];l[u=d.type]=(l[u]||0)+1,d._fullInput._template||i.push({code:"missing",index:d._fullInput.index,traceType:u})}for(u in a){var f=a[u].length,p=l[u]||0;p<f?i.push({code:"unused",traceType:u,templateCount:f,dataCount:p}):f<p&&i.push({code:"reused",traceType:u,templateCount:f,dataCount:p})}}else i.push({code:"data"});if(!function e(t,n){for(var r in t){var a;"_"!==r.charAt(0)&&(a=t[r],r=T(t,r,n),x(a)?(Array.isArray(t)&&!1===a._template&&a.templateitemname&&i.push({code:"missing",path:r,templateitemname:a.templateitemname}),e(a,r)):Array.isArray(a)&&function(e){for(var t=0;t<e.length;t++)if(x(e[t]))return 1}(a)&&e(a,r))}}({data:o,layout:t},""),i.length)return i.map(g)}},{"../lib":285,"../plots/attributes":327,"../plots/plots":366,"./plot_config":318,"./plot_schema":319,"./plot_template":320}],323:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),_=e("./plot_api"),w=e("../plots/plots"),T=e("../lib"),M=e("../snapshot/helpers"),k=e("../snapshot/tosvg"),A=e("../snapshot/svgtoimg"),S=e("../version").version,E={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};t.exports=function(e,n){var r,t,a,i;function o(e){return!(e in n)||T.validate(n[e],E[e])}if(n=n||{},i=T.isPlainObject(e)?(r=e.data||[],t=e.layout||{},a=e.config||{},{}):(e=T.getGraphDiv(e),r=T.extendDeep([],e.data),t=T.extendDeep({},e.layout),a=e._context,e._fullLayout||{}),!o("width")&&null!==n.width||!o("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+T.join2(E.format.values,", "," or ")+".");var s={};function l(e,t){return T.coerce(n,s,E,e,t)}var c=l("format"),u=l("width"),d=l("height"),f=l("scale"),e=l("setBackground"),p=l("imageDataOnly"),h=document.createElement("div");h.style.position="absolute",h.style.left="-5000px",document.body.appendChild(h);var m=T.extendFlat({},t);u?m.width=u:null===n.width&&b(i.width)&&(m.width=i.width),d?m.height=d:null===n.height&&b(i.height)&&(m.height=i.height);var g=T.extendFlat({},a,{_exportedPlot:!0,staticPlot:!0,setBackground:e}),y=M.getRedrawFunc(h);function v(){return new Promise(function(e){setTimeout(e,M.getDelay(h._fullLayout))})}function x(){return new Promise(function(e,t){var n=k(h,c,f),r=h._fullLayout.width,a=h._fullLayout.height;function i(){_.purge(h),document.body.removeChild(h)}if("full-json"===c){var o=w.graphJson(h,!1,"keepdata","object",!0,!0);return o.version=S,o=JSON.stringify(o),i(),e(p?o:M.encodeJSON(o))}if(i(),"svg"===c)return e(p?n:M.encodeSVG(n));o=document.createElement("canvas");o.id=T.randstr(),A({format:c,width:r,height:a,scale:f,canvas:o,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(t,n){_.newPlot(h,r,m,g).then(y).then(v).then(x).then(function(e){t((e=e,p?e.replace(M.IMAGE_URL_PREFIX,""):e))}).catch(function(e){n(e)})})}},{"../lib":285,"../plots/plots":366,"../snapshot/helpers":377,"../snapshot/svgtoimg":379,"../snapshot/tosvg":381,"../version":546,"./plot_api":317,"fast-isnumeric":31}],324:[function(e,t,n){"use strict";var D=e("../lib"),b=e("../plots/plots"),_=e("./plot_schema"),w=e("./plot_config").dfltConfig,O=D.isPlainObject,P=Array.isArray,I=D.isArrayOrTypedArray;function R(e,t,n,r,a,i){i=i||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=i.slice();c.push(l);var u=e[l],d=t[l],f=function(e,t){if(t in e)return e[t];t=z(t);return e[t.keyMinusId]}(n,l),p=(f||{}).valType,h="info_array"===p,m="colorscale"===p,g=(f||{}).items;if(function(e,t){var n=z(t),r=n.keyMinusId,n=n.id;if(r in e&&e[r]._isSubplotObj&&n)return!0;return t in e}(n,l))if(O(u)&&O(d)&&"any"!==p)R(u,d,f,r,a,c);else if(h&&P(u)){u.length>d.length&&r.push(N("unused",a,c.concat(d.length)));var y,v,x,b,_=d.length,w=Array.isArray(g);if(w&&(_=Math.min(_,g.length)),2===f.dimensions)for(y=0;y<_;y++)if(P(u[y])){u[y].length>d[y].length&&r.push(N("unused",a,c.concat(y,d[y].length)));for(var T=d[y].length,M=0;M<(w?Math.min(T,g[y].length):T);M++)v=w?g[y][M]:g,x=u[y][M],b=d[y][M],D.validate(x,v)?b!==x&&b!==+x&&r.push(N("dynamic",a,c.concat(y,M),x,b)):r.push(N("value",a,c.concat(y,M),x))}else r.push(N("array",a,c.concat(y),u[y]));else for(y=0;y<_;y++)v=w?g[y]:g,x=u[y],b=d[y],D.validate(x,v)?b!==x&&b!==+x&&r.push(N("dynamic",a,c.concat(y),x,b)):r.push(N("value",a,c.concat(y),x))}else if(f.items&&!h&&P(u)){for(var k=g[Object.keys(g)[0]],A=[],S=0;S<d.length;S++){var E,L,C=d[S]._index||S;(L=c.slice()).push(C),O(u[C])&&O(d[S])&&(A.push(C),E=u[C],C=d[S],O(E)&&!1!==E.visible&&!1===C.visible?r.push(N("invisible",a,L)):R(E,C,k,r,a,L))}for(S=0;S<u.length;S++)(L=c.slice()).push(S),O(u[S])?-1===A.indexOf(S)&&r.push(N("unused",a,L)):r.push(N("object",a,L,u[S]))}else!O(u)&&O(d)?r.push(N("object",a,c,u)):I(u)||!I(d)||h||m?l in t?D.validate(u,f)?"enumerated"===f.valType&&(f.coerceNumber&&u!==+d||u!==d)&&r.push(N("dynamic",a,c,u,d)):r.push(N("value",a,c,u)):r.push(N("unused",a,c,u)):r.push(N("array",a,c,u));else r.push(N("schema",a,c))}}return r}t.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,r,a=_.get(),i=[],o={_context:D.extendFlat({},w)};P(e)?(o.data=D.extendDeep([],e),n=e):(o.data=[],n=[],i.push(N("array","data"))),O(t)?(o.layout=D.extendDeep({},t),r=t):(o.layout={},r={},1<arguments.length&&i.push(N("object","layout"))),b.supplyDefaults(o);for(var s=o._fullData,l=n.length,c=0;c<l;c++){var u=n[c],d=["data",c];if(O(u)){var f=s[c],p=f.type,h=a.traces[p].attributes;!(h.type={valType:"enumerated",values:[p]})===f.visible&&!1!==u.visible&&i.push(N("invisible",d)),R(u,f,h,i,d);var m=u.transforms,g=f.transforms;if(m){P(m)||i.push(N("array",d,["transforms"])),d.push("transforms");for(var y=0;y<m.length;y++){var v=["transforms",y],x=m[y].type;O(m[y])?((x=a.transforms[x]?a.transforms[x].attributes:{}).type={valType:"enumerated",values:Object.keys(a.transforms)},R(m[y],g[y],x,i,d,v)):i.push(N("object",d,v))}}}else i.push(N("object",d))}return R(r,o._fullLayout,function(e,t){for(var n=e.layout.layoutAttributes,r=0;r<t.length;r++){var a=t[r],i=e.traces[a.type],o=i.layoutAttributes;o&&(a.subplot?D.extendFlat(n[i.attributes.subplot.dflt],o):D.extendFlat(n,o))}return n}(a,s),i,"layout"),0===i.length?void 0:i};var l={object:function(e,t){t="layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":a(e)+"key "+t;return t+" must be linked to an object container"},array:function(e,t){t="data"===e?"The data argument":a(e)+"key "+t;return t+" must be linked to an array container"},schema:function(e,t){return a(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){n=O(n)?"container":"key";return a(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[a(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?a(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[a(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function a(e){return P(e)?"In data trace "+e[1]+", ":"In "+e+", "}function N(e,t,n,r,a){var i;n=n||"";var o=P(t)?(i=t[0],t[1]):(i=t,null),s=function(e){if(!P(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),a=l[e](t,s,r,a);return D.log(a),{code:e,container:i,trace:o,path:n,astr:s,msg:a}}var r=D.counterRegex("([a-z]+)");function z(e){e=e.match(r);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":285,"../plots/plots":366,"./plot_config":318,"./plot_schema":319}],325:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],326:[function(e,t,n){"use strict";var h=e("../lib"),m=e("../plot_api/plot_template");t.exports=function(e,t,n){var r,a=n.name,i=n.inclusionAttr||"visible",o=t[a],s=h.isArrayOrTypedArray(e[a])?e[a]:[],l=t[a]=[],c=m.arrayTemplater(t,a,i);for(p=0;p<s.length;p++){var u=s[p];h.isPlainObject(u)?r=c.newItem(u):(r=c.newItem({}))[i]=!1,r._index=p,!1!==r[i]&&n.handleItemDefaults(u,r,t,n),l.push(r)}var d=c.defaultItems();for(p=0;p<d.length;p++)(r=d[p])._index=l.length,n.handleItemDefaults({},r,t,n,{}),l.push(r);if(h.isArrayOrTypedArray(o))for(var f=Math.min(o.length,l.length),p=0;p<f;p++)h.relinkPrivateKeys(l[p],o[p]);return l}},{"../lib":285,"../plot_api/plot_template":320}],327:[function(e,t,n){"use strict";var r=e("./font_attributes"),e=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:r({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":186,"./font_attributes":360}],328:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),r=e("../../lib"),b=r.dateTime2ms,_=r.incrementMonth,w=e("../../constants/numerical").ONEAVGMONTH;t.exports=function(e,t,n,r){if("date"!==t.type)return r;var a=e[n+"periodalignment"];if(!a)return r;var i,o=e[n+"period"];if(x(o)){if((o=+o)<=0)return r}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(0<s&&Math.round(s)===s))return r;i=s}for(var l=t.calendar,c="start"===a,u="end"===a,n=e[n+"period0"],d=b(n,l)||0,f=[],p=r.length,h=0;h<p;h++){var m,g,y,v=r[h];if(i){for(m=Math.round((v-d)/(i*w)),y=_(d,i*m,l);v<y;)y=_(y,-i,l);for(;y<=v;)y=_(y,i,l);g=_(y,-i,l)}else{for(y=d+(m=Math.round((v-d)/o))*o;v<y;)y-=o;for(;y<=v;)y+=o;g=y-o}f[h]=c?g:u?y:(g+y)/2}return f}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],329:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],330:[function(e,t,n){"use strict";var p=e("@plotly/d3"),S=e("fast-isnumeric"),k=e("../../lib"),E=e("../../constants/numerical").FP_SAFE,i=e("../../registry"),h=e("../../components/drawing"),e=e("./axis_ids"),m=e.getFromId,s=e.isLinked;function o(e,t){var n,r=[],a=e._fullLayout,i=L(a,t,0),o=L(a,t,1),s=C(e,t),l=s.min,c=s.max;if(0===l.length||0===c.length)return k.simpleMap(t.range,t.r2l);for(var u=l[0].val,d=c[0].val,f=1;f<l.length&&u===d;f++)u=Math.min(u,l[f].val);for(f=1;f<c.length&&u===d;f++)d=Math.max(d,c[f].val);var p=!1;t.range&&(p=(b=k.simpleMap(t.range,t.r2l))[1]<b[0]),"reversed"===t.autorange&&(t.autorange=p=!0);var h,m,g,y,v,x,b,_=t.rangemode,a="tozero"===_,e="nonnegative"===_,w=t._length,T=w/10,M=0;for(f=0;f<l.length;f++)for(h=l[f],n=0;n<c.length;n++)0<(x=(m=c[n]).val-h.val-A(t,h.val,m.val))&&(T<(v=w-i(h)-o(m))?M<x/v&&(g=h,y=m,M=x/v):M<x/w&&(g={val:h.val,nopad:1},y={val:m.val,nopad:1},M=x/w));return r=u===d?(s=u-1,b=u+1,a?0===u?[0,1]:(_=(0<u?c:l).reduce(function(e,t){return Math.max(e,o(t))},0),_=u/(1-Math.min(.5,_/w)),0<u?[0,_]:[_,0]):e?[Math.max(0,s),Math.max(1,b)]:[s,b]):(a?(0<=g.val&&(g={val:0,nopad:1}),y.val<=0&&(y={val:0,nopad:1})):e&&(g.val-M*i(g)<0&&(g={val:0,nopad:1}),y.val<=0&&(y={val:1,nopad:1})),M=(y.val-g.val-A(t,h.val,m.val))/(w-i(g)-o(y)),[g.val-M*i(g),y.val+M*o(y)]),p&&r.reverse(),k.simpleMap(r,t.l2r||Number)}function A(e,t,n){var r=0;if(e.rangebreaks)for(var a=e.locateBreaks(t,n),i=0;i<a.length;i++){var o=a[i];r+=o.max-o.min}return r}function L(e,t,n){var r,a=.05*t._length,i=t._anchorAxis||{};-1===(t.ticklabelposition||"").indexOf("inside")&&-1===(i.ticklabelposition||"").indexOf("inside")||(r=!(r="reversed"===t.autorange)?(i=k.simpleMap(t.range,t.r2l))[1]<i[0]:r)&&(n=!n);var o=0;return s(e,t._id)||(o=function(e,t,n){var r,a=0,i="x"===t._id.charAt(0);for(r in e._plots){var o=e._plots[r];if(t._id===o.xaxis._id||t._id===o.yaxis._id){var s=(i?o.yaxis:o.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===s.side||"bottom"===s.side)||n&&("top"===s.side||"right"===s.side))){if(s._vals){var o=k.deg2rad(s._tickAngles[s._id+"tick"]||0),l=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o));s._vals[0].bb||(o=s._id+"tick",s._selections[o].each(function(e){var t=p.select(this);t.select(".text-math-group").empty()&&(e.bb=h.bBox(t.node()))}));for(var u=0;u<s._vals.length;u++){var d,f=s._vals[u].bb;f&&(d=2*g+f.width,f=2*g+f.height,a=Math.max(a,i?Math.max(d*l,f*c):Math.max(f*l,d*c)))}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(a+=s.ticklen||0)}}}return a}(e,t,n)),a=Math.max(o,a),"domain"===t.constrain&&t._inputDomain&&(a*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?a:o)}}t.exports={getAutoRange:o,makePadFn:L,doAutoRange:function(e,t,n){t.setScale(),t.autorange&&(t.range=n?n.slice():o(e,t),t._r=t.range.slice(),t._rl=k.simpleMap(t._r,t.r2l),a=t._input,(r={})[t._attr+".range"]=t.range,r[t._attr+".autorange"]=t.autorange,i.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,r),a.range=t.range.slice(),a.autorange=t.autorange);var r=t._anchorAxis;{var a;r&&r.rangeslider&&((a=r.rangeslider[t._name])&&"auto"===a.rangemode&&(a.range=o(e,t)),r._input.rangeslider[t._name]=k.extendFlat({},a))}},findExtremes:function(t,n,e){e=e||{};t._m||t.setScale();var r,a,i,o,s,l,c,u,d=[],f=[],p=n.length,h=e.padded||!1,m=e.tozero&&("linear"===t.type||"-"===t.type),g="log"===t.type,y=!1,v=e.vpadLinearized||!1;function x(t){if(Array.isArray(t))return y=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var b=x((0<t._m?e.ppadplus:e.ppadminus)||e.ppad||0),_=x((0<t._m?e.ppadminus:e.ppadplus)||e.ppad||0),w=x(e.vpadplus||e.vpad),T=x(e.vpadminus||e.vpad);if(!y){if(c=1/0,u=-1/0,g)for(r=0;r<p;r++)(a=n[r])<c&&0<a&&(c=a),u<a&&a<E&&(u=a);else for(r=0;r<p;r++)(a=n[r])<c&&-E<a&&(c=a),u<a&&a<E&&(u=a);n=[c,u],p=2}var M={tozero:m,extrapad:h};function k(e){o=n[e],S(o)&&(s=b(e),l=_(e),o=v?(i=t.c2l(o)-T(e),t.c2l(o)+w(e)):(c=o-T(e),u=o+w(e),g&&c<u/10&&(c=u/10),i=t.c2l(c),t.c2l(u)),m&&(i=Math.min(0,i),o=Math.max(0,o)),P(i)&&D(d,i,l,M),P(o)&&O(f,o,s,M))}var A=Math.min(6,p);for(r=0;r<A;r++)k(r);for(r=p-1;A<=r;r--)k(r);return{min:d,max:f,opts:e}},concatExtremes:C};var g=3;function C(e,t,n){var a,i,o=t._id,r=e._fullData,s=e._fullLayout,l=[],c=[];function u(e,t){for(a=0;a<t.length;a++){var n=e[t[a]],r=(n._extremes||{})[o];if(!0===n.visible&&r){for(h=0;h<r.min.length;h++)i=r.min[h],D(l,i.val,i.pad,{extrapad:i.extrapad});for(h=0;h<r.max.length;h++)i=r.max[h],O(c,i.val,i.pad,{extrapad:i.extrapad})}}}if(u(r,t._traceIndices),u(s.annotations||[],t._annIndices||[]),u(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var d in t._matchGroup)if(d!==t._id){for(var d=m(e,d),f=C(e,d,!0),p=t._length/d._length,h=0;h<f.min.length;h++)i=f.min[h],D(l,i.val,i.pad*p,{extrapad:i.extrapad});for(h=0;h<f.max.length;h++)i=f.max[h],O(c,i.val,i.pad*p,{extrapad:i.extrapad})}return{min:l,max:c}}function D(e,t,n,r){a(e,t,n,r,l)}function O(e,t,n,r){a(e,t,n,r,c)}function a(e,t,n,r,a){for(var i=r.tozero,o=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(a(c.val,t)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}a(t,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(e.splice(l,1),l--)}s&&e.push({val:t,pad:(i=i&&0===t)?0:n,extrapad:!i&&o})}function P(e){return S(e)&&Math.abs(e)<E}function l(e,t){return e<=t}function c(e,t){return t<=e}},{"../../components/drawing":177,"../../constants/numerical":265,"../../lib":285,"../../registry":373,"./axis_ids":335,"@plotly/d3":20,"fast-isnumeric":31}],331:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),j=e("../../plots/plots"),H=e("../../registry"),B=e("../../lib"),u=B.strTranslate,d=e("../../lib/svg_text_utils"),q=e("../../components/titles"),U=e("../../components/color"),Y=e("../../components/drawing"),b=e("./layout_attributes"),f=e("./clean_ticks"),r=e("../../constants/numerical"),M=r.ONEMAXYEAR,k=r.ONEAVGYEAR,A=r.ONEMINYEAR,S=r.ONEMAXQUARTER,E=r.ONEAVGQUARTER,L=r.ONEMINQUARTER,C=r.ONEMAXMONTH,D=r.ONEAVGMONTH,O=r.ONEMINMONTH,P=r.ONEWEEK,I=r.ONEDAY,R=I/2,N=r.ONEHOUR,s=r.ONEMIN,l=r.ONESEC,y=r.MINUS_SIGN,z=r.BADNUM,o={K:"zeroline"},F={K:"gridline",L:"path"},V={K:"tick",L:"path"},G={K:"tick",L:"text"},r=e("../../constants/alignment"),x=r.MID_SHIFT,_=r.CAP_SHIFT,W=r.LINE_SPACING,Z=r.OPPOSITE_SIDE,$=t.exports={};$.setConvert=e("./set_convert");var c=e("./axis_autotype"),t=e("./axis_ids"),i=t.idSort,X=t.isLinked;$.id2name=t.id2name,$.name2id=t.name2id,$.cleanId=t.cleanId,$.list=t.list,$.listIds=t.listIds,$.getFromId=t.getFromId,$.getFromTrace=t.getFromTrace;e=e("./autorange");$.getAutoRange=e.getAutoRange,$.findExtremes=e.findExtremes;var a=1e-4;function J(e){var t=(e[1]-e[0])*a;return[e[0]-t,e[1]+t]}$.coerceRef=function(e,t,n,r,a,i){var o=r.charAt(r.length-1),n=n._fullLayout._subplots[o+"axis"],o=r+"ref",r={};return a=a||(n[0]||("string"==typeof i?i:i[0])),i=i||a,n=n.concat(n.map(function(e){return e+" domain"})),r[o]={valType:"enumerated",values:n.concat(i?"string"==typeof i?[i]:i:[]),dflt:a},B.coerce(e,t,r,o)},$.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},$.coercePosition=function(e,t,n,r,a,i){var o,s;"range"!==$.getRefType(r)?(s=B.ensureNumber,o=n(a,i)):(o=n(a,i=(r=$.getFromId(t,r)).fraction2r(i)),s=r.cleanPos),e[a]=s(o)},$.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?B.ensureNumber:$.getFromId(t,n).cleanPos)(e)},$.redrawComponents=function(u,d){d=d||$.listIds(u);var f=u._fullLayout;function e(e,t,n,r){for(var a=H.getComponentMethod(e,t),i={},o=0;o<d.length;o++)for(var s=f[$.id2name(d[o])][n],l=0;l<s.length;l++){var c=s[l];if(!i[c]&&(a(u,c),i[c]=1,r))return}}e("annotations","drawOne","_annIndices"),e("shapes","drawOne","_shapeIndices"),e("images","draw","_imgIndices",!0)};var p=$.getDataConversions=function(e,t,n,r){var a,n="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(n)){if(a={type:c(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},$.setConvert(a),"category"===a.type)for(var i=0;i<r.length;i++)a.d2c(r[i])}else a=$.getFromTrace(e,t,n);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===n?{d2c:m,c2d:m}:{d2c:h,c2d:h}};function h(e){return+e}function m(e){return String(e)}function g(e){return+e.substring(1)}$.getDataToCoordFunc=function(e,t,n,r){return p(e,t,n,r).d2c},$.counterLetter=function(e){e=e.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},$.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):(2e-6<(t/e._minDtick+1e-6)%1||2e-6<((n-e._forceTick0)/e._minDtick%1+1.000001)%1)&&(e._minDtick=0)):e._minDtick=0},$.saveRangeInitial=function(e,t){for(var n=$.list(e,"",!0),r=!1,a=0;a<n.length;a++){var i=n[a],o=void 0===i._rangeInitial,s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);(o&&!1===i.autorange||t&&s)&&(i._rangeInitial=i.range.slice(),r=!0)}return r},$.saveShowSpikeInitial=function(e,t){for(var n=$.list(e,"",!0),r=!1,a="on",i=0;i<n.length;i++){var o=n[i],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==a||o.showspikes||(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,r},$.autoBin=function(e,t,n,r,a,i){var o,s=B.aggNums(Math.min,null,e),l=B.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(i)||1),_dataSpan:l-s};a=a||t.calendar,o="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:B.simpleMap([s,l],t.c2r,0,a),calendar:a},$.setConvert(o),(i=i&&f.dtick(i,o.type))?(o.dtick=i,o.tick0=f.tick0(void 0,o.type,a)):(n?d=(l-s)/n:(i=B.distinctVals(e),n=(n=Math.pow(10,Math.floor(Math.log(i.minDiff)/Math.LN10)))*B.roundUp(i.minDiff/n,[.9,1.9,4.9,9.9],!0),d=Math.max(n,2*B.stdev(e)/Math.pow(e.length,r?.25:.4)),T(d)||(d=1)),$.autoTicks(o,d));var c,u=o.dtick,d=$.tickIncrement($.tickFirst(o),u,"reverse",a);if("number"==typeof u)c=(d=function(t,e,n,r,a){var i=0,o=0,s=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:T(e[u])||l++,c(e[u])&&i++,c(e[u]+n.dtick/2)&&o++;var d=e.length-l;s===d&&"date"!==n.type?n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick):o<.1*d&&(.3*d<i||c(r)||c(a))&&(a=n.dtick/2,t+=t+a<r?a:-a);return t}(d,e,o,s,l))+(1+Math.floor((l-d)/u))*u;else for(c=d="M"===o.dtick.charAt(0)?function(e,t,n,r,a){t=B.findExactDates(t,a);if(.8<t.exactDays){a=Number(n.substr(1));.8<t.exactYears&&a%12==0?e=$.tickIncrement(e,"M6","reverse")+1.5*I:.8<t.exactMonths?e=$.tickIncrement(e,"M1","reverse")+15.5*I:e-=R;n=$.tickIncrement(e,n);if(n<=r)return n}return e}(d,e,u,s,a):d,0;c<=l;)c=$.tickIncrement(c,u,!1,a),0;return{start:t.c2r(d,0,a),end:t.c2r(c,0,a),size:u,_dataSpan:l-s}},$.prepTicks=function(e,t){var n,r=B.simpleMap(e.range,e.r2l,void 0,void 0,t);e._dtickInit=e.dtick,e._tick0Init=e.tick0,"auto"!==e.tickmode&&e.dtick||((t=e.nticks)||(t="category"===e.type||"multicategory"===e.type?(n=e.tickfont?B.bigFont(e.tickfont.size||12):15,e._length/n):(n="y"===e._id.charAt(0)?40:80,B.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(t*=2)),"array"===e.tickmode&&(t*=100),e._roughDTick=Math.abs(r[1]-r[0])/t,$.autoTicks(e,e._roughDTick),0<e._minDtick&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))),"period"===e.ticklabelmode&&function(e){var t;function n(){return!(T(e.dtick)||"M"!==e.dtick.charAt(0))}var r=n(),a=$.getTickFormat(e);{var i;a&&(i=e._dtickInit!==e.dtick,/%[fLQsSMX]/.test(a)||(/%[HI]/.test(a)?(t=N,i&&!r&&e.dtick<N&&(e.dtick=N)):/%p/.test(a)?(t=R,i&&!r&&e.dtick<R&&(e.dtick=R)):/%[Aadejuwx]/.test(a)?(t=I,i&&!r&&e.dtick<I&&(e.dtick=I)):/%[UVW]/.test(a)?(t=P,i&&!r&&e.dtick<P&&(e.dtick=P)):/%[Bbm]/.test(a)?(t=D,i&&(r?g(e.dtick)<1:e.dtick<O)&&(e.dtick="M1")):/%[q]/.test(a)?(t=E,i&&(r?g(e.dtick)<3:e.dtick<L)&&(e.dtick="M3")):/%[Yy]/.test(a)&&(t=k,i&&(r?g(e.dtick)<12:e.dtick<A)&&(e.dtick="M12"))))}(r=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0);e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),ie(e)},$.calcTicks=function(e,t){$.prepTicks(e,t);var n=B.simpleMap(e.range,e.r2l,void 0,void 0,t);if("array"===e.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,r=new Array(e.length),a=J(B.simpleMap(t.range,t.r2l)),i=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]),s=0;Array.isArray(n)||(n=[]);var l="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var c=0;c<e.length;c++){var u=l(e[c]);i<u&&u<o&&(void 0===n[c]?r[s]=$.tickText(t,u):r[s]=oe(t,u,String(n[c])),s++)}s<e.length&&r.splice(s,e.length-s);t.rangebreaks&&(r=r.filter(function(e){return t.maskBreaks(e.x)!==z}));return r}(e);var r=J(n),a=r[0],i=r[1],o=n[1]<n[0],s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]),c="log"===e.type&&!(T(e.dtick)||"L"===e.dtick.charAt(0)),r="period"===e.ticklabelmode;if(e._tmin=$.tickFirst(e,t),e._tmin<a!=o)return[];"category"!==e.type&&"multicategory"!==e.type||(i=o?Math.max(-.5,i):Math.min(e._categories.length-.5,i));var u=e._tmin;e.rangebreaks&&e._tick0Init!==e.tick0&&(u=_e(u,e),o||(u=$.tickIncrement(u,e.dtick,!o,e.calendar))),r&&(u=$.tickIncrement(u,e.dtick,!o,e.calendar));for(var d=Math.max(1e3,e._length||0),f=[],p=null;o?i<=u:u<=i;u=$.tickIncrement(u,e.dtick,o,e.calendar)){if(e.rangebreaks&&!o){if(u<a)continue;if(e.maskBreaks(u)===z&&_e(u,e)>=l)break}if(f.length>d||u===p)break;var p=u,h=c&&u!==(0|u)?!0:!1;f.push({minor:h,value:u})}if(r&&function(e,t,n){for(var r=0;r<e.length;r++){var a,i=e[r].value,o=r,s=r+1,s=r<e.length-1?(o=r)+1:0<r?(o=r-1,r):o=r,l=e[o].value,o=e[s].value,s=Math.abs(o-l),o=n||s,l=0;A<=o?l=A<=s&&s<=M?s:k:n===E&&L<=o?l=L<=s&&s<=S?s:E:O<=o?l=O<=s&&s<=C?s:D:n===P&&P<=o?l=P:I<=o?l=I:n===R&&R<=o?l=R:n===N&&N<=o&&(l=N),s<=l&&(l=s,a=!0);var c=i+l;if(t.rangebreaks&&0<l){for(var u=0,d=0;d<84;d++){var f=(d+.5)/84;t.maskBreaks(i*(1-f)+f*c)!==z&&u++}(l*=u/84)||(e[r].drop=!0),a&&P<s&&(l=s)}(0<l||0===r)&&(e[r].periodX=i+l/2)}}(f,e,e._definedDelta),e.rangebreaks){var m="y"===e._id.charAt(0),g=1;"auto"===e.tickmode&&(g=e.tickfont?e.tickfont.size:12);for(var y,v=NaN,x=f.length-1;-1<x;x--)f[x].drop?f.splice(x,1):(f[x].value=_e(f[x].value,e),y=e.c2p(f[x].value),(m?y-g<v:v<y+g)?f.splice(o?x+1:x,1):v=y)}be(e)&&360===Math.abs(n[1]-n[0])&&f.pop(),e._tmax=(f[f.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var b=[];for(x=0;x<f.length;x++){var _=f[x].minor,w=f[x].value,w=$.tickText(e,w,!1,_);void 0!==(_=f[x].periodX)&&(l<(w.periodX=_)||_<s)&&(l<_&&(w.periodX=l),_<s&&(w.periodX=s),w.text=" ",e._prevDateHead=""),b.push(w)}return e._inCalcTicks=!1,b};var v=[2,5,10],K=[1,2,3,6,12],Q=[1,2,5,10,15,30],ee=[1,2,3,7,14],te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ne=[-.301,0,.301,.699,1],re=[15,30,45,90,180];function ae(e,t,n){return t*B.roundUp(e/t,n)}function ie(e){var t,n,r,a,i=e.dtick;e._tickexponent=0,T(i)||"string"==typeof i||(i=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type?(t=e.r2l(e.tick0),r=(n=e.l2r(t).replace(/(^-|i)/g,"")).length,"M"===String(i).charAt(0)?10<r||"01-01"!==n.substr(5)?e._tickround="d":e._tickround=+i.substr(1)%12==0?"y":"m":I<=i&&r<=10||15*I<=i?e._tickround="d":s<=i&&r<=16||N<=i?e._tickround="M":l<=i&&r<=19||s<=i?e._tickround="S":(a=e.l2r(t+i).replace(/^-/,"").length,e._tickround=Math.max(r,a)-20,e._tickround<0&&(e._tickround=4))):T(i)||"L"===i.charAt(0)?(a=e.range.map(e.r2d||Number),T(i)||(i=Number(i.substr(1))),e._tickround=2-Math.floor(Math.log(i)/Math.LN10+.01),i=Math.max(Math.abs(a[0]),Math.abs(a[1])),a=Math.floor(Math.log(i)/Math.LN10+.01),i=void 0===e.minexponent?3:e.minexponent,Math.abs(a)>i&&(le(e.exponentformat)&&!ce(a)?e._tickexponent=3*Math.round((a-1)/3):e._tickexponent=a)):e._tickround=null}function oe(e,t,n){e=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:e.size,font:e.family,fontColor:e.color}}$.autoTicks=function(e,t){var n,r,a;function i(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type?(e.tick0=B.dateTick0(e.calendar,0),k<(a=2*t)?(t/=k,o=i(10),e.dtick="M"+12*ae(t,o,v)):D<a?(t/=D,e.dtick="M"+ae(t,1,K)):I<a?(e.dtick=ae(t,I,e._hasDayOfWeekBreaks?[1,2,7,14]:ee),n=$.getTickFormat(e),(r="period"===e.ticklabelmode)&&(e._rawTick0=e.tick0),/%[uVW]/.test(n)?e.tick0=B.dateTick0(e.calendar,2):e.tick0=B.dateTick0(e.calendar,1),r&&(e._dowTick0=e.tick0)):N<a?e.dtick=ae(t,N,K):s<a?e.dtick=ae(t,s,Q):l<a?e.dtick=ae(t,l,Q):(o=i(10),e.dtick=ae(t,o,v))):"log"===e.type?(e.tick0=0,r=B.simpleMap(e.range,e.r2l),.7<t?e.dtick=Math.ceil(t):Math.abs(r[1]-r[0])<1?(a=1.5*Math.abs((r[1]-r[0])/t),t=Math.abs(Math.pow(10,r[1])-Math.pow(10,r[0]))/a,o=i(10),e.dtick="L"+ae(t,o,v)):e.dtick=.3<t?"D2":"D1"):"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):be(e)?(e.tick0=0,e.dtick=ae(t,o=1,re)):(e.tick0=0,o=i(10),e.dtick=ae(t,o,v)),0===e.dtick&&(e.dtick=1),!T(e.dtick)&&"string"!=typeof e.dtick){var o=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(o)}},$.tickIncrement=function(e,t,n,r){var a=n?-1:1;if(T(t))return B.increment(e,a*t);var i=t.charAt(0),o=a*Number(t.substr(1));if("M"===i)return B.incrementMonth(e,o,r);if("L"===i)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"!==i)throw"unrecognized dtick "+String(t);t="D2"===t?ne:te,a=e+.01*a,n=B.roundUp(B.mod(a,1),t,n);return Math.floor(a)+Math.log(w.round(Math.pow(10,n),1))/Math.LN10},$.tickFirst=function(e,t){var n=e.r2l||Number,r=B.simpleMap(e.range,n,void 0,void 0,t),a=r[1]<r[0],t=a?Math.floor:Math.ceil,i=J(r)[0],o=e.dtick,r=n(e.tick0);if(T(o)){n=t((i-r)/o)*o+r;return n="category"===e.type||"multicategory"===e.type?B.constrain(n,0,e._categories.length-1):n}var s=o.charAt(0),l=Number(o.substr(1));if("M"===s){for(var c,u,d=0,f=r;d<10;){if(((u=$.tickIncrement(f,o,a,e.calendar))-i)*(f-i)<=0)return a?Math.min(f,u):Math.max(f,u);c=(i-(f+u)/2)/(u-f),u=s+(Math.abs(Math.round(c))||1)*l,f=$.tickIncrement(f,u,c<0?!a:a,e.calendar),d++}return B.error("tickFirst did not converge",e),f}if("L"===s)return Math.log(t((Math.pow(10,i)-r)/l)*l+r)/Math.LN10;if("D"!==s)throw"unrecognized dtick "+String(o);r="D2"===o?ne:te,r=B.roundUp(B.mod(i,1),r,a);return Math.floor(i)+Math.log(w.round(Math.pow(10,r),1))/Math.LN10},$.tickText=function(n,r,a,e){var t=oe(n,r),i="array"===n.tickmode,o=a||i,s=n.type,l="category"===s?n.d2l_noadd:n.d2l;if(i&&Array.isArray(n.ticktext)){for(var c=B.simpleMap(n.range,n.r2l),u=(Math.abs(c[1]-c[0])-(n._lBreaks||0))/1e4,d=0;d<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[d]))<u);d++);if(d<n.ticktext.length)return t.text=String(n.ticktext[d]),t}function f(e){if(void 0===e)return 1;if(a)return"none"===e;var t={first:n._tmin,last:n._tmax}[e];return"all"!==e&&r!==t}var p,h,m,g,c=a?"never":"none"!==n.exponentformat&&f(n.showexponent)?"hide":"";return"date"===s?function(e,t,n,r){var a=e._tickround,i=n&&e.hoverformat||$.getTickFormat(e);r&&(a=T(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var o,s=B.formatDate(t.x,i,a,e._dateFormat,e.calendar,e._extraFormat),i=s.indexOf("\n");-1!==i&&(o=s.substr(i+1),s=s.substr(0,i));r&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,"")));o&&(n?"d"===a?s+=", "+o:s=o+(s?", "+s:""):e._inCalcTicks&&e._prevDateHead===o?(n=we(e),a=e._realSide||e.side,(!n&&"top"===a||n&&"bottom"===a)&&(s+="<br> ")):(e._prevDateHead=o,s+="<br>"+o));t.text=s}(n,t,a,o):"log"===s?function(e,t,n,r){var a=e.dtick,i=t.x,o=e.tickformat,s="string"==typeof a&&a.charAt(0);"never"===r&&(r="");n&&"L"!==s&&(a="L3",s="L");if(o||"L"===s)t.text=ue(Math.pow(10,i),e,r,n);else if(T(a)||"D"===s&&B.mod(i+.01,1)<.1){o=Math.round(i),r=Math.abs(o),n=e.exponentformat;"power"===n||le(n)&&ce(o)?(t.text=0===o?1:1===o?"10":"10<sup>"+(1<o?"":y)+r+"</sup>",t.fontSize*=1.25):("e"===n||"E"===n)&&2<r?t.text="1"+n+(0<o?"+":y)+r:(t.text=ue(Math.pow(10,i),e,"","fakehover"),"D1"===a&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==s)throw"unrecognized dtick "+String(a);t.text=String(Math.round(Math.pow(10,B.mod(i,1)))),t.fontSize*=.75}"D1"===e.dtick&&("0"!==(a=String(t.text).charAt(0))&&"1"!==a||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(i<0?.5:.25))))}(n,t,o,c):"category"===s?function(e,t){e=e._categories[Math.round(t.x)];void 0===e&&(e="");t.text=String(e)}(n,t):"multicategory"===s?(p=n,h=t,m=a,g=Math.round(h.x),p=p._categories[g]||[],g=void 0===p[1]?"":String(p[1]),p=void 0===p[0]?"":String(p[0]),m?h.text=p+" - "+g:(h.text=g,h.text2=p)):be(n)?(s=t,m=a,g=o,h=c,"radians"!==(p=n).thetaunit||m?s.text=ue(s.x,p,h,g):0==(m=s.x/180)?s.text="0":100<=(m=function(e){function r(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){for(var t=1;!r(Math.round(e*t)/t,e);)t*=10;return t}(e),n=e*t,e=Math.abs(function e(t,n){return r(n,0)?t:e(n,t%n)}(n,t));return[Math.round(n/e),Math.round(t/e)]}(m))[1]?s.text=ue(B.deg2rad(s.x),p,h,g):(g=s.x<0,1===m[1]?1===m[0]?s.text="":s.text=m[0]+"":s.text=["<sup>",m[0],"</sup>","","<sub>",m[1],"</sub>",""].join(""),g&&(s.text=y+s.text))):function(e,t,n,r){"never"===r?r="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(r="hide");t.text=ue(t.x,e,r,n)}(n,t,o,c),e||(n.tickprefix&&!f(n.showtickprefix)&&(t.text=n.tickprefix+t.text),n.ticksuffix&&!f(n.showticksuffix)&&(t.text+=n.ticksuffix)),"boundaries"!==n.tickson&&!n.showdividers||(t.xbnd=[(e=function(e){var t=n.l2p(e);return 0<=t&&t<=n._length?e:null})(t.x-.5),e(t.x+n.dtick-.5)]),t},$.hoverLabelText=function(e,t,n){n&&(e=B.extendFlat({},e,{hoverformat:n}));var r=Array.isArray(t)?t[0]:t,t=Array.isArray(t)?t[1]:void 0;if(void 0!==t&&t!==r)return $.hoverLabelText(e,r,n)+" - "+$.hoverLabelText(e,t,n);n="log"===e.type&&r<=0,e=$.tickText(e,e.c2l(n?-r:r),"hover").text;return n?0===r?"0":y+e:e};var se=["f","p","n","","m","","k","M","G","T"];function le(e){return"SI"===e||"B"===e}function ce(e){return 14<e||e<-15}function ue(e,t,n,r){var a=e<0,i=t._tickround,o=n||t.exponentformat||"B",s=t._tickexponent,l=$.getTickFormat(t),n=t.separatethousands;if(r&&(ie(r={exponentformat:o,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:T(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]}),i=(Number(r._tickround)||0)+4,s=r._tickexponent,t.hoverformat&&(l=t.hoverformat)),l)return t._numFormat(l)(e).replace(/-/g,y);l=Math.pow(10,-i)/2;if("none"===o&&(s=0),(e=Math.abs(e))<l)a=!(e="0");else{if(e+=l,s&&(e*=Math.pow(10,-s),i+=s),0===i)e=String(Math.floor(e));else if(i<0){e=(e=String(Math.round(e))).substr(0,e.length+i);for(var c=i;c<0;c++)e+="0"}else{l=(e=String(e)).indexOf(".")+1;l&&(e=e.substr(0,l+i).replace(/\.?0+$/,""))}e=B.numSeparate(e,t._separators,n)}return s&&"hide"!==o&&(le(o)&&ce(s)&&(o="power"),n=s<0?y+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?e+=o+n:"power"===o?e+="10<sup>"+n+"</sup>":"B"===o&&9===s?e+="B":le(o)&&(e+=se[s/3+5])),a?y+e:e}function de(e){return void 0!==e.periodX?e.periodX:e.x}function fe(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function pe(e){var t=e.title.font.size,n=(e.title.text.match(d.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*(_+n*W):t*_:n?t*(n+1)*W:t}function he(e,t){t=e.l2p(t);return 1<t&&t<e._length-1}function me(e){var t=w.select(e),e=t.select(".text-math-group");return e.empty()?t.select("text"):e}function ge(e){return e._id+".automargin"}function ye(e){return ge(e)+".mirror"}function ve(e){return e._id+".rangeslider"}function xe(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function be(e){return"angularaxis"===e._id}function _e(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var a=t._rangebreaks[r];if(e>=a.min&&e<a.max)return a.max}return e}function we(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function Te(e,t){we(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}$.getTickFormat=function(e){var t,n,r,a,i,o,s,l,c,u,d,f;function p(e){return"string"!=typeof e?e:Number(e.replace("M",""))*D}function h(e,t){var n=["L","D"];if(typeof e!=typeof t)return"number"==typeof e?1:-1;if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),n=n.indexOf(t.charAt(0));return r===n?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-n}if(e.tickformatstops&&0<e.tickformatstops.length)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(c=e.dtick,u=r.dtickrange,f=void 0,f=(d=p)||function(e){return e},d=u[0],u=u[1],(!d&&"number"!=typeof d||f(d)<=f(c))&&(!u&&"number"!=typeof u||f(u)>=f(c)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(a=e.dtick,i=r.dtickrange,l=s=o=void 0,o=null===i[0],s=null===i[1],l=0<=h(a,i[0]),i=h(a,i[1])<=0,(o||l)&&(s||i))){n=r;break}}return n?n.value:e.tickformat},$.getSubplots=function(e,t){e=e._fullLayout._subplots,e=e.cartesian.concat(e.gl2d||[]),e=t?$.findSubplotsWithAxis(e,t):e;return e.sort(function(e,t){e=e.substr(1).split("y"),t=t.substr(1).split("y");return e[0]===t[0]?+e[1]-+t[1]:+e[0]-+t[0]}),e},$.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],a=0;a<e.length;a++){var i=e[a];n.test(i)&&r.push(i)}return r},$.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){for(var n,r={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},i=$.list(e,"x",!0),o=$.list(e,"y",!0),s=[],l=0;l<i.length;l++)for(s.push({x:i[l],y:a}),n=0;n<o.length;n++)0===l&&s.push({x:r,y:o[n]}),s.push({x:i[l],y:o[n]});e=t._clips.selectAll(".axesclip").data(s,function(e){return e.x._id+e.y._id});e.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),e.exit().remove(),e.each(function(e){w.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},$.draw=function(r,e,a){var i=r._fullLayout;"redraw"===e&&i._paper.selectAll("g.subplot").each(function(e){var t=e[0],n=i._plots[t];n&&(e=n.xaxis,t=n.yaxis,n.xaxislayer.selectAll("."+e._id+"tick").remove(),n.yaxislayer.selectAll("."+t._id+"tick").remove(),n.xaxislayer.selectAll("."+e._id+"tick2").remove(),n.yaxislayer.selectAll("."+t._id+"tick2").remove(),n.xaxislayer.selectAll("."+e._id+"divider").remove(),n.yaxislayer.selectAll("."+t._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+e._id+"title").remove(),i._infolayer.select(".g-"+t._id+"title").remove())});e=e&&"redraw"!==e?e:$.listIds(r);return B.syncOrAsync(e.map(function(n){return function(){if(n){var e=$.getFromId(r,n),t=$.drawOne(r,e,a);return e._r=e.range.slice(),e._rl=B.simpleMap(e._r,e.r2l),t}}}))},$.drawOne=function(u,d,e){e=e||{},d.setScale();var f=u._fullLayout,t=d._id,p=t.charAt(0),h=$.counterLetter(t),n=f._plots[d._mainSubplot];if(n){var i=n[p+"axislayer"],o=d._mainLinePosition,r=d._mainMirrorPosition,a=d._vals=$.calcTicks(d),s=[d.mirror,o,r].join("_");for(T=0;T<a.length;T++)a[T].axInfo=s;d._selections={},d._tickAngles&&(d._prevTickAngles=d._tickAngles),d._tickAngles={},d._depth=null;var l={};if(d.visible){var c,m=$.makeTransTickFn(d),g=$.makeTransTickLabelFn(d),y="inside"===d.ticks,v="outside"===d.ticks;c="boundaries"===d.tickson?(n=function(e){function t(e,t){null!==(t=e.xbnd[t])&&r.push(B.extendFlat({},e,{x:t}))}var n,r=[];if(e.length){for(n=0;n<e.length;n++)t(e[n],0);t(e[n-1],1)}return r}(a),D=$.clipEnds(d,n),y?D:n):(D=$.clipEnds(d,a),y&&"period"!==d.ticklabelmode?D:a);var x=d._gridVals=D,b=function(e,t){function n(e,t){null!==(t=e.xbnd[t])&&i.push(B.extendFlat({},e,{x:t}))}var r,a,i=[],o=t.length&&t[t.length-1].x<t[0].x;if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];s.text2!==a&&n(s,o?1:0),a=s.text2}n(t[r-1],o?0:1)}return i}(d,a);if(!f._hasOnlyLargeSploms)for(var _=d._subplotsWith,w={},T=0;T<_.length;T++){var M,k=_[T],A=(M=f._plots[k])[h+"axis"],S=A._mainAxis._id;w[S]||(w[S]=1,S="x"===p?"M0,"+A._offset+"v"+A._length:"M"+A._offset+",0h"+A._length,$.drawGrid(u,d,{vals:x,counterAxis:A,layer:M.gridlayer.select("."+t),path:S,transFn:m}),$.drawZeroLine(u,d,{counterAxis:A,layer:M.zerolinelayer,path:S,transFn:m}))}var E=$.getTickSigns(d),L=[];if(d.ticks){var C,D=$.makeTickPath(d,o,E[2]),O=d._anchorAxis&&d.mirror&&!0!==d.mirror?D+(C=$.makeTickPath(d,r,E[3])):(C="",D);if(d.showdividers&&v&&"boundaries"===d.tickson){var P={};for(T=0;T<b.length;T++)P[b[T].x]=1;N=function(e){return P[e.x]?C:O}}else N=O;$.drawTicks(u,d,{vals:c,layer:i,path:N,transFn:m}),"allticks"===d.mirror&&(L=Object.keys(d._linepositions||{}))}for(T=0;T<L.length;T++){k=L[T],M=f._plots[k];var I=d._linepositions[k]||[],I=$.makeTickPath(d,I[0],E[0])+$.makeTickPath(d,I[1],E[1]);$.drawTicks(u,d,{vals:c,layer:M[p+"axislayer"],path:I,transFn:m})}var R,N=[];N.push(function(){return $.drawLabels(u,d,{vals:a,layer:i,plotinfo:M,transFn:g,labelFns:$.makeLabelFns(d,o)})}),"multicategory"===d.type?(R={x:2,y:10}[p],N.push(function(){var e={x:"height",y:"width"}[p],e=F()[e]+R+(d._tickAngles[t+"tick"]?d.tickfont.size*W:0);return $.drawLabels(u,d,{vals:function(e,t){for(var n,r=[],a={},i=0;i<t.length;i++){var o=t[i];a[o.text2]?a[o.text2].push(o.x):a[o.text2]=[o.x]}for(n in a)r.push(oe(e,B.interp(a[n],.5),n));return r}(d,a),layer:i,cls:t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:m,labelFns:$.makeLabelFns(d,o+e*E[4])})}),N.push(function(){var e,t,n,r,a;d._depth=E[4]*(F("tick2")[d.side]-o),e=u,t=d,n={vals:b,layer:i,path:$.makeTickPath(d,o,E[4],d._depth),transFn:m},r=t._id+"divider",a=n.vals,(a=n.layer.selectAll("path."+r).data(a,fe)).exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(U.stroke,t.dividercolor).style("stroke-width",Y.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)})):d.title.hasOwnProperty("standoff")&&N.push(function(){d._depth=E[4]*(F()[d.side]-o)});var z=H.getComponentMethod("rangeslider","isVisible")(d);return N.push(function(){var e,t,n,r,a,i,o=d.side.charAt(0),s=Z[d.side].charAt(0),l=$.getPxPosition(u,d),c=v?d.ticklen:0;(d.automargin||z)&&("multicategory"===d.type?i=F("tick2"):(i=F(),"x"===p&&"b"===o&&(d._depth=Math.max(0<i.width?i.bottom-l:0,c)))),d.automargin&&(n={x:0,y:0,r:0,l:0,t:0,b:0},r=[0,1],"x"===p?("b"===o?n[o]=d._depth:(n[o]=d._depth=Math.max(0<i.width?l-i.top:0,c),r.reverse()),0<i.width&&(0<(a=i.right-(d._offset+d._length))&&(n.xr=1,n.r=a),0<(a=d._offset-i.left)&&(n.xl=0,n.l=a))):("l"===o?n[o]=d._depth=Math.max(0<i.height?l-i.left:0,c):(n[o]=d._depth=Math.max(0<i.height?i.right-l:0,c),r.reverse()),0<i.height&&(0<(l=i.bottom-(d._offset+d._length))&&(n.yb=0,n.b=l),0<(i=d._offset-i.top)&&(n.yt=1,n.t=i))),n[h]="free"===d.anchor?d.position:d._anchorAxis.domain[r[0]],d.title.text!==f._dfltTitle[p]&&(n[o]+=pe(d)+(d.title.standoff||0)),d.mirror&&"free"!==d.anchor&&((e={x:0,y:0,r:0,l:0,t:0,b:0})[s]=d.linewidth,d.mirror&&!0!==d.mirror&&(e[s]+=c),!0===d.mirror||"ticks"===d.mirror?e[h]=d._anchorAxis.domain[r[1]]:"all"!==d.mirror&&"allticks"!==d.mirror||(e[h]=[d._counterDomainMin,d._counterDomainMax][r[1]]))),z&&(t=H.getComponentMethod("rangeslider","autoMarginOpts")(u,d)),j.autoMargin(u,ge(d),n),j.autoMargin(u,ye(d),e),j.autoMargin(u,ve(d),t)}),e.skipTitle||z&&"bottom"===d.side||N.push(function(){return function(e,t){var n=e._fullLayout,r=t._id,a=r.charAt(0),i=t.title.font.size;{var o,s;t.title.hasOwnProperty("standoff")?f=t._depth+t.title.standoff+pe(t):(o=we(t),f="multicategory"===t.type?t._depth:(s=1.5*i,o&&(s=.5*i,"outside"===t.ticks&&(s+=t.ticklen)),10+s+(t.linewidth?t.linewidth-1:0)),o||(f+="x"===a?"top"===t.side?i*(t.showticklabels?1:0):i*(t.showticklabels?1.5:.5):"right"===t.side?i*(t.showticklabels?1:.5):i*(t.showticklabels?.5:0)))}var l,c,u,d,i=$.getPxPosition(e,t);"x"===a?(c=t._offset+t._length/2,u="top"===t.side?i-f:i+f):(u=t._offset+t._length/2,c="right"===t.side?i+f:i-f,l={rotate:"-90",offset:0});{var f;"multicategory"!==t.type&&(f=t._selections[t._id+"tick"],d={selection:f,side:t.side},f&&f.node()&&f.node().parentNode&&(f=Y.getTranslate(f.node().parentNode),d.offsetLeft=f.x,d.offsetTop=f.y),t.title.hasOwnProperty("standoff")&&(d.pad=0))}return q.draw(e,r+"title",{propContainer:t,propName:t._name+".title.text",placeholder:n._dfltTitle[a],avoid:d,transform:l,attributes:{x:c,y:u,"text-anchor":"middle"}})}(u,d)}),B.syncOrAsync(N)}}function F(e){e=t+(e||"tick");return l[e]||(l[e]=function(e,t){var n,r,a,i;e._selections[t].size()?(a=n=1/0,i=r=-1/0,e._selections[t].each(function(){var e=me(this),e=Y.bBox(e.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),a=Math.min(a,e.left),i=Math.max(i,e.right)})):i=a=r=n=0;return{top:n,bottom:r,left:a,right:i,height:r-n,width:i-a}}(d,e)),l[e]}},$.getTickSigns=function(e){var t=e._id.charAt(0),n=e.side==={x:"top",y:"right"}[t]?1:-1,n=[-1,1,n,-n];return"inside"!==e.ticks==("x"===t)&&(n=n.map(function(e){return-e})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n},$.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return u(t._offset+t.l2p(e.x),0)}:function(e){return u(0,t._offset+t.l2p(e.x))}},$.makeTransTickLabelFn=function(t){var e=function(e){var t=e.ticklabelposition||"",n=function(e){return-1!==t.indexOf(e)},r=n("top"),a=n("left"),i=n("right"),o=n("bottom"),s=n("inside"),l=o||a||r||i;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=3,n=e.tickfont?e.tickfont.size:12;(o||r)&&(u+=n*_,d+=(e.linewidth||0)/2);(a||i)&&(u+=(e.linewidth||0)/2,d+=3);s&&"top"===c&&(d-=n*(1-_));(a||r)&&(u=-u);"bottom"!==c&&"right"!==c||(d=-d);return[l?u:0,s?d:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return u(n+t._offset+t.l2p(de(e)),r)}:function(e){return u(r,n+t._offset+t.l2p(de(e)))}},$.makeTickPath=function(e,t,n,r){r=void 0!==r?r:e.ticklen;var a=e._id.charAt(0),e=(e.linewidth||1)/2;return"x"===a?"M0,"+(t+e*n)+"v"+r*n:"M"+(t+e*n)+",0h"+r*n},$.makeLabelFns=function(r,t,e){var n=r.ticklabelposition||"",a=function(e){return-1!==n.indexOf(e)},i=a("top"),o=a("left"),s=a("right"),l=a("bottom")||o||i||s,c=a("inside"),u="inside"===n&&"inside"===r.ticks||!c&&"outside"===r.ticks&&"boundaries"!==r.tickson,d=0,i=0,a=u?r.ticklen:0;c?a*=-1:l&&(a=0),u&&(d+=a,e&&(v=B.deg2rad(e),d=a*Math.cos(v)+1,i=a*Math.sin(v))),r.showticklabels&&(u||r.showline)&&(d+=.2*r.tickfont.size);var f,p,h,m,g,e={labelStandoff:d+=(r.linewidth||1)/2*(c?-1:1),labelShift:i},y=0,a=r.side,v=r._id.charAt(0),u=r.tickangle;return"x"===v?(g=(m=!c&&"bottom"===a||c&&"top"===a)?1:-1,c&&(g*=-1),f=i*g,p=t+d*g,h=m?1:-.2,90===Math.abs(u)&&(c?h+=x:h=-90===u&&"bottom"===a?_:90===u&&"top"===a?x:.5,y=x/2*(u/90)),e.xFn=function(e){return e.dx+f+y*e.fontSize},e.yFn=function(e){return e.dy+p+e.fontSize*h},e.anchorFn=function(e,t){if(l){if(o)return"end";if(s)return"start"}return T(t)&&0!==t&&180!==t?t*g<0!==c?"end":"start":"middle"},e.heightFn=function(e,t,n){return t<-60||60<t?-.5*n:"top"===r.side!==c?-n:0}):"y"===v&&(g=(m=!c&&"left"===a||c&&"right"===a)?1:-1,c&&(g*=-1),f=d,p=i*g,h=0,c||90!==Math.abs(u)||(h=-90===u&&"left"===a||90===u&&"right"===a?_:.5),!c||0!=(u=T(u)?+u:0)&&(u=B.deg2rad(u),y=Math.abs(Math.sin(u))*_*g,h=0),e.xFn=function(e){return e.dx+t-(f+e.fontSize*h)*g+y*e.fontSize},e.yFn=function(e){return e.dy+p+e.fontSize*x},e.anchorFn=function(e,t){return T(t)&&90===Math.abs(t)?"middle":m?"end":"start"},e.heightFn=function(e,t,n){return"right"===r.side&&(t*=-1),t<-30?-n:t<30?-.5*n:0}),e},$.drawTicks=function(e,t,n){var r=t._id+"tick",a=(n=n||{}).vals;"period"===t.ticklabelmode&&(a=a.slice()).shift();a=n.layer.selectAll("path."+r).data(t.ticks?a:[],fe);a.exit().remove(),a.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(U.stroke,t.tickcolor).style("stroke-width",Y.crispRound(e,t.tickwidth,1)+"px").attr("d",n.path).style("display",null),Te(t,[V]),a.attr("transform",n.transFn)},$.drawGrid=function(e,t,n){var r=t._id+"grid",a=(n=n||{}).vals,i=n.counterAxis;if(!1===t.showgrid)a=[];else if(i&&$.shouldShowZeroLine(e,t,i))for(var o="array"===t.tickmode,s=0;s<a.length;s++){var l=a[s].x;if(o?!l:Math.abs(l)<t.dtick/100){if(a=a.slice(0,s).concat(a.slice(s+1)),!o)break;s--}}i=n.layer.selectAll("path."+r).data(a,fe);i.exit().remove(),i.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),t._gw=Y.crispRound(e,t.gridwidth,1),i.attr("transform",n.transFn).attr("d",n.path).call(U.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),Te(t,[F]),"function"==typeof n.path&&i.attr("d",n.path)},$.drawZeroLine=function(e,t,n){var r=t._id+"zl",a=$.shouldShowZeroLine(e,t,n.counterAxis),a=n.layer.selectAll("path."+r).data(a?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(e,t){return i(e.id,t.id)})}),a.attr("transform",n.transFn).attr("d",n.path).call(U.stroke,t.zerolinecolor||U.defaultLine).style("stroke-width",Y.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),Te(t,[o])},$.drawLabels=function(f,h,m){m=m||{};var p=f._fullLayout,e=h._id,g=e.charAt(0),t=m.cls||e+"tick",y=m.vals,c=m.labelFns,v=m.secondary?0:h.tickangle,n=(h._prevTickAngles||{})[t],x=m.layer.selectAll("g."+t).data(h.showticklabels?y:[],fe),r=[];function b(e,l){e.each(function(e){var t,n=w.select(this),r=n.select(".text-math-group"),a=c.anchorFn(e,l),i=m.transFn.call(n.node(),e)+(T(l)&&0!=+l?" rotate("+l+","+c.xFn(e)+","+(c.yFn(e)-e.fontSize/2)+")":""),o=d.lineCount(n),s=W*e.fontSize,s=c.heightFn(e,T(l)?+l:0,(o-1)*s);s&&(i+=u(0,s)),r.empty()?((t=n.select("text")).attr({transform:i,"text-anchor":a}),t.style("opacity",1),h._adjustTickLabelsOverflow&&h._adjustTickLabelsOverflow()):(t=Y.bBox(r.node()).width,r.attr("transform",i+u(t*{end:-.5,start:.5}[a],0)))})}x.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=w.select(this),n=f._promises.length;t.call(d.positionText,c.xFn(e),c.yFn(e)).call(Y.font,e.font,e.fontSize,e.fontColor).text(e.text).call(d.convertToTspans,f),f._promises[n]?r.push(f._promises.pop().then(function(){b(t,v)})):b(t,v)}),Te(h,[G]),x.exit().remove(),m.repositionOnUpdate&&x.each(function(e){w.select(this).select("text").call(d.positionText,c.xFn(e),c.yFn(e))}),h._adjustTickLabelsOverflow=function(){var e=h.ticklabeloverflow;if(e&&"allow"!==e){var a=-1!==e.indexOf("hide"),i="x"===h._id.charAt(0),t=0,n=i?f._fullLayout.width:f._fullLayout.height;-1!==e.indexOf("domain")&&(e=B.simpleMap(h.range,h.r2l),t=h.l2p(e[0])+h._offset,n=h.l2p(e[1])+h._offset);var r,o=Math.min(t,n),s=Math.max(t,n),l=h.side,c=1/0,u=-1/0;for(r in x.each(function(e){var t,n,r=w.select(this);r.select(".text-math-group").empty()&&(t=Y.bBox(r.node()),n=0,i?(t.right>s||t.left<o)&&(n=1):(t.bottom>s||t.top+(h.tickangle?0:e.fontSize/4)<o)&&(n=1),r=r.select("text"),n?a&&r.style("opacity",0):(r.style("opacity",1),c="bottom"===l||"right"===l?Math.min(c,i?t.top:t.left):-1/0,u="top"===l||"left"===l?Math.max(u,i?t.bottom:t.right):1/0))}),p._plots){var d=p._plots[r];h._id!==d.xaxis._id&&h._id!==d.yaxis._id||(d=i?d.yaxis:d.xaxis)&&(d["_visibleLabelMin_"+h._id]=c,d["_visibleLabelMax_"+h._id]=u)}}},h._hideCounterAxisInsideTickLabels=function(e){var t,n="x"===h._id.charAt(0),r=[];for(t in p._plots){var a=p._plots[t];h._id!==a.xaxis._id&&h._id!==a.yaxis._id||r.push(n?a.yaxis:a.xaxis)}r.forEach(function(a,i){a&&we(a)&&(e||[o,F,V,G]).forEach(function(n){var r="tick"===n.K&&"text"===n.L&&"period"===h.ticklabelmode,e=p._plots[h._mainSubplot],e=n.K===o.K?e.zerolinelayer.selectAll("."+h._id+"zl"):n.K===F.K?e.gridlayer.selectAll("."+h._id):e[h._id.charAt(0)+"axislayer"];e.each(function(){var e=w.select(this);(e=n.L?e.selectAll(n.L):e).each(function(e){var t=h.l2p(r?de(e):e.x)+h._offset,e=w.select(this);t<h["_visibleLabelMax_"+a._id]&&t>h["_visibleLabelMin_"+a._id]?e.style("display","none"):"tick"!==n.K||i||e.style("display",null)})})})})},b(x,n+1?n:v);var _=null;h._selections&&(h._selections[t]=x);var a=[function(){return r.length&&Promise.all(r)}];h.automargin&&p._redrawFromAutoMarginCount&&90===n?(_=90,a.push(function(){b(x,n)})):a.push(function(){if(b(x,v),y.length&&"x"===g&&!T(v)&&("log"!==h.type||"D"!==String(h.dtick).charAt(0))){var n=_=0,r=[];if(x.each(function(e){n=Math.max(n,e.fontSize);var t=h.l2p(e.x),e=me(this),e=Y.bBox(e.node());r.push({top:0,bottom:10,height:10,left:t-e.width/2,right:t+e.width/2+2,width:e.width+2})}),"boundaries"!==h.tickson&&!h.showdividers||m.secondary){for(var e=y.length,t=Math.abs((y[e-1].x-y[0].x)*h._m)/(e-1),a=h.ticklabelposition||"",i=function(e){return-1!==a.indexOf(e)},o=i("top"),s=i("left"),e=i("right"),l=i("bottom")||s||o||e?(h.tickwidth||0)+6:0,c=t<2.5*n||"multicategory"===h.type,u=0;u<r.length-1;u++)if(B.bBoxIntersect(r[u],r[u+1],l)){_=c?90:30;break}}else{var d=2;for(h.ticks&&(d+=h.tickwidth/2),u=0;u<r.length;u++){var f=y[u].xbnd,p=r[u];if(null!==f[0]&&p.left-h.l2p(f[0])<d||null!==f[1]&&h.l2p(f[1])-p.right<d){_=90;break}}}_&&b(x,_)}}),h._tickAngles&&a.push(function(){h._tickAngles[t]=null===_?T(v)?v:0:_});e=h._anchorAxis;e&&e.autorange&&we(h)&&!X(p,h._id)&&(p._insideTickLabelsAutorange||(p._insideTickLabelsAutorange={}),p._insideTickLabelsAutorange[e._name+".autorange"]=e.autorange,a.push(function(){x.each(function(e,t){var n=me(this);n.select(".text-math-group").empty()&&(h._vals[t].bb=Y.bBox(n.node()))})}));a=B.syncOrAsync(a);return a&&a.then&&f._promises.push(a),a},$.getPxPosition=function(e,t){var n,r=e._fullLayout._size,a=t._id.charAt(0),e=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===a?n={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:"y"===a&&(n={_offset:r.l+(t.position||0)*r.w,_length:0}),"top"===e||"left"===e?n._offset:"bottom"===e||"right"===e?n._offset+n._length:void 0},$.shouldShowZeroLine=function(e,t,n){var r=B.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===z)&&(he(t,0)||!function(e,i,t,n){var r=t._mainAxis;if(r){var a=e._fullLayout,o=i._id.charAt(0),s=$.counterLetter(i._id),l=i._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:i._length),a=a._plots[t._mainSubplot];if(!(a.mainplotinfo||a).overlays.length)return f(t);for(var c=$.list(e,s),u=0;u<c.length;u++){var d=c[u];if(d._mainAxis===r&&f(d))return!0}}function f(e){if(!e.showline||!e.linewidth)return!1;var t=Math.max((e.linewidth+i.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-l)<t}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;var r,a=e._linepositions||{};for(r in a)if(n(a[r][0])||n(a[r][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,a=t._id.charAt(0),i=0;i<n.length;i++){var o=n[i];if(!0===o.visible&&o.xaxis+o.yaxis===r){if(H.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[a])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===a)return!0}}return!1}(e,t))},$.clipEnds=function(t,e){return e.filter(function(e){return he(t,e.x)})},$.allowAutoMargin=function(e){for(var t=$.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(j.allowAutoMargin(e,ge(r)),r.mirror&&j.allowAutoMargin(e,ye(r))),H.getComponentMethod("rangeslider","isVisible")(r)&&j.allowAutoMargin(e,ve(r))}},$.swap=function(e,t){for(var n=function(e,t){var n,r,a,i=[];for(n=0;n<t.length;n++){var o=[],s=e._fullData[t[n]].xaxis,l=e._fullData[t[n]].yaxis;if(s&&l){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(s)&&-1===i[r].y.indexOf(l)||o.push(r);if(o.length){var c=i[o[0]];if(1<o.length)for(r=1;r<o.length;r++)a=i[o[r]],xe(c.x,a.x),xe(c.y,a.y);xe(c.x,[s]),xe(c.y,[l])}else i.push({x:[s],y:[l]})}}return i}(e,t),r=0;r<n.length;r++)!function(e,t,n){var r,a,i=[],o=[],s=e.layout;for(r=0;r<t.length;r++)i.push($.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push($.getFromId(e,n[r]));var l=Object.keys(b),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(r=0;r<l.length;r++){var d=l[r],f=i[0][d],p=o[0][d],h=!0,m=!1,g=!1;if("_"!==d.charAt(0)&&"function"!=typeof f&&-1===c.indexOf(d)){for(a=1;a<i.length&&h;a++){var y=i[a][d];"type"===d&&-1!==u.indexOf(f)&&-1!==u.indexOf(y)&&f!==y?m=!0:y!==f&&(h=!1)}for(a=1;a<o.length&&h;a++){var v=o[a][d];"type"===d&&-1!==u.indexOf(p)&&-1!==u.indexOf(v)&&p!==v?g=!0:o[a][d]!==p&&(h=!1)}h&&(m&&(s[i[0]._name].type="linear"),g&&(s[o[0]._name].type="linear"),function(e,t,n,r,a){var i,o=B.nestedProperty,s=o(e[n[0]._name],t).get(),l=o(e[r[0]._name],t).get();"title"===t&&(s&&s.text===a.x&&(s.text=a.y),l&&l.text===a.y&&(l.text=a.x));for(i=0;i<n.length;i++)o(e,n[i]._name+"."+t).set(l);for(i=0;i<r.length;i++)o(e,r[i]._name+"."+t).set(s)}(s,d,i,o,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var x=e._fullLayout.annotations[r];-1!==t.indexOf(x.xref)&&-1!==n.indexOf(x.yref)&&B.swapAttrs(s.annotations[r],["?"])}}(e,n[r].x,n[r].y)}},{"../../components/color":155,"../../components/drawing":177,"../../components/titles":253,"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"./autorange":330,"./axis_autotype":332,"./axis_ids":335,"./clean_ticks":337,"./layout_attributes":346,"./set_convert":352,"@plotly/d3":20,"fast-isnumeric":31}],332:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),r=e("../../lib"),d=e("../../constants/numerical").BADNUM,l=r.isArrayOrTypedArray,f=r.isDateTime,p=r.cleanNumber,h=Math.round;function m(e){return Math.max(1,(e-1)/1e3)}t.exports=function(e,t,n){var r=e,a=n.noMultiCategory;if(l(r)&&!r.length)return"-";if(!a&&(l((e=r)[0])&&l(e[1])))return"multicategory";if(a&&Array.isArray(r[0])){for(var i=[],o=0;o<r.length;o++)if(l(r[o]))for(var s=0;s<r[o].length;s++)i.push(r[o][s]);r=i}if(function(e,t){for(var n=e.length,r=m(n),a=0,i=0,o={},s=0;s<n;s+=r){var l=h(s),c=e[l],l=String(c);o[l]||(o[l]=1,f(c,t)&&a++,u(c)&&i++)}return 2*i<a}(r,t))return"date";n="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=m(n),a=0,i=0,o={},s=0;s<n;s+=r){var l=h(s),c=e[l],l=String(c);o[l]||(o[l]=1,"boolean"==(l=typeof c)?i++:(t?p(c)!==d:"number"==l)?a++:"string"==l&&i++)}return 2*a<i}(r,n)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(function(e,t){return t?u(e):"number"==typeof e}(e[r],t))return!0;return!1}(r,n)?"linear":"-"}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],333:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),g=e("../../registry"),y=e("../../lib"),v=e("../array_container_defaults"),x=e("./layout_attributes"),b=e("./tick_value_defaults"),_=e("./tick_mark_defaults"),w=e("./tick_label_defaults"),T=e("./category_order_defaults"),M=e("./line_grid_defaults"),k=e("./set_convert"),A=e("./constants").WEEKDAY_PATTERN,d=e("./constants").HOUR_PATTERN;function S(n,r,e){function t(e,t){return y.coerce(n,r,x.rangebreaks,e,t)}if(t("enabled")){var a=t("bounds");if(a&&2<=a.length){var i,o,s="";if(2===a.length)for(i=0;i<2;i++)if(o=f(a[i])){s=A;break}var l=t("pattern",s);if(l===A)for(i=0;i<2;i++)(o=f(a[i]))&&(r.bounds[i]=a[i]=o-1);if(l)for(i=0;i<2;i++)switch(o=a[i],l){case A:if(!u(o))return void(r.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||7<=o)return void(r.enabled=!1);r.bounds[i]=a[i]=o;break;case d:if(!u(o))return void(r.enabled=!1);if((o=+o)<0||24<o)return void(r.enabled=!1);r.bounds[i]=a[i]=o}!1===e.autorange&&((c=e.range)[0]<c[1]?a[0]<c[0]&&a[1]>c[1]&&(r.enabled=!1):a[0]>c[0]&&a[1]<c[1]&&(r.enabled=!1))}else{var c=t("values");c&&c.length?t("dvalue"):r.enabled=!1}}}t.exports=function(e,t,n,r,a){var i=r.letter,o=r.font||{},s=r.splomStash||{},l=n("visible",!r.visibleDflt),c=t._template||{},u=t.type||c.type||"-";"date"===u&&(g.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(d=n("ticklabelmode")));c="";r.noTicklabelposition&&"multicategory"!==u||(c=y.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===d?["outside","inside"]:"x"===i?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==c.indexOf("inside")?"hide past domain":"category"===u||"multicategory"===u?"allow":"hide past div"),k(t,a);var d=!t.isValidRange(e.range);!n("autorange",d=d&&r.reverseDflt?"reversed":d)||"linear"!==u&&"-"!==u||n("rangemode"),n("range"),t.cleanRange(),T(e,t,n,r),"category"===u||r.noHover||n("hoverformat");c=n("color"),d=c!==x.color.dflt?c:o.color,i=s.label||a._dfltTitle[i];if(w(e,t,n,u,r,{pass:1}),!l)return t;n("title.text",i),y.coerceFont(n,"title.font",{family:o.family,size:y.bigFont(o.size),color:d}),b(e,t,n,u),w(e,t,n,u,r,{pass:2}),_(e,t,n,r),M(e,t,n,{dfltColor:c,bgColor:r.bgColor,showGrid:r.showGrid,attributes:x}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin");var f,c="multicategory"===u;if(r.noTickson||"category"!==u&&!c||!t.ticks&&!t.showgrid||"boundaries"===n("tickson",f=c?"boundaries":f)&&delete t.ticklabelposition,c&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===u)if(v(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:S}),t.rangebreaks.length){for(var p=0;p<t.rangebreaks.length;p++)if(t.rangebreaks[p].pattern===A){t._hasDayOfWeekBreaks=!0;break}if(k(t,a),a._has("scattergl")||a._has("splom"))for(var h=0;h<r.data.length;h++){var m=r.data[h];"scattergl"!==m.type&&"splom"!==m.type||(m.visible=!1,y.warn(m.type+" traces do not work on axes with rangebreaks. Setting trace "+m.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};var r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function f(e){if("string"==typeof e)return r[e.substr(0,3).toLowerCase()]}},{"../../lib":285,"../../registry":373,"../array_container_defaults":326,"./category_order_defaults":336,"./constants":338,"./layout_attributes":346,"./line_grid_defaults":348,"./set_convert":352,"./tick_label_defaults":353,"./tick_mark_defaults":354,"./tick_value_defaults":355,"fast-isnumeric":31}],334:[function(e,t,n){"use strict";var e=e("../../constants/docs"),r=e.FORMAT_LINK,a=e.DATE_FORMAT_LINK;function i(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+r+"."].join(" ")}function o(e,t){return i(e,t)+[" And for dates see: "+a+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?i:o)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:i,descriptionWithDates:o}},{"../../constants/docs":262}],335:[function(e,t,u){"use strict";var o=e("../../registry"),a=e("./constants");function n(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}u.id2name=function(e){if("string"==typeof e&&e.match(a.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},u.name2id=function(e){if(e.match(a.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},u.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(a.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||n)){t=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},u.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var a=u.listIds(e,t),i=new Array(a.length);for(l=0;l<a.length;l++){var o=a[l];i[l]=r[o.charAt(0)+"axis"+o.substr(1)]}if(!n)for(var s=r._subplots.gl3d||[],l=0;l<s.length;l++){var c=r[s[l]];t?i.push(c[t+"axis"]):i.push(c.xaxis,c.yaxis,c.zaxis)}return i},u.listIds=function(e,t){e=e._fullLayout;if(!e)return[];e=e._subplots;return t?e[t+"axis"]:e.xaxis.concat(e.yaxis)},u.getFromId=function(e,t,n){e=e._fullLayout;return t=void 0===t||"string"!=typeof t?t:t.replace(" domain",""),"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),e[u.id2name(t)]},u.getFromTrace=function(e,t,n){var r,a=e._fullLayout,i=null;return o.traceIs(t,"gl3d")?"scene"===(r=t.scene).substr(0,5)&&(i=a[r][n+"axis"]):i=u.getFromId(e,t[n+"axis"]||n),i},u.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?r<n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},u.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},u.isLinked=function(e,t){return n(t,e._axisMatchGroups)||n(t,e._axisConstraintGroups)}},{"../../registry":373,"./constants":338}],336:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a,i;"category"===t.type&&(e=e.categoryarray,"array"===(a=n("categoryorder",a=(e=Array.isArray(e)&&0<e.length)?"array":a))&&(i=n("categoryarray")),"trace"===(a=!e&&"array"===a?t.categoryorder="trace":a)?t._initialCategories=[]:"array"===a?t._initialCategories=i.slice():(i=function(e,t){var n,r,a=t.dataAttr||e._id.charAt(0),i={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var o=t.data[r];o[a+"axis"]===e._id&&n.push(o)}for(r=0;r<n.length;r++)for(var s=n[r][a],l=0;l<s.length;l++){var c=s[l];null!=c&&(i[c]=1)}return Object.keys(i)}(t,r).sort(),"category ascending"===a?t._initialCategories=i:"category descending"===a&&(t._initialCategories=i.reverse())))}},{}],337:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),a=e("../../lib"),e=e("../../constants/numerical"),s=e.ONEDAY,i=e.ONEWEEK;n.dtick=function(e,t){var n="log"===t,r="date"===t,a="category"===t,i=r?s:1;if(!e)return i;if(o(e))return(e=Number(e))<=0?i:a?Math.max(1,Math.round(e)):r?Math.max(.1,e):e;if("string"!=typeof e||!r&&!n)return i;t=e.charAt(0),a=e.substr(1);return(a=o(a)?Number(a):0)<=0||!(r&&"M"===t&&a===Math.round(a)||n&&"L"===t||n&&"D"===t&&(1===a||2===a))?i:e},n.tick0=function(e,t,n,r){return"date"===t?a.cleanDate(e,a.dateTick0(n,r%i==0?1:0)):"D1"!==r&&"D2"!==r?o(e)?Number(e):0:void 0}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],338:[function(e,t,n){"use strict";e=e("../../lib/regex").counter;t.exports={idRegex:{x:e("x","( domain)?"),y:e("y","( domain)?")},attrRegex:e("[xy]axis"),xAxisMatch:e("xaxis"),yAxisMatch:e("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":301}],339:[function(e,t,n){"use strict";var T=e("../../lib"),O=e("./autorange"),P=e("./axis_ids").id2name,M=e("./layout_attributes"),I=e("./scale_zoom"),k=e("./set_convert"),R=e("../../constants/numerical").ALMOST_EQUAL,a=e("../../constants/alignment").FROM_BL;function A(e,t){var n=t.domain;return(n=n||e[P(t.overlaying)].domain)[1]-n[0]}function S(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function E(e,t,n,r){var a,i,o,s=S(e,t);null===s?((s={})[t]=1,o=e.length,e.push(s)):o=e.indexOf(s);for(var l=Object.keys(s),c=0;c<e.length;c++)if(a=e[c],c!==o&&a[n]){for(var u=a[n],d=0;d<l.length;d++)a[i=l[d]]=p(u,p(r,s[i]));return void e.splice(o,1)}if(1!==r)for(d=0;d<l.length;d++){var f=l[d];s[f]=p(r,s[f])}s[n]=1}function p(e,t){var n,r,a="",i="";"string"==typeof e&&(n=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(r));var o=e*t;return n||r?n&&r&&a.charAt(0)!==i.charAt(0)?n===r?o:(r<n?a.substr(r):i.substr(n))+o:a+i+e*t:o}function N(e,t){var n=e._inputDomain,r=a[e.constraintoward],r=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[r+(n[0]-r)/t,r+(n[1]-r)/t],e.setScale()}n.handleDefaults=function(e,n,t){for(var r,a,i,o,s=t.axIds,l=t.axHasImage,c=n._axisConstraintGroups=[],u=n._axisMatchGroups=[],d=0;d<s.length;d++)!function(n,r,e){var t=e.axIds,a=e.layoutOut,i=e.hasImage,o=a._axisConstraintGroups,s=a._axisMatchGroups,l=r._id,c=l.charAt(0),e=((a._splomAxes||{})[c]||{})[l]||{},u=r._id,c="x"===u.charAt(0);function d(e,t){return T.coerce(n,r,M,e,t)}r._matchGroup=null,r._constraintGroup=null,d("constrain",i?"domain":"range"),T.coerce(n,r,{constraintoward:{valType:"enumerated",values:c?["left","center","right"]:["bottom","middle","top"],dflt:c?"center":"middle"}},"constraintoward");var f,p,h=r.type,m=[];for(f=0;f<t.length;f++)(p=t[f])!==u&&a[P(p)].type===h&&m.push(p);var g=S(o,u);if(g){var y=[];for(f=0;f<m.length;f++)p=m[f],g[p]||y.push(p);m=y}var v,x,l=m.length;l&&(n.matches||e.matches)&&(v=T.coerce(n,r,{matches:{valType:"enumerated",values:m,dflt:-1!==m.indexOf(e.matches)?e.matches:void 0}},"matches"));i=i&&!c?r.anchor:void 0;l&&!v&&(n.scaleanchor||i)&&(x=T.coerce(n,r,{scaleanchor:{valType:"enumerated",values:m}},"scaleanchor",i));v?(r._matchGroup=E(s,u,v,1),b=a[P(v)],b=A(a,r)/A(a,b),c!=("x"===v.charAt(0))&&(b=(c?"x":"y")+b),E(o,u,v,b)):n.matches&&-1!==t.indexOf(n.matches)&&T.warn("ignored "+r._name+'.matches: "'+n.matches+'" to avoid an infinite loop');{var b;x?(b=(b=d("scaleratio"))||(r.scaleratio=1),E(o,u,x,b)):n.scaleanchor&&-1!==t.indexOf(n.scaleanchor)&&T.warn("ignored "+r._name+'.scaleanchor: "'+n.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}}(i=e[a=P(s[d])],o=n[a],{axIds:s,layoutOut:n,hasImage:l[a]});function f(e,t){for(d=0;d<e.length;d++)for(r in v=e[d])n[P(r)][t]=v}for(f(u,"_matchGroup"),d=0;d<c.length;d++)for(r in v=c[d])if((o=n[P(r)]).fixedrange){for(var p in v){p=P(p);!1===(e[p]||{}).fixedrange&&T.warn("fixedrange was specified as false for axis "+p+" but was overridden because another axis in its constraint group has fixedrange true"),n[p].fixedrange=!0}break}for(d=0;d<c.length;){for(r in v=c[d]){(o=n[P(r)])._matchGroup&&Object.keys(o._matchGroup).length===Object.keys(v).length&&(c.splice(d,1),d--);break}d++}f(c,"_constraintGroup");var h=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],m=!1,g=!1;function y(){w=o[_],"rangebreaks"===_&&(g=o._hasDayOfWeekBreaks)}for(d=0;d<u.length;d++)for(var v=u[d],x=0;x<h.length;x++){var b,_=h[x],w=null;for(r in v)if(i=e[a=P(r)],o=n[a],_ in o){if(!o.matches&&(b=o,_ in i)){y();break}null===w&&_ in i&&y()}if("range"===_&&w&&(m=!0),null!==(w=null===(w="autorange"===_&&null===w&&m?!1:w)&&_ in b?b[_]:w))for(r in v)(o=n[P(r)])[_]="range"===_?w.slice():w,"rangebreaks"===_&&(o._hasDayOfWeekBreaks=g,k(o,n))}},n.enforce=function(e){for(var t,n,r,a,i=e._fullLayout,o=i._axisConstraintGroups||[],s=0;s<o.length;s++){for(var l=function(e,t){for(var n=(t=t._size).h/t.w,r={},a=Object.keys(e),i=0;i<a.length;i++){var o=a[i];if("string"==typeof(c=e[o]))for(var s=c.match(/^[xy]*/)[0],l=s.length,c=+c.substr(l),u="y"===s.charAt(0)?n:1/n,d=0;d<l;d++)c*=u;r[o]=c}return r}(o[s],i),c=Object.keys(l),u=1/0,d=0,f=1/0,p={},h={},m=!1,g=0;g<c.length;g++)h[t=c[g]]=n=i[P(t)],n._inputDomain?n.domain=n._inputDomain.slice():n._inputDomain=n.domain.slice(),n._inputRange||(n._inputRange=n.range.slice()),n.setScale(),p[t]=r=Math.abs(n._m)/l[t],u=Math.min(u,r),"domain"!==n.constrain&&n._constraintShrinkable||(f=Math.min(f,r)),delete n._constraintShrinkable,d=Math.max(d,r),"domain"===n.constrain&&(m=!0);if(!(R*d<u)||m)for(g=0;g<c.length;g++)if(r=p[t=c[g]],b=(n=h[t]).constrain,r!==f||"domain"===b)if(a=r/f,"range"===b)I(n,a);else{var y=n._inputDomain,v=(n.domain[1]-n.domain[0])/(y[1]-y[0]),x=(n.r2l(n.range[1])-n.r2l(n.range[0]))/(n.r2l(n._inputRange[1])-n.r2l(n._inputRange[0]));if((a/=v)*x<1)n.domain=n._input.domain=y.slice(),I(n,a);else{if(x<1&&(n.range=n._input.range=n._inputRange.slice(),a*=x),n.autorange){var b=n.r2l(n.range[0]),v=n.r2l(n.range[1]),y=(b+v)/2,_=y,w=y,x=Math.abs(v-y),T=y-x*a*1.0001,M=y+x*a*1.0001,k=O.makePadFn(i,n,0),A=O.makePadFn(i,n,1);N(n,a);for(var S,E=Math.abs(n._m),y=O.concatExtremes(e,n),L=y.min,C=y.max,D=0;D<L.length;D++)T<(S=L[D].val-k(L[D])/E)&&S<_&&(_=S);for(D=0;D<C.length;D++)(S=C[D].val+A(C[D])/E)<M&&w<S&&(w=S);a/=(w-_)/(2*x),_=n.l2r(_),w=n.l2r(w),n.range=n._input.range=b<v?[_,w]:[w,_]}N(n,a)}}}},n.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++)if(n[r][t])return"g"+r;return t},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,a=e._fullLayout._axisConstraintGroups,i=0;i<a.length;i++)if(a[i][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"./autorange":330,"./axis_ids":335,"./layout_attributes":346,"./scale_zoom":350,"./set_convert":352}],340:[function(e,t,n){"use strict";var he=e("@plotly/d3"),me=e("tinycolor2"),r=e("has-passive-events"),ge=e("../../registry"),ye=e("../../lib"),i=ye.strTranslate,ve=e("../../lib/svg_text_utils"),a=e("../../components/color"),xe=e("../../components/drawing"),be=e("../../components/fx"),_e=e("./axes"),o=e("../../lib/setcursor"),we=e("../../components/dragelement"),s=e("../../components/dragelement/helpers"),Te=s.selectingOrDrawing,Me=s.freeMode,ke=e("../../constants/alignment").FROM_TL,Ae=e("../../lib/clear_gl_canvases"),Se=e("../../plot_api/subroutines").redrawReglTraces,Ee=e("../plots"),Le=e("./axis_ids").getFromId,Ce=e("./select").prepSelect,De=e("./select").clearSelect,Oe=e("./select").selectOnClick,Pe=e("./scale_zoom"),Ie=e("./constants"),Re=Ie.MINDRAG,Ne=Ie.MINZOOM,l=!0;function c(t,e,n,r){n=ye.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return n.call(o,r),n.node()}function ze(e,t,n,r,a,i,o){n=c(e,"rect",t,n);return he.select(n).call(xe.setRect,r,a,i,o),n}function Fe(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function je(e,t,n,r,a){for(var i=0;i<e.length;i++){var o,s,l=e[i];l.fixedrange||(l.rangebreaks?(s=(o="y"===l._id.charAt(0))?1-n:n,r[l._name+".range[0]"]=l.l2r(l.p2l((o?1-t:t)*l._length)),r[l._name+".range[1]"]=l.l2r(l.p2l(s*l._length))):(o=l._rl[0],s=l._rl[1]-o,r[l._name+".range[0]"]=l.l2r(o+s*t),r[l._name+".range[1]"]=l.l2r(o+s*n)))}a&&a.length&&je(a,a=(t+(1-n))/2,1-a,r,[])}function He(e,t){for(var n=0;n<e.length;n++){var r,a=e[n];a.fixedrange||(a.rangebreaks?(r=a._length,r=(a.p2l(0+t)-a.p2l(0)+(a.p2l(r+t)-a.p2l(r)))/2,a.range=[a.l2r(a._rl[0]-r),a.l2r(a._rl[1]-r)]):a.range=[a.l2r(a._rl[0]-t/a._m),a.l2r(a._rl[1]-t/a._m)])}}function Be(e,t,n,r,a){return e.append("path").attr("class","zoombox").style({fill:.2<t?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(n,r)).attr("d",a+"Z")}function qe(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(t,n)).attr("d","M0,0Z")}function Ue(e,t,n,r,a,i){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),u(e,t,a,i)}function u(e,t,n,r){n||(e.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function Ye(e){he.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Ve(e){l&&e.data&&e._context.showTips&&(ye.notifier(ye._(e,"Double-click to zoom back out"),"long"),l=!1)}function Ge(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,Ne)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function We(e,t,n,r,a){for(var i,o,s,l,c=!1,u={},d={},f=(a||{}).xaHash,p=(a||{}).yaHash,h=0;h<t.length;h++){var m=t[h];for(i in n)if(m[i]){for(s in m)a&&(f[s]||p[s])||("x"===s.charAt(0)?n:r)[s]||(u[s]=i);for(o in r)a&&(f[o]||p[o])||!m[o]||(c=!0)}for(o in r)if(m[o])for(l in m)a&&(f[l]||p[l])||("x"===l.charAt(0)?n:r)[l]||(d[l]=o)}c&&(ye.extendFlat(u,d),d={});var g={},y=[];for(s in u){var v=Le(e,s);y.push(v),g[v._id]=v}var x={},b=[];for(l in d){var _=Le(e,l);b.push(_),x[_._id]=_}return{xaHash:g,yaHash:x,xaxes:y,yaxes:b,xLinks:u,yLinks:d,isSubplotConstrained:c}}function Ze(e,t){var n;r?(n=void 0!==e.onwheel?"wheel":"mousewheel",e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})):void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function $e(e){var t,n=[];for(t in e)n.push(e[t]);return n}t.exports={makeDragBox:function(v,s,e,t,n,r,x,b){var _,w,T,M,l,c,i,o,u,d,f,k,A,S,p,E,L,C,D,O,h,m,g,y=v._fullLayout._zoomlayer,P=x+b==="nsew",I=1===(x+b).length;function R(){if(_=s.xaxis,w=s.yaxis,u=_._length,d=w._length,i=_._offset,o=w._offset,(T={})[_._id]=_,(M={})[w._id]=w,x&&b)for(var e=s.overlays,t=0;t<e.length;t++){var n=e[t].xaxis;T[n._id]=n;n=e[t].yaxis;M[n._id]=n}l=$e(T),c=$e(M),A=Fe(l,b),S=Fe(c,x),p=!S&&!A,k=We(v,v._fullLayout._axisMatchGroups,T,M);var r=(f=We(v,v._fullLayout._axisConstraintGroups,T,M,k)).isSubplotConstrained||k.isSubplotConstrained;E=b||r,L=x||r;r=v._fullLayout;C=r._has("scattergl"),D=r._has("splom"),O=r._has("svg")}R();var a,N,z=(a=S+A,z=v._fullLayout.dragmode,N=P,a?"nsew"!==a?a.toLowerCase()+"-resize":N?"":"pan"===z?"move":"crosshair":"pointer"),F=ze(s,x+b+"drag",z,e,t,n,r);if(p&&!P)return F.onmousedown=null,F.style.pointerEvents="none",F;var j,H,B,q,U,Y,V,G,W,Z,$={element:F,gd:v,plotinfo:s};function X(){$.plotinfo.selection=!1,De(v)}function J(e,t){var n,r,a,i,o=$.gd;0<=o._fullLayout._activeShapeIndex?o._fullLayout._deactivateShape(o):(i=o._fullLayout.clickmode,Ye(o),2!==e||I||function(){if(!v._transitioningWithDuration){var e=v._context.doubleClick,t=[];A&&(t=t.concat(l)),S&&(t=t.concat(c)),k.xaxes&&(t=t.concat(k.xaxes)),k.yaxes&&(t=t.concat(k.yaxes));var n,r,a,i={};if("reset+autosize"===e)for(e="autosize",r=0;r<t.length;r++)if((n=t[r])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}if("autosize"===e)for(r=0;r<t.length;r++)(n=t[r]).fixedrange||(i[n._name+".autorange"]=!0);else if("reset"===e)for((A||f.isSubplotConstrained)&&(t=t.concat(f.xaxes)),S&&!f.isSubplotConstrained&&(t=t.concat(f.yaxes)),f.isSubplotConstrained&&(A?S||(t=t.concat(c)):t=t.concat(l)),r=0;r<t.length;r++)(n=t[r]).fixedrange||(n._rangeInitial?(a=n._rangeInitial,i[n._name+".range[0]"]=a[0],i[n._name+".range[1]"]=a[1]):i[n._name+".autorange"]=!0);v.emit("plotly_doubleclick",null),ge.call("_guiRelayout",v,i)}}(),P?(-1<i.indexOf("select")&&Oe(t,o,l,c,s.id,$),-1<i.indexOf("event")&&be.click(o,t,s.id)):1===e&&I&&(r=(n=x?w:_)._name+".range["+(i="s"===x||"w"===b?0:1)+"]",t=i,i=(e=n).range[t],t=Math.abs(i-e.range[1-t]),t="date"===e.type?i:"log"===e.type?(a=Math.ceil(Math.max(0,-Math.log(t)/Math.LN10))+3,he.format("."+a+"g")(Math.pow(10,i))):(a=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(t)/Math.LN10)+4,he.format("."+String(a)+"g")(i)),a="left",i="middle",n.fixedrange||(x?(i="n"===x?"top":"bottom","right"===n.side&&(a="right")):"e"===b&&(a="right"),o._context.showAxisRangeEntryBoxes&&he.select(F).call(ve.makeEditable,{gd:o,immediate:!0,background:o._fullLayout.paper_bgcolor,text:String(t),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:a,verticalAlign:i}).on("edit",function(e){e=n.d2r(e);void 0!==e&&ge.call("_guiRelayout",o,r,e)}))))}function K(e,t){if(v._transitioningWithDuration)return!1;var n,r,a=Math.max(0,Math.min(u,m*e+j)),i=Math.max(0,Math.min(d,g*t+H)),e=Math.abs(a-j),t=Math.abs(i-H);function o(){V="",B.r=B.l,B.t=B.b,W.attr("d","M0,0Z")}B.l=Math.min(j,a),B.r=Math.max(j,a),B.t=Math.min(H,i),B.b=Math.max(H,i),f.isSubplotConstrained?Ne<e||Ne<t?(V="xy",t/d<e/u?(t=e*d/u,i<H?B.t=H-t:B.b=H+t):(e=t*u/d,a<j?B.l=j-e:B.r=j+e),W.attr("d",Ge(B))):o():k.isSubplotConstrained?Ne<e||Ne<t?(V="xy",r=Math.min(B.l/u,(d-B.b)/d),n=Math.max(B.r/u,(d-B.t)/d),B.l=r*u,B.r=n*u,B.b=(1-r)*d,B.t=(1-n)*d,W.attr("d",Ge(B))):o():!S||t<Math.min(Math.max(.6*e,Re),Ne)?e<Re||!A?o():(B.t=0,B.b=d,V="x",W.attr("d",(r=H,"M"+((n=B).l-.5)+","+(r-Ne-.5)+"h-3v"+(2*Ne+1)+"h3ZM"+(n.r+.5)+","+(r-Ne-.5)+"h3v"+(2*Ne+1)+"h-3Z"))):!A||e<Math.min(.6*t,Ne)?(B.l=0,B.r=u,V="y",W.attr("d","M"+((e=j)-Ne-.5)+","+((t=B).t-.5)+"v-3h"+(2*Ne+1)+"v3ZM"+(e-Ne-.5)+","+(t.b+.5)+"v3h"+(2*Ne+1)+"v-3Z")):(V="xy",W.attr("d",Ge(B))),B.w=B.r-B.l,B.h=B.b-B.t,V&&(Z=!0),v._dragged=Z,Ue(G,W,B,U,Y,q),Q(),v.emit("plotly_relayouting",h),Y=!0}function Q(){h={},"xy"!==V&&"x"!==V||(je(l,B.l/u,B.r/u,h,f.xaxes),se("x",h)),"xy"!==V&&"y"!==V||(je(c,(d-B.b)/d,(d-B.t)/d,h,f.yaxes),se("y",h))}function ee(){Q(),Ye(v),ce(),Ve(v)}$.prepFn=function(e,t,n){var r=$.dragmode,a=v._fullLayout.dragmode;a!==r&&($.dragmode=a),R(),m=v._fullLayout._invScaleX,g=v._fullLayout._invScaleY,p||(P?e.shiftKey?"pan"===a?a="zoom":Te(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),Me(a)?$.minDrag=1:$.minDrag=void 0,Te(a)?($.xaxes=l,$.yaxes=c,Ce(e,t,n,$,a)):($.clickFn=J,Te(r)&&X(),p||("zoom"===a?($.moveFn=K,$.doneFn=ee,$.minDrag=1,function(e,t){var n=F.getBoundingClientRect();j=e-n.left,H=t-n.top,v._fullLayout._calcInverseTransform(v);n=ye.apply3DTransform(v._fullLayout._invTransform)(j,H);j=n[0],H=n[1],B={l:j,r:j,w:0,t:H,b:H,h:0},q=v._hmpixcount?v._hmlumcount/v._hmpixcount:me(v._fullLayout.plot_bgcolor).getLuminance(),V="xy",Z=Y=!1,G=Be(y,q,i,o,U="M0,0H"+u+"V"+d+"H0V0"),W=qe(y,i,o)}(t,n)):"pan"===a&&($.moveFn=oe,$.doneFn=ce))),v._fullLayout._redrag=function(){var e,t=v._dragdata;t&&t.element===F&&(e=v._fullLayout.dragmode,Te(e)||(R(),ue([0,0,u,d]),$.moveFn(t.dx,t.dy)))}},we.init($);var te=[0,0,u,d],ne=null,re=Ie.REDRAWDELAY,ae=s.mainplot?v._fullLayout._plots[s.mainplot]:s;function ie(e){if(v._context._scrollZoom.cartesian||v._fullLayout._enablescrollzoom){if(X(),v._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();R(),clearTimeout(ne);var t=-e.deltaY;if(isFinite(t)||(t=e.wheelDelta/10),isFinite(t)){var n,r=Math.exp(-Math.min(Math.max(t,-20),20)/200),t=ae.draglayer.select(".nsewdrag").node().getBoundingClientRect(),a=(e.clientX-t.left)/t.width,i=(t.bottom-e.clientY)/t.height;if(E){for(b||(a=.5),n=0;n<l.length;n++)o(l[n],a,r);se("x"),te[2]*=r,te[0]+=te[2]*a*(1/r-1)}if(L){for(x||(i=.5),n=0;n<c.length;n++)o(c[n],i,r);se("y"),te[3]*=r,te[1]+=te[3]*(1-i)*(1/r-1)}ue(te),le(),v.emit("plotly_relayouting",h),ne=setTimeout(function(){v._fullLayout&&(te=[0,0,u,d],ce())},re),e.preventDefault()}else ye.log("Did not find wheel motion attributes: ",e)}function o(t,e,n){var r,a;t.fixedrange||(r=ye.simpleMap(t.range,t.r2l),a=r[0]+(r[1]-r[0])*e,t.range=r.map(function(e){return t.l2r(a+(e-a)*n)}))}}function oe(e,t){if(e*=m,t*=g,!v._transitioningWithDuration){if(v._fullLayout._replotting=!0,"ew"===A||"ns"===S){var n=A?-e:0,r=S?-t:0;return k.isSubplotConstrained&&(A&&S&&(n=-(e=(i=(e/u-t/d)/2)*u),r=-(t=-i*d)),S?n=-r*u/d:r=-n*d/u),A&&(He(l,e),se("x")),S&&(He(c,t),se("y")),ue([n,r,u,d]),le(),void v.emit("plotly_relayouting",h)}var a,i="w"===A==("n"===S)?1:-1;if(A&&S&&(f.isSubplotConstrained||k.isSubplotConstrained)&&(e=(o=(e/u+i*t/d)/2)*u,t=i*o*d),"w"===A?e=s(l,0,e):"e"===A?e=s(l,1,-e):A||(e=0),"n"===S?t=s(c,1,t):"s"===S?t=s(c,0,-t):S||(t=0),n="w"===A?e:0,r="n"===S?t:0,f.isSubplotConstrained&&!k.isSubplotConstrained||k.isSubplotConstrained&&A&&S&&0<i){if(k.isSubplotConstrained||!A&&1===S.length){for(a=0;a<l.length;a++)l[a].range=l[a]._r.slice(),Pe(l[a],1-t/d);n=(e=t*u/d)/2}if(k.isSubplotConstrained||!S&&1===A.length){for(a=0;a<c.length;a++)c[a].range=c[a]._r.slice(),Pe(c[a],1-e/u);r=(t=e*d/u)/2}}k.isSubplotConstrained&&S||se("x"),k.isSubplotConstrained&&A||se("y");var o=u-e,i=d-t;!k.isSubplotConstrained||A&&S||(A?(r=n?0:e*d/u,i=o*d/u):(n=r?0:t*u/d,o=i*u/d)),ue([n,r,o,i]),le(),v.emit("plotly_relayouting",h)}function s(e,t,n){for(var r=1-t,a=0;a<e.length;a++){var i,o,s,l=e[a];l.fixedrange||(o=(i=l)._rl[r]+(l._rl[t]-l._rl[r])/(1-(0<=(s=n/l._length)?Math.min(s,.9):1/(1/Math.max(s,-.3)+3.222))),!1!==(s=l.l2r(o))&&void 0!==s&&(l.range[t]=s))}return i._length*(i._rl[t]-o)/(i._rl[t]-i._rl[r])}}function se(e,t){for(var n=k.isSubplotConstrained?{x:c,y:l}[e]:k[e+"axes"],r=k.isSubplotConstrained?{x:l,y:c}[e]:[],a=0;a<n.length;a++){var i=n[a],o=i._id,o=k.xLinks[o]||k.yLinks[o],o=r[0]||T[o]||M[o];o&&(t?(t[i._name+".range[0]"]=t[o._name+".range[0]"],t[i._name+".range[1]"]=t[o._name+".range[1]"]):i.range=o.range.slice())}}function le(){var t,n=[];function e(e){for(t=0;t<e.length;t++)e[t].fixedrange||n.push(e[t]._id)}for(E&&(e(l),e(f.xaxes),e(k.xaxes)),L&&(e(c),e(f.yaxes),e(k.yaxes)),h={},t=0;t<n.length;t++){var r=n[t],r=Le(v,r);_e.drawOne(v,r,{skipTitle:!0}),h[r._name+".range[0]"]=r.range[0],h[r._name+".range[1]"]=r.range[1]}_e.redrawComponents(v,n)}function ce(){ue([0,0,u,d]),ye.syncOrAsync([Ee.previousPromises,function(){v._fullLayout._replotting=!1,ge.call("_guiRelayout",v,h)}],v)}function ue(e){var t=v._fullLayout,n=t._plots,r=t._subplots.cartesian;if(D&&ge.subplotsRegistry.splom.drag(v),C)for(d=0;d<r.length;d++){var a,i,o,s=(o=n[r[d]]).xaxis,l=o.yaxis;o._scene&&(a=ye.simpleMap(s.range,s.r2l),i=ye.simpleMap(l.range,l.r2l),o._scene.update({range:[a[0],i[0],a[1],i[1]]}))}if((D||C)&&(Ae(v),Se(v)),O)for(var c=e[2]/_._length,u=e[3]/w._length,d=0;d<r.length;d++){s=(o=n[r[d]]).xaxis,l=o.yaxis;var f,p,h=(E||k.isSubplotConstrained)&&!s.fixedrange&&T[s._id],m=(L||k.isSubplotConstrained)&&!l.fixedrange&&M[l._id],g=h?(f=c,b||k.isSubplotConstrained?e[0]:pe(s,f)):k.xaHash[s._id]?(f=c,e[0]*s._length/_._length):k.yaHash[s._id]?(f=u,"ns"===S?-e[1]*s._length/w._length:pe(s,f,{n:"top",s:"bottom"}[S])):fe(s,f=de(s,c,u)),y=m?(p=u,x||k.isSubplotConstrained?e[1]:pe(l,p)):k.yaHash[l._id]?(p=u,e[1]*l._length/w._length):k.xaHash[l._id]?(p=c,"ew"===A?-e[0]*l._length/_._length:pe(l,p,{e:"right",w:"left"}[A])):fe(l,p=de(l,c,u));(f||p)&&(h=s._offset-g/(f=f||1),m=l._offset-y/(p=p||1),o.clipRect.call(xe.setTranslate,g,y).call(xe.setScale,f,p),o.plot.call(xe.setTranslate,h,m).call(xe.setScale,1/f,1/p),f===o.xScaleFactor&&p===o.yScaleFactor||(xe.setPointGroupScale(o.zoomScalePts,f,p),xe.setTextPointsScale(o.zoomScaleTxt,f,p)),xe.hideOutsideRangePoints(o.clipOnAxisFalseTraces,o),o.xScaleFactor=f,o.yScaleFactor=p)}}function de(e,t,n){return e.fixedrange?0:E&&f.xaHash[e._id]?t:L&&(f.isSubplotConstrained?f.xaHash:f.yaHash)[e._id]?n:0}function fe(e,t){return t?(e.range=e._r.slice(),Pe(e,t),pe(e,t)):0}function pe(e,t,n){return e._length*(1-t)*ke[n||e.constraintoward||"middle"]}return x.length*b.length!=1&&Ze(F,ie),F},makeDragger:c,makeRectDragger:ze,makeZoombox:Be,makeCorners:qe,updateZoombox:Ue,xyCorners:Ge,transitionZoombox:u,removeZoombox:Ye,showDoubleClickNotifier:Ve,attachWheelEventHandler:Ze}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../constants/alignment":260,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/subroutines":321,"../../registry":373,"../plots":366,"./axes":331,"./axis_ids":335,"./constants":338,"./scale_zoom":350,"./select":351,"@plotly/d3":20,"has-passive-events":63,tinycolor2:119}],341:[function(e,t,n){"use strict";var r=e("@plotly/d3"),l=e("../../components/fx"),c=e("../../components/dragelement"),a=e("../../lib/setcursor"),u=e("./dragbox").makeDragBox,d=e("./constants").DRAGGERSIZE;n.initInteractions=function(o){var e,s=o._fullLayout;o._context.staticPlot?r.select(o).selectAll(".drag").remove():(s._has("cartesian")||s._has("splom"))&&(Object.keys(s._plots||{}).sort(function(e,t){if((s._plots[e].mainplot&&!0)!==(s._plots[t].mainplot&&!0))return s._plots[e].mainplot?1:-1;e=e.split("y"),t=t.split("y");return e[0]===t[0]?Number(e[1]||1)-Number(t[1]||1):Number(e[0]||1)-Number(t[0]||1)}).forEach(function(t){var n,e,r=s._plots[t],a=r.xaxis,i=r.yaxis;r.mainplot||((n=u(o,r,a._offset,i._offset,a._length,i._length,"ns","ew")).onmousemove=function(e){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===t&&o._fullLayout._plots[t]&&l.hover(o,e,t)},l.hover(o,e,t),o._fullLayout._lasthover=n,o._fullLayout._hoversubplot=t},n.onmouseout=function(e){o._dragging||(o._fullLayout._hoversubplot=null,c.unhover(o,e))},o._context.showAxisDragHandles&&(u(o,r,a._offset-d,i._offset-d,d,d,"n","w"),u(o,r,a._offset+a._length,i._offset-d,d,d,"n","e"),u(o,r,a._offset-d,i._offset+i._length,d,d,"s","w"),u(o,r,a._offset+a._length,i._offset+i._length,d,d,"s","e"))),o._context.showAxisDragHandles&&(t===a._mainSubplot&&(e=a._mainLinePosition,"top"===a.side&&(e-=d),u(o,r,a._offset+.1*a._length,e,.8*a._length,d,"","ew"),u(o,r,a._offset,e,.1*a._length,d,"","w"),u(o,r,a._offset+.9*a._length,e,.1*a._length,d,"","e")),t===i._mainSubplot&&(a=i._mainLinePosition,"right"!==i.side&&(a-=d),u(o,r,a,i._offset+.1*i._length,d,.8*i._length,"ns",""),u(o,r,a,i._offset+.9*i._length,d,.1*i._length,"s",""),u(o,r,a,i._offset,d,.1*i._length,"n","")))}),(e=s._hoverlayer.node()).onmousemove=function(e){e.target=o._fullLayout._lasthover,l.hover(o,e,s._hoversubplot)},e.onclick=function(e){e.target=o._fullLayout._lasthover,l.click(o,e)},e.onmousedown=function(e){o._fullLayout._lasthover.onmousedown(e)},n.updateFx(o))},n.updateFx=function(e){var t=e._fullLayout,e="pan"===t.dragmode?"move":"crosshair";a(t._draggers,e)}},{"../../components/dragelement":174,"../../components/fx":195,"../../lib/setcursor":305,"./constants":338,"./dragbox":340,"@plotly/d3":20}],342:[function(e,t,n){"use strict";t.exports={clearOutlineControllers:function(e){(e=e._fullLayout._zoomlayer)&&e.selectAll(".outline-controllers").remove()},clearSelect:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}}},{}],343:[function(e,t,n){"use strict";var r=e("../../lib").strTranslate;function a(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}t.exports={p2r:a,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(t){var n="y"===t._id.charAt(0)?1:0;return function(e){return a(t,e[n])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},{"../../lib":285}],344:[function(e,t,n){"use strict";var g=e("../../registry"),y=e("../../lib"),v=e("./axis_ids");t.exports=function(m){return function(e,t){var n=e[m];if(Array.isArray(n))for(var r=g.subplotsRegistry.cartesian,a=r.idRegex,e=t._subplots,i=e.xaxis,o=e.yaxis,s=e.cartesian,l=t._has("cartesian")||t._has("gl2d"),c=0;c<n.length;c++){var u,d,f,p,h=n[c];y.isPlainObject(h)&&(u=v.cleanId(h.xref,"x",!1),d=v.cleanId(h.yref,"y",!1),f=a.x.test(u),p=a.y.test(d),(f||p)&&(l||y.pushUnique(t._basePlotModules,r),h=!1,f&&-1===i.indexOf(u)&&(i.push(u),h=!0),p&&-1===o.indexOf(d)&&(o.push(d),h=!0),h&&f&&p&&s.push(u+d)))}}}},{"../../lib":285,"../../registry":373,"./axis_ids":335}],345:[function(e,t,n){"use strict";var v=e("@plotly/d3"),x=e("../../registry"),p=e("../../lib"),r=e("../plots"),b=e("../../components/drawing"),_=e("../get_data").getModuleCalcData,m=e("./axis_ids"),w=e("./constants"),a=e("../../constants/xmlns_namespaces"),u=p.ensureSingle;function d(e,t,n){return p.ensureSingle(e,t,n,function(e){e.datum(n)})}function g(r,a,e,i,o){for(var t=w.traceLayerClasses,n=r._fullLayout,s=n._modules,l=[],c=[],u=0;u<s.length;u++){var d,f,p,h,m=(d=s[u]).name,g=x.modules[m].categories;g.svg&&(f=d.layerName||m+"layer",p=d.plot,h=(m=_(e,p))[0],e=m[1],h.length&&l.push({i:t.indexOf(f),className:f,plotMethod:p,cdModule:h}),g.zoomScale&&c.push("."+f))}l.sort(function(e,t){return e.i-t.i});var y=a.plot.selectAll("g.mlayer").data(l,function(e){return e.className});y.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0).classed("rangeplot",a.isRangePlot),y.exit().remove(),y.order(),y.each(function(e){var t=v.select(this),n=e.className;e.plotMethod(r,a,e.cdModule,t,i,o),-1===w.clipOnAxisFalseQuery.indexOf("."+n)&&b.setClipUrl(t,a.layerClipId,r)}),n._has("scattergl")&&(d=x.getModule("scattergl"),h=_(e,d)[0],d.plot(r,a,h)),r._context.staticPlot||(a._hasClipOnAxisFalse&&(a.clipOnAxisFalseTraces=a.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),c.length&&(n=a.plot.selectAll(c.join(",")).selectAll(".trace"),a.zoomScalePts=n.selectAll("path.point"),a.zoomScaleTxt=n.selectAll(".textpoint")))}function i(e,t){var n,r,a,i=t.plotgroup,o=t.id,s=w.layerValue2layerClass[t.xaxis.layer],l=w.layerValue2layerClass[t.yaxis.layer],c=e._fullLayout._hasOnlyLargeSploms;t.mainplot?(r=(n=t.mainplotinfo).plotgroup,e=o+"-x",a=o+"-y",t.gridlayer=n.gridlayer,t.zerolinelayer=n.zerolinelayer,u(n.overlinesBelow,"path",e),u(n.overlinesBelow,"path",a),u(n.overaxesBelow,"g",e),u(n.overaxesBelow,"g",a),t.plot=u(n.overplot,"g",o),u(n.overlinesAbove,"path",e),u(n.overlinesAbove,"path",a),u(n.overaxesAbove,"g",e),u(n.overaxesAbove,"g",a),t.xlines=r.select(".overlines-"+s).select("."+e),t.ylines=r.select(".overlines-"+l).select("."+a),t.xaxislayer=r.select(".overaxes-"+s).select("."+e),t.yaxislayer=r.select(".overaxes-"+l).select("."+a)):c?(t.xlines=u(i,"path","xlines-above"),t.ylines=u(i,"path","ylines-above"),t.xaxislayer=u(i,"g","xaxislayer-above"),t.yaxislayer=u(i,"g","yaxislayer-above")):(a=u(i,"g","layer-subplot"),t.shapelayer=u(a,"g","shapelayer"),t.imagelayer=u(a,"g","imagelayer"),t.gridlayer=u(i,"g","gridlayer"),t.zerolinelayer=u(i,"g","zerolinelayer"),u(i,"path","xlines-below"),u(i,"path","ylines-below"),t.overlinesBelow=u(i,"g","overlines-below"),u(i,"g","xaxislayer-below"),u(i,"g","yaxislayer-below"),t.overaxesBelow=u(i,"g","overaxes-below"),t.plot=u(i,"g","plot"),t.overplot=u(i,"g","overplot"),t.xlines=u(i,"path","xlines-above"),t.ylines=u(i,"path","ylines-above"),t.overlinesAbove=u(i,"g","overlines-above"),u(i,"g","xaxislayer-above"),u(i,"g","yaxislayer-above"),t.overaxesAbove=u(i,"g","overaxes-above"),t.xlines=i.select(".xlines-"+s),t.ylines=i.select(".ylines-"+l),t.xaxislayer=i.select(".xaxislayer-"+s),t.yaxislayer=i.select(".yaxislayer-"+l)),c||(d(t.gridlayer,"g",t.xaxis._id),d(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(m.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function y(e,t){if(e){var n,r={};for(n in e.each(function(e){e=e[0];v.select(this).remove(),T(e,t),r[e]=!0}),t._plots)for(var a=t._plots[n].overlays||[],i=0;i<a.length;i++){var o=a[i];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function T(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=w.idRegex,n.attrRegex=w.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){for(var n,r,t=t._subplots,a=t.xaxis,i=t.yaxis,o=t.cartesian,s=o.concat(t.gl2d||[]),l={},c={},u=0;u<s.length;u++){var d=s[u].split("y");c["y"+d[l[d[0]]=1]]=1}for(u=0;u<a.length;u++)l[n=a[u]]||(r=(e[m.id2name(n)]||{}).anchor,w.idRegex.y.test(r)||(r="y"),o.push(n+r),s.push(n+r),c[r]||(c[r]=1,p.pushUnique(i,r)));for(u=0;u<i.length;u++)c[r=i[u]]||(n=(e[m.id2name(r)]||{}).anchor,w.idRegex.x.test(n)||(n="x"),o.push(n+r),s.push(n+r),l[n]||(l[n]=1,p.pushUnique(a,n)));if(!s.length){for(var f in r=n="",e)w.attrRegex.test(f)&&("x"===f.charAt(0)?(!n||+f.substr(5)<+n.substr(5))&&(n=f):(!r||+f.substr(5)<+r.substr(5))&&(r=f));n=n?m.name2id(n):"x",r=r?m.name2id(r):"y",a.push(n),i.push(r),o.push(n+r)}},n.plot=function(e,t,n,r){var a,i=e._fullLayout,o=i._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],a=0;a<s.length;a++)t.push(a);for(a=0;a<o.length;a++){for(var l,c=o[a],u=i._plots[c],d=[],f=0;f<s.length;f++){var p=s[f],h=p[0].trace;h.xaxis+h.yaxis===c&&(-1===t.indexOf(h.index)&&!h.carpet||(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(h.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(p)),l=p)}g(e,u,d,n,r)}},n.clean=function(e,t,n,r){var a,i,o=r._plots||{},s=t._plots||{},l=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(i in o)(a=o[i]).plotgroup&&a.plotgroup.remove();var c=r._has&&r._has("gl"),u=t._has&&t._has("gl");if(c&&!u)for(i in o)(a=o[i])._scene&&a._scene.destroy();if(l.xaxis&&l.yaxis)for(var d=m.listIds({_fullLayout:r}),f=0;f<d.length;f++){var p=d[f];t[m.id2name(p)]||r._infolayer.selectAll(".g-"+p+"title").remove()}c=r._has&&r._has("cartesian"),u=t._has&&t._has("cartesian");if(c&&!u)y(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(l.cartesian)for(f=0;f<l.cartesian.length;f++){var h=l.cartesian[f];s[h]||(r._cartesianlayer.selectAll("."+h+",."+h+"-x,."+h+"-y").remove(),T(h,r))}},n.drawFramework=function(n){var r=n._fullLayout,e=function(e){var t,n,r,a,i,o,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){r=l[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var f=i._mainAxis,p=o._mainAxis,f=f._id+p._id,p=s._plots[f];a.overlays=[],f!==r&&p?(a.mainplot=f,a.mainplotinfo=p,d.push(r)):(a.mainplot=void 0,a.mainplotinfo=void 0,u.push(r))}for(t=0;t<d.length;t++)r=d[t],(a=s._plots[r]).mainplotinfo.overlays.push(a);var h=u.concat(d),m=new Array(c);for(t=0;t<c;t++){r=h[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var g=[r,i.layer,o.layer,i.overlaying||"",o.overlaying||""];for(n=0;n<a.overlays.length;n++)g.push(a.overlays[n].id);m[t]=g}return m}(n),e=r._cartesianlayer.selectAll(".subplot").data(e,String);e.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),e.order(),e.exit().call(y,r),e.each(function(e){var t=e[0],e=r._plots[t];e.plotgroup=v.select(this),i(n,e),e.draglayer=u(r._draggers,"g",t)})},n.rangePlot=function(e,t,n){i(e,t),g(e,t,n),r.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=v.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:a.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":177,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"../get_data":362,"../plots":366,"./attributes":329,"./axis_ids":335,"./constants":338,"./graph_interact":341,"./layout_attributes":346,"./layout_defaults":347,"./transition_axes":356,"@plotly/d3":20}],346:[function(e,t,n){"use strict";var r=e("../font_attributes"),a=e("../../components/color/attributes"),i=e("../../components/drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,c=e("../../constants/numerical").ONEDAY,u=e("./constants"),d=u.HOUR_PATTERN,e=u.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,d,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":154,"../../components/drawing/attributes":176,"../../constants/numerical":265,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_format_attributes":334,"../font_attributes":360,"./constants":338}],347:[function(e,t,n){"use strict";var K=e("../../lib"),Q=e("../../components/color"),ee=e("../../components/fx/helpers").isUnifiedHover,te=e("../../components/fx/hovermode_defaults"),ne=e("../../plot_api/plot_template"),re=e("../layout_attributes"),ae=e("./layout_attributes"),ie=e("./type_defaults"),oe=e("./axis_defaults"),se=e("./constraints"),le=e("./position_defaults"),ce=e("./axis_ids"),ue=ce.id2name,de=ce.name2id,fe=e("./constants").AX_ID_PATTERN,e=e("../../registry"),pe=e.traceIs,he=e.getComponentMethod;function me(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(o,e,t){for(var n,r=e.autotypenumbers,a={},i={},s={},l={},c={},u={},d={},f={},p={},h={},m=0;m<t.length;m++){var g,y,v=t[m];if(pe(v,"cartesian")||pe(v,"gl2d")){if(v.xaxis)g=ue(v.xaxis),me(a,g,v);else if(v.xaxes)for(n=0;n<v.xaxes.length;n++)me(a,ue(v.xaxes[n]),v);if(v.yaxis)y=ue(v.yaxis),me(a,y,v);else if(v.yaxes)for(n=0;n<v.yaxes.length;n++)me(a,ue(v.yaxes[n]),v);"funnel"===v.type?"h"===v.orientation?(g&&(i[g]=!0),y&&(d[y]=!0)):y&&(s[y]=!0):"image"===v.type?(y&&(f[y]=!0),g&&(f[g]=!0)):(y&&(c[y]=!0,u[y]=!0),pe(v,"carpet")&&("carpet"!==v.type||v._cheater)||g&&(l[g]=!0)),"carpet"===v.type&&v._cheater&&g&&(i[g]=!0),pe(v,"2dMap")&&(p[g]=!0,p[y]=!0),pe(v,"oriented")&&(h["h"===v.orientation?y:g]=!0)}}var x=e._subplots,b=x.xaxis,_=x.yaxis,w=K.simpleMap(b,ue),T=K.simpleMap(_,ue),M=w.concat(T),x=Q.background;b.length&&_.length&&(x=K.coerce(o,e,re,"plot_bgcolor"));var k,A,S=Q.combine(x,e.paper_bgcolor);function E(){var e=a[Z]||[];X._traceIndices=e.map(function(e){return e._expandedIndex}),X._annIndices=[],X._shapeIndices=[],X._imgIndices=[],X._subplotsWith=[],X._counterAxes=[],X._name=X._attr=Z,X._id=k}function L(e,t){return K.coerce($,X,ae,e,t)}function C(e,t){return K.coerce2($,X,ae,e,t)}function D(e,t){for(var n="x"===e?w:T,r=[],a=0;a<n.length;a++){var i=n[a];i===t||(o[i]||{}).overlaying||r.push(de(i))}return r}var O={x:_,y:b},P=O.x.concat(O.y),I={},R=[];function N(){var e=$.matches;fe.test(e)&&-1===P.indexOf(e)&&(I[e]=$.type,R=Object.keys(I))}var z=te(o,e),F=ee(z);for(m=0;m<M.length;m++){Z=M[m],k=de(Z),A=Z.charAt(0),K.isPlainObject(o[Z])||(o[Z]={}),$=o[Z],X=ne.newContainer(e,Z,A+"axis"),E();var j="x"===A&&!l[Z]&&i[Z]||"y"===A&&!c[Z]&&s[Z],H="y"===A&&(!u[Z]&&d[Z]||f[Z]),B={letter:A,font:e.font,outerTicks:p[Z],showGrid:!h[Z],data:a[Z]||[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:j,reverseDflt:H,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[A]||{})[k]};L("uirevision",e.uirevision),ie($,X,L,B),oe($,X,L,B,e);var q=F&&A===z.charAt(0),U=C("spikecolor",F?X.color:void 0),Y=C("spikethickness",F?1.5:void 0),j=C("spikedash",F?"dot":void 0),H=C("spikemode",F?"across":void 0),B=C("spikesnap");L("showspikes",!!(q||U||Y||j||H||B))||(delete X.spikecolor,delete X.spikethickness,delete X.spikedash,delete X.spikemode,delete X.spikesnap),le($,X,L,{letter:A,counterAxes:O[A],overlayableAxes:D(A,Z),grid:e.grid}),L("title.standoff"),N(),X._input=$}for(m=0;m<R.length;){k=R[m++],A=(Z=ue(k)).charAt(0),K.isPlainObject(o[Z])||(o[Z]={}),$=o[Z],X=ne.newContainer(e,Z,A+"axis"),E();var V={letter:A,font:e.font,outerTicks:p[Z],showGrid:!h[Z],data:[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[A]||{})[k]};L("uirevision",e.uirevision),X.type=I[k]||"linear",oe($,X,L,V,e),le($,X,L,{letter:A,counterAxes:O[A],overlayableAxes:D(A,Z),grid:e.grid}),L("fixedrange"),N(),X._input=$}var G=he("rangeslider","handleDefaults"),W=he("rangeselector","handleDefaults");for(m=0;m<w.length;m++)Z=w[m],$=o[Z],X=e[Z],G(o,e,Z),"date"===X.type&&W($,X,e,T,X.calendar),L("fixedrange");for(m=0;m<T.length;m++){var Z=T[m],$=o[Z],X=e[Z],J=e[ue(X.anchor)];L("fixedrange",he("rangeslider","isVisible")(J))}se.handleDefaults(o,e,{axIds:P.concat(R).sort(ce.idSort),axHasImage:f})}},{"../../components/color":155,"../../components/fx/helpers":191,"../../components/fx/hovermode_defaults":194,"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"../layout_attributes":364,"./axis_defaults":333,"./axis_ids":335,"./constants":338,"./constraints":339,"./layout_attributes":346,"./position_defaults":349,"./type_defaults":357}],348:[function(e,t,n){"use strict";var l=e("tinycolor2").mix,c=e("../../components/color/attributes").lightFraction,u=e("../../lib");t.exports=function(n,r,e,a){var t=(a=a||{}).dfltColor;function i(e,t){return u.coerce2(n,r,a.attributes,e,t)}var o=i("linecolor",t),s=i("linewidth");e("showline",a.showLine||!!o||!!s)||(delete r.linecolor,delete r.linewidth);o=i("gridcolor",l(t,a.bgColor,a.blend||c).toRgbString()),s=i("gridwidth");e("showgrid",a.showGrid||!!o||!!s)||(delete r.gridcolor,delete r.gridwidth),a.noZeroLine||(s=i("zerolinecolor",t),t=i("zerolinewidth"),e("zeroline",a.showGrid||!!s||!!t)||(delete r.zerolinecolor,delete r.zerolinewidth))}},{"../../components/color/attributes":154,"../../lib":285,tinycolor2:119}],349:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib");t.exports=function(e,t,n,r){var a=r.counterAxes||[],i=r.overlayableAxes||[],o=r.letter,r=r.grid;r&&(s=r._domains[o][r._axisMap[t._id]],l=r._anchors[t._id],s&&(c=r[o+"side"].split(" ")[0],u=r.domain[o]["right"===c||"top"===c?1:0]));var s=s||[0,1],l=l||!d(e.position)&&a[0]||"free",c=c||("x"===o?"bottom":"left"),u=u||0;"free"===f.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:l}},"anchor")&&n("position",u),f.coerce(e,t,{side:{valType:"enumerated",values:"x"===o?["bottom","top"]:["left","right"],dflt:c}},"side");c=!1;return(c=i.length?f.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying"):c)||((c=n("domain",s))[0]>c[1]-1/4096&&(t.domain=s),f.noneOrAll(e.domain,t.domain,s)),n("layer"),t}},{"../../lib":285,"fast-isnumeric":31}],350:[function(e,t,n){"use strict";var a=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=a[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],n=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(n+(r[0]-n)*t),e.l2r(n+(r[1]-n)*t)],e.setScale()}},{"../../constants/alignment":260}],351:[function(e,t,n){"use strict";var q=e("polybooljs"),h=e("../../registry"),U=e("../../components/drawing").dashStyle,Y=e("../../components/color"),V=e("../../components/fx"),i=e("../../components/fx/helpers").makeEventData,r=e("../../components/dragelement/helpers"),G=r.freeMode,W=r.rectMode,Z=r.drawMode,$=r.openMode,X=r.selectMode,J=e("../../components/shapes/draw_newshape/display_outlines"),K=e("../../components/shapes/draw_newshape/helpers").handleEllipse,a=e("../../components/shapes/draw_newshape/newshapes"),Q=e("../../lib"),l=e("../../lib/polygon"),ee=e("../../lib/throttle"),f=e("./axis_ids").getFromId,m=e("../../lib/clear_gl_canvases"),g=e("../../plot_api/subroutines").redrawReglTraces,te=e("./constants"),ne=te.MINSELECT,re=l.filter,ae=l.tester,s=e("./handle_outline").clearSelect,e=e("./helpers"),ie=e.p2r,oe=e.axValue,se=e.getTransform;function le(e,t,n,r,a,i,o){var s,l,c,u=t._hoverdata,d=-1<t._fullLayout.clickmode.indexOf("event"),f=[];if((c=u)&&Array.isArray(c)&&!0!==c[0].hoverOnBox){ue(e,t,i);var p,a=function(e,t){var n,r,a=e[0],i=-1,o=[];for(r=0;r<t.length;r++)if(n=t[r],a.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===a.hoverOnBox)break;void 0!==a.pointNumber?i=a.pointNumber:void 0!==a.binNumber&&(i=a.binNumber,o=a.pointNumbers);break}return{pointNumber:i,pointNumbers:o,searchInfo:n}}(u,p=fe(t,n,r,a));if(0<a.pointNumbers.length?function(e,t){var n,r,a,i=[];for(a=0;a<e.length;a++)(n=e[a]).cd[0].trace.selectedpoints&&0<n.cd[0].trace.selectedpoints.length&&i.push(n);if(1===i.length&&i[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(a=0;a<t.pointNumbers.length;a++)if(r.selectedpoints.indexOf(t.pointNumbers[a])<0)return!1;return!0}return!1}(p,a):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if(t=e[n],(t=t.cd[0].trace).selectedpoints){if(1<t.selectedpoints.length)return!1;if(1<(r+=t.selectedpoints.length))return!1}return 1===r}(p)&&(h=v(a))){for(o&&o.remove(),g=0;g<p.length;g++)(s=p[g])._module.selectPoints(s,!1);pe(t,p),de(i),d&&t.emit("plotly_deselect",null)}else{for(var e=e.shiftKey&&(void 0!==h?h:v(a)),h={pointNumber:a.pointNumber,searchInfo:a.searchInfo,subtract:e},m=ce(i.selectionDefs.concat([h])),g=0;g<p.length;g++)if(l=he(p[g]._module.selectPoints(p[g],m),p[g]),f.length)for(var y=0;y<l.length;y++)f.push(l[y]);else f=l;pe(t,p,a={points:f}),i&&i.selectionDefs.push(h),o&&(e=i.mergedPolygons,h=$(i.dragmode),J(me(e,h),o,i)),d&&t.emit("plotly_selected",a)}}}function c(e){return"pointNumber"in e&&"searchInfo"in e}function ce(e){for(var t,o=[],n=c(e[0])?0:e[0][0][0],r=n,a=c(e[0])?0:e[0][0][1],i=a,s=0;s<e.length;s++)c(e[s])?o.push(function(i){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,n,r){var a=i.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===a&&n===i.pointNumber},isRect:!1,degenerate:!1,subtract:i.subtract}}(e[s])):((t=l.tester(e[s])).subtract=e[s].subtract,o.push(t),n=Math.min(n,t.xmin),r=Math.max(r,t.xmax),a=Math.min(a,t.ymin),i=Math.max(i,t.ymax));return{xmin:n,xmax:r,ymin:a,ymax:i,pts:[],contains:function(e,t,n,r){for(var a=!1,i=0;i<o.length;i++)o[i].contains(e,t,n,r)&&(a=!1===o[i].subtract);return a},isRect:!1,degenerate:!1}}function ue(e,t,n){t._fullLayout._drawing=!1;var r=t._fullLayout,a=n.plotinfo,i=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===a.id,i=(e.shiftKey||e.altKey)&&!(Z(i)&&$(i));o&&i&&a.selection&&a.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=a.selection.selectionDefs,n.mergedPolygons=a.selection.mergedPolygons):i&&a.selection||de(n),o||(s(t),r._lastSelectedSubplot=a.id)}function de(e){var t=e.dragmode,n=e.plotinfo,r=e.gd;0<=r._fullLayout._activeShapeIndex&&r._fullLayout._deactivateShape(r),!Z(t)||(t=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id))&&r._fullLayout._drawing&&((t=a(t,e))&&h.call("_guiRelayout",r,{shapes:t}),r._fullLayout._drawing=!1),n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function fe(e,t,n,r){for(var a,i,o,s=[],l=t.map(function(e){return e._id}),c=n.map(function(e){return e._id}),u=0;u<e.calcdata.length;u++)!0===(o=(a=e.calcdata[u])[0].trace).visible&&o._module&&o._module.selectPoints&&(!r||o.subplot!==r&&o.geo!==r?"splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[c[0]]?((i=d(o._module,a,t[0],n[0])).scene=e._fullLayout._splomScenes[o.uid],s.push(i)):"sankey"===o.type?(i=d(o._module,a,t[0],n[0]),s.push(i)):-1!==l.indexOf(o.xaxis)&&-1!==c.indexOf(o.yaxis)&&s.push(d(o._module,a,f(e,o.xaxis),f(e,o.yaxis))):s.push(d(o._module,a,t[0],n[0])));return s;function d(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function v(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,e=e.pointNumbers,n=0<e.length?e[0]:n;return!!t.selectedpoints&&-1<t.selectedpoints.indexOf(n)}function pe(e,t,n){var r,a;for(l=0;l<t.length;l++){var i=t[l].cd[0].trace._fullInput,o=e._fullLayout._tracePreGUI[i.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=i._input.selectedpoints||null)}if(n){for(var s=n.points||[],l=0;l<t.length;l++)(a=t[l].cd[0].trace)._input.selectedpoints=a._fullInput.selectedpoints=[],a._fullInput!==a&&(a.selectedpoints=[]);for(l=0;l<s.length;l++){var c=s[l],u=c.data,d=c.fullData;c.pointIndices?([].push.apply(u.selectedpoints,c.pointIndices),a._fullInput!==a&&[].push.apply(d.selectedpoints,c.pointIndices)):(u.selectedpoints.push(c.pointIndex),a._fullInput!==a&&d.selectedpoints.push(c.pointIndex))}}else for(l=0;l<t.length;l++)delete(a=t[l].cd[0].trace).selectedpoints,delete a._input.selectedpoints,a._fullInput!==a&&delete a._fullInput.selectedpoints;var f=!1;for(l=0;l<t.length;l++){a=(r=(p=t[l]).cd)[0].trace,h.traceIs(a,"regl")&&(f=!0);var p=p._module,p=p.styleOnSelect||p.style;p&&(p(e,r,r[0].node3),r[0].nodeRangePlot3&&p(e,r,r[0].nodeRangePlot3))}f&&(m(e),g(e))}function he(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,a=0;a<e.length;a++)e[a]=i(e[a],r,n);return e}function me(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var a=0;a<e[r].length;a++){n[r][a]=[],n[r][a][0]=a?"L":"M";for(var i=0;i<e[r][a].length;i++)n[r][a].push(e[r][a][i])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}t.exports={prepSelect:function(e,t,n,s,r){var l=G(r),c=W(r),u=$(r),d=Z(r),f=X(r),p="drawcircle"===r,h="drawline"===r||p,m=s.gd,g=m._fullLayout,a=g._zoomlayer,i=s.element.getBoundingClientRect(),o=s.plotinfo,y=se(o),v=t-i.left,x=n-i.top;g._calcInverseTransform(m);var b,_,w,T,M,k,A,S,E,v=(i=Q.apply3DTransform(g._invTransform)(v,x))[0],x=i[1],L=g._invScaleX,C=g._invScaleY,i="M"+v+","+x,D=s.xaxes[0]._length,O=s.yaxes[0]._length,P=s.xaxes.concat(s.yaxes),I=e.altKey&&!(Z(r)&&u);ue(e,m,s),l&&(w=re([[v,x]],te.BENDPX));var R=a.selectAll("path.select-outline-"+o.id).data(d?[0]:[1,2]),e=g.newshape;R.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+o.id}).style(d?{opacity:e.opacity/2,fill:u?void 0:e.fillcolor,stroke:e.line.color,"stroke-dasharray":U(e.line.dash,e.line.width),"stroke-width":e.line.width+"px"}:{}).attr("fill-rule",e.fillrule).classed("cursor-move",!!d).attr("transform",y).attr("d",i+"Z");var N,z=a.append("path").attr("class","zoombox-corners").style({fill:Y.background,stroke:Y.defaultLine,"stroke-width":1}).attr("transform",y).attr("d","M0,0Z"),F=g._uid+te.SELECTID,j=[],H=fe(m,s.xaxes,s.yaxes,s.subplot);function B(e,t){return e-t}N=o.fillRangeItems||(c?function(e,t){var n=e.range={};for(A=0;A<P.length;A++){var r=P[A],a=r._id.charAt(0);n[r._id]=[ie(r,t[a+"min"]),ie(r,t[a+"max"])].sort(B)}}:function(e,t,n){var r=e.lassoPoints={};for(A=0;A<P.length;A++){var a=P[A];r[a._id]=n.filtered.map(oe(a))}}),s.moveFn=function(e,t){b=Math.max(0,Math.min(D,L*e+v)),_=Math.max(0,Math.min(O,C*t+x));var n,r,a=Math.abs(b-v),i=Math.abs(_-x);if(c){if(f){var o,t=g.selectdirection;switch(o="any"===t?i<Math.min(.6*a,ne)?"h":a<Math.min(.6*i,ne)?"v":"d":t){case"h":n=p?O/2:0,r=O;break;case"v":n=p?D/2:0,r=D}}if(d)switch(g.newshape.drawdirection){case"vertical":o="h",n=p?O/2:0,r=O;break;case"horizontal":o="v",n=p?D/2:0,r=D;break;case"ortho":r=a<i?(o="h",n=x,_):(o="v",n=v,b);break;default:o="d"}"h"===o?((k=h?K(p,[b,n],[b,r]):[[v,n],[v,r],[b,r],[b,n]]).xmin=h?b:Math.min(v,b),k.xmax=h?b:Math.max(v,b),k.ymin=Math.min(n,r),k.ymax=Math.max(n,r),z.attr("d","M"+k.xmin+","+(x-ne)+"h-4v"+2*ne+"h4ZM"+(k.xmax-1)+","+(x-ne)+"h4v"+2*ne+"h-4Z")):"v"===o?((k=h?K(p,[n,_],[r,_]):[[n,x],[n,_],[r,_],[r,x]]).xmin=Math.min(n,r),k.xmax=Math.max(n,r),k.ymin=h?_:Math.min(x,_),k.ymax=h?_:Math.max(x,_),z.attr("d","M"+(v-ne)+","+k.ymin+"v-4h"+2*ne+"v4ZM"+(v-ne)+","+(k.ymax-1)+"v4h"+2*ne+"v-4Z")):"d"===o&&((k=h?K(p,[v,x],[b,_]):[[v,x],[v,_],[b,_],[b,x]]).xmin=Math.min(v,b),k.xmax=Math.max(v,b),k.ymin=Math.min(x,_),k.ymax=Math.max(x,_),z.attr("d","M0,0Z"))}else l&&(w.addPt([b,_]),k=w.filtered);T=s.selectionDefs&&s.selectionDefs.length?(M=function(e,t,n){if(n)return q.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions;return q.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(s.mergedPolygons,k,I),k.subtract=I,ce(s.selectionDefs.concat([k]))):(M=[k],ae(k)),J(me(M,u),R,s),f&&ee.throttle(F,te.SELECTDELAY,function(){var e;j=[];var t,n=[];for(A=0;A<H.length;A++)if(t=(S=H[A])._module.selectPoints(S,T),n.push(t),e=he(t,S),j.length)for(var r=0;r<e.length;r++)j.push(e[r]);else j=e;pe(m,H,E={points:j}),N(E,k,w),s.gd.emit("plotly_selecting",E)})},s.clickFn=function(e,t){var n;z.remove(),0<=m._fullLayout._activeShapeIndex?m._fullLayout._deactivateShape(m):d||(n=g.clickmode,ee.done(F).then(function(){if(ee.clear(F),2===e){for(R.remove(),A=0;A<H.length;A++)(S=H[A])._module.selectPoints(S,!1);pe(m,H),de(s),m.emit("plotly_deselect",null)}else-1<n.indexOf("select")&&le(t,m,s.xaxes,s.yaxes,s.subplot,s,R),"event"===n&&m.emit("plotly_selected",void 0);V.click(m,t)}).catch(Q.error))},s.doneFn=function(){z.remove(),ee.done(F).then(function(){ee.clear(F),s.gd.emit("plotly_selected",E),k&&s.selectionDefs&&(k.subtract=I,s.selectionDefs.push(k),s.mergedPolygons.length=0,[].push.apply(s.mergedPolygons,M)),s.doneFnCompleted&&s.doneFnCompleted(j)}).catch(Q.error),d&&de(s)}},clearSelect:s,clearSelectionsCache:de,selectOnClick:le}},{"../../components/color":155,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/fx/helpers":191,"../../components/shapes/draw_newshape/display_outlines":243,"../../components/shapes/draw_newshape/helpers":244,"../../components/shapes/draw_newshape/newshapes":245,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/polygon":297,"../../lib/throttle":308,"../../plot_api/subroutines":321,"../../registry":373,"./axis_ids":335,"./constants":338,"./handle_outline":342,"./helpers":343,polybooljs:73}],352:[function(e,t,n){"use strict";var y=e("@plotly/d3"),x=e("d3-time-format").utcFormat,b=e("fast-isnumeric"),_=e("../../lib"),w=_.cleanNumber,T=_.ms2DateTime,M=_.dateTime2ms,k=_.ensureNumber,A=_.isArrayOrTypedArray,r=e("../../constants/numerical"),S=r.FP_SAFE,E=r.BADNUM,L=r.LOG_CLIP,C=r.ONEWEEK,D=r.ONEDAY,O=r.ONEHOUR,P=r.ONEMIN,I=r.ONESEC,R=e("./axis_ids"),N=e("./constants"),z=N.HOUR_PATTERN,F=N.WEEKDAY_PATTERN;function j(e){return Math.pow(10,e)}function H(e){return null!=e}t.exports=function(v,p){p=p||{};var h=v._id||"x",m=h.charAt(0);function n(e,t){if(0<e)return Math.log(e)/Math.LN10;if(e<=0&&t&&v.range&&2===v.range.length){e=v.range[0],t=v.range[1];return.5*(e+t-2*L*Math.abs(e-t))}return E}function r(e,t,n,r){if((r||{}).msUTC&&b(e))return+e;if((r=M(e,n||v.calendar))===E){if(!b(e))return E;e=+e;n=Math.floor(10*_.mod(e+.05,1)),e=Math.round(e-n/10),r=M(new Date(e))+n/10}return r}function a(e,t,n){return T(e,t,n||v.calendar)}function t(e){return v._categories[Math.round(e)]}function g(e){if(H(e)){if(void 0===v._categoriesMap&&(v._categoriesMap={}),void 0!==v._categoriesMap[e])return v._categoriesMap[e];v._categories.push("number"==typeof e?String(e):e);var t=v._categories.length-1;return v._categoriesMap[e]=t}return E}function d(e){if(v._categoriesMap)return v._categoriesMap[e]}function i(e){var t=d(e);return void 0!==t?t:b(e)?+e:void 0}function o(e){return b(e)?+e:d(e)}function c(e,t,n){return y.round(n+t*e,2)}function s(e,t,n){return(e-n)/t}var u,l=function(e){return b(e)?c(e,v._m,v._b):E},f=function(e){return s(e,v._m,v._b)};v.rangebreaks&&(u="y"===m,l=function(e){if(!b(e))return E;var t=v._rangebreaks.length;if(!t)return c(e,v._m,v._b);for(var n=u,r=(n=v.range[0]>v.range[1]?!n:n)?-1:1,a=r*e,i=0,o=0;o<t;o++){var s=r*v._rangebreaks[o].min,l=r*v._rangebreaks[o].max;if(a<s)break;if(!(l<a)){i=a<(s+l)/2?o:o+1;break}i=o+1}n=v._B[i]||0;return isFinite(n)?c(e,v._m2,n):0},f=function(e){var t=v._rangebreaks.length;if(!t)return s(e,v._m,v._b);for(var n=0,r=0;r<t&&!(e<v._rangebreaks[r].pmin);r++)e>v._rangebreaks[r].pmax&&(n=r+1);return s(e,v._m2,v._B[n])}),v.c2l="log"===v.type?n:k,v.l2c="log"===v.type?j:k,v.l2p=l,v.p2l=f,v.c2p="log"===v.type?function(e,t){return l(n(e,t))}:l,v.p2c="log"===v.type?function(e){return j(f(e))}:f,-1!==["linear","-"].indexOf(v.type)?(v.d2r=v.r2d=v.d2c=v.r2c=v.d2l=v.r2l=w,v.c2d=v.c2r=v.l2d=v.l2r=k,v.d2p=v.r2p=function(e){return v.l2p(w(e))},v.p2d=v.p2r=f,v.cleanPos=k):"log"===v.type?(v.d2r=v.d2l=function(e,t){return n(w(e),t)},v.r2d=v.r2c=function(e){return j(w(e))},v.d2c=v.r2l=w,v.c2d=v.l2r=k,v.c2r=n,v.l2d=j,v.d2p=function(e,t){return v.l2p(v.d2r(e,t))},v.p2d=function(e){return j(f(e))},v.r2p=function(e){return v.l2p(w(e))},v.p2r=f,v.cleanPos=k):"date"===v.type?(v.d2r=v.r2d=_.identity,v.d2c=v.r2c=v.d2l=v.r2l=r,v.c2d=v.c2r=v.l2d=v.l2r=a,v.d2p=v.r2p=function(e,t,n){return v.l2p(r(e,0,n))},v.p2d=v.p2r=function(e,t,n){return a(f(e),t,n)},v.cleanPos=function(e){return _.cleanDate(e,E,v.calendar)}):"category"===v.type?(v.d2c=v.d2l=g,v.r2d=v.c2d=v.l2d=t,v.d2r=v.d2l_noadd=i,v.r2c=function(e){e=o(e);return void 0!==e?e:v.fraction2r(.5)},v.l2r=v.c2r=k,v.r2l=o,v.d2p=function(e){return v.l2p(v.r2c(e))},v.p2d=function(e){return t(f(e))},v.r2p=v.d2p,v.p2r=f,v.cleanPos=function(e){return"string"==typeof e&&""!==e?e:k(e)}):"multicategory"===v.type&&(v.r2d=v.c2d=v.l2d=t,v.d2r=v.d2l_noadd=i,v.r2c=function(e){e=i(e);return void 0!==e?e:v.fraction2r(.5)},v.r2c_just_indices=d,v.l2r=v.c2r=k,v.r2l=i,v.d2p=function(e){return v.l2p(v.r2c(e))},v.p2d=function(e){return t(f(e))},v.r2p=v.d2p,v.p2r=f,v.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:k(e)},v.setupMultiCategory=function(e){var t,n=v._traceIndices,r=v._matchGroup;if(r&&0===v._categories.length)for(var a in r)a!==h&&(a=p[R.id2name(a)],n=n.concat(a._traceIndices));for(var i=[[0,{}],[0,{}]],o=[],s=0;s<n.length;s++){var l=e[n[s]];if(m in l){var c=l[m],u=l._length||_.minRowLength(c);if(A(c[0])&&A(c[1]))for(t=0;t<u;t++){var d=c[0][t],f=c[1][t];H(d)&&H(f)&&(o.push([d,f]),d in i[0][1]||(i[0][1][d]=i[0][0]++),f in i[1][1]||(i[1][1][f]=i[1][0]++))}}}for(o.sort(function(e,t){var n=i[0][1],n=n[e[0]]-n[t[0]];if(n)return n;n=i[1][1];return n[e[1]]-n[t[1]]}),s=0;s<o.length;s++)g(o[s])}),v.fraction2r=function(e){var t=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return v.l2r(t+e*(n-t))},v.r2fraction=function(e){var t=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return(v.r2l(e)-t)/(n-t)},v.cleanRange=function(e,t){t=t||{};var n,r=_.nestedProperty(v,e=e||"range").get(),a="date"===v.type?_.dfltRange(v.calendar):"y"===m?N.DFLTRANGEY:t.dfltRange||N.DFLTRANGEX;if(a=a.slice(),"tozero"!==v.rangemode&&"nonnegative"!==v.rangemode||(a[0]=0),r&&2===r.length)for("date"!==v.type||v.autorange||(r[0]=_.cleanDate(r[0],E,v.calendar),r[1]=_.cleanDate(r[1],E,v.calendar)),n=0;n<2;n++)if("date"===v.type){if(!_.isDateTime(r[n],v.calendar)){v[e]=a;break}if(v.r2l(r[0])===v.r2l(r[1])){var i=_.constrain(v.r2l(r[0]),_.MIN_MS+1e3,_.MAX_MS-1e3);r[0]=v.l2r(i-1e3),r[1]=v.l2r(i+1e3);break}}else{if(!b(r[n])){if(!b(r[1-n])){v[e]=a;break}r[n]=r[1-n]*(n?10:.1)}r[n]<-S?r[n]=-S:r[n]>S&&(r[n]=S),r[0]===r[1]&&(i=Math.max(1,Math.abs(1e-6*r[0])),r[0]-=i,r[1]+=i)}else _.nestedProperty(v,e).set(a)},v.setScale=function(e){var t=p._size;v.overlaying&&(r=R.getFromId({_fullLayout:p},v.overlaying),v.domain=r.domain);var n=e&&v._r?"_r":"range",r=v.calendar;v.cleanRange(n);var a,i,e=v.r2l(v[n][0],r),n=v.r2l(v[n][1],r),r="y"===m;if((r?(v._offset=t.t+(1-v.domain[1])*t.h,v._length=t.h*(v.domain[1]-v.domain[0]),v._m=v._length/(e-n),v._b=-v._m*n):(v._offset=t.l+v.domain[0]*t.w,v._length=t.w*(v.domain[1]-v.domain[0]),v._m=v._length/(n-e),v._b=-v._m*e),v._rangebreaks=[],v._lBreaks=0,v._m2=0,v._B=[],v.rangebreaks)&&(v._rangebreaks=v.locateBreaks(Math.min(e,n),Math.max(e,n)),v._rangebreaks.length)){for(a=0;a<v._rangebreaks.length;a++)i=v._rangebreaks[a],v._lBreaks+=Math.abs(i.max-i.min);t=r;(t=n<e?!r:r)&&v._rangebreaks.reverse();var o=t?-1:1;for(v._m2=o*v._length/(Math.abs(n-e)-v._lBreaks),v._B.push(-v._m2*(r?n:e)),a=0;a<v._rangebreaks.length;a++)i=v._rangebreaks[a],v._B.push(v._B[v._B.length-1]-o*v._m2*(i.max-i.min));for(a=0;a<v._rangebreaks.length;a++)(i=v._rangebreaks[a]).pmin=l(i.min),i.pmax=l(i.max)}if(!isFinite(v._m)||!isFinite(v._b)||v._length<0)throw p._replotting=!1,new Error("Something went wrong with axis scaling")},v.maskBreaks=function(e){var t=v.rangebreaks||[];t._cachedPatterns||(t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?_.simpleMap(e.bounds,e.pattern?w:v.d2c):null})),t._cachedValues||(t._cachedValues=t.map(function(e){return e.enabled&&e.values?_.simpleMap(e.values,v.d2c).sort(_.sorterAsc):null}));for(var n=0;n<t.length;n++){var r=t[n];if(r.enabled)if(r.bounds){var a,i=r.pattern,o=(a=t._cachedPatterns[n])[0],s=a[1];switch(i){case F:c=(l=new Date(e)).getUTCDay(),s<o&&(s+=7,c<o&&(c+=7));break;case z:var l,c=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5);s<o&&(s+=24,c<o&&(c+=24));break;case"":c=e}if(o<=c&&c<s)return E}else for(var u=t._cachedValues[n],d=0;d<u.length;d++)if(s=(o=u[d])+r.dvalue,o<=e&&e<s)return E}return e},v.locateBreaks=function(i,o){var s=[];if(!v.rangebreaks)return s;for(var e=v.rangebreaks.slice().sort(function(e,t){return e.pattern===F&&t.pattern===z?-1:t.pattern===F&&e.pattern===z?1:0}),t=function(e,t){if((e=_.constrain(e,i,o))!==(t=_.constrain(t,i,o))){for(var n=!0,r=0;r<s.length;r++){var a=s[r];e<a.max&&t>=a.min&&(e<a.min&&(a.min=e),t>a.max&&(a.max=t),n=!1)}n&&s.push({min:e,max:t})}},n=0;n<e.length;n++){var r=e[n];if(r.enabled)if(r.bounds){var a=i,l=o;r.pattern&&(a=Math.floor(a));var c,u,d,f=(c=_.simpleMap(r.bounds,r.pattern?w:v.r2l))[0],p=c[1],h=new Date(a);switch(r.pattern){case F:d=C,u=(p-f+(p<f?7:0))*D,a+=f*D-(h.getUTCDay()*D+h.getUTCHours()*O+h.getUTCMinutes()*P+h.getUTCSeconds()*I+h.getUTCMilliseconds());break;case z:d=D,u=(p-f+(p<f?24:0))*O,a+=f*O-(h.getUTCHours()*O+h.getUTCMinutes()*P+h.getUTCSeconds()*I+h.getUTCMilliseconds());break;default:a=Math.min(c[0],c[1]),u=d=(l=Math.max(c[0],c[1]))-a}for(var m=a;m<l;m+=d)t(m,m+u)}else for(var g=_.simpleMap(r.values,v.d2c),y=0;y<g.length;y++)t(f=g[y],p=f+r.dvalue)}return s.sort(function(e,t){return e.min-t.min}),s},v.makeCalcdata=function(e,t,n){var r=v.type,a="date"===r&&e[t+"calendar"];if(t in e){if(s=e[t],l=e._length||_.minRowLength(s),_.isTypedArray(s)&&("linear"===r||"log"===r)){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}if("multicategory"===r)return function(e,t){for(var n=new Array(t),r=0;r<t;r++){var a=(e[0]||[])[r],i=(e[1]||[])[r];n[r]=d([a,i])}return n}(s,l);for(c=new Array(l),u=0;u<l;u++)c[u]=v.d2c(s[u],0,a,n)}else for(var i=(t+"0"in e?v.d2c(e[t+"0"],0,a):0),o=e["d"+t]?Number(e["d"+t]):1,s=e[{x:"y",y:"x"}[t]],l=e._length||s.length,c=new Array(l),u=0;u<l;u++)c[u]=i+u*o;if(v.rangebreaks)for(u=0;u<l;u++)c[u]=v.maskBreaks(c[u]);return c},v.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&b(v.r2l(e[0]))&&b(v.r2l(e[1]))},v.isPtWithinRange=function(e,t){var n=v.c2l(e[m],null,t),e=v.r2l(v.range[0]),t=v.r2l(v.range[1]);return e<t?e<=n&&n<=t:t<=n&&n<=e},v._emptyCategories=function(){v._categories=[],v._categoriesMap={}},v.clearCalc=function(){var e=v._matchGroup;if(e){var t,n=null,r=null;for(t in e){var a=p[R.id2name(t)];if(a._categories){n=a._categories,r=a._categoriesMap;break}}n&&r?(v._categories=n,v._categoriesMap=r):v._emptyCategories()}else v._emptyCategories();if(v._initialCategories)for(var i=0;i<v._initialCategories.length;i++)g(v._initialCategories[i])},v.sortByInitialCategories=function(){var e=[];if(v._emptyCategories(),v._initialCategories)for(var t=0;t<v._initialCategories.length;t++)g(v._initialCategories[t]);var n,r,e=e.concat(v._traceIndices);for(n in v._matchGroup)h!==n&&((r=p[R.id2name(n)])._categories=v._categories,r._categoriesMap=v._categoriesMap,e=e.concat(r._traceIndices));return e};var e=p._d3locale;"date"===v.type&&(v._dateFormat=e?e.timeFormat:x,v._extraFormat=p._extraFormat),v._separators=p.separators,v._numFormat=e?e.numberFormat:y.format,delete v._minDtick,delete v._forceTick0}},{"../../constants/numerical":265,"../../lib":285,"./axis_ids":335,"./constants":338,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],353:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../components/color").contrast,u=e("./layout_attributes"),d=e("../array_container_defaults");function f(t){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(n.every(function(e){return t[e]===t[n[0]]})||1===n.length)return t[n[0]]}function p(n,r){function e(e,t){return l.coerce(n,r,u.tickformatstops,e,t)}e("enabled")&&(e("dtickrange"),e("value"))}t.exports=function(e,t,n,r,a,i){i&&1!==i.pass||function(e,t,n){e=f(e);t("tickprefix")&&t("showtickprefix",e);t("ticksuffix",n.tickSuffixDflt)&&t("showticksuffix",e)}(e,n,a),i&&2!==i.pass||function(e,t,n,r,a){var i=f(e);n("tickprefix")&&n("showtickprefix",i);n("ticksuffix",a.tickSuffixDflt)&&n("showticksuffix",i);{var o,s;n("showticklabels")&&(o=a.font||{},s=t.color,s=-1!==(t.ticklabelposition||"").indexOf("inside")?c(a.bgColor):s&&s!==u.color.dflt?s:o.color,l.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:s}),n("tickangle"),"category"!==r&&(s=n("tickformat"),d(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),t.tickformatstops.length||delete t.tickformatstops,s||"date"===r||(n("showexponent",i),n("exponentformat"),n("minexponent"),n("separatethousands"))))}}(e,t,n,r,a)}},{"../../components/color":155,"../../lib":285,"../array_container_defaults":326,"./layout_attributes":346}],354:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes");t.exports=function(e,t,n,r){var a=o.coerce2(e,t,s,"ticklen"),i=o.coerce2(e,t,s,"tickwidth"),e=o.coerce2(e,t,s,"tickcolor",t.color);n("ticks",r.outerTicks||a||i||e?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":285,"./layout_attributes":346}],355:[function(e,t,n){"use strict";var l=e("./clean_ticks"),c=e("../../lib").isArrayOrTypedArray;t.exports=function(n,r,e,t){function a(e){var t=n[e];return void 0!==t?t:(r._template||{})[e]}var i=a("tick0"),o=a("dtick"),s=a("tickvals"),s=e("tickmode",c(s)?"array":o?"linear":"auto");"auto"===s?e("nticks"):"linear"===s?(o=r.dtick=l.dtick(o,t),r.tick0=l.tick0(i,t,r.calendar,o)):"multicategory"!==t&&(void 0===e("tickvals")?r.tickmode="auto":e("ticktext"))}},{"../../lib":285,"./clean_ticks":337}],356:[function(e,t,n){"use strict";var f=e("@plotly/d3"),p=e("../../registry"),v=e("../../lib"),x=e("../../components/drawing"),b=e("./axes");t.exports=function(y,i,a,e){var o,s,l,c,r=y._fullLayout;if(0!==i.length){e&&(o=e());var u=f.ease(a.easing);return y._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var e={},t=0;t<i.length;t++){var n=i[t],r=n.plotinfo.xaxis,a=n.plotinfo.yaxis;n.xr0&&(e[r._name+".range"]=n.xr0.slice()),n.yr0&&(e[a._name+".range"]=n.yr0.slice())}return p.call("relayout",y,e).then(function(){for(var e=0;e<i.length;e++)d(i[e].plotinfo)})}()}),s=Date.now(),c=window.requestAnimationFrame(function e(){l=Date.now();for(var t=Math.min(1,(l-s)/a.duration),n=u(t),r=0;r<i.length;r++)!function(e,t){var n,r,a,i,o=e.plotinfo,s=o.xaxis,l=o.yaxis,c=s._length,u=l._length,d=!!e.xr1,f=!!e.yr1,p=[];d?(n=v.simpleMap(e.xr0,s.r2l),r=v.simpleMap(e.xr1,s.r2l),a=n[1]-n[0],i=r[1]-r[0],p[0]=(n[0]*(1-t)+t*r[0]-n[0])/(n[1]-n[0])*c,p[2]=c*(1-t+t*i/a),s.range[0]=s.l2r(n[0]*(1-t)+t*r[0]),s.range[1]=s.l2r(n[1]*(1-t)+t*r[1])):(p[0]=0,p[2]=c),f?(m=v.simpleMap(e.yr0,l.r2l),g=v.simpleMap(e.yr1,l.r2l),h=m[1]-m[0],e=g[1]-g[0],p[1]=(m[1]*(1-t)+t*g[1]-m[1])/(m[0]-m[1])*u,p[3]=u*(1-t+t*e/h),l.range[0]=s.l2r(m[0]*(1-t)+t*g[0]),l.range[1]=l.l2r(m[1]*(1-t)+t*g[1])):(p[1]=0,p[3]=u),b.drawOne(y,s,{skipTitle:!0}),b.drawOne(y,l,{skipTitle:!0}),b.redrawComponents(y,[s._id,l._id]);var h=d?c/p[2]:1,m=f?u/p[3]:1,t=d?p[0]:0,g=f?p[1]:0,c=d?p[0]/p[2]*c:0,u=f?p[1]/p[3]*u:0,c=s._offset-c,u=l._offset-u;o.clipRect.call(x.setTranslate,t,g).call(x.setScale,1/h,1/m),o.plot.call(x.setTranslate,c,u).call(x.setScale,h,m),x.setPointGroupScale(o.zoomScalePts,1/h,1/m),x.setTextPointsScale(o.zoomScaleTxt,1/h,1/m)}(i[r],n);c=l-s>a.duration?(function(){for(var e={},t=0;t<i.length;t++){var n=i[t],r=n.plotinfo.xaxis,a=n.plotinfo.yaxis;n.xr1&&(e[r._name+".range"]=n.xr1.slice()),n.yr1&&(e[a._name+".range"]=n.yr1.slice())}o&&o(),p.call("relayout",y,e).then(function(){for(var e=0;e<i.length;e++)d(i[e].plotinfo)})}(),window.cancelAnimationFrame(e)):window.requestAnimationFrame(e)}),Promise.resolve()}function d(e){var t=e.xaxis,n=e.yaxis;r._defs.select("#"+e.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),e.plot.call(x.setTranslate,t._offset,n._offset).call(x.setScale,1,1);n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(x.setPointGroupScale,1,1),n.selectAll(".textpoint").call(x.setTextPointsScale,1,1),n.call(x.hideOutsideRangePoints,e)}b.redrawComponents(y)}},{"../../components/drawing":177,"../../lib":285,"../../registry":373,"./axes":331,"@plotly/d3":20}],357:[function(e,t,n){"use strict";var p=e("../../registry").traceIs,h=e("./axis_autotype");function m(e){return{v:"x",h:"y"}[e.orientation||"v"]}function g(e,t){var n=m(e),r=p(e,"box-violin"),a=p(e._fullInput||{},"candlestick");return r&&!a&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,r){n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)&&(function(e,t){if("-"===e.type){var n,r=e._id,a=r.charAt(0);-1!==r.indexOf("scene")&&(r=a);var i=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if("splom"===a.type&&0<a._length&&(a["_"+n+"axes"]||{})[t])return a;if((a[n+"axis"]||n)===t){if(g(a,n))return a;if((a[n]||[]).length||a[n+"0"])return a}}}(t,r,a);if(i)if("histogram"!==i.type||a!=={v:"y",h:"x"}[i.orientation||"v"]){var o,s=a+"calendar",l=i[s],c={noMultiCategory:!p(i,"cartesian")||p(i,"noMultiCategory")};if("box"===i.type&&i._hasPreCompStats&&a==={h:"x",v:"y"}[i.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=e.autotypenumbers,g(i,a)){var u=m(i),d=[];for(n=0;n<t.length;n++){var f=t[n];p(f,"box-violin")&&(f[a+"axis"]||a)===r&&(void 0!==f[u]?d.push(f[u][0]):void 0!==f.name?d.push(f.name):d.push("text"),f[s]!==l&&(l=void 0))}e.type=h(d,l,c)}else"splom"===i.type?(o=i.dimensions[i._axesDim[r]]).visible&&(e.type=h(o.values,l,c)):e.type=h(i[a]||[i[a+"0"]],l,c)}else e.type="linear"}}(t,r.data),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":373,"./axis_autotype":332}],358:[function(e,t,u){"use strict";var o=e("../registry"),f=e("../lib");function c(e,t,n){var r,a=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return r=f.nestedProperty(r,t.prop).get(),{changed:a=(n=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&n[t.prop]!==r?!0:a,value:n[t.prop]=r}}function i(e,t){var r=[],n=t[0],a={};if("string"==typeof n)a[n]=t[1];else{if(!f.isPlainObject(n))return r;a=n}return l(a,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0),r}function s(c,e){var u=[],t=e[0],n=e[1],d=e[2],e={};if("string"==typeof t)e[t]=n;else{if(!f.isPlainObject(t))return u;e=t,void 0===d&&(d=n)}return void 0===d&&(d=null),l(e,function(e,t,n){if(Array.isArray(n)){var r=n.slice(),a=Math.min(r.length,c.data.length);d&&(a=Math.min(a,d.length));for(var i=[],o=0;o<a;o++)i[o]=d?d[o]:o}else r=n,i=d?d.slice():null;if(null===i)Array.isArray(r)&&(r=r[0]);else if(Array.isArray(i)){if(!Array.isArray(r)){var s=r;r=[];for(var l=0;l<i.length;l++)r[l]=s}r.length=Math.min(i.length,r.length)}u.push({type:"data",prop:e,traces:i,value:r})},"",0),u}function l(r,a,i,o){Object.keys(r).forEach(function(e){var t,n=r[e];"_"!==e[0]&&(t=i+(0<o?".":"")+e,f.isPlainObject(n)?l(n,a,t,o+1):a(t,e,n))})}u.manageCommandObserver=function(t,e,n,r){var a={},i=!0;(a=e&&e._commandObserver?e._commandObserver:a).cache||(a.cache={}),a.lookupTable={};var o=u.hasSimpleAPICommandBindings(t,n,a.lookupTable);if(e&&e._commandObserver){if(o)return a;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,a}if(o){c(t,o,a.cache),a.check=function(){if(i){var e=c(t,o,a.cache);return e.changed&&r&&void 0!==a.lookupTable[e.value]&&(a.disable(),Promise.resolve(r({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:a.lookupTable[e.value]})).then(a.enable,a.enable)),e.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],a.check);a.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],a.check)}}else f.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){i=!1},a.enable=function(){i=!0},e&&(e._commandObserver=a),a},u.hasSimpleAPICommandBindings=function(e,t,n){for(var r,a=t.length,i=0;i<a;i++){var o=t[i],s=o.method,o=o.args;if(Array.isArray(o)||(o=[]),!s)return!1;o=u.computeAPICommandBindings(e,s,o);if(1!==o.length)return!1;if(r){if((c=o[0]).type!==r.type)return!1;if(c.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var l=0;l<r.traces.length;l++)if(r.traces[l]!==c.traces[l])return!1}else if(c.prop!==r.prop)return!1}else r=o[0],Array.isArray(r.traces)&&r.traces.sort();var c,o=(c=o[0]).value;if(Array.isArray(o)){if(1!==o.length)return!1;o=o[0]}n&&(n[o]=i)}return r},u.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=o.apiMethodRegistry[t],a=[e];Array.isArray(n)||(n=[]);for(var i=0;i<n.length;i++)a.push(n[i]);return r.apply(null,a).catch(function(e){return f.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},u.computeAPICommandBindings=function(e,t,n){var r,a;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=i(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(i(0,[n[1]]));break;case"animate":a=n,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":285,"../registry":373}],359:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},n=(e.name&&e.name,e.trace,(t=t||{}).description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:e.editType},n.column={valType:"integer",min:0,dflt:0,editType:e.editType}),n},n.defaults=function(e,t,n,r){var a=r&&r.x||[0,1],r=r&&r.y||[0,1],t=t.grid;t&&(void 0!==(i=n("domain.column"))&&(i<t.columns?a=t._domains.x[i]:delete e.domain.column),void 0!==(i=n("domain.row"))&&(i<t.rows?r=t._domains.y[i]:delete e.domain.row));var i=n("domain.x",a),n=n("domain.y",r);i[0]<i[1]||(e.domain.x=a.slice()),n[0]<n[1]||(e.domain.y=r.slice())}},{"../lib/extend":279}],360:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType,t={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n=void 0===n?t:n},editType:t};return e.arrayOk&&(t.family.arrayOk=!0,t.size.arrayOk=!0,t.color.arrayOk=!0),t}},{}],361:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],362:[function(e,t,n){"use strict";var u=e("../registry"),d=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){t=u.subplotsRegistry[t];if(!t)return[];for(var r=t.attr,a=[],i=0;i<e.length;i++){var o=e[i];o[0].trace[r]===n&&a.push(o)}return a},n.getModuleCalcData=function(e,t){var n=[],r=[],a="string"==typeof t?u.getModule(t).plot:"function"==typeof t?t:t.plot;if(!a)return[n,e];for(var i=0;i<e.length;i++){var o=e[i],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===a?n:r).push(o)}return[n,r]},n.getSubplotData=function(e,t,n){if(!u.subplotsRegistry[t])return[];var r,a,i,o,s=u.subplotsRegistry[t].attr,l=[];"gl2d"===t&&(i="x"+(a=n.match(d))[1],o="y"+a[2]);for(var c=0;c<e.length;c++)r=e[c],"gl2d"===t&&u.traceIs(r,"gl2d")?r[s[0]]===i&&r[s[1]]===o&&l.push(r):r[s]===n&&l.push(r);return l}},{"../registry":373,"./cartesian/constants":338}],363:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[0,0,0,0],a=0;a<4;++a)for(n=0;n<4;++n)r[n]+=e[4*a+n]*t[a];return r}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],364:[function(e,t,n){"use strict";var r=e("./font_attributes"),a=e("./animation_attributes"),i=e("../components/color/attributes"),o=e("../components/shapes/draw_newshape/attributes"),s=e("./pad_attributes"),l=e("../lib/extend").extendFlat,e=r({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=i.defaultLine,t.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":154,"../components/shapes/draw_newshape/attributes":240,"../lib/extend":279,"./animation_attributes":325,"./font_attributes":360,"./pad_attributes":365}],365:[function(e,t,n){"use strict";t.exports=function(e){e=e.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],366:[function(e,t,n){"use strict";var k=e("@plotly/d3"),A=e("d3-time-format").timeFormatLocale,E=e("fast-isnumeric"),C=e("../registry"),y=e("../plot_api/plot_schema"),T=e("../plot_api/plot_template"),D=e("../lib"),m=e("../components/color"),v=e("../constants/numerical").BADNUM,O=e("./cartesian/axis_ids"),S=e("./cartesian/handle_outline").clearSelect,a=e("./animation_attributes"),i=e("./frame_attributes"),o=e("../plots/get_data").getModuleCalcData,L=D.relinkPrivateKeys,P=D._,I=t.exports={};D.extendFlat(I,C),I.attributes=e("./attributes"),I.attributes.type.values=I.allTypes,I.fontAttrs=e("./font_attributes"),I.layoutAttributes=e("./layout_attributes"),I.fontWeight="normal";var M=I.transformsRegistry,e=e("./command");I.executeAPICommand=e.executeAPICommand,I.computeAPICommandBindings=e.computeAPICommandBindings,I.manageCommandObserver=e.manageCommandObserver,I.hasSimpleAPICommandBindings=e.hasSimpleAPICommandBindings,I.redrawText=function(t){return t=D.getGraphDiv(t),new Promise(function(e){setTimeout(function(){t._fullLayout&&(C.getComponentMethod("annotations","draw")(t),C.getComponentMethod("legend","draw")(t),C.getComponentMethod("colorbar","draw")(t),e(I.previousPromises(t)))},300)})},I.resize=function(n){var r;n=D.getGraphDiv(n);var e=new Promise(function(t,e){n&&!D.isHidden(n)||e(new Error("Resize must be passed a displayed plot div element.")),n._redrawTimer&&clearTimeout(n._redrawTimer),n._resolveResize&&(r=n._resolveResize),n._resolveResize=t,n._redrawTimer=setTimeout(function(){var e;!n.layout||n.layout.width&&n.layout.height||D.isHidden(n)?t(n):(delete n.layout.width,delete n.layout.height,e=n.changed,n.autoplay=!0,C.call("relayout",n,{autosize:!0}).then(function(){n.changed=e,n._resolveResize===t&&(delete n._resolveResize,t(n))}))},100)});return r&&r(e),e},I.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},I.addLinks=function(e){var t,n,r,a;(e._context.showLink||e._context.showSources)&&(n=e._fullLayout,t=(a=D.ensureSingle(n._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:m.defaultLine,"pointer-events":"all"}).each(function(){var e=k.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})})).node(),r={y:n._paper.attr("height")-9},document.body.contains(t)&&t.getComputedTextLength()>=n.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=n._paper.attr("width")-7),a.attr(r),n=a.select(".js-link-to-tool"),r=a.select(".js-link-spacer"),a=a.select(".js-sourcelinks"),e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));{var r;e._context.sendData?n.on("click",function(){I.sendDataToCloud(e)}):(r=window.location.pathname.split("/"),t=window.location.search,n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+t}))}}(e,n),r.text(n.text()&&a.text()?" - ":""))},I.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=k.select(e).append("div").attr("id","hiddenform").style("display","none"),t=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return t.append("input").attr({type:"text",name:"data"}).node().value=I.graphJson(e,!1,"keepdata"),t.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var R=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],N=["year","month","dayMonth","dayMonthYear"];function z(e,a){var t=(t=e._context.locale)||"en-US",i=!1,o={};function n(e){for(var t=!0,n=0;n<a.length;n++){var r=a[n];o[r]||(e[r]?o[r]=e[r]:t=!1)}t&&(i=!0)}for(var r=0;r<2;r++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[t]||{}).format;if(c&&(n(c),i))break;s=C.localeRegistry}var u=t.split("-")[0];if(i||u===t)break;t=u}return i||n(C.localeRegistry.en.format),o}function g(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],r=r._module||M[r.type];if(r&&r.makesData)return!0}return!1}function c(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function F(e){var t=e.margin;e._size||((t=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)}).w=Math.round(e.width)-t.l-t.r,t.h=Math.round(e.height)-t.t-t.b),e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}I.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var a=e._fullLayout={},i=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],c=e.calcdata||[],u=e._context||{};e._transitionData||I.createTransitionData(e),a._dfltTitle={plot:P(e,"Click to enter Plot title"),x:P(e,"Click to enter X axis title"),y:P(e,"Click to enter Y axis title"),colorbar:P(e,"Click to enter Colorscale title"),annotation:P(e,"new text")},a._traceWord=P(e,"trace");var d,f=z(e,R);a._mapboxAccessToken=u.mapboxAccessToken,r._initialAutoSizeIsDone?(t=r.width,d=r.height,I.supplyLayoutGlobalDefaults(i,a,f),i.width||(a.width=t),i.height||(a.height=d),I.sanitizeMargins(a)):(I.supplyLayoutGlobalDefaults(i,a,f),h=!i.width||!i.height,d=a.autosize,u=u.autosizable,h&&(d||u)?I.plotAutoSize(e,i,a):h&&I.sanitizeMargins(a),!d&&h&&(i.width=a.width,i.height=a.height)),a._d3locale=(h=f,f=a.separators,h.decimal=f.charAt(0),h.thousands=f.charAt(1),{numberFormat:k.locale(h).numberFormat,timeFormat:A(h).utcFormat}),a._extraFormat=z(e,N),a._initialAutoSizeIsDone=!0,a._dataLength=l.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var p=a._subplots=function(){var e,t,n=C.collectableSubplotTypes,r={};if(!n){n=[];var a,i=C.subplotsRegistry;for(a in i){var o=i[a].attr;if(o&&(n.push(a),Array.isArray(o)))for(t=0;t<o.length;t++)D.pushUnique(n,o[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}(),f=a._splomAxes={x:{},y:{}},h=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=function(e,t){var n,r,a=t.length,i=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==r&&i.push(o),r=o}var s=i.length,l=new Array(a),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){return e&&"string"==typeof e&&!c[e]&&(u(e,t),1)}for(n=0;n<a;n++){var f=t[n].uid;d(f="number"==typeof f?String(f):f,n)||n<s&&d(i[n].uid,n)||u(D.randstr(c),n)}return l}(o,l),a._globalTransforms=(e._context||{}).globalTransforms,I.supplyDataDefaults(l,s,i,a);var m=Object.keys(f.x),g=Object.keys(f.y);if(1<m.length&&1<g.length){for(C.getComponentMethod("grid","sizeDefaults")(i,a),b=0;b<m.length;b++)D.pushUnique(p.xaxis,m[b]);for(b=0;b<g.length;b++)D.pushUnique(p.yaxis,g[b]);for(var y in h)D.pushUnique(p.cartesian,y)}if(a._has=I._hasPlotType.bind(a),o.length===s.length)for(b=0;b<s.length;b++)L(s[b],o[b]);I.supplyLayoutModuleDefaults(i,a,s,e._transitionData);for(var v=a._visibleModules,x=[],b=0;b<v.length;b++){var _=v[b].crossTraceDefaults;_&&D.pushUnique(x,_)}for(b=0;b<x.length;b++)x[b](s,a);a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&15<m.length&&15<g.length&&0===a.shapes.length&&0===a.images.length,I.linkSubplots(s,a,o,r),I.cleanPlot(s,a,o,r);h=!(!r._has||!r._has("gl2d")),i=!(!a._has||!a._has("gl2d")),h=!(!r._has||!r._has("cartesian"))||h,i=!(!a._has||!a._has("cartesian"))||i;h&&!i?r._bgLayer.remove():i&&!h&&(a._shouldCreateBgLayer=!0),r._zoomlayer&&!e._dragging&&S({_fullLayout:r}),function(e,t){var n,r=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var a=0;a<e.length;a++){var i=e[a];i.meta?r[i.index]=i._meta={meta:i.meta}:t.meta&&(i._meta={meta:t.meta}),t.meta&&(i._meta.layout={meta:t.meta})}r.length&&((n=n||(t._meta={})).data=r)}(s,a),L(a,r),C.getComponentMethod("colorscale","crossTraceDefaults")(s,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var w,T=a._tracePreGUI,M={};for(w in T)M[w]="old";for(b=0;b<s.length;b++)M[w=s[b]._fullInput.uid]||(T[w]={}),M[w]="new";for(w in M)"old"===M[w]&&delete T[w];F(a),C.getComponentMethod("rangeslider","makeData")(a),n||c.length!==s.length||I.supplyDefaultsUpdateCalc(c,s)}},I.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=(e[n]||[])[0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform)for(var o,s,l=i._arrayAttrs,c=0;c<l.length;c++)o=l[c],s=D.nestedProperty(i,o).get().slice(),D.nestedProperty(r,o).set(s);a.trace=r}}},I.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},I._hasPlotType=function(e){for(var t=this._basePlotModules||[],n=0;n<t.length;n++)if(t[n].name===e)return!0;var r=this._modules||[];for(n=0;n<r.length;n++){var a=r[n].name;if(a===e)return!0;a=C.modules[a];if(a&&a.categories[e])return!0}return!1},I.cleanPlot=function(e,t,n,r){for(var a=r._basePlotModules||[],i=0;i<a.length;i++){var o=a[i];o.clean&&o.clean(e,t,n,r)}var s=r._has&&r._has("gl"),l=t._has&&t._has("gl");s&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var c=!!r._infolayer;e:for(i=0;i<n.length;i++){for(var u=n[i].uid,d=0;d<e.length;d++)if(u===e[d].uid)continue e;c&&r._infolayer.select(".cb"+u).remove()}},I.linkSubplots=function(e,t,n,r){for(var a=r._plots||{},i=t._plots={},r=t._subplots,o={_fullData:e,_fullLayout:t},s=r.cartesian.concat(r.gl2d||[]),l=0;l<s.length;l++){var c,u=s[l],d=a[u],f=O.getFromId(o,u,"x"),p=O.getFromId(o,u,"y");for(d?c=i[u]=d:(c=i[u]={}).id=u,f._counterAxes.push(p._id),p._counterAxes.push(f._id),f._subplotsWith.push(u),p._subplotsWith.push(u),c.xaxis=f,c.yaxis=p,c._hasClipOnAxisFalse=!1,b=0;b<e.length;b++){var h=e[b];if(h.xaxis===c.xaxis._id&&h.yaxis===c.yaxis._id&&!1===h.cliponaxis){c._hasClipOnAxisFalse=!0;break}}}var m=O.list(o,null,!0);for(l=0;l<m.length;l++){var g,y=null;(g=m[l]).overlaying&&(y=O.getFromId(o,g.overlaying))&&y.overlaying&&(g.overlaying=!1,y=null),g._mainAxis=y||g,y&&(g.domain=y.domain.slice()),g._anchorAxis="free"===g.anchor?null:O.getFromId(o,g.anchor)}for(l=0;l<m.length;l++)if((g=m[l])._counterAxes.sort(O.idSort),g._subplotsWith.sort(D.subplotSort),g._mainSubplot=function(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),a=e._mainAxis._anchorAxis,i="",o="",s="";a&&(s=a._mainAxis._id,i=r?e._id+s:s+e._id);if(!i||!t._plots[i]){i="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=r?e._id+u:u+e._id;o=o||d;u=O.getFromId(n,u);if(s&&u.overlaying===s){i=d;break}}}return i||o}(g,t),g._counterAxes.length&&(g.spikemode&&-1!==g.spikemode.indexOf("across")||g.automargin&&g.mirror&&"free"!==g.anchor||C.getComponentMethod("rangeslider","isVisible")(g))){for(var v=1,x=0,b=0;b<g._counterAxes.length;b++)var _=O.getFromId(o,g._counterAxes[b]),v=Math.min(v,_.domain[0]),x=Math.max(x,_.domain[1]);v<x&&(g._counterDomainMin=v,g._counterDomainMax=x)}},I.clearExpandedTraceDefaultColors=function(e){var a,i,t;for(i=[],(a=e._module._colorAttrs)||(e._module._colorAttrs=a=[],y.crawl(e._module.attributes,function(e,t,n,r){i[r]=t,i.length=r+1,"color"===e.valType&&void 0===e.dflt&&a.push(i.join("."))})),t=0;t<a.length;t++)D.nestedProperty(e,"_input."+a[t]).get()||D.nestedProperty(e,a[t]).set(null)},I.supplyDataDefaults=function(e,n,t,r){var a,i=r._modules,o=r._visibleModules,s=r._basePlotModules,l=0,c=0;function u(e){n.push(e);var t=e._module;t&&(D.pushUnique(i,t),!0===e.visible&&D.pushUnique(o,t),D.pushUnique(s,e._module.basePlotModule),l++,!1!==e._input.visible&&c++)}r._transformModules=[];for(var d,f,p={},h=[],m=(t.template||{}).data||{},g=T.traceTemplater(m),y=0;y<e.length;y++){if(a=e[y],(f=g.newTrace(a)).uid=r._traceUids[y],I.supplyTraceDefaults(a,f,c,r,y),f.index=y,f._input=a,f._expandedIndex=l,f.transforms&&f.transforms.length)for(var v=!1!==a.visible&&!1===f.visible,x=function(e,t,n,r){for(var a=e.transforms,i=[e],o=0;o<a.length;o++){var s=a[o],l=M[s.type];l&&l.transform&&(i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return i}(f,n,t,r),b=0;b<x.length;b++){var _=x[b],w={_template:f._template,type:f.type,uid:f.uid+b};v&&!1===_.visible&&delete _.visible,I.supplyTraceDefaults(_,w,l,r,y),L(w,_),w.index=y,w._input=a,w._fullInput=f,w._expandedIndex=l,w._expandedInput=_,u(w)}else u((f._fullInput=f)._expandedInput=f);C.traceIs(f,"carpetAxis")&&(p[f.carpet]=f),C.traceIs(f,"carpetDependent")&&h.push(y)}for(y=0;y<h.length;y++)(f=n[h[y]]).visible&&(d=p[f.carpet],(f._carpet=d)&&d.visible?(f.xaxis=d.xaxis,f.yaxis=d.yaxis):f.visible=!1)},I.supplyAnimationDefaults=function(n){var e;n=n||{};var r={};function t(e,t){return D.coerce(n||{},r,a,e,t)}if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],e=0;e<n.frame.length;e++)r.frame[e]=I.supplyAnimationFrameDefaults(n.frame[e]||{});else r.frame=I.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],e=0;e<n.transition.length;e++)r.transition[e]=I.supplyAnimationTransitionDefaults(n.transition[e]||{});else r.transition=I.supplyAnimationTransitionDefaults(n.transition||{});return r},I.supplyAnimationFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,a.frame,e,t)}return e("duration"),e("redraw"),r},I.supplyAnimationTransitionDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,a.transition,e,t)}return e("duration"),e("easing"),r},I.supplyFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n,r,i,e,t)}return e("group"),e("name"),e("traces"),e("baseframe"),e("data"),e("layout"),r},I.supplyTraceDefaults=function(n,r,e,t,a){var i,o=t.colorway||m.defaults,s=o[e%o.length];function l(e,t){return D.coerce(n,r,I.attributes,e,t)}e=l("visible");l("type"),l("name",t._traceWord+" "+a),l("uirevision",t.uirevision);o=I.getModule(r);if(r._module=o){var a=o.basePlotModule,c=a.attr,u=a.attributes;if(c&&u){var d=t._subplots,f="";if(e||"gl2d"!==a.name){if(Array.isArray(c))for(i=0;i<c.length;i++){var p=c[i],h=D.coerce(n,r,u,p);d[p]&&D.pushUnique(d[p],h),f+=h}else f=D.coerce(n,r,u,c);d[a.name]&&D.pushUnique(d[a.name],f)}}}return e&&(l("customdata"),l("ids"),l("meta"),C.traceIs(r,"showLegend")?(D.coerce(n,r,(o.attributes.showlegend?o:I).attributes,"showlegend"),l("legendgroup"),l("legendgrouptitle.text")&&D.coerceFont(l,"legendgrouptitle.font",D.extendFlat({},t.font,{size:Math.round(1.1*t.font.size)})),l("legendrank"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,o&&o.supplyDefaults(n,r,s,t),C.traceIs(r,"noOpacity")||l("opacity"),C.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),C.traceIs(r,"noHover")||(r.hovertemplate||D.coerceHoverinfo(n,r,t),"parcats"!==r.type&&C.getComponentMethod("fx","supplyDefaults")(n,r,s,t)),o&&o.selectPoints&&l("selectedpoints"),I.supplyTransformDefaults(n,r,t)),r},I.hasMakesDataTransform=g,I.supplyTransformDefaults=function(e,t,n){if(t._length||g(e)){var r=n._globalTransforms||[],a=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var i=e.transforms||[],o=r.concat(i),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,f=M[d],p=!(u._module&&u._module===f),h=f&&"function"==typeof f.transform;f||D.warn("Unrecognized transform type "+d+"."),f&&f.supplyDefaults&&(p||h)?((c=f.supplyDefaults(u,t,n,e)).type=d,c._module=f,D.pushUnique(a,f)):c=D.extendFlat({},u),s.push(c)}}},I.supplyLayoutGlobalDefaults=function(n,r,e){function t(e,t){return D.coerce(n,r,I.layoutAttributes,e,t)}var a=n.template;D.isPlainObject(a)&&(r.template=a,r._template=a.layout,r._dataTemplate=a.data),t("autotypenumbers");a=D.coerceFont(t,"font");t("title.text",r._dfltTitle.plot),D.coerceFont(t,"title.font",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),t("title.xref"),t("title.yref"),t("title.x"),t("title.y"),t("title.xanchor"),t("title.yanchor"),t("title.pad.t"),t("title.pad.r"),t("title.pad.b"),t("title.pad.l"),t("uniformtext.mode")&&t("uniformtext.minsize"),t("autosize",!(n.width&&n.height)),t("width"),t("height"),t("margin.l"),t("margin.r"),t("margin.t"),t("margin.b"),t("margin.pad"),t("margin.autoexpand"),n.width&&n.height&&I.sanitizeMargins(r),C.getComponentMethod("grid","sizeDefaults")(n,r),t("paper_bgcolor"),t("separators",e.decimal+e.thousands),t("hidesources"),t("colorway"),t("datarevision");e=t("uirevision");t("editrevision",e),t("selectionrevision",e),C.getComponentMethod("modebar","supplyLayoutDefaults")(n,r),C.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(n,r,t),t("meta"),D.isPlainObject(n.transition)&&(t("transition.duration"),t("transition.easing"),t("transition.ordering")),C.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),C.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,t)},I.plotAutoSize=function(e,t,n){var r,a,i=e._context||{},o=i.frameMargins,s=D.isPlotDiv(e);s&&e.emit("plotly_autosize"),i.fillFrame?(r=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden"):(r=c((s=s?window.getComputedStyle(e):{}).width)||c(s.maxWidth)||n.width,a=c(s.height)||c(s.maxHeight)||n.height,E(o)&&0<o&&(l=1-2*o,r=Math.round(l*r),a=Math.round(l*a)));var o=I.layoutAttributes.width.min,l=I.layoutAttributes.height.min;r<o&&(r=o),a<l&&(a=l);l=!t.width&&1<Math.abs(n.width-r),t=!t.height&&1<Math.abs(n.height-a);(t||l)&&(l&&(n.width=r),t&&(n.height=a)),e._initialAutoSize||(e._initialAutoSize={width:r,height:a}),I.sanitizeMargins(n)},I.supplyLayoutModuleDefaults=function(e,t,n,r){var a,i,o,s=C.componentsRegistry,l=t._basePlotModules,c=C.subplotsRegistry.cartesian;for(a in s)(i=s[a]).includeBasePlot&&i.includeBasePlot(e,t);for(o in l.length||l.push(c),t._has("cartesian")&&(C.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[o].sort(D.subplotSort);for(d=0;d<l.length;d++)(i=l[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);for(var u=t._modules,d=0;d<u.length;d++)(i=u[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);var f=t._transformModules;for(d=0;d<f.length;d++)(i=f[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n,r);for(a in s)(i=s[a]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n)},I.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),D.clearThrottle(),D.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},I.style=function(e){for(var t=e._fullLayout._visibleModules,n=[],r=0;r<t.length;r++){var a=t[r];a.style&&D.pushUnique(n,a.style)}for(r=0;r<n.length;r++)n[r](e)},I.sanitizeMargins=function(e){var t,n,r,a,i;e&&e.margin&&(t=e.width,n=e.height,a=t-((r=e.margin).l+r.r),e=n-(r.t+r.b),a<0&&(i=(t-1)/(r.l+r.r),r.l=Math.floor(i*r.l),r.r=Math.floor(i*r.r)),e<0&&(i=(n-1)/(r.t+r.b),r.t=Math.floor(i*r.t),r.b=Math.floor(i*r.b)))},I.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},I.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};I.autoMargin=function(e,t,n){var r,a,i=e._fullLayout,o=i.width,s=i.height,l=i.margin,c=D.constrain(o-l.l-l.r,2,64),u=D.constrain(s-l.t-l.b,2,64),d=Math.max(0,o-c),o=Math.max(0,s-u),c=i._pushmargin,s=i._pushmarginIds;if(!1!==l.autoexpand&&(n?(void 0===(u=n.pad)&&(u=Math.min(12,l.l,l.r,l.t,l.b)),!d||1<(r=(n.l+n.r)/d)&&(n.l/=r,n.r/=r),!o||1<(a=(n.t+n.b)/o)&&(n.t/=a,n.b/=a),d=void 0!==n.xl?n.xl:n.x,r=void 0!==n.xr?n.xr:n.x,o=void 0!==n.yt?n.yt:n.y,a=void 0!==n.yb?n.yb:n.y,c[t]={l:{val:d,size:n.l+u},r:{val:r,size:n.r+u},b:{val:a,size:n.b+u},t:{val:o,size:n.t+u}},s[t]=1):(delete c[t],delete s[t]),!i._replotting))return I.doAutoMargin(e)},I.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height;t._size||(t._size={}),F(t);var a=t._size,i=t.margin,o=D.extendFlat({},a),s=i.l,l=i.r,c=i.t,u=i.b,d=t._pushmargin,f=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var p in d)f[p]||delete d[p];for(var h in d.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}},d){var m,g,y,v,x,b=d[h].l||{},h=d[h].b||{},_=b.val,w=b.size,T=h.val,M=h.size;for(m in d)E(w)&&d[m].r&&(x=d[m].r.val,g=d[m].r.size,_<x&&(s+l<(y=(w*x+(g-n)*_)/(x-_))+(v=(g*(1-_)+(w-n)*(1-x))/(x-_))&&(s=y,l=v))),E(M)&&d[m].t&&(x=d[m].t.val,y=d[m].t.size,T<x&&(u+c<(v=(M*x+(y-r)*T)/(x-T))+(x=(y*(1-T)+(M-r)*(1-x))/(x-T))&&(u=v,c=x)))}}var k,A=D.constrain(n-i.l-i.r,2,64),S=D.constrain(r-i.t-i.b,2,64),A=Math.max(0,n-A),S=Math.max(0,r-S);if(!A||1<(A=(s+l)/A)&&(s/=A,l/=A),!S||1<(S=(u+c)/S)&&(u/=S,c/=S),a.l=Math.round(s),a.r=Math.round(l),a.t=Math.round(c),a.b=Math.round(u),a.p=Math.round(i.pad),a.w=Math.round(n)-a.l-a.r,a.h=Math.round(r)-a.t-a.b,!t._replotting&&I.didMarginChange(o,a)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;a=3*(1+Object.keys(f).length);if(t._redrawFromAutoMarginCount<a)return C.call("_doPlot",e);t._size=o,D.warn("Too many auto-margin redraws.")}k=O.list(e,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<k.length;t++){var n=k[t][e];n&&n()}})};var s=["l","r","t","b","p","w","h"];function r(a,i,o){var s=!1;var e=[I.previousPromises,function(){if(a._transitionData)return a._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(a._transitionData._interruptCallbacks)},o.prepareFn,I.rehover,function(){return a.emit("plotly_transitioning",[]),new Promise(function(e){a._transitioning=!0,0<i.duration&&(a._transitioningWithDuration=!0),a._transitionData._interruptCallbacks.push(function(){s=!0}),o.redraw&&a._transitionData._interruptCallbacks.push(function(){return C.call("redraw",a)}),a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var t=0,n=0;function r(){return t++,function(){n++,s||n!==t||function(e){if(a._transitionData)(function(e){if(e)for(;e.length;)e.shift()})(a._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(o.redraw)return C.call("redraw",a)}).then(function(){a._transitioning=!1,a._transitioningWithDuration=!1,a.emit("plotly_transitioned",[])}).then(e)}(e)}}o.runFn(r),setTimeout(r())})}],e=D.syncOrAsync(e,a);return(e=!e||!e.then?Promise.resolve():e).then(function(){return a})}I.didMarginChange=function(e,t){for(var n=0;n<s.length;n++){var r=s[n],a=e[r],r=t[r];if(!E(a)||1<Math.abs(r-a))return!0}return!1},I.graphJson=function(e,t,i,n,r,a){(r&&t&&!e._fullData||r&&!t&&!e._fullLayout)&&I.supplyDefaults(e);var o=r?e._fullData:e.data,s=r?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(t,n){if("function"==typeof t)return n?"_function_":null;if(D.isPlainObject(t)){var r,a={};return Object.keys(t).sort().forEach(function(e){if(-1===["_","["].indexOf(e.charAt(0)))if("function"!=typeof t[e]){if("keepdata"===i){if("src"===e.substr(e.length-3))return}else if("keepstream"===i){if("string"==typeof(r=t[e+"src"])&&0<r.indexOf(":")&&!D.isPlainObject(t.stream))return}else if("keepall"!==i&&"string"==typeof(r=t[e+"src"])&&0<r.indexOf(":"))return;a[e]=c(t[e],n)}else n&&(a[e]="_function")}),a}return Array.isArray(t)?t.map(function(e){return c(e,n)}):D.isTypedArray(t)?D.simpleMap(t,D.identity):D.isJSDate(t)?D.ms2DateTimeLocal(+t):t}o={data:(o||[]).map(function(e){e=c(e);return t&&delete e.fit,e})};return t||(o.layout=c(s),r&&(s=s._size,o.layout.computed={margin:{b:s.b,l:s.l,r:s.r,t:s.t}})),l&&(o.frames=c(l)),a&&(o.config=c(e._context,!0)),"object"===n?o:JSON.stringify(o)},I.modifyFrames=function(e,t){for(var n,r=e._transitionData._frames,a=e._transitionData._frameHash,i=0;i<t.length;i++)switch((n=t[i]).type){case"replace":var o=n.value,s=(r[n.index]||{}).name,l=o.name;r[n.index]=a[l]=o,l!==s&&(delete a[s],a[l]=o);break;case"insert":a[(o=n.value).name]=o,r.splice(n.index,0,o);break;case"delete":delete a[(o=r[n.index]).name],r.splice(n.index,1)}return Promise.resolve()},I.computeFrame=function(e,t){var n,r,a,i,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=I.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(a=r[n])&&(-1===(i=u.traces.indexOf(a))&&(i=u.data.length,u.traces[i]=a),u.data[i]=I.extendTrace(u.data[i],s.data[n]))}return u},I.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var a=n[r];a&&a.name&&(t[a.name]=a)}},I.extendObjectWithContainers=function(e,t,n){var r,a,i,o,s,l,c,t=D.extendDeepNoArrays({},t||{}),u=D.expandObjectPaths(t),d={};if(n&&n.length)for(i=0;i<n.length;i++)void 0===(a=(r=D.nestedProperty(u,n[i])).get())?D.nestedProperty(d,n[i]).set(null):(r.set(null),D.nestedProperty(d,n[i]).set(a));if(e=D.extendDeepNoArrays(e||{},u),n&&n.length)for(i=0;i<n.length;i++)if(l=D.nestedProperty(d,n[i]).get()){for(c=(s=D.nestedProperty(e,n[i])).get(),Array.isArray(c)||s.set(c=[]),o=0;o<l.length;o++){var f=l[o];c[o]=null===f?null:I.extendObjectWithContainers(c[o],f)}s.set(c)}return e},I.dataArrayContainers=["transforms","dimensions"],I.layoutArrayContainers=C.layoutArrayContainers,I.extendTrace=function(e,t){return I.extendObjectWithContainers(e,t,I.dataArrayContainers)},I.extendLayout=function(e,t){return I.extendObjectWithContainers(e,t,I.layoutArrayContainers)},I.transition=function(b,_,w,T,e,s){var e={redraw:e.redraw},M={},k=[];return e.prepareFn=function(){for(var e=Array.isArray(_)?_.length:0,t=T.slice(0,e),n=0;n<t.length;n++){var r=t[n],a=b._fullData[r]._module;a&&(a.animatable&&(a=a.basePlotModule.name,M[a]||(M[a]=[]),M[a].push(r)),b.data[t[n]]=I.extendTrace(b.data[t[n]],_[n]))}var i,o=D.expandObjectPaths(D.extendDeepNoArrays({},w)),s=/^[xy]axis[0-9]*$/;for(i in o)s.test(i)&&delete o[i].range;I.extendLayout(b.layout,o),delete b.calcdata,I.supplyDefaults(b),I.doCalcdata(b);var l=D.expandObjectPaths(w);if(l){var c,u=b._fullLayout._plots;for(c in u){var d=u[c],f=d.xaxis,p=d.yaxis,h=f.range.slice(),m=p.range.slice(),g=null,y=null,v=null,x=null;Array.isArray(l[f._name+".range"])?g=l[f._name+".range"].slice():Array.isArray((l[f._name]||{}).range)&&(g=l[f._name].range.slice()),Array.isArray(l[p._name+".range"])?y=l[p._name+".range"].slice():Array.isArray((l[p._name]||{}).range)&&(y=l[p._name].range.slice()),h&&g&&(f.r2l(h[0])!==f.r2l(g[0])||f.r2l(h[1])!==f.r2l(g[1]))&&(v={xr0:h,xr1:g}),m&&y&&(p.r2l(m[0])!==p.r2l(y[0])||p.r2l(m[1])!==p.r2l(y[1]))&&(x={yr0:m,yr1:y}),(v||x)&&k.push(D.extendFlat({plotinfo:d},v,x))}}return Promise.resolve()},e.runFn=function(e){var t,n,r,a=b._fullLayout._basePlotModules,i=k.length;if(w)for(n=0;n<a.length;n++)a[n].transitionAxes&&a[n].transitionAxes(b,k,s,e);for(r in i?((t=D.extendFlat({},s)).duration=0,delete M.cartesian):t=s,M){var o=M[r];b._fullData[o[0]]._module.basePlotModule.plot(b,o,t,e)}},r(b,s,e)},I.transitionFromReact=function(u,d,f,p){var h=u._fullLayout,m=h.transition,g={},y=[];return g.prepareFn=function(){var e,t=h._plots;for(e in g.redraw=!1,"some"===d.anim&&(g.redraw=!0),"some"===f.anim&&(g.redraw=!0),t){var n=t[e],r=n.xaxis,a=n.yaxis,i=p[r._name].range.slice(),o=p[a._name].range.slice(),s=r.range.slice(),l=a.range.slice();r.setScale(),a.setScale();var c=null,u=null;r.r2l(i[0])===r.r2l(s[0])&&r.r2l(i[1])===r.r2l(s[1])||(c={xr0:i,xr1:s}),a.r2l(o[0])===a.r2l(l[0])&&a.r2l(o[1])===a.r2l(l[1])||(u={yr0:o,yr1:l}),(c||u)&&y.push(D.extendFlat({plotinfo:n},c,u))}return Promise.resolve()},g.runFn=function(t){for(var n,r,a,e=u._fullData,i=u._fullLayout._basePlotModules,o=[],s=0;s<e.length;s++)o.push(s);function l(){if(u._fullLayout)for(var e=0;e<i.length;e++)i[e].transitionAxes&&i[e].transitionAxes(u,y,n,t)}function c(){if(u._fullLayout)for(var e=0;e<i.length;e++)i[e].plot(u,a,r,t)}y.length&&d.anim?"traces first"===m.ordering?(n=D.extendFlat({},m,{duration:0}),a=o,r=m,setTimeout(l,m.duration),c()):(n=m,a=null,r=D.extendFlat({},m,{duration:0}),setTimeout(c,n.duration),l()):y.length?(n=m,l()):d.anim&&(a=o,r=m,c())},r(u,m,g)},I.doCalcdata=function(r,e){var a,i,o,t=O.list(r),s=r._fullData,n=r._fullLayout,l=new Array(s.length),c=(r.calcdata||[]).slice();for(r.calcdata=l,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},f=0;f<s.length;f++)Array.isArray(e)&&-1===e.indexOf(f)&&(l[f]=c[f]);for(f=0;f<s.length;f++)(a=s[f])._arrayAttrs=y.findArrayAttributes(a),a._extremes={};for(var u,d=n._subplots.polar||[],f=0;f<d.length;f++)t.push(n[d[f]].radialaxis,n[d[f]].angularaxis);for(u in n._colorAxes){var p=n[u];!1!==p.cauto&&(delete p.cmin,delete p.cmax)}var h=!1;function m(e,t){if(a=s[e],!!(i=a._module).isContainer===t){t=[];if(!0===a.visible&&0!==a._length){delete a._indexToPoints;var n=a.transforms||[];for(o=n.length-1;0<=o;o--)if(n[o].enabled){a._indexToPoints=n[o]._indexToPoints;break}i&&i.calc&&(t=i.calc(r,a))}(t=!Array.isArray(t)||!t[0]?[{x:v,y:v}]:t)[0].t||(t[0].t={}),t[0].trace=a,l[e]=t}}for(x(t,s,n),f=0;f<s.length;f++)m(f,!0);for(f=0;f<s.length;f++)!function(e){if(a=s[e],i=a._module,!0===a.visible&&a.transforms)for(i&&i.calc&&((e=i.calc(r,a))[0]&&e[0].t&&e[0].t._scene&&delete e[0].t._scene.dirty),o=0;o<a.transforms.length;o++){var t=a.transforms[o];(i=M[t.type])&&i.calcTransform&&(a._hasCalcTransform=!0,h=!0,i.calcTransform(r,a,t))}}(f);for(h&&x(t,s,n),f=0;f<s.length;f++)m(f,!0);for(f=0;f<s.length;f++)m(f,!1);b(r);var g=function(e,o){var t,n,r,a,i,s=[];var l,c,u={min:function(e){return D.aggNums(Math.min,null,e)},max:function(e){return D.aggNums(Math.max,null,e)},sum:function(e){return D.aggNums(function(e,t){return e+t},null,e)},total:function(e){return D.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return D.mean(e)},median:function(e){return D.median(e)}};for(t=0;t<e.length;t++){var d=e[t];if("category"===d.type){var f=d.categoryorder.match(j);if(f){var p=f[1],f=f[2],h=d._id.charAt(0),m="x"===h,g=[];for(n=0;n<d._categories.length;n++)g.push([d._categories[n],[]]);for(n=0;n<d._traceIndices.length;n++){var y=d._traceIndices[n],v=o._fullData[y];if(!0===v.visible){var x=v.type;C.traceIs(v,"histogram")&&(delete v._xautoBinFinished,delete v._yautoBinFinished);var b="splom"===x,_="scattergl"===x,w=o.calcdata[y];for(r=0;r<w.length;r++){var T=w[r];if(b){var M,k=v._axesDim[d._id];m||(M=v._diag[k][0])&&(d=o._fullLayout[O.id2name(M)]);var A,S=T.trace.dimensions[k].values;for(a=0;a<S.length;a++)for(l=d._categoriesMap[S[a]],i=0;i<T.trace.dimensions.length;i++)i!==k&&(A=T.trace.dimensions[i],g[l][1].push(A.values[a]))}else if(_){for(a=0;a<T.t.x.length;a++)c=m?(l=T.t.x[a],T.t.y[a]):(l=T.t.y[a],T.t.x[a]),g[l][1].push(c);T.t&&T.t._scene&&delete T.t._scene.dirty}else if(T.hasOwnProperty("z")){c=T.z;var E=function(e,t,n){var r=t._id.charAt(0);if("histogram2dcontour"!==e)return function(e,t){return"y"===r?t:e};var e=t._counterAxes[0],t=O.getFromId(o,e),a="x"===r||"x"===e&&"category"===t.type,i="y"===r||"y"===e&&"category"===t.type;return function(e,t){return 0===e||0===t||a&&e===n[t].length-1||i&&t===n.length-1?-1:("y"===r?t:e)-1}}(v.type,d,c);for(a=0;a<c.length;a++)for(i=0;i<c[a].length;i++)(l=E(i,a))+1&&g[l][1].push(c[a][i])}else for(void 0===(l=T.p)&&(l=T[h]),void 0===(c=void 0===(c=T.s)?T.v:c)&&(c=m?T.y:T.x),Array.isArray(c)||(c=void 0===c?[]:[c]),a=0;a<c.length;a++)g[l][1].push(c[a])}}}d._categoriesValue=g;var L=[];for(n=0;n<g.length;n++)L.push([g[n][0],u[p](g[n][1])]);L.sort(function(e,t){return e[1]-t[1]}),d._categoriesAggregatedValue=L,d._initialCategories=L.map(function(e){return e[0]}),"descending"===f&&d._initialCategories.reverse(),s=s.concat(d.sortByInitialCategories())}}}return s}(t,r);if(g.length){for(n._numBoxes=0,f=n._numViolins=0;f<g.length;f++)m(g[f],!0);for(f=0;f<g.length;f++)m(g[f],!1);b(r)}C.getComponentMethod("fx","calc")(r),C.getComponentMethod("errorbars","calc")(r)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function x(e,t,n){var r={};function a(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}D.simpleMap(e,a);for(var i=n._axisMatchGroups||[],o=0;o<i.length;o++)for(var s in i[o])r[s]||a(n[O.id2name(s)])}function b(e){var t,n,r=e._fullLayout,a=r._visibleModules,i={};for(f=0;f<a.length;f++){var o=a[f],s=o.crossTraceCalc;s&&(i[o=o.basePlotModule.name]?D.pushUnique(i[o],s):i[o]=[s])}for(n in i){var l=i[n],c=r._subplots[n];if(Array.isArray(c))for(t=0;t<c.length;t++)for(var u=c[t],d=("cartesian"===n?r._plots:r)[u],f=0;f<l.length;f++)l[f](e,d,u);else for(f=0;f<l.length;f++)l[f](e)}}I.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},I.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},I.generalUpdatePerTraceModule=function(e,t,n,r){for(var a,i,o,s=t.traceHash,l={},c=0;c<n.length;c++){var u=n[c],d=u[0].trace;d.visible&&(l[d.type]=l[d.type]||[],l[d.type].push(u))}for(a in s)l[a]||((i=s[a][0])[0].trace.visible=!1,l[a]=[i]);for(o in l){var f=l[o];f[0][0].trace._module.plot(e,t,D.filterVisible(f),r)}t.traceHash=l},I.plotBasePlot=function(e,t,n,r,a){var i=C.getModule(e),e=o(t.calcdata,i)[0];i.plot(t,e,r,a)},I.cleanBasePlot=function(e,t,n,r,a){var i=a._has&&a._has(e),n=n._has&&n._has(e);i&&!n&&a["_"+e+"layer"].selectAll("g.trace").remove()}},{"../components/color":155,"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plot_api/plot_template":320,"../plots/get_data":362,"../registry":373,"./animation_attributes":325,"./attributes":327,"./cartesian/axis_ids":335,"./cartesian/handle_outline":342,"./command":358,"./font_attributes":360,"./frame_attributes":361,"./layout_attributes":364,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],367:[function(e,t,n){"use strict";var y=e("../lib"),v=e("../plot_api/plot_template"),x=e("./domain").defaults;t.exports=function(e,t,n,r){var a=r.type,i=r.attributes,o=r.handleDefaults,s=r.partition||"x",l=t._subplots[a],c=l.length,u=c&&l[0].replace(/\d+$/,"");function d(e,t){return y.coerce(h,m,i,e,t)}for(var f=0;f<c;f++){var p=l[f],h=e[p]||(e[p]={}),m=v.newContainer(t,p,u);d("uirevision",t.uirevision);var g={};g[s]=[f/c,(f+1)/c],x(m,t,d,g),r.id=p,o(h,m,d,r)}}},{"../lib":285,"../plot_api/plot_template":320,"./domain":359}],368:[function(e,t,n){"use strict";e=e("../constants/docs"),e.FORMAT_LINK,e.DATE_FORMAT_LINK;function r(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(0<n.length){for(var r=[],a=0;a<n.length;a++)r[a]="`"+n[a]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}n.hovertemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(t.arrayOk=!0),t},n.texttemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(t.arrayOk=!0),t}},{"../constants/docs":262}],369:[function(e,t,n){"use strict";var l=e("./ternary"),c=e("../../plots/get_data").getSubplotCalcData,r=e("../../lib").counterRegex,u="ternary";n.name=u;n.attr="subplot";n.idRoot=u,n.idRegex=n.attrRegex=r(u),(n.attributes={}).subplot={valType:"subplotid",dflt:"ternary",editType:"calc"},n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.plot=function(e){for(var t=e._fullLayout,n=e.calcdata,r=t._subplots[u],a=0;a<r.length;a++){var i=r[a],o=c(n,u,i),s=t[i]._subplot;s||(s=new l({id:i,graphDiv:e,container:t._ternarylayer.node()},t),t[i]._subplot=s),s.plot(o,t,e._promises)}},n.clean=function(e,t,n,r){for(var a=r._subplots[u]||[],i=0;i<a.length;i++){var o=a[i],s=r[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":285,"../../plots/get_data":362,"./layout_attributes":370,"./layout_defaults":371,"./ternary":372}],370:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),a=e("../domain").attributes,i=e("../cartesian/layout_attributes"),o=e("../../plot_api/edit_types").overrideAll,e=e("../../lib/extend").extendFlat,i={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.tickmode,nticks:e({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:e({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:e({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},i=t.exports=o({domain:a({name:"ternary"}),bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:i,baxis:i,caxis:i},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plot_api/edit_types":313,"../cartesian/layout_attributes":346,"../domain":359}],371:[function(e,t,n){"use strict";var d=e("../../components/color"),f=e("../../plot_api/plot_template"),p=e("../../lib"),r=e("../subplot_defaults"),h=e("../cartesian/tick_label_defaults"),m=e("../cartesian/tick_mark_defaults"),g=e("../cartesian/tick_value_defaults"),y=e("../cartesian/line_grid_defaults"),v=e("./layout_attributes"),x=["aaxis","baxis","caxis"];function a(e,t,n,r){var a,i,o,s=n("bgcolor"),l=n("sum");r.bgColor=d.combine(s,r.paper_bgcolor);for(var c=0;c<x.length;c++)i=e[a=x[c]]||{},(o=f.newContainer(t,a))._name=a,function(n,r,e,t){var a=v[r._name];function i(e,t){return p.coerce(n,r,a,e,t)}i("uirevision",t.uirevision),r.type="linear";var o=i("color"),s=o!==a.color.dflt?o:e.font.color,l=r._name.charAt(0).toUpperCase(),c="Component "+l,t=i("title.text",c);r._hovertitle=t===c?t:l,p.coerceFont(i,"title.font",{family:e.font.family,size:p.bigFont(e.font.size),color:s}),i("min"),g(n,r,i,"linear"),h(n,r,i,"linear",{}),m(n,r,i,{outerTicks:!0}),i("showticklabels")&&(p.coerceFont(i,"tickfont",{family:e.font.family,size:e.font.size,color:s}),i("tickangle"),i("tickformat"));y(n,r,i,{dfltColor:o,bgColor:e.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a}),i("hoverformat"),i("layer")}(i,o,r,t);var u=t.aaxis,n=t.baxis,s=t.caxis;u.min+n.min+s.min>=l&&(u.min=0,n.min=0,s.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}t.exports=function(e,t,n){r(e,t,n,{type:"ternary",attributes:v,handleDefaults:a,font:t.font,paper_bgcolor:t.paper_bgcolor})}},{"../../components/color":155,"../../lib":285,"../../plot_api/plot_template":320,"../cartesian/line_grid_defaults":348,"../cartesian/tick_label_defaults":353,"../cartesian/tick_mark_defaults":354,"../cartesian/tick_value_defaults":355,"../subplot_defaults":367,"./layout_attributes":370}],372:[function(e,t,n){"use strict";var a=e("@plotly/d3"),L=e("tinycolor2"),r=e("../../registry"),C=e("../../lib"),D=C.strTranslate,O=C._,P=e("../../components/color"),I=e("../../components/drawing"),m=e("../cartesian/set_convert"),g=e("../../lib/extend").extendFlat,i=e("../plots"),f=e("../cartesian/axes"),R=e("../../components/dragelement"),N=e("../../components/fx"),o=e("../../components/dragelement/helpers"),z=o.freeMode,F=o.rectMode,c=e("../../components/titles"),j=e("../cartesian/select").prepSelect,H=e("../cartesian/select").selectOnClick,s=e("../cartesian/select").clearSelect,l=e("../cartesian/select").clearSelectionsCache,B=e("../cartesian/constants");function u(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}e=(t.exports=u).prototype;e.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}},e.plot=function(e,t){var n=t[this.id],t=t._size;this._hasClipOnAxisFalse=!1;for(var r=0;r<e.length;r++)if(!1===e[r][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(n),this.adjustLayout(n,t),i.generalUpdatePerTraceModule(this.graphDiv,this,e,n),this.layers.plotbg.select("path").call(P.fill,n.bgcolor)},e.makeFramework=function(e){var t=this,n=t.graphDiv,r=e[t.id],a=t.clipId="clip"+t.layoutId+t.id,i=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=C.ensureSingleById(e._clips,"clipPath",a,function(e){e.append("path").attr("d","M0,0Z")}),t.clipDefRelative=C.ensureSingleById(e._clips,"clipPath",i,function(e){e.append("path").attr("d","M0,0Z")}),t.plotContainer=C.ensureSingle(t.container,"g",t.id),t.updateLayers(r),I.setClipUrl(t.layers.backplot,a,n),I.setClipUrl(t.layers.grids,a,n)},e.updateLayers=function(e){var n=this.layers,t=["draglayer","plotbg","backplot","grids"];"below traces"===e.aaxis.layer&&t.push("aaxis","aline"),"below traces"===e.baxis.layer&&t.push("baxis","bline"),"below traces"===e.caxis.layer&&t.push("caxis","cline"),t.push("frontplot"),"above traces"===e.aaxis.layer&&t.push("aaxis","aline"),"above traces"===e.baxis.layer&&t.push("baxis","bline"),"above traces"===e.caxis.layer&&t.push("caxis","cline");var t=this.plotContainer.selectAll("g.toplevel").data(t,String),r=["agrid","bgrid","cgrid"];t.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=a.select(this);n[e]=t,"frontplot"===e?t.append("g").classed("scatterlayer",!0):"backplot"===e?t.append("g").classed("maplayer",!0):"plotbg"===e?t.append("path").attr("d","M0,0Z"):"aline"===e||"bline"===e||"cline"===e?t.append("path"):"grids"===e&&r.forEach(function(e){n[e]=t.append("g").classed("grid "+e,!0)})}),t.order()};var q=Math.sqrt(4/3);e.adjustLayout=function(e,t){var n,r,a=this,i=e.domain,o=(i.x[0]+i.x[1])/2,s=(i.y[0]+i.y[1])/2,l=i.x[1]-i.x[0],c=i.y[1]-i.y[0],u=l*t.w,d=c*t.h,f=e.sum,p=e.aaxis.min,h=e.baxis.min,i=e.caxis.min;q*d<u?n=(r=d)*q:r=(n=u)/q,u=l*n/u,c=c*r/d,d=t.l+t.w*o-n/2,t=t.t+t.h*(1-s)-r/2,a.x0=d,a.y0=t,a.w=n,a.h=r,a.sum=f,a.xaxis={type:"linear",range:[p+2*i-f,f-p-2*h],domain:[o-u/2,o+u/2],_id:"x"},m(a.xaxis,a.graphDiv._fullLayout),a.xaxis.setScale(),a.xaxis.isPtWithinRange=function(e){return e.a>=a.aaxis.range[0]&&e.a<=a.aaxis.range[1]&&e.b>=a.baxis.range[1]&&e.b<=a.baxis.range[0]&&e.c>=a.caxis.range[1]&&e.c<=a.caxis.range[0]},a.yaxis={type:"linear",range:[p,f-h-i],domain:[s-c/2,s+c/2],_id:"y"},m(a.yaxis,a.graphDiv._fullLayout),a.yaxis.setScale(),a.yaxis.isPtWithinRange=function(){return!0};o=a.yaxis.domain[0],u=a.aaxis=g({},e.aaxis,{range:[p,f-h-i],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[o,o+c*q],anchor:"free",position:0,_id:"y",_length:n});m(u,a.graphDiv._fullLayout),u.setScale();s=a.baxis=g({},e.baxis,{range:[f-p-i,h],side:"bottom",domain:a.xaxis.domain,anchor:"free",position:0,_id:"x",_length:n});m(s,a.graphDiv._fullLayout),s.setScale();o=a.caxis=g({},e.caxis,{range:[f-p-h,i],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[o,o+c*q],anchor:"free",position:0,_id:"y",_length:n});m(o,a.graphDiv._fullLayout),o.setScale();c="M"+d+","+(t+r)+"h"+n+"l-"+n/2+",-"+r+"Z";a.clipDef.select("path").attr("d",c),a.layers.plotbg.select("path").attr("d",c);c="M0,"+r+"h"+n+"l-"+n/2+",-"+r+"Z";a.clipDefRelative.select("path").attr("d",c);c=D(d,t);a.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",c),a.clipDefRelative.select("path").attr("transform",null);c=D(d-s._offset,t+r);a.layers.baxis.attr("transform",c),a.layers.bgrid.attr("transform",c);c=D(d+n/2,t)+"rotate(30)"+D(0,-u._offset);a.layers.aaxis.attr("transform",c),a.layers.agrid.attr("transform",c);c=D(d+n/2,t)+"rotate(-30)"+D(0,-o._offset);a.layers.caxis.attr("transform",c),a.layers.cgrid.attr("transform",c),a.drawAxes(!0),a.layers.aline.select("path").attr("d",u.showline?"M"+d+","+(t+r)+"l"+n/2+",-"+r:"M0,0").call(P.stroke,u.linecolor||"#000").style("stroke-width",(u.linewidth||0)+"px"),a.layers.bline.select("path").attr("d",s.showline?"M"+d+","+(t+r)+"h"+n:"M0,0").call(P.stroke,s.linecolor||"#000").style("stroke-width",(s.linewidth||0)+"px"),a.layers.cline.select("path").attr("d",o.showline?"M"+(d+n/2)+","+t+"l"+n/2+","+r:"M0,0").call(P.stroke,o.linecolor||"#000").style("stroke-width",(o.linewidth||0)+"px"),a.graphDiv._context.staticPlot||a.initInteractions(),I.setClipUrl(a.layers.frontplot,a._hasClipOnAxisFalse?null:a.clipId,a.graphDiv)},e.drawAxes=function(e){var t,n=this,r=n.graphDiv,a=n.id.substr(7)+"title",i=n.layers,o=n.aaxis,s=n.baxis,l=n.caxis;n.drawAx(o),n.drawAx(s),n.drawAx(l),e&&(t=Math.max(o.showticklabels?o.tickfont.size/2:0,(l.showticklabels?.75*l.tickfont.size:0)+("outside"===l.ticks?.87*l.ticklen:0)),e=(s.showticklabels?s.tickfont.size:0)+("outside"===s.ticks?s.ticklen:0)+3,i["a-title"]=c.draw(r,"a"+a,{propContainer:o,propName:n.id+".aaxis.title",placeholder:O(r,"Click to enter Component A title"),attributes:{x:n.x0+n.w/2,y:n.y0-o.title.font.size/3-t,"text-anchor":"middle"}}),i["b-title"]=c.draw(r,"b"+a,{propContainer:s,propName:n.id+".baxis.title",placeholder:O(r,"Click to enter Component B title"),attributes:{x:n.x0-e,y:n.y0+n.h+.83*s.title.font.size+e,"text-anchor":"middle"}}),i["c-title"]=c.draw(r,"c"+a,{propContainer:l,propName:n.id+".caxis.title",placeholder:O(r,"Click to enter Component C title"),attributes:{x:n.x0+n.w+e,y:n.y0+n.h+.83*l.title.font.size+e,"text-anchor":"middle"}}))},e.drawAx=function(e){var t=this.graphDiv,n=e._name,r=n.charAt(0),a=e._id,i=this.layers[n],o=r+"tickLayout",s=(d=e).ticks+String(d.ticklen)+String(d.showticklabels);this[o]!==s&&(i.selectAll("."+a+"tick").remove(),this[o]=s),e.setScale();var l=f.calcTicks(e),c=f.clipEnds(e,l),u=f.makeTransTickFn(e),n=f.getTickSigns(e)[2],d=C.deg2rad(30),a=n*(e.linewidth||1)/2,o=n*e.ticklen,s=this.w,n=this.h,o="b"===r?"M0,"+a+"l"+Math.sin(d)*o+","+Math.cos(d)*o:"M"+a+",0l"+Math.cos(d)*o+","+-Math.sin(d)*o,s={a:"M0,0l"+n+",-"+s/2,b:"M0,0l-"+s/2+",-"+n,c:"M0,0l-"+n+","+s/2}[r];f.drawTicks(t,e,{vals:"inside"===e.ticks?c:l,layer:i,path:o,transFn:u,crisp:!1}),f.drawGrid(t,e,{vals:c,layer:this.layers[r+"grid"],path:s,transFn:u,crisp:!1}),f.drawLabels(t,e,{vals:l,layer:i,transFn:u,labelFns:f.makeLabelFns(e,0,30)})};var t=B.MINZOOM/2+.87,U="m-0.87,.5h"+t+"v3h-"+(5.2+t)+"l"+(t/2+2.6)+",-"+(.87*t+4.5)+"l2.6,1.5l-"+t/2+","+.87*t+"Z",Y="m0.87,.5h-"+t+"v3h"+(5.2+t)+"l-"+(t/2+2.6)+",-"+(.87*t+4.5)+"l-2.6,1.5l"+t/2+","+.87*t+"Z",V="m0,1l"+t/2+","+.87*t+"l2.6,-1.5l-"+(t/2+2.6)+",-"+(.87*t+4.5)+"l-"+(t/2+2.6)+","+(.87*t+4.5)+"l2.6,1.5l"+t/2+",-"+.87*t+"Z",G=!0;function W(e){a.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}e.clearSelect=function(){l(this.dragOptions),s(this.dragOptions.gd)},e.initInteractions=function(){var c,u,d,f,p,h,m,g,y,v,x,b,_=this,a=_.layers.plotbg.select("path").node(),w=_.graphDiv,i=w._fullLayout._zoomlayer;function T(e){var t={};return t[_.id+".aaxis.min"]=e.a,t[_.id+".baxis.min"]=e.b,t[_.id+".caxis.min"]=e.c,t}function o(e,t){var n=w._fullLayout.clickmode;W(w),2===e&&(w.emit("plotly_doubleclick",null),r.call("_guiRelayout",w,T({a:0,b:0,c:0}))),-1<n.indexOf("select")&&1===e&&H(t,w,[_.xaxis],[_.yaxis],_.id,_.dragOptions),-1<n.indexOf("event")&&N.click(w,t,_.id)}function M(e,t){return 1-t/_.h}function k(e,t){return 1-(e+(_.h-t)/Math.sqrt(3))/_.w}function A(e,t){return(e-(_.h-t)/Math.sqrt(3))/_.w}function s(e,t){var n=d+e*c,r=f+t*u,a=Math.max(0,Math.min(1,M(0,f),M(0,r))),i=Math.max(0,Math.min(1,k(d,f),k(n,r))),o=Math.max(0,Math.min(1,A(d,f),A(n,r))),s=(a/2+o)*_.w,l=(1-a/2-i)*_.w,e=(s+l)/2,t=l-s,n=(1-a)*_.h,r=n-t/q;t<B.MINZOOM?(m=p,x.attr("d",y),b.attr("d","M0,0Z")):(m={a:p.a+a*h,b:p.b+i*h,c:p.c+o*h},x.attr("d",y+"M"+s+","+n+"H"+l+"L"+e+","+r+"L"+s+","+n+"Z"),b.attr("d","M"+d+","+f+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+s+","+n+U+"M"+l+","+n+Y+"M"+e+","+r+V)),v||(x.transition().style("fill",.2<g?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),b.transition().style("opacity",1).duration(200),v=!0),w.emit("plotly_relayouting",T(m))}function l(){W(w),m!==p&&(r.call("_guiRelayout",w,T(m)),G&&w.data&&w._context.showTips&&(C.notifier(O(w,"Double-click to zoom back out"),"long"),G=!1))}function S(e,t){var n=e/_.xaxis._m,r=t/_.yaxis._m,a=[(m={a:p.a-r,b:p.b+(n+r)/2,c:p.c-(n-r)/2}).a,m.b,m.c].sort(C.sorterAsc),i=a.indexOf(m.a),n=a.indexOf(m.b),r=a.indexOf(m.c);a[0]<0&&(a[1]+a[0]/2<0?(a[2]+=a[0]+a[1],a[0]=a[1]=0):(a[2]+=a[0]/2,a[1]+=a[0]/2,a[0]=0),m={a:a[i],b:a[n],c:a[r]},t=(p.a-m.a)*_.yaxis._m,e=(p.c-m.c-p.b+m.b)*_.xaxis._m);r=D(_.x0+e,_.y0+t);_.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",r);t=D(-e,-t);_.clipDefRelative.select("path").attr("transform",t),_.aaxis.range=[m.a,_.sum-m.b-m.c],_.baxis.range=[_.sum-m.a-m.c,m.b],_.caxis.range=[_.sum-m.a-m.b,m.c],_.drawAxes(!1),_._hasClipOnAxisFalse&&_.plotContainer.select(".scatterlayer").selectAll(".trace").call(I.hideOutsideRangePoints,_),w.emit("plotly_relayouting",T(m))}function E(){r.call("_guiRelayout",w,T(m))}this.dragOptions={element:a,gd:w,plotinfo:{id:_.id,domain:w._fullLayout[_.id].domain,xaxis:_.xaxis,yaxis:_.yaxis},subplot:_.id,prepFn:function(e,t,n){_.dragOptions.xaxes=[_.xaxis],_.dragOptions.yaxes=[_.yaxis],c=w._fullLayout._invScaleX,u=w._fullLayout._invScaleY;var r=_.dragOptions.dragmode=w._fullLayout.dragmode;z(r)?_.dragOptions.minDrag=1:_.dragOptions.minDrag=void 0,"zoom"===r?(_.dragOptions.moveFn=s,_.dragOptions.clickFn=o,_.dragOptions.doneFn=l,function(e,t){var n=a.getBoundingClientRect();d=e-n.left,f=t-n.top,w._fullLayout._calcInverseTransform(w);n=w._fullLayout._invTransform,n=C.apply3DTransform(n)(d,f);d=n[0],f=n[1],p={a:_.aaxis.range[0],b:_.baxis.range[1],c:_.caxis.range[1]},m=p,h=_.aaxis.range[1]-p.a,g=L(_.graphDiv._fullLayout[_.id].bgcolor).getLuminance(),y="M0,"+_.h+"L"+_.w/2+", 0L"+_.w+","+_.h+"Z",v=!1,x=i.append("path").attr("class","zoombox").attr("transform",D(_.x0,_.y0)).style({fill:.2<g?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",y),b=i.append("path").attr("class","zoombox-corners").attr("transform",D(_.x0,_.y0)).style({fill:P.background,stroke:P.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),_.clearSelect(w)}(t,n)):"pan"===r?(_.dragOptions.moveFn=S,_.dragOptions.clickFn=o,_.dragOptions.doneFn=E,p={a:_.aaxis.range[0],b:_.baxis.range[1],c:_.caxis.range[1]},m=p,_.clearSelect(w)):(F(r)||z(r))&&j(e,t,n,_.dragOptions,r)}},a.onmousemove=function(e){N.hover(w,e,_.id),w._fullLayout._lasthover=a,w._fullLayout._hoversubplot=_.id},a.onmouseout=function(e){w._dragging||R.unhover(w,e)},R.init(this.dragOptions)}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/titles":253,"../../lib":285,"../../lib/extend":279,"../../registry":373,"../cartesian/axes":331,"../cartesian/constants":338,"../cartesian/select":351,"../cartesian/set_convert":352,"../plots":366,"@plotly/d3":20,tinycolor2:119}],373:[function(e,t,c){"use strict";var u=e("./lib/loggers"),n=e("./lib/noop"),i=e("./lib/push_unique"),o=e("./lib/is_plain_object"),d=e("./lib/dom").addStyleRule,r=e("./lib/extend"),a=e("./plots/attributes"),s=e("./plots/layout_attributes"),f=r.extendFlat,l=r.extendDeepAll;function p(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)i(c.layoutArrayRegexes,t[n])}}function h(e,t){e=c.componentsRegistry[e].schema;e&&e.traces&&((e=e.traces[t])&&l(c.modules[t]._module.attributes,e))}function m(e,t){e=c.componentsRegistry[e].schema;e&&e.transforms&&((e=e.transforms[t])&&l(c.transformsRegistry[t].attributes,e))}function g(e,t){var n=c.componentsRegistry[e].schema;n&&n.subplots&&(t=(e=c.subplotsRegistry[t]).layoutAttributes,e="subplot"===e.attr?e.name:e.attr,Array.isArray(e)&&(e=e[0]),e=n.subplots[e],t&&e&&l(t,e))}function y(e){return e="object"==typeof e?e.type:e}c.modules={},c.allCategories={},c.allTypes=[],c.subplotsRegistry={},c.transformsRegistry={},c.componentsRegistry={},c.layoutArrayContainers=[],c.layoutArrayRegexes=[],c.traceLayoutAttributes={},c.localeRegistry={},c.apiMethodRegistry={},c.collectableSubplotTypes=null,c.register=function(e){if(c.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":!function(e){var t=e.name,n=e.categories,r=e.meta;if(c.modules[t])u.log("Type "+t+" already registered");else{c.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(c.subplotsRegistry[t])u.log("Plot type "+t+" already registered.");else for(var n in p(e),c.subplotsRegistry[t]=e,c.componentsRegistry)g(n,e.name)}(e.basePlotModule);for(var a,i={},o=0;o<n.length;o++)i[n[o]]=!0,c.allCategories[n[o]]=!0;for(a in c.modules[t]={_module:e,categories:i},r&&Object.keys(r).length&&(c.modules[t].meta=r),c.allTypes.push(t),c.componentsRegistry)h(a,t);e.layoutAttributes&&f(c.traceLayoutAttributes,e.layoutAttributes);r=e.basePlotModule,e=r.name;if("mapbox"===e){var s,l=r.constants.styleRules;for(s in l)d(".js-plotly-plot .plotly .mapboxgl-"+s,l[s])}"geo"!==e&&"mapbox"!==e||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}(n);break;case"transform":!function(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t,n="Transform module "+e.name,r="function"==typeof e.transform,a="function"==typeof e.calcTransform;if(!r&&!a)throw new Error(n+" is missing a *transform* or *calcTransform* method.");r&&a&&u.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "));o(e.attributes)||u.log(n+" registered without an *attributes* object.");"function"!=typeof e.supplyDefaults&&u.log(n+" registered without a *supplyDefaults* method.");for(t in c.transformsRegistry[e.name]=e,c.componentsRegistry)m(t,e.name)}(n);break;case"component":!function(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t,n,r,a=e.name;(c.componentsRegistry[a]=e).layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&i(c.layoutArrayContainers,a),p(e));for(t in c.modules)h(a,t);for(n in c.subplotsRegistry)g(a,n);for(r in c.transformsRegistry)m(a,r);e.schema&&e.schema.layout&&l(s,e.schema.layout)}(n);break;case"locale":!function(e){var t=e.name,n=t.split("-")[0],r=e.dictionary,a=e.format,i=r&&Object.keys(r).length,o=a&&Object.keys(a).length,s=c.localeRegistry,e=s[t];e||(s[t]=e={});n!==t&&((t=s[n])||(s[n]=t={}),i&&t.dictionary===e.dictionary&&(t.dictionary=r),o&&t.format===e.format&&(t.format=a));i&&(e.dictionary=r);o&&(e.format=a)}(n);break;case"apiMethod":var r=n.name;c.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},c.getModule=function(e){e=c.modules[y(e)];return!!e&&e._module},c.traceIs=function(e,t){if("various"===(e=y(e)))return!1;var n=c.modules[e];return n||(e&&u.log("Unrecognized trace type "+e+"."),n=c.modules[a.type.dflt]),!!n.categories[t]},c.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],a=0;a<r.length;a++)r[a].type===t&&n.push(a);return n},c.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},c.getComponentMethod=function(e,t){e=c.componentsRegistry[e];return e&&e[t]||n},c.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return c.apiMethodRegistry[e].apply(null,t)}},{"./lib/dom":277,"./lib/extend":279,"./lib/is_plain_object":286,"./lib/loggers":289,"./lib/noop":294,"./lib/push_unique":299,"./plots/attributes":327,"./plots/layout_attributes":364}],374:[function(e,t,n){"use strict";var p=e("../registry"),e=e("../lib"),h=e.extendFlat,m=e.extendDeep;function g(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}t.exports=function(e,t){var n,r=e.data,a=e.layout,i=m([],r),o=m({},a,g(t.tileClass)),a=e._context||{};if(t.width&&(o.width=t.width),t.height&&(o.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){o.annotations=[];for(var s=Object.keys(o),l=0;l<s.length;l++)n=s[l],-1<["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))&&(o[s[l]].title={text:""});for(l=0;l<i.length;l++){var c=i[l];c.showscale=!1,c.marker&&(c.marker.showscale=!1),p.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(t.annotations))for(l=0;l<t.annotations.length;l++)o.annotations.push(t.annotations[l]);var u=Object.keys(o).filter(function(e){return e.match(/^scene\d*$/)});if(u.length){var d={};for("thumbnail"===t.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<u.length;l++){var f=o[u[l]];f.xaxis||(f.xaxis={}),f.yaxis||(f.yaxis={}),f.zaxis||(f.zaxis={}),h(f.xaxis,d),h(f.yaxis,d),h(f.zaxis,d),f._scene=null}}e=document.createElement("div");t.tileClass&&(e.className=t.tileClass);a={gd:e,td:e,layout:o,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};return"transparent"!==t.setBackground&&(a.config.setBackground=t.setBackground||"opaque"),a.gd.defaultLayout=g(t.tileClass),a}},{"../lib":285,"../registry":373}],375:[function(e,t,n){"use strict";var s=e("../lib"),l=e("../plot_api/to_image"),c=e("./filesaver"),u=e("./helpers");t.exports=function(a,i){var o;return s.isPlainObject(a)||(o=s.getGraphDiv(a)),(i=i||{}).format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(t,n){o&&o._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==i.format&&n(new Error(u.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var e=l(a,i),r=i.filename||a.fn||"newplot";r+="."+i.format.replace("-","."),e.then(function(e){return o&&(o._snapshotInProgress=!1),c(e,r,i.format)}).then(function(e){t(e)}).catch(function(e){o&&(o._snapshotInProgress=!1),n(e)})})}},{"../lib":285,"../plot_api/to_image":323,"./filesaver":376,"./helpers":377}],376:[function(e,t,n){"use strict";var c=e("../lib"),u=e("./helpers");t.exports=function(a,i,o){var s=document.createElement("a"),l="download"in s;return new Promise(function(e,t){var n,r;return c.isSafari()?(u.octetStream(("svg"===o?",":";base64,")+encodeURIComponent(a)),e(i)):c.isIE()?(n=u.createBlob(a,"svg"),window.navigator.msSaveBlob(n,i),n=null,e(i)):l?(n=u.createBlob(a,o),r=u.createObjectURL(n),s.href=r,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),u.revokeObjectURL(r),n=null,e(i)):void t(new Error("download error"))})}},{"../lib":285,"./helpers":377}],377:[function(e,t,n){"use strict";var r=e("../registry");n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},n.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},n.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var a=window.URL||window.webkitURL;n.createObjectURL=function(e){return a.createObjectURL(e)},n.revokeObjectURL=function(e){return a.revokeObjectURL(e)},n.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});e=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}(window.atob(e));return new window.Blob([e],{type:"image/"+t})},n.octetStream=function(e){document.location.href="data:application/octet-stream"+e},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":373}],378:[function(e,t,n){"use strict";var r=e("./helpers"),e={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=e},{"./cloneplot":374,"./download":375,"./helpers":377,"./svgtoimg":379,"./toimage":380,"./tosvg":381}],379:[function(e,t,n){"use strict";var v=e("../lib"),r=e("events").EventEmitter,x=e("./helpers");t.exports=function(m){var g=m.emitter||new r,y=new Promise(function(n,r){var e=window.Image,t=m.svg,a=m.format||"png";if(v.isIE()&&"svg"!==a){var i=new Error(x.MSG_IE_BAD_FORMAT);return r(i),m.promise?y:g.emit("error",i)}var o,s=m.canvas,l=m.scale||1,c=m.width||300,i=m.height||150,u=l*c,d=l*i,f=s.getContext("2d"),p=new e,h="svg"===a||v.isSafari()?x.encodeSVG(t):(o=x.createBlob(t,"svg"),x.createObjectURL(o));s.width=u,s.height=d,p.onload=function(){var e;switch(o=null,x.revokeObjectURL(h),"svg"!==a&&f.drawImage(p,0,0,u,d),a){case"jpeg":e=s.toDataURL("image/jpeg");break;case"png":e=s.toDataURL("image/png");break;case"webp":e=s.toDataURL("image/webp");break;case"svg":e=h;break;default:var t="Image format is not jpeg, png, svg or webp.";if(r(new Error(t)),!m.promise)return g.emit("error",t)}n(e),m.promise||g.emit("success",e)},p.onerror=function(e){if(o=null,x.revokeObjectURL(h),r(e),!m.promise)return g.emit("error",e)},p.src=h});return m.promise?y:g}},{"../lib":285,"./helpers":377,events:27}],380:[function(e,t,n){"use strict";var i=e("events").EventEmitter,o=e("../registry"),s=e("../lib"),l=e("./helpers"),c=e("./cloneplot"),u=e("./tosvg"),d=e("./svgtoimg");t.exports=function(e,n){var r=new i,t=c(e,{format:"png"}),a=t.gd;return a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a),e=l.getRedrawFunc(a),o.call("_doPlot",a,t.data,t.layout,t.config).then(e).then(function(){var e=l.getDelay(a._fullLayout);setTimeout(function(){var e=u(a),t=document.createElement("canvas");t.id=s.randstr(),(r=d({format:n.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:t,emitter:r,svg:e})).clean=function(){a&&document.body.removeChild(a)}},e)}).catch(function(e){r.emit("error",e)}),r}},{"../lib":285,"../registry":373,"./cloneplot":374,"./helpers":377,"./svgtoimg":379,"./tosvg":381,events:27}],381:[function(e,t,n){"use strict";var g=e("@plotly/d3"),y=e("../lib"),v=e("../components/drawing"),x=e("../components/color"),b=e("../constants/xmlns_namespaces"),_=/"/g,w="TOBESTRIPPED",T=new RegExp('("'+w+")|("+w+'")',"g");t.exports=function(e,t,n){var r,a=e._fullLayout,i=a._paper,o=a._toppaper,s=a.width,l=a.height;i.insert("rect",":first-child").call(v.setRect,0,0,s,l).call(x.fill,a.paper_bgcolor);var c=a._basePlotModules||[];for(f=0;f<c.length;f++){var u=c[f];u.toSVG&&u.toSVG(e)}if(o)for(var o=o.node().childNodes,d=Array.prototype.slice.call(o),f=0;f<d.length;f++){var p=d[f];p.childNodes.length&&i.node().appendChild(p)}a._draggers&&a._draggers.remove(),i.node().style.background="",i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e,t=g.select(this);"hidden"!==this.style.visibility&&"none"!==this.style.display?(t.style({visibility:null,display:null}),(e=this.style.fontFamily)&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(_,w))):t.remove()});var h=[];if(a._gradientUrlQueryParts)for(r in a._gradientUrlQueryParts)h.push(r);if(a._patternUrlQueryParts)for(r in a._patternUrlQueryParts)h.push(r);h.length&&i.selectAll(h.join(",")).each(function(){var e=g.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(_,w));t=this.style.stroke;t&&-1!==t.indexOf("url(")&&e.style("stroke",t.replace(_,w))}),"pdf"!==t&&"eps"!==t||i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),i.node().setAttributeNS(b.xmlns,"xmlns",b.svg),i.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),"svg"===t&&n&&(i.attr("width",n*s),i.attr("height",n*l),i.attr("viewBox","0 0 "+s+" "+l));var m,s=(new window.XMLSerializer).serializeToString(i.node());return l=s,m=g.select("body").append("div").style({display:"none"}).html(""),l=l.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":m.html(e).text()}),m.remove(),s=(s=(s=l).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(T,"'"),s=y.isIE()?(s=(s=s.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"'):s}},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],382:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");t=t.marker;t&&(r.mergeArray(t.opacity,e,"mo",!0),r.mergeArray(t.color,e,"mc"),(t=t.line)&&(r.mergeArray(t.color,e,"mlc"),r.mergeArrayCastPositive(t.width,e,"mlw")))}},{"../../lib":285}],383:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../components/colorscale/attributes"),l=e("../../plots/font_attributes"),c=e("./constants"),u=e("../../components/drawing/attributes").pattern,d=e("../../lib/extend").extendFlat,e=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=d({},r.marker.line.width,{dflt:0}),l=d({width:l,editType:"calc"},s("marker.line")),u=d({line:l,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:u});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:d({},e,{}),insidetextfont:d({},e,{}),outsidetextfont:d({},e,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:d({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"../scatter/attributes":494,"./constants":385}],384:[function(e,t,n){"use strict";var f=e("../../plots/cartesian/axes"),p=e("../../plots/cartesian/align_period"),h=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/calc"),g=e("./arrays_to_calcdata"),y=e("../scatter/calc_selection");t.exports=function(e,t){for(var n,r,a,i=f.getFromId(e,t.xaxis||"x"),o=f.getFromId(e,t.yaxis||"y"),s={msUTC:!(!t.base&&0!==t.base)},l="h"===t.orientation?(n=i.makeCalcdata(t,"x",s),a=o.makeCalcdata(t,"y"),r=p(t,o,"y",a),!!t.yperiodalignment):(n=o.makeCalcdata(t,"y",s),a=i.makeCalcdata(t,"x"),r=p(t,i,"x",a),!!t.xperiodalignment),c=Math.min(r.length,n.length),u=new Array(c),d=0;d<c;d++)u[d]={p:r[d],s:n[d]},l&&(u[d].orig_p=a[d]),t.ids&&(u[d].id=String(t.ids[d]));return h(t,"marker")&&m(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),h(t,"marker.line")&&m(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),g(u,t),y(u,t),u}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../scatter/calc_selection":496,"./arrays_to_calcdata":382}],385:[function(e,t,n){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],386:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),f=e("../../lib").isArrayOrTypedArray,_=e("../../constants/numerical").BADNUM,p=e("../../registry"),w=e("../../plots/cartesian/axes"),v=e("../../plots/cartesian/constraints").getAxisGroup,c=e("./sieve.js");function h(e,t,n,r,a){if(r.length){var i,o,s,l;switch(!function(e,t){var n,r,a;for(n=0;n<t.length;n++){var i=t[n],o=i[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(f(s)){for(r=0;r<Math.min(s.length,i.length);r++)a=c(s[r],0,l),b(a)?(i[r].b=+a,i[r].hasB=1):i[r].b=0;for(;r<i.length;r++)i[r].b=0}else{a=c(s,0,l);var u=b(a);for(a=u?a:0,r=0;r<i.length;r++)i[r].b=a,u&&(i[r].hasB=1)}}}(n,r),a.mode){case"overlay":u(t,n,r,a);break;case"group":for(i=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.offset?o:i).push(l);o.length&&function(e,t,n,r,a){r=new c(r,{posAxis:t,sepNegVal:!1,overlapNoMerge:!a.norm});(function(e,t,n,r){for(var a,i=e._fullLayout,o=n.positions,e=n.distinctPositions,s=n.minDiff,l=n.traces,c=l.length,u=o.length!==e.length,d=s*(1-r.gap),e=v(i,t._id)+l[0][0].trace.orientation,f=i._alignmentOpts[e]||{},p=0;p<c;p++){var h=l[p],m=h[0].trace,g=f[m.alignmentgroup]||{},y=Object.keys(g.offsetGroups||{}).length,g=(a=y?d/y:u?d/c:d)*(1-(r.groupgap||0));a=y?((2*m._offsetIndex+1-y)*a-g)/2:u?((2*p+1-c)*a-g)/2:-g/2;h=h[0].t;h.barwidth=g,h.poffset=a,h.bargroupwidth=d,h.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,x(n),T(t,n),M(t,n,u)})(e,t,r,a),function(e,t){for(var n=e.traces,r=0;r<n.length;r++){var a=n[r];if(void 0===a[0].trace.base)for(var i=new c([a],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<a.length;o++){var s,l=a[o];l.p===_||(s=i.put(l.p,l.b+l.s))&&(l.b=s)}}}(r,t),a.norm?(g(r),y(n,r,a)):m(n,r)}(e,t,n,o,a),i.length&&u(t,n,i,a);break;case"stack":case"relative":for(i=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.base?o:i).push(l);o.length&&function(e,t,n,r){var a=new c(n,{posAxis:e,sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});d(e,a,r),function(e,t,n){var r,a,i,o,s,l,c=k(e),u=t.traces;for(o=0;o<u.length;o++)if(r=u[o],"funnel"===(a=r[0].trace).type)for(s=0;s<r.length;s++)(l=r[s]).s!==_&&t.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){r=u[o],a=r[0].trace,i="funnel"===a.type;var d,f,p=[];for(s=0;s<r.length;s++)(l=r[s]).s!==_&&(f=i?l.s:l.s+l.b,d=t.put(l.p,f),f=d+f,l.b=d,l[c]=f,n.norm||(p.push(f),l.hasB&&p.push(d)));n.norm||(a._extremes[e._id]=w.findExtremes(e,p,{tozero:!0,padded:!0}))}}(t,a,r);for(var i=0;i<n.length;i++)for(var o=n[i],s=0;s<o.length;s++){var l=o[s];l.s!==_&&l.b+l.s===a.get(l.p,l.s)&&(l._outmost=!0)}r.norm&&y(t,a,r)}(t,n,o,a),i.length&&u(t,n,i,a)}!function(e,t){var n,r,a,i=k(t),o={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++){var c=a[r].p;b(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=o.round=function(e){return String(Math.round(u*(e-s)))};for(n=0;n<e.length;n++){(a=e[n])[0].t.extents=o;var f=a[0].t.poffset,p=Array.isArray(f);for(r=0;r<a.length;r++){var h,m,g=a[r],y=g[i]-g.w/2;b(y)&&(h=g[i]+g.w/2,m=d(g.p),o[m]?o[m]=[Math.min(y,o[m][0]),Math.max(h,o[m][1])]:o[m]=[y,h]),g.p0=g.p+(p?f[r]:f),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(r,t)}}function u(e,t,n,r){for(var a=0;a<n.length;a++){var i=n[a],i=new c([i],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});d(e,i,r),r.norm?(g(i),y(t,i,r)):m(t,i)}}function d(e,t,n){for(var r=t.minDiff,a=t.traces,i=r*(1-n.gap),o=i*(1-(n.groupgap||0)),s=-o/2,l=0;l<a.length;l++){var c=a[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=i,c.bardelta=r}t.binWidth=a[0][0].t.barwidth/100,x(t),T(e,t),M(e,t)}function x(e){for(var t=e.traces,n=0;n<t.length;n++){var r,a=t[n],i=a[0],o=i.trace,s=i.t,i=o._offset||o.offset,l=s.poffset;if(f(i)){for(r=Array.prototype.slice.call(i,0,a.length),d=0;d<r.length;d++)b(r[d])||(r[d]=l);for(d=r.length;d<a.length;d++)r.push(l);s.poffset=r}else void 0!==i&&(s.poffset=i);var o=o._width||o.width,c=s.barwidth;if(f(o)){for(var u=Array.prototype.slice.call(o,0,a.length),d=0;d<u.length;d++)b(u[d])||(u[d]=c);for(d=u.length;d<a.length;d++)u.push(c);if(s.barwidth=u,void 0===i){for(r=[],d=0;d<a.length;d++)r.push(l+(c-u[d])/2);s.poffset=r}}else void 0!==o&&(s.barwidth=o,void 0===i&&(s.poffset=l+(c-o)/2))}}function T(e,t){for(var n=t.traces,r=k(e),a=0;a<n.length;a++)for(var i=n[a],o=i[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<i.length;d++){var f=i[d],p=f.w=u?c[d]:c;f[r]=f.p+(l?s[d]:s)+p/2}}function M(e,t,n){var r=t.traces,a=t.minDiff/2;w.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var i=0;i<r.length;i++){var o=r[i],s=o[0],l=s.trace,c=[];for(h=0;h<o.length;h++)m=(g=o[h]).p-a,x=g.p+a,c.push(m,x);if(l.width||l.offset)for(var s=s.t,u=s.poffset,d=s.barwidth,f=Array.isArray(u),p=Array.isArray(d),h=0;h<o.length;h++){var m,g=o[h],y=f?u[h]:u,v=p?d[h]:d,x=(m=g.p+y)+v;c.push(m,x)}l._extremes[e._id]=w.findExtremes(e,c,{padded:!1})}}function m(e,t){for(var n=t.traces,r=k(e),a=0;a<n.length;a++){for(var i=n[a],o=i[0].trace,s=[],l=!1,c=0;c<i.length;c++){var u=i[c],d=u.b,f=d+u.s;u[r]=f,s.push(f),u.hasB&&s.push(d),u.hasB&&u.b||(l=!0)}o._extremes[e._id]=w.findExtremes(e,s,{tozero:l,padded:!0})}}function g(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],a=0;a<r.length;a++){var i=r[a];i.s!==_&&e.put(i.p,i.b+i.s)}}function y(t,e,n){var r=e.traces,a=k(t),i="fraction"===n.norm?1:100,o=i/1e9,s=t.l2c(t.c2l(0)),l="stack"===n.mode?i:s;function c(e){return b(t.c2l(e))&&(e<s-o||l+o<e||!b(s))}for(var u=0;u<r.length;u++){for(var d=r[u],f=d[0].trace,p=[],h=!1,m=!1,g=0;g<d.length;g++){var y,v,x=d[g];x.s!==_&&(v=Math.abs(i/e.get(x.p,x.s)),x.b*=v,x.s*=v,v=(y=x.b)+x.s,x[a]=v,p.push(v),m=m||c(v),x.hasB&&(p.push(y),m=m||c(y)),x.hasB&&x.b||(h=!0))}f._extremes[t._id]=w.findExtremes(t,p,{tozero:h,padded:m})}}function k(e){return e._id.charAt(0)}t.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,t=e._fullLayout,a=e._fullData,i=e.calcdata,o=[],s=[],l=0;l<a.length;l++){var c=a[l];if(!0===c.visible&&p.traceIs(c,"bar")&&c.xaxis===n._id&&c.yaxis===r._id&&(("h"===c.orientation?o:s).push(i[l]),c._computePh))for(var u=e.calcdata[l],d=0;d<u.length;d++)"function"==typeof u[d].ph0&&(u[d].ph0=u[d].ph0()),"function"==typeof u[d].ph1&&(u[d].ph1=u[d].ph1())}t={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap},h(e,n,r,s,t),h(e,r,n,o,t)},setGroupPositions:h}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339,"../../registry":373,"./sieve.js":396,"fast-isnumeric":31}],387:[function(e,t,n){"use strict";var h=e("../../lib"),o=e("../../components/color"),s=e("../../registry"),l=e("../scatter/xy_defaults"),c=e("../scatter/period_defaults"),u=e("./style_defaults"),d=e("../../plots/cartesian/constraints").getAxisGroup,f=e("./attributes"),m=h.coerceFont;function i(e,t,n,r){var a=t.orientation,i=t[{v:"x",h:"y"}[a]+"axis"],o=d(n,i)+a,i=n._alignmentOpts||{},a=r("alignmentgroup"),n=i[o],o=(n=n||(i[o]={}))[a];o?o.traces.push(t):o=n[a]={traces:[t],alignmentIndex:Object.keys(n).length,offsetGroups:{}};n=r("offsetgroup"),r=o.offsetGroups,o=r[n];n&&(o=o||(r[n]={offsetIndex:Object.keys(r).length}),t._offsetIndex=o.offsetIndex)}function p(e,t,n,r,a,i){var o=!(!1===(i=i||{}).moduleHasSelected),s=!(!1===i.moduleHasUnselected),l=!(!1===i.moduleHasConstrain),c=!(!1===i.moduleHasCliponaxis),u=!(!1===i.moduleHasTextangle),d=!(!1===i.moduleHasInsideanchor),f=!!i.hasPathbar,p=Array.isArray(a)||"auto"===a,i=p||"inside"===a,p=p||"outside"===a;(i||p)&&(a=m(r,"textfont",n.font),n=h.extendFlat({},a),(e=!(e.textfont&&e.textfont.color))&&delete n.color,m(r,"insidetextfont",n),f&&(f=h.extendFlat({},a),e&&delete f.color,m(r,"pathbar.textfont",f)),p&&m(r,"outsidetextfont",a),o&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),c&&r("cliponaxis"),u&&r("textangle"),r("texttemplate")),i&&d&&r("insidetextanchor")}t.exports={supplyDefaults:function(n,r,e,t){function a(e,t){return h.coerce(n,r,f,e,t)}var i;l(n,r,t,a)?(c(n,r,t,a),a("xhoverformat"),a("yhoverformat"),a("orientation",r.x&&!r.y?"h":"v"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),i=a("textposition"),p(n,0,t,a,i,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u(n,r,a,e,t),e=(r.marker.line||{}).color,(t=s.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||o.defaultLine,{axis:"y"}),t(n,r,e||o.defaultLine,{axis:"x",inherit:"y"}),h.coerceSelectionMarkerOpacity(r,a)):r.visible=!1},crossTraceDefaults:function(e,t){var n;function r(e){return h.coerce(n._input,n,f,e)}if("group"===t.barmode)for(var a=0;a<e.length;a++)"bar"===(n=e[a]).type&&(n._input,i(0,n,t,r))},handleGroupingDefaults:i,handleText:p}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/constraints":339,"../../registry":373,"../scatter/period_defaults":514,"../scatter/xy_defaults":521,"./attributes":383,"./style_defaults":398}],388:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},{}],389:[function(e,t,n){"use strict";var i=e("fast-isnumeric"),r=e("tinycolor2"),a=e("../../lib").isArrayOrTypedArray;n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(i(t)){t=+t;var r=e.min,a=e.max;if(!(void 0!==r&&t<r||void 0!==a&&a<t))return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return r(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},n.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:a(e.marker.line.width)?0:e.marker.line.width}},{"../../lib":285,"fast-isnumeric":31,tinycolor2:119}],390:[function(e,t,n){"use strict";var I=e("../../components/fx"),i=e("../../registry"),a=e("../../components/color"),R=e("../../lib").fillText,o=e("./helpers").getLineWidth,N=e("../../plots/cartesian/axes").hoverLabelText,z=e("../../constants/numerical").BADNUM;function s(e,t,n,r,a){var i,o,s,l,c,u,d=e.cd,f=d[0].trace,p=d[0].t,h="closest"===r,m="waterfall"===f.type,g=e.maxHoverDistance,y=e.maxSpikeDistance;"h"===f.orientation?(i=n,o=t,s="y",l="x",c=S,u=k):(i=t,o=n,s="x",l="y",u=S,c=k);var v=f[s+"period"];function x(e){return _(e,-1)}function b(e){return _(e,1)}function _(e,t){return v?e.p+t*Math.abs(e.p-e.orig_p):e[s]+t*e.w/2}var w=h||v?x:function(e){return Math.min(x(e),e.p-p.bardelta/2)},T=h||v?b:function(e){return Math.max(b(e),e.p+p.bardelta/2)};function M(e,t,n){return a.finiteRange&&(n=0),I.inbox(e-i,t-i,n+Math.min(1,Math.abs(t-e)/E)-1)}function k(e){return M(w(e),T(e),g)}function A(e){var t=e[l];return m&&(e=Math.abs(e.rawS)||0,0<o?t+=e:o<0&&(t-=e)),t}function S(e){var t=o,n=e.b,e=A(e);return I.inbox(n-t,e-t,g+(e-t)/(e-n)-1)}t=e[s+"a"],n=e[l+"a"];var E=Math.abs(t.r2c(t.range[1])-t.r2c(t.range[0])),r=I.getDistanceFunction(r,c,u,function(e){return(c(e)+u(e))/2});if(I.getClosest(d,r,e),!1!==e.index&&d[e.index].p!==z){h||(w=function(e){return Math.min(x(e),e.p-p.bargroupwidth/2)},T=function(e){return Math.max(b(e),e.p+p.bargroupwidth/2)});var L=d[e.index],d=f.base?L.b+L.s:L.s;e[l+"0"]=e[l+"1"]=n.c2p(L[l],!0),e[l+"LabelVal"]=d;d=p.extents[p.extents.round(L.p)];e[s+"0"]=t.c2p(h?w(L):d[0],!0),e[s+"1"]=t.c2p(h?T(L):d[1],!0);var C,D,O,P,d=void 0!==L.orig_p;return e[s+"LabelVal"]=d?L.orig_p:L.p,e.labelLabel=N(t,e[s+"LabelVal"],f[s+"hoverformat"]),e.valueLabel=N(n,e[l+"LabelVal"],f[l+"hoverformat"]),e.baseLabel=N(n,L.b,f[l+"hoverformat"]),e.spikeDistance=(O=o,P=(D=L).b,D=A(D),(I.inbox(P-O,D-O,y+(D-O)/(D-P)-1)+M(x(C=L),b(C),y))/2),e[s+"Spike"]=t.c2p(L.p,!0),R(L,f,e),e.hovertemplate=f.hovertemplate,e}}function l(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,t=o(e,t);return a.opacity(n)?n:a.opacity(r)&&t?r:void 0}t.exports={hoverPoints:function(e,t,n,r,a){if(n=s(e,t,n,r,a)){r=n.cd,a=r[0].trace,r=r[n.index];return n.color=l(a,r),i.getComponentMethod("errorbars","hoverInfo")(r,a,n),[n]}},hoverOnBars:s,getTraceColor:l}},{"../../components/color":155,"../../components/fx":195,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./helpers":389}],391:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":345,"../scatter/marker_colorbar":512,"./arrays_to_calcdata":382,"./attributes":383,"./calc":384,"./cross_trace_calc":386,"./defaults":387,"./event_data":388,"./hover":390,"./layout_attributes":392,"./layout_defaults":393,"./plot":394,"./select":395,"./style":397}],392:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],393:[function(e,t,n){"use strict";var f=e("../../registry"),p=e("../../plots/cartesian/axes"),h=e("../../lib"),m=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return h.coerce(n,r,m,e,t)}for(var a=!1,i=!1,o=!1,s={},l=t("barmode"),c=0;c<e.length;c++){var u,d=e[c];f.traceIs(d,"bar")&&d.visible&&(a=!0,"group"===l&&(s[u=d.xaxis+d.yaxis]&&(o=!0),s[u]=!0),d.visible&&"histogram"===d.type&&"category"!==p.getFromId({_fullLayout:r},d["v"===d.orientation?"xaxis":"yaxis"]).type&&(i=!0))}a?("overlay"!==l&&t("barnorm"),t("bargap",i&&!o?0:.2),t("bargroupgap")):delete r.barmode}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./layout_attributes":392}],394:[function(e,t,n){"use strict";var A=e("@plotly/d3"),S=e("fast-isnumeric"),E=e("../../lib"),L=e("../../lib/svg_text_utils"),C=e("../../components/color"),D=e("../../components/drawing"),r=e("../../registry"),O=e("../../plots/cartesian/axes").tickText,a=e("./uniform_text"),P=a.recordMinTextSize,i=a.clearMinTextSize,I=e("./style"),R=e("./helpers"),o=e("./constants"),a=e("./attributes"),N=a.text,z=a.textposition,F=e("../../components/fx/helpers").appendArrayPointValue,j=o.TEXTPAD;function s(e){return e.id}function H(e,t,n,r){return t.uniformtext.mode||!l(n)?e:(r&&(a=r()),e.transition().duration(n.duration).ease(n.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}));var a}function l(e){return e&&0<e.duration}function B(e){return"auto"===e?0:e}function q(e,t){var n=Math.PI/180*t,t=Math.abs(Math.sin(n)),n=Math.abs(Math.cos(n));return{x:e.width*n+e.height*t,y:e.width*t+e.height*n}}function U(e,t,n,r,a,i){var o=!!i.isHorizontal,s=!!i.constrained,l=i.angle||0,c=i.anchor||"end",u="end"===c,d="start"===c,f=((i.leftToRight||0)+1)/2,p=1-f,h=a.width,m=a.height,g=Math.abs(t-e),y=Math.abs(r-n),c=2*j<g&&2*j<y?j:0;g-=2*c,y-=2*c;i=B(l);"auto"!==l||h<=g&&m<=y||!(g<h||y<m)||(y<h||g<m)&&h<m==g<y||(i+=90);h=q(a,i),m=1;s&&(m=Math.min(1,g/h.x,y/h.y));s=a.left*p+a.right*f,g=(a.top+a.bottom)/2,y=(e+j)*p+(t-j)*f,a=(n+r)/2,p=0,f=0;return(d||u)&&(u=(o?h.x:h.y)/2,h=o?e<t?1:-1:n<r?1:-1,o?p=d?(y=e+h*c,-h*u):(y=t-h*c,h*u):f=d?(a=n+h*c,-h*u):(a=r-h*c,h*u)),{textX:s,textY:g,targetX:y,targetY:a,anchorX:p,anchorY:f,scale:m,rotate:i}}t.exports={plot:function(x,b,e,t,_,w){var T=b.xaxis,M=b.yaxis,k=x._fullLayout;_||(_={mode:k.barmode,norm:k.barmode,gap:k.bargap,groupgap:k.bargroupgap},i("bar",k)),e=E.makeTraceGroups(t,e,"trace bars").each(function(p){var e=A.select(this),h=p[0].trace,t="waterfall"===h.type,n="funnel"===h.type,m="bar"===h.type||n,g=0;t&&h.connector.visible&&"between"===h.connector.mode&&(g=h.connector.line.width/2);var y="h"===h.orientation,v=l(_),n=E.ensureSingle(e,"g","points"),t=function(e){if(e.ids)return s}(h),t=n.selectAll("g.point").data(E.identity,t);t.enter().append("g").classed("point",!0),t.exit().remove(),t.each(function(e,t){var n,r,a,i=A.select(this),o=(s=e,o=T,u=M,c=[],n=(l=y)?o:u,o=l?u:o,(u=[])[0]=n.c2p(s.s0,!0),c[0]=o.c2p(s.p0,!0),u[1]=n.c2p(s.s1,!0),c[1]=o.c2p(s.p1,!0),l?[u,c]:[c,u]),s=o[0][0],l=o[0][1],c=o[1][0],u=o[1][1],o=0==(y?l-s:u-c);function d(e){var t=A.round(r/2%1,2);return 0===_.gap&&0===_.groupgap?A.round(Math.round(e)-t,2):e}o=(o=o&&m&&R.getLineWidth(h,e)?!1:o)||!(S(s)&&S(l)&&S(c)&&S(u)),(e.isBlank=o)&&(y?l=s:u=c),g&&!o&&(y?l+=((s-=(s<l?1:-1)*g)<l?1:-1)*g:u+=((c-=(c<u?1:-1)*g)<u?1:-1)*g),"waterfall"===h.type?o||(a=h[e.dir].marker,r=a.line.width,a=a.color):(r=R.getLineWidth(h,e),a=e.mc||h.marker.color),x._context.staticPlot||(s=(f=C.opacity(a)<1||.01<r?d:function(e,t,n){return n&&e===t?e:2<=Math.abs(e-t)?d(e):t<e?Math.ceil(e):Math.floor(e)})(s,l,y),l=f(l,s,y),c=f(c,u,!y),u=f(u,c,!y));var o,f=H(E.ensureSingle(i,"path"),k,_,w);f.style("vector-effect","non-scaling-stroke").attr("d",isNaN((l-s)*(u-c))||o&&x._context.staticPlot?"M0,0Z":"M"+s+","+c+"V"+u+"H"+l+"V"+c+"Z").call(D.setClipUrl,b.layerClipId,x),!k.uniformtext.mode&&v&&(o=D.makePointStyleFns(h),D.singlePointStyle(e,f,h,o,x)),function(r,e,t,n,a,i,o,s,l,c,u){var d,f=e.xaxis,p=e.yaxis,h=r._fullLayout;function m(e,t,n){return E.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(D.font,n).call(L.convertToTspans,r)}var g=n[0].trace,y="h"===g.orientation,v=function(e,t,n,r,a){var i=t[0].trace;n=i.texttemplate?function(e,t,n,r,a){var i=t[0].trace,o=E.castOption(i,n,"texttemplate");if(!o)return"";var s,l,c="waterfall"===i.type,u="funnel"===i.type;l="h"===i.orientation?(f="y",s=a,p="x",r):(f="x",s=r,p="y",a);function d(e){return O(l,l.c2l(e),!0).text}t=t[n],n={};n.label=t.p,n.labelLabel=n[f+"Label"]=function(e){return O(s,s.c2l(e),!0).text}(t.p);var f=E.castOption(i,t.i,"text");0!==f&&!f||(n.text=f);n.value=t.s,n.valueLabel=n[p+"Label"]=d(t.s);var p={};F(p,i,t.i),c&&(n.delta=+t.rawS||t.s,n.deltaLabel=d(n.delta),n.final=t.v,n.finalLabel=d(n.final),n.initial=n.final-n.delta,n.initialLabel=d(n.initial));u&&(n.value=t.s,n.valueLabel=d(n.value),n.percentInitial=t.begR,n.percentInitialLabel=E.formatPercent(t.begR),n.percentPrevious=t.difR,n.percentPreviousLabel=E.formatPercent(t.difR),n.percentTotal=t.sumR,n.percenTotalLabel=E.formatPercent(t.sumR));t=E.castOption(i,t.i,"customdata");t&&(n.customdata=t);return E.texttemplateString(o,n,e._d3locale,p,n,i._meta||{})}(e,t,n,r,a):i.textinfo?function(e,t,n,r){var a=e[0].trace,i="h"===a.orientation,o="waterfall"===a.type,s="funnel"===a.type;function l(e){return O(i?n:r,+e,!0).text}var c,u=a.textinfo,d=e[t],f=u.split("+"),p=[],u=function(e){return-1!==f.indexOf(e)};u("label")&&p.push(function(e){return O(i?r:n,e,!0).text}(e[t].p));u("text")&&(0!==(c=E.castOption(a,d.i,"text"))&&!c||p.push(c));o&&(t=+d.rawS||d.s,a=d.v,o=a-t,u("initial")&&p.push(l(o)),u("delta")&&p.push(l(t)),u("final")&&p.push(l(a)));s&&(u("value")&&p.push(l(d.s)),s=0,u("percent initial")&&s++,u("percent previous")&&s++,u("percent total")&&s++,s=1<s,u("percent initial")&&(c=E.formatPercent(d.begR),s&&(c+=" of initial"),p.push(c)),u("percent previous")&&(c=E.formatPercent(d.difR),s&&(c+=" of previous"),p.push(c)),u("percent total")&&(c=E.formatPercent(d.sumR),s&&(c+=" of total"),p.push(c)));return p.join("<br>")}(t,n,r,a):R.getValue(i.text,n);return R.coerceString(N,n)}(h,n,a,f,p);d=function(e,t){t=R.getValue(e.textposition,t);return R.coerceEnumerated(z,t)}(g,a);var x="stack"===c.mode||"relative"===c.mode,b=n[a],e=!x||b._outmost;if(v&&"none"!==d&&(!b.isBlank&&i!==o&&s!==l||"auto"!==d&&"inside"!==d)){x=h.font,n=I.getBarColor(n[a],g),n=I.getInsideTextFont(g,a,x,n),a=I.getOutsideTextFont(g,a,x),x=t.datum();y?"log"===f.type&&x.s0<=0&&(i=f.range[0]<f.range[1]?0:f._length):"log"===p.type&&x.s0<=0&&(s=p.range[0]<p.range[1]?p._length:0);var _,w,T,M,f=Math.abs(o-i)-2*j,x=Math.abs(l-s)-2*j;if("outside"===d&&(e||b.hasB||(d="inside")),"auto"===d&&(e?(d="inside",M=E.ensureUniformFontSize(r,n),_=m(t,v,M),w=D.bBox(_.node()),T=w.width,A=w.height,p=T<=f&&A<=x,e=T<=x&&A<=f,x=y?T*(x/A)<=f:A*(f/T)<=x,0<T&&0<A&&(p||e||x)?d="inside":(d="outside",_.remove(),_=null)):d="inside"),!_){M=E.ensureUniformFontSize(r,"outside"===d?a:n);v=(_=m(t,v,M)).attr("transform");if(_.attr("transform",""),w=D.bBox(_.node()),T=w.width,A=w.height,_.attr("transform",v),T<=0||A<=0)return _.remove()}var k,A=g.textangle;(A="outside"===d?(k="both"===g.constraintext||"outside"===g.constraintext,function(e,t,n,r,a,i){var o,s=!!i.isHorizontal,l=!!i.constrained,c=i.angle||0,u=a.width,d=a.height,f=Math.abs(t-e),p=Math.abs(r-n);o=s?2*j<p?j:0:2*j<f?j:0;var h=1;l&&(h=s?Math.min(1,p/d):Math.min(1,f/u));i=B(c),l=q(a,i),p=(s?l.x:l.y)/2,d=(a.left+a.right)/2,f=(a.top+a.bottom)/2,u=(e+t)/2,c=(n+r)/2,l=0,a=0,n=s?t<e?1:-1:n<r?1:-1;s?(u=t-n*o,l=n*p):(c=r+n*o,a=-n*p);return{textX:d,textY:f,targetX:u,targetY:c,anchorX:l,anchorY:a,scale:h,rotate:i}}(i,o,s,l,w,{isHorizontal:y,constrained:k,angle:A})):(k="both"===g.constraintext||"inside"===g.constraintext,U(i,o,s,l,w,{isHorizontal:y,constrained:k,angle:A,anchor:g.insidetextanchor}))).fontSize=M.size,P(g.type,A,h),b.transform=A,H(_,h,c,u).attr("transform",E.getTextTransform(A))}else t.select("text").remove()}(x,b,i,p,t,s,l,c,u,_,w),b.layerClipId&&D.hideOutsideRangePoint(e,i.select("text"),T,M,h.xcalendar,h.ycalendar)});t=!1===h.cliponaxis;D.setClipUrl(e,t?null:b.layerClipId,x)}),r.getComponentMethod("errorbars","plot")(x,e,b,_)},toMoveInsideBar:U}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx/helpers":191,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"./attributes":383,"./constants":385,"./helpers":389,"./style":397,"./uniform_text":399,"@plotly/d3":20,"fast-isnumeric":31}],395:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a,i,o,s,l,c=e.cd,u=e.xaxis,d=e.yaxis,f=c[0].trace,p="funnel"===f.type,h="h"===f.orientation,m=[];if(!1===t)for(n=0;n<c.length;n++)c[n].selected=0;else for(n=0;n<c.length;n++){var g=c[n],y="ct"in g?g.ct:(y=g,a=d,i=h,o=p,l=s=void 0,s=(r=u).c2p(i?y.s0:y.p0,!0),l=r.c2p(i?y.s1:y.p1,!0),r=a.c2p(i?y.p0:y.s0,!0),y=a.c2p(i?y.p1:y.s1,!0),o?[(s+l)/2,(r+y)/2]:i?[l,(r+y)/2]:[(s+l)/2,y]);t.contains(y,!1,n,e)?(m.push({pointNumber:n,x:u.c2d(g.x),y:d.c2d(g.y)}),g.selected=1):g.selected=0}return m}},{}],396:[function(e,t,n){"use strict";t.exports=r;var c=e("../../lib").distinctVals,u=e("../../constants/numerical").BADNUM;function r(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,r=[],a=0;a<e.length;a++){for(var i=e[a],o=0;o<i.length;o++){var s=i[o];s.p!==u&&r.push(s.p)}i[0]&&i[0].width1&&(n=Math.min(i[0].width1,n))}this.positions=r;var l=c(r);this.distinctPositions=l.vals,1===l.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(l.minDiff,n);t=(t.posAxis||{}).type;"category"!==t&&"multicategory"!==t||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(e,t){var n=this.getLabel(e,t),e=this.bins[n]||0;return this.bins[n]=e+t,e},r.prototype.get=function(e,t){t=this.getLabel(e,t);return this.bins[t]||0},r.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":265,"../../lib":285}],397:[function(e,t,n){"use strict";var o=e("@plotly/d3"),a=e("../../components/color"),s=e("../../components/drawing"),l=e("../../lib"),c=e("../../registry"),i=e("./uniform_text").resizeText,r=e("./attributes"),u=r.textfont,d=r.insidetextfont,f=r.outsidetextfont,p=e("./helpers");function h(e,t,n){s.pointStyle(e.selectAll("path"),t,n),m(e,t,n)}function m(e,n,r){e.selectAll("text").each(function(e){var t=o.select(this),e=l.ensureUniformFontSize(r,g(t,e,n,r));s.font(t,e)})}function g(e,t,n,r){var a=r._fullLayout.font,i=n.textfont;return e.classed("bartext-inside")?(r=_(t,n),i=v(n,t.i,a,r)):e.classed("bartext-outside")&&(i=x(n,t.i,a)),i}function y(e,t,n){return b(u,e.textfont,t,n)}function v(e,t,n,r){n=y(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(n={color:a.contrast(r),family:n.family,size:n.size}),b(d,e.insidetextfont,t,n)}function x(e,t,n){n=y(e,t,n);return b(f,e.outsidetextfont,t,n)}function b(e,t,n,r){var a=p.getValue((t=t||{}).family,n),i=p.getValue(t.size,n),n=p.getValue(t.color,n);return{family:p.coerceString(e.family,a,r.family),size:p.coerceNumber(e.size,i,r.size),color:p.coerceColor(e.color,n,r.color)}}function _(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}t.exports={style:function(t){var e=o.select(t).selectAll("g.barlayer").selectAll("g.trace");i(t,e,"bar");var n=e.size(),r=t._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!e[0].trace.marker.line.width)&&o.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){h(o.select(this),e[0].trace,t)}),c.getComponentMethod("errorbars","style")(e)},styleTextPoints:m,styleOnSelect:function(e,t,n){var r,a,i=t[0].trace;i.selectedpoints?(r=n,a=i,t=e,s.selectedPointStyle(r.selectAll("path"),a),function(e,r,a){e.each(function(e){var t,n=o.select(this);e.selected?(t=l.ensureUniformFontSize(a,g(n,e,r,a)),(e=r.selected.textfont&&r.selected.textfont.color)&&(t.color=e),s.font(n,t)):s.selectedTextStyle(n,r)})}(r.selectAll("text"),a,t)):(h(n,i,e),c.getComponentMethod("errorbars","style")(n))},getInsideTextFont:v,getOutsideTextFont:x,getBarColor:_,resizeText:i}},{"../../components/color":155,"../../components/drawing":177,"../../lib":285,"../../registry":373,"./attributes":383,"./helpers":389,"./uniform_text":399,"@plotly/d3":20}],398:[function(e,t,n){"use strict";var o=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("../../lib").coercePattern;t.exports=function(e,t,n,r,a){var i=n("marker.color",r),r=s(e,"marker");r&&l(e,t,a,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",o.defaultLine),s(e,"marker.line")&&l(e,t,a,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),c(n,"marker.pattern",i,r),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],399:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../lib");function i(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:function(e,t,n){var r,a;n.uniformtext.mode&&(r=i(e),a=n.uniformtext.minsize,e=t.scale*t.fontSize,t.hide=e<a,n[r]=n[r]||1/0,t.hide||(n[r]=Math.min(n[r],Math.max(e,a))))},clearMinTextSize:function(e,t){t[i(e)]=void 0},resizeText:function(e,t,n){var r=(e=e._fullLayout)["_"+n+"Text_minsize"];if(r){var a,i="hide"===e.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}t.selectAll(a).each(function(e){e=e.transform;e&&(e.scale=i&&e.hide?0:r/e.fontSize,o.select(this).select("text").attr("transform",s.getTextTransform(e)))})}}}},{"../../lib":285,"@plotly/d3":20}],400:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../bar/attributes"),i=e("../../components/color/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../lib/extend").extendFlat,c=r.marker,e=c.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:l({},c.symbol,{arrayOk:!1,editType:"plot"}),opacity:l({},c.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:l({},c.size,{arrayOk:!1,editType:"calc"}),color:l({},c.color,{arrayOk:!1,editType:"style"}),line:{color:l({},e.color,{arrayOk:!1,dflt:i.defaultLine,editType:"style"}),width:l({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:r.selected.marker,editType:"style"},unselected:{marker:r.unselected.marker,editType:"style"},text:l({},r.text,{}),hovertext:l({},r.hovertext,{}),hovertemplate:s({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"../scatter/attributes":494}],401:[function(e,t,n){"use strict";var q=e("fast-isnumeric"),U=e("../../plots/cartesian/axes"),Y=e("../../plots/cartesian/align_period"),V=e("../../lib"),G=e("../../constants/numerical").BADNUM,W=V._;t.exports=function(e,t){var n,r,a,i,o,s,l,c,u=e._fullLayout,d=U.getFromId(e,t.xaxis||"x"),f=U.getFromId(e,t.yaxis||"y"),p=[],h="violin"===t.type?"_numViolins":"_numBoxes",m="h"===t.orientation?(r=d,a="x",x=f,i="y",!!t.yperiodalignment):(r=f,a="y",x=d,i="x",!!t.xperiodalignment),d=function(e,t,n,r){var a=t in e,i=t+"0"in e,o="d"+t in e;if(a||i&&o){o=n.makeCalcdata(e,t);return[Y(e,n,t,o),o]}r=i?e[t+"0"]:"name"in e&&("category"===n.type||q(e.name)&&-1!==["linear","log"].indexOf(n.type)||V.isDateTime(e.name)&&"date"===n.type)?e.name:r;for(var s="multicategory"===n.type?n.r2c_just_indices(r):n.d2c(r,0,e[t+"calendar"]),l=e._length,c=new Array(l),u=0;u<l;u++)c[u]=s;return[c]}(t,i,x,u[h]),g=d[0],y=d[1],d=V.distinctVals(g,x),v=d.vals,x=d.minDiff/2,b="all"===(t.boxpoints||t.points)?V.identity:function(e){return e.v<N.lf||e.v>N.uf};if(t._hasPreCompStats){for(var _=t[a],w=function(e){return r.d2c((t[e]||[])[k])},T=1/0,M=-1/0,k=0;k<t._length;k++){var A,S=g[k];if(q(S)){if((N={}).pos=N[i]=S,m&&y&&(N.orig_p=y[k]),N.q1=w("q1"),N.med=w("median"),N.q3=w("q3"),o=[],_&&V.isArrayOrTypedArray(_[k]))for(n=0;n<_[k].length;n++)(P=r.d2c(_[k][n]))!==G&&(Z(c={v:P,i:[k,n]},t,[k,n]),o.push(c));N.pts=o.sort($),l=(s=N[a]=o.map(X)).length,N.med!==G&&N.q1!==G&&N.q3!==G&&N.med>=N.q1&&N.q3>=N.med?(A=w("lowerfence"),N.lf=A!==G&&A<=N.q1?A:J(N,s,l),S=w("upperfence"),N.uf=S!==G&&S>=N.q3?S:K(N,s,l),A=w("mean"),N.mean=A!==G?A:l?V.mean(s,l):(N.q1+N.q3)/2,S=w("sd"),N.sd=A!==G&&0<=S?S:l?V.stdev(s,l,N.mean):N.q3-N.q1,N.lo=Q(N),N.uo=ee(N),A=(A=w("notchspan"))!==G&&0<A?A:te(N,l),N.ln=N.med-A,N.un=N.med+A,S=N.lf,A=N.uf,t.boxpoints&&s.length&&(S=Math.min(S,s[0]),A=Math.max(A,s[l-1])),t.notched&&(S=Math.min(S,N.ln),A=Math.max(A,N.un)),N.min=S,N.max=A):(V.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+N.q1,"median = "+N.med,"q3 = "+N.q3].join("\n")),A=N.med!==G?N.med:N.q1!==G?N.q3!==G?(N.q1+N.q3)/2:N.q1:N.q3!==G?N.q3:0,N.med=A,N.q1=N.q3=A,N.lf=N.uf=A,N.mean=N.sd=A,N.ln=N.un=A,N.min=N.max=A),T=Math.min(T,N.min),M=Math.max(M,N.max),N.pts2=o.filter(b),p.push(N)}}t._extremes[r._id]=U.findExtremes(r,[T,M],{padded:!0})}else{var E=r.makeCalcdata(t,a),L=function(e,t){for(var n=e.length,r=new Array(n+1),a=0;a<n;a++)r[a]=e[a]-t;return r[n]=e[n-1]+t,r}(v,x),C=v.length,D=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}(C);for(k=0;k<t._length;k++){var O,P=E[k];!q(P)||0<=(O=V.findBin(g[k],L))&&O<C&&(Z(c={v:P,i:k},t,k),D[O].push(c))}var I,R,N,z,F=1/0,j=-1/0,d=t.quartilemethod,H="exclusive"===d,B="inclusive"===d;for(k=0;k<C;k++)0<D[k].length&&((N={}).pos=N[i]=v[k],o=N.pts=D[k].sort($),l=(s=N[a]=o.map(X)).length,N.min=s[0],N.max=s[l-1],N.mean=V.mean(s,l),N.sd=V.stdev(s,l,N.mean),N.med=V.interp(s,.5),l%2&&(H||B)?(H?(I=s.slice(0,l/2),R=s.slice(l/2+1)):B&&(I=s.slice(0,l/2+1),R=s.slice(l/2)),N.q1=V.interp(I,.5),N.q3=V.interp(R,.5)):(N.q1=V.interp(s,.25),N.q3=V.interp(s,.75)),N.lf=J(N,s,l),N.uf=K(N,s,l),N.lo=Q(N),N.uo=ee(N),z=te(N,l),N.ln=N.med-z,N.un=N.med+z,F=Math.min(F,N.ln),j=Math.max(j,N.un),N.pts2=o.filter(b),p.push(N));t._extremes[r._id]=U.findExtremes(r,t.notched?E.concat([F,j]):E,{padded:!0})}return function(e,t){if(V.isArrayOrTypedArray(t.selectedpoints))for(var n=0;n<e.length;n++){for(var r=e[n].pts||[],a={},i=0;i<r.length;i++)a[r[i].i]=i;V.tagSelected(r,t,a)}}(p,t),0<p.length?(p[0].t={num:u[h],dPos:x,posLetter:i,valLetter:a,labels:{med:W(e,"median:"),min:W(e,"min:"),q1:W(e,"q1:"),q3:W(e,"q3:"),max:W(e,"max:"),mean:"sd"===t.boxmean?W(e,"mean  :"):W(e,"mean:"),lf:W(e,"lower fence:"),uf:W(e,"upper fence:")}},u[h]++,p):[{t:{empty:!0}}]};var a={text:"tx",hovertext:"htx"};function Z(e,t,n){for(var r in a)V.isArrayOrTypedArray(t[r])&&(Array.isArray(n)?V.isArrayOrTypedArray(t[r][n[0]])&&(e[a[r]]=t[r][n[0]][n[1]]):e[a[r]]=t[r][n])}function $(e,t){return e.v-t.v}function X(e){return e.v}function J(e,t,n){return 0===n?e.q1:Math.min(e.q1,t[Math.min(V.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,n-1)])}function K(e,t,n){return 0===n?e.q3:Math.max(e.q3,t[Math.max(V.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function Q(e){return 4*e.q1-3*e.q3}function ee(e){return 4*e.q3-3*e.q1}function te(e,t){return 0===t?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"fast-isnumeric":31}],402:[function(e,t,n){"use strict";var F=e("../../plots/cartesian/axes"),j=e("../../lib"),H=e("../../plots/cartesian/constraints").getAxisGroup,f=["v","h"];function p(e,t,n,r){var a=t.calcdata,i=t._fullLayout,o=r._id,s=o.charAt(0),l=[],c=0;for(m=0;m<n.length;m++)for(g=a[n[m]],z=0;z<g.length;z++)l.push(r.c2l(g[z].pos,!0)),c+=(g[z].pts2||[]).length;if(l.length){t=j.distinctVals(l);"category"!==r.type&&"multicategory"!==r.type||(t.minDiff=1);var u=t.minDiff/2;F.minDtick(r,t.minDiff,t.vals[0],!0);for(var d=i["violin"===e?"_numViolins":"_numBoxes"],f="group"===i[e+"mode"]&&1<d,p=1-i[e+"gap"],h=1-i[e+"groupgap"],m=0;m<n.length;m++){var g,y,v,x,b,_,w,T=(g=a[n[m]])[0].trace,M=g[0].t,k=T.width,A=T.side;k?(b=y=x=k/2,v=0):(b=u,x=f?(P=H(i,r._id)+T.orientation,I=(i._alignmentOpts[P]||{})[T.alignmentgroup]||{},y=b*p*h/(P=(R=Object.keys(I.offsetGroups||{}).length)||d),v=2*b*(((R?T._offsetIndex:M.num)+.5)/P-.5)*p,b*p/P):(y=b*p*h,v=0,b)),M.dPos=b,M.bPos=v,M.bdPos=y,M.wHover=x;var S,E,L,C,D,O,P,I=v+y,R=Boolean(k);"positive"===A?(_=b*(k?1:.5),S=I,w=S=v):"negative"===A?(_=S=v,w=b*(k?1:.5),E=I):(_=w=b,S=E=I),(T.boxpoints||T.points)&&0<c?(P=T.pointpos,M=T.jitter,A=T.marker.size/2,(k=0)<=P+M&&(_<(k=I*(P+M))?(R=!0,D=A,L=k):S<k&&(D=A,L=_)),k<=_&&(L=_),P-M<=(k=0)&&(w<(k=-I*(P-M))?(R=!0,O=A,C=k):E<k&&(O=A,C=w)),k<=w&&(C=w)):(L=_,C=w);for(var N=new Array(g.length),z=0;z<g.length;z++)N[z]=g[z].pos;T._extremes[o]=F.findExtremes(r,N,{padded:R,vpadminus:C,vpadplus:L,vpadLinearized:!0,ppadminus:{x:O,y:D}[s],ppadplus:{x:D,y:O}[s]})}}}t.exports={crossTraceCalc:function(e,t){for(var n=e.calcdata,r=t.xaxis,a=t.yaxis,i=0;i<f.length;i++){for(var o=f[i],s="h"===o?a:r,l=[],c=0;c<n.length;c++){var u=n[c],d=u[0].t,u=u[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||d.empty||(u.orientation||"v")!==o||u.xaxis!==r._id||u.yaxis!==a._id||l.push(c)}p("box",e,l,s)}},setPositionOffset:p}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339}],403:[function(e,t,n){"use strict";var _=e("../../lib"),w=e("../../registry"),s=e("../../components/color"),l=e("../scatter/period_defaults"),c=e("../bar/defaults").handleGroupingDefaults,T=e("../../plots/cartesian/axis_autotype"),M=e("./attributes");function u(t,e,n,r){function a(e){var t=0;return e&&e.length&&(t+=1,_.isArrayOrTypedArray(e[0])&&e[0].length&&(t+=1)),t}function i(e){return _.validate(t[e],M[e])}var o,s=n("y"),l=n("x");"box"===e.type&&(u=n("q1"),d=n("median"),c=n("q3"),e._hasPreCompStats=u&&u.length&&d&&d.length&&c&&c.length,o=Math.min(_.minRowLength(u),_.minRowLength(d),_.minRowLength(c)));var c,u=a(s),d=a(l),f=u&&_.minRowLength(s),p=d&&_.minRowLength(l),h=r.calendar,m={autotypenumbers:r.autotypenumbers};if(e._hasPreCompStats)switch(String(d)+String(u)){case"00":var g=i("x0")||i("dx"),y=(i("y0")||i("dy"))&&!g?"h":"v",v=o;break;case"10":y="v",v=Math.min(o,p);break;case"20":y="h",v=Math.min(o,l.length);break;case"01":y="h",v=Math.min(o,f);break;case"02":y="v",v=Math.min(o,s.length);break;case"12":y="v",v=Math.min(o,p,s.length);break;case"21":y="h",v=Math.min(o,l.length,f);break;case"11":v=0;break;case"22":for(var x=!1,b=0;b<l.length;b++)if("category"===T(l[b],h,m)){x=!0;break}if(x)y="v",v=Math.min(o,p,s.length);else{for(b=0;b<s.length;b++)if("category"===T(s[b],h,m)){x=!0;break}v=x?(y="h",Math.min(o,l.length,f)):(y="v",Math.min(o,p,s.length))}}else v=0<u?(y="v",0<d?Math.min(p,f):Math.min(f)):0<d?(y="h",Math.min(p)):0;v?(e._length=v,c=n("orientation",y),e._hasPreCompStats?"v"===c&&0===d?(n("x0",0),n("dx",1)):"h"===c&&0===u&&(n("y0",0),n("dy",1)):"v"===c&&0===d?n("x0"):"h"===c&&0===u&&n("y0"),w.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r)):e.visible=!1}function d(e,t,n,r){var a=r.prefix,i=_.coerce2(e,t,M,"marker.outliercolor"),r=n("marker.line.outliercolor"),e="outliers";t._hasPreCompStats?e="all":(i||r)&&(e="suspectedoutliers");e=n(a+"points",e);e?(n("jitter","all"===e?.3:0),n("pointpos","all"===e?-1.5:0),n("marker.symbol"),n("marker.opacity"),n("marker.size"),n("marker.color",t.line.color),n("marker.line.color"),n("marker.line.width"),"suspectedoutliers"===e&&(n("marker.line.outliercolor",t.marker.color),n("marker.line.outlierwidth")),n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"),n("text"),n("hovertext")):delete t.marker;e=n("hoveron");"all"!==e&&-1===e.indexOf("points")||n("hovertemplate"),_.coerceSelectionMarkerOpacity(t,n)}t.exports={supplyDefaults:function(n,r,e,t){function a(e,t){return _.coerce(n,r,M,e,t)}var i,o;u(n,r,a,t),!1!==r.visible&&(l(n,r,t,a),a("xhoverformat"),a("yhoverformat"),(o=r._hasPreCompStats)&&(a("lowerfence"),a("upperfence")),a("line.color",(n.marker||{}).color||e),a("line.width"),a("fillcolor",s.addOpacity(r.line.color,.5)),i=!1,o&&(t=a("mean"),e=a("sd"),t&&t.length&&(i=!0,e&&e.length&&(i="sd"))),a("boxmean",i),a("whiskerwidth"),a("width"),a("quartilemethod"),i=!1,o?(o=a("notchspan"))&&o.length&&(i=!0):_.validate(n.notchwidth,M.notchwidth)&&(i=!0),a("notched",i)&&a("notchwidth"),d(n,r,a,{prefix:"box"}))},crossTraceDefaults:function(e,t){var n;function r(e){return _.coerce(i._input,i,M,e)}for(var a=0;a<e.length;a++){var i,o=(i=e[a]).type;"box"!==o&&"violin"!==o||(n=i._input,"group"===t[o+"mode"]&&c(n,i,t,r))}},handleSampleDefaults:u,handlePointsDefaults:d}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/axis_autotype":332,"../../registry":373,"../bar/defaults":387,"../scatter/period_defaults":514,"./attributes":400}],404:[function(e,t,n){"use strict";t.exports=function(e,t){return t.hoverOnBox&&(e.hoverOnBox=t.hoverOnBox),"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},{}],405:[function(e,t,n){"use strict";var N=e("../../plots/cartesian/axes"),z=e("../../lib"),F=e("../../components/fx"),j=e("../../components/color"),v=z.fillText;function s(e,t,n,r){function a(e){return s.c2l(e.pos)+x.bPos-s.c2l(c)}var i,o,s,l,c,u,d,f,p,h,m=e.cd,g=e.xa,y=e.ya,v=m[0].trace,x=m[0].t,b="violin"===v.type,_=[],w=x.bdPos,T=x.wHover;b&&"both"!==v.side?("positive"===v.side&&(f=function(e){e=a(e);return F.inbox(e,e+T,A)},p=w,h=0),"negative"===v.side&&(f=function(e){e=a(e);return F.inbox(e-T,e,A)},p=0,h=w)):(f=function(e){e=a(e);return F.inbox(e-T,e+T,A)},p=h=w);var b=b?function(e){return F.inbox(e.span[0]-l,e.span[1]-l,A)}:function(e){return F.inbox(e.min-l,e.max-l,A)},M="h"===v.orientation?(l=t,c=n,u=b,d=f,i="y",s=y,o="x",g):(l=n,c=t,u=f,d=b,i="x",s=g,o="y",y),w=Math.min(1,w/Math.abs(s.r2c(s.range[1])-s.r2c(s.range[0])));function k(e){return(u(e)+d(e))/2}var A=e.maxHoverDistance-w,w=e.maxSpikeDistance-w,r=F.getDistanceFunction(r,u,d,k);if(F.getClosest(m,r,e),!1===e.index)return[];var S=m[e.index],r=v.line.color,m=(v.marker||{}).color;j.opacity(r)&&v.line.width?e.color=r:j.opacity(m)&&v.boxpoints?e.color=m:e.color=v.fillcolor,e[i+"0"]=s.c2p(S.pos+x.bPos-h,!0),e[i+"1"]=s.c2p(S.pos+x.bPos+p,!0),e[i+"LabelVal"]=void 0!==S.orig_p?S.orig_p:S.pos;var E=i+"Spike";e.spikeDistance=k(S)*w/A,e[E]=s.c2p(S.pos,!0);var L={},C=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&C.push("mean"),(v.boxpoints||v.points)&&C.push("lf","uf");for(var D=0;D<C.length;D++){var O,P,I,R=C[D];R in S&&!(S[R]in L)&&(L[S[R]]=!0,O=S[R],P=M.c2p(O,!0),(I=z.extendFlat({},e)).attr=R,I[o+"0"]=I[o+"1"]=P,I[o+"LabelVal"]=O,I[o+"Label"]=(x.labels?x.labels[R]+" ":"")+N.hoverLabelText(M,O,v[o+"hoverformat"]),I.hoverOnBox=!0,"mean"===R&&"sd"in S&&"sd"===v.boxmean&&(I[o+"err"]=S.sd),e.name="",e.spikeDistance=void 0,e[E]=void 0,I.hovertemplate=!1,_.push(I))}return _}function l(e,t,n){for(var r=e.cd,a=e.xa,i=e.ya,o=r[0].trace,s=a.c2p(t),l=i.c2p(n),c=F.quadrature(function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(a.c2p(e.x)-s)-t,1-3/t)},function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(i.c2p(e.y)-l)-t,1-3/t)}),u=!1,d=0;d<r.length;d++)for(var f=r[d],p=0;p<(f.pts||[]).length;p++){var h,m=c(h=f.pts[p]);m<=e.distance&&(e.distance=m,u=[d,p])}if(!u)return!1;h=(f=r[u[0]]).pts[u[1]];var g,y=a.c2p(h.x,!0),t=i.c2p(h.y,!0),n=h.mrc||1,t=z.extendFlat({},e,{index:h.i,color:(o.marker||{}).color,name:o.name,x0:y-n,x1:y+n,y0:t-n,y1:t+n,spikeDistance:e.distance,hovertemplate:o.hovertemplate}),n=f.orig_p,n=void 0!==n?n:f.pos;return"h"===o.orientation?(g=i,t.xLabelVal=h.x,t.yLabelVal=n):(g=a,t.xLabelVal=n,t.yLabelVal=h.y),t[g._id.charAt(0)+"Spike"]=g.c2p(f.pos,!0),v(h,o,t),t}t.exports={hoverPoints:function(e,t,n,r){var a,i=e.cd[0].trace.hoveron,o=[];return-1!==i.indexOf("boxes")&&(o=o.concat(s(e,t,n,r))),-1!==i.indexOf("points")&&(a=l(e,t,n)),"closest"===r?a?[a]:o:(a&&o.push(a),o)},hoverOnBoxes:s,hoverOnPoints:l}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],406:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./attributes":400,"./calc":401,"./cross_trace_calc":402,"./defaults":403,"./event_data":404,"./hover":405,"./layout_attributes":407,"./layout_defaults":408,"./plot":409,"./select":410,"./style":411}],407:[function(e,t,n){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],408:[function(e,t,n){"use strict";var c=e("../../registry"),a=e("../../lib"),i=e("./layout_attributes");function o(e,t,n,r,a){for(var i=a+"Layout",o=!1,s=0;s<n.length;s++){var l=n[s];if(c.traceIs(l,i)){o=!0;break}}o&&(r(a+"mode"),r(a+"gap"),r(a+"groupgap"))}t.exports={supplyLayoutDefaults:function(n,r,e){o(0,0,e,function(e,t){return a.coerce(n,r,i,e,t)},"box")},_supply:o}},{"../../lib":285,"../../registry":373,"./layout_attributes":407}],409:[function(e,t,n){"use strict";var S=e("@plotly/d3"),E=e("../../lib"),a=e("../../components/drawing"),b=5,_=.01;function s(e,t,h,n){var m,g="h"===h.orientation,y=t.val,v=t.pos,x=!!v.rangebreaks,b=n.bPos,_=n.wdPos||0,w=n.bPosPxOffset||0,T=h.whiskerwidth||0,M=h.notched||!1,k=M?1-2*h.notchwidth:1,A=Array.isArray(n.bdPos)?(m=n.bdPos[0],n.bdPos[1]):(m=n.bdPos,n.bdPos),e=e.selectAll("path.box").data("violin"!==h.type||h.box.visible?E.identity:[]);e.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),e.exit().remove(),e.each(function(e){if(e.empty)return"M0,0Z";var t=v.c2l(e.pos+b,!0),n=v.l2p(t-m)+w,r=v.l2p(t+A)+w,a=x?(n+r)/2:v.l2p(t)+w,i=h.whiskerwidth,o=x?n*i+(1-i)*a:v.l2p(t-_)+w,s=x?r*i+(1-i)*a:v.l2p(t+_)+w,l=v.l2p(t-m*k)+w,c=v.l2p(t+A*k)+w,u=y.c2p(e.q1,!0),d=y.c2p(e.q3,!0),f=E.constrain(y.c2p(e.med,!0),Math.min(u,d)+1,Math.max(u,d)-1),p=void 0===e.lf||!1===h.boxpoints,i=y.c2p(p?e.min:e.lf,!0),t=y.c2p(p?e.max:e.uf,!0),p=y.c2p(e.ln,!0),e=y.c2p(e.un,!0);g?S.select(this).attr("d","M"+f+","+l+"V"+c+"M"+u+","+n+"V"+r+(M?"H"+p+"L"+f+","+c+"L"+e+","+r:"")+"H"+d+"V"+n+(M?"H"+e+"L"+f+","+l+"L"+p+","+n:"")+"ZM"+u+","+a+"H"+i+"M"+d+","+a+"H"+t+(0===T?"":"M"+i+","+o+"V"+s+"M"+t+","+o+"V"+s)):S.select(this).attr("d","M"+l+","+f+"H"+c+"M"+n+","+u+"H"+r+(M?"V"+p+"L"+c+","+f+"L"+r+","+e:"")+"V"+d+"H"+n+(M?"V"+e+"L"+l+","+f+"L"+n+","+p:"")+"ZM"+a+","+u+"V"+i+"M"+a+","+d+"V"+t+(0===T?"":"M"+o+","+i+"H"+s+"M"+o+","+t+"H"+s))})}function l(e,t,g,n){var r=t.x,t=t.y,y=n.bdPos,v=n.bPos,x=g.boxpoints||g.points;E.seedPseudoRandom();e=e.selectAll("g.points").data(x?function(e){return e.forEach(function(e){e.t=n,e.trace=g}),e}:[]);e.enter().append("g").attr("class","points"),e.exit().remove();e=e.selectAll("path").data(function(e){var t,n,r=e.pts2,a=Math.max((e.max-e.min)/10,e.q3-e.q1),i=1e-9*a,o=a*_,s=[],l=0;if(g.jitter){if(0===a)for(l=1,s=new Array(r.length),t=0;t<r.length;t++)s[t]=1;else for(t=0;t<r.length;t++){var c=Math.max(0,t-b),u=r[c].v,d=Math.min(r.length-1,t+b),f=r[d].v;"all"!==x&&(r[t].v<e.lf?f=Math.min(f,e.lf):u=Math.max(u,e.uf));u=Math.sqrt(o*(d-c)/(f-u+i))||0,u=E.constrain(Math.abs(u),0,1);s.push(u),l=Math.max(u,l)}n=2*g.jitter/(l||1)}for(t=0;t<r.length;t++){var p=r[t],h=p.v,m=g.jitter?n*s[t]*(E.pseudoRandom()-.5):0,m=e.pos+v+y*(g.pointpos+m);"h"===g.orientation?(p.y=m,p.x=h):(p.x=m,p.y=h),"suspectedoutliers"===x&&h<e.uo&&h>e.lo&&(p.so=!0)}return r});e.enter().append("path").classed("point",!0),e.exit().remove(),e.call(a.translatePoints,r,t)}function c(e,t,o,n){var s,l=t.val,c=t.pos,u=!!c.rangebreaks,d=n.bPos,f=n.bPosPxOffset||0,p=o.boxmean||(o.meanline||{}).visible,h=Array.isArray(n.bdPos)?(s=n.bdPos[0],n.bdPos[1]):(s=n.bdPos,n.bdPos),e=e.selectAll("path.mean").data("box"===o.type&&o.boxmean||"violin"===o.type&&o.box.visible&&o.meanline.visible?E.identity:[]);e.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),e.exit().remove(),e.each(function(e){var t=c.c2l(e.pos+d,!0),n=c.l2p(t-s)+f,r=c.l2p(t+h)+f,a=u?(n+r)/2:c.l2p(t)+f,i=l.c2p(e.mean,!0),t=l.c2p(e.mean-e.sd,!0),e=l.c2p(e.mean+e.sd,!0);"h"===o.orientation?S.select(this).attr("d","M"+i+","+n+"V"+r+("sd"===p?"m0,0L"+t+","+a+"L"+i+","+n+"L"+e+","+a+"Z":"")):S.select(this).attr("d","M"+n+","+i+"H"+r+("sd"===p?"m0,0L"+a+","+t+"L"+n+","+i+"L"+a+","+e+"Z":""))})}t.exports={plot:function(e,t,n,r){var i=t.xaxis,o=t.yaxis;E.makeTraceGroups(r,n,"trace boxes").each(function(e){var t,n=S.select(this),r=e[0],a=r.t,e=r.trace;a.wdPos=a.bdPos*e.whiskerwidth,!0!==e.visible||a.empty?n.remove():(r="h"===e.orientation?(t=o,i):(t=i,o),s(n,{pos:t,val:r},e,a),l(n,{x:i,y:o},e,a),c(n,{pos:t,val:r},e,a))})},plotBoxAndWhiskers:s,plotPoints:l,plotBoxMean:c}},{"../../components/drawing":177,"../../lib":285,"@plotly/d3":20}],410:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a=e.cd,i=e.xaxis,o=e.yaxis,s=[];if(!1===t)for(n=0;n<a.length;n++)for(r=0;r<(a[n].pts||[]).length;r++)a[n].pts[r].selected=0;else for(n=0;n<a.length;n++)for(r=0;r<(a[n].pts||[]).length;r++){var l=a[n].pts[r],c=i.c2p(l.x),u=o.c2p(l.y);t.contains([c,u],null,l.i,e)?(s.push({pointNumber:l.i,x:i.c2d(l.x),y:o.c2d(l.y)}),l.selected=1):l.selected=0}return s}},{}],411:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../components/color"),l=e("../../components/drawing");t.exports={style:function(i,e,t){(t=t||o.select(i).selectAll("g.trace.boxes")).style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t=o.select(this),r=e[0].trace,n=r.line.width;function a(e,t,n,r){e.style("stroke-width",t+"px").call(s.stroke,n).call(s.fill,r)}e=t.selectAll("path.box");"candlestick"===r.type?e.each(function(e){var t,n;e.empty||(a(t=o.select(this),(n=r[e.dir]).line.width,n.line.color,n.fillcolor),t.style("opacity",r.selectedpoints&&!e.selected?.3:1))}):(a(e,n,r.line.color,r.fillcolor),t.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(s.stroke,r.line.color),t=t.selectAll("path.point"),l.pointStyle(t,r,i))})},styleOnSelect:function(e,t,n){t=t[0].trace,n=n.selectAll("path.point"),t.selectedpoints?l.selectedPointStyle(n,t):l.pointStyle(n,t,e)}}},{"../../components/color":155,"../../components/drawing":177,"@plotly/d3":20}],412:[function(e,t,n){"use strict";var r=e("../heatmap/attributes"),a=e("../scatter/attributes"),i=e("../../plots/cartesian/axis_format_attributes"),o=i.axisHoverFormat,s=i.descriptionOnlyNumbers,l=e("../../components/colorscale/attributes"),c=e("../../components/drawing/attributes").dash,u=e("../../plots/font_attributes"),d=e("../../lib/extend").extendFlat,f=e("../../constants/filter_ops"),i=f.COMPARISON_OPS2,e=f.INTERVAL_OPS,f=a.line;t.exports=d({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:r.hovertemplate,hoverongaps:r.hoverongaps,connectgaps:d({},r.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:u({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:s("contour label")},operation:{valType:"enumerated",values:[].concat(i).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:d({},f.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:d({},f.smoothing,{}),editType:"plot"}},l("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../constants/filter_ops":263,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../heatmap/attributes":434,"../scatter/attributes":494}],413:[function(e,t,n){"use strict";var s=e("../../components/colorscale"),l=e("../heatmap/calc"),c=e("./set_contours"),u=e("./end_plus");t.exports=function(e,t){var n=l(e,t),r=n[0].z;c(t,r);var a,i=t.contours,o=s.extractOpts(t);return r="heatmap"===i.coloring&&o.auto&&!1===t.autocontour?(a=i.start,o=u(i),i=i.size||1,o=Math.floor((o-a)/i)+1,isFinite(i)||(o=i=1),[a=a-i/2,a+o*i]):r,s.calc(e,t,{vals:r,cLetter:"z"}),n}},{"../../components/colorscale":167,"../heatmap/calc":435,"./end_plus":423,"./set_contours":431}],414:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e[0],r=n.z;switch(t.type){case"levels":for(var a=Math.min(r[0][0],r[0][1]),i=0;i<e.length;i++){var o=e[i];o.prefixBoundary=!o.edgepaths.length&&(a>o.level||o.starts.length&&a===o.level)}break;case"constraint":if(n.prefixBoundary=!1,n.edgepaths.length)return;var s=n.x.length,l=n.y.length,c=-1/0,u=1/0;for(i=0;i<l;i++)u=Math.min(u,r[i][0]),u=Math.min(u,r[i][s-1]),c=Math.max(c,r[i][0]),c=Math.max(c,r[i][s-1]);for(i=1;i<s-1;i++)u=Math.min(u,r[0][i]),u=Math.min(u,r[l-1][i]),c=Math.max(c,r[0][i]),c=Math.max(c,r[l-1][i]);var d,f,p=t.value;switch(t._operation){case">":c<p&&(n.prefixBoundary=!0);break;case"<":(p<u||n.starts.length&&p===u)&&(n.prefixBoundary=!0);break;case"[]":d=Math.min(p[0],p[1]),((f=Math.max(p[0],p[1]))<u||c<d||n.starts.length&&f===u)&&(n.prefixBoundary=!0);break;case"][":d=Math.min(p[0],p[1]),f=Math.max(p[0],p[1]),d<u&&c<f&&(n.prefixBoundary=!0)}}}},{}],415:[function(e,t,n){"use strict";var l=e("../../components/colorscale"),c=e("./make_color_map"),u=e("./end_plus");t.exports={min:"zmin",max:"zmax",calc:function(e,t,n){var r=t.contours,a=t.line,i=r.size||1,o=r.coloring,s=c(t,{isColorbar:!0});"heatmap"===o?(t=l.extractOpts(t),n._fillgradient=t.reversescale?l.flipScale(t.colorscale):t.colorscale,n._zrange=[t.min,t.max]):"fill"===o&&(n._fillcolor=s),n._line={color:"lines"===o?s:a.color,width:!1!==r.showlines?a.width:0,dash:a.dash},n._levels={start:r.start,end:u(r),size:i}}}},{"../../components/colorscale":167,"./end_plus":423,"./make_color_map":428}],416:[function(e,t,n){"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],417:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),m=e("./label_defaults"),r=e("../../components/color"),g=r.addOpacity,y=r.opacity,e=e("../../constants/filter_ops"),v=e.CONSTRAINT_REDUCTION,x=e.COMPARISON_OPS2;t.exports=function(e,t,n,r,a,i){var o,s,l,c,u,d,f=t.contours,p=n("contours.operation");f._operation=v[p],l=n,c=f,-1===x.indexOf(c.operation)?(l("contours.value",[0,1]),Array.isArray(c.value)?2<c.value.length?c.value=c.value.slice(2):0===c.length?c.value=[0,1]:c.length<2?(u=parseFloat(c.value[0]),c.value=[u,u+1]):c.value=[parseFloat(c.value[0]),parseFloat(c.value[1])]:h(c.value)&&(u=parseFloat(c.value),c.value=[u,u+1])):(l("contours.value",0),h(c.value)||(Array.isArray(c.value)?c.value=parseFloat(c.value[0]):c.value=0)),"="===p?o=f.showlines=!0:(o=n("contours.showlines"),s=n("fillcolor",g((e.line||{}).color||a,.5))),o&&(d=n("line.color",s&&y(s)?g(t.fillcolor,1):a),n("line.width",2),n("line.dash")),n("line.smoothing"),m(n,r,d,i)}},{"../../components/color":155,"../../constants/filter_ops":263,"./label_defaults":427,"fast-isnumeric":31}],418:[function(e,t,n){"use strict";var i=e("../../constants/filter_ops"),o=e("fast-isnumeric");function r(e,t){var n,r=Array.isArray(t);function a(e){return o(e)?+e:null}return-1!==i.COMPARISON_OPS2.indexOf(e)?n=a(r?t[0]:t):-1!==i.INTERVAL_OPS.indexOf(e)?n=r?[a(t[0]),a(t[1])]:[a(t),a(t)]:-1!==i.SET_OPS.indexOf(e)&&(n=r?t.map(a):[a(t)]),n}function a(n){return function(e){e=r(n,e);var t=Math.min(e[0],e[1]),e=Math.max(e[0],e[1]);return{start:t,end:e,size:e-t}}}function s(t){return function(e){return{start:e=r(t,e),end:1/0,size:1/0}}}t.exports={"[]":a("[]"),"][":a("]["),">":s(">"),"<":s("<"),"=":s("=")}},{"../../constants/filter_ops":263,"fast-isnumeric":31}],419:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a=r("contours.start"),r=r("contours.end"),a=!1===a||!1===r,r=n("contours.size"),t=a?t.autocontour=!0:n("autocontour",!1);!t&&r||n("ncontours")}},{}],420:[function(e,t,n){"use strict";var l=e("../../lib");function c(e){return l.extendFlat({},e,{edgepaths:l.extendDeep([],e.edgepaths),paths:l.extendDeep([],e.paths),starts:l.extendDeep([],e.starts)})}t.exports=function(e,t){var n,r,a,i=function(e){return e.reverse()},o=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&l.warn("Contour data invalid for the specified inequality operation."),r=e[0],n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=i(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=i(r.paths[n]);for(n=0;n<r.starts.length;n++)r.starts[n]=i(r.starts[n]);return e;case"][":var s=i,i=o,o=s;case"[]":for(2!==e.length&&l.warn("Contour data invalid for the specified inequality range operation."),r=c(e[0]),a=c(e[1]),n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=i(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=i(r.paths[n]);for(n=0;n<r.starts.length;n++)r.starts[n]=i(r.starts[n]);for(;a.edgepaths.length;)r.edgepaths.push(o(a.edgepaths.shift()));for(;a.paths.length;)r.paths.push(o(a.paths.shift()));for(;a.starts.length;)r.starts.push(o(a.starts.shift()));return[r]}}},{"../../lib":285}],421:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../heatmap/xyz_defaults"),l=e("../scatter/period_defaults"),c=e("./constraint_defaults"),u=e("./contours_defaults"),d=e("./style_defaults"),f=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return o.coerce(n,r,f,e,t)}var i;s(n,r,a,t)?(l(n,r,t,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),a("hoverongaps"),i="constraint"===a("contours.type"),a("connectgaps",o.isArray1D(r.z)),i?c(n,r,a,t,e):(u(n,r,a,function(e){return o.coerce2(n,r,f,e)}),d(n,r,a,t))):r.visible=!1}},{"../../lib":285,"../heatmap/xyz_defaults":448,"../scatter/period_defaults":514,"./attributes":412,"./constraint_defaults":417,"./contours_defaults":419,"./style_defaults":433}],422:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("./constraint_mapping"),f=e("./end_plus");t.exports=function(e,t,n){for(var r="constraint"===e.type?d[e._operation](e.value):e,a=r.size,i=[],o=f(r),s=n.trace._carpetTrace,l=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},c=r.start;c<o;c+=a)if(i.push(u.extendFlat({level:c,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},l)),1e3<i.length){u.warn("Too many contours, clipping at 1000",e);break}return i}},{"../../lib":285,"./constraint_mapping":418,"./end_plus":423}],423:[function(e,t,n){"use strict";t.exports=function(e){return e.end+e.size/1e6}},{}],424:[function(e,t,n){"use strict";var N=e("../../lib"),z=e("./constants");function F(e,t,n,r){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<r}function s(e,t,n,r,a){for(var i=t.join(","),o=e.crossings[i],s=function(e,t,n){var r=0,a=0;20<e&&t?208===e||1114===e?r=0===n[0]?1:-1:a=0===n[1]?1:-1:-1!==z.BOTTOMSTART.indexOf(e)?a=1:-1!==z.LEFTSTART.indexOf(e)?r=1:-1!==z.TOPSTART.indexOf(e)?a=-1:r=-1;return[r,a]}(o,n,t),l=[j(e,t,[-s[0],-s[1]])],c=e.z.length,u=e.z[0].length,d=t.slice(),f=s.slice(),p=0;p<1e4;p++){if(20<o?(o=z.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1],e.crossings[i]=z.SADDLEREMAINDER[o]):delete e.crossings[i],!(s=z.NEWDELTA[o])){N.log("Found bad marching index:",o,t,e.level);break}l.push(j(e,t,s)),t[0]+=s[0],t[1]+=s[1],i=t.join(","),F(l[l.length-1],l[l.length-2],r,a)&&l.pop();var h=s[0]&&(t[0]<0||t[0]>u-2)||s[1]&&(t[1]<0||t[1]>c-2);if(t[0]===d[0]&&t[1]===d[1]&&s[0]===f[0]&&s[1]===f[1]||n&&h)break;o=e.crossings[i]}1e4===p&&N.log("Infinite loop in contour?");var m,g,y,v,x,b,_,w,T,M,k=F(l[0],l[l.length-1],r,a),A=0,S=.2*e.smoothing,E=[],L=0;for(p=1;p<l.length;p++)w=l[p],T=l[p-1],M=void 0,M=w[2]-T[2],T=w[3]-T[3],A+=T=Math.sqrt(M*M+T*T),E.push(T);var C=A/E.length*S;function D(e){return l[e%l.length]}for(p=l.length-2;L<=p;p--)if((m=E[p])<C){for(y=0,g=p-1;L<=g&&m+E[g]<C;g--)m+=E[g];if(k&&p===l.length-2)for(y=0;y<g&&m+E[y]<C;y++)m+=E[y];v=p-g+y+1,x=Math.floor((p+g+y+2)/2),x=k||p!==l.length-2?k||-1!==g?v%2?D(x):[(D(x)[0]+D(x+1)[0])/2,(D(x)[1]+D(x+1)[1])/2]:l[0]:l[l.length-1],l.splice(g+1,p-g+1,x),p=g+1,y&&(L=y),k&&(p===l.length-2?l[y]=l[l.length-1]:0===p&&(l[l.length-1]=l[0]))}for(l.splice(0,L),p=0;p<l.length;p++)l[p].length=2;if(!(l.length<2))if(k)l.pop(),e.paths.push(l);else{n||N.log("Unclosed interior contour?",e.level,d.join(","),l.join("L"));for(var O=!1,P=0;P<e.edgepaths.length;P++)if(b=e.edgepaths[P],!O&&F(b[0],l[l.length-1],r,a)){l.pop();for(var O=!0,I=!1,R=0;R<e.edgepaths.length;R++)if(F((_=e.edgepaths[R])[_.length-1],l[0],r,a)){I=!0,l.shift(),e.edgepaths.splice(P,1),R===P?e.paths.push(l.concat(_)):(P<R&&R--,e.edgepaths[R]=_.concat(l,b));break}I||(e.edgepaths[P]=l.concat(b))}for(P=0;P<e.edgepaths.length&&!O;P++)F((b=e.edgepaths[P])[b.length-1],l[0],r,a)&&(l.shift(),e.edgepaths[P]=b.concat(l),O=!0);O||e.edgepaths.push(l)}}function j(e,t,n){var r=t[0]+Math.max(n[0],0),a=t[1]+Math.max(n[1],0),i=e.z[a][r],o=e.xaxis,t=e.yaxis;if(n[1]){n=(e.level-i)/(e.z[a][r+1]-i);return[o.c2p((1-n)*e.x[r]+n*e.x[r+1],!0),t.c2p(e.y[a],!0),r+n,a]}i=(e.level-i)/(e.z[a+1][r]-i);return[o.c2p(e.x[r],!0),t.c2p((1-i)*e.y[a]+i*e.y[a+1],!0),r,a+i]}t.exports=function(e,t,n){var r,a,i,o;for(t=t||.01,n=n||.01,a=0;a<e.length;a++){for(i=e[a],o=0;o<i.starts.length;o++)s(i,i.starts[o],"edge",t,n);for(r=0;Object.keys(i.crossings).length&&r<1e4;)r++,s(i,Object.keys(i.crossings)[0].split(",").map(Number),void 0,t,n);1e4===r&&N.log("Infinite loop in contour?")}}},{"../../lib":285,"./constants":416}],425:[function(e,t,n){"use strict";var i=e("../../components/color"),o=e("../heatmap/hover");t.exports=function(e,t,n,r,a){(a=a||{}).isContour=!0;a=o(e,t,n,r,a);return a&&a.forEach(function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&i.opacity(t.fillcolor)?e.color=i.addOpacity(t.fillcolor,1):t.contours.showlines&&i.opacity(t.line.color)&&(e.color=i.addOpacity(t.line.color,1)))}),a}},{"../../components/color":155,"../heatmap/hover":441}],426:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":412,"./calc":413,"./colorbar":415,"./defaults":421,"./hover":425,"./plot":430,"./style":432}],427:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t,n,r){r=r||{},e("contours.showlabels")&&(t=t.font,a.coerceFont(e,"contours.labelfont",{family:t.family,size:t.size,color:n}),e("contours.labelformat")),!1!==r.hasHover&&e("zhoverformat")}},{"../../lib":285}],428:[function(e,t,n){"use strict";var m=e("@plotly/d3"),g=e("../../components/colorscale"),y=e("./end_plus");t.exports=function(e){var t=e.contours,n=t.start,r=y(t),a=t.size||1,i=Math.floor((r-n)/a)+1,o="lines"===t.coloring?0:1,e=g.extractOpts(e);isFinite(a)||(i=a=1);var s,l=e.reversescale?g.flipScale(e.colorscale):e.colorscale,c=l.length,u=new Array(c),d=new Array(c);if("heatmap"===t.coloring){for(var f=e.min,p=e.max,h=0;h<c;h++)s=l[h],u[h]=s[0]*(p-f)+f,d[h]=s[1];e=m.extent([f,p,t.start,t.start+a*(i-1)]),t=e[f<p?0:1],e=e[f<p?1:0];t!==f&&(u.splice(0,0,t),d.splice(0,0,d[0])),e!==p&&(u.push(e),d.push(d[d.length-1]))}else for(h=0;h<c;h++)s=l[h],u[h]=(s[0]*(i+o-1)-o/2)*a+n,d[h]=s[1];return g.makeColorScaleFunc({domain:u,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":167,"./end_plus":423,"@plotly/d3":20}],429:[function(e,t,n){"use strict";var g=e("./constants");t.exports=function(e){for(var t,n,r,a,i,o,s,l,c,u,d=e[0].z,f=d.length,p=d[0].length,h=2===f||2===p,m=0;m<f-1;m++)for(r=[],0===m&&(r=r.concat(g.BOTTOMSTART)),m===f-2&&(r=r.concat(g.TOPSTART)),t=0;t<p-1;t++)for(n=r.slice(),0===t&&(n=n.concat(g.LEFTSTART)),t===p-2&&(n=n.concat(g.RIGHTSTART)),a=t+","+m,i=[[d[m][t],d[m][t+1]],[d[m+1][t],d[m+1][t+1]]],s=0;s<e.length;s++)o=e[s],l=o.level,u=void 0,(u=5!=(u=((c=i)[0][0]>l?0:1)+(c[0][1]>l?0:2)+(c[1][1]>l?0:4)+(c[1][0]>l?0:8))&&10!=u?15==u?0:u:(c[0][0]+c[0][1]+c[1][0]+c[1][1])/4<l?5==u?713:1114:5==u?104:208)&&(o.crossings[a]=u,-1!==n.indexOf(u)&&(o.starts.push([t,m]),h&&-1!==n.indexOf(u,n.indexOf(u)+1)&&o.starts.push([t,m])))}},{"./constants":416}],430:[function(e,t,M){"use strict";var k=e("@plotly/d3"),A=e("../../lib"),S=e("../../components/drawing"),a=e("../../components/colorscale"),s=e("../../lib/svg_text_utils"),i=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/set_convert"),p=e("../heatmap/plot"),h=e("./make_crossings"),m=e("./find_all_paths"),g=e("./empty_pathinfo"),y=e("./convert_to_constraints"),v=e("./close_boundaries"),E=e("./constants"),x=E.LABELOPTIMIZER;function b(e,t){var n,r,a,i,o,s,l,c,u,d="",f=0,p=e.edgepaths.map(function(e,t){return t}),h=!0;function m(e){return Math.abs(e[0]-t[2][0])<.01}for(;p.length;){for(s=S.smoothopen(e.edgepaths[f],e.smoothing),d+=h?s:s.replace(/^M/,"L"),p.splice(p.indexOf(f),1),n=e.edgepaths[f][e.edgepaths[f].length-1],i=-1,a=0;a<4;a++){if(!n){A.log("Missing end?",f,e);break}for(u=n,Math.abs(u[1]-t[0][1])<.01&&!m(n)?r=t[1]:(c=n,Math.abs(c[0]-t[0][0])<.01?r=t[0]:(l=n,Math.abs(l[1]-t[2][1])<.01?r=t[3]:m(n)&&(r=t[2]))),o=0;o<e.edgepaths.length;o++){var g=e.edgepaths[o][0];Math.abs(n[0]-r[0])<.01?Math.abs(n[0]-g[0])<.01&&0<=(g[1]-n[1])*(r[1]-g[1])&&(r=g,i=o):Math.abs(n[1]-r[1])<.01?Math.abs(n[1]-g[1])<.01&&0<=(g[0]-n[0])*(r[0]-g[0])&&(r=g,i=o):A.log("endpt to newendpt is not vert. or horz.",n,r,g)}if(n=r,0<=i)break;d+="L"+r}if(i===e.edgepaths.length){A.log("unclosed perimeter path");break}f=i,(h=-1===p.indexOf(f))&&(f=p[0],d+="Z")}for(f=0;f<e.paths.length;f++)d+=S.smoothclosed(e.paths[f],e.smoothing);return d}M.plot=function(c,u,e,t){var d=u.xaxis,f=u.yaxis;A.makeTraceGroups(t,e,"contour").each(function(e){var t=k.select(this),n=e[0],r=n.trace,a=n.x,i=n.y,o=r.contours,s=g(o,u,n),l=A.ensureSingle(t,"g","heatmapcoloring"),r=[];"heatmap"===o.coloring&&(r=[e]),p(c,u,r,l),h(s),m(s);r=d.c2p(a[0],!0),l=d.c2p(a[a.length-1],!0),a=f.c2p(i[0],!0),i=f.c2p(i[i.length-1],!0),r=[[r,i],[l,i],[l,a],[r,a]],a=s;"constraint"===o.type&&(a=y(s,o._operation)),function(e,t,n){n=A.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"===n.coloring?[0]:[]);n.enter().append("path"),n.exit().remove(),n.attr("d","M"+t.join("L")+"Z").style("stroke","none")}(t,r,o),function(e,t,n,r){var a="fill"===r.coloring||"constraint"===r.type&&"="!==r._operation,i="M"+n.join("L")+"Z";a&&v(t,r);t=A.ensureSingle(e,"g","contourfill").selectAll("path").data(a?t:[]);t.enter().append("path"),t.exit().remove(),t.each(function(e){e=(e.prefixBoundary?i:"")+b(e,n);e?k.select(this).attr("d",e).style("stroke","none"):k.select(this).remove()})}(t,a,r,o),function(e,t,n,r,a){var i=A.ensureSingle(e,"g","contourlines"),o=!1!==a.showlines,s=a.showlabels,l=o&&s,c=M.createLines(i,o||s,t),u=M.createLineClip(i,l,n,r.trace.uid),d=e.selectAll("g.contourlabels").data(s?[0]:[]);{var f,p,h,m,g,y,v,x,b,_,w,T;d.exit().remove(),d.enter().append("g").classed("contourlabels",!0),s&&(f=[],p=[],A.clearLocationCache(),h=M.labelFormatter(n,r),m=S.tester.append("text").attr("data-notex",1).call(S.font,a.labelfont),g=t[0].xaxis,y=t[0].yaxis,v=g._length,w=y._length,x=g.range,b=y.range,i=A.aggNums(Math.min,null,r.x),e=A.aggNums(Math.max,null,r.x),a=A.aggNums(Math.min,null,r.y),r=A.aggNums(Math.max,null,r.y),i=Math.max(g.c2p(i,!0),0),e=Math.min(g.c2p(e,!0),v),r=Math.max(y.c2p(r,!0),0),a=Math.min(y.c2p(a,!0),w),_={},x[0]<x[1]?(_.left=i,_.right=e):(_.left=e,_.right=i),b[0]<b[1]?(_.top=r,_.bottom=a):(_.top=a,_.bottom=r),_.middle=(_.top+_.bottom)/2,_.center=(_.left+_.right)/2,f.push([[_.left,_.top],[_.right,_.top],[_.right,_.bottom],[_.left,_.bottom]]),w=Math.sqrt(v*v+w*w),T=E.LABELDISTANCE*w/Math.max(1,t.length/E.LABELINCREASE),c.each(function(e){var a=M.calcTextOpts(e.level,h,m,n);k.select(this).selectAll("path").each(function(){var e=A.getVisibleSegment(this,_,a.height/2);if(e&&!(e.len<(a.width+a.height)*E.LABELMIN))for(var t=Math.min(Math.ceil(e.len/T),E.LABELMAX),n=0;n<t;n++){var r=M.findBestTextLocation(this,e,a,p,_);if(!r)break;M.addLabelData(r,a,p,f)}})}),m.remove(),M.drawLabels(d,p,n,u,l?f:null))}s&&!o&&c.remove()}(t,s,c,n,o),function(e,t,n,r,a){var i=r.trace,o=n._fullLayout._clips,s="clip"+i.uid,o=o.selectAll("#"+s).data(i.connectgaps?[]:[0]);o.enter().append("clipPath").classed("contourclip",!0).attr("id",s),o.exit().remove(),!1===i.connectgaps?(r={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:r.x,y:r.y,z:function(e){var t,n,r=e.trace._emptypoints,a=[],i=e.z.length,o=e.z[0].length,s=[];for(t=0;t<o;t++)s.push(1);for(t=0;t<i;t++)a.push(s.slice());for(t=0;t<r.length;t++)n=r[t],a[n[0]][n[1]]=0;return e.zmask=a}(r),smoothing:0},h([r]),m([r]),v([r],{type:"levels"}),A.ensureSingle(o,"path","").attr("d",(r.prefixBoundary?"M"+a.join("L")+"Z":"")+b(r,a))):s=null;S.setClipUrl(e,s,n)}(t,u,c,n,r)})},M.createLines=function(e,t,n){var r=n[0].smoothing,n=e.selectAll("g.contourlevel").data(t?n:[]);return n.exit().remove(),n.enter().append("g").classed("contourlevel",!0),t&&((t=n.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths})).exit().remove(),t.enter().append("path").classed("openline",!0),t.attr("d",function(e){return S.smoothopen(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),(t=n.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths})).exit().remove(),t.enter().append("path").classed("closedline",!0),t.attr("d",function(e){return S.smoothclosed(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")),n},M.createLineClip=function(e,t,n,r){r=t?"clipline"+r:null,t=n._fullLayout._clips.selectAll("#"+r).data(t?[0]:[]);return t.exit().remove(),t.enter().append("clipPath").classed("contourlineclip",!0).attr("id",r),S.setClipUrl(e,r,n),t},M.labelFormatter=function(e,t){var n=e._fullLayout,e=t.trace,t=e.contours,r={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};return t.labelformat?(r.tickformat=t.labelformat,o(r,n)):(e=a.extractOpts(e))&&e.colorbar&&e.colorbar._axis?r=e.colorbar._axis:("constraint"===t.type?(e=t.value,Array.isArray(e)?r.range=[e[0],e[e.length-1]]:r.range=[e,e]):(r.range=[t.start,t.end],r.nticks=(t.end-t.start)/t.size),r.range[0]===r.range[1]&&(r.range[1]+=r.range[0]||1),r.nticks||(r.nticks=1e3),o(r,n),i.prepTicks(r),r._tmin=null,r._tmax=null),function(e){return i.tickText(r,e).text}},M.calcTextOpts=function(e,t,n,r){t=t(e);n.text(t).call(s.convertToTspans,r);r=n.node(),n=S.bBox(r,!0);return{text:t,width:n.width,height:n.height,fontSize:+r.style["font-size"].replace("px",""),level:e,dy:(n.top+n.bottom)/2}},M.findBestTextLocation=function(e,t,n,r,a){for(var i,o,s,l,c=n.width,u=t.isClosed?(o=t.len/x.INITIALSEARCHPOINTS,i=t.min+o/2,t.max):(o=(t.len-c)/(x.INITIALSEARCHPOINTS+1),i=t.min+o+c/2,t.max-(o+c)/2),d=1/0,f=0;f<x.ITERATIONS;f++){for(var p=i;p<u;p+=o){var h=A.getTextLocation(e,t.total,p,c),m=function(e,t,n,r){var a=t.width/2,i=t.height/2,o=e.x,s=e.y,l=e.theta,c=Math.cos(l)*a,e=Math.sin(l)*a,a=(o>r.center?r.right-o:o-r.left)/(c+Math.abs(Math.sin(l)*i)),i=(s>r.middle?r.bottom-s:s-r.top)/(Math.abs(e)+Math.cos(l)*i);if(a<1||i<1)return 1/0;var u=x.EDGECOST*(1/(a-1)+1/(i-1));u+=x.ANGLECOST*l*l;for(var d=o-c,f=s-e,p=o+c,h=s+e,m=0;m<n.length;m++){var g=n[m],y=Math.cos(g.theta)*g.width/2,v=Math.sin(g.theta)*g.width/2,y=2*A.segmentDistance(d,f,p,h,g.x-y,g.y-v,g.x+y,g.y+v)/(t.height+g.height),v=g.level===t.level,g=v?x.SAMELEVELDISTANCE:1;if(y<=g)return 1/0;v=x.NEIGHBORCOST*(v?x.SAMELEVELFACTOR:1);u+=v/(y-g)}return u}(h,n,r,a);m<d&&(d=m,l=h,s=p)}if(d>2*x.MAXCOST)break;f&&(o/=2),u=(i=s-o/2)+1.5*o}if(d<=x.MAXCOST)return l},M.addLabelData=function(e,t,n,r){var a=t.fontSize,i=t.width+a/3,o=Math.max(0,t.height-a/3),s=e.x,l=e.y,a=e.theta,c=Math.sin(a),u=Math.cos(a),e=function(e,t){return[s+e*u-t*c,l+e*c+t*u]},e=[e(-i/2,-o/2),e(-i/2,o/2),e(i/2,o/2),e(i/2,-o/2)];n.push({text:t.text,x:s,y:l,dy:t.dy,theta:a,level:t.level,width:i,height:o}),r.push(e)},M.drawLabels=function(e,t,r,n,a){t=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});if(t.exit().remove(),t.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy,n=e.y-Math.cos(e.theta)*e.dy;k.select(this).text(e.text).attr({x:t,y:n,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+n+")"}).call(s.convertToTspans,r)}),a){for(var i="",o=0;o<a.length;o++)i+="M"+a[o].join("L")+"Z";A.ensureSingle(n,"path","").attr("d",i)}}},{"../../components/colorscale":167,"../../components/drawing":177,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/set_convert":352,"../heatmap/plot":445,"./close_boundaries":414,"./constants":416,"./convert_to_constraints":420,"./empty_pathinfo":422,"./find_all_paths":424,"./make_crossings":429,"@plotly/d3":20}],431:[function(e,t,n){"use strict";var o=e("../../plots/cartesian/axes"),s=e("../../lib");function l(e,t,n){var r={type:"linear",range:[e,t]};return o.autoTicks(r,(t-e)/(n||15)),r}t.exports=function(e,t){var n,r,a,i=e.contours;e.autocontour?(r=e.zmin,a=e.zmax,n=l(r=e.zauto||void 0===r?s.aggNums(Math.min,null,t):r,a=e.zauto||void 0===a?s.aggNums(Math.max,null,t):a,e.ncontours),i.size=n.dtick,i.start=o.tickFirst(n),n.range.reverse(),i.end=o.tickFirst(n),i.start===r&&(i.start+=i.size),i.end===a&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),e._input.contours||(e._input.contours={}),s.extendFlat(e._input.contours,{start:i.start,end:i.end,size:i.size}),e._input.autocontour=!0):"constraint"!==i.type&&(n=i.start,r=i.end,a=e._input.contours,r<n&&(i.start=a.start=r,r=i.end=a.end=n,n=i.start),0<i.size||(e=n===r?1:l(n,r,e.ncontours).dtick,a.size=i.size=e))}},{"../../lib":285,"../../plots/cartesian/axes":331}],432:[function(e,t,n){"use strict";var f=e("@plotly/d3"),p=e("../../components/drawing"),r=e("../heatmap/style"),h=e("./make_color_map");t.exports=function(e){var t=f.select(e).selectAll("g.contour");t.style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t=f.select(this),n=e[0].trace,r=n.contours,a=n.line,i=r.size||1,o=r.start,s="constraint"===r.type,l=!s&&"lines"===r.coloring,e=!s&&"fill"===r.coloring,c=l||e?h(n):null;t.selectAll("g.contourlevel").each(function(e){f.select(this).selectAll("path").call(p.lineGroupStyle,a.width,l?c(e.level):a.color,a.dash)});var u,d=r.labelfont;t.selectAll("g.contourlabels text").each(function(e){p.font(f.select(this),{family:d.family,size:d.size,color:d.color||(l?c(e.level):a.color)})}),s?t.selectAll("g.contourfill path").style("fill",n.fillcolor):e&&(t.selectAll("g.contourfill path").style("fill",function(e){return void 0===u&&(u=e.level),c(e.level+.5*i)}),void 0===u&&(u=o),t.selectAll("g.contourbg path").style("fill",c(u-.5*i)))}),r(e)}},{"../../components/drawing":177,"../heatmap/style":446,"./make_color_map":428,"@plotly/d3":20}],433:[function(e,t,n){"use strict";var l=e("../../components/colorscale/defaults"),c=e("./label_defaults");t.exports=function(e,t,n,r,a){var i,o=n("contours.coloring"),s="";!1!==(i="fill"===o?n("contours.showlines"):i)&&("lines"!==o&&(s=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==o&&(!0!==e.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,l(e,t,r,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),c(n,r,s,a)}},{"../../components/colorscale/defaults":165,"./label_defaults":427}],434:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../components/colorscale/attributes"),e=e("../../lib/extend").extendFlat;t.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},r.x,{impliedEdits:{xtype:"array"}}),x0:e({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},r.y,{impliedEdits:{ytype:"array"}}),y0:e({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},r.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},r.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},r.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},r.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},r.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},r.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},r.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:o(),showlegend:e({},a.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../scatter/attributes":494}],435:[function(e,t,n){"use strict";var L=e("../../registry"),C=e("../../lib"),D=e("../../plots/cartesian/axes"),O=e("../../plots/cartesian/align_period"),P=e("../histogram2d/calc"),I=e("../../components/colorscale/calc"),R=e("./convert_column_xyz"),N=e("./clean_2d_array"),z=e("./interp2d"),F=e("./find_empties"),j=e("./make_bound_array"),H=e("../../constants/numerical").BADNUM;function B(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e[r];a!==H&&t.push(a)}return t}t.exports=function(e,t){var n,r,a,i,o,s,l,c,u,d,f=D.getFromId(e,t.xaxis||"x"),p=D.getFromId(e,t.yaxis||"y"),h=L.traceIs(t,"contour"),m=L.traceIs(t,"histogram"),g=L.traceIs(t,"gl2d"),y=h?"best":t.zsmooth;function v(e){y=t._input.zsmooth=t.zsmooth=!1,C.warn('cannot use zsmooth: "fast": '+e)}if(f._minDtick=0,p._minDtick=0,u=m?(i=(d=P(e,t)).orig_x,n=d.x,r=d.x0,a=d.dx,c=d.orig_y,o=d.y,s=d.y0,l=d.dy,d.z):(E=t.z,C.isArray1D(E)?(R(t,f,p,"x","y",["z"]),n=t._x,o=t._y,E=t._z):(i=t.x?f.makeCalcdata(t,"x"):[],c=t.y?p.makeCalcdata(t,"y"):[],n=O(t,f,"x",i),o=O(t,p,"y",c),t._x=n,t._y=o),r=t.x0,a=t.dx,s=t.y0,l=t.dy,N(E,t,f,p)),(f.rangebreaks||p.rangebreaks)&&(u=function(e,t,n){for(var r=[],a=-1,i=0;i<n.length;i++)if(t[i]!==H){r[++a]=[];for(var o=0;o<n[i].length;o++)e[o]!==H&&r[a].push(n[i][o])}return r}(n,o,u),m||(n=B(n),o=B(o),t._x=n,t._y=o)),m||!h&&!t.connectgaps||(t._emptypoints=F(u),z(u,t._emptypoints)),"fast"===y)if("log"===f.type||"log"===p.type)v("log axis found");else if(!m){if(n.length)for(var x=(n[n.length-1]-n[0])/(n.length-1),b=Math.abs(x/100),_=0;_<n.length-1;_++)if(Math.abs(n[_+1]-n[_]-x)>b){v("x scale is not linear");break}if(o.length&&"fast"===y){var w=(o[o.length-1]-o[0])/(o.length-1),T=Math.abs(w/100);for(_=0;_<o.length-1;_++)if(Math.abs(o[_+1]-o[_]-w)>T){v("y scale is not linear");break}}}var M=C.maxRowLength(u),k="scaled"===t.xtype?"":n,A=j(t,k,r,a,M,f),S="scaled"===t.ytype?"":o,E=j(t,S,s,l,u.length,p);g||(t._extremes[f._id]=D.findExtremes(f,A),t._extremes[p._id]=D.findExtremes(p,E));g={x:A,y:E,z:u,text:t._text||t.text,hovertext:t._hovertext||t.hovertext};return t.xperiodalignment&&i&&(g.orig_x=i),t.yperiodalignment&&c&&(g.orig_y=c),k&&k.length===A.length-1&&(g.xCenter=k),S&&S.length===E.length-1&&(g.yCenter=S),m&&(g.xRanges=d.xRanges,g.yRanges=d.yRanges,g.pts=d.pts),h||I(e,t,{vals:u,cLetter:"z"}),h&&t.contours&&"heatmap"===t.contours.coloring&&(h={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar},g.xfill=j(h,k,r,a,M,f),g.yfill=j(h,S,s,l,u.length,p)),[g]}},{"../../components/colorscale/calc":163,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../../registry":373,"../histogram2d/calc":463,"./clean_2d_array":436,"./convert_column_xyz":438,"./find_empties":440,"./interp2d":443,"./make_bound_array":444}],436:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),v=e("../../lib"),x=e("../../constants/numerical").BADNUM;t.exports=function(e,a,t,n){var r,i,o,s,l;if(a&&a.transpose){for(g=r=0;g<e.length;g++)r=Math.max(r,e[g].length);if(0===r)return!1;o=function(e){return e.length},s=function(e,t,n){return(e[n]||[])[t]}}else r=e.length,o=function(e,t){return e[t].length},s=function(e,t,n){return(e[t]||[])[n]};function c(t){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&t&&"category"===t.type&&a["_"+t._id.charAt(0)].length){var e=t._id.charAt(0),n={},r=a["_"+e+"CategoryMap"]||a[e];for(g=0;g<r.length;g++)n[r[g]]=g;return function(e){e=n[t._categories[e]];return e+1?e:x}}return v.identity}var u=c(t),d=c(n);n&&"category"===n.type&&(r=n._categories.length);for(var f,p,h,m=new Array(r),g=0;g<r;g++)for(i=t&&"category"===t.type?t._categories.length:o(e,g),m[g]=new Array(i),l=0;l<i;l++)m[g][l]=function(e){if(y(e))return+e}((f=e,p=d(g),h=u(l),p===x||h===x?x:s(f,p,h)));return m}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],437:[function(e,t,n){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],438:[function(e,t,n){"use strict";var E=e("../../lib"),L=e("../../constants/numerical").BADNUM,C=e("../../plots/cartesian/align_period");t.exports=function(e,t,n,r,a,i){for(var o,s,l=e._length,c=t.makeCalcdata(e,r),u=n.makeCalcdata(e,a),c=C(e,t,r,c),u=C(e,n,a,u),d=e.text,f=void 0!==d&&E.isArray1D(d),p=e.hovertext,h=void 0!==p&&E.isArray1D(p),m=E.distinctVals(c),g=m.vals,y=E.distinctVals(u),v=y.vals,x=[],b=v.length,_=g.length,w=0;w<i.length;w++)x[w]=E.init2dArray(b,_);f&&(o=E.init2dArray(b,_)),h&&(s=E.init2dArray(b,_));var T=E.init2dArray(b,_);for(w=0;w<l;w++)if(c[w]!==L&&u[w]!==L){for(var M=E.findBin(c[w]+m.minDiff/2,g),k=E.findBin(u[w]+y.minDiff/2,v),A=0;A<i.length;A++){var S=e[i[A]];x[A][k][M]=S[w],T[k][M]=w}f&&(o[k][M]=d[w]),h&&(s[k][M]=p[w])}for(e["_"+r]=g,e["_"+a]=v,A=0;A<i.length;A++)e["_"+i[A]]=x[A];f&&(e._text=o),h&&(e._hovertext=s),t&&"category"===t.type&&(e["_"+r+"CategoryMap"]=g.map(function(e){return t._categories[e]})),n&&"category"===n.type&&(e["_"+a+"CategoryMap"]=v.map(function(e){return n._categories[e]})),e._after2before=T}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328}],439:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./xyz_defaults"),s=e("../scatter/period_defaults"),l=e("./style_defaults"),c=e("../../components/colorscale/defaults"),u=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return i.coerce(n,r,u,e,t)}o(n,r,a,t)?(s(n,r,t,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),l(n,r,a,t),a("hoverongaps"),a("connectgaps",i.isArray1D(r.z)&&!1!==r.zsmooth),c(n,r,t,a,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":165,"../../lib":285,"../scatter/period_defaults":514,"./attributes":434,"./style_defaults":447,"./xyz_defaults":448}],440:[function(e,t,n){"use strict";var g=e("../../lib").maxRowLength;t.exports=function(e){for(var t,n,r,a,i,o,s,l=[],c={},u=[],d=e[0],f=[],p=[0,0,0],h=g(e),m=0;m<e.length;m++)for(t=f,f=d,d=e[m+1]||[],n=0;n<h;n++)void 0===f[n]&&((i=(void 0!==f[n-1]?1:0)+(void 0!==f[n+1]?1:0)+(void 0!==t[n]?1:0)+(void 0!==d[n]?1:0))?(0===m&&i++,0===n&&i++,m===e.length-1&&i++,n===f.length-1&&i++,i<4&&(c[[m,n]]=[m,n,i]),l.push([m,n,i])):u.push([m,n]));for(;u.length;){for(s=!(o={}),a=u.length-1;0<=a;a--)(i=((c[[(m=(r=u[a])[0])-1,n=r[1]]]||p)[2]+(c[[m+1,n]]||p)[2]+(c[[m,n-1]]||p)[2]+(c[[m,n+1]]||p)[2])/20)&&(o[r]=[m,n,i],u.splice(a,1),s=!0);if(!s)throw"findEmpties iterated with no new neighbors";for(r in o)c[r]=o[r],l.push(o[r])}return l.sort(function(e,t){return t[2]-e[2]})}},{"../../lib":285}],441:[function(e,t,n){"use strict";var E=e("../../components/fx"),L=e("../../lib"),C=e("../../plots/cartesian/axes"),D=e("../../components/colorscale").extractOpts;t.exports=function(t,e,n,r,a){var i,o,s,l,c=(a=a||{}).isContour,u=t.cd[0],d=u.trace,f=t.xa,p=t.ya,h=u.x,m=u.y,g=u.z,y=u.xCenter,v=u.yCenter,x=u.zmask,b=d.zhoverformat,_=h,w=m;if(!1!==t.index){try{s=Math.round(t.index[1]),l=Math.round(t.index[0])}catch(e){return void L.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index)}if(s<0||s>=g[0].length||l<0||l>g.length)return}else{if(0<E.inbox(e-h[0],e-h[h.length-1],0)||0<E.inbox(n-m[0],n-m[m.length-1],0))return;if(c){for(var _=[2*h[0]-h[1]],T=1;T<h.length;T++)_.push((h[T]+h[T-1])/2);for(_.push([2*h[h.length-1]-h[h.length-2]]),w=[2*m[0]-m[1]],T=1;T<m.length;T++)w.push((m[T]+m[T-1])/2);w.push([2*m[m.length-1]-m[m.length-2]])}s=Math.max(0,Math.min(_.length-2,L.findBin(e,_))),l=Math.max(0,Math.min(w.length-2,L.findBin(n,w)))}var M,k,A=f.c2p(h[s]),a=f.c2p(h[s+1]),e=p.c2p(m[l]),n=p.c2p(m[l+1]);c?(M=u.orig_x||h,k=u.orig_y||m,a=A,i=M[s],n=e,o=k[l]):(M=u.orig_x||y||h,k=u.orig_y||v||m,i=y?M[s]:(M[s]+M[s+1])/2,o=v?k[l]:(k[l]+k[l+1])/2,f&&"category"===f.type&&(i=h[s]),p&&"category"===p.type&&(o=m[l]),d.zsmooth&&(A=a=f.c2p(i),e=n=p.c2p(o)));var S,g=g[l][s];if(void 0!==(g=x&&!x[l][s]?void 0:g)||d.hoverongaps){Array.isArray(u.hovertext)&&Array.isArray(u.hovertext[l])?S=u.hovertext[l][s]:Array.isArray(u.text)&&Array.isArray(u.text[l])&&(S=u.text[l][s]);u=D(d),f={type:"linear",range:[u.min,u.max],hoverformat:b,_separators:f._separators,_numFormat:f._numFormat},f=C.tickText(f,g,"hover").text;return[L.extendFlat(t,{index:d._after2before?d._after2before[l][s]:[l,s],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:A,x1:a,y0:e,y1:n,xLabelVal:i,yLabelVal:o,zLabelVal:g,zLabel:f,text:S})]}}},{"../../components/colorscale":167,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],442:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":434,"./calc":435,"./colorbar":437,"./defaults":439,"./hover":441,"./plot":445,"./style":446}],443:[function(e,t,n){"use strict";var i=e("../../lib"),g=[[-1,0],[1,0],[0,-1],[0,1]];function o(e,t,n){for(var r,a,i,o,s,l,c,u,d,f,p,h=0,m=0;m<t.length;m++){for(r=(d=t[m])[0],a=d[1],d=e[r][a],i=c=u=0;i<4;i++)(s=e[r+(o=g[i])[0]])&&void 0!==(l=s[a+o[1]])&&(0===u?f=p=l:(f=Math.min(f,l),p=Math.max(p,l)),c++,u+=l);if(0===c)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][a]=u/c,void 0===d?c<4&&(h=1):(e[r][a]=(1+n)*e[r][a]-n*d,f<p&&(h=Math.max(h,Math.abs(e[r][a]-d)/(p-f))))}return h}t.exports=function(e,t){var n,r,a=1;for(o(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&.01<a;n++)a=o(e,t,(r=a,.5-.25*Math.min(1,.5*r)));return.01<a&&i.log("interp2d didn't converge quickly",a),e}},{"../../lib":285}],444:[function(e,t,n){"use strict";var g=e("../../registry"),y=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r,a,i){var o,s=[],l=g.traceIs(e,"contour"),c=g.traceIs(e,"histogram"),u=g.traceIs(e,"gl2d");if(y(t)&&1<t.length&&!c&&"category"!==i.type){var d=t.length;if(!(d<=a))return l?t.slice(0,a):t.slice(0,a+1);if(l||u)s=t.slice(0,a);else if(1===a)s=[t[0]-.5,t[0]+.5];else{for(s=[1.5*t[0]-.5*t[1]],h=1;h<d;h++)s.push(.5*(t[h-1]+t[h]));s.push(1.5*t[d-1]-.5*t[d-2])}if(d<a)for(var f=s[s.length-1],p=f-s[s.length-2],h=d;h<a;h++)s.push(f+=p)}else{var m,e=e[i._id.charAt(0)+"calendar"];for(m=c?i.r2c(n,0,e):y(t)&&1===t.length?t[0]:void 0===n?0:("log"===i.type?i.d2c:i.r2c)(n,0,e),o=r||1,h=l||u?0:-.5;h<a;h++)s.push(m+o*h)}return s}},{"../../lib":285,"../../registry":373}],445:[function(e,t,n){"use strict";var ce=e("@plotly/d3"),ue=e("tinycolor2"),de=e("../../registry"),fe=e("../../lib"),pe=e("../../components/colorscale").makeColorScaleFuncFromTrace,he=e("../../constants/xmlns_namespaces");function me(e,t){var n=t.length-2,r=fe.constrain(fe.findBin(e,t),0,n),a=t[r],t=t[r+1],e=fe.constrain(r+(e-a)/(t-a)-.5,0,n),t=Math.round(e),a=Math.abs(e-t);return e&&e!==n&&a?{bin0:t,frac:a,bin1:Math.round(t+a/(e-t))}:{bin0:t,bin1:t,frac:0}}function ge(e,t){var n=t.length-1,r=fe.constrain(fe.findBin(e,t),0,n),n=t[r],n=(e-n)/(t[r+1]-n)||0;return n<=0?{bin0:r,bin1:r,frac:0}:n<.5?{bin0:r,bin1:r+1,frac:n}:{bin0:r+1,bin1:r,frac:1-n}}function ye(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}t.exports=function(oe,e,t,n){var se=e.xaxis,le=e.yaxis;fe.makeTraceGroups(n,t,"hm").each(function(e){var t,n,r,a,i,o=ce.select(this),s=e[0],l=s.trace,c=s.z,u=s.x,d=s.y,f=s.xCenter,p=s.yCenter,h=de.traceIs(l,"contour"),m=h?"best":l.zsmooth,g=c.length,y=fe.maxRowLength(c),v=!1,x=!1;for(J=0;void 0===n&&J<u.length-1;)n=se.c2p(u[J]),J++;for(J=u.length-1;void 0===r&&0<J;)r=se.c2p(u[J]),J--;for(r<n&&(t=r,r=n,n=t,v=!0),J=0;void 0===a&&J<d.length-1;)a=le.c2p(d[J]),J++;for(J=d.length-1;void 0===i&&0<J;)i=le.c2p(d[J]),J--;i<a&&(t=a,a=i,i=t,x=!0),h&&(f=u,p=d,u=s.xfill,d=s.yfill),"fast"!==m&&(T="best"===m?0:.5,n=Math.max(-T*se._length,n),r=Math.min((1+T)*se._length,r),a=Math.max(-T*le._length,a),i=Math.min((1+T)*le._length,i));var b=Math.round(r-n),_=Math.round(i-a);if(b<=0||_<=0)o.selectAll("image").data([]).exit().remove();else{var w,s="fast"===m?(w=y,g):(w=b,_),T=document.createElement("canvas");T.width=w,T.height=s;var M,k,A,S,E,L=T.getContext("2d"),C=pe(l,{noNumericCheck:!0,returnArray:!0}),D="fast"===m?(M=v?function(e){return y-1-e}:fe.identity,x?function(e){return g-1-e}:fe.identity):(M=function(e){return fe.constrain(Math.round(se.c2p(u[e])-n),0,b)},function(e){return fe.constrain(Math.round(le.c2p(d[e])-a),0,_)}),s=D(0),O=[s,s],P=v?0:1,I=x?0:1,R=0,N=0,z=0,F=0;if(m){var j,H=0;try{j=new Uint8Array(b*_*4)}catch(e){j=new Array(b*_*4)}if("best"===m){for(var B,q,U,Y=f||u,V=p||d,G=new Array(Y.length),W=new Array(V.length),Z=new Array(b),$=f?ge:me,X=p?ge:me,J=0;J<Y.length;J++)G[J]=Math.round(se.c2p(Y[J])-n);for(J=0;J<V.length;J++)W[J]=Math.round(le.c2p(V[J])-a);for(J=0;J<b;J++)Z[J]=$(J,G);for(ee=0;ee<_;ee++)for(q=c[(B=X(ee,W)).bin0],U=c[B.bin1],J=0;J<b;J++,H+=4)ye(j,H,E=function(e,t,n,r){var a=e[n.bin0];if(void 0===a)return ie(void 0,1);var i=e[n.bin1],e=t[n.bin0],t=t[n.bin1],t=void 0===i?void 0===t?0:void 0===e?2*(t-a):2*(2*t-e-a)/3:void 0===t?void 0===e?0:2*(2*a-i-e)/3:void 0===e?2*(2*t-i-a)/3:t+a-i-e;return ie(a+n.frac*(i-a||0)+r.frac*((e-a||0)+n.frac*t))}(q,U,Z[J],B))}else for(ee=0;ee<g;ee++)for(S=c[ee],O=D(ee),J=0;J<b;J++)E=ie(S[J],1),ye(j,H=4*(O*b+M(J)),E);p=L.createImageData(b,_);try{p.data.set(j)}catch(e){for(var K=p.data,Q=K.length,ee=0;ee<Q;ee++)K[ee]=j[ee]}L.putImageData(p,0,0)}else{var te=l.xgap,ne=l.ygap,re=Math.floor(te/2),ae=Math.floor(ne/2);for(ee=0;ee<g;ee++)if(S=c[ee],O.reverse(),O[I]=D(ee+1),O[0]!==O[1]&&void 0!==O[0]&&void 0!==O[1])for(k=[A=M(0),A],J=0;J<y;J++)k.reverse(),k[P]=M(J+1),k[0]!==k[1]&&void 0!==k[0]&&void 0!==k[1]&&(E=ie(S[J],(k[1]-k[0])*(O[1]-O[0])),L.fillStyle="rgba("+E.join(",")+")",L.fillRect(k[0]+re,O[0]+ae,k[1]-k[0]-te,O[1]-O[0]-ne))}N=Math.round(N/R),z=Math.round(z/R),F=Math.round(F/R),l=ue("rgb("+N+","+z+","+F+")");oe._hmpixcount=(oe._hmpixcount||0)+R,oe._hmlumcount=(oe._hmlumcount||0)+R*l.getLuminance();e=o.selectAll("image").data(e);e.enter().append("svg:image").attr({xmlns:he.svg,preserveAspectRatio:"none"}),e.attr({height:_,width:b,x:n,y:a,"xlink:href":T.toDataURL("image/png")})}function ie(e,t){if(void 0===e)return[0,0,0,0];e=C(e);return e[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e[2]=Math.round(e[2]),R+=t,N+=e[0]*t,z+=e[1]*t,F+=e[2]*t,e}})}},{"../../components/colorscale":167,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"@plotly/d3":20,tinycolor2:119}],446:[function(e,t,n){"use strict";var r=e("@plotly/d3");t.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{"@plotly/d3":20}],447:[function(e,t,n){"use strict";t.exports=function(e,t,n){!1===n("zsmooth")&&(n("xgap"),n("ygap")),n("zhoverformat")}},{}],448:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib"),p=e("../../registry");function h(e,t){var n=t(e);return"scaled"===(n?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),n}t.exports=function(e,t,n,r,a,i){var o=n("z");if(a=a||"x",i=i||"y",void 0===o||!o.length)return 0;if(f.isArray1D(e.z)){var s=n(a),l=n(i),c=f.minRowLength(s),u=f.minRowLength(l);if(0===c||0===u)return 0;t._length=Math.min(c,u,o.length)}else{if(s=h(a,n),l=h(i,n),!function(e){for(var t,n=!0,r=!1,a=!1,i=0;i<e.length;i++){if(t=e[i],!f.isArrayOrTypedArray(t)){n=!1;break}0<t.length&&(r=!0);for(var o=0;o<t.length;o++)if(d(t[o])){a=!0;break}}return n&&r&&a}(o))return 0;n("transpose"),t._length=null}return"heatmapgl"===e.type||p.getComponentMethod("calendars","handleTraceDefaults")(e,t,[a,i],r),!0}},{"../../lib":285,"../../registry":373,"fast-isnumeric":31}],449:[function(e,t,n){"use strict";var r=e("../bar/attributes"),a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("./bin_attributes"),s=e("./constants"),e=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:a("x"),yhoverformat:a("y"),text:e({},r.text,{}),hovertext:e({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:s.eventDataKeys}),marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"./bin_attributes":451,"./constants":455}],450:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=e.length,r=0,a=0;a<n;a++)t[a]?(e[a]/=t[a],r+=e[a]):e[a]=null;return r}},{}],451:[function(e,t,n){"use strict";t.exports=function(e,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],452:[function(e,t,n){"use strict";var i=e("fast-isnumeric");t.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,r){t=r[t];return i(t)?(t=Number(t),n[e]+=t,t):0},avg:function(e,t,n,r,a){t=r[t];return i(t)&&(t=Number(t),n[e]+=t,a[e]++),0},min:function(e,t,n,r){r=r[t];if(i(r)){if(r=Number(r),!i(n[e]))return n[e]=r;if(n[e]>r){t=r-n[e];return n[e]=r,t}}return 0},max:function(e,t,n,r){r=r[t];if(i(r)){if(r=Number(r),!i(n[e]))return n[e]=r;if(n[e]<r){t=r-n[e];return n[e]=r,t}}return 0}}},{"fast-isnumeric":31}],453:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),f=r.ONEAVGYEAR,a=r.ONEAVGMONTH,p=r.ONEDAY,i=r.ONEHOUR,o=r.ONEMIN,s=r.ONESEC,h=e("../../plots/cartesian/axes").tickIncrement;function m(e,t,n,r){if(e*t<=0)return 1/0;for(var a=Math.abs(t-e),i="date"===n.type,o=c(a,i),s=0;s<10;s++){var l=c(80*o,i);if(o===l)break;if(!function(e,t,n,r,a,i){if(r&&p<e){r=u(t,a,i),a=u(n,a,i),i=e===f?0:1;return r[i]!==a[i]}return.1<Math.floor(n/e)-Math.floor(t/e)}(l,e,t,i,n,r))break;o=l}return o}function c(e,t){return t&&s<e?p<e?1.1*f<e?f:1.1*a<e?a:p:i<e?i:o<e?o:s:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function u(e,t,n){n=t.c2d(e,f,n).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}t.exports=function(a,e,t,i,o){var r,n=-1.1*e,s=-.1*e,l=a-s,e=t[0],t=t[1],l=Math.min(m(e+s,e+l,i,o),m(t+s,t+l,i,o)),s=Math.min(m(e+n,e+s,i,o),m(t+n,t+s,i,o)),c=s<l&&s<Math.abs(t-e)/4e3?(r=l,!1):(r=Math.min(l,s),!0);if("date"===i.type&&p<r){var u=r===f?1:6,d=r===f?"M12":"M1";return function(e,t){var n=i.c2d(e,f,o),r=n.indexOf("-",u);0<r&&(n=n.substr(0,r));r=i.d2c(n,0,o);return r<e&&((r+(n=h(r,d,!1,o)))/2<e+a&&(r=n)),t&&c?h(r,d,!0,o):r}}return function(e,t){var n=r*Math.round(e/r);return n+r/10<e&&n+.9*r<e+a&&(n+=r),t&&c&&(n-=r),n}}},{"../../constants/numerical":265,"../../plots/cartesian/axes":331}],454:[function(e,t,n){"use strict";var U=e("fast-isnumeric"),Y=e("../../lib"),A=e("../../registry"),V=e("../../plots/cartesian/axes"),G=e("../bar/arrays_to_calcdata"),W=e("./bin_functions"),Z=e("./norm_functions"),$=e("./average"),X=e("./bin_label_vals");function J(e,t,n,r,a){var i=r+"bins",o=e._fullLayout,s=t["_"+r+"bingroup"],l=o._histogramBinOpts[s],c="overlay"===o.barmode,s=function(e){return n.r2c(e,0,_)},o=function(e){return n.c2r(e,0,_)},u="date"===n.type?function(e){return e||0===e?Y.cleanDate(e,null,_):null}:function(e){return U(e)?Number(e):null};function d(e,t,n){t[e+"Found"]?(t[e]=u(t[e]),null===t[e]&&(t[e]=n[e])):(T[e]=t[e]=n[e],Y.nestedProperty(m[0],i+"."+e).set(n[e]))}if(t["_"+r+"autoBinFinished"])delete t["_"+r+"autoBinFinished"];else{for(var f,p,h,m=l.traces,g=[],y=!0,v=!1,x=!1,b=0;b<m.length;b++)(h=m[b]).visible&&(p=h["_"+(f=l.dirs[b])+"pos0"]=n.makeCalcdata(h,f),g=Y.concat(g,p),delete h["_"+r+"autoBinFinished"],!0===t.visible&&(y?y=!1:(delete h._autoBin,h["_"+r+"autoBinFinished"]=1),A.traceIs(h,"2dMap")&&(v=!0),"histogram2dcontour"===h.type&&(x=!0)));var _=m[0][r+"calendar"],w=V.autoBin(g,n,l.nbins,v,_,l.sizeFound&&l.size),T=(m[0]._autoBin={})[l.dirs[0]]={};if(x&&(l.size||(w.start=o(V.tickIncrement(s(w.start),w.size,!0,_))),void 0===l.end&&(w.end=o(V.tickIncrement(s(w.end),w.size,!1,_)))),c&&!A.traceIs(t,"2dMap")&&0===w._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(a)return[w,p,!0];w=function(e,t,n,r,a){var i,o,s,l=e._fullLayout,c=function(e,t){for(var n=t.xaxis,r=t.yaxis,a=t.orientation,i=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===a&&l.xaxis===n&&l.yaxis===r&&i.push(l)}return i}(e,t),u=!1,d=1/0,f=[t];for(i=0;i<c.length;i++){var p,h,m;(o=c[i])===t?u=!0:u?(p=J(e,o,n,r,!0),h=p[0],m=p[2],o["_"+r+"autoBinFinished"]=1,o["_"+r+"pos0"]=p[1],m?f.push(o):d=Math.min(d,h.size)):(s=l._histogramBinOpts[o["_"+r+"bingroup"]],d=Math.min(d,s.size||o[a].size))}var g=new Array(f.length);for(i=0;i<f.length;i++)for(var y=f[i]["_"+r+"pos0"],v=0;v<y.length;v++)if(void 0!==y[v]){g[i]=y[v];break}isFinite(d)||(d=Y.distinctVals(g).minDiff);for(i=0;i<f.length;i++){var x=(o=f[i])[r+"calendar"],x={start:n.c2r(g[i]-d/2,0,x),end:n.c2r(g[i]+d/2,0,x),size:d};o._input[a]=o[a]=x,(s=l._histogramBinOpts[o["_"+r+"bingroup"]])&&Y.extendFlat(s,x)}return t[a]}(e,t,n,r,i)}(M=h.cumulative||{}).enabled&&"include"!==M.currentbin&&("decreasing"===M.direction?w.start=o(V.tickIncrement(s(w.start),w.size,!0,_)):w.end=o(V.tickIncrement(s(w.end),w.size,!1,_))),l.size=w.size,l.sizeFound||(T.size=w.size,Y.nestedProperty(m[0],i+".size").set(w.size)),d("start",l,w),d("end",l,w)}p=t["_"+r+"pos0"],delete t["_"+r+"pos0"];var e=t._input[i]||{},M=Y.extendFlat({},l),o=l.start,s=n.r2l(e.start),w=void 0!==s;(l.startFound||w)&&s!==n.r2l(o)&&(s=w?s:Y.aggNums(Math.min,null,p),k={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:l.size,tick0:o,calendar:_,range:[s,V.tickIncrement(s,l.size,!1,_)].map(n.l2r)},(k=V.tickFirst(k))>n.r2l(s)&&(k=V.tickIncrement(k,l.size,!0,_)),M.start=n.l2r(k),w||Y.nestedProperty(t,i+".start").set(M.start));var k=l.end,w=n.r2l(e.end),e=void 0!==w;(l.endFound||e)&&w!==n.r2l(k)&&(w=e?w:Y.aggNums(Math.max,null,p),M.end=n.l2r(w),e||Y.nestedProperty(t,i+".start").set(M.end));e="autobin"+r;return!1===t._input[e]&&(t._input[i]=Y.extendFlat({},t[i]||{}),delete t._input[e],delete t[e]),[M,p]}t.exports={calc:function(r,e){var t,n,a=[],i=[],o=V.getFromId(r,"h"===e.orientation?e.yaxis:e.xaxis),s={x:"y",y:"x"}[E="h"===e.orientation?"y":"x"],l=e[E+"calendar"],c=e.cumulative,u=(k=J(r,e,o,E))[0],d=k[1],f="string"==typeof u.size,p=[],h=f?p:u,m=[],g=[],y=[],v=0,x=e.histnorm,b=e.histfunc,_=-1!==x.indexOf("density");c.enabled&&_&&(x=x.replace(/ ?density$/,""),_=!1);var w,T="max"===b||"min"===b?null:0,M=W.count,k=Z[x],A=!1,x=function(e){return o.r2c(e,0,l)};for(Y.isArrayOrTypedArray(e[s])&&"count"!==b&&(w=e[s],A="avg"===b,M=W[b]),R=x(u.start),n=x(u.end)+(R-V.tickIncrement(R,u.size,!1,l))/1e6;R<n&&a.length<1e6&&(t=V.tickIncrement(R,u.size,!1,l),a.push((R+t)/2),i.push(T),y.push([]),p.push(R),_&&m.push(1/(t-R)),A&&g.push(0),!(t<=R));)R=t;p.push(R),f||"date"!==o.type||(h={start:x(h.start),end:x(h.end),size:h.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var S=e["_"+E+"bingroup"],E={leftGap:1/0,rightGap:1/0};S&&(r._fullLayout._roundFnOpts[S]||(r._fullLayout._roundFnOpts[S]=E),E=r._fullLayout._roundFnOpts[S]);for(var L,C=i.length,D=!0,O=E.leftGap,P=E.rightGap,I={},R=0;R<d.length;R++){var N,z=d[R];0<=(N=Y.findBin(z,h))&&N<C&&(v+=M(N,R,i,w,g),D&&y[N].length&&z!==d[y[N][0]]&&(D=!1),y[N].push(R),I[R]=N,O=Math.min(O,z-p[N]),P=Math.min(P,p[N+1]-z))}E.leftGap=O,E.rightGap=P,D||(L=function(t,n){return function(){var e=r._fullLayout._roundFnOpts[S];return X(e.leftGap,e.rightGap,p,o,l)(t,n)}}),A&&(v=$(i,g)),k&&k(i,v,m),c.enabled&&function(t,e,n){var r,a,i;function o(e){i=t[e],t[e]/=2}function s(e){a=t[e],t[e]=i+a/2,i+=a}if("half"===n)if("increasing"===e)for(o(0),r=1;r<t.length;r++)s(r);else for(o(t.length-1),r=t.length-2;0<=r;r--)s(r);else if("increasing"===e){for(r=1;r<t.length;r++)t[r]+=t[r-1];"exclude"===n&&(t.unshift(0),t.pop())}else{for(r=t.length-2;0<=r;r--)t[r]+=t[r+1];"exclude"===n&&(t.push(0),t.shift())}}(i,c.direction,c.currentbin);var F,j=Math.min(a.length,i.length),H=[],B=0,q=j-1;for(R=0;R<j;R++)if(i[R]){B=R;break}for(R=j-1;B<=R;R--)if(i[R]){q=R;break}for(R=B;R<=q;R++)U(a[R])&&U(i[R])&&(F={p:a[R],s:i[R],b:0},c.enabled||(F.pts=y[R],D?F.ph0=F.ph1=y[R].length?d[y[R][0]]:a[R]:(e._computePh=!0,F.ph0=L(p[R]),F.ph1=L(p[R+1],!0))),H.push(F));return 1===H.length&&(H[0].width1=V.tickIncrement(H[0].p,u.size,!1,l)-H[0].p),G(H,e),Y.isArrayOrTypedArray(e.selectedpoints)&&Y.tagSelected(H,e,I),H},calcAllAutoBins:J}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"../bar/arrays_to_calcdata":382,"./average":450,"./bin_functions":452,"./bin_label_vals":453,"./norm_functions":461,"fast-isnumeric":31}],455:[function(e,t,n){"use strict";t.exports={eventDataKeys:["binNumber"]}},{}],456:[function(e,t,n){"use strict";var S=e("../../lib"),E=e("../../plots/cartesian/axis_ids"),L=e("../../registry").traceIs,C=e("../bar/defaults").handleGroupingDefaults,D=S.nestedProperty,O=e("../../plots/cartesian/constraints").getAxisGroup,P=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],I=["x","y"];t.exports=function(e,l){var t,c=l._histogramBinOpts={},n=[],r={},a=[];function i(e,t){return S.coerce(h._input,h,h._module.attributes,e,t)}function o(e){return"v"===e.orientation?"x":"y"}function s(e,t,n){var r=e.uid+"__"+n;t=t||r;var a=E.getFromTrace({_fullLayout:l},e,n).type,i=e[n+"calendar"]||"",o=c[t],s=!0;o&&(a===o.axType&&i===o.calendar?(s=!1,o.traces.push(e),o.dirs.push(n)):(t=r,a!==o.axType&&S.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+a,"axis","with bins on","type:"+o.axType,"axis."].join(" ")),i!==o.calendar&&S.warn(["Attempted to group the bins of trace",e.index,"set with a",i,"calendar","with bins",o.calendar?"on a "+o.calendar+" calendar":"w/o a set calendar"].join(" ")))),s&&(c[t]={traces:[e],dirs:[n],axType:a,calendar:e[n+"calendar"]||""}),e["_"+n+"bingroup"]=t}for(d=0;d<e.length;d++)h=e[d],L(h,"histogram")&&(n.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,L(h,"2dMap")||C(h._input,h,l,i));for(var u=l._alignmentOpts||{},d=0;d<n.length;d++){var f,p,h=n[d],m="";L(h,"2dMap")||(p=o(h),"group"===l.barmode&&h.alignmentgroup&&(f=h[p+"axis"],(u[f=O(l,f)+h.orientation]||{})[h.alignmentgroup]&&(m=f)),m||"overlay"===l.barmode||(m=O(l,h.xaxis)+O(l,h.yaxis)+o(h))),m?(r[m]||(r[m]=[]),r[m].push(h)):a.push(h)}for(m in r)if(1!==(_=r[m]).length){var g=!1;for(_.length&&(h=_[0],g=i("bingroup")),m=g||m,d=0;d<_.length;d++){var y=(h=_[d])._input.bingroup;y&&y!==m&&S.warn(["Trace",h.index,"must match","within bingroup",m+".","Ignoring its bingroup:",y,"setting."].join(" ")),h.bingroup=m,s(h,m,o(h))}}else a.push(_[0]);for(d=0;d<a.length;d++){h=a[d];var v=i("bingroup");if(L(h,"2dMap"))for(t=0;t<2;t++){var x=i((p=I[t])+"bingroup",v?v+"__"+p:null);s(h,x,p)}else s(h,v,o(h))}for(m in c)for(var b=c[m],_=b.traces,w=0;w<P.length;w++){var T,M,k=P[w],A=k.name;if("nbins"!==A||!b.sizeFound){for(d=0;d<_.length;d++){if(h=_[d],p=b.dirs[d],T=k.aStr[p],void 0!==D(h._input,T).get()){b[A]=i(T),b[A+"Found"]=!0;break}(M=(h._autoBin||{})[p]||{})[A]&&D(h,T).set(M[A])}if("start"===A||"end"===A)for(;d<_.length;d++)(h=_[d])["_"+p+"bingroup"]&&i(T,(M=(h._autoBin||{})[p]||{})[A]);"nbins"!==A||b.sizeFound||b.nbinsFound||(h=_[0],b[A]=i(T))}}}},{"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/cartesian/constraints":339,"../../registry":373,"../bar/defaults":387}],457:[function(e,t,n){"use strict";var c=e("../../registry"),u=e("../../lib"),d=e("../../components/color"),f=e("../bar/style_defaults"),p=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return u.coerce(n,r,p,e,t)}var i=a("x"),o=a("y");a("cumulative.enabled")&&(a("cumulative.direction"),a("cumulative.currentbin")),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat");var s=a("orientation",o&&!i?"h":"v"),l="v"===s?"x":"y",s="v"===s?"y":"x",o=i&&o?Math.min(u.minRowLength(i)&&u.minRowLength(o)):u.minRowLength(r[l]||[]);o?(r._length=o,c.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],t),r[s]&&a("histfunc"),a("histnorm"),a("autobin"+l),f(n,r,a,e,t),u.coerceSelectionMarkerOpacity(r,a),e=(r.marker.line||{}).color,(t=c.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||d.defaultLine,{axis:"y"}),t(n,r,e||d.defaultLine,{axis:"x",inherit:"y"})):r.visible=!1}},{"../../components/color":155,"../../lib":285,"../../registry":373,"../bar/style_defaults":398,"./attributes":449}],458:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var i=Array.isArray(a)?r[0].pts[a[0]][a[1]]:r[a].pts;if(e.pointNumbers=i,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints)for(var o=[],s=0;s<i.length;s++)o=o.concat(n._indexToPoints[i[s]]);else o=i;e.pointIndices=o}return e}},{}],459:[function(e,t,n){"use strict";var i=e("../bar/hover").hoverPoints,o=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,r,a){t=i(e,t,n,r,a);if(t){n=(e=t[0]).cd[e.index],r=e.cd[0].trace;return r.cumulative.enabled||(e[(a="h"===r.orientation?"y":"x")+"Label"]=o(e[a+"a"],[n.ph0,n.ph1],r[a+"hoverformat"])),t}}},{"../../plots/cartesian/axes":331,"../bar/hover":390}],460:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../bar/cross_trace_calc":386,"../bar/layout_attributes":392,"../bar/layout_defaults":393,"../bar/plot":394,"../bar/select":395,"../bar/style":397,"../scatter/marker_colorbar":512,"./attributes":449,"./calc":454,"./cross_trace_defaults":456,"./defaults":457,"./event_data":458,"./hover":459}],461:[function(e,t,n){"use strict";t.exports={percent:function(e,t){for(var n=e.length,r=100/t,a=0;a<n;a++)e[a]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var a=e.length;r=r||1;for(var i=0;i<a;i++)e[i]*=n[i]*r},"probability density":function(e,t,n,r){var a=e.length;r&&(t/=r);for(var i=0;i<a;i++)e[i]*=n[i]/t}}},{}],462:[function(e,t,n){"use strict";var r=e("../histogram/attributes"),a=e("../histogram/bin_attributes"),i=e("../heatmap/attributes"),o=e("../../plots/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../components/colorscale/attributes"),e=e("../../lib/extend").extendFlat;t.exports=e({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:a("x"),nbinsy:r.nbinsy,ybins:a("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:e({},r.bingroup,{}),xbingroup:e({},r.bingroup,{}),ybingroup:e({},r.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:l({},{keys:"z"}),showlegend:e({},o.showlegend,{dflt:!1})},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../heatmap/attributes":434,"../histogram/attributes":449,"../histogram/bin_attributes":451}],463:[function(e,t,n){"use strict";var re=e("../../lib"),ae=e("../../plots/cartesian/axes"),ie=e("../histogram/bin_functions"),oe=e("../histogram/norm_functions"),se=e("../histogram/average"),d=e("../histogram/bin_label_vals"),le=e("../histogram/calc").calcAllAutoBins;function ce(e,t,n,r){var a=new Array(e);if(r)for(o=0;o<e;o++)a[o]=1/(t[o+1]-t[o]);else for(var i=1/n,o=0;o<e;o++)a[o]=i;return a}function ue(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function de(e,t,n,r,a,i){for(var o=e.length-1,s=new Array(o),l=d(n,r,e,a,i),c=0;c<o;c++){var u=(t||[])[c];s[c]=void 0===u?[l(e[c]),l(e[c+1],!0)]:[u,u]}return s}t.exports=function(e,t){function n(e){return a.r2c(e,0,o)}function r(e){return i.r2c(e,0,s)}var a=ae.getFromId(e,t.xaxis),i=ae.getFromId(e,t.yaxis),o=t.xcalendar,s=t.ycalendar,l=le(e,t,a,"x"),c=l[0],u=l[1],d=le(e,t,i,"y"),f=d[0],p=d[1],h=t._length;u.length>h&&u.splice(h,u.length-h),p.length>h&&p.splice(h,p.length-h);var m=[],g=[],y=[],v="string"==typeof c.size,x="string"==typeof f.size,b=[],_=[],w=v?b:c,T=x?_:f,M=0,k=[],A=[],l=t.histnorm,e=t.histfunc,d=-1!==l.indexOf("density"),S="max"===e||"min"===e?null:0,E=ie.count,L=oe[l],C=!1,D=[],O=[],P="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";P&&"count"!==e&&(C="avg"===e,E=ie[e]);for(var I=c.size,t=n(c.start),R=n(c.end)+(t-ae.tickIncrement(t,I,!1,o))/1e6,N=t;N<R;N=ae.tickIncrement(N,I,!1,o))g.push(S),b.push(N),C&&y.push(0);b.push(N);var z,F=g.length,e=(N-t)/F,c=(z=t+e/2,a.c2r(z,0,o)),j=f.size,t=r(f.start),H=r(f.end)+(t-ae.tickIncrement(t,j,!1,s))/1e6;for(N=t;N<H;N=ae.tickIncrement(N,j,!1,s)){m.push(g.slice()),_.push(N);for(var B=new Array(F),q=0;q<F;q++)B[q]=[];A.push(B),C&&k.push(y.slice())}_.push(N);var U,Y=m.length,f=(N-t)/Y,t=(U=t+f/2,i.c2r(U,0,s));d&&(D=ce(g.length,w,e,v),O=ce(m.length,T,f,x)),v||"date"!==a.type||(w=ue(n,w)),x||"date"!==i.type||(T=ue(r,T));var V=!0,G=!0,W=new Array(F),Z=new Array(Y),$=1/0,X=1/0,J=1/0,K=1/0;for(N=0;N<h;N++){var Q=u[N],ee=p[N],te=re.findBin(Q,w),ne=re.findBin(ee,T);0<=te&&te<F&&0<=ne&&ne<Y&&(M+=E(te,N,m[ne],P,k[ne]),A[ne][te].push(N),V&&(void 0===W[te]?W[te]=Q:W[te]!==Q&&(V=!1)),G&&(void 0===Z[ne]?Z[ne]=ee:Z[ne]!==ee&&(G=!1)),$=Math.min($,Q-b[te]),X=Math.min(X,b[te+1]-Q),J=Math.min(J,ee-_[ne]),K=Math.min(K,_[ne+1]-ee))}if(C)for(ne=0;ne<Y;ne++)M+=se(m[ne],k[ne]);if(L)for(ne=0;ne<Y;ne++)L(m[ne],M,D,O[ne]);return{x:u,xRanges:de(b,V&&W,$,X,a,o),x0:c,dx:e,y:p,yRanges:de(_,G&&Z,J,K,i,s),y0:t,dy:f,z:m,pts:A}}},{"../../lib":285,"../../plots/cartesian/axes":331,"../histogram/average":450,"../histogram/bin_functions":452,"../histogram/bin_label_vals":453,"../histogram/calc":454,"../histogram/norm_functions":461}],464:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./sample_defaults"),s=e("../heatmap/style_defaults"),l=e("../../components/colorscale/defaults"),c=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return i.coerce(n,r,c,e,t)}o(n,r,a,t),!1!==r.visible&&(s(n,r,a,t),l(n,r,t,a,{prefix:"",cLetter:"z"}),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"))}},{"../../components/colorscale/defaults":165,"../../lib":285,"../heatmap/style_defaults":447,"./attributes":462,"./sample_defaults":467}],465:[function(e,t,n){"use strict";var o=e("../heatmap/hover"),s=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,r,a){var i=o(e,t,n,r,a);if(i){t=(e=i[0]).index,n=t[0],r=t[1],a=e.cd[0],t=a.trace,r=a.xRanges[r],n=a.yRanges[n];return e.xLabel=s(e.xa,[r[0],r[1]],t.xhoverformat),e.yLabel=s(e.ya,[n[0],n[1]],t.yhoverformat),i}}},{"../../plots/cartesian/axes":331,"../heatmap/hover":441}],466:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../heatmap/calc":435,"../heatmap/colorbar":437,"../heatmap/plot":445,"../heatmap/style":446,"../histogram/cross_trace_defaults":456,"../histogram/event_data":458,"./attributes":462,"./defaults":464,"./hover":465}],467:[function(e,t,n){"use strict";var o=e("../../registry"),s=e("../../lib");t.exports=function(e,t,n,r){var a=n("x"),i=n("y"),a=s.minRowLength(a),i=s.minRowLength(i);a&&i?(t._length=Math.min(a,i),o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),(n("z")||n("marker.color"))&&n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")):t.visible=!1}},{"../../lib":285,"../../registry":373}],468:[function(e,t,n){"use strict";var r=e("../histogram2d/attributes"),a=e("../contour/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=e("../../lib/extend").extendFlat;t.exports=e({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:{color:a.line.color,width:e({},a.line.width,{dflt:.5}),dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:r.hovertemplate},i("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../contour/attributes":412,"../histogram2d/attributes":462}],469:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../histogram2d/sample_defaults"),s=e("../contour/contours_defaults"),l=e("../contour/style_defaults"),c=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return i.coerce(n,r,c,e,t)}o(n,r,a,t),!1!==r.visible&&(s(n,r,a,function(e){return i.coerce2(n,r,c,e)}),l(n,r,a,t),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"))}},{"../../lib":285,"../contour/contours_defaults":419,"../contour/style_defaults":433,"../histogram2d/sample_defaults":467,"./attributes":468}],470:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../contour/calc":413,"../contour/colorbar":415,"../contour/hover":425,"../contour/plot":430,"../contour/style":432,"../histogram/cross_trace_defaults":456,"./attributes":468,"./defaults":469}],471:[function(e,t,n){"use strict";for(var r=e("../../plots/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../lib/extend").extendFlat,o=e("./constants").colormodel,s=["rgb","rgba","rgba256","hsl","hsla"],l=[],c=[],u=0;u<s.length;u++){var d=o[s[u]];l.push("For the `"+s[u]+"` colormodel, it is ["+(d.zminDflt||d.min).join(", ")+"]."),c.push("For the `"+s[u]+"` colormodel, it is ["+(d.zmaxDflt||d.max).join(", ")+"].")}t.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:s,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:a({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"./constants":473}],472:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("./constants"),f=e("fast-isnumeric"),p=e("../../plots/cartesian/axes"),h=e("../../lib").maxRowLength,m=e("./helpers").getImageSize;t.exports=function(e,t){var n,r;t._hasZ?(n=t.z.length,r=h(t.z)):t._hasSource&&(n=(i=m(t.source)).height,r=i.width);var a,i=p.getFromId(e,t.xaxis||"x"),e=p.getFromId(e,t.yaxis||"y"),o=i.d2c(t.x0)-t.dx/2,s=e.d2c(t.y0)-t.dy/2,l=[o,o+r*t.dx],c=[s,s+n*t.dy];if(i&&"log"===i.type)for(a=0;a<r;a++)l.push(o+a*t.dx);if(e&&"log"===e.type)for(a=0;a<n;a++)c.push(s+a*t.dy);return t._extremes[i._id]=p.findExtremes(i,l),t._extremes[e._id]=p.findExtremes(e,c),t._scaler=function(a){var e=d.colormodel[a.colormodel],i=(e.colormodel||a.colormodel).length;a._sArray=[];for(var t=0;t<i;t++)e.min[t]!==a.zmin[t]||e.max[t]!==a.zmax[t]?a._sArray.push(function(t,n,r,a){return function(e){return u.constrain((e-t)*n,r,a)}}(a.zmin[t],(e.max[t]-e.min[t])/(a.zmax[t]-a.zmin[t]),e.min[t],e.max[t])):a._sArray.push(function(t,n){return function(e){return u.constrain(e,t,n)}}(e.min[t],e.max[t]));return function(e){for(var t=e.slice(0,i),n=0;n<i;n++){var r=t[n];if(!f(r))return!1;t[n]=a._sArray[n](r)}return t}}(t),[{x0:o,y0:s,z:t.z,w:r,h:n}]}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":473,"./helpers":476,"fast-isnumeric":31}],473:[function(e,t,n){"use strict";t.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){e=e.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){e=e.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],474:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./attributes"),s=e("./constants"),l=e("../../snapshot/helpers").IMAGE_URL_PREFIX;t.exports=function(n,r){function e(e,t){return i.coerce(n,r,o,e,t)}e("source"),r.source&&!r.source.match(l)&&delete r.source,r._hasSource=!!r.source;var t,a=e("z");r._hasZ=!(void 0===a||!a.length||!a[0]||!a[0].length),r._hasZ||r._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),r._hasZ?(e("colormodel","rgb"),e("zmin",(t=s.colormodel[r.colormodel]).zminDflt||t.min),e("zmax",t.zmaxDflt||t.max)):r._hasSource&&(r.colormodel="rgba256",t=s.colormodel[r.colormodel],r.zmin=t.zminDflt,r.zmax=t.zmaxDflt),e("zsmooth"),e("text"),e("hovertext"),e("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":285,"../../snapshot/helpers":377,"./attributes":471,"./constants":473}],475:[function(e,t,n){"use strict";t.exports=function(e,t){return"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e.color=t.color,e.colormodel=t.trace.colormodel,e.z||(e.z=t.color),e}},{}],476:[function(e,t,n){"use strict";var r=e("probe-image-size/sync"),a=e("../../snapshot/helpers").IMAGE_URL_PREFIX,i=e("buffer/").Buffer;n.getImageSize=function(e){e=e.replace(a,""),e=new i(e,"base64");return r(e)}},{"../../snapshot/helpers":377,"buffer/":28,"probe-image-size/sync":95}],477:[function(e,t,n){"use strict";var m=e("../../components/fx"),g=e("../../lib"),y=e("./constants");t.exports=function(e,t,n){var r=e.cd[0],a=r.trace,i=e.xa,o=e.ya;if(!(0<m.inbox(t-r.x0,t-(r.x0+r.w*a.dx),0)||0<m.inbox(n-r.y0,n-(r.y0+r.h*a.dy),0))){var s=Math.floor((t-r.x0)/a.dx),l=Math.floor(Math.abs(n-r.y0)/a.dy);if(a._hasZ?h=r.z[l][s]:a._hasSource&&(h=a._canvas.el.getContext("2d").getImageData(s,l,1,1).data),h){var c,u=r.hi||a.hoverinfo;!u||-1!==(p=-1!==(p=u.split("+")).indexOf("all")?["color"]:p).indexOf("color")&&(c=!0);var d,f=y.colormodel[a.colormodel],t=f.colormodel||a.colormodel,n=t.length,u=a._scaler(h),p=f.suffix,f=[];(a.hovertemplate||c)&&(f.push("["+[u[0]+p[0],u[1]+p[1],u[2]+p[2]].join(", ")),4===n&&f.push(", "+u[3]+p[3]),f.push("]"),f=f.join(""),e.extraText=t.toUpperCase()+": "+f),Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[l])?d=a.hovertext[l][s]:Array.isArray(a.text)&&Array.isArray(a.text[l])&&(d=a.text[l][s]);var n=o.c2p(r.y0+(l+.5)*a.dy),t=r.x0+(s+.5)*a.dx,o=r.y0+(l+.5)*a.dy,h="["+h.slice(0,a.colormodel.length).join(", ")+"]";return[g.extendFlat(e,{index:[l,s],x0:i.c2p(r.x0+s*a.dx),x1:i.c2p(r.x0+(s+1)*a.dx),y0:n,y1:n,color:u,xVal:t,xLabelVal:t,yVal:o,yLabelVal:o,zLabelVal:h,text:d,hovertemplateLabels:{zLabel:h,colorLabel:f,"color[0]Label":u[0]+p[0],"color[1]Label":u[1]+p[1],"color[2]Label":u[2]+p[2],"color[3]Label":u[3]+p[3]}})]}}}},{"../../components/fx":195,"../../lib":285,"./constants":473}],478:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":345,"./attributes":471,"./calc":472,"./defaults":474,"./event_data":475,"./hover":477,"./plot":479,"./style":480}],479:[function(e,t,n){"use strict";var E=e("@plotly/d3"),L=e("../../lib"),C=L.strTranslate,D=e("../../constants/xmlns_namespaces"),O=e("./constants"),r=L.isIOS()||L.isSafari()||L.isIE();t.exports=function(p,e,t,n){var k=e.xaxis,A=e.yaxis,S=!(r||p._context._exportedPlot);L.makeTraceGroups(n,t,"im").each(function(e){var t=E.select(this),h=e[0],m=h.trace,r=("fast"===m.zsmooth||!1===m.zsmooth&&S)&&!m._hasZ&&m._hasSource&&"linear"===k.type&&"linear"===A.type;m._realImage=r;for(var g,n,y,a,i=h.z,v=h.x0,x=h.y0,o=h.w,s=h.h,b=m.dx,_=m.dy,w=0;void 0===g&&w<o;)g=k.c2p(v+w*b),w++;for(w=o;void 0===n&&0<w;)n=k.c2p(v+w*b),w--;for(w=0;void 0===y&&w<s;)y=A.c2p(x+w*_),w++;for(w=s;void 0===a&&0<w;)a=A.c2p(x+w*_),w--;n<g&&(u=n,n=g,g=u),a<y&&(u=y,y=a,a=u),r||(g=Math.max(-.5*k._length,g),n=Math.min(1.5*k._length,n),y=Math.max(-.5*A._length,y),a=Math.min(1.5*A._length,a));var l,c,u,d,T=Math.round(n-g),M=Math.round(a-y);function f(e){var t=document.createElement("canvas");t.width=T,t.height=M;function n(e){return L.constrain(Math.round(k.c2p(v+e*b)-g),0,T)}function r(e){return L.constrain(Math.round(A.c2p(x+e*_)-y),0,M)}var a,i=t.getContext("2d"),o=O.colormodel[m.colormodel],s=o.colormodel||m.colormodel,l=o.fmt;for(w=0;w<h.w;w++){var c=n(w),u=n(w+1);if(u!==c&&!isNaN(u)&&!isNaN(c))for(var d=0;d<h.h;d++){var f=r(d),p=r(d+1);p===f||isNaN(p)||isNaN(f)||!e(w,d)||(a=m._scaler(e(w,d)),i.fillStyle=a?s+"("+l(a).join(",")+")":"rgba(0,0,0,0)",i.fillRect(c,f,u-c,p-f))}}return t}T<=0||M<=0?t.selectAll("image").data([]).exit().remove():((l=t.selectAll("image").data([e])).enter().append("svg:image").attr({xmlns:D.svg,preserveAspectRatio:"none"}),l.exit().remove(),d=!1===m.zsmooth?O.pixelatedStyle:"",r&&(c=L.simpleMap(k.range,k.r2l),u=L.simpleMap(A.range,A.r2l),t=c[1]<c[0],e=u[1]>u[0],(t||e)&&(d+="transform:"+C((c=g+T/2)+"px",(u=y+M/2)+"px")+"scale("+(t?-1:1)+","+(e?-1:1)+")"+C(-c+"px",-u+"px")+";")),l.attr("style",d),d=new Promise(function(e){var t,n,r;m._hasZ?e():m._hasSource&&(m._canvas&&m._canvas.el.width===o&&m._canvas.el.height===s&&m._canvas.source===m.source?e():((t=document.createElement("canvas")).width=o,t.height=s,n=t.getContext("2d"),m._image=m._image||new Image,(r=m._image).onload=function(){n.drawImage(r,0,0),m._canvas={el:t,source:m.source},e()},r.setAttribute("src",m.source)))}).then(function(){var n,e;m._hasZ?e=f(function(e,t){return i[t][e]}).toDataURL("image/png"):m._hasSource&&(e=r?m.source:(n=m._canvas.el.getContext("2d").getImageData(0,0,o,s).data,f(function(e,t){e=4*(t*o+e);return[n[e],n[1+e],n[2+e],n[3+e]]}).toDataURL("image/png"))),l.attr({"xlink:href":e,height:M,width:T,x:g,y:y})}),p._promises.push(d))})}},{"../../constants/xmlns_namespaces":266,"../../lib":285,"./constants":473,"@plotly/d3":20}],480:[function(e,t,n){"use strict";var r=e("@plotly/d3");t.exports=function(e){r.select(e).selectAll(".im image").style("opacity",function(e){return e[0].trace.opacity})}},{"@plotly/d3":20}],481:[function(e,t,n){"use strict";var r=e("../../plots/attributes"),a=e("../../plots/domain").attributes,i=e("../../plots/font_attributes"),o=e("../../components/color/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,e=e("../../lib/extend").extendFlat,i=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:e({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:e({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:e({},i,{}),outsidetextfont:e({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:e({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:e({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/domain":359,"../../plots/font_attributes":360,"../../plots/template_attributes":368}],482:[function(e,t,a){"use strict";var i=e("../../plots/plots");a.name="pie",a.plot=function(e,t,n,r){i.plotBasePlot(a.name,e,t,n,r)},a.clean=function(e,t,n,r){i.cleanBasePlot(a.name,e,t,n,r)}},{"../../plots/plots":366}],483:[function(e,t,n){"use strict";var v=e("fast-isnumeric"),i=e("tinycolor2"),r=e("../../components/color"),d={};function x(n){return function(e,t){return!!e&&(!!(e=i(e)).isValid()&&(e=r.addOpacity(e,e.getAlpha()),n[t]||(n[t]=e),e))}}function f(e,t){var n,r=JSON.stringify(e),a=t[r];if(!a){for(a=e.slice(),n=0;n<e.length;n++)a.push(i(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)a.push(i(e[n]).darken(20).toHexString());t[r]=a}return a}t.exports={calc:function(e,t){var n=[],r=(e=e._fullLayout).hiddenlabels||[],a=t.labels,i=t.marker.colors||[],o=t.values,s=t._length,l=t._hasValues&&s;if(t.dlabel)for(a=new Array(s),m=0;m<s;m++)a[m]=String(t.label0+m*t.dlabel);for(var c,u,d={},f=x(e["_"+t.type+"colormap"]),p=0,h=!1,m=0;m<s;m++){if(l){if(c=o[m],!v(c))continue;if((c=+c)<0)continue}else c=1;void 0!==(g=a[m])&&""!==g||(g=m);var g,y=d[g=String(g)];void 0===y?(d[g]=n.length,(u=-1!==r.indexOf(g))||(p+=c),n.push({v:c,label:g,color:f(i[m],g),i:m,pts:[m],hidden:u})):(h=!0,(y=n[y]).v+=c,y.pts.push(m),y.hidden||(p+=c),!1===y.color&&i[m]&&(y.color=f(i[m],g)))}return("funnelarea"===t.type?h:t.sort)&&n.sort(function(e,t){return t.v-e.v}),n[0]&&(n[0].vTotal=p),n},crossTraceCalc:function(e,t){var n=(n=(t||{}).type)||"pie",t=e._fullLayout,r=e.calcdata,a=t[n+"colorway"],i=t["_"+n+"colormap"];t["extend"+n+"colors"]&&(a=f(a,d));for(var o=0,s=0;s<r.length;s++){var l=r[s];if(l[0].trace.type===n)for(var c=0;c<l.length;c++){var u=l[c];!1===u.color&&(i[u.label]?u.color=i[u.label]:(i[u.label]=u.color=a[o%a.length],o++))}}},makePullColorFn:x,generateExtendedColors:f}},{"../../components/color":155,"fast-isnumeric":31,tinycolor2:119}],484:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../lib"),u=e("./attributes"),d=e("../../plots/domain").defaults,f=e("../bar/defaults").handleText;function p(e,t){var n=Array.isArray(e),r=c.isArrayOrTypedArray(t),a=Math.min(n?e.length:1/0,r?t.length:1/0);if((a=!isFinite(a)?0:a)&&r){for(var i,o=0;o<a;o++){var s=t[o];if(l(s)&&0<s){i=!0;break}}i||(a=0)}return{hasLabels:n,hasValues:r,len:a}}t.exports={handleLabelsAndValues:p,supplyDefaults:function(n,r,e,t){function a(e,t){return c.coerce(n,r,u,e,t)}var i,o,s=p(a("labels"),a("values")),l=s.len;r._hasLabels=s.hasLabels,r._hasValues=s.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),l?(r._length=l,a("marker.line.width")&&a("marker.line.color"),a("marker.colors"),a("scalegroup"),s=a("text"),(l=a("texttemplate"))||(i=a("textinfo",Array.isArray(s)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),(l||i&&"none"!==i)&&(o=a("textposition"),f(n,r,t,a,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),!Array.isArray(o)&&"auto"!==o&&"outside"!==o||a("automargin"),"inside"!==o&&"auto"!==o&&!Array.isArray(o)||a("insidetextorientation")),d(r,t,a),i=a("hole"),a("title.text")&&(o=a("title.position",i?"middle center":"top center"),i||"middle center"!==o||(r.title.position="top center"),c.coerceFont(a,"title.font",t.font)),a("sort"),a("direction"),a("rotation"),a("pull")):r.visible=!1}}},{"../../lib":285,"../../plots/domain":359,"../bar/defaults":387,"./attributes":481,"fast-isnumeric":31}],485:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},{"../../components/fx/helpers":191}],486:[function(e,t,n){"use strict";var r=e("../../lib");function a(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function(e,t){e=a((100*e).toPrecision(3));return r.numSeparate(e,t)+"%"},n.formatPieValue=function(e,t){e=a(e.toPrecision(10));return r.numSeparate(e,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r||""===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0},n.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},{"../../lib":285}],487:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":481,"./base_plot":482,"./calc":483,"./defaults":484,"./layout_attributes":488,"./layout_defaults":489,"./plot":490,"./style":491,"./style_one":492}],488:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],489:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return a.coerce(n,r,i,e,t)}e("hiddenlabels"),e("piecolorway",r.colorway),e("extendpiecolors")}},{"../../lib":285,"./layout_attributes":488}],490:[function(e,t,n){"use strict";var x=e("@plotly/d3"),l=e("../../plots/plots"),m=e("../../components/fx"),c=e("../../components/color"),b=e("../../components/drawing"),_=e("../../lib"),u=_.strScale,d=_.strTranslate,w=e("../../lib/svg_text_utils"),r=e("../bar/uniform_text"),T=r.recordMinTextSize,a=r.clearMinTextSize,o=e("../bar/constants").TEXTPAD,M=e("./helpers"),g=e("./event_data"),p=e("../../lib").isValidTextValue;function k(e,u,t){var d=t[0],f=d.trace,p=d.cx,h=d.cy;"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),e.on("mouseover",function(e){var t,n,r,a,i,o,s,l=u._fullLayout,c=u._fullData[f.index];u._dragging||!1===l.hovermode||(t=c.hoverinfo,"all"===(t=Array.isArray(t)?m.castHoverinfo({hoverinfo:[M.castOption(t,e.pts)],_module:f._module},l,0):t)&&(t="label+text+value+percent+name"),(c.hovertemplate||"none"!==t&&"skip"!==t&&t)&&(n=e.rInscribed||0,r=p+e.pxmid[0]*(1-n),a=h+e.pxmid[1]*(1-n),s=l.separators,i=[],t&&-1!==t.indexOf("label")&&i.push(e.label),e.text=M.castOption(c.hovertext||c.text,e.pts),t&&-1!==t.indexOf("text")&&(o=e.text,_.isValidTextValue(o)&&i.push(o)),e.value=e.v,e.valueLabel=M.formatPieValue(e.v,s),t&&-1!==t.indexOf("value")&&i.push(e.valueLabel),e.percent=e.v/d.vTotal,e.percentLabel=M.formatPiePercent(e.percent,s),t&&-1!==t.indexOf("percent")&&i.push(e.percentLabel),s=(o=c.hoverlabel).font,m.loneHover({trace:f,x0:r-n*d.r,x1:r+n*d.r,y:a,text:i.join("<br>"),name:c.hovertemplate||-1!==t.indexOf("name")?c.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:M.castOption(o.bgcolor,e.pts)||e.color,borderColor:M.castOption(o.bordercolor,e.pts),fontFamily:M.castOption(s.family,e.pts),fontSize:M.castOption(s.size,e.pts),fontColor:M.castOption(s.color,e.pts),nameLength:M.castOption(o.namelength,e.pts),textAlign:M.castOption(o.align,e.pts),hovertemplate:M.castOption(c.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[g(e,c)]},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:u}),f._hasHoverLabel=!0),f._hasHoverEvent=!0,u.emit("plotly_hover",{points:[g(e,c)],event:x.event}))}),e.on("mouseout",function(e){var t=u._fullLayout,n=u._fullData[f.index],r=x.select(this).datum();f._hasHoverEvent&&(e.originalEvent=x.event,u.emit("plotly_unhover",{points:[g(r,n)],event:x.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(m.loneUnhover(t._hoverlayer.node()),f._hasHoverLabel=!1)}),e.on("click",function(e){var t=u._fullLayout,n=u._fullData[f.index];u._dragging||!1===t.hovermode||(u._hoverdata=[g(e,n)],m.click(u,x.event))})}function A(e,t,n){var r=M.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=M.castOption(e._input.textfont.color,t.pts));var a=M.castOption(e.insidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||n.family,n=M.castOption(e.insidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||n.size;return{color:r||c.contrast(t.color),family:a,size:n}}function i(e,t){for(var n,r,a,i=0;i<e.length;i++)(a=(r=e[i][0]).trace).title.text&&(n=a.title.text,a._meta&&(n=_.templateString(n,a._meta)),n=b.tester.append("text").attr("data-notex",1).text(n).call(b.font,a.title.font).call(w.convertToTspans,t),a=b.bBox(n.node(),!0),r.titleBox={width:a.width,height:a.height},n.remove())}function S(i,o,e){var s=e.r||o.rpx1,t=o.rInscribed;if(o.startangle===o.stopangle)return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0};var l=o.ring,n=1===l&&Math.abs(o.startangle-o.stopangle)===2*Math.PI,r=o.halfangle,a=o.midangle,c=e.trace.insidetextorientation,u="horizontal"===c,d="tangential"===c,e="radial"===c,f="auto"===c,p=[];if(!f){var h,m=function(e,t){var n,r,a;r=e,a=(n=o).startangle,n=n.stopangle,(r<a&&n<r||a<r&&r<n)&&(n=(r=Math.abs(e-o.startangle))<(n=Math.abs(e-o.stopangle))?r:n,(g="tan"===t?L(i,s,l,n,0):E(i,s,l,n,Math.PI/2)).textPosAngle=e,p.push(g))};if(u||d){for(h=4;-4<=h;h-=2)m(Math.PI*h,"tan");for(h=4;-4<=h;h-=2)m(Math.PI*(h+1),"tan")}if(u||e){for(h=4;-4<=h;h-=2)m(Math.PI*(h+1.5),"rad");for(h=4;-4<=h;h-=2)m(Math.PI*(h+.5),"rad")}}if(n||f||u){var g,u=Math.sqrt(i.width*i.width+i.height*i.height);if((g={scale:t*s*2/u,rCenter:1-t,rotate:0}).textPosAngle=(o.startangle+o.stopangle)/2,1<=g.scale)return g;p.push(g)}(f||e)&&((g=E(i,s,l,r,a)).textPosAngle=(o.startangle+o.stopangle)/2,p.push(g)),(f||d)&&((g=L(i,s,l,r,a)).textPosAngle=(o.startangle+o.stopangle)/2,p.push(g));for(var y=0,v=0,x=0;x<p.length;x++){var b=p[x].scale;if(v<b&&(v=b,y=x),!f&&1<=v)break}return p[y]}function E(e,t,n,r,a){t=Math.max(0,t-2*o);var i=e.width/e.height,n=h(i,r,t,n);return{scale:2*n/e.height,rCenter:s(i,n/t),rotate:f(a)}}function L(e,t,n,r,a){t=Math.max(0,t-2*o);var i=e.height/e.width,n=h(i,r,t,n);return{scale:2*n/e.width,rCenter:s(i,n/t),rotate:f(a+Math.PI/2)}}function s(e,t){return Math.cos(t)-e*t}function f(e){return(180/Math.PI*e+720)%180-90}function h(e,t,n,r){t=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(t*t+.5)+t),r/(Math.sqrt(e*e+r/2)+e))}function C(e,t){var n=t.pxmid[0],r=t.pxmid[1],t=e.width/2,e=e.height/2;return n<0&&(t*=-1),r<0&&(e*=-1),{scale:1,rCenter:1,rotate:0,x:t+Math.abs(e)*(0<t?1:-1)/2,y:e/(1+n*n/(r*r)),outside:!0}}function D(e,t){var n,r,a,i=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=i.title.font.size,a=v(i),-1!==i.title.position.indexOf("top")?(o.y-=(1+a)*e.r,s.ty-=e.titleBox.height):-1!==i.title.position.indexOf("bottom")&&(o.y+=(1+a)*e.r);var l,l=(l=e.r,c=e.trace.aspectratio,l/(void 0===c?1:c)),c=t.w*(i.domain.x[1]-i.domain.x[0])/2;return-1!==i.title.position.indexOf("left")?(c+=l,o.x-=(1+a)*l,s.tx+=e.titleBox.width/2):-1!==i.title.position.indexOf("center")?c*=2:-1!==i.title.position.indexOf("right")&&(c+=l,o.x+=(1+a)*l,s.tx-=e.titleBox.width/2),n=c/e.titleBox.width,r=y(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(n,r),tx:s.tx,ty:s.ty}}function y(e,t){var n=e.trace,n=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function v(e){var t,n=e.pull;if(!n)return 0;if(Array.isArray(n))for(t=n=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}function O(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r][0],i=a.trace,o=i.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);i.title.text&&"middle center"!==i.title.position&&(l-=y(a,t));o=l/2;"funnelarea"!==i.type||i.scalegroup||(o/=i.aspectratio),a.r=Math.min(s/2,o)/(1+v(i)),a.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2,a.cy=t.t+t.h*(1-i.domain.y[0])-l/2,i.title.text&&-1!==i.title.position.indexOf("bottom")&&(a.cy-=y(a,t)),i.scalegroup&&-1===n.indexOf(i.scalegroup)&&n.push(i.scalegroup)}!function(e,t){for(var n,r,a,i,o,s,l=0;l<t.length;l++){var c,u=1/0,d=t[l];for(r=0;r<e.length;r++)n=e[r][0],(a=n.trace).scalegroup===d&&("pie"===a.type?i=n.r*n.r:"funnelarea"===a.type&&(1<a.aspectratio?(o=n.r,s=o/a.aspectratio):(s=n.r,o=s*a.aspectratio),o*=(1+a.baseratio)/2,i=o*s),u=Math.min(u,i/n.vTotal));for(r=0;r<e.length;r++)n=e[r][0],(a=n.trace).scalegroup===d&&(c=u*n.vTotal,"funnelarea"===a.type&&(c/=(1+a.baseratio)/2,c/=a.aspectratio),n.r=Math.sqrt(c))}}(e,n)}function P(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function I(e,t,n){var r,a,i,o,s,l,c=e._fullLayout,u=n.trace,d=u.texttemplate,f=u.textinfo;!d&&f&&"none"!==f&&(r=f.split("+"),s=(o=function(e){return-1!==r.indexOf(e)})("label"),i=o("text"),a=o("value"),f=o("percent"),o=c.separators,s=s?[t.label]:[],i&&(i=M.getFirstFilled(u.text,t.pts),p(i)&&s.push(i)),a&&s.push(M.formatPieValue(t.v,o)),f&&s.push(M.formatPiePercent(t.v/n.vTotal,o)),t.text=s.join("<br>")),d&&((o=_.castOption(u,t.i,"texttemplate"))?(s={label:(l=t).label,value:l.v,valueLabel:M.formatPieValue(l.v,c.separators),percent:l.v/n.vTotal,percentLabel:M.formatPiePercent(l.v/n.vTotal,c.separators),color:l.color,text:l.text,customdata:_.castOption(u,l.i,"customdata")},d=M.getFirstFilled(u.text,t.pts),!p(d)&&""!==d||(s.text=d),t.text=_.texttemplateString(o,s,e._fullLayout._d3locale,s,u._meta||{})):t.text="")}function R(e,t){var n=e.rotate*Math.PI/180,r=Math.cos(n),a=Math.sin(n),n=(t.left+t.right)/2,t=(t.top+t.bottom)/2;e.textX=n*r-t*a,e.textY=n*a+t*r,e.noCenter=!0}t.exports={plot:function(y,e){var v=y._fullLayout,o=v._size;a("pie",v),i(e,y),O(e,o);var t=_.makeTraceGroups(v._pielayer,e,"trace").each(function(h){var a=x.select(this),m=h[0],g=m.trace;!function(e){var t,n,r,a=e[0],i=a.r,o=a.trace,s=M.getRotationAngle(o.rotation),l=2*Math.PI/a.vTotal,c="px0",u="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;s+=l*e[t].v,l*=-1,c="px1",u="px0"}for(r=P(i,s),t=0;t<e.length;t++)(n=e[t]).hidden||(n[c]=r,n.startangle=s,s+=l*n.v/2,n.pxmid=P(i,s),n.midangle=s,s+=l*n.v/2,r=P(i,s),n.stopangle=s,n[u]=r,n.largeArc=n.v>a.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/a.vTotal,.5),n.ring=1-o.hole,n.rInscribed=function(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}(n,a))}(h),a.attr("stroke-linejoin","round"),a.each(function(){var e=x.select(this).selectAll("g.slice").data(h);e.enter().append("g").classed("slice",!0),e.exit().remove();var i=[[[],[]],[[],[]]],p=!1;e.each(function(l,c){var u,d,e,t,n,f,r;function a(e,t,n,r){var a=r*(t[0]-e[0]),e=r*(t[1]-e[1]);return"a"+r*m.r+","+r*m.r+" 0 "+l.largeArc+(n?" 1 ":" 0 ")+a+","+e}l.hidden?x.select(this).selectAll("path,g").remove():(l.pointNumber=l.i,l.curveNumber=g.index,i[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l),u=m.cx,d=m.cy,(e=(r=x.select(this)).selectAll("path.surface").data([l])).enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),r.call(k,y,h),!g.pull||0<(n=+M.castOption(g.pull,l.pts)||0)&&(u+=n*l.pxmid[0],d+=n*l.pxmid[1]),l.cxFinal=u,l.cyFinal=d,n=g.hole,l.v===m.vTotal?(t="M"+(u+l.px0[0])+","+(d+l.px0[1])+a(l.px0,l.pxmid,!0,1)+a(l.pxmid,l.px0,!0,1)+"Z",n?e.attr("d","M"+(u+n*l.px0[0])+","+(d+n*l.px0[1])+a(l.px0,l.pxmid,!1,n)+a(l.pxmid,l.px0,!1,n)+"Z"+t):e.attr("d",t)):(t=a(l.px0,l.px1,!0,1),n?e.attr("d","M"+(u+n*l.px1[0])+","+(d+n*l.px1[1])+a(l.px1,l.px0,!1,n)+"l"+(n=1-n)*l.px0[0]+","+n*l.px0[1]+t+"Z"):e.attr("d","M"+u+","+d+"l"+l.px0[0]+","+l.px0[1]+t+"Z")),I(y,l,m),f=M.castOption(g.textposition,l.pts),(r=r.selectAll("g.slicetext").data(l.text&&"none"!==f?[0]:[])).enter().append("g").classed("slicetext",!0),r.exit().remove(),r.each(function(){var e,t,n,r,a=_.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)}),r=_.ensureUniformFontSize(y,"outside"===f?(e=g,t=l,o=v.font,n=M.castOption(e.outsidetextfont.color,t.pts)||M.castOption(e.textfont.color,t.pts)||o.color,r=M.castOption(e.outsidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||o.family,o=M.castOption(e.outsidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||o.size,{color:n,family:r,size:o}):A(g,l,v.font));a.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,r).call(w.convertToTspans,y);var i,o=b.bBox(a.node());"outside"===f?i=C(o,l):(i=S(o,l,m),"auto"===f&&i.scale<1&&(s=_.ensureUniformFontSize(y,g.outsidetextfont),a.call(b.font,s),i=C(o=b.bBox(a.node()),l)));var s=i.textPosAngle,s=void 0===s?l.pxmid:P(m.r,s);i.targetX=u+s[0]*i.rCenter+(i.x||0),i.targetY=d+s[1]*i.rCenter+(i.y||0),R(i,o),i.outside&&(s=i.targetY,l.yLabelMin=s-o.height/2,l.yLabelMid=s,l.yLabelMax=s+o.height/2,l.labelExtraX=0,l.labelExtraY=0,p=!0),i.fontSize=r.size,T(g.type,i,v),h[c].transform=i,a.attr("transform",_.getTextTransform(i))}))});var s,t,n,r=x.select(this).selectAll("g.titletext").data(g.title.text?[0]:[]);r.enter().append("g").classed("titletext",!0),r.exit().remove(),r.each(function(){var e,t=_.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)}),n=g.title.text;g._meta&&(n=_.templateString(n,g._meta)),t.text(n).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,g.title.font).call(w.convertToTspans,y),e="middle center"===g.title.position?(e=m,n=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height),{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/n,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}):D(m,o),t.attr("transform",d(e.x,e.y)+u(Math.min(1,e.scale))+d(e.tx,e.ty))}),p&&function(e,c){var t,u,n,d,f,p,h,r,a,m,i,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function g(e,t){return t.pxmid[1]-e.pxmid[1]}for(u=0;u<2;u++)for(n=u?l:g,f=u?Math.max:Math.min,h=u?1:-1,t=0;t<2;t++){for(d=t?Math.max:Math.min,p=t?1:-1,(r=e[u][t]).sort(n),a=e[1-u][t],m=a.concat(r),o=[],i=0;i<r.length;i++)void 0!==r[i].yLabelMid&&o.push(r[i]);for(s=!1,i=0;u&&i<a.length;i++)if(void 0!==a[i].yLabelMid){s=a[i];break}for(i=0;i<o.length;i++){var y=i&&o[i-1];s&&!i&&(y=s),function(e,t){var n,r,a,t=(t=t||{}).labelExtraY+(u?t.yLabelMax:t.yLabelMin),i=u?e.yLabelMin:e.yLabelMax,o=u?e.yLabelMax:e.yLabelMin,s=e.cyFinal+f(e.px0[1],e.px1[1]),l=t-i;if(0<l*h&&(e.labelExtraY=l),Array.isArray(c.pull))for(n=0;n<m.length;n++)(r=m[n])===e||(M.castOption(c.pull,e.pts)||0)>=(M.castOption(c.pull,r.pts)||0)||(0<(e.pxmid[1]-r.pxmid[1])*h?0<(l=r.cyFinal+f(r.px0[1],r.px1[1])-i-e.labelExtraY)*h&&(e.labelExtraY+=l):0<(o+e.labelExtraY-s)*h&&(a=3*p*Math.abs(n-m.indexOf(e)),0<(a=r.cxFinal+d(r.px0[0],r.px1[0])+a-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*p&&(e.labelExtraX+=a)))}(o[i],y)}}}(i,g),s=g,e.each(function(e){var t,n,r,a,i,o=x.select(this);e.labelExtraX||e.labelExtraY?(i=o.select("g.slicetext text"),e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,i.attr("transform",_.getTextTransform(e.transform)),n="M"+(t=e.cxFinal+e.pxmid[0])+","+(e.cyFinal+e.pxmid[1]),r=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4,e.labelExtraX?(a=e.labelExtraX*e.pxmid[1]/e.pxmid[0],i=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]),Math.abs(a)>Math.abs(i)?n+="l"+i*e.pxmid[0]/e.pxmid[1]+","+i+"H"+(t+e.labelExtraX+r):n+="l"+e.labelExtraX+","+a+"v"+(i-a)+"h"+r):n+="V"+(e.yLabelMid+e.labelExtraY)+"h"+r,_.ensureSingle(o,"path","textline").call(c.stroke,s.outsidetextfont.color).attr({"stroke-width":Math.min(2,s.outsidetextfont.size/8),d:n,fill:"none"})):o.select("path.textline").remove()}),p&&g.automargin&&(t=b.bBox(a.node()),n=g.domain,r=o.w*(n.x[1]-n.x[0]),e=o.h*(n.y[1]-n.y[0]),r=(.5*r-m.r)/o.w,e=(.5*e-m.r)/o.h,l.autoMargin(y,"pie."+g.uid+".automargin",{xl:n.x[0]-r,xr:n.x[1]+r,yb:n.y[0]-e,yt:n.y[1]+e,l:Math.max(m.cx-m.r-t.left,0),r:Math.max(t.right-(m.cx+m.r),0),b:Math.max(t.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-t.top,0),pad:5}))})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=x.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},formatSliceLabel:I,transformInsideText:S,determineInsideTextFont:A,positionTitleOutside:D,prerenderTitles:i,layoutAreas:O,attachFxHandlers:k,computeTransform:R}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx":195,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../bar/constants":385,"../bar/uniform_text":399,"./event_data":485,"./helpers":486,"@plotly/d3":20}],491:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("./style_one"),i=e("../bar/uniform_text").resizeText;t.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");i(e,t,"pie"),t.each(function(e){var t=e[0].trace,e=r.select(this);e.style({opacity:t.opacity}),e.selectAll("path.surface").each(function(e){r.select(this).call(a,e,t)})})}},{"../bar/uniform_text":399,"./style_one":492,"@plotly/d3":20}],492:[function(e,t,n){"use strict";var a=e("../../components/color"),i=e("./helpers").castOption;t.exports=function(e,t,n){var r=n.marker.line,n=i(r.color,t.pts)||a.defaultLine,r=i(r.width,t.pts)||0;e.style("stroke-width",r).call(a.fill,t.color).call(a.stroke,n)}},{"../../components/color":155,"./helpers":486}],493:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;a.mergeArray(t.text,e,"tx"),a.mergeArray(t.texttemplate,e,"txt"),a.mergeArray(t.hovertext,e,"htx"),a.mergeArray(t.customdata,e,"data"),a.mergeArray(t.textposition,e,"tp"),t.textfont&&(a.mergeArrayCastPositive(t.textfont.size,e,"ts"),a.mergeArray(t.textfont.color,e,"tc"),a.mergeArray(t.textfont.family,e,"tf"));var r=t.marker;r&&(a.mergeArrayCastPositive(r.size,e,"ms"),a.mergeArrayCastPositive(r.opacity,e,"mo"),a.mergeArray(r.symbol,e,"mx"),a.mergeArray(r.color,e,"mc"),t=r.line,r.line&&(a.mergeArray(t.color,e,"mlc"),a.mergeArrayCastPositive(t.width,e,"mlw")),(r=r.gradient)&&"none"!==r.type&&(a.mergeArray(r.type,e,"mgt"),a.mergeArray(r.color,e,"mgc")))}},{"../../lib":285}],494:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../components/colorscale/attributes"),s=e("../../plots/font_attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../components/drawing"),u=e("./constants"),e=e("../../lib/extend").extendFlat;function d(){return{valType:"any",dflt:0,editType:"calc"}}function f(){return{valType:"any",editType:"calc"}}function p(){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:d(),yperiod:d(),xperiod0:f(),yperiod0:f(),xperiodalignment:p(),yperiodalignment:p(),xhoverformat:r("x"),yhoverformat:r("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:a({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:e({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:e({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:e({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},o("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":162,"../../components/drawing":177,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"./constants":498}],495:[function(e,t,n){"use strict";var D=e("fast-isnumeric"),O=e("../../lib"),P=e("../../plots/cartesian/axes"),I=e("../../plots/cartesian/align_period"),R=e("../../constants/numerical").BADNUM,h=e("./subtypes"),N=e("./colorscale_calc"),z=e("./arrays_to_calcdata"),F=e("./calc_selection");function j(e,t,n,r,a,i,o){var s=t._length,l=e._fullLayout,c=n._id,u=r._id,d=l._firstScatter[m(t)]===t.uid,f=(q(t,l,n,r)||{}).orientation,p=t.fill;n._minDtick=0;e={padded:!(r._minDtick=0)},l={padded:!0};o&&(e.ppad=l.ppad=o);s=s<2||a[0]!==a[s-1]||i[0]!==i[s-1];s&&("tozerox"===p||"tonextx"===p&&(d||"h"===f))?e.tozero=!0:(t.error_y||{}).visible||"tonexty"!==p&&"tozeroy"!==p&&(h.hasMarkers(t)||h.hasText(t))||(e.padded=!1,e.ppad=0),s&&("tozeroy"===p||"tonexty"===p&&(d||"v"===f))?l.tozero=!0:"tonextx"!==p&&"tozerox"!==p||(l.padded=!1),c&&(t._extremes[c]=P.findExtremes(n,a,e)),u&&(t._extremes[u]=P.findExtremes(r,i,l))}function H(e,t){if(h.hasMarkers(e)){var n=e.marker,r=1.6*(e.marker.sizeref||1),a="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)};if(O.isArrayOrTypedArray(n.size)){var i={type:"linear"};P.setConvert(i);for(var o=i.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=a(o[l]);return s}return a(n.size)}}function B(e,t){var n=m(t),e=e._firstScatter;e[n]||(e[n]=t.uid)}function m(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function q(e,t,n,r){e=e.stackgroup;if(e){e=t._scatterStackOpts[n._id+r._id][e],n="v"===e.orientation?r:n;return"linear"===n.type||"log"===n.type?e:void 0}}t.exports={calc:function(e,t){var n,r,a,i,o,s=e._fullLayout,l=P.getFromId(e,t.xaxis||"x"),c=P.getFromId(e,t.yaxis||"y"),u=l.makeCalcdata(t,"x"),d=c.makeCalcdata(t,"y"),f=I(t,l,"x",u),p=I(t,c,"y",d),h=t._length,m=new Array(h),g=t.ids,y=q(t,s,l,c),v=!1;B(s,t);var x,b="x",_="y";y?(O.pushUnique(y.traceIndices,t._expandedIndex),n="v"===y.orientation,x=n?(_="s","x"):(b="s","y"),i="interpolate"===y.stackgaps):j(e,t,l,c,f,p,H(t,h));for(var w=!!t.xperiodalignment,T=!!t.yperiodalignment,M=0;M<h;M++){var k=m[M]={},A=D(f[M]),S=D(p[M]);A&&S?(k[b]=f[M],k[_]=p[M],w&&(k.orig_x=u[M]),T&&(k.orig_y=d[M])):y&&(n?A:S)?(k[x]=(n?f:p)[M],k.gap=!0,i?(k.s=R,v=!0):k.s=0):k[b]=k[_]=R,g&&(k.id=String(g[M]))}if(z(m,t),N(e,t),F(m,t),y){for(M=0;M<m.length;)m[M][x]===R?m.splice(M,1):M++;if(O.sort(m,function(e,t){return e[x]-t[x]||e.i-t.i}),v){for(M=0;M<m.length-1&&m[M].gap;)M++;for(o=(o=m[M].s)||(m[M].s=0),r=0;r<M;r++)m[r].s=o;for(a=m.length-1;M<a&&m[a].gap;)a--;for(o=m[a].s,r=m.length-1;a<r;r--)m[r].s=o;for(;M<a;)if(m[++M].gap){for(r=M+1;m[r].gap;)r++;for(var E=m[M-1][x],L=m[M-1].s,C=(m[r].s-L)/(m[r][x]-E);M<r;)m[M].s=L+(m[M][x]-E)*C,M++}}}return m},calcMarkerSize:H,calcAxisExpansion:j,setFirstScatter:B,getStackOpts:q}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"./arrays_to_calcdata":493,"./calc_selection":496,"./colorscale_calc":497,"./subtypes":519,"fast-isnumeric":31}],496:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":285}],497:[function(e,t,n){"use strict";var r=e("../../components/colorscale/helpers").hasColorscale,a=e("../../components/colorscale/calc"),i=e("./subtypes");t.exports=function(e,t){i.hasLines(t)&&r(t,"line")&&a(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(t)&&(r(t,"marker")&&a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"./subtypes":519}],498:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],499:[function(e,t,n){"use strict";var O=e("./calc");function P(e,t,n,r,a,i,o){a={i:null,gap:a[r]=!0,s:0};a[o]=n,e.splice(t,0,a),t&&n===e[t-1][o]?(r=e[t-1],a.s=r.s,a.i=r.i,a.gap=r.gap):i&&(a.s=(i=n,a=o,o=e[(n=t)-1],(n=e[n+1])?o?o.s+(n.s-o.s)*(i-o[a])/(n[a]-o[a]):n.s:o.s)),t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,r=t.yaxis,t=n._id+r._id,a=e._fullLayout._scatterStackOpts[t];if(a){var i,o,s,l,c,u,d,f,p,h,m,g=e.calcdata;for(m in a){var y,v=(y=a[m]).traceIndices;if(v.length){for(u="interpolate"===y.stackgaps,d=y.groupnorm,p="v"===y.orientation?(f="x","y"):(f="y","x"),h=new Array(v.length),_=0;_<h.length;_++)h[_]=!1;for(var x=g[v[0]],b=new Array(x.length),_=0;_<x.length;_++)b[_]=x[_][f];for(_=1;_<v.length;_++){for(M=g[v[_]],L=i=0;L<M.length;L++){for(s=M[L][f];s>b[i]&&i<b.length;i++)P(M,L,b[i],_,h,u,f),L++;if(s!==b[i]){for(o=0;o<_;o++)P(g[v[o]],i,s,o,h,u,f);b.splice(i,0,s)}i++}for(;i<b.length;i++)P(M,L,b[i],_,h,u,f),L++}var w=b.length;for(L=0;L<x.length;L++){for(l=x[L][p]=x[L].s,_=1;_<v.length;_++)(M=g[v[_]])[0].trace._rawLength=M[0].trace._length,M[0].trace._length=w,l+=M[L].s,M[L][p]=l;if(d)for(c=("fraction"===d?l:l/100)||1,_=0;_<v.length;_++){var T=g[v[_]][L];T[p]/=c,T.sNorm=T.s/c}}for(_=0;_<v.length;_++){var M,k=(M=g[v[_]])[0].trace,A=O.calcMarkerSize(k,k._rawLength),S=Array.isArray(A);if(A&&h[_]||S)for(var E=A,A=new Array(w),L=0;L<w;L++)A[L]=M[L].gap?0:S?E[M[L].i]:E;var C=new Array(w),D=new Array(w);for(L=0;L<w;L++)C[L]=M[L].x,D[L]=M[L].y;O.calcAxisExpansion(e,k,n,r,C,D,A),M[0].t.orientation=y.orientation}}}}}},{"./calc":495}],500:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var a=t-1;0<=a;a--){var i=e[a];if("scatter"===i.type&&i.xaxis===n.xaxis&&i.yaxis===n.yaxis){i.opacity=void 0;break}}}}}},{}],501:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry"),c=e("./attributes"),u=e("./constants"),d=e("./subtypes"),f=e("./xy_defaults"),p=e("./period_defaults"),h=e("./stack_defaults"),m=e("./marker_defaults"),g=e("./line_defaults"),y=e("./line_shape_defaults"),v=e("./text_defaults"),x=e("./fillcolor_defaults");t.exports=function(n,r,e,t){function a(e,t){return s.coerce(n,r,c,e,t)}var i,o=f(n,r,t,a);o||(r.visible=!1),r.visible&&(p(n,r,t,a),a("xhoverformat"),a("yhoverformat"),o=!(i=h(n,r,t,a))&&o<u.PTS_LINESONLY?"lines+markers":"lines",a("text"),a("hovertext"),a("mode",o),d.hasLines(r)&&(g(n,r,e,t,a),y(n,r,a),a("connectgaps"),a("line.simplify")),d.hasMarkers(r)&&m(n,r,e,t,a,{gradient:!0}),d.hasText(r)&&(a("texttemplate"),v(n,r,t,a)),o=[],(d.hasMarkers(r)||d.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),o.push("points")),a("fill",i?i.fillDflt:"none"),"none"!==r.fill&&(x(n,r,e,a),d.hasLines(r)||y(n,r,a)),t=(r.line||{}).color,i=(r.marker||{}).color,"tonext"!==r.fill&&"toself"!==r.fill||o.push("fills"),a("hoveron",o.join("+")||"points"),"fills"!==r.hoveron&&a("hovertemplate"),(o=l.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||i||e,{axis:"y"}),o(n,r,t||i||e,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(r,a))}},{"../../lib":285,"../../registry":373,"./attributes":494,"./constants":498,"./fillcolor_defaults":502,"./line_defaults":507,"./line_shape_defaults":509,"./marker_defaults":513,"./period_defaults":514,"./stack_defaults":517,"./subtypes":519,"./text_defaults":520,"./xy_defaults":521}],502:[function(e,t,n){"use strict";var s=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r){var a,i,o=!1;t.marker&&(a=t.marker.color,i=(t.marker.line||{}).color,a&&!l(a)?o=a:i&&!l(i)&&(o=i)),r("fillcolor",s.addOpacity((t.line||{}).color||o||n,.5))}},{"../../components/color":155,"../../lib":285}],503:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},a={_fullLayout:n},n=i.getFromTrace(a,t,"x"),t=i.getFromTrace(a,t,"y");return r.xLabel=i.tickText(n,n.c2l(e.x),!0).text,r.yLabel=i.tickText(t,t.c2l(e.y),!0).text,r}},{"../../plots/cartesian/axes":331}],504:[function(e,t,n){"use strict";var i=e("../../components/color"),o=e("./subtypes");t.exports=function(e,t){var n;if("lines"===e.mode)return(n=e.line.color)&&i.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var r=t.mcc||(e.marker||{}).color,a=t.mlcc||((e.marker||{}).line||{}).color;return(a=r&&i.opacity(r)?r:a&&i.opacity(a)&&(t.mlw||((e.marker||{}).line||{}).width)?a:"")?i.opacity(a)<.3?i.addOpacity(a,.3):a:(n=(e.line||{}).color)&&i.opacity(n)&&o.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":155,"./subtypes":519}],505:[function(e,t,n){"use strict";var P=e("../../lib"),I=e("../../components/fx"),R=e("../../registry"),N=e("./get_trace_color"),z=e("../../components/color"),F=P.fillText;t.exports=function(e,t,n,r){var a=e.cd,i=a[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),c=s.c2p(n),u=[l,c],d=i.hoveron||"",f=-1!==i.mode.indexOf("markers")?3:.5;if(-1!==d.indexOf("points")){var p=function(e){var t=Math.max(f,e.mrc||0),n=o.c2p(e.x)-l,e=s.c2p(e.y)-c;return Math.max(Math.sqrt(n*n+e*e)-t,1-f/t)},h=I.getDistanceFunction(r,function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(o.c2p(e.x)-l);return void 0!==e.orig_x&&(r+=o.c2p(e.orig_x)-o.c2p(e.x)),r<t?n*r/t:r-t+n},function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(s.c2p(e.y)-c);return void 0!==e.orig_y&&(r+=s.c2p(e.orig_y)-s.c2p(e.y)),r<t?n*r/t:r-t+n},p);if(I.getClosest(a,h,e),!1!==e.index){var m=a[e.index],g=o.c2p(m.x,!0),t=s.c2p(m.y,!0),n=m.mrc||1;e.index=m.i;r=a[0].t.orientation,h=r&&(m.sNorm||m.s),a="h"===r?h:void 0!==m.orig_x?m.orig_x:m.x,h="v"===r?h:void 0!==m.orig_y?m.orig_y:m.y;return P.extendFlat(e,{color:N(i,m),x0:g-n,x1:g+n,xLabelVal:a,y0:t-n,y1:t+n,yLabelVal:h,spikeDistance:p(m),hovertemplate:i.hovertemplate}),F(m,i,e),R.getComponentMethod("errorbars","hoverInfo")(m,i,e),[e]}}if(-1!==d.indexOf("fills")&&i._polygons){var y,v,x,b,_,w,T,M=i._polygons,k=[],A=!1,S=1/0,E=-1/0,L=1/0,C=-1/0;for(O=0;O<M.length;O++)(v=M[O]).contains(u)&&(A=!A,k.push(v),L=Math.min(L,v.ymin),C=Math.max(C,v.ymax));if(A){for(var D=((L=Math.max(L,0))+(C=Math.min(C,s._length)))/2,O=0;O<k.length;O++)for(x=k[O].pts,y=1;y<x.length;y++)D<(w=x[y-1][1])!=D<=(T=x[y][1])&&(b=x[y-1][0],_=x[y][0],T-w&&(w=b+(_-b)*(D-w)/(T-w),S=Math.min(S,w),E=Math.max(E,w)));S=Math.max(S,0),E=Math.min(E,o._length),d=z.defaultLine;return z.opacity(i.fillcolor)?d=i.fillcolor:z.opacity((i.line||{}).color)&&(d=i.line.color),P.extendFlat(e,{distance:e.maxHoverDistance,x0:S,x1:E,y0:D,y1:D,color:d,hovertemplate:!1}),delete e.index,i.text&&!Array.isArray(i.text)?e.text=String(i.text):e.text=i.name,[e]}}}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../registry":373,"./get_trace_color":504}],506:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./arrays_to_calcdata":493,"./attributes":494,"./calc":495,"./cross_trace_calc":499,"./cross_trace_defaults":500,"./defaults":501,"./format_labels":503,"./hover":505,"./marker_colorbar":512,"./plot":515,"./select":516,"./style":518,"./subtypes":519}],507:[function(e,t,n){"use strict";var s=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,a,i){var o=(e.marker||{}).color;a("line.color",n),l(e,"line")?c(e,t,r,a,{prefix:"line.",cLetter:"c"}):a("line.color",!s(o)&&o||n),a("line.width"),(i||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],508:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),ie=r.BADNUM,r=r.LOG_CLIP,oe=r+.5,se=r-.5,le=e("../../lib"),ce=le.segmentsIntersect,ue=le.constrain,de=e("./constants");t.exports=function(r,a){var e,t,n,i,o,s,l,c,u,d,f,p,h,m,g,y,v=a.xaxis,x=a.yaxis,b="log"===v.type,_="log"===x.type,w=v._length,T=x._length,M=a.connectGaps,k=a.baseTolerance,A=a.shape,S="linear"===A,E=a.fill&&"none"!==a.fill,L=[],C=de.minTolerance,D=r.length,O=new Array(D),P=0;function I(e){var t=r[e];if(!t)return!1;var n=a.linearized?v.l2p(t.x):v.c2p(t.x),e=a.linearized?x.l2p(t.y):x.c2p(t.y);if(n===ie){if((n=b?v.c2p(t.x,!0):n)===ie)return!1;_&&e===ie&&(n*=Math.abs(v._m*T*(0<v._m?oe:se)/(x._m*w*(0<x._m?oe:se)))),n*=1e3}if(e===ie){if((e=_?x.c2p(t.y,!0):e)===ie)return!1;e*=1e3}return[n,e]}function R(e,t,n,r){var a=n-e,i=r-t,n=.5-e,r=.5-t,e=a*a+i*i,t=a*n+i*r;if(0<t&&t<e){a=n*i-r*a;return a*a<e?1:void 0}}function N(e,t){var n=e[0]/w,r=e[1]/T,e=Math.max(0,-n,n-1,-r,r-1);return(e=e&&void 0!==g&&R(n,r,g,y)?0:e)&&t&&R(n,r,t[0]/w,t[1]/T)&&(e=0),(1+de.toleranceGrowth*e)*k}function z(e,t){var n=e[0]-t[0],t=e[1]-t[1];return Math.sqrt(n*n+t*t)}var F,j,H,B,q,U,Y,V=de.maxScreensAway,G=-w*V,W=w*(1+V),Z=-T*V,$=T*(1+V),X=[[G,Z,W,Z],[W,Z,W,$],[W,$,G,$],[G,$,G,Z]];function J(e){if(e[0]<G||e[0]>W||e[1]<Z||e[1]>$)return[ue(e[0],G,W),ue(e[1],Z,$)]}function K(e,t){return e[0]===t[0]&&(e[0]===G||e[0]===W)||e[1]===t[1]&&(e[1]===Z||e[1]===$)}function Q(i,o,s){return function(e,t){var n=J(e),r=J(t),a=[];if(n&&r&&K(n,r))return a;n&&a.push(n),r&&a.push(r);t=2*le.constrain((e[i]+t[i])/2,o,s)-((n||e)[i]+(r||t)[i]);return t&&((n&&r?0<t==n[i]>r[i]?n:r:n||r)[i]+=t),a}}function ee(e){var t,n,r=e[0],a=e[1],i=r===O[P-1][0],o=a===O[P-1][1];i&&o||(1<P?(t=r===O[P-2][0],n=a===O[P-2][1],i&&(r===G||r===W)&&t?n?P--:O[P-1]=e:o&&(a===Z||a===$)&&n?t?P--:O[P-1]=e:O[P++]=e):O[P++]=e)}function te(e){O[P-1][0]!==e[0]&&O[P-1][1]!==e[1]&&ee([H,B]),ee(e),q=null,H=B=0}function ne(e){var t,n,r;g=e[0]/w,y=e[1]/T,F=e[0]<G?G:e[0]>W?W:0,j=e[1]<Z?Z:e[1]>$?$:0,F||j?(P?q?1<(n=Y(q,e)).length&&(te(n[0]),O[P++]=n[1]):(U=Y(O[P-1],e)[0],O[P++]=U):O[P++]=[F||e[0],j||e[1]],r=O[P-1],F&&j&&(r[0]!==F||r[1]!==j)?(q&&(H!==F&&B!==j?ee(H&&B?(t=q,n=e[0]-t[0],r=(e[1]-t[1])/n,0<(t[1]*e[0]-e[1]*t[0])/n?[0<r?G:W,$]:[0<r?W:G,Z]):[H||F,B||j]):H&&B&&ee([H,B])),ee([F,j])):H-F&&B-j&&ee([F||H,j||B]),q=e,H=F,B=j):(q&&te(Y(q,e)[0]),O[P++]=e)}for("linear"===A||"spline"===A?Y=function(e,t){for(var n=[],r=0,a=0;a<4;a++){var i=X[a],i=ce(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);i&&(!r||1<Math.abs(i.x-n[0][0])||1<Math.abs(i.y-n[0][1]))&&(i=[i.x,i.y],r&&z(i,e)<z(n[0],e)?n.unshift(i):n.push(i),r++)}return n}:"hv"===A||"vh"===A?Y=function(e,t){var n=[],e=J(e),t=J(t);return e&&t&&K(e,t)||(e&&n.push(e),t&&n.push(t)),n}:"hvh"===A?Y=Q(0,G,W):"vhv"===A&&(Y=Q(1,Z,$)),e=0;e<D;e++)if(t=I(e)){for(P=0,q=null,ne(t),e++;e<D;e++){if(!(i=I(e))){if(M)continue;break}if(S&&a.simplify){var re=I(e+1),ae=z(i,t);if(E&&(0===P||P===D-1)||!(ae<N(i,re)*C)){for(o=t,l=!(c=[(i[d=p=h=0]-t[0])/(u=ae),(i[1]-t[1])/ae]),n=i,e++;e<r.length;e++){if(s=re,re=I(e+1),!s){if(M)continue;break}if(m=(f=[s[0]-t[0],s[1]-t[1]])[0]*c[1]-f[1]*c[0],p=Math.min(p,m),(h=Math.max(h,m))-p>N(s,re))break;n=s,u<(f=f[0]*c[0]+f[1]*c[1])?(u=f,i=s,l=!1):f<d&&(d=f,o=s,l=!0)}if(l?(ne(i),n!==o&&ne(o)):(o!==t&&ne(o),n!==i&&ne(i)),ne(n),e>=r.length||!s)break;ne(s),t=s}}else ne(i)}q&&ee([H||q[0],B||q[1]]),L.push(O.slice(0,P))}return L}},{"../../constants/numerical":265,"../../lib":285,"./constants":498}],509:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],510:[function(e,t,n){"use strict";var m={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){for(var r,a,i,o,s={},l=!1,c=-1,u=0,d=-1,f=0;f<n.length;f++)(a=(r=n[f][0].trace).stackgroup||"")?a in s?o=s[a]:(o=s[a]=u,u++):r.fill in m&&0<=d?o=d:(o=d=u,u++),o<c&&(l=!0),r._groupIndex=c=o;var p=n.slice();l&&p.sort(function(e,t){e=e[0].trace,t=t[0].trace;return e._groupIndex-t._groupIndex||e.index-t.index});var h={};for(f=0;f<p.length;f++)a=(r=p[f][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in m&&(i=h[a],r._prevtrace=i||null,i&&(i._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),h[a]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return p}},{}],511:[function(e,t,n){"use strict";var a=e("fast-isnumeric");t.exports=function(e){var e=e.marker,t=e.sizeref||1,n=e.sizemin||0,r="area"===e.sizemode?function(e){return Math.sqrt(e/t)}:function(e){return e/t};return function(e){e=r(e/2);return a(e)&&0<e?Math.max(e,n):0}}},{"fast-isnumeric":31}],512:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],513:[function(e,t,n){"use strict";var l=e("../../components/color"),c=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),d=e("./subtypes");t.exports=function(e,t,n,r,a,i){var o=d.isBubble(e),s=(e.line||{}).color;i=i||{},s&&(n=s),a("marker.symbol"),a("marker.opacity",o?.7:1),a("marker.size"),a("marker.color",n),c(e,"marker")&&u(e,t,r,a,{prefix:"marker.",cLetter:"c"}),i.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),i.noLine||(a("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:o?l.background:l.defaultLine),c(e,"marker.line")&&u(e,t,r,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",o?1:0)),o&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),i.gradient&&"none"!==a("marker.gradient.type")&&a("marker.gradient.color")}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"./subtypes":519}],514:[function(e,t,n){"use strict";var r=e("../../lib").dateTick0,a=e("../../constants/numerical").ONEWEEK;function o(e,t){return r(t,e%a==0?1:0)}t.exports=function(e,t,n,r,a){var i;!(a=a||{x:!0,y:!0}).x||(i=r("xperiod"))&&(r("xperiod0",o(i,t.xcalendar)),r("xperiodalignment")),!a.y||(a=r("yperiod"))&&(r("yperiod0",o(a,t.ycalendar)),r("yperiodalignment"))}},{"../../constants/numerical":265,"../../lib":285}],515:[function(e,t,n){"use strict";var q=e("@plotly/d3"),U=e("../../registry"),Y=e("../../lib"),V=Y.ensureSingle,G=Y.identity,W=e("../../components/drawing"),Z=e("./subtypes"),$=e("./line_points"),f=e("./link_traces"),X=e("../../lib/polygon").tester;function p(f,e,p,n,t,r,a){var i,o,s,l,c,u,d;o=e,w=n,_=t,e=(b=p).xaxis,b=b.yaxis,u=q.extent(Y.simpleMap(e.range,e.r2c)),d=q.extent(Y.simpleMap(b.range,b.r2c)),e=w[0].trace,!Z.hasMarkers(e)||0!==(b=e.marker.maxdisplayed)&&(e=w.filter(function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=d[0]&&e.y<=d[1]}),s=Math.ceil(e.length/b),l=0,_.forEach(function(e,t){e=e[0].trace;Z.hasMarkers(e)&&0<e.marker.maxdisplayed&&t<o&&l++}),c=Math.round(l*s/3+Math.floor(l/3)*s/7.1),w.forEach(function(e){delete e.vis}),e.forEach(function(e,t){0===Math.round((t+c)%s)&&(e.vis=!0)}));var h=!!a&&0<a.duration;function m(e){return h?e.transition():e}var g=p.xaxis,y=p.yaxis,v=n[0].trace,x=v.line,t=q.select(r),b=V(t,"g","errorbars"),_=V(t,"g","lines"),w=V(t,"g","points"),e=V(t,"g","text");if(U.getComponentMethod("errorbars","plot")(f,b,p,a),!0===v.visible){m(t).style("opacity",v.opacity);var T=v.fill.charAt(v.fill.length-1);"x"!==T&&"y"!==T&&(T=""),n[0][p.isRangePlot?"nodeRangePlot3":"node3"]=t;var M,k,r="",b=[],a=v._prevtrace;a&&(r=a._prevRevpath||"",R=a._nextFill,b=a._polygons);var A,S,E,L,C,D,O="",P="",I=[],t=Y.noop,a=v._ownFill;if(Z.hasLines(v)||"none"!==v.fill){for(R&&R.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(x.shape)?(A=W.steps(x.shape),S=W.steps(x.shape.split("").reverse().join(""))):A=S="spline"===x.shape?function(e){var t=e[e.length-1];return 1<e.length&&e[0][0]===t[0]&&e[0][1]===t[1]?W.smoothclosed(e.slice(1),x.smoothing):W.smoothopen(e,x.smoothing)}:function(e){return"M"+e.join("L")},E=function(e){return S(e.reverse())},I=$(n,{xaxis:g,yaxis:y,connectGaps:v.connectgaps,baseTolerance:Math.max(x.width||1,3)/4,shape:x.shape,simplify:x.simplify,fill:v.fill}),D=v._polygons=new Array(I.length),i=0;i<I.length;i++)v._polygons[i]=X(I[i]);I.length&&(L=I[0][0],C=(C=I[I.length-1])[C.length-1]),t=function(t){return function(e){M=A(e),k=E(e),P=O?T?(O+="L"+M.substr(1),k+("L"+P.substr(1))):(O+="Z"+M,k+"Z"+P):(O=M,k),Z.hasLines(v)&&1<e.length&&((e=q.select(this)).datum(n),t?m(e.style("opacity",0).attr("d",M).call(W.lineGroupStyle)).style("opacity",1):((e=m(e)).attr("d",M),W.singleLineStyle(n,e)))}}}_=_.selectAll(".js-line").data(I);m(_.exit()).style("opacity",0).remove(),_.each(t(!1)),_.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(W.lineGroupStyle).each(t(!0)),W.setClipUrl(_,p.layerClipId,f),I.length?(a?(a.datum(n),L&&C&&(T?("y"===T?L[1]=C[1]=y.c2p(0,!0):"x"===T&&(L[0]=C[0]=g.c2p(0,!0)),m(a).attr("d","M"+C+"L"+L+"L"+O.substr(1)).call(W.singleFillStyle)):m(a).attr("d",O+"Z").call(W.singleFillStyle))):R&&("tonext"===v.fill.substr(0,6)&&O&&r?(("tonext"===v.fill?m(R).attr("d",O+"Z"+r+"Z"):m(R).attr("d",O+"L"+r.substr(1)+"Z")).call(W.singleFillStyle),v._polygons=v._polygons.concat(b)):(N(R),v._polygons=null)),v._prevRevpath=P,v._prevPolygons=D):(a?N(a):R&&N(R),v._polygons=v._prevRevpath=v._prevPolygons=null),w.datum(n),e.datum(n),function(e,t,n){var r,a,i=n[0].trace,o=Z.hasMarkers(i),s=Z.hasText(i),l=function(e){if(e.ids)return H}(i),c=B,u=B;(o||s)&&(r=G,n=(a=i.stackgroup)&&"infer zero"===f._fullLayout._scatterStackOpts[g._id+y._id][a].stackgaps,i.marker.maxdisplayed||i._needsCull?r=n?F:z:a&&!n&&(r=j),o&&(c=r),s&&(u=r));var d,c=(e=e.selectAll("path.point").data(c,l)).enter().append("path").classed("point",!0);h&&c.call(W.pointStyle,i,f).call(W.translatePoints,g,y).style("opacity",0).transition().style("opacity",1),e.order(),o&&(d=W.makePointStyleFns(i)),e.each(function(e){var t=q.select(this),n=m(t);W.translatePoint(e,n,g,y)?(W.singlePointStyle(e,n,i,d,f),p.layerClipId&&W.hideOutsideRangePoint(e,n,g,y,i.xcalendar,i.ycalendar),i.customdata&&t.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):n.remove()}),(h?e.exit().transition().style("opacity",0):e.exit()).remove(),(e=t.selectAll("g").data(u,l)).enter().append("g").classed("textpoint",!0).append("text"),e.order(),e.each(function(e){var t=q.select(this),n=m(t.select("text"));W.translatePoint(e,n,g,y)?p.layerClipId&&W.hideOutsideRangePoint(e,t,g,y,i.xcalendar,i.ycalendar):t.remove()}),e.selectAll("text").call(W.textPointStyle,i,f).each(function(e){var t=g.c2p(e.x),n=y.c2p(e.y);q.select(this).selectAll("tspan.line").each(function(){m(q.select(this)).attr({x:t,y:n})})}),e.exit().remove()}(w,e,n);var R=!1===v.cliponaxis?null:p.layerClipId;W.setClipUrl(w,R,f),W.setClipUrl(e,R,f)}function N(e){m(e).attr("d","M0,0Z")}function z(e){return e.filter(function(e){return!e.gap&&e.vis})}function F(e){return e.filter(function(e){return e.vis})}function j(e){return e.filter(function(e){return!e.gap})}function H(e){return e.id}function B(){return!1}}t.exports=function(n,r,e,t,a,i){var o,s,l,c=!a,u=!!a&&0<a.duration,d=f(n,r,e),e=t.selectAll("g.trace").data(d,function(e){return e[0].trace.uid});e.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),e.order(),s=n,l=r,e.each(function(e){var t=V(q.select(this),"g","fills");W.setClipUrl(t,l.layerClipId,s);var n=e[0].trace,e=[];n._ownfill&&e.push("_ownFill"),n._nexttrace&&e.push("_nextFill");e=t.selectAll("g").data(e,G);e.enter().append("g"),e.exit().each(function(e){n[e]=null}).remove(),e.order().each(function(e){n[e]=V(q.select(this),"path","js-fill")})}),u?(i&&(o=i()),q.transition().duration(a.duration).ease(a.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){t.selectAll("g.trace").each(function(e,t){p(n,t,r,e,d,this,a)})})):e.each(function(e,t){p(n,t,r,e,d,this,a)}),c&&e.exit().remove(),t.selectAll("path:not([d])").remove()}},{"../../components/drawing":177,"../../lib":285,"../../lib/polygon":297,"../../registry":373,"./line_points":508,"./link_traces":510,"./subtypes":519,"@plotly/d3":20}],516:[function(e,t,n){"use strict";var d=e("./subtypes");t.exports=function(e,t){var n,r,a,i,o=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=o[0].trace;if(!d.hasMarkers(u)&&!d.hasText(u))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],a=s.c2p(r.x),i=l.c2p(r.y),null!==r.i&&t.contains([a,i],!1,n,e)?(c.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return c}},{"./subtypes":519}],517:[function(e,t,n){"use strict";var y=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,r){var a=n._scatterStackOpts,i=r("stackgroup");if(i){var o=t.xaxis+t.yaxis,n=a[o],s=(n=n||(a[o]={}))[i],l=!1;s?s.traces.push(t):(s=n[i]={traceIndices:[],traces:[t]},l=!0);for(var c={orientation:t.x&&!t.y?"h":"v"},u=0;u<y.length;u++){var d=y[u],f=d+"Found";if(!s[f]){var p=void 0!==e[d],h="orientation"===d;if((p||l)&&(s[d]=r(d,c[d]),h&&(s.fillDflt="h"===s[d]?"tonextx":"tonexty"),p&&(s[f]=!0,!l&&(delete s.traces[0][d],h))))for(var m=0;m<s.traces.length-1;m++){var g=s.traces[m];g._input.fill!==g.fill&&(g.fill=s.fillDflt)}}}return s}}},{}],518:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../../components/drawing"),i=e("../../registry");function o(e,t,n){a.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){a.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity}),e.selectAll("g.points").each(function(e){o(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(a.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(a.fillGroupStyle),i.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(e,t,n){(t=t[0].trace).selectedpoints?(a.selectedPointStyle(n.selectAll("path.point"),t),a.selectedTextStyle(n.selectAll("text"),t)):(o(n,t,e),s(n,t,e))}}},{"../../components/drawing":177,"../../registry":373,"@plotly/d3":20}],519:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":285}],520:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t,n,r,a){a=a||{},r("textposition"),i.coerceFont(r,"textfont",n.font),a.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":285}],521:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");t.exports=function(e,t,n,r){var a,i=r("x"),o=r("y");if(l.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),i){i=s.minRowLength(i);o?a=Math.min(i,s.minRowLength(o)):(a=i,r("y0"),r("dy"))}else{if(!o)return 0;a=s.minRowLength(o),r("x0"),r("dx")}return t._length=a}},{"../../lib":285,"../../registry":373}],522:[function(e,t,n){"use strict";var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../scatter/attributes"),o=e("../../plots/attributes"),s=e("../../components/colorscale/attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../lib/extend").extendFlat,u=i.marker,d=i.line,e=u.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:c({},i.mode,{dflt:"markers"}),text:c({},i.text,{}),texttemplate:a({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:c({},i.hovertext,{}),line:{color:d.color,width:d.width,dash:l,shape:c({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:c({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:c({symbol:u.symbol,opacity:u.opacity,maxdisplayed:u.maxdisplayed,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,line:c({width:e.width,editType:"calc"},s("marker.line")),gradient:u.gradient,editType:"calc"},s("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:c({},o.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:r()}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"../scatter/attributes":494}],523:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),v=e("../scatter/colorscale_calc"),x=e("../scatter/arrays_to_calcdata"),b=e("../scatter/calc_selection"),_=e("../scatter/calc").calcMarkerSize,w=["a","b","c"],T={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function(e,t){for(var n,r,a,i,o,s=e._fullLayout[t.subplot].sum,l=t.sum||s,c={a:t.a,b:t.b,c:t.c},u=0;u<w.length;u++)if(!c[r=w[u]]){for(i=c[T[r][0]],o=c[T[r][1]],a=new Array(i.length),n=0;n<i.length;n++)a[n]=l-i[n]-o[n];c[r]=a}var d,f,p,h,m=t._length,g=new Array(m);for(u=0;u<m;u++)d=c.a[u],f=c.b[u],p=c.c[u],y(d)&&y(f)&&y(p)?(1!=(h=s/((d=+d)+(f=+f)+(p=+p)))&&(d*=h,f*=h,p*=h),h=d,g[u]={x:p-f,y:h,a:d,b:f,c:p}):g[u]={x:!1,y:!1};return _(t,m),v(e,t),x(g,t),b(g,t),g}},{"../scatter/arrays_to_calcdata":493,"../scatter/calc":495,"../scatter/calc_selection":496,"../scatter/colorscale_calc":497,"fast-isnumeric":31}],524:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("../scatter/constants"),d=e("../scatter/subtypes"),f=e("../scatter/marker_defaults"),p=e("../scatter/line_defaults"),h=e("../scatter/line_shape_defaults"),m=e("../scatter/text_defaults"),g=e("../scatter/fillcolor_defaults"),y=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return c.coerce(n,r,y,e,t)}var i,o=a("a"),s=a("b"),l=a("c");o?(i=o.length,s?(i=Math.min(i,s.length),l&&(i=Math.min(i,l.length))):i=l?Math.min(i,l.length):0):s&&l&&(i=Math.min(s.length,l.length)),i?(r._length=i,a("sum"),a("text"),a("hovertext"),"fills"!==r.hoveron&&a("hovertemplate"),a("mode",i<u.PTS_LINESONLY?"lines+markers":"lines"),d.hasLines(r)&&(p(n,r,e,t,a),h(n,r,a),a("connectgaps")),d.hasMarkers(r)&&f(n,r,e,t,a,{gradient:!0}),d.hasText(r)&&(a("texttemplate"),m(n,r,t,a)),t=[],(d.hasMarkers(r)||d.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),t.push("points")),a("fill"),"none"!==r.fill&&(g(n,r,e,a),d.hasLines(r)||h(n,r,a)),"tonext"!==r.fill&&"toself"!==r.fill||t.push("fills"),a("hoveron",t.join("+")||"points"),c.coerceSelectionMarkerOpacity(r,a)):r.visible=!1}},{"../../lib":285,"../scatter/constants":498,"../scatter/fillcolor_defaults":502,"../scatter/line_defaults":507,"../scatter/line_shape_defaults":509,"../scatter/marker_defaults":513,"../scatter/subtypes":519,"../scatter/text_defaults":520,"./attributes":522}],525:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){return t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),r[a]?(a=r[a],e.a=a.a,e.b=a.b,e.c=a.c):(e.a=t.a,e.b=t.b,e.c=t.c),e}},{}],526:[function(e,t,n){"use strict";var a=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},t=n[t.subplot]._subplot;return r.aLabel=a.tickText(t.aaxis,e.a,!0).text,r.bLabel=a.tickText(t.baxis,e.b,!0).text,r.cLabel=a.tickText(t.caxis,e.c,!0).text,r}},{"../../plots/cartesian/axes":331}],527:[function(e,t,n){"use strict";var u=e("../scatter/hover");t.exports=function(e,t,n,r){n=u(e,t,n,r);if(n&&!1!==n[0].index){r=n[0];if(void 0===r.index){var a=1-r.y0/e.ya._length,i=e.xa._length,o=i*a/2,s=i-o;return r.x0=Math.max(Math.min(r.x0,s),o),r.x1=Math.max(Math.min(r.x1,s),o),n}a=r.cd[r.index],i=r.trace,s=r.subplot;r.a=a.a,r.b=a.b,r.c=a.c,r.xLabelVal=void 0,r.yLabelVal=void 0;o={};o[i.subplot]={_subplot:s};o=i._module.formatLabels(a,i,o);r.aLabel=o.aLabel,r.bLabel=o.bLabel,r.cLabel=o.cLabel;var a=a.hi||i.hoverinfo,l=[];return i.hovertemplate||(-1!==(a=-1!==(a=a.split("+")).indexOf("all")?["a","b","c"]:a).indexOf("a")&&c(s.aaxis,r.aLabel),-1!==a.indexOf("b")&&c(s.baxis,r.bLabel),-1!==a.indexOf("c")&&c(s.caxis,r.cLabel)),r.extraText=l.join("<br>"),r.hovertemplate=i.hovertemplate,n}function c(e,t){l.push(e._hovertitle+": "+t)}}},{"../scatter/hover":505}],528:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":369,"../scatter/marker_colorbar":512,"../scatter/select":516,"../scatter/style":518,"./attributes":522,"./calc":523,"./defaults":524,"./event_data":525,"./format_labels":526,"./hover":527,"./plot":529}],529:[function(e,t,n){"use strict";var a=e("../scatter/plot");t.exports=function(e,t,n){var r=t.plotContainer;r.select(".scatterlayer").selectAll("*").remove();r={xaxis:t.xaxis,yaxis:t.yaxis,plot:r,layerClipId:t._hasClipOnAxisFalse?t.clipIdRelative:null},t=t.layers.frontplot.select("g.scatterlayer");a(e,r,n,t)}},{"../scatter/plot":515}],530:[function(e,t,n){"use strict";var r=e("../box/attributes"),a=e("../../lib/extend").extendFlat,e=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;t.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,xhoverformat:e("x"),yhoverformat:e("y"),name:a({},r.name,{}),orientation:a({},r.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,points:a({},r.boxpoints,{}),jitter:a({},r.jitter,{}),pointpos:a({},r.pointpos,{}),width:a({},r.width,{}),marker:r.marker,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../box/attributes":400}],531:[function(e,t,n){"use strict";var w=e("../../lib"),T=e("../../plots/cartesian/axes"),M=e("../box/calc"),k=e("./helpers"),A=e("../../constants/numerical").BADNUM;t.exports=function(e,t){var n=M(e,t);if(n[0].t.empty)return n;for(var r=e._fullLayout,a=T.getFromId(e,t["h"===t.orientation?"xaxis":"yaxis"]),i=1/0,o=-1/0,s=0,l=0,c=0;c<n.length;c++){var u=n[c],d=u.pts.map(k.extractVal),f=u.bandwidth=function(e,t,n){var r=t.max-t.min;if(!r)return e.bandwidth||0;{if(e.bandwidth)return Math.max(e.bandwidth,r/1e4);e=n.length,n=w.stdev(n,e-1,t.mean);return Math.max(function(e,t,n){return 1.059*Math.min(t,n/1.349)*Math.pow(e,-.2)}(e,n,t.q3-t.q1),r/100)}}(t,u,d),p=u.span=function(n,r,a,e){var t=n.spanmode,i=n.span||[],o=[r.min,r.max],s=[r.min-2*e,r.max+2*e];function l(e){var t=i[e],t="multicategory"===a.type?a.r2c(t):a.d2c(t,0,n[r.valLetter+"calendar"]);return t===A?s[e]:t}t="soft"===t?s:"hard"===t?o:[l(0),l(1)];o={type:"linear",range:t};return T.setConvert(o),o.cleanRange(),t}(t,u,a,f);if(u.min===u.max&&0===f)p=u.span=[u.min,u.max],u.density=[{v:1,t:p[0]}],u.bandwidth=f,s=Math.max(s,1);else{var h=p[1]-p[0],f=Math.ceil(h/(f/3)),m=h/f;if(!isFinite(m)||!isFinite(f))return w.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var g=k.makeKDE(u,t,d);u.density=new Array(f);for(var y=0,v=p[0];v<p[1]+m/2;y++,v+=m){var x=g(v);u.density[y]={v:x,t:v},s=Math.max(s,x)}}l=Math.max(l,d.length),i=Math.min(i,p[0]),o=Math.max(o,p[1])}var b,_=T.findExtremes(a,[i,o],{padded:!0});return t._extremes[a._id]=_,t.width?n[0].t.maxKDE=s:(r=(b=r._violinScaleGroupStats)[_=t.scalegroup])?(r.maxKDE=Math.max(r.maxKDE,s),r.maxCount=Math.max(r.maxCount,l)):b[_]={maxKDE:s,maxCount:l},n[0].t.labels.kde=w._(e,"kde:"),n}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../box/calc":401,"./helpers":534}],532:[function(e,t,n){"use strict";var f=e("../box/cross_trace_calc").setPositionOffset,p=["v","h"];t.exports=function(e,t){for(var n=e.calcdata,r=t.xaxis,a=t.yaxis,i=0;i<p.length;i++){for(var o=p[i],s="h"===o?a:r,l=[],c=0;c<n.length;c++){var u=n[c],d=u[0].t,u=u[0].trace;!0!==u.visible||"violin"!==u.type||d.empty||u.orientation!==o||u.xaxis!==r._id||u.yaxis!==a._id||l.push(c)}f("violin",e,l,s)}}},{"../box/cross_trace_calc":402}],533:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../components/color"),f=e("../box/defaults"),p=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return u.coerce(n,r,p,e,t)}function i(e,t){return u.coerce2(n,r,p,e,t)}var o,s,l,c;f.handleSampleDefaults(n,r,a,t),!1!==r.visible&&(a("bandwidth"),a("side"),a("width")||(a("scalegroup",r.name),a("scalemode")),o=a("span"),a("spanmode",s=Array.isArray(o)?"manual":s),l=a("line.color",(n.marker||{}).color||e),c=a("line.width"),t=a("fillcolor",d.addOpacity(r.line.color,.5)),f.handlePointsDefaults(n,r,a,{prefix:""}),o=i("box.width"),s=i("box.fillcolor",t),e=i("box.line.color",l),t=i("box.line.width",c),a("box.visible",Boolean(o||s||e||t))||(r.box={visible:!1}),l=i("meanline.color",l),c=i("meanline.width",c),a("meanline.visible",Boolean(l||c))||(r.meanline={visible:!1}))}},{"../../components/color":155,"../../lib":285,"../box/defaults":403,"./attributes":530}],534:[function(e,t,a){"use strict";var i=e("../../lib"),n=function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)};a.makeKDE=function(e,t,r){var a=r.length,i=n,o=e.bandwidth,s=1/(a*o);return function(e){for(var t=0,n=0;n<a;n++)t+=i((e-r[n])/o);return s*t}},a.getPositionOnKdePath=function(e,t,n){var r="h"===t.orientation?(a="y","x"):(a="x","y"),r=i.findPointOnPath(e.path,n,r,{pathLength:e.pathLength}),e=e.posCenterPx,a=r[a];return[a,"both"===t.side?2*e-a:e]},a.getKdeValue=function(e,t,n){var r=e.pts.map(a.extractVal);return a.makeKDE(e,t,r)(n)/e.posDensityScale},a.extractVal=function(e){return e.v}},{"../../lib":285}],535:[function(e,t,n){"use strict";var w=e("../../lib"),T=e("../../plots/cartesian/axes"),M=e("../box/hover"),k=e("./helpers");t.exports=function(e,t,n,r,a){var i,o,s,l,c,u,d,f,p,h,m=(a=a||{}).hoverLayer,g=e.cd,y=g[0].trace,v=y.hoveron,x=-1!==v.indexOf("violins"),b=-1!==v.indexOf("kde"),_=[];(x||b)&&(o=M.hoverOnBoxes(e,t,n,r),b&&0<o.length&&(h=e.xa,f=e.ya,u="h"===y.orientation?(c=t,s="y",p=f,l="x",h):(c=n,s="x",p=h,l="y",f),c>=(a=g[e.index]).span[0]&&c<=a.span[1]&&(d=w.extendFlat({},e),b=u.c2p(c,!0),h=k.getKdeValue(a,y,c),f=k.getPositionOnKdePath(a,y,b),a=p._offset,p=p._length,d[s+"0"]=f[0],d[s+"1"]=f[1],d[l+"0"]=d[l+"1"]=b,d[l+"Label"]=l+": "+T.hoverLabelText(u,c,y[l+"hoverformat"])+", "+g[0].t.labels.kde+" "+h.toFixed(3),d.spikeDistance=o[0].spikeDistance,d[h=s+"Spike"]=o[0][h],o[0].spikeDistance=void 0,o[0][h]=void 0,d.hovertemplate=!1,_.push(d),(d={stroke:e.color})[s+"1"]=w.constrain(a+f[0],a,a+p),d[s+"2"]=w.constrain(a+f[1],a,a+p),d[l+"1"]=d[l+"2"]=u._offset+b)),x&&(_=_.concat(o))),-1!==v.indexOf("points")&&(i=M.hoverOnPoints(e,t,n));m=m.selectAll(".violinline-"+y.uid).data(d?[0]:[]);return m.enter().append("line").classed("violinline-"+y.uid,!0).attr("stroke-width",1.5),m.exit().remove(),m.attr(d),"closest"===r?i?[i]:_:(i&&_.push(i),_)}},{"../../lib":285,"../../plots/cartesian/axes":331,"../box/hover":405,"./helpers":534}],536:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"../box/defaults":403,"../box/select":410,"../scatter/style":518,"./attributes":530,"./calc":531,"./cross_trace_calc":532,"./defaults":533,"./hover":535,"./layout_attributes":537,"./layout_defaults":538,"./plot":539,"./style":540}],537:[function(e,t,n){"use strict";var r=e("../box/layout_attributes"),e=e("../../lib").extendFlat;t.exports={violinmode:e({},r.boxmode,{}),violingap:e({},r.boxgap,{}),violingroupgap:e({},r.boxgroupgap,{})}},{"../../lib":285,"../box/layout_attributes":407}],538:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes"),o=e("../box/layout_defaults");t.exports=function(n,r,e){o._supply(n,r,e,function(e,t){return a.coerce(n,r,i,e,t)},"violin")}},{"../../lib":285,"../box/layout_defaults":408,"./layout_attributes":537}],539:[function(e,t,n){"use strict";var A=e("@plotly/d3"),l=e("../../lib"),r=e("../../components/drawing"),c=e("../box/plot"),a=e("../scatter/line_points"),u=e("./helpers");t.exports=function(e,i,t,n){var M=e._fullLayout,o=i.xaxis,s=i.yaxis;function k(e){e=a(e,{xaxis:o,yaxis:s,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return r.smoothopen(e[0],1)}l.makeTraceGroups(n,t,"trace violins").each(function(e){var m,g,y,v,x,b,_,t,n,r=A.select(this),a=e[0],w=a.t,T=a.trace;!0!==T.visible||w.empty?r.remove():(m=w.bPos,g=w.bdPos,y=i[w.valLetter+"axis"],v=i[w.posLetter+"axis"],x="both"===T.side,b=x||"positive"===T.side,_=x||"negative"===T.side,(e=r.selectAll("path.violin").data(l.identity)).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),e.exit().remove(),e.each(function(e){var t,n,r,a,i,o,s,l,c,u=A.select(this),d=e.density,f=d.length,p=v.c2l(e.pos+m,!0),h=v.l2p(p);if(t=T.width?w.maxKDE/g:(c=M._violinScaleGroupStats[T.scalegroup],"count"===T.scalemode?c.maxKDE/g*(c.maxCount/e.pts.length):c.maxKDE/g),b){for(o=new Array(f),a=0;a<f;a++)(s=o[a]={})[w.posLetter]=p+d[a].v/t,s[w.valLetter]=y.c2l(d[a].t,!0);n=k(o)}if(_){for(o=new Array(f),i=0,a=f-1;i<f;i++,a--)(s=o[i]={})[w.posLetter]=p-d[a].v/t,s[w.valLetter]=y.c2l(d[a].t,!0);r=k(o)}l=x?n+"L"+r.substr(1)+"Z":(l=[h,y.c2p(d[0].t)],c=[h,y.c2p(d[f-1].t)],"h"===T.orientation&&(l.reverse(),c.reverse()),b?"M"+l+"L"+n.substr(1)+"L"+c:"M"+c+"L"+r.substr(1)+"L"+l),u.attr("d",l),e.posCenterPx=h,e.posDensityScale=t*g,e.path=u.node(),e.pathLength=e.path.getTotalLength()/(x?2:1)}),e=(a=T.box).width,a=(a.line||{}).width,a=x?(t=g*e,0):b?(t=[0,g*e/2],a*{x:1,y:-1}[w.posLetter]):(t=[g*e/2,0],a*{x:-1,y:1}[w.posLetter]),c.plotBoxAndWhiskers(r,{pos:v,val:y},T,{bPos:m,bdPos:t,bPosPxOffset:a}),c.plotBoxMean(r,{pos:v,val:y},T,{bPos:m,bdPos:t,bPosPxOffset:a}),!T.box.visible&&T.meanline.visible&&(n=l.identity),(n=r.selectAll("path.meanline").data(n||[])).enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),n.exit().remove(),n.each(function(e){var t=y.c2p(e.mean,!0),e=u.getPositionOnKdePath(e,T,t);A.select(this).attr("d","h"===T.orientation?"M"+t+","+e[0]+"V"+e[1]:"M"+e[0]+","+t+"H"+e[1])}),c.plotPoints(r,{x:o,y:s},T,w))})}},{"../../components/drawing":177,"../../lib":285,"../box/plot":409,"../scatter/line_points":508,"./helpers":534,"@plotly/d3":20}],540:[function(e,t,n){"use strict";var s=e("@plotly/d3"),l=e("../../components/color"),c=e("../scatter/style").stylePoints;t.exports=function(o){var e=s.select(o).selectAll("g.trace.violins");e.style("opacity",function(e){return e[0].trace.opacity}),e.each(function(e){var t=e[0].trace,n=s.select(this),r=t.box||{},a=r.line||{},i=t.meanline||{},e=i.width;n.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(l.stroke,t.line.color).call(l.fill,t.fillcolor),n.selectAll("path.box").style("stroke-width",a.width+"px").call(l.stroke,a.color).call(l.fill,r.fillcolor);e={"stroke-width":e+"px","stroke-dasharray":2*e+"px,"+e+"px"};n.selectAll("path.mean").style(e).call(l.stroke,i.color),n.selectAll("path.meanline").style(e).call(l.stroke,i.color),c(n,t,o)})}},{"../../components/color":155,"../scatter/style":518,"@plotly/d3":20}],541:[function(e,t,n){"use strict";var u=e("../plots/cartesian/axes"),h=e("../lib"),p=e("../plot_api/plot_schema"),m=e("./helpers").pointsAccessorFunction,d=e("../constants/numerical").BADNUM;n.moduleType="transform",n.name="aggregate";var g=n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},y=g.aggregations;function v(e,t,n,r){if(r.enabled){for(var a=r.target,i=h.nestedProperty(t,a),o=i.get(),s=function(c,e){var t=c.func,u=e.d2c,l=e.c2d;switch(t){case"count":return f;case"first":return x;case"last":return b;case"sum":return function(e,t){for(var n=0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n+=a)}return l(n)};case"avg":return function(e,t){for(var n=0,r=0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n+=i,r++)}return r?l(n/r):d};case"min":return function(e,t){for(var n=1/0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n=Math.min(n,a))}return n===1/0?d:l(n)};case"max":return function(e,t){for(var n=-1/0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n=Math.max(n,a))}return n===-1/0?d:l(n)};case"range":return function(e,t){for(var n=1/0,r=-1/0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n=Math.min(n,i),r=Math.max(r,i))}return r===-1/0||n===1/0?d:l(r-n)};case"change":return function(e,t){var n=u(e[t[0]]),t=u(e[t[t.length-1]]);return n===d||t===d?d:l(t-n)};case"median":return function(e,t){for(var n=[],r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&n.push(a)}if(!n.length)return d;n.sort(h.sorterAsc);var i=(n.length-1)/2;return l((n[Math.floor(i)]+n[Math.ceil(i)])/2)};case"mode":return function(e,t){for(var n={},r=0,a=d,i=0;i<t.length;i++){var o,s=u(e[t[i]]);s===d||r<(o=n[s]=(n[s]||0)+1)&&(r=o,a=s)}return r?l(a):d};case"rms":return function(e,t){for(var n=0,r=0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n+=i*i,r++)}return r?l(Math.sqrt(n/r)):d};case"stddev":return function(e,t){for(var n=0,r=0,a=1,i=d,o=0;o<t.length&&i===d;o++)i=u(e[t[o]]);if(i===d)return d;for(;o<t.length;o++){var s=u(e[t[o]]);s!==d&&(n+=s=s-i,r+=s*s,a++)}var l="sample"===c.funcmode?a-1:a;return l?Math.sqrt((r-n*n/a)/l):0}}}(r,u.getDataConversions(e,t,a,o)),l=new Array(n.length),c=0;c<n.length;c++)l[c]=s(o,n[c]);i.set(l),"count"===r.func&&h.pushUnique(t._arrayAttrs,a)}}function f(e,t){return t.length}function x(e,t){return e[t[0]]}function b(e,t){return e[t[t.length-1]]}n.supplyDefaults=function(n,e){var r={};function t(e,t){return h.coerce(n,r,g,e,t)}if(!t("enabled"))return r;for(var a=p.findArrayAttributes(e),i={},o=0;o<a.length;o++)i[a[o]]=1;e=t("groups");if(!Array.isArray(e)){if(!i[e])return r.enabled=!1,r;i[e]=0}var s=n.aggregations||[],l=r.aggregations=new Array(s.length);function c(e,t){return h.coerce(s[o],u,y,e,t)}for(o=0;o<s.length;o++){var u={_index:o},d=c("target"),f=c("func");c("enabled")&&d&&(i[d]||"count"===f&&void 0===i[d])?("stddev"===f&&c("funcmode"),i[d]=0,l[o]=u):l[o]={enabled:!1,_index:o}}for(o=0;o<a.length;o++)i[a[o]]&&l.push({target:a[o],func:y.func.dflt,enabled:!0,_index:-1});return r},n.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,a=h.getTargetArray(t,{target:r});if(a){var i,o,s={},l={},c=[],u=m(t.transforms,n),d=a.length;for(t._length&&(d=Math.min(d,t._length)),p=0;p<d;p++)void 0===(o=s[i=a[p]])?(s[i]=c.length,c.push([p]),l[s[i]]=u(p)):(c[o].push(p),l[s[i]]=(l[s[i]]||[]).concat(u(p)));n._indexToPoints=l;for(var f=n.aggregations,p=0;p<f.length;p++)v(e,t,c,f[p]);"string"==typeof r&&v(e,t,c,{target:r,func:"first",enabled:!0}),t._length=c.length}}}},{"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plots/cartesian/axes":331,"./helpers":544}],542:[function(e,t,a){"use strict";var x=e("../lib"),i=e("../registry"),b=e("../plots/cartesian/axes"),_=e("./helpers").pointsAccessorFunction,e=e("../constants/filter_ops"),w=e.COMPARISON_OPS,T=e.INTERVAL_OPS,M=e.SET_OPS;a.moduleType="transform",a.name="filter",a.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(w).concat(T).concat(M),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},a.supplyDefaults=function(n){var r={};function e(e,t){return x.coerce(n,r,a.attributes,e,t)}if(e("enabled")){var t=e("target");if(x.isArrayOrTypedArray(t)&&0===t.length)return r.enabled=!1,r;e("preservegaps"),e("operation"),e("value");t=i.getComponentMethod("calendars","handleDefaults");t(n,r,"valuecalendar",null),t(n,r,"targetcalendar",null)}return r},a.calcTransform=function(e,r,t){if(t.enabled){var n=x.getTargetArray(r,t);if(n){var a=t.target,i=n.length;r._length&&(i=Math.min(i,r._length));var o,s=t.targetcalendar,l=r._arrayAttrs,c=t.preservegaps;"string"!=typeof a||(o=x.nestedProperty(r,a+"calendar").get())&&(s=o);var u,d=function(t,n,r){var a=t.operation,e=t.value,i=Array.isArray(e);function o(e){return-1!==e.indexOf(a)}function s(e){return n(e,0,t.valuecalendar)}function l(e){return n(e,0,r)}var c;o(w)?c=s(i?e[0]:e):o(T)?c=i?[s(e[0]),s(e[1])]:[s(e),s(e)]:o(M)&&(c=i?e.map(s):[s(e)]);switch(a){case"=":return function(e){return l(e)===c};case"!=":return function(e){return l(e)!==c};case"<":return function(e){return l(e)<c};case"<=":return function(e){return l(e)<=c};case">":return function(e){return l(e)>c};case">=":return function(e){return l(e)>=c};case"[]":return function(e){e=l(e);return e>=c[0]&&e<=c[1]};case"()":return function(e){e=l(e);return e>c[0]&&e<c[1]};case"[)":return function(e){e=l(e);return e>=c[0]&&e<c[1]};case"(]":return function(e){e=l(e);return e>c[0]&&e<=c[1]};case"][":return function(e){e=l(e);return e<=c[0]||e>=c[1]};case")(":return function(e){e=l(e);return e<c[0]||e>c[1]};case"](":return function(e){e=l(e);return e<=c[0]||e>c[1]};case")[":return function(e){e=l(e);return e<c[0]||e>=c[1]};case"{}":return function(e){return-1!==c.indexOf(l(e))};case"}{":return function(e){return-1===c.indexOf(l(e))}}}(t,b.getDataToCoordFunc(e,r,a,n),s),f={},p={},h=0,m=c?(u=function(e){f[e.astr]=x.extendDeep([],e.get()),e.set(new Array(i))},function(e,t){var n=f[e.astr][t];e.get()[t]=n}):(u=function(e){f[e.astr]=x.extendDeep([],e.get()),e.set([])},function(e,t){t=f[e.astr][t];e.get().push(t)});v(u);for(var g=_(r.transforms,t),y=0;y<i;y++)d(n[y])?(v(m,y),p[h++]=g(y)):c&&h++;t._indexToPoints=p,r._length=h}}function v(e,t){for(var n=0;n<l.length;n++)e(x.nestedProperty(r,l[n]),t)}}},{"../constants/filter_ops":263,"../lib":285,"../plots/cartesian/axes":331,"../registry":373,"./helpers":544}],543:[function(e,t,u){"use strict";var k=e("../lib"),A=e("../plot_api/plot_schema"),S=e("../plots/plots"),E=e("./helpers").pointsAccessorFunction;u.moduleType="transform",u.name="groupby",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},u.supplyDefaults=function(n,e,t){var r,a={};function i(e,t){return k.coerce(n,a,u.attributes,e,t)}if(!i("enabled"))return a;i("groups"),i("nameformat",1<t._dataLength?"%{group} (%{trace})":"%{group}");var o=n.styles,s=a.styles=[];if(o)for(r=0;r<o.length;r++){var l=s[r]={};k.coerce(o[r],s[r],u.attributes.styles,"target");var c=k.coerce(o[r],s[r],u.attributes.styles,"value");k.isPlainObject(c)?l.value=k.extendDeep({},c):c&&delete l.value}return a},u.transform=function(e,t){for(var n,r,a=[],i=0;i<e.length;i++)for(n=function(e,t){var n,r,a,i,o,s,l,c,u,d,f=t.transform,p=t.transformIndex,h=e.transforms[p].groups,m=E(e.transforms,f);if(!k.isArrayOrTypedArray(h)||0===h.length)return[e];var g=k.filterUnique(h),y=new Array(g.length),v=h.length,x=A.findArrayAttributes(e),b=f.styles||[],_={};for(n=0;n<b.length;n++)_[b[n].target]=b[n].value;f.styles&&(d=k.keyedContainer(f,"styles","target","value.name"));var w={},T={};for(n=0;n<g.length;n++){s=g[n],w[s]=n,T[s]=0,(l=y[n]=k.extendDeepNoArrays({},e))._group=s,l.transforms[p]._indexToPoints={};var M=null;for(d&&(M=d.get(s)),l.name=M||""===M?M:k.templateString(f.nameformat,{trace:e.name,group:s}),c=l.transforms,l.transforms=[],r=0;r<c.length;r++)l.transforms[r]=k.extendDeepNoArrays({},c[r]);for(r=0;r<x.length;r++)k.nestedProperty(l,x[r]).set([])}for(a=0;a<x.length;a++){for(i=x[a],r=0,u=[];r<g.length;r++)u[r]=k.nestedProperty(y[r],i).get();for(o=k.nestedProperty(e,i).get(),r=0;r<v;r++)u[w[h[r]]].push(o[r])}for(r=0;r<v;r++)(l=y[w[h[r]]]).transforms[p]._indexToPoints[T[h[r]]]=m(r),T[h[r]]++;for(n=0;n<g.length;n++)s=g[n],l=y[n],S.clearExpandedTraceDefaultColors(l),l=k.extendDeepNoArrays(l,_[s]||{});return y}(e[i],t),r=0;r<n.length;r++)a.push(n[r]);return a}},{"../lib":285,"../plot_api/plot_schema":319,"../plots/plots":366,"./helpers":544}],544:[function(e,t,n){"use strict";n.pointsAccessorFunction=function(e,t){for(var n,r,a=0;a<e.length&&(n=e[a])!==t;a++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);return r?function(e){return r[e]}:function(e){return[e]}}},{}],545:[function(e,t,a){"use strict";var m=e("../lib"),g=e("../plots/cartesian/axes"),y=e("./helpers").pointsAccessorFunction,v=e("../constants/numerical").BADNUM;a.moduleType="transform",a.name="sort",a.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},a.supplyDefaults=function(n){var r={};function e(e,t){return m.coerce(n,r,a.attributes,e,t)}return e("enabled")&&(e("target"),e("order")),r},a.calcTransform=function(e,t,n){if(n.enabled){var r=m.getTargetArray(t,n);if(r){var a=n.target,i=r.length;t._length&&(i=Math.min(i,t._length));for(var o=t._arrayAttrs,s=function(e,t,n,r){var a,i=new Array(r),o=new Array(r);for(a=0;a<r;a++)i[a]={v:t[a],i:a};for(i.sort(function(e,n){switch(e.order){case"ascending":return function(e,t){e=n(e.v),t=n(t.v);return e===v?1:t===v?-1:e-t};case"descending":return function(e,t){e=n(e.v),t=n(t.v);return e===v?1:t===v?-1:t-e}}}(e,n)),a=0;a<r;a++)o[a]=i[a].i;return o}(n,r,g.getDataToCoordFunc(e,t,a,r),i),l=y(t.transforms,n),c={},u=0;u<o.length;u++){for(var d=m.nestedProperty(t,o[u]),f=d.get(),p=new Array(i),h=0;h<i;h++)p[h]=f[s[h]];d.set(p)}for(h=0;h<i;h++)c[h]=l(s[h]);n._indexToPoints=c,t._length=i}}}},{"../constants/numerical":265,"../lib":285,"../plots/cartesian/axes":331,"./helpers":544}],546:[function(e,t,n){"use strict";n.version="2.2.0"},{}]},{},[15])(15)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Popper={})}(this,function(e){"use strict";function d(e){e=e.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function g(e){if(null==e)return window;if("[object Window]"===e.toString())return e;e=e.ownerDocument;return e&&e.defaultView||window}function u(e){e=g(e);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function m(e){return e instanceof g(e).Element||e instanceof Element}function f(e){return e instanceof g(e).HTMLElement||e instanceof HTMLElement}function a(e){return"undefined"!=typeof ShadowRoot&&(e instanceof g(e).ShadowRoot||e instanceof ShadowRoot)}function s(e){return e?(e.nodeName||"").toLowerCase():null}function y(e){return((m(e)?e.ownerDocument:e.document)||window.document).documentElement}function p(e){return d(y(e)).left+u(e).scrollLeft}function v(e){return g(e).getComputedStyle(e)}function l(e){var t=v(e),n=t.overflow,e=t.overflowX,t=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+t+e)}function x(e,t,n){void 0===n&&(n=!1);var r=y(t),a=d(e),i=f(t),o={scrollLeft:0,scrollTop:0},e={x:0,y:0};return!i&&(i||n)||("body"===s(t)&&!l(r)||(o=(n=t)!==g(n)&&f(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:u(n)),f(t)?((e=d(t)).x+=t.clientLeft,e.y+=t.clientTop):r&&(e.x=p(r))),{x:a.left+o.scrollLeft-e.x,y:a.top+o.scrollTop-e.y,width:a.width,height:a.height}}function M(e){var t=d(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function o(e){return"html"===s(e)?e:e.assignedSlot||e.parentNode||(a(e)?e.host:null)||y(e)}function b(e,t){void 0===t&&(t=[]);var n=function e(t){return 0<=["html","body","#document"].indexOf(s(t))?t.ownerDocument.body:f(t)&&l(t)?t:e(o(t))}(e),e=n===(null==(r=e.ownerDocument)?void 0:r.body),r=g(n),n=e?[r].concat(r.visualViewport||[],l(n)?n:[]):n,t=t.concat(n);return e?t:t.concat(b(o(n)))}function i(e){return f(e)&&"fixed"!==v(e).position?e.offsetParent:null}function k(e){for(var t,n=g(e),r=i(e);r&&(t=r,0<=["table","td","th"].indexOf(s(t)))&&"static"===v(r).position;)r=i(r);return(!r||"html"!==s(r)&&("body"!==s(r)||"static"!==v(r).position))&&(r||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(n&&f(e)&&"fixed"===v(e).position)return null;for(var r=o(e);f(r)&&["html","body"].indexOf(s(r))<0;){var a=v(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||t&&"filter"===a.willChange||t&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(e))||n}var S="top",E="bottom",L="right",C="left",D="auto",O=[S,E,L,C],P="start",c="end",h="clippingParents",_="viewport",w="popper",T="reference",I=O.reduce(function(e,t){return e.concat([t+"-"+P,t+"-"+c])},[]),R=[].concat(O,[D]).reduce(function(e,t){return e.concat([t,t+"-"+P,t+"-"+c])},[]),A=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function N(e){var n=new Map,r=new Set,a=[];return e.forEach(function(e){n.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||!function t(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){r.has(e)||(e=n.get(e))&&t(e)}),a.push(e)}(e)}),a}function z(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce(function(e,t){return e.replace(/%s/,t)},e)}var F='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',j='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',H=["name","enabled","phase","fn","effect","requires","options"];function B(e){return e.split("-")[0]}var q=Math.max,U=Math.min,Y=Math.round;function V(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&a(n)){var r=t;do{if(r&&e.isSameNode(r))return!0}while(r=r.parentNode||r.host)}return!1}function G(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function W(e,t){return t===_?G((i=g(a=e),o=y(a),s=i.visualViewport,l=o.clientWidth,c=o.clientHeight,o=i=0,s&&(l=s.width,c=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=s.offsetLeft,o=s.offsetTop)),{width:l,height:c,x:i+p(a),y:o})):f(t)?((r=d(n=t)).top=r.top+n.clientTop,r.left=r.left+n.clientLeft,r.bottom=r.top+n.clientHeight,r.right=r.left+n.clientWidth,r.width=n.clientWidth,r.height=n.clientHeight,r.x=r.left,r.y=r.top,r):G((a=y(e),o=y(a),t=u(a),r=null==(n=a.ownerDocument)?void 0:n.body,e=q(o.scrollWidth,o.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),n=q(o.scrollHeight,o.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-t.scrollLeft+p(a),t=-t.scrollTop,"rtl"===v(r||o).direction&&(a+=q(o.clientWidth,r?r.clientWidth:0)-e),{width:e,height:n,x:a,y:t}));var n,r,a,i,o,s,l,c}function Z(n,e,t){var r,a,i,e="clippingParents"===e?(a=b(o(r=n)),m(i=0<=["absolute","fixed"].indexOf(v(r).position)&&f(r)?k(r):r)?a.filter(function(e){return m(e)&&V(e,i)&&"body"!==s(e)}):[]):[].concat(e),e=[].concat(e,[t]),t=e[0],t=e.reduce(function(e,t){t=W(n,t);return e.top=q(t.top,e.top),e.right=U(t.right,e.right),e.bottom=U(t.bottom,e.bottom),e.left=q(t.left,e.left),e},W(n,t));return t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}function $(e){return e.split("-")[1]}function X(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function J(e){var t,n=e.reference,r=e.element,a=e.placement,e=a?B(a):null,a=a?$(a):null,i=n.x+n.width/2-r.width/2,o=n.y+n.height/2-r.height/2;switch(e){case S:t={x:i,y:n.y-r.height};break;case E:t={x:i,y:n.y+n.height};break;case L:t={x:n.x+n.width,y:o};break;case C:t={x:n.x-r.width,y:o};break;default:t={x:n.x,y:n.y}}var s=e?X(e):null;if(null!=s){var l="y"===s?"height":"width";switch(a){case P:t[s]=t[s]-(n[l]/2-r[l]/2);break;case c:t[s]=t[s]+(n[l]/2-r[l]/2)}}return t}function K(){return{top:0,right:0,bottom:0,left:0}}function Q(e){return Object.assign({},K(),e)}function ee(n,e){return e.reduce(function(e,t){return e[t]=n,e},{})}function te(e,t){var r,n=t=void 0===t?{}:t,a=n.placement,i=void 0===a?e.placement:a,o=n.boundary,s=void 0===o?h:o,l=n.rootBoundary,c=void 0===l?_:l,t=n.elementContext,a=void 0===t?w:t,o=n.altBoundary,l=void 0!==o&&o,t=n.padding,o=void 0===t?0:t,n=Q("number"!=typeof o?o:ee(o,O)),t=e.elements.reference,o=e.rects.popper,l=e.elements[l?a===w?T:w:a],s=Z(m(l)?l:l.contextElement||y(e.elements.popper),s,c),c=d(t),t=J({reference:c,element:o,strategy:"absolute",placement:i}),t=G(Object.assign({},o,t)),c=a===w?t:c,u={top:s.top-c.top+n.top,bottom:c.bottom-s.bottom+n.bottom,left:s.left-c.left+n.left,right:c.right-s.right+n.right},e=e.modifiersData.offset;return a===w&&e&&(r=e[i],Object.keys(u).forEach(function(e){var t=0<=[L,E].indexOf(e)?1:-1,n=0<=[S,E].indexOf(e)?"y":"x";u[e]+=r[n]*t})),u}var ne="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",re={placement:"bottom",modifiers:[],strategy:"absolute"};function ae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function t(e){var t=e=void 0===e?{}:e,e=t.defaultModifiers,p=void 0===e?[]:e,t=t.defaultOptions,h=void 0===t?re:t;return function(o,s,t){void 0===t&&(t=h);var n,r,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},re,h),modifiersData:{},elements:{reference:o,popper:s},attributes:{},styles:{}},c=[],u=!1,d={state:l,setOptions:function(e){f(),l.options=Object.assign({},h,l.options,e),l.scrollParents={reference:m(o)?b(o):o.contextElement?b(o.contextElement):[],popper:b(s)};var n,t,e=(e=[].concat(p,l.options.modifiers),t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),e=Object.keys(t).map(function(e){return t[e]}),n=N(e),A.reduce(function(e,t){return e.concat(n.filter(function(e){return e.phase===t}))},[]));l.orderedModifiers=e.filter(function(e){return e.enabled});e=[].concat(e,l.options.modifiers),a=function(e){return e.name},i=new Set,e=e.filter(function(e){e=a(e);if(!i.has(e))return i.add(e),!0});(r=e).forEach(function(n){Object.keys(n).forEach(function(e){switch(e){case"name":"string"!=typeof n.name&&console.error(z(F,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":"boolean"!=typeof n.enabled&&console.error(z(F,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));case"phase":A.indexOf(n.phase)<0&&console.error(z(F,n.name,'"phase"',"either "+A.join(", "),'"'+String(n.phase)+'"'));break;case"fn":"function"!=typeof n.fn&&console.error(z(F,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":"function"!=typeof n.effect&&console.error(z(F,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":Array.isArray(n.requires)||console.error(z(F,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(z(F,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+H.map(function(e){return'"'+e+'"'}).join(", ")+'; but "'+e+'" was provided.')}n.requires&&n.requires.forEach(function(t){null==r.find(function(e){return e.name===t})&&console.error(z(j,String(n.name),t,t))})})}),B(l.options.placement)===D&&(l.orderedModifiers.find(function(e){return"flip"===e.name})||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" ")));var r,a,i,e=v(s);return[e.marginTop,e.marginRight,e.marginBottom,e.marginLeft].some(function(e){return parseFloat(e)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" ")),l.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,e=e.effect;"function"==typeof e&&(n=e({state:l,name:t,instance:d,options:void 0===n?{}:n}),c.push(n||function(){}))}),d.update()},forceUpdate:function(){if(!u){var e=l.elements,t=e.reference,e=e.popper;if(ae(t,e)){l.rects={reference:x(t,k(e),"fixed"===l.options.strategy),popper:M(e)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(e){return l.modifiersData[e.name]=Object.assign({},e.data)});for(var n,r,a,i=0,o=0;o<l.orderedModifiers.length;o++){if(100<(i+=1)){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}!0!==l.reset?(n=(a=l.orderedModifiers[o]).fn,r=a.options,a=a.name,"function"==typeof n&&(l=n({state:l,options:void 0===r?{}:r,name:a,instance:d})||l)):(l.reset=!1,o=-1)}}else console.error(ne)}},update:(n=function(){return new Promise(function(e){d.forceUpdate(),e(l)})},function(){return r=r||new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(n())})})}),destroy:function(){f(),u=!0}};return ae(o,s)?d.setOptions(t).then(function(e){!u&&t.onFirstUpdate&&t.onFirstUpdate(e)}):console.error(ne),d;function f(){c.forEach(function(e){return e()}),c=[]}}}var ie={passive:!0};var n={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=void 0===(e=r.scroll)||e,i=void 0===(r=r.resize)||r,o=g(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&s.forEach(function(e){e.addEventListener("scroll",n.update,ie)}),i&&o.addEventListener("resize",n.update,ie),function(){a&&s.forEach(function(e){e.removeEventListener("scroll",n.update,ie)}),i&&o.removeEventListener("resize",n.update,ie)}},data:{}};var r={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,e=e.name;t.modifiersData[e]=J({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},oe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function se(e){var t=e.popper,n=e.popperRect,r=e.placement,a=e.offsets,i=e.position,o=e.gpuAcceleration,s=e.adaptive,l=e.roundOffsets,c=!0===l?(p=(m=a).x,h=m.y,m=window.devicePixelRatio||1,{x:Y(Y(p*m)/m)||0,y:Y(Y(h*m)/m)||0}):"function"==typeof l?l(a):a,u=c.x,d=void 0===u?0:u,f=c.y,e=void 0===f?0:f,p=a.hasOwnProperty("x"),h=a.hasOwnProperty("y"),m=C,l=S,u=window;s&&(c="clientHeight",f="clientWidth",(a=k(t))===g(t)&&"static"!==v(a=y(t)).position&&(c="scrollHeight",f="scrollWidth"),r===S&&(l=E,e-=a[c]-n.height,e*=o?1:-1),r===C&&(m=L,d-=a[f]-n.width,d*=o?1:-1));var s=Object.assign({position:i},s&&oe);return o?Object.assign({},s,((o={})[l]=h?"0":"",o[m]=p?"0":"",o.transform=(u.devicePixelRatio||1)<2?"translate("+d+"px, "+e+"px)":"translate3d("+d+"px, "+e+"px, 0)",o)):Object.assign({},s,((s={})[l]=h?e+"px":"",s[m]=p?d+"px":"",s.transform="",s))}var le={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,e=void 0===(r=n.gpuAcceleration)||r,r=void 0===(r=n.adaptive)||r,n=void 0===(n=n.roundOffsets)||n,a=v(t.elements.popper).transitionProperty||"";r&&["transform","top","right","bottom","left"].some(function(e){return 0<=a.indexOf(e)})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" ")),e={placement:B(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:e},null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,se(Object.assign({},e,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:n})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,se(Object.assign({},e,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ce={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var a=e.state;Object.keys(a.elements).forEach(function(e){var t=a.styles[e]||{},n=a.attributes[e]||{},r=a.elements[e];f(r)&&s(r)&&(Object.assign(r.style,t),Object.keys(n).forEach(function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var r=e.state,a={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,a.popper),r.styles=a,r.elements.arrow&&Object.assign(r.elements.arrow.style,a.arrow),function(){Object.keys(r.elements).forEach(function(e){var t=r.elements[e],n=r.attributes[e]||{},e=Object.keys((r.styles.hasOwnProperty(e)?r.styles:a)[e]).reduce(function(e,t){return e[t]="",e},{});f(t)&&s(t)&&(Object.assign(t.style,e),Object.keys(n).forEach(function(e){t.removeAttribute(e)}))})}},requires:["computeStyles"]};var ue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var o=e.state,t=e.options,n=e.name,s=void 0===(r=t.offset)?[0,0]:r,e=R.reduce(function(e,t){var n,r,a,i;return e[t]=(n=t,r=o.rects,a=s,i=B(n),t=0<=[C,S].indexOf(i)?-1:1,a=(a=(n="function"==typeof a?a(Object.assign({},r,{placement:n})):a)[0])||0,n=((n=n[1])||0)*t,0<=[C,L].indexOf(i)?{x:n,y:a}:{x:a,y:n}),e},{}),r=(t=e[o.placement]).x,t=t.y;null!=o.modifiersData.popperOffsets&&(o.modifiersData.popperOffsets.x+=r,o.modifiersData.popperOffsets.y+=t),o.modifiersData[n]=e}},de={left:"right",right:"left",bottom:"top",top:"bottom"};function fe(e){return e.replace(/left|right|bottom|top/g,function(e){return de[e]})}var pe={start:"end",end:"start"};function he(e){return e.replace(/start|end/g,function(e){return pe[e]})}var me={name:"flip",enabled:!0,phase:"main",fn:function(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var a=t.mainAxis,i=void 0===a||a,e=t.altAxis,o=void 0===e||e,a=t.fallbackPlacements,s=t.padding,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,e=t.flipVariations,d=void 0===e||e,f=t.allowedAutoPlacements,e=n.options.placement,t=B(e),t=a||(t===e||!d?[fe(e)]:function(e){if(B(e)===D)return[];var t=fe(e);return[he(e),t,he(t)]}(e)),p=[e].concat(t).reduce(function(e,t){return e.concat(B(t)===D?function(n,e){var t=e=void 0===e?{}:e,r=t.placement,a=t.boundary,i=t.rootBoundary,o=t.padding,e=t.flipVariations,s=void 0===(t=t.allowedAutoPlacements)?R:t,l=$(r),r=l?e?I:I.filter(function(e){return $(e)===l}):O;0===(e=r.filter(function(e){return 0<=s.indexOf(e)})).length&&(e=r,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var c=e.reduce(function(e,t){return e[t]=te(n,{placement:t,boundary:a,rootBoundary:i,padding:o})[B(t)],e},{});return Object.keys(c).sort(function(e,t){return c[e]-c[t]})}(n,{placement:t,boundary:l,rootBoundary:c,padding:s,flipVariations:d,allowedAutoPlacements:f}):t)},[]),h=n.rects.reference,m=n.rects.popper,g=new Map,y=!0,v=p[0],x=0;x<p.length;x++){var b=p[x],_=B(b),w=$(b)===P,T=0<=[S,E].indexOf(_),M=T?"width":"height",k=te(n,{placement:b,boundary:l,rootBoundary:c,altBoundary:u,padding:s}),T=T?w?L:C:w?E:S;h[M]>m[M]&&(T=fe(T));w=fe(T),M=[];if(i&&M.push(k[_]<=0),o&&M.push(k[T]<=0,k[w]<=0),M.every(function(e){return e})){v=b,y=!1;break}g.set(b,M)}if(y)for(var A=d?3:1;0<A;A--)if("break"===function(t){var e=p.find(function(e){e=g.get(e);if(e)return e.slice(0,t).every(function(e){return e})});if(e)return v=e,"break"}(A))break;n.placement!==v&&(n.modifiersData[r]._skip=!0,n.placement=v,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ge(e,t,n){return q(e,U(t,n))}var ye={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=void 0===(w=n.mainAxis)||w,i=void 0!==(T=n.altAxis)&&T,o=n.boundary,s=n.rootBoundary,l=n.altBoundary,c=n.padding,u=n.tether,d=void 0===u||u,f=n.tetherOffset,p=void 0===f?0:f,h=te(t,{boundary:o,rootBoundary:s,padding:c,altBoundary:l}),m=B(t.placement),g=$(t.placement),y=!g,v=X(m),x="x"===v?"y":"x",b=t.modifiersData.popperOffsets,_=t.rects.reference,e=t.rects.popper,w="function"==typeof p?p(Object.assign({},t.rects,{placement:t.placement})):p,T={x:0,y:0};b&&((a||i)&&(u="y"===v?"height":"width",n=b[v],o=b[v]+h[f="y"===v?S:C],c=b[v]-h[s="y"===v?E:L],l=d?-e[u]/2:0,m=(g===P?_:e)[u],p=g===P?-e[u]:-_[u],g=t.elements.arrow,e=d&&g?M(g):{width:0,height:0},f=(g=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:K())[f],s=g[s],e=ge(0,_[u],e[u]),f=y?_[u]/2-l-e-f-w:m-e-f-w,e=y?-_[u]/2+l+e+s+w:p+e+s+w,w=(s=t.elements.arrow&&k(t.elements.arrow))?"y"===v?s.clientTop||0:s.clientLeft||0:0,s=t.modifiersData.offset?t.modifiersData.offset[t.placement][v]:0,w=b[v]+f-s-w,s=b[v]+e-s,a&&(c=ge(d?U(o,w):o,n,d?q(c,s):c),b[v]=c,T[v]=c-n),i&&(i=(n=b[x])+h["x"===v?S:C],v=n-h["x"===v?E:L],v=ge(d?U(i,w):i,n,d?q(v,s):v),b[x]=v,T[x]=v-n)),t.modifiersData[r]=T)},requiresIfExists:["offset"]};var ve={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,r=e.state,a=e.name,i=e.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,l=B(r.placement),c=X(l),u=0<=[C,L].indexOf(l)?"height":"width";o&&s&&(t=i.padding,n=r,e=Q("number"!=typeof(t="function"==typeof t?t(Object.assign({},n.rects,{placement:n.placement})):t)?t:ee(t,O)),l=M(o),i="y"===c?S:C,n="y"===c?E:L,t=r.rects.reference[u]+r.rects.reference[c]-s[c]-r.rects.popper[u],s=s[c]-r.rects.reference[c],o=(o=k(o))?"y"===c?o.clientHeight||0:o.clientWidth||0:0,i=e[i],n=o-l[u]-e[n],n=ge(i,s=o/2-l[u]/2+(t/2-s/2),n),r.modifiersData[a]=((a={})[c]=n,a.centerOffset=n-s,a))},effect:function(e){var t=e.state;null!=(e=void 0===(e=e.options.element)?"[data-popper-arrow]":e)&&("string"==typeof e&&!(e=t.elements.popper.querySelector(e))||(f(e)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),V(t.elements.popper,e)?t.elements.arrow=e:console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "))))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function xe(e,t,n){return{top:e.top-t.height-(n=void 0===n?{x:0,y:0}:n).y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function be(t){return[S,L,E,C].some(function(e){return 0<=t[e]})}var _e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=te(t,{elementContext:"reference"}),e=te(t,{altBoundary:!0}),r=xe(o,r),e=xe(e,a,i),a=be(r),i=be(e);t.modifiersData[n]={referenceClippingOffsets:r,popperEscapeOffsets:e,isReferenceHidden:a,hasPopperEscaped:i},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":i})}},we=t({defaultModifiers:[n,r,le,ce]}),Te=[n,r,le,ce,ue,me,ye,ve,_e],Me=t({defaultModifiers:Te});e.applyStyles=ce,e.arrow=ve,e.computeStyles=le,e.createPopper=Me,e.createPopperLite=we,e.defaultModifiers=Te,e.detectOverflow=te,e.eventListeners=n,e.flip=me,e.hide=_e,e.offset=ue,e.popperGenerator=t,e.popperOffsets=r,e.preventOverflow=ye,Object.defineProperty(e,"__esModule",{value:!0})}),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(t){var e,n,r,f,i,o,p,h,m,g,y,v,a,s,x,r=((u=t&&t.fn&&t.fn.select2&&t.fn.select2.amd?t.fn.select2.amd:u)&&u.requirejs||(u?n=u:u={},m={},g={},y={},v={},a=Object.prototype.hasOwnProperty,s=[].slice,x=/\.js$/,p=function(e,t){var n,r,a=c(e),i=a[0],t=t[1];return e=a[1],i&&(n=w(i=l(i,t))),i?e=n&&n.normalize?n.normalize(e,(r=t,function(e){return l(e,r)})):l(e,t):(i=(a=c(e=l(e,t)))[0],e=a[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},h={require:function(e){return _(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:(t=e,function(){return y&&y.config&&y.config[t]||{}})};var t}},i=function(e,t,n,r){var a,i,o,s,l,c=[],u=typeof n,d=T(r=r||e);if("undefined"==u||"function"==u){for(t=!t.length&&n.length?["require","exports","module"]:t,s=0;s<t.length;s+=1)if("require"===(i=(o=p(t[s],d)).f))c[s]=h.require(e);else if("exports"===i)c[s]=h.exports(e),l=!0;else if("module"===i)a=c[s]=h.module(e);else if(b(m,i)||b(g,i)||b(v,i))c[s]=w(i);else{if(!o.p)throw new Error(e+" missing "+i);o.p.load(o.n,_(r,!0),function(t){return function(e){m[t]=e}}(i),{}),c[s]=m[i]}u=n?n.apply(m[e],c):void 0,e&&(a&&a.exports!==f&&a.exports!==m[e]?m[e]=a.exports:u===f&&l||(m[e]=u))}else e&&(m[e]=n)},e=n=o=function(e,t,n,r,a){if("string"==typeof e)return h[e]?h[e](t):w(p(e,T(t)).f);if(!e.splice){if((y=e).deps&&o(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=f}return t=t||function(){},"function"==typeof n&&(n=r,r=a),r?i(f,e,t,n):setTimeout(function(){i(f,e,t,n)},4),o},o.config=function(e){return o(e)},e._defined=m,(r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),b(m,e)||b(g,e)||(g[e]=[e,t,n])}).amd={jQuery:!0},u.requirejs=e,u.require=n,u.define=r),u.define("almond",function(){}),u.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),u.define("select2/utils",["jquery"],function(i){var r={};function c(e){var t,n=e.prototype,r=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&r.push(t);return r}r.Extend=function(e,t){var n,r={}.hasOwnProperty;function a(){this.constructor=e}for(n in t)r.call(t,n)&&(e[n]=t[n]);return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e},r.Decorate=function(r,a){var e=c(a),t=c(r);function i(){var e=Array.prototype.unshift,t=a.prototype.constructor.length,n=r.prototype.constructor;0<t&&(e.call(arguments,r.prototype.constructor),n=a.prototype.constructor),n.apply(this,arguments)}a.displayName=r.displayName,i.prototype=new function(){this.constructor=i};for(var n=0;n<t.length;n++){var o=t[n];i.prototype[o]=r.prototype[o]}for(var s=0;s<e.length;s++){var l=e[s];i.prototype[l]=function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var n=a.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}(l)}return i};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this,t)},r.Observable=e,r.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},r.bind=function(e,t){return function(){e.apply(t,arguments)}},r._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(1!==n.length){for(var a=0;a<n.length;a++){var i=n[a];(i=i.substring(0,1).toLowerCase()+i.substring(1))in r||(r[i]={}),a==n.length-1&&(r[i]=e[t]),r=r[i]}delete e[t]}}return e},r.hasScroll=function(e,t){var n=i(t),r=t.style.overflowX,a=t.style.overflowY;return(r!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===r||"scroll"===a||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},r.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},r.__cache={};var n=0;return r.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null!=t||(t=e.id?"select2-data-"+e.id:"select2-data-"+(++n).toString()+"-"+r.generateChars(4),e.setAttribute("data-select2-id",t)),t},r.StoreData=function(e,t,n){e=r.GetUniqueElementId(e);r.__cache[e]||(r.__cache[e]={}),r.__cache[e][t]=n},r.GetData=function(e,t){var n=r.GetUniqueElementId(e);return t?r.__cache[n]&&null!=r.__cache[n][t]?r.__cache[n][t]:i(e).data(t):r.__cache[n]},r.RemoveData=function(e){var t=r.GetUniqueElementId(e);null!=r.__cache[t]&&delete r.__cache[t],e.removeAttribute("data-select2-id")},r.copyNonInternalCssClasses=function(e,t){var n=(n=e.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0===e.indexOf("select2-")}),t=(t=t.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0!==e.indexOf("select2-")}),t=n.concat(t);e.setAttribute("class",t.join(" "))},r}),u.define("select2/results",["jquery","./utils"],function(d,f){function r(e,t,n){this.$element=e,this.data=n,this.options=t,r.__super__.constructor.call(this)}return f.Extend(r,f.Observable),r.prototype.render=function(){var e=d('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},r.prototype.clear=function(){this.$results.empty()},r.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=d('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);n.append(t(r(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},r.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},r.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],r=this.option(r);t.push(r)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},r.prototype.position=function(e,t){t.find(".select2-results").append(e)},r.prototype.sort=function(e){return this.options.get("sorter")(e)},r.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},r.prototype.setClasses=function(){var t=this;this.data.current(function(e){var r=e.map(function(e){return e.id.toString()});t.$results.find(".select2-results__option--selectable").each(function(){var e=d(this),t=f.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<r.indexOf(n)?(this.classList.add("select2-results__option--selected"),e.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),e.attr("aria-selected","false"))})})},r.prototype.showLoading=function(e){this.hideLoading();e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},e=this.option(e);e.className+=" loading-results",this.$results.prepend(e)},r.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},r.prototype.option=function(e){var t=document.createElement("li");t.classList.add("select2-results__option"),t.classList.add("select2-results__option--selectable");var n,r={role:"option"},a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(n in(null!=e.element&&a.call(e.element,":disabled")||null==e.element&&e.disabled)&&(r["aria-disabled"]="true",t.classList.remove("select2-results__option--selectable"),t.classList.add("select2-results__option--disabled")),null==e.id&&t.classList.remove("select2-results__option--selectable"),null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(r.role="group",r["aria-label"]=e.text,t.classList.remove("select2-results__option--selectable"),t.classList.add("select2-results__option--group")),r){var i=r[n];t.setAttribute(n,i)}if(e.children){var o=d(t),s=document.createElement("strong");s.className="select2-results__group",this.template(e,s);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],u=this.option(u);l.push(u)}a=d("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});a.append(l),o.append(s),o.append(a)}else this.template(e,t);return f.StoreData(t,"data",e),t},r.prototype.bind=function(t,e){var a=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){a.clear(),a.append(e.data),t.isOpen()&&(a.setClasses(),a.highlightFirstItem())}),t.on("results:append",function(e){a.append(e.data),t.isOpen()&&a.setClasses()}),t.on("query",function(e){a.hideMessages(),a.showLoading(e)}),t.on("select",function(){t.isOpen()&&(a.setClasses(),a.options.get("scrollAfterSelect")&&a.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(a.setClasses(),a.options.get("scrollAfterSelect")&&a.highlightFirstItem())}),t.on("open",function(){a.$results.attr("aria-expanded","true"),a.$results.attr("aria-hidden","false"),a.setClasses(),a.ensureHighlightVisible()}),t.on("close",function(){a.$results.attr("aria-expanded","false"),a.$results.attr("aria-hidden","true"),a.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=a.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e,t=a.getHighlightedResults();0!==t.length&&(e=f.GetData(t[0],"data"),t.hasClass("select2-results__option--selected")?a.trigger("close",{}):a.trigger("select",{data:e}))}),t.on("results:previous",function(){var e,t=a.getHighlightedResults(),n=a.$results.find(".select2-results__option--selectable"),r=n.index(t);r<=0||(e=r-1,0===t.length&&(e=0),(r=n.eq(e)).trigger("mouseenter"),t=a.$results.offset().top,n=r.offset().top,r=a.$results.scrollTop()+(n-t),0===e?a.$results.scrollTop(0):n-t<0&&a.$results.scrollTop(r))}),t.on("results:next",function(){var e,t=a.getHighlightedResults(),n=a.$results.find(".select2-results__option--selectable"),r=n.index(t)+1;r>=n.length||((e=n.eq(r)).trigger("mouseenter"),t=a.$results.offset().top+a.$results.outerHeight(!1),n=e.offset().top+e.outerHeight(!1),e=a.$results.scrollTop()+n-t,0===r?a.$results.scrollTop(0):t<n&&a.$results.scrollTop(e))}),t.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")}),t.on("results:message",function(e){a.displayMessage(e)}),d.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=a.$results.scrollTop(),n=a.$results.get(0).scrollHeight-t+e.deltaY,t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=a.$results.height();t?(a.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(a.$results.scrollTop(a.$results.get(0).scrollHeight-a.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(e){var t=d(this),n=f.GetData(this,"data");t.hasClass("select2-results__option--selected")?a.options.get("multiple")?a.trigger("unselect",{originalEvent:e,data:n}):a.trigger("close",{}):a.trigger("select",{originalEvent:e,data:n})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(e){var t=f.GetData(this,"data");a.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),a.trigger("results:focus",{data:t,element:d(this)})})},r.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},r.prototype.destroy=function(){this.$results.remove()},r.prototype.ensureHighlightVisible=function(){var e,t,n,r,a=this.getHighlightedResults();0!==a.length&&(e=this.$results.find(".select2-results__option--selectable").index(a),r=this.$results.offset().top,t=a.offset().top,n=this.$results.scrollTop()+(t-r),r=t-r,n-=2*a.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(n))},r.prototype.template=function(e,t){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),e=n(e,t);null==e?t.style.display="none":"string"==typeof e?t.innerHTML=r(e):d(t).append(e)},r}),u.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),u.define("select2/selection/base",["jquery","../utils","../keys"],function(n,r,a){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return r.Extend(i,r.Observable),i.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=r.GetData(this.$element[0],"old-tabindex")?this._tabindex=r.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},i.prototype.bind=function(e,t){var n=this,r=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===a.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",r),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},i.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},i.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=t[0]&&r.GetData(this,"element").select2("close")})})},i.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i}),u.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function a(){a.__super__.constructor.apply(this,arguments)}return n.Extend(a,t),a.prototype.render=function(){var e=a.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},a.prototype.bind=function(t,e){var n=this;a.__super__.bind.apply(this,arguments);var r=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",r),this.$selection.attr("aria-controls",r),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.trigger("focus")})},a.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return e("<span></span>")},a.prototype.update=function(e){var t,n;0!==e.length?(n=e[0],t=this.$selection.find(".select2-selection__rendered"),e=this.display(n,t),t.empty().append(e),(n=n.title||n.text)?t.attr("title",n):t.removeAttr("title")):this.clear()},a}),u.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,e,c){function i(e,t){i.__super__.constructor.apply(this,arguments)}return c.Extend(i,e),i.prototype.render=function(){var e=i.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(e,t){var n=this;i.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){var t;n.isDisabled()||(t=a(this).parent(),t=c.GetData(t[0],"data"),n.trigger("unselect",{originalEvent:e,data:t}))}),this.$selection.on("keydown",".select2-selection__choice__remove",function(e){n.isDisabled()||e.stopPropagation()})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return a('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",r=0;r<e.length;r++){var a=e[r],i=this.selectionContainer(),o=this.display(a,i),s=n+c.generateChars(4)+"-";a.id?s+=a.id:s+=c.generateChars(4),i.find(".select2-selection__choice__display").append(o).attr("id",s);var l=a.title||a.text;l&&i.attr("title",l);o=this.options.get("translations").get("removeItem"),l=i.find(".select2-selection__choice__remove");l.attr("title",o()),l.attr("aria-label",o()),l.attr("aria-describedby",s),c.StoreData(i[0],"data",a),t.push(i)}this.$selection.find(".select2-selection__rendered").append(t)}},i}),u.define("select2/selection/placeholder",[],function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();n.html(this.display(t)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice");t=t.title||t.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",t),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();t=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(t)},e}),u.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(a,r,s){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var r=s.GetData(n[0],"data"),a=this.$element.val();this.$element.val(this.placeholder.id);var i={data:r};if(this.trigger("clear",i),i.prevented)this.$element.val(a);else{for(var o=0;o<r.length;o++)if(i={data:r[o]},this.trigger("unselect",i),i.prevented)return void this.$element.val(a);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=r.DELETE&&t.which!=r.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){var n,r;e.call(this,t),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),0<this.$selection.find(".select2-selection__placeholder").length||0===t.length||(n=this.$selection.find(".select2-selection__rendered").attr("id"),r=this.options.get("translations").get("removeAllItems"),(e=a('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>')).attr("title",r()),e.attr("aria-label",r()),e.attr("aria-describedby",n),s.StoreData(e[0],"data",t),this.$selection.prepend(e),this.$selection[0].classList.add("select2-selection--clearable"))},e}),u.define("select2/selection/search",["jquery","../utils","../keys"],function(r,s,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=this.options.get("translations").get("search"),n=r('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=n,this.$search=n.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",t());e=e.call(this);return this._transferTabIndex(),e.append(this.$searchContainer),e},e.prototype.bind=function(e,t,n){var r=this,a=t.id+"-results",i=t.id+"-container";e.call(this,t,n),r.$search.attr("aria-describedby",i),t.on("open",function(){r.$search.attr("aria-controls",a),r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.resizeSearch(),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){var t;e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which!==l.BACKSPACE||""!==r.$search.val()||0<(t=r.$selection.find(".select2-selection__choice").last()).length&&(t=s.GetData(t[0],"data"),r.searchRemoveChoice(t),e.preventDefault())}),this.$selection.on("click",".select2-search--inline",function(e){r.$search.val()&&e.stopPropagation()});var t=document.documentMode,o=t&&t<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){o?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){var t;o&&"input"===e.type?r.$selection.off("input.search input.searchcheck"):(t=e.which)!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&r.handleSearch(e)})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},e}),u.define("select2/selection/selectionCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var t=e.call(this),e=this.options.get("selectionCssClass")||"";return-1!==e.indexOf(":all:")&&(e=e.replace(":all:",""),n.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(e),t},e}),u.define("select2/selection/eventRelay",["jquery"],function(o){function e(){}return e.prototype.bind=function(e,t,n){var r=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],i=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){var n;-1!==a.indexOf(e)&&(n=o.Event("select2:"+e,{params:t=t||{}}),r.$element.trigger(n),-1!==i.indexOf(e)&&(t.prevented=n.isDefaultPrevented()))})},e}),u.define("select2/translation",["jquery","require"],function(t,n){function r(e){this.dict=e||{}}return r.prototype.all=function(){return this.dict},r.prototype.get=function(e){return this.dict[e]},r.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},r._cache={},r.loadPath=function(e){var t;return e in r._cache||(t=n(e),r._cache[e]=t),new r(r._cache[e])},r}),u.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),u.define("select2/data/base",["../utils"],function(n){function r(e,t){r.__super__.constructor.call(this)}return n.Extend(r,n.Observable),r.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},r.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},r.prototype.bind=function(e,t){},r.prototype.destroy=function(){},r.prototype.generateResultId=function(e,t){e=e.id+"-result-";return e+=n.generateChars(4),null!=t.id?e+="-"+t.id.toString():e+="-"+n.generateChars(4),e},r}),u.define("select2/data/select",["./base","../utils","jquery"],function(e,s,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return s.Extend(n,e),n.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(l(e))}))},n.prototype.select=function(a){var e,i=this;if(a.selected=!0,null!=a.element&&"option"===a.element.tagName.toLowerCase())return a.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current(function(e){var t=[];(a=[a]).push.apply(a,e);for(var n=0;n<a.length;n++){var r=a[n].id;-1===t.indexOf(r)&&t.push(r)}i.$element.val(t),i.$element.trigger("input").trigger("change")}):(e=a.id,this.$element.val(e),this.$element.trigger("input").trigger("change"))},n.prototype.unselect=function(a){var i=this;if(this.$element.prop("multiple")){if(a.selected=!1,null!=a.element&&"option"===a.element.tagName.toLowerCase())return a.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].id;r!==a.id&&-1===t.indexOf(r)&&t.push(r)}i.$element.val(t),i.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){s.RemoveData(this)})},n.prototype.query=function(t,e){var n=[],r=this;this.$element.children().each(function(){var e;"option"!==this.tagName.toLowerCase()&&"optgroup"!==this.tagName.toLowerCase()||(e=l(this),e=r.item(e),null!==(e=r.matches(t,e))&&n.push(e))}),e({results:n})},n.prototype.addOptions=function(e){this.$element.append(e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);e=this._normalizeItem(e);return e.element=t,s.StoreData(t,"data",e),l(t)},n.prototype.item=function(e){var t={};if(null!=(t=s.GetData(e[0],"data")))return t;var n=e[0];if("option"===n.tagName.toLowerCase())t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===n.tagName.toLowerCase()){for(var t={text:e.prop("label"),children:[],title:e.prop("title")},r=e.children("option"),a=[],i=0;i<r.length;i++){var o=l(r[i]),o=this.item(o);a.push(o)}t.children=a}return(t=this._normalizeItem(t)).element=e[0],s.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),u.define("select2/data/array",["./select","../utils","jquery"],function(e,t,c){function r(e,t){this._dataToConvert=t.get("data")||[],r.__super__.constructor.call(this,e,t)}return t.Extend(r,e),r.prototype.bind=function(e,t){r.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var e;0===(e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()})).length&&(e=this.option(n),this.addOptions(e)),r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),r=n.map(function(){return t.item(c(this)).id}).get(),a=[];for(var i=0;i<e.length;i++){var o,s,l=this._normalizeItem(e[i]);0<=r.indexOf(l.id)?(o=n.filter(function(e){return function(){return c(this).val()==e.id}}(l)),s=this.item(o),s=c.extend(!0,{},l,s),s=this.option(s),o.replaceWith(s)):(s=this.option(l),l.children&&(l=this.convertToOptions(l.children),s.append(l)),a.push(s))}return a},r}),u.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){e=i.ajax(e);return e.then(t),e.fail(n),e}};return i.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(t,n){var r=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var a=i.extend({type:"GET"},this.ajaxOptions);function e(){var e=a.transport(a,function(e){e=r.processResults(e,t);r.options.get("debug")&&window.console&&console.error&&(e&&e.results&&Array.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){"status"in e&&(0===e.status||"0"===e.status)||r.trigger("results:message",{message:"errorLoading"})});r._request=e}"function"==typeof a.url&&(a.url=a.url.call(this.$element,t)),"function"==typeof a.data&&(a.data=a.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),u.define("select2/data/tags",["jquery"],function(t){function e(e,t,n){var r=n.get("tags"),a=n.get("createTag");void 0!==a&&(this.createTag=a);a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,t,n),Array.isArray(r))for(var i=0;i<r.length;i++){var o=r[i],o=this._normalizeItem(o),o=this.option(o);this.$element.append(o)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,n){for(var r=t.results,a=0;a<r.length;a++){var i=r[a],o=null!=i.children&&!e({results:i.children},!0);if((i.text||"").toUpperCase()===(c.term||"").toUpperCase()||o)return!n&&(t.data=r,void u(t))}if(n)return!0;var s,l=d.createTag(c);null!=l&&((s=d.option(l)).attr("data-select2-tag","true"),d.addOptions([s]),d.insertTag(r,l)),t.results=r,u(t)}):e.call(this,c,u)},e.prototype.createTag=function(e,t){if(null==t.term)return null;t=t.term.trim();return""===t?null:{id:t,text:t}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each(function(){this.selected||t(this).remove()})},e}),u.define("select2/data/tokenizer",["jquery"],function(c){function e(e,t,n){var r=n.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var r=this;t.term=t.term||"";var a=this.tokenizer(t,this.options,function(e){var t=r._normalizeItem(e);r.$element.find("option").filter(function(){return c(this).val()===t.id}).length||((e=r.option(t)).attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([e])),r.trigger("select",{data:t})});a.term!==t.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.trigger("focus")),t.term=a.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,r){for(var a=n.get("tokenSeparators")||[],i=t.term,o=0,s=this.createTag||function(e){return{id:e.term,text:e.term}};o<i.length;){var l=i[o];-1!==a.indexOf(l)?(l=i.substr(0,o),null!=(l=s(c.extend({},t,{term:l})))?(r(l),i=i.substr(o+1)||"",o=0):o++):o++}return{term:i}},e}),u.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),u.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),u.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(){r._checkIfMaximumSelected()})},e.prototype.query=function(e,t,n){var r=this;this._checkIfMaximumSelected(function(){e.call(r,t,n)})},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current(function(e){e=null!=e?e.length:0;0<n.maximumSelectionLength&&e>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()})},e}),u.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),u.define("select2/dropdown/search",["jquery"],function(i){function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("translations").get("search"),e=i('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=e,this.$search=e.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n()),t.prepend(e),t},e.prototype.bind=function(e,t,n){var r=this,a=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){i(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),t.on("open",function(){r.$search.attr("tabindex",0),r.$search.attr("aria-controls",a),r.$search.trigger("focus"),window.setTimeout(function(){r.$search.trigger("focus")},0)}),t.on("close",function(){r.$search.attr("tabindex",-1),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.val(""),r.$search.trigger("blur")}),t.on("focus",function(){t.isOpen()||r.$search.trigger("focus")}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer[0].classList.remove("select2-search--hide"):r.$searchContainer[0].classList.add("select2-search--hide"))}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")})},e.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},e.prototype.showSearch=function(e,t){return!0},e}),u.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),r=t.length-1;0<=r;r--){var a=t[r];this.placeholder.id===a.id&&n.splice(r,1)}return n},e}),u.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("query",function(e){r.lastParams=e,r.loading=!0}),t.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&(e=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=e+50&&this.loadMore())},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),u.define("select2/dropdown/attachBody",["jquery","../utils"],function(u,o){function e(e,t,n){this.$dropdownParent=u(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),r._bindContainerResultHandlers(t)}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=u("<span></span>"),e=e.call(this);return t.append(e),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){var n;this._containerResultsHandlersBound||(n=this,t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:message",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("select",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("unselect",function(){n._positionDropdown(),n._resizeDropdown()}),this._containerResultsHandlersBound=!0)},e.prototype._attachPositioningHandler=function(e,t){var n=this,r="scroll.select2."+t.id,a="resize.select2."+t.id,i="orientationchange.select2."+t.id,t=this.$container.parents().filter(o.hasScroll);t.each(function(){o.StoreData(this,"select2-scroll-position",{x:u(this).scrollLeft(),y:u(this).scrollTop()})}),t.on(r,function(e){var t=o.GetData(this,"select2-scroll-position");u(this).scrollTop(t.y)}),u(window).on(r+" "+a+" "+i,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,r="resize.select2."+t.id,t="orientationchange.select2."+t.id;this.$container.parents().filter(o.hasScroll).off(n),u(window).off(n+" "+r+" "+t)},e.prototype._positionDropdown=function(){var e=u(window),t=this.$dropdown[0].classList.contains("select2-dropdown--above"),n=this.$dropdown[0].classList.contains("select2-dropdown--below"),r=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var i={height:this.$container.outerHeight(!1)};i.top=a.top,i.bottom=a.top+i.height;var o=this.$dropdown.outerHeight(!1),s=e.scrollTop(),l=e.scrollTop()+e.height(),c=s<a.top-o,e=l>a.bottom+o,s={left:a.left,top:i.bottom},l=this.$dropdownParent;"static"===l.css("position")&&(l=l.offsetParent());a={top:0,left:0};(u.contains(document.body,l[0])||l[0].isConnected)&&(a=l.offset()),s.top-=a.top,s.left-=a.left,t||n||(r="below"),e||!c||t?!c&&e&&t&&(r="below"):r="above",("above"==r||t&&"below"!==r)&&(s.top=i.top-a.top-o),null!=r&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+r),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+r)),this.$dropdownContainer.css(s)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),u.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,r)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,r=0;r<t.length;r++){var a=t[r];a.children?n+=e(a.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),u.define("select2/dropdown/selectOnClose",["../utils"],function(r){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(e){r._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}n=this.getHighlightedResults();n.length<1||(null!=(n=r.GetData(n[0],"data")).element&&n.element.selected||null==n.element&&n.selected||this.trigger("select",{data:n}))},e}),u.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),u.define("select2/dropdown/dropdownCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var t=e.call(this),e=this.options.get("dropdownCssClass")||"";return-1!==e.indexOf(":all:")&&(e=e.replace(":all:",""),n.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(e),t},e}),u.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(r){function e(){}return e.prototype.highlightFirstItem=function(e){var t=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(0<t.length){var n=t.first(),t=r.GetData(n[0],"data").element;if(t&&t.getAttribute&&"true"===t.getAttribute("data-select2-tag"))return void n.trigger("mouseenter")}e.call(this)},e}),u.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,e="Please delete "+t+" character";return 1!=t&&(e+="s"),e},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),u.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(l,i,o,s,c,u,d,f,p,h,m,t,g,y,v,x,b,_,w,T,M,k,A,S,E,L,C,D,O,P,e){function n(){this.reset()}return n.prototype.apply=function(e){var t;null==(e=l.extend(!0,{},this.defaults,e)).dataAdapter&&(null!=e.ajax?e.dataAdapter=v:null!=e.data?e.dataAdapter=y:e.dataAdapter=g,0<e.minimumInputLength&&(e.dataAdapter=h.Decorate(e.dataAdapter,_)),0<e.maximumInputLength&&(e.dataAdapter=h.Decorate(e.dataAdapter,w)),0<e.maximumSelectionLength&&(e.dataAdapter=h.Decorate(e.dataAdapter,T)),e.tags&&(e.dataAdapter=h.Decorate(e.dataAdapter,x)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=h.Decorate(e.dataAdapter,b))),null==e.resultsAdapter&&(e.resultsAdapter=i,null!=e.ajax&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,S)),null!=e.placeholder&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,A)),e.selectOnClose&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,C)),e.tags&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,P))),null==e.dropdownAdapter&&(e.multiple?e.dropdownAdapter=M:(t=h.Decorate(M,k),e.dropdownAdapter=t),0!==e.minimumResultsForSearch&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,L)),e.closeOnSelect&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,D)),null!=e.dropdownCssClass&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,O)),e.dropdownAdapter=h.Decorate(e.dropdownAdapter,E)),null==e.selectionAdapter&&(e.multiple?e.selectionAdapter=s:e.selectionAdapter=o,null!=e.placeholder&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,c)),e.allowClear&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,u)),e.multiple&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,d)),null!=e.selectionCssClass&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,f)),e.selectionAdapter=h.Decorate(e.selectionAdapter,p)),e.language=this._resolveLanguage(e.language),e.language.push("en");for(var n=[],r=0;r<e.language.length;r++){var a=e.language[r];-1===n.indexOf(a)&&n.push(a)}return e.language=n,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function s(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:{},matcher:function e(t,n){if(null==t.term||""===t.term.trim())return n;if(n.children&&0<n.children.length){for(var r=l.extend(!0,{},n),a=n.children.length-1;0<=a;a--)null==e(t,n.children[a])&&r.children.splice(a,1);return 0<r.children.length?r:e(t,r)}var i=s(n.text).toUpperCase(),o=s(t.term).toUpperCase();return-1<i.indexOf(o)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,r=this.defaults.language,a=t.prop("lang"),t=t.closest("[lang]").prop("lang"),t=Array.prototype.concat.call(this._resolveLanguage(a),this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(t));return e.language=t,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(l.isEmptyObject(e))return[];if(l.isPlainObject(e))return[e];for(var t,n=Array.isArray(e)?e:[e],r=[],a=0;a<n.length;a++)r.push(n[a]),"string"==typeof n[a]&&0<n[a].indexOf("-")&&(t=n[a].split("-")[0],r.push(t));return r},n.prototype._processTranslations=function(e,t){for(var n=new m,r=0;r<e.length;r++){var a=new m,i=e[r];if("string"==typeof i)try{a=m.loadPath(i)}catch(e){try{i=this.defaults.amdLanguageBase+i,a=m.loadPath(i)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+i+'" could not be automatically loaded. A fallback will be used instead.')}}else a=l.isPlainObject(i)?new m(i):i;n.extend(a)}return n},n.prototype.set=function(e,t){var n={};n[l.camelCase(e)]=t;n=h._convertData(n);l.extend(!0,this.defaults,n)},new n}),u.define("select2/options",["jquery","./defaults","./utils"],function(c,n,u){function e(e,t){this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=n.applyFromElement(this.options,t)),this.options=n.apply(this.options)}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.autocomplete&&e.prop("autocomplete")&&(this.options.autocomplete=e.prop("autocomplete")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),u.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),u.StoreData(e[0],"data",u.GetData(e[0],"select2Tags")),u.StoreData(e[0],"tags",!0)),u.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",u.GetData(e[0],"ajaxUrl")),u.StoreData(e[0],"ajax-Url",u.GetData(e[0],"ajaxUrl")));var n={};function r(e,t){return t.toUpperCase()}for(var a=0;a<e[0].attributes.length;a++){var i,o=e[0].attributes[a].name;"data-"==o.substr(0,"data-".length)&&(i=o.substring("data-".length),o=u.GetData(e[0],i),n[i.replace(/-([a-z])/g,r)]=o)}c.fn.jquery&&"1."==c.fn.jquery.substr(0,2)&&e[0].dataset&&(n=c.extend(!0,{},e[0].dataset,n));var s,l=c.extend(!0,{},u.GetData(e[0]),n);for(s in l=u._convertData(l))-1<t.indexOf(s)||(c.isPlainObject(this.options[s])?c.extend(this.options[s],l[s]):this.options[s]=l[s]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),u.define("select2/core",["jquery","./options","./utils","./keys"],function(t,a,i,r){var o=function(e,t){null!=i.GetData(e[0],"select2")&&i.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new a(t=t||{},e),o.__super__.constructor.call(this);var n=e.attr("tabindex")||0;i.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1");t=this.options.get("dataAdapter");this.dataAdapter=new t(e,this.options);n=this.render();this._placeContainer(n);t=this.options.get("selectionAdapter");this.selection=new t(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,n);t=this.options.get("dropdownAdapter");this.dropdown=new t(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,n);n=this.options.get("resultsAdapter");this.results=new n(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var r=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})}),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(e[0],"select2",this),e.data("select2",this)};return i.Extend(o,i.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var r=this._resolveWidth(e,"style");return null!=r?r:this._resolveWidth(e,"element")}if("element"==t){r=e.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;e=e.attr("style");if("string"!=typeof e)return null;for(var a=e.split(";"),i=0,o=a.length;i<o;i+=1){var s=a[i].replace(/\s/g,"").match(n);if(null!==s&&1<=s.length)return s[1]}return null},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(e){t._syncA(),t._syncS(e)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerSelectionEvents=function(){var n=this,r=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===r.indexOf(e)&&n.trigger(e,t)})},o.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container[0].classList.add("select2-container--open")}),this.on("close",function(){n.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){n.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){n.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){n.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===r.ESC||t===r.UP&&e.altKey?(n.close(e),e.preventDefault()):t===r.ENTER||t===r.TAB?(n.trigger("results:select",{}),e.preventDefault()):t===r.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===r.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===r.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===r.ENTER||t===r.SPACE||t===r.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&0<e.addedNodes.length){for(var n=0;n<e.addedNodes.length;n++)if(e.addedNodes[n].selected)return!0}else{if(e.removedNodes&&0<e.removedNodes.length)return!0;if(Array.isArray(e))return e.some(function(e){return t._isChangeMutation(e)})}return!1},o.prototype._syncSubtree=function(e){var e=this._isChangeMutation(e),t=this;e&&this.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in r){var a={prevented:!1,name:e,args:t};if(n.call(this,r[e],a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');e=!(e=null==e||0===e.length?[!0]:e)[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();e=e[0];Array.isArray(e)&&(e=e.map(function(e){return e.toString()})),this.$element.val(e).trigger("input").trigger("change")},o.prototype.destroy=function(){i.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),i.StoreData(e[0],"element",this.$element),e},o}),u.define("jquery-mousewheel",["jquery"],function(e){return e}),u.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(a,e,i,t,o){var s;return null==a.fn.select2&&(s=["open","close","destroy"],a.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=a.extend(!0,{},t);new i(a(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,r)}),-1<s.indexOf(t)?this:n}),null==a.fn.select2.defaults&&(a.fn.select2.defaults=t),i}),{define:u.define,require:u.require});function b(e,t){return a.call(e,t)}function l(e,t){var n,r,a,i,o,s,l,c,u,d,f=t&&t.split("/"),p=y.map,h=p&&p["*"]||{};if(e){for(t=(e=e.split("/")).length-1,y.nodeIdCompat&&x.test(e[t])&&(e[t]=e[t].replace(x,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),c=0;c<e.length;c++)"."===(d=e[c])?(e.splice(c,1),--c):".."===d&&(0===c||1===c&&".."===e[2]||".."===e[c-1]||0<c&&(e.splice(c-1,2),c-=2));e=e.join("/")}if((f||h)&&p){for(c=(n=e.split("/")).length;0<c;--c){if(r=n.slice(0,c).join("/"),f)for(u=f.length;0<u;--u)if(a=(a=p[f.slice(0,u).join("/")])&&a[r]){i=a,o=c;break}if(i)break;!s&&h&&h[r]&&(s=h[r],l=c)}!i&&s&&(i=s,o=l),i&&(n.splice(0,o,i),e=n.join("/"))}return e}function _(t,n){return function(){var e=s.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),o.apply(f,e.concat([t,n]))}}function w(e){var t;if(b(g,e)&&(t=g[e],delete g[e],v[e]=!0,i.apply(f,t)),!b(m,e)&&!b(v,e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function T(e){return e?c(e):[]}var u=r.require("jquery.select2");return t.fn.select2.amd=r,u});