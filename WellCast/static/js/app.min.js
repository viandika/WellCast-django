!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):e._hyperscript=t()}("undefined"!=typeof self?self:this,function(){"use strict";function E(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function c(e,t){var n=e[t];if(n)return n;n={};return e[t]=n}function t(t){try{return JSON.parse(t)}catch(e){return t=e,console.error?console.error(t):console.log&&console.log("ERROR: ",t),null}}function o(e,t){return new(e.bind.apply(e,[e].concat(t)))}var y,u="undefined"!=typeof self?self:"undefined"!=typeof global?global:this,a=(y={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS"},{tokenize:function(e,t){var n,r=[],i=e,a=0,o=0,s=1,l="<START>",c=0;function u(){return t&&0===c}for(;a<i.length;)if("-"===p()&&"-"===m())!function(){for(;p()&&!x(p());)g();g()}();else if(b(p()))r.push(function(){var e=d("WHITESPACE"),t="";for(;p()&&b(p());)x(p())&&(o=0,s++),t+=g();return e.value=t,e.end=a,e}());else if(_()||"."!==p()||!T(m())&&"{"!==m())if(_()||"#"!==p()||!T(m())&&"{"!==m())if("["===p()&&"@"===m())r.push(function(){var e=d("ATTRIBUTE_REF"),t=g();for(;a<i.length&&"]"!==p();)t+=g();"]"===p()&&(t+=g());return e.value=t,e.end=a,e}());else if("@"===p())r.push(function(){var e=d("ATTRIBUTE_REF"),t=g();for(;v(p());)t+=g();return e.value=t,e.end=a,e}());else if(T(p())||!u()&&A(p()))r.push(function(){var e=d("IDENTIFIER"),t=g();for(;T(p())||A(p());)t+=g();return e.value=t,e.end=a,e}());else if(w(p()))r.push(function(){var e=d("NUMBER"),t=g();for(;w(p());)t+=g();"."===p()&&w(m())&&(t+=g());for(;w(p());)t+=g();return e.value=t,e.end=a,e}());else if(u()||'"'!==p()&&"`"!==p())if(u()||"'"!==p()){if(y[p()])"$"===l&&"{"===p()&&c++,"}"===p()&&c--,r.push(h());else if(u()||("`"===(n=p())||"^"===n))r.push(d("RESERVED",g()));else if(a<i.length)throw Error("Unknown token: "+p()+" ")}else!function(e){if(0<e.length){e=e[e.length-1];if("IDENTIFIER"===e.type||"CLASS_REF"===e.type||"ID_REF"===e.type)return;if(e.op&&(">"===e.value||")"===e.value))return}return 1}(r)?r.push(h()):r.push(f());else r.push(f());else r.push(function(){var e=d("ID_REF"),t=g();if("{"===p()){for(e.template=!0,t+=g();p()&&"}"!==p();)t+=g();if("}"!==p())throw Error("Unterminated id reference");g()}else for(;v(p());)t+=g();return e.value=t,e.end=a,e}());else r.push(function(){var e=d("CLASS_REF"),t=g();if("{"===p()){for(e.template=!0,t+=g();p()&&"}"!==p();)t+=g();if("}"!==p())throw Error("Unterminated class reference");t+=g()}else for(;function(e){return T(e)||w(e)||"-"===e||"_"===e||":"===e}(p());)t+=g();return e.value=t,e.end=a,e}());return k(r,[],i);function d(e,t){return{type:e,value:t,start:a,end:a+1,column:o,line:s}}function h(){for(var e,t,t=((t=d(e,t)).op=!0,t),n=g();p()&&y[n+p()];)n+=g();return t.type=y[n],t.value=n,t.end=a,t}function f(){for(var e=d("STRING"),t=g(),n="";p()&&p()!==t;)"\\"===p()&&g(),n+=g();if(p()!==t)throw Error("Unterminated string at "+("[Line: "+e.line+", Column: "+e.col+"]"));return g(),e.value=n,e.end=a,e.template="`"===t,e}function p(){return i.charAt(a)}function m(){return i.charAt(a+1)}function g(){return l=p(),a++,o++,l}function _(){return T(l)||w(l)||")"===l||"}"===l||"]"===l}},makeTokensObject:k});function v(e){return T(e)||w(e)||"-"===e||"_"===e||":"===e}function b(e){return" "===e||"\t"===e||x(e)}function x(e){return"\r"===e||"\n"===e}function w(e){return"0"<=e&&e<="9"}function T(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"}function A(e){return"_"===e||"$"===e}function k(a,o,e){s();var t=null;function s(){for(;"WHITESPACE"===h(0,!0).type;)o.push(a.shift())}function i(e,t){M.raiseParseError(e,t)}function l(e){if(f()&&f().op&&f().value===e)return d()}function c(e,t,n,r){if(f()&&f().type&&0<=[e,t,n,r].indexOf(f().type))return d()}function u(e,t){if(-1===r.indexOf(e)){t=t||"IDENTIFIER";return f()&&f().value===e&&f().type===t?d():void 0}}function d(){var e=a.shift();return o.push(e),t=e,s(),e}function n(e,t){for(var n=[],r=h(0,!0);!(null!=t&&r.type===t||null!=e&&r.value===e||"EOF"===r.type);){var i=a.shift();o.push(i),n.push(r),r=h(0,!0)}return s(),n}function h(e,t){var n,r=0;do{if(!t)for(;a[r]&&"WHITESPACE"===a[r].type;)r++}while(n=a[r],r++,-1<--e);return n||{type:"EOF",value:"<<<EOF>>>"}}function f(){return h(0)}var r=[];return{pushFollow:function(e){r.push(e)},popFollow:function(){r.pop()},clearFollow:function(){var e=r;return r=[],e},restoreFollow:function(e){r=e},matchAnyToken:function(e,t,n){for(var r=0;r<arguments.length;r++){var i=u(arguments[r]);if(i)return i}},matchAnyOpToken:function(e,t,n){for(var r=0;r<arguments.length;r++){var i=l(arguments[r]);if(i)return i}},matchOpToken:l,requireOpToken:function(e){var t=l(e);if(t)return t;i(this,"Expected '"+e+"' but found '"+f().value+"'")},matchTokenType:c,requireTokenType:function(e,t,n,r){if(r=c(e,t,n,r))return r;i(this,"Expected one of "+JSON.stringify([e,t,n]))},consumeToken:d,matchToken:u,requireToken:function(e,t){if(t=u(e,t))return t;i(this,"Expected '"+e+"' but found '"+f().value+"'")},list:a,consumed:o,source:e,hasMore:function(){return 0<a.length},currentToken:f,lastMatch:function(){return t},token:h,consumeUntil:n,consumeUntilWhitespace:function(){return n(null,"WHITESPACE")},lastWhitespace:function(){return o[o.length-1]&&"WHITESPACE"===o[o.length-1].type?o[o.length-1].value:""},sourceFor:function(){return e.substring(this.startToken.start,this.endToken.end)},lineFor:function(){return e.split("\n")[this.startToken.line-1]}}}var s,l,d,i,h,M=(s={},l={},d={},i=[],h=[],n("feature",function(e,t,n){if(n.matchOpToken("(")){var r=e.requireElement("feature",n);return n.requireOpToken(")"),r}r=d[n.currentToken().value];if(r)return r(e,t,n)}),n("command",function(e,t,n){if(n.matchOpToken("(")){var r=e.requireElement("command",n);return n.requireOpToken(")"),r}var i=l[n.currentToken().value];return i?r=i(e,t,n):"IDENTIFIER"===n.currentToken().type&&"("===n.token(1).value&&(r=e.requireElement("pseudoCommand",n)),r&&e.parseElement("indirectStatement",n,r)}),n("commandList",function(e,t,n){var r=e.parseElement("command",n);if(r)return n.matchToken("then"),r.next=e.parseElement("commandList",n),r}),n("leaf",function(e,t,n){var r=m(i,n);return null==r?p("symbol",n):r}),n("indirectExpression",function(e,t,n,r){for(var i=0;i<h.length;i++){var a=h[i];r.endToken=n.lastMatch();a=e.parseElement(a,n,r);if(a)return a}return r}),n("indirectStatement",function(e,t,n,r){if(n.matchToken("unless")){r.endToken=n.lastMatch();n={type:"unlessStatementModifier",args:[e.requireElement("expression",n)],op:function(e,t){return t?this.next:r},execute:function(e){return t.unifiedExec(this,e)}};return r.parent=n}return r}),n("primaryExpression",function(e,t,n){var r=e.parseElement("leaf",n);if(r)return e.parseElement("indirectExpression",n,r);e.raiseParseError(n,"Unexpected value: "+n.currentToken().value)}),{setParent:function e(t,n){t&&(t.parent=n,e(t.next,n))},requireElement:r,parseElement:p,featureStart:S,commandStart:_,commandBoundary:function(e){if("end"==e.value||"then"==e.value||"else"==e.value||")"==e.value||_(e)||S(e)||"EOF"==e.type)return!0},parseAnyOf:m,parseHyperScript:function(e){var t=p("hyperscript",e);return e.hasMore()&&g(e),t},raiseParseError:g,addGrammarElement:n,addCommand:function(e,i){function t(e,t,n){var r=i(e,t,n);if(r)return r.type=a,r.execute=function(e){return e.meta.command=r,t.unifiedExec(this,e)},r}var a=e+"Command";s[a]=t,l[e]=t},addFeature:function(r,i){function e(e,t,n){if(n=i(e,t,n))return n.keyword=r,n.type=a,n}var a=r+"Feature";s[a]=e,d[r]=e},addLeafExpression:function(e,t){i.push(e),n(e,t)},addIndirectExpression:function(e,t){h.push(e),n(e,t)},parseStringTemplate:function(e){var t,n=[""];do{}while(n.push(e.lastWhitespace()),"$"===e.currentToken().value?(e.consumeToken(),t=e.matchOpToken("{"),n.push(r("expression",e)),t&&e.requireOpToken("}"),n.push("")):"\\"===e.currentToken().value?(e.consumeToken(),e.consumeToken()):(t=e.consumeToken(),n[n.length-1]+=t?t.value:""),e.hasMore());return n.push(e.lastWhitespace()),n}});function f(e,t,n){e.startToken=t,e.sourceFor=n.sourceFor,e.lineFor=n.lineFor,e.programSource=n.source}function p(e,t,n){e=s[e];if(e){var r=t.currentToken(),e=e(M,O,t,n);if(e){f(e,r,t),e.endToken=e.endToken||t.lastMatch();for(n=e.root;null!=n;)f(n,r,t),n=n.root}return e}}function r(e,t,n,r){return p(e,t,r)||g(t,n||"Expected "+e)}function m(e,t){for(var n=0;n<e.length;n++){var r=p(e[n],t);if(r)return r}}function n(e,t){s[e]=t}function g(e,t){var n,r;t=(t||"Unexpected Token : "+e.currentToken().value)+"\n\n"+(r=(n=e).currentToken(),n=(n=n.source.split("\n"))[r&&r.line?r.line-1:n.length-1],r=r&&r.line?r.column:n.length-1,n+"\n"+" ".repeat(r)+"^^\n\n");t=new Error(t);throw t.tokens=e,t}function _(e){return l[e.value]}function S(e){return d[e.value]}var C,L,e,D={dynamicResolvers:[],String:function(e){return e.toString?e.toString():""+e},Int:function(e){return parseInt(e)},Float:function(e){return parseFloat(e)},Number:function(e){return console.log(e),Number(e)},Date:function(e){return Date(e)},Array:function(e){return Array.from(e)},JSON:function(e){return JSON.stringify(e)},Object:function(e){return"string"==typeof(e=e instanceof String?e.toString():e)?JSON.parse(e):E({},e)}},O=(C={array_sentinel:!0},L={halt_flag:!0},e=null,{typeCheck:function(e,t,n){return!(null!=e||!n)||Object.prototype.toString.call(e).slice(8,-1)===t},forEach:N,triggerEvent:R,matchesSelector:P,getScript:H,processNode:function(e){var t=O.getScriptSelector();P(e,t)&&q(e,e),"text/hyperscript"===e.type&&q(e,document.body),e.querySelectorAll&&N(e.querySelectorAll(t+", [type='text/hyperscript']"),function(e){q(e,"text/hyperscript"===e.type?document.body:e)})},evaluate:function(e,t){return t=E(U(document.body,null,document.body,null),t||{}),(e=V(e)).execute?e.execute(t):e.apply?void e.apply(document.body,null):e.evaluate(t)},parse:V,getScriptSelector:function(){return B().map(function(e){return"["+e+"]"}).join(", ")},resolveSymbol:function(e,t,n){if("me"===e||"my"===e||"I"===e)return t.me;if("it"===e||"its"===e)return t.result;if("you"===e||"your"===e||"yourself"===e)return t.beingTold;if("global"===n)return u[e];if("element"===n)return G(t)[e];if("local"===n)return t[e];if(t.meta&&t.meta.context){var r=t.meta.context[e];if(void 0!==r)return r}return void 0!==(r=t[e])||void 0!==(r=G(t)[e])?r:u[e]},setSymbol:function(e,t,n,r){var i;"global"===n?u[e]=r:"element"===n?(i=G(t))[e]=r:"local"===n||void 0!==t[e]?t[e]=r:void 0!==(i=G(t))[e]?i[e]=r:void 0!==u[e]?u[e]=r:t[e]=r},makeContext:U,findNext:function e(t,n){if(t)return t.resolveNext?t.resolveNext(n):t.next||e(t.parent,n)},unifiedEval:j,convertValue:function(e,t){for(var n=D.dynamicResolvers,r=0;r<n.length;r++){var i=(0,n[r])(t,e);if(void 0!==i)return i}if(null==e)return null;var a=D[t];if(a)return a(e);throw"Unknown conversion : "+t},unifiedExec:F,resolveProperty:function(e,t,n){if(null!=e){var r=n&&e.getAttribute?e.getAttribute(t):e[t];if(void 0!==r)return r;if(I(e)){for(var i=[],a=0;a<e.length;a++){var o=e[a],o=n?o.getAttribute(t):o[t];o&&i.push(o)}return i}}},assignToNamespace:function(e,t,n,r){var i;for("undefined"==typeof document||e===document.body?i=u:null==(i=e.hyperscriptFeatures)&&(e.hyperscriptFeatures=i={});0<t.length;){var a=t.shift(),o=i[a];null==o&&(i[a]=o={}),i=o}i[n]=r},registerHyperTrace:function(e,t){for(var n,i=[],r=null;null!=e;)i.push(e),e=(r=e).meta.caller;null==r.meta.traceMap&&(r.meta.traceMap=new Map),r.meta.traceMap.get(t)||(n={trace:i,print:function(e){(e=e||console.error)("hypertrace /// ");for(var t=0,n=0;n<i.length;n++)t=Math.max(t,i[n].meta.feature.displayName.length);for(n=0;n<i.length;n++){var r=i[n];e("  ->",r.meta.feature.displayName.padEnd(t+2),"-",r.meta.owner)}}},r.meta.traceMap.set(t,n))},getHyperTrace:function(e,t){for(var n=e;n.meta.caller;)n=n.meta.caller;if(n.meta.traceMap)return n.meta.traceMap.get(t,[])},getInternalData:Y,escapeSelector:function(e){return e.replace(/:/g,function(e){return"\\"+e})},nullCheck:function(e,t){if(null==e)throw new Error(t.sourceFor()+" is null")},isEmpty:function(e){return null==e||0===e.length},getRootNode:function(e){var t=e.getRootNode();return t=!(e instanceof Document||e instanceof ShadowRoot)?document:t},hyperscriptUrl:"document"in u?document.currentScript.src:null,HALT:L});function P(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function R(e,t,n){(n=n||{}).sentBy=e;var r,r=(t=t,n=n,window.CustomEvent&&"function"==typeof window.CustomEvent?r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),r);return e.dispatchEvent(r)}function I(e){return Array.isArray(e)||e instanceof NodeList}function N(e,t){if(null!=e)if(I(e))for(var n=0;n<e.length;n++)t(e[n]);else t(e)}function z(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.asyncWrapper&&(e[t]=n.value),Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];i.asyncWrapper&&(n[r]=i.value)}}}function F(t,n){for(;;){try{var r=j(t,n)}catch(e){if(O.registerHyperTrace(n,e),n.meta.errorHandler&&!n.meta.handlingError){n.meta.handlingError=!0,n[n.meta.errorSymmbol]=e,t=n.meta.errorHandler;continue}if(!n.meta.reject)throw e;n.meta.reject(e),r=L}if(null==r)return void console.error(t," did not return a next element to execute! context: ",n);if(r.then)return void r.then(function(e){F(e,n)}).catch(function(e){if(O.registerHyperTrace(n,e),n.meta.errorHandler&&!n.meta.handlingError)n.meta.handlingError=!0,n[n.meta.errorSymmbol]=e,F(n.meta.errorHandler,n);else{if(!n.meta.reject)throw e;n.meta.reject(e)}});if(r===L)return;t=r}}function j(i,t){var a=[t],e=!1,o=!1;if(i.args)for(var n=0;n<i.args.length;n++){var r=i.args[n];if(null==r)a.push(null);else if(Array.isArray(r)){for(var s=[],l=0;l<r.length;l++){var c,u=r[l];(c=u?u.evaluate(t):null)&&(c.then?e=!0:c.asyncWrapper&&(o=!0)),s.push(c)}a.push(s)}else r.evaluate?((c=r.evaluate(t))&&(c.then?e=!0:c.asyncWrapper&&(o=!0)),a.push(c)):a.push(r)}return e?new Promise(function(n,r){var e=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r)){t.push(C);for(var i=0;i<r.length;i++)t.push(r[i]);t.push(C)}else t.push(r)}return t}(a);Promise.all(e).then(function(e){e=function(e){for(var t=[],n=0;n<e.length;n++)if((r=e[n])===C){var r=e[++n],i=[];for(t.push(i);r!==C;)i.push(r),r=e[++n]}else t.push(r);return t}(e),o&&z(e);try{var t=i.op.apply(i,e);n(t)}catch(e){r(e)}}).catch(function(e){t.meta.errorHandler&&!t.meta.handlingError?(t.meta.handlingError=!0,t[t.meta.errorSymmbol]=e,F(t.meta.errorHandler,t)):t.meta.reject&&t.meta.reject(e)})}):(o&&z(a),i.op.apply(i,a))}function B(){return e=null==e?_hyperscript.config.attributes.replace(/ /g,"").split(","):e}function H(e){for(var t=0;t<B().length;t++){var n=B()[t];if(e.hasAttribute&&e.hasAttribute(n))return e.getAttribute(n)}return"text/hyperscript"===e.type?e.innerText:null}function U(e,t,n,r){r={meta:{parser:M,lexer:a,runtime:O,owner:e,feature:t,iterators:{}},me:n,event:r,target:r?r.target:null,detail:r?r.detail:null,body:"document"in u?document.body:null};return function e(t,n){t&&(t.hyperscriptFeatures&&E(n,t.hyperscriptFeatures),e(t.parentElement,n))}(e,r.meta.ctx=r),r}function V(e){var t=a.tokenize(e);if(M.commandStart(t.currentToken())){for(var e=M.parseElement("commandList",t),n=e;n.next;)n=n.next;return n.next={op:function(){return L}},e}return M.featureStart(t.currentToken())?M.parseElement("hyperscript",t):M.parseElement("expression",t)}function q(t,e){if(!t.closest||!t.closest(_hyperscript.config.disableSelector)){var n=Y(t);if(!n.initialized){var r=H(t);if(r)try{n.initialized=!0,n.script=r;var i=a.tokenize(r);M.parseHyperScript(i).apply(e||t,t),setTimeout(function(){R(e||t,"load",{hyperscript:!0})},1)}catch(e){O.triggerEvent(t,"exception",{error:e}),console.error("hyperscript errors were found on the following element:",t,"\n\n",e.message,e.stack)}}}}function Y(e){var t="hyperscript-internal-data";return e[t]||(e[t]={})}function G(e){var t=e.meta.owner;if(t){var n="elementScope";return c(Y(t),n=e.meta.feature&&e.meta.feature.behavior?e.meta.feature.behavior+"Scope":n)}return{}}M.addLeafExpression("parenthesized",function(e,t,n){if(n.matchOpToken("(")){var r=n.clearFollow();try{var i=e.requireElement("expression",n)}finally{n.restoreFollow(r)}return n.requireOpToken(")"),i}}),M.addLeafExpression("string",function(e,t,n){n=n.matchTokenType("STRING");if(n){var r,i=n.value;return{type:"string",token:n,args:r=n.template?(n=a.tokenize(i,!0),e.parseStringTemplate(n)):[],op:function(e){for(var t="",n=1;n<arguments.length;n++){var r=arguments[n];void 0!==r&&(t+=r)}return t},evaluate:function(e){return 0===r.length?i:t.unifiedEval(this,e)}}}}),M.addGrammarElement("nakedString",function(e,t,n){if(n.hasMore()){var r=n.consumeUntilWhitespace();return n.matchTokenType("WHITESPACE"),{type:"nakedString",tokens:r,evaluate:function(e){return r.map(function(e){return e.value}).join("")}}}}),M.addLeafExpression("number",function(e,t,n){var r=n.matchTokenType("NUMBER");if(r){var n=r,i=parseFloat(r.value);return{type:"number",value:i,numberToken:n,evaluate:function(){return i}}}}),M.addLeafExpression("idRef",function(e,n,t){var r=t.matchTokenType("ID_REF");if(r){if(r.template){t=r.value.substr(2,r.value.length-2),t=a.tokenize(t);return{type:"idRefTemplate",args:[e.requireElement("expression",t)],op:function(e,t){return n.getRootNode(e.me).getElementById(t)},evaluate:function(e){return n.unifiedEval(this,e)}}}return{type:"idRef",css:r.value,value:r.value.substr(1),evaluate:function(e){return n.getRootNode(e.me).getElementById(this.value)}}}}),M.addLeafExpression("classRef",function(e,n,t){var r=t.matchTokenType("CLASS_REF");if(r){if(r.template){t=r.value.substr(2,r.value.length-2),t=a.tokenize(t);return{type:"classRefTemplate",args:[e.requireElement("expression",t)],op:function(e,t){return n.getRootNode(e.me).querySelectorAll(n.escapeSelector("."+t))},evaluate:function(e){return n.unifiedEval(this,e)}}}return{type:"classRef",css:r.value,className:function(){return this.css.substr(1)},evaluate:function(e){return n.getRootNode(e.me).querySelectorAll(n.escapeSelector(this.css))}}}}),M.addLeafExpression("queryRef",function(e,o,t){if(t.matchOpToken("<")){var n=t.consumeUntil("/");t.requireOpToken("/"),t.requireOpToken(">");var s,r,l=n.map(function(e){return"STRING"===e.type?'"'+e.value+'"':e.value}).join("");return 0<=l.indexOf("$")&&(r=a.tokenize(l,s=!0),r=e.parseStringTemplate(r)),{type:"queryRef",css:l,args:r,op:function(e,t){var n=l,r=[];if(s)for(var n="",i=1;i<arguments.length;i++){var a=arguments[i];a&&(a instanceof Element?(a.dataset.hsQueryId=r.length,n+="[data-hs-query-id='"+r.length+"']",r.push(a)):n+=a)}e=o.getRootNode(e.me).querySelectorAll(n);return o.forEach(r,function(e){e.removeAttribute("data-hs-query-id")}),e},evaluate:function(e){return o.unifiedEval(this,e)}}}}),M.addLeafExpression("attributeRef",function(e,t,n){var r=n.matchTokenType("ATTRIBUTE_REF");if(r){var n=r.value,n="["+(r=0===n.indexOf("[")?n.substring(2,n.length-1):n.substring(1))+"]",r=r.split("="),i=r[0],r=r[1];return r&&0===r.indexOf('"')&&(r=r.substring(1,r.length-1)),{type:"attributeRef",name:i,css:n,value:r,op:function(e){e=e.beingTold||e.me;if(e)return e.getAttribute(i)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addGrammarElement("objectKey",function(e,t,n){var r;if(r=n.matchTokenType("STRING"))return{type:"objectKey",key:r.value,evaluate:function(){return this.key}};if(n.matchOpToken("[")){e=e.parseElement("expression",n);return n.requireOpToken("]"),{type:"objectKey",expr:e,args:[e],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}for(var i="";(r=n.matchTokenType("IDENTIFIER")||n.matchOpToken("-"))&&(i+=r.value),r;);return{type:"objectKey",key:i,evaluate:function(){return this.key}}}),M.addLeafExpression("objectLiteral",function(e,t,n){if(n.matchOpToken("{")){var r=[],i=[];if(!n.matchOpToken("}")){do{var a=e.requireElement("objectKey",n);n.requireOpToken(":");var o=e.requireElement("expression",n)}while(i.push(o),r.push(a),n.matchOpToken(","));n.requireOpToken("}")}return{type:"objectLiteral",args:[r,i],op:function(e,t,n){for(var r={},i=0;i<t.length;i++)r[t[i]]=n[i];return r},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addGrammarElement("namedArgumentList",function(e,t,n){if(n.matchOpToken("(")){var i=[],r=[];if(!n.matchOpToken(")")){do{var a=n.requireTokenType("IDENTIFIER");n.requireOpToken(":");var o=e.requireElement("expression",n)}while(r.push(o),i.push({name:a,value:o}),n.matchOpToken(","));n.requireOpToken(")")}return{type:"namedArgumentList",fields:i,args:[r],op:function(e,t){for(var n={_namedArgList_:!0},r=0;r<t.length;r++)n[i[r].name.value]=t[r];return n},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addGrammarElement("symbol",function(e,t,n){var r="default";n.matchToken("global")?r="global":n.matchToken("element")?(r="element",n.matchOpToken("'")&&n.requireToken("s")):n.matchToken("local")&&(r="local");var i=n.matchTokenType("IDENTIFIER");if(i)return{type:"symbol",symbolType:r,token:i,name:i.value,evaluate:function(e){return t.resolveSymbol(i.value,e,r)}}}),M.addGrammarElement("implicitMeTarget",function(e,t,n){return{type:"implicitMeTarget",evaluate:function(e){return e.beingTold||e.me}}}),M.addLeafExpression("boolean",function(e,t,n){var r=n.matchToken("true")||n.matchToken("false");if(r)return{type:"boolean",evaluate:function(e){return"true"===r.value}}}),M.addLeafExpression("null",function(e,t,n){if(n.matchToken("null"))return{type:"null",evaluate:function(e){return null}}}),M.addLeafExpression("arrayLiteral",function(e,t,n){if(n.matchOpToken("[")){var r=[];if(!n.matchOpToken("]")){do{var i=e.requireElement("expression",n)}while(r.push(i),n.matchOpToken(","));n.requireOpToken("]")}return{type:"arrayLiteral",values:r,args:[r],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addLeafExpression("blockLiteral",function(e,t,n){if(n.matchOpToken("\\")){var r=[],i=n.matchTokenType("IDENTIFIER");if(i)for(r.push(i);n.matchOpToken(",");)r.push(n.requireTokenType("IDENTIFIER"));n.requireOpToken("-"),n.requireOpToken(">");var a=e.requireElement("expression",n);return{type:"blockLiteral",args:r,expr:a,evaluate:function(t){return function(){for(var e=0;e<r.length;e++)t[r[e].value]=arguments[e];return a.evaluate(t)}}}}}),M.addGrammarElement("timeExpression",function(e,t,n){var r=e.requireElement("expression",n),e=1;return n.matchToken("s")||n.matchToken("seconds")?e=1e3:n.matchToken("ms")||n.matchToken("milliseconds"),{type:"timeExpression",time:r,factor:e,args:[r],op:function(e,t){return t*this.factor},evaluate:function(e){return t.unifiedEval(this,e)}}}),M.addIndirectExpression("propertyAccess",function(e,n,t,r){if(t.matchOpToken(".")){var i=t.requireTokenType("IDENTIFIER");return e.parseElement("indirectExpression",t,{type:"propertyAccess",root:r,prop:i,args:[r],op:function(e,t){return n.resolveProperty(t,i.value)},evaluate:function(e){return n.unifiedEval(this,e)}})}}),M.addIndirectExpression("of",function(e,n,t,r){if(t.matchToken("of")){for(var i=e.requireElement("expression",t),a=null,o=r;o.root;)o=(a=o).root;"symbol"!==o.type&&"attributeRef"!==o.type&&e.raiseParseError(t,"Cannot take a property of a non-symbol: "+o.type);var s="attributeRef"===o.type,l=o.name,i={type:"ofExpression",prop:o.token,root:i,attribute:s,expression:r,args:[i],op:function(e,t){return n.resolveProperty(t,l,s)},evaluate:function(e){return n.unifiedEval(this,e)}};return"attributeRef"===o.type&&(i.attribute=o),a?(a.root=i,a.args=[i]):r=i,e.parseElement("indirectExpression",t,r)}}),M.addIndirectExpression("possessive",function(e,n,t,r){if(!e.possessivesDisabled){var i=t.matchOpToken("'");if(i||"symbol"===r.type&&("my"===r.name||"its"===r.name||"your"===r.name)&&"IDENTIFIER"===t.currentToken().type){i&&t.requireToken("s");var a,o=e.parseElement("attributeRef",t);return null==o&&(a=t.requireTokenType("IDENTIFIER")),e.parseElement("indirectExpression",t,{type:"possessive",root:r,attribute:o,prop:a,args:[r],op:function(e,t){return o?n.resolveProperty(t,o.name,!0):n.resolveProperty(t,a.value,!1)},evaluate:function(e){return n.unifiedEval(this,e)}})}}}),M.addIndirectExpression("inExpression",function(e,i,t,a){if(t.matchToken("in")){var o;("idRef"!==a.type&&"queryRef"===a.type||"classRef"===a.type)&&(o=!0);var n=e.requireElement("expression",t);return e.parseElement("indirectExpression",t,{type:"inExpression",root:a,args:[o?null:a,n],op:function(e,t,n){var r=[];return o?i.forEach(n,function(e){for(var t=e.querySelectorAll(a.css),n=0;n<t.length;n++)r.push(t[n])}):i.forEach(t,function(t){i.forEach(n,function(e){t===e&&r.push(t)})}),0<r.length?r:null},evaluate:function(e){return i.unifiedEval(this,e)}})}}),M.addIndirectExpression("asExpression",function(e,n,t,r){if(t.matchToken("as")){var i=e.requireElement("dotOrColonPath",t).evaluate();return e.parseElement("indirectExpression",t,{type:"asExpression",root:r,args:[r],op:function(e,t){return n.convertValue(t,i)},evaluate:function(e){return n.unifiedEval(this,e)}})}}),M.addIndirectExpression("functionCall",function(e,i,t,a){if(t.matchOpToken("(")){var n,r=[];if(!t.matchOpToken(")")){for(;r.push(e.requireElement("expression",t)),t.matchOpToken(","););t.requireOpToken(")")}return n=a.root?{type:"functionCall",root:a,argExressions:r,args:[a.root,r],op:function(e,t,n){i.nullCheck(t,a.root);var r=t[a.prop.value];return i.nullCheck(r,a),r.hyperfunc&&n.push(e),r.apply(t,n)},evaluate:function(e){return i.unifiedEval(this,e)}}:{type:"functionCall",root:a,argExressions:r,args:[a,r],op:function(e,t,n){return i.nullCheck(t,a),t.hyperfunc&&n.push(e),t.apply(null,n)},evaluate:function(e){return i.unifiedEval(this,e)}},e.parseElement("indirectExpression",t,n)}}),M.addIndirectExpression("attributeRefAccess",function(e,n,t,r){var i=e.parseElement("attributeRef",t);if(i)return{type:"attributeRefAccess",root:r,attribute:i,args:[r],op:function(e,t){return n.resolveProperty(t,i.name,!0)},evaluate:function(e){return O.unifiedEval(this,e)}}}),M.addIndirectExpression("arrayIndex",function(e,t,n,r){if(n.matchOpToken("[")){var i=!1,a=!1,o=null,s=null;n.matchOpToken("..")?(i=!0,o=e.requireElement("expression",n)):(o=e.requireElement("expression",n),n.matchOpToken("..")&&(a=!0,"R_BRACKET"!==n.currentToken().type&&(s=e.parseElement("expression",n)))),n.requireOpToken("]");s={type:"arrayIndex",root:r,firstIndex:o,secondIndex:s,args:[r,o,s],op:function(e,t,n,r){return i?t.slice(0,n+1):a?null!=r?t.slice(n,r+1):t.slice(n):t[n]},evaluate:function(e){return O.unifiedEval(this,e)}};return M.parseElement("indirectExpression",n,s)}}),M.addGrammarElement("postfixExpression",function(e,n,t){e=e.parseElement("primaryExpression",t);return t.matchOpToken(":")?{type:"typeCheck",typeName:t.requireTokenType("IDENTIFIER"),root:e,nullOk:!t.matchOpToken("!"),args:[e],op:function(e,t){if(n.typeCheck(t,this.typeName.value,this.nullOk))return t;throw new Error("Typecheck failed!  Expected: "+this.typeName.value)},evaluate:function(e){return n.unifiedEval(this,e)}}:e}),M.addGrammarElement("logicalNot",function(e,t,n){if(n.matchToken("not")){n=e.requireElement("unaryExpression",n);return{type:"logicalNot",root:n,args:[n],op:function(e,t){return!t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addGrammarElement("noExpression",function(e,n,t){if(t.matchToken("no")){t=e.requireElement("unaryExpression",t);return{type:"noExpression",root:t,args:[t],op:function(e,t){return n.isEmpty(t)},evaluate:function(e){return n.unifiedEval(this,e)}}}}),M.addGrammarElement("negativeNumber",function(e,t,n){if(n.matchOpToken("-")){n=e.requireElement("unaryExpression",n);return{type:"negativeNumber",root:n,args:[n],op:function(e,t){return-1*t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addGrammarElement("unaryExpression",function(e,t,n){return e.parseAnyOf(["logicalNot","relativePositionalExpression","positionalExpression","noExpression","negativeNumber","postfixExpression"],n)}),M.addGrammarElement("relativePositionalExpression",function(e,t,n){var s,r=n.matchAnyToken("next","previous");if(r){s="next"===r.value?"nextElementSibling":"previousElementSibling";var i,a=e.parseElement("expression",n).css;return null==a&&e.raiseParseError(n,"Expected a CSS expression"),{type:"relativePositionalExpression",from:i=n.matchToken("from")?e.requireElement("expression",n):e.requireElement("implicitMeTarget",n),inElt:n=n.matchToken("within")?e.requireElement("expression",n):document.body,operator:r.value,propName:s,args:[a,i,n],op:function(e,t,n,r){for(var i=n;i&&i!==r;){for(var a=i[s];a;){if(a.matches(t))return a;var o=a.querySelector(t);if(o)return o;a=a[s]}i=i.parentElement}},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addGrammarElement("positionalExpression",function(e,t,n){var r=n.matchAnyToken("first","last","random");if(r){n.matchAnyToken("in","from","of");n=e.requireElement("unaryExpression",n);return{type:"positionalExpression",rhs:n,operator:r.value,args:[n],op:function(e,t){if(t=t&&!Array.isArray(t)?t.children||Array.from(t):t)return"first"===this.operator?t[0]:"last"===this.operator?t[t.length-1]:"random"===this.operator?t[Math.floor(Math.random()*t.length)]:void 0},evaluate:function(e){return t.unifiedEval(this,e)}}}}),M.addGrammarElement("mathOperator",function(e,t,n){var r=e.parseElement("unaryExpression",n),i=null;for(s=n.matchAnyOpToken("+","-","*","/","%");s;){var i=i||s,a=s.value;i.value!==a&&e.raiseParseError(n,"You must parenthesize math operations with different operators");var o=e.parseElement("unaryExpression",n),r={type:"mathOperator",lhs:r,rhs:o,operator:a,args:[r,o],op:function(e,t,n){return"+"===this.operator?t+n:"-"===this.operator?t-n:"*"===this.operator?t*n:"/"===this.operator?t/n:"%"===this.operator?t%n:void 0},evaluate:function(e){return t.unifiedEval(this,e)}},s=n.matchAnyOpToken("+","-","*","/","%")}return r}),M.addGrammarElement("mathExpression",function(e,t,n){return e.parseAnyOf(["mathOperator","unaryExpression"],n)}),M.addGrammarElement("comparisonOperator",function(e,r,t){var n,i,a,o=e.parseElement("mathExpression",t),s=t.matchAnyOpToken("<",">","<=",">=","==","===","!=","!=="),l=s?s.value:null,c=!0,s=!1;return null==l&&(t.matchToken("is")||t.matchToken("am")?t.matchToken("not")?t.matchToken("in")?l="not in":t.matchToken("a")?(l="not a",s=!0):t.matchToken("empty")?c=!(l="not empty"):l="!=":t.matchToken("in")?l="in":t.matchToken("a")?(l="a",s=!0):t.matchToken("empty")?c=!(l="empty"):l="==":t.matchToken("matches")||t.matchToken("match")?l="match":t.matchToken("contains")||t.matchToken("contain")?l="contain":(t.matchToken("do")||t.matchToken("does"))&&(t.requireToken("not"),t.matchToken("matches")||t.matchToken("match")?l="not match":t.matchToken("contains")||t.matchToken("contain")?l="not contain":e.raiseParseError(t,"Expected matches or contains"))),l&&(s?(n=t.requireTokenType("IDENTIFIER"),i=!t.matchOpToken("!")):c&&(a=e.requireElement("mathExpression",t),"match"!==l&&"not match"!==l||(a=a.css||a)),o={type:"comparisonOperator",operator:l,typeName:n,nullOk:i,lhs:o,rhs:a,args:[o,a],op:function(e,t,n){if("=="===this.operator)return t==n;if("!="===this.operator)return t!=n;if("in"===this.operator)return null!=n&&0<=Array.from(n).indexOf(t);if("not in"===this.operator)return null==n||Array.from(n).indexOf(t)<0;if("match"===this.operator)return null!=t&&t.matches(n);if("not match"===this.operator)return null==t||!t.matches(n);if("contain"===this.operator)return null!=t&&t.contains(n);if("not contain"===this.operator)return null==t||!t.contains(n);if("==="===this.operator)return t===n;if("!=="===this.operator)return t!==n;if("<"===this.operator)return t<n;if(">"===this.operator)return n<t;if("<="===this.operator)return t<=n;if(">="===this.operator)return n<=t;if("empty"===this.operator)return r.isEmpty(t);if("not empty"===this.operator)return!r.isEmpty(t);if("a"===this.operator)return r.typeCheck(t,this.typeName.value,this.nullOk);if("not a"===this.operator)return!r.typeCheck(t,this.typeName.value,this.nullOk);throw"Unknown comparison : "+this.operator},evaluate:function(e){return r.unifiedEval(this,e)}}),o}),M.addGrammarElement("comparisonExpression",function(e,t,n){return e.parseAnyOf(["comparisonOperator","mathExpression"],n)}),M.addGrammarElement("logicalOperator",function(e,t,n){var r=e.parseElement("comparisonExpression",n),i=null;for(o=n.matchToken("and")||n.matchToken("or");o;){(i=i||o).value!==o.value&&e.raiseParseError(n,"You must parenthesize logical operations with different operators");var a=e.requireElement("comparisonExpression",n),r={type:"logicalOperator",operator:o.value,lhs:r,rhs:a,args:[r,a],op:function(e,t,n){return"and"===this.operator?t&&n:t||n},evaluate:function(e){return t.unifiedEval(this,e)}},o=n.matchToken("and")||n.matchToken("or")}return r}),M.addGrammarElement("logicalExpression",function(e,t,n){return e.parseAnyOf(["logicalOperator","mathExpression"],n)}),M.addGrammarElement("asyncExpression",function(e,t,n){return n.matchToken("async")?{type:"asyncExpression",value:e.requireElement("logicalExpression",n),evaluate:function(e){return{asyncWrapper:!0,value:this.value.evaluate(e)}}}:e.parseElement("logicalExpression",n)}),M.addGrammarElement("expression",function(e,t,n){return n.matchToken("the"),e.parseElement("asyncExpression",n)}),M.addGrammarElement("assignableExpression",function(e,t,n){n.matchToken("the");e=e.parseElement("primaryExpression",n);return"symbol"===e.type||"ofExpression"===e.type||"propertyAccess"===e.type||"attributeRefAccess"===e.type||"attributeRef"===e.type||"possessive"===e.type||M.raiseParseError(n,"A target expression must be writable.  The expression type '"+e.type+"' is not."),e}),M.addGrammarElement("hyperscript",function(e,t,n){var i=[];if(n.hasMore())for(;e.featureStart(n.currentToken())||"("===n.currentToken().value;){var r=e.requireElement("feature",n);i.push(r),n.matchToken("end")}return{type:"hyperscript",features:i,apply:function(t,n,r){O.forEach(i,function(e){e.install(t,n,r)})}}});function W(e){var t=[];if("("===e.token(0).value&&(")"===e.token(1).value||","===e.token(2).value||")"===e.token(2).value)){for(e.matchOpToken("(");t.push(e.requireTokenType("IDENTIFIER")),e.matchOpToken(","););e.requireOpToken(")")}return t}M.addFeature("on",function(e,u,t){if(t.matchToken("on")){var n=!1;t.matchToken("every")&&(n=!0);var r=[],i=null;do{var a,o,s,l=e.requireElement("eventName",t,"Expected event name").evaluate(),i=i?i+" or "+l:"on "+l,c=W(t),d=null;if(t.matchOpToken("[")&&(d=e.requireElement("expression",t),t.requireOpToken("]")),"NUMBER"===t.currentToken().type&&(y=t.consumeToken(),a=parseInt(y.value),t.matchToken("to")?(v=t.consumeToken(),o=parseInt(v.value)):t.matchToken("and")&&(s=!0,t.requireToken("on"))),"intersection"===l){var h={};if(t.matchToken("with")&&(h.with=e.parseElement("expression",t).evaluate()),t.matchToken("having"))for(;t.matchToken("margin")?h.rootMargin=e.parseElement("stringLike",t).evaluate():t.matchToken("threshold")?h.threshold=e.parseElement("expression",t).evaluate():e.raiseParseError(t,"Unknown intersection config specification"),t.matchToken("and"););}else if("mutation"===l){var f,p={};if(t.matchToken("of"))do{}while(t.matchToken("anything")?(p.attributes=!0,p.subtree=!0,p.characterData=!0,p.childList=!0):t.matchToken("childList")?p.childList=!0:t.matchToken("attributes")?(p.attributes=!0,p.attributeOldValue=!0):t.matchToken("subtree")?p.subtree=!0:t.matchToken("characterData")?(p.characterData=!0,p.characterDataOldValue=!0):"ATTRIBUTE_REF"===t.currentToken().type?(f=t.consumeToken(),null==p.attributeFilter&&(p.attributeFilter=[]),0==f.value.indexOf("@")?p.attributeFilter.push(f.value.substring(1)):e.raiseParseError(t,"Only shorthand attribute references are allowed here")):e.raiseParseError(t,"Unknown mutation config specification"),t.matchToken("or"));else p.attributes=!0,p.characterData=!0,p.childList=!0}var m,g,_,y=null,v=!1}while(t.matchToken("from")&&(t.matchToken("elsewhere")?v=!0:(y=e.parseElement("expression",t))||e.raiseParseError('Expected either target value or "elsewhere".',t)),null===y&&!1===v&&t.matchToken("elsewhere")&&(v=!0),t.matchToken("in")&&(m=e.parseAnyOf(["idRef","queryRef","classRef"],t)),t.matchToken("debounced")?(t.requireToken("at"),g=e.requireElement("timeExpression",t).evaluate({})):t.matchToken("throttled")&&(t.requireToken("at"),_=e.requireElement("timeExpression",t).evaluate({})),r.push({execCount:0,every:n,on:l,args:c,filter:d,from:y,inExpr:m,elsewhere:v,startCount:a,endCount:o,unbounded:s,debounceTime:g,throttleTime:_,mutationSpec:p,intersectionSpec:h}),t.matchToken("or"));var b,x,w=[],T=!0;n||t.matchToken("queue")&&(t.matchToken("all")?T=!!0:t.matchToken("first")?b=!0:t.matchToken("none")?x=!0:t.requireToken("last"));var A=e.requireElement("commandList",t),k={type:"implicitReturn",op:function(e){return e.meta.resolve(),u.HALT},execute:function(e){}};if(A){for(var M=A;M.next;)M=M.next;M.next=k}else A=k;var S={displayName:i,events:r,start:A,every:n,executing:!1,execCount:0,queue:w,execute:function(r){if(this.executing&&!1===this.every)return x||b&&0<w.length?void 0:(T&&(S.queue.length=0),void S.queue.push(r));this.execCount++,this.executing=!0,r.meta.resolve=function(){S.executing=!1;var e=S.queue.shift();e&&setTimeout(function(){S.execute(e)},1)},r.meta.reject=function(e){console.error(e.message||e);var t=u.getHyperTrace(r,e);t&&t.print(),u.triggerEvent(r.me,"exception",{error:e}),S.executing=!1;var n=S.queue.shift();n&&setTimeout(function(){S.execute(n)},1)},A.execute(r)},install:function(c,e){u.forEach(S.events,function(l){var e=l.elsewhere?[document]:l.from?l.from.evaluate({me:c}):[c];u.forEach(e,function(o){var n,s=l.on;l.mutationSpec&&(s="hyperscript:mutation",(n=new MutationObserver(function(e,t){console.log(o,e),S.executing||O.triggerEvent(o,s,{mutationList:e,observer:t})})).observe(o,l.mutationSpec)),l.intersectionSpec&&(s="hyperscript:insersection",(n=new IntersectionObserver(function(e){O.forEach(e,function(e){var t={observer:n};(t=E(t,e)).intersecting=e.isIntersecting,O.triggerEvent(o,s,t)})},l.intersectionSpec)).observe(o)),o.addEventListener(s,function e(t){if(c instanceof Node&&o!==c&&!c.isConnected)o.removeEventListener(s,e);else{var n=u.makeContext(c,S,c,t);if(!l.elsewhere||!c.contains(t.target)){if(l.from&&(n.result=o),u.forEach(l.args,function(e){n[e.value]=n.event[e.value]||(n.event.detail?n.event.detail[e.value]:null)}),l.filter){var r=n.meta.context;n.meta.context=n.event;try{var i=l.filter.evaluate(n);if(!i)return}finally{n.meta.context=r}}if(l.inExpr)for(var a=t.target;;){if(a.matches&&a.matches(l.inExpr.css)){n.result=a;break}if(null==(a=a.parentElement))return}if(l.execCount++,l.startCount)if(l.endCount){if(l.execCount<l.startCount||l.execCount>l.endCount)return}else if(l.unbounded){if(l.execCount<l.startCount)return}else if(l.execCount!==l.startCount)return;if(l.debounceTime)return l.debounced&&clearTimeout(l.debounced),void(l.debounced=setTimeout(function(){S.execute(n)},l.debounceTime));if(l.throttleTime){if(l.lastExec&&Date.now()<l.lastExec+l.throttleTime)return;l.lastExec=Date.now()}S.execute(n)}}})})})}};return e.setParent(A,S),S}}),M.addFeature("def",function(e,l,t){if(t.matchToken("def")){var n=e.requireElement("dotOrColonPath",t).evaluate(),r=n.split("."),i=r.pop(),c=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){for(;c.push(t.requireTokenType("IDENTIFIER")),t.matchOpToken(","););t.requireOpToken(")")}var u,d,h=e.parseElement("commandList",t);t.matchToken("catch")&&(u=t.requireTokenType("IDENTIFIER").value,d=e.parseElement("commandList",t));var f={displayName:i+"("+c.map(function(e){return e.value}).join(", ")+")",name:i,args:c,start:h,errorHandler:d,errorSymbol:u,install:function(o,s){function e(){var e=l.makeContext(s,f,o,null);e.meta.errorHandler=d,e.meta.errorSymmbol=u;for(var t=0;t<c.length;t++){var n=c[t];n&&(e[n.value]=arguments[t])}e.meta.caller=arguments[c.length],e.meta.caller&&(e.meta.callingCommand=e.meta.caller.meta.command);var r,i=null,a=new Promise(function(e,t){r=e,i=t});return h.execute(e),e.meta.returned?e.meta.returnValue:(e.meta.resolve=r,e.meta.reject=i,a)}e.hyperfunc=!0,e.hypername=n,l.assignToNamespace(o,r,i,e)}},a={type:"implicitReturn",op:function(e){return e.meta.returned=!0,e.meta.resolve&&e.meta.resolve(),l.HALT},execute:function(e){}};if(h){for(var o=h;o.next;)o=o.next;o.next=a}else f.start=a;if(d){for(o=d;o.next;)o=o.next;o.next=a}return e.setParent(h,f),f}}),M.addFeature("init",function(e,n,t){if(t.matchToken("init")){var r=e.parseElement("commandList",t),i={start:r,install:function(e,t){setTimeout(function(){r.execute(n.makeContext(e,this,e,null))},0)}},t={type:"implicitReturn",op:function(e){return n.HALT},execute:function(e){}};if(r){for(var a=r;a.next;)a=a.next;a.next=t}else i.start=t;return e.setParent(r,i),i}}),M.addFeature("worker",function(e,t,n){n.matchToken("worker")&&e.raiseParseError(n,"In order to use the 'worker' feature, include the _hyperscript worker plugin. See https://hyperscript.org/features/worker/ for more info.")}),M.addFeature("behavior",function(e,a,t){if(t.matchToken("behavior")){var o=e.parseElement("dotOrColonPath",t).evaluate(),n=o.split("."),r=n.pop(),s=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){for(;s.push(t.requireTokenType("IDENTIFIER").value),t.matchOpToken(","););t.requireOpToken(")")}for(var l=e.parseElement("hyperscript",t),i=0;i<l.features.length;i++)l.features[i].behavior=o;return{install:function(e,t){a.assignToNamespace(u.document&&u.document.body,n,r,function(e,t,n){for(var r=c(a.getInternalData(e),o+"Scope"),i=0;i<s.length;i++)r[s[i]]=n[s[i]];l.apply(e,t)})}}}}),M.addFeature("install",function(e,t,n){if(n.matchToken("install")){var r,o=e.requireElement("dotOrColonPath",n).evaluate(),s=o.split("."),l=e.parseElement("namedArgumentList",n);return r={install:function(i,a){t.unifiedEval({args:[l],op:function(e,t){for(var n=u,r=0;r<s.length;r++)if("object"!=typeof(n=n[s[r]])&&"function"!=typeof n)throw new Error("No such behavior defined as "+o);if(!(n instanceof Function))throw new Error(o+" is not a behavior");n(i,a,t)}},t.makeContext(i,r,i))}}}}),M.addGrammarElement("jsBody",function(e,t,n){for(var r=n.currentToken().start,i=n.currentToken(),a=[],o="",s=!1;n.hasMore();){var i=n.consumeToken(),l=n.currentToken(!0);if("IDENTIFIER"===l.type&&"end"===l.value)break;s?"IDENTIFIER"===i.type||"NUMBER"===i.type?o+=i.value:(""!==o&&a.push(o),o="",s=!1):"IDENTIFIER"===i.type&&"function"===i.value&&(s=!0)}var c=i.end+1;return{type:"jsBody",exposedFunctionNames:a,jsSource:n.source.substring(r,c)}}),M.addFeature("js",function(e,t,n){if(n.matchToken("js")){var e=e.parseElement("jsBody",n),n=e.jsSource+"\nreturn { "+e.exposedFunctionNames.map(function(e){return e+":"+e}).join(",")+" } ",r=new Function(n);return{jsSource:n,function:r,exposedFunctionNames:e.exposedFunctionNames,install:function(){E(u,r())}}}}),M.addCommand("js",function(e,r,t){if(t.matchToken("js")){var i=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){do{var n=t.requireTokenType("IDENTIFIER")}while(i.push(n.value),t.matchOpToken(","));t.requireOpToken(")")}e=e.parseElement("jsBody",t);t.matchToken("end");var a=o(Function,i.concat([e.jsSource]));return{jsSource:e.jsSource,function:a,inputs:i,op:function(n){var t=[];i.forEach(function(e){t.push(r.resolveSymbol(e,n))});var e=a.apply(u,t);return e&&"function"==typeof e.then?Promise(function(t){e.then(function(e){n.result=e,t(r.findNext(this,n))})}):(n.result=e,r.findNext(this,n))}}}}),M.addCommand("async",function(e,t,n){var r;if(n.matchToken("async"))return n.matchToken("do")?(r=e.requireElement("commandList",n),n.requireToken("end")):r=e.requireElement("command",n),{body:r,op:function(e){return setTimeout(function(){r.execute(e)}),t.findNext(this,e)}}}),M.addCommand("tell",function(e,n,t){var r=t.currentToken();if(t.matchToken("tell")){var i=e.requireElement("expression",t),a=e.requireElement("commandList",t);t.hasMore()&&t.requireToken("end");var o="tell_"+r.start,i={value:i,body:a,args:[i],resolveNext:function(e){var t=e.meta.iterators[o];return t.index<t.value.length?(e.beingTold=t.value[t.index++],a):(e.beingTold=t.originalBeingTold,this.next||n.findNext(this.parent,e))},op:function(e,t){return null==t?t=[]:Array.isArray(t)||t instanceof NodeList||(t=[t]),e.meta.iterators[o]={originalBeingTold:e.beingTold,index:0,value:t},this.resolveNext(e)}};return e.setParent(a,i),i}}),M.addCommand("wait",function(e,a,t){if(t.matchToken("wait")){if(t.matchToken("for")){t.matchToken("a");for(var o=[];o.push({name:M.requireElement("dotOrColonPath",t,"Expected event name").evaluate(),args:W(t)}),t.matchToken("or"););t.matchToken("from")&&(n=e.requireElement("expression",t));var s={event:o,on:n,args:[n],op:function(i,e){var t=e||i.me;if(!(t instanceof EventTarget))throw new Error("Not a valid event target: "+this.on.sourceFor());return new Promise(function(n){var r=!1;a.forEach(o,function(e){t.addEventListener(e.name,function(t){i.result=t,a.forEach(e.args,function(e){i[e.value]=t[e.value]||(t.detail?t.detail[e.value]:null)}),r||(r=!0,n(a.findNext(s,i)))},{once:!0})})})}}}else var n=t.matchToken("a")?(t.requireToken("tick"),0):M.requireElement("timeExpression",t),s={type:"waitCmd",time:n,args:[n],op:function(t,n){return new Promise(function(e){setTimeout(function(){e(a.findNext(s,t))},n)})},execute:function(e){return a.unifiedExec(this,e)}};return s}}),M.addGrammarElement("dotOrColonPath",function(e,t,n){var r=n.matchTokenType("IDENTIFIER");if(r){var i=[r.value],a=n.matchOpToken(".")||n.matchOpToken(":");if(a)for(;i.push(n.requireTokenType("IDENTIFIER").value),n.matchOpToken(a.value););return{type:"dotOrColonPath",path:i,evaluate:function(){return i.join(a?a.value:"")}}}}),M.addGrammarElement("eventName",function(e,t,n){var r;return(r=n.matchTokenType("STRING"))?{evaluate:function(){return r.value}}:e.parseElement("dotOrColonPath",n)}),M.addCommand("send",function(e,i,t){if(t.matchToken("send")){var n=e.requireElement("eventName",t),r=e.parseElement("namedArgumentList",t),a={eventName:n,details:r,to:t=t.matchToken("to")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),args:[t,n,r],op:function(e,t,n,r){return i.forEach(t,function(e){i.triggerEvent(e,n,r||{})}),i.findNext(a,e)}};return a}});function X(e,r,t,n){var i;return{value:i=n?e.requireElement("expression",t):i,args:[i],op:function(e,t){var n=e.meta.resolve;return e.meta.returned=!0,n?t?n(t):n():(e.meta.returned=!0,e.meta.returnValue=t),r.HALT}}}M.addCommand("return",function(e,t,n){if(n.matchToken("return"))return X(e,t,n,!0)}),M.addCommand("exit",function(e,t,n){if(n.matchToken("exit"))return X(e,t,n,!1)}),M.addCommand("halt",function(e,t,n){if(n.matchToken("halt")){var r,i,a;n.matchToken("the")&&(n.requireToken("event"),n.matchOpToken("'")&&n.requireToken("s"),r=!0),n.matchToken("bubbling")?i=!0:n.matchToken("default")&&(a=!0);var o=X(e,t,n,!1);return{keepExecuting:!0,bubbling:i,haltDefault:a,exit:o,op:function(e){if(e.event)return i?e.event.stopPropagation():(a||e.event.stopPropagation(),e.event.preventDefault()),r?t.findNext(this,e):o}}}}),M.addCommand("log",function(e,r,t){if(t.matchToken("log")){for(var n,i=[e.parseElement("expression",t)];t.matchOpToken(",");)i.push(e.requireElement("expression",t));return{exprs:i,withExpr:n=t.matchToken("with")?e.requireElement("expression",t):n,args:[n,i],op:function(e,t,n){return(t||console.log).apply(null,n),r.findNext(this,e)}}}}),M.addCommand("throw",function(e,n,t){if(t.matchToken("throw")){t=e.requireElement("expression",t);return{expr:t,args:[t],op:function(e,t){n.registerHyperTrace(e,t);e=e.meta&&e.meta.reject;if(e)return e(t),n.HALT;throw t}}}});function Z(e,n,t){var r={expr:t=e.requireElement("expression",t),args:[t],op:function(e,t){return e.result=t,n.findNext(r,e)}};return r}M.addCommand("call",function(e,t,n){if(n.matchToken("call")){t=Z(e,t,n);return t.expr&&"functionCall"!==t.expr.type&&e.raiseParseError(n,"Must be a function invocation"),t}}),M.addCommand("get",function(e,t,n){if(n.matchToken("get"))return Z(e,t,n)}),M.addCommand("make",function(e,c,t){if(t.matchToken("make")){t.matchToken("a")||t.matchToken("an");var u,d=e.requireElement("expression",t),n=[];if("queryRef"!==d.type&&t.matchToken("from"))for(;n.push(e.requireElement("expression",t)),t.matchOpToken(","););return t.matchToken("called")&&(u=t.requireTokenType("IDENTIFIER").value),"queryRef"===d.type?{op:function(e){for(var t,n,r="div",i=[],a=/(?:(^|#|\.)([^#\. ]+))/g;t=a.exec(d.css);)""===t[1]?r=t[2].trim():"#"===t[1]?n=t[2].trim():i.push(t[2].trim());var o=document.createElement(r);void 0!==n&&(o.id=n);for(var s=0;s<i.length;s++){var l=i[s];o.classList.add(l)}return e.result=o,u&&(e[u]=o),c.findNext(this,e)}}:{args:[d,n],op:function(e,t,n){return e.result=o(t,n),u&&(e[u]=e.result),c.findNext(this,e)}}}}),M.addGrammarElement("pseudoCommand",function(e,i,t){var n=e.requireElement("primaryExpression",t);"functionCall"!==n.type&&"symbol"!==n.root.type&&e.raiseParseError("Implicit function calls must start with a simple function",t),t=!t.matchAnyToken("to","on","with")&&e.commandBoundary(t.currentToken())?e.requireElement("implicitMeTarget",t):e.requireElement("expression",t);var a=n.root.name,o={type:"pseudoCommand",expr:n,args:[t,n.argExressions],op:function(e,t,n){var r=t[a];r.hyperfunc&&n.push(e);n=r.apply(t,n);return e.result=n,i.findNext(o,e)},execute:function(e){return i.unifiedExec(this,e)}};return o});function J(e,r,t,i,n){var a="symbol"===i.type,o="attributeRef"===i.type;o||a||null!=i.root||e.raiseParseError(t,"Can only put directly into symbols, not references");var s,l=null,c=null;return a||(o?(l=e.requireElement("implicitMeTarget",t),s=i):(c=i.prop?i.prop.value:null,s=i.attribute,l=i.root)),{target:i,symbolWrite:a,value:n,args:[l,n],op:function(e,t,n){return a?r.setSymbol(i.name,e,i.symbolType,n):r.forEach(t,function(e){s?null==n?e.removeAttribute(s.name):e.setAttribute(s.name,n):e[c]=n}),r.findNext(this,e)}}}M.addCommand("default",function(e,n,t){if(t.matchToken("default")){var r=e.requireElement("assignableExpression",t);t.requireToken("to");var i=e.requireElement("expression",t),a=J(e,n,t,r,i),r={target:r,value:i,setter:a,args:[r],op:function(e,t){return t?n.findNext(this,e):a}};return a.parent=r}}),M.addCommand("set",function(e,r,t){if(t.matchToken("set")){if("L_BRACE"===t.currentToken().type){var n=e.requireElement("objectLiteral",t);return t.requireToken("on"),{objectLiteral:n,target:i=e.requireElement("expression",t),args:[n,i],op:function(e,t,n){return E(n,t),r.findNext(this,e)}}}try{t.pushFollow("to");var i=e.requireElement("assignableExpression",t)}finally{t.popFollow()}t.requireToken("to");n=e.requireElement("expression",t);return J(e,r,t,i,n)}}),M.addCommand("if",function(e,n,t){if(t.matchToken("if")){var r=e.requireElement("expression",t);t.matchToken("then");var i,a=e.parseElement("commandList",t);t.matchToken("else")&&(i=e.parseElement("commandList",t)),t.hasMore()&&t.requireToken("end");r={expr:r,trueBranch:a,falseBranch:i,args:[r],op:function(e,t){return t?a:i||n.findNext(this,e)}};return e.setParent(a,r),e.setParent(i,r),r}});function $(e,t,r,n){var i,a,o,s,l,c,u,d,h=t.currentToken();t.matchToken("for")||n?(i=t.requireTokenType("IDENTIFIER").value,t.requireToken("in"),a=e.requireElement("expression",t)):t.matchToken("in")?(i="it",a=e.requireElement("expression",t)):t.matchToken("while")?l=e.requireElement("expression",t):t.matchToken("until")?(o=!0,t.matchToken("event")?(s=M.requireElement("dotOrColonPath",t,"Expected event name"),t.matchToken("from")&&(y=e.requireElement("expression",t))):l=e.requireElement("expression",t)):t.matchTokenType("NUMBER")?(c=parseFloat(h.value),t.requireToken("times")):(t.matchToken("forever"),u=!0),t.matchToken("index")&&(d=t.requireTokenType("IDENTIFIER").value);var f,p=e.parseElement("commandList",t);if(p&&s){for(var m=p;m.next;)m=m.next;var g={type:"waitATick",op:function(){return new Promise(function(e){setTimeout(function(){e(r.findNext(g))},0)})}};m.next=g}t.hasMore()&&t.requireToken("end"),f=null==i?i="_implicit_repeat_"+h.start:i+"_"+h.start;var _={identifier:i,indexIdentifier:d,slot:f,expression:a,forever:u,times:c,until:o,event:s,on:y,whileExpr:l,resolveNext:function(){return this},loop:p,args:[l],op:function(e,t){var n=e.meta.iterators[f];return!!this.forever||(this.until?s?!1===e.meta.iterators[f].eventFired:!0!==t:!!t||(c?n.index<this.times:null!==n.value&&n.index<n.value.length))?(n.value?(e[i]=n.value[n.index],e.result=n.value[n.index]):e.result=n.index,d&&(e[d]=n.index),n.index++,p):(e.meta.iterators[f]=null,r.findNext(this.parent,e))}};e.setParent(p,_);var y={name:"repeatInit",args:[a,s,y],op:function(t,e,n,r){return t.meta.iterators[f]={index:0,value:e,eventFired:!1},s&&(r||t.me).addEventListener(n,function(e){t.meta.iterators[f].eventFired=!0},{once:!0}),_},execute:function(e){return r.unifiedExec(this,e)}};return e.setParent(_,y),y}function Q(){var e,e=(e=document.querySelector('meta[name="htmx-config"]'))?t(e.content):null;e&&(_hyperscript.config=E(_hyperscript.config,e))}return M.addCommand("repeat",function(e,t,n){if(n.matchToken("repeat"))return $(e,n,t,!1)}),M.addCommand("for",function(e,t,n){if(n.matchToken("for"))return $(e,n,t,!0)}),M.addGrammarElement("stringLike",function(e,t,n){return M.parseAnyOf(["string","nakedString"],n)}),M.addCommand("append",function(e,n,t){if(t.matchToken("append")){var r=null,i=null,a=e.requireElement("expression",t);if(null==(r=t.matchToken("to")?e.requireElement("expression",t):r))i="result";else if("symbol"===r.type)i=r.name;else{if("propertyAccess"!==r.type)throw"Unable to append to "+r.type;i=r.prop.value}return{value:a,target:r,args:[a],op:function(e,t){if(Array.isArray(e[i]))e[i].push(t);else if(e[i]instanceof Element){if("string"!=typeof t)throw"Don't know how to append non-strings to an HTML Element yet.";e[i].innerHTML+=t}else e[i]+=t;return n.findNext(this,e)},execute:function(e){return n.unifiedExec(this,e,a,r)}}}}),M.addCommand("increment",function(r,i,a){if(a.matchToken("increment")){var t,o=r.parseElement("assignableExpression",a);return a.matchToken("by")&&(t=r.requireElement("expression",a)),{target:o,args:[o,t],op:function(e,t,n){t=(t=t?parseFloat(t):0)+(n=n?parseFloat(n):1),n=J(r,i,a,o,t);return e.result=t,n.parent=this,n},execute:function(e){return i.unifiedExec(this,e,o,t)}}}}),M.addCommand("decrement",function(r,i,a){if(a.matchToken("decrement")){var t,o=r.parseElement("assignableExpression",a);return a.matchToken("by")&&(t=r.requireElement("expression",a)),{target:o,args:[o,t],op:function(e,t,n){t=(t=t?parseFloat(t):0)-(n=n?parseFloat(n):1),n=J(r,i,a,o,t);return e.result=t,n.parent=this,n},execute:function(e){return i.unifiedExec(this,e,o,t)}}}}),M.addCommand("fetch",function(e,r,t){if(t.matchToken("fetch")){var i,n=e.requireElement("stringLike",t),a=e.parseElement("objectLiteral",t),o="text";t.matchToken("as")&&(t.matchToken("json")?o="json":t.matchToken("response")?o="response":t.matchToken("html")?o="html":t.matchToken("text")||(i=e.requireElement("dotOrColonPath",t).evaluate()));var s={url:n,argExpressions:a,args:[n,a],op:function(t,e,n){return fetch(e,n).then(function(e){return"response"===o?(t.result=e,r.findNext(s,t)):"json"===o?e.json().then(function(e){return t.result=e,r.findNext(s,t)}):e.text().then(function(e){return i&&(e=r.convertValue(e,i)),"html"===o&&(e=r.convertValue(e,"Fragment")),t.result=e,r.findNext(s,t)})}).catch(function(e){throw r.triggerEvent(t.me,"fetch:error",{reason:e}),e})}};return s}}),"document"in u&&Promise.all(Array.from(document.querySelectorAll("script[type='text/hyperscript'][src]")).map(function(e){return fetch(e.src).then(function(e){return e.text()}).then(function(e){return O.evaluate(e)})})).then(function(){var e;e=function(){Q(),O.processNode(document.documentElement),document.addEventListener("htmx:load",function(e){O.processNode(e.detail.elt)})},"loading"!==document.readyState?setTimeout(e):document.addEventListener("DOMContentLoaded",e)}),E(function(e,t){return O.evaluate(e,t)},{internals:{lexer:a,parser:M,runtime:O},addFeature:function(e,t){M.addFeature(e,t)},addCommand:function(e,t){M.addCommand(e,t)},addLeafExpression:function(e,t){M.addLeafExpression(e,t)},addIndirectExpression:function(e,t){M.addIndirectExpression(e,t)},evaluate:function(e,t){return O.evaluate(e,t)},parse:function(e){return O.parse(e)},processNode:function(e){O.processNode(e)},config:{attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",conversions:D}})}),function(){_hyperscript.addCommand("settle",function(e,a,t){if(t.matchToken("settle")){var o={type:"settleCmd",args:[e.commandBoundary(t.currentToken())?e.requireElement("implicitMeTarget",t):e.requireElement("expression",t)],op:function(e,t){var n=null,r=!1,i=new Promise(function(e){n=e});return t.addEventListener("transitionstart",function(){r=!0},{once:!0}),setTimeout(function(){r||n(a.findNext(o,e))},500),t.addEventListener("transitionend",function(){n(a.findNext(o,e))},{once:!0}),i},execute:function(e){return a.unifiedExec(this,e)}};return o}}),_hyperscript.addCommand("add",function(e,r,t){if(t.matchToken("add")){var n,i,a=e.parseElement("classRef",t),o=null,s=null;if(null==a)null==(o=e.parseElement("attributeRef",t))&&null==(s=e.parseElement("objectLiteral",t))&&e.raiseParseError(t,"Expected either a class reference or attribute expression");else for(var l=[a];a=e.parseElement("classRef",t);)l.push(a);return n=t.matchToken("to")?e.requireElement("expression",t):e.parseElement("implicitMeTarget",t),i=l?{classRefs:l,to:n,args:[n],op:function(e,n){return r.forEach(l,function(t){r.forEach(n,function(e){e instanceof Element&&e.classList.add(t.className())})}),r.findNext(this,e)}}:o?{type:"addCmd",attributeRef:o,to:n,args:[n],op:function(e,t,n){return r.forEach(t,function(e){e.setAttribute(o.name,o.value)}),r.findNext(i,e)},execute:function(e){return r.unifiedExec(this,e)}}:{type:"addCmd",cssDeclaration:s,to:n,args:[n,s],op:function(e,t,n){return r.forEach(t,function(e){for(var t in n)n.hasOwnProperty(t)&&e.style.setProperty(t,n[t])}),r.findNext(i,e)},execute:function(e){return r.unifiedExec(this,e)}}}}),_hyperscript.addCommand("remove",function(e,r,t){if(t.matchToken("remove")){var n,i=e.parseElement("classRef",t),a=null,o=null;if(null==i)null==(a=e.parseElement("attributeRef",t))&&null==(o=e.parseElement("expression",t))&&e.raiseParseError(t,"Expected either a class reference, attribute expression or value expression");else for(var s=[i];i=e.parseElement("classRef",t);)s.push(i);return n=t.matchToken("from")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),o?{elementExpr:o,from:n,args:[o],op:function(e,t){return r.forEach(t,function(e){e.parentElement&&e.parentElement.removeChild(e)}),r.findNext(this,e)}}:{classRefs:s,attributeRef:a,elementExpr:o,from:n,args:[n],op:function(e,n){return this.classRefs?r.forEach(s,function(t){r.forEach(n,function(e){e.classList.remove(t.className())})}):r.forEach(n,function(e){e.removeAttribute(a.name)}),r.findNext(this,e)}}}}),_hyperscript.addCommand("toggle",function(e,o,t){if(t.matchToken("toggle")){if(t.matchToken("between")){var n=!0,r=e.parseElement("classRef",t);t.requireToken("and");var i=e.requireElement("classRef",t)}else{var r=e.parseElement("classRef",t),a=null;if(null==r)null==(a=e.parseElement("attributeRef",t))&&e.raiseParseError(t,"Expected either a class reference or attribute expression");else for(var s=[r];r=e.parseElement("classRef",t);)s.push(r)}var l,c,u,d;l=t.matchToken("on")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),t.matchToken("for")?c=e.requireElement("timeExpression",t):t.matchToken("until")&&(u=e.requireElement("dotOrColonPath",t,"Expected event name"),t.matchToken("from")&&(d=e.requireElement("expression",t)));var h={classRef:r,classRef2:i,classRefs:s,attributeRef:a,on:l,time:c,evt:u,from:d,toggle:function(e){n?o.forEach(e,function(e){e.classList.contains(r.className())?(e.classList.remove(r.className()),e.classList.add(i.className())):(e.classList.add(r.className()),e.classList.remove(i.className()))}):this.classRefs?o.forEach(this.classRefs,function(t){o.forEach(e,function(e){e.classList.toggle(t.className())})}):o.forEach(e,function(e){e.hasAttribute(a.name)?e.removeAttribute(a.name):e.setAttribute(a.name,a.value)})},args:[l,c,u,d],op:function(t,n,r,i,a){return r?new Promise(function(e){h.toggle(n),setTimeout(function(){h.toggle(n),e(o.findNext(h,t))},r)}):i?new Promise(function(e){(a||t.me).addEventListener(i,function(){h.toggle(n),e(o.findNext(h,t))},{once:!0}),h.toggle(n)}):(this.toggle(n),o.findNext(h,t))}};return h}});function l(e,t,n){var r=n.currentToken();return n="with"===r.value||e.commandBoundary(r)?e.parseElement("implicitMeTarget",n):e.parseElement("expression",n)}function c(e,t,n){var r=_hyperscript.config.defaultHideShowStrategy,i=a;return null==(r=(i=_hyperscript.config.hideShowStrategies?function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(i,_hyperscript.config.hideShowStrategies):i)[n=n||r||"display"])&&e.raiseParseError(t,"Unknown show/hide strategy : "+n),r}var a={display:function(e,t,n){t.style.display=n||("hide"===e?"none":"block")},visibility:function(e,t,n){t.style.visibility=n||("hide"===e?"hidden":"visible")},opacity:function(e,t,n){t.style.opacity=n||("hide"===e?"0":"1")}};function u(e,t,n){var r;if((r=t?e[t]:e)instanceof Element||r instanceof HTMLDocument){for(;r.firstChild;)r.removeChild(r.firstChild);r.append(_hyperscript.internals.runtime.convertValue(n,"Fragment"))}else{if(!t)throw"Don't know how to put a value into "+typeof e;e[t]=n}}function d(e,t,n){if(n.matchToken("the")||n.matchToken("element")||n.matchToken("elements")||"CLASS_REF"===n.currentToken().type||"ID_REF"===n.currentToken().type||n.currentToken().op&&"<"===n.currentToken().value){e.possessivesDisabled=!0;try{var r=e.parseElement("expression",n)}finally{delete e.possessivesDisabled}n.matchOpToken("'")&&n.requireToken("s")}else{var i;r="IDENTIFIER"===n.currentToken().type&&"its"===n.currentToken().value?{type:"pseudopossessiveIts",token:i=n.matchToken("its"),name:i.value,evaluate:function(e){return t.resolveSymbol("it",e)}}:(n.matchToken("my")||n.matchToken("me"),e.parseElement("implicitMeTarget",n))}return r}_hyperscript.addCommand("hide",function(e,n,t){if(t.matchToken("hide")){var r=l(e,0,t),i=null;t.matchToken("with")&&(i=t.requireTokenType("IDENTIFIER").value);var a=c(e,t,i);return{target:r,args:[r],op:function(e,t){return n.forEach(t,function(e){a("hide",e)}),n.findNext(this,e)}}}}),_hyperscript.addCommand("show",function(e,n,t){if(t.matchToken("show")){var r=l(e,0,t),i=null;t.matchToken("with")&&(i=t.requireTokenType("IDENTIFIER").value);var a,o=null;t.matchOpToken(":")&&(a=t.consumeUntilWhitespace(),t.matchTokenType("WHITESPACE"),o=a.map(function(e){return e.value}).join(""));var s=c(e,t,i);return{target:r,args:[r],op:function(e,t){return n.forEach(t,function(e){s("show",e,o)}),n.findNext(this,e)}}}}),_hyperscript.addCommand("trigger",function(e,r,t){if(t.matchToken("trigger")){var n=e.requireElement("eventName",t),t=e.parseElement("namedArgumentList",t),i={eventName:n,details:t,args:[n,t],op:function(e,t,n){return r.triggerEvent(e.me,t,n||{}),r.findNext(i,e)}};return i}}),_hyperscript.addCommand("take",function(e,i,t){if(t.matchToken("take")){var n=e.parseElement("classRef",t);return{classRef:n,from:n=t.matchToken("from")?e.requireElement("expression",t):n,forElt:t=t.matchToken("for")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),args:[n,t],op:function(e,t,n){var r=this.classRef.css.substr(1);return i.forEach(t,function(e){e.classList.remove(r)}),i.forEach(n,function(e){e.classList.add(r)}),i.findNext(this,e)}}}}),_hyperscript.addCommand("put",function(e,i,t){if(t.matchToken("put")){var n=e.requireElement("expression",t),r=t.matchAnyToken("into","before","after");null==r&&t.matchToken("at")&&(r=t.matchAnyToken("start","end"),t.requireToken("of")),null==r&&e.raiseParseError(t,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'");var a,o=e.requireElement("expression",t),s=r.value,l=!1,r=null,c=null;return"propertyAccess"===o.type&&"into"===s?(c=o.prop.value,r=o.root):"symbol"===o.type&&"into"===s?(l=!0,c=o.name):r="attributeRef"===o.type&&"into"===s?(a=!0,c=o.name,e.requireElement("implicitMeTarget",t)):"attributeRefAccess"===o.type&&"into"===s?(a=!0,c=o.attribute.name,o.root):o,{target:o,operation:s,symbolWrite:l,value:n,args:[r,n],op:function(e,t,n){var r;return l?u(e,c,n):"into"===s?a?i.forEach(t,function(e){e.setAttribute(c,n)}):i.forEach(t,function(e){u(e,c,n)}):(r="before"===s?Element.prototype.before:"after"===s?Element.prototype.after:"start"===s?Element.prototype.prepend:"end"===s?Element.prototype.append:"unreachable",i.forEach(t,function(e){r.call(e,n instanceof Node?n:i.convertValue(n,"Fragment"))})),i.findNext(this,e)}}}}),_hyperscript.addCommand("transition",function(e,_,t){if(t.matchToken("transition")){for(var n,r,i=d(e,_,t),a=[],o=[],s=[],l=t.currentToken();!e.commandBoundary(l)&&"over"!==l.value&&"using"!==l.value;)a.push(e.requireElement("stringLike",t)),t.matchToken("from")?o.push(e.requireElement("stringLike",t)):o.push(null),t.requireToken("to"),s.push(e.requireElement("stringLike",t)),l=t.currentToken();t.matchToken("over")?n=e.requireElement("timeExpression",t):t.matchToken("using")&&(r=e.requireElement("expression",t));var c={to:s,args:[i,a,o,s,r,n],op:function(e,t,h,f,p,m,g){var n=[];return _.forEach(t,function(d){var e=new Promise(function(i,e){var a=d.style.transition;d.style.transition=g?"all "+g+"ms ease-in":m||_hyperscript.config.defaultTransition;for(var o=_.getInternalData(d),t=getComputedStyle(d),n={},r=0;r<t.length;r++){var s=t[r],l=t[s];n[s]=l}o.initalStyles||(o.initalStyles=n);for(r=0;r<h.length;r++){var c=h[r],u=f[r];d.style[c]="computed"==u||null==u?n[c]:u}setTimeout(function(){for(var e=0;e<h.length;e++){var t,n=h[e],r=p[e];"initial"==r?(t=o.initalStyles[n],d.style[n]=t):d.style[n]=r}d.addEventListener("transitionend",function(){d.style.transition=a,i()},{once:!0})},5)});n.push(e)}),Promise.all(n).then(function(){return _.findNext(c,e)})}};return c}}),_hyperscript.addCommand("measure",function(e,r,t){if(t.matchToken("measure")){var n=d(e,r,t),i=[];if(!e.commandBoundary(t.currentToken()))for(;i.push(t.matchTokenType("IDENTIFIER").value),t.matchOpToken(","););return{properties:i,args:[n],op:function(t,e){var n=(e=0 in e?e[0]:e).getBoundingClientRect(),e={top:e.scrollTop,left:e.scrollLeft,topMax:e.scrollTopMax,leftMax:e.scrollLeftMax,height:e.scrollHeight,width:e.scrollWidth};return t.result={x:n.x,y:n.y,left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height,bounds:n,scrollLeft:e.left,scrollTop:e.top,scrollLeftMax:e.leftMax,scrollTopMax:e.topMax,scrollWidth:e.width,scrollHeight:e.height,scroll:e},r.forEach(i,function(e){if(!(e in t.result))throw"No such measurement as "+e;t[e]=t.result[e]}),r.findNext(this,t)}}}}),_hyperscript.addLeafExpression("closestExpr",function(e,t,n){if(n.matchToken("closest")){var r;n.matchToken("parent")&&(r=!0);var i,a,o=null;"ATTRIBUTE_REF"===n.currentToken().type&&(i=e.parseElement("attributeRefAccess",n,null),o="["+i.attribute.name+"]"),null==o&&(null==(a=e.parseElement("expression",n)).css?e.raiseParseError(n,"Expected a CSS expression"):o=a.css),n=n.matchToken("to")?e.parseElement("expression",n):e.parseElement("implicitMeTarget",n);n={type:"closestExpr",parentSearch:r,expr:a,css:o,to:n,args:[n],op:function(e,t){return null!=t&&t instanceof Element?r?t.parentElement?t.parentElement.closest(o):null:t.closest(o):null},evaluate:function(e){return t.unifiedEval(this,e)}};return i?(i.root=n,i.args=[n],i):n}}),_hyperscript.addCommand("go",function(e,n,t){if(t.matchToken("go")){var r,i,a,o,s,l,c;t.matchToken("back")?r=!0:(t.matchToken("to"),t.matchToken("url")?(l=e.requireElement("stringLike",t),i=!0,t.matchToken("in")&&(t.requireToken("new"),t.requireToken("window"),a=!0)):(t.matchToken("the"),o=t.matchAnyToken("top","bottom","middle"),s=t.matchAnyToken("left","center","right"),(o||s)&&t.requireToken("of"),l=e.requireElement("expression",t),t=t.matchAnyToken("smoothly","instantly"),c={},o&&("top"===o.value?c.block="start":"bottom"===o.value?c.block="end":"middle"===o.value&&(c.block="center")),s&&("left"===s.value?c.inline="start":"center"===s.value?c.inline="center":"right"===s.value&&(c.inline="end")),t&&("smoothly"===t.value?c.behavior="smooth":"instantly"===t.value&&(c.behavior="instant"))));var u={target:l,args:[l],op:function(e,t){return r?window.history.back():i?t&&(0!==t.indexOf("#")||a?window.open(t,a?"_blank":null):window.location.href=t):n.forEach(t,function(e){e.scrollIntoView(c)}),n.findNext(u)}};return u}}),_hyperscript.config.conversions.Values=function(e){var n={},r=_hyperscript.internals.runtime.forEach;return r(e,function(e){var t=a(e);void 0===t?null!=e.querySelectorAll&&(e=e.querySelectorAll("input,select,textarea"),r(e,i)):n[t.name]=t.value}),n;function i(e){e=a(e);null!=e&&(null!=n[e.name]?Array.isArray(n[e.name])&&Array.isArray(e.value)&&(n[e.name]=[].concat(n[e.name],e.value)):n[e.name]=e.value)}function a(e){try{var t={name:e.name,value:e.value};if(null==t.name||null==t.value)return;if("radio"==e.type&&0==e.checked)return;if("checkbox"==e.type&&(0==e.checked?t.value=void 0:"string"==typeof t.value&&(t.value=[t.value])),"select-multiple"==e.type){var n=e.querySelectorAll("option[selected]");t.value=[];for(var r=0;r<n.length;r++)t.value.push(n[r].value)}return t}catch(e){return}}},_hyperscript.config.conversions.HTML=function(e){var i=function(e){if(e instanceof Array)return e.map(function(e){return i(e)}).join("");if(e instanceof HTMLElement)return e.outerHTML;if(e instanceof NodeList){for(var t="",n=0;n<e.length;n++){var r=e[n];r instanceof HTMLElement&&(t+=r.outerHTML)}return t}return e.toString?e.toString():""};return i(e)},_hyperscript.config.conversions.Fragment=function(e){var n=document.createDocumentFragment();return _hyperscript.internals.runtime.forEach(e,function(e){var t;e instanceof Node?n.append(e):((t=document.createElement("template")).innerHTML=e,n.append(t.content))}),n}}(),function(e){const t=(a="function"==typeof require&&require,function(o,s,l){void 0===s&&(s={}),void 0===l&&(l={});var i={},c=function(e){if(!(n=i[e])){var n,t=function(e){if("number"==typeof e)return e;if("bokehjs"===e)return 0;l[e]||e.slice(0,(t="@bokehjs/").length)===t&&(e=e.slice(t.length));var t=s[e];if(null!=t)return t;t=0<e.length&&"/"===e[e.lenght-1],t=s[e+(t?"":"/")+"index"];return null!=t?t:e}(e);if(n=i[t])i[e]=n;else{if(!o[t]){if(!1===l[t]||1==l[t]&&a)try{return n={exports:l[t]?a(t):{}},(i[t]=i[e]=n).exports}catch(e){}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}n={exports:{}},i[t]=i[e]=n,o[t].call(n.exports,c,n,n.exports,function(){Object.defineProperty(n.exports,"__esModule",{value:!0})},function(e,t){Object.defineProperty(n.exports,e,{enumerable:!0,get:function(){return t}})})}}return n.exports};c.resolve=function(e){return""};var u=c(0);return u.require=c,"undefined"!=typeof Proxy&&(u.loader=new Proxy({},{get:function(e,t){return c(t)}})),u.register_plugin=function(e,t,n,r){for(var i in void 0===n&&(n={}),void 0===r&&(r={}),e)o[i]=e[i];for(var i in n)s[i]=n[i];for(var i in r)l[i]=r[i];var a=c(t);for(i in a)u[i]=a[i];return a},u}([function(e,t,n,r,i){r(),e(1).__exportStar(e(2),n)},function(e,t,r,n,i){n();var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function d(e){return this instanceof d?(this.v=e,this):new d(e)}r.__extends=function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r.__assign=function(){return r.__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.__assign.apply(this,arguments)},r.__rest=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},r.__decorate=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(o=(a<3?i(o):3<a?i(t,n,o):i(t,n))||o);return 3<a&&o&&Object.defineProperty(t,n,o),o},r.__param=function(n,r){return function(e,t){r(e,t,n)}},r.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r.__awaiter=function(e,o,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{a(l.next(e))}catch(e){t(e)}}function i(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}a((l=l.apply(e,o||[])).next())})},r.__generator=function(n,r){var i,a,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!((o=0<(o=s.trys).length&&o[o.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],a=0}finally{i=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},r.__createBinding=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},r.__exportStar=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r.__createBinding(t,e,n)},r.__values=s,r.__read=o,r.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},r.__spreadArrays=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},r.__await=d,r.__asyncGenerator=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a=[],o={};return r("next"),r("throw"),r("return"),o[Symbol.asyncIterator]=function(){return this},o;function r(r){i[r]&&(o[r]=function(n){return new Promise(function(e,t){1<a.push([r,n,e,t])||s(r,n)})})}function s(e,t){try{(n=i[e](t)).value instanceof d?Promise.resolve(n.value.v).then(l,c):u(a[0][2],n)}catch(e){u(a[0][3],e)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}},r.__asyncDelegator=function(r){var i,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,n){e[t]=r[t]?function(e){return(i=!i)?{value:d(r[t](e)),done:"return"===t}:n?n(e):e}:n}},r.__asyncValues=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=o[Symbol.asyncIterator];return t?t.call(o):(o=s(o),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=o[a]&&function(i){return new Promise(function(e,t){var n,r;n=e,e=t,r=(i=o[a](i)).done,t=i.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}},r.__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var l=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};r.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r.__createBinding(t,e,n);return l(t,e),t},r.__importDefault=function(e){return e&&e.__esModule?e:{default:e}},r.__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},r.__classPrivateFieldSet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n,r,i){r();const a=e(1);i("version",e(3).version),i("index",e(4).index),n.embed=a.__importStar(e(4)),n.protocol=a.__importStar(e(404)),n._testing=a.__importStar(e(405));n=e(19);i("logger",n.logger),i("set_log_level",n.set_log_level),i("settings",e(28).settings),i("Models",e(7).Models),i("documents",e(5).documents),i("safely",e(406).safely)},function(e,t,n,r,i){r(),n.version="2.3.1"},function(e,t,n,r,i){r();const o=e(5),s=e(19),l=e(34),c=e(13),u=e(8),a=e(16),d=e(395),h=e(397),f=e(396);r=e(395);i("add_document_standalone",r.add_document_standalone),i("index",r.index),i("add_document_from_session",e(397).add_document_from_session);r=e(402);async function p(e,t,n,r){u.isString(e)&&(e=JSON.parse(l.unescape(e)));const i={};for(const[t,n]of c.entries(e))i[t]=o.Document.from_json(n);const a=[];for(const e of t){const t=f._resolve_element(e),o=f._resolve_root_elements(e);if(null!=e.docid)a.push(await d.add_document_standalone(i[e.docid],t,o,e.use_for_title));else{if(null==e.token)throw new Error("Error rendering Bokeh items: either 'docid' or 'token' was expected.");{const i=h._get_ws_url(n,r);s.logger.debug(`embed: computed ws url: ${i}`);try{a.push(await h.add_document_from_session(i,e.token,t,o,e.use_for_title)),console.log("Bokeh items were rendered successfully")}catch(e){console.log("Error rendering Bokeh items:",e)}}}}return a}i("embed_items_notebook",r.embed_items_notebook),i("kernels",r.kernels),i("BOKEH_ROOT",e(396).BOKEH_ROOT),n.embed_item=async function(e,t){const n={},r=l.uuid4();n[r]=e.doc,null==t&&(t=e.target_id);const i=document.getElementById(t);null!=i&&i.classList.add(f.BOKEH_ROOT);e={roots:{[e.root_id]:t},root_ids:[e.root_id],docid:r};await a.defer();var[e]=await p(n,[e]);return e},n.embed_items=async function(e,t,n,r){return await a.defer(),p(e,t,n,r)}},function(e,t,n,r,i){r();const a=e(1);a.__exportStar(e(6),n),a.__exportStar(e(35),n)},function(e,t,n,r,i){r();const a=e(1),u=e(7),d=e(3),h=e(19),o=e(264),f=e(14),p=e(30),s=e(15),l=e(17),c=e(31),m=e(9),g=e(13),_=a.__importStar(e(132)),y=e(26),v=e(8),b=e(319),x=e(130),w=e(53),T=e(394),A=e(35);class k{constructor(e){this.document=e,this.session=null,this.subscribed_models=new Set}send_event(e){e=new A.MessageSentEvent(this.document,"bokeh_event",e.to_json());this.document._trigger_on_change(e)}trigger(e){for(const t of this.subscribed_models)null!=e.origin&&e.origin!=t||t._process_event(e)}}(n.EventManager=k).__name__="EventManager",n.documents=[],n.DEFAULT_TITLE="Bokeh Application";class M{constructor(e){n.documents.push(this),this._init_timestamp=Date.now(),this._resolver=null!==(e=null==e?void 0:e.resolver)&&void 0!==e?e:new u.ModelResolver,this._title=n.DEFAULT_TITLE,this._roots=[],this._all_models=new Map,this._all_models_freeze_count=0,this._callbacks=new Map,this._message_callbacks=new Map,this.event_manager=new k(this),this.idle=new s.Signal0(this,"idle"),this._idle_roots=new WeakMap,this._interactive_timestamp=null,this._interactive_plot=null}get layoutables(){return this._roots.filter(e=>e instanceof b.LayoutDOM)}get is_idle(){for(const e of this.layoutables)if(!this._idle_roots.has(e))return!1;return!0}notify_idle(e){this._idle_roots.set(e,!0),this.is_idle&&(h.logger.info(`document idle at ${Date.now()-this._init_timestamp} ms`),this.event_manager.send_event(new o.DocumentReady),this.idle.emit())}clear(){this._push_all_models_freeze();try{for(;0<this._roots.length;)this.remove_root(this._roots[0])}finally{this._pop_all_models_freeze()}}interactive_start(e){null==this._interactive_plot&&(this._interactive_plot=e,this._interactive_plot.trigger_event(new o.LODStart)),this._interactive_timestamp=Date.now()}interactive_stop(){null!=this._interactive_plot&&this._interactive_plot.trigger_event(new o.LODEnd),this._interactive_plot=null,this._interactive_timestamp=null}interactive_duration(){return null==this._interactive_timestamp?-1:Date.now()-this._interactive_timestamp}destructively_move(e){if(e===this)throw new Error("Attempted to overwrite a document with itself");e.clear();var t=m.copy(this._roots);this.clear();for(const e of t)if(null!=e.document)throw new Error(`Somehow we didn't detach ${e}`);if(0!=this._all_models.size)throw new Error(`this._all_models still had stuff in it: ${this._all_models}`);for(const n of t)e.add_root(n);e.set_title(this._title)}_push_all_models_freeze(){this._all_models_freeze_count+=1}_pop_all_models_freeze(){--this._all_models_freeze_count,0===this._all_models_freeze_count&&this._recompute_all_models()}_invalidate_all_models(){h.logger.debug("invalidating document models"),0===this._all_models_freeze_count&&this._recompute_all_models()}_recompute_all_models(){let e=new Set;for(const t of this._roots)e=_.union(e,t.references());const t=new Set(this._all_models.values()),n=_.difference(t,e),r=_.difference(e,t),i=new Map;for(const t of e)i.set(t.id,t);for(const e of n)e.detach_document();for(const e of r)e.attach_document(this);this._all_models=i}roots(){return this._roots}add_root(e,t){if(h.logger.debug(`Adding root: ${e}`),!m.includes(this._roots,e)){this._push_all_models_freeze();try{this._roots.push(e)}finally{this._pop_all_models_freeze()}this._trigger_on_change(new A.RootAddedEvent(this,e,t))}}remove_root(e,t){var n=this._roots.indexOf(e);if(!(n<0)){this._push_all_models_freeze();try{this._roots.splice(n,1)}finally{this._pop_all_models_freeze()}this._trigger_on_change(new A.RootRemovedEvent(this,e,t))}}title(){return this._title}set_title(e,t){e!==this._title&&(this._title=e,this._trigger_on_change(new A.TitleChangedEvent(this,e,t)))}get_model_by_id(e){return null!==(e=this._all_models.get(e))&&void 0!==e?e:null}get_model_by_name(e){const t=[];for(const n of this._all_models.values())n instanceof w.Model&&n.name==e&&t.push(n);switch(t.length){case 0:return null;case 1:return t[0];default:throw new Error(`Multiple models are named '${e}'`)}}on_message(e,t){const n=this._message_callbacks.get(e);null==n?this._message_callbacks.set(e,new Set([t])):n.add(t)}remove_on_message(e,t){null===(e=this._message_callbacks.get(e))||void 0===e||e.delete(t)}_trigger_on_message(e,t){e=this._message_callbacks.get(e);if(null!=e)for(const n of e)n(t)}on_change(e,t=!1){this._callbacks.has(e)||this._callbacks.set(e,t)}remove_on_change(e){this._callbacks.delete(e)}_trigger_on_change(e){for(var[t,n]of this._callbacks)if(!n&&e instanceof A.DocumentEventBatch)for(const r of e.events)t(r);else t(e)}_notify_change(e,t,n,r,i){this._trigger_on_change(new A.ModelChangedEvent(this,e,t,n,r,null==i?void 0:i.setter_id,null==i?void 0:i.hint))}static _instantiate_object(e,t,n,r){e=Object.assign(Object.assign({},n),{id:e,__deferred__:!0});return new(r.get(t))(e)}static _instantiate_references_json(t,n,r){var i;const a=new Map;for(const o of t){const t=o.id,s=o.type,l=null!==(i=o.attributes)&&void 0!==i?i:{};let e=n.get(t);null==e&&(e=M._instantiate_object(t,s,l,r),null!=o.subtype&&e.set_subtype(o.subtype)),a.set(e.id,e)}return a}static _resolve_refs(e,t,r,a){return function i(n){var e;if(l.is_ref(n)){const a=null!==(e=t.get(n.id))&&void 0!==e?e:r.get(n.id);if(null!=a)return a;throw new Error(`reference ${JSON.stringify(n)} isn't known (not in Document?)`)}return c.is_NDArray_ref(n)?c.decode_NDArray(n,a):v.isArray(n)?function(){const e=[];for(const t of n)e.push(i(t));return e}():v.isPlainObject(n)?function(e){const t={};for(var[n,r]of g.entries(e))t[n]=i(r);return t}(n):n}(e)}static _initialize_references_json(e,t,n,r){const o=new Map;for(const{id:s,attributes:l}of e){const e=!t.has(s),c=(e?n:t).get(s),i=M._resolve_refs(l,t,n,r);c.setv(i,{silent:!0}),o.set(s,{instance:c,is_new:e})}const s=[],l=new Set;function c(e){if(e instanceof f.HasProps){if(o.has(e.id)&&!l.has(e.id)){l.add(e.id);const{instance:t,is_new:n}=o.get(e.id),{attributes:r}=t;for(const e of g.values(r))c(e);n&&(t.finalize(),s.push(t))}}else if(v.isArray(e))for(const i of e)c(i);else if(v.isPlainObject(e))for(const a of g.values(e))c(a)}for(const e of o.values())c(e.instance);for(const e of s)e.connect_signals()}static _event_for_attribute_change(e,t,n,r,i){if(r.get_model_by_id(e.id).property(t).syncable){t={kind:"ModelChanged",model:{id:e.id},attr:t,new:n};return f.HasProps._json_record_references(r,n,i,{recursive:!0}),t}return null}static _events_to_sync_objects(e,t,n,r){const i=Object.keys(e.attributes),a=Object.keys(t.attributes),o=m.difference(i,a),s=m.difference(a,i),l=m.intersection(i,a),c=[];for(const e of o)h.logger.warn(`Server sent key ${e} but we don't seem to have it in our JSON`);for(const i of s){const a=t.attributes[i];c.push(M._event_for_attribute_change(e,i,a,n,r))}for(const i of l){const a=e.attributes[i],o=t.attributes[i];null==a&&null==o||null!=a&&null!=o&&y.is_equal(a,o)||c.push(M._event_for_attribute_change(e,i,o,n,r))}return c.filter(e=>null!=e)}static _compute_patch_since_json(e,t){const n=t.to_json(!1);function r(e){const t=new Map;for(const n of e.roots.references)t.set(n.id,n);return t}const i=r(e),a=new Map,o=[];for(const t of e.roots.root_ids)a.set(t,i.get(t)),o.push(t);const s=r(n),l=new Map,c=[];for(const e of n.roots.root_ids)l.set(e,s.get(e)),c.push(e);if(o.sort(),c.sort(),0<m.difference(o,c).length||0<m.difference(c,o).length)throw new Error("Not implemented: computing add/remove of document roots");var u=new Set;let d=[];for(const e of t._all_models.keys())if(i.has(e)){const n=M._events_to_sync_objects(i.get(e),s.get(e),t,u);d=d.concat(n)}const h=new p.Serializer({include_defaults:!1});return h.to_serializable([...u]),{references:[...h.definitions],events:d}}to_json_string(e=!0){return JSON.stringify(this.to_json(e))}to_json(e=!0){const t=new p.Serializer({include_defaults:e}),n=t.to_serializable(this._roots);return{version:d.version,title:this._title,roots:{root_ids:n.map(e=>e.id),references:[...t.definitions]}}}static from_json_string(e){e=JSON.parse(e);return M.from_json(e)}static from_json(e){h.logger.debug("Creating Document from JSON");const t=e.version,n=-1!==t.indexOf("+")||-1!==t.indexOf("-"),r=`Library versions: JS (${d.version}) / Python (${t})`;n||d.version.replace(/-(dev|rc)\./,"$1")==t?h.logger.debug(r):(h.logger.warn("JS/Python version mismatch"),h.logger.warn(r));var i=new u.ModelResolver;null!=e.defs&&T.resolve_defs(e.defs,i);const a=e.roots,o=a.root_ids,s=a.references,l=M._instantiate_references_json(s,new Map,i);M._initialize_references_json(s,new Map,l,new Map);const c=new M({resolver:i});for(const e of o){const t=l.get(e);null!=t&&c.add_root(t)}return c.set_title(e.title),c}replace_with_json(e){M.from_json(e).destructively_move(this)}create_json_patch_string(e){return JSON.stringify(this.create_json_patch(e))}create_json_patch(e){for(const t of e)if(t.document!=this)throw new Error("Cannot create a patch using events from a different document");const t=new p.Serializer,n=t.to_serializable(e);for(const e of this._all_models.values())t.remove_def(e);return{events:n,references:[...t.definitions]}}apply_json_patch(t,n=new Map,r){const i=t.references,e=t.events,a=M._instantiate_references_json(i,this._all_models,this._resolver);n instanceof Map||(n=new Map(n));for(const t of e)switch(t.kind){case"RootAdded":case"RootRemoved":case"ModelChanged":{const n=t.model.id,r=this._all_models.get(n);if(null!=r)a.set(n,r);else if(!a.has(n))throw h.logger.warn(`Got an event for unknown model ${t.model}"`),new Error("event model wasn't known");break}}const o=new Map(this._all_models),s=new Map;for(const[t,n]of a)o.has(t)||s.set(t,n);M._initialize_references_json(i,o,s,n);for(const t of e)switch(t.kind){case"MessageSent":{const{msg_type:r,msg_data:i}=t;let e;if(void 0===i){if(1!=n.size)throw new Error("expected exactly one buffer");{const[[,t]]=n;e=t}}else e=M._resolve_refs(i,o,s,n);this._trigger_on_message(r,e);break}case"ModelChanged":{const i=t.model.id,e=this._all_models.get(i);if(null==e)throw new Error(`Cannot apply patch to ${i} which is not in the document`);const a=t.attr,h=M._resolve_refs(t.new,o,s,n);e.setv({[a]:h},{setter_id:r});break}case"ColumnDataChanged":{const i=t.column_source.id,e=this._all_models.get(i);if(null==e)throw new Error(`Cannot stream to ${i} which is not in the document`);const a=M._resolve_refs(t.new,new Map,new Map,n);if(null!=t.cols)for(const t in e.data)t in a||(a[t]=e.data[t]);e.setv({data:a},{setter_id:r,check_eq:!1});break}case"ColumnsStreamed":{const n=t.column_source.id,i=this._all_models.get(n);if(null==i)throw new Error(`Cannot stream to ${n} which is not in the document`);if(!(i instanceof x.ColumnDataSource))throw new Error("Cannot stream to non-ColumnDataSource");const e=t.data,a=t.rollover;i.stream(e,a,r);break}case"ColumnsPatched":{const n=t.column_source.id,i=this._all_models.get(n);if(null==i)throw new Error(`Cannot patch ${n} which is not in the document`);if(!(i instanceof x.ColumnDataSource))throw new Error("Cannot patch non-ColumnDataSource");const e=t.patches;i.patch(e,r);break}case"RootAdded":{const n=t.model.id,i=a.get(n);this.add_root(i,r);break}case"RootRemoved":{const n=t.model.id,i=a.get(n);this.remove_root(i,r);break}case"TitleChanged":this.set_title(t.title,r);break;default:throw new Error("Unknown patch event "+JSON.stringify(t))}}}n.Document=M,M.__name__="Document"},function(e,t,r,n,i){n();const a=e(1),o=e(8),s=e(13),l=e(14);r.overrides={};const c=new Map;r.Models=e=>{var t=r.Models.get(e);if(null!=t)return t;throw new Error(`Model '${e}' does not exist. This could be due to a widget or a custom model not being registered before first usage.`)},r.Models.get=e=>{var t;return null!==(t=r.overrides[e])&&void 0!==t?t:c.get(e)},r.Models.register=(e,t)=>{r.overrides[e]=t},r.Models.unregister=e=>{delete r.overrides[e]},r.Models.register_models=(e,t=!1,n)=>{var r;if(null!=e)for(const i of o.isArray(e)?e:s.values(e))if(r=i,o.isObject(r)&&r.prototype instanceof l.HasProps){const e=i.__qualified__;t||!c.has(e)?c.set(e,i):null!=n?n(e):console.warn(`Model '${e}' was already registered`)}},r.register_models=r.Models.register_models,r.Models.registered_names=()=>[...c.keys()];class u{constructor(){this._known_models=new Map}get(e,t){var n=null!==(n=r.Models.get(e))&&void 0!==n?n:this._known_models.get(e);if(null!=n)return n;if(void 0!==t)return t;throw new Error(`Model '${e}' does not exist. This could be due to a widget or a custom model not being registered before first usage.`)}register(e){var t=e.__qualified__;null==this.get(t,null)?this._known_models.set(t,e):console.warn(`Model '${t}' was already registered with this resolver`)}}(r.ModelResolver=u).__name__="ModelResolver";var d=a.__importStar(e(38));r.register_models(d)},function(e,t,n,r,i){r();const a=e(9),o=Object.prototype.toString;function s(e){return!0===e||!1===e||"[object Boolean]"===o.call(e)}function l(e){return"[object Number]"===o.call(e)}function c(e){return"[object String]"===o.call(e)}function u(e){var t=typeof e;return"function"==t||"object"==t&&!!e}function d(e){return u(e)&&void 0!==e[Symbol.iterator]}n.isBoolean=s,n.isNumber=l,n.isInteger=function(e){return l(e)&&Number.isInteger(e)},n.isString=c,n.isPrimitive=function(e){return null===e||s(e)||l(e)||c(e)},n.isFunction=function(e){return"[object Function]"===o.call(e)},n.isArray=function(e){return Array.isArray(e)},n.isArrayOf=function(e,t){return a.every(e,t)},n.isArrayableOf=function(n,r){for(let e=0,t=n.length;e<t;e++)if(!r(n[e]))return!1;return!0},n.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},n.isObject=u,n.isPlainObject=function(e){return u(e)&&(null==e.constructor||e.constructor===Object)},n.isIterable=d,n.isArrayable=function(e){return d(e)&&"length"in e}},function(e,t,n,r,i){r();const a=e(10),c=e(11),o=e(12);i("map",o.map),i("reduce",o.reduce),i("min",o.min),i("min_by",o.min_by),i("max",o.max),i("max_by",o.max_by),i("sum",o.sum),i("cumsum",o.cumsum),i("every",o.every),i("some",o.some),i("find",o.find),i("find_last",o.find_last),i("find_index",o.find_index),i("find_last_index",o.find_last_index),i("sorted_index",o.sorted_index),i("is_empty",o.is_empty);const s=Array.prototype.slice;function l(e){return s.call(e)}function u(e){return[].concat(...e)}function d(e,t){return-1!==e.indexOf(t)}function h(t,e,n=1){c.assert(0<n,"'step' must be a positive number"),null==e&&(e=t,t=0);const{max:r,ceil:i,abs:a}=Math,o=t<=e?n:-n,s=r(i(a(e-t)/n),0),l=new Array(s);for(let e=0;e<s;e++,t+=o)l[e]=t;return l}n.head=function(e){return e[0]},n.tail=function(e){return e[e.length-1]},n.last=function(e){return e[e.length-1]},n.copy=l,n.concat=u,n.includes=d,n.contains=d,n.nth=function(e,t){return e[0<=t?t:e.length+t]},n.zip=function(...n){if(0==n.length)return[];const e=o.min(n.map(e=>e.length)),r=n.length,i=new Array(e);for(let t=0;t<e;t++){i[t]=new Array(r);for(let e=0;e<r;e++)i[t][e]=n[e][t]}return i},n.unzip=function(n){const r=n.length,i=o.min(n.map(e=>e.length)),a=Array(i);for(let e=0;e<i;e++)a[e]=new Array(r);for(let t=0;t<r;t++)for(let e=0;e<i;e++)a[e][t]=n[t][e];return a},n.range=h,n.linspace=function(t,e,n=100){const r=(e-t)/(n-1),i=new Array(n);for(let e=0;e<n;e++)i[e]=t+r*e;return i},n.transpose=function(n){const r=n.length,e=n[0].length,i=[];for(let t=0;t<e;t++){i[t]=[];for(let e=0;e<r;e++)i[t][e]=n[e][t]}return i},n.argmin=function(t){return o.min_by(h(t.length),e=>t[e])},n.argmax=function(t){return o.max_by(h(t.length),e=>t[e])},n.sort_by=function(e,n){const t=e.map((e,t)=>({value:e,index:t,key:n(e)}));return t.sort((e,t)=>{var n=e.key,r=t.key;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),t.map(e=>e.value)},n.uniq=function(e){const t=new Set;for(const n of e)t.add(n);return[...t]},n.uniq_by=function(e,t){const n=[],r=[];for(const i of e){const e=t(i);d(r,e)||(r.push(e),n.push(i))}return n},n.union=function(...e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return[...t]},n.intersection=function(e,...t){const n=[];e:for(const r of e)if(!d(n,r)){for(const e of t)if(!d(e,r))continue e;n.push(r)}return n},n.difference=function(e,...t){const n=u(t);return e.filter(e=>!d(n,e))},n.remove_at=function(e,t){const n=l(e);return n.splice(t,1),n},n.remove_by=function(t,n){for(let e=0;e<t.length;)n(t[e])?t.splice(e,1):e++},n.shuffle=function(t){const n=t.length,r=new Array(n);for(let e=0;e<n;e++){const n=a.randomIn(0,e);n!==e&&(r[e]=r[n]),r[n]=t[e]}return r},n.pairwise=function(t,n){const r=t.length,i=new Array(r-1);for(let e=0;e<r-1;e++)i[e]=n(t[e],t[e+1]);return i},n.reversed=function(t){const n=t.length,r=new Array(n);for(let e=0;e<n;e++)r[n-e-1]=t[e];return r},n.repeat=function(t,n){const r=new Array(n);for(let e=0;e<n;e++)r[e]=t;return r}},function(e,t,n,r,i){r();const{PI:a}=Math;function o(e){if(0==e)return 0;for(;e<=0;)e+=2*a;for(;e>2*a;)e-=2*a;return e}function s(e,t){return o(e-t)}function l(){return Math.random()}function c(e){switch(e){case"deg":return a/180;case"rad":return 1;case"grad":return a/200;case"turn":return 2*a}}n.angle_norm=o,n.angle_dist=s,n.angle_between=function(e,t,n,r=!1){var i=s(t,n);if(0==i)return!1;if(i==2*a)return!0;e=o(e),i=s(t,e)<=i&&s(e,n)<=i;return r?!i:i},n.random=l,n.randomIn=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},n.atan2=function(e,t){return Math.atan2(t[1]-e[1],t[0]-e[0])},n.radians=function(e){return e*(a/180)},n.degrees=function(e){return e/(a/180)},n.resolve_angle=function(e,t){return-c(t)*e},n.to_radians_coeff=c,n.rnorm=function(e,t){let n,r;for(;n=l(),r=l(),r=(2*r-1)*Math.sqrt(1/Math.E*2),!(-4*n*n*Math.log(n)>=r*r););return e+t*(r/n)},n.clamp=function(e,t,n){return e<t?t:n<e?n:e},n.log=function(e,t=Math.E){return Math.log(e)/Math.log(t)}},function(e,t,n,r,i){r();class a extends Error{}(n.AssertionError=a).__name__="AssertionError",n.assert=function(e,t){if(!(!0===e||!1!==e&&e()))throw new a(null!=t?t:"Assertion failed")},n.unreachable=function(){throw new Error("unreachable code")}},function(e,t,n,r,i){r();const o=e(10);function a(t,n,r,...e){var i=t.length;n<0&&(n+=i),n<0?n=0:i<n&&(n=i),null==r||i-n<r?r=i-n:r<0&&(r=0);const a=i-r+e.length,o=new t.constructor(a);let s=0;for(;s<n;s++)o[s]=t[s];for(const t of e)o[s++]=t;for(let e=n+r;e<i;e++)o[s++]=t[e];return o}function s(e,t){return a(e,t,e.length-t)}function l(t,n){const r=t.length,i=new t.constructor(r);for(let e=0;e<r;e++)i[e]=n(t[e],e,t);return i}function c(e,t,n){var r=e.length;if(void 0===n&&0==r)throw new Error("can't reduce an empty array without an initial value");let i,a;for(a=void 0===n?(i=e[0],1):(i=n,0);a<r;a++)i=t(i,e[a],a,e);return i}function u(i){return function(e,t){var n=e.length;let r=0<i?0:n-1;for(;0<=r&&r<n;r+=i)if(t(e[r]))return r;return-1}}function d(e,t){let n=0,r=e.length;for(;n<r;){var i=Math.floor((n+r)/2);e[i]<t?n=i+1:r=i}return n}function h(e,t){if(e<t[0])return-1;if(e>t[t.length-1])return t.length;let n=0,r=t.length-1;for(;r-n!=1;){var i=n+Math.floor((r-n)/2);e>=t[i]?n=i:r=i}return n}n.is_empty=function(e){return 0==e.length},n.copy=function(e){return Array.isArray(e)?e.slice():new e.constructor(e)},n.splice=a,n.head=s,n.insert=function(e,t,n){return a(e,n,0,t)},n.append=function(e,t){return a(e,e.length,0,t)},n.prepend=function(e,t){return a(e,0,0,t)},n.indexOf=function(n,r){for(let e=0,t=n.length;e<t;e++)if(n[e]===r)return e;return-1},n.subselect=function(t,n){const r=n.length,i=new t.constructor(r);for(let e=0;e<r;e++)i[e]=t[n[e]];return i},n.mul=function(t,n,e){const r=t.length,i=null!=e?e:new t.constructor(r);for(let e=0;e<r;e++)i[e]=t[e]*n;return i},n.map=l,n.inplace_map=function(t,n,e){const r=t.length,i=null!=e?e:t;for(let e=0;e<r;e++)i[e]=n(t[e],e)},n.filter=function(t,n){const r=t.length,i=new t.constructor(r);let a=0;for(let e=0;e<r;e++){const r=t[e];n(r,e,t)&&(i[a++]=r)}return s(i,a)},n.reduce=c,n.min=function(n){let r,i=1/0;for(let e=0,t=n.length;e<t;e++)r=n[e],!isNaN(r)&&r<i&&(i=r);return i},n.max=function(n){let r,i=-1/0;for(let e=0,t=n.length;e<t;e++)r=n[e],!isNaN(r)&&r>i&&(i=r);return i},n.minmax=function(n){let r,i=1/0,a=-1/0;for(let e=0,t=n.length;e<t;e++)r=n[e],isNaN(r)||(r<i&&(i=r),r>a&&(a=r));return[i,a]},n.min_by=function(n,r){if(0==n.length)throw new Error("min_by() called with an empty array");let i=n[0],a=r(i);for(let e=1,t=n.length;e<t;e++){var o=n[e],s=r(o);s<a&&(i=o,a=s)}return i},n.max_by=function(n,r){if(0==n.length)throw new Error("max_by() called with an empty array");let i=n[0],a=r(i);for(let e=1,t=n.length;e<t;e++){var o=n[e],s=r(o);s>a&&(i=o,a=s)}return i},n.sum=function(n){let r=0;for(let e=0,t=n.length;e<t;e++)r+=n[e];return r},n.cumsum=function(e){const r=new e.constructor(e.length);return c(e,(e,t,n)=>r[n]=e+t,0),r},n.every=function(n,r){for(let e=0,t=n.length;e<t;e++)if(!r(n[e]))return!1;return!0},n.some=function(n,r){for(let e=0,t=n.length;e<t;e++)if(r(n[e]))return!0;return!1},n.index_of=function(n,r){for(let e=0,t=n.length;e<t;e++)if(n[e]===r)return e;return-1},n.find_index=u(1),n.find_last_index=u(-1),n.find=function(e,t){t=n.find_index(e,t);return-1==t?void 0:e[t]},n.find_last=function(e,t){t=n.find_last_index(e,t);return-1==t?void 0:e[t]},n.sorted_index=d,n.bin_counts=function(t,n){const r=n.length-1,i=Array(r).fill(0);for(let e=0;e<t.length;e++){var a=d(n,t[e]);i[o.clamp(a-1,0,r-1)]+=1}return i},n.interpolate=function(t,n,r){const i=t.length,a=new Array(i);for(let e=0;e<i;e++){const i=t[e];if(isNaN(i))a[e]=i;else{var o=h(i,n);if(-1==o)a[e]=r[0];else if(o==n.length)a[e]=r[r.length-1];else if(o==n.length-1||n[o]==i)a[e]=r[o];else{const t=n[o],s=r[o],l=n[o+1],c=r[o+1];a[e]=function(e,t,n,r,i){var a=(i-n)/(r-t);let o=a*(e-t)+n;return isFinite(o)||(o=a*(e-r)+i,isFinite(o)||n!=i||(o=n)),o}(i,t,s,l,c)}}}return a},n.left_edge_index=h,n.norm=function(e,t,n){const r=n-t;return l(e,e=>(e-t)/r)}},function(e,t,n,r,i){r();const o=e(9),{hasOwnProperty:s}=Object.prototype;function a(e){return Object.keys(e).length}n.keys=Object.keys,n.values=Object.values,n.entries=Object.entries,n.extend=Object.assign,n.clone=function(e){return Object.assign({},e)},n.merge=function(e,t){const n=Object.create(Object.prototype),r=o.concat([Object.keys(e),Object.keys(t)]);for(const i of r){const r=s.call(e,i)?e[i]:[],a=s.call(t,i)?t[i]:[];n[i]=o.union(r,a)}return n},n.size=a,n.isEmpty=function(e){return 0==a(e)},n.to_object=function(e){const t={};for(var[n,r]of e)t[n]=r;return t}},function(e,t,n,r,i){r();const a=e(1),o=e(15),s=e(17),l=a.__importStar(e(18)),c=a.__importStar(e(21)),u=e(34),d=e(13),h=e(8),f=e(26),p=e(30),m=e(35),g=e(26),_=e(36),y=e(37),v=a.__importStar(e(21));class b extends o.Signalable(){constructor(t={}){var e,n;super(),this._subtype=void 0,this.document=null,this.destroyed=new o.Signal0(this,"destroyed"),this.change=new o.Signal0(this,"change"),this.transformchange=new o.Signal0(this,"transformchange"),this.exprchange=new o.Signal0(this,"exprchange"),this.properties={},this._pending=!1,this._changing=!1;const r=t instanceof Map?t.get.bind(t):e=>t[e];this.id=null!==(e=r("id"))&&void 0!==e?e:u.uniqueId();for(const[t,{type:i,default_value:e,options:a}]of d.entries(this._props))i instanceof l.PropertyAlias?Object.defineProperty(this.properties,t,{get:()=>this.properties[i.attr],configurable:!1,enumerable:!1}):(n=i instanceof c.Kind?new l.PrimitiveProperty(this,t,i,e,r(t),a):new i(this,t,c.Any,e,r(t),a),this.properties[t]=n);null!==(e=r("__deferred__"))&&void 0!==e&&e||(this.finalize(),this.connect_signals())}get is_syncable(){return!0}set type(e){console.warn("prototype.type = 'ModelName' is deprecated, use static __name__ instead"),this.constructor.__name__=e}get type(){return this.constructor.__qualified__}static get __qualified__(){var{__module__:e,__name__:t}=this;return null!=e?`${e}.${t}`:t}static get[Symbol.toStringTag](){return this.__name__}static init_HasProps(){this.prototype._props={},this.prototype._mixins=[]}static _fix_default(e,t){if(void 0===e||h.isFunction(e))return e;if(h.isPrimitive(e))return()=>e;{const t=new y.Cloner;return()=>t.clone(e)}}static define(e){for(const[t,n]of d.entries(h.isFunction(e)?e(v):e)){if(null!=this.prototype._props[t])throw new Error(`attempted to redefine property '${this.prototype.type}.${t}'`);if(null!=this.prototype[t])throw new Error(`attempted to redefine attribute '${this.prototype.type}.${t}'`);Object.defineProperty(this.prototype,t,{get(){return this.properties[t].get_value()},set(e){return this.setv({[t]:e}),this},configurable:!1,enumerable:!0});const[e,r,i={}]=n,a={type:e,default_value:this._fix_default(r,t),options:i},o=Object.assign({},this.prototype._props);o[t]=a,this.prototype._props=o}}static internal(e){const t={};for(var[n,r]of d.entries(h.isFunction(e)?e(v):e)){const[e,i,a={}]=r;t[n]=[e,i,Object.assign(Object.assign({},a),{internal:!0})]}this.define(t)}static mixins(e){const t={},n=[];for(const r of h.isArray(e)?e:[e])if(h.isArray(r)){const[e,i]=r;d.extend(t,function(e,t){const n={};for(var[r,i]of d.entries(t))n[e+r]=i;return n}(e,i)),n.push([e,i])}else{const e=r;d.extend(t,e),n.push(["",e])}this.define(t),this.prototype._mixins=[...this.prototype._mixins,...n]}static override(e){for(var[t,n]of d.entries(e)){const e=this._fix_default(n,t),r=this.prototype._props[t];if(null==r)throw new Error(`attempted to override nonexistent '${this.prototype.type}.${t}'`);const i=Object.assign({},this.prototype._props);i[t]=Object.assign(Object.assign({},r),{default_value:e}),this.prototype._props=i}}toString(){return`${this.type}(${this.id})`}property(e){var t=this.properties[e];if(null!=t)return t;throw new Error(`unknown property ${this.type}.${e}`)}get attributes(){const e={};for(const t of this)e[t.attr]=t.get_value();return e}[y.clone](e){const t=new Map;for(const n of this)n.dirty&&t.set(n.attr,e.clone(n.get_value()));return new this.constructor(t)}[g.equals](e,t){for(const n of this){const r=e.property(n.attr);if(t.eq(n.get_value(),r.get_value()))return!1}return!0}[_.pretty](e){const t=e.token,n=[];for(const i of this){var r;i.dirty&&(r=i.get_value(),n.push(`${i.attr}${t(":")} ${e.to_string(r)}`))}return`${this.constructor.__qualified__}${t("(")}${t("{")}${n.join(`${t(",")} `)}${t("}")}${t(")")}`}[p.serialize](e){const t=this.ref();e.add_ref(this,t);const n=this.struct();for(const t of this)t.syncable&&(e.include_defaults||t.dirty)&&(n.attributes[t.attr]=e.to_serializable(t.get_value()));return e.add_def(this,n),t}finalize(){for(const n of this){var e,t;(n instanceof l.VectorSpec||n instanceof l.ScalarSpec)&&(null!=(t=n.get_value())&&({transform:e,expr:t}=t,null!=e&&this.connect(e.change,()=>this.transformchange.emit()),null!=t&&this.connect(t.change,()=>this.exprchange.emit())))}this.initialize()}initialize(){}connect_signals(){}disconnect_signals(){o.Signal.disconnectReceiver(this)}destroy(){this.disconnect_signals(),this.destroyed.emit()}clone(){return(new y.Cloner).clone(this)}_setv(e,t){const n=t.check_eq,r=[],i=this._changing;this._changing=!0;for(const[t,i]of e)!1!==n&&f.is_equal(t.get_value(),i)||(t.set_value(i),r.push(t));0<r.length&&(this._pending=!0);for(const e of r)e.change.emit();if(!i){if(!t.no_change)for(;this._pending;)this._pending=!1,this.change.emit();this._pending=!1,this._changing=!1}}setv(e,t={}){const n=d.entries(e);if(0!=n.length)if(!0!==t.silent){const r=new Map,i=new Map;for(const[e,t]of n){const n=this.properties[e];r.set(n,t),i.set(n,n.get_value())}this._setv(r,t);const{document:a}=this;if(null!=a){const e=[];for(const[t,n]of i)e.push([t,n,t.get_value()]);for(const[,t,n]of e)if(this._needs_invalidate(t,n)){a._invalidate_all_models();break}this._push_changes(e,t)}}else for(const[e,t]of n)this.properties[e].set_value(t)}getv(e){return this.property(e).get_value()}ref(){return{id:this.id}}struct(){const e={type:this.type,id:this.id,attributes:{}};return null!=this._subtype&&(e.subtype=this._subtype),e}set_subtype(e){this._subtype=e}*[Symbol.iterator](){yield*d.values(this.properties)}*syncable_properties(){for(const e of this)e.syncable&&(yield e)}serializable_attributes(){const e={};for(const t of this.syncable_properties())e[t.attr]=t.get_value();return e}static _json_record_references(e,t,n,r){var{recursive:i}=r;if(s.is_ref(t)){const r=e.get_model_by_id(t.id);null==r||n.has(r)||b._value_record_references(r,n,{recursive:i})}else if(h.isArray(t))for(const r of t)b._json_record_references(e,r,n,{recursive:i});else if(h.isPlainObject(t))for(const r of d.values(t))b._json_record_references(e,r,n,{recursive:i})}static _value_record_references(e,t,n){var{recursive:r}=n;if(e instanceof b){if(!t.has(e)&&(t.add(e),r))for(const n of e.syncable_properties()){const e=n.get_value();b._value_record_references(e,t,{recursive:r})}}else if(h.isArray(e))for(const n of e)b._value_record_references(n,t,{recursive:r});else if(h.isPlainObject(e))for(const n of d.values(e))b._value_record_references(n,t,{recursive:r})}references(){var e=new Set;return b._value_record_references(this,e,{recursive:!0}),e}_doc_attached(){}_doc_detached(){}attach_document(e){if(null!=this.document&&this.document!=e)throw new Error("models must be owned by only a single document");this.document=e,this._doc_attached()}detach_document(){this._doc_detached(),this.document=null}_needs_invalidate(e,t){const n=new Set;b._value_record_references(t,n,{recursive:!1});const r=new Set;b._value_record_references(e,r,{recursive:!1});for(const e of n)if(!r.has(e))return!0;for(const e of r)if(!n.has(e))return!0;return!1}_push_changes(e,t={}){if(this.is_syncable){const{document:n}=this;if(null!=n){const{setter_id:r}=t,i=[];for(const[t,a,o]of e)t.syncable&&i.push(new m.ModelChangedEvent(n,this,t.attr,a,o,r));if(0!=i.length){let e;1==i.length?[e]=i:e=new m.DocumentEventBatch(n,i,r),n._trigger_on_change(e)}}}}on_change(e,t){for(const n of h.isArray(e)?e:[e])this.connect(n.change,t)}}n.HasProps=b,b.init_HasProps()},function(e,t,n,r,i){r();const a=e(16),o=e(9);class s{constructor(e,t){this.sender=e,this.name=t}connect(e,t=null){f.has(this.sender)||f.set(this.sender,[]);const n=f.get(this.sender);if(null!=m(n,this,e,t))return!1;var r=null!=t?t:e;p.has(r)||p.set(r,[]);const i=p.get(r),a={signal:this,slot:e,context:t};return n.push(a),i.push(a),!0}disconnect(e,t=null){var n=f.get(this.sender);if(null==n||0===n.length)return!1;const r=m(n,this,e,t);if(null==r)return!1;e=null!=t?t:e,e=p.get(e);return r.signal=null,_(n),_(e),!0}emit(e){var t=null!==(t=f.get(this.sender))&&void 0!==t?t:[];for(const{signal:n,slot:r,context:i}of t)n===this&&r.call(i,e,this.sender)}}(n.Signal=s).__name__="Signal";class l extends s{emit(){super.emit(void 0)}}function c(e,t){var n=f.get(e);if(null!=n&&0!==n.length){t=p.get(t);if(null!=t&&0!==t.length){for(const r of t){if(null==r.signal)return;r.signal.sender===e&&(r.signal=null)}_(n),_(t)}}}function u(e){var t;const n=f.get(e);if(null!=n&&0!==n.length){for(const e of n){if(null==e.signal)return;const n=null!==(t=e.context)&&void 0!==t?t:e.slot;e.signal=null,_(p.get(n))}_(n)}}function d(e,t,n){const r=p.get(e);if(null!=r&&0!==r.length){for(const e of r){if(null==e.signal)return;if(null==t||e.slot==t){const r=e.signal.sender;null!=n&&n.has(r)||(e.signal=null,_(f.get(r)))}}_(r)}}function h(e){var t=f.get(e);if(null!=t&&0!==t.length){for(const n of t)n.signal=null;_(t)}e=p.get(e);if(null!=e&&0!==e.length){for(const n of e)n.signal=null;_(e)}}(n.Signal0=l).__name__="Signal0",(e=s||(n.Signal=s={})).disconnect_between=c,e.disconnect_sender=u,e.disconnect_receiver=d,e.disconnect_all=h,e.disconnectBetween=c,e.disconnectSender=u,e.disconnectReceiver=d,e.disconnectAll=h,n.Signalable=function(){return class{connect(e,t){return e.connect(t,this)}disconnect(e,t){return e.disconnect(t,this)}}};const f=new WeakMap,p=new WeakMap;function m(e,t,n,r){return o.find(e,e=>e.signal===t&&e.slot===n&&e.context===r)}const g=new Set;function _(e){0===g.size&&(async()=>{await a.defer(),function(){for(const e of g)o.remove_by(e,e=>null==e.signal);g.clear()}()})(),g.add(e)}},function(e,t,n,r,i){r();const a=new MessageChannel,o=new Map;a.port1.onmessage=e=>{const t=e.data,n=o.get(t);if(null!=n)try{n()}finally{o.delete(t)}};let s=1;n.defer=function(){return new Promise(e=>{var t=s++;o.set(t,e),a.port2.postMessage(t)})}},function(e,t,n,r,i){r();const a=e(8),o=e(13);n.is_ref=function(e){if(a.isPlainObject(e)){e=o.keys(e);return 1==e.length&&"id"==e[0]}return!1}},function(e,t,n,r,i){r(),n.YCoordinateSeqSeqSeqSpec=n.XCoordinateSeqSeqSeqSpec=n.YCoordinateSeqSpec=n.XCoordinateSeqSpec=n.YCoordinateSpec=n.XCoordinateSpec=n.CoordinateSeqSeqSeqSpec=n.CoordinateSeqSpec=n.CoordinateSpec=n.BaseCoordinateSpec=n.NumberUnitsSpec=n.UnitsSpec=n.DataSpec=n.VectorSpec=n.TextBaselineScalar=n.TextAlignScalar=n.FontStyleScalar=n.FontSizeScalar=n.FontScalar=n.LineDashScalar=n.LineCapScalar=n.LineJoinScalar=n.ArrayScalar=n.NullStringScalar=n.StringScalar=n.NumberScalar=n.ColorScalar=n.AnyScalar=n.ScalarSpec=n.VerticalAlign=n.UpdateMode=n.TooltipAttachment=n.TickLabelOrientation=n.TextureRepetition=n.TextBaseline=n.TextAlign=n.TapBehavior=n.StepMode=n.StartEnd=n.SpatialUnits=n.Sort=n.SizingMode=n.Side=n.RoundingFunction=n.ResetPolicy=n.RenderMode=n.RenderLevel=n.RadiusDimension=n.PointPolicy=n.Place=void 0,n.TextBaselineSpec=n.TextAlignSpec=n.FontStyleSpec=n.FontSizeSpec=n.FontSpec=n.LineDashSpec=n.LineCapSpec=n.LineJoinSpec=n.MarkerSpec=n.ArraySpec=n.NullStringSpec=n.StringSpec=n.AnySpec=n.NDArraySpec=n.ColorSpec=n.NumberSpec=n.BooleanSpec=n.ScreenDistanceSpec=n.NullDistanceSpec=n.DistanceSpec=n.AngleSpec=void 0;const a=e(1),s=e(15),l=e(19),o=a.__importStar(e(20)),_=e(24),c=e(9),u=e(12),d=e(10),y=e(22),v=e(27),h=e(8),f=e(28),b=e(29),p=e(33);function m(t){try{return JSON.stringify(t)}catch(e){return t.toString()}}function g(e){return h.isPlainObject(e)&&(void 0===e.value?0:1)+(void 0===e.field?0:1)+(void 0===e.expr?0:1)==1}i("Uniform",p.Uniform),i("UniformScalar",p.UniformScalar),i("UniformVector",p.UniformVector),n.isSpec=g;class x{constructor(e,t,n,r,i,a={}){let o;if(this.obj=e,this.attr=t,this.kind=n,this.default_value=r,this._dirty=!1,this.change=new s.Signal0(this.obj,"change"),this.internal=null!==(n=a.internal)&&void 0!==n&&n,this.on_update=a.on_update,void 0!==i)o=i,this._dirty=!0;else{const t=this._default_override();if(void 0!==t)o=t;else{if(void 0===r)return void(this.spec={value:null});o=r(e)}}this._update(o)}get is_value(){return void 0!==this.spec.value}get syncable(){return!this.internal}get_value(){return this.spec.value}set_value(e){this._update(e),this._dirty=!0}_default_override(){}get dirty(){return this._dirty}_update(e){var t;this.validate(e),this.spec={value:e},null===(t=this.on_update)||void 0===t||t.call(this,e,this.obj)}toString(){return`Prop(${this.obj}.${this.attr}, spec: ${m(this.spec)})`}normalize(e){return e}validate(e){if(!this.valid(e))throw new Error(`${this.obj}.${this.attr} given invalid value: ${m(e)}`)}valid(e){return this.kind.valid(e)}_value(e=!0){if(!this.is_value)throw new Error("attempted to retrieve property value for property without value specification");let t=this.normalize([this.spec.value])[0];return null!=this.spec.transform&&e&&(t=this.spec.transform.compute(t)),t}}(n.Property=x).__name__="Property";class w{constructor(e){this.attr=e}}(n.PropertyAlias=w).__name__="PropertyAlias",n.Alias=function(e){return new w(e)};class T extends x{}(n.PrimitiveProperty=T).__name__="PrimitiveProperty";class A extends x{}(n.Any=A).__name__="Any";class k extends x{valid(e){return h.isArray(e)||h.isTypedArray(e)}}(n.Array=k).__name__="Array";class M extends x{valid(e){return h.isBoolean(e)}}(n.Boolean=M).__name__="Boolean";class S extends x{valid(e){return y.is_Color(e)}}(n.Color=S).__name__="Color";class E extends x{}(n.Instance=E).__name__="Instance";class C extends x{valid(e){return h.isNumber(e)}}(n.Number=C).__name__="Number";class L extends C{valid(e){return h.isNumber(e)&&(0|e)==e}}(n.Int=L).__name__="Int";class D extends C{}(n.Angle=D).__name__="Angle";class O extends C{valid(e){return h.isNumber(e)&&0<=e&&e<=1}}(n.Percent=O).__name__="Percent";class P extends x{valid(e){return h.isString(e)}}(n.String=P).__name__="String";class R extends x{valid(e){return null===e||h.isString(e)}}(n.NullString=R).__name__="NullString";class I extends P{}(n.FontSize=I).__name__="FontSize";class N extends P{_default_override(){return f.settings.dev?"Bokeh":void 0}}(n.Font=N).__name__="Font";class z extends x{valid(e){return h.isString(e)&&c.includes(this.enum_values,e)}}function F(e){return class extends z{get enum_values(){return[...e]}}}(n.EnumProperty=z).__name__="EnumProperty",n.Enum=F;class j extends z{get enum_values(){return[...o.Direction]}normalize(t){const n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)switch(t[e]){case"clock":n[e]=0;break;case"anticlock":n[e]=1}return n}}(n.Direction=j).__name__="Direction",n.Anchor=F(o.Anchor),n.AngleUnits=F(o.AngleUnits),n.BoxOrigin=F(o.BoxOrigin),n.ButtonType=F(o.ButtonType),n.CalendarPosition=F(o.CalendarPosition),n.Dimension=F(o.Dimension),n.Dimensions=F(o.Dimensions),n.Distribution=F(o.Distribution),n.FontStyle=F(o.FontStyle),n.HatchPatternType=F(o.HatchPatternType),n.HTTPMethod=F(o.HTTPMethod),n.HexTileOrientation=F(o.HexTileOrientation),n.HoverMode=F(o.HoverMode),n.LatLon=F(o.LatLon),n.LegendClickPolicy=F(o.LegendClickPolicy),n.LegendLocation=F(o.LegendLocation),n.LineCap=F(o.LineCap),n.LineJoin=F(o.LineJoin),n.LinePolicy=F(o.LinePolicy),n.Location=F(o.Location),n.Logo=F(o.Logo),n.MarkerType=F(o.MarkerType),n.MutedPolicy=F(o.MutedPolicy),n.Orientation=F(o.Orientation),n.OutputBackend=F(o.OutputBackend),n.PaddingUnits=F(o.PaddingUnits),n.Place=F(o.Place),n.PointPolicy=F(o.PointPolicy),n.RadiusDimension=F(o.RadiusDimension),n.RenderLevel=F(o.RenderLevel),n.RenderMode=F(o.RenderMode),n.ResetPolicy=F(o.ResetPolicy),n.RoundingFunction=F(o.RoundingFunction),n.Side=F(o.Side),n.SizingMode=F(o.SizingMode),n.Sort=F(o.Sort),n.SpatialUnits=F(o.SpatialUnits),n.StartEnd=F(o.StartEnd),n.StepMode=F(o.StepMode),n.TapBehavior=F(o.TapBehavior),n.TextAlign=F(o.TextAlign),n.TextBaseline=F(o.TextBaseline),n.TextureRepetition=F(o.TextureRepetition),n.TickLabelOrientation=F(o.TickLabelOrientation),n.TooltipAttachment=F(o.TooltipAttachment),n.UpdateMode=F(o.UpdateMode),n.VerticalAlign=F(o.VerticalAlign);class B extends x{get_value(){var{value:e,expr:t,transform:n}=this.spec;return null!=t||null!=n?this.spec:e}_update(e){g(e)?this.spec=e:this.spec={value:e},null!=this.spec.value&&this.validate(this.spec.value)}materialize(e){return e}scalar(e,t){return new p.UniformScalar(e,t)}uniform(t){var e;const{expr:n,value:r,transform:i}=this.spec,a=null!==(e=t.get_length())&&void 0!==e?e:1;if(null!=n){let e=n.compute(t);return null!=i&&(e=i.compute(e)),e=this.materialize(e),this.scalar(e,a)}{let e=r;return null!=i&&(e=i.compute(e)),e=this.materialize(e),this.scalar(e,a)}}}(n.ScalarSpec=B).__name__="ScalarSpec";class H extends B{}(n.AnyScalar=H).__name__="AnyScalar";class U extends B{}(n.ColorScalar=U).__name__="ColorScalar";class V extends B{}(n.NumberScalar=V).__name__="NumberScalar";class q extends B{}(n.StringScalar=q).__name__="StringScalar";class Y extends B{}(n.NullStringScalar=Y).__name__="NullStringScalar";class G extends B{}(n.ArrayScalar=G).__name__="ArrayScalar";class W extends B{}(n.LineJoinScalar=W).__name__="LineJoinScalar";class X extends B{}(n.LineCapScalar=X).__name__="LineCapScalar";class Z extends B{}(n.LineDashScalar=Z).__name__="LineDashScalar";class J extends B{_default_override(){return f.settings.dev?"Bokeh":void 0}}(n.FontScalar=J).__name__="FontScalar";class $ extends B{}(n.FontSizeScalar=$).__name__="FontSizeScalar";class Q extends B{}(n.FontStyleScalar=Q).__name__="FontStyleScalar";class K extends B{}(n.TextAlignScalar=K).__name__="TextAlignScalar";class ee extends B{}(n.TextBaselineScalar=ee).__name__="TextBaselineScalar";class te extends x{get_value(){return null===this.spec.value?null:this.spec}_update(e){g(e)?this.spec=e:this.spec={value:e},null!=this.spec.value&&this.validate(this.spec.value)}materialize(e){return e}v_materialize(e){return e}scalar(e,t){return new p.UniformScalar(e,t)}vector(e){return new p.UniformVector(e)}uniform(t){var e;const{field:n,expr:r,value:i,transform:a}=this.spec,o=null!==(e=t.get_length())&&void 0!==e?e:1;if(null!=n){let e=t.get_column(n);return null!=e?(null!=a&&(e=a.v_compute(e)),e=this.v_materialize(e),this.vector(e)):(l.logger.warn(`attempted to retrieve property array for nonexistent field '${n}'`),this.scalar(null,o))}if(null!=r){let e=r.v_compute(t);return null!=a&&(e=a.v_compute(e)),e=this.v_materialize(e),this.vector(e)}{let e=i;return null!=a&&(e=a.compute(e)),e=this.materialize(e),this.scalar(e,o)}}array(e){let t;var n=null!==(n=e.get_length())&&void 0!==n?n:1;if(null!=this.spec.field){const r=e.get_column(this.spec.field);if(null!=r)t=this.normalize(r);else{l.logger.warn(`attempted to retrieve property array for nonexistent field '${this.spec.field}'`);const e=new Float64Array(n);e.fill(NaN),t=e}}else if(null!=this.spec.expr)t=this.normalize(this.spec.expr.v_compute(e));else{const e=this._value(!1);if(h.isNumber(e)){const r=new Float64Array(n);r.fill(e),t=r}else t=c.repeat(e,n)}return null!=this.spec.transform&&(t=this.spec.transform.v_compute(t)),t}}(n.VectorSpec=te).__name__="VectorSpec";class ne extends te{}(n.DataSpec=ne).__name__="DataSpec";class re extends te{_update(e){super._update(e);var{units:e}=this.spec;if(null!=e&&!c.includes(this.valid_units,e))throw new Error(`units must be one of ${this.valid_units.join(", ")}; got: ${e}`)}get units(){var e;return null!==(e=this.spec.units)&&void 0!==e?e:this.default_units}set units(e){e!=this.default_units?this.spec.units=e:delete this.spec.units}}(n.UnitsSpec=re).__name__="UnitsSpec";class ie extends re{array(e){return new Float64Array(super.array(e))}}(n.NumberUnitsSpec=ie).__name__="NumberUnitsSpec";class ae extends ne{}(n.BaseCoordinateSpec=ae).__name__="BaseCoordinateSpec";class oe extends ae{}(n.CoordinateSpec=oe).__name__="CoordinateSpec";class se extends ae{}(n.CoordinateSeqSpec=se).__name__="CoordinateSeqSpec";class le extends ae{}(n.CoordinateSeqSeqSeqSpec=le).__name__="CoordinateSeqSeqSeqSpec";class ce extends oe{constructor(){super(...arguments),this.dimension="x"}}(n.XCoordinateSpec=ce).__name__="XCoordinateSpec";class ue extends oe{constructor(){super(...arguments),this.dimension="y"}}(n.YCoordinateSpec=ue).__name__="YCoordinateSpec";class de extends se{constructor(){super(...arguments),this.dimension="x"}}(n.XCoordinateSeqSpec=de).__name__="XCoordinateSeqSpec";class he extends se{constructor(){super(...arguments),this.dimension="y"}}(n.YCoordinateSeqSpec=he).__name__="YCoordinateSeqSpec";class fe extends le{constructor(){super(...arguments),this.dimension="x"}}(n.XCoordinateSeqSeqSeqSpec=fe).__name__="XCoordinateSeqSeqSeqSpec";class pe extends le{constructor(){super(...arguments),this.dimension="y"}}(n.YCoordinateSeqSeqSeqSpec=pe).__name__="YCoordinateSeqSeqSeqSpec";class me extends ie{get default_units(){return"rad"}get valid_units(){return[...o.AngleUnits]}materialize(e){return e*-d.to_radians_coeff(this.units)}v_materialize(e){var t=-d.to_radians_coeff(this.units),n=new Float32Array(e.length);return u.mul(e,t,n),n}array(e){throw new Error("not supported")}}(n.AngleSpec=me).__name__="AngleSpec";class ge extends ie{get default_units(){return"data"}get valid_units(){return[...o.SpatialUnits]}}(n.DistanceSpec=ge).__name__="DistanceSpec";class _e extends ge{materialize(e){return null!=e?e:NaN}}(n.NullDistanceSpec=_e).__name__="NullDistanceSpec";class ye extends ge{get default_units(){return"screen"}}(n.ScreenDistanceSpec=ye).__name__="ScreenDistanceSpec";class ve extends ne{v_materialize(e){return new Uint8Array(e)}array(e){return new Uint8Array(super.array(e))}}(n.BooleanSpec=ve).__name__="BooleanSpec";class be extends ne{v_materialize(e){return h.isTypedArray(e)?e:new Float64Array(e)}array(e){return new Float64Array(super.array(e))}}(n.NumberSpec=be).__name__="NumberSpec";class xe extends ne{materialize(e){return y.encode_rgba(y.color2rgba(e))}v_materialize(n){if(!b.is_NDArray(n)){const t=n.length,s=new _.RGBAArray(4*t);let e=0;for(const l of n){const[n,c,u,d]=y.color2rgba(l);s[e++]=n,s[e++]=c,s[e++]=u,s[e++]=d}return new _.ColorArray(s.buffer)}if("uint32"==n.dtype&&1==n.dimension)return v.to_big_endian(n);if("uint8"==n.dtype&&1==n.dimension){const[h]=n.shape,f=new _.RGBAArray(4*h);let e=0;for(const p of n)f[e++]=p,f[e++]=p,f[e++]=p,f[e++]=255;return new _.ColorArray(f.buffer)}if("uint8"==n.dtype&&2==n.dimension){var[r,i]=n.shape;if(4==i)return new _.ColorArray(n.buffer);if(3==i){const m=new _.RGBAArray(4*r);for(let e=0,t=0;e<i*r;)m[t++]=n[e++],m[t++]=n[e++],m[t++]=n[e++],m[t++]=255;return new _.ColorArray(m.buffer)}}else if(("float32"==n.dtype||"float64"==n.dtype)&&2==n.dimension){var[a,o]=n.shape;if(3==o||4==o){const g=new _.RGBAArray(4*a);for(let e=0,t=0;e<o*a;)g[t++]=255*n[e++],g[t++]=255*n[e++],g[t++]=255*n[e++],g[t++]=255*(3==o?1:n[e++]);return new _.ColorArray(g.buffer)}}throw new Error("invalid color array")}vector(e){return new p.ColorUniformVector(e)}}(n.ColorSpec=xe).__name__="ColorSpec";class we extends ne{}(n.NDArraySpec=we).__name__="NDArraySpec";class Te extends ne{}(n.AnySpec=Te).__name__="AnySpec";class Ae extends ne{}(n.StringSpec=Ae).__name__="StringSpec";class ke extends ne{}(n.NullStringSpec=ke).__name__="NullStringSpec";class Me extends ne{}(n.ArraySpec=Me).__name__="ArraySpec";class Se extends ne{}(n.MarkerSpec=Se).__name__="MarkerSpec";class Ee extends ne{}(n.LineJoinSpec=Ee).__name__="LineJoinSpec";class Ce extends ne{}(n.LineCapSpec=Ce).__name__="LineCapSpec";class Le extends ne{}(n.LineDashSpec=Le).__name__="LineDashSpec";class De extends ne{_default_override(){return f.settings.dev?"Bokeh":void 0}}(n.FontSpec=De).__name__="FontSpec";class Oe extends ne{}(n.FontSizeSpec=Oe).__name__="FontSizeSpec";class Pe extends ne{}(n.FontStyleSpec=Pe).__name__="FontStyleSpec";class Re extends ne{}(n.TextAlignSpec=Re).__name__="TextAlignSpec";class Ie extends ne{}(n.TextBaselineSpec=Ie).__name__="TextBaselineSpec"},function(e,t,n,r,i){r();const a=e(8),o=e(13),s={};class l{constructor(e,t){this.name=e,this.level=t}}n.LogLevel=l,l.__name__="LogLevel";class c{constructor(e,t=c.INFO){this._name=e,this.set_level(t)}static get levels(){return Object.keys(c.log_levels)}static get(t,n=c.INFO){if(0<t.length){let e=s[t];return null==e&&(s[t]=e=new c(t,n)),e}throw new TypeError("Logger.get() expects a non-empty string name and an optional log-level")}get level(){return this.get_level()}get_level(){return this._log_level}set_level(e){if(e instanceof l)this._log_level=e;else{if(!a.isString(e)||null==c.log_levels[e])throw new Error("Logger.set_level() expects a log-level object or a string name of a log-level");this._log_level=c.log_levels[e]}var t=`[${this._name}]`;for(const[e,n]of o.entries(c.log_levels))n.level<this._log_level.level||this._log_level.level===c.OFF.level?this[e]=function(){}:this[e]=u(e,t)}trace(){}debug(){}info(){}warn(){}error(){}}function u(e,t){return null!=console[e]?console[e].bind(console,t):null!=console.log?console.log.bind(console,t):function(){}}function d(e){var t=n.logger.level;return a.isString(e)&&null==c.log_levels[e]?(console.log(`[bokeh] unrecognized logging level '${e}' passed to Bokeh.set_log_level(), ignoring`),console.log(`[bokeh] valid log levels are: ${c.levels.join(", ")}`)):(console.log(`[bokeh] setting log level to: '${a.isString(e)?e:e.level}'`),n.logger.set_level(e)),t}(n.Logger=c).__name__="Logger",c.TRACE=new l("trace",0),c.DEBUG=new l("debug",1),c.INFO=new l("info",2),c.WARN=new l("warn",6),c.ERROR=new l("error",7),c.FATAL=new l("fatal",8),c.OFF=new l("off",9),c.log_levels={trace:c.TRACE,debug:c.DEBUG,info:c.INFO,warn:c.WARN,error:c.ERROR,fatal:c.FATAL,off:c.OFF},n.logger=c.get("bokeh"),n.set_log_level=d,n.with_log_level=function(e,t){e=d(e);try{t()}finally{d(e)}}},function(e,t,n,r,i){r(),n.VerticalAlign=void 0;const a=e(21);n.Align=a.Enum("start","center","end"),n.Anchor=a.Enum("top_left","top_center","top_right","center_left","center_center","center_right","bottom_left","bottom_center","bottom_right","top","left","center","right","bottom"),n.AngleUnits=a.Enum("deg","rad","grad","turn"),n.BoxOrigin=a.Enum("corner","center"),n.ButtonType=a.Enum("default","primary","success","warning","danger","light"),n.CalendarPosition=a.Enum("auto","above","below"),n.Dimension=a.Enum("width","height"),n.Dimensions=a.Enum("width","height","both"),n.Direction=a.Enum("clock","anticlock"),n.Distribution=a.Enum("uniform","normal"),n.FontStyle=a.Enum("normal","italic","bold","bold italic"),n.HatchPatternType=a.Enum("blank","dot","ring","horizontal_line","vertical_line","cross","horizontal_dash","vertical_dash","spiral","right_diagonal_line","left_diagonal_line","diagonal_cross","right_diagonal_dash","left_diagonal_dash","horizontal_wave","vertical_wave","criss_cross"," ",".","o","-","|","+",'"',":","@","/","\\","x",",","`","v",">","*"),n.HTTPMethod=a.Enum("POST","GET"),n.HexTileOrientation=a.Enum("pointytop","flattop"),n.HoverMode=a.Enum("mouse","hline","vline"),n.LatLon=a.Enum("lat","lon"),n.LegendClickPolicy=a.Enum("none","hide","mute"),n.LegendLocation=n.Anchor,n.LineCap=a.Enum("butt","round","square"),n.LineJoin=a.Enum("miter","round","bevel"),n.LineDash=a.Enum("solid","dashed","dotted","dotdash","dashdot"),n.LinePolicy=a.Enum("prev","next","nearest","interp","none"),n.Location=a.Enum("above","below","left","right"),n.Logo=a.Enum("normal","grey"),n.MarkerType=a.Enum("asterisk","circle","circle_cross","circle_dot","circle_x","circle_y","cross","dash","diamond","diamond_cross","diamond_dot","dot","hex","hex_dot","inverted_triangle","plus","square","square_cross","square_dot","square_pin","square_x","star","star_dot","triangle","triangle_dot","triangle_pin","x","y"),n.MutedPolicy=a.Enum("show","ignore"),n.Orientation=a.Enum("vertical","horizontal"),n.OutputBackend=a.Enum("canvas","svg","webgl"),n.PaddingUnits=a.Enum("percent","absolute"),n.Place=a.Enum("above","below","left","right","center"),n.PointPolicy=a.Enum("snap_to_data","follow_mouse","none"),n.RadiusDimension=a.Enum("x","y","max","min"),n.RenderLevel=a.Enum("image","underlay","glyph","guide","annotation","overlay"),n.RenderMode=a.Enum("canvas","css"),n.ResetPolicy=a.Enum("standard","event_only"),n.RoundingFunction=a.Enum("round","nearest","floor","rounddown","ceil","roundup"),n.SelectionMode=a.Enum("replace","append","intersect","subtract"),n.Side=a.Enum("above","below","left","right"),n.SizingMode=a.Enum("stretch_width","stretch_height","stretch_both","scale_width","scale_height","scale_both","fixed"),n.Sort=a.Enum("ascending","descending"),n.SpatialUnits=a.Enum("screen","data"),n.StartEnd=a.Enum("start","end"),n.StepMode=a.Enum("after","before","center"),n.TapBehavior=a.Enum("select","inspect"),n.TextAlign=a.Enum("left","right","center"),n.TextBaseline=a.Enum("top","middle","bottom","alphabetic","hanging","ideographic"),n.TextureRepetition=a.Enum("repeat","repeat_x","repeat_y","no_repeat"),n.TickLabelOrientation=a.Enum("vertical","horizontal","parallel","normal"),n.TooltipAttachment=a.Enum("horizontal","vertical","left","right","above","below"),n.UpdateMode=a.Enum("replace","append"),n.VerticalAlign=a.Enum("top","middle","bottom")},function(e,t,n,r,i){r();const T=e(1).__importStar(e(8)),A=e(22),k=e(13),M=window.Map,{hasOwnProperty:S}=Object.prototype;class E{}(n.Kind=E).__name__="Kind",function(e){class t extends E{valid(e){return!0}}t.__name__="Any",e.Any=t;class n extends E{valid(e){return!0}}n.__name__="Unknown",e.Unknown=n;class r extends E{valid(e){return T.isBoolean(e)}}r.__name__="Boolean",e.Boolean=r;class i extends E{constructor(e){super(),this.obj_type=e}valid(e){return!0}}i.__name__="Ref",e.Ref=i;class a extends E{valid(e){return!0}}a.__name__="AnyRef",e.AnyRef=a;class o extends E{valid(e){return T.isNumber(e)}}o.__name__="Number",e.Number=o;class s extends o{valid(e){return super.valid(e)&&T.isInteger(e)}}s.__name__="Int",e.Int=s;class l extends o{valid(e){return super.valid(e)&&0<=e&&e<=1}}l.__name__="Percent",e.Percent=l;class c extends E{constructor(e){super(),this.types=e,this.types=e}valid(t){return this.types.some(e=>e.valid(t))}}c.__name__="Or",e.Or=c;class u extends E{constructor(e){super(),this.types=e,this.types=e}valid(t){if(!T.isArray(t))return!1;for(let e=0;e<this.types.length;e++){const n=this.types[e],r=t[e];if(!n.valid(r))return!1}return!0}}u.__name__="Tuple",e.Tuple=u;class d extends E{constructor(e){super(),this.struct_type=e}valid(e){if(!T.isPlainObject(e))return!1;var{struct_type:t}=this;if(k.size(t)!=k.size(e))return!1;for(const n in t)if(S.call(t,n)){if(!S.call(e,n))return!1;const r=t[n],i=e[n];if(!r.valid(i))return!1}return!0}}d.__name__="Struct",e.Struct=d;class h extends E{valid(e){return T.isArray(e)||T.isTypedArray(e)}}h.__name__="Arrayable",e.Arrayable=h;class f extends E{constructor(e){super(),this.item_type=e}valid(e){return T.isArray(e)&&e.every(e=>this.item_type.valid(e))}}f.__name__="Array",e.Array=f;class p extends E{valid(e){return null===e}}p.__name__="Null",e.Null=p;class m extends E{constructor(e){super(),this.base_type=e}valid(e){return null===e||this.base_type.valid(e)}}m.__name__="Nullable",e.Nullable=m;class g extends E{constructor(e){super(),this.base_type=e}valid(e){return void 0===e||this.base_type.valid(e)}}g.__name__="Opt",e.Opt=g;class _ extends E{valid(e){return T.isString(e)}}_.__name__="String",e.String=_;class y extends E{constructor(e){super(),this.values=new Set(e)}valid(e){return this.values.has(e)}*[Symbol.iterator](){yield*this.values}}y.__name__="Enum",e.Enum=y;class v extends E{constructor(e){super(),this.item_type=e}valid(e){if(!T.isPlainObject(e))return!1;for(const n in e)if(S.call(e,n)){var t=e[n];if(!this.item_type.valid(t))return!1}return!0}}v.__name__="Dict",e.Dict=v;class b extends E{constructor(e,t){super(),this.key_type=e,this.item_type=t}valid(e){if(!(e instanceof M))return!1;for(var[t,n]of e.entries())if(!this.key_type.valid(t)||!this.item_type.valid(n))return!1;return!0}}b.__name__="Map",e.Map=b;class x extends E{valid(e){return A.is_Color(e)}}x.__name__="Color",e.Color=x;class w extends E{valid(e){return T.isFunction(e)}}w.__name__="Function",e.Function=w}(n.Kinds||(n.Kinds={})),n.Any=new n.Kinds.Any,n.Unknown=new n.Kinds.Unknown,n.Boolean=new n.Kinds.Boolean,n.Number=new n.Kinds.Number,n.Int=new n.Kinds.Int,n.String=new n.Kinds.String,n.Null=new n.Kinds.Null,n.Nullable=e=>new n.Kinds.Nullable(e),n.Opt=e=>new n.Kinds.Opt(e),n.Or=(...e)=>new n.Kinds.Or(e),n.Tuple=(...e)=>new n.Kinds.Tuple(e),n.Struct=e=>new n.Kinds.Struct(e),n.Arrayable=new n.Kinds.Arrayable,n.Array=e=>new n.Kinds.Array(e),n.Dict=e=>new n.Kinds.Dict(e),n.Map=(e,t)=>new n.Kinds.Map(e,t),n.Enum=(...e)=>new n.Kinds.Enum(e),n.Ref=e=>new n.Kinds.Ref(e),n.AnyRef=()=>new n.Kinds.AnyRef,n.Function=()=>new n.Kinds.Function,n.Percent=new n.Kinds.Percent,n.Alpha=n.Percent,n.Color=new n.Kinds.Color,n.Auto=n.Enum("auto"),n.FontSize=n.String,n.Font=n.String,n.Angle=n.Number},function(e,t,n,r,i){r();const h=e(23),a=e(10),s=e(8),{round:o}=Math;function f(e){return a.clamp(o(e),0,255)}function p(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function l(e,t){var n;let r,i,a,o;return null==e?[r,i,a,o]=[0,0,0,0]:s.isInteger(e)?[r,i,a,o]=p(e):s.isString(e)?[r,i,a,o]=null!==(n=y(e))&&void 0!==n?n:[0,0,0,0]:([r,i,a,o=1]=e,o=f(255*o)),255==o&&null!=t&&(o=f(255*t)),[r,i,a,o]}n.transparent=function(){return[0,0,0,0]},n.encode_rgba=function([e,t,n,r]){return e<<24|t<<16|n<<8|r},n.decode_rgba=p,n.compose_alpha=function(e,t){return 255==(255&e)?4294967040&e|f(255*t):e},n.color2rgba=l;const c={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"a",11:"b",12:"c",13:"d",14:"e",15:"f"};function u(e){return c[e>>4]+c[15&e]}n.color2css=function(e,t){var[n,r,e,t]=l(e,t);return`rgba(${n}, ${r}, ${e}, ${t/255})`},n.color2hex=function(e,t){var[n,r,e,t]=l(e,t),e=`#${u(n)}${u(r)}${u(e)}`;return 255==t?e:`${e}${u(t)}`},n.color2hexrgb=function(e){var[t,n,e]=l(e);return`#${u(t)}${u(n)}${u(e)}`};const m=/^rgba?\(\s*([^\s,]+?)\s+([^\s,]+?)\s+([^\s,]+?)(?:\s*\/\s*([^\s,]+?))?\s*\)$/,g=/^rgba?\(\s*([^\s,]+?)\s*,\s*([^\s,]+?)\s*,\s*([^\s,]+?)(?:\s*,\s*([^\s,]+?))?\s*\)$/,_=(()=>{const e=document.createElement("canvas");e.width=1,e.height=1;const t=e.getContext("2d"),n=t.createLinearGradient(0,0,1,1);return e=>{t.fillStyle=n,t.fillStyle=e;e=t.fillStyle;return e!=n?e:null}})();function y(e){if(!(e=e.trim().toLowerCase()))return null;if("transparent"==e)return[0,0,0,0];if(h.is_named_color(e))return p(h.named_colors[e]);if("#"==e[0]){const t=Number("0x"+e.substr(1));if(isNaN(t))return null;switch(e.length-1){case 3:{const e=t>>8&15,n=t>>4&15,r=t>>0&15;return[e<<4|e,n<<4|n,r<<4|r,255]}case 4:{const e=t>>12&15,i=t>>8&15,a=t>>4&15,o=t>>0&15;return[e<<4|e,i<<4|i,a<<4|a,o<<4|o]}case 6:return[t>>16&255,t>>8&255,t>>0&255,255];case 8:return[t>>24&255,t>>16&255,t>>8&255,t>>0&255]}}else if(e.startsWith("rgb")){var l=null!==(l=e.match(m))&&void 0!==l?l:e.match(g);if(null!=l){let[,e,t,n,r="1"]=l;const h=e.endsWith("%"),c=t.endsWith("%"),u=n.endsWith("%"),d=r.endsWith("%");if(!(h&&c&&u)&&(h||c||u))return null;h&&(e=e.slice(0,-1)),c&&(t=t.slice(0,-1)),u&&(n=n.slice(0,-1)),d&&(r=r.slice(0,-1));let i=Number(e),a=Number(t),o=Number(n),s=Number(r);return isNaN(i+a+o+s)?null:(h&&(i=i/100*255),c&&(a=a/100*255),u&&(o=o/100*255),s=255*(d?s/100:s),i=f(i),a=f(a),o=f(o),s=f(s),[i,a,o,s])}}else{const t=_(e);if(null!=t)return y(t)}return null}n.css4_parse=y,n.is_Color=function(e){return!!s.isInteger(e)||!(!s.isString(e)||null==y(e))||!(!s.isArray(e)||3!=e.length&&4!=e.length)},n.is_dark=function([e,t,n]){return.6<=1-(.299*e+.587*t+.114*n)/255}},function(e,t,n,r,i){r(),n.named_colors={aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},n.is_named_color=function(e){return e in n.named_colors}},function(e,t,n,r,i){r(),n.GeneratorFunction=Object.getPrototypeOf(function*(){}).constructor,n.ColorArray=Uint32Array,n.RGBAArray=Uint8ClampedArray,n.infer_type=function(e,t){return e instanceof Float64Array||e instanceof Array||t instanceof Float64Array||t instanceof Array?Float64Array:Float32Array},n.ScreenArray=Float32Array,n.to_screen=function(e){return e instanceof Float32Array?e:new Float32Array(e)},i("Indices",e(25).BitSet)},function(e,t,n,r,i){r();const a=e(26),o=e(11);class s{constructor(e,t=0){this.size=e,this[Symbol.toStringTag]="BitSet",this._count=null,this._nwords=Math.ceil(e/32),0==t||1==t?(this._array=new Uint32Array(this._nwords),1==t&&this._array.fill(4294967295)):(o.assert(t.length==this._nwords,"Initializer size mismatch"),this._array=t)}clone(){return new s(this.size,new Uint32Array(this._array))}[a.equals](t,e){if(!e.eq(this.size,t.size))return!1;const{_nwords:n}=this,r=this.size%n,i=0==r?n:n-1;for(let e=0;e<i;e++)if(this._array[e]!=t._array[e])return!1;if(0==r)return!0;{const e=1<<r-1,n=e-1^e;return(this._array[i]&n)==(t._array[i]&n)}}static all_set(e){return new s(e,1)}static all_unset(e){return new s(e,0)}static from_indices(e,t){const n=new s(e);for(const e of t)n.set(e);return n}static from_booleans(e,t){const n=new s(e),r=Math.min(e,t.length);for(let e=0;e<r;e++)t[e]&&n.set(e);return n}_check_bounds(e){o.assert(0<=e&&e<this.size,`Out of bounds: 0 <= ${e} < ${this.size}`)}get(e){return this._check_bounds(e),!!(this._array[e>>>5]>>(31&e)&1)}set(e,t=!0){this._check_bounds(e),this._count=null;var n=e>>>5,e=31&e;t?this._array[n]|=1<<e:this._array[n]&=~(1<<e)}unset(e){this.set(e,!1)}*[Symbol.iterator](){yield*this.ones()}get count(){let e=this._count;return null==e&&(this._count=e=this._get_count()),e}_get_count(){const{_array:n,_nwords:r,size:i}=this;let a=0;for(let t=0,e=0;e<r;e++){const r=n[e];if(0==r)t+=32;else for(let e=0;e<32&&t<i;e++,t++)r>>>e&1&&(a+=1)}return a}*ones(){const{_array:n,_nwords:r,size:i}=this;for(let t=0,e=0;e<r;e++){const r=n[e];if(0!=r)for(let e=0;e<32&&t<i;e++,t++)r>>>e&1&&(yield t);else t+=32}}*zeros(){const{_array:n,_nwords:r,size:i}=this;for(let t=0,e=0;e<r;e++){const r=n[e];if(4294967295!=r)for(let e=0;e<32&&t<i;e++,t++)r>>>e&1||(yield t);else t+=32}}_check_size(e){o.assert(this.size==e.size,"Size mismatch")}add(t){this._check_size(t);for(let e=0;e<this._nwords;e++)this._array[e]|=t._array[e]}intersect(t){this._check_size(t);for(let e=0;e<this._nwords;e++)this._array[e]&=t._array[e]}subtract(t){this._check_size(t);for(let e=0;e<this._nwords;e++){var n=this._array[e],r=t._array[e];this._array[e]=(n^r)&n}}union(t){this._check_size(t);const n=this.clone();for(let e=0;e<this._nwords;e++)n._array[e]|=t._array[e];return n}intersection(t){this._check_size(t);const n=this.clone();for(let e=0;e<this._nwords;e++)n._array[e]&=t._array[e];return n}difference(t){this._check_size(t);const n=this.clone();for(let e=0;e<this._nwords;e++){var r=this._array[e],i=t._array[e];n._array[e]=(r^i)&r}return n}select(e){o.assert(this.size<=e.length,"Size mismatch");const t=this.count,n=new e.constructor(t);let r=0;for(const t of this)n[r++]=e[t];return n}}(n.BitSet=s).__name__="BitSet"},function(e,t,s,n,r){n();const i=e(8),{hasOwnProperty:a}=Object.prototype;function l(e){return i.isObject(e)&&void 0!==e[s.equals]}s.equals=Symbol("equals"),s.wildcard=Symbol("wildcard");const c=Object.prototype.toString;class o{constructor(){this.a_stack=[],this.b_stack=[]}eq(e,t){if(Object.is(e,t))return!0;if(e===s.wildcard||t===s.wildcard)return!0;if(null==e||null==t)return e===t;const n=c.call(e);if(n!=c.call(t))return!1;switch(n){case"[object Number]":return this.numbers(e,t);case"[object RegExp]":case"[object String]":return`${e}`==`${t}`;case"[object Date]":case"[object Boolean]":return+e==+t}const{a_stack:r,b_stack:i}=this;let a=r.length;for(;a--;)if(r[a]===e)return i[a]===t;r.push(e),i.push(t);var o=(()=>{if(l(e)&&l(t))return e[s.equals](t,this);switch(n){case"[object Array]":case"[object Uint8Array]":case"[object Int8Array]":case"[object Uint16Array]":case"[object Int16Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":return this.arrays(e,t);case"[object Map]":return this.maps(e,t);case"[object Set]":return this.sets(e,t);case"[object Object]":if(e.constructor==t.constructor&&(null==e.constructor||e.constructor===Object))return this.objects(e,t);case"[object Function]":if(e.constructor==t.constructor&&e.constructor===Function)return this.eq(`${e}`,`${t}`)}if(e instanceof Node)return this.nodes(e,t);throw Error(`can't compare objects of type ${n}`)})();return r.pop(),i.pop(),o}numbers(e,t){return Object.is(e,t)}arrays(t,n){var{length:r}=t;if(r!=n.length)return!1;for(let e=0;e<r;e++)if(!this.eq(t[e],n[e]))return!1;return!0}iterables(e,t){const n=e[Symbol.iterator](),r=t[Symbol.iterator]();for(;;){const e=n.next(),t=r.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!this.eq(e.value,t.value))return!1}}maps(e,t){if(e.size!=t.size)return!1;for(var[n,r]of e)if(!t.has(n)||!this.eq(r,t.get(n)))return!1;return!0}sets(e,t){if(e.size!=t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}objects(e,t){var n=Object.keys(e);if(n.length!=Object.keys(t).length)return!1;for(const r of n)if(!a.call(t,r)||!this.eq(e[r],t[r]))return!1;return!0}nodes(e,t){return e.nodeType==t.nodeType&&e.textContent==t.textContent&&!!this.iterables(e.childNodes,t.childNodes)}}(s.Comparator=o).__name__="Comparator";const{abs:u}=Math;class d extends o{constructor(e=1e-4){super(),this.tolerance=e}numbers(e,t){return super.numbers(e,t)||u(e-t)<this.tolerance}}function h(e,t){return(new o).eq(e,t)}(s.SimilarComparator=d).__name__="SimilarComparator",s.is_equal=h,s.is_similar=function(e,t,n){return new d(n).eq(e,t)},s.isEqual=h},function(e,t,i,n,r){n(),i.is_windows=navigator.appVersion.includes("Windows"),i.is_ie=(()=>{const e=navigator.userAgent;return e.includes("MSIE")||e.includes("Trident")||e.includes("Edge")})(),i.is_mobile="undefined"!=typeof window&&("ontouchstart"in window||0<navigator.maxTouchPoints),i.is_little_endian=(()=>{var e=new ArrayBuffer(4),t=new Uint8Array(e);new Uint32Array(e)[1]=168496141;let n=!0;return 10==t[4]&&11==t[5]&&12==t[6]&&13==t[7]&&(n=!1),n})(),i.BYTE_ORDER=i.is_little_endian?"little":"big",i.to_big_endian=function(t){if(i.is_little_endian){const n=new Uint32Array(t.length),i=new DataView(n.buffer);let e=0;for(const r of t)i.setUint32(e,r),e+=4;return n}return t}},function(e,t,n,r,i){r();class a{constructor(){this._dev=!1,this._wireframe=!1}set dev(e){this._dev=e}get dev(){return this._dev}set wireframe(e){this._wireframe=e}get wireframe(){return this._wireframe}}n.Settings=a,a.__name__="Settings",n.settings=new a},function(e,t,n,r,i){var a,o,s,l,c,u,d,h;r();const f=e(8),p=e(11),m=e(26),g=e(30),_=e(31),y=Symbol("__ndarray__");class v extends Uint8Array{constructor(e,t){super(e),this[a]=!0,this.dtype="uint8",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(a=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}(n.Uint8NDArray=v).__name__="Uint8NDArray";class b extends Int8Array{constructor(e,t){super(e),this[o]=!0,this.dtype="int8",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(o=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}(n.Int8NDArray=b).__name__="Int8NDArray";class x extends Uint16Array{constructor(e,t){super(e),this[s]=!0,this.dtype="uint16",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(s=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}(n.Uint16NDArray=x).__name__="Uint16NDArray";class w extends Int16Array{constructor(e,t){super(e),this[l]=!0,this.dtype="int16",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(l=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}(n.Int16NDArray=w).__name__="Int16NDArray";class T extends Uint32Array{constructor(e,t){super(e),this[c]=!0,this.dtype="uint32",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(c=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}(n.Uint32NDArray=T).__name__="Uint32NDArray";class A extends Int32Array{constructor(e,t){super(e),this[u]=!0,this.dtype="int32",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(u=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}(n.Int32NDArray=A).__name__="Int32NDArray";class k extends Float32Array{constructor(e,t){super(e),this[d]=!0,this.dtype="float32",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(d=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}(n.Float32NDArray=k).__name__="Float32NDArray";class M extends Float64Array{constructor(e,t){super(e),this[h]=!0,this.dtype="float64",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(h=y,m.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return _.encode_NDArray(this)}}function S(e){return f.isObject(e)&&void 0!==e[y]}(n.Float64NDArray=M).__name__="Float64NDArray",n.is_NDArray=S,n.ndarray=function(e,t={}){let{dtype:n}=t;null==n&&(n=e instanceof ArrayBuffer||f.isArray(e)?"float64":(()=>{switch(!0){case e instanceof Uint8Array:return"uint8";case e instanceof Int8Array:return"int8";case e instanceof Uint16Array:return"uint16";case e instanceof Int16Array:return"int16";case e instanceof Uint32Array:return"uint32";case e instanceof Int32Array:return"int32";case e instanceof Float32Array:return"float32";case e instanceof Float64Array:return"float64";default:p.unreachable()}})());var{shape:r}=t;switch(n){case"uint8":return new v(e,r);case"int8":return new b(e,r);case"uint16":return new x(e,r);case"int16":return new w(e,r);case"uint32":return new T(e,r);case"int32":return new A(e,r);case"float32":return new k(e,r);case"float64":return new M(e,r)}}},function(e,t,i,n,r){n();const a=e(11),o=e(13),s=e(8);i.serialize=Symbol("serialize");class l extends Error{}(i.SerializationError=l).__name__="SerializationError";class c{constructor(e){this._references=new Map,this._definitions=new Map,this._refmap=new Map,this.include_defaults=null===(e=null==e?void 0:e.include_defaults)||void 0===e||e}get_ref(e){return this._references.get(e)}add_ref(e,t){a.assert(!this._references.has(e)),this._references.set(e,t)}add_def(e,t){var n=this.get_ref(e);a.assert(null!=n),this._definitions.set(e,t),this._refmap.set(n,t)}get objects(){return new Set(this._references.keys())}get references(){return new Set(this._references.values())}get definitions(){return new Set(this._definitions.values())}resolve_ref(e){return this._refmap.get(e)}remove_ref(e){return this._references.delete(e)}remove_def(e){return this._definitions.delete(e)}to_serializable(t){const n=this.get_ref(t);if(null!=n)return n;if(e=t,s.isObject(e)&&void 0!==e[i.serialize])return t[i.serialize](this);var e;if(s.isArray(t)||s.isTypedArray(t)){const n=t.length,i=new Array(n);for(let e=0;e<n;e++){const n=t[e];i[e]=this.to_serializable(n)}return i}if(s.isPlainObject(t)){const n={};for(const[i,r]of o.entries(t))n[i]=this.to_serializable(r);return n}if(null===t||s.isBoolean(t)||s.isNumber(t)||s.isString(t))return t;throw new l(`${Object.prototype.toString.call(t)} is not serializable`)}}(i.Serializer=c).__name__="Serializer"},function(e,t,n,r,i){r();const a=e(1),o=e(8),s=a.__importStar(e(29)),l=e(27),c=e(32);n.is_NDArray_ref=function(e){return o.isPlainObject(e)&&("__buffer__"in e||"__ndarray__"in e)},n.decode_NDArray=function(e,t){const{shape:n,dtype:r,order:i}=e;let a;if("__buffer__"in e){const n=t.get(e.__buffer__);if(null==n)throw new Error(`buffer for ${e.__buffer__} not found`);a=n}else a=c.base64_to_buffer(e.__ndarray__);e=(()=>{switch(r){case"uint8":return new s.Uint8NDArray(a,n);case"int8":return new s.Int8NDArray(a,n);case"uint16":return new s.Uint16NDArray(a,n);case"int16":return new s.Int16NDArray(a,n);case"uint32":return new s.Uint32NDArray(a,n);case"int32":return new s.Int32NDArray(a,n);case"float32":return new s.Float32NDArray(a,n);case"float64":return new s.Float64NDArray(a,n)}})();return i!==l.BYTE_ORDER&&c.swap(e),e},n.encode_NDArray=function(e,t){var n={order:l.BYTE_ORDER,dtype:e.dtype,shape:e.shape};if(null!=t){var r=`${t.size}`;return t.set(r,e.buffer),Object.assign({__buffer__:r},n)}{const t=c.buffer_to_base64(e.buffer);return Object.assign({__ndarray__:t},n)}}},function(e,t,n,r,i){r(),n.buffer_to_base64=function(e){const t=new Uint8Array(e),n=Array.from(t).map(e=>String.fromCharCode(e));return btoa(n.join(""))},n.base64_to_buffer=function(e){const n=atob(e),r=n.length,i=new Uint8Array(r);for(let e=0,t=r;e<t;e++)i[e]=n.charCodeAt(e);return i.buffer},n.swap=function(e){switch(e.BYTES_PER_ELEMENT){case 2:!function(){const n=new Uint8Array(e.buffer,e.byteOffset,2*e.length);for(let e=0,t=n.length;e<t;e+=2){var r=n[e];n[e]=n[e+1],n[e+1]=r}}();break;case 4:!function(){const n=new Uint8Array(e.buffer,e.byteOffset,4*e.length);for(let e=0,t=n.length;e<t;e+=4){var r=n[e];n[e]=n[e+3],n[e+3]=r,r=n[e+1],n[e+1]=n[e+2],n[e+2]=r}}();break;case 8:!function(){const n=new Uint8Array(e.buffer,e.byteOffset,8*e.length);for(let e=0,t=n.length;e<t;e+=8){var r=n[e];n[e]=n[e+7],n[e+7]=r,r=n[e+1],n[e+1]=n[e+6],n[e+6]=r,r=n[e+2],n[e+2]=n[e+5],n[e+5]=r,r=n[e+3],n[e+3]=n[e+4],n[e+4]=r}}()}}},function(e,t,n,r,i){r();e=e(26);class a{is_Scalar(){return this.is_scalar}is_Vector(){return!this.is_scalar}}n.Uniform=a,a.__name__="Uniform";class o extends a{constructor(e,t){super(),this.value=e,this.length=t,this.is_scalar=!0}get(e){return this.value}*[Symbol.iterator](){var{length:t,value:n}=this;for(let e=0;e<t;e++)yield n}select(e){return new o(this.value,e.count)}[e.equals](e,t){return t.eq(this.length,e.length)&&t.eq(this.value,e.value)}}(n.UniformScalar=o).__name__="UniformScalar";class s extends a{constructor(e){super(),this.array=e,this.is_scalar=!1,this.length=this.array.length}get(e){return this.array[e]}*[Symbol.iterator](){yield*this.array}select(e){e=e.select(this.array);return new this.constructor(e)}[e.equals](e,t){return t.eq(this.length,e.length)&&t.eq(this.array,e.array)}}(n.UniformVector=s).__name__="UniformVector";class l extends s{constructor(e){super(e),this.array=e,this._view=new DataView(e.buffer)}get(e){return this._view.getUint32(4*e)}*[Symbol.iterator](){var t=this.length;for(let e=0;e<t;e++)yield this.get(e)}}(n.ColorUniformVector=l).__name__="ColorUniformVector"},function(e,t,n,r,i){r();const a=e(28);function o(){const t=new Array(32),n="0123456789ABCDEF";for(let e=0;e<32;e++)t[e]=n.substr(Math.floor(16*Math.random()),1);return t[12]="4",t[16]=n.substr(3&t[16].charCodeAt(0)|8,1),t.join("")}n.startsWith=function(e,t,n=0){return e.substr(n,t.length)==t},n.uuid4=o;let s=1e3;n.uniqueId=function(e){var t=a.settings.dev?"j"+s++:o();return null!=e?`${e}-${t}`:t},n.escape=function(e){return e.replace(/(?:[&<>"'`])/g,e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#x27;";case"`":return"&#x60;";default:return e}})},n.unescape=function(e){return e.replace(/&(amp|lt|gt|quot|#x27|#x60);/g,(e,t)=>{switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';case"#x27":return"'";case"#x60":return"`";default:return t}})},n.use_strict=function(e){return`'use strict';\n${e}`},n.to_fixed=function(e,t){return e.toFixed(t).replace(/(\.[0-9]*?)0+$/,"$1").replace(/\.$/,"")}},function(e,t,n,r,i){r();e=e(30);class a{constructor(e){this.document=e}}(n.DocumentEvent=a).__name__="DocumentEvent";class o extends a{constructor(e,t,n){super(e),this.events=t,this.setter_id=n}}(n.DocumentEventBatch=o).__name__="DocumentEventBatch";class s extends a{}(n.DocumentChangedEvent=s).__name__="DocumentChangedEvent";class l extends s{constructor(e,t,n){super(e),this.msg_type=t,this.msg_data=n}[e.serialize](e){var t=this.msg_data,t=e.to_serializable(t);return{kind:"MessageSent",msg_type:this.msg_type,msg_data:t}}}(n.MessageSentEvent=l).__name__="MessageSentEvent";class c extends s{constructor(e,t,n,r,i,a,o){super(e),this.model=t,this.attr=n,this.old=r,this.new_=i,this.setter_id=a,this.hint=o}[e.serialize](e){if(null!=this.hint)return e.to_serializable(this.hint);var t=this.new_,n=e.to_serializable(t);return this.model!=t&&e.remove_def(this.model),{kind:"ModelChanged",model:this.model.ref(),attr:this.attr,new:n}}}n.ModelChangedEvent=c,c.__name__="ModelChangedEvent";class u extends s{constructor(e,t,n){super(e),this.column_source=t,this.patches=n}[e.serialize](e){return{kind:"ColumnsPatched",column_source:this.column_source,patches:this.patches}}}(n.ColumnsPatchedEvent=u).__name__="ColumnsPatchedEvent";class d extends s{constructor(e,t,n,r){super(e),this.column_source=t,this.data=n,this.rollover=r}[e.serialize](e){return{kind:"ColumnsStreamed",column_source:this.column_source,data:this.data,rollover:this.rollover}}}(n.ColumnsStreamedEvent=d).__name__="ColumnsStreamedEvent";class h extends s{constructor(e,t,n){super(e),this.title=t,this.setter_id=n}[e.serialize](e){return{kind:"TitleChanged",title:this.title}}}(n.TitleChangedEvent=h).__name__="TitleChangedEvent";class f extends s{constructor(e,t,n){super(e),this.model=t,this.setter_id=n}[e.serialize](e){return{kind:"RootAdded",model:e.to_serializable(this.model)}}}(n.RootAddedEvent=f).__name__="RootAddedEvent";class p extends s{constructor(e,t,n){super(e),this.model=t,this.setter_id=n}[e.serialize](e){return{kind:"RootRemoved",model:this.model.ref()}}}(n.RootRemovedEvent=p).__name__="RootRemovedEvent"},function(e,t,n,r,i){r();const a=e(8),o=e(13);n.pretty=Symbol("pretty");class s{constructor(e){this.precision=null==e?void 0:e.precision}to_string(e){return t=e,a.isObject(t)&&void 0!==t[n.pretty]?e[n.pretty](this):a.isBoolean(e)?this.boolean(e):a.isNumber(e)?this.number(e):a.isString(e)?this.string(e):a.isArray(e)?this.array(e):a.isIterable(e)?this.iterable(e):a.isPlainObject(e)?this.object(e):`${e}`;var t}token(e){return e}boolean(e){return`${e}`}number(e){return null!=this.precision?e.toFixed(this.precision):`${e}`}string(e){return`"${e.replace(/'/g,"\\'")}"`}array(e){const t=this.token,n=[];for(const t of e)n.push(this.to_string(t));return`${t("[")}${n.join(`${t(",")} `)}${t("]")}`}iterable(e){var t;const n=this.token,r=null!==(t=Object(e)[Symbol.toStringTag])&&void 0!==t?t:"Object",i=this.array(e);return`${r}${n("(")}${i}${n(")")}`}object(e){const t=this.token,n=[];for(var[r,i]of o.entries(e))n.push(`${r}${t(":")} ${this.to_string(i)}`);return`${t("{")}${n.join(`${t(",")} `)}${t("}")}`}}(n.Printer=s).__name__="Printer",n.to_string=function(e,t){return new s(t).to_string(e)}},function(e,t,a,n,r){n();const o=e(13),s=e(8);function l(e){return s.isObject(e)&&void 0!==e[a.clone]}a.clone=Symbol("clone"),a.is_Cloneable=l;class c extends Error{}(a.CloningError=c).__name__="CloningError";class i{constructor(){}clone(t){if(l(t))return t[a.clone](this);if(s.isArray(t)){const r=t.length,a=new Array(r);for(let e=0;e<r;e++){var n=t[e];a[e]=this.clone(n)}return a}if(s.isPlainObject(t)){const e={};for(const[a,i]of o.entries(t))e[a]=this.clone(i);return e}if(null===t||s.isBoolean(t)||s.isNumber(t)||s.isString(t))return t;throw new c(`${Object.prototype.toString.call(t)} is not cloneable`)}}(a.Cloner=i).__name__="Cloner"},function(e,t,n,r,i){r();const a=e(1);a.__exportStar(e(39),n),a.__exportStar(e(162),n),a.__exportStar(e(257),n),a.__exportStar(e(261),n),a.__exportStar(e(266),n),a.__exportStar(e(272),n),a.__exportStar(e(205),n),a.__exportStar(e(277),n),a.__exportStar(e(313),n),a.__exportStar(e(315),n),a.__exportStar(e(317),n),a.__exportStar(e(209),n),a.__exportStar(e(147),n),a.__exportStar(e(330),n),a.__exportStar(e(338),n),a.__exportStar(e(220),n),a.__exportStar(e(339),n),a.__exportStar(e(217),n),a.__exportStar(e(340),n),a.__exportStar(e(341),n),a.__exportStar(e(198),n),a.__exportStar(e(346),n),a.__exportStar(e(356),n),a.__exportStar(e(360),n)},function(e,t,n,r,i){r(),i("Annotation",e(40).Annotation),i("Arrow",e(55).Arrow),i("ArrowHead",e(133).ArrowHead),i("OpenHead",e(133).OpenHead),i("NormalHead",e(133).NormalHead),i("TeeHead",e(133).TeeHead),i("VeeHead",e(133).VeeHead),i("Band",e(134).Band),i("BoxAnnotation",e(136).BoxAnnotation),i("ColorBar",e(137).ColorBar),i("Label",e(226).Label),i("LabelSet",e(227).LabelSet),i("Legend",e(228).Legend),i("LegendItem",e(229).LegendItem),i("PolyAnnotation",e(231).PolyAnnotation),i("Slope",e(232).Slope),i("Span",e(233).Span),i("TextAnnotation",e(139).TextAnnotation),i("Title",e(138).Title),i("ToolbarPanel",e(234).ToolbarPanel),i("Tooltip",e(254).Tooltip),i("Whisker",e(256).Whisker)},function(e,t,n,r,i){r();e=e(41);class a extends e.RendererView{get_size(){if(this.model.visible){var{width:e,height:t}=this._get_size();return{width:Math.round(e),height:Math.round(t)}}return{width:0,height:0}}_get_size(){throw new Error("not implemented")}connect_signals(){super.connect_signals();var e=this.model.properties;this.on_change(e.visible,()=>{null!=this.layout&&(this.layout.visible=this.model.visible,this.plot_view.request_layout())})}get needs_clip(){return null==this.layout}serializable_state(){var e=super.serializable_state();return null==this.layout?e:Object.assign(Object.assign({},e),{bbox:this.layout.bbox.box})}}(n.AnnotationView=a).__name__="AnnotationView";class o extends e.Renderer{constructor(e){super(e)}static init_Annotation(){this.override({level:"annotation"})}}(n.Annotation=o).__name__="Annotation",o.init_Annotation()},function(e,t,n,r,i){r();const a=e(1),o=e(42),s=a.__importStar(e(45)),l=e(20),c=e(53),u=e(54);class d extends o.View{get coordinates(){var{_coordinates:e}=this;return null!=e?e:this._coordinates=this._initialize_coordinates()}initialize(){super.initialize(),this.visuals=new s.Visuals(this),this.needs_webgl_blit=!1}connect_signals(){super.connect_signals();var{x_range_name:e,y_range_name:t}=this.model.properties;this.on_change([e,t],()=>this._initialize_coordinates())}_initialize_coordinates(){const{x_range_name:e,y_range_name:t}=this.model,{frame:n}=this.plot_view,r=n.x_scales.get(e),i=n.y_scales.get(t);return new u.CoordinateTransform(r,i)}get plot_view(){return this.parent}get plot_model(){return this.parent.model}get layer(){var{overlays:e,primary:t}=this.canvas;return"overlay"==this.model.level?e:t}get canvas(){return this.plot_view.canvas_view}request_render(){this.request_paint()}request_paint(){this.plot_view.request_paint(this)}notify_finished(){this.plot_view.notify_finished()}get needs_clip(){return!1}get has_webgl(){return!1}render(){this.model.visible&&this._render(),this._has_finished=!0}renderer_view(e){}}(n.RendererView=d).__name__="RendererView";class h extends c.Model{constructor(e){super(e)}static init_Renderer(){this.define(({Boolean:e,String:t})=>({level:[l.RenderLevel,"image"],visible:[e,!0],x_range_name:[t,"default"],y_range_name:[t,"default"]}))}}(n.Renderer=h).__name__="Renderer",h.init_Renderer()},function(e,t,n,r,i){r();const a=e(1),o=e(15),s=e(43),l=e(8),c=a.__importDefault(e(44));class u{constructor(e){this.removed=new o.Signal0(this,"removed"),this._ready=Promise.resolve(void 0),this._slots=new WeakMap;var{model:t,parent:e}=e;this.model=t,this.parent=e,this.root=null==e?this:e.root,this.removed.emit()}get ready(){return this._ready}connect(e,r){let t=this._slots.get(r);return null==t&&(t=(e,t)=>{const n=Promise.resolve(r.call(this,e,t));this._ready=this._ready.then(()=>n)},this._slots.set(r,t)),e.connect(t,this)}disconnect(e,t){return e.disconnect(t,this)}initialize(){this._has_finished=!1,this.is_root&&(this._stylesheet=s.stylesheet);for(const e of this.styles())this.stylesheet.append(e)}async lazy_initialize(){}remove(){this.disconnect_signals(),this.removed.emit()}toString(){return`${this.model.type}View(${this.model.id})`}serializable_state(){return{type:this.model.type}}get is_root(){return null==this.parent}assert_root(){if(!this.is_root)throw new Error(`${this.toString()} is not a root layout`)}has_finished(){return this._has_finished}get is_idle(){return this.has_finished()}connect_signals(){}disconnect_signals(){o.Signal.disconnect_receiver(this)}on_change(e,t){for(const n of l.isArray(e)?e:[e])this.connect(n.change,t)}cursor(e,t){return null}get stylesheet(){return this.is_root?this._stylesheet:this.root.stylesheet}styles(){return[c.default]}}n.View=u,u.__name__="View"},function(e,t,n,r,i){r();const s=e(8),l=e(13),a=o=>(e={},...t)=>{const n=document.createElement(o);n.classList.add("bk");for(var[r,i]of l.entries(e))if(null!=i&&(!s.isBoolean(i)||i))if("class"===r&&(s.isString(i)&&(i=i.split(/\s+/)),s.isArray(i)))for(const o of i)null!=o&&n.classList.add(o);else if("style"===r&&s.isPlainObject(i))for(const[o,e]of l.entries(i))n.style[o]=e;else if("data"===r&&s.isPlainObject(i))for(const[o,e]of l.entries(i))n.dataset[o]=e;else n.setAttribute(r,i);function a(e){if(s.isString(e))n.appendChild(document.createTextNode(e));else if(e instanceof Node)n.appendChild(e);else if(e instanceof NodeList||e instanceof HTMLCollection)for(const t of e)n.appendChild(t);else if(null!=e&&!1!==e)throw new Error(`expected a DOM element, string, false or null, got ${JSON.stringify(e)}`)}for(const o of t)if(s.isArray(o))for(const e of o)a(e);else a(o);return n};function o(e){const t=e.parentNode;null!=t&&t.removeChild(e)}function c(e,...t){var n=e.firstChild;for(const r of t)e.insertBefore(r,n)}function u(e,t){var n;const r=Element.prototype;return(null!==(n=null!==(n=null!==(n=r.matches)&&void 0!==n?n:r.webkitMatchesSelector)&&void 0!==n?n:r.mozMatchesSelector)&&void 0!==n?n:r.msMatchesSelector).call(e,t)}function d(e){return parseFloat(e)||0}function h(e){e=getComputedStyle(e);return{border:{top:d(e.borderTopWidth),bottom:d(e.borderBottomWidth),left:d(e.borderLeftWidth),right:d(e.borderRightWidth)},margin:{top:d(e.marginTop),bottom:d(e.marginBottom),left:d(e.marginLeft),right:d(e.marginRight)},padding:{top:d(e.paddingTop),bottom:d(e.paddingBottom),left:d(e.paddingLeft),right:d(e.paddingRight)}}}function f(e){e=e.getBoundingClientRect();return{width:Math.ceil(e.width),height:Math.ceil(e.height)}}n.createElement=function(e,t,...n){return a(e)(t,...n)},n.div=a("div"),n.span=a("span"),n.canvas=a("canvas"),n.link=a("link"),n.style=a("style"),n.a=a("a"),n.p=a("p"),n.i=a("i"),n.pre=a("pre"),n.button=a("button"),n.label=a("label"),n.input=a("input"),n.select=a("select"),n.option=a("option"),n.optgroup=a("optgroup"),n.textarea=a("textarea"),n.nbsp=function(){return document.createTextNode(" ")},n.append=function(e,...t){for(const n of t)e.appendChild(n)},n.remove=o,n.removeElement=o,n.replaceWith=function(e,t){const n=e.parentNode;null!=n&&n.replaceChild(t,e)},n.prepend=c,n.empty=function(e,t=!1){for(var n;n=e.firstChild;)e.removeChild(n);if(t&&e instanceof Element)for(const t of e.attributes)e.removeAttributeNode(t)},n.display=function(e){e.style.display=""},n.undisplay=function(e){e.style.display="none"},n.show=function(e){e.style.visibility=""},n.hide=function(e){e.style.visibility="hidden"},n.offset=function(e){e=e.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}},n.matches=u,n.parent=function(e,t){let n=e;for(;n=n.parentElement;)if(u(n,t))return n;return null},n.extents=h,n.size=f,n.scroll_size=function(e){return{width:Math.ceil(e.scrollWidth),height:Math.ceil(e.scrollHeight)}},n.outer_size=function(e){var{margin:{left:t,right:n,top:r,bottom:i}}=h(e),{width:a,height:e}=f(e);return{width:Math.ceil(a+t+n),height:Math.ceil(e+r+i)}},n.content_size=function(e){var{left:t,top:n}=e.getBoundingClientRect(),{padding:r}=h(e);let i=0,a=0;for(const o of e.children){const e=o.getBoundingClientRect();i=Math.max(i,Math.ceil(e.left-t-r.left+e.width)),a=Math.max(a,Math.ceil(e.top-n-r.top+e.height))}return{width:i,height:a}},n.position=function(e,t,n){const{style:r}=e;if(r.left=`${t.x}px`,r.top=`${t.y}px`,r.width=`${t.width}px`,r.height=`${t.height}px`,null==n)r.margin="";else{const{top:e,right:t,bottom:i,left:a}=n;r.margin=`${e}px ${t}px ${i}px ${a}px`}},n.children=function(e){return Array.from(e.children)};class p{constructor(e){this.el=e,this.classList=e.classList}get values(){const t=[];for(let e=0;e<this.classList.length;e++){var n=this.classList.item(e);null!=n&&t.push(n)}return t}has(e){return this.classList.contains(e)}add(...e){for(const t of e)this.classList.add(t);return this}remove(...e){for(const t of e)this.classList.remove(t);return this}clear(){for(const e of this.values)"bk"!=e&&this.classList.remove(e);return this}toggle(e,t){return(null!=t?t:!this.has(e))?this.add(e):this.remove(e),this}}function m(e,t,n){var{width:r,height:i,position:a,display:o}=e.style;e.style.position="absolute",e.style.display="",e.style.width=null!=t.width&&t.width!=1/0?`${t.width}px`:"auto",e.style.height=null!=t.height&&t.height!=1/0?`${t.height}px`:"auto";try{return n()}finally{e.style.position=a,e.style.display=o,e.style.width=r,e.style.height=i}}(n.ClassList=p).__name__="ClassList",n.classes=function(e){return new p(e)},n.toggle_attribute=function(e,t,n){(n=null==n?!e.hasAttribute(t):n)?e.setAttribute(t,"true"):e.removeAttribute(t)},(e=n.Keys||(n.Keys={}))[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Esc=27]="Esc",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Delete=46]="Delete",n.undisplayed=function(e,t){var{display:n}=e.style;e.style.display="none";try{return t()}finally{e.style.display=n}},n.unsized=function(e,t){return m(e,{},t)},n.sized=m;class g{constructor(e){this.root=e,this.known=new Set,this.style=n.style({type:"text/css"}),c(e,this.style)}append(e){this.known.has(e)||(this.style.appendChild(document.createTextNode(e)),this.known.add(e))}}(n.StyleSheet=g).__name__="StyleSheet",n.stylesheet=new g(document.head),n.dom_ready=async function(){if("loading"==document.readyState)return new Promise((e,t)=>{document.addEventListener("DOMContentLoaded",()=>e(),{once:!0})})}},function(e,t,n,r,i){r(),n.root="bk-root",n.default=".bk-root{position:relative;width:auto;height:auto;z-index:0;box-sizing:border-box;font-family:Helvetica, Arial, sans-serif;font-size:13px;}.bk-root .bk,.bk-root .bk:before,.bk-root .bk:after{box-sizing:inherit;margin:0;border:0;padding:0;background-image:none;font-family:inherit;font-size:100%;line-height:1.42857143;}.bk-root pre.bk{font-family:Courier, monospace;}"},function(e,t,n,r,i){r();const a=e(1),o=e(46);i("Line",o.Line),i("LineScalar",o.LineScalar),i("LineVector",o.LineVector);const s=e(49);i("Fill",s.Fill),i("FillScalar",s.FillScalar),i("FillVector",s.FillVector);const l=e(50);i("Text",l.Text),i("TextScalar",l.TextScalar),i("TextVector",l.TextVector);const c=e(51);i("Hatch",c.Hatch),i("HatchScalar",c.HatchScalar),i("HatchVector",c.HatchVector);const u=a.__importStar(e(48)),d=e(47);i("VisualProperties",d.VisualProperties),i("VisualUniforms",d.VisualUniforms);class h{constructor(e){this._visuals=[];for(const[t,n]of e.model._mixins){const r=(()=>{switch(n){case u.Line:return new o.Line(e,t);case u.LineScalar:return new o.LineScalar(e,t);case u.LineVector:return new o.LineVector(e,t);case u.Fill:return new s.Fill(e,t);case u.FillScalar:return new s.FillScalar(e,t);case u.FillVector:return new s.FillVector(e,t);case u.Text:return new l.Text(e,t);case u.TextScalar:return new l.TextScalar(e,t);case u.TextVector:return new l.TextVector(e,t);case u.Hatch:return new c.Hatch(e,t);case u.HatchScalar:return new c.HatchScalar(e,t);case u.HatchVector:return new c.HatchVector(e,t);default:throw new Error("unknown visual")}})();this._visuals.push(r),Object.defineProperty(this,t+r.type,{get:()=>r,configurable:!1,enumerable:!0})}}*[Symbol.iterator](){yield*this._visuals}}(n.Visuals=h).__name__="Visuals"},function(e,t,n,r,i){r();const a=e(1),o=e(47),s=a.__importStar(e(48)),l=e(22),c=e(8);function u(e){if(c.isArray(e))return e;switch(e){case"solid":return[];case"dashed":return[6];case"dotted":return[2,4];case"dotdash":return[2,4,6,4];case"dashdot":return[6,4,2,4];default:return e.split(" ").map(Number).filter(c.isInteger)}}n.resolve_line_dash=u;class d extends o.VisualProperties{get doit(){var e=this.line_color.get_value(),t=this.line_alpha.get_value(),n=this.line_width.get_value();return!(null==e||0==t||0==n)}set_value(e){var t=this.line_color.get_value(),n=this.line_alpha.get_value();e.strokeStyle=l.color2css(t,n),e.lineWidth=this.line_width.get_value(),e.lineJoin=this.line_join.get_value(),e.lineCap=this.line_cap.get_value(),e.lineDash=u(this.line_dash.get_value()),e.lineDashOffset=this.line_dash_offset.get_value()}}(n.Line=d).__name__="Line";class h extends o.VisualUniforms{get doit(){var e=this.line_color.value,t=this.line_alpha.value,n=this.line_width.value;return!(0==e||0==t||0==n)}set_value(e){var t=this.line_color.value,n=this.line_alpha.value;e.strokeStyle=l.color2css(t,n),e.lineWidth=this.line_width.value,e.lineJoin=this.line_join.value,e.lineCap=this.line_cap.value,e.lineDash=u(this.line_dash.value),e.lineDashOffset=this.line_dash_offset.value}}(n.LineScalar=h).__name__="LineScalar";class f extends o.VisualUniforms{get doit(){const{line_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{line_alpha:t}=this;if(t.is_Scalar()&&0==t.value)return!1;const{line_width:n}=this;return!n.is_Scalar()||0!=n.value}set_vectorize(e,t){var n=this.line_color.get(t),r=this.line_alpha.get(t),i=this.line_width.get(t),a=this.line_join.get(t),o=this.line_cap.get(t),s=this.line_dash.get(t),t=this.line_dash_offset.get(t);e.strokeStyle=l.color2css(n,r),e.lineWidth=i,e.lineJoin=a,e.lineCap=o,e.lineDash=u(s),e.lineDashOffset=t}}(n.LineVector=f).__name__="LineVector",d.prototype.type="line",d.prototype.attrs=Object.keys(s.Line),h.prototype.type="line",h.prototype.attrs=Object.keys(s.LineScalar),f.prototype.type="line",f.prototype.attrs=Object.keys(s.LineVector)},function(e,t,n,r,i){r();class a{constructor(e,t=""){this.obj=e,this.prefix=t;this._props=[];for(const n of this.attrs){const r=e.model.properties[t+n];r.change.connect(()=>this.update()),this[n]=r,this._props.push(r)}this.update()}*[Symbol.iterator](){yield*this._props}update(){}}(n.VisualProperties=a).__name__="VisualProperties";class o{constructor(e,t=""){this.obj=e,this.prefix=t;for(const n of this.attrs)Object.defineProperty(this,n,{get:()=>e[t+n]})}*[Symbol.iterator](){for(const e of this.attrs)yield this.obj.model.properties[this.prefix+e]}update(){}}(n.VisualUniforms=o).__name__="VisualUniforms"},function(e,t,n,r,i){r();const a=e(1),o=a.__importStar(e(18)),s=e(20),l=a.__importStar(e(21)),c=e(13);n.Line={line_color:[l.Nullable(l.Color),"black"],line_alpha:[l.Alpha,1],line_width:[l.Number,1],line_join:[s.LineJoin,"bevel"],line_cap:[s.LineCap,"butt"],line_dash:[l.Or(s.LineDash,l.Array(l.Number)),[]],line_dash_offset:[l.Number,0]},n.Fill={fill_color:[l.Nullable(l.Color),"gray"],fill_alpha:[l.Alpha,1]},n.Hatch={hatch_color:[l.Nullable(l.Color),"black"],hatch_alpha:[l.Alpha,1],hatch_scale:[l.Number,12],hatch_pattern:[l.Nullable(l.Or(s.HatchPatternType,l.String)),null],hatch_weight:[l.Number,1],hatch_extra:[l.Dict(l.AnyRef()),{}]},n.Text={text_color:[l.Nullable(l.Color),"#444444"],text_alpha:[l.Alpha,1],text_font:[o.Font,"helvetica"],text_font_size:[l.FontSize,"16px"],text_font_style:[s.FontStyle,"normal"],text_align:[s.TextAlign,"left"],text_baseline:[s.TextBaseline,"bottom"],text_line_height:[l.Number,1.2]},n.LineScalar={line_color:[o.ColorScalar,"black"],line_alpha:[o.NumberScalar,1],line_width:[o.NumberScalar,1],line_join:[o.LineJoinScalar,"bevel"],line_cap:[o.LineCapScalar,"butt"],line_dash:[o.LineDashScalar,[]],line_dash_offset:[o.NumberScalar,0]},n.FillScalar={fill_color:[o.ColorScalar,"gray"],fill_alpha:[o.NumberScalar,1]},n.HatchScalar={hatch_color:[o.ColorScalar,"black"],hatch_alpha:[o.NumberScalar,1],hatch_scale:[o.NumberScalar,12],hatch_pattern:[o.NullStringScalar,null],hatch_weight:[o.NumberScalar,1],hatch_extra:[o.AnyScalar,{}]},n.TextScalar={text_color:[o.ColorScalar,"#444444"],text_alpha:[o.NumberScalar,1],text_font:[o.FontScalar,"helvetica"],text_font_size:[o.FontSizeScalar,"16px"],text_font_style:[o.FontStyleScalar,"normal"],text_align:[o.TextAlignScalar,"left"],text_baseline:[o.TextBaselineScalar,"bottom"],text_line_height:[o.NumberScalar,1.2]},n.LineVector={line_color:[o.ColorSpec,"black"],line_alpha:[o.NumberSpec,1],line_width:[o.NumberSpec,1],line_join:[o.LineJoinSpec,"bevel"],line_cap:[o.LineCapSpec,"butt"],line_dash:[o.LineDashSpec,[]],line_dash_offset:[o.NumberSpec,0]},n.FillVector={fill_color:[o.ColorSpec,"gray"],fill_alpha:[o.NumberSpec,1]},n.HatchVector={hatch_color:[o.ColorSpec,"black"],hatch_alpha:[o.NumberSpec,1],hatch_scale:[o.NumberSpec,12],hatch_pattern:[o.NullStringSpec,null],hatch_weight:[o.NumberSpec,1],hatch_extra:[o.AnyScalar,{}]},n.TextVector={text_color:[o.ColorSpec,"#444444"],text_alpha:[o.NumberSpec,1],text_font:[o.FontSpec,"helvetica"],text_font_size:[o.FontSizeSpec,"16px"],text_font_style:[o.FontStyleSpec,"normal"],text_align:[o.TextAlignSpec,"left"],text_baseline:[o.TextBaselineSpec,"bottom"],text_line_height:[o.NumberSpec,1.2]},n.attrs_of=function(e,t,n,r=!1){const i={};for(const a of c.keys(n)){const n=`${t}${a}`,o=e[n];i[r?n:a]=o}return i}},function(e,t,n,r,i){r();const a=e(1),o=e(47),s=a.__importStar(e(48)),l=e(22);class c extends o.VisualProperties{get doit(){var e=this.fill_color.get_value(),t=this.fill_alpha.get_value();return!(null==e||0==t)}set_value(e){var t=this.fill_color.get_value(),n=this.fill_alpha.get_value();e.fillStyle=l.color2css(t,n)}}n.Fill=c,c.__name__="Fill";class u extends o.VisualUniforms{get doit(){var e=this.fill_color.value,t=this.fill_alpha.value;return!(0==e||0==t)}set_value(e){var t=this.fill_color.value,n=this.fill_alpha.value;e.fillStyle=l.color2css(t,n)}}(n.FillScalar=u).__name__="FillScalar";class d extends o.VisualUniforms{get doit(){const{fill_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{fill_alpha:t}=this;return!t.is_Scalar()||0!=t.value}set_vectorize(e,t){var n=this.fill_color.get(t),t=this.fill_alpha.get(t);e.fillStyle=l.color2css(n,t)}}(n.FillVector=d).__name__="FillVector",c.prototype.type="fill",c.prototype.attrs=Object.keys(s.Fill),u.prototype.type="fill",u.prototype.attrs=Object.keys(s.FillScalar),d.prototype.type="fill",d.prototype.attrs=Object.keys(s.FillVector)},function(e,t,n,r,i){r();const a=e(1),o=e(47),s=a.__importStar(e(48)),l=e(22);class c extends o.VisualProperties{get doit(){var e=this.text_color.get_value(),t=this.text_alpha.get_value();return!(null==e||0==t)}set_value(e){var t=this.text_color.get_value(),n=this.text_alpha.get_value();e.fillStyle=l.color2css(t,n),e.font=this.font_value(),e.textAlign=this.text_align.get_value(),e.textBaseline=this.text_baseline.get_value()}font_value(){return`${this.text_font_style.get_value()} ${this.text_font_size.get_value()} ${this.text_font.get_value()}`}}(n.Text=c).__name__="Text";class u extends o.VisualUniforms{get doit(){var e=this.text_color.value,t=this.text_alpha.value;return!(0==e||0==t)}set_value(e){var t=this.text_color.value,n=this.text_alpha.value,r=this.font_value(),i=this.text_align.value,a=this.text_baseline.value;e.fillStyle=l.color2css(t,n),e.font=r,e.textAlign=i,e.textBaseline=a}font_value(){return`${this.text_font_style.value} ${this.text_font_size.value} ${this.text_font.value}`}}(n.TextScalar=u).__name__="TextScalar";class d extends o.VisualUniforms{get doit(){const{text_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{text_alpha:t}=this;return!t.is_Scalar()||0!=t.value}set_vectorize(e,t){var n=this.text_color.get(t),r=this.text_alpha.get(t),i=this.font_value(t),a=this.text_align.get(t),t=this.text_baseline.get(t);e.fillStyle=l.color2css(n,r),e.font=i,e.textAlign=a,e.textBaseline=t}font_value(e){return`${this.text_font_style.get(e)} ${this.text_font_size.get(e)} ${this.text_font.get(e)}`}}(n.TextVector=d).__name__="TextVector",c.prototype.type="text",c.prototype.attrs=Object.keys(s.Text),u.prototype.type="text",u.prototype.attrs=Object.keys(s.TextScalar),d.prototype.type="text",d.prototype.attrs=Object.keys(s.TextVector)},function(e,t,n,r,i){r();const a=e(1),o=e(47),l=e(52),c=a.__importStar(e(18)),s=a.__importStar(e(48));class u extends o.VisualProperties{constructor(){super(...arguments),this._update_iteration=0}update(){if(this._update_iteration++,this._hatch_image=null,this.doit){const t=this.hatch_color.get_value(),e=this.hatch_alpha.get_value(),n=this.hatch_scale.get_value(),r=this.hatch_pattern.get_value(),i=this.hatch_weight.get_value(),a=e=>{this._hatch_image=e},o=this.hatch_extra.get_value()[r];if(null!=o){const r=o.get_pattern(t,e,n,i);if(r instanceof Promise){const{_update_iteration:t}=this;r.then(e=>{this._update_iteration==t&&(a(e),this.obj.request_render())})}else a(r)}else{const o=this.obj.canvas.create_layer(),s=l.get_pattern(o,r,t,e,n,i);a(s)}}}get doit(){var e=this.hatch_color.get_value(),t=this.hatch_alpha.get_value(),n=this.hatch_pattern.get_value();return!(null==e||0==t||" "==n||"blank"==n||null==n)}set_value(e){var t=this.pattern(e);e.fillStyle=null!=t?t:"transparent"}pattern(e){var t=this._hatch_image;return null==t?null:e.createPattern(t,this.repetition())}repetition(){var e=this.hatch_pattern.get_value(),e=this.hatch_extra.get_value()[e];if(null==e)return"repeat";switch(e.repetition){case"repeat":return"repeat";case"repeat_x":return"repeat-x";case"repeat_y":return"repeat-y";case"no_repeat":return"no-repeat"}}}(n.Hatch=u).__name__="Hatch";class d extends o.VisualUniforms{constructor(){super(...arguments),this._static_doit=!1,this._update_iteration=0}_compute_static_doit(){var e=this.hatch_color.value,t=this.hatch_alpha.value,n=this.hatch_pattern.value;return!(null==e||0==t||" "==n||"blank"==n||null==n)}update(){this._update_iteration++;const t=this.hatch_color.length;if(this._hatch_image=new c.UniformScalar(null,t),this._static_doit=this._compute_static_doit(),this._static_doit){const n=this.hatch_color.value,e=this.hatch_alpha.value,r=this.hatch_scale.value,i=this.hatch_pattern.value,a=this.hatch_weight.value,o=e=>{this._hatch_image=new c.UniformScalar(e,t)},s=this.hatch_extra.value[i];if(null!=s){const t=s.get_pattern(n,e,r,a);if(t instanceof Promise){const{_update_iteration:n}=this;t.then(e=>{this._update_iteration==n&&(o(e),this.obj.request_render())})}else o(t)}else{const t=this.obj.canvas.create_layer(),c=l.get_pattern(t,i,n,e,r,a);o(c)}}}get doit(){return this._static_doit}set_value(e){e.fillStyle=null!==(e=this.pattern(e))&&void 0!==e?e:"transparent"}pattern(e){var t=this._hatch_image.value;return null==t?null:e.createPattern(t,this.repetition())}repetition(){var e=this.hatch_pattern.value,e=this.hatch_extra.value[e];if(null==e)return"repeat";switch(e.repetition){case"repeat":return"repeat";case"repeat_x":return"repeat-x";case"repeat_y":return"repeat-y";case"no_repeat":return"no-repeat"}}}(n.HatchScalar=d).__name__="HatchScalar";class h extends o.VisualUniforms{constructor(){super(...arguments),this._static_doit=!1,this._update_iteration=0}_compute_static_doit(){const{hatch_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{hatch_alpha:t}=this;if(t.is_Scalar()&&0==t.value)return!1;const{hatch_pattern:n}=this;if(n.is_Scalar()){const e=n.value;if(" "==e||"blank"==e||null==e)return!1}return!0}update(){this._update_iteration++;const n=this.hatch_color.length;if(this._hatch_image=new c.UniformScalar(null,n),this._static_doit=this._compute_static_doit(),this._static_doit){var e=(e,t,n,r,i,a)=>{const o=this.hatch_extra.value[e];if(null!=o){const e=o.get_pattern(t,n,r,i);if(e instanceof Promise){const{_update_iteration:t}=this;e.then(e=>{this._update_iteration==t&&(a(e),this.obj.request_render())})}else a(e)}else{const o=this.obj.canvas.create_layer(),s=l.get_pattern(o,e,t,n,r,i);a(s)}};if(this.hatch_color.is_Scalar()&&this.hatch_alpha.is_Scalar()&&this.hatch_scale.is_Scalar()&&this.hatch_pattern.is_Scalar()&&this.hatch_weight.is_Scalar()){var t=this.hatch_color.value,r=this.hatch_alpha.value,i=this.hatch_scale.value;e(this.hatch_pattern.value,t,r,i,this.hatch_weight.value,e=>{this._hatch_image=new c.UniformScalar(e,n)})}else{const a=new Array(n);a.fill(null),this._hatch_image=new c.UniformVector(a);for(let t=0;t<n;t++){const n=this.hatch_color.get(t),o=this.hatch_alpha.get(t),s=this.hatch_scale.get(t);e(this.hatch_pattern.get(t),n,o,s,this.hatch_weight.get(t),e=>{a[t]=e})}}}}get doit(){return this._static_doit}set_vectorize(e,t){e.fillStyle=null!==(t=this.pattern(e,t))&&void 0!==t?t:"transparent"}pattern(e,t){var n=this._hatch_image.get(t);return null==n?null:e.createPattern(n,this.repetition(t))}repetition(e){e=this.hatch_pattern.get(e),e=this.hatch_extra.value[e];if(null==e)return"repeat";switch(e.repetition){case"repeat":return"repeat";case"repeat_x":return"repeat-x";case"repeat_y":return"repeat-y";case"no_repeat":return"no-repeat"}}}(n.HatchVector=h).__name__="HatchVector",u.prototype.type="hatch",u.prototype.attrs=Object.keys(s.Hatch),d.prototype.type="hatch",d.prototype.attrs=Object.keys(s.HatchScalar),h.prototype.type="hatch",h.prototype.attrs=Object.keys(s.HatchVector)},function(e,t,u,n,r){n();const d=e(22);function h(e,t,n){e.moveTo(0,n+.5),e.lineTo(t,n+.5),e.stroke()}function f(e,t,n){e.moveTo(n+.5,0),e.lineTo(n+.5,t),e.stroke()}function p(e,t){e.moveTo(0,t),e.lineTo(t,0),e.stroke(),e.moveTo(0,0),e.lineTo(t,t),e.stroke()}u.hatch_aliases={" ":"blank",".":"dot",o:"ring","-":"horizontal_line","|":"vertical_line","+":"cross",'"':"horizontal_dash",":":"vertical_dash","@":"spiral","/":"right_diagonal_line","\\":"left_diagonal_line",x:"diagonal_cross",",":"right_diagonal_dash","`":"left_diagonal_dash",v:"horizontal_wave",">":"vertical_wave","*":"criss_cross"},u.get_pattern=function(e,t,n,r,c,i){return e.resize(c,c),e.prepare(),function(t,n,r,e,i){var a=c,o=a/2,s=o/2,e=d.color2css(r,e);switch(t.strokeStyle=e,t.fillStyle=e,t.lineCap="square",t.lineWidth=i,null!==(i=u.hatch_aliases[n])&&void 0!==i?i:n){case"blank":break;case"dot":t.arc(o,o,o/2,0,2*Math.PI,!0),t.fill();break;case"ring":t.arc(o,o,o/2,0,2*Math.PI,!0),t.stroke();break;case"horizontal_line":h(t,a,o);break;case"vertical_line":f(t,a,o);break;case"cross":h(t,a,o),f(t,a,o);break;case"horizontal_dash":h(t,o,o);break;case"vertical_dash":f(t,o,o);break;case"spiral":{const n=a/30;t.moveTo(o,o);for(let e=0;e<360;e++){const r=.1*e,l=o+n*r*Math.cos(r),d=o+n*r*Math.sin(r);t.lineTo(l,d)}t.stroke();break}case"right_diagonal_line":t.moveTo(.5-s,a),t.lineTo(.5+s,0),t.stroke(),t.moveTo(.5+s,a),t.lineTo(3*s+.5,0),t.stroke(),t.moveTo(3*s+.5,a),t.lineTo(5*s+.5,0),t.stroke(),t.stroke();break;case"left_diagonal_line":t.moveTo(.5+s,a),t.lineTo(.5-s,0),t.stroke(),t.moveTo(3*s+.5,a),t.lineTo(.5+s,0),t.stroke(),t.moveTo(5*s+.5,a),t.lineTo(3*s+.5,0),t.stroke(),t.stroke();break;case"diagonal_cross":p(t,a);break;case"right_diagonal_dash":t.moveTo(.5+s,3*s+.5),t.lineTo(3*s+.5,.5+s),t.stroke();break;case"left_diagonal_dash":t.moveTo(.5+s,.5+s),t.lineTo(3*s+.5,3*s+.5),t.stroke();break;case"horizontal_wave":t.moveTo(0,s),t.lineTo(o,3*s),t.lineTo(a,s),t.stroke();break;case"vertical_wave":t.moveTo(s,0),t.lineTo(3*s,o),t.lineTo(s,a),t.stroke();break;case"criss_cross":p(t,a),h(t,a,o),f(t,a,o)}}(e.ctx,t,n,r,i),e.canvas}},function(e,t,n,r,i){r();const a=e(14),o=e(8),s=e(13),l=e(19);class c extends a.HasProps{constructor(e){super(e)}get is_syncable(){return this.syncable}static init_Model(){this.define(({Any:e,Unknown:t,Boolean:n,String:r,Array:i,Dict:a,Nullable:o})=>({tags:[i(t),[]],name:[o(r),null],js_property_callbacks:[a(i(e)),{}],js_event_callbacks:[a(i(e)),{}],subscribed_events:[i(r),[]],syncable:[n,!0]}))}initialize(){super.initialize(),this._js_callbacks=new Map}connect_signals(){super.connect_signals(),this._update_property_callbacks(),this.connect(this.properties.js_property_callbacks.change,()=>this._update_property_callbacks()),this.connect(this.properties.js_event_callbacks.change,()=>this._update_event_callbacks()),this.connect(this.properties.subscribed_events.change,()=>this._update_event_callbacks())}_process_event(t){var e;for(const n of null!==(e=this.js_event_callbacks[t.event_name])&&void 0!==e?e:[])n.execute(t);null!=this.document&&this.subscribed_events.some(e=>e==t.event_name)&&this.document.event_manager.send_event(t)}trigger_event(e){null!=this.document&&(e.origin=this).document.event_manager.trigger(e)}_update_event_callbacks(){null!=this.document?this.document.event_manager.subscribed_models.add(this):l.logger.warn("WARNING: Document not defined for updating event callbacks")}_update_property_callbacks(){const e=e=>{var[t,e=null]=e.split(":");return(null!=e?this.properties[e]:this)[t]};for(var[t,n]of this._js_callbacks){var r=e(t);for(const e of n)this.disconnect(r,e)}this._js_callbacks.clear();for(var[i,a]of s.entries(this.js_property_callbacks)){a=a.map(e=>()=>e.execute(this));this._js_callbacks.set(i,a);var o=e(i);for(const e of a)this.connect(o,e)}}_doc_attached(){s.isEmpty(this.js_event_callbacks)&&0==this.subscribed_events.length||this._update_event_callbacks()}_doc_detached(){this.document.event_manager.subscribed_models.delete(this)}select(t){if(o.isString(t))return[...this.references()].filter(e=>e instanceof c&&e.name===t);if(t.prototype instanceof a.HasProps)return[...this.references()].filter(e=>e instanceof t);throw new Error("invalid selector")}select_one(e){var t=this.select(e);switch(t.length){case 0:return null;case 1:return t[0];default:throw new Error("found more than one object matching given selector")}}}(n.Model=c).__name__="Model",c.init_Model()},function(e,t,n,r,i){r();class a{constructor(e,t){this.x_scale=e,this.y_scale=t,this.x_range=this.x_scale.source_range,this.y_range=this.y_scale.source_range,this.ranges=[this.x_range,this.y_range],this.scales=[this.x_scale,this.y_scale]}map_to_screen(e,t){return[this.x_scale.v_compute(e),this.y_scale.v_compute(t)]}map_from_screen(e,t){return[this.x_scale.v_invert(e),this.y_scale.v_invert(t)]}}(n.CoordinateTransform=a).__name__="CoordinateTransform"},function(e,t,n,r,i){r();const a=e(1),o=e(56),s=e(133),l=e(48),c=e(20),u=e(24),d=e(122),h=a.__importStar(e(18)),f=e(10);class p extends o.DataAnnotationView{async lazy_initialize(){await super.lazy_initialize();var{start:e,end:t}=this.model;null!=e&&(this.start=await d.build_view(e,{parent:this})),null!=t&&(this.end=await d.build_view(t,{parent:this}))}set_data(e){var t;super.set_data(e),null===(t=this.start)||void 0===t||t.set_data(e),null===(t=this.end)||void 0===t||t.set_data(e)}remove(){var e;null===(e=this.start)||void 0===e||e.remove(),null===(e=this.end)||void 0===e||e.remove(),super.remove()}map_data(){const{frame:e}=this.plot_view;"data"==this.model.start_units?(this._sx_start=this.coordinates.x_scale.v_compute(this._x_start),this._sy_start=this.coordinates.y_scale.v_compute(this._y_start)):(this._sx_start=e.bbox.xview.v_compute(this._x_start),this._sy_start=e.bbox.yview.v_compute(this._y_start)),"data"==this.model.end_units?(this._sx_end=this.coordinates.x_scale.v_compute(this._x_end),this._sy_end=this.coordinates.y_scale.v_compute(this._y_end)):(this._sx_end=e.bbox.xview.v_compute(this._x_end),this._sy_end=e.bbox.yview.v_compute(this._y_end));const{_sx_start:t,_sy_start:n,_sx_end:r,_sy_end:i}=this,a=t.length,o=this._angles=new u.ScreenArray(a);for(let e=0;e<a;e++)o[e]=Math.PI/2+f.atan2([t[e],n[e]],[r[e],i[e]])}paint(n){const{start:r,end:i}=this,{_sx_start:a,_sy_start:o,_sx_end:s,_sy_end:l,_angles:c}=this,{x:u,y:d,width:h,height:f}=this.plot_view.frame.bbox;for(let e=0,t=a.length;e<t;e++)null!=i&&(n.save(),n.translate(s[e],l[e]),n.rotate(c[e]),i.render(n,e),n.restore()),null!=r&&(n.save(),n.translate(a[e],o[e]),n.rotate(c[e]+Math.PI),r.render(n,e),n.restore()),this.visuals.line.doit&&(n.save(),null==r&&null==i||(n.beginPath(),n.rect(u,d,h,f),null!=i&&(n.save(),n.translate(s[e],l[e]),n.rotate(c[e]),i.clip(n,e),n.restore()),null!=r&&(n.save(),n.translate(a[e],o[e]),n.rotate(c[e]+Math.PI),r.clip(n,e),n.restore()),n.closePath(),n.clip()),this.visuals.line.set_vectorize(n,e),n.beginPath(),n.moveTo(a[e],o[e]),n.lineTo(s[e],l[e]),n.stroke(),n.restore())}}(n.ArrowView=p).__name__="ArrowView";class m extends o.DataAnnotation{constructor(e){super(e)}static init_Arrow(){this.prototype.default_view=p,this.mixins(l.LineVector),this.define(({Ref:e,Nullable:t})=>({x_start:[h.XCoordinateSpec,{field:"x_start"}],y_start:[h.YCoordinateSpec,{field:"y_start"}],start_units:[c.SpatialUnits,"data"],start:[t(e(s.ArrowHead)),null],x_end:[h.XCoordinateSpec,{field:"x_end"}],y_end:[h.YCoordinateSpec,{field:"y_end"}],end_units:[c.SpatialUnits,"data"],end:[t(e(s.ArrowHead)),()=>new s.OpenHead]}))}}(n.Arrow=m).__name__="Arrow",m.init_Arrow()},function(e,t,n,r,i){r();const a=e(1),o=e(40),s=e(57),l=e(130),c=e(65),u=a.__importStar(e(18));class d extends o.AnnotationView{constructor(){super(...arguments),this._initial_set_data=!1}connect_signals(){super.connect_signals();var e=()=>{this.set_data(this.model.source),this.request_render()};this.connect(this.model.change,e),this.connect(this.model.source.streaming,e),this.connect(this.model.source.patching,e),this.connect(this.model.source.change,e)}set_data(e){var t;for(const n of this.model)(n instanceof u.VectorSpec||n instanceof u.ScalarSpec)&&(n instanceof u.BaseCoordinateSpec?(t=n.array(e),this[`_${n.attr}`]=t):(t=n.uniform(e),this[`${n.attr}`]=t));this.plot_model.use_map&&(null!=this._x&&c.inplace.project_xy(this._x,this._y),null!=this._xs&&c.inplace.project_xsys(this._xs,this._ys));for(const e of this.visuals)e.update()}_render(){this._initial_set_data||(this.set_data(this.model.source),this._initial_set_data=!0),this.map_data(),this.paint(this.layer.ctx)}}(n.DataAnnotationView=d).__name__="DataAnnotationView";class h extends o.Annotation{constructor(e){super(e)}static init_DataAnnotation(){this.define(({Ref:e})=>({source:[e(s.ColumnarDataSource),()=>new l.ColumnDataSource]}))}}(n.DataAnnotation=h).__name__="DataAnnotation",h.init_DataAnnotation()},function(e,t,n,r,i){r();const a=e(58),o=e(15),s=e(19),l=e(60),c=e(8),u=e(9),d=e(13),h=e(59),f=e(129),p=e(29);class m extends a.DataSource{constructor(e){super(e)}get_array(e){let t=this.data[e];return null==t?this.data[e]=t=[]:c.isArray(t)||(this.data[e]=t=Array.from(t)),t}static init_ColumnarDataSource(){this.define(({Ref:e})=>({selection_policy:[e(f.SelectionPolicy),()=>new f.UnionRenderers]})),this.internal(({AnyRef:e})=>({selection_manager:[e(),e=>new l.SelectionManager({source:e})],inspected:[e(),()=>new h.Selection]}))}initialize(){super.initialize(),this._select=new o.Signal0(this,"select"),this.inspect=new o.Signal(this,"inspect"),this.streaming=new o.Signal0(this,"streaming"),this.patching=new o.Signal(this,"patching")}get_column(e){e=this.data[e];return null!=e?e:null}columns(){return d.keys(this.data)}get_length(e=!0){const t=u.uniq(d.values(this.data).map(e=>p.is_NDArray(e)?e.shape[0]:e.length));switch(t.length){case 0:return null;case 1:return t[0];default:var n="data source has columns of inconsistent lengths";if(e)return s.logger.warn(n),t.sort()[0];throw new Error(n)}}get length(){var e;return null!==(e=this.get_length())&&void 0!==e?e:0}clear(){const e={};for(const t of this.columns())e[t]=new this.data[t].constructor(0);this.data=e}}(n.ColumnarDataSource=m).__name__="ColumnarDataSource",m.init_ColumnarDataSource()},function(e,t,n,r,i){r();const a=e(53),o=e(59);class s extends a.Model{constructor(e){super(e)}static init_DataSource(){this.define(({Ref:e})=>({selected:[e(o.Selection),()=>new o.Selection]}))}}(n.DataSource=s).__name__="DataSource",s.init_DataSource()},function(e,t,n,r,i){r();const a=e(53),o=e(9),s=e(13);class l extends a.Model{constructor(e){super(e)}get_view(){return this.view}static init_Selection(){this.define(({Int:e,Array:t,Dict:n})=>({indices:[t(e),[]],line_indices:[t(e),[]],multiline_indices:[n(t(e)),{}]})),this.internal(({Int:e,Array:t,AnyRef:n,Struct:r,Nullable:i})=>({selected_glyphs:[t(n()),[]],view:[i(n()),null],image_indices:[t(r({index:e,dim1:e,dim2:e,flat_index:e})),[]]}))}get selected_glyph(){return 0<this.selected_glyphs.length?this.selected_glyphs[0]:null}add_to_selected_glyphs(e){this.selected_glyphs.push(e)}update(e,t=0,n="replace"){switch(n){case"replace":this.indices=e.indices,this.line_indices=e.line_indices,this.selected_glyphs=e.selected_glyphs,this.view=e.view,this.multiline_indices=e.multiline_indices,this.image_indices=e.image_indices;break;case"append":this.update_through_union(e);break;case"intersect":this.update_through_intersection(e);break;case"subtract":this.update_through_subtraction(e)}}clear(){this.indices=[],this.line_indices=[],this.multiline_indices={},this.view=null,this.selected_glyphs=[]}is_empty(){return 0==this.indices.length&&0==this.line_indices.length&&0==this.image_indices.length}update_through_union(e){this.indices=o.union(this.indices,e.indices),this.selected_glyphs=o.union(e.selected_glyphs,this.selected_glyphs),this.line_indices=o.union(e.line_indices,this.line_indices),this.view=e.view,this.multiline_indices=s.merge(e.multiline_indices,this.multiline_indices)}update_through_intersection(e){this.indices=o.intersection(this.indices,e.indices),this.selected_glyphs=o.union(e.selected_glyphs,this.selected_glyphs),this.line_indices=o.union(e.line_indices,this.line_indices),this.view=e.view,this.multiline_indices=s.merge(e.multiline_indices,this.multiline_indices)}update_through_subtraction(e){this.indices=o.difference(this.indices,e.indices),this.selected_glyphs=o.union(e.selected_glyphs,this.selected_glyphs),this.line_indices=o.union(e.line_indices,this.line_indices),this.view=e.view,this.multiline_indices=s.merge(e.multiline_indices,this.multiline_indices)}}(n.Selection=l).__name__="Selection",l.init_Selection()},function(e,t,n,r,i){r();const a=e(14),o=e(59),s=e(61),l=e(123);class c extends a.HasProps{constructor(e){super(e),this.inspectors=new Map}static init_SelectionManager(){this.internal(({AnyRef:e})=>({source:[e()]}))}select(e,t,n,r="replace"){const i=[],a=[];for(const t of e)t instanceof s.GlyphRendererView?i.push(t):t instanceof l.GraphRendererView&&a.push(t);let o=!1;for(const e of a){const i=e.model.selection_policy.hit_test(t,e);o=o||e.model.selection_policy.do_selection(i,e.model,n,r)}if(0<i.length){const e=this.source.selection_policy.hit_test(t,i);o=o||this.source.selection_policy.do_selection(e,this.source,n,r)}return o}inspect(e,t){let n=!1;if(e instanceof s.GlyphRendererView){const i=e.hit_test(t);if(null!=i){n=!i.is_empty();const a=this.get_or_create_inspector(e.model);a.update(i,!0,"replace"),this.source.setv({inspected:a},{silent:!0}),this.source.inspect.emit([e.model,{geometry:t}])}}else{var r;e instanceof l.GraphRendererView&&(r=e.model.inspection_policy.hit_test(t,e),n=n||e.model.inspection_policy.do_inspection(r,t,e,!1,"replace"))}return n}clear(e){this.source.selected.clear(),null!=e&&this.get_or_create_inspector(e.model).clear()}get_or_create_inspector(e){let t=this.inspectors.get(e);return null==t&&(t=new o.Selection,this.inspectors.set(e,t)),t}}(n.SelectionManager=c).__name__="SelectionManager",c.init_SelectionManager()},function(e,t,n,r,i){r();const a=e(62),f=e(63),p=e(116),m=e(117),g=e(119),o=e(98),s=e(57),l=e(120),c=e(24),_=e(12),y=e(9),u=e(13),d=e(122),h=e(104),v={fill:{},line:{}},b={fill:{fill_alpha:.3,fill_color:"grey"},line:{line_alpha:.3,line_color:"grey"}},x={fill:{fill_alpha:.2},line:{}};class w extends a.DataRendererView{get glyph_view(){return this.glyph}async lazy_initialize(){await super.lazy_initialize();const n=this.model.glyph;this.glyph=await this.build_glyph_view(n);const r="fill"in this.glyph.visuals,i="line"in this.glyph.visuals,a=Object.assign({},n.attributes);function e(e){var t=u.clone(a);return r&&u.extend(t,e.fill),i&&u.extend(t,e.line),new n.constructor(t)}delete a.id;let{selection_glyph:t}=this.model;null==t?t=e({fill:{},line:{}}):"auto"==t&&(t=e(v)),this.selection_glyph=await this.build_glyph_view(t);let{nonselection_glyph:o}=this.model;null==o?o=e({fill:{},line:{}}):"auto"==o&&(o=e(x)),this.nonselection_glyph=await this.build_glyph_view(o);var{hover_glyph:s}=this.model;null!=s&&(this.hover_glyph=await this.build_glyph_view(s));var{muted_glyph:s}=this.model;null!=s&&(this.muted_glyph=await this.build_glyph_view(s));var s=e(b);this.decimated_glyph=await this.build_glyph_view(s),this.selection_glyph.set_base(this.glyph),this.nonselection_glyph.set_base(this.glyph),null===(s=this.hover_glyph)||void 0===s||s.set_base(this.glyph),null===(s=this.muted_glyph)||void 0===s||s.set_base(this.glyph),this.decimated_glyph.set_base(this.glyph),this.set_data()}async build_glyph_view(e){return d.build_view(e,{parent:this})}remove(){var e;this.glyph.remove(),this.selection_glyph.remove(),this.nonselection_glyph.remove(),null===(e=this.hover_glyph)||void 0===e||e.remove(),null===(e=this.muted_glyph)||void 0===e||e.remove(),this.decimated_glyph.remove(),super.remove()}connect_signals(){super.connect_signals();const e=()=>this.request_render(),t=()=>this.update_data();this.connect(this.model.change,e),this.connect(this.glyph.model.change,t),this.connect(this.selection_glyph.model.change,t),this.connect(this.nonselection_glyph.model.change,t),null!=this.hover_glyph&&this.connect(this.hover_glyph.model.change,t),null!=this.muted_glyph&&this.connect(this.muted_glyph.model.change,t),this.connect(this.decimated_glyph.model.change,t),this.connect(this.model.data_source.change,t),this.connect(this.model.data_source.streaming,t),this.connect(this.model.data_source.patching,e=>this.update_data(e)),this.connect(this.model.data_source.selected.change,e),this.connect(this.model.data_source._select,e),null!=this.hover_glyph&&this.connect(this.model.data_source.inspect,e),this.connect(this.model.properties.view.change,t),this.connect(this.model.view.properties.indices.change,t),this.connect(this.model.view.properties.masked.change,()=>this.set_visuals()),this.connect(this.model.properties.visible.change,()=>this.plot_view.invalidate_dataranges=!0);var{x_ranges:n,y_ranges:r}=this.plot_view.frame;for(const[,e]of n)e instanceof h.FactorRange&&this.connect(e.change,t);for(const[,e]of r)e instanceof h.FactorRange&&this.connect(e.change,t);var{transformchange:n,exprchange:r}=this.model.glyph;this.connect(n,t),this.connect(r,t)}_update_masked_indices(){var e=this.glyph.mask_data();return this.model.view.masked=e}update_data(e){this.set_data(e),this.request_render()}set_data(e){var t=this.model.data_source;this.all_indices=this.model.view.indices;var{all_indices:n}=this;this.glyph.set_data(t,n,e),this.set_visuals(),this._update_masked_indices();var{lod_factor:r}=this.plot_model,i=this.all_indices.count;this.decimated=new c.Indices(i);for(let e=0;e<i;e+=r)this.decimated.set(e);this.plot_view.invalidate_dataranges=!0}set_visuals(){var e,t=this.model.data_source,{all_indices:n}=this;this.glyph.set_visuals(t,n),this.decimated_glyph.set_visuals(t,n),null===(e=this.selection_glyph)||void 0===e||e.set_visuals(t,n),null===(e=this.nonselection_glyph)||void 0===e||e.set_visuals(t,n),null===(e=this.hover_glyph)||void 0===e||e.set_visuals(t,n),null===(e=this.muted_glyph)||void 0===e||e.set_visuals(t,n)}get has_webgl(){return this.glyph.has_webgl}_render(){const e=this.has_webgl;this.glyph.map_data();const t=[...this.all_indices];let n=[...this._update_masked_indices()];const{ctx:r}=this.layer;r.save();const{selected:i}=this.model.data_source;var a=!i||i.is_empty()?[]:this.glyph instanceof f.LineView&&i.selected_glyph===this.glyph.model?this.model.view.convert_indices_from_subset(n):i.indices;const{inspected:o}=this.model.data_source,s=new Set(!o||o.is_empty()?[]:o.selected_glyph?this.model.view.convert_indices_from_subset(n):0<o.indices.length?o.indices:Object.keys(o.multiline_indices).map(e=>parseInt(e))),l=_.filter(n,e=>s.has(t[e])),{lod_threshold:c}=this.plot_model;let u,d,h;if(h=(d=null!=this.model.document&&0<this.model.document.interactive_duration()&&!e&&null!=c&&t.length>c?(n=[...this.decimated],u=this.decimated_glyph,this.decimated_glyph):(u=this.model.muted&&null!=this.muted_glyph?this.muted_glyph:this.glyph,this.nonselection_glyph),this.selection_glyph),null!=this.hover_glyph&&l.length&&(n=y.difference(n,l)),a.length){const e={};for(const t of a)e[t]=!0;const i=new Array,p=new Array;if(this.glyph instanceof f.LineView)for(const n of t)(null!=e[n]?i:p).push(n);else for(const r of n)(null!=e[t[r]]?i:p).push(r);d.render(r,p),h.render(r,i),null!=this.hover_glyph&&(this.glyph instanceof f.LineView?this.hover_glyph.render(r,this.model.view.convert_indices_from_subset(l)):this.hover_glyph.render(r,l))}else if(this.glyph instanceof f.LineView)this.hover_glyph&&l.length?this.hover_glyph.render(r,this.model.view.convert_indices_from_subset(l)):u.render(r,t);else if(this.glyph instanceof p.PatchView||this.glyph instanceof m.HAreaView||this.glyph instanceof g.VAreaView)if(0==o.selected_glyphs.length||null==this.hover_glyph)u.render(r,t);else for(const e of o.selected_glyphs)e==this.glyph.model&&this.hover_glyph.render(r,t);else u.render(r,n),this.hover_glyph&&l.length&&this.hover_glyph.render(r,l);r.restore()}draw_legend(e,t,n,r,i,a,o,s){0!=this.glyph.data_size&&(null==s&&(s=this.model.get_reference_point(a,o)),this.glyph.draw_legend_for_index(e,{x0:t,x1:n,y0:r,y1:i},s))}hit_test(e){if(!this.model.visible)return null;e=this.glyph.hit_test(e);return null==e?null:this.model.view.convert_selection_from_subset(e)}}(n.GlyphRendererView=w).__name__="GlyphRendererView";class T extends a.DataRenderer{constructor(e){super(e)}static init_GlyphRenderer(){this.prototype.default_view=w,this.define(({Boolean:e,Auto:t,Or:n,Ref:r,Null:i,Nullable:a})=>({data_source:[r(s.ColumnarDataSource)],view:[r(l.CDSView),e=>new l.CDSView({source:e.data_source})],glyph:[r(o.Glyph)],hover_glyph:[a(r(o.Glyph)),null],nonselection_glyph:[n(r(o.Glyph),t,i),"auto"],selection_glyph:[n(r(o.Glyph),t,i),"auto"],muted_glyph:[a(r(o.Glyph)),null],muted:[e,!1]}))}initialize(){super.initialize(),this.view.source!=this.data_source&&(this.view.source=this.data_source,this.view.compute_indices())}get_reference_point(e,t){if(null!=e){var n=this.data_source.get_column(e);if(null!=n)for(const[e,r]of Object.entries(this.view.indices_map))if(n[parseInt(e)]==t)return r}return 0}get_selection_manager(){return this.data_source.selection_manager}}(n.GlyphRenderer=T).__name__="GlyphRenderer",T.init_GlyphRenderer()},function(e,t,n,r,i){r();e=e(41);class a extends e.RendererView{get xscale(){return this.coordinates.x_scale}get yscale(){return this.coordinates.y_scale}}(n.DataRendererView=a).__name__="DataRendererView";class o extends e.Renderer{constructor(e){super(e)}static init_DataRenderer(){this.override({level:"glyph"})}get selection_manager(){return this.get_selection_manager()}}n.DataRenderer=o,o.__name__="DataRenderer",o.init_DataRenderer()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(106),l=e(108),c=a.__importStar(e(48)),u=a.__importStar(e(107)),d=e(59);class h extends o.XYGlyphView{initialize(){super.initialize();var{webgl:e}=this.renderer.plot_view.canvas_view;null!=e&&(this.glglyph=new l.LineGL(e.gl,this))}_render(e,t,n){var{sx:r,sy:i}=null!=n?n:this;let a=!0;e.beginPath();for(const n of t){const t=r[n],o=i[n];isFinite(t+o)?a?(e.moveTo(t,o),a=!1):e.lineTo(t,o):a=!0}this.visuals.line.set_value(e),e.stroke()}_hit_point(e){const n=new d.Selection,r={x:e.sx,y:e.sy};let i=9999;var a=Math.max(2,this.line_width.value/2);for(let e=0,t=this.sx.length-1;e<t;e++){var o={x:this.sx[e],y:this.sy[e]},s={x:this.sx[e+1],y:this.sy[e+1]},s=u.dist_to_segment(r,o,s);s<a&&s<i&&(i=s,n.add_to_selected_glyphs(this.model),n.view=this,n.line_indices=[e])}return n}_hit_span(e){const{sx:t,sy:n}=e,r=new d.Selection;let i,a;a="v"==e.direction?(i=this.renderer.yscale.invert(n),this._y):(i=this.renderer.xscale.invert(t),this._x);for(let e=0,t=a.length-1;e<t;e++)(a[e]<=i&&i<=a[e+1]||a[e+1]<=i&&i<=a[e])&&(r.add_to_selected_glyphs(this.model),r.view=this,r.line_indices.push(e));return r}get_interpolation_hit(e,t){var[n,r,i,e]=[this._x[e],this._y[e],this._x[e+1],this._y[e+1]];return s.line_interpolation(this.renderer,t,n,r,i,e)}draw_legend_for_index(e,t,n){s.generic_line_scalar_legend(this.visuals,e,t)}}(n.LineView=h).__name__="LineView";class f extends o.XYGlyph{constructor(e){super(e)}static init_Line(){this.prototype.default_view=h,this.mixins(c.LineScalar)}}(n.Line=f).__name__="Line",f.init_Line()},function(e,t,n,r,i){r();const a=e(1),o=e(65),s=a.__importStar(e(18)),l=e(98);class c extends l.GlyphView{_project_data(){o.inplace.project_xy(this._x,this._y)}_index_data(t){const{_x:n,_y:r,data_size:i}=this;for(let e=0;e<i;e++){const i=n[e],a=r[e];isNaN(i+a)||!isFinite(i+a)?t.add_empty():t.add(i,a,i,a)}}scenterxy(e){return[this.sx[e],this.sy[e]]}}(n.XYGlyphView=c).__name__="XYGlyphView";class u extends l.Glyph{constructor(e){super(e)}static init_XYGlyph(){this.define(({})=>({x:[s.XCoordinateSpec,{field:"x"}],y:[s.YCoordinateSpec,{field:"y"}]}))}}(n.XYGlyph=u).__name__="XYGlyph",u.init_XYGlyph()},function(e,t,c,n,r){n();const i=e(1),a=i.__importDefault(e(66)),o=i.__importDefault(e(67)),s=e(24),l=new o.default("GOOGLE"),u=new o.default("WGS84"),d=a.default(u,l);c.wgs84_mercator={compute:(e,t)=>isFinite(e)&&isFinite(t)?d.forward([e,t]):[NaN,NaN],invert:(e,t)=>isFinite(e)&&isFinite(t)?d.inverse([e,t]):[NaN,NaN]};const h={lon:[-20026376.39,20026376.39],lat:[-20048966.1,20048966.1]},f={lon:[-180,180],lat:[-85.06,85.06]},{min:p,max:m}=Math;function g(e,t){const n=p(e.length,t.length),r=s.infer_type(e,t),i=new r(n),a=new r(n);return c.inplace.project_xy(e,t,i,a),[i,a]}function _(t,n,r,i){const a=p(t.length,n.length);r=null!=r?r:t,i=null!=i?i:n;for(let e=0;e<a;e++){const a=t[e],o=n[e],[s,l]=c.wgs84_mercator.compute(a,o);r[e]=s,i[e]=l}}c.clip_mercator=function(e,t,n){var[r,n]=h[n];return[m(e,r),p(t,n)]},c.in_bounds=function(e,t){var[n,t]=f[t];return n<e&&e<t},(e=c.inplace||(c.inplace={})).project_xy=_,e.project_xsys=function(t,n,r,i){var a=p(t.length,n.length);r=null!=r?r:t,i=null!=i?i:n;for(let e=0;e<a;e++)_(t[e],n[e],r[e],i[e])},c.project_xy=g,c.project_xsys=function(t,n){const r=p(t.length,n.length),i=new Array(r),a=new Array(r);for(let e=0;e<r;e++){const[r,o]=g(t[e],n[e]);i[e]=r,a[e]=o}return[i,a]}},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(67)),s=a.__importDefault(e(92));var l=o.default("WGS84");function c(t,n,r){var i,e;return Array.isArray(r)?(e=s.default(t,n,r)||{x:NaN,y:NaN},2<r.length?void 0!==t.name&&"geocent"===t.name||void 0!==n.name&&"geocent"===n.name?("number"==typeof e.z?[e.x,e.y,e.z]:[e.x,e.y,r[2]]).concat(r.splice(3)):[e.x,e.y].concat(r.splice(2)):[e.x,e.y]):(i=s.default(t,n,r),2===(e=Object.keys(r)).length||e.forEach(function(e){if(void 0!==t.name&&"geocent"===t.name||void 0!==n.name&&"geocent"===n.name){if("x"===e||"y"===e||"z"===e)return}else if("x"===e||"y"===e)return;i[e]=r[e]}),i)}function u(e){return e instanceof o.default?e:e.oProj||o.default(e)}n.default=function(t,n,e){t=u(t);var r=!1;return void 0===n?(n=t,t=l,r=!0):void 0===n.x&&!Array.isArray(n)||(e=n,n=t,t=l,r=!0),n=u(n),e?c(t,n,e):(e={forward:function(e){return c(t,n,e)},inverse:function(e){return c(n,t,e)}},r&&(e.oProj=n),e)}},function(e,t,n,r,i){r();const a=e(1),s=a.__importDefault(e(68)),l=a.__importDefault(e(79)),o=a.__importDefault(e(80)),c=e(88),u=a.__importDefault(e(90)),d=a.__importDefault(e(91)),h=a.__importDefault(e(75));function f(e,t){if(!(this instanceof f))return new f(e);t=t||function(e){if(e)throw e};var n,r,i,a,o=s.default(e);"object"==typeof o&&(n=f.projections.get(o.projName))?(!o.datumCode||"none"===o.datumCode||(a=h.default(u.default,o.datumCode))&&(o.datum_params=a.towgs84?a.towgs84.split(","):null,o.ellps=a.ellipse,o.datumName=a.datumName||o.datumCode),o.k0=o.k0||1,o.axis=o.axis||"enu",o.ellps=o.ellps||"wgs84",r=c.sphere(o.a,o.b,o.rf,o.ellps,o.sphere),i=c.eccentricity(r.a,r.b,r.rf,o.R_A),a=o.datum||d.default(o.datumCode,o.datum_params,r.a,r.b,i.es,i.ep2),l.default(this,o),l.default(this,n),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=i.es,this.e=i.e,this.ep2=i.ep2,this.datum=a,this.init(),t(null,this)):t(e)}f.projections=o.default,f.projections.start(),n.default=f},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(69)),s=a.__importDefault(e(76)),l=a.__importDefault(e(71)),c=a.__importDefault(e(75));var u=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],d=["3857","900913","3785","102113"];n.default=function(e){if("string"!=typeof e)return e;if(e in o.default)return o.default[e];if(r=e,u.some(function(e){return-1<r.indexOf(e)})){var t=s.default(e);if(function(e){e=c.default(e,"authority");if(e){e=c.default(e,"epsg");return e&&-1<d.indexOf(e)}}(t))return o.default["EPSG:3857"];var n=function(e){e=c.default(e,"extension");if(e)return c.default(e,"proj4")}(t);return n?l.default(n):t}var r;return"+"===e[0]?l.default(e):void 0}},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(70)),s=a.__importDefault(e(71)),l=a.__importDefault(e(76));function c(e){var t=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?c[e]=s.default(arguments[1]):c[e]=l.default(arguments[1]):c[e]=n}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?c.apply(t,e):c(e)});if("string"==typeof e){if(e in c)return c[e]}else"EPSG"in e?c["EPSG:"+e.EPSG]=e:"ESRI"in e?c["ESRI:"+e.ESRI]=e:"IAU2000"in e?c["IAU2000:"+e.IAU2000]=e:console.log(e)}}o.default(c),n.default=c},function(e,t,n,r,i){r(),n.default=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}},function(e,t,n,r,i){r();const a=e(1),s=e(72),l=a.__importDefault(e(73)),c=a.__importDefault(e(74)),u=a.__importDefault(e(75));n.default=function(e){var t,n,r,i={},a=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){t=t.split("=");return t.push(!0),e[t[0].toLowerCase()]=t[1],e},{}),o={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*s.D2R},lat_1:function(e){i.lat1=e*s.D2R},lat_2:function(e){i.lat2=e*s.D2R},lat_ts:function(e){i.lat_ts=e*s.D2R},lon_0:function(e){i.long0=e*s.D2R},lon_1:function(e){i.long1=e*s.D2R},lon_2:function(e){i.long2=e*s.D2R},alpha:function(e){i.alpha=parseFloat(e)*s.D2R},lonc:function(e){i.longc=e*s.D2R},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e;e=u.default(c.default,e);e&&(i.to_meter=e.to_meter)},from_greenwich:function(e){i.from_greenwich=e*s.D2R},pm:function(e){var t=u.default(l.default,e);i.from_greenwich=(t||parseFloat(e))*s.D2R},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(i.axis=e)}};for(t in a)n=a[t],t in o?"function"==typeof(r=o[t])?r(n):i[r]=n:i[t]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}},function(e,t,n,r,i){r(),n.PJD_3PARAM=1,n.PJD_7PARAM=2,n.PJD_WGS84=4,n.PJD_NODATUM=5,n.SEC_TO_RAD=484813681109536e-20,n.HALF_PI=Math.PI/2,n.SIXTH=.16666666666666666,n.RA4=.04722222222222222,n.RA6=.022156084656084655,n.EPSLN=1e-10,n.D2R=.017453292519943295,n.R2D=57.29577951308232,n.FORTPI=Math.PI/4,n.TWO_PI=2*Math.PI,n.SPI=3.14159265359},function(e,t,n,r,i){r();r={};(n.default=r).greenwich=0,r.lisbon=-9.131906111111,r.paris=2.337229166667,r.bogota=-74.080916666667,r.madrid=-3.687938888889,r.rome=12.452333333333,r.bern=7.439583333333,r.jakarta=106.807719444444,r.ferro=-17.666666666667,r.brussels=4.367975,r.stockholm=18.058277777778,r.athens=23.7163375,r.oslo=10.722916666667},function(e,t,n,r,i){r(),n.default={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}},function(e,t,n,r,i){r();var o=/[\s_\-\/\(\)]/g;n.default=function(e,t){if(e[t])return e[t];for(var n,r=Object.keys(e),i=t.toLowerCase().replace(o,""),a=-1;++a<r.length;)if((n=r[a]).toLowerCase().replace(o,"")===i)return e[n]}},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(77)),s=e(78);function l(e){return.017453292519943295*e}n.default=function(e){var t=o.default(e),n=t.shift(),e=t.shift();t.unshift(["name",e]),t.unshift(["type",n]);n={};return s.sExpr(t,n),function(i){if("GEOGCS"===i.type?i.projName="longlat":"LOCAL_CS"===i.type?(i.projName="identity",i.local=!0):"object"==typeof i.PROJECTION?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",t=0,n=i.AXIS.length;t<n;++t){var r=i.AXIS[t][0].toLowerCase();-1!==r.indexOf("north")?e+="n":-1!==r.indexOf("south")?e+="s":-1!==r.indexOf("east")?e+="e":-1!==r.indexOf("west")&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),"metre"===i.units&&(i.units="meter"),i.UNIT.convert&&("GEOGCS"===i.type?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var a=i.GEOGCS;function o(e){return e*(i.to_meter||1)}(a="GEOGCS"===i.type?i:a)&&(a.DATUM?i.datumCode=a.DATUM.name.toLowerCase():i.datumCode=a.name.toLowerCase(),"d_"===i.datumCode.slice(0,2)&&(i.datumCode=i.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==i.datumCode&&"new_zealand_1949"!==i.datumCode||(i.datumCode="nzgd49"),"wgs_1984"!==i.datumCode&&"world_geodetic_system_1984"!==i.datumCode||("Mercator_Auxiliary_Sphere"===i.PROJECTION&&(i.sphere=!0),i.datumCode="wgs84"),"_ferro"===i.datumCode.slice(-6)&&(i.datumCode=i.datumCode.slice(0,-6)),"_jakarta"===i.datumCode.slice(-8)&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(i.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===i.ellps.toLowerCase().slice(0,13)&&(i.ellps="intl"),i.a=a.DATUM.SPHEROID.a,i.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(i.datum_params=a.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),"ch1903+"===i.datumCode&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",l],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",l],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",l],["lat0","latitude_of_origin",l],["lat0","standard_parallel_1",l],["lat1","standard_parallel_1",l],["lat2","standard_parallel_2",l],["azimuth","Azimuth"],["alpha","azimuth",l],["srsCode","name"]].forEach(function(e){var t,n=i,r=(t=e)[0],e=t[1];!(r in n)&&e in n&&(n[r]=n[e],3===t.length&&(n[r]=t[2](n[r])))}),i.long0||!i.longc||"Albers_Conic_Equal_Area"!==i.projName&&"Lambert_Azimuthal_Equal_Area"!==i.projName||(i.long0=i.longc),i.lat_ts||!i.lat1||"Stereographic_South_Pole"!==i.projName&&"Polar Stereographic (variant B)"!==i.projName||(i.lat0=l(0<i.lat1?90:-90),i.lat_ts=i.lat1)}(n),n}},function(e,t,n,r,i){r(),n.default=function(e){return new u(e).output()};var a=/\s/,o=/[A-Za-z]/,s=/[A-Za-z84]/,l=/[,\]]/,c=/[\d\.E\-\+]/;function u(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}u.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;a.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},u.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(l.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},u.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},u.prototype.number=function(e){if(!c.test(e)){if(l.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},u.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},u.prototype.keyword=function(e){if(s.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!l.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},u.prototype.neutral=function(e){if(o.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(c.test(e))return this.word=e,void(this.state=3);if(!l.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},u.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)}},function(e,t,n,r,i){function a(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);n=n.reduce(function(e,t){return o(t,e),e},t?{}:e);t&&(e[t]=n)}function o(e,t){if(Array.isArray(e)){var n,r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void o(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r){if("AXIS"===r)return r in t||(t[r]=[]),void t[r].push(e);switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&o(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&o(e[3],t[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void a(t,r,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return o(e,t[r]);return a(t,r,e)}}else t[r]=e;else t[r]=!0}else t[e]=!0}r(),n.sExpr=o},function(e,t,n,r,i){r(),n.default=function(e,t){var n,r;if(e=e||{},!t)return e;for(r in t)void 0!==(n=t[r])&&(e[r]=n);return e}},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(81)),s=a.__importDefault(e(87));var l=[o.default,s.default],c={},u=[];function d(e,t){var n=u.length;return e.names?((u[n]=e).names.forEach(function(e){c[e.toLowerCase()]=n}),this):(console.log(t),!0)}function h(e){if(!e)return!1;e=e.toLowerCase();return void 0!==c[e]&&u[c[e]]?u[c[e]]:void 0}function f(){l.forEach(d)}n.add=d,n.get=h,n.start=f,n.default={start:f,add:d,get:h}},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(82)),s=a.__importDefault(e(83)),l=a.__importDefault(e(85)),c=a.__importDefault(e(86)),u=e(72);function d(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=o.default(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function h(e){var t,n,r=e.x,i=e.y;return 90<i*u.R2D&&i*u.R2D<-90&&180<r*u.R2D&&r*u.R2D<-180||Math.abs(Math.abs(i)-u.HALF_PI)<=u.EPSLN?null:(n=this.sphere?(t=this.x0+this.a*this.k0*s.default(r-this.long0),this.y0+this.a*this.k0*Math.log(Math.tan(u.FORTPI+.5*i))):(n=Math.sin(i),n=l.default(this.e,i,n),t=this.x0+this.a*this.k0*s.default(r-this.long0),this.y0-this.a*this.k0*Math.log(n)),e.x=t,e.y=n,e)}function f(e){var t,n=e.x-this.x0,r=e.y-this.y0;if(this.sphere)t=u.HALF_PI-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{r=Math.exp(-r/(this.a*this.k0));if(-9999===(t=c.default(this.e,r)))return null}return n=s.default(this.long0+n/(this.a*this.k0)),e.x=n,e.y=t,e}n.init=d,n.forward=h,n.inverse=f,n.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],n.default={init:d,forward:h,inverse:f,names:n.names}},function(e,t,n,r,i){r(),n.default=function(e,t,n){t*=e;return n/Math.sqrt(1-t*t)}},function(e,t,n,r,i){r();const a=e(1),o=e(72),s=a.__importDefault(e(84));n.default=function(e){return Math.abs(e)<=o.SPI?e:e-s.default(e)*o.TWO_PI}},function(e,t,n,r,i){r(),n.default=function(e){return e<0?-1:1}},function(e,t,n,r,i){r();const a=e(72);n.default=function(e,t,n){n*=e,n=Math.pow((1-n)/(1+n),.5*e);return Math.tan(.5*(a.HALF_PI-t))/n}},function(e,t,n,r,i){r();const o=e(72);n.default=function(e,t){for(var n,r=.5*e,i=o.HALF_PI-2*Math.atan(t),a=0;a<=15;a++)if(n=e*Math.sin(i),i+=n=o.HALF_PI-2*Math.atan(t*Math.pow((1-n)/(1+n),r))-i,Math.abs(n)<=1e-10)return i;return-9999}},function(e,t,n,r,i){function a(){}function o(e){return e}r(),n.init=a,n.forward=o,n.inverse=o,n.names=["longlat","identity"],n.default={init:a,forward:o,inverse:o,names:n.names}},function(e,t,n,r,i){r();const a=e(1),s=e(72),o=a.__importStar(e(89)),l=a.__importDefault(e(75));n.eccentricity=function(e,t,n,r){var i=e*e,a=t*t,o=(i-a)/i,t=0;return r?(i=(e*=1-o*(s.SIXTH+o*(s.RA4+o*s.RA6)))*e,o=0):t=Math.sqrt(o),{es:o,e:t,ep2:(i-a)/a}},n.sphere=function(e,t,n,r,i){return e||(e=(r=(r=l.default(o.default,r))||o.WGS84).a,t=r.b,n=r.rf),n&&!t&&(t=(1-1/n)*e),(0===n||Math.abs(e-t)<s.EPSLN)&&(i=!0,t=e),{a:e,b:t,rf:n,sphere:i}}},function(e,t,n,r,i){r();r={};(n.default=r).MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},r.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},r.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},r.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},r.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},r.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},r.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},r.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},r.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},r.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},r.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},r.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},r.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},r.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},r.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},r.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},r.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},r.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},r.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},r.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},r.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},r.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},r.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},r.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},r.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},r.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},r.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},r.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},r.hough={a:6378270,rf:297,ellipseName:"Hough"},r.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},r.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},r.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},r.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},r.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},r.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},r.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},r.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},r.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},r.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},r.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},r.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},n.WGS84=r.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},r.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function(e,t,n,r,i){r();r={};(n.default=r).wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},r.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},r.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},r.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},r.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},r.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},r.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},r.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},r.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},r.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},r.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},r.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},r.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},r.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},r.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},r.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},r.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},function(e,t,n,r,i){r();const s=e(72);n.default=function(e,t,n,r,i,a){var o={};return o.datum_type=void 0===e||"none"===e?s.PJD_NODATUM:s.PJD_WGS84,t&&(o.datum_params=t.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=s.PJD_3PARAM),3<o.datum_params.length&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=s.PJD_7PARAM,o.datum_params[3]*=s.SEC_TO_RAD,o.datum_params[4]*=s.SEC_TO_RAD,o.datum_params[5]*=s.SEC_TO_RAD,o.datum_params[6]=o.datum_params[6]/1e6+1))),o.a=n,o.b=r,o.es=i,o.ep2=a,o}},function(e,t,n,r,i){r();const a=e(1),o=e(72),s=a.__importDefault(e(93)),l=a.__importDefault(e(95)),c=a.__importDefault(e(67)),u=a.__importDefault(e(96)),d=a.__importDefault(e(97));n.default=function e(t,n,r){var i,a;if(Array.isArray(r)&&(r=u.default(r)),d.default(r),t.datum&&n.datum&&(a=n,((i=t).datum.datum_type===o.PJD_3PARAM||i.datum.datum_type===o.PJD_7PARAM)&&"WGS84"!==a.datumCode||(a.datum.datum_type===o.PJD_3PARAM||a.datum.datum_type===o.PJD_7PARAM)&&"WGS84"!==i.datumCode)&&(r=e(t,i=new c.default("WGS84"),r),t=i),"enu"!==t.axis&&(r=l.default(t,!1,r)),"longlat"===t.projName)r={x:r.x*o.D2R,y:r.y*o.D2R,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;return t.from_greenwich&&(r.x+=t.from_greenwich),r=s.default(t.datum,n.datum,r),n.from_greenwich&&(r={x:r.x-n.from_greenwich,y:r.y,z:r.z||0}),"longlat"===n.projName?r={x:r.x*o.R2D,y:r.y*o.R2D,z:r.z||0}:(r=n.forward(r),n.to_meter&&(r={x:r.x/n.to_meter,y:r.y/n.to_meter,z:r.z||0})),"enu"!==n.axis?l.default(n,!0,r):r}},function(e,t,n,r,i){r();const a=e(72),o=e(94);function s(e){return e===a.PJD_3PARAM||e===a.PJD_7PARAM}n.default=function(e,t,n){return!o.compareDatums(e,t)&&e.datum_type!==a.PJD_NODATUM&&t.datum_type!==a.PJD_NODATUM&&(e.es!==t.es||e.a!==t.a||s(e.datum_type)||s(t.datum_type))?(n=o.geodeticToGeocentric(n,e.es,e.a),s(e.datum_type)&&(n=o.geocentricToWgs84(n,e.datum_type,e.datum_params)),s(t.datum_type)&&(n=o.geocentricFromWgs84(n,t.datum_type,t.datum_params)),o.geocentricToGeodetic(n,t.es,t.a,t.b)):n}},function(e,t,n,r,i){r();const b=e(72);n.compareDatums=function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||5e-11<Math.abs(e.es-t.es))&&(e.datum_type===b.PJD_3PARAM?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==b.PJD_7PARAM||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])},n.geodeticToGeocentric=function(e,t,n){var r=e.x,i=e.y,a=e.z||0;if(i<-b.HALF_PI&&i>-1.001*b.HALF_PI)i=-b.HALF_PI;else if(i>b.HALF_PI&&i<1.001*b.HALF_PI)i=b.HALF_PI;else{if(i<-b.HALF_PI)return{x:-1/0,y:-1/0,z:e.z};if(i>b.HALF_PI)return{x:1/0,y:1/0,z:e.z}}return r>Math.PI&&(r-=2*Math.PI),e=Math.sin(i),i=Math.cos(i),{x:((n=n/Math.sqrt(1-t*(e*e)))+a)*i*Math.cos(r),y:(n+a)*i*Math.sin(r),z:(n*(1-t)+a)*e}},n.geocentricToGeodetic=function(e,t,n,r){var i,a,o,s,l,c,u,d,h,f,p,m=e.x,g=e.y,_=e.z||0,y=Math.sqrt(m*m+g*g),v=Math.sqrt(m*m+g*g+_*_);if(y/n<1e-12){if(f=0,v/n<1e-12)return b.HALF_PI,p=-r,{x:e.x,y:e.y,z:e.z}}else f=Math.atan2(g,m);for(i=_/v,s=(a=y/v)*(1-t)*(o=1/Math.sqrt(1-t*(2-t)*a*a)),l=i*o,h=0;h++,d=t*(d=n/Math.sqrt(1-t*l*l))/(d+(p=y*s+_*l-d*(1-t*l*l))),d=(u=i*(o=1/Math.sqrt(1-d*(2-d)*a*a)))*s-(c=a*(1-d)*o)*l,s=c,l=u,1e-24<d*d&&h<30;);return{x:f,y:Math.atan(u/Math.abs(c)),z:p}},n.geocentricToWgs84=function(e,t,n){if(t===b.PJD_3PARAM)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===b.PJD_7PARAM){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],t=n[5],n=n[6];return{x:n*(e.x-t*e.y+s*e.z)+r,y:n*(t*e.x+e.y-o*e.z)+i,z:n*(-s*e.x+o*e.y+e.z)+a}}},n.geocentricFromWgs84=function(e,t,n){if(t===b.PJD_3PARAM)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===b.PJD_7PARAM){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],t=n[5],n=n[6],r=(e.x-r)/n,i=(e.y-i)/n,n=(e.z-a)/n;return{x:r+t*i-s*n,y:-t*r+i+o*n,z:s*r-o*i+n}}}},function(e,t,n,r,i){r(),n.default=function(e,t,n){for(var r,i,a=n.x,o=n.y,s=n.z||0,l={},c=0;c<3;c++)if(!t||2!==c||void 0!==n.z)switch(i=0===c?(r=a,-1!=="ew".indexOf(e.axis[c])?"x":"y"):1===c?(r=o,-1!=="ns".indexOf(e.axis[c])?"y":"x"):(r=s,"z"),e.axis[c]){case"e":l[i]=r;break;case"w":l[i]=-r;break;case"n":l[i]=r;break;case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l}},function(e,t,n,r,i){r(),n.default=function(e){var t={x:e[0],y:e[1]};return 2<e.length&&(t.z=e[2]),3<e.length&&(t.m=e[3]),t}},function(e,t,n,r,i){function a(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}r(),n.default=function(e){a(e.x),a(e.y)}},function(e,t,n,r,i){r();const a=e(1),c=a.__importStar(e(18)),o=a.__importStar(e(99)),s=a.__importStar(e(45)),l=e(42),u=e(53),d=e(19),h=e(24),f=e(8),p=e(100),m=e(12),g=e(26),_=e(101),y=e(104),v=e(59),{abs:b,ceil:x}=Math;class w extends l.View{constructor(){super(...arguments),this._index=null,this._data_size=null,this._nohit_warned=new Set}get renderer(){return this.parent}get has_webgl(){return null!=this.glglyph}get index(){var{_index:e}=this;if(null!=e)return e;throw new Error(`${this}.index_data() wasn't called`)}get data_size(){var{_data_size:e}=this;if(null!=e)return e;throw new Error(`${this}.set_data() wasn't called`)}initialize(){super.initialize(),this.visuals=new s.Visuals(this)}request_render(){this.parent.request_render()}get canvas(){return this.renderer.parent.canvas_view}render(e,t,n){var r;null!=this.glglyph&&(this.renderer.needs_webgl_blit=this.glglyph.render(e,t,null!==(r=this.base)&&void 0!==r?r:this),this.renderer.needs_webgl_blit)||(e.beginPath(),this._render(e,t,null!=n?n:this.base))}has_finished(){return!0}notify_finished(){this.renderer.notify_finished()}_bounds(e){return e}bounds(){return this._bounds(this.index.bbox)}log_bounds(){var{x0:e,x1:t}=this.index.bounds(o.positive_x()),{y0:n,y1:r}=this.index.bounds(o.positive_y());return this._bounds({x0:e,y0:n,x1:t,y1:r})}get_anchor_point(e,t,[n,r]){switch(e){case"center":case"center_center":{const[e,i]=this.scenterxy(t,n,r);return{x:e,y:i}}default:return null}}scenterx(e,t,n){return this.scenterxy(e,t,n)[0]}scentery(e,t,n){return this.scenterxy(e,t,n)[1]}sdist(e,t,n,r="edge",i=!1){const a=t.length,o=new h.ScreenArray(a),s=e.s_compute;if("center"==r)for(let e=0;e<a;e++){const r=t[e],i=n.get(e)/2,a=s(r-i),l=s(r+i);o[e]=b(l-a)}else for(let e=0;e<a;e++){const r=t[e],i=s(r),a=s(r+n.get(e));o[e]=b(a-i)}return i&&m.inplace_map(o,e=>x(e)),o}draw_legend_for_index(e,t,n){}hit_test(e){switch(e.type){case"point":if(null!=this._hit_point)return this._hit_point(e);break;case"span":if(null!=this._hit_span)return this._hit_span(e);break;case"rect":if(null!=this._hit_rect)return this._hit_rect(e);break;case"poly":if(null!=this._hit_poly)return this._hit_poly(e)}return this._nohit_warned.has(e.type)||(d.logger.debug(`'${e.type}' selection not available for ${this.model.type}`),this._nohit_warned.add(e.type)),null}_hit_rect_against_index(e){var{sx0:t,sx1:n,sy0:r,sy1:e}=e,[t,n]=this.renderer.coordinates.x_scale.r_invert(t,n),[r,e]=this.renderer.coordinates.y_scale.r_invert(r,e),e=[...this.index.indices({x0:t,x1:n,y0:r,y1:e})];return new v.Selection({indices:e})}_project_data(){}*_iter_visuals(){for(const e of this.visuals)for(const t of e)(t instanceof c.VectorSpec||t instanceof c.ScalarSpec)&&(yield t)}set_base(e){e!=this&&e instanceof this.constructor&&(this.base=e)}_configure(e,t){Object.defineProperty(this,f.isString(e)?e:e.attr,Object.assign({configurable:!0,enumerable:!0},t))}set_visuals(e,t){var n;for(const n of this._iter_visuals()){const{base:i}=this;if(null!=i){const e=i.model.properties[n.attr];if(null!=e&&g.is_equal(n.get_value(),e.get_value())){this._configure(n,{get:()=>i[`${n.attr}`]});continue}}var r=n.uniform(e).select(t);this._configure(n,{value:r})}for(const e of this.visuals)e.update();null===(n=this.glglyph)||void 0===n||n.set_visuals_changed()}set_data(e,n,r){const{x_range:i,y_range:a}=this.renderer.coordinates,t=new Set(this._iter_visuals());this._data_size=n.count;for(const s of this.model)if((s instanceof c.VectorSpec||s instanceof c.ScalarSpec)&&!t.has(s))if(s instanceof c.BaseCoordinateSpec){const r=s.array(e);let t=n.select(r);const l="x"==s.dimension?i:a;if(l instanceof y.FactorRange)if(s instanceof c.CoordinateSpec)t=l.v_synthetic(t);else if(s instanceof c.CoordinateSeqSpec)for(let e=0;e<t.length;e++)t[e]=l.v_synthetic(t[e]);var o=s instanceof c.CoordinateSeqSpec?p.RaggedArray.from(t,Float64Array):t;this._configure(`_${s.attr}`,{value:o})}else{const r=s.uniform(e).select(n);if(this._configure(s,{value:r}),s instanceof c.DistanceSpec){const e=r.is_Scalar()?r.value:m.max(r.array);this._configure(`max_${s.attr}`,{value:e})}}this.renderer.plot_view.model.use_map&&this._project_data(),this._set_data(null!=r?r:null),null===(r=this.glglyph)||void 0===r||r.set_data_changed(),this.index_data()}_set_data(e){}get _index_size(){return this.data_size}index_data(){const e=new _.SpatialIndex(this._index_size);this._index_data(e),e.finish(),this._index=e}mask_data(){return null==this._mask_data?h.Indices.all_set(this.data_size):this._mask_data()}map_data(){var t,{x_scale:n,y_scale:r}=this.renderer.coordinates;for(const t of this.model)if(t instanceof c.BaseCoordinateSpec){const i="x"==t.dimension?n:r;let e=this[`_${t.attr}`];if(e instanceof p.RaggedArray){const t=i.v_compute(e.array);e=new p.RaggedArray(e.offsets,t)}else e=i.v_compute(e);this[`s${t.attr}`]=e}this._map_data(),null===(t=this.glglyph)||void 0===t||t.set_data_changed()}_map_data(){}}(n.GlyphView=w).__name__="GlyphView";class T extends u.Model{constructor(e){super(e)}}(n.Glyph=T).__name__="Glyph"},function(e,t,n,r,i){r();const a=e(24),o=e(26),{min:s,max:l}=Math;n.empty=function(){return{x0:1/0,y0:1/0,x1:-1/0,y1:-1/0}},n.positive_x=function(){return{x0:Number.MIN_VALUE,y0:-1/0,x1:1/0,y1:1/0}},n.positive_y=function(){return{x0:-1/0,y0:Number.MIN_VALUE,x1:1/0,y1:1/0}},n.union=function(e,t){return{x0:s(e.x0,t.x0),x1:l(e.x1,t.x1),y0:s(e.y0,t.y0),y1:l(e.y1,t.y1)}};class c{constructor(i){if(null==i)this.x0=0,this.y0=0,this.x1=0,this.y1=0;else if("x0"in i){var{x0:e,y0:t,x1:n,y1:r}=i;if(!(e<=n&&t<=r))throw new Error(`invalid bbox {x0: ${e}, y0: ${t}, x1: ${n}, y1: ${r}}`);this.x0=e,this.y0=t,this.x1=n,this.y1=r}else if("x"in i){var{x:e,y:t,width:n,height:r}=i;if(!(0<=n&&0<=r))throw new Error(`invalid bbox {x: ${e}, y: ${t}, width: ${n}, height: ${r}}`);this.x0=e,this.y0=t,this.x1=e+n,this.y1=t+r}else{let e,t,n,r;var a;if("width"in i?"left"in i?(e=i.left,t=e+i.width):"right"in i?(t=i.right,e=t-i.width):(a=i.width/2,e=i.hcenter-a,t=i.hcenter+a):(e=i.left,t=i.right),"height"in i?"top"in i?(n=i.top,r=n+i.height):"bottom"in i?(r=i.bottom,n=r-i.height):(a=i.height/2,n=i.vcenter-a,r=i.vcenter+a):(n=i.top,r=i.bottom),!(e<=t&&n<=r))throw new Error(`invalid bbox {left: ${e}, top: ${n}, right: ${t}, bottom: ${r}}`);this.x0=e,this.y0=n,this.x1=t,this.y1=r}}static from_rect({left:e,right:t,top:n,bottom:r}){return new c({x0:Math.min(e,t),y0:Math.min(n,r),x1:Math.max(e,t),y1:Math.max(n,r)})}equals(e){return this.x0==e.x0&&this.y0==e.y0&&this.x1==e.x1&&this.y1==e.y1}[o.equals](e,t){return t.eq(this.x0,e.x0)&&t.eq(this.y0,e.y0)&&t.eq(this.x1,e.x1)&&t.eq(this.y1,e.y1)}toString(){return`BBox({left: ${this.left}, top: ${this.top}, width: ${this.width}, height: ${this.height}})`}get left(){return this.x0}get top(){return this.y0}get right(){return this.x1}get bottom(){return this.y1}get p0(){return[this.x0,this.y0]}get p1(){return[this.x1,this.y1]}get x(){return this.x0}get y(){return this.y0}get width(){return this.x1-this.x0}get height(){return this.y1-this.y0}get size(){return{width:this.width,height:this.height}}get rect(){var{x0:e,y0:t,x1:n,y1:r}=this;return{p0:{x:e,y:t},p1:{x:n,y:t},p2:{x:n,y:r},p3:{x:e,y:r}}}get box(){var{x:e,y:t,width:n,height:r}=this;return{x:e,y:t,width:n,height:r}}get h_range(){return{start:this.x0,end:this.x1}}get v_range(){return{start:this.y0,end:this.y1}}get ranges(){return[this.h_range,this.v_range]}get aspect(){return this.width/this.height}get hcenter(){return(this.left+this.right)/2}get vcenter(){return(this.top+this.bottom)/2}get area(){return this.width*this.height}relative(){var{width:e,height:t}=this;return new c({x:0,y:0,width:e,height:t})}translate(e,t){var{x:n,y:r,width:i,height:a}=this;return new c({x:e+n,y:t+r,width:i,height:a})}relativize(e,t){return[e-this.x,t-this.y]}contains(e,t){return this.x0<=e&&e<=this.x1&&this.y0<=t&&t<=this.y1}clip(e,t){return e<this.x0?e=this.x0:e>this.x1&&(e=this.x1),t<this.y0?t=this.y0:t>this.y1&&(t=this.y1),[e,t]}grow_by(e){return new c({left:this.left-e,right:this.right+e,top:this.top-e,bottom:this.bottom+e})}shrink_by(e){return new c({left:this.left+e,right:this.right-e,top:this.top+e,bottom:this.bottom-e})}union(e){return new c({x0:s(this.x0,e.x0),y0:s(this.y0,e.y0),x1:l(this.x1,e.x1),y1:l(this.y1,e.y1)})}intersection(e){return this.intersects(e)?new c({x0:l(this.x0,e.x0),y0:l(this.y0,e.y0),x1:s(this.x1,e.x1),y1:s(this.y1,e.y1)}):null}intersects(e){return!(e.x1<this.x0||e.x0>this.x1||e.y1<this.y0||e.y0>this.y1)}get xview(){return{compute:e=>this.left+e,v_compute:t=>{const n=new a.ScreenArray(t.length),r=this.left;for(let e=0;e<t.length;e++)n[e]=r+t[e];return n}}}get yview(){return{compute:e=>this.bottom-e,v_compute:t=>{const n=new a.ScreenArray(t.length),r=this.bottom;for(let e=0;e<t.length;e++)n[e]=r-t[e];return n}}}}(n.BBox=c).__name__="BBox"},function(e,t,n,r,i){r();const a=e(26),o=e(11);class s{constructor(e,t){this.offsets=e,this.array=t}[a.equals](e,t){return t.arrays(this.offsets,e.offsets)&&t.arrays(this.array,e.array)}get length(){return this.offsets.length}clone(){return new s(this.offsets.slice(),this.array.slice())}static from(n,e){const r=n.length;let i=0;const t=(()=>{const t=new Uint32Array(r);for(let e=0;e<r;e++){const r=n[e].length;t[e]=i,i+=r}return i<256?new Uint8Array(t):i<65536?new Uint16Array(t):t})(),a=new e(i);for(let e=0;e<r;e++)a.set(n[e],t[e]);return new s(t,a)}*[Symbol.iterator](){var{offsets:t,length:n}=this;for(let e=0;e<n;e++)yield this.array.subarray(t[e],t[e+1])}_check_bounds(e){o.assert(0<=e&&e<this.length,`Out of bounds: 0 <= ${e} < ${this.length}`)}get(e){this._check_bounds(e);var{offsets:t}=this;return this.array.subarray(t[e],t[e+1])}set(e,t){this._check_bounds(e),this.array.set(t,this.offsets[e])}}(n.RaggedArray=s).__name__="RaggedArray",s[Symbol.toStringTag]="RaggedArray"},function(e,t,n,r,i){r();const a=e(1).__importDefault(e(102)),l=e(24),s=e(99);class o extends a.default{search_indices(t,n,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let a=this._boxes.length-4;const o=[],s=new l.Indices(this.numItems);for(;void 0!==a;){const l=Math.min(a+4*this.nodeSize,function(e,t){let n=0,r=t.length-1;for(;n<r;){var i=n+r>>1;t[i]>e?r=i:n=1+i}return t[n]}(a,this._levelBounds));for(let e=a;e<l;e+=4){const l=0|this._indices[e>>2];r<this._boxes[e+0]||i<this._boxes[e+1]||t>this._boxes[e+2]||n>this._boxes[e+3]||(a<4*this.numItems?s.set(l):o.push(l))}a=o.pop()}return s}}o.__name__="_FlatBush";class c{constructor(e){this.index=null,0<e&&(this.index=new o(e))}add(e,t,n,r){var i;null===(i=this.index)||void 0===i||i.add(e,t,n,r)}add_empty(){var e;null===(e=this.index)||void 0===e||e.add(1/0,1/0,-1/0,-1/0)}finish(){var e;null===(e=this.index)||void 0===e||e.finish()}_normalize(e){let{x0:t,y0:n,x1:r,y1:i}=e;return t>r&&([t,r]=[r,t]),n>i&&([n,i]=[i,n]),{x0:t,y0:n,x1:r,y1:i}}get bbox(){if(null==this.index)return s.empty();var{minX:e,minY:t,maxX:n,maxY:r}=this.index;return{x0:e,y0:t,x1:n,y1:r}}indices(e){if(null==this.index)return new l.Indices(0);var{x0:t,y0:n,x1:r,y1:e}=this._normalize(e);return this.index.search_indices(t,n,r,e)}bounds(e){const t=s.empty();for(const n of this.indices(e)){const e=this.index._boxes,r=e[4*n+0],i=e[4*n+1],a=e[4*n+2],o=e[4*n+3];a<t.x0&&(t.x0=a),r>t.x1&&(t.x1=r),o<t.y0&&(t.y0=o),i>t.y1&&(t.y1=i)}return t}}(n.SpatialIndex=c).__name__="SpatialIndex"},function(e,t,n,r,i){r();const l=e(1).__importDefault(e(103)),c=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function u(e,t,n){return e<t?t-e:e<=n?0:e-n}function d(e,t){let n=0,r=t.length-1;for(;n<r;){var i=n+r>>1;t[i]>e?r=i:n=1+i}return t[n]}function h(e,t,n,r,i){var a=e[r];e[r]=e[i],e[i]=a;var o=4*r,s=4*i,l=t[o],c=t[1+o],e=t[2+o],a=t[3+o];t[o]=t[s],t[1+o]=t[1+s],t[2+o]=t[2+s],t[3+o]=t[3+s],t[s]=l,t[1+s]=c,t[2+s]=e,t[3+s]=a;a=n[r];n[r]=n[i],n[i]=a}n.default=class i{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,n]=new Uint8Array(e,0,2);if(251!==t)throw new Error("Data does not appear to be in a Flatbush format.");if(n>>4!=3)throw new Error(`Got v${n>>4} data when expected v3.`);var[r]=new Uint16Array(e,2,1),[t]=new Uint32Array(e,4,1);return new i(t,r,c[15&n],e)}constructor(e,t=16,n=Float64Array,r){if(void 0===e)throw new Error("Missing required argument: numItems.");if(isNaN(e)||e<=0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535);let i=e,a=i;for(this._levelBounds=[4*i];i=Math.ceil(i/this.nodeSize),a+=i,this._levelBounds.push(4*a),1!==i;);this.ArrayType=n||Float64Array,this.IndexArrayType=a<16384?Uint16Array:Uint32Array;var o=c.indexOf(this.ArrayType),s=4*a*this.ArrayType.BYTES_PER_ELEMENT;if(o<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this._boxes=new this.ArrayType(this.data,8,4*a),this._indices=new this.IndexArrayType(this.data,8+s,a),this._pos=4*a,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new ArrayBuffer(8+s+a*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,4*a),this._indices=new this.IndexArrayType(this.data,8+s,a),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,48+o]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e),this._queue=new l.default}add(e,t,n,r){var i=this._pos>>2;return this._indices[i]=i,this._boxes[this._pos++]=e,this._boxes[this._pos++]=t,this._boxes[this._pos++]=n,this._boxes[this._pos++]=r,e<this.minX&&(this.minX=e),t<this.minY&&(this.minY=t),n>this.maxX&&(this.maxX=n),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);if(this.numItems<=this.nodeSize)return this._boxes[this._pos++]=this.minX,this._boxes[this._pos++]=this.minY,this._boxes[this._pos++]=this.maxX,void(this._boxes[this._pos++]=this.maxY);const o=this.maxX-this.minX,t=this.maxY-this.minY,s=new Uint32Array(this.numItems);for(let e=0;e<this.numItems;e++){var n=4*e;const r=this._boxes[n++],i=this._boxes[n++],a=this._boxes[n++],l=this._boxes[+n],c=Math.floor(65535*((r+a)/2-this.minX)/o),u=Math.floor(65535*((i+l)/2-this.minY)/t);s[e]=function(e,t){var n,r=65535^(n=e^t),i=65535^(e|t),a=e&(65535^t),o=n|r>>1,s=n>>1^n,l=i>>1^r&a>>1^i,c=n&i>>1^a>>1^a;return s=(n=o)&(r=s)>>2^r&(o^r)>>2,l^=o&(i=l)>>2^r&c>>2,c^=r&i>>2^(o^r)&(a=c)>>2,n=o=o&(n=o)>>2^r&r>>2,s=o&(r=s)>>4^r&(o^r)>>4,l^=o&(i=l)>>4^r&c>>4,c^=r&i>>4^(o^r)&(a=c)>>4,n=o=o&(n=o)>>4^r&r>>4,l^=o&(i=l)>>8^(r=s)&c>>8,n=(r=(c^=s&i>>8^((n=o)^(r=s))&(a=c)>>8)^c>>1)|65535^((t^=e)|(n=l^l>>1)),t=1431655765&((t=858993459&((t=252645135&((t=16711935&(t|t<<8))|t<<4))|t<<2))|t<<1),((n=1431655765&((n=858993459&((n=252645135&((n=16711935&(n|n<<8))|n<<4))|n<<2))|n<<1))<<1|t)>>>0}(c,u)}!function n(r,i,a,o,s,l){if(!(Math.floor(o/l)>=Math.floor(s/l))){const c=r[o+s>>1];let e=o-1,t=s+1;for(;;){for(;e++,r[e]<c;);for(;t--,r[t]>c;);if(e>=t)break;h(r,i,a,e,t)}n(r,i,a,o,t,l),n(r,i,a,t+1,s,l)}}(s,this._boxes,this._indices,0,this.numItems-1,this.nodeSize);for(let e=0,a=0;e<this._levelBounds.length-1;e++){const s=this._levelBounds[e];for(;a<s;){const o=a;let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let e=0;e<this.nodeSize&&a<s;e++)t=Math.min(t,this._boxes[a++]),n=Math.min(n,this._boxes[a++]),r=Math.max(r,this._boxes[a++]),i=Math.max(i,this._boxes[a++]);this._indices[this._pos>>2]=o,this._boxes[this._pos++]=t,this._boxes[this._pos++]=n,this._boxes[this._pos++]=r,this._boxes[this._pos++]=i}}}search(t,n,r,i,a){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const s=[],l=[];for(;void 0!==o;){var c=Math.min(o+4*this.nodeSize,d(o,this._levelBounds));for(let e=o;e<c;e+=4){var u=0|this._indices[e>>2];r<this._boxes[e]||i<this._boxes[e+1]||t>this._boxes[e+2]||n>this._boxes[e+3]||(o<4*this.numItems?void 0!==a&&!a(u)||l.push(u):s.push(u))}o=s.pop()}return l}neighbors(t,n,e=1/0,r=1/0,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let a=this._boxes.length-4;const o=this._queue,s=[],l=r*r;for(;void 0!==a;){const r=Math.min(a+4*this.nodeSize,d(a,this._levelBounds));for(let e=a;e<r;e+=4){const r=0|this._indices[e>>2],s=u(t,this._boxes[e],this._boxes[e+2]),d=u(n,this._boxes[e+1],this._boxes[e+3]),l=s*s+d*d;a<4*this.numItems?void 0!==i&&!i(r)||o.push(-r-1,l):o.push(r,l)}for(;o.length&&o.peek()<0;){if(o.peekValue()>l)return o.clear(),s;if(s.push(-o.pop()-1),s.length===e)return o.clear(),s}a=o.pop()}return o.clear(),s}}},function(e,t,n,r,i){r(),n.default=class{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let n=this.length++;for(this.ids[n]=e,this.values[n]=t;0<n;){const e=n-1>>1,r=this.values[e];if(r<=t)break;this.ids[n]=this.ids[e],this.values[n]=r,n=e}this.ids[n]=e,this.values[n]=t}pop(){if(0!==this.length){const e=this.ids[0];if(this.length--,0<this.length){const e=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],t=this.length>>1;let r=0;for(;r<t;){let e=1+(r<<1);var i=e+1;let t=this.ids[e],n=this.values[e];var a=this.values[i];if(i<this.length&&a<n&&(e=i,t=this.ids[i],n=a),n>=o)break;this.ids[r]=t,this.values[r]=n,r=e}this.ids[r]=e,this.values[r]=o}return e}}peek(){if(0!==this.length)return this.ids[0]}peekValue(){if(0!==this.length)return this.values[0]}}},function(e,t,n,r,i){r();const a=e(105),o=e(20),s=e(21),l=e(24),p=e(9),m=e(8),g=e(11);function _(t,n,r=0){const i=new Map;for(let e=0;e<t.length;e++){var a=t[e];if(i.has(a))throw new Error(`duplicate factor or subfactor: ${a}`);i.set(a,{value:.5+e*(1+n)+r})}return[i,(t.length-1)*n]}function y(e,t,n,r=0){var i;const a=new Map,o=new Map;for(const[t,n]of e){const e=null!==(i=o.get(t))&&void 0!==i?i:[];o.set(t,[...e,n])}let s=r,l=0;for(const[e,r]of o){const i=r.length,[o,u]=_(r,n,s);l+=u;var c=p.sum(r.map(e=>o.get(e).value));a.set(e,{value:c/i,mapping:o}),s+=i+t+u}return[a,(o.size-1)*t+l]}function v(e,t,n,r,i=0){var a;const o=new Map,s=new Map;for(const[t,n,r]of e){const e=null!==(a=s.get(t))&&void 0!==a?a:[];s.set(t,[...e,[n,r]])}let l=i,c=0;for(const[e,i]of s){const a=i.length,[s,d]=y(i,n,r,l);c+=d;var u=p.sum(i.map(([e])=>s.get(e).value));o.set(e,{value:u/a,mapping:s}),l+=a+t+d}return[o,(s.size-1)*t+c]}n.Factor=s.Or(s.String,s.Tuple(s.String,s.String),s.Tuple(s.String,s.String,s.String)),n.FactorSeq=s.Or(s.Array(s.String),s.Array(s.Tuple(s.String,s.String)),s.Array(s.Tuple(s.String,s.String,s.String))),n.map_one_level=_,n.map_two_levels=y,n.map_three_levels=v;class c extends a.Range{constructor(e){super(e)}static init_FactorRange(){this.define(({Number:e})=>({factors:[n.FactorSeq,[]],factor_padding:[e,0],subgroup_padding:[e,.8],group_padding:[e,1.4],range_padding:[e,0],range_padding_units:[o.PaddingUnits,"percent"],start:[e],end:[e]})),this.internal(({Number:e,String:t,Array:n,Tuple:r,Nullable:i})=>({levels:[e],mids:[i(n(r(t,t))),null],tops:[i(n(t)),null]}))}get min(){return this.start}get max(){return this.end}initialize(){super.initialize(),this._init(!0)}connect_signals(){super.connect_signals(),this.connect(this.properties.factors.change,()=>this.reset()),this.connect(this.properties.factor_padding.change,()=>this.reset()),this.connect(this.properties.group_padding.change,()=>this.reset()),this.connect(this.properties.subgroup_padding.change,()=>this.reset()),this.connect(this.properties.range_padding.change,()=>this.reset()),this.connect(this.properties.range_padding_units.change,()=>this.reset())}reset(){this._init(!1),this.change.emit()}_lookup(e){switch(e.length){case 1:var[t]=e,t=this._mapping.get(t);return null!=t?t.value:NaN;case 2:{const[n,r]=e,i=this._mapping.get(n);if(null!=i){const e=i.mapping.get(r);if(null!=e)return e.value}return NaN}case 3:{const[a,o,s]=e,l=this._mapping.get(a);if(null!=l){const e=l.mapping.get(o);if(null!=e){t=e.mapping.get(s);if(null!=t)return t.value}}return NaN}default:g.unreachable()}}synthetic(e){if(m.isNumber(e))return e;if(m.isString(e))return this._lookup([e]);let t=0;var n=e[e.length-1];return m.isNumber(n)&&(t=n,e=e.slice(0,-1)),this._lookup(e)+t}v_synthetic(t){const n=t.length,r=new l.ScreenArray(n);for(let e=0;e<n;e++)r[e]=this.synthetic(t[e]);return r}_init(e){var{levels:t,mapping:n,tops:r,mids:i,inside_padding:a}=(()=>{if(p.every(this.factors,m.isString)){var[e,t]=_(this.factors,this.factor_padding);return{levels:1,mapping:e,tops:null,mids:null,inside_padding:t}}if(p.every(this.factors,e=>m.isArray(e)&&2==e.length&&m.isString(e[0])&&m.isString(e[1]))){const i=this.factors,[a,o]=y(i,this.group_padding,this.factor_padding),s=[...a.keys()];return{levels:2,mapping:a,tops:s,mids:null,inside_padding:o}}if(p.every(this.factors,e=>m.isArray(e)&&3==e.length&&m.isString(e[0])&&m.isString(e[1])&&m.isString(e[2]))){const l=this.factors,[c,u]=v(l,this.group_padding,this.subgroup_padding,this.factor_padding),d=[...c.keys()],h=[];for(var[n,r]of c)for(const f of r.mapping.keys())h.push([n,f]);return{levels:3,mapping:c,tops:d,mids:h,inside_padding:u}}g.unreachable()})();this._mapping=n,this.tops=r,this.mids=i;let o=0,s=this.factors.length+a;if("percent"==this.range_padding_units){const e=(s-o)*this.range_padding/2;o-=e,s+=e}else o-=this.range_padding,s+=this.range_padding;this.setv({start:o,end:s,levels:t},{silent:e}),"auto"==this.bounds&&this.setv({bounds:[o,s]},{silent:!0})}}n.FactorRange=c,c.__name__="FactorRange",c.init_FactorRange()},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{constructor(e){super(e),this.have_updated_interactively=!1}static init_Range(){this.define(({Number:e,Tuple:t,Or:n,Auto:r,Nullable:i})=>({bounds:[i(n(t(i(e),i(e)),r)),null],min_interval:[i(e),null],max_interval:[i(e),null]})),this.internal(({Array:e,AnyRef:t})=>({plots:[e(t()),[]]}))}get is_reversed(){return this.start>this.end}get is_valid(){return isFinite(this.min)&&isFinite(this.max)}}(n.Range=a).__name__="Range",a.init_Range()},function(e,t,n,r,i){r();const h=e(1).__importStar(e(107));function a(e,t,{x0:n,x1:r,y0:i,y1:a},o){t.save(),t.beginPath(),t.moveTo(n,(i+a)/2),t.lineTo(r,(i+a)/2),e.line.doit&&(e.line.set_vectorize(t,o),t.stroke()),t.restore()}function o(e,t,{x0:n,x1:r,y0:i,y1:a},o){var s=.1*Math.abs(r-n),l=.1*Math.abs(a-i),n=n+s,s=r-s,i=i+l,l=a-l;t.beginPath(),t.rect(n,i,s-n,l-i),e.fill.doit&&(e.fill.set_vectorize(t,o),t.fill()),null!==(i=e.hatch)&&void 0!==i&&i.doit&&(e.hatch.set_vectorize(t,o),t.fill()),null!==(i=e.line)&&void 0!==i&&i.doit&&(e.line.set_vectorize(t,o),t.stroke())}n.generic_line_scalar_legend=function(e,t,{x0:n,x1:r,y0:i,y1:a}){t.save(),t.beginPath(),t.moveTo(n,(i+a)/2),t.lineTo(r,(i+a)/2),e.line.doit&&(e.line.set_value(t),t.stroke()),t.restore()},n.generic_line_vector_legend=a,n.generic_line_legend=a,n.generic_area_scalar_legend=function(e,t,{x0:n,x1:r,y0:i,y1:a}){var o=.1*Math.abs(r-n),s=.1*Math.abs(a-i),n=n+o,o=r-o,i=i+s,s=a-s;t.beginPath(),t.rect(n,i,o-n,s-i),e.fill.doit&&(e.fill.set_value(t),t.fill()),null!==(i=e.hatch)&&void 0!==i&&i.doit&&(e.hatch.set_value(t),t.fill()),null!==(i=e.line)&&void 0!==i&&i.doit&&(e.line.set_value(t),t.stroke())},n.generic_area_vector_legend=o,n.generic_area_legend=o,n.line_interpolation=function(e,t,n,r,i,a){var{sx:o,sy:s}=t;let l,c,u,d;"point"==t.type?([u,d]=e.yscale.r_invert(s-1,s+1),[l,c]=e.xscale.r_invert(o-1,o+1)):"v"==t.direction?([u,d]=e.yscale.r_invert(s,s),[l,c]=[Math.min(n-1,i-1),Math.max(n+1,i+1)]):([l,c]=e.xscale.r_invert(o,o),[u,d]=[Math.min(r-1,a-1),Math.max(r+1,a+1)]);var{x:i,y:a}=h.check_2_segments_intersect(l,u,c,d,n,r,i,a);return[i,a]}},function(e,t,n,r,i){function a(e,t){return(e.x-t.x)**2+(e.y-t.y)**2}function o(e,t,n){var r=a(t,n);if(0==r)return a(e,t);r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return a(e,r<0?t:1<r?n:{x:t.x+r*(n.x-t.x),y:t.y+r*(n.y-t.y)})}r(),n.point_in_poly=function(t,n,r,i){let a=!1,o=r[r.length-1],s=i[i.length-1];for(let e=0;e<r.length;e++){var l=r[e],c=i[e];s<n!=c<n&&o+(n-s)/(c-s)*(l-o)<t&&(a=!a),o=l,s=c}return a},n.point_in_ellipse=function(e,t,n,r,i,a,o){return((Math.cos(n)/i)**2+(Math.sin(n)/r)**2)*(e-a)**2+2*Math.cos(n)*Math.sin(n)*((1/i)**2-(1/r)**2)*(e-a)*(t-o)+((Math.cos(n)/r)**2+(Math.sin(n)/i)**2)*(t-o)**2<=1},n.dist_2_pts=a,n.dist_to_segment_squared=o,n.dist_to_segment=function(e,t,n){return Math.sqrt(o(e,t,n))},n.check_2_segments_intersect=function(e,t,n,r,i,a,o,s){var l=(s-a)*(n-e)-(o-i)*(r-t);if(0==l)return{hit:!1,x:null,y:null};var c=(n-e)*(u=t-a)-(r-t)*(d=e-i),u=((o-i)*u-(s-a)*d)/l,d=c/l;return{hit:0<u&&u<1&&0<d&&d<1,x:e+u*(n-e),y:t+u*(r-t)}}},function(e,t,n,r,i){r();const a=e(1),o=e(109),s=e(113),l=a.__importDefault(e(114)),c=a.__importDefault(e(115)),d=e(22),h=e(46);class u{constructor(e){this._atlas=new Map,this._width=256,this._height=256,this.tex=new o.Texture2d(e),this.tex.set_wrapping(e.REPEAT,e.REPEAT),this.tex.set_interpolation(e.NEAREST,e.NEAREST),this.tex.set_size([this._width,this._height],e.RGBA),this.tex.set_data([0,0],[this._width,this._height],new Uint8Array(4*this._width*this._height)),this.get_atlas_data([1])}get_atlas_data(e){var t=e.join("-");let n=this._atlas.get(t);if(null==n){const[r,i]=this.make_pattern(e),a=this._atlas.size;this.tex.set_data([0,a],[this._width,1],new Uint8Array(r.map(e=>e+10))),n=[a/this._height,i],this._atlas.set(t,n)}return n}make_pattern(n){let o=0;for(const s of n=1<n.length&&n.length%2?n.concat(n):n)o+=s;const s=[];let r=0;for(let e=0,t=n.length+2;e<t;e+=2){const l=Math.max(1e-4,n[e%n.length]),c=Math.max(1e-4,n[(e+1)%n.length]);s.push(r,r+l),r+=l+c}const l=this._width,c=new Float32Array(4*l);for(let a=0,e=l;a<e;a++){let e,t,n;var u=o*a/(l-1);let r=0,i=1e16;for(let e=0,t=s.length;e<t;e++){const o=Math.abs(s[e]-u);o<i&&(r=e,i=o)}e=r%2==0?(n=u<=s[r]?1:0,t=s[r],s[r+1]):(n=u>s[r]?-1:0,t=s[r-1],s[r]),c[4*a+0]=s[r],c[4*a+1]=n,c[4*a+2]=t,c[4*a+3]=e}return[c,o]}}u.__name__="DashAtlas";const f={miter:0,round:1,bevel:2},p={"":0,none:0,".":0,round:1,")":1,"(":1,o:1,"triangle in":2,"<":2,"triangle out":3,">":3,square:4,"[":4,"]":4,"=":4,butt:5,"|":5};class m extends s.BaseGLGlyph{constructor(e,t){super(e,t),this.glyph=t,this._scale_aspect=0;var n=l.default,t=c.default;this.prog=new o.Program(e),this.prog.set_shaders(n,t),this.index_buffer=new o.IndexBuffer(e),this.vbo_position=new o.VertexBuffer(e),this.vbo_tangents=new o.VertexBuffer(e),this.vbo_segment=new o.VertexBuffer(e),this.vbo_angles=new o.VertexBuffer(e),this.vbo_texcoord=new o.VertexBuffer(e),this.dash_atlas=new u(e)}draw(n,r,e){const i=r.glglyph;if(i.data_changed&&(i._set_data(),i.data_changed=!1),this.visuals_changed&&(this._set_visuals(),this.visuals_changed=!1),i._update_scale(1,1),this._scale_aspect=1,this.prog.set_attribute("a_position","vec2",i.vbo_position),this.prog.set_attribute("a_tangents","vec4",i.vbo_tangents),this.prog.set_attribute("a_segment","vec2",i.vbo_segment),this.prog.set_attribute("a_angles","vec2",i.vbo_angles),this.prog.set_attribute("a_texcoord","vec2",i.vbo_texcoord),this.prog.set_uniform("u_length","float",[i.cumsum]),this.prog.set_texture("u_dash_atlas",this.dash_atlas.tex),this.prog.set_uniform("u_pixel_ratio","float",[e.pixel_ratio]),this.prog.set_uniform("u_canvas_size","vec2",[e.width,e.height]),this.prog.set_uniform("u_scale_aspect","vec2",[1,1]),this.prog.set_uniform("u_scale_length","float",[Math.sqrt(2)]),this.I_triangles=i.I_triangles,this.I_triangles.length<65535)this.index_buffer.set_size(2*this.I_triangles.length),this.index_buffer.set_data(0,new Uint16Array(this.I_triangles)),this.prog.draw(this.gl.TRIANGLES,this.index_buffer);else{n=Array.from(this.I_triangles);const r=this.I_triangles.length,e=64008,a=[];for(let e=0,t=Math.ceil(r/64008);e<t;e++)a.push([]);for(let e=0,t=n.length;e<t;e++){const i=n[e]%64008;a[Math.floor(n[e]/64008)].push(i)}for(let e=0,t=a.length;e<t;e++){const r=new Uint16Array(a[e]),o=64008*e*4;0!==r.length&&(this.prog.set_attribute("a_position","vec2",i.vbo_position,0,2*o),this.prog.set_attribute("a_tangents","vec4",i.vbo_tangents,0,4*o),this.prog.set_attribute("a_segment","vec2",i.vbo_segment,0,2*o),this.prog.set_attribute("a_angles","vec2",i.vbo_angles,0,2*o),this.prog.set_attribute("a_texcoord","vec2",i.vbo_texcoord,0,2*o),this.index_buffer.set_size(2*r.length),this.index_buffer.set_data(0,r),this.prog.draw(this.gl.TRIANGLES,this.index_buffer))}}}_set_data(){this._bake(),this.vbo_position.set_size(4*this.V_position.length),this.vbo_position.set_data(0,this.V_position),this.vbo_tangents.set_size(4*this.V_tangents.length),this.vbo_tangents.set_data(0,this.V_tangents),this.vbo_angles.set_size(4*this.V_angles.length),this.vbo_angles.set_data(0,this.V_angles),this.vbo_texcoord.set_size(4*this.V_texcoord.length),this.vbo_texcoord.set_data(0,this.V_texcoord)}_set_visuals(){var{line_color:e,line_alpha:t,line_width:n,line_cap:r,line_join:i,line_dash:a,line_dash_offset:o}=this.glyph.visuals.line,[s,l,e,t]=d.color2rgba(e.value,t.value),n=n.value,r=p[r.value],i=f[i.value];this.prog.set_uniform("u_color","vec4",[s/255,l/255,e/255,t/255]),this.prog.set_uniform("u_linewidth","float",[n]),this.prog.set_uniform("u_antialias","float",[.9]),this.prog.set_uniform("u_linecaps","vec2",[r,r]),this.prog.set_uniform("u_linejoin","float",[i]),this.prog.set_uniform("u_miter_limit","float",[10]);a=h.resolve_line_dash(a.value);let c=0,u=1;a.length&&([c,u]=this.dash_atlas.get_atlas_data(a)),this.prog.set_uniform("u_dash_index","float",[c]),this.prog.set_uniform("u_dash_phase","float",[o.value]),this.prog.set_uniform("u_dash_period","float",[u]),this.prog.set_uniform("u_dash_caps","vec2",[r,r]),this.prog.set_uniform("u_closed","float",[0])}_bake(){let n,r,i,a,o,s,l,c;const u=this.nvertices,d=this.glyph.sx,h=this.glyph.sy,f=l=new Float32Array(2*u),p=new Float32Array(2*u),m=c=new Float32Array(4*u);for(let e=0,t=u;e<t;e++)f[2*e+0]=isFinite(d[e])?d[e]:0,f[2*e+1]=isFinite(h[e])?h[e]:0;this.tangents=r=new Float32Array(2*u-2);for(let e=0,t=u-1;e<t;e++)r[2*e+0]=l[2*(e+1)+0]-l[2*e+0],r[2*e+1]=l[2*(e+1)+1]-l[2*e+1];for(let e=0,t=u-1;e<t;e++)m[4*(e+1)+0]=r[2*e+0],m[4*(e+1)+1]=r[2*e+1],m[4*e+2]=r[2*e+0],m[4*e+3]=r[2*e+1];m[0]=r[0],m[1]=r[1],m[4*(u-1)+2]=r[2*(u-2)+0],m[4*(u-1)+3]=r[2*(u-2)+1];const g=new Float32Array(u);for(let e=0,t=u;e<t;e++)g[e]=Math.atan2(c[4*e+0]*c[4*e+3]-c[4*e+1]*c[4*e+2],c[4*e+0]*c[4*e+2]+c[4*e+1]*c[4*e+3]);for(let e=0,t=u-1;e<t;e++)p[2*e+0]=g[e],p[2*e+1]=g[e+1];for(let e=0,t=u;e<t;e++)isFinite(d[e])||(f[2*e+0]=d[e]),isFinite(h[e])||(f[2*e+1]=h[e]);var e=4*u-4;this.V_position=a=new Float32Array(2*e),this.V_angles=i=new Float32Array(2*e),this.V_tangents=o=new Float32Array(4*e),this.V_texcoord=s=new Float32Array(2*e);for(let n=0,e=u;n<e;n++)for(let t=0;t<4;t++){for(let e=0;e<2;e++)a[2*(4*n+t-2)+e]=f[2*n+e],i[2*(4*n+t)+e]=p[2*n+e];for(let e=0;e<4;e++)o[4*(4*n+t-2)+e]=m[4*n+e]}for(let e=0,t=u;e<t;e++)s[2*(4*e+0)+0]=-1,s[2*(4*e+1)+0]=-1,s[2*(4*e+2)+0]=1,s[2*(4*e+3)+0]=1,s[2*(4*e+0)+1]=-1,s[2*(4*e+1)+1]=1,s[2*(4*e+2)+1]=-1,s[2*(4*e+3)+1]=1;this.I_triangles=n=new Uint32Array(6*(u-1));for(let e=0,t=u;e<t;e++)n[6*e+0]=0+4*e,n[6*e+1]=1+4*e,n[6*e+2]=3+4*e,n[6*e+3]=2+4*e,n[6*e+4]=0+4*e,n[6*e+5]=3+4*e}_update_scale(n,r){let i;const a=this.nvertices,e=4*a-4,o=this.tangents,s=new Float32Array(a-1),l=new Float32Array(2*a);this.V_segment=i=new Float32Array(2*e);for(let e=0,t=a-1;e<t;e++)s[e]=Math.sqrt((o[2*e+0]*n)**2+(o[2*e+1]*r)**2);let c=0;for(let e=0,t=a-1;e<t;e++)c+=s[e],l[2*(e+1)+0]=c,l[2*e+1]=c;for(let n=0,e=a;n<e;n++)for(let t=0;t<4;t++)for(let e=0;e<2;e++)i[2*(4*n+t)+e]=l[2*n+e];this.cumsum=c,this.vbo_segment.set_size(4*this.V_segment.length),this.vbo_segment.set_data(0,this.V_segment)}}(n.LineGL=m).__name__="LineGL"},function(e,t,n,r,i){r(),i("Program",e(110).Program),i("Texture2d",e(112).Texture2d);e=e(111);i("IndexBuffer",e.IndexBuffer),i("VertexBuffer",e.VertexBuffer)},function(e,t,n,r,i){r();const c=e(111);class a{constructor(e){this.gl=e,this.UTYPEMAP={float:"uniform1fv",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1iv",ivec2:"uniform2iv",ivec3:"uniform3iv",ivec4:"uniform4iv",bool:"uniform1iv",bvec2:"uniform2iv",bvec3:"uniform3iv",bvec4:"uniform4iv",mat2:"uniformMatrix2fv",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv",sampler1D:"uniform1i",sampler2D:"uniform1i",sampler3D:"uniform1i"},this.ATYPEMAP={float:"vertexAttrib1f",vec2:"vertexAttrib2f",vec3:"vertexAttrib3f",vec4:"vertexAttrib4f"},this.ATYPEINFO={float:[1,5126],vec2:[2,5126],vec3:[3,5126],vec4:[4,5126],vec4_uint8:[4,5121]},this._linked=!1,this._validated=!1,this._unset_variables=new Set,this._known_invalid=new Set,this._locations=new Map,this._samplers=new Map,this._attributes=new Map,this.handle=this.gl.createProgram()}delete(){this.gl.deleteProgram(this.handle)}activate(){this.gl.useProgram(this.handle)}deactivate(){this.gl.useProgram(0)}set_shaders(e,t){const n=this.gl;this._linked=!1;const r=n.createShader(n.VERTEX_SHADER),i=n.createShader(n.FRAGMENT_SHADER),a=[[e,r,"vertex"],[t,i,"fragment"]];for(const[e,t,r]of a)if(n.shaderSource(t,e),n.compileShader(t),!n.getShaderParameter(t,n.COMPILE_STATUS)){const e=n.getShaderInfoLog(t);throw new Error(`errors in ${r} shader:\n${e}`)}if(n.attachShader(this.handle,r),n.attachShader(this.handle,i),n.linkProgram(this.handle),!n.getProgramParameter(this.handle,n.LINK_STATUS)){const e=n.getProgramInfoLog(this.handle);throw new Error(`Program link error:\n${e}`)}this._unset_variables=this._get_active_attributes_and_uniforms(),n.detachShader(this.handle,r),n.detachShader(this.handle,i),n.deleteShader(r),n.deleteShader(i),this._known_invalid.clear(),this._linked=!0}_get_active_attributes_and_uniforms(){const t=this.gl;this._locations.clear();const n=new RegExp("(\\w+)\\s*(\\[(\\d+)\\])\\s*"),r=t.getProgramParameter(this.handle,t.ACTIVE_UNIFORMS),i=[],a=[],e=[[i,t.getProgramParameter(this.handle,t.ACTIVE_ATTRIBUTES),t.getActiveAttrib,t.getAttribLocation],[a,r,t.getActiveUniform,t.getUniformLocation]];for(const[r,i,a,o]of e)for(let e=0;e<i;e+=1){const i=a.call(t,this.handle,e),s=i.name,l=s.match(n);if(null!=l){const t=l[1];for(let e=0;e<i.size;e+=1)r.push([`${t}[${e}]`,i.type])}else r.push([s,i.type]);this._locations.set(s,o.call(t,this.handle,s))}const o=new Set;for(const[t]of i)o.add(t);for(const[t]of a)o.add(t);return o}set_texture(t,n){if(!this._linked)throw new Error("Cannot set uniform when program has no code");var r=null!==(r=this._locations.get(t))&&void 0!==r?r:-1;if(r<0)this._known_invalid.has(t)||(this._known_invalid.add(t),console.log(`"Variable ${t} is not an active texture`));else{this._unset_variables.has(t)&&this._unset_variables.delete(t),this.activate();{let e=this._samplers.size;this._samplers.has(t)&&(e=this._samplers.get(t)[2]),this._samplers.set(t,[n._target,n.handle,e]),this.gl.uniform1i(r,e)}}}set_uniform(n,e,r){if(!this._linked)throw new Error("Cannot set uniform when program has no code");var i=null!==(a=this._locations.get(n))&&void 0!==a?a:-1;if(i<0)this._known_invalid.has(n)||(this._known_invalid.add(n),console.log(`Variable ${n} is not an active uniform`));else{this._unset_variables.has(n)&&this._unset_variables.delete(n);let t=1;if(!e.startsWith("mat")){const n="int"==e||"bool"==e?"float":e.replace(/^ib/,"");t=Math.floor(r.length/this.ATYPEINFO[n][0])}if(1<t)for(let e=0;e<t;e+=1)if(this._unset_variables.has(`${n}[${e}]`)){const r=`${n}[${e}]`;this._unset_variables.has(r)&&this._unset_variables.delete(r)}var a=this.UTYPEMAP[e];this.activate(),e.startsWith("mat")?this.gl[a](i,!1,r):this.gl[a](i,r)}}set_attribute(e,t,n,r=0,i=0,a=!1){if(!this._linked)throw new Error("Cannot set attribute when program has no code");var o=null!==(o=this._locations.get(e))&&void 0!==o?o:-1;if(o<0)this._known_invalid.has(e)||(this._known_invalid.add(e),n instanceof c.VertexBuffer&&0<i||console.log(`Variable ${e} is not an active attribute`));else if(this._unset_variables.has(e)&&this._unset_variables.delete(e),this.activate(),n instanceof c.VertexBuffer){const[c,s]=this.ATYPEINFO[t],l=[c,s,a,r,i];this._attributes.set(e,[n.handle,o,"vertexAttribPointer",l])}else{const r=this.ATYPEMAP[t];this._attributes.set(e,[null,o,r,n])}}_pre_draw(){this.activate();for(var[e,t,n]of this._samplers.values())this.gl.activeTexture(this.gl.TEXTURE0+n),this.gl.bindTexture(e,t);for(var[r,i,a,o]of this._attributes.values())null!=r?(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.enableVertexAttribArray(i)):(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(i)),this.gl[a].apply(this.gl,[i,...o]);this._validated||(this._validated=!0,this._validate())}_validate(){if(this._unset_variables.size&&console.log(`Program has unset variables: ${this._unset_variables}`),this.gl.validateProgram(this.handle),!this.gl.getProgramParameter(this.handle,this.gl.VALIDATE_STATUS))throw console.log(this.gl.getProgramInfoLog(this.handle)),new Error("Program validation error")}draw(e,t){if(!this._linked)throw new Error("Cannot draw program if code has not been set");var n,r;t instanceof c.IndexBuffer?(this._pre_draw(),t.activate(),n=t.buffer_size/2,r=this.gl.UNSIGNED_SHORT,this.gl.drawElements(e,n,r,0),t.deactivate()):([r,t]=t,0!=t&&(this._pre_draw(),this.gl.drawArrays(e,r,t)))}}(n.Program=a).__name__="Program"},function(e,t,n,r,i){r();class a{constructor(e){this.gl=e,this._usage=35048,this.buffer_size=0,this.handle=this.gl.createBuffer()}delete(){this.gl.deleteBuffer(this.handle)}activate(){this.gl.bindBuffer(this._target,this.handle)}deactivate(){this.gl.bindBuffer(this._target,null)}set_size(e){e!=this.buffer_size&&(this.activate(),this.gl.bufferData(this._target,e,this._usage),this.buffer_size=e)}set_data(e,t){this.activate(),this.gl.bufferSubData(this._target,e,t)}}(n.Buffer=a).__name__="Buffer";class o extends a{constructor(){super(...arguments),this._target=34962}}(n.VertexBuffer=o).__name__="VertexBuffer";class s extends a{constructor(){super(...arguments),this._target=34963}}(n.IndexBuffer=s).__name__="IndexBuffer"},function(e,t,n,r,i){r();const a=e(11);class o{constructor(e){this.gl=e,this._target=3553,this._types={Int8Array:5120,Uint8Array:5121,Int16Array:5122,Uint16Array:5123,Int32Array:5124,Uint32Array:5125,Float32Array:5126},this.handle=this.gl.createTexture()}delete(){this.gl.deleteTexture(this.handle)}activate(){this.gl.bindTexture(this._target,this.handle)}deactivate(){this.gl.bindTexture(this._target,0)}_get_alignment(e){for(const t of[4,8,2,1])if(e%t==0)return t;a.unreachable()}set_wrapping(e,t){this.activate(),this.gl.texParameterf(this._target,this.gl.TEXTURE_WRAP_S,e),this.gl.texParameterf(this._target,this.gl.TEXTURE_WRAP_T,t)}set_interpolation(e,t){this.activate(),this.gl.texParameterf(this._target,this.gl.TEXTURE_MIN_FILTER,e),this.gl.texParameterf(this._target,this.gl.TEXTURE_MAG_FILTER,t)}set_size([e,t],n){var r,i;e==(null===(r=this._shape_format)||void 0===r?void 0:r.width)&&t==(null===(i=this._shape_format)||void 0===i?void 0:i.height)&&n==(null===(i=this._shape_format)||void 0===i?void 0:i.format)||(this._shape_format={width:e,height:t,format:n},this.activate(),this.gl.texImage2D(this._target,0,n,e,t,0,n,this.gl.UNSIGNED_BYTE,null))}set_data(e,[t,n],r){this.activate();var{format:i}=this._shape_format,[a,o]=e,s=this._types[r.constructor.name];if(null==s)throw new Error(`Type ${r.constructor.name} not allowed for texture`);e=this._get_alignment(t);4!=e&&this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,e),this.gl.texSubImage2D(this._target,0,a,o,t,n,i,s,r),4!=e&&this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,4)}}(n.Texture2d=o).__name__="Texture2d"},function(e,t,n,r,i){r();class a{constructor(e,t){this.gl=e,this.glyph=t,this.nvertices=0,this.size_changed=!1,this.data_changed=!1,this.visuals_changed=!1}set_data_changed(){var{data_size:e}=this.glyph;e!=this.nvertices&&(this.nvertices=e,this.size_changed=!0),this.data_changed=!0}set_visuals_changed(){this.visuals_changed=!0}render(e,t,n){if(0==t.length)return!0;var{width:r,height:i}=this.glyph.renderer.plot_view.canvas_view.webgl.canvas,i={pixel_ratio:this.glyph.renderer.plot_view.canvas_view.pixel_ratio,width:r,height:i};return this.draw(t,n,i),!0}}(n.BaseGLGlyph=a).__name__="BaseGLGlyph"},function(e,t,n,r,i){r(),n.default="\nprecision mediump float;\n\nconst float PI = 3.14159265358979323846264;\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\n\nuniform float u_pixel_ratio;\nuniform vec2 u_canvas_size, u_offset;\nuniform vec2 u_scale_aspect;\nuniform float u_scale_length;\n\nuniform vec4 u_color;\nuniform float u_antialias;\nuniform float u_length;\nuniform float u_linewidth;\nuniform float u_dash_index;\nuniform float u_closed;\n\nattribute vec2 a_position;\nattribute vec4 a_tangents;\nattribute vec2 a_segment;\nattribute vec2 a_angles;\nattribute vec2 a_texcoord;\n\nvarying vec4  v_color;\nvarying vec2  v_segment;\nvarying vec2  v_angles;\nvarying vec2  v_texcoord;\nvarying vec2  v_miter;\nvarying float v_length;\nvarying float v_linewidth;\n\nfloat cross(in vec2 v1, in vec2 v2)\n{\n    return v1.x*v2.y - v1.y*v2.x;\n}\n\nfloat signed_distance(in vec2 v1, in vec2 v2, in vec2 v3)\n{\n    return cross(v2-v1,v1-v3) / length(v2-v1);\n}\n\nvoid rotate( in vec2 v, in float alpha, out vec2 result )\n{\n    float c = cos(alpha);\n    float s = sin(alpha);\n    result = vec2( c*v.x - s*v.y,\n                   s*v.x + c*v.y );\n}\n\nvoid main()\n{\n    bool closed = (u_closed > 0.0);\n\n    // Attributes and uniforms to varyings\n    v_color = u_color;\n    v_linewidth = u_linewidth;\n    v_segment = a_segment * u_scale_length;\n    v_length = u_length * u_scale_length;\n\n    // Scale to map to pixel coordinates. The original algorithm from the paper\n    // assumed isotropic scale. We obviously do not have this.\n    vec2 abs_scale_aspect = abs(u_scale_aspect);\n    vec2 abs_scale = u_scale_length * abs_scale_aspect;\n\n    // Correct angles for aspect ratio\n    vec2 av;\n    av = vec2(1.0, tan(a_angles.x)) / abs_scale_aspect;\n    v_angles.x = atan(av.y, av.x);\n    av = vec2(1.0, tan(a_angles.y)) / abs_scale_aspect;\n    v_angles.y = atan(av.y, av.x);\n\n    // Thickness below 1 pixel are represented using a 1 pixel thickness\n    // and a modified alpha\n    v_color.a = min(v_linewidth, v_color.a);\n    v_linewidth = max(v_linewidth, 1.0);\n\n    // If color is fully transparent we just will discard the fragment anyway\n    if( v_color.a <= 0.0 ) {\n        gl_Position = vec4(0.0,0.0,0.0,1.0);\n        return;\n    }\n\n    // This is the actual half width of the line\n    float w = ceil(u_antialias+v_linewidth)/2.0;\n\n    vec2 position = a_position;\n\n    vec2 t1 = normalize(a_tangents.xy * abs_scale_aspect);  // note the scaling for aspect ratio here\n    vec2 t2 = normalize(a_tangents.zw * abs_scale_aspect);\n    float u = a_texcoord.x;\n    float v = a_texcoord.y;\n    vec2 o1 = vec2( +t1.y, -t1.x);\n    vec2 o2 = vec2( +t2.y, -t2.x);\n\n    // This is a join\n    // ----------------------------------------------------------------\n    if( t1 != t2 ) {\n        float angle = atan (t1.x*t2.y-t1.y*t2.x, t1.x*t2.x+t1.y*t2.y);  // Angle needs recalculation for some reason\n        vec2 t  = normalize(t1+t2);\n        vec2 o  = vec2( + t.y, - t.x);\n\n        if ( u_dash_index > 0.0 )\n        {\n            // Broken angle\n            // ----------------------------------------------------------------\n            if( (abs(angle) > THETA) ) {\n                position += v * w * o / cos(angle/2.0);\n                float s = sign(angle);\n                if( angle < 0.0 ) {\n                    if( u == +1.0 ) {\n                        u = v_segment.y + v * w * tan(angle/2.0);\n                        if( v == 1.0 ) {\n                            position -= 2.0 * w * t1 / sin(angle);\n                            u -= 2.0 * w / sin(angle);\n                        }\n                    } else {\n                        u = v_segment.x - v * w * tan(angle/2.0);\n                        if( v == 1.0 ) {\n                            position += 2.0 * w * t2 / sin(angle);\n                            u += 2.0*w / sin(angle);\n                        }\n                    }\n                } else {\n                    if( u == +1.0 ) {\n                        u = v_segment.y + v * w * tan(angle/2.0);\n                        if( v == -1.0 ) {\n                            position += 2.0 * w * t1 / sin(angle);\n                            u += 2.0 * w / sin(angle);\n                        }\n                    } else {\n                        u = v_segment.x - v * w * tan(angle/2.0);\n                        if( v == -1.0 ) {\n                            position -= 2.0 * w * t2 / sin(angle);\n                            u -= 2.0*w / sin(angle);\n                        }\n                    }\n                }\n                // Continuous angle\n                // ------------------------------------------------------------\n            } else {\n                position += v * w * o / cos(angle/2.0);\n                if( u == +1.0 ) u = v_segment.y;\n                else            u = v_segment.x;\n            }\n        }\n\n        // Solid line\n        // --------------------------------------------------------------------\n        else\n        {\n            position.xy += v * w * o / cos(angle/2.0);\n            if( angle < 0.0 ) {\n                if( u == +1.0 ) {\n                    u = v_segment.y + v * w * tan(angle/2.0);\n                } else {\n                    u = v_segment.x - v * w * tan(angle/2.0);\n                }\n            } else {\n                if( u == +1.0 ) {\n                    u = v_segment.y + v * w * tan(angle/2.0);\n                } else {\n                    u = v_segment.x - v * w * tan(angle/2.0);\n                }\n            }\n        }\n\n    // This is a line start or end (t1 == t2)\n    // ------------------------------------------------------------------------\n    } else {\n        position += v * w * o1;\n        if( u == -1.0 ) {\n            u = v_segment.x - w;\n            position -= w * t1;\n        } else {\n            u = v_segment.y + w;\n            position += w * t2;\n        }\n    }\n\n    // Miter distance\n    // ------------------------------------------------------------------------\n    vec2 t;\n    vec2 curr = a_position * abs_scale;\n    if( a_texcoord.x < 0.0 ) {\n        vec2 next = curr + t2*(v_segment.y-v_segment.x);\n\n        rotate( t1, +v_angles.x/2.0, t);\n        v_miter.x = signed_distance(curr, curr+t, position);\n\n        rotate( t2, +v_angles.y/2.0, t);\n        v_miter.y = signed_distance(next, next+t, position);\n    } else {\n        vec2 prev = curr - t1*(v_segment.y-v_segment.x);\n\n        rotate( t1, -v_angles.x/2.0,t);\n        v_miter.x = signed_distance(prev, prev+t, position);\n\n        rotate( t2, -v_angles.y/2.0,t);\n        v_miter.y = signed_distance(curr, curr+t, position);\n    }\n\n    if (!closed && v_segment.x <= 0.0) {\n        v_miter.x = 1e10;\n    }\n    if (!closed && v_segment.y >= v_length)\n    {\n        v_miter.y = 1e10;\n    }\n\n    v_texcoord = vec2( u, v*w );\n\n    // Calculate position in device coordinates. Note that we\n    // already scaled with abs scale above.\n    vec2 normpos = position * sign(u_scale_aspect);\n    normpos += 0.5;  // make up for Bokeh's offset\n    normpos /= u_canvas_size / u_pixel_ratio;  // in 0..1\n    gl_Position = vec4(normpos*2.0-1.0, 0.0, 1.0);\n    gl_Position.y *= -1.0;\n}\n"},function(e,t,n,r,i){r(),n.default="\nprecision mediump float;\n\nconst float PI = 3.14159265358979323846264;\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\n\nuniform sampler2D u_dash_atlas;\n\nuniform vec2 u_linecaps;\nuniform float u_miter_limit;\nuniform float u_linejoin;\nuniform float u_antialias;\nuniform float u_dash_phase;\nuniform float u_dash_period;\nuniform float u_dash_index;\nuniform vec2 u_dash_caps;\nuniform float u_closed;\n\nvarying vec4  v_color;\nvarying vec2  v_segment;\nvarying vec2  v_angles;\nvarying vec2  v_texcoord;\nvarying vec2  v_miter;\nvarying float v_length;\nvarying float v_linewidth;\n\n// Compute distance to cap ----------------------------------------------------\nfloat cap( int type, float dx, float dy, float t, float linewidth )\n{\n    float d = 0.0;\n    dx = abs(dx);\n    dy = abs(dy);\n    if      (type == 0)  discard;  // None\n    else if (type == 1)  d = sqrt(dx*dx+dy*dy);  // Round\n    else if (type == 3)  d = (dx+abs(dy));  // Triangle in\n    else if (type == 2)  d = max(abs(dy),(t+dx-abs(dy)));  // Triangle out\n    else if (type == 4)  d = max(dx,dy);  // Square\n    else if (type == 5)  d = max(dx+t,dy);  // Butt\n    return d;\n}\n\n// Compute distance to join -------------------------------------------------\nfloat join( in int type, in float d, in vec2 segment, in vec2 texcoord, in vec2 miter,\n           in float linewidth )\n{\n    // texcoord.x is distance from start\n    // texcoord.y is distance from centerline\n    // segment.x and y indicate the limits (as for texcoord.x) for this segment\n\n    float dx = texcoord.x;\n\n    // Round join\n    if( type == 1 ) {\n        if (dx < segment.x) {\n            d = max(d,length( texcoord - vec2(segment.x,0.0)));\n            //d = length( texcoord - vec2(segment.x,0.0));\n        } else if (dx > segment.y) {\n            d = max(d,length( texcoord - vec2(segment.y,0.0)));\n            //d = length( texcoord - vec2(segment.y,0.0));\n        }\n    }\n    // Bevel join\n    else if ( type == 2 ) {\n        if (dx < segment.x) {\n            vec2 x = texcoord - vec2(segment.x,0.0);\n            d = max(d, max(abs(x.x), abs(x.y)));\n\n        } else if (dx > segment.y) {\n            vec2 x = texcoord - vec2(segment.y,0.0);\n            d = max(d, max(abs(x.x), abs(x.y)));\n        }\n        /*  Original code for bevel which does not work for us\n        if( (dx < segment.x) ||  (dx > segment.y) )\n            d = max(d, min(abs(x.x),abs(x.y)));\n        */\n    }\n\n    return d;\n}\n\nvoid main()\n{\n    // If color is fully transparent we just discard the fragment\n    if( v_color.a <= 0.0 ) {\n        discard;\n    }\n\n    // Test if dash pattern is the solid one (0)\n    bool solid =  (u_dash_index == 0.0);\n\n    // Test if path is closed\n    bool closed = (u_closed > 0.0);\n\n    vec4 color = v_color;\n    float dx = v_texcoord.x;\n    float dy = v_texcoord.y;\n    float t = v_linewidth/2.0-u_antialias;\n    float width = 1.0;  //v_linewidth; original code had dashes scale with line width, we do not\n    float d = 0.0;\n\n    vec2 linecaps = u_linecaps;\n    vec2 dash_caps = u_dash_caps;\n    float line_start = 0.0;\n    float line_stop = v_length;\n\n    // Apply miter limit; fragments too far into the miter are simply discarded\n    if( (dx < v_segment.x) || (dx > v_segment.y) ) {\n        float into_miter = max(v_segment.x - dx, dx - v_segment.y);\n        if (into_miter > u_miter_limit*v_linewidth/2.0)\n          discard;\n    }\n\n    // Solid line --------------------------------------------------------------\n    if( solid ) {\n        d = abs(dy);\n        if( (!closed) && (dx < line_start) ) {\n            d = cap( int(u_linecaps.x), abs(dx), abs(dy), t, v_linewidth );\n        }\n        else if( (!closed) &&  (dx > line_stop) ) {\n            d = cap( int(u_linecaps.y), abs(dx)-line_stop, abs(dy), t, v_linewidth );\n        }\n        else {\n            d = join( int(u_linejoin), abs(dy), v_segment, v_texcoord, v_miter, v_linewidth );\n        }\n\n    // Dash line --------------------------------------------------------------\n    } else {\n        float segment_start = v_segment.x;\n        float segment_stop  = v_segment.y;\n        float segment_center= (segment_start+segment_stop)/2.0;\n        float freq          = u_dash_period*width;\n        float u = mod( dx + u_dash_phase*width, freq);\n        vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n        float dash_center= tex.x * width;\n        float dash_type  = tex.y;\n        float _start = tex.z * width;\n        float _stop  = tex.a * width;\n        float dash_start = dx - u + _start;\n        float dash_stop  = dx - u + _stop;\n\n        // Compute extents of the first dash (the one relative to v_segment.x)\n        // Note: this could be computed in the vertex shader\n        if( (dash_stop < segment_start) && (dash_caps.x != 5.0) ) {\n            float u = mod(segment_start + u_dash_phase*width, freq);\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n            dash_center= tex.x * width;\n            //dash_type  = tex.y;\n            float _start = tex.z * width;\n            float _stop  = tex.a * width;\n            dash_start = segment_start - u + _start;\n            dash_stop = segment_start - u + _stop;\n        }\n\n        // Compute extents of the last dash (the one relatives to v_segment.y)\n        // Note: This could be computed in the vertex shader\n        else if( (dash_start > segment_stop)  && (dash_caps.y != 5.0) ) {\n            float u = mod(segment_stop + u_dash_phase*width, freq);\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n            dash_center= tex.x * width;\n            //dash_type  = tex.y;\n            float _start = tex.z * width;\n            float _stop  = tex.a * width;\n            dash_start = segment_stop - u + _start;\n            dash_stop  = segment_stop - u + _stop;\n        }\n\n        // This test if the we are dealing with a discontinuous angle\n        bool discontinuous = ((dx <  segment_center) && abs(v_angles.x) > THETA) ||\n                             ((dx >= segment_center) && abs(v_angles.y) > THETA);\n        //if( dx < line_start) discontinuous = false;\n        //if( dx > line_stop)  discontinuous = false;\n\n        float d_join = join( int(u_linejoin), abs(dy),\n                            v_segment, v_texcoord, v_miter, v_linewidth );\n\n        // When path is closed, we do not have room for linecaps, so we make room\n        // by shortening the total length\n        if (closed) {\n             line_start += v_linewidth/2.0;\n             line_stop  -= v_linewidth/2.0;\n        }\n\n        // We also need to take antialias area into account\n        //line_start += u_antialias;\n        //line_stop  -= u_antialias;\n\n        // Check is dash stop is before line start\n        if( dash_stop <= line_start ) {\n            discard;\n        }\n        // Check is dash start is beyond line stop\n        if( dash_start >= line_stop ) {\n            discard;\n        }\n\n        // Check if current dash start is beyond segment stop\n        if( discontinuous ) {\n            // Dash start is beyond segment, we discard\n            if( (dash_start > segment_stop) ) {\n                discard;\n                //gl_FragColor = vec4(1.0,0.0,0.0,.25); return;\n            }\n\n            // Dash stop is before segment, we discard\n            if( (dash_stop < segment_start) ) {\n                discard;  //gl_FragColor = vec4(0.0,1.0,0.0,.25); return;\n            }\n\n            // Special case for round caps (nicer with this)\n            if( dash_caps.x == 1.0 ) {\n                if( (u > _stop) && (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0)) {\n                    discard;\n                }\n            }\n\n            // Special case for round caps  (nicer with this)\n            if( dash_caps.y == 1.0 ) {\n                if( (u < _start) && (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0)) {\n                    discard;\n                }\n            }\n\n            // Special case for triangle caps (in & out) and square\n            // We make sure the cap stop at crossing frontier\n            if( (dash_caps.x != 1.0) && (dash_caps.x != 5.0) ) {\n                if( (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0) ) {\n                    float a = v_angles.x/2.0;\n                    float x = (segment_start-dx)*cos(a) - dy*sin(a);\n                    float y = (segment_start-dx)*sin(a) + dy*cos(a);\n                    if( x > 0.0 ) discard;\n                    // We transform the cap into square to avoid holes\n                    dash_caps.x = 4.0;\n                }\n            }\n\n            // Special case for triangle caps (in & out) and square\n            // We make sure the cap stop at crossing frontier\n            if( (dash_caps.y != 1.0) && (dash_caps.y != 5.0) ) {\n                if( (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0) ) {\n                    float a = v_angles.y/2.0;\n                    float x = (dx-segment_stop)*cos(a) - dy*sin(a);\n                    float y = (dx-segment_stop)*sin(a) + dy*cos(a);\n                    if( x > 0.0 ) discard;\n                    // We transform the caps into square to avoid holes\n                    dash_caps.y = 4.0;\n                }\n            }\n        }\n\n        // Line cap at start\n        if( (dx < line_start) && (dash_start < line_start) && (dash_stop > line_start) ) {\n            d = cap( int(linecaps.x), dx-line_start, dy, t, v_linewidth);\n        }\n        // Line cap at stop\n        else if( (dx > line_stop) && (dash_stop > line_stop) && (dash_start < line_stop) ) {\n            d = cap( int(linecaps.y), dx-line_stop, dy, t, v_linewidth);\n        }\n        // Dash cap left - dash_type = -1, 0 or 1, but there may be roundoff errors\n        else if( dash_type < -0.5 ) {\n            d = cap( int(dash_caps.y), abs(u-dash_center), dy, t, v_linewidth);\n            if( (dx > line_start) && (dx < line_stop) )\n                d = max(d,d_join);\n        }\n        // Dash cap right\n        else if( dash_type > 0.5 ) {\n            d = cap( int(dash_caps.x), abs(dash_center-u), dy, t, v_linewidth);\n            if( (dx > line_start) && (dx < line_stop) )\n                d = max(d,d_join);\n        }\n        // Dash body (plain)\n        else {// if( dash_type > -0.5 &&  dash_type < 0.5) {\n            d = abs(dy);\n        }\n\n        // Line join\n        if( (dx > line_start) && (dx < line_stop)) {\n            if( (dx <= segment_start) && (dash_start <= segment_start)\n                && (dash_stop >= segment_start) ) {\n                d = d_join;\n                // Antialias at outer border\n                float angle = PI/2.+v_angles.x;\n                float f = abs( (segment_start - dx)*cos(angle) - dy*sin(angle));\n                d = max(f,d);\n            }\n            else if( (dx > segment_stop) && (dash_start <= segment_stop)\n                     && (dash_stop >= segment_stop) ) {\n                d = d_join;\n                // Antialias at outer border\n                float angle = PI/2.+v_angles.y;\n                float f = abs((dx - segment_stop)*cos(angle) - dy*sin(angle));\n                d = max(f,d);\n            }\n            else if( dx < (segment_start - v_linewidth/2.)) {\n                discard;\n            }\n            else if( dx > (segment_stop + v_linewidth/2.)) {\n                discard;\n            }\n        }\n        else if( dx < (segment_start - v_linewidth/2.)) {\n            discard;\n        }\n        else if( dx > (segment_stop + v_linewidth/2.)) {\n            discard;\n        }\n    }\n\n    // Distance to border ------------------------------------------------------\n    d = d - t;\n    if( d < 0.0 ) {\n        gl_FragColor = color;\n    } else {\n        d /= u_antialias;\n        gl_FragColor = vec4(color.rgb, exp(-d*d)*color.a);\n    }\n}\n"},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(106),l=a.__importStar(e(107)),c=a.__importStar(e(48)),u=e(59);class d extends o.XYGlyphView{_inner_loop(e,t,n,r,i){for(const a of t){const t=n[a],o=r[a];0!=a?isNaN(t+o)?(e.closePath(),i.apply(e),e.beginPath()):e.lineTo(t,o):(e.beginPath(),e.moveTo(t,o))}e.closePath(),i.call(e)}_render(e,t,n){var{sx:r,sy:n}=null!=n?n:this;this.visuals.fill.doit&&(this.visuals.fill.set_value(e),this._inner_loop(e,t,r,n,e.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),this._inner_loop(e,t,r,n,e.fill)),this.visuals.line.doit&&(this.visuals.line.set_value(e),this._inner_loop(e,t,r,n,e.stroke))}draw_legend_for_index(e,t,n){s.generic_area_scalar_legend(this.visuals,e,t)}_hit_point(e){const t=new u.Selection;return l.point_in_poly(e.sx,e.sy,this.sx,this.sy)&&(t.add_to_selected_glyphs(this.model),t.view=this),t}}(n.PatchView=d).__name__="PatchView";class h extends o.XYGlyph{constructor(e){super(e)}static init_Patch(){this.prototype.default_view=d,this.mixins([c.LineScalar,c.FillScalar,c.HatchScalar])}}(n.Patch=h).__name__="Patch",h.init_Patch()},function(e,t,n,r,i){r();const a=e(1),o=e(24),s=e(118),l=a.__importStar(e(107)),c=a.__importStar(e(18)),u=e(59);class d extends s.AreaView{_index_data(t){const{min:n,max:r}=Math,{data_size:i}=this;for(let e=0;e<i;e++){const i=this._x1[e],a=this._x2[e],o=this._y[e];isNaN(i+a+o)||!isFinite(i+a+o)?t.add_empty():t.add(n(i,a),o,r(i,a),o)}}_inner(n,r,t,i,e){n.beginPath();for(let e=0,t=r.length;e<t;e++)n.lineTo(r[e],i[e]);for(let e=t.length-1;0<=e;e--)n.lineTo(t[e],i[e]);n.closePath(),e.call(n)}_render(e,t,n){var{sx1:r,sx2:i,sy:n}=null!=n?n:this;this.visuals.fill.doit&&(this.visuals.fill.set_value(e),this._inner(e,r,i,n,e.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),this._inner(e,r,i,n,e.fill))}_hit_point(e){const n=this.sy.length,r=new o.ScreenArray(2*n),i=new o.ScreenArray(2*n);for(let e=0,t=n;e<t;e++)r[e]=this.sx1[e],i[e]=this.sy[e],r[n+e]=this.sx2[n-e-1],i[n+e]=this.sy[n-e-1];const t=new u.Selection;return l.point_in_poly(e.sx,e.sy,r,i)&&(t.add_to_selected_glyphs(this.model),t.view=this),t}scenterxy(e){return[(this.sx1[e]+this.sx2[e])/2,this.sy[e]]}_map_data(){this.sx1=this.renderer.xscale.v_compute(this._x1),this.sx2=this.renderer.xscale.v_compute(this._x2),this.sy=this.renderer.yscale.v_compute(this._y)}}(n.HAreaView=d).__name__="HAreaView";class h extends s.Area{constructor(e){super(e)}static init_HArea(){this.prototype.default_view=d,this.define(({})=>({x1:[c.XCoordinateSpec,{field:"x1"}],x2:[c.XCoordinateSpec,{field:"x2"}],y:[c.YCoordinateSpec,{field:"y"}]}))}}(n.HArea=h).__name__="HArea",h.init_HArea()},function(e,t,n,r,i){r();const a=e(1),o=e(98),s=e(106),l=a.__importStar(e(48));class c extends o.GlyphView{draw_legend_for_index(e,t,n){s.generic_area_scalar_legend(this.visuals,e,t)}}(n.AreaView=c).__name__="AreaView";class u extends o.Glyph{constructor(e){super(e)}static init_Area(){this.mixins([l.FillScalar,l.HatchScalar])}}(n.Area=u).__name__="Area",u.init_Area()},function(e,t,n,r,i){r();const a=e(1),o=e(24),s=e(118),l=a.__importStar(e(107)),c=a.__importStar(e(18)),u=e(59);class d extends s.AreaView{_index_data(t){const{min:n,max:r}=Math,{data_size:i}=this;for(let e=0;e<i;e++){const i=this._x[e],a=this._y1[e],o=this._y2[e];isNaN(i+a+o)||!isFinite(i+a+o)?t.add_empty():t.add(i,n(a,o),i,r(a,o))}}_inner(n,r,i,t,e){n.beginPath();for(let e=0,t=i.length;e<t;e++)n.lineTo(r[e],i[e]);for(let e=t.length-1;0<=e;e--)n.lineTo(r[e],t[e]);n.closePath(),e.call(n)}_render(e,t,n){var{sx:r,sy1:i,sy2:n}=null!=n?n:this;this.visuals.fill.doit&&(this.visuals.fill.set_value(e),this._inner(e,r,i,n,e.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),this._inner(e,r,i,n,e.fill))}scenterxy(e){return[this.sx[e],(this.sy1[e]+this.sy2[e])/2]}_hit_point(e){const n=this.sx.length,r=new o.ScreenArray(2*n),i=new o.ScreenArray(2*n);for(let e=0,t=n;e<t;e++)r[e]=this.sx[e],i[e]=this.sy1[e],r[n+e]=this.sx[n-e-1],i[n+e]=this.sy2[n-e-1];const t=new u.Selection;return l.point_in_poly(e.sx,e.sy,r,i)&&(t.add_to_selected_glyphs(this.model),t.view=this),t}_map_data(){this.sx=this.renderer.xscale.v_compute(this._x),this.sy1=this.renderer.yscale.v_compute(this._y1),this.sy2=this.renderer.yscale.v_compute(this._y2)}}(n.VAreaView=d).__name__="VAreaView";class h extends s.Area{constructor(e){super(e)}static init_VArea(){this.prototype.default_view=d,this.define(({})=>({x:[c.XCoordinateSpec,{field:"x"}],y1:[c.YCoordinateSpec,{field:"y1"}],y2:[c.YCoordinateSpec,{field:"y2"}]}))}}(n.VArea=h).__name__="VArea",h.init_VArea()},function(e,t,n,r,i){r();const a=e(53),o=e(59),s=e(24),l=e(121),c=e(57);class u extends a.Model{constructor(e){super(e)}static init_CDSView(){this.define(({Array:e,Ref:t})=>({filters:[e(t(l.Filter)),[]],source:[t(c.ColumnarDataSource)]})),this.internal(({Int:e,Dict:t,Ref:n,Nullable:r})=>({indices:[n(s.Indices)],indices_map:[t(e),{}],masked:[r(n(s.Indices)),null]}))}initialize(){super.initialize(),this.compute_indices()}connect_signals(){super.connect_signals(),this.connect(this.properties.filters.change,()=>this.compute_indices());const e=()=>{var e=()=>this.compute_indices();null!=this.source&&(this.connect(this.source.change,e),this.source instanceof c.ColumnarDataSource&&(this.connect(this.source.streaming,e),this.connect(this.source.patching,e)))};let t=null!=this.source;t?e():this.connect(this.properties.source.change,()=>{t||(e(),t=!0)})}compute_indices(){var e;const{source:t}=this;if(null!=t){const n=null!==(e=t.get_length())&&void 0!==e?e:1,r=s.Indices.all_set(n);for(const e of this.filters)r.intersect(e.compute_indices(t));this.indices=r,this._indices=[...r],this.indices_map_to_subset()}}indices_map_to_subset(){this.indices_map={};for(let e=0;e<this._indices.length;e++)this.indices_map[this._indices[e]]=e}convert_selection_from_subset(e){var t=e.indices.map(e=>this._indices[e]);return new o.Selection(Object.assign(Object.assign({},e.attributes),{indices:t}))}convert_selection_to_subset(e){var t=e.indices.map(e=>this.indices_map[e]);return new o.Selection(Object.assign(Object.assign({},e.attributes),{indices:t}))}convert_indices_from_subset(e){return e.map(e=>this._indices[e])}}n.CDSView=u,u.__name__="CDSView",u.init_CDSView()},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{constructor(e){super(e)}}(n.Filter=a).__name__="Filter"},function(e,t,n,r,i){r();const s=e(9);async function l(e,t,n){const r=new e(Object.assign(Object.assign({},n),{model:t}));return r.initialize(),await r.lazy_initialize(),r}n.build_view=async function(e,t={parent:null},n=e=>e.default_view){const r=await l(n(e),e,t);return r.connect_signals(),r},n.build_views=async function(t,e,n={parent:null},r=e=>e.default_view){const i=s.difference([...t.keys()],e);for(const e of i)t.get(e).remove(),t.delete(e);const a=[],o=e.filter(e=>!t.has(e));for(const e of o){const i=await l(r(e),e,n);t.set(e,i),a.push(i)}for(const t of a)t.connect_signals();return a},n.remove_views=function(e){for(var[t,n]of e)n.remove(),e.delete(t)}},function(e,t,n,r,i){r();const a=e(62),o=e(61),u=e(124),s=e(125),l=e(126),d=e(122),h=e(64),f=e(127),p=e(128),m=e(11);class c extends a.DataRendererView{get glyph_view(){return this.node_view.glyph}async lazy_initialize(){await super.lazy_initialize();const t=this.model;let n=null,r=null;const e=new class extends u.Expression{_v_compute(e){m.assert(null==n);var[e]=n=t.layout_provider.get_edge_coordinates(e);return e}},i=new class extends u.Expression{_v_compute(e){m.assert(null!=n);var[,t]=n;return n=null,t}},a=new class extends u.Expression{_v_compute(e){m.assert(null==r);var[e]=r=t.layout_provider.get_node_coordinates(e);return e}},o=new class extends u.Expression{_v_compute(e){m.assert(null!=r);var[,t]=r;return r=null,t}},{edge_renderer:s,node_renderer:l}=this.model;if(!(s.glyph instanceof f.MultiLine||s.glyph instanceof p.Patches))throw new Error(`${this}.edge_renderer.glyph must be a MultiLine glyph`);if(!(l.glyph instanceof h.XYGlyph))throw new Error(`${this}.node_renderer.glyph must be a XYGlyph glyph`);s.glyph.properties.xs.internal=!0,s.glyph.properties.ys.internal=!0,l.glyph.properties.x.internal=!0,l.glyph.properties.y.internal=!0,s.glyph.xs={expr:e},s.glyph.ys={expr:i},l.glyph.x={expr:a},l.glyph.y={expr:o};var{parent:c}=this;this.edge_view=await d.build_view(s,{parent:c}),this.node_view=await d.build_view(l,{parent:c})}connect_signals(){super.connect_signals(),this.connect(this.model.layout_provider.change,()=>{this.edge_view.set_data(),this.node_view.set_data(),this.request_render()})}remove(){this.edge_view.remove(),this.node_view.remove(),super.remove()}_render(){this.edge_view.render(),this.node_view.render()}renderer_view(e){if(e instanceof o.GlyphRenderer){if(e==this.edge_view.model)return this.edge_view;if(e==this.node_view.model)return this.node_view}return super.renderer_view(e)}}(n.GraphRendererView=c).__name__="GraphRendererView";class g extends a.DataRenderer{constructor(e){super(e)}static init_GraphRenderer(){this.prototype.default_view=c,this.define(({Ref:e})=>({layout_provider:[e(s.LayoutProvider)],node_renderer:[e(o.GlyphRenderer)],edge_renderer:[e(o.GlyphRenderer)],selection_policy:[e(l.GraphHitTestPolicy),()=>new l.NodesOnly],inspection_policy:[e(l.GraphHitTestPolicy),()=>new l.NodesOnly]}))}get_selection_manager(){return this.node_renderer.data_source.selection_manager}}(n.GraphRenderer=g).__name__="GraphRenderer",g.init_GraphRenderer()},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{constructor(e){super(e)}initialize(){super.initialize(),this._connected=new Set,this._result=new Map}v_compute(e){this._connected.has(e)||(this.connect(e.change,()=>this._result.delete(e)),this.connect(e.patching,()=>this._result.delete(e)),this.connect(e.streaming,()=>this._result.delete(e)),this._connected.add(e));let t=this._result.get(e);return null==t&&(t=this._v_compute(e),this._result.set(e,t)),t}}(n.Expression=a).__name__="Expression";class o extends e.Model{constructor(e){super(e)}initialize(){super.initialize(),this._connected=new Set,this._result=new Map}compute(e){this._connected.has(e)||(this.connect(e.change,()=>this._result.delete(e)),this.connect(e.patching,()=>this._result.delete(e)),this.connect(e.streaming,()=>this._result.delete(e)),this._connected.add(e));let t=this._result.get(e);return null==t&&(t=this._compute(e),this._result.set(e,t)),t}}(n.ScalarExpression=o).__name__="ScalarExpression"},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{constructor(e){super(e)}}(n.LayoutProvider=a).__name__="LayoutProvider"},function(e,t,n,r,i){r();const a=e(53),o=e(12),s=e(9),l=e(59);class c extends a.Model{constructor(e){super(e)}_hit_test(e,t,n){if(!t.model.visible)return null;e=n.glyph.hit_test(e);return null==e?null:n.model.view.convert_selection_from_subset(e)}}(n.GraphHitTestPolicy=c).__name__="GraphHitTestPolicy";class u extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.edge_view)}do_selection(e,t,n,r){if(null==e)return!1;const i=t.edge_renderer.data_source.selected;return i.update(e,n,r),t.edge_renderer.data_source._select.emit(),!i.is_empty()}do_inspection(e,t,n,r,i){if(null==e)return!1;const{edge_renderer:a}=n.model,o=a.get_selection_manager().get_or_create_inspector(n.edge_view.model);return o.update(e,r,i),n.edge_view.model.data_source.setv({inspected:o},{silent:!0}),n.edge_view.model.data_source.inspect.emit([n.edge_view.model,{geometry:t}]),!o.is_empty()}}(n.EdgesOnly=u).__name__="EdgesOnly";class d extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.node_view)}do_selection(e,t,n,r){if(null==e)return!1;const i=t.node_renderer.data_source.selected;return i.update(e,n,r),t.node_renderer.data_source._select.emit(),!i.is_empty()}do_inspection(e,t,n,r,i){if(null==e)return!1;const{node_renderer:a}=n.model,o=a.get_selection_manager().get_or_create_inspector(n.node_view.model);return o.update(e,r,i),n.node_view.model.data_source.setv({inspected:o},{silent:!0}),n.node_view.model.data_source.inspect.emit([n.node_view.model,{geometry:t}]),!o.is_empty()}}(n.NodesOnly=d).__name__="NodesOnly";class h extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.node_view)}get_linked_edges(t,n,e){let r=[];"selection"==e?r=t.selected.indices.map(e=>t.data.index[e]):"inspection"==e&&(r=t.inspected.indices.map(e=>t.data.index[e]));const i=[];for(let e=0;e<n.data.start.length;e++)(s.contains(r,n.data.start[e])||s.contains(r,n.data.end[e]))&&i.push(e);const a=new l.Selection;for(const t of i)a.multiline_indices[t]=[0];return a.indices=i,a}do_selection(e,t,n,r){if(null==e)return!1;const i=t.node_renderer.data_source.selected;i.update(e,n,r);const a=t.edge_renderer.data_source.selected,o=this.get_linked_edges(t.node_renderer.data_source,t.edge_renderer.data_source,"selection");return a.update(o,n,r),t.node_renderer.data_source._select.emit(),!i.is_empty()}do_inspection(e,t,n,r,i){if(null==e)return!1;const a=n.node_view.model.data_source.selection_manager.get_or_create_inspector(n.node_view.model);a.update(e,r,i),n.node_view.model.data_source.setv({inspected:a},{silent:!0});const o=n.edge_view.model.data_source.selection_manager.get_or_create_inspector(n.edge_view.model),s=this.get_linked_edges(n.node_view.model.data_source,n.edge_view.model.data_source,"inspection");return o.update(s,r,i),n.edge_view.model.data_source.setv({inspected:o},{silent:!0}),n.node_view.model.data_source.inspect.emit([n.node_view.model,{geometry:t}]),!a.is_empty()}}(n.NodesAndLinkedEdges=h).__name__="NodesAndLinkedEdges";class f extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.edge_view)}get_linked_nodes(t,e,n){let r=[];"selection"==n?r=e.selected.indices:"inspection"==n&&(r=e.inspected.indices);const i=[];for(const t of r)i.push(e.data.start[t]),i.push(e.data.end[t]);n=s.uniq(i).map(e=>o.indexOf(t.data.index,e));return new l.Selection({indices:n})}do_selection(e,t,n,r){if(null==e)return!1;const i=t.edge_renderer.data_source.selected;i.update(e,n,r);const a=t.node_renderer.data_source.selected,o=this.get_linked_nodes(t.node_renderer.data_source,t.edge_renderer.data_source,"selection");return a.update(o,n,r),t.edge_renderer.data_source._select.emit(),!i.is_empty()}do_inspection(e,t,n,r,i){if(null==e)return!1;const a=n.edge_view.model.data_source.selection_manager.get_or_create_inspector(n.edge_view.model);a.update(e,r,i),n.edge_view.model.data_source.setv({inspected:a},{silent:!0});const o=n.node_view.model.data_source.selection_manager.get_or_create_inspector(n.node_view.model),s=this.get_linked_nodes(n.node_view.model.data_source,n.edge_view.model.data_source,"inspection");return o.update(s,r,i),n.node_view.model.data_source.setv({inspected:o},{silent:!0}),n.edge_view.model.data_source.inspect.emit([n.edge_view.model,{geometry:t}]),!a.is_empty()}}(n.EdgesAndLinkedNodes=f).__name__="EdgesAndLinkedNodes"},function(e,t,n,r,i){r();const a=e(1),o=e(65),s=e(48),d=a.__importStar(e(107)),l=a.__importStar(e(18)),c=e(12),h=e(13),u=e(98),f=e(106),p=e(59);class m extends u.GlyphView{_project_data(){o.inplace.project_xy(this._xs.array,this._ys.array)}_index_data(t){const{data_size:n}=this;for(let e=0;e<n;e++){const n=this._xs.get(e);var r,i,a,o;0!=n.length?0!=(o=this._ys.get(e)).length?([r,i]=c.minmax(n),[a,o]=c.minmax(o),t.add(r,a,i,o)):t.add_empty():t.add_empty()}}_render(n,r,e){const{sxs:i,sys:a}=null!=e?e:this;for(const e of r){const r=i.get(e),o=a.get(e),s=Math.min(r.length,o.length);let t=!0;n.beginPath();for(let e=0;e<s;e++){const i=r[e],a=o[e];isFinite(i+a)?t?(n.moveTo(i,a),t=!1):n.lineTo(i,a):t=!0}this.visuals.line.set_vectorize(n,e),n.stroke()}}_hit_point(e){var r={x:e.sx,y:e.sy};let i=9999;const a=new Map;for(let e=0,t=this.sxs.length;e<t;e++){var o=Math.max(2,this.line_width.get(e)/2),s=this.sxs.get(e),l=this.sys.get(e);let n=null;for(let e=0,t=s.length-1;e<t;e++){const a={x:s[e],y:l[e]},c={x:s[e+1],y:l[e+1]},u=d.dist_to_segment(r,a,c);u<o&&u<i&&(i=u,n=[e])}null!=n&&a.set(e,n)}return new p.Selection({indices:[...a.keys()],multiline_indices:h.to_object(a)})}_hit_span(e){const{sx:n,sy:r}=e;let i,a;a="v"==e.direction?(i=this.renderer.yscale.invert(r),this._ys):(i=this.renderer.xscale.invert(n),this._xs);const o=new Map;for(let e=0,t=a.length;e<t;e++){const n=a.get(e),r=[];for(let e=0,t=n.length-1;e<t;e++)n[e]<=i&&i<=n[e+1]&&r.push(e);0<r.length&&o.set(e,r)}return new p.Selection({indices:[...o.keys()],multiline_indices:h.to_object(o)})}get_interpolation_hit(e,t,n){var r=this._xs.get(e),i=this._ys.get(e),a=r[t],e=i[t],r=r[t+1],t=i[t+1];return f.line_interpolation(this.renderer,n,a,e,r,t)}draw_legend_for_index(e,t,n){f.generic_line_vector_legend(this.visuals,e,t,n)}scenterxy(){throw new Error(`${this}.scenterxy() is not implemented`)}}(n.MultiLineView=m).__name__="MultiLineView";class g extends u.Glyph{constructor(e){super(e)}static init_MultiLine(){this.prototype.default_view=m,this.define(({})=>({xs:[l.XCoordinateSeqSpec,{field:"xs"}],ys:[l.YCoordinateSeqSpec,{field:"ys"}]})),this.mixins(s.LineVector)}}(n.MultiLine=g).__name__="MultiLine",g.init_MultiLine()},function(e,t,n,r,i){r();const a=e(1),o=e(98),s=e(106),l=e(12),c=e(48),f=a.__importStar(e(107)),u=a.__importStar(e(18)),p=e(59),d=e(11),h=e(65);class m extends o.GlyphView{_project_data(){h.inplace.project_xy(this._xs.array,this._ys.array)}_index_data(t){const{data_size:n}=this;for(let e=0;e<n;e++){const n=this._xs.get(e),s=this._ys.get(e);var r,i,a,o;0==n.length?t.add_empty():([r,i]=l.minmax(n),[a,o]=l.minmax(s),t.add(r,a,i,o))}}_mask_data(){var{x_range:e,y_range:t}=this.renderer.plot_view.frame;return this.index.indices({x0:e.min,x1:e.max,y0:t.min,y1:t.max})}_inner_loop(n,r,i,a){for(let e=0,t=r.length;e<t;e++)0!=e?isNaN(r[e]+i[e])?(n.closePath(),a.apply(n),n.beginPath()):n.lineTo(r[e],i[e]):(n.beginPath(),n.moveTo(r[e],i[e]));n.closePath(),a.call(n)}_render(e,t,n){const{sxs:r,sys:i}=null!=n?n:this;for(const n of t){const t=r.get(n),a=i.get(n);this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),this._inner_loop(e,t,a,e.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),this._inner_loop(e,t,a,e.fill)),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),this._inner_loop(e,t,a,e.stroke))}}_hit_rect(e){const{sx0:r,sx1:i,sy0:t,sy1:a}=e,o=[r,i,i,r],s=[t,t,a,a],[l,n]=this.renderer.xscale.r_invert(r,i),[c,u]=this.renderer.yscale.r_invert(t,a),d=this.index.indices({x0:l,x1:n,y0:c,y1:u}),h=[];for(const e of d){const r=this.sxs.get(e),i=this.sys.get(e);let n=!0;for(let e=0,t=r.length;e<t;e++){const a=r[e],l=i[e];if(!f.point_in_poly(a,l,o,s)){n=!1;break}}n&&h.push(e)}return new p.Selection({indices:h})}_hit_point(n){const{sx:r,sy:i}=n,a=this.renderer.xscale.invert(r),o=this.renderer.yscale.invert(i),s=this.index.indices({x0:a,y0:o,x1:a,y1:o}),l=[];for(const n of s){const a=this.sxs.get(n),o=this.sys.get(n),s=a.length;for(let e=0,t=0;;t++){if(isNaN(a[t])||t==s){const s=a.subarray(e,t),c=o.subarray(e,t);if(f.point_in_poly(r,i,s,c)){l.push(n);break}e=t+1}if(t==s)break}}return new p.Selection({indices:l})}_get_snap_coord(e){return l.sum(e)/e.length}scenterxy(e,n,r){const i=this.sxs.get(e),a=this.sys.get(e),o=i.length;let s=!1;for(let e=0,t=0;;t++){var l=isNaN(i[t]);if(s=s||l,t==o&&!s)return[this._get_snap_coord(i),this._get_snap_coord(a)];if(l||t==o){const o=i.subarray(e,t),s=a.subarray(e,t);if(f.point_in_poly(n,r,o,s))return[this._get_snap_coord(o),this._get_snap_coord(s)];e=t+1}if(t==o)break}d.unreachable()}draw_legend_for_index(e,t,n){s.generic_area_vector_legend(this.visuals,e,t,n)}}(n.PatchesView=m).__name__="PatchesView";class g extends o.Glyph{constructor(e){super(e)}static init_Patches(){this.prototype.default_view=m,this.define(({})=>({xs:[u.XCoordinateSeqSpec,{field:"xs"}],ys:[u.YCoordinateSeqSpec,{field:"ys"}]})),this.mixins([c.LineVector,c.FillVector,c.HatchVector])}}(n.Patches=g).__name__="Patches",g.init_Patches()},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{do_selection(e,t,n,r){return null!=e&&(t.selected.update(e,n,r),t._select.emit(),!t.selected.is_empty())}}(n.SelectionPolicy=a).__name__="SelectionPolicy";class o extends a{hit_test(e,t){const n=[];for(const r of t){const t=r.hit_test(e);null!=t&&n.push(t)}if(0<n.length){const e=n[0];for(const t of n)e.update_through_intersection(t);return e}return null}}(n.IntersectRenderers=o).__name__="IntersectRenderers";class s extends a{hit_test(e,t){const n=[];for(const r of t){const t=r.hit_test(e);null!=t&&n.push(t)}if(0<n.length){const e=n[0];for(const t of n)e.update_through_union(t);return e}return null}}n.UnionRenderers=s,s.__name__="UnionRenderers"},function(e,t,n,r,i){r();const a=e(1),o=e(57),m=e(8),s=e(13),l=a.__importStar(e(131)),c=e(132),u=e(35);function d(e,r,t){if(m.isArray(e)){const n=e.concat(r);return null!=t&&n.length>t?n.slice(-t):n}if(m.isTypedArray(e)){var i=e.length+r.length;if(null!=t&&t<i){var a=i-t,o=e.length;let n;e.length<t?(n=new e.constructor(t),n.set(e,0)):n=e;for(let e=a,t=o;e<t;e++)n[e-a]=n[e];for(let e=0,t=r.length;e<t;e++)n[e+(o-a)]=r[e];return n}{const t=new e.constructor(r);return l.concat(e,t)}}throw new Error("unsupported array types")}function g(e,t){let n,r,i;return r=m.isNumber(e)?(n=e,i=e+1,1):(n=null!=e.start?e.start:0,i=null!=e.stop?e.stop:t,null!=e.step?e.step:1),[n,i,r]}function h(t,e){const o=new Set;let s=!1;for(var[l,c]of e){let n,r,e,i;if(m.isArray(l)){const[s]=l;o.add(s),n=t[s].shape,r=t[s],i=c,e=2===l.length?(n=[1,n[0]],[l[0],0,l[1]]):l}else m.isNumber(l)?(i=[c],o.add(l)):(i=c,s=!0),e=[0,0,l],n=[1,t.length],r=t;let a=0;var[l,u,d]=g(e[1],n[0]),[h,f,p]=g(e[2],n[1]);for(let t=l;t<u;t+=d)for(let e=h;e<f;e+=p)s&&o.add(e),r[t*n[1]+e]=i[a],a++}return o}n.stream_to_column=d,n.slice=g,n.patch_to_column=h;class f extends o.ColumnarDataSource{constructor(e){super(e)}static init_ColumnDataSource(){this.define(({Dict:e,Any:t})=>({data:[e(t),{}]}))}stream(e,t,n){const{data:r}=this;for(const[n,i]of s.entries(e))r[n]=d(r[n],i,t);if(this.setv({data:r},{silent:!0}),this.streaming.emit(),null!=this.document){const r=new u.ColumnsStreamedEvent(this.document,this.ref(),e,t);this.document._notify_change(this,"data",null,null,{setter_id:n,hint:r})}}patch(e,t){const{data:n}=this;let r=new Set;for(const[t,i]of s.entries(e))r=c.union(r,h(n[t],i));if(this.setv({data:n},{silent:!0}),this.patching.emit([...r]),null!=this.document){const n=new u.ColumnsPatchedEvent(this.document,this.ref(),e);this.document._notify_change(this,"data",null,null,{setter_id:t,hint:n})}}}n.ColumnDataSource=f,f.__name__="ColumnDataSource",f.init_ColumnDataSource()},function(e,t,n,r,i){r(),n.concat=function(e,...t){let n=e.length;for(const e of t)n+=e.length;const r=new e.constructor(n);r.set(e,0);let i=e.length;for(const e of t)r.set(e,i),i+=e.length;return r}},function(e,t,n,r,i){function a(...e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return t}r(),n.union=a,n.intersection=function(e,...t){const n=new Set;e:for(const r of e){for(const e of t)if(!e.has(r))continue e;n.add(r)}return n},n.difference=function(e,...t){const n=new Set(e);for(const e of a(...t))n.delete(e);return n}},function(e,t,n,r,i){r();const a=e(1),o=e(53),s=e(42),l=a.__importStar(e(45)),c=e(48),u=a.__importStar(e(18));class d extends s.View{initialize(){super.initialize(),this.visuals=new l.Visuals(this)}request_render(){this.parent.request_render()}get canvas(){return this.parent.canvas}set_data(e){var t;for(const n of this.model)(n instanceof u.VectorSpec||n instanceof u.ScalarSpec)&&(t=n.uniform(e),this[`${n.attr}`]=t)}}(n.ArrowHeadView=d).__name__="ArrowHeadView";class h extends o.Model{constructor(e){super(e)}static init_ArrowHead(){this.define(()=>({size:[u.NumberSpec,25]}))}}(n.ArrowHead=h).__name__="ArrowHead",h.init_ArrowHead();class f extends d{clip(e,t){this.visuals.line.set_vectorize(e,t);t=this.size.get(t);e.moveTo(.5*t,t),e.lineTo(.5*t,-2),e.lineTo(-.5*t,-2),e.lineTo(-.5*t,t),e.lineTo(0,0),e.lineTo(.5*t,t)}render(e,t){this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,t),t=this.size.get(t),e.beginPath(),e.moveTo(.5*t,t),e.lineTo(0,0),e.lineTo(-.5*t,t),e.stroke())}}(n.OpenHeadView=f).__name__="OpenHeadView";class p extends h{constructor(e){super(e)}static init_OpenHead(){this.prototype.default_view=f,this.mixins(c.LineVector)}}(n.OpenHead=p).__name__="OpenHead",p.init_OpenHead();class m extends d{clip(e,t){this.visuals.line.set_vectorize(e,t);t=this.size.get(t);e.moveTo(.5*t,t),e.lineTo(.5*t,-2),e.lineTo(-.5*t,-2),e.lineTo(-.5*t,t),e.lineTo(.5*t,t)}render(e,t){this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,t),this._normal(e,t),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,t),this._normal(e,t),e.stroke())}_normal(e,t){t=this.size.get(t);e.beginPath(),e.moveTo(.5*t,t),e.lineTo(0,0),e.lineTo(-.5*t,t),e.closePath()}}(n.NormalHeadView=m).__name__="NormalHeadView";class g extends h{constructor(e){super(e)}static init_NormalHead(){this.prototype.default_view=m,this.mixins([c.LineVector,c.FillVector]),this.override({fill_color:"black"})}}(n.NormalHead=g).__name__="NormalHead",g.init_NormalHead();class _ extends d{clip(e,t){this.visuals.line.set_vectorize(e,t);t=this.size.get(t);e.moveTo(.5*t,t),e.lineTo(.5*t,-2),e.lineTo(-.5*t,-2),e.lineTo(-.5*t,t),e.lineTo(0,.5*t),e.lineTo(.5*t,t)}render(e,t){this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,t),this._vee(e,t),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,t),this._vee(e,t),e.stroke())}_vee(e,t){t=this.size.get(t);e.beginPath(),e.moveTo(.5*t,t),e.lineTo(0,0),e.lineTo(-.5*t,t),e.lineTo(0,.5*t),e.closePath()}}(n.VeeHeadView=_).__name__="VeeHeadView";class y extends h{constructor(e){super(e)}static init_VeeHead(){this.prototype.default_view=_,this.mixins([c.LineVector,c.FillVector]),this.override({fill_color:"black"})}}(n.VeeHead=y).__name__="VeeHead",y.init_VeeHead();class v extends d{render(e,t){this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,t),t=this.size.get(t),e.beginPath(),e.moveTo(.5*t,0),e.lineTo(-.5*t,0),e.stroke())}clip(e,t){}}(n.TeeHeadView=v).__name__="TeeHeadView";class b extends h{constructor(e){super(e)}static init_TeeHead(){this.prototype.default_view=v,this.mixins(c.LineVector)}}(n.TeeHead=b).__name__="TeeHead",b.init_TeeHead()},function(e,t,n,r,i){r();const a=e(1),o=e(135),s=a.__importStar(e(48));class l extends o.UpperLowerView{paint(n){n.beginPath(),n.moveTo(this._lower_sx[0],this._lower_sy[0]);for(let e=0,t=this._lower_sx.length;e<t;e++)n.lineTo(this._lower_sx[e],this._lower_sy[e]);for(let e=this._upper_sx.length-1;0<=e;e--)n.lineTo(this._upper_sx[e],this._upper_sy[e]);n.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_value(n),n.fill()),n.beginPath(),n.moveTo(this._lower_sx[0],this._lower_sy[0]);for(let e=0,t=this._lower_sx.length;e<t;e++)n.lineTo(this._lower_sx[e],this._lower_sy[e]);this.visuals.line.doit&&(this.visuals.line.set_value(n),n.stroke()),n.beginPath(),n.moveTo(this._upper_sx[0],this._upper_sy[0]);for(let e=0,t=this._upper_sx.length;e<t;e++)n.lineTo(this._upper_sx[e],this._upper_sy[e]);this.visuals.line.doit&&(this.visuals.line.set_value(n),n.stroke())}}(n.BandView=l).__name__="BandView";class c extends o.UpperLower{constructor(e){super(e)}static init_Band(){this.prototype.default_view=l,this.mixins([s.Line,s.Fill]),this.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3})}}(n.Band=c).__name__="Band",c.init_Band()},function(e,t,n,r,i){r();const a=e(1),o=e(56),s=e(20),l=a.__importStar(e(18));class c extends o.DataAnnotationView{map_data(){const{frame:e}=this.plot_view,t=this.model.dimension,n=this.coordinates.x_scale,r=this.coordinates.y_scale,i="height"==t?r:n,a="height"==t?n:r,o="height"==t?e.bbox.yview:e.bbox.xview,s="height"==t?e.bbox.xview:e.bbox.yview;var l=("data"==this.model.properties.lower.units?i:o).v_compute(this._lower),c=("data"==this.model.properties.upper.units?i:o).v_compute(this._upper),u=("data"==this.model.properties.base.units?a:s).v_compute(this._base),[d,h]="height"==t?[1,0]:[0,1],l=[l,u],u=[c,u];this._lower_sx=l[d],this._lower_sy=l[h],this._upper_sx=u[d],this._upper_sy=u[h]}}(n.UpperLowerView=c).__name__="UpperLowerView";class u extends l.CoordinateSpec{get dimension(){return"width"==this.obj.dimension?"x":"y"}get units(){var e;return null!==(e=this.spec.units)&&void 0!==e?e:"data"}}(n.XOrYCoordinateSpec=u).__name__="XOrYCoordinateSpec";class d extends o.DataAnnotation{constructor(e){super(e)}static init_UpperLower(){this.define(()=>({dimension:[s.Dimension,"height"],lower:[u,{field:"lower"}],upper:[u,{field:"upper"}],base:[u,{field:"base"}]}))}}(n.UpperLower=d).__name__="UpperLower",d.init_UpperLower()},function(e,t,n,r,i){r();const a=e(1),o=e(40),s=a.__importStar(e(48)),l=e(20),c=e(99);n.EDGE_TOLERANCE=2.5;class u extends o.AnnotationView{constructor(){super(...arguments),this.bbox=new c.BBox}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_render(){var e,t,n,r,{left:i,right:a,top:o,bottom:s}=this.model;null==i&&null==a&&null==o&&null==s||({frame:e}=this.plot_view,t=this.coordinates.x_scale,n=this.coordinates.y_scale,r=(e,t,n,r,i)=>{return null!=e?this.model.screen?e:("data"==t?n:r).compute(e):i},this.bbox=c.BBox.from_rect({left:r(i,this.model.left_units,t,e.bbox.xview,e.bbox.left),right:r(a,this.model.right_units,t,e.bbox.xview,e.bbox.right),top:r(o,this.model.top_units,n,e.bbox.yview,e.bbox.top),bottom:r(s,this.model.bottom_units,n,e.bbox.yview,e.bbox.bottom)}),this._paint_box())}_paint_box(){const{ctx:e}=this.layer;e.save();var{left:t,top:n,width:r,height:i}=this.bbox;e.beginPath(),e.rect(t,n,r,i),this.visuals.fill.doit&&(this.visuals.fill.set_value(e),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_value(e),e.stroke()),e.restore()}interactive_bbox(){var e=this.model.line_width+n.EDGE_TOLERANCE;return this.bbox.grow_by(e)}interactive_hit(e,t){return null!=this.model.in_cursor&&this.interactive_bbox().contains(e,t)}cursor(e,t){var{left:n,right:r,bottom:i,top:a}=this.bbox;return Math.abs(e-n)<3||Math.abs(e-r)<3?this.model.ew_cursor:Math.abs(t-i)<3||Math.abs(t-a)<3?this.model.ns_cursor:this.bbox.contains(e,t)?this.model.in_cursor:null}}(n.BoxAnnotationView=u).__name__="BoxAnnotationView";class d extends o.Annotation{constructor(e){super(e)}static init_BoxAnnotation(){this.prototype.default_view=u,this.mixins([s.Line,s.Fill,s.Hatch]),this.define(({Number:e,Nullable:t})=>({top:[t(e),null],top_units:[l.SpatialUnits,"data"],bottom:[t(e),null],bottom_units:[l.SpatialUnits,"data"],left:[t(e),null],left_units:[l.SpatialUnits,"data"],right:[t(e),null],right_units:[l.SpatialUnits,"data"],render_mode:[l.RenderMode,"canvas"]})),this.internal(({Boolean:e,String:t,Nullable:n})=>({screen:[e,!1],ew_cursor:[n(t),null],ns_cursor:[n(t),null],in_cursor:[n(t),null]})),this.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3})}update({left:e,right:t,top:n,bottom:r}){this.setv({left:e,right:t,top:n,bottom:r,screen:!0})}}(n.BoxAnnotation=d).__name__="BoxAnnotation",d.init_BoxAnnotation()},function(e,t,n,r,i){r();const a=e(1),o=e(40),c=e(138),S=e(144),u=e(162),d=e(165),h=e(198),f=e(166),p=e(205),m=e(169),g=e(203),_=e(202),y=e(209),v=e(217),b=e(220),x=e(20),w=a.__importStar(e(48)),l=e(9),E=e(221),C=e(222),L=e(225),D=e(140),T=e(11),s=e(122),O=e(8);class A extends o.AnnotationView{get orientation(){return this._orientation}initialize(){super.initialize();const{ticker:e,formatter:t,color_mapper:n}=this.model;this._ticker="auto"!=e?e:(()=>{switch(!0){case n instanceof y.LogColorMapper:return new h.LogTicker;case n instanceof y.ScanningColorMapper:return new h.BinnedTicker({mapper:n});case n instanceof y.CategoricalColorMapper:return new h.CategoricalTicker;default:return new h.BasicTicker}})(),this._formatter="auto"!=t?t:(()=>{switch(!0){case this._ticker instanceof h.LogTicker:return new p.LogTickFormatter;case n instanceof y.CategoricalColorMapper:return new p.CategoricalTickFormatter;default:return new p.BasicTickFormatter}})(),this._major_range=(()=>{if(n instanceof y.CategoricalColorMapper){var{factors:e}=n;return new b.FactorRange({factors:e})}if(n instanceof _.ContinuousColorMapper){var{min:t,max:e}=n.metrics;return new b.Range1d({start:t,end:e})}T.unreachable()})(),this._major_scale=(()=>{if(n instanceof y.LinearColorMapper)return new v.LinearScale;if(n instanceof y.LogColorMapper)return new v.LogScale;if(n instanceof y.ScanningColorMapper){var{binning:e}=n.metrics;return new v.LinearInterpolationScale({binning:e})}if(n instanceof y.CategoricalColorMapper)return new v.CategoricalScale;T.unreachable()})(),this._minor_range=new b.Range1d({start:0,end:1}),this._minor_scale=new v.LinearScale;const r=w.attrs_of(this.model,"major_label_",w.Text,!0),i=w.attrs_of(this.model,"major_tick_",w.Line,!0),a=w.attrs_of(this.model,"minor_tick_",w.Line,!0),o=w.attrs_of(this.model,"title_",w.Text),s=n instanceof y.CategoricalColorMapper?u.CategoricalAxis:n instanceof y.LogColorMapper?u.LogAxis:u.LinearAxis;this._axis=new s(Object.assign(Object.assign(Object.assign({ticker:this._ticker,formatter:this._formatter,major_tick_in:this.model.major_tick_in,major_tick_out:this.model.major_tick_out,minor_tick_in:this.model.minor_tick_in,minor_tick_out:this.model.minor_tick_out,major_label_standoff:this.model.label_standoff,major_label_overrides:this.model.major_label_overrides,major_label_policy:this.model.major_label_policy,axis_line_color:null},r),i),a));var{title:l}=this.model;l&&(this._title=new c.Title(Object.assign({text:l,standoff:this.model.title_standoff},o)))}async lazy_initialize(){await super.lazy_initialize();const e=this,t={get parent(){return e.parent},get root(){return e.root},get frame(){return e._frame},get canvas_view(){return e.parent.canvas_view},request_layout(){e.parent.request_layout()}};this._axis_view=await s.build_view(this._axis,{parent:t}),null!=this._title&&(this._title_view=await s.build_view(this._title,{parent:t}))}remove(){var e;null===(e=this._title_view)||void 0===e||e.remove(),this._axis_view.remove(),super.remove()}connect_signals(){super.connect_signals(),this.connect(this._ticker.change,()=>this.request_render()),this.connect(this._formatter.change,()=>this.request_render()),this.connect(this.model.color_mapper.metrics_change,()=>{const e=this._major_range,t=this._major_scale,{color_mapper:n}=this.model;if(n instanceof _.ContinuousColorMapper&&e instanceof b.Range1d){const{min:t,max:r}=n.metrics;e.setv({start:t,end:r})}if(n instanceof y.ScanningColorMapper&&t instanceof v.LinearInterpolationScale){const{binning:e}=n.metrics;t.binning=e}this._set_canvas_image(),this.plot_view.request_layout()})}_set_canvas_image(){const{orientation:t}=this,e=(()=>{var{palette:e}=this.model.color_mapper;return"vertical"==t?l.reversed(e):e})(),[n,r]="vertical"==t?[1,e.length]:[e.length,1],i=this._image=document.createElement("canvas");i.width=n,i.height=r;const a=i.getContext("2d"),o=a.getImageData(0,0,n,r),s=new y.LinearColorMapper({palette:e}).rgba_mapper.v_compute(l.range(0,e.length));o.data.set(s),a.putImageData(o,0,0)}update_layout(){const{location:n,width:e,height:t,padding:r,margin:i}=this.model,[a,o]=(()=>{if(!O.isString(n))return["end","start"];switch(n){case"top_left":return["start","start"];case"top":case"top_center":return["start","center"];case"top_right":return["start","end"];case"bottom_left":return["end","start"];case"bottom":case"bottom_center":return["end","center"];case"bottom_right":return["end","end"];case"left":case"center_left":return["center","start"];case"center":case"center_center":return["center","center"];case"right":case"center_right":return["center","end"]}})(),s=this._orientation=(()=>{var{orientation:e}=this.model;return"auto"==e?null!=this.panel?this.panel.is_horizontal?"horizontal":"vertical":"start"==o||"end"==o||"center"==o&&"center"==a?"vertical":"horizontal":e})(),l=new C.NodeLayout,c=new C.VStack,u=new C.VStack,d=new C.HStack,h=new C.HStack;l.absolute=!0,c.absolute=!0,u.absolute=!0,d.absolute=!0,h.absolute=!0;var[f,p,m,g]="horizontal"==s?[this._major_scale,this._minor_scale,this._major_range,this._minor_range]:[this._minor_scale,this._major_scale,this._minor_range,this._major_range];this._frame=new S.CartesianFrame(f,p,m,g),l.on_resize(e=>this._frame.set_geometry(e));const _=new L.BorderLayout;this._inner_layout=_,_.absolute=!0,_.center_panel=l,_.top_panel=c,_.bottom_panel=u,_.left_panel=d,_.right_panel=h;m={left:r,right:r,top:r,bottom:r},g=(()=>{if(null==this.panel){if(O.isString(n))return{left:i,right:i,top:i,bottom:i};var[e,t]=n;return{left:e,right:i,top:i,bottom:t}}if(!O.isString(n)){var[e,t]=n;return{left:e,right:0,top:0,bottom:t}}})();let y,v,b,x;if(_.padding=m,null!=this.panel?(y="max",v=void 0,b=void 0,x=void 0):"auto"==("horizontal"==s?e:t)?(y="fixed",v=25*this.model.color_mapper.palette.length,b={percent:.3},x={percent:.8}):(y="fit",v=void 0),"horizontal"==s){const n="auto"==e?void 0:e,r="auto"==t?25:t;_.set_sizing({width_policy:y,height_policy:"min",width:v,min_width:b,max_width:x,halign:o,valign:a,margin:g}),_.center_panel.set_sizing({width_policy:"auto"==e?"fit":"fixed",height_policy:"fixed",width:n,height:r})}else{const n="auto"==e?25:e,r="auto"==t?void 0:t;_.set_sizing({width_policy:"min",height_policy:y,height:v,min_height:b,max_height:x,halign:o,valign:a,margin:g}),_.center_panel.set_sizing({width_policy:"fixed",height_policy:"auto"==t?"fit":"fixed",width:n,height:r})}c.set_sizing({width_policy:"fit",height_policy:"min"}),u.set_sizing({width_policy:"fit",height_policy:"min"}),d.set_sizing({width_policy:"min",height_policy:"fit"}),h.set_sizing({width_policy:"min",height_policy:"fit"});const{_title_view:w}=this;null!=w&&("horizontal"==s?(w.panel=new D.Panel("above"),w.update_layout(),c.children.push(w.layout)):(w.panel=new D.Panel("left"),w.update_layout(),d.children.push(w.layout)));const{panel:T}=this,A=null!=T&&s==T.orientation?T.side:"horizontal"==s?"below":"right",k=(()=>{switch(A){case"above":return c;case"below":return u;case"left":return d;case"right":return h}})(),{_axis_view:M}=this;if(M.panel=new D.Panel(A),M.update_layout(),k.children.push(M.layout),null!=this.panel){const n=new E.Grid([{layout:_,row:0,col:0}]);n.absolute=!0,"horizontal"==s?n.set_sizing({width_policy:"max",height_policy:"min"}):n.set_sizing({width_policy:"min",height_policy:"max"}),this.layout=n}else this.layout=this._inner_layout;var{visible:g}=this.model;this.layout.sizing.visible=g,this._set_canvas_image()}_render(){var e;const{ctx:t}=this.layer;t.save(),this._paint_bbox(t,this._inner_layout.bbox),this._paint_image(t,this._inner_layout.center_panel.bbox),null===(e=this._title_view)||void 0===e||e.render(),this._axis_view.render(),t.restore()}_paint_bbox(e,t){var{x:n,y:r}=t;let{width:i,height:a}=t;n+i>=this.parent.canvas_view.bbox.width&&--i,r+a>=this.parent.canvas_view.bbox.height&&--a,e.save(),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),e.fillRect(n,r,i,a)),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),e.strokeRect(n,r,i,a)),e.restore()}_paint_image(e,t){var{x:n,y:r,width:i,height:t}=t;e.save(),e.setImageSmoothingEnabled(!1),e.globalAlpha=this.model.scale_alpha,e.drawImage(this._image,n,r,i,t),this.visuals.bar_line.doit&&(this.visuals.bar_line.set_value(e),e.strokeRect(n,r,i,t)),e.restore()}serializable_state(){const e=super.serializable_state(),{children:t=[]}=e,n=a.__rest(e,["children"]);return null!=this._title_view&&t.push(this._title_view.serializable_state()),t.push(this._axis_view.serializable_state()),Object.assign(Object.assign({},n),{children:t})}}(n.ColorBarView=A).__name__="ColorBarView";class k extends o.Annotation{constructor(e){super(e)}static init_ColorBar(){this.prototype.default_view=A,this.mixins([["major_label_",w.Text],["title_",w.Text],["major_tick_",w.Line],["minor_tick_",w.Line],["border_",w.Line],["bar_",w.Line],["background_",w.Fill]]),this.define(({Alpha:e,Number:t,String:n,Tuple:r,Dict:i,Or:a,Ref:o,Auto:s,Nullable:l})=>({location:[a(x.Anchor,r(t,t)),"top_right"],orientation:[a(x.Orientation,s),"auto"],title:[l(n),null],title_standoff:[t,2],width:[a(t,s),"auto"],height:[a(t,s),"auto"],scale_alpha:[e,1],ticker:[a(o(d.Ticker),s),"auto"],formatter:[a(o(f.TickFormatter),s),"auto"],major_label_overrides:[i(n),{}],major_label_policy:[o(m.LabelingPolicy),()=>new m.NoOverlap],color_mapper:[o(g.ColorMapper)],label_standoff:[t,5],margin:[t,30],padding:[t,10],major_tick_in:[t,5],major_tick_out:[t,0],minor_tick_in:[t,0],minor_tick_out:[t,0]})),this.override({background_fill_color:"#ffffff",background_fill_alpha:.95,bar_line_color:null,border_line_color:null,major_label_text_font_size:"11px",major_tick_line_color:"#ffffff",minor_tick_line_color:null,title_text_font_size:"13px",title_text_font_style:"italic"})}}(n.ColorBar=k).__name__="ColorBar",k.init_ColorBar()},function(e,t,n,r,i){r();const a=e(1),o=e(139),s=e(20),l=e(143),c=a.__importStar(e(48));class u extends o.TextAnnotationView{_get_location(){var e=this.model.offset,t=this.model.standoff/2;let n,r;var{bbox:i}=this.layout;switch(this.panel.side){case"above":case"below":switch(this.model.vertical_align){case"top":r=i.top+t;break;case"middle":r=i.vcenter;break;case"bottom":r=i.bottom-t}switch(this.model.align){case"left":n=i.left+e;break;case"center":n=i.hcenter;break;case"right":n=i.right-e}break;case"left":switch(this.model.vertical_align){case"top":n=i.left+t;break;case"middle":n=i.hcenter;break;case"bottom":n=i.right-t}switch(this.model.align){case"left":r=i.bottom-e;break;case"center":r=i.vcenter;break;case"right":r=i.top+e}break;case"right":switch(this.model.vertical_align){case"top":n=i.right-t;break;case"middle":n=i.hcenter;break;case"bottom":n=i.left+t}switch(this.model.align){case"left":r=i.top+e;break;case"center":r=i.vcenter;break;case"right":r=i.bottom-e}}return[n,r]}_render(){var e,t,n,{text:r}=this.model;null!=r&&0!=r.length&&(this.model.text_baseline=this.model.vertical_align,this.model.text_align=this.model.align,[e,t]=this._get_location(),n=this.panel.get_label_angle_heuristic("parallel"),("canvas"==this.model.render_mode?this._canvas_text:this._css_text).bind(this)(this.layer.ctx,r,e,t,n))}_get_size(){var{text:e}=this.model;if(null==e||0==e.length)return{width:0,height:0};var{ctx:t}=this.layer;this.visuals.text.set_value(t);var{width:e}=this.layer.ctx.measureText(e),{height:t}=l.font_metrics(t.font);return{width:e,height:2+t*this.model.text_line_height+this.model.standoff}}}(n.TitleView=u).__name__="TitleView";class d extends o.TextAnnotation{constructor(e){super(e)}static init_Title(){this.prototype.default_view=u,this.mixins([c.Text,["border_",c.Line],["background_",c.Fill]]),this.define(({Number:e,String:t})=>({text:[t,""],vertical_align:[s.VerticalAlign,"bottom"],align:[s.TextAlign,"left"],offset:[e,0],standoff:[e,10]})),this.prototype._props.text_align.options.internal=!0,this.prototype._props.text_baseline.options.internal=!0,this.override({text_font_size:"13px",text_font_style:"bold",text_line_height:1,background_fill_color:null,border_line_color:null})}}n.Title=d,d.__name__="Title",d.init_Title()},function(e,t,n,r,i){r();const a=e(40),l=e(43),o=e(20),s=e(140),c=e(143),u=e(11);class d extends a.AnnotationView{update_layout(){var{panel:e}=this;this.layout=null!=e?new s.SideLayout(e,()=>this.get_size(),!0):void 0}initialize(){super.initialize(),"css"==this.model.render_mode&&(this.el=l.div(),this.plot_view.canvas_view.add_overlay(this.el))}remove(){null!=this.el&&l.remove(this.el),super.remove()}connect_signals(){super.connect_signals(),"css"==this.model.render_mode?this.connect(this.model.change,()=>this.render()):this.connect(this.model.change,()=>this.request_render())}render(){this.model.visible||"css"!=this.model.render_mode||l.undisplay(this.el),super.render()}_calculate_text_dimensions(e,t){var{width:e}=e.measureText(t),{height:t}=c.font_metrics(this.visuals.text.font_value());return[e,t]}_calculate_bounding_box_dimensions(e,t){var[n,r]=this._calculate_text_dimensions(e,t);let i,a;switch(e.textAlign){case"left":i=0;break;case"center":i=-n/2;break;case"right":i=-n;break;default:u.unreachable()}switch(e.textBaseline){case"top":a=0;break;case"middle":a=-.5*r;break;case"bottom":a=-1*r;break;case"alphabetic":a=-.8*r;break;case"hanging":a=-.17*r;break;case"ideographic":a=-.83*r;break;default:u.unreachable()}return[i,a,n,r]}_canvas_text(e,t,n,r,i){this.visuals.text.set_value(e);var a=this._calculate_bounding_box_dimensions(e,t);e.save(),e.beginPath(),e.translate(n,r),i&&e.rotate(i),e.rect(a[0],a[1],a[2],a[3]),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),e.fill()),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),e.stroke()),this.visuals.text.doit&&(this.visuals.text.set_value(e),e.fillText(t,0,0)),e.restore()}_css_text(e,t,n,r,i){const{el:a}=this;u.assert(null!=a),l.undisplay(a),this.visuals.text.set_value(e);var[o,s]=this._calculate_bounding_box_dimensions(e,t);a.style.position="absolute",a.style.left=`${n+o}px`,a.style.top=`${r+s}px`,a.style.color=e.fillStyle,a.style.font=e.font,a.style.lineHeight="normal",i&&(a.style.transform=`rotate(${i}rad)`),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),a.style.backgroundColor=e.fillStyle),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),a.style.borderStyle=e.lineDash.length<2?"solid":"dashed",a.style.borderWidth=`${e.lineWidth}px`,a.style.borderColor=e.strokeStyle),a.textContent=t,l.display(a)}}n.TextAnnotationView=d,d.__name__="TextAnnotationView";class h extends a.Annotation{constructor(e){super(e)}static init_TextAnnotation(){this.define(()=>({render_mode:[o.RenderMode,"canvas"]}))}}(n.TextAnnotation=h).__name__="TextAnnotation",h.init_TextAnnotation()},function(e,t,n,r,i){r();const a=e(141),o=e(142),s=e(8),l=Math.PI/2,c={above:{parallel:0,normal:-l,horizontal:0,vertical:-l},below:{parallel:0,normal:l,horizontal:0,vertical:l},left:{parallel:-l,normal:0,horizontal:0,vertical:-l},right:{parallel:l,normal:0,horizontal:0,vertical:l}},u={above:{parallel:"bottom",normal:"center",horizontal:"bottom",vertical:"center"},below:{parallel:"top",normal:"center",horizontal:"top",vertical:"center"},left:{parallel:"bottom",normal:"center",horizontal:"center",vertical:"bottom"},right:{parallel:"bottom",normal:"center",horizontal:"center",vertical:"bottom"}},d={above:{parallel:"center",normal:"left",horizontal:"center",vertical:"left"},below:{parallel:"center",normal:"left",horizontal:"center",vertical:"left"},left:{parallel:"center",normal:"right",horizontal:"right",vertical:"center"},right:{parallel:"center",normal:"left",horizontal:"left",vertical:"center"}},h={above:"right",below:"left",left:"right",right:"left"},f={above:"left",below:"right",left:"right",right:"left"};class p{constructor(e){this.side=e}get dimension(){return"above"==this.side||"below"==this.side?0:1}get normals(){switch(this.side){case"above":return[0,-1];case"below":return[0,1];case"left":return[-1,0];case"right":return[1,0]}}get orientation(){return this.is_horizontal?"horizontal":"vertical"}get is_horizontal(){return 0==this.dimension}get is_vertical(){return 1==this.dimension}get_label_text_heuristics(e){var{side:t}=this;return s.isString(e)?{vertical_align:u[t][e],align:d[t][e]}:{vertical_align:"center",align:(e<0?h:f)[t]}}get_label_angle_heuristic(e){return s.isString(e)?c[this.side][e]:-e}}(n.Panel=p).__name__="Panel";class m extends o.ContentLayoutable{constructor(e,t,n=!1){super(),this.panel=e,this.get_size=t,this.rotate=n,this.panel.is_horizontal?this.set_sizing({width_policy:"max",height_policy:"fixed"}):this.set_sizing({width_policy:"fixed",height_policy:"max"})}_content_size(){var{width:e,height:t}=this.get_size();return!this.rotate||this.panel.is_horizontal?new a.Sizeable({width:e,height:t}):new a.Sizeable({width:t,height:e})}has_size_changed(){var{width:e,height:t}=this._content_size();return this.panel.is_horizontal?this.bbox.height!=t:this.bbox.width!=e}}(n.SideLayout=m).__name__="SideLayout"},function(e,t,n,r,i){r();const a=e(21),{min:o,max:s}=Math;class l{constructor(e={}){this.width=null!=e.width?e.width:0,this.height=null!=e.height?e.height:0}bounded_to({width:e,height:t}){return new l({width:this.width==1/0&&null!=e?e:this.width,height:this.height==1/0&&null!=t?t:this.height})}expanded_to({width:e,height:t}){return new l({width:e!=1/0?s(this.width,e):this.width,height:t!=1/0?s(this.height,t):this.height})}expand_to({width:e,height:t}){this.width=s(this.width,e),this.height=s(this.height,t)}narrowed_to({width:e,height:t}){return new l({width:o(this.width,e),height:o(this.height,t)})}narrow_to({width:e,height:t}){this.width=o(this.width,e),this.height=o(this.height,t)}grow_by({left:e,right:t,top:n,bottom:r}){t=this.width+e+t,r=this.height+n+r;return new l({width:t,height:r})}shrink_by({left:e,right:t,top:n,bottom:r}){t=s(this.width-e-t,0),r=s(this.height-n-r,0);return new l({width:t,height:r})}map(e,t){return new l({width:e(this.width),height:(null!=t?t:e)(this.height)})}}(n.Sizeable=l).__name__="Sizeable",n.SizingPolicy=a.Enum("fixed","fit","min","max")},function(e,t,n,r,i){r();const a=e(141),l=e(99),o=e(8),{min:s,max:c,round:d}=Math;class u{constructor(){this.absolute=!1,this._bbox=new l.BBox,this._inner_bbox=new l.BBox,this._dirty=!1,this._handlers=[]}*[Symbol.iterator](){}get bbox(){return this._bbox}get inner_bbox(){return this._inner_bbox}get sizing(){return this._sizing}set visible(e){this._sizing.visible=e,this._dirty=!0}set_sizing(e){var t=null!==(u=e.width_policy)&&void 0!==u?u:"fit",n=e.width,r=e.min_width,i=e.max_width,a=null!==(d=e.height_policy)&&void 0!==d?d:"fit",o=e.height,s=e.min_height,l=e.max_height,c=e.aspect,u=null!==(h=e.margin)&&void 0!==h?h:{top:0,right:0,bottom:0,left:0},d=!1!==e.visible,h=null!==(h=e.halign)&&void 0!==h?h:"start",e=null!==(e=e.valign)&&void 0!==e?e:"start";this._sizing={width_policy:t,min_width:r,width:n,max_width:i,height_policy:a,min_height:s,height:o,max_height:l,aspect:c,margin:u,visible:d,halign:h,valign:e,size:{width:n,height:o}},this._init()}_init(){}_set_geometry(e,t){this._bbox=e,this._inner_bbox=t}set_geometry(e,t){this._set_geometry(e,null!=t?t:e);for(const e of this._handlers)e(this._bbox,this._inner_bbox)}on_resize(e){this._handlers.push(e)}is_width_expanding(){return"max"==this.sizing.width_policy}is_height_expanding(){return"max"==this.sizing.height_policy}apply_aspect(e,{width:t,height:n}){var r,i,a,o,s,l,c,{aspect:u}=this.sizing;return null!=u&&({width_policy:r,height_policy:i}=this.sizing,"fixed"!=r&&"fixed"!=i?r==i?(a=t,o=d(t/u),s=d(n*u),l=n,n=Math.abs(e.width-a)+Math.abs(e.height-o)<=Math.abs(e.width-s)+Math.abs(e.height-l)?(t=a,o):(t=s,l)):(c={max:4,fit:3,min:2,fixed:1})[i]<c[r]?n=d(t/u):t=d(n*u):"fixed"==r?n=d(t/u):"fixed"==i&&(t=d(n*u))),{width:t,height:n}}measure(e){if(!this.sizing.visible)return{width:0,height:0};var t=new a.Sizeable(e).shrink_by(this.sizing.margin).map(e=>e==1/0&&"fixed"==this.sizing.width_policy&&null!=this.sizing.width?this.sizing.width:e,e=>e==1/0&&"fixed"==this.sizing.height_policy&&null!=this.sizing.height?this.sizing.height:e),n=this._measure(t),e=this.clip_size(n,t),e=this.apply_aspect(t,e);return Object.assign(Object.assign({},n),e)}compute(e={}){const t={width:null!=e.width&&this.is_width_expanding()?e.width:1/0,height:null!=e.height&&this.is_height_expanding()?e.height:1/0},n=this.measure(t),{width:r,height:i}=n,a=new l.BBox({left:0,top:0,width:r,height:i});let o;if(null!=n.inner){const{left:e,top:t,right:a,bottom:s}=n.inner;o=new l.BBox({left:e,top:t,right:r-a,bottom:i-s})}this.set_geometry(a,o)}get xview(){return this.bbox.xview}get yview(){return this.bbox.yview}clip_size(e,t){function n(e,t,n,r){return null==n?n=0:o.isNumber(n)||(n=Math.round(n.percent*t)),null==r?r=1/0:o.isNumber(r)||(r=Math.round(r.percent*t)),c(n,s(e,r))}return{width:n(e.width,t.width,this.sizing.min_width,this.sizing.max_width),height:n(e.height,t.height,this.sizing.min_height,this.sizing.max_height)}}has_size_changed(){var{_dirty:e}=this;return this._dirty=!1,e}}(n.Layoutable=u).__name__="Layoutable";class h extends u{_measure(t){const{width_policy:n,height_policy:r}=this.sizing;return{width:(()=>{var{width:e}=this.sizing;if(t.width==1/0)return null!=e?e:0;switch(n){case"fixed":return null!=e?e:0;case"min":return null!=e?s(t.width,e):0;case"fit":return null!=e?s(t.width,e):t.width;case"max":return null!=e?c(t.width,e):t.width}})(),height:(()=>{var{height:e}=this.sizing;if(t.height==1/0)return null!=e?e:0;switch(r){case"fixed":return null!=e?e:0;case"min":return null!=e?s(t.height,e):0;case"fit":return null!=e?s(t.height,e):t.height;case"max":return null!=e?c(t.height,e):t.height}})()}}}(n.LayoutItem=h).__name__="LayoutItem";class f extends u{_measure(e){const t=this._content_size(),n=e.bounded_to(this.sizing.size).bounded_to(t);return{width:(()=>{switch(this.sizing.width_policy){case"fixed":return(null!=this.sizing.width?this.sizing:t).width;case"min":return t.width;case"fit":return n.width;case"max":return Math.max(t.width,n.width)}})(),height:(()=>{switch(this.sizing.height_policy){case"fixed":return(null!=this.sizing.height?this.sizing:t).height;case"min":return t.height;case"fit":return n.height;case"max":return Math.max(t.height,n.height)}})()}}}(n.ContentLayoutable=f).__name__="ContentLayoutable"},function(e,t,n,r,i){r();const o=e(11),s=(()=>{try{return"undefined"!=typeof OffscreenCanvas&&null!=new OffscreenCanvas(0,0).getContext("2d")}catch(e){return!1}})()?(e,t)=>new OffscreenCanvas(e,t):(e,t)=>{const n=document.createElement("canvas");return n.width=e,n.height=t,n},a=(()=>{const a=s(0,0).getContext("2d");return e=>{a.font=e;var t=a.measureText("M"),n=a.measureText("x"),r=a.measureText("g|"),i=r.fontBoundingBoxAscent,e=r.fontBoundingBoxDescent;if(null!=i&&null!=e)return{height:i+e,ascent:i,descent:e,cap_height:t.actualBoundingBoxAscent,x_height:n.actualBoundingBoxAscent};e=r.actualBoundingBoxAscent,r=r.actualBoundingBoxDescent;if(null!=e&&null!=r)return{height:e+r,ascent:e,descent:r,cap_height:t.actualBoundingBoxAscent,x_height:n.actualBoundingBoxAscent};o.unreachable()}})(),l=(()=>{const r=s(0,0).getContext("2d");return(e,t)=>{r.font=t;var n=r.measureText(e),t=n.actualBoundingBoxAscent,e=n.actualBoundingBoxDescent;if(null!=t&&null!=e)return{width:n.width,height:t+e,ascent:t,descent:e};o.unreachable()}})(),c=(()=>{const u=document.createElement("canvas"),d=u.getContext("2d");let h=-1,f=-1;return(e,t=1)=>{d.font=e;const{width:n}=d.measureText("M"),r=n*t,i=Math.ceil(r),a=Math.ceil(2*r),o=Math.ceil(1.5*r);h<i&&(h=i,u.width=i),f<a&&(f=a,u.height=a),d.save(),d.scale(t,t),d.fillStyle="#f00",d.fillRect(0,0,i,a);var s=n=>{let r=0;for(let t=0;t<=o;t++)for(let e=0;e<i;e++,r+=4)if(255!=n[r])return o-t;return 0};d.font=e,d.fillStyle="#000";for(const u of"xa")d.fillText(u,0,o/t);var{data:l}=d.getImageData(0,0,i,a),c=s(l)/t;for(const u of"ASQ")d.fillText(u,0,o/t);var{data:e}=d.getImageData(0,0,i,a),l=s(e)/t;for(const u of"gy")d.fillText(u,0,o/t);var{data:e}=d.getImageData(0,0,i,a),s=s(e)/t,e=(n=>{let r=n.length-4;for(let t=a;t>=o;t--)for(let e=0;e<i;e++,r-=4)if(255!=n[r])return t-o;return 0})(e)/t;return d.restore(),{height:s+e,ascent:s,cap_height:l,x_height:c,descent:e}}})(),u=(()=>{const c=document.createElement("canvas"),u=c.getContext("2d");let d=-1,h=-1;return(e,t,n=1)=>{u.font=t;const{width:r}=u.measureText("M"),i=r*n,a=Math.ceil(i),o=Math.ceil(2*i),s=Math.ceil(1.5*i);(d<a||h<o)&&(d=a,c.width=a,h=o,c.height=o),u.save(),u.scale(n,n),u.fillStyle="#f00",u.fillRect(0,0,a,o),u.font=t,u.fillStyle="#000",u.fillText(e,0,s/n);var l=u.measureText(e),{data:t}=u.getImageData(0,0,a,o),e=(n=>{let r=0;for(let t=0;t<=s;t++)for(let e=0;e<a;e++,r+=4)if(255!=n[r])return s-t;return 0})(t)/n,n=(n=>{let r=n.length-4;for(let t=o;t>=s;t--)for(let e=0;e<a;e++,r-=4)if(255!=n[r])return t-s;return 0})(t)/n;return u.restore(),{width:l.width,height:e+n,ascent:e,descent:n}}})(),d=(()=>{try{return a("normal 10px sans-serif"),a}catch(e){return c}})(),h=(()=>{try{return l("A","normal 10px sans-serif"),l}catch(e){return u}})(),f=new Map;function p(e){let t=f.get(e);return null==t&&(t={font:d(e),glyphs:new Map},f.set(e,t)),t.font}n.font_metrics=p,n.glyph_metrics=function(e,t){let n=f.get(t);null==n&&(p(t),n=f.get(t));let r=n.glyphs.get(e);return null==r&&(r=h(e,t),n.glyphs.set(e,r)),r}},function(e,t,n,r,i){r();const o=e(145),s=e(157),a=e(156),l=e(159),c=e(104),u=e(99),d=e(13),h=e(11);class f{constructor(e,t,n,r,i={},a={}){this.in_x_scale=e,this.in_y_scale=t,this.x_range=n,this.y_range=r,this.extra_x_ranges=i,this.extra_y_ranges=a,this._bbox=new u.BBox,h.assert(null==e.source_range&&null==e.target_range),h.assert(null==t.source_range&&null==t.target_range),this._configure_scales()}get bbox(){return this._bbox}_get_ranges(e,t){return new Map(d.entries(Object.assign(Object.assign({},t),{default:e})))}_get_scales(e,t,n){const r=new Map;for(var[i,a]of t){if(a instanceof c.FactorRange!=e instanceof o.CategoricalScale)throw new Error(`Range ${a.type} is incompatible is Scale ${e.type}`);e instanceof s.LogScale&&a instanceof l.DataRange1d&&(a.scale_hint="log");const t=e.clone();t.setv({source_range:a,target_range:n}),r.set(i,t)}return r}_configure_frame_ranges(){var{bbox:e}=this;this._x_target=new a.Range1d({start:e.left,end:e.right}),this._y_target=new a.Range1d({start:e.bottom,end:e.top})}_configure_scales(){this._configure_frame_ranges(),this._x_ranges=this._get_ranges(this.x_range,this.extra_x_ranges),this._y_ranges=this._get_ranges(this.y_range,this.extra_y_ranges),this._x_scales=this._get_scales(this.in_x_scale,this._x_ranges,this._x_target),this._y_scales=this._get_scales(this.in_y_scale,this._y_ranges,this._y_target)}_update_scales(){this._configure_frame_ranges();for(var[,e]of this._x_scales)e.target_range=this._x_target;for(var[,t]of this._y_scales)t.target_range=this._y_target}set_geometry(e){this._bbox=e,this._update_scales()}get x_target(){return this._x_target}get y_target(){return this._y_target}get x_ranges(){return this._x_ranges}get y_ranges(){return this._y_ranges}get x_scales(){return this._x_scales}get y_scales(){return this._y_scales}get x_scale(){return this._x_scales.get("default")}get y_scale(){return this._y_scales.get("default")}get xscales(){return d.to_object(this.x_scales)}get yscales(){return d.to_object(this.y_scales)}}(n.CartesianFrame=f).__name__="CartesianFrame"},function(e,t,n,r,i){r();e=e(146);class a extends e.Scale{constructor(e){super(e)}get s_compute(){const[t,n]=this._linear_compute_state(),r=this.source_range;return e=>t*r.synthetic(e)+n}compute(e){return super._linear_compute(this.source_range.synthetic(e))}v_compute(e){return super._linear_v_compute(this.source_range.v_synthetic(e))}invert(e){return this._linear_invert(e)}v_invert(e){return this._linear_v_invert(e)}}(n.CategoricalScale=a).__name__="CategoricalScale"},function(e,t,n,r,i){r();const a=e(147),o=e(105),s=e(156),l=e(24);class c extends a.Transform{constructor(e){super(e)}static init_Scale(){this.internal(({Ref:e})=>({source_range:[e(o.Range)],target_range:[e(s.Range1d)]}))}r_compute(e,t){return this.target_range.is_reversed?[this.compute(t),this.compute(e)]:[this.compute(e),this.compute(t)]}r_invert(e,t){return this.target_range.is_reversed?[this.invert(t),this.invert(e)]:[this.invert(e),this.invert(t)]}_linear_compute(e){var[t,n]=this._linear_compute_state();return t*e+n}_linear_v_compute(t){const[n,r]=this._linear_compute_state(),i=new l.ScreenArray(t.length);for(let e=0;e<t.length;e++)i[e]=n*t[e]+r;return i}_linear_invert(e){var[t,n]=this._linear_compute_state();return(e-n)/t}_linear_v_invert(t){const[n,r]=this._linear_compute_state(),i=new Float64Array(t.length);for(let e=0;e<t.length;e++)i[e]=(t[e]-r)/n;return i}_linear_compute_state(){var e=this.source_range.start,t=this.source_range.end,n=this.target_range.start,t=(this.target_range.end-n)/(t-e);return[t,-t*e+n]}}(n.Scale=c).__name__="Scale",c.init_Scale()},function(e,t,n,r,i){r(),i("CustomJSTransform",e(148).CustomJSTransform),i("Dodge",e(150).Dodge),i("Interpolator",e(152).Interpolator),i("Jitter",e(153).Jitter),i("LinearInterpolator",e(154).LinearInterpolator),i("StepInterpolator",e(155).StepInterpolator),i("Transform",e(149).Transform)},function(e,t,n,r,i){r();const a=e(149),o=e(13),s=e(34);class l extends a.Transform{constructor(e){super(e)}static init_CustomJSTransform(){this.define(({Unknown:e,String:t,Dict:n})=>({args:[n(e),{}],func:[t,""],v_func:[t,""]}))}get names(){return o.keys(this.args)}get values(){return o.values(this.args)}_make_transform(e,t){return new Function(...this.names,e,s.use_strict(t))}get scalar_transform(){return this._make_transform("x",this.func)}get vector_transform(){return this._make_transform("xs",this.v_func)}compute(e){return this.scalar_transform(...this.values,e)}v_compute(e){return this.vector_transform(...this.values,e)}}(n.CustomJSTransform=l).__name__="CustomJSTransform",l.init_CustomJSTransform()},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{constructor(e){super(e)}}(n.Transform=a).__name__="Transform"},function(e,t,n,r,i){r();e=e(151);class a extends e.RangeTransform{constructor(e){super(e)}static init_Dodge(){this.define(({Number:e})=>({value:[e,0]}))}_compute(e){return e+this.value}}(n.Dodge=a).__name__="Dodge",a.init_Dodge()},function(e,t,n,r,i){r();const a=e(149),o=e(105),s=e(104),l=e(24),c=e(8);class u extends a.Transform{constructor(e){super(e)}static init_RangeTransform(){this.define(({Ref:e,Nullable:t})=>({range:[t(e(o.Range)),null]}))}v_compute(e){let t;if(this.range instanceof s.FactorRange)t=this.range.v_synthetic(e);else{if(!c.isArrayableOf(e,c.isNumber))throw new Error("unexpected");t=e}const n=new(l.infer_type(t))(t.length);for(let e=0;e<t.length;e++){var r=t[e];n[e]=this._compute(r)}return n}compute(e){if(this.range instanceof s.FactorRange)return this._compute(this.range.synthetic(e));if(c.isNumber(e))return this._compute(e);throw new Error("unexpected")}}(n.RangeTransform=u).__name__="RangeTransform",u.init_RangeTransform()},function(e,t,n,r,i){r();const a=e(149),s=e(57),o=e(24),l=e(9),c=e(8);class u extends a.Transform{constructor(e){super(e),this._sorted_dirty=!0}static init_Interpolator(){this.define(({Boolean:e,Number:t,String:n,Ref:r,Array:i,Or:a,Nullable:o})=>({x:[a(n,i(t))],y:[a(n,i(t))],data:[o(r(s.ColumnarDataSource)),null],clip:[e,!0]}))}connect_signals(){super.connect_signals(),this.connect(this.change,()=>this._sorted_dirty=!0)}v_compute(t){const n=new(o.infer_type(t))(t.length);for(let e=0;e<t.length;e++){var r=t[e];n[e]=this.compute(r)}return n}sort(e=!1){if(this._sorted_dirty){let n,t;if(c.isString(this.x)&&c.isString(this.y)&&null!=this.data){const e=this.data.columns();if(!l.includes(e,this.x))throw new Error("The x parameter does not correspond to a valid column name defined in the data parameter");if(!l.includes(e,this.y))throw new Error("The y parameter does not correspond to a valid column name defined in the data parameter");n=this.data.get_column(this.x),t=this.data.get_column(this.y)}else{if(!c.isArray(this.x)||!c.isArray(this.y))throw new Error("parameters 'x' and 'y' must be both either string fields or arrays");n=this.x,t=this.y}if(n.length!==t.length)throw new Error("The length for x and y do not match");if(n.length<2)throw new Error("x and y must have at least two elements to support interpolation");const r=n.length,i=new Uint32Array(r);for(let e=0;e<r;e++)i[e]=e;const a=e?-1:1;i.sort((e,t)=>a*(n[e]-n[t])),this._x_sorted=new(o.infer_type(n))(r),this._y_sorted=new(o.infer_type(t))(r);for(let e=0;e<r;e++)this._x_sorted[e]=n[i[e]],this._y_sorted[e]=t[i[e]];this._sorted_dirty=!1}}}(n.Interpolator=u).__name__="Interpolator",u.init_Interpolator()},function(e,t,n,r,i){r();const a=e(1),o=e(151),s=e(20),l=a.__importStar(e(10));class c extends o.RangeTransform{constructor(e){super(e)}static init_Jitter(){this.define(({Number:e})=>({mean:[e,0],width:[e,1],distribution:[s.Distribution,"uniform"]}))}v_compute(e){return null!=this.previous_values&&this.previous_values.length==e.length||(this.previous_values=super.v_compute(e)),this.previous_values}_compute(e){switch(this.distribution){case"uniform":return e+this.mean+(l.random()-.5)*this.width;case"normal":return e+l.rnorm(this.mean,this.width)}}}(n.Jitter=c).__name__="Jitter",c.init_Jitter()},function(e,t,n,r,i){r();const a=e(9),o=e(152);class s extends o.Interpolator{constructor(e){super(e)}compute(t){if(this.sort(!1),this.clip){if(t<this._x_sorted[0]||t>this._x_sorted[this._x_sorted.length-1])return NaN}else{if(t<this._x_sorted[0])return this._y_sorted[0];if(t>this._x_sorted[this._x_sorted.length-1])return this._y_sorted[this._y_sorted.length-1]}if(t==this._x_sorted[0])return this._y_sorted[0];var e=a.find_last_index(this._x_sorted,e=>e<t),n=this._x_sorted[e],r=this._x_sorted[e+1],i=this._y_sorted[e],e=this._y_sorted[e+1];return i+(t-n)/(r-n)*(e-i)}}(n.LinearInterpolator=s).__name__="LinearInterpolator"},function(e,t,n,r,i){r();const a=e(152),o=e(20),s=e(9);class l extends a.Interpolator{constructor(e){super(e)}static init_StepInterpolator(){this.define(()=>({mode:[o.StepMode,"after"]}))}compute(t){if(this.sort(!1),this.clip){if(t<this._x_sorted[0]||t>this._x_sorted[this._x_sorted.length-1])return NaN}else{if(t<this._x_sorted[0])return this._y_sorted[0];if(t>this._x_sorted[this._x_sorted.length-1])return this._y_sorted[this._y_sorted.length-1]}let e;switch(this.mode){case"after":e=s.find_last_index(this._x_sorted,e=>e<=t);break;case"before":e=s.find_index(this._x_sorted,e=>t<=e);break;case"center":{const n=s.map(this._x_sorted,e=>Math.abs(e-t)),r=s.min(n);e=s.find_index(n,e=>r===e);break}default:throw new Error(`unknown mode: ${this.mode}`)}return-1!=e?this._y_sorted[e]:NaN}}(n.StepInterpolator=l).__name__="StepInterpolator",l.init_StepInterpolator()},function(e,t,n,r,i){r();e=e(105);class a extends e.Range{constructor(e){super(e)}static init_Range1d(){this.define(({Number:e,Nullable:t})=>({start:[e,0],end:[e,1],reset_start:[t(e),null,{on_update(e,t){t._reset_start=null!=e?e:t.start}}],reset_end:[t(e),null,{on_update(e,t){t._reset_end=null!=e?e:t.end}}]}))}_set_auto_bounds(){var e,t;"auto"==this.bounds&&(e=Math.min(this._reset_start,this._reset_end),t=Math.max(this._reset_start,this._reset_end),this.setv({bounds:[e,t]},{silent:!0}))}initialize(){super.initialize(),this._set_auto_bounds()}get min(){return Math.min(this.start,this.end)}get max(){return Math.max(this.start,this.end)}reset(){this._set_auto_bounds();var{_reset_start:e,_reset_end:t}=this;this.start!=e||this.end!=t?this.setv({start:e,end:t}):this.change.emit()}map(e){return new a({start:e(this.start),end:e(this.end)})}widen(e){let{start:t,end:n}=this;return this.is_reversed?(t+=e,n-=e):(t-=e,n+=e),new a({start:t,end:n})}}(n.Range1d=a).__name__="Range1d",a.init_Range1d()},function(e,t,n,r,i){r();const a=e(158),l=e(24);class o extends a.ContinuousScale{constructor(e){super(e)}get s_compute(){const[t,n,r,i]=this._compute_state();return e=>{if(0==r)return 0;e=(Math.log(e)-i)/r;return isFinite(e)?e*t+n:NaN}}compute(e){var[t,n,r,i]=this._compute_state();let a;return a=0==r?0:(r=(Math.log(e)-i)/r,isFinite(r)?r*t+n:NaN),a}v_compute(t){const[n,r,i,a]=this._compute_state(),o=new l.ScreenArray(t.length);if(0==i)for(let e=0;e<t.length;e++)o[e]=0;else for(let e=0;e<t.length;e++){var s=(Math.log(t[e])-a)/i,s=isFinite(s)?s*n+r:NaN;o[e]=s}return o}invert(e){var[t,n,r,i]=this._compute_state();return Math.exp(r*((e-n)/t)+i)}v_invert(t){const[n,r,i,a]=this._compute_state(),o=new Float64Array(t.length);for(let e=0;e<t.length;e++){var s=(t[e]-r)/n;o[e]=Math.exp(i*s+a)}return o}_get_safe_factor(e,t){let n=e<0?0:e,r=t<0?0:t;if(n==r)if(0==n)[n,r]=[1,10];else{const e=Math.log(n)/Math.log(10);n=10**Math.floor(e),r=Math.ceil(e)!=Math.floor(e)?10**Math.ceil(e):10**(Math.ceil(e)+1)}return[n,r]}_compute_state(){var e=this.source_range.start,t=this.source_range.end,n=this.target_range.start,r=this.target_range.end-n,[e,t]=this._get_safe_factor(e,t);let i,a;return a=0==e?(i=Math.log(t),0):(i=Math.log(t)-Math.log(e),Math.log(e)),[r,n,i,a]}}(n.LogScale=o).__name__="LogScale"},function(e,t,n,r,i){r();e=e(146);class a extends e.Scale{constructor(e){super(e)}}(n.ContinuousScale=a).__name__="ContinuousScale"},function(e,t,n,r,i){r();const a=e(1),o=e(160),s=e(20),l=e(9),c=e(19),u=a.__importStar(e(99)),d=e(161);class h extends o.DataRange{constructor(e){super(e),this.have_updated_interactively=!1}static init_DataRange1d(){this.define(({Boolean:e,Number:t,Nullable:n})=>({start:[t],end:[t],range_padding:[t,.1],range_padding_units:[s.PaddingUnits,"percent"],flipped:[e,!1],follow:[n(s.StartEnd),null],follow_interval:[n(t),null],default_span:[t,2],only_visible:[e,!1]})),this.internal(({Enum:e})=>({scale_hint:[e("log","auto"),"auto"]}))}initialize(){super.initialize(),this._initial_start=this.start,this._initial_end=this.end,this._initial_range_padding=this.range_padding,this._initial_range_padding_units=this.range_padding_units,this._initial_follow=this.follow,this._initial_follow_interval=this.follow_interval,this._initial_default_span=this.default_span,this._plot_bounds=new Map}get min(){return Math.min(this.start,this.end)}get max(){return Math.max(this.start,this.end)}computed_renderers(){var{renderers:e,names:t}=this,n=l.concat(this.plots.map(e=>e.data_renderers));return d.compute_renderers(0==e.length?"auto":e,n,t)}_compute_plot_bounds(e,t){let n=u.empty();for(const r of e){const e=t.get(r);null==e||!r.visible&&this.only_visible||(n=u.union(n,e))}return n}adjust_bounds_for_aspect(e,t){const n=u.empty();let r=e.x1-e.x0;r<=0&&(r=1);let i=e.y1-e.y0;i<=0&&(i=1);var a=.5*(e.x1+e.x0),e=.5*(e.y1+e.y0);return r<t*i?r=t*i:i=r/t,n.x1=a+.5*r,n.x0=a-.5*r,n.y1=e+.5*i,n.y0=e-.5*i,n}_compute_min_max(e,t){let n,r,i=u.empty();for(const t of e)i=u.union(i,t);return[n,r]=0==t?[i.x0,i.x1]:[i.y0,i.y1],[n,r]}_compute_range(i,a){var o=this.range_padding;let e,t;if(null!=this._initial_start&&(i=this._initial_start),null!=this._initial_end&&(a=this._initial_end),"log"==this.scale_hint){let n,r;if((isNaN(i)||!isFinite(i)||i<=0)&&(i=isNaN(a)||!isFinite(a)||a<=0?.1:a/100,c.logger.warn(`could not determine minimum data value for log axis, DataRange1d using value ${i}`)),(isNaN(a)||!isFinite(a)||a<=0)&&(a=isNaN(i)||!isFinite(i)||i<=0?10:100*i,c.logger.warn(`could not determine maximum data value for log axis, DataRange1d using value ${a}`)),a==i)r=this.default_span+.001,n=Math.log(i)/Math.log(10);else{let e,t;r="percent"==this.range_padding_units?(e=Math.log(i)/Math.log(10),t=Math.log(a)/Math.log(10),(t-e)*(1+o)):(e=Math.log(i-o)/Math.log(10),t=Math.log(a+o)/Math.log(10),t-e),n=(e+t)/2}e=10**(n-r/2),t=10**(n+r/2)}else{o=a==i?this.default_span:"percent"==this.range_padding_units?(a-i)*(1+o):a-i+2*o;const r=(a+i)/2;e=r-o/2,t=r+o/2}let n=1;this.flipped&&([e,t]=[t,e],n=-1);const r=this.follow_interval;return null!=r&&Math.abs(e-t)>r&&("start"==this.follow?t=e+n*r:"end"==this.follow&&(e=t-n*r)),[e,t]}update(i,a,o,s){if(!this.have_updated_interactively){var l=this.computed_renderers();let e=this._compute_plot_bounds(l,i);null!=s&&(e=this.adjust_bounds_for_aspect(e,s)),this._plot_bounds.set(o,e);var[o,a]=this._compute_min_max(this._plot_bounds.values(),a);let[t,n]=this._compute_range(o,a);null!=this._initial_start&&("log"!=this.scale_hint||0<this._initial_start)&&(t=this._initial_start),null!=this._initial_end&&("log"!=this.scale_hint||0<this._initial_end)&&(n=this._initial_end);let r=!1;"auto"==this.bounds&&(this.setv({bounds:[t,n]},{silent:!0}),r=!0);var[o,a]=[this.start,this.end];if(t!=o||n!=a){const i={};t!=o&&(i.start=t),n!=a&&(i.end=n),this.setv(i),r=!1}r&&this.change.emit()}}reset(){this.have_updated_interactively=!1,this.setv({range_padding:this._initial_range_padding,range_padding_units:this._initial_range_padding_units,follow:this._initial_follow,follow_interval:this._initial_follow_interval,default_span:this._initial_default_span},{silent:!0}),this.change.emit()}}(n.DataRange1d=h).__name__="DataRange1d",h.init_DataRange1d()},function(e,t,n,r,i){r();const a=e(105),o=e(62);class s extends a.Range{constructor(e){super(e)}static init_DataRange(){this.define(({String:e,Array:t,Ref:n})=>({names:[t(e),[]],renderers:[t(n(o.DataRenderer)),[]]}))}}(n.DataRange=s).__name__="DataRange",s.init_DataRange()},function(e,t,n,r,i){r();const a=e(9);n.compute_renderers=function(e,t,n){if(null==e)return[];let r="auto"==e?t:e;return 0<n.length&&(r=r.filter(e=>a.includes(n,e.name))),r}},function(e,t,n,r,i){r(),i("Axis",e(163).Axis),i("CategoricalAxis",e(170).CategoricalAxis),i("ContinuousAxis",e(173).ContinuousAxis),i("DatetimeAxis",e(174).DatetimeAxis),i("LinearAxis",e(175).LinearAxis),i("LogAxis",e(192).LogAxis),i("MercatorAxis",e(195).MercatorAxis)},function(e,t,n,r,i){r();const a=e(1),o=e(164),u=e(165),d=e(166),h=e(169),s=a.__importStar(e(48)),f=e(20),M=e(24),l=e(140),c=e(9),p=e(8),S=e(167),m=e(104),{abs:g}=Math;class _ extends o.GuideRendererView{update_layout(){this.layout=new l.SideLayout(this.panel,()=>this.get_size(),!0)}get_size(){const{visible:e,fixed_location:t}=this.model;if(e&&null==t&&this.is_renderable){const{extents:e}=this;return{width:0,height:Math.round(e.tick+e.tick_label+e.axis_label)}}return{width:0,height:0}}get is_renderable(){var[e,t]=this.ranges;return e.is_valid&&t.is_valid}_render(){var e;if(this.is_renderable){const{tick_coords:t,extents:n}=this,r=this.layer.ctx;r.save(),this._draw_rule(r,n),this._draw_major_ticks(r,n,t),this._draw_minor_ticks(r,n,t),this._draw_major_labels(r,n,t),this._draw_axis_label(r,n,t),null===(e=this._paint)||void 0===e||e.call(this,r,n,t),r.restore()}}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.plot_view.request_layout())}get needs_clip(){return null!=this.model.fixed_location}_draw_rule(t,e){if(this.visuals.axis_line.doit){const[n,r]=this.rule_coords,[i,a]=this.coordinates.map_to_screen(n,r),[o,s]=this.normals,[l,c]=this.offsets;this.visuals.axis_line.set_value(t),t.beginPath();for(let e=0;e<i.length;e++){const n=Math.round(i[e]+o*l),r=Math.round(a[e]+s*c);t.lineTo(n,r)}t.stroke()}}_draw_major_ticks(e,t,n){var r=this.model.major_tick_in,i=this.model.major_tick_out,a=this.visuals.major_tick_line;this._draw_ticks(e,n.major,r,i,a)}_draw_minor_ticks(e,t,n){var r=this.model.minor_tick_in,i=this.model.minor_tick_out,a=this.visuals.minor_tick_line;this._draw_ticks(e,n.minor,r,i,a)}_draw_major_labels(e,t,n){var r=n.major,i=this.compute_labels(r[this.dimension]),a=this.model.major_label_orientation,n=t.tick+this.model.major_label_standoff,t=this.visuals.major_label_text;this._draw_oriented_labels(e,i,r,a,this.panel.side,n,t)}_axis_label_extent(){var e=this.model.axis_label;if(!e)return 0;const t=new S.TextBox({text:e});t.angle=this.panel.get_label_angle_heuristic("parallel"),t.visuals=this.visuals.axis_label_text;var n=t.size(),e=0==this.dimension?n.height:n.width,n=this.model.axis_label_standoff;return 0<e?n+e+3:0}_draw_axis_label(e,t,n){var r=this.model.axis_label;if(r&&null==this.model.fixed_location){const c=new S.TextBox({text:r});c.angle=this.panel.get_label_angle_heuristic("parallel"),c.visuals=this.visuals.axis_label_text;var[i,a]=(()=>{var{bbox:e}=this.layout;switch(this.panel.side){case"above":return[e.hcenter,e.bottom];case"below":return[e.hcenter,e.top];case"left":return[e.right,e.vcenter];case"right":return[e.left,e.vcenter]}})(),[o,s]=this.normals,l=t.tick+t.tick_label+this.model.axis_label_standoff,{vertical_align:r,align:t}=this.panel.get_label_text_heuristics("parallel");c.position={sx:i+o*l,sy:a+s*l,x_anchor:t,y_anchor:r},c.align=t,c.paint(e)}}_draw_ticks(t,e,n,r,i){if(i.doit){const[a,o]=e,[s,l]=this.coordinates.map_to_screen(a,o),[c,u]=this.normals,[d,h]=this.offsets,[f,p]=[c*(d-n),u*(h-n)],[m,g]=[c*(d+r),u*(h+r)];i.set_value(t),t.beginPath();for(let e=0;e<s.length;e++){const n=Math.round(s[e]+m),r=Math.round(l[e]+g),i=Math.round(s[e]+f),a=Math.round(l[e]+p);t.moveTo(n,r),t.lineTo(i,a)}t.stroke()}}_draw_oriented_labels(i,t,e,n,r,a,o){if(o.doit&&0!=t.length){var[s,l]=e,[c,u]=this.coordinates.map_to_screen(s,l),[d,e]=this.offsets,[s,l]=this.normals,h=s*(d+a),f=l*(e+a),{vertical_align:p,align:m}=this.panel.get_label_text_heuristics(n),n=this.panel.get_label_angle_heuristic(n);t.visuals=o,t.angle=n;for(let e=0;e<t.length;e++){const A=t.items[e];A.position={sx:c[e]+h,sy:u[e]+f,x_anchor:m,y_anchor:p},A instanceof S.TextBox&&(A.align=m)}const g=t.length,_=M.Indices.all_set(g),{items:y}=t,v=y.map(e=>e.bbox()),b=(()=>{var[e]=this.ranges;return e.is_reversed?0==this.dimension?(e,t)=>v[e].left-v[t].right:(e,t)=>v[t].top-v[e].bottom:0==this.dimension?(e,t)=>v[t].left-v[e].right:(e,t)=>v[e].top-v[t].bottom})(),{major_label_policy:x}=this.model,w=x.filter(_,v,b),T=[...w.ones()];if(0!=T.length){const i=this.parent.canvas_view.bbox,t=e=>{var t,n=v[e];if(n.left<0){const i=-n.left,{position:r}=y[e];y[e].position=Object.assign(Object.assign({},r),{sx:r.sx+i})}else n.right>i.width&&(t=n.right-i.width,{position:n}=y[e],y[e].position=Object.assign(Object.assign({},n),{sx:n.sx-t}))},A=e=>{var t,n=v[e];if(n.top<0){const i=-n.top,{position:r}=y[e];y[e].position=Object.assign(Object.assign({},r),{sy:r.sy+i})}else n.bottom>i.height&&(t=n.bottom-i.height,{position:n}=y[e],y[e].position=Object.assign(Object.assign({},n),{sy:n.sy-t}))},k=T[0],r=T[T.length-1];0==this.dimension?(t(k),t(r)):(A(k),A(r))}for(const t of w)y[t].paint(i)}}_tick_extent(){return this.model.major_tick_out}_tick_label_extents(){var e=this.tick_coords.major,t=this.compute_labels(e[this.dimension]),n=this.model.major_label_orientation,r=this.model.major_label_standoff,e=this.visuals.major_label_text;return[this._oriented_labels_extent(t,n,r,e)]}get extents(){var e=this._tick_label_extents();return{tick:this._tick_extent(),tick_labels:e,tick_label:c.sum(e),axis_label:this._axis_label_extent()}}_oriented_labels_extent(e,t,n,r){if(0==e.length)return 0;t=this.panel.get_label_angle_heuristic(t);e.visuals=r,e.angle=t;e=e.max_size(),e=0==this.dimension?e.height:e.width;return 0<e?n+e+3:0}get normals(){return this.panel.normals}get dimension(){return this.panel.dimension}compute_labels(t){const n=this.model.formatter.format_graphics(t,this),{major_label_overrides:r}=this.model;for(let e=0;e<t.length;e++){var i=r[t[e]];null!=i&&(n[e]=new S.TextBox({text:i}))}return new S.GraphicsBoxes(n)}get offsets(){if(null!=this.model.fixed_location)return[0,0];var{frame:e}=this.plot_view;let[t,n]=[0,0];switch(this.panel.side){case"below":n=g(this.layout.bbox.top-e.bbox.bottom);break;case"above":n=g(this.layout.bbox.bottom-e.bbox.top);break;case"right":t=g(this.layout.bbox.left-e.bbox.right);break;case"left":t=g(this.layout.bbox.right-e.bbox.left)}return[t,n]}get ranges(){var e=this.dimension,{ranges:t}=this.coordinates;return[t[e],t[(e+1)%2]]}get computed_bounds(){var[e]=this.ranges,n=this.model.bounds,r=[e.min,e.max];if("auto"==n)return[e.min,e.max];{let e,t;const[i,a]=n,[o,s]=r,{min:l,max:c}=Math;return t=g(i-a)>g(o-s)?(e=c(l(i,a),o),l(c(i,a),s)):(e=l(i,a),c(i,a)),[e,t]}}get rule_coords(){const e=this.dimension,t=(e+1)%2,[n]=this.ranges,[r,i]=this.computed_bounds,a=[new Array(2),new Array(2)];return a[e][0]=Math.max(r,n.min),a[e][1]=Math.min(i,n.max),a[e][0]>a[e][1]&&(a[e][0]=a[e][1]=NaN),a[t][0]=this.loc,a[t][1]=this.loc,a}get tick_coords(){const t=this.dimension,n=(t+1)%2,[e]=this.ranges,[r,i]=this.computed_bounds,a=this.model.ticker.get_ticks(r,i,e,this.loc),o=a.major,s=a.minor,l=[[],[]],c=[[],[]],[u,d]=[e.min,e.max];for(let e=0;e<o.length;e++)o[e]<u||o[e]>d||(l[t].push(o[e]),l[n].push(this.loc));for(let e=0;e<s.length;e++)s[e]<u||s[e]>d||(c[t].push(s[e]),c[n].push(this.loc));return{major:l,minor:c}}get loc(){var{fixed_location:e}=this.model;if(null!=e){if(p.isNumber(e))return e;const[,t]=this.ranges;if(t instanceof m.FactorRange)return t.synthetic(e);throw new Error("unexpected")}const[,t]=this.ranges;switch(this.panel.side){case"left":case"below":return t.start;case"right":case"above":return t.end}}serializable_state(){return Object.assign(Object.assign({},super.serializable_state()),{bbox:this.layout.bbox.box})}}(n.AxisView=_).__name__="AxisView";class y extends o.GuideRenderer{constructor(e){super(e)}static init_Axis(){this.prototype.default_view=_,this.mixins([["axis_",s.Line],["major_tick_",s.Line],["minor_tick_",s.Line],["major_label_",s.Text],["axis_label_",s.Text]]),this.define(({Any:e,Int:t,Number:n,String:r,Ref:i,Dict:a,Tuple:o,Or:s,Nullable:l,Auto:c})=>({bounds:[s(o(n,n),c),"auto"],ticker:[i(u.Ticker)],formatter:[i(d.TickFormatter)],axis_label:[l(r),""],axis_label_standoff:[t,5],major_label_standoff:[t,5],major_label_orientation:[s(f.TickLabelOrientation,n),"horizontal"],major_label_overrides:[a(r),{}],major_label_policy:[i(h.LabelingPolicy),()=>new h.AllLabels],major_tick_in:[n,2],major_tick_out:[n,6],minor_tick_in:[n,0],minor_tick_out:[n,4],fixed_location:[l(s(n,e)),null]})),this.override({axis_line_color:"black",major_tick_line_color:"black",minor_tick_line_color:"black",major_label_text_font_size:"11px",major_label_text_align:"center",major_label_text_baseline:"alphabetic",axis_label_text_font_size:"13px",axis_label_text_font_style:"italic"})}}(n.Axis=y).__name__="Axis",y.init_Axis()},function(e,t,n,r,i){r();e=e(41);class a extends e.RendererView{}(n.GuideRendererView=a).__name__="GuideRendererView";class o extends e.Renderer{constructor(e){super(e)}static init_GuideRenderer(){this.override({level:"guide"})}}n.GuideRenderer=o,o.__name__="GuideRenderer",o.init_GuideRenderer()},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{constructor(e){super(e)}}(n.Ticker=a).__name__="Ticker"},function(e,t,n,r,i){r();const a=e(53),o=e(167);class s extends a.Model{constructor(e){super(e)}format_graphics(e,t){return this.doFormat(e,t).map(e=>new o.TextBox({text:e}))}compute(e,t){return this.doFormat([e],null!=t?t:{loc:0})[0]}v_compute(e,t){return this.doFormat(e,null!=t?t:{loc:0})}}(n.TickFormatter=s).__name__="TickFormatter"},function(e,t,b,n,r){n();const s=e(99),x=e(143),w=e(9),c=e(8),a=e(168),l=e(22);b.text_width=(()=>{const n=document.createElement("canvas").getContext("2d");let r="";return(e,t)=>(t!=r&&(r=t,n.font=t),n.measureText(e).width)})();class i{constructor(){this._position={sx:0,sy:0},this.font_size_scale=1}set position(e){this._position=e}get position(){return this._position}infer_text_height(){return"ascent_descent"}bbox(){var{p0:e,p1:t,p2:n,p3:r}=this.rect(),i=Math.min(e.x,t.x,n.x,r.x),a=Math.min(e.y,t.y,n.y,r.y),o=Math.max(e.x,t.x,n.x,r.x),r=Math.max(e.y,t.y,n.y,r.y);return new s.BBox({left:i,right:o,top:a,bottom:r})}size(){var{width:e,height:t}=this._size(),{angle:n}=this;if(n){var r=Math.cos(Math.abs(n)),n=Math.sin(Math.abs(n));return{width:Math.abs(e*r+t*n),height:Math.abs(e*n+t*r)}}return{width:e,height:t}}rect(){var e=this._rect(),{angle:t}=this;if(t){const{sx:n,sy:r}=this.position,i=new a.AffineTransform;return i.translate(n,r),i.rotate(t),i.translate(-n,-r),i.apply_rect(e)}return e}paint_rect(e){var{p0:t,p1:n,p2:r,p3:i}=this.rect();e.save(),e.strokeStyle="red",e.lineWidth=1,e.beginPath();const{round:a}=Math;e.moveTo(a(t.x),a(t.y)),e.lineTo(a(n.x),a(n.y)),e.lineTo(a(r.x),a(r.y)),e.lineTo(a(i.x),a(i.y)),e.closePath(),e.stroke(),e.restore()}paint_bbox(e){var{x:t,y:n,width:r,height:i}=this.bbox();e.save(),e.strokeStyle="blue",e.lineWidth=1,e.beginPath();const{round:a}=Math;e.moveTo(a(t),a(n)),e.lineTo(a(t),a(n+i)),e.lineTo(a(t+r),a(n+i)),e.lineTo(a(t+r),a(n)),e.closePath(),e.stroke(),e.restore()}}(b.GraphicsBox=i).__name__="GraphicsBox";class o extends i{constructor({text:e}){super(),this.align="left",this.text=e}set visuals(e){const t=e.text_color.get_value(),n=e.text_alpha.get_value(),r=e.text_font_style.get_value();let i=e.text_font_size.get_value();var a=e.text_font.get_value(),{font_size_scale:o}=this;if(1!=o){const e=i.match(/^\s*(\d+(\.\d+)?)(\w+)\s*$/);if(null!=e){const[,t,,n]=e,r=Number(t);isNaN(r)||(i=`${r*o}${n}`)}}a=`${r} ${i} ${a}`;this.font=a,this.color=l.color2css(t,n),this.line_height=e.text_line_height.get_value()}infer_text_height(){return!this.text.includes("\n")&&function(e){for(const t of new Set(e))if(!("0"<=t&&t<="9"))switch(t){case",":case".":case"+":case"-":case"":case"e":continue;default:return}return 1}(this.text)?"cap":"ascent_descent"}_text_line(e){var t;const n=null!==(t=this.text_height_metric)&&void 0!==t?t:this.infer_text_height(),r=(()=>{switch(n){case"x":case"x_descent":return e.x_height;case"cap":case"cap_descent":return e.cap_height;case"ascent":case"ascent_descent":return e.ascent}})(),i=(()=>{switch(n){case"x":case"cap":case"ascent":return 0;case"x_descent":case"cap_descent":case"ascent_descent":return e.descent}})();return{height:r+i,ascent:r,descent:i}}get nlines(){return this.text.split("\n").length}_size(){var e;const{font:t}=this,n=x.font_metrics(t),r=(this.line_height-1)*n.height,i=""==this.text,a=this.text.split("\n"),o=a.length,s=a.map(e=>b.text_width(e,t)),l=this._text_line(n).height*o,c="%"==(null===(e=this.width)||void 0===e?void 0:e.unit)?this.width.value:1,u="%"==(null===(e=this.height)||void 0===e?void 0:e.unit)?this.height.value:1;return{width:w.max(s)*c,height:i?0:(l+r*(o-1))*u,metrics:n}}_computed_position(e,t,n){const{width:r,height:i}=e,{sx:a,sy:o,x_anchor:s="left",y_anchor:l="center"}=this.position;return{x:a-(()=>{if(c.isNumber(s))return s*r;switch(s){case"left":return 0;case"center":return.5*r;case"right":return r}})(),y:o-(()=>{var e;if(c.isNumber(l))return l*i;switch(l){case"top":return 0;case"center":return.5*i;case"bottom":return i;case"baseline":if(1!=n)return.5*i;switch(null!==(e=this.text_height_metric)&&void 0!==e?e:this.infer_text_height()){case"x":case"x_descent":return t.x_height;case"cap":case"cap_descent":return t.cap_height;case"ascent":case"ascent_descent":return t.ascent}}})()}}_rect(){var{width:e,height:t,metrics:n}=this._size(),r=this.text.split("\n").length,{x:n,y:r}=this._computed_position({width:e,height:t},n,r);return new s.BBox({x:n,y:r,width:e,height:t}).rect}paint(n){var e;const{font:r}=this,i=x.font_metrics(r),a=(this.line_height-1)*i.height,o=this.text.split("\n"),s=o.length,l=o.map(e=>b.text_width(e,r)),c=this._text_line(i),t=c.height*s,u="%"==(null===(e=this.width)||void 0===e?void 0:e.unit)?this.width.value:1,d="%"==(null===(e=this.height)||void 0===e?void 0:e.unit)?this.height.value:1,h=w.max(l)*u,f=(t+a*(s-1))*d;n.save(),n.fillStyle=this.color,n.font=this.font,n.textAlign="left",n.textBaseline="alphabetic";const{sx:p,sy:m}=this.position,{align:g}=this,{angle:_}=this;_&&(n.translate(p,m),n.rotate(_),n.translate(-p,-m));let{x:y,y:v}=this._computed_position({width:h,height:f},i,s);if("justify"==g)for(let e=0;e<s;e++){let t=y;const i=o[e].split(" "),x=i.length,s=i.map(e=>b.text_width(e,r)),l=(h-w.sum(s))/(x-1);for(let e=0;e<x;e++)n.fillText(i[e],t,v),t+=s[e]+l;v+=c.height+a}else for(let e=0;e<s;e++){const b=y+(()=>{switch(g){case"left":return 0;case"center":return.5*(h-l[e]);case"right":return h-l[e]}})();n.fillStyle=this.color,n.fillText(o[e],b,v+c.ascent),v+=c.height+a}n.restore()}}(b.TextBox=o).__name__="TextBox";class u extends i{constructor(e,t){super(),this.base=e,this.expo=t}get children(){return[this.base,this.expo]}set position(e){this._position=e;var t=this.base.size(),n=this.expo.size(),e=this._shift_scale()*t.height,n=Math.max(t.height,e+n.height);this.base.position={sx:0,x_anchor:"left",sy:n,y_anchor:"bottom"},this.expo.position={sx:t.width,x_anchor:"left",sy:e,y_anchor:"bottom"}}get position(){return this._position}set visuals(e){this.expo.font_size_scale=.7,this.base.visuals=e,this.expo.visuals=e}_shift_scale(){if(this.base instanceof o&&1==this.base.nlines){var{x_height:e,cap_height:t}=x.font_metrics(this.base.font);return e/t}return 2/3}infer_text_height(){return this.base.infer_text_height()}_rect(){const e=this.base.bbox(),t=this.expo.bbox(),n=e.union(t),{x:r,y:i}=this._computed_position();return n.translate(r,i).rect}_size(){var e=this.base.size(),t=this.expo.size();return{width:e.width+t.width,height:Math.max(e.height,this._shift_scale()*e.height+t.height)}}paint(e){e.save();var{angle:t}=this;if(t){const{sx:n,sy:r}=this.position;e.translate(n,r),e.rotate(t),e.translate(-n,-r)}const{x:n,y:r}=this._computed_position();e.translate(n,r),this.base.paint(e),this.expo.paint(e),e.restore()}paint_bbox(e){super.paint_bbox(e);const{x:t,y:n}=this._computed_position();e.save(),e.translate(t,n);for(const t of this.children)t.paint_bbox(e);e.restore()}_computed_position(){const{width:e,height:t}=this._size(),{sx:n,sy:r,x_anchor:i="left",y_anchor:a="center"}=this.position;return{x:n-(()=>{if(c.isNumber(i))return i*e;switch(i){case"left":return 0;case"center":return.5*e;case"right":return e}})(),y:r-(()=>{if(c.isNumber(a))return a*t;switch(a){case"top":return 0;case"center":return.5*t;case"bottom":return t;case"baseline":return.5*t}})()}}}(b.BaseExpo=u).__name__="BaseExpo";class d{constructor(e){this.items=e}get length(){return this.items.length}set visuals(e){for(const t of this.items)t.visuals=e;const t={x:0,cap:1,ascent:2,x_descent:3,cap_descent:4,ascent_descent:5},n=w.max_by(this.items.map(e=>e.infer_text_height()),e=>t[e]);for(const e of this.items)e.text_height_metric=n}set angle(e){for(const t of this.items)t.angle=e}max_size(){let e=0,t=0;for(const r of this.items){var n=r.size();e=Math.max(e,n.width),t=Math.max(t,n.height)}return{width:e,height:t}}}(b.GraphicsBoxes=d).__name__="GraphicsBoxes"},function(e,t,n,r,i){r();const{sin:a,cos:o}=Math;class s{constructor(e=1,t=0,n=0,r=1,i=0,a=0){this.a=e,this.b=t,this.c=n,this.d=r,this.e=i,this.f=a}toString(){var{a:e,b:t,c:n,d:r,e:i,f:a}=this;return`matrix(${e}, ${t}, ${n}, ${r}, ${i}, ${a})`}clone(){var{a:e,b:t,c:n,d:r,e:i,f:a}=this;return new s(e,t,n,r,i,a)}get is_identity(){var{a:e,b:t,c:n,d:r,e:i,f:a}=this;return 1==e&&0==t&&0==n&&1==r&&0==i&&0==a}apply_point(e){var[t,e]=this.apply(e.x,e.y);return{x:t,y:e}}apply_rect(e){return{p0:this.apply_point(e.p0),p1:this.apply_point(e.p1),p2:this.apply_point(e.p2),p3:this.apply_point(e.p3)}}apply(e,t){var{a:n,b:r,c:i,d:a,e:o,f:s}=this;return[n*e+i*t+o,r*e+a*t+s]}iv_apply(t,n){const{a:r,b:i,c:a,d:o,e:s,f:l}=this,c=t.length;for(let e=0;e<c;e++){const c=t[e],u=n[e];t[e]=r*c+a*u+s,n[e]=i*c+o*u+l}}transform(e,t,n,r,i,a){var{a:o,b:s,c:l,d:c,e:u,f:d}=this;return this.a=o*e+l*t,this.c=o*n+l*r,this.e=o*i+l*a+u,this.b=s*e+c*t,this.d=s*n+c*r,this.f=s*i+c*a+d,this}translate(e,t){return this.transform(1,0,0,1,e,t)}scale(e,t){return this.transform(e,0,0,t,0,0)}skew(e,t){return this.transform(1,t,e,1,0,0)}rotate(e){var t=a(e),e=o(e);return this.transform(e,t,-t,e,0,0)}rotate_ccw(e){return this.rotate(-e)}translate_x(e){return this.translate(e,0)}translate_y(e){return this.translate(0,e)}flip(){return this.scale(-1,-1)}flip_x(){return this.scale(1,-1)}flip_y(){return this.scale(-1,1)}}(n.AffineTransform=s).__name__="AffineTransform"},function(e,t,n,r,i){r();const a=e(53),o=e(13),s=e(34),l=e(8),c=e(24);class u extends a.Model{constructor(e){super(e)}}(n.LabelingPolicy=u).__name__="LabelingPolicy";class d extends u{constructor(e){super(e)}filter(e,t,n){return e}}n.AllLabels=d,d.__name__="AllLabels";class h extends u{constructor(e){super(e)}static init_NoOverlap(){this.define(({Number:e})=>({min_distance:[e,5]}))}filter(e,t,n){var{min_distance:r}=this;let i=null;for(const t of e)null!=i&&n(i,t)<r?e.unset(t):i=t;return e}}(n.NoOverlap=h).__name__="NoOverlap",h.init_NoOverlap();class f extends u{constructor(e){super(e)}static init_CustomLabelingPolicy(){this.define(({Unknown:e,String:t,Dict:n})=>({args:[n(e),{}],code:[t,""]}))}get names(){return o.keys(this.args)}get values(){return o.values(this.args)}get func(){var e=s.use_strict(this.code);return new c.GeneratorFunction("indices","bboxes","distance",...this.names,e)}filter(e,t,n){const r=Object.create(null),i=this.func.call(r,e,t,n,...this.values);let a=i.next();if(a.done&&void 0!==a.value){const{value:t}=a;return t instanceof c.Indices?t:void 0===t?e:l.isIterable(t)?c.Indices.from_indices(e.size,t):c.Indices.all_unset(e.size)}{const t=[];for(;t.push(a.value),a=i.next(),!a.done;);return c.Indices.from_indices(e.size,t)}}}(n.CustomLabelingPolicy=f).__name__="CustomLabelingPolicy",f.init_CustomLabelingPolicy()},function(e,t,n,r,i){r();const a=e(1),o=e(163),s=e(171),l=e(172),c=a.__importStar(e(48)),u=e(20),d=e(167),h=e(8);class f extends o.AxisView{_paint(e,t,n){this._draw_group_separators(e,t,n)}_draw_group_separators(e,t,n){const[a]=this.ranges,[o,s]=this.computed_bounds;if(a.tops&&!(a.tops.length<2)&&this.visuals.separator_line.doit){const l=this.dimension,c=(l+1)%2,u=[[],[]];let i=0;for(let r=0;r<a.tops.length-1;r++){let t,n;for(let e=i;e<a.factors.length;e++)if(a.factors[e][0]==a.tops[r+1]){[t,n]=[a.factors[e-1],a.factors[e]],i=e;break}const d=(a.synthetic(t)+a.synthetic(n))/2;d>o&&d<s&&(u[l].push(d),u[c].push(this.loc))}const d=this.extents.tick_label;this._draw_ticks(e,u,-3,d-6,this.visuals.separator_line)}}_draw_major_labels(t,n,e){var r=this._get_factor_info();let i=n.tick+this.model.major_label_standoff;for(let e=0;e<r.length;e++){var[a,o,s,l]=r[e];this._draw_oriented_labels(t,a,o,s,this.panel.side,i,l),i+=n.tick_labels[e]}}_tick_label_extents(){const e=this._get_factor_info(),t=[];for(var[n,,r,i]of e){const e=this._oriented_labels_extent(n,r,this.model.major_label_standoff,i);t.push(e)}return t}_get_factor_info(){const[e]=this.ranges,[t,n]=this.computed_bounds,r=this.loc,i=this.model.ticker.get_ticks(t,n,e,r),a=this.tick_coords,o=[],s=e=>new d.GraphicsBoxes(e.map(e=>h.isString(e)?new d.TextBox({text:e}):e)),l=e=>s(this.model.formatter.doFormat(e,this));if(1==e.levels){const e=l(i.major);o.push([e,a.major,this.model.major_label_orientation,this.visuals.major_label_text])}else if(2==e.levels){const e=l(i.major.map(e=>e[1]));o.push([e,a.major,this.model.major_label_orientation,this.visuals.major_label_text]),o.push([s(i.tops),a.tops,this.model.group_label_orientation,this.visuals.group_text])}else if(3==e.levels){const e=l(i.major.map(e=>e[2])),t=i.mids.map(e=>e[1]);o.push([e,a.major,this.model.major_label_orientation,this.visuals.major_label_text]),o.push([s(t),a.mids,this.model.subgroup_label_orientation,this.visuals.subgroup_text]),o.push([s(i.tops),a.tops,this.model.group_label_orientation,this.visuals.group_text])}return o}get tick_coords(){const e=this.dimension,t=(e+1)%2,[n]=this.ranges,[r,i]=this.computed_bounds,a=this.model.ticker.get_ticks(r,i,n,this.loc),o={major:[[],[]],mids:[[],[]],tops:[[],[]],minor:[[],[]]};return o.major[e]=a.major,o.major[t]=a.major.map(()=>this.loc),3==n.levels&&(o.mids[e]=a.mids,o.mids[t]=a.mids.map(()=>this.loc)),1<n.levels&&(o.tops[e]=a.tops,o.tops[t]=a.tops.map(()=>this.loc)),o}}(n.CategoricalAxisView=f).__name__="CategoricalAxisView";class p extends o.Axis{constructor(e){super(e)}static init_CategoricalAxis(){this.prototype.default_view=f,this.mixins([["separator_",c.Line],["group_",c.Text],["subgroup_",c.Text]]),this.define(({Number:e,Or:t})=>({group_label_orientation:[t(u.TickLabelOrientation,e),"parallel"],subgroup_label_orientation:[t(u.TickLabelOrientation,e),"parallel"]})),this.override({ticker:()=>new s.CategoricalTicker,formatter:()=>new l.CategoricalTickFormatter,separator_line_color:"lightgrey",separator_line_width:2,group_text_font_style:"bold",group_text_font_size:"11px",group_text_color:"grey",subgroup_text_font_style:"bold",subgroup_text_font_size:"11px"})}}(n.CategoricalAxis=p).__name__="CategoricalAxis",p.init_CategoricalAxis()},function(e,t,n,r,i){r();e=e(165);class a extends e.Ticker{constructor(e){super(e)}get_ticks(e,t,n,r){var i;return{major:this._collect(n.factors,n,e,t),minor:[],tops:this._collect(null!==(i=n.tops)&&void 0!==i?i:[],n,e,t),mids:this._collect(null!==(i=n.mids)&&void 0!==i?i:[],n,e,t)}}_collect(e,t,n,r){const i=[];for(const a of e){const e=t.synthetic(a);e>n&&e<r&&i.push(a)}return i}}(n.CategoricalTicker=a).__name__="CategoricalTicker"},function(e,t,n,r,i){r();const a=e(166),o=e(9);class s extends a.TickFormatter{constructor(e){super(e)}doFormat(e,t){return o.copy(e)}}(n.CategoricalTickFormatter=s).__name__="CategoricalTickFormatter"},function(e,t,n,r,i){r();e=e(163);class a extends e.AxisView{}(n.ContinuousAxisView=a).__name__="ContinuousAxisView";class o extends e.Axis{constructor(e){super(e)}}n.ContinuousAxis=o,o.__name__="ContinuousAxis"},function(e,t,n,r,i){r();const a=e(175),o=e(180),s=e(185);class l extends a.LinearAxisView{}n.DatetimeAxisView=l,l.__name__="DatetimeAxisView";class c extends a.LinearAxis{constructor(e){super(e)}static init_DatetimeAxis(){this.prototype.default_view=l,this.override({ticker:()=>new s.DatetimeTicker,formatter:()=>new o.DatetimeTickFormatter})}}(n.DatetimeAxis=c).__name__="DatetimeAxis",c.init_DatetimeAxis()},function(e,t,n,r,i){r();const a=e(173),o=e(176),s=e(177);class l extends a.ContinuousAxisView{}(n.LinearAxisView=l).__name__="LinearAxisView";class c extends a.ContinuousAxis{constructor(e){super(e)}static init_LinearAxis(){this.prototype.default_view=l,this.override({ticker:()=>new s.BasicTicker,formatter:()=>new o.BasicTickFormatter})}}n.LinearAxis=c,c.__name__="LinearAxis",c.init_LinearAxis()},function(e,t,n,r,i){r();const a=e(166),o=e(34);function s(e){let t="";for(const n of e)t+="-"==n?"":n;return t}n.unicode_replace=s;class l extends a.TickFormatter{constructor(e){super(e),this.last_precision=3}static init_BasicTickFormatter(){this.define(({Boolean:e,Int:t,Auto:n,Or:r})=>({precision:[r(t,n),"auto"],use_scientific:[e,!0],power_limit_high:[t,5],power_limit_low:[t,-3]}))}get scientific_limit_low(){return 10**this.power_limit_low}get scientific_limit_high(){return 10**this.power_limit_high}_need_sci(e){if(!this.use_scientific)return!1;var{scientific_limit_high:t}=this,{scientific_limit_low:n}=this,r=e.length<2?0:Math.abs(e[1]-e[0])/1e4;for(const i of e){const e=Math.abs(i);if(!(e<=r)&&(e>=t||e<=n))return!0}return!1}_format_with_precision(e,t,n){return t?e.map(e=>s(e.toExponential(n))):e.map(e=>s(o.to_fixed(e,n)))}_auto_precision(n,e){const r=new Array(n.length),i=this.last_precision<=15;e:for(let t=this.last_precision;i?t<=15:1<=t;i?t++:t--){if(e){r[0]=n[0].toExponential(t);for(let e=1;e<n.length;e++)if(r[e]==r[e-1])continue e;this.last_precision=t;break}r[0]=o.to_fixed(n[0],t);for(let e=1;e<n.length;e++)if(r[e]=o.to_fixed(n[e],t),r[e]==r[e-1])continue e;this.last_precision=t;break}return this.last_precision}doFormat(e,t){if(0==e.length)return[];var n=this._need_sci(e),r="auto"==this.precision?this._auto_precision(e,n):this.precision;return this._format_with_precision(e,n,r)}}n.BasicTickFormatter=l,l.__name__="BasicTickFormatter",l.init_BasicTickFormatter()},function(e,t,n,r,i){r();e=e(178);class a extends e.AdaptiveTicker{constructor(e){super(e)}}(n.BasicTicker=a).__name__="BasicTicker"},function(e,t,n,r,i){r();const a=e(179),u=e(9),d=e(10);class o extends a.ContinuousTicker{constructor(e){super(e)}static init_AdaptiveTicker(){this.define(({Number:e,Array:t,Nullable:n})=>({base:[e,10],mantissas:[t(e),[1,2,5]],min_interval:[e,0],max_interval:[n(e),null]}))}get_min_interval(){return this.min_interval}get_max_interval(){var e;return null!==(e=this.max_interval)&&void 0!==e?e:1/0}initialize(){super.initialize();var e=u.nth(this.mantissas,-1)/this.base,t=u.nth(this.mantissas,0)*this.base;this.extended_mantissas=[e,...this.mantissas,t],this.base_factor=0===this.get_min_interval()?1:this.get_min_interval()}get_interval(e,t,n){const r=t-e,i=this.get_ideal_interval(e,t,n),a=Math.floor(d.log(i/this.base_factor,this.base)),o=this.base**a*this.base_factor,s=this.extended_mantissas,l=s.map(e=>Math.abs(n-r/(e*o))),c=s[u.argmin(l)]*o;return d.clamp(c,this.get_min_interval(),this.get_max_interval())}}(n.AdaptiveTicker=o).__name__="AdaptiveTicker",o.init_AdaptiveTicker()},function(e,t,n,r,i){r();const a=e(165),d=e(9);class o extends a.Ticker{constructor(e){super(e)}static init_ContinuousTicker(){this.define(({Int:e})=>({num_minor_ticks:[e,5],desired_num_ticks:[e,6]}))}get_ticks(e,t,n,r){return this.get_ticks_no_defaults(e,t,r,this.desired_num_ticks)}get_ticks_no_defaults(t,n,r,e){const i=this.get_interval(t,n,e),a=Math.floor(t/i),o=Math.ceil(n/i);let s;s=isFinite(a)&&isFinite(o)?d.range(a,o+1):[];const l=s.map(e=>e*i).filter(e=>t<=e&&e<=n),c=this.num_minor_ticks,u=[];if(0<c&&0<l.length){const r=i/c,e=d.range(0,c).map(e=>e*r);for(const r of e.slice(1)){const e=l[0]-r;t<=e&&e<=n&&u.push(e)}for(const r of l)for(const i of e){const e=r+i;t<=e&&e<=n&&u.push(e)}}return{major:l,minor:u}}get_ideal_interval(e,t,n){return(t-e)/n}}(n.ContinuousTicker=o).__name__="ContinuousTicker",o.init_ContinuousTicker()},function(e,t,n,r,i){r();const h=e(1).__importDefault(e(181)),a=e(166),f=e(19),o=e(182),s=e(9),l=e(8);function p(e,t){if(l.isFunction(t))return t(e);var n=o.sprintf("$1%06d",Math.round(e/1e3%1*1e6));return-1==(t=t.replace(/((^|[^%])(%%)*)%f/,n)).indexOf("%")?t:h.default(e,t)}const m=["microseconds","milliseconds","seconds","minsec","minutes","hourmin","hours","days","months","years"];class c extends a.TickFormatter{constructor(e){super(e),this.strip_leading_zeros=!0}static init_DatetimeTickFormatter(){this.define(({String:e,Array:t})=>({microseconds:[t(e),["%fus"]],milliseconds:[t(e),["%3Nms","%S.%3Ns"]],seconds:[t(e),["%Ss"]],minsec:[t(e),[":%M:%S"]],minutes:[t(e),[":%M","%Mm"]],hourmin:[t(e),["%H:%M"]],hours:[t(e),["%Hh","%H:%M"]],days:[t(e),["%m/%d","%a%d"]],months:[t(e),["%m/%Y","%b %Y"]],years:[t(e),["%Y"]]}))}initialize(){super.initialize(),this._update_width_formats()}_update_width_formats(){const n=+h.default(new Date),e=function(e){var t=e.map(e=>p(n,e).length),e=s.sort_by(s.zip(t,e),([e])=>e);return s.unzip(e)};this._width_formats={microseconds:e(this.microseconds),milliseconds:e(this.milliseconds),seconds:e(this.seconds),minsec:e(this.minsec),minutes:e(this.minutes),hourmin:e(this.hourmin),hours:e(this.hours),days:e(this.days),months:e(this.months),years:e(this.years)}}_get_resolution_str(e,t){e*=1.1;switch(!1){case!(e<.001):return"microseconds";case!(e<1):return"milliseconds";case!(e<60):return 60<=t?"minsec":"seconds";case!(e<3600):return 3600<=t?"hourmin":"minutes";case!(e<86400):return"hours";case!(e<2678400):return"days";case!(e<31536e3):return"months";default:return"years"}}doFormat(e,a){if(0==e.length)return[];const t=Math.abs(e[e.length-1]-e[0])/1e3,n=t/(e.length-1),o=this._get_resolution_str(n,t),[,[s]]=this._width_formats[o],l=[],c=m.indexOf(o),u={};for(const e of m)u[e]=0;u.seconds=5,u.minsec=4,u.minutes=4,u.hourmin=3,u.hours=3;for(const a of e){let t,n;try{n=(d=a,h.default(d,"%Y %m %d %H %M %S").split(/\s+/).map(e=>parseInt(e,10))),t=p(a,s)}catch(e){f.logger.warn(`unable to format tick for timestamp value ${a}`),f.logger.warn(` - ${e}`),l.push("ERR");continue}let r=!1,i=c;for(;0==n[u[m[i]]];){let e;if(i+=1,i==m.length)break;if(("minsec"==o||"hourmin"==o)&&!r){if("minsec"==o&&0==n[4]&&0!=n[5]||"hourmin"==o&&0==n[3]&&0!=n[4]){e=this._width_formats[m[c-1]][1][0],t=p(a,e);break}r=!0}e=this._width_formats[m[i]][1][0],t=p(a,e)}if(this.strip_leading_zeros){let e=t.replace(/^0+/g,"");e!=t&&isNaN(parseInt(e))&&(e=`0${e}`),l.push(e)}else l.push(t)}var d;return l}}(n.DatetimeTickFormatter=c).__name__="DatetimeTickFormatter",c.init_DatetimeTickFormatter()},function(e,t,n,r,i){!function(e){"object"==typeof t&&t.exports?t.exports=e():this.tz=e()}(function(){function r(e,t,n){for(var r,i,a,o,s=e[e.zone],l=[],c=new Date(n).getUTCFullYear(),u=1,d=1,h=s.length;d<h&&!(s[d][t]<=n);d++);if((r=s[d]).rules){for(a=e[r.rules],o=c+1;c-u<=o;--o)for(d=0,h=a.length;d<h;d++)a[d].from<=o&&o<=a[d].to?l.push(function(e,t,n){for(var r,i=t.day[1];r=new Date(Date.UTC(n,t.month,Math.abs(i++))),t.day[0]<7&&r.getUTCDay()!=t.day[0];);return(r={clock:t.clock,sort:r.getTime(),rule:t,save:6e4*t.save,offset:e.offset})[r.clock]=r.sort+6e4*t.time,r.posix?r.wallclock=r[r.clock]+(e.offset+t.saved):r.posix=r[r.clock]-(e.offset+t.saved),r}(r,a[d],o)):a[d].to<o&&1==u&&(u=o-a[d].to);for(l.sort(function(e,t){return e.sort-t.sort}),d=0,h=l.length;d<h;d++)n>=l[d][t]&&l[d][l[d].clock]>r[l[d].clock]&&(i=l[d])}return i&&((e=/^(.*)\/(.*)$/.exec(r.format))?i.abbrev=e[i.save?2:1]:i.abbrev=r.format.replace(/%s/,i.rule.letter)),i||r}function s(e,t){return"UTC"==e.zone?t:(e.entry=r(e,"posix",t),t+e.entry.offset+e.entry.save)}function d(e,t){return"UTC"==e.zone?t:(e.entry=n=r(e,"wallclock",t),0<(e=t-n.wallclock)&&e<n.save?null:t-n.offset-n.save);var n}var t={clock:function(){return+new Date},zone:"UTC",entry:{abbrev:"UTC",offset:0,save:0},UTC:1,z:function(e,t,n,r){for(var i,a=this.entry.offset+this.entry.save,o=Math.abs(a/1e3),s=[],l=3600,c=0;c<3;c++)s.push(("0"+Math.floor(o/l)).slice(-2)),o%=l,l/=60;return"^"!=n||a?(3==(r="^"==n?3:r)?(i=(i=s.join(":")).replace(/:00$/,""),"^"!=n&&(i=i.replace(/:00$/,""))):r?(i=s.slice(0,r+1).join(":"),"^"==n&&(i=i.replace(/:00$/,""))):i=s.slice(0,2).join(""),(i=(a<0?"-":"+")+i).replace(/([-+])(0)/,{_:" $1","-":"$1"}[n]||"$1$2")):"Z"},"%":function(e){return"%"},n:function(e){return"\n"},t:function(e){return"\t"},U:function(e){return i(e,0)},W:function(e){return i(e,1)},V:function(e){return n(e)[0]},G:function(e){return n(e)[1]},g:function(e){return n(e)[1]%100},j:function(e){return Math.floor((e.getTime()-Date.UTC(e.getUTCFullYear(),0))/864e5)+1},s:function(e){return Math.floor(e.getTime()/1e3)},C:function(e){return Math.floor(e.getUTCFullYear()/100)},N:function(e){return e.getTime()%1e3*1e6},m:function(e){return e.getUTCMonth()+1},Y:function(e){return e.getUTCFullYear()},y:function(e){return e.getUTCFullYear()%100},H:function(e){return e.getUTCHours()},M:function(e){return e.getUTCMinutes()},S:function(e){return e.getUTCSeconds()},e:function(e){return e.getUTCDate()},d:function(e){return e.getUTCDate()},u:function(e){return e.getUTCDay()||7},w:function(e){return e.getUTCDay()},l:function(e){return e.getUTCHours()%12||12},I:function(e){return e.getUTCHours()%12||12},k:function(e){return e.getUTCHours()},Z:function(e){return this.entry.abbrev},a:function(e){return this[this.locale].day.abbrev[e.getUTCDay()]},A:function(e){return this[this.locale].day.full[e.getUTCDay()]},h:function(e){return this[this.locale].month.abbrev[e.getUTCMonth()]},b:function(e){return this[this.locale].month.abbrev[e.getUTCMonth()]},B:function(e){return this[this.locale].month.full[e.getUTCMonth()]},P:function(e){return this[this.locale].meridiem[Math.floor(e.getUTCHours()/12)].toLowerCase()},p:function(e){return this[this.locale].meridiem[Math.floor(e.getUTCHours()/12)]},R:function(e,t){return this.convert([t,"%H:%M"])},T:function(e,t){return this.convert([t,"%H:%M:%S"])},D:function(e,t){return this.convert([t,"%m/%d/%y"])},F:function(e,t){return this.convert([t,"%Y-%m-%d"])},x:function(e,t){return this.convert([t,this[this.locale].date])},r:function(e,t){return this.convert([t,this[this.locale].time12||"%I:%M:%S"])},X:function(e,t){return this.convert([t,this[this.locale].time24])},c:function(e,t){return this.convert([t,this[this.locale].dateTime])},convert:function(e){if(!e.length)return"1.0.23";for(var t,l,n,c,u=Object.create(this),r=[],i=0;i<e.length;i++)if(n=e[i],Array.isArray(n))i||isNaN(n[1])?n.splice.apply(e,[i--,1].concat(n)):c=n;else if(isNaN(n)){if("string"==(l=typeof n))~n.indexOf("%")?u.format=n:i||"*"!=n?!i&&(l=/^(\d{4})-(\d{2})-(\d{2})(?:[T\s](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|(([+-])(\d{2}(:\d{2}){0,2})))?)?$/.exec(n))?((c=[]).push.apply(c,l.slice(1,8)),l[9]?(c.push(l[10]+1),c.push.apply(c,l[11].split(/:/))):l[8]&&c.push(1)):/^\w{2,3}_\w{2}$/.test(n)?u.locale=n:(l=a.exec(n))?r.push(l):u.zone=n:c=n;else if("function"==l){if(l=n.call(u))return l}else if(/^\w{2,3}_\w{2}$/.test(n.name))u[n.name]=n;else if(n.zones){for(l in n.zones)u[l]=n.zones[l];for(l in n.rules)u[l]=n.rules[l]}}else i||(c=n);if(u[u.locale]||delete u.locale,u[u.zone]||delete u.zone,null!=c){if("*"==c)c=u.clock();else if(Array.isArray(c)){for(l=[],t=!c[7],i=0;i<11;i++)l[i]=+(c[i]||0);--l[1],c=Date.UTC.apply(Date.UTC,l)+-l[7]*(36e5*l[8]+6e4*l[9]+1e3*l[10])}else c=Math.floor(c);if(!isNaN(c)){if(null==(c=t?d(u,c):c))return c;for(i=0,t=r.length;i<t;i++)c=function(e,t,n){var r,i=+(n[1]+1),a=n[2]*i,o=h.indexOf(n[3].toLowerCase());if(9<o)t+=a*f[o-10];else{if(r=new Date(s(e,t)),o<7)for(;a;)r.setUTCDate(r.getUTCDate()+i),r.getUTCDay()==o&&(a-=i);else 7==o?r.setUTCFullYear(r.getUTCFullYear()+a):8==o?r.setUTCMonth(r.getUTCMonth()+a):r.setUTCDate(r.getUTCDate()+a);null==(t=d(e,r.getTime()))&&(t=d(e,r.getTime()+864e5*i)-864e5*i)}return t}(u,c,r[i]);return u.format?(l=new Date(s(u,c)),u.format.replace(/%([-0_^]?)(:{0,3})(\d*)(.)/g,function(e,t,n,r,i){var a,o,s="0";if(a=u[i]){for(e=String(a.call(u,l,c,t,n.length)),"_"==(t||a.style)&&(s=" "),o="-"!=t&&a.pad||0;e.length<o;)e=s+e;for(o="-"==t?0:r||a.pad;e.length<o;)e=s+e;"N"==i&&o<e.length&&(e=e.slice(0,o)),"^"==t&&(e=e.toUpperCase())}return e})):c}}return function(){return u.convert(arguments)}},locale:"en_US",en_US:{date:"%m/%d/%Y",time24:"%I:%M:%S %p",time12:"%I:%M:%S %p",dateTime:"%a %d %b %Y %I:%M:%S %p %Z",meridiem:["AM","PM"],month:{abbrev:"Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),full:"January|February|March|April|May|June|July|August|September|October|November|December".split("|")},day:{abbrev:"Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),full:"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|")}}},h="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond",a=new RegExp("^\\s*([+-])(\\d+)\\s+("+h+")s?\\s*$","i"),f=[36e5,6e4,1e3,1];function i(e,t){var n,r=new Date(Date.UTC(e.getUTCFullYear(),0)),e=Math.floor((e.getTime()-r.getTime())/864e5);return r.getUTCDay()==t?n=0:8==(n=7-r.getUTCDay()+t)&&(n=1),n<=e?Math.floor((e-n)/7)+1:0}function n(e){var t,n=e.getUTCFullYear(),r=new Date(Date.UTC(n,0)).getUTCDay();return(t=i(e,1)+(1<r&&r<=4?1:0))?53!=t||4==r||3==r&&29==new Date(n,1,29).getDate()?[t,e.getUTCFullYear()]:[1,e.getUTCFullYear()+1]:(n=e.getUTCFullYear()-1,[t=4==(r=new Date(Date.UTC(n,0)).getUTCDay())||3==r&&29==new Date(n,1,29).getDate()?53:52,e.getUTCFullYear()-1])}return h=h.toLowerCase().split("|"),"delmHMSUWVgCIky".replace(/./g,function(e){t[e].pad=2}),t.N.pad=9,t.j.pad=3,t.k.style="_",t.l.style="_",t.e.style="_",function(){return t.convert(arguments)}})},function(e,t,n,r,i){r();const a=e(1),o=a.__importStar(e(183)),s=e(184),l=a.__importDefault(e(181)),c=e(21),u=e(8);function d(e,...t){return s.sprintf(e,...t)}function h(e,t,n){return u.isNumber(e)?d((()=>{switch(!1){case Math.floor(e)!=e:return"%d";case!(.1<Math.abs(e)&&Math.abs(e)<1e3):return"%0.3f";default:return"%0.3e"}})(),e):`${e}`}function f(e,r,t){if(null==r)return h;if(null!=t&&e in t){const r=t[e];if(u.isString(r)){if(r in n.DEFAULT_FORMATTERS)return n.DEFAULT_FORMATTERS[r];throw new Error(`Unknown tooltip field formatter type '${r}'`)}return function(e,t,n){return r.format(e,t,n)}}return n.DEFAULT_FORMATTERS.numeral}function p(e,n,t,r){return"$"==e[0]?function(e,t){if(e in t)return t[e];throw new Error(`Unknown special variable '$${e}'`)}(e.substring(1),r):function(e,t){e=n.get_column(e);if(null==e)return null;if(u.isNumber(t))return e[t];e=e[t.index];return u.isTypedArray(e)||u.isArray(e)?u.isArray(e[0])?e[t.dim2][t.dim1]:e[t.flat_index]:e}(e.substring(1).replace(/[{}]/g,""),t)}n.FormatterType=c.Enum("numeral","printf","datetime"),n.DEFAULT_FORMATTERS={numeral:(e,t,n)=>o.format(e,t),datetime:(e,t,n)=>l.default(e,t),printf:(e,t,n)=>d(t,e)},n.sprintf=d,n.basic_formatter=h,n.get_formatter=f,n.get_value=p,n.replace_placeholders=function(e,i,a,o,s={},l){let t,c;return c=u.isString(e)?(t=e,!1):(t=e.html,!0),t=t.replace(/@\$name/g,e=>`@{${s.name}}`),t=t.replace(/((?:\$\w+)|(?:@\w+)|(?:@{(?:[^{}]+)}))(?:{([^{}]+)})?/g,(e,t,n)=>{var r=p(t,i,a,s);if(null==r)return l?l("???"):"???";if("safe"==n)return c=!0,`${r}`;n=`${f(t,n,o)(r,n,s)}`;return l?l(n):n}),c?[...(new DOMParser).parseFromString(t,"text/html").body.childNodes]:t}},function(e,t,n,r,i){var s,P={},a=P,R="en-US",I=null,l="0,0";function o(e){this._value=e}function c(e){for(var t="",n=0;n<e;n++)t+="0";return t}function N(e,t,n,r){var i,a,o,s,l=Math.pow(10,t),t=-1<e.toFixed(0).search("e")?(i=t,a=(s=e.toString()).split("e")[0],o=s.split("e")[1],s=a.split(".")[0]+(a=a.split(".")[1]||"")+c(o-a.length),0<i&&(s+="."+c(i)),s):(n(e*l)/l).toFixed(t);return r&&(r=new RegExp("0{1,"+r+"}$"),t=t.replace(r,"")),t}function h(e,t,n,r){var i,a,o,s,l,c,u,d,h,f,p,m,g,_,y=!1,v=!1,b=!1,x="",w=!1,T="",A="",k=Math.abs(e),M=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],S=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],E="",C=!1,L=!1;if(0===e&&null!==I)return I;if(!isFinite(e))return""+e;if(0===t.indexOf("{")){var D=t.indexOf("}");if(-1===D)throw Error('Format should also contain a "}"');c=t.slice(1,D),t=t.slice(D+1)}else c="";if(t.indexOf("}")===t.length-1){var O=t.indexOf("{");if(-1===O)throw Error('Format should also contain a "{"');u=t.slice(O+1,-1),t=t.slice(0,O+1)}else u="";if(h=null===(f=-1===t.indexOf(".")?t.match(/([0-9]+).*/):t.match(/([0-9]+)\..*/))?-1:f[1].length,-1!==t.indexOf("-")&&(C=!0),-1<t.indexOf("(")?(y=!0,t=t.slice(1,-1)):-1<t.indexOf("+")&&(v=!0,t=t.replace(/\+/g,"")),-1<t.indexOf("a")){if(D=t.split(".")[0].match(/[0-9]+/g)||["0"],D=parseInt(D[0],10),p=0<=t.indexOf("aK"),m=0<=t.indexOf("aM"),g=0<=t.indexOf("aB"),_=0<=t.indexOf("aT"),w=p||m||g||_,t=-1<t.indexOf(" a")?(x=" ",t.replace(" a","")):t.replace("a",""),f=0==(f=(O=Math.floor(Math.log(k)/Math.LN10)+1)%3)?3:f,D&&0!==k&&(l=Math.floor(Math.log(k)/Math.LN10)+1-D,f=3*~~((Math.min(D,O)-f)/3),k/=Math.pow(10,f),-1===t.indexOf(".")&&3<D))for(t+="[.]",d=(d=0===l?0:3*~~(l/3)-l)<0?d+3:d,i=0;i<d;i++)t+="0";Math.floor(Math.log(Math.abs(e))/Math.LN10)+1!==D&&(k>=Math.pow(10,12)&&!w||_?(x+=P[R].abbreviations.trillion,e/=Math.pow(10,12)):k<Math.pow(10,12)&&k>=Math.pow(10,9)&&!w||g?(x+=P[R].abbreviations.billion,e/=Math.pow(10,9)):k<Math.pow(10,9)&&k>=Math.pow(10,6)&&!w||m?(x+=P[R].abbreviations.million,e/=Math.pow(10,6)):(k<Math.pow(10,6)&&k>=Math.pow(10,3)&&!w||p)&&(x+=P[R].abbreviations.thousand,e/=Math.pow(10,3)))}if(-1<t.indexOf("b"))for(t=-1<t.indexOf(" b")?(T=" ",t.replace(" b","")):t.replace("b",""),s=0;s<=M.length;s++)if(a=Math.pow(1024,s),o=Math.pow(1024,s+1),a<=e&&e<o){T+=M[s],0<a&&(e/=a);break}if(-1<t.indexOf("d"))for(t=-1<t.indexOf(" d")?(T=" ",t.replace(" d","")):t.replace("d",""),s=0;s<=S.length;s++)if(a=Math.pow(1e3,s),o=Math.pow(1e3,s+1),a<=e&&e<o){T+=S[s],0<a&&(e/=a);break}return-1<t.indexOf("o")&&(t=-1<t.indexOf(" o")?(A=" ",t.replace(" o","")):t.replace("o",""),P[R].ordinal&&(A+=P[R].ordinal(e))),-1<t.indexOf("[.]")&&(b=!0,t=t.replace("[.]",".")),k=e.toString().split(".")[0],w=t.split(".")[1],p=t.indexOf(","),w?(k=(E=-1!==w.indexOf("*")?N(e,e.toString().split(".")[1].length,n):-1<w.indexOf("[")?N(e,(w=(w=w.replace("]","")).split("["))[0].length+w[1].length,n,w[1].length):N(e,w.length,n)).split(".")[0],E=E.split(".")[1].length?(r?x+r:P[R].delimiters.decimal)+E.split(".")[1]:"",b&&0===Number(E.slice(1))&&(E="")):k=N(e,null,n),-1<k.indexOf("-")&&(k=k.slice(1),L=!0),k.length<h&&(k=new Array(h-k.length+1).join("0")+k),-1<p&&(k=k.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+P[R].delimiters.thousands)),0===t.indexOf(".")&&(k=""),c+(t.indexOf("(")<t.indexOf("-")?(y&&L?"(":"")+(C&&L||!y&&L?"-":""):(C&&L||!y&&L?"-":"")+(y&&L?"(":""))+(!L&&v&&0!==e?"+":"")+k+E+(A||"")+(x&&!r?x:"")+(T||"")+(y&&L?")":"")+u}function u(e,t){P[e]=t}function d(e){e=P[R=e].defaults;e&&e.format&&s.defaultFormat(e.format),e&&e.currencyFormat&&s.defaultCurrencyFormat(e.currencyFormat)}void 0!==t&&t.exports,(s=function(e){return s.isNumbro(e)?e=e.value():0===e||void 0===e?e=0:Number(e)||(e=s.fn.unformat(e)),new o(Number(e))}).version="1.6.2",s.isNumbro=function(e){return e instanceof o},s.setLanguage=function(e,t){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var n=e,r=e.split("-")[0],i=null;a[n]||(Object.keys(a).forEach(function(e){i||e.split("-")[0]!==r||(i=e)}),n=i||t||"en-US"),d(n)},s.setCulture=function(e,t){var n=e,r=e.split("-")[1],i=null;P[n]||(r&&Object.keys(P).forEach(function(e){i||e.split("-")[1]!==r||(i=e)}),n=i||t||"en-US"),d(n)},s.language=function(e,t){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!e)return R;if(e&&!t){if(!a[e])throw new Error("Unknown language : "+e);d(e)}return!t&&a[e]||u(e,t),s},s.culture=function(e,t){if(!e)return R;if(e&&!t){if(!P[e])throw new Error("Unknown culture : "+e);d(e)}return!t&&P[e]||u(e,t),s},s.languageData=function(e){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!e)return a[R];if(!a[e])throw new Error("Unknown language : "+e);return a[e]},s.cultureData=function(e){if(!e)return P[R];if(!P[e])throw new Error("Unknown culture : "+e);return P[e]},s.culture("en-US",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}}),s.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),a},s.cultures=function(){return P},s.zeroFormat=function(e){I="string"==typeof e?e:null},s.defaultFormat=function(e){l="string"==typeof e?e:"0.0"},s.defaultCurrencyFormat=function(e){},s.validate=function(e,t){var n,r,i,a,o;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",e)),(e=e.trim()).match(/^\d+$/))return!0;if(""===e)return!1;try{o=s.cultureData(t)}catch(e){o=s.cultureData(s.culture())}return r=o.currency.symbol,a=o.abbreviations,n=o.delimiters.decimal,t="."===o.delimiters.thousands?"\\.":o.delimiters.thousands,!(null!==(o=e.match(/^[^\d]+/))&&(e=e.substr(1),o[0]!==r)||null!==(o=e.match(/[^\d]+$/))&&(e=e.slice(0,-1),o[0]!==a.thousand&&o[0]!==a.million&&o[0]!==a.billion&&o[0]!==a.trillion)||(t=new RegExp(t+"{2}"),e.match(/[^\d.,]/g)||2<(i=e.split(n)).length||(i.length<2?!i[0].match(/^\d+.*\d$/)||i[0].match(t):1===i[0].length?!i[0].match(/^\d+$/)||i[0].match(t)||!i[1].match(/^\d+$/):!i[0].match(/^\d+.*\d$/)||i[0].match(t)||!i[1].match(/^\d+$/))))},t.exports={format:function(e,t,n,r){return null!=n&&n!==s.culture()&&s.setCulture(n),e=Number(e),t=null!=t?t:l,r=null==r?Math.round:r,-1<t.indexOf("$")?function(e,t,n){var r,i,a=t,o=a.indexOf("$"),s=a.indexOf("("),l=a.indexOf("+"),c=a.indexOf("-"),u="",d="";if(-1===a.indexOf("$")?"infix"===P[R].currency.position?(d=P[R].currency.symbol,P[R].currency.spaceSeparated&&(d=" "+d+" ")):P[R].currency.spaceSeparated&&(u=" "):a=-1<a.indexOf(" $")?(u=" ",a.replace(" $","")):-1<a.indexOf("$ ")?(u=" ",a.replace("$ ","")):a.replace("$",""),i=h(e,a,n,d),-1===t.indexOf("$"))switch(P[R].currency.position){case"postfix":i=-1<i.indexOf(")")?((i=i.split("")).splice(-1,0,u+P[R].currency.symbol),i.join("")):i+u+P[R].currency.symbol;break;case"infix":break;case"prefix":i=-1<i.indexOf("(")||-1<i.indexOf("-")?(i=i.split(""),r=Math.max(s,c)+1,i.splice(r,0,P[R].currency.symbol+u),i.join("")):P[R].currency.symbol+u+i;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else i=o<=1?-1<i.indexOf("(")||-1<i.indexOf("+")||-1<i.indexOf("-")?(r=o<s||o<l||o<c?0:1,(i=i.split("")).splice(r,0,P[R].currency.symbol+u),i.join("")):P[R].currency.symbol+u+i:-1<i.indexOf(")")?((i=i.split("")).splice(-1,0,u+P[R].currency.symbol),i.join("")):i+u+P[R].currency.symbol;return i}(e,t,r):-1<t.indexOf("%")?(i=e,a=r,o="",a=-1<(a=h(i*=100,i=-1<(i=t).indexOf(" %")?(o=" ",i.replace(" %","")):i.replace("%",""),a)).indexOf(")")?((a=a.split("")).splice(-1,0,o+"%"),a.join("")):a+o+"%"):-1<t.indexOf(":")?(i=e,o=Math.floor(i/60/60),a=Math.floor((i-60*o*60)/60),i=Math.round(i-60*o*60-60*a),o+":"+(a<10?"0"+a:a)+":"+(i<10?"0"+i:i)):h(e,t,r);var i,a,o}}},function(e,t,n,r,i){!function(){"use strict";var f={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function p(e){return function(e,t){var n,r,i,a,o,s,l,c,u=1,d=e.length,h="";for(r=0;r<d;r++)if("string"==typeof e[r])h+=e[r];else if("object"==typeof e[r]){if((a=e[r]).keys)for(n=t[u],i=0;i<a.keys.length;i++){if(null==n)throw new Error(p('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[i],a.keys[i-1]));n=n[a.keys[i]]}else n=a.param_no?t[a.param_no]:t[u++];if(f.not_type.test(a.type)&&f.not_primitive.test(a.type)&&n instanceof Function&&(n=n()),f.numeric_arg.test(a.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(p("[sprintf] expecting number but found %T",n));switch(f.number.test(a.type)&&(l=0<=n),a.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,a.width?parseInt(a.width):0);break;case"e":n=a.precision?parseFloat(n).toExponential(a.precision):parseFloat(n).toExponential();break;case"f":n=a.precision?parseFloat(n).toFixed(a.precision):parseFloat(n);break;case"g":n=a.precision?String(Number(n.toPrecision(a.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=a.precision?n.substring(0,a.precision):n;break;case"t":n=String(!!n),n=a.precision?n.substring(0,a.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=a.precision?n.substring(0,a.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=a.precision?n.substring(0,a.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}f.json.test(a.type)?h+=n:(!f.number.test(a.type)||l&&!a.sign?c="":(c=l?"+":"-",n=n.toString().replace(f.sign,"")),o=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",s=a.width-(c+n).length,s=a.width&&0<s?o.repeat(s):"",h+=a.align?c+n+s:"0"===o?c+s+n:s+c+n)}return h}(function(e){if(l[e])return l[e];for(var t,n=e,r=[],i=0;n;){if(null!==(t=f.text.exec(n)))r.push(t[0]);else if(null!==(t=f.modulo.exec(n)))r.push("%");else{if(null===(t=f.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var a=[],o=t[2],s=[];if(null===(s=f.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=f.key_access.exec(o)))a.push(s[1]);else{if(null===(s=f.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(s[1])}t[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=r}(e),arguments)}function e(e,t){return p.apply(null,[e].concat(t||[]))}var l=Object.create(null);void 0!==n&&(n.sprintf=p,n.vsprintf=e),"undefined"!=typeof window&&(window.sprintf=p,window.vsprintf=e)}()},function(e,t,n,r,i){r();const a=e(9),o=e(178),s=e(186),l=e(187),c=e(190),u=e(191),d=e(189);class h extends s.CompositeTicker{constructor(e){super(e)}static init_DatetimeTicker(){this.override({num_minor_ticks:0,tickers:()=>[new o.AdaptiveTicker({mantissas:[1,2,5],base:10,min_interval:0,max_interval:500*d.ONE_MILLI,num_minor_ticks:0}),new o.AdaptiveTicker({mantissas:[1,2,5,10,15,20,30],base:60,min_interval:d.ONE_SECOND,max_interval:30*d.ONE_MINUTE,num_minor_ticks:0}),new o.AdaptiveTicker({mantissas:[1,2,4,6,8,12],base:24,min_interval:d.ONE_HOUR,max_interval:12*d.ONE_HOUR,num_minor_ticks:0}),new l.DaysTicker({days:a.range(1,32)}),new l.DaysTicker({days:a.range(1,31,3)}),new l.DaysTicker({days:[1,8,15,22]}),new l.DaysTicker({days:[1,15]}),new c.MonthsTicker({months:a.range(0,12,1)}),new c.MonthsTicker({months:a.range(0,12,2)}),new c.MonthsTicker({months:a.range(0,12,4)}),new c.MonthsTicker({months:a.range(0,12,6)}),new u.YearsTicker({})]})}}(n.DatetimeTicker=h).__name__="DatetimeTicker",h.init_DatetimeTicker()},function(e,t,n,r,i){r();const a=e(179),l=e(9);class o extends a.ContinuousTicker{constructor(e){super(e)}static init_CompositeTicker(){this.define(({Array:e,Ref:t})=>({tickers:[e(t(a.ContinuousTicker)),[]]}))}get min_intervals(){return this.tickers.map(e=>e.get_min_interval())}get max_intervals(){return this.tickers.map(e=>e.get_max_interval())}get_min_interval(){return this.min_intervals[0]}get_max_interval(){return this.max_intervals[0]}get_best_ticker(e,t,n){const r=t-e,i=this.get_ideal_interval(e,t,n),a=[l.sorted_index(this.min_intervals,i)-1,l.sorted_index(this.max_intervals,i)],o=[this.min_intervals[a[0]],this.max_intervals[a[1]]].map(e=>Math.abs(n-r/e));let s;if(l.is_empty(o.filter(e=>!isNaN(e))))s=this.tickers[0];else{const e=a[l.argmin(o)];s=this.tickers[e]}return s}get_interval(e,t,n){return this.get_best_ticker(e,t,n).get_interval(e,t,n)}get_ticks_no_defaults(e,t,n,r){return this.get_best_ticker(e,t,r).get_ticks_no_defaults(e,t,n,r)}}(n.CompositeTicker=o).__name__="CompositeTicker",o.init_CompositeTicker()},function(e,t,n,r,i){r();const a=e(188),s=e(189),l=e(9);class o extends a.SingleIntervalTicker{constructor(e){super(e)}static init_DaysTicker(){this.define(({Int:e,Array:t})=>({days:[t(e),[]]})),this.override({num_minor_ticks:0})}initialize(){super.initialize();var e=this.days;1<e.length?this.interval=(e[1]-e[0])*s.ONE_DAY:this.interval=31*s.ONE_DAY}get_ticks_no_defaults(t,n,e,r){const i=function(e,t){const n=s.last_month_no_later_than(new Date(e)),r=s.last_month_no_later_than(new Date(t));r.setUTCMonth(r.getUTCMonth()+1);const i=[],a=n;for(;i.push(s.copy_date(a)),a.setUTCMonth(a.getUTCMonth()+1),!(a>r););return i}(t,n),a=this.days,o=this.interval;return{major:l.concat(i.map(e=>((e,t)=>{const n=e.getUTCMonth(),r=[];for(const i of a){const a=s.copy_date(e);a.setUTCDate(i),new Date(a.getTime()+t/2).getUTCMonth()==n&&r.push(a)}return r})(e,o))).map(e=>e.getTime()).filter(e=>t<=e&&e<=n),minor:[]}}}(n.DaysTicker=o).__name__="DaysTicker",o.init_DaysTicker()},function(e,t,n,r,i){r();e=e(179);class a extends e.ContinuousTicker{constructor(e){super(e)}static init_SingleIntervalTicker(){this.define(({Number:e})=>({interval:[e]}))}get_interval(e,t,n){return this.interval}get_min_interval(){return this.interval}get_max_interval(){return this.interval}}(n.SingleIntervalTicker=a).__name__="SingleIntervalTicker",a.init_SingleIntervalTicker()},function(e,t,n,r,i){function a(e){return new Date(e.getTime())}function o(e){const t=a(e);return t.setUTCDate(1),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t}r(),n.ONE_MILLI=1,n.ONE_SECOND=1e3,n.ONE_MINUTE=60*n.ONE_SECOND,n.ONE_HOUR=60*n.ONE_MINUTE,n.ONE_DAY=24*n.ONE_HOUR,n.ONE_MONTH=30*n.ONE_DAY,n.ONE_YEAR=365*n.ONE_DAY,n.copy_date=a,n.last_month_no_later_than=o,n.last_year_no_later_than=function(e){const t=o(e);return t.setUTCMonth(0),t}},function(e,t,n,r,i){r();const a=e(188),o=e(189),s=e(9);class l extends a.SingleIntervalTicker{constructor(e){super(e)}static init_MonthsTicker(){this.define(({Int:e,Array:t})=>({months:[t(e),[]]}))}initialize(){super.initialize();var e=this.months;1<e.length?this.interval=(e[1]-e[0])*o.ONE_MONTH:this.interval=12*o.ONE_MONTH}get_ticks_no_defaults(t,n,e,r){const i=function(e,t){const n=o.last_year_no_later_than(new Date(e)),r=o.last_year_no_later_than(new Date(t));r.setUTCFullYear(r.getUTCFullYear()+1);const i=[],a=n;for(;i.push(o.copy_date(a)),a.setUTCFullYear(a.getUTCFullYear()+1),!(a>r););return i}(t,n),a=this.months;return{major:s.concat(i.map(n=>a.map(e=>{const t=o.copy_date(n);return t.setUTCMonth(e),t}))).map(e=>e.getTime()).filter(e=>t<=e&&e<=n),minor:[]}}}(n.MonthsTicker=l).__name__="MonthsTicker",l.init_MonthsTicker()},function(e,t,n,r,i){r();const a=e(177),o=e(188),s=e(189);class l extends o.SingleIntervalTicker{constructor(e){super(e)}initialize(){super.initialize(),this.interval=s.ONE_YEAR,this.basic_ticker=new a.BasicTicker({num_minor_ticks:0})}get_ticks_no_defaults(t,n,e,r){var i=s.last_year_no_later_than(new Date(t)).getUTCFullYear(),a=s.last_year_no_later_than(new Date(n)).getUTCFullYear();return{major:this.basic_ticker.get_ticks_no_defaults(i,a,e,r).major.map(e=>Date.UTC(e,0,1)).filter(e=>t<=e&&e<=n),minor:[]}}}(n.YearsTicker=l).__name__="YearsTicker"},function(e,t,n,r,i){r();const a=e(173),o=e(193),s=e(194);class l extends a.ContinuousAxisView{}(n.LogAxisView=l).__name__="LogAxisView";class c extends a.ContinuousAxis{constructor(e){super(e)}static init_LogAxis(){this.prototype.default_view=l,this.override({ticker:()=>new s.LogTicker,formatter:()=>new o.LogTickFormatter})}}(n.LogAxis=c).__name__="LogAxis",c.init_LogAxis()},function(e,t,n,r,i){r();const a=e(166),o=e(176),s=e(194),l=e(167),{log:c,round:u}=Math;class d extends a.TickFormatter{constructor(e){super(e)}static init_LogTickFormatter(){this.define(({Ref:e,Nullable:t})=>({ticker:[t(e(s.LogTicker)),null]}))}initialize(){super.initialize(),this.basic_formatter=new o.BasicTickFormatter}format_graphics(e,t){var n;if(0==e.length)return[];const r=null!==(n=null===(n=this.ticker)||void 0===n?void 0:n.base)&&void 0!==n?n:10,i=this._exponents(e,r);return null==i?this.basic_formatter.format_graphics(e,t):i.map(e=>{var t=new l.TextBox({text:o.unicode_replace(`${r}`)}),e=new l.TextBox({text:o.unicode_replace(`${e}`)});return new l.BaseExpo(t,e)})}_exponents(e,t){let n=null;const r=[];for(const i of e){const e=u(c(i)/c(t));if(n==e)return null;n=e,r.push(e)}return r}doFormat(e,t){var n;if(0==e.length)return[];const r=null!==(n=null===(n=this.ticker)||void 0===n?void 0:n.base)&&void 0!==n?n:10,i=this._exponents(e,r);return null==i?this.basic_formatter.doFormat(e,t):i.map(e=>o.unicode_replace(`${r}^${e}`))}}n.LogTickFormatter=d,d.__name__="LogTickFormatter",d.init_LogTickFormatter()},function(e,t,n,r,i){r();const a=e(178),d=e(9);class o extends a.AdaptiveTicker{constructor(e){super(e)}static init_LogTicker(){this.override({mantissas:[1,5]})}get_ticks_no_defaults(t,n,r,e){const i=this.num_minor_ticks,a=[],o=this.base,s=Math.log(t)/Math.log(o),l=Math.log(n)/Math.log(o),c=l-s;let u;if(isFinite(c))if(c<2){const r=this.get_interval(t,n,e),o=Math.floor(t/r),s=Math.ceil(n/r);if(u=d.range(o,s+1).filter(e=>0!=e).map(e=>e*r).filter(e=>t<=e&&e<=n),0<i&&0<u.length){const t=r/i,n=d.range(0,i).map(e=>e*t);for(const t of n.slice(1))a.push(u[0]-t);for(const t of u)for(const r of n)a.push(t+r)}}else{const t=Math.ceil(.999999*s),n=Math.floor(1.000001*l),r=Math.ceil((n-t)/9);if(u=d.range(t-1,n+1,r).map(e=>o**e),0<i&&0<u.length){const t=o**r/i,n=d.range(1,i+1).map(e=>e*t);for(const t of n)a.push(u[0]/t);a.push(u[0]);for(const t of u)for(const r of n)a.push(t*r)}}else u=[];return{major:u.filter(e=>t<=e&&e<=n),minor:a.filter(e=>t<=e&&e<=n)}}}(n.LogTicker=o).__name__="LogTicker",o.init_LogTicker()},function(e,t,n,r,i){r();const a=e(163),o=e(175),s=e(196),l=e(197);class c extends a.AxisView{}n.MercatorAxisView=c,c.__name__="MercatorAxisView";class u extends o.LinearAxis{constructor(e){super(e)}static init_MercatorAxis(){this.prototype.default_view=c,this.override({ticker:()=>new l.MercatorTicker({dimension:"lat"}),formatter:()=>new s.MercatorTickFormatter({dimension:"lat"})})}}(n.MercatorAxis=u).__name__="MercatorAxis",u.init_MercatorAxis()},function(e,t,n,r,i){r();const a=e(176),o=e(20),s=e(65);class l extends a.BasicTickFormatter{constructor(e){super(e)}static init_MercatorTickFormatter(){this.define(({Nullable:e})=>({dimension:[e(o.LatLon),null]}))}doFormat(t,n){if(null==this.dimension)throw new Error("MercatorTickFormatter.dimension not configured");if(0==t.length)return[];const r=t.length,i=new Array(r);if("lon"==this.dimension)for(let e=0;e<r;e++){const[r]=s.wgs84_mercator.invert(t[e],n.loc);i[e]=r}else for(let e=0;e<r;e++){const[,r]=s.wgs84_mercator.invert(n.loc,t[e]);i[e]=r}return super.doFormat(i,n)}}(n.MercatorTickFormatter=l).__name__="MercatorTickFormatter",l.init_MercatorTickFormatter()},function(e,t,n,r,i){r();const a=e(177),o=e(20),u=e(65);class s extends a.BasicTicker{constructor(e){super(e)}static init_MercatorTicker(){this.define(({Nullable:e})=>({dimension:[e(o.LatLon),null]}))}get_ticks_no_defaults(e,t,n,r){if(null==this.dimension)throw new Error(`${this}.dimension wasn't configured`);return[e,t]=u.clip_mercator(e,t,this.dimension),"lon"==this.dimension?this._get_ticks_lon(e,t,n,r):this._get_ticks_lat(e,t,n,r)}_get_ticks_lon(e,t,n,r){const[i]=u.wgs84_mercator.invert(e,n),[a,o]=u.wgs84_mercator.invert(t,n),s=super.get_ticks_no_defaults(i,a,n,r),l=[];for(const e of s.major)if(u.in_bounds(e,"lon")){const[t]=u.wgs84_mercator.compute(e,o);l.push(t)}const c=[];for(const e of s.minor)if(u.in_bounds(e,"lon")){const[t]=u.wgs84_mercator.compute(e,o);c.push(t)}return{major:l,minor:c}}_get_ticks_lat(e,t,n,r){const[,i]=u.wgs84_mercator.invert(n,e),[a,o]=u.wgs84_mercator.invert(n,t),s=super.get_ticks_no_defaults(i,o,n,r),l=[];for(const e of s.major)if(u.in_bounds(e,"lat")){const[,t]=u.wgs84_mercator.compute(a,e);l.push(t)}const c=[];for(const e of s.minor)if(u.in_bounds(e,"lat")){const[,t]=u.wgs84_mercator.compute(a,e);c.push(t)}return{major:l,minor:c}}}n.MercatorTicker=s,s.__name__="MercatorTicker",s.init_MercatorTicker()},function(e,t,n,r,i){r(),i("AdaptiveTicker",e(178).AdaptiveTicker),i("BasicTicker",e(177).BasicTicker),i("CategoricalTicker",e(171).CategoricalTicker),i("CompositeTicker",e(186).CompositeTicker),i("ContinuousTicker",e(179).ContinuousTicker),i("DatetimeTicker",e(185).DatetimeTicker),i("DaysTicker",e(187).DaysTicker),i("FixedTicker",e(199).FixedTicker),i("LogTicker",e(194).LogTicker),i("MercatorTicker",e(197).MercatorTicker),i("MonthsTicker",e(190).MonthsTicker),i("SingleIntervalTicker",e(188).SingleIntervalTicker),i("Ticker",e(165).Ticker),i("YearsTicker",e(191).YearsTicker),i("BinnedTicker",e(200).BinnedTicker)},function(e,t,n,r,i){r();e=e(179);class a extends e.ContinuousTicker{constructor(e){super(e)}static init_FixedTicker(){this.define(({Number:e,Array:t})=>({ticks:[t(e),[]],minor_ticks:[t(e),[]]}))}get_ticks_no_defaults(e,t,n,r){return{major:this.ticks,minor:this.minor_ticks}}get_interval(e,t,n){return 0}get_min_interval(){return 0}get_max_interval(){return 0}}n.FixedTicker=a,a.__name__="FixedTicker",a.init_FixedTicker()},function(e,t,n,r,i){r();const a=e(165),o=e(201),h=e(12);class s extends a.Ticker{constructor(e){super(e)}static init_BinnedTicker(){this.define(({Number:e,Ref:t,Or:n,Auto:r})=>({mapper:[t(o.ScanningColorMapper)],num_major_ticks:[n(e,r),8]}))}get_ticks(e,t,n,r){const{binning:i}=this.mapper.metrics,a=Math.max(0,h.left_edge_index(e,i)),o=Math.min(h.left_edge_index(t,i)+1,i.length-1),s=[];for(let e=a;e<=o;e++)s.push(i[e]);const{num_major_ticks:l}=this,c=[],u="auto"==l?s.length:l,d=Math.max(1,Math.floor(s.length/u));for(let e=0;e<s.length;e+=d)c.push(s[e]);return{major:c,minor:[]}}}(n.BinnedTicker=s).__name__="BinnedTicker",s.init_BinnedTicker()},function(e,t,n,r,i){r();const a=e(202),o=e(12);class s extends a.ContinuousColorMapper{constructor(e){super(e)}cmap(e,t,n,r,i){return e<i.binning[0]?n:e>i.binning[i.binning.length-1]?r:t[o.left_edge_index(e,i.binning)]}}(n.ScanningColorMapper=s).__name__="ScanningColorMapper"},function(e,t,n,r,i){r();const a=e(203),l=e(61),c=e(9),o=e(8);class s extends a.ColorMapper{constructor(e){super(e),this._scan_data=null}static init_ContinuousColorMapper(){this.define(({Number:e,String:t,Ref:n,Color:r,Or:i,Tuple:a,Array:o,Nullable:s})=>({high:[s(e),null],low:[s(e),null],high_color:[s(r),null],low_color:[s(r),null],domain:[o(a(n(l.GlyphRenderer),i(t,o(t)))),[]]}))}connect_signals(){super.connect_signals();const e=()=>{for(var[e]of this.domain)this.connect(e.view.change,()=>this.update_data()),this.connect(e.data_source.selected.change,()=>this.update_data())};this.connect(this.properties.domain.change,()=>e()),e()}update_data(){var{domain:e,palette:t}=this,e=[...this._collect(e)];this._scan_data=this.scan(e,t.length),this.metrics_change.emit(),this.change.emit()}get metrics(){return null==this._scan_data&&this.update_data(),this._scan_data}*_collect(n){for(var[r,e]of n)for(const n of o.isArray(e)?e:[e]){let t=r.data_source.get_column(n);t=r.view.indices.select(t);var i=r.view.masked,a=r.data_source.selected.indices;let e;if(null!=i&&0<a.length?e=c.intersection([...i],a):null!=i?e=[...i]:0<a.length&&(e=a),null!=e&&(t=c.map(e,e=>t[e])),0<t.length&&!o.isNumber(t[0]))for(const n of t)yield*n;else yield*t}}_v_compute(n,r,i,e){var{nan_color:a}=e;let{low_color:o,high_color:s}=e;null==o&&(o=i[0]),null==s&&(s=i[i.length-1]);var{domain:e}=this,e=c.is_empty(e)?n:[...this._collect(e)];this._scan_data=this.scan(e,i.length),this.metrics_change.emit();for(let e=0,t=n.length;e<t;e++){const c=n[e];isNaN(c)?r[e]=a:r[e]=this.cmap(c,i,o,s,this._scan_data)}}_colors(e){return Object.assign(Object.assign({},super._colors(e)),{low_color:null!=this.low_color?e(this.low_color):void 0,high_color:null!=this.high_color?e(this.high_color):void 0})}}(n.ContinuousColorMapper=s).__name__="ContinuousColorMapper",s.init_ContinuousColorMapper()},function(e,t,n,r,i){r();const a=e(204),o=e(15),s=e(24),l=e(22),c=e(27);function u(e){return l.encode_rgba(l.color2rgba(e))}function d(n){const r=new Uint32Array(n.length);for(let e=0,t=n.length;e<t;e++)r[e]=u(n[e]);return r}n._convert_color=u,n._convert_palette=d;class h extends a.Mapper{constructor(e){super(e)}initialize(){super.initialize(),this.metrics_change=new o.Signal0(this,"metrics_change")}static init_ColorMapper(){this.define(({Color:e,Array:t})=>({palette:[t(e)],nan_color:[e,"gray"]}))}v_compute(e){var t=new Array(e.length);return this._v_compute(e,t,this.palette,this._colors(e=>e)),t}get rgba_mapper(){const n=this,r=d(this.palette),i=this._colors(u);return{v_compute(e){var t=new s.ColorArray(e.length);return n._v_compute(e,t,r,i),new Uint8ClampedArray(c.to_big_endian(t).buffer)}}}_colors(e){return{nan_color:e(this.nan_color)}}}(n.ColorMapper=h).__name__="ColorMapper",h.init_ColorMapper()},function(e,t,n,r,i){r();e=e(149);class a extends e.Transform{constructor(e){super(e)}compute(e){throw new Error("mapping single values is not supported")}}(n.Mapper=a).__name__="Mapper"},function(e,t,n,r,i){r(),i("BasicTickFormatter",e(176).BasicTickFormatter),i("CategoricalTickFormatter",e(172).CategoricalTickFormatter),i("DatetimeTickFormatter",e(180).DatetimeTickFormatter),i("FuncTickFormatter",e(206).FuncTickFormatter),i("LogTickFormatter",e(193).LogTickFormatter),i("MercatorTickFormatter",e(196).MercatorTickFormatter),i("NumeralTickFormatter",e(207).NumeralTickFormatter),i("PrintfTickFormatter",e(208).PrintfTickFormatter),i("TickFormatter",e(166).TickFormatter)},function(e,t,n,r,i){r();const a=e(166),o=e(13),s=e(34);class l extends a.TickFormatter{constructor(e){super(e)}static init_FuncTickFormatter(){this.define(({Unknown:e,String:t,Dict:n})=>({args:[n(e),{}],code:[t,""]}))}get names(){return o.keys(this.args)}get values(){return o.values(this.args)}_make_func(){var e=s.use_strict(this.code);return new Function("tick","index","ticks",...this.names,e)}doFormat(e,t){const r=this._make_func().bind({});return e.map((e,t,n)=>`${r(e,t,n,...this.values)}`)}}(n.FuncTickFormatter=l).__name__="FuncTickFormatter",l.init_FuncTickFormatter()},function(e,t,n,r,i){r();const a=e(1).__importStar(e(183)),o=e(166),s=e(20);class l extends o.TickFormatter{constructor(e){super(e)}static init_NumeralTickFormatter(){this.define(({String:e})=>({format:[e,"0,0"],language:[e,"en"],rounding:[s.RoundingFunction,"round"]}))}get _rounding_fn(){switch(this.rounding){case"round":case"nearest":return Math.round;case"floor":case"rounddown":return Math.floor;case"ceil":case"roundup":return Math.ceil}}doFormat(e,t){const{format:n,language:r,_rounding_fn:i}=this;return e.map(e=>a.format(e,n,r,i))}}(n.NumeralTickFormatter=l).__name__="NumeralTickFormatter",l.init_NumeralTickFormatter()},function(e,t,n,r,i){r();const a=e(166),o=e(182);class s extends a.TickFormatter{constructor(e){super(e)}static init_PrintfTickFormatter(){this.define(({String:e})=>({format:[e,"%s"]}))}doFormat(e,t){return e.map(e=>o.sprintf(this.format,e))}}(n.PrintfTickFormatter=s).__name__="PrintfTickFormatter",s.init_PrintfTickFormatter()},function(e,t,n,r,i){r(),i("CategoricalColorMapper",e(210).CategoricalColorMapper),i("CategoricalMarkerMapper",e(212).CategoricalMarkerMapper),i("CategoricalPatternMapper",e(213).CategoricalPatternMapper),i("ContinuousColorMapper",e(202).ContinuousColorMapper),i("ColorMapper",e(203).ColorMapper),i("LinearColorMapper",e(214).LinearColorMapper),i("LogColorMapper",e(215).LogColorMapper),i("ScanningColorMapper",e(201).ScanningColorMapper),i("EqHistColorMapper",e(216).EqHistColorMapper)},function(e,t,n,r,i){r();const a=e(211),o=e(203),s=e(104);class l extends o.ColorMapper{constructor(e){super(e)}static init_CategoricalColorMapper(){this.define(({Number:e,Nullable:t})=>({factors:[s.FactorSeq],start:[e,0],end:[t(e),null]}))}_v_compute(e,t,n,{nan_color:r}){a.cat_v_compute(e,this.factors,n,t,this.start,this.end,r)}}(n.CategoricalColorMapper=l).__name__="CategoricalColorMapper",l.init_CategoricalColorMapper()},function(e,t,n,r,i){r();const d=e(12),h=e(8);function f(n,r){if(n.length!=r.length)return!1;for(let e=0,t=n.length;e<t;e++)if(n[e]!==r[e])return!1;return!0}n._cat_equals=f,n.cat_v_compute=function(i,a,o,s,l,c,u){var e=i.length;for(let r=0;r<e;r++){let e,t,n=i[r];e=h.isString(n)?d.index_of(a,n):(null!=l?n=null!=c?n.slice(l,c):n.slice(l):null!=c&&(n=n.slice(0,c)),1==n.length?d.index_of(a,n[0]):d.find_index(a,e=>f(e,n))),t=e<0||e>=o.length?u:o[e],s[r]=t}}},function(e,t,n,r,i){r();const a=e(211),o=e(104),s=e(204),l=e(20);class c extends s.Mapper{constructor(e){super(e)}static init_CategoricalMarkerMapper(){this.define(({Number:e,Array:t,Nullable:n})=>({factors:[o.FactorSeq],markers:[t(l.MarkerType)],start:[e,0],end:[n(e),null],default_value:[l.MarkerType,"circle"]}))}v_compute(e){var t=new Array(e.length);return a.cat_v_compute(e,this.factors,this.markers,t,this.start,this.end,this.default_value),t}}(n.CategoricalMarkerMapper=c).__name__="CategoricalMarkerMapper",c.init_CategoricalMarkerMapper()},function(e,t,n,r,i){r();const a=e(211),o=e(104),s=e(204),l=e(20);class c extends s.Mapper{constructor(e){super(e)}static init_CategoricalPatternMapper(){this.define(({Number:e,Array:t,Nullable:n})=>({factors:[o.FactorSeq],patterns:[t(l.HatchPatternType)],start:[e,0],end:[n(e),null],default_value:[l.HatchPatternType," "]}))}v_compute(e){var t=new Array(e.length);return a.cat_v_compute(e,this.factors,this.patterns,t,this.start,this.end,this.default_value),t}}(n.CategoricalPatternMapper=c).__name__="CategoricalPatternMapper",c.init_CategoricalPatternMapper()},function(e,t,n,r,i){r();const a=e(202),o=e(12);class s extends a.ContinuousColorMapper{constructor(e){super(e)}scan(e,t){var n=null!=this.low?this.low:o.min(e),e=null!=this.high?this.high:o.max(e);return{max:e,min:n,norm_factor:1/(e-n),normed_interval:1/t}}cmap(e,t,n,r,i){var a=t.length-1;if(e==i.max)return t[a];e=(e-i.min)*i.norm_factor,i=Math.floor(e/i.normed_interval);return i<0?n:a<i?r:t[i]}}(n.LinearColorMapper=s).__name__="LinearColorMapper"},function(e,t,n,r,i){r();const a=e(202),o=e(12);class s extends a.ContinuousColorMapper{constructor(e){super(e)}scan(e,t){var n=null!=this.low?this.low:o.min(e),e=null!=this.high?this.high:o.max(e);return{max:e,min:n,scale:t/(Math.log(e)-Math.log(n))}}cmap(e,t,n,r,i){var a=t.length-1;if(e>i.max)return r;if(e==i.max)return t[a];if(e<i.min)return n;e=Math.log(e)-Math.log(i.min);let o=Math.floor(e*i.scale);return o>a&&(o=a),t[o]}}(n.LogColorMapper=s).__name__="LogColorMapper"},function(e,t,n,r,i){r();const a=e(201),m=e(12),g=e(9),_=e(19);class o extends a.ScanningColorMapper{constructor(e){super(e)}static init_EqHistColorMapper(){this.define(({Int:e})=>({bins:[e,65536]}))}scan(e,n){const r=null!=this.low?this.low:m.min(e),t=null!=this.high?this.high:m.max(e),i=this.bins,a=g.linspace(r,t,i+1),o=m.bin_counts(e,a),s=new Array(i);for(let e=0,t=a.length;e<t-1;e++){const n=a[e],r=a[e+1];s[e]=(n+r)/2}const l=g.cumsum(o),c=l[l.length-1],u=m.map(l,e=>e/c);let d=n-1,h=[],f=0,p=2*n;for(;d!=n&&f<4&&0!=d;){const e=p/d;if(1e3<e)break;p=Math.round(Math.max(n*e,n));const r=g.range(0,p),t=m.map(u,e=>e*(p-1));h=m.interpolate(r,t,s),d=g.uniq(h).length-1,f++}if(0==d){h=[r,t];for(let e=0;e<n-1;e++)h.push(t)}else h=h.slice(h.length-n-1),d!=n&&_.logger.warn("EqHistColorMapper warning: Histogram equalization did not converge.");return h[0]=r,h[h.length-1]=t,{min:r,max:t,binning:h}}}(n.EqHistColorMapper=o).__name__="EqHistColorMapper",o.init_EqHistColorMapper()},function(e,t,n,r,i){r(),i("CategoricalScale",e(145).CategoricalScale),i("ContinuousScale",e(158).ContinuousScale),i("LinearScale",e(218).LinearScale),i("LinearInterpolationScale",e(219).LinearInterpolationScale),i("LogScale",e(157).LogScale),i("Scale",e(146).Scale)},function(e,t,n,r,i){r();e=e(158);class a extends e.ContinuousScale{constructor(e){super(e)}get s_compute(){const[t,n]=this._linear_compute_state();return e=>t*e+n}compute(e){return this._linear_compute(e)}v_compute(e){return this._linear_v_compute(e)}invert(e){return this._linear_invert(e)}v_invert(e){return this._linear_v_invert(e)}}(n.LinearScale=a).__name__="LinearScale"},function(e,t,n,r,i){r();const a=e(146),c=e(12);class o extends a.Scale{constructor(e){super(e)}static init_LinearInterpolationScale(){this.internal(({Arrayable:e})=>({binning:[e]}))}get s_compute(){throw new Error("not implemented")}compute(e){return e}v_compute(e){const{binning:r}=this,{start:t,end:n}=this.source_range,i=t,a=n,o=r.length,s=(n-t)/(o-1),l=new Float64Array(o);for(let e=0;e<o;e++)l[e]=t+e*s;e=c.map(e,e=>{if(e<i)return i;if(e>a)return a;var t=c.left_edge_index(e,r),n=r[t],e=(e-n)/(r[t+1]-n),n=l[t];return n+e*(l[t+1]-n)});return this._linear_v_compute(e)}invert(e){return e}v_invert(e){return new Float64Array(e)}}(n.LinearInterpolationScale=o).__name__="LinearInterpolationScale",o.init_LinearInterpolationScale()},function(e,t,n,r,i){r(),i("DataRange",e(160).DataRange),i("DataRange1d",e(159).DataRange1d),i("FactorRange",e(104).FactorRange),i("Range",e(105).Range),i("Range1d",e(156).Range1d)},function(e,t,n,r,i){r();r=e(141);i("Sizeable",r.Sizeable),i("SizingPolicy",r.SizingPolicy);r=e(142);i("Layoutable",r.Layoutable),i("LayoutItem",r.LayoutItem);r=e(222);i("HStack",r.HStack),i("VStack",r.VStack);r=e(223);i("Grid",r.Grid),i("Row",r.Row),i("Column",r.Column);e=e(224);i("ContentBox",e.ContentBox),i("VariadicBox",e.VariadicBox)},function(e,t,n,r,i){r();const a=e(142),g=e(99);class o extends a.Layoutable{constructor(){super(...arguments),this.children=[]}*[Symbol.iterator](){yield*this.children}}(n.Stack=o).__name__="Stack";class s extends o{_measure(e){let t=0,n=0;for(const e of this.children){var r=e.measure({width:0,height:0});t+=r.width,n=Math.max(n,r.height)}return{width:t,height:n}}_set_geometry(e,t){super._set_geometry(e,t);var n=this.absolute?e.top:0;let r=this.absolute?e.left:0;var{height:i}=e;for(const e of this.children){const{width:t}=e.measure({width:0,height:0});e.set_geometry(new g.BBox({left:r,width:t,top:n,height:i})),r+=t}}}(n.HStack=s).__name__="HStack";class l extends o{_measure(e){let t=0,n=0;for(const e of this.children){var r=e.measure({width:0,height:0});t=Math.max(t,r.width),n+=r.height}return{width:t,height:n}}_set_geometry(e,t){super._set_geometry(e,t);var n=this.absolute?e.left:0;let r=this.absolute?e.top:0;var{width:i}=e;for(const e of this.children){const{height:t}=e.measure({width:0,height:0});e.set_geometry(new g.BBox({top:r,height:t,left:n,width:i})),r+=t}}}(n.VStack=l).__name__="VStack";class c extends a.Layoutable{constructor(){super(...arguments),this.children=[]}*[Symbol.iterator](){yield*this.children}_measure(t){const{width_policy:n,height_policy:r}=this.sizing,{min:i,max:a}=Math;let o=0,s=0;for(const n of this.children){const{width:r,height:i}=n.measure(t);o=a(o,r),s=a(s,i)}return{width:(()=>{var{width:e}=this.sizing;if(t.width==1/0)return"fixed"==n&&null!=e?e:o;switch(n){case"fixed":return null!=e?e:o;case"min":return o;case"fit":return null!=e?i(t.width,e):t.width;case"max":return null!=e?a(t.width,e):t.width}})(),height:(()=>{var{height:e}=this.sizing;if(t.height==1/0)return"fixed"==r&&null!=e?e:s;switch(r){case"fixed":return null!=e?e:s;case"min":return s;case"fit":return null!=e?i(t.height,e):t.height;case"max":return null!=e?a(t.height,e):t.height}})()}}_set_geometry(e,t){super._set_geometry(e,t);const n=this.absolute?e:e.relative(),{left:r,right:i,top:a,bottom:o}=n,s=Math.round(n.vcenter),l=Math.round(n.hcenter);for(const t of this.children){const{margin:n,halign:c,valign:u}=t.sizing,{width:d,height:h,inner:f}=t.measure(e),p=(()=>{switch(`${u}_${c}`){case"start_start":return new g.BBox({left:r+n.left,top:a+n.top,width:d,height:h});case"start_center":return new g.BBox({hcenter:l,top:a+n.top,width:d,height:h});case"start_end":return new g.BBox({right:i-n.right,top:a+n.top,width:d,height:h});case"center_start":return new g.BBox({left:r+n.left,vcenter:s,width:d,height:h});case"center_center":return new g.BBox({hcenter:l,vcenter:s,width:d,height:h});case"center_end":return new g.BBox({right:i-n.right,vcenter:s,width:d,height:h});case"end_start":return new g.BBox({left:r+n.left,bottom:o-n.bottom,width:d,height:h});case"end_center":return new g.BBox({hcenter:l,bottom:o-n.bottom,width:d,height:h});case"end_end":return new g.BBox({right:i-n.right,bottom:o-n.bottom,width:d,height:h})}})(),m=null==f?p:new g.BBox({left:p.left+f.left,top:p.top+f.top,right:p.right-f.right,bottom:p.bottom-f.bottom});t.set_geometry(p,m)}}}(n.NodeLayout=c).__name__="NodeLayout"},function(e,t,n,r,i){r();const w=e(141),a=e(142),d=e(8),_=e(99),h=e(9),{max:T,round:A}=Math;class l{constructor(e){this.def=e,this._map=new Map}get(e){let t=this._map.get(e);return void 0===t&&(t=this.def(),this._map.set(e,t)),t}apply(e,t){var n=this.get(e);this._map.set(e,t(n))}}l.__name__="DefaultMap";class f{constructor(){this._items=[],this._nrows=0,this._ncols=0}get nrows(){return this._nrows}get ncols(){return this._ncols}add(e,t){var{r1:n,c1:r}=e;this._nrows=T(this._nrows,n+1),this._ncols=T(this._ncols,r+1),this._items.push({span:e,data:t})}at(t,n){return this._items.filter(({span:e})=>e.r0<=t&&t<=e.r1&&e.c0<=n&&n<=e.c1).map(({data:e})=>e)}row(t){return this._items.filter(({span:e})=>e.r0<=t&&t<=e.r1).map(({data:e})=>e)}col(t){return this._items.filter(({span:e})=>e.c0<=t&&t<=e.c1).map(({data:e})=>e)}foreach(e){for(var{span:t,data:n}of this._items)e(t,n)}map(e){const t=new f;for(var{span:n,data:r}of this._items)t.add(n,e(n,r));return t}}f.__name__="Container";class o extends a.Layoutable{constructor(e=[]){super(),this.items=e,this.rows="auto",this.cols="auto",this.spacing=0}*[Symbol.iterator](){for(var{layout:e}of this.items)yield e}is_width_expanding(){if(super.is_width_expanding())return!0;if("fixed"==this.sizing.width_policy)return!1;var{cols:e}=this._state;return h.some(e,e=>"max"==e.policy)}is_height_expanding(){if(super.is_height_expanding())return!0;if("fixed"==this.sizing.height_policy)return!1;var{rows:e}=this._state;return h.some(e,e=>"max"==e.policy)}_init(){var t,n;super._init();const r=new f;for(const{layout:c,row:t,col:u,row_span:n,col_span:i}of this.items)if(c.sizing.visible){const a=t,d=u,o=t+(null!=n?n:1)-1,h=u+(null!=i?i:1)-1;r.add({r0:a,c0:d,r1:o,c1:h},c)}const{nrows:i,ncols:a}=r,o=new Array(i);for(let e=0;e<i;e++){const n=(t=void 0,null==(t=d.isPlainObject(this.rows)?null!==(t=this.rows[e])&&void 0!==t?t:this.rows["*"]:this.rows)?{policy:"auto"}:d.isNumber(t)?{policy:"fixed",height:t}:d.isString(t)?{policy:t}:t),i=null!==(t=n.align)&&void 0!==t?t:"auto";if("fixed"==n.policy)o[e]={policy:"fixed",height:n.height,align:i};else if("min"==n.policy)o[e]={policy:"min",align:i};else if("fit"==n.policy||"max"==n.policy)o[e]={policy:n.policy,flex:null!==(t=n.flex)&&void 0!==t?t:1,align:i};else{if("auto"!=n.policy)throw new Error("unrechable");h.some(r.row(e),e=>e.is_height_expanding())?o[e]={policy:"max",flex:1,align:i}:o[e]={policy:"min",align:i}}}const s=new Array(a);for(let e=0;e<a;e++){const t=(n=void 0,null==(n=d.isPlainObject(this.cols)?null!==(n=this.cols[e])&&void 0!==n?n:this.cols["*"]:this.cols)?{policy:"auto"}:d.isNumber(n)?{policy:"fixed",width:n}:d.isString(n)?{policy:n}:n),i=null!==(n=t.align)&&void 0!==n?n:"auto";if("fixed"==t.policy)s[e]={policy:"fixed",width:t.width,align:i};else if("min"==t.policy)s[e]={policy:"min",align:i};else if("fit"==t.policy||"max"==t.policy)s[e]={policy:t.policy,flex:null!==(n=t.flex)&&void 0!==n?n:1,align:i};else{if("auto"!=t.policy)throw new Error("unrechable");h.some(r.col(e),e=>e.is_width_expanding())?s[e]={policy:"max",flex:1,align:i}:s[e]={policy:"min",align:i}}}var[e,l]=d.isNumber(this.spacing)?[this.spacing,this.spacing]:this.spacing;this._state={items:r,nrows:i,ncols:a,rows:o,cols:s,rspacing:e,cspacing:l}}_measure_totals(e,t){var{nrows:n,ncols:r,rspacing:i,cspacing:a}=this._state;return{height:h.sum(e)+(n-1)*i,width:h.sum(t)+(r-1)*a}}_measure_cells(p){const{items:t,nrows:n,ncols:r,rows:m,cols:g,rspacing:_,cspacing:y}=this._state,v=new Array(n);for(let e=0;e<n;e++){const t=m[e];v[e]="fixed"==t.policy?t.height:0}const b=new Array(r);for(let e=0;e<r;e++){const t=g[e];b[e]="fixed"==t.policy?t.width:0}const x=new f;return t.foreach((t,e)=>{var{r0:n,c0:r,r1:i,c1:a}=t,o=(i-n)*_,s=(a-r)*y;let l=0;for(let e=n;e<=i;e++)l+=p(e,r).height;l+=o;let c=0;for(let e=r;e<=a;e++)c+=p(n,e).width;c+=s;var u=e.measure({width:c,height:l});x.add(t,{layout:e,size_hint:u});const d=new w.Sizeable(u).grow_by(e.sizing.margin);d.height-=o,d.width-=s;const h=[];for(let e=n;e<=i;e++){const t=m[e];"fixed"==t.policy?d.height-=t.height:h.push(e)}if(0<d.height){const p=A(d.height/h.length);for(const t of h)v[t]=T(v[t],p)}const f=[];for(let e=r;e<=a;e++){const t=g[e];"fixed"==t.policy?d.width-=t.width:f.push(e)}if(0<d.width){const p=A(d.width/f.length);for(const t of f)b[t]=T(b[t],p)}}),{size:this._measure_totals(v,b),row_heights:v,col_widths:b,size_hints:x}}_measure_grid(e){const{nrows:a,ncols:o,rows:s,cols:l,rspacing:n,cspacing:c}=this._state,t=r=>{let i;i="fixed"==this.sizing.height_policy&&null!=this.sizing.height?this.sizing.height:e.height!=1/0&&this.is_height_expanding()?Math.max(e.height,r.size.height):r.size.height;let t=0;for(let e=0;e<a;e++){const a=s[e];"max"==a.policy?t+=a.flex:i-=r.row_heights[e]}if(i-=(a-1)*n,0!=t&&0<i)for(let e=0;e<a;e++){const a=s[e];if("max"==a.policy){const s=A(i*(a.flex/t));i-=s,r.row_heights[e]=s,t-=a.flex}}else if(i<0){let t=0;for(let e=0;e<a;e++)"fixed"!=s[e].policy&&t++;let n=-i;for(let e=0;e<a;e++)if("fixed"!=s[e].policy){const a=r.row_heights[e],s=A(n/t);r.row_heights[e]=T(a-s,0),n-=s>a?a:s,t--}}},r=r=>{let i;i=("fixed"==this.sizing.width_policy&&null!=this.sizing.width?this.sizing:e.width!=1/0&&this.is_width_expanding()?e:r.size).width;let t=0;for(let e=0;e<o;e++){const o=l[e];"fit"==o.policy||"max"==o.policy?t+=o.flex:i-=r.col_widths[e]}if(i-=(o-1)*c,0!=t&&0<i)for(let e=0;e<o;e++){const o=l[e];if("fit"==o.policy||"max"==o.policy){const l=A(i*(o.flex/t));i-=l,r.col_widths[e]=l,t-=o.flex}}else if(i<0){let t=0;for(let e=0;e<o;e++)"fixed"!=l[e].policy&&t++;let n=-i;for(let e=0;e<o;e++)if("fixed"!=l[e].policy){const o=r.col_widths[e],l=A(n/t);r.col_widths[e]=T(o-l,0),n-=l>o?o:l,t--}}},i=this._measure_cells((e,t)=>{e=s[e],t=l[t];return{width:"fixed"==t.policy?t.width:1/0,height:"fixed"==e.policy?e.height:1/0}});t(i),r(i);var u=this._measure_cells((e,t)=>({width:i.col_widths[t],height:i.row_heights[e]}));t(u),r(u);var{row_heights:d,col_widths:u}=u;return{size:this._measure_totals(d,u),row_heights:d,col_widths:u}}_measure(e){var{size:e}=this._measure_grid(e);return e}_set_geometry(n,e){super._set_geometry(n,e);const{nrows:r,ncols:i,rspacing:h,cspacing:f}=this._state,{row_heights:a,col_widths:o}=this._measure_grid(n),{size_hints:t}=this._measure_cells((e,t)=>({width:o[t],height:a[e]})),p=this._state.rows.map((e,t)=>Object.assign(Object.assign({},e),{top:0,height:a[t],get bottom(){return this.top+this.height}})),m=this._state.cols.map((e,t)=>Object.assign(Object.assign({},e),{left:0,width:o[t],get right(){return this.left+this.width}})),s=t.map((e,t)=>Object.assign(Object.assign({},t),{outer:new _.BBox,inner:new _.BBox}));for(let e=0,t=this.absolute?n.top:0;e<r;e++){const n=p[e];n.top=t,t+=n.height+h}for(let e=0,t=this.absolute?n.left:0;e<i;e++){const n=m[e];n.left=t,t+=n.width+f}s.foreach(({r0:e,c0:t,r1:n,c1:r},i)=>{var{layout:a,size_hint:o}=i,{sizing:s}=a,{width:l,height:c}=o,a=function(t,n){let r=(n-t)*f;for(let e=t;e<=n;e++)r+=m[e].width;return r}(t,r),o=function(t,n){let r=(n-t)*h;for(let e=t;e<=n;e++)r+=p[e].height;return r}(e,n),r=t==r&&"auto"!=m[t].align?m[t].align:s.halign,n=e==n&&"auto"!=p[e].align?p[e].align:s.valign;let u=m[t].left;"start"==r?u+=s.margin.left:"center"==r?u+=A((a-l)/2):"end"==r&&(u+=a-s.margin.right-l);let d=p[e].top;"start"==n?d+=s.margin.top:"center"==n?d+=A((o-c)/2):"end"==n&&(d+=o-s.margin.bottom-c),i.outer=new _.BBox({left:u,top:d,width:l,height:c})});const d=p.map(()=>({start:new l(()=>0),end:new l(()=>0)})),g=m.map(()=>({start:new l(()=>0),end:new l(()=>0)}));s.foreach(({r0:e,c0:t,r1:n,c1:r},{size_hint:i,outer:a})=>{const{inner:o}=i;null!=o&&(d[e].start.apply(a.top,e=>T(e,o.top)),d[n].end.apply(p[n].bottom-a.bottom,e=>T(e,o.bottom)),g[t].start.apply(a.left,e=>T(e,o.left)),g[r].end.apply(m[r].right-a.right,e=>T(e,o.right)))}),s.foreach(({r0:t,c0:n,r1:r,c1:i},a)=>{const{size_hint:o,outer:s}=a,l=e=>{var t=this.absolute?s:s.relative(),n=t.left+e.left,r=t.top+e.top,i=t.right-e.right,e=t.bottom-e.bottom;return new _.BBox({left:n,top:r,right:i,bottom:e})};if(null!=o.inner){let e=l(o.inner);if(!1!==o.align){const a=d[t].start.get(s.top),o=d[r].end.get(p[r].bottom-s.bottom),c=g[n].start.get(s.left),u=g[i].end.get(m[i].right-s.right);try{e=l({top:a,bottom:o,left:c,right:u})}catch(t){}}a.inner=e}else a.inner=s}),s.foreach((e,{layout:t,outer:n,inner:r})=>{t.set_geometry(n,r)})}}n.Grid=o,o.__name__="Grid";class s extends o{constructor(e){super(),this.items=e.map((e,t)=>({layout:e,row:0,col:t})),this.rows="fit"}}(n.Row=s).__name__="Row";class c extends o{constructor(e){super(),this.items=e.map((e,t)=>({layout:e,row:t,col:0})),this.cols="fit"}}(n.Column=c).__name__="Column"},function(e,t,n,r,i){r();const a=e(142),o=e(141),s=e(43);class l extends a.ContentLayoutable{constructor(e){super(),this.content_size=s.unsized(e,()=>new o.Sizeable(s.size(e)))}_content_size(){return this.content_size}}(n.ContentBox=l).__name__="ContentBox";class c extends a.Layoutable{constructor(e){super(),this.el=e}_measure(e){e=new o.Sizeable(e).bounded_to(this.sizing.size);return s.sized(this.el,e,()=>{const e=new o.Sizeable(s.content_size(this.el)),{border:t,padding:n}=s.extents(this.el);return e.grow_by(t).grow_by(n).map(Math.ceil)})}}n.VariadicBox=c,c.__name__="VariadicBox";class u extends c{constructor(e){super(e),this._cache=new Map}_measure(e){var{width:t,height:n}=e,n=`${t},${n}`;let r=this._cache.get(n);return null==r&&(r=super._measure(e),this._cache.set(n,r)),r}invalidate_cache(){this._cache.clear()}}(n.CachedVariadicBox=u).__name__="CachedVariadicBox"},function(e,t,n,r,i){r();const a=e(141),o=e(142),l=e(99);class s extends o.Layoutable{constructor(){super(...arguments),this.min_border={left:0,top:0,right:0,bottom:0},this.padding={left:0,top:0,right:0,bottom:0}}*[Symbol.iterator](){yield this.top_panel,yield this.bottom_panel,yield this.left_panel,yield this.right_panel,yield this.center_panel}_measure(e){e=new a.Sizeable({width:("fixed"==this.sizing.width_policy||e.width==1/0?this.sizing:e).width,height:("fixed"==this.sizing.height_policy||e.height==1/0?this.sizing:e).height});var t=this.left_panel.measure({width:0,height:e.height}),n=Math.max(t.width,this.min_border.left)+this.padding.left,r=this.right_panel.measure({width:0,height:e.height}),i=Math.max(r.width,this.min_border.right)+this.padding.right,t=this.top_panel.measure({width:e.width,height:0}),r=Math.max(t.height,this.min_border.top)+this.padding.top,t=this.bottom_panel.measure({width:e.width,height:0}),t=Math.max(t.height,this.min_border.bottom)+this.padding.bottom,e=new a.Sizeable(e).shrink_by({left:n,right:i,top:r,bottom:t}),e=this.center_panel.measure(e);return{width:n+e.width+i,height:r+e.height+t,inner:{left:n,right:i,top:r,bottom:t},align:(()=>{var{width_policy:e,height_policy:t}=this.center_panel.sizing;return"fixed"!=e&&"fixed"!=t})()}}_set_geometry(e,t){super._set_geometry(e,t),this.center_panel.set_geometry(t);var n=this.left_panel.measure({width:0,height:e.height}),r=this.right_panel.measure({width:0,height:e.height}),i=this.top_panel.measure({width:e.width,height:0}),a=this.bottom_panel.measure({width:e.width,height:0}),{left:o,top:s,right:e,bottom:t}=t;this.top_panel.set_geometry(new l.BBox({left:o,right:e,bottom:s,height:i.height})),this.bottom_panel.set_geometry(new l.BBox({left:o,right:e,top:t,height:a.height})),this.left_panel.set_geometry(new l.BBox({top:s,bottom:t,right:o,width:n.width})),this.right_panel.set_geometry(new l.BBox({top:s,bottom:t,left:e,width:r.width}))}}(n.BorderLayout=s).__name__="BorderLayout"},function(e,t,n,r,i){r();const a=e(1),o=e(139),l=e(10),s=e(143),c=e(20),u=a.__importStar(e(48));class d extends o.TextAnnotationView{_get_size(){const{ctx:e}=this.layer;this.visuals.text.set_value(e);var{width:t}=e.measureText(this.model.text),{height:n}=s.font_metrics(e.font);return{width:t,height:n}}_render(){const{angle:e,angle_units:t}=this.model,n=l.resolve_angle(e,t),r=null!=this.layout?this.layout:this.plot_view.frame,i=this.coordinates.x_scale,a=this.coordinates.y_scale;var o=("data"==this.model.x_units?i:r.bbox.xview).compute(this.model.x),s=("data"==this.model.y_units?a:r.bbox.yview).compute(this.model.y);o+=this.model.x_offset,s-=this.model.y_offset,("canvas"==this.model.render_mode?this._canvas_text:this._css_text).bind(this)(this.layer.ctx,this.model.text,o,s,n)}}(n.LabelView=d).__name__="LabelView";class h extends o.TextAnnotation{constructor(e){super(e)}static init_Label(){this.prototype.default_view=d,this.mixins([u.Text,["border_",u.Line],["background_",u.Fill]]),this.define(({Number:e,String:t,Angle:n})=>({x:[e],x_units:[c.SpatialUnits,"data"],y:[e],y_units:[c.SpatialUnits,"data"],text:[t,""],angle:[n,0],angle_units:[c.AngleUnits,"rad"],x_offset:[e,0],y_offset:[e,0]})),this.override({background_fill_color:null,border_line_color:null})}}(n.Label=h).__name__="Label",h.init_Label()},function(e,t,n,r,i){r();const a=e(1),o=e(139),s=e(56),l=e(130),c=a.__importStar(e(48)),u=e(20),d=e(43),h=a.__importStar(e(18)),f=e(143);class p extends o.TextAnnotationView{set_data(e){s.DataAnnotationView.prototype.set_data.call(this,e)}initialize(){if(super.initialize(),this.set_data(this.model.source),"css"==this.model.render_mode)for(let e=0,t=this.text.length;e<t;e++){var n=d.div({style:{display:"none"}});this.el.appendChild(n)}}connect_signals(){super.connect_signals();var e=()=>{this.set_data(this.model.source),"css"==this.model.render_mode?this.render():this.request_render()};this.connect(this.model.change,e),this.connect(this.model.source.streaming,e),this.connect(this.model.source.patching,e),this.connect(this.model.source.change,e)}_calculate_text_dimensions(e,t){var{width:e}=e.measureText(t),{height:t}=f.font_metrics(this.visuals.text.font_value(0));return[e,t]}_map_data(){const e=this.coordinates.x_scale,t=this.coordinates.y_scale,n=null!=this.layout?this.layout:this.plot_view.frame;return[("data"==this.model.x_units?e:n.bbox.xview).v_compute(this._x),("data"==this.model.y_units?t:n.bbox.yview).v_compute(this._y)]}_render(){const n=("canvas"==this.model.render_mode?this._v_canvas_text:this._v_css_text).bind(this),{ctx:r}=this.layer,[i,a]=this._map_data();for(let e=0,t=this.text.length;e<t;e++)n(r,e,this.text.get(e),i[e]+this.x_offset.get(e),a[e]-this.y_offset.get(e),this.angle.get(e))}_get_size(){const{ctx:e}=this.layer;this.visuals.text.set_vectorize(e,0);var{width:t}=e.measureText(this.text.get(0)),{height:n}=f.font_metrics(e.font);return{width:t,height:n}}_v_canvas_text(e,t,n,r,i,a){this.visuals.text.set_vectorize(e,t);var o=this._calculate_bounding_box_dimensions(e,n);e.save(),e.beginPath(),e.translate(r,i),e.rotate(a),e.rect(o[0],o[1],o[2],o[3]),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_vectorize(e,t),e.fill()),this.visuals.border_line.doit&&(this.visuals.border_line.set_vectorize(e,t),e.stroke()),this.visuals.text.doit&&(this.visuals.text.set_vectorize(e,t),e.fillText(n,0,0)),e.restore()}_v_css_text(e,t,n,r,i,a){const o=this.el.children[t];o.textContent=n,this.visuals.text.set_vectorize(e,t);var[s,n]=this._calculate_bounding_box_dimensions(e,n);o.style.position="absolute",o.style.left=`${r+s}px`,o.style.top=`${i+n}px`,o.style.color=e.fillStyle,o.style.font=e.font,o.style.lineHeight="normal",a&&(o.style.transform=`rotate(${a}rad)`),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_vectorize(e,t),o.style.backgroundColor=e.fillStyle),this.visuals.border_line.doit&&(this.visuals.border_line.set_vectorize(e,t),o.style.borderStyle=e.lineDash.length<2?"solid":"dashed",o.style.borderWidth=`${e.lineWidth}px`,o.style.borderColor=e.strokeStyle),d.display(o)}}(n.LabelSetView=p).__name__="LabelSetView";class m extends o.TextAnnotation{constructor(e){super(e)}static init_LabelSet(){this.prototype.default_view=p,this.mixins([c.TextVector,["border_",c.LineVector],["background_",c.FillVector]]),this.define(({Ref:e})=>({x:[h.XCoordinateSpec,{field:"x"}],y:[h.YCoordinateSpec,{field:"y"}],x_units:[u.SpatialUnits,"data"],y_units:[u.SpatialUnits,"data"],text:[h.StringSpec,{field:"text"}],angle:[h.AngleSpec,0],x_offset:[h.NumberSpec,{value:0}],y_offset:[h.NumberSpec,{value:0}],source:[e(l.ColumnDataSource),()=>new l.ColumnDataSource]})),this.override({background_fill_color:null,border_line_color:null})}}(n.LabelSet=m).__name__="LabelSet",m.init_LabelSet()},function(e,t,n,r,i){r();const a=e(1),o=e(40),s=e(229),l=e(20),c=a.__importStar(e(48)),u=e(15),d=e(140),v=e(143),b=e(99),x=e(9),w=e(8),T=e(11);class h extends o.AnnotationView{update_layout(){var{panel:e}=this;this.layout=null!=e?new d.SideLayout(e,()=>this.get_size()):void 0}cursor(e,t){return"none"==this.model.click_policy?null:"pointer"}get legend_padding(){return null!=this.model.border_line_color?this.model.padding:0}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render()),this.connect(this.model.item_change,()=>this.request_render())}compute_legend_bbox(){const t=this.model.get_legend_names(),{glyph_height:e,glyph_width:n}=this.model,{label_height:r,label_width:i}=this.model;this.max_label_height=x.max([v.font_metrics(this.visuals.label_text.font_value()).height,r,e]);const{ctx:a}=this.layer;a.save(),this.visuals.label_text.set_value(a),this.text_widths=new Map;for(const e of t)this.text_widths.set(e,x.max([a.measureText(e).width,i]));this.visuals.title_text.set_value(a),this.title_height=this.model.title?v.font_metrics(this.visuals.title_text.font_value()).height+this.model.title_standoff:0,this.title_width=this.model.title?a.measureText(this.model.title).width:0,a.restore();var o=Math.max(x.max([...this.text_widths.values()]),0),s=this.model.margin,{legend_padding:l}=this,c=this.model.spacing,{label_standoff:u}=this.model;let d,h;if("vertical"==this.model.orientation)d=t.length*this.max_label_height+Math.max(t.length-1,0)*c+2*l+this.title_height,h=x.max([o+n+u+2*l,this.title_width+2*l]);else{let e=2*l+Math.max(t.length-1,0)*c;for(const[,t]of this.text_widths)e+=x.max([t,i])+n+u;h=x.max([this.title_width+2*l,e]),d=this.max_label_height+this.title_height+2*l}const f=null!=this.layout?this.layout:this.plot_view.frame,[p,m]=f.bbox.ranges,{location:g}=this.model;let _,y;if(w.isString(g))switch(g){case"top_left":_=p.start+s,y=m.start+s;break;case"top":case"top_center":_=(p.end+p.start)/2-h/2,y=m.start+s;break;case"top_right":_=p.end-s-h,y=m.start+s;break;case"bottom_right":_=p.end-s-h,y=m.end-s-d;break;case"bottom":case"bottom_center":_=(p.end+p.start)/2-h/2,y=m.end-s-d;break;case"bottom_left":_=p.start+s,y=m.end-s-d;break;case"left":case"center_left":_=p.start+s,y=(m.end+m.start)/2-d/2;break;case"center":case"center_center":_=(p.end+p.start)/2-h/2,y=(m.end+m.start)/2-d/2;break;case"right":case"center_right":_=p.end-s-h,y=(m.end+m.start)/2-d/2}else if(w.isArray(g)&&2==g.length){const[t,e]=g;_=f.bbox.xview.compute(t),y=f.bbox.yview.compute(e)-d}else T.unreachable();return new b.BBox({left:_,top:y,width:h,height:d})}interactive_bbox(){return this.compute_legend_bbox()}interactive_hit(e,t){return this.interactive_bbox().contains(e,t)}on_hit(e,t){let n;var{glyph_width:r}=this.model,{legend_padding:i}=this,a=this.model.spacing,{label_standoff:o}=this.model;let s=n=i;var l=this.compute_legend_bbox(),c="vertical"==this.model.orientation;for(const p of this.model.items)for(const m of p.get_labels_list_from_label_prop()){var u,d,h=l.x+s,f=l.y+n+this.title_height;if([u,d]=c?[l.width-2*i,this.max_label_height]:[this.text_widths.get(m)+r+o,this.max_label_height],new b.BBox({left:h,top:f,width:u,height:d}).contains(e,t)){switch(this.model.click_policy){case"hide":for(const e of p.renderers)e.visible=!e.visible;break;case"mute":for(const e of p.renderers)e.muted=!e.muted}return!0}c?n+=this.max_label_height+a:s+=this.text_widths.get(m)+r+o+a}return!1}_render(){if(0!=this.model.items.length){for(const e of this.model.items)e.legend=this.model;const{ctx:e}=this.layer,t=this.compute_legend_bbox();e.save(),this._draw_legend_box(e,t),this._draw_legend_items(e,t),this._draw_title(e,t),e.restore()}}_draw_legend_box(e,t){e.beginPath(),e.rect(t.x,t.y,t.width,t.height),this.visuals.background_fill.set_value(e),e.fill(),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),e.stroke())}_draw_legend_items(e,t){const{glyph_width:n,glyph_height:r}=this.model,{legend_padding:i}=this,a=this.model.spacing,{label_standoff:o}=this.model;let s=i,l=i;var c="vertical"==this.model.orientation;for(const v of this.model.items){var u=v.get_labels_list_from_label_prop(),d=v.get_field_from_label_prop();if(0!=u.length){var h=(()=>{switch(this.model.click_policy){case"none":return!0;case"hide":return x.every(v.renderers,e=>e.visible);case"mute":return x.every(v.renderers,e=>!e.muted)}})();for(const x of u){var f,p,m=t.x+s,g=t.y+l+this.title_height,_=m+n,y=g+r;c?l+=this.max_label_height+a:s+=this.text_widths.get(x)+n+o+a,this.visuals.label_text.set_value(e),e.fillText(x,_+o,g+this.max_label_height/2);for(const t of v.renderers){const n=this.plot_view.renderer_view(t);null==n||n.draw_legend(e,m,_,g,y,d,x,v.index)}h||([f,p]=c?[t.width-2*i,this.max_label_height]:[this.text_widths.get(x)+n+o,this.max_label_height],e.beginPath(),e.rect(m,g,f,p),this.visuals.inactive_fill.set_value(e),e.fill())}}}}_draw_title(e,t){var{title:n}=this.model;n&&this.visuals.title_text.doit&&(e.save(),e.translate(t.x0,t.y0+this.title_height),this.visuals.title_text.set_value(e),e.fillText(n,this.legend_padding,this.legend_padding-this.model.title_standoff),e.restore())}_get_size(){var{width:e,height:t}=this.compute_legend_bbox();return{width:e+2*this.model.margin,height:t+2*this.model.margin}}}(n.LegendView=h).__name__="LegendView";class f extends o.Annotation{constructor(e){super(e)}initialize(){super.initialize(),this.item_change=new u.Signal0(this,"item_change")}static init_Legend(){this.prototype.default_view=h,this.mixins([["label_",c.Text],["title_",c.Text],["inactive_",c.Fill],["border_",c.Line],["background_",c.Fill]]),this.define(({Number:e,String:t,Array:n,Tuple:r,Or:i,Ref:a,Nullable:o})=>({orientation:[l.Orientation,"vertical"],location:[i(l.LegendLocation,r(e,e)),"top_right"],title:[o(t),null],title_standoff:[e,5],label_standoff:[e,5],glyph_height:[e,20],glyph_width:[e,20],label_height:[e,20],label_width:[e,20],margin:[e,10],padding:[e,10],spacing:[e,3],items:[n(a(s.LegendItem)),[]],click_policy:[l.LegendClickPolicy,"none"]})),this.override({border_line_color:"#e5e5e5",border_line_alpha:.5,border_line_width:1,background_fill_color:"#ffffff",background_fill_alpha:.95,inactive_fill_color:"white",inactive_fill_alpha:.7,label_text_font_size:"13px",label_text_baseline:"middle",title_text_font_size:"13px",title_text_font_style:"italic"})}get_legend_names(){const e=[];for(const n of this.items){var t=n.get_labels_list_from_label_prop();e.push(...t)}return e}}(n.Legend=f).__name__="Legend",f.init_Legend()},function(e,t,n,r,i){r();const a=e(1),o=e(53),s=e(61),l=e(57),c=e(230),u=a.__importStar(e(18)),d=e(19),h=e(9);class f extends o.Model{constructor(e){super(e)}static init_LegendItem(){this.define(({Int:e,Array:t,Ref:n,Nullable:r})=>({label:[u.NullStringSpec,null],renderers:[t(n(s.GlyphRenderer)),[]],index:[r(e),null]}))}_check_data_sources_on_renderers(){if(null!=this.get_field_from_label_prop()){if(this.renderers.length<1)return!1;var e=this.renderers[0].data_source;if(null!=e)for(const t of this.renderers)if(t.data_source!=e)return!1}return!0}_check_field_label_on_data_source(){var e=this.get_field_from_label_prop();if(null!=e){if(this.renderers.length<1)return!1;const t=this.renderers[0].data_source;if(null!=t&&!h.includes(t.columns(),e))return!1}return!0}initialize(){super.initialize(),this.legend=null,this.connect(this.change,()=>{var e;return null===(e=this.legend)||void 0===e?void 0:e.item_change.emit()}),this._check_data_sources_on_renderers()||d.logger.error("Non matching data sources on legend item renderers"),this._check_field_label_on_data_source()||d.logger.error(`Bad column name on label: ${this.label}`)}get_field_from_label_prop(){var{label:e}=this;return c.isField(e)?e.field:null}get_labels_list_from_label_prop(){if(c.isValue(this.label)){const{value:t}=this.label;return null!=t?[t]:[]}const t=this.get_field_from_label_prop();if(null!=t){let e;if(!this.renderers[0]||null==this.renderers[0].data_source)return["No source found"];if(e=this.renderers[0].data_source,e instanceof l.ColumnarDataSource){var n=e.get_column(t);return null!=n?h.uniq(Array.from(n)):["Invalid field"]}}return[]}}(n.LegendItem=f).__name__="LegendItem",f.init_LegendItem()},function(e,t,n,r,i){r();const a=e(8);n.isValue=function(e){return a.isPlainObject(e)&&"value"in e},n.isField=function(e){return a.isPlainObject(e)&&"field"in e},n.isExpr=function(e){return a.isPlainObject(e)&&"expr"in e}},function(e,t,n,r,i){r();const a=e(1),o=e(40),s=a.__importStar(e(48)),l=e(20);class c extends o.AnnotationView{connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_render(){var{xs:e,ys:t}=this.model;if(e.length==t.length){var n=e.length;if(!(n<3)){const{frame:o}=this.plot_view,{ctx:s}=this.layer,l=this.coordinates.x_scale,c=this.coordinates.y_scale,{screen:u}=this.model;var r=a(e,this.model.xs_units,l,o.bbox.xview),i=a(t,this.model.ys_units,c,o.bbox.yview);s.beginPath();for(let e=0;e<n;e++)s.lineTo(r[e],i[e]);function a(e,t,n,r){return u?e:("data"==t?n:r).v_compute(e)}s.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_value(s),s.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(s),s.fill()),this.visuals.line.doit&&(this.visuals.line.set_value(s),s.stroke())}}}}(n.PolyAnnotationView=c).__name__="PolyAnnotationView";class u extends o.Annotation{constructor(e){super(e)}static init_PolyAnnotation(){this.prototype.default_view=c,this.mixins([s.Line,s.Fill,s.Hatch]),this.define(({Number:e,Array:t})=>({xs:[t(e),[]],xs_units:[l.SpatialUnits,"data"],ys:[t(e),[]],ys_units:[l.SpatialUnits,"data"]})),this.internal(({Boolean:e})=>({screen:[e,!1]})),this.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3})}update({xs:e,ys:t}){this.setv({xs:e,ys:t,screen:!0},{check_eq:!1})}}(n.PolyAnnotation=u).__name__="PolyAnnotation",u.init_PolyAnnotation()},function(e,t,n,r,i){r();const a=e(1),o=e(40),s=a.__importStar(e(48));class l extends o.AnnotationView{connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_render(){var{gradient:i,y_intercept:a}=this.model;if(null!=i&&null!=a){const{frame:o}=this.plot_view,s=this.coordinates.x_scale,l=this.coordinates.y_scale;let e,t,n,r;if(0==i)e=l.compute(a),t=e,n=o.bbox.left,r=n+o.bbox.width;else{e=o.bbox.top,t=e+o.bbox.height;const c=(l.invert(e)-a)/i,u=(l.invert(t)-a)/i;n=s.compute(c),r=s.compute(u)}const{ctx:c}=this.layer;c.save(),c.beginPath(),this.visuals.line.set_value(c),c.moveTo(n,e),c.lineTo(r,t),c.stroke(),c.restore()}}}(n.SlopeView=l).__name__="SlopeView";class c extends o.Annotation{constructor(e){super(e)}static init_Slope(){this.prototype.default_view=l,this.mixins(s.Line),this.define(({Number:e,Nullable:t})=>({gradient:[t(e),null],y_intercept:[t(e),null]})),this.override({line_color:"black"})}}(n.Slope=c).__name__="Slope",c.init_Slope()},function(e,t,n,r,i){r();const a=e(1),o=e(40),s=a.__importStar(e(48)),l=e(20);class c extends o.AnnotationView{connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.plot_view.request_paint(this))}_render(){const{location:i}=this.model;if(null!=i){var{frame:a}=this.plot_view,o=this.coordinates.x_scale,s=this.coordinates.y_scale,l=(e,t)=>"data"==this.model.location_units?e.compute(i):this.model.for_hover?i:t.compute(i);let e,t,n,r;e="width"==this.model.dimension?(n=l(s,a.bbox.yview),t=a.bbox.left,r=a.bbox.width,this.model.line_width):(n=a.bbox.top,t=l(o,a.bbox.xview),r=this.model.line_width,a.bbox.height);const{ctx:c}=this.layer;c.save(),c.beginPath(),this.visuals.line.set_value(c),c.moveTo(t,n),"width"==this.model.dimension?c.lineTo(t+r,n):c.lineTo(t,n+e),c.stroke(),c.restore()}}}(n.SpanView=c).__name__="SpanView";class u extends o.Annotation{constructor(e){super(e)}static init_Span(){this.prototype.default_view=c,this.mixins(s.Line),this.define(({Number:e,Nullable:t})=>({render_mode:[l.RenderMode,"canvas"],location:[t(e),null],location_units:[l.SpatialUnits,"data"],dimension:[l.Dimension,"width"]})),this.internal(({Boolean:e})=>({for_hover:[e,!1]})),this.override({line_color:"black"})}}(n.Span=u).__name__="Span",u.init_Span()},function(e,t,n,r,i){r();const a=e(40),o=e(235),s=e(122),l=e(43),c=e(140),u=e(99);class d extends a.AnnotationView{constructor(){super(...arguments),this._invalidate_toolbar=!0,this._previous_bbox=new u.BBox}update_layout(){this.layout=new c.SideLayout(this.panel,()=>this.get_size(),!0)}initialize(){super.initialize(),this.el=l.div(),this.plot_view.canvas_view.add_event(this.el)}async lazy_initialize(){await super.lazy_initialize(),this._toolbar_view=await s.build_view(this.model.toolbar,{parent:this}),this.plot_view.visibility_callbacks.push(e=>this._toolbar_view.set_visibility(e))}remove(){this._toolbar_view.remove(),l.remove(this.el),super.remove()}render(){this.model.visible||l.undisplay(this.el),super.render()}_render(){var{bbox:e}=this.layout;this._previous_bbox.equals(e)||(l.position(this.el,e),this._previous_bbox=e),this._invalidate_toolbar&&(this.el.style.position="absolute",this.el.style.overflow="hidden",this._toolbar_view.render(),l.empty(this.el),this.el.appendChild(this._toolbar_view.el),this._invalidate_toolbar=!1),l.display(this.el)}_get_size(){var{tools:e,logo:t}=this.model.toolbar;return{width:30*e.length+(null!=t?25:0),height:30}}}(n.ToolbarPanelView=d).__name__="ToolbarPanelView";class h extends a.Annotation{constructor(e){super(e)}static init_ToolbarPanel(){this.prototype.default_view=d,this.define(({Ref:e})=>({toolbar:[e(o.Toolbar)]}))}}(n.ToolbarPanel=h).__name__="ToolbarPanel",h.init_ToolbarPanel()},function(e,t,a,n,r){n();const s=e(8),l=e(9),c=e(13),i=e(236),o=e(237),u=e(247),d=e(248);a.Drag=i.Tool,a.Inspection=i.Tool,a.Scroll=i.Tool,a.Tap=i.Tool;class h extends d.ToolbarBase{constructor(e){super(e)}static init_Toolbar(){this.prototype.default_view=d.ToolbarBaseView,this.define(({Or:e,Ref:t,Auto:n,Null:r,Nullable:i})=>({active_drag:[e(t(a.Drag),n,r),"auto"],active_inspect:[e(t(a.Inspection),n,r),"auto"],active_scroll:[e(t(a.Scroll),n,r),"auto"],active_tap:[e(t(a.Tap),n,r),"auto"],active_multi:[i(t(o.GestureTool)),null]}))}connect_signals(){super.connect_signals();var{tools:e,active_drag:t,active_inspect:n,active_scroll:r,active_tap:i,active_multi:a}=this.properties;this.on_change([e,t,n,r,i,a],()=>this._init_tools())}_init_tools(){if(super._init_tools(),"auto"!=this.active_inspect)if(this.active_inspect instanceof u.InspectTool){let e=!1;for(const a of this.inspectors)a!=this.active_inspect?a.active=!1:e=!0;e||(this.active_inspect=null)}else if(s.isArray(this.active_inspect)){const e=l.intersection(this.active_inspect,this.inspectors);e.length!=this.active_inspect.length&&(this.active_inspect=e);for(const e of this.inspectors)l.includes(this.active_inspect,e)||(e.active=!1)}else if(null==this.active_inspect)for(const e of this.inspectors)e.active=!1;const e=e=>{e.active?this._active_change(e):e.active=!0};for(const e of c.values(this.gestures)){e.tools=l.sort_by(e.tools,e=>e.default_order);for(const o of e.tools)this.connect(o.properties.active.change,()=>this._active_change(o))}for(var[t,n]of c.entries(this.gestures)){var r,i=(e=>{switch(e){case"tap":return"active_tap";case"pan":return"active_drag";case"pinch":case"scroll":return"active_scroll";case"multi":return"active_multi"}return null})(t);i&&("auto"==(r=this[i])?0==n.tools.length||"tap"!=(t=t)&&"pan"!=t||e(n.tools[0]):null!=r&&(l.includes(this.tools,r)?e(r):this[i]=null))}}}(a.Toolbar=h).__name__="Toolbar",h.init_Toolbar()},function(e,t,n,r,i){r();const a=e(42),c=e(9),o=e(53);class s extends a.View{get plot_view(){return this.parent}get plot_model(){return this.parent.model}connect_signals(){super.connect_signals(),this.connect(this.model.properties.active.change,()=>{this.model.active?this.activate():this.deactivate()})}activate(){}deactivate(){}}(n.ToolView=s).__name__="ToolView";class l extends o.Model{constructor(e){super(e)}static init_Tool(){this.prototype._known_aliases=new Map,this.define(({String:e,Nullable:t})=>({description:[t(e),null]})),this.internal(({Boolean:e})=>({active:[e,!1]}))}get synthetic_renderers(){return[]}_get_dim_limits([e,t],[n,r],i,a){var o=i.bbox.h_range;let s;s="width"==a||"both"==a?(s=[c.min([e,n]),c.max([e,n])],[c.max([s[0],o.start]),c.min([s[1],o.end])]):[o.start,o.end];i=i.bbox.v_range;let l;return l="height"==a||"both"==a?(l=[c.min([t,r]),c.max([t,r])],[c.max([l[0],i.start]),c.min([l[1],i.end])]):[i.start,i.end],[s,l]}static register_alias(e,t){this.prototype._known_aliases.set(e,t)}static from_string(e){const t=this.prototype._known_aliases.get(e);if(null!=t)return t();{const t=[...this.prototype._known_aliases.keys()];throw new Error(`unexpected tool name '${e}', possible tools are ${t.join(", ")}`)}}}n.Tool=l,l.__name__="Tool",l.init_Tool()},function(e,t,n,r,i){r();const a=e(238),o=e(246);class s extends a.ButtonToolView{}(n.GestureToolView=s).__name__="GestureToolView";class l extends a.ButtonTool{constructor(e){super(e),this.button_view=o.OnOffButtonView}}(n.GestureTool=l).__name__="GestureTool"},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(239)),s=e(240),l=e(236),c=e(43),u=e(34),d=e(8),h=e(9),f=a.__importStar(e(241)),p=f,m=a.__importDefault(e(242)),g=a.__importDefault(e(243)),_=e(244);class y extends s.DOMView{initialize(){super.initialize();var e,t,n=this.model.menu;null!=n&&(e="left"==(t=this.parent.model.toolbar_location)||"above"==t,t=this.parent.model.horizontal?"vertical":"horizontal",this._menu=new _.ContextMenu(e?h.reversed(n):n,{orientation:t,prevent_hide:e=>e.target==this.el})),this._hammer=new o.default(this.el,{touchAction:"auto",inputClass:o.default.TouchMouseInput}),this.connect(this.model.change,()=>this.render()),this._hammer.on("tap",e=>{var t;null!==(t=this._menu)&&void 0!==t&&t.is_open?this._menu.hide():e.target==this.el&&this._clicked()}),this._hammer.on("press",()=>this._pressed())}remove(){var e;this._hammer.destroy(),null===(e=this._menu)||void 0===e||e.remove(),super.remove()}styles(){return[...super.styles(),f.default,m.default,g.default]}css_classes(){return super.css_classes().concat(p.toolbar_button)}render(){c.empty(this.el);var e=this.model.computed_icon;d.isString(e)&&(u.startsWith(e,"data:image")?this.el.style.backgroundImage="url('"+e+"')":this.el.classList.add(e)),this.el.title=this.model.tooltip,null!=this._menu&&this.root.el.appendChild(this._menu.el)}_pressed(){var e;const{left:t,top:n,right:r,bottom:i}=this.el.getBoundingClientRect(),a=(()=>{switch(this.parent.model.toolbar_location){case"right":return{right:t,top:n};case"left":return{left:r,top:n};case"above":return{left:t,top:i};case"below":return{left:t,bottom:n}}})();null===(e=this._menu)||void 0===e||e.toggle(a)}}(n.ButtonToolButtonView=y).__name__="ButtonToolButtonView";class v extends l.ToolView{}(n.ButtonToolView=v).__name__="ButtonToolView";class b extends l.Tool{constructor(e){super(e)}static init_ButtonTool(){this.internal(({Boolean:e})=>({disabled:[e,!1]}))}_get_dim_tooltip(e){var{description:t,tool_name:n}=this;return null!=t?t:"both"==e?n:`${n} (${"width"==e?"x":"y"}-axis)`}get tooltip(){var e;return null!==(e=this.description)&&void 0!==e?e:this.tool_name}get computed_icon(){return this.icon}get menu(){return null}}(n.ButtonTool=b).__name__="ButtonTool",b.init_ButtonTool()},function(e,Ee,t,n,r){!function(i,s,g){"use strict";var a=["","webkit","Moz","MS","ms","o"],e=s.createElement("div"),o=Math.round,_=Math.abs,y=Date.now;function l(e,t,n){return setTimeout(f(e,n),t)}function n(e,t,n){return Array.isArray(e)&&(c(e,n[t],n),1)}function c(e,t,n){if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==g)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function t(n,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",e=i.console&&(i.console.warn||i.console.log);return e&&e.call(i.console,r,t),n.apply(this,arguments)}}var u="function"!=typeof Object.assign?function(e){if(e===g||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==g&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign,r=t(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===g)&&(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),d=t(function(e,t){return r(e,t,!0)},"merge","Use `assign`.");function h(e,t,n){var r=t.prototype;(t=e.prototype=Object.create(r)).constructor=e,t._super=r,n&&u(t,n)}function f(e,t){return function(){return e.apply(t,arguments)}}function p(e,t){return"function"==typeof e?e.apply(t&&t[0]||g,t):e}function m(e,t){return e===g?t:e}function v(t,e,n){c(T(e),function(e){t.addEventListener(e,n,!1)})}function b(t,e,n){c(T(e),function(e){t.removeEventListener(e,n,!1)})}function x(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function w(e,t){return-1<e.indexOf(t)}function T(e){return e.trim().split(/\s+/g)}function A(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function k(e){return Array.prototype.slice.call(e,0)}function M(e,n,t){for(var r=[],i=[],a=0;a<e.length;){var o=n?e[a][n]:e[a];A(i,o)<0&&r.push(e[a]),i[a]=o,a++}return r=t?n?r.sort(function(e,t){return e[n]>t[n]}):r.sort():r}function S(e,t){for(var n,r=t[0].toUpperCase()+t.slice(1),i=0;i<a.length;){if((n=(n=a[i])?n+r:t)in e)return n;i++}return g}var E=1;function C(e){e=e.ownerDocument||e;return e.defaultView||e.parentWindow||i}var L="ontouchstart"in i,D=S(i,"PointerEvent")!==g,O=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),P="touch",R=["x","y"],I=["clientX","clientY"];function N(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function z(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,a=1&t&&r-i==0,i=12&t&&r-i==0;n.isFirst=!!a,n.isFinal=!!i,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=F(t)),1<i&&!n.firstMultiple?n.firstMultiple=F(t):1===i&&(n.firstMultiple=!1);var a,o,s=n.firstInput,l=n.firstMultiple,c=(l||s).center,u=t.center=j(r);t.timeStamp=y(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=V(c,u),t.distance=U(c,u),a=n,i=(o=t).center,s=a.offsetDelta||{},c=a.prevDelta||{},u=a.prevInput||{},1!==o.eventType&&4!==u.eventType||(c=a.prevDelta={x:u.deltaX||0,y:u.deltaY||0},s=a.offsetDelta={x:i.x,y:i.y}),o.deltaX=c.x+(i.x-s.x),o.deltaY=c.y+(i.y-s.y),t.offsetDirection=H(t.deltaX,t.deltaY);var d,h,f,p,m,s=B(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=s.x,t.overallVelocityY=s.y,t.overallVelocity=_(s.x)>_(s.y)?s.x:s.y,t.scale=l?(s=l.pointers,U(r[0],r[1],I)/U(s[0],s[1],I)):1,t.rotation=l?(m=l.pointers,V(r[1],r[0],I)+V(m[1],m[0],I)):0,t.maxPointers=!n.prevInput||t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers,l=t,m=(r=n).lastInterval||l,n=l.timeStamp-m.timeStamp,8!=l.eventType&&(25<n||m.velocity===g)?(d=(f=B(n,n=l.deltaX-m.deltaX,p=l.deltaY-m.deltaY)).x,h=f.y,f=_(f.x)>_(f.y)?f.x:f.y,p=H(n,p),r.lastInterval=l):(f=m.velocity,d=m.velocityX,h=m.velocityY,p=m.direction),l.velocity=f,l.velocityX=d,l.velocityY=h,l.direction=p;e=e.element;x(t.srcEvent.target,e)&&(e=t.srcEvent.target),t.target=e}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function F(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:o(e.pointers[n].clientX),clientY:o(e.pointers[n].clientY)},n++;return{timeStamp:y(),pointers:t,center:j(t),deltaX:e.deltaX,deltaY:e.deltaY}}function j(e){var t=e.length;if(1===t)return{x:o(e[0].clientX),y:o(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:o(n/t),y:o(r/t)}}function B(e,t,n){return{x:t/e||0,y:n/e||0}}function H(e,t){return e===t?1:_(e)>=_(t)?e<0?2:4:t<0?8:16}function U(e,t,n){var r=t[(n=n||R)[0]]-e[n[0]],n=t[n[1]]-e[n[1]];return Math.sqrt(r*r+n*n)}function V(e,t,n){var r=t[(n=n||R)[0]]-e[n[0]],n=t[n[1]]-e[n[1]];return 180*Math.atan2(n,r)/Math.PI}N.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(C(this.element),this.evWin,this.domHandler)}};var q={mousedown:1,mousemove:2,mouseup:4},Y="mousedown",G="mousemove mouseup";function W(){this.evEl=Y,this.evWin=G,this.pressed=!1,N.apply(this,arguments)}h(W,N,{handler:function(e){var t=q[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var X={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Z={2:P,3:"pen",4:"mouse",5:"kinect"},J="pointerdown",$="pointermove pointerup pointercancel";function Q(){this.evEl=J,this.evWin=$,N.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(J="MSPointerDown",$="MSPointerMove MSPointerUp MSPointerCancel"),h(Q,N,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=X[r],a=Z[e.pointerType]||e.pointerType,o=a==P,r=A(t,e.pointerId,"pointerId");1&i&&(0===e.button||o)?r<0&&(t.push(e),r=t.length-1):12&i&&(n=!0),r<0||(t[r]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(r,1))}});var K={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ee(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,N.apply(this,arguments)}h(ee,N,{handler:function(e){var t,n=K[e.type];1===n&&(this.started=!0),this.started&&(t=function(e,t){var n=k(e.touches),e=k(e.changedTouches);return[n=12&t?M(n.concat(e),"identifier",!0):n,e]}.call(this,e,n),12&n&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,n,{pointers:t[0],changedPointers:t[1],pointerType:P,srcEvent:e}))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ne="touchstart touchmove touchend touchcancel";function re(){this.evTarget=ne,this.targetIds={},N.apply(this,arguments)}function ie(){N.apply(this,arguments);var e=f(this.handler,this);this.touch=new re(this.manager,e),this.mouse=new W(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ae(e){var t,n,e=e.changedPointers[0];e.identifier===this.primaryTouch&&(t={x:e.clientX,y:e.clientY},this.lastTouches.push(t),n=this.lastTouches,setTimeout(function(){var e=n.indexOf(t);-1<e&&n.splice(e,1)},2500))}h(re,N,{handler:function(e){var t=te[e.type],n=function(e,t){var n=k(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a=k(e.changedTouches),o=[],s=this.target,l=n.filter(function(e){return x(e.target,s)});if(1===t)for(i=0;i<l.length;)r[l[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&o.push(a[i]),12&t&&delete r[a[i].identifier],i++;return o.length?[M(l.concat(o),"identifier",!0),o]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:P,srcEvent:e})}}),h(ie,N,{handler:function(e,t,n){var r=n.pointerType==P,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)!function(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ae.call(this,t)):12&e&&ae.call(this,t)}.call(this,t,n);else if(i&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(t-i.x),i=Math.abs(n-i.y);if(a<=25&&i<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var oe=S(e.style,"touchAction"),se=oe!==g,le="manipulation",ce="none",ue="pan-x",de="pan-y",he=function(){if(!se)return!1;var t={},n=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!n||i.CSS.supports("touch-action",e)}),t}();function fe(e,t){this.manager=e,this.set(t)}fe.prototype={set:function(e){"compute"==e&&(e=this.compute()),se&&this.manager.element.style&&he[e]&&(this.manager.element.style[oe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return c(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(w(e,ce))return ce;var t=w(e,ue),n=w(e,de);return t&&n?ce:t||n?t?ue:de:w(e,le)?le:"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=w(r,ce)&&!he.none,a=w(r,de)&&!he["pan-y"],o=w(r,ue)&&!he["pan-x"];if(i){var s=1===e.pointers.length,r=e.distance<2,e=e.deltaTime<250;if(s&&r&&e)return}if(!o||!a)return i||a&&6&n||o&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function pe(e){this.options=u({},this.defaults,e||{}),this.id=E++,this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function me(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ge(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function _e(e,t){t=t.manager;return t?t.get(e):e}function ye(){pe.apply(this,arguments)}function ve(){ye.apply(this,arguments),this.pX=null,this.pY=null}function be(){ye.apply(this,arguments)}function xe(){pe.apply(this,arguments),this._timer=null,this._input=null}function we(){ye.apply(this,arguments)}function Te(){ye.apply(this,arguments)}function Ae(){pe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ke(e,t){return(t=t||{}).recognizers=m(t.recognizers,ke.defaults.preset),new Me(e,t)}function Me(e,t){this.options=u({},ke.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(D?Q:O?re:L?ie:W))(this,z),this.touchAction=new fe(this,this.options.touchAction),Se(this,!0),c(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Se(n,r){var i,a=n.element;a.style&&(c(n.options.cssProps,function(e,t){i=S(a.style,t),r?(n.oldCssProps[i]=a.style[i],a.style[i]=e):a.style[i]=n.oldCssProps[i]||""}),r||(n.oldCssProps={}))}pe.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=_e(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=_e(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===A(t,e=_e(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=_e(e,this);e=A(this.requireFail,e);return-1<e&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var n=this,e=this.state;function r(e){n.manager.emit(e,t)}e<8&&r(n.options.event+me(e)),r(n.options.event),t.additionalEvent&&r(t.additionalEvent),8<=e&&r(n.options.event+me(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){e=u({},e);if(!p(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(e){},getTouchAction:function(){},reset:function(){}},h(ye,pe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,e=this.attrTest(e);return r&&(8&n||!e)?16|t:r||e?4&n?8|t:2&t?4|t:2:32}}),h(ve,ye,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(de),24&e&&t.push(ue),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(r=6&t.direction?(i=0===a?1:a<0?2:4,n=a!=this.pX,Math.abs(e.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return ye.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ge(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),h(be,ye,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){var t;1!==e.scale&&(t=e.scale<1?"in":"out",e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),h(xe,pe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=l(function(){this.state=8,this.tryEmit()},t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=y(),this.manager.emit(this.options.event,this._input)))}}),h(we,ye,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),h(Te,ye,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return ve.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&_(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ge(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),h(Ae,pe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();i=!this.pTime||e.timeStamp-this.pTime<t.interval,n=!this.pCenter||U(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,n&&i?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ke.VERSION="2.0.7",ke.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[we,{enable:!1}],[be,{enable:!1},["rotate"]],[Te,{direction:6}],[ve,{direction:6},["swipe"]],[Ae],[Ae,{event:"doubletap",taps:2},["tap"]],[xe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Me.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t,n=this.session;if(!n.stopped){this.touchAction.preventDefaults(e);var r=this.recognizers,i=n.curRecognizer;(!i||i&&8&i.state)&&(i=n.curRecognizer=null);for(var a=0;a<r.length;)t=r[a],2===n.stopped||i&&t!=i&&!t.canRecognizeWith(i)?t.reset():t.recognize(e),!i&&14&t.state&&(i=n.curRecognizer=t),a++}},get:function(e){if(e instanceof pe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){return n(e,"remove",this)||!(e=this.get(e))||-1!==(e=A(t=this.recognizers,e))&&(t.splice(e,1),this.touchAction.update()),this;var t},on:function(e,t){if(e!==g&&t!==g){var n=this.handlers;return c(T(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==g){var n=this.handlers;return c(T(e),function(e){t?n[e]&&n[e].splice(A(n[e],t),1):delete n[e]}),this}},emit:function(e,t){var n,r,i;this.options.domEvents&&(n=e,r=t,(i=s.createEvent("Event")).initEvent(n,!0,!0),(i.gesture=r).target.dispatchEvent(i));var a=this.handlers[e]&&this.handlers[e].slice();if(a&&a.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](t),o++}},destroy:function(){this.element&&Se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(ke,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Me,Input:N,TouchAction:fe,TouchInput:re,MouseInput:W,PointerEventInput:Q,TouchMouseInput:ie,SingleTouchInput:ee,Recognizer:pe,AttrRecognizer:ye,Tap:Ae,Pan:ve,Swipe:Te,Pinch:be,Rotate:we,Press:xe,on:v,off:b,each:c,merge:d,extend:r,assign:u,inherit:h,bindFn:f,prefixed:S}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=ke,void 0!==Ee&&Ee.exports?Ee.exports=ke:i.Hammer=ke}(window,document)},function(e,t,n,r,i){r();const a=e(42),o=e(43);class s extends a.View{initialize(){super.initialize(),this.el=this._createElement()}remove(){o.remove(this.el),super.remove()}css_classes(){return[]}render(){}renderTo(e){e.appendChild(this.el),this.render()}_createElement(){return o.createElement(this.tagName,{class:this.css_classes()})}}(n.DOMView=s).__name__="DOMView",s.prototype.tagName="div"},function(e,t,n,r,i){r(),n.root="bk-root",n.toolbar_hidden="bk-toolbar-hidden",n.toolbar="bk-toolbar",n.button_bar="bk-button-bar",n.logo="bk-logo",n.above="bk-above",n.below="bk-below",n.left="bk-left",n.right="bk-right",n.toolbar_button="bk-toolbar-button",n.active="bk-active",n.default='.bk-root .bk-toolbar-hidden{visibility:hidden;opacity:0;transition:visibility 0.3s linear, opacity 0.3s linear;}.bk-root .bk-toolbar,.bk-root .bk-button-bar{display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;}.bk-root .bk-toolbar .bk-logo{flex-shrink:0;-webkit-flex-shrink:0;}.bk-root .bk-toolbar.bk-above,.bk-root .bk-toolbar.bk-below{flex-direction:row;-webkit-flex-direction:row;justify-content:flex-end;-webkit-justify-content:flex-end;}.bk-root .bk-toolbar.bk-above .bk-button-bar,.bk-root .bk-toolbar.bk-below .bk-button-bar{display:flex;display:-webkit-flex;flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-toolbar.bk-above .bk-logo,.bk-root .bk-toolbar.bk-below .bk-logo{order:1;-webkit-order:1;margin-left:5px;margin-right:0px;}.bk-root .bk-toolbar.bk-left,.bk-root .bk-toolbar.bk-right{flex-direction:column;-webkit-flex-direction:column;justify-content:flex-start;-webkit-justify-content:flex-start;}.bk-root .bk-toolbar.bk-left .bk-button-bar,.bk-root .bk-toolbar.bk-right .bk-button-bar{display:flex;display:-webkit-flex;flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-toolbar.bk-left .bk-logo,.bk-root .bk-toolbar.bk-right .bk-logo{order:0;-webkit-order:0;margin-bottom:5px;margin-top:0px;}.bk-root .bk-toolbar-button{width:30px;height:30px;cursor:pointer;background-size:60% 60%;background-origin:border-box;background-color:transparent;background-repeat:no-repeat;background-position:center center;}.bk-root .bk-toolbar-button:hover{background-color:rgba(192, 192, 192, 0.15);}.bk-root .bk-toolbar-button:focus{outline:none;}.bk-root .bk-toolbar-button::-moz-focus-inner{border:0;}.bk-root .bk-toolbar.bk-above .bk-toolbar-button{border-bottom:2px solid transparent;}.bk-root .bk-toolbar.bk-above .bk-toolbar-button.bk-active{border-bottom-color:#26aae1;}.bk-root .bk-toolbar.bk-below .bk-toolbar-button{border-top:2px solid transparent;}.bk-root .bk-toolbar.bk-below .bk-toolbar-button.bk-active{border-top-color:#26aae1;}.bk-root .bk-toolbar.bk-right .bk-toolbar-button{border-left:2px solid transparent;}.bk-root .bk-toolbar.bk-right .bk-toolbar-button.bk-active{border-left-color:#26aae1;}.bk-root .bk-toolbar.bk-left .bk-toolbar-button{border-right:2px solid transparent;}.bk-root .bk-toolbar.bk-left .bk-toolbar-button.bk-active{border-right-color:#26aae1;}.bk-root .bk-button-bar + .bk-button-bar:before{content:" ";display:inline-block;background-color:lightgray;}.bk-root .bk-toolbar.bk-above .bk-button-bar + .bk-button-bar:before,.bk-root .bk-toolbar.bk-below .bk-button-bar + .bk-button-bar:before{height:10px;width:1px;}.bk-root .bk-toolbar.bk-left .bk-button-bar + .bk-button-bar:before,.bk-root .bk-toolbar.bk-right .bk-button-bar + .bk-button-bar:before{height:1px;width:10px;}'},function(e,t,n,r,i){r(),n.root="bk-root",n.tool_icon_copy_to_clipboard="bk-tool-icon-copy-to-clipboard",n.tool_icon_replace_mode="bk-tool-icon-replace-mode",n.tool_icon_append_mode="bk-tool-icon-append-mode",n.tool_icon_intersect_mode="bk-tool-icon-intersect-mode",n.tool_icon_subtract_mode="bk-tool-icon-subtract-mode",n.tool_icon_clear_selection="bk-tool-icon-clear-selection",n.tool_icon_box_select="bk-tool-icon-box-select",n.tool_icon_box_zoom="bk-tool-icon-box-zoom",n.tool_icon_zoom_in="bk-tool-icon-zoom-in",n.tool_icon_zoom_out="bk-tool-icon-zoom-out",n.tool_icon_help="bk-tool-icon-help",n.tool_icon_hover="bk-tool-icon-hover",n.tool_icon_crosshair="bk-tool-icon-crosshair",n.tool_icon_lasso_select="bk-tool-icon-lasso-select",n.tool_icon_pan="bk-tool-icon-pan",n.tool_icon_xpan="bk-tool-icon-xpan",n.tool_icon_ypan="bk-tool-icon-ypan",n.tool_icon_range="bk-tool-icon-range",n.tool_icon_polygon_select="bk-tool-icon-polygon-select",n.tool_icon_redo="bk-tool-icon-redo",n.tool_icon_reset="bk-tool-icon-reset",n.tool_icon_save="bk-tool-icon-save",n.tool_icon_tap_select="bk-tool-icon-tap-select",n.tool_icon_undo="bk-tool-icon-undo",n.tool_icon_wheel_pan="bk-tool-icon-wheel-pan",n.tool_icon_wheel_zoom="bk-tool-icon-wheel-zoom",n.tool_icon_box_edit="bk-tool-icon-box-edit",n.tool_icon_freehand_draw="bk-tool-icon-freehand-draw",n.tool_icon_poly_draw="bk-tool-icon-poly-draw",n.tool_icon_point_draw="bk-tool-icon-point-draw",n.tool_icon_poly_edit="bk-tool-icon-poly-edit",n.tool_icon_line_edit="bk-tool-icon-line-edit",n.default='.bk-root .bk-tool-icon-copy-to-clipboard{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUSDBoBvcHQeQAAAG9JREFUWMNjXLhsJcNAAiaGAQYwB/xHwh/Q+ITEkfHQCwEWND4jmeb8H/JpgBwfI6cNBhLSEkqaGXRpgFRAcZoZsmlg1AGjDhh1wKgDRh0w6gCaVcf/R2wIkNqw+D9s0wADvUNiyIYA47BJAwPuAAAj/Cjd0TCN6wAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-replace-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxokK3gniQAAAHpJREFUWMNjXLhsJcNAAiaGAQajDhhwB7DgEP+PxmeksvjgDwFcLmYkUh2hkBj8IcBIZXsYh1w2/I8v3sgAOM0bLYhGc8GgrwuICgldfQO88pcvXvg/aOuCUQeM5oLRuoCFCJcTbOMh5XOiW0JDNhdQS3y0IBp1ABwAAF8KGrhC1Eg6AAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-append-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxkZWD04WwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAoUlEQVRYw+1WQQ6AIAwrhO8Y/bIXEz9jIMSDr8ETCUEPQzA4pMeFLKNbu4l5WR0CDOMEALBGIzMuQIBEZQjPgP9JLjwTfBjY9sO9lZsFA9IafZng3BlIyVefgd8XQFZBAWe8jfNxwsDhir6rzoCiPiy1K+J8/FRQemv2XfAdFcQ9znU4Viqg9ta1qYJ+D1BnAIBrkgGVOrXNqUA9rbyZm/AEzFh4jEeY/soAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-intersect-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxkrkOpp2wAAAPhJREFUWMPtV1EKwjAMTUavI3oawR/vtn5srJdREfzwMvHHQlcT2mpdMzFfWxiP5r2+JMN+mAiCOB72CABgR1cln4oOGocJnuMTSxWk8jMm7OggYkYXA9gPE3uyd8NXHONJ+eYMdE/NqCJmEZ5ZqlJJ4sUksKN7cYSaPoCZFWR1QI+Xm1fBACU63Cw22x0AAJxudwrffVwvZ+JmQdAHZkw0d4EpAMCw8k87pMdbnwtizQumJYv3nwV6XOA1qbUT/oQLUJgFRbsiNwFVucBIlyR3p0tdMp+XmFjfLKi1LatyAXtCRjPWBdL3Ke3VuACJKFfDr/xFN2fgAR/Go0qaLlmEAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-subtract-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxgsF5XNOQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABFUlEQVRYw9VWUQqDMAxNpWfxQxD1MoP97G7zQ5mH2RTZYLtM9lWoMbXtxLXNX4OG9r28l4hrd0PQoqxqAACYpxH25C/nkwCHyCBwSPoS09k1T5Fo+4EiExcC4v584xGFmyIXHBLRISAVZyZufUPVa4rcrwmPDgr93ylo+2GliLRUYHK6th/o/6r7nfLpqaCsagEA8Hh9FmcNKeRmgeYDC+SCq0B6FFi8/BcV6BdR9cL3gCv3ijPKOacsn3rBEcjmaVxpfGcg4wHxzgJJnc6241Hn23DERFRAu1bNcWa3Q0uXi62XR6sCaWoSejbtdLYmU3kTEunNgj0bUbQqYG/IcMaqwPS9jftoVCAQ0ZVDJwf0zQdH4AsyW6fpQu4YegAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-clear-selection{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUGEhcuan3d3wAAAoRJREFUWMPtlzFP3EAQhd+b3TNSzg0N5TWXLkJQUUaKhIQ4fgP/g5ArrriE/I3opEgRrZtIVJR0FJQ010SioUmEZHtnUpwN9gWHGA5BJCy58MraffvmfZ41v3z9hqe8BE98vQh4cgG+Ydzmnrng8efvQJNi/uN7dznx/B3ggtfhf4ehNdUttRzBDIm/2VTiiWCG1HK0nc+3UWtq8BQIiEEakEQOADBIA4QCQmBqoHBhFNR27ikQSmGdYCdTqCpEHMDZmEKRWUBEv1gBDg5SzRJnpopILWICgWuRYflLamuzxB2BmtYqSRIka5VWU8QduXO+1hRc5YZu5GAwmP2ZJzND0IBu5HCV2+NQcAhAVRsnC2IbPzPdSjzd6to6VtfWkXi6YLaVWr7xoAwkfpb8MnC3SH7rKSMBe4M0jA/OTicFIbtCGRIyNbURhcf3ErCd6YwA1m0HgAxhw1NGQnlXBHG4kylVlSJuH0RfIP2CkL2I/qS1gIAAQiBl1QwFggIHtyxgrxK5PgyfC0JWKoT0HLh8LwoietB4TYKaIl7yeNURxB05UtMxDOcVQlZIrlRKdK6m47gjR/fuBRQihyLArtNeJD50Izcx2Eczu7iFkIug4VM3cpOr3MKDekFED0fWUHv9Zq0kpLnridjhY3XDg7NTN0jDrhO3X7O9Wg7wwyANu4mnayNg3gmbu0tCNoUyBNGv2l4rB9EXynA7082FOxAQLhU6rQVO9T2AvWowFToNCJcPORGxIRcnpjZSKATSU9NxvOQnAPArDSaQoUKnNI4iufkGtD4P3EHIcWZhz4HLceSOyrR3Izf5memPAL2cX3yhAkonysZVaWLBkd9dw1Ivv2a/AYPkK+ty1U1DAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-box-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg0kduFrowAAAIdJREFUWMPtVtEKwCAI9KL//4e9DPZ3+wP3KgOjNZouFYI4C8q7s7DtB1lGIeMoRMRinCLXg/ML3EcFqpjjloOyZxRntxpwQ8HsgHYARKFAtSFrCg3TCdMFCE1BuuALEXJLjC4qENsFVXCESZw38/kWLOkC/K4PcOc/Hj03WkoDT3EaWW9egQul6CUbq90JTwAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-box-zoom{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg82t254aQAAAkBJREFUWMPN11+E1FEUB/DPTFn2qaeIpcSwr5NlUyJiKWVXWUqvlUh/iE3RY9mUekkPPURtLKNRrFJEeuphGfUUaVliiX1aVjGs6aG7+XX9ZnZ+d2fTl2vmnHvPPfeee/79Sk+may2/UQq/q7Qu+bAJoxjHIKqB/wlfUMcMVqI9bLZ+DGIKwzlzQ2GcxCx2xwvKOUKlaHTiX8bHNspjDONHkOmJBW5jIof/FvPh/06MZOb6cRc7cGn1AKUE5cdzlM/gAr5F/O24H3xkFRfxAbVygvK+cIsspjGWo1zgjeFpxL+BvnLw7laBA4xjIFJwrgu52DoVjKdY4HBEX8dSF3JLYe1fe6UcYCii3xWQjdfuSTnAtoheKCC7GNED5Zx4L4qt61jbTLHA94geKSC7P7ZeShQ0Inoi1IJuEOeORooFXkV0FZNdZs5qvFfKAeqYy7nZ6yg//HG0MBfffh71lFrQDCW2EvEP4mt4okZUDftz9rmGZkotmMxJRtlisy+MTniAWrty3AlXw0hFM2TD89l+oNsoOJXjbIs4EpqNtTCLXbiZ0g+M4mFObj8U3vsNjoZCVcmk60ZwthpepLZkB/AsivWfOJZxtpUQHfWib7KWDwzjeegBZJSdKFiE2qJTFFTwElsi/unQ/awXrU4WGMD7nOJxBY/1EO2iYConq93CHT1GOwucjdqnRyFz+VcHmMNefMY9nNkA3SWUOoXhQviSWQ4huLIRFlirFixnQq/XaKXUgg2xQNGv4V7x/RcW+AXPB3h7H1PaiQAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-zoom-in{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgsUBmL8iQAAA2JJREFUWMO9l12IlFUYx3//MzPrLpSjkm5oN4FFIWVEl66IQlFYwtLOzozsjHdGRSCRF0sfBEXRVV0FQuQiLm5CZNBFgRRaRLVFhbJ2EdiN5gbK7toObTPn6eYdPTvNzPvOBz5Xh/ec5/n/n89zXtEHmZqeSXSuXBz/3zfdKvBWJHQrwZuRcP0El+QkbQXeBX6WZEgm6TtJk5lM5o4Lc+cV6qpf4Ga20Tm338zeATItVK9Ker6yvPzp4NDQ3+XieGsCU9MzTYumGbhz7m4ze9/MHgvBgItACrgfGAj2jgAvAYs3wlEujjc13kii8YyZrXXOfWhmo9GnFUlvOOemarVapVqtkslksmb2KjARqL62ecuWN9NxbRInzrldAXhV0uFSIfdew7G/gNLU9MwS8CwSmE3Oz88fcXG5blfpqVRq0Ix8VIAAX0XgrVL7HDCHGcCaWrV60LUBN8Dae58aQIxEqcA592I9M610JL0cpG/U9TIHJNKY3RV5z0R+7Nd4HZ0P1g/2RMBuegLAsRMnb4vT8d5vqKfMzOgtAlADrkmqGywmiMBTwfr3dC9j1Xv/r6Tvg/5/5ejxE6cO7M9faVbQZrYNOFSPmqQvVo9FKexvi5uWX58943aM7DwAfBDY+FbSCxP5sdkGx55GeguzrUEXPaSo2pFkAbiSZQCAzZJOmdkjwd6SpB/M7KykQTPbA2wDhoIzRzcNDx9MJwGNIXdJ0mEzmwbujL7dbma7gd03A7lKfnTOvf74nl0r6bonTUbujRSUCrm2d4L3/kvn3JPe+8+BDW2i9o+kT7z3kxP5sYsA6W47oE64TsR7P9tQL4vA2mh9WdIscKxUyJ0M7aR7acOGzikD65EQLEjaa2ZXzMwDFeB6qZBbbLTRE4EGeSaozNOZgYFf8qP7lmIvs354n0qlHpB0T7B9Ogl4IgJJrmjv/SiQjbrkD+BMUkfSbYATPdckrTOzkciWAXOlQu5cYgLdPEIapud9wMOR9zVJH3ViKx333mtHMJvNuoWFhZ3A+ojMcja77njXBEKwJJfTcqUyCIQ34Mf7nnh0paMnXacFuGoC1mr3AtuDfLzd8Zuyl+rfuGn4HLAD+Az4qZQf+61TAj0Noj8vX6oC35SL43u7teG6rf5+iXppwW7/JUL5D03qaFRvvUe+AAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-zoom-out{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgsHgty9VwAAA0FJREFUWMO9l09oXFUUxn/fmXlpItppi22k7UJBRSlVkCytSAuKUloIdjKT0El3FXVXdVFKRVAQV7qQohsNwdA0UFvBhYtqUVyIVlRaogtFQVq7qSTVjA3z3nHzBq/jvPmTN/Ss7rv3nvN99/y794kByMzcfE/7picn/jenmwWeRUI3E7wdCRskuCSTdDfwBvCtJEdySV9KOhpF0e0/LF5SqKtBgbv7ZjObcvfXgShD9Zqk5+orKx8Oj4z8NT05kU1gZm6+bdK0Azezu9z9hLs/HoIBvwAF4H5gKFh7B3gBWFY3460kWve4+3oze9fdx9OpVUmvmNlMHMf1RqNBFEUldz8OHAxUX9q6bduryut+Sfvc/Wz62ZD0fK1afjND9y3gGSRwv1GMojstTxUUCoVhdyopEYDzKXjWwZ4FFnEHWBc3Goet00m7lZlZYQixKw0FZnakGZksHUnHgvCN5/KARBH37enpOVg58H13HV0Kxg/kIuD/ngSA2ZMLt3bTSZJkUzNk7k4+D0AM/CGpaXCyBw/sC8Y/qZd2GpZiuL9YLN4Sx/HpoP5/c/exQ1OVq+1yyt13SLoArEsJnMjlgfOffvK3u58Kprab2QezJxfG2iTzUzI70wRPG9jbmpmb95SNB9mpzp7/j2yVdNbdx4K565K+cvfPJQ27+x5gBzAS7Hlvy+jo4WIvoC3kWpcvS3rR3eeAO9K529x9N7C7zX6AC2b28hN7Hl1Vt44niVq13LUjmtlYkiQfA5s6eO+GpDNJkhw9NFX5ueNt2ARodyF1IHIN2JiOl4H16fiKpK+B2Vq1vBAqFAf4IJkGNiIhWJK0192vunsC1IE/a9XycquNXARa5OnApeeioaHvKuP7r3dTGsiLqFAo7JR0T7B8rhfwXARa2us4UEqr5Ffgs151i/08oTNKdIO770ptObBYq5Yv5ibQq/sl3Qc8lJ4+lnSqH1vFfp9koZRKJVtaWnqkWXqSVkqlDe+vmUDWpZMlK/X6MBDegKf3P/nYaj8ErN9fqZBYEsf3Ag8G8Xit33BaniTcvGX0IvAw8BHwTa1y4Md+CeRqRL9fudwAvpienNi7Vhu21uwflOT+L+i1X2TJP57iUvUFtHWsAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-help{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABltpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDpBODVDNDBDMzIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpBODVDNDBDNDIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDpBODVDNDBDMTIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpBODVDNDBDMjIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPGRjOnN1YmplY3Q+CiAgICAgICAgICAgIDxyZGY6U2VxLz4KICAgICAgICAgPC9kYzpzdWJqZWN0PgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNjoxMToyOCAxMToxMTo4MjwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAzLjY8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cphjt2AAAAT7SURBVFgJxRdbaFxFdGb2bhui227BWrsVKYgf2kJUbP9EUPuzEB803WTXJjH61Q/7Ya1+CMYKEVTsh4J/EpvY7BoabUiNiA8s1p+4KIhpoUUEselHqyS76TbZ3HuP58ydc3d2u4+IkQxczpz3mZkzZ86VYpXjvenpjZsLhUcliE4AuUuASAgptmt1EFdwPiclzIIUUwubNn17OJlcXo1p2UpodHRiux9xB1Eug1+slbzhFxGOKc851tu7/0oznYYBDA8Pt0U2tL8KQryIq2tvZqQhD0QJHRz3yqWhgYGBpXpydQMwqz6NCnurleCSADkJEfgKfOePqL80R/wV1ZaQyr1LenKfkPCkEPKeaj0xg7vxVL3duCmA0Vyuw/fl52hgBxsBED+h4Cv9z3R/zbRm8MTJTx7HQN7GQB6w5C4L4SX7M5lfLBpurjXMyvNIShiyi0l1pL8n9b7EDGPR8fHxzSsQ6XDB3618/xqo6Pk25V5MpVJllgHM1BO58RdQ612kOYZ+GXdij70TYQB05mpj+1kU5G2fB+l3PZtOf8NGx6ambnMXb3yAxg8wjSEG6OKKR9oicBQD+ZvpH2Wzj0lQpxCPG9qMv1x6hHNCsSAlHM7ZOa682vlI9tRDbvHGbD3nZAPpDoD/3JIrLpAs26UFkC3EMUA99hpfGtEBfJjNJnS2Gwnadnvl+Xw+iuc3DAJuNyIaSCHpilVldyDjjUxj3WDZIAhxhHHyRcdNuA7AAfUaXzVKODpzFiZ4/uLvh5G+m2no+C/pyIf7MqlEJB7bpqR6nXkEUfbeawuLaZsW2ISfNQ2vtaktQlGFQyIVGT0o2+2EC4iQNGwjBIN9qdQ5Qg4mk4X4rW3vCClLtowE2FOFUxKDfNmiZci3ovKKRFPh4FK9q4Zbdr+lKKJiA13TcHR2dmLBgdmQ0GAS2MZaEowY+XbAk09IvgtYZGp16SyvFhaHcIUh645t8T9DBCcnz5zZ4hZLu3DzK2QlL1QQa0Y+pHiJKPSuOGj3PmZTheM5w2TwqBxnvBZOTk7G5gvXJ5Aelms8wnJURL+olSWcfEhf6gDoUXPMq6ZlqbzWU2pE+3hi4s6F68tfIj9cBMlikr7Z0/P0b/X0yIcUXsDCF1WhtL4OROHaXk+xlkbV0Cu732Nmhc4peaWSg73pA8dq5RkvO37ldUTfXCKZv2q45MkhvG87WQEzpCCUSvV1d9GONBy3lMvgKSwrZig8gjAietWY0QriylO2jIo4yVbOSb7KB/qmI9BPKjHpSSXYauRyn92Nq9/Kcrj13x3s3v8D481glQ/0raiNYgX9njPSBOImbrHZePl+tfFmc9sH+Xaoh8NjOKSVdDMhjjYzQLy+dFceH5+IJQf9VYXX4tROg4ZFU8m31M3mfPEqUoJqCGJfvWpo2xnNfdrhC28n06SCeSzNZxlvBINGRXCtKS7EY1uV6V7HWAm38y1cXaXsMcOCvr9ySPj+af7A1U2HJXHzVNvUXVLIGyPf+jV0pf8GHoN+TLAyPkidTCi2RpPApmnR0Bd1zGRaB/B8Oj2HSw7LLbVR1MmskW8RdEWVXSJf3JbpAMgRtc4IZoxTh9qotQjCasm46M0YX9pV1VmbpvRH5OwwgdRtSg2vKaAz/1dNKVtb17Y8DCL4HVufHxMOYl1/zTgIgiYvBnFKfaNp3YjTdPz3n9Na8//X7/k/O1tdwopcZlcAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4oVHp0SwAAAQJJREFUWMPtlsENgzAMRb8RQ5VJItFDOgaZAMaAA0iZpN3KPZSoEEHSQBCViI/G8pfNt/KAFFcPshPdoAGgZkYVVYjQAFCyFLN8tlAbXRwAxp61nc9XCkGERpZCxRDvBl0zoxp7K98GAACxxH29srNNmPsK2l7zHoHHXZDr+/9vwDfB3kgeSB5IHkgeOH0DmesJjSXi6pUvkYt5u9teVy6aWREDM0D0BRvmGRV5N6DsQkMzI64FidtI5t3AOKWaFhuioY8dlYf9TO1PREUh/9HVeAqzIThHgWZ6MuNmC1jiL1mK4pAzlKUojEmNsxcmL0J60tazWjLZFpClPbd9BMJfL95145YajN5RHQAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-crosshair{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADEUlEQVRYR81XXVIaQRCeHqug8CXmBNETaE4gniDwIgpVspxAbxC9ATkBkCpQ8gKeQDiB5AQxNyAvUlrldr7eHxyGXZi1rMJ5opbp7m++7un+htSGF204vsoMoNXrlzSpfWa1oxQfhAegCZGaEtPorHo8znIoJwCt6+td8uk7ApUQCIHTF4BNAWzImq8ap6cP68CsBdDp9i9ZqXM7ML79g/EnCWD+jgMKENKqWT+tXK0CkQqgNRjs0OxpQIqKhoMxaG6/6JeRnK7T6yO2UvVqhYSlLX+ryORfgKn9ORDFIy7ky41yGcwsr0QAQfDH5zucOswx819fs4egI9OFCcD8DjBF7VNbEX0JzdWEt3NHSSASAcCxBDqMgt/623kvyTgNgNjJIfTjk4D4FqaJR1715MjmYAmA5Bx3AwUXQL+t105KaTlcBSC26XRvhjEIoLiq1yqXpr8FAGG16/ug4IT27fxBWu7EiQuAiImJpEMKE6nYM30uAIDDttSUOPfJP7JzbjPhAiBIh9QE67vIvoOi9WJfCwDavf40ulpjbCqmUf+W753ezURuh7Dg1SqflwAEHU6pgfyBq9Y4qx0LG++2fnZ/eUzcstmdM2AWH+jfc+liWdBJfSENf8Lifi3GVwC9mybOfi5dzatWVrbbLIHNva8p5h/16gkaFiLGGxbufkoE6XguwePiXLF3XmMfCUCUAqtKXU7sumd1CowOuJEi3Pg1FBpjitIGhyvVSfvmjci6ZR+rFQfDiPVE2jFYeICQ+PoewwjC5h7CZld6DBdyu6nDSKgzOyIMhmhK5TTqXYbRorZYM46TmpKAAOrGWwSJJekSB1yqJNOzp1Gs7YJ0EDeySDIMtJbQHh6Kf/uFfNFZkolJICRmz0P8DKWZuIG2g1hpok+Mk0Qphs0h9lzMtWRoNvYLuVImUWrmPJDlBKeRBDfATGOpHkhw670QSHWGLLckmF1PTsMlYqMJpyUbiO0weiMMceqLVTcotnMCYAYJJbcuQrVgZFP0NOOJYpr62pf3AmrHfWUG4O7abefGAfwH7EXSMJafOlYAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-lasso-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgwlGP1qdAAABMBJREFUWMO9V1uIVVUY/r61z57ZMx4DnbzgkbQXL5iCJphlWdpIGY4jpFBkEiU9ZNaDRRcITcIwMwgxoQtU2IMXdAZfMjFvpERXYiSbysyBEXFmyuHMnLP32uvrwT2xnY5nxvHQ93Jg7fWv71/r//7L4a59TRgqJk+Z6v3a+sv0OI5nk5wu6VaSVZImAThHsgjgrKTvM5nMUWvtmf5n8HodCIKgOgzDhc65pSTrJQWDsSNpJX1ljHnDOfdT37oZLLHv+8OMMasKhcIJ59xHAJYMlhwAJGUAzJfUTHLFuFzOG5QDU6dNMyQfs9Yedc5tBpAD4IYYNQGoBrDtQnt7/b0LFrJsCHzfn2itfQfAnZLiazytA3AaQAuAiwDaEgeNpGkkswAWSBqRONB38b88z5uTKePt6iiKXkk8jq+iJC5LOmiMaTLGHLPWhmWeHr7vV0dRtATAapAzIVmSo51zyzIlbm2stesFPA6pKk0r6Ryg93y/ek8YFvPOOTg3cDSiKCoC2OP7/rEoirYm4rUkF12lAWNM1lr7lqQn0+QA8gI2jBg5cj6Aj8OwmB+KAKIoukhyp6SRJAUgl0ndPLDWPi9pJQCbuviXvu+/GIZhW1dnJ24UJFuTjCCA2ADA8sYGWmsXS3qmL94kDYAtkh4Nw7ANlQJ5U6INT1KrAYC9zQdykl7nFSj5fXp5Y8NWVBhy7mUAjqShMYdMXV2dJ2klyRwAJ8lIeuGWCRMP7N7frEqSG2OmAFhKshNAp5wrmO7u7jEAngPQm1S2z2pqapr+OPt7XEly0oxwzq2RdFmSD2AMgKKJouhhAL4kA+Cs53l7e3t7uytJHgRBreTWkXwkKVJnJD0B4GAGwIJE9R6AFufc6UqSZ7PZbD6ff5dkA4CQZEHSqwAOISmXtwGIE+F1SeqqIP8d+Xz+C0mLJYWSAODteXffczjdDQNJ0BWMCoLg5gqIbRTJNwHsljQhUb0luWPM2LE7Thw/9m/5NCT/TByxAOYWi8X6/gdWV1dnfN8fNRBxJpMZTXKdc+6IpFVJWAEgkvSJpA0X2tvtVTaSjgOYBCAEEADYSHK87/sfhmEYA9gShuEDkgzJHyWtB/B1irQ2juP7ADxkrX0wOUOpzmdpzEY590HJ7Ni1r2kSyZOSiv2+hSRjSTXp/QAukzySNJOJkmalyNIl10hqMcasdc61XDNcQRD8BnITgNp+36r6kfcNFMMlLQGwTNLMEuQGQBfJl2bdPru+HDkAZAqFQux53jZHEsC6aw0eg2gylNRBcqcx5v04ji999+03AwsWAOI4Lsy9a94WkisAnE5a5WCJYwCfA1g7LJudI2lTHMeXBm1faiQzxkyRtF3S5CTupeAB+KG2tnZFT0/P30NO2VKLzrmfAbwGMipjG5Oc0dPTc0Md05SZ5U4Q2FxChErtEYD7jTGNQ3UgM8Asv90Yc9I5LSKRlXSI5CxJa0jWSALJjKRnAewfkniT+vwf7N7fXHK9rq7O7+jo+BTA/NRrdBpjnnLOnUrvXd7YMPQXSBunneno6IhIHgYwW1JtkgmBpBkATlVMAwOk3nFJ+VSoqgCMr6gIy2FcLtdKspAedyQN/98caDt/3kpyabUmf8WvG/8A1vODTBVE/0MAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-pan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4lKssI9gAAAOtJREFUWMPVll0KwyAMgNPgoc0JzDX2Mtgp3csKErSamGabIEUo/T6bHz0ezxdsjPJ5kvUDaROem7VJAp3gufkbtwtI+JYEOsHNEugIN0mgM1wtsVoF1MnyKtZHZBW4DVxoMh6jaAW0MTfnBAbALyUwCD6UwEB4VyJN4FXx4aqUAACgFLjzrsRP9AECAP4Cm88QtJeJrGivdeNdPpko+j1H7XzUB+6WYHmo4eDk4wj41XFMEfBZGXpK0F/eB+QhVcXslVo7i6eANjF5NYSojCN7wi05MJNgbfKiMaPZA75TBVKCrWWbnGrb3DPePZ9Bcbe/QecAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-xpan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4X4hxZdgAAAMpJREFUWMPtlsEKwjAMhr/pwOOedINJe/PobWXCfAIvgo/nA4heOiilZQqN2yE5lpD/I38SWt3uD9aMHSuHAiiAAmwaYCqoM/0KMABtQYDW11wEaHyiEei28bWb8LGOkk5C4iEEgE11YBQWDyHGuAMD0CeS30IQPfACbC3o+Vd2bOIOWMCtoO1mC+ap3CfmoCokFs/SZd6E0ILjnzrhvFbyEJ2FIZzXyB6iZ3AkjITn8WOdSbbAoaD4NSW+tIZdQYBOPyQKoAAKkIsPv0se4A/1UC0AAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-ypan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4anK0lywAAAMVJREFUWMPtlzEKwzAMRX/S7rlpIMXeOnaLaME36FLo8XqCdNFghGljyc4kgQi2Q/SUj0F/eL7eMMTKz6j9wNlYPGRrFcSoLH4XxQPvdQeYuPOlcLbw2dRTgqvoXEaolWM0aP4LYm0NkHYWzyFSSwlmzjw2sR6OvAXNwgEcwAEcwAEcwAEcoGYk20SiMCHlmVoCzACoojEqjHBmCeJOCOo1lgPA7Q8E8TvdjMmHuzsV3NFD4w+1t+Ai/gTx3qHuOFqdMQB8ASMwJX0IEHOeAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-range{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABCJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjMyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zMjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpzdWJqZWN0PgogICAgICAgICAgICA8cmRmOkJhZy8+CiAgICAgICAgIDwvZGM6c3ViamVjdD4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTgtMDQtMjhUMTQ6MDQ6NDk8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPlBpeGVsbWF0b3IgMy43PC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrsrWBhAAAD60lEQVRYCcVWv2scRxSemZ097SHbSeWkcYwwclDhzr1Q5T6QE1LghP6BGNIYJGRWNlaZItiFK1mr+JAu4HQu0kjpU8sgF3ITAsaFg0hOvt2Zyfvmdsa7a610Unx44Zgf773vvfneezPHNzrbhn3CT3xC3wPXYOC8LDzqdi8YY/gwh4BeknS/2th6dr2kf94AOp3OFyWgMyziOPbMDxV9FTtJnl1ut795Xd0/YQ0/vtYQwMT1KXWCfr2IjOWwtNehwN4xL9ykTrm6Pzl58yLn3J+mKh9mXbT3uRjGEDph+O8/TjfP5dBp7Ha7AX7O3o5nZeD/0E/OGyXntDgzA0X6qmCnrVutVlrUWV9f/3xo+pwhGDhvEPHOjoxnZjJggXmMHzBQ7NGNp9vxk61fr0HR7e/u7pZzCGHlc7qwBYYTT7tJYSx1AQzppyFPft5apta9w7SKcn0b7P7+/jCsDQ5mbc0dCmIJGDN0ehdcjsmkm6A6KUeKFOTE11PLxrC7Ukqh3ylL2fT0NAP9q6ur6rRCJJYsbKB0JsbCKMuy+xREePDyxQPCz+Crlw062QcA5wBOOt1l6vIl2WiI9F1fN6Q+BBqit6hEC4Hk08GQJMn4myjSP7RavVxgdaVUh/3U6HCMsPr9pYnJKRziHtWQ+un58+hGs6nsjQSjpuTyKGN3CX+FBwHXSiEVgjP+O8X6N12kIePES+GzTKAkGbNp8yJsGUMVzz8jPKReiyAQRimy5/cjye5RpF8utFp/+nwmT7d/NMzcFkS7yjJNGDaPURQxIQThEQy0SyF4l5WJYYhBa816vZ6dU7A6CAhbZVow/pDe0O9hVOoCi13r4BgBAvJHqMSQL2vE/iH6IAXEwgrRVUmBoRRwnwJQT98xEeVeSUyB4dJ5nwJBKdCFFGRmUCcu7rwIYypCTblaChuNBhWODrman5ub+4v0rMNBt8z6Ezh7GksJQpCbm79cMQE7QBFm/X6f0rjWnv8WRYg/QdbUpwDAEBy8vPyA8rNGzg3a8MiElwiM7dAtRqNoNptjGPM1laVxP9umWEMGLOKhKUOJDtBwDmzsw9fC/CzHr9SGuCTi2LbbKvVtmqXpCjMihBFa79Wrt5fGx9PDzc3fmu32Lf8qFliwU9emKhBSp+kRKn/hu9k1COEDbFdt/BoKWOAkuEbdVYyoIXv8+I/QK9dMHEb1Knb7MHOv8LFFOsjzCVHWOD7Ltn+MXCRF4729vWMDK+p8rLkvwjLg4N4v741m5YuwCI9CvHp1Ha8gFdBoPnQAkGsYYGxxcfEI7QQlFCTGUXwjAz4tWF+EpymOWu7fglE7qsOvrYE6g4+9/x/vhRbMdLOCFgAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-polygon-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEjc1OfiVKAAAAe1JREFUWMPt1r9rU1EUB/DPK0XbqphFHETo4OCiFhwF0V1KHbRSROLqon+AUMVRRFBwEbRFMBiV+mMW/wIxi5OD1kERRVKRJHUwLvfBTZrU5OWBGXLgQu7Jfe98z/ec7z0vKa88b2q1BDtRHdAPBaylm1NzsxsOjPnPNt6WSWprbft+/c3I3zOAjhT1Y4+fvcjEQJIXnVECSa+AhqIHqlHH5lWCZoe+Gk4GRgDG86j9SAUdlDBSQaZhlOkuHyoVdJmsw98D1S5fM4NYM1LCpqM+Lwa240oLgmZzpVZvzKT75VLZcqksSZKWlQeAy/iORVwIvh31xvotvK7VG3Px4aWHj3Jl4C2uYSvq+Bn8v6LLbaVWb9zsBiKLCvbiNG7gLm7jAYqbPHMJMziZ9lsKoh8GtqCEVVzHftwJn+TFHp4/hg8BSCYVfMOZoPEv2NZGdy9WCGUr9toDR3E2/H4V6nwRe/BmgN65H1ZhvMuB3XiKIyFoGefwO6ysVkUlrNUNsyAK/jli533Q+Y8cJFvAeXyMS1CI/jiMr/gUtD2LQwMGr4R3p7bY3oQHQ5b38CT4D2AXXg6YcQXHpyYnlqKsi5iOAVSwL9zd7zJ09r+Cpwq72omFMazjT9Dnibym0dTkRDUKrrgwH7MwXVyYB38BstaGDfLUTsgAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-redo{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4itK+dVQAAAaFJREFUWMPt1L1rFFEUBfDfJDaBBSslIFjbaSFp1FJQFMVCHkzhKIqdUYOCoBgErVz8rCwiTDMwBCIKipDWyip/gxAIWAmBgBC0eYFh2Gx2l9lFcA5M8e59782Zc84dWrT435Hs1siLchqn43MS0zgW22vYxjesYjVLw3YjBPKinMUTBOwf8J5fKLGYpWFjJAJ5Uc7gIW6jM6Kim3iNZ1katgYmEL/6I+YasvY7Lg6iRpIX5VF8wuEe/XV8wGf8jN6LWTiAc7iEQ7ucPZ+lYW0vAtfwvlbfwCKW9gpXDOv1mJvZHiSO91MiyYsyiQSuxtpXXM7SsDmM5nlRdrCMMz3sOJWl4Xevc/vwBzdwAl+yNNwZxfRI+GxelK9ikHcwh8d4NNR/YFRES1ZwoTYdR7I0rNf3TzVNIGbmSvR/Bx08mIgCFSVu4l2ltIWD9WxNGR+W8KOynqnZ0rwCeVG+wa0hjrxtWoF5dAfc28V8Mib/n+Nev5dnabg/zgw87aNEN/bHOwVRiRe4Wym9zNKwMKkpgIWKEt24njxiJlq0aPFv4i9ZWXMSPPhE/QAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-reset{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4gWqH8eQAABLdJREFUWMPtlktsVGUUx3/nfvfOlLQaY2IiRRMQIRpI0PjamJhoVASDvNpCpYw1vJQYSVwZwIVQF6wwRHmkAUof9ElrI6VqDAXcID4TF0IiYQMkSlTokNCZ+b7jove2t+NMH7rQBWd3v+989/zP+Z8X3Jb/WGQySvUNTQBJESkNguAVYIWqzhaRhwBU9WcR+QXoymazn6jqzUQiMQSQzWZRVdal1vwzAI2tHQBPOuc2AbWTdOyQ53n7nHNfRwee51GzqoIQMCLDpr3x/tLQ0oZzrk5Vj0/BOEBt+KYuOlBVGlrahr0Wob27t3gEjnZ2AyQzmUwHsDgP6J/AYRE553neDwDOuUdU9QngNeCumK4TkRMhZUORcYC1qysLA6iuSQHIwkWLD6lqapQsuSmwTVV3h99I7EcAR462A2xR2Ilq6ehTaejvO1774kuLNALR33eclsaGsQDe3fYegHl43vyNwEeqGl1963mm2jl7YZRTQ82qlWP4HM6ZToC5ztkW4LHQoALru7s6Di5dvlIj/e6ujrEAWoZDn8hmMjXATMACGaAVuBjXTVVXFc/AxhaA+4zvn1DV+eHxVWPMAmvtb5GeMWZyZVhI2rt7qVy2pOh9U1snwIPW2vMi4oWJuBPYHkVAVScPoKmtkzVVK6cEMsyJraHhiCqJqJUwj/JRz7TW1iSSyR2rVyylqa0Ta+24Ic8vXaAEmDFc/l5Z2A/80OibuVyuz/f9ElUdHCmvw82t5HK5h6y1PYhsz2YyGw43t2KtBZHIGwB6+j4rCkBVUdV7gXrggnPuu8h4eP+xMeZS2D0rJYZ6AdAMzAt1b4nI26p6IFZOY8pugijcKSIHVLUK0LyST4vnrVfnWr3mjmP4QTATaERkXkypRFX3isjmuHdRJEK6Ckqquopp06bdKCkp2Sgi7XnGLcg7gzeutwNIiPYc8HixqIrIOlU9ONVIhHPEd851icgSVXUiskVV94gIqoonIt0i8gfQCfwae38e6BWRXuBZz5jZ8VbaOE4EIqlZVUEQBLlkMplS1QER2RwkEnsSyaREDUzyeNsvIhvCMqkH1kdIJ2o+k8iJB1LVVRfjZ6nqqlEAIbdVQGto8Lrv+/dbawcjAL7vc+6bs+zetetfLSHxniIFGofGGsU2oC7eOCbDfZ7nQawBOSAX74SF9oEPImOq+r7nmVmxb5raukZa8UReGmNmhbMkAwwBH467EYVZe49z7kdgenj8k7V2oTHm8kgdWcvrNdVFjR8cHkYzjDH9wLjDaEwEzpwa4MypgWvAjtjxfGNMj4jMiT+M+kFsZI/Q6Pv+HGNMT8w4wI7TAyevxXVPD5z8+zD64tRXAMHVK1eaVLUyVvuDqroV2BOnJF4ZIedviUidqt4Re9s+vbx8zZXLl7PR2+nl5Tz/zNOFp2FzxzGAklw22wUsLLaSKXwf8vhosZUM6PeDYEUum70VHfpBwKsVyyfeikOP6oBNwN1TrLbfgX3A1kKLzKeff8nLLzw38T5wZDgxn1LnNk5lLRfP26/OnR2hwfNYW2Atn9RCsrf+EECyrKysDFimqhXhyjY3VLkAXBKRDqA7nU6nS0tLhyIj6XSaN9bVclv+l/IXAmkwvZc+jNUAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-save{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4UexUIzAAAAIRJREFUWMNjXLhs5X+GAQRMDAMMWJDYjGhyf7CoIQf8x2H+f0KGM9M7BBio5FNcITo408CoA0YdQM1cwEhtB/ylgqMkCJmFLwrOQguj/xTg50hmkeyARAYGhlNUCIXjDAwM0eREwTUGBgbz0Ww46oBRB4w6YNQBow4YdcCIahP+H5EhAAAH2R8hH3Rg0QAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-tap-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NzIwRUFGMDYyMjE2ODExOTdBNUNBNjVEQTY5OTRDRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCOTJBQzE0RDQ0RDUxMUU0QTE0ODk2NTE1M0M0MkZENCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCOTJBQzE0QzQ0RDUxMUU0QTE0ODk2NTE1M0M0MkZENCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTQ0QzIwMUM1RjIxNjgxMUE3QkFFMzhGRjc2NTI3MjgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzcyMEVBRjA2MjIxNjgxMTk3QTVDQTY1REE2OTk0Q0UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6eYZ88AAADLklEQVR42rSXf2TUYRzHv7tuGcfE6Vwb5zLSSjEj7Y9KWqfEmFZJP+yPMdKKmUrrn0iUfjhWlLFi6YfNrF+StBoTo39iYkTGco4xxxG59P7k/T2PT8/37nu3bx9ezvPj+zyf5/PreS78bGLS8SmrwE6yje3NHJsDBTALpknBz6JhH3NiYAB0gHqPOVv52wJ6QQ48BzdAttTioRJjdeA8mAHHS2xuk3p+M8M16ipVQE49Ds6CiFO9RLjGONf05QLx6wPQaBlbBlPgJVgkP0ETiIJ2sB/E1XfimjfgBOOlKDUqCGOcqBcQnw6BYW5YTo4wbvQhMmCfGRemC2rBiGXzWUb+kM/NRZ6CHWBM9ce5R61NgX6ayhSJ5EPlItlDRNkz4JbFHf06BkSzHjXxM+gDv1S/mPUo2AXWgt9UUHL/IVhS8yUV1/EbV3o4N+NaoE9Fu/i827K5pNYHnqAVJECShWmAaddpscYFFXwR7vnXBRGlnUN/L6kqKJlxnRUuDbaDBiL+vst5d4gpcpBrqk/2jIgCKVUolhntplzivHmwh4stGOPfwBWwl/2dpp8p7xjQZqFLiQJtauKkivYm+kzccpK57yXfOUe+P23JqAnVbhMFmlXntCWnxbT31am9ZJ4BJifsUmNTqt0cYhA5ypympPg7VkEKunPbVb8cIG+0kyHLJZNR7fUMooUKFHAPkfQo58VLK+RzwRDd4FdWG9mjpaAXzqkJa1R7kQttqEABWXMjOOxxVRfnhRm5URX1prk/0pQHwNcKlchZ+jdpC+hFdVqO0my9Hj5dkYgCn1Rfh/KdlNDHrJhPqlDih+IfBd6qwpOgEqYMsorJ2HtWxtagLJDn/W3KRfPOZhoeBJfZPgVeGKeKrkQBh5dLXl25Ny3pc4/1fkTdbvFqFQgbxWeYD0hXulhQ0pYiM1jG547fcbMQpVnHTZEn9W3ljsCzwHxCdVteNHIZvQa7/7cC7nV6zHIfyFP9EXjFa7YxKAVqPP4bxhhoLWW+z9JyCb6M/MREg59/RlmmXbmneIybB+YC/ay+yrffqEddDzwGvKxxDmzhc0tc80XVgblqFfgjwAAPubcGjAOl1wAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-undo{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4em8Dh0gAAAatJREFUWMPt1rFrFFEQBvDfGhACASshkL/ALpWVrSAKEQV5sIULWlgZNSgIFkGIVQ412gkBt1lYLERREFJqJRaW1oHAoZUQsDqwecWy7N3tbe6C4H2wxc682Zn3zTfvLXPM8b8j6RqYF+UCzsfnHBawGt3fMcAX7GEvS8NgKgXkRbmMxwg41TLsN0psZmnodyogL8pFPMIdLHUk7hA7eJKl4U/rAuKu3+HslFr/FZezNPSTFslX8QErDe4DvMVH/Iq9F7VwGpdwZUjsPtaSFjv/1vCBPjaxO0xcNbHejLpZrrlvJCMCT+JzA+2fcC1Lw+GE4l3CG1yIptfjCtiKoqtiJ0vD3aM0Py/K57iIMxgkQxat4EdN7e9xdRzlk+LEEPvDWvIDXJ928sYxjL36icWK+VaWhlezOIqbGFirJd/H7szugrwoX+D2BDEvszSsT5OBdfRaru/F9dPXQF6U27g/KnmWhgctxqyzBrZGMNGL/rHI0nDkKXiKexXTsywNGx0OnFbFNk3BRoWJXnw//j+ivCi32/S8CxPVNiWOAdUiJtXITIqYY45/Cn8B2D97FYW2H+IAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-wheel-pan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgswOmEYWAAABddJREFUWMO9l09oXNcVxn/n3vc0fzRjj2RHyIZ6ERuy6CarxJtS0pQSCsXNpqGFWK5tTHAwyqIGN7VdEts1LV04BEoxdlJnUbfNogtDCYWQRZOSxtAUCoFiJY0pWJVUjeTKM9LMe+9+Xcyb8ZMychuofeHCffeee7/vnXvOuefYlV/+mv932//tb91z/Y2rvxmMHQ+4FcEfOIGN4A+UwDDwoQScc7vM7AIwB8yZ2QXn3K77Ab6OgJnVgeOSbkqaBiaACUnTkm4Cx3OZzwf+qzcRQup1zNZ9RwDe+0YI4YKZTUn6zCGSMLOfAF/03r+QZdnyfwO+ePEiI6N1nPMgMDMkETLRbd2mXG8gCbd9YiIKIUxLKoLfBN7I+80+CUlTIYTp7RMT0b3Af37p8kh5y9gZcy4Fzt+5szqSaxkzUR7dwtrKMmaGW242d0t6vrD/He/90865o865o977p4F3Ctp4frnZ3L0Z+OryUrVSrZ0z8ZxhHjhcq1XPrS43q/0flDlK9XpPA2ma7gMeyvfPx3H8TJZlH4YQWiGEVpZlH8Zx/Awwn8s8lKbpvmq1ahvB641SXNk6dhLskNA2MIBtwKHK1vGTW8bKMRbAMgyPqWeETxUM8VSSJAv52JmZA0iSZMHMThWwnipXKp8hsLLcSaIR92oU8xjSayCQXotiHotG3Ku3m+0EOQwPQCDggMf7BzQajSs5eAk4B5zLx4O1vD2eJMmAQKliscgASJMw21pansFs1swQ/DNLmUmTMNuXX+taXHTDaj5OW612R1JZ0nFJJ/J+XFJ5aWmpA6S5bHV8fHsPHFU6q3pJCjtFxtrKMuXRLUUXXxdrRLazFOtUolZlsGhmACsgnHPTwJnCnjP5HMBKLotzxsTE9rgDL0t6LoriKsDIaB31ZEK+JxQJRHFUBR2NqLw8OTkZR0OC0ntm9k1JWU7OA4vD/mZ+YfElsANmNEKi75vztzB5M8uAr+bx48me88g757PQ1U5zNg52YH7hX8l6f+4Fi3c3BqHNmkI4YQOV2MGCNu9qHPYCewfzbrC+XSGcWEcgTRKA3wFfyzdDz5d+D3x9CIcfA4eBbQS9LscskgfLnHNPAnslvS/pbZDHLLPADpx9N9fqpSIBH8cxWZY9m6bpb4Ev5fN/iKLo2TRNgdx/eo8Wk5O7Ts/N/SOSdMjHdj4kmgkIEJLJzPZKetvMTkIvFLsR25Ml2gfuF5M7vnA66sdooJYkCSGERe/9VAjhzRxoKk3Tvg3U8nulVqvx8cyNpER2umM+SdOkbc5B8JhpqBdIgTRR24h+lpKen731aRIN7thscH9Zlv0d2F8YD2TIX7F2uw3A7ZWV1a0TYz9ca8cJZHRbuRuaDfUCw9/qJHamPOKToAwHtHN6lMvlSkH2o7wDMDo6WuGuQbbn5+YAKNcb3J5fSvrhtTY+vsOPuD1IOyRhMOkj9kSx29HfXB5RUnS964NT2+3vbGbxG9auO2cDNuV6A8NTb5TitBuOpQkfYD2vwOxgmvBB2g3Hto5X42EJyVsFlztbKpXGNgqVSqUxSWcLU2+tdToa9hasLjfPYlwGa+bTi8Dl1dvNsyvNtQQL9MO2w+HM7BqwlAtPdrvdq9773WAVsIr3fne3270KTOYyS2Z2bbXdHhogKmPj7YWF+VOSXs/v/9KdO+0fVBrjbRkgB/KIDBnYu9f/7D+ZmfmRxPd6qwB8YmZXcq1MAQ/nJhTM+OnDe/a8+PGNG9lm19V/D1Qw7HXZlcRa69+U6w38l5/4ipxzf5X0CPBILjcGPJH34pVcc8692FxcXLlXRnTwwH7+9P4f8aWe3fY59LIqo1NMyQBCCHNmdgx4BegUWefjDvCKmR0LIcz9L8nokSNH+PRvH4HC3YQ098pSbevg24qlmZmNmtmjkg4D3+j/tZldkvQXSa3PW5ptlpL3ZaIN99OS9F7+IgKUgSyEkNyv2nHT7DZX0dr9rpjua2l2r4rogRAYVqZvnPsPqVnpEXjEaB4AAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-wheel-zoom{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgskILvMJQAABTtJREFUWMPdl1+MXVUVxn/fPvf2zrSFmUKnoBCUdjRoVaIxEpO2JhilMYBCtBQS2hejpg1Uo2NUrIFAoyGmtiE+GHwQGtvQJhqDmKYRBv+URFsFDNCSptH60DJTO3dKnX/33rM/H7rvsDu9M20fDMaVnGTvtb69z7fWXmvtc/TEzqd4OyXwNsv/FwFJQVI/sA14SZKRLOlPkr5TrVYXHz70quYkEEK4TtI2YAgYkrQthHDdhV5uuw+43/ZrwCbgRttgY/tjtrc0m83X3/f+D6ydnJhYcB4BSZcBA7aP2d4ELAGW2N5k+xgwkDB0IH19CGGH7R8B1aQeAf4KvAw0ku4K2zu7uru3ApdPEyiKohd4TNKjtjt5h6RHgccSNrddbvuHtm9Jqoak7xVF8WFgdavV+pSk5cCObNmXgK++85prCj3z28HKqZMnH7D9YAY4BvwujT8BvCuL1INX9vVt+dfwcCvNb7f9q2RuSfrGvWu/sL2Nf3LX7pzvj4ENSGBPVarVd4fRkZFltjdmoMGiKO4IIWwIIWwoiuIOYDDzeOPoyMiyFLkum7WJCMDztrcrTTrIRuAQZ6NcK1utL4dWq/VZoC8BhqvV6l1lWb4YYxyLMY6VZflitVq9CxhOmL60hhCKeYiV7WMKIXw9jT1HpXw3c+bOAKzOjJubzebJrKQCQLPZPClpc7bP6rMYKtjXth2OMf7tIkr11Wz8oQDc1Fb09vY+kQw1YAuwJY2nbUluAnCWpKkaFl6IQIzxivaR2SYA89sJVK/Xp2x32R6w/a30DNjuqtfrU0ArYecDCEqgLqm94T0dEm9mBG7PxkdDlkBnkhebgIezNQ8nHcCZPL9ijE1Jf/bZZoPtzbavmqNZLbf9tSxq+yoduuJ+SZ+zXSZyBXCqU+d8fvC5yRUrV+0G2j3g2hDCLyXd/+Su3QdnvP/zCuH72LWsgf2k0oHlH2c2odlkxcpVEdgr6aDtjyb8x20/J+mA7T9I6rL9SWA5dne2/GdXLl58qNJh398An85yTMA+4DOz8Dgu6Zu2dwJXJ91ltm8Gbp7Fgb+EEB4aHhpq5CEtACqVyr3AC0AlPS8k3TSmQ2YPhhBuS/1/LpmS9JTtNTHGfwBU2uUALARotVqniqJYH2Pck85pfavVaufAwnQvnHc0McaDKVptebN94QAnJB0EdtjekydyZXqjs/0ZgLIs/w6sy8bnYGYJ63pgERKC05JutT1kOwITwL9tvzlzUQUYB+Zjs2DBgu6xsbGJZHstByZbezregcBXeCsEz1bnzXt5anLyzLq71zDLxTRdVgemdx0fv2e2w5thO5DbiqL4oKT3ZKpnpyYnz+SY2ZpTAPZmJfdIrVZbNBNUq9UW2X4kU+2dcf53Aj1pj2PA7y/6m1DS00A9za9uNBq7iqJYBuoGdRdFsazRaOzKSqye1rTbaa/tlbYrqXQP2X4FIA9/J1l39xrC0v7+w5IeB8XkwS1lWe6TGJAYKMty31tfO4qSHl/a3384I3CDpI+kzC4lnRfrue6GytEjR8oQwlY73gC0L4qlth/q0M1/LYWtR48cKQF6enrC6dOnVwGLEpnxnp7en4+O1i/tszzGOCTpPmB7ahb57QUwBWyXdF+McWg6MScmuoA8OX8xOlpvXGz422XYTsB/SnpA0h7bX5R0WzI9HUL4qe2XbI+dk3xl+V7gxoztD5jRI+YK/zkEEokx2/uB/RdzIfUtueqVN04cXwF8G3iHY3z9Urw/j8ClyhsnjrcS2Vv/J/8NLxT+/zqBTkcxU/cfEkyEAu3kmjAAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-box-edit{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4QfHjM1QAAAGRJREFUWMNjXLhsJcNAAiaGAQYsDAwM/+lsJ+OgCwGsLqMB+D8o08CoA0YdMOqAUQewDFQdMBoFIyoN/B/U7YFRB7DQIc7xyo9GwbBMA4xDqhxgISH1klXbDYk0QOseEeOgDgEAIS0JQleje6IAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-freehand-draw{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADTElEQVRYCeWWTWwMYRjH/88721X1lZJIGxJxcEE4OOiBgzjXWh8TJKR76kWacOBGxdEJIdk4VChZI/phidRBHMRRIr7DSUiaSCRFRM3u88gz+o7Z6bBTdjmYZPf9eJ55fv/5zzvvDPC/H9QsA66Olo9Ga+/MdR+Ljm2/KQIULsz9FqItGdOfJKLhApLgVkiSCGODjWit7QpKWy+TNrFeXvzKVUT8NiTVaIgDcbiCFJ7GiT8WkARXAdYBK0Lbhi/CenArRNskuM7/tgNp4ArQ42dwjf3WY5gWTqC7O/NbNn2Xkfw/YwdSw/We14HP2IEZwX+y9cZ9SH0LmgFP7UCz4KkENBNeV0Cz4b8U8DfgKiDxMWwUXETqLvJpCQpXZfawbzS7t9v5pL19cHBwfja7YA0y/lyCM0+E5hv5+piZXwKYcF23as+37bTXsQVqgkL0p/34fHR7DcBtbetFsBmGDwMOJCggYG55yw7dMlk6DuC1Bdu2RsCU9TYWQq2IoGbsreZ5NzvEqfSBsIsIy8OTbcdgiRHeh4o8AFAEwDakbY2AaCCpH7V9aGhoUUUy3UyVbkPYFuYLDlUZH8XBpwxkK0Dbgxg5HcVi0ent7a0RULMIozaHBSMfF9b2SzdutFcFB2FkwMIJOG6qfteXOa1nHZ48tyefuwyfT9s6wtzZ3t7eZse2DR2I228TtHXzuWCx9g8MtK5cuHCZTH4tiHEOa4xFngvTyS8f35d6enomiCi4/foEXBkZaQuukChL4FYA2Whd7YcC4gEdW3CpdL3LtGAVCVYJywEyTpAuJKeMOKXZs/Bw947C50KhUFOG4cwz35cjWNBlHGeD53n3xsfHP/T19U1qciggar8Fa4I3PHobIotBWBtc2hSiChyZxVzM53Pv7FVH6Tp3uVy+g0r1ImD2GjIrQGYIxjnfuXTZGICS5k/bBwJoubwEFX4TLah9EXomJGMA3za+f9913Yl4TnzsDQ+vE6YTZOjHh4ngibstt1pzQwd04F0bPStEBpXqRoBeQ/AKghfBnOEKgS+Q7z91Xfdz/HGKg8Ox7z8iYD9z6wqTkZFgnvhMGP9VZ2or1XVkPM9z0mytSfVsHa1RLBZbLoyNzUnK+ydz3wC6I9x+lwbngwAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-poly-draw{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEjglo9eZgwAAAc5JREFUWMPt1zFrU1EUB/DfS4OmVTGDIChCP4BgnQXRxVHqIJUupp9AB8VBQcRBQUXIB9DWQoMRiXZzcnQSA34A7aAuHSJKkgo2LvfBrU3aJnlYkBy4vHcP557zP/9z3r33JdXa647N0kHSZd5Nn0rSxc8G3cXp85sMcnZZ8vge3osZ+l3vB8CWFA0iL14t79h210swAjACMAIwAjACkB90D/8/GchI9ve4nPwTBh5E9ws7OepzGWb9EddSn51Op9ZstadSg4VK1UKlKkmSDSMLALewiuNh/hVJq71Wxttmqz0dG88vPc+MgWP4grvYG3SLOBrZFFFrttqPe4HIDxh4GSei+98iSlusuYopXEAjBtEPA3tQwUpwluAbDm4TPJUz+BTW9l2Ce6G7L0X/Bw8D3T/7SKKIDzHg7QCcxjvcQAEtXAnrrg/RP0/DKPbqgcN4iVOR7gcO4dcQgRuoh7HSqwlP4n20m63jJu5n8MkWMYfP3UowhzdR8FU8w9iQwevBdyq3/27CMRzAE5yLuvsRLg+ZcR1nJ8YL81HWJUzGAPaFZwe/Q5MdyYDyNHgjzO90YyGHtVDncuiJchaHw8R4oREFV5qdiVmYLM3OgD9k5209/atmIAAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-point-draw{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEiERGWPELgAAA4RJREFUWMO1lr1uG1cQhb9ztdRSP7AF1QxgwKlcuZSqRC9gWUUUINWqTh5AnaFOnVPEteQmRuhCURqWsSqqc9IolREXdEvQBElxtdw7KURSFEVKu4w8wAKLxdw9Z+bMnRmZGXfZ29//II8th4WwGVNyIoQLYB5vxA9Caq04iUd9A+7ZlsNC2I7TdSd2hZXMJKlnTqp9jtl/GBaqoyQ0noFKpUIzBicYYc+DEFpxkglc4oVJa5gvDn8v1xV2irG3FM4NSVwjUKlUaMcpJhCGmSEJQ6QGD8M5WnHCd8+f3QCXpPLx8WNwv0j6Bm9FMK7FJ3WBE+R/2t7c/GBmFvSBrzRTCsyTDjXrxUgEMtpxynJYmJoBJ4VAybwVARgvL7Oik0okCodnKpVKX7P0leiVMb0VvbJT+upznK4vh0GIeQwwQStJkHQD3MwsCALTJRG7Qrdrj5m/djgYaIa0hlkRdJk26XEgC9txurccBtVW3IudBImmZuACUP+ZlIDBt9FKcubYNTcAH/X0RYM1E7utJPlqe+uZzPxUcEkiSS4sTT95n15Mud0xWC0o2PAWOCdK3KYZlFxfM+tHOcnMzNr1es18ug+cgsVjP4yBU/Ppfrter1m/+l0+zYygML1xRVHU7TSb1cSzBzoBzszsH+AMdJJ49jrNZjWKou6wBnwOzcyndBpNbuueURR1Dw8Pq35p9cc5p/Dy9Dypt7jXrtdGwQECS9NPhr6Gq6txUzNigE6zydLK6lTw12/KT4FGFEUfJX2YJNONq5tVs4ODA7sD/DnwJ/BoADZuE3tHFs12dna6d4C/BI6AlbyzI8ii2TTw12/KK33gb2cdXsNZoAntbZC2SeO4c9592k/5eNQbiwvFd1kJuFGwLJr1wSPg/SwpvyFBHufOeXcFeAlE97U/uCxOY+P3b+Bn4B3Q+L8EdJfD4a+/AbC4UBzPxiPg3wlHZquB28Cn2IuR9x3gr3uV4DbwfvSDOvi4uFA8BDZmIRHkjHpS9Ht9iRqd8+5G3g05mAGcQbsdiX5QJ428G7Kygo8XYdb1/K4NWVmjzkNge2sz84bs+ELmpDDLtqWsNZBXgvmw8CTtpWVMT7x5YWBjLARnwZfKQNYN2U2LPvrh+5nBt7c2M2/It9bArCTKR8eZN+SJ13AScPnoODeRdqNenH+wul5w2gUr2WUjMFAt8bZ/0axX/wNnv4H8vTFb1QAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-poly-edit{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gELFi46qJmxxAAABV9JREFUWMOdl19vFFUYxn9n9u9sCyylUIzWUoMQBAWCMdEEIt6xIRQSLIEKtvHe6AcA4yeQb7CAUNJy0daLeomJN8SEULAC2kBBapBKoLvbmdl/c14vdmY7u91tF95kknPOnHmf95znPc97Ro2OTeBbdjFDT3c32ZxVHUOE9kSMB0/m6ExuoJn1H+ur6Y+OTfD50SMN5168OgrAlyf7CfuD+z7+iDs3p8hkLUQ0iFQ/yFl5Nm/qonfHVva+s32Zw9GxCYILsZ08tpNfBhbs+1YN4OH9+7huGdECSBVfqUosbsllfmauBqiR+cCNwOr7AEo8pPHJnymXykhg5fUWjoQpl0vVvhZhbSzGoUOHqgBlt6B6uruj2Zy1E9jo0fhfeyL2x4Mnc8VErK0KUEOB64JSyptfG4RSytsJjUJVxw2lsFy3urL9nx1Qd25ObctkrVMi+jQivd7U2ZyV/3Hzpq7h3h1b/7p9Y0o8v8rwAbTWrGpSocN/FGDlbAI0Rl23PCBan0Ok158H9Ipwzi25A/Mzc9Gl/BYx/E4kYqC1NKRARNAaDCNUM27Z+Zr+ouXs0q4+LSLBHPYCFkTkC6uU39kwCdsS7WRKmaYUiAhdnZ3MPX2K4+QjQI+C94A93rMzm8ltMwyDeDzWjMZeEb2pYQDdW3vITU2jtUZ5QThOPgm8C7wP7J15OPsBsB3oWpGnVWisCeDS1VHj4vBI92+/3tgB7Ab2AruAXiDBK5oIOkhtkEYRNRuJhObrd8Dl9ewf4D5wG7hVLpen29vb5wzD+BrkbBMaL3d1dk5nsrnlFDTTFWAWmAZueWD3gCemGde2k2fw1Al1YXhEvjozoO49eczdqekrWmsc2zlrmvEKOGoW1GUjFLqSk2KpJrCLwyMCPAP+BO54QL8DM6YZX/ClsP9YnwKkXnIBP4jdIpJRpdJTCYdMwwi98KU0Hjc/dDILNyUcwTCWdOSMJ0TRmBktGRhLugu0xyLk7CIqVNm+0bGJptl1YXikD0grpY4Rjc4a8Fbgdab/6OGbAJeCUuyJnnHmZH9pbSyGuBXV8NUwlUpR1EWyixmSyTWEwqGlJ2Swbo2JXbAAfgDGgGQA9I1A9t1tlq0AxrXxn0ilUpw4fhQqYkH/sT41OTnJJwf2s6FjI5mshdYa7bqVR2uezr9MJmJt14FvGrh/O9D+e6UkM/xyCuCqEKCYnJyUTKFQrZDHjxzGshwWLQcRsOz8Hi85P23id0ug/XilAMLBmm4tPGdoaKjSH5+oAGrhwvBI9SjZTn4QSK9yenoD7dlrExPoJlXW8G8ytpNHxRKk02lGxsdRKFwXLNvx5yY94HQLGhGk4LFCYQSqaE0AwWM1eOoEbR0dKBSW7bC4mKuffxs4D/wCLKwQQPAUzIkslfp6cVomROWSolh0GjldAM4nzDi2k9/i5UAzC9aKfwNJ3zgJg9YEvN6+C7SHgKm69+sD7RfNnKTTaZRPQfAut4oFV//IS7gkcB34VlVo8kGzphlfB+DU+TfNGBpZtRastvrvARJmfMF28ge9sc2B9/PNnCilMIDwK6y8/ow/Ai4kvILTljAXvDvEvrqKSUs60KolzPjBxspavQD2tKqCAGF/Ba+xE/Wbilu54wZV8NEKF5fXzQHl/bh4hUsE0WAXSlDMYcQSrQXgCmsTseXHsJkNnjqBFGwKJaHsKlxtUHYVhbLCzr1kaOA4bcn1y1Swmb+iLpJKpVrfgdpfsiVVCYcgluwgnU7jEgJ4s5UkLFtWYyHyEg0/N1q1tmQH+YXnAMFr97Nmv3p+0QsHQRsF8qpBOE5+rb9Nkaj50tVQKjqh4OU3GNL/1/So3vuUgbAAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-line-edit{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAG/3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarVdpknSpDfzPKXwEJBDLccQW4Rv4+E4BtXR198znCdeLLijgQUoppWg3//Pv5f6FDwefXJRcUk3J4xNrrKzoFH8+pyUf9/f+8J3C7y/j7jnBGApow/mZ5l2vGJfXCzne8fZ13OV+9yl3ozvx2DDYyXbauCDvRoHPON3frl5Imt7MuX8hH0seiz9/xwxnDMFgYMczUPD7m89J4fwp/iK+OVRbiMf6gm8K4bv/3NN1Pzjw2fvwn+93PLzccTZ6mJU+/HTHSX723/bSOyLi58n8jmiqz/798+a/tUZZax7rNCKOakzXqIcpu4eFDe483kh4Mv4E/byfiqd49R2OHzC1Od/woxLD44siDVJaNHfbqQNi5MkZLXPnsMdKyFy5gwwCHXhocXahhhEK+OhgLmCYn1hon1vtPBxWcPIgrGTCZrR5fHvc58A/fb5stJaFOZEvT18BF1t8AYYxZ99YBUJoXZ/K9i+50/jPjxEbwKBsNxcYqL6dLZrQK7bC5jl4cVga/Ql5yuNuABfhbAEYCmDAJwpCiXxmzkTwYwE/CuQcIjcwQOKEB1ByDCGBnMJ2Nt7JtNey8BmGvIAICSlkUFODgqwYJSbkW0EIqZMgUUSSZClSRVNIMUlKKSfTKc0hxyw55ZxLrllLKLFISSWXUmrRyjVAxsTVVHMttVZVHKpRsZdivWKgcQstNmmp5VZabdoRPj126annXnrtOniEAQlwI408yqhDJ02E0oxTZpp5llmnLsTaCisuWWnlVVZd+mTtsvqVtU/m/po1uqzxJsrW5RdrGM75sQWZnIhxBsY4EhjPxgACmo0zXyhGNuaMM185uBCEgVKMnEHGGBiMk1gWPbl7Mfcrbw7e/V9545+Yc0bd/4M5Z9S9Mfedtx9YG7rlNmyCLAvhUyhkQPrNhvO5AJFnrZIR0plaLL5liQYdDi5TubaIokFDkmoFEB8CzxZVxemssDqthPhUblPgW1iQU5g6XwNwyVI7bUFRm035iNziMkgWvEso2SXnsJfveR0Y4SlVF8YWC1pVQhJiQa8JwDvlMNIxAfq3F7GDObHU1LlhzlZaWwNp6BvACxAgInGXlllMGZCpEnZHrGA6GM2718xuFcz7YdUQxzEEfjdWz4GlkcwaonT0pgA6mB25grPILtnSMhuCpsGhmMU6uJbixJs4lbKHqh+wos1jW2rchyGRCIvN9MXu+KAmMSfAlIKVvi/tybhCPJZCu2Ow9pLdyo427+X2ovMBmKNu8PA0zgl3fS0PB1DWWkVYB47bkyiJHhkFPzTzCjzn4Dq1mqoIWzCmcDGsHQmQAQdEHsixK1IXESd5rLU7THVJNV8obHS8sZeN0G5Jdt5pQTVKCCbgK1hItTS8o92iEZpuWJ/oC2r/0+zTmhvFXoaMVKRe27altDtid6OvG1hENVwBnC61KKugNoemOiPCCNb3GoHAZOFuDxxPsD+07nbSPcr/o1Zmc4jARhotrA5F5ZcjP9rPk90vR8A+k028A+8+5wKlHVID542sMzMCuXktkRzUCpE+xCBZywjNcJITx0II9x5948CekBl4XaC5OCX2nCyObdwN3HwQh5DWL/BBEkhDYHn/vpXNgZkVTZs8rj+HO8JFC6qvDVhgAEQSYCDyC86rMhG1WPzAVB9ZldDWG6EzDcFiqJBDvFS8mXDv3SK2LPoguVB2kwUx7UL5KqZWiEzocsbvSjNnaYDNtcYJuA5cDcsrvHd6yCxGjqvl9+wh3Qh8Kc9py8sNW8ncU8qwxdPj1qIGfrPqlXeoS4/JLa/LwRLTCtxuSoZUT+2Su6kXW3QNacYQbId6NUKVbROpviybFSPQQL9lhB2MamEnFyB9Y+hrG1+xBg+L0QG2TZdTdlcsBdq9oHdt9Bu5/IM9+Nfh1AwrSqlboTA6Bgq568A7UfbaMrZjoQZhQphofvNw93+bN+5X7FYKBgLmRid+tSdV6c02A4R0cHwKobmoMt5+6WI9XNISFIywpf6RMd5/a91vE78FzVHIFmxud4woyJx76OMTCa4yhgN3iJO2VfRPFMv9sYTxFzU+1eWeYS52pwOoSJldZY6koib4P1O427rbeUrNZfu44hWjz5ZSuu/vKPpimoXbLkfxWSPetvxDWG5jQSaZCxA3ad+p6rlttDhK+YwwK1LHVe0drDtorc5vnQ1247g58vewDtU7L3DRwrG4dhCUDRKKOtYr2dXHtpt+33d1WZmfkAHdl7Q8ENF+CNgB+nOw29n5F7SeNo/ckbu4laLTCdqJLHjmhJbKzmrCEX7zULrhefuHmu0V/1nbP1pnb6FaT7sOxn4pvWkfrYhYtCeJ4Xv+kOXrroIs1eHWXN1/AfzaY94ms5vaAAABg2lDQ1BJQ0MgcHJvZmlsZQAAeJx9kT1Iw0AcxV/TSkUqDnYQUchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8AoVFhmhUaBzTdNtPJhJjNrYrhV4QwjAgGIMrMMuYkKQXf8XWPAF/v4jzL/9yfo1fNWwwIiMSzzDBt4g3i6U3b4LxPHGUlWSU+Jx4z6YLEj1xXPH7jXHRZ4JlRM5OeJ44Si8UOVjqYlUyNeIo4pmo65QtZj1XOW5y1So217slfGMnrK8tcpzmEJBaxBAkiFNRQRgU24rTqpFhI037Cxz/o+iVyKeQqg5FjAVVokF0/+B/87tYqTE54SZEE0PXiOB8jQHgXaNYd5/vYcZonQPAZuNLb/moDmPkkvd7WYkdA3zZwcd3WlD3gcgcYeDJkU3alIE2hUADez+ibckD/LdCz5vXW2sfpA5ChrlI3wMEhMFqk7HWfd3d39vbvmVZ/P2aecqIM1FFZAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AQdDBkQmV+argAABM5JREFUWMOtl9trHFUcxz9n9jYzm7Tb9JIWGtqUllLwVgRBQWl90S6lTaGmF6E2/4H+A4r+A0offdlWodL4kEZw9bG+iC9iKqLF0os0EBq02dtcdmdnfj7szGZ2M5vulv5g4JwzZ873+7ufUfMLi0RSa1TZNzVFrW511xBhzMxx79EyOwrbGSSzZ073zOcXFnlv5lTi3mvfzAPwwYVZ0tHiq6+/xu+/LlGtWYgEINL9oG657N41yfSRgxw9cHjDgfMLi8QVsR0X23E3gMXnkXQJ3L9zB99vI4EA0sVXqsPF93xW7y73ACVJBJwE1j8HUBIi3Sz/QNtrIzHN+yWdSdNue915IMKWXI4TJ050Adp+U+2bmkrV6tZeYAXwEJExMyf3Hi0rM5fvAvS4wPdBKRW6vZeEUiq0RIBCddddpymu0+rRbPvEzkPVmmWLBA1EdGAbYNctt7V712QwfeSgd/uXJQnPVVoEEAQBTxXpuEMELNtNNFW1WrsrQdBCRImQEeE/wBUh53v+7tW7y5n1+BZRIoJSioXvy3itdgclURSZTBrP87AdV57G1TT0d4GPgC+Bw8Ca7bifATsTgzBvjlH1qgNdICJM7tjB8soKw4jtuD+Gw3c229e1wF+P/uHPpT86rhBBRHActwAcAl4EjgIvAYcFJnlOoq5dv6EBU8AR4OUQ6AVgGjATwuC5YUdZ4A+z+1mBTUM/AKwqpZSIpPfu2VP7+/6DYEMMPE9N83lzq23ZWwxDd4GaQnmgUloqperSCpKC8HGCXz8G7NANU8CWUKPzsUDbyLPVyjYC39e0VMZx3Ccoha4b4lQqbUlnsBqNWCXpEMgKfA38DNSBcdPQr4zlMtTtFiqlulmQmJv9ks2idUZGZMjZmZMAfBUvxWHR0y5dmPV2FcbPG9ncFdPQS3nTuAJQLBZpBS1qjSqFwjipdGr9SWlsHTewm9ZmnngMKAaV9nBd+/bmdxSLRc6dnemm3+yZ06pcLvPGW2+yfWIn1ZpFEAQEvt95goCV1TXMXH4zAt4woaRF7RTAVylAUS6Xpdpsdjvk2VMnsSyHhuVEZTh+xgywBhwLfZIdKRfj7dWqPGFubq7T428ukslkaHttLNsZ9P3nwIfh+DhwS4EO9DA0zByBCE2n1fPxpQuznSCaX1js9nFp2pjbtqGhobQ0jUY9CbgALERah3IM+El1rNqTaqaph5W1uYGAFrfA5YvnyE9MoFBYtjMI/BXgQR/4pqVDZL3V9/cYrX+x7SnsXh/H5TLwW2iBQbVLNgn65CDsrSPOIJOXwmdQ4fRHrZilUqmXwNXrNzbbfxv4ArgFVBLeJ95oDEMHwHHcvvUcRqEwuBf0SSUEB9gfxsAgAkO1kcj/WvwKPaR8EhvPAUvRtdIMtR1FtBH37w8DEeChaehXw/xfAnzHcVOjEkhHrIe0Qlz7T8PuWLEd9+2w9KphgUUgQJ7JAgAPDT13NTrJyOYqIilrlEwQv/NPMTSByxfPIU37eCqtq2zWmPYDjbavaLYVdn2NuffPjqRJK2hRLBaHzoK+X7L1QE+nIFeYoFQqkTVMaTn2UOe1LWtwEJqGzqgRnS9M4Fb+3XBJGfSrFzW9dBw0icioJBzHzUXdMJM18APwWo6Kmy1O6X+V8UHDotBqogAAAABJRU5ErkJggg==");}'},function(e,t,n,r,i){r(),n.root="bk-root",n.menu_icon="bk-menu-icon",n.context_menu="bk-context-menu",n.horizontal="bk-horizontal",n.vertical="bk-vertical",n.divider="bk-divider",n.active="bk-active",n.menu="bk-menu",n.above="bk-above",n.below="bk-below",n.caret="bk-caret",n.down="bk-down",n.up="bk-up",n.left="bk-left",n.right="bk-right",n.default=".bk-root .bk-menu-icon{width:28px;height:28px;background-size:60%;background-color:transparent;background-repeat:no-repeat;background-position:center center;}.bk-root .bk-context-menu{position:absolute;display:inline-flex;display:-webkit-inline-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;width:auto;height:auto;z-index:100;cursor:pointer;font-size:12px;background-color:#fff;border:1px solid #ccc;border-radius:4px;box-shadow:0 6px 12px rgba(0, 0, 0, 0.175);}.bk-root .bk-context-menu.bk-horizontal{flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-context-menu.bk-vertical{flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-context-menu > .bk-divider{cursor:default;overflow:hidden;background-color:#e5e5e5;}.bk-root .bk-context-menu.bk-horizontal > .bk-divider{width:1px;margin:5px 0;}.bk-root .bk-context-menu.bk-vertical > .bk-divider{height:1px;margin:0 5px;}.bk-root .bk-context-menu > :not(.bk-divider){border:1px solid transparent;}.bk-root .bk-context-menu > :not(.bk-divider).bk-active{border-color:#26aae1;}.bk-root .bk-context-menu > :not(.bk-divider):hover{background-color:#f9f9f9;}.bk-root .bk-context-menu.bk-horizontal > :not(.bk-divider):first-child{border-top-left-radius:4px;border-bottom-left-radius:4px;}.bk-root .bk-context-menu.bk-horizontal > :not(.bk-divider):last-child{border-top-right-radius:4px;border-bottom-right-radius:4px;}.bk-root .bk-context-menu.bk-vertical > :not(.bk-divider):first-child{border-top-left-radius:4px;border-top-right-radius:4px;}.bk-root .bk-context-menu.bk-vertical > :not(.bk-divider):last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;}.bk-root .bk-menu{position:absolute;left:0;width:100%;z-index:100;cursor:pointer;font-size:12px;background-color:#fff;border:1px solid #ccc;border-radius:4px;box-shadow:0 6px 12px rgba(0, 0, 0, 0.175);}.bk-root .bk-menu.bk-above{bottom:100%;}.bk-root .bk-menu.bk-below{top:100%;}.bk-root .bk-menu > .bk-divider{height:1px;margin:7.5px 0;overflow:hidden;background-color:#e5e5e5;}.bk-root .bk-menu > :not(.bk-divider){padding:6px 12px;}.bk-root .bk-menu > :not(.bk-divider):hover,.bk-root .bk-menu > :not(.bk-divider).bk-active{background-color:#e6e6e6;}.bk-root .bk-caret{display:inline-block;vertical-align:middle;width:0;height:0;margin:0 5px;}.bk-root .bk-caret.bk-down{border-top:4px solid;}.bk-root .bk-caret.bk-up{border-bottom:4px solid;}.bk-root .bk-caret.bk-down,.bk-root .bk-caret.bk-up{border-right:4px solid transparent;border-left:4px solid transparent;}.bk-root .bk-caret.bk-left{border-right:4px solid;}.bk-root .bk-caret.bk-right{border-left:4px solid;}.bk-root .bk-caret.bk-left,.bk-root .bk-caret.bk-right{border-top:4px solid transparent;border-bottom:4px solid transparent;}"},function(e,t,n,r,i){r();const a=e(1),o=e(43),s=e(245),l=a.__importStar(e(243));class c{constructor(e,t={}){this.items=e,this.options=t,this.el=o.div(),this._open=!1,this._item_click=e=>{null===(e=this.items[e])||void 0===e||e.handler(),this.hide()},this._on_mousedown=e=>{var t,{target:n}=e;n instanceof Node&&this.el.contains(n)||null!==(n=(t=this.options).prevent_hide)&&void 0!==n&&n.call(t,e)||this.hide()},this._on_keydown=e=>{e.keyCode==o.Keys.Esc&&this.hide()},this._on_blur=()=>{this.hide()},o.undisplay(this.el)}get is_open(){return this._open}get can_open(){return 0!=this.items.length}remove(){o.remove(this.el),this._unlisten()}_listen(){document.addEventListener("mousedown",this._on_mousedown),document.addEventListener("keydown",this._on_keydown),window.addEventListener("blur",this._on_blur)}_unlisten(){document.removeEventListener("mousedown",this._on_mousedown),document.removeEventListener("keydown",this._on_keydown),window.removeEventListener("blur",this._on_blur)}_position(e){const t=this.el.parentElement;var n;null!=t&&(n=t.getBoundingClientRect(),this.el.style.left=null!=e.left?e.left-n.left+"px":"",this.el.style.top=null!=e.top?e.top-n.top+"px":"",this.el.style.right=null!=e.right?n.right-e.right+"px":"",this.el.style.bottom=null!=e.bottom?n.bottom-e.bottom+"px":"")}render(){var t,n;o.empty(this.el,!0);const r=null!==(t=this.options.orientation)&&void 0!==t?t:"vertical";o.classes(this.el).add("bk-context-menu",`bk-${r}`);for(const[t,r]of s.enumerate(this.items)){let e;if(null==t)e=o.div({class:l.divider});else{if(null!=t.if&&!t.if())continue;{const r=null!=t.icon?o.div({class:["bk-menu-icon",t.icon]}):null;e=o.div({class:null!==(n=t.active)&&void 0!==n&&n.call(t)?"bk-active":null,title:t.tooltip},r,t.label)}}e.addEventListener("click",()=>this._item_click(r)),this.el.appendChild(e)}}show(e){0==this.items.length||this._open||(this.render(),0!=this.el.children.length&&(this._position(null!=e?e:{left:0,top:0}),o.display(this.el),this._listen(),this._open=!0))}hide(){this._open&&(this._open=!1,this._unlisten(),o.undisplay(this.el))}toggle(e){this._open?this.hide():this.show(e)}}(n.ContextMenu=c).__name__="ContextMenu"},function(e,t,n,r,i){r();const a=e(9);function*o(t,n){var r=t.length;if(!(r<n)){const i=a.range(n);for(yield i.map(e=>t[e]);;){let e;for(const t of a.reversed(a.range(n)))if(i[t]!=t+r-n){e=t;break}if(null==e)return;i[e]+=1;for(const t of a.range(e+1,n))i[t]=i[t-1]+1;yield i.map(e=>t[e])}}}n.enumerate=function*(e){let t=0;for(const n of e)yield[n,t++]},n.combinations=o,n.subsets=function*(e){for(const t of a.range(e.length+1))yield*o(e,t)}},function(e,t,n,r,i){r();const a=e(1),o=e(238),s=a.__importStar(e(241)),l=e(43);class c extends o.ButtonToolButtonView{render(){super.render(),l.classes(this.el).toggle(s.active,this.model.active)}_clicked(){var{active:e}=this.model;this.model.active=!e}}n.OnOffButtonView=c,c.__name__="OnOffButtonView"},function(e,t,n,r,i){r();const a=e(238),o=e(246);class s extends a.ButtonToolView{}(n.InspectToolView=s).__name__="InspectToolView";class l extends a.ButtonTool{constructor(e){super(e),this.event_type="move"}static init_InspectTool(){this.prototype.button_view=o.OnOffButtonView,this.define(({Boolean:e})=>({toggleable:[e,!0]})),this.override({active:!0})}}n.InspectTool=l,l.__name__="InspectTool",l.init_InspectTool()},function(e,t,n,r,i){r();const a=e(1),o=e(19),s=e(43),l=e(122),c=e(240),u=e(20),d=e(9),h=e(13),f=e(8),p=e(249),m=e(99),g=e(53),_=e(236),y=e(237),v=e(251),b=e(252),x=e(247),w=a.__importStar(e(241)),T=w,A=a.__importStar(e(253)),k=A;class M extends g.Model{constructor(e){super(e)}static init_ToolbarViewModel(){this.define(({Boolean:e,Nullable:t})=>({_visible:[t(e),null],autohide:[e,!1]}))}get visible(){return!this.autohide||null!=this._visible&&this._visible}}(n.ToolbarViewModel=M).__name__="ToolbarViewModel",M.init_ToolbarViewModel();class S extends c.DOMView{constructor(){super(...arguments),this.layout={bbox:new m.BBox}}initialize(){super.initialize(),this._tool_button_views=new Map,this._toolbar_view_model=new M({autohide:this.model.autohide})}async lazy_initialize(){await super.lazy_initialize(),await this._build_tool_button_views()}connect_signals(){super.connect_signals(),this.connect(this.model.properties.tools.change,async()=>{await this._build_tool_button_views(),this.render()}),this.connect(this.model.properties.autohide.change,()=>{this._toolbar_view_model.autohide=this.model.autohide,this._on_visible_change()}),this.connect(this._toolbar_view_model.properties._visible.change,()=>this._on_visible_change())}styles(){return[...super.styles(),w.default,A.default]}remove(){l.remove_views(this._tool_button_views),super.remove()}async _build_tool_button_views(){var e=null!=this.model._proxied_tools?this.model._proxied_tools:this.model.tools;await l.build_views(this._tool_button_views,e,{parent:this},e=>e.button_view)}set_visibility(e){e!=this._toolbar_view_model._visible&&(this._toolbar_view_model._visible=e)}_on_visible_change(){var e=this._toolbar_view_model.visible,t=T.toolbar_hidden;this.el.classList.contains(t)&&e?this.el.classList.remove(t):e||this.el.classList.add(t)}render(){if(s.empty(this.el),this.el.classList.add(T.toolbar),this.el.classList.add(T[this.model.toolbar_location]),this._toolbar_view_model.autohide=this.model.autohide,this._on_visible_change(),null!=this.model.logo){const e="grey"===this.model.logo?k.grey:null,t=s.a({href:"https://bokeh.org/",target:"_blank",class:[k.logo,k.logo_small,e]});this.el.appendChild(t)}for(const[,e]of this._tool_button_views)e.render();const e=[],t=e=>this._tool_button_views.get(e).el,{gestures:n}=this.model;for(const r of h.values(n))e.push(r.tools.map(t));e.push(this.model.actions.map(t)),e.push(this.model.inspectors.filter(e=>e.toggleable).map(t));for(const t of e)if(0!==t.length){const e=s.div({class:T.button_bar},t);this.el.appendChild(e)}}update_layout(){}update_position(){}after_layout(){this._has_finished=!0}export(e,t=!0){const n="png"==e?"canvas":"svg",r=new p.CanvasLayer(n,t);return r.resize(0,0),r}}function E(){return{pan:{tools:[],active:null},scroll:{tools:[],active:null},pinch:{tools:[],active:null},tap:{tools:[],active:null},doubletap:{tools:[],active:null},press:{tools:[],active:null},pressup:{tools:[],active:null},rotate:{tools:[],active:null},move:{tools:[],active:null},multi:{tools:[],active:null}}}(n.ToolbarBaseView=S).__name__="ToolbarBaseView";class C extends g.Model{constructor(e){super(e)}static init_ToolbarBase(){this.prototype.default_view=S,this.define(({Boolean:e,Array:t,Ref:n,Nullable:r})=>({tools:[t(n(_.Tool)),[]],logo:[r(u.Logo),"normal"],autohide:[e,!1]})),this.internal(({Array:e,Struct:t,Ref:n,Nullable:r})=>{r=t({tools:e(n(y.GestureTool)),active:r(n(_.Tool))});return{gestures:[t({pan:r,scroll:r,pinch:r,tap:r,doubletap:r,press:r,pressup:r,rotate:r,move:r,multi:r}),E],actions:[e(n(v.ActionTool)),[]],inspectors:[e(n(x.InspectTool)),[]],help:[e(n(b.HelpTool)),[]],toolbar_location:[u.Location,"right"]}})}initialize(){super.initialize(),this._init_tools()}_init_tools(){const e=function(e,t){if(e.length!=t.length)return!0;const n=new Set(t.map(e=>e.id));return d.some(e,e=>!n.has(e.id))},t=this.tools.filter(e=>e instanceof x.InspectTool);e(this.inspectors,t)&&(this.inspectors=t);const n=this.tools.filter(e=>e instanceof b.HelpTool);e(this.help,n)&&(this.help=n);var r=this.tools.filter(e=>e instanceof v.ActionTool);e(this.actions,r)&&(this.actions=r);const i=(e,t)=>{e in this.gestures||o.logger.warn(`Toolbar: unknown event type '${e}' for tool: ${t}`)},a={pan:{tools:[],active:null},scroll:{tools:[],active:null},pinch:{tools:[],active:null},tap:{tools:[],active:null},doubletap:{tools:[],active:null},press:{tools:[],active:null},pressup:{tools:[],active:null},rotate:{tools:[],active:null},move:{tools:[],active:null},multi:{tools:[],active:null}};for(const e of this.tools)if(e instanceof y.GestureTool&&e.event_type)if(f.isString(e.event_type))a[e.event_type].tools.push(e),i(e.event_type,e);else{a.multi.tools.push(e);for(const t of e.event_type)i(t,e)}for(const t of Object.keys(a)){const n=this.gestures[t];e(n.tools,a[t].tools)&&(n.tools=a[t].tools),n.active&&d.every(n.tools,e=>e.id!=n.active.id)&&(n.active=null)}}get horizontal(){return"above"===this.toolbar_location||"below"===this.toolbar_location}get vertical(){return"left"===this.toolbar_location||"right"===this.toolbar_location}_active_change(e){const{event_type:t}=e;if(null!=t){const n=f.isString(t)?[t]:t;for(const t of n)if(e.active){const n=this.gestures[t].active;null!=n&&e!=n&&(o.logger.debug(`Toolbar: deactivating tool: ${n} for event type '${t}'`),n.active=!1),this.gestures[t].active=e,o.logger.debug(`Toolbar: activating tool: ${e} for event type '${t}'`)}else this.gestures[t].active=null}}}(n.ToolbarBase=C).__name__="ToolbarBase",C.init_ToolbarBase()},function(e,t,n,r,i){r();const a=e(250),o=e(99),s=e(43);const l={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};class c{constructor(e,t){switch(this.backend=e,this.hidpi=t,this.pixel_ratio=1,this.bbox=new o.BBox,e){case"webgl":case"canvas":{this._el=this._canvas=s.canvas({style:l});const i=this.canvas.getContext("2d");if(null==i)throw new Error("unable to obtain 2D rendering context");this._ctx=i,t&&(this.pixel_ratio=devicePixelRatio);break}case"svg":{const i=new a.SVGRenderingContext2D;this._ctx=i,this._canvas=i.get_svg(),this._el=s.div({style:l},this._canvas);break}}var d,n,r;e=this._ctx,void 0===(r=e).lineDash&&Object.defineProperty(r,"lineDash",{get:()=>r.getLineDash(),set:e=>r.setLineDash(e)}),(n=e).setImageSmoothingEnabled=e=>{n.imageSmoothingEnabled=e,n.mozImageSmoothingEnabled=e,n.oImageSmoothingEnabled=e,n.webkitImageSmoothingEnabled=e,n.msImageSmoothingEnabled=e},n.getImageSmoothingEnabled=()=>{var e=n.imageSmoothingEnabled;return null==e||e},(d=e).ellipse||(d.ellipse=function(e,t,n,r,i,a,o,s=!1){var l=.551784;d.translate(e,t),d.rotate(i);let c=n,u=r;s&&(c=-n,u=-r),d.moveTo(-c,0),d.bezierCurveTo(-c,u*l,-c*l,u,0,u),d.bezierCurveTo(c*l,u,c,u*l,c,0),d.bezierCurveTo(c,-u*l,c*l,-u,0,-u),d.bezierCurveTo(-c*l,-u,-c,-u*l,-c,0),d.rotate(-i),d.translate(-e,-t)})}get canvas(){return this._canvas}get ctx(){return this._ctx}get el(){return this._el}resize(e,t){this.bbox=new o.BBox({left:0,top:0,width:e,height:t});const n=this._ctx instanceof a.SVGRenderingContext2D?this._ctx:this.canvas;n.width=e*this.pixel_ratio,n.height=t*this.pixel_ratio}prepare(){const{ctx:e,hidpi:t,pixel_ratio:n}=this;e.save(),t&&(e.scale(n,n),e.translate(.5,.5)),this.clear()}clear(){var{x:e,y:t,width:n,height:r}=this.bbox;this.ctx.clearRect(e,t,n,r)}finish(){this.ctx.restore()}to_blob(){const{_canvas:e}=this;if(e instanceof HTMLCanvasElement)return null!=e.msToBlob?Promise.resolve(e.msToBlob()):new Promise((t,n)=>{e.toBlob(e=>null!=e?t(e):n(),"image/png")});{const e=this._ctx.get_serialized_svg(!0),t=new Blob([e],{type:"image/svg+xml"});return Promise.resolve(t)}}}(n.CanvasLayer=c).__name__="CanvasLayer"},function(e,t,n,r,i){r();const a=e(168),u=e(8),o=e(43);function s(e){if(!e)throw new Error("cannot create a random attribute name for an undefined object");var t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";let n="";do{n="";for(let e=0;e<12;e++)n+=t[Math.floor(Math.random()*t.length)]}while(e[n]);return n}const l=function(t){const n=new Map,r="50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro".split(",");t=null!=t?t:10;for(let e=0;e<r.length;e+=2){var i="&"+r[e+1]+";",a=parseInt(r[e],t);n.set(i,"&#"+a+";")}return n.set("\\xa0","&#160;"),n}(32),d={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};class h{constructor(e,t){this.__root=e,this.__ctx=t}addColorStop(e,t){const n=this.__ctx.__createElement("stop");if(n.setAttribute("offset",`${e}`),-1!==t.indexOf("rgba")){const e=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),[,r,i,a,o]=e;n.setAttribute("stop-color",`rgb(${r},${i},${a})`),n.setAttribute("stop-opacity",o)}else n.setAttribute("stop-color",t);this.__root.appendChild(n)}}h.__name__="CanvasGradient";class f{constructor(e,t){this.__root=e,this.__ctx=t}}f.__name__="CanvasPattern";class p{constructor(e){var t;this.__currentPosition=null,this._transform=new a.AffineTransform,this._clip_path=null,this.__document=null!==(t=null==e?void 0:e.document)&&void 0!==t?t:document,null!=e&&e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version","1.1"),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.width=null!==(t=null==e?void 0:e.width)&&void 0!==t?t:500,this.height=null!==(e=null==e?void 0:e.height)&&void 0!==e?e:500,this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs)}get canvas(){return this}get width(){return this._width}set width(e){this._width=e,this.__root.setAttribute("width",`${e}`)}get height(){return this._height}set height(e){this._height=e,this.__root.setAttribute("height",`${e}`)}__createElement(e,t={},n=!1){const r=this.__document.createElementNS("http://www.w3.org/2000/svg",e);n&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none"));for(const e of Object.keys(t))r.setAttribute(e,`${t[e]}`);return r}__setDefaultStyles(){var t=Object.keys(d);for(let e=0;e<t.length;e++){var n=t[e];this[n]=d[n].canvas}}__applyStyleState(t){var n=Object.keys(t);for(let e=0;e<n.length;e++){var r=n[e];this[r]=t[r]}}__getStyleState(){const t=Object.keys(d),n={};for(let e=0;e<t.length;e++){var r=t[e];n[r]=this[r]}return n}__applyStyleToCurrentElement(n){const r=this.__currentElement,i=Object.keys(d);for(let t=0;t<i.length;t++){const o=d[i[t]],s=this[i[t]];if(null!==(a=o.apply)&&void 0!==a&&a.includes(n))if(s instanceof f){for(const n of[...s.__ctx.__defs.childNodes])if(n instanceof Element){const l=n.getAttribute("id");this.__ids[l]=l,this.__defs.appendChild(n)}const n=s.__root.getAttribute("id");r.setAttribute(o.apply,`url(#${n})`)}else if(s instanceof h){const n=s.__root.getAttribute("id");r.setAttribute(o.apply,`url(#${n})`)}else if(o.svg!==s)if("stroke"!==o.svgAttr&&"fill"!==o.svgAttr||!u.isString(s)||-1===s.indexOf("rgba")){let e=o.svgAttr;"globalAlpha"===i[t]&&(e=n+"-"+o.svgAttr,r.getAttribute(e))||r.setAttribute(e,`${s}`)}else{const n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(s),[,l,i,c,u]=n;r.setAttribute(o.svgAttr,`rgb(${l},${i},${c})`);let e=parseFloat(u);var a=this.globalAlpha;null!=a&&(e*=a),r.setAttribute(o.svgAttr+"-opacity",`${e}`)}}}get_serialized_svg(e=!1){let t=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(t)&&(t=t.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(const[e,n]of l){const r=new RegExp(e,"gi");r.test(t)&&(t=t.replace(r,n))}return t}get_svg(){return this.__root}save(){this.__stack.push({transform:this._transform,clip_path:this._clip_path,attributes:this.__getStyleState()}),this._transform=this._transform.clone()}restore(){var e,t,n;0!=this.__stack.length&&({transform:e,clip_path:t,attributes:n}=this.__stack.pop(),this._transform=e,this._clip_path=t,this.__applyStyleState(n))}_apply_transform(e,t=this._transform){t.is_identity||e.setAttribute("transform",t.toString())}scale(e,t){isFinite(e)&&(null==t||isFinite(t))&&this._transform.scale(e,null!=t?t:e)}rotate(e){isFinite(e)&&this._transform.rotate(e)}translate(e,t){isFinite(e+t)&&this._transform.translate(e,t)}transform(e,t,n,r,i,a){isFinite(e+t+n+r+i+a)&&this._transform.transform(e,t,n,r,i,a)}beginPath(){this.__currentDefaultPath="",this.__currentPosition=null;var e=this.__createElement("path",{},!0);this.__root.appendChild(e),this.__currentElement=e}__applyCurrentDefaultPath(){const e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)}__addPathCommand(e,t,n){var r=this.__currentDefaultPath?" ":"";this.__currentDefaultPath+=r+n,this.__currentPosition={x:e,y:t}}get _hasCurrentDefaultPath(){return!!this.__currentDefaultPath}moveTo(e,t){isFinite(e+t)&&("path"!==this.__currentElement.nodeName&&this.beginPath(),[e,t]=this._transform.apply(e,t),this.__addPathCommand(e,t,`M ${e} ${t}`))}closePath(){this._hasCurrentDefaultPath&&this.__addPathCommand(NaN,NaN,"Z")}lineTo(e,t){var n,r;isFinite(e+t)&&(this._hasCurrentDefaultPath?([n,r]=this._transform.apply(e,t),this.__addPathCommand(n,r,`L ${n} ${r}`)):this.moveTo(e,t))}bezierCurveTo(e,t,n,r,i,a){isFinite(e+t+n+r+i+a)&&([i,a]=this._transform.apply(i,a),[e,t]=this._transform.apply(e,t),[n,r]=this._transform.apply(n,r),this.__addPathCommand(i,a,`C ${e} ${t} ${n} ${r} ${i} ${a}`))}quadraticCurveTo(e,t,n,r){isFinite(e+t+n+r)&&([n,r]=this._transform.apply(n,r),[e,t]=this._transform.apply(e,t),this.__addPathCommand(n,r,`Q ${e} ${t} ${n} ${r}`))}arcTo(e,t,n,r,i){if(isFinite(e+t+n+r+i)&&null!=this.__currentPosition){var a,o=this.__currentPosition.x,s=this.__currentPosition.y;if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");o===e&&s===t||e===n&&t===r||0===i?this.lineTo(e,t):(a=l([o-e,s-t]),o=l([n-e,r-t]),a[0]*o[1]!=a[1]*o[0]?(s=a[0]*o[0]+a[1]*o[1],n=Math.acos(Math.abs(s)),r=l([a[0]+o[0],a[1]+o[1]]),n=e+(s=i/Math.sin(n/2))*r[0],s=t+s*r[1],r=[-a[1],a[0]],a=[o[1],-o[0]],o=c(r),a=c(a),this.lineTo(n+r[0]*i,s+r[1]*i),this.arc(n,s,i,o,a)):this.lineTo(e,t))}function l([e,t]){var n=Math.sqrt(e**2+t**2);return[e/n,t/n]}function c(e){var t=e[0];return 0<=e[1]?Math.acos(t):-Math.acos(t)}}stroke(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke"),null!=this._clip_path&&this.__currentElement.setAttribute("clip-path",this._clip_path)}fill(e){if("path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke"),"none"!=this.__currentElement.getAttribute("fill")){const e=this.__currentElement.cloneNode(!0);this.__root.appendChild(e),this.__currentElement=e}this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill"),null!=e&&this.__currentElement.setAttribute("fill-rule",e),null!=this._clip_path&&this.__currentElement.setAttribute("clip-path",this._clip_path)}rect(e,t,n,r){isFinite(e+t+n+r)&&("path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t))}fillRect(e,t,n,r){isFinite(e+t+n+r)&&(this.beginPath(),this.rect(e,t,n,r),this.fill())}strokeRect(e,t,n,r){isFinite(e+t+n+r)&&(this.beginPath(),this.rect(e,t,n,r),this.stroke())}__clearCanvas(){o.empty(this.__defs),o.empty(this.__root),this.__root.appendChild(this.__defs),this.__currentElement=this.__root}clearRect(e,t,n,r){isFinite(e+t+n+r)&&(0!==e||0!==t||n!==this.width||r!==this.height?(r=this.__createElement("rect",{x:e,y:t,width:n,height:r,fill:"#FFFFFF"},!0),this._apply_transform(r),this.__root.appendChild(r)):this.__clearCanvas())}createLinearGradient(e,t,n,r){if(!isFinite(e+t+n+r))throw new Error("The provided double value is non-finite");var[e,t]=this._transform.apply(e,t),[n,r]=this._transform.apply(n,r),r=this.__createElement("linearGradient",{id:s(this.__ids),x1:`${e}px`,x2:`${n}px`,y1:`${t}px`,y2:`${r}px`,gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(r),new h(r,this)}createRadialGradient(e,t,n,r,i,a){if(!isFinite(e+t+n+r+i+a))throw new Error("The provided double value is non-finite");var[e,t]=this._transform.apply(e,t),[r,i]=this._transform.apply(r,i),t=this.__createElement("radialGradient",{id:s(this.__ids),cx:`${r}px`,cy:`${i}px`,r:`${a}px`,fx:`${e}px`,fy:`${t}px`,gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(t),new h(t,this)}__parseFont(){var e;const t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),n={style:null!==(e=t[1])&&void 0!==e?e:"normal",size:null!==(e=t[4])&&void 0!==e?e:"10px",family:null!==(e=t[6])&&void 0!==e?e:"sans-serif",weight:null!==(e=t[3])&&void 0!==e?e:"normal",decoration:null!==(e=t[2])&&void 0!==e?e:"normal"};return"underline"===this.__fontUnderline&&(n.decoration="underline"),null!=this.__fontHref&&(n.href=this.__fontHref),n}__wrapTextLink(e,t){if(e.href){const n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t}__applyText(e,t,n,r){const i=this.__parseFont(),a=this.__createElement("text",{"font-family":i.family,"font-size":i.size,"font-style":i.style,"font-weight":i.weight,"text-decoration":i.decoration,x:t,y:n,"text-anchor":(t=this.textAlign,null!==(t=(n={left:"start",right:"end",center:"middle",start:"start",end:"end"})[t])&&void 0!==t?t:n.start),"dominant-baseline":(t=this.textBaseline,null!==(t=(n={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"})[t])&&void 0!==t?t:n.alphabetic)},!0);a.appendChild(this.__document.createTextNode(e)),this._apply_transform(a),this.__currentElement=a,this.__applyStyleToCurrentElement(r),this.__root.appendChild(this.__wrapTextLink(i,a))}fillText(e,t,n){null!=e&&isFinite(t+n)&&this.__applyText(e,t,n,"fill")}strokeText(e,t,n){null!=e&&isFinite(t+n)&&this.__applyText(e,t,n,"stroke")}measureText(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)}arc(n,r,i,a,o,s=!1){if(isFinite(n+r+i+a+o)&&a!==o){(a%=2*Math.PI)==(o%=2*Math.PI)&&(o=(o+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));var l=n+i*Math.cos(o),c=r+i*Math.sin(o),u=n+i*Math.cos(a),n=r+i*Math.sin(a),r=s?0:1;let e,t=o-a;t<0&&(t+=2*Math.PI),e=s?t>Math.PI?0:1:t>Math.PI?1:0,this.lineTo(u,n);var n=i,i=i,[l,c]=this._transform.apply(l,c);this.__addPathCommand(l,c,`A ${n} ${i} 0 ${e} ${r} ${l} ${c}`)}}clip(){const e=this.__createElement("clipPath"),t=s(this.__ids);this.__applyCurrentDefaultPath(),e.setAttribute("id",t),e.appendChild(this.__currentElement),this.__defs.appendChild(e),this._clip_path=`url(#${t})`}drawImage(t,...n){let e,r,i,a,o,s,l,c;if(2==n.length){if([e,r]=n,!isFinite(e+r))return;o=0,s=0,l=t.width,c=t.height,i=l,a=c}else if(4==n.length){if([e,r,i,a]=n,!isFinite(e+r+i+a))return;o=0,s=0,l=t.width,c=t.height}else{if(8!==n.length)throw new Error(`Inavlid number of arguments passed to drawImage: ${arguments.length}`);if([o,s,l,c,e,r,i,a]=n,!isFinite(o+s+l+c+e+r+i+a))return}const u=this.__root,d=this._transform.clone().translate(e,r);if(t instanceof p||t instanceof SVGSVGElement){const n=(t instanceof SVGSVGElement?t:t.get_svg()).cloneNode(!0);let e;d.is_identity?e=u:(e=this.__createElement("g"),this._apply_transform(e,d),u.appendChild(e));for(const t of[...n.childNodes])if(t instanceof SVGDefsElement){for(const n of[...t.childNodes])if(n instanceof Element){const t=n.getAttribute("id");this.__ids[t]=t,this.__defs.appendChild(n)}}else e.appendChild(t)}else if(t instanceof HTMLImageElement||t instanceof SVGImageElement){const n=this.__createElement("image");if(n.setAttribute("width",`${i}`),n.setAttribute("height",`${a}`),n.setAttribute("preserveAspectRatio","none"),o||s||l!==t.width||c!==t.height){const n=this.__document.createElement("canvas");n.width=i,n.height=a,n.getContext("2d").drawImage(t,o,s,l,c,0,0,i,a),t=n}this._apply_transform(n,d);const e=t instanceof HTMLCanvasElement?t.toDataURL():t.getAttribute("src");n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),u.appendChild(n)}else if(t instanceof HTMLCanvasElement){const n=this.__createElement("image");n.setAttribute("width",`${i}`),n.setAttribute("height",`${a}`),n.setAttribute("preserveAspectRatio","none");const e=this.__document.createElement("canvas");e.width=i,e.height=a;const r=e.getContext("2d");r.imageSmoothingEnabled=!1,r.drawImage(t,o,s,l,c,0,0,i,a),t=e,this._apply_transform(n,d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.toDataURL()),u.appendChild(n)}}createPattern(e,t){const n=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),r=s(this.__ids);if(n.setAttribute("id",r),n.setAttribute("width",`${this._to_number(e.width)}`),n.setAttribute("height",`${this._to_number(e.height)}`),n.setAttribute("patternUnits","userSpaceOnUse"),e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof SVGImageElement){const t=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),r=e instanceof HTMLCanvasElement?e.toDataURL():e.getAttribute("src");t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),n.appendChild(t),this.__defs.appendChild(n)}else if(e instanceof p){for(const t of[...e.__root.childNodes])t instanceof SVGDefsElement||n.appendChild(t);this.__defs.appendChild(n)}else{if(!(e instanceof SVGSVGElement))throw new Error("unsupported");for(const t of[...e.childNodes])t instanceof SVGDefsElement||n.appendChild(t);this.__defs.appendChild(n)}return new f(n,this)}setLineDash(e){e&&0<e.length?this.lineDash=e.join(","):this.lineDash=null}_to_number(e){return u.isNumber(e)?e:e.baseVal.value}}(n.SVGRenderingContext2D=p).__name__="SVGRenderingContext2D"},function(e,t,n,r,i){r();const a=e(238),o=e(15);class s extends a.ButtonToolButtonView{_clicked(){this.model.do.emit(void 0)}}(n.ActionToolButtonView=s).__name__="ActionToolButtonView";class l extends a.ButtonToolView{connect_signals(){super.connect_signals(),this.connect(this.model.do,e=>this.doit(e))}}n.ActionToolView=l,l.__name__="ActionToolView";class c extends a.ButtonTool{constructor(e){super(e),this.button_view=s,this.do=new o.Signal(this,"do")}}(n.ActionTool=c).__name__="ActionTool"},function(e,t,n,r,i){r();const a=e(251),o=e(242);class s extends a.ActionToolView{doit(){window.open(this.model.redirect)}}(n.HelpToolView=s).__name__="HelpToolView";class l extends a.ActionTool{constructor(e){super(e),this.tool_name="Help",this.icon=o.tool_icon_help}static init_HelpTool(){this.prototype.default_view=s,this.define(({String:e})=>({redirect:[e,"https://docs.bokeh.org/en/latest/docs/user_guide/tools.html"]})),this.override({description:"Click the question mark to learn more about Bokeh plot tools."}),this.register_alias("help",()=>new l)}}(n.HelpTool=l).__name__="HelpTool",l.init_HelpTool()},function(e,t,n,r,i){r(),n.root="bk-root",n.logo="bk-logo",n.grey="bk-grey",n.logo_small="bk-logo-small",n.logo_notebook="bk-logo-notebook",n.default=".bk-root .bk-logo{margin:5px;position:relative;display:block;background-repeat:no-repeat;}.bk-root .bk-logo.bk-grey{filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale\");filter:gray;-webkit-filter:grayscale(100%);}.bk-root .bk-logo-small{width:20px;height:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);}.bk-root .bk-logo-notebook{display:inline-block;vertical-align:middle;margin-right:5px;}"},function(e,t,n,r,i){r();const a=e(1),o=e(40),s=e(20),l=e(43),c=a.__importStar(e(255)),u=c;class d extends o.AnnotationView{initialize(){super.initialize(),this.el=l.div({class:u.tooltip}),l.undisplay(this.el),this.plot_view.canvas_view.add_overlay(this.el)}remove(){l.remove(this.el),super.remove()}connect_signals(){super.connect_signals(),this.connect(this.model.properties.content.change,()=>this.render()),this.connect(this.model.properties.position.change,()=>this._reposition())}styles(){return[...super.styles(),c.default]}render(){this.model.visible||l.undisplay(this.el),super.render()}_render(){var{content:e}=this.model;null!=e?(l.empty(this.el),l.classes(this.el).toggle("bk-tooltip-custom",this.model.custom),this.el.appendChild(e),this.model.show_arrow&&this.el.classList.add(u.tooltip_arrow)):l.undisplay(this.el)}_reposition(){var{position:r}=this.model;if(null!=r){const[i,a]=r,o=(()=>{var e=this.parent.layout.bbox.relative(),{attachment:t}=this.model;switch(t){case"horizontal":return i<e.hcenter?"right":"left";case"vertical":return a<e.vcenter?"below":"above";default:return t}})();let e;this.el.classList.remove(u.right),this.el.classList.remove(u.left),this.el.classList.remove(u.above),this.el.classList.remove(u.below),l.display(this.el);let t=null,n=null;switch(o){case"right":this.el.classList.add(u.left),t=i+(this.el.offsetWidth-this.el.clientWidth)+10,e=a-this.el.offsetHeight/2;break;case"left":this.el.classList.add(u.right),n=this.plot_view.layout.bbox.width-i+10,e=a-this.el.offsetHeight/2;break;case"below":this.el.classList.add(u.above),e=a+(this.el.offsetHeight-this.el.clientHeight)+10,t=Math.round(i-this.el.offsetWidth/2);break;case"above":this.el.classList.add(u.below),e=a-this.el.offsetHeight-10,t=Math.round(i-this.el.offsetWidth/2)}this.el.style.top=`${e}px`,this.el.style.left=null!=t?`${t}px`:"auto",this.el.style.right=null!=n?`${n}px`:"auto"}else l.undisplay(this.el)}}(n.TooltipView=d).__name__="TooltipView";class h extends o.Annotation{constructor(e){super(e)}static init_Tooltip(){this.prototype.default_view=d,this.define(({Boolean:e})=>({attachment:[s.TooltipAttachment,"horizontal"],inner_only:[e,!0],show_arrow:[e,!0]})),this.internal(({Boolean:e,Number:t,Tuple:n,Ref:r,Nullable:i})=>({position:[i(n(t,t)),null],content:[r(HTMLElement),()=>l.div()],custom:[e]})),this.override({level:"overlay"})}clear(){this.position=null}}(n.Tooltip=h).__name__="Tooltip",h.init_Tooltip()},function(e,t,n,r,i){r(),n.root="bk-root",n.tooltip="bk-tooltip",n.left="bk-left",n.tooltip_arrow="bk-tooltip-arrow",n.right="bk-right",n.above="bk-above",n.below="bk-below",n.tooltip_row_label="bk-tooltip-row-label",n.tooltip_row_value="bk-tooltip-row-value",n.tooltip_color_block="bk-tooltip-color-block",n.default='.bk-root{}.bk-root .bk-tooltip{font-weight:300;font-size:12px;position:absolute;padding:5px;border:1px solid #e5e5e5;color:#2f2f2f;background-color:white;pointer-events:none;opacity:0.95;z-index:100;}.bk-root .bk-tooltip > div:not(:first-child){margin-top:5px;border-top:#e5e5e5 1px dashed;}.bk-root .bk-tooltip.bk-left.bk-tooltip-arrow::before{position:absolute;margin:-7px 0 0 0;top:50%;width:0;height:0;border-style:solid;border-width:7px 0 7px 0;border-color:transparent;content:" ";display:block;left:-10px;border-right-width:10px;border-right-color:#909599;}.bk-root .bk-tooltip.bk-left::before{left:-10px;border-right-width:10px;border-right-color:#909599;}.bk-root .bk-tooltip.bk-right.bk-tooltip-arrow::after{position:absolute;margin:-7px 0 0 0;top:50%;width:0;height:0;border-style:solid;border-width:7px 0 7px 0;border-color:transparent;content:" ";display:block;right:-10px;border-left-width:10px;border-left-color:#909599;}.bk-root .bk-tooltip.bk-right::after{right:-10px;border-left-width:10px;border-left-color:#909599;}.bk-root .bk-tooltip.bk-above::before{position:absolute;margin:0 0 0 -7px;left:50%;width:0;height:0;border-style:solid;border-width:0 7px 0 7px;border-color:transparent;content:" ";display:block;top:-10px;border-bottom-width:10px;border-bottom-color:#909599;}.bk-root .bk-tooltip.bk-below::after{position:absolute;margin:0 0 0 -7px;left:50%;width:0;height:0;border-style:solid;border-width:0 7px 0 7px;border-color:transparent;content:" ";display:block;bottom:-10px;border-top-width:10px;border-top-color:#909599;}.bk-root .bk-tooltip-row-label{text-align:right;color:#26aae1;}.bk-root .bk-tooltip-row-value{color:default;}.bk-root .bk-tooltip-color-block{width:12px;height:12px;margin-left:5px;margin-right:5px;outline:#dddddd solid 1px;display:inline-block;}'},function(e,t,n,r,i){r();const a=e(135),o=e(133),s=e(122),l=e(48);class c extends a.UpperLowerView{async lazy_initialize(){await super.lazy_initialize();var{lower_head:e,upper_head:t}=this.model;null!=e&&(this.lower_head=await s.build_view(e,{parent:this})),null!=t&&(this.upper_head=await s.build_view(t,{parent:this}))}set_data(e){var t;super.set_data(e),null===(t=this.lower_head)||void 0===t||t.set_data(e),null===(t=this.upper_head)||void 0===t||t.set_data(e)}paint(n){if(this.visuals.line.doit)for(let e=0,t=this._lower_sx.length;e<t;e++)this.visuals.line.set_vectorize(n,e),n.beginPath(),n.moveTo(this._lower_sx[e],this._lower_sy[e]),n.lineTo(this._upper_sx[e],this._upper_sy[e]),n.stroke();var r="height"==this.model.dimension?0:Math.PI/2;if(null!=this.lower_head)for(let e=0,t=this._lower_sx.length;e<t;e++)n.save(),n.translate(this._lower_sx[e],this._lower_sy[e]),n.rotate(r+Math.PI),this.lower_head.render(n,e),n.restore();if(null!=this.upper_head)for(let e=0,t=this._upper_sx.length;e<t;e++)n.save(),n.translate(this._upper_sx[e],this._upper_sy[e]),n.rotate(r),this.upper_head.render(n,e),n.restore()}}(n.WhiskerView=c).__name__="WhiskerView";class u extends a.UpperLower{constructor(e){super(e)}static init_Whisker(){this.prototype.default_view=c,this.mixins(l.LineVector),this.define(({Ref:e,Nullable:t})=>({lower_head:[t(e(o.ArrowHead)),()=>new o.TeeHead({size:10})],upper_head:[t(e(o.ArrowHead)),()=>new o.TeeHead({size:10})]})),this.override({level:"underlay"})}}(n.Whisker=u).__name__="Whisker",u.init_Whisker()},function(e,t,n,r,i){r(),i("CustomJS",e(258).CustomJS),i("OpenURL",e(260).OpenURL)},function(e,t,n,r,i){r();const a=e(259),o=e(13),s=e(34);class l extends a.Callback{constructor(e){super(e)}static init_CustomJS(){this.define(({Unknown:e,String:t,Dict:n})=>({args:[n(e),{}],code:[t,""]}))}get names(){return o.keys(this.args)}get values(){return o.values(this.args)}get func(){var e=s.use_strict(this.code);return new Function(...this.names,"cb_obj","cb_data",e)}execute(e,t={}){return this.func.apply(e,this.values.concat(e,t))}}(n.CustomJS=l).__name__="CustomJS",l.init_CustomJS()},function(e,t,n,r,i){r();e=e(53);class a extends e.Model{constructor(e){super(e)}}(n.Callback=a).__name__="Callback"},function(e,t,n,r,i){r();const a=e(259),o=e(182),s=e(8);class l extends a.Callback{constructor(e){super(e)}static init_OpenURL(){this.define(({Boolean:e,String:t})=>({url:[t,"http://"],same_tab:[e,!1]}))}execute(e,{source:t}){var n=e=>{e=o.replace_placeholders(this.url,t,e,void 0,void 0,encodeURIComponent);if(!s.isString(e))throw new Error("HTML output is not supported in this context");this.same_tab?window.location.href=e:window.open(e)},{selected:r}=t;for(const e of r.indices)n(e);for(const e of r.line_indices)n(e)}}(n.OpenURL=l).__name__="OpenURL",l.init_OpenURL()},function(e,t,n,r,i){r(),i("Canvas",e(262).Canvas),i("CartesianFrame",e(144).CartesianFrame)},function(e,t,n,r,i){r();const a=e(14),o=e(240),s=e(19),l=e(43),c=e(20),u=e(13),d=e(263),h=e(99),f=e(249),p=(()=>{const e=document.createElement("canvas"),t=e.getContext("webgl",{premultipliedAlpha:!0});return null!=t?{canvas:e,gl:t}:void s.logger.trace("WebGL is not supported")})(),m={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};class g extends o.DOMView{constructor(){super(...arguments),this.bbox=new h.BBox}initialize(){super.initialize(),"webgl"==this.model.output_backend&&(this.webgl=p),this.underlays_el=l.div({style:m}),this.primary=this.create_layer(),this.overlays=this.create_layer(),this.overlays_el=l.div({style:m}),this.events_el=l.div({class:"bk-canvas-events",style:m});var e=[this.underlays_el,this.primary.el,this.overlays.el,this.overlays_el,this.events_el];u.extend(this.el.style,m),l.append(this.el,...e),this.ui_event_bus=new d.UIEventBus(this)}remove(){this.ui_event_bus.destroy(),super.remove()}add_underlay(e){this.underlays_el.appendChild(e)}add_overlay(e){this.overlays_el.appendChild(e)}add_event(e){this.events_el.appendChild(e)}get pixel_ratio(){return this.primary.pixel_ratio}resize(e,t){this.bbox=new h.BBox({left:0,top:0,width:e,height:t}),this.primary.resize(e,t),this.overlays.resize(e,t)}prepare_webgl(e){const{webgl:t}=this;if(null!=t){var{width:n,height:r}=this.bbox;t.canvas.width=this.pixel_ratio*n,t.canvas.height=this.pixel_ratio*r;const{gl:i}=t;i.enable(i.SCISSOR_TEST);const[a,o,s,l]=e,{xview:c,yview:u}=this.bbox,d=c.compute(a),h=u.compute(o+l),f=this.pixel_ratio;i.scissor(f*d,f*h,f*s,f*l),i.enable(i.BLEND),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE_MINUS_DST_ALPHA,i.ONE),this._clear_webgl()}}blit_webgl(e){const{webgl:t}=this;if(null!=t){if(s.logger.debug("Blitting WebGL canvas"),e.restore(),e.drawImage(t.canvas,0,0),e.save(),this.model.hidpi){const t=this.pixel_ratio;e.scale(t,t),e.translate(.5,.5)}this._clear_webgl()}}_clear_webgl(){var{webgl:e}=this;if(null!=e){const{gl:t,canvas:n}=e;t.viewport(0,0,n.width,n.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}}compose(){const e=this.create_layer(),{width:t,height:n}=this.bbox;return e.resize(t,n),e.ctx.drawImage(this.primary.canvas,0,0),e.ctx.drawImage(this.overlays.canvas,0,0),e}create_layer(){var{output_backend:e,hidpi:t}=this.model;return new f.CanvasLayer(e,t)}to_blob(){return this.compose().to_blob()}}(n.CanvasView=g).__name__="CanvasView";class _ extends a.HasProps{constructor(e){super(e)}static init_Canvas(){this.prototype.default_view=g,this.internal(({Boolean:e})=>({hidpi:[e,!0],output_backend:[c.OutputBackend,"canvas"]}))}}(n.Canvas=_).__name__="Canvas",_.init_Canvas()},function(e,t,n,r,i){r();const a=e(1),o=a.__importDefault(e(239)),s=e(15),l=e(19),c=e(43),u=a.__importStar(e(264)),d=e(265),h=e(9),f=e(8),p=e(27),m=e(244);class g{constructor(e){this.canvas_view=e,this.pan_start=new s.Signal(this,"pan:start"),this.pan=new s.Signal(this,"pan"),this.pan_end=new s.Signal(this,"pan:end"),this.pinch_start=new s.Signal(this,"pinch:start"),this.pinch=new s.Signal(this,"pinch"),this.pinch_end=new s.Signal(this,"pinch:end"),this.rotate_start=new s.Signal(this,"rotate:start"),this.rotate=new s.Signal(this,"rotate"),this.rotate_end=new s.Signal(this,"rotate:end"),this.tap=new s.Signal(this,"tap"),this.doubletap=new s.Signal(this,"doubletap"),this.press=new s.Signal(this,"press"),this.pressup=new s.Signal(this,"pressup"),this.move_enter=new s.Signal(this,"move:enter"),this.move=new s.Signal(this,"move"),this.move_exit=new s.Signal(this,"move:exit"),this.scroll=new s.Signal(this,"scroll"),this.keydown=new s.Signal(this,"keydown"),this.keyup=new s.Signal(this,"keyup"),this.hammer=new o.default(this.hit_area,{touchAction:"auto",inputClass:o.default.TouchMouseInput}),this._prev_move=null,this._curr_pan=null,this._curr_pinch=null,this._curr_rotate=null,this._configure_hammerjs(),this.hit_area.addEventListener("mousemove",e=>this._mouse_move(e)),this.hit_area.addEventListener("mouseenter",e=>this._mouse_enter(e)),this.hit_area.addEventListener("mouseleave",e=>this._mouse_exit(e)),this.hit_area.addEventListener("contextmenu",e=>this._context_menu(e)),this.hit_area.addEventListener("wheel",e=>this._mouse_wheel(e)),document.addEventListener("keydown",this),document.addEventListener("keyup",this),this.menu=new m.ContextMenu([],{prevent_hide:e=>2==e.button&&e.target==this.hit_area}),this.hit_area.appendChild(this.menu.el)}get hit_area(){return this.canvas_view.events_el}destroy(){this.menu.remove(),this.hammer.destroy(),document.removeEventListener("keydown",this),document.removeEventListener("keyup",this)}handleEvent(e){"keydown"==e.type?this._key_down(e):"keyup"==e.type&&this._key_up(e)}_configure_hammerjs(){this.hammer.get("doubletap").recognizeWith("tap"),this.hammer.get("tap").requireFailure("doubletap"),this.hammer.get("doubletap").dropRequireFailure("tap"),this.hammer.on("doubletap",e=>this._doubletap(e)),this.hammer.on("tap",e=>this._tap(e)),this.hammer.on("press",e=>this._press(e)),this.hammer.on("pressup",e=>this._pressup(e)),this.hammer.get("pan").set({direction:o.default.DIRECTION_ALL}),this.hammer.on("panstart",e=>this._pan_start(e)),this.hammer.on("pan",e=>this._pan(e)),this.hammer.on("panend",e=>this._pan_end(e)),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("pinchstart",e=>this._pinch_start(e)),this.hammer.on("pinch",e=>this._pinch(e)),this.hammer.on("pinchend",e=>this._pinch_end(e)),this.hammer.get("rotate").set({enable:!0}),this.hammer.on("rotatestart",e=>this._rotate_start(e)),this.hammer.on("rotate",e=>this._rotate(e)),this.hammer.on("rotateend",e=>this._rotate_end(e))}register_tool(n){const e=n.model.event_type;null!=e&&(f.isString(e)?this._register_tool(n,e):e.forEach((e,t)=>this._register_tool(n,e,t<1)))}_register_tool(e,t,n=!0){const r=e,{id:i}=r.model,a=t=>e=>{e.id==i&&t(e.e)},o=t=>e=>{t(e.e)};switch(t){case"pan":null!=r._pan_start&&r.connect(this.pan_start,a(r._pan_start.bind(r))),null!=r._pan&&r.connect(this.pan,a(r._pan.bind(r))),null!=r._pan_end&&r.connect(this.pan_end,a(r._pan_end.bind(r)));break;case"pinch":null!=r._pinch_start&&r.connect(this.pinch_start,a(r._pinch_start.bind(r))),null!=r._pinch&&r.connect(this.pinch,a(r._pinch.bind(r))),null!=r._pinch_end&&r.connect(this.pinch_end,a(r._pinch_end.bind(r)));break;case"rotate":null!=r._rotate_start&&r.connect(this.rotate_start,a(r._rotate_start.bind(r))),null!=r._rotate&&r.connect(this.rotate,a(r._rotate.bind(r))),null!=r._rotate_end&&r.connect(this.rotate_end,a(r._rotate_end.bind(r)));break;case"move":null!=r._move_enter&&r.connect(this.move_enter,a(r._move_enter.bind(r))),null!=r._move&&r.connect(this.move,a(r._move.bind(r))),null!=r._move_exit&&r.connect(this.move_exit,a(r._move_exit.bind(r)));break;case"tap":null!=r._tap&&r.connect(this.tap,a(r._tap.bind(r))),null!=r._doubletap&&r.connect(this.doubletap,a(r._doubletap.bind(r)));break;case"press":null!=r._press&&r.connect(this.press,a(r._press.bind(r))),null!=r._pressup&&r.connect(this.pressup,a(r._pressup.bind(r)));break;case"scroll":null!=r._scroll&&r.connect(this.scroll,a(r._scroll.bind(r)));break;default:throw new Error(`unsupported event_type: ${t}`)}n&&(null!=r._keydown&&r.connect(this.keydown,o(r._keydown.bind(r))),null!=r._keyup&&r.connect(this.keyup,o(r._keyup.bind(r))),p.is_mobile&&null!=r._scroll&&"pinch"==t&&(l.logger.debug("Registering scroll on touch screen"),r.connect(this.scroll,a(r._scroll.bind(r)))))}_hit_test_renderers(e,t,n){var r,e=e.get_renderer_views();for(const i of h.reversed(e))if(null!==(r=i.interactive_hit)&&void 0!==r&&r.call(i,t,n))return i;return null}set_cursor(e="default"){this.hit_area.style.cursor=e}_hit_test_frame(e,t,n){return e.frame.bbox.contains(t,n)}_hit_test_canvas(e,t,n){return e.layout.bbox.contains(t,n)}_hit_test_plot(e,t){for(const n of this.canvas_view.plot_views)if(n.layout.bbox.relative().contains(e,t))return n;return null}_trigger(t,r,n){const{sx:i,sy:a}=r,o=this._hit_test_plot(i,a),s=e=>{var[t,n]=[i,a];return Object.assign(Object.assign({},r),{sx:t,sy:n})};if("panstart"==r.type||"pan"==r.type||"panend"==r.type){let e;if("panstart"==r.type&&null!=o?(this._curr_pan={plot_view:o},e=o):"pan"==r.type&&null!=this._curr_pan?e=this._curr_pan.plot_view:"panend"==r.type&&null!=this._curr_pan?(e=this._curr_pan.plot_view,this._curr_pan=null):e=null,null!=e){const r=s();this.__trigger(e,t,r,n)}}else if("pinchstart"==r.type||"pinch"==r.type||"pinchend"==r.type){let e;if("pinchstart"==r.type&&null!=o?(this._curr_pinch={plot_view:o},e=o):"pinch"==r.type&&null!=this._curr_pinch?e=this._curr_pinch.plot_view:"pinchend"==r.type&&null!=this._curr_pinch?(e=this._curr_pinch.plot_view,this._curr_pinch=null):e=null,null!=e){const r=s();this.__trigger(e,t,r,n)}}else if("rotatestart"==r.type||"rotate"==r.type||"rotateend"==r.type){let e;if("rotatestart"==r.type&&null!=o?(this._curr_rotate={plot_view:o},e=o):"rotate"==r.type&&null!=this._curr_rotate?e=this._curr_rotate.plot_view:"rotateend"==r.type&&null!=this._curr_rotate?(e=this._curr_rotate.plot_view,this._curr_rotate=null):e=null,null!=e){const r=s();this.__trigger(e,t,r,n)}}else if("mouseenter"==r.type||"mousemove"==r.type||"mouseleave"==r.type){var e=null===(e=this._prev_move)||void 0===e?void 0:e.plot_view;if(null!=e&&("mouseleave"==r.type||e!=o)){const{sx:t,sy:r}=s();this.__trigger(e,this.move_exit,{type:"mouseleave",sx:t,sy:r,shiftKey:!1,ctrlKey:!1},n)}if(null!=o&&("mouseenter"==r.type||e!=o)){const{sx:t,sy:r}=s();this.__trigger(o,this.move_enter,{type:"mouseenter",sx:t,sy:r,shiftKey:!1,ctrlKey:!1},n)}if(null!=o&&"mousemove"==r.type){const r=s();this.__trigger(o,t,r,n)}this._prev_move={sx:i,sy:a,plot_view:o}}else if(null!=o){const r=s();this.__trigger(o,t,r,n)}}__trigger(t,n,r,i){var a,o;const s=t.model.toolbar.gestures,l=n.name.split(":")[0],c=this._hit_test_renderers(t,r.sx,r.sy),u=this._hit_test_canvas(t,r.sx,r.sy);switch(l){case"move":{const i=s[l].active;null!=i&&this.trigger(n,r,i.id);const o=t.model.toolbar.inspectors.filter(e=>e.active);let e="default";null!=c?(e=null!==(a=c.cursor(r.sx,r.sy))&&void 0!==a?a:e,h.is_empty(o)||(n=this.move_exit)):this._hit_test_frame(t,r.sx,r.sy)&&(h.is_empty(o)||(e="crosshair")),this.set_cursor(e),t.set_toolbar_visibility(u),o.map(e=>this.trigger(n,r,e.id));break}case"tap":{const{target:t}=i;if(null!=t&&t!=this.hit_area)return;null!=c&&null!=c.on_hit&&c.on_hit(r.sx,r.sy);const a=s[l].active;null!=a&&this.trigger(n,r,a.id);break}case"doubletap":{const t=null!==(o=s.doubletap.active)&&void 0!==o?o:s.tap.active;null!=t&&this.trigger(n,r,t.id);break}case"scroll":{const t=s[p.is_mobile?"pinch":"scroll"].active;null!=t&&(i.preventDefault(),i.stopPropagation(),this.trigger(n,r,t.id));break}case"pan":{const t=s[l].active;null!=t&&(i.preventDefault(),this.trigger(n,r,t.id));break}default:{const t=s[l].active;null!=t&&this.trigger(n,r,t.id)}}this._trigger_bokeh_event(t,r)}trigger(e,t,n=null){e.emit({id:n,e:t})}_trigger_bokeh_event(i,a){var e=(()=>{var{sx:e,sy:t}=a,n=i.frame.x_scale.invert(e),r=i.frame.y_scale.invert(t);switch(a.type){case"wheel":return new u.MouseWheel(e,t,n,r,a.delta);case"mousemove":return new u.MouseMove(e,t,n,r);case"mouseenter":return new u.MouseEnter(e,t,n,r);case"mouseleave":return new u.MouseLeave(e,t,n,r);case"tap":return new u.Tap(e,t,n,r);case"doubletap":return new u.DoubleTap(e,t,n,r);case"press":return new u.Press(e,t,n,r);case"pressup":return new u.PressUp(e,t,n,r);case"pan":return new u.Pan(e,t,n,r,a.deltaX,a.deltaY);case"panstart":return new u.PanStart(e,t,n,r);case"panend":return new u.PanEnd(e,t,n,r);case"pinch":return new u.Pinch(e,t,n,r,a.scale);case"pinchstart":return new u.PinchStart(e,t,n,r);case"pinchend":return new u.PinchEnd(e,t,n,r);case"rotate":return new u.Rotate(e,t,n,r,a.rotation);case"rotatestart":return new u.RotateStart(e,t,n,r);case"rotateend":return new u.RotateEnd(e,t,n,r);default:return}})();null!=e&&i.model.trigger_event(e)}_get_sxy(e){var{pageX:t,pageY:n}="undefined"!=typeof TouchEvent&&e instanceof TouchEvent?(0!=e.touches.length?e.touches:e.changedTouches)[0]:e,{left:r,top:e}=c.offset(this.hit_area);return{sx:t-r,sy:n-e}}_pan_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{deltaX:e.deltaX,deltaY:e.deltaY,shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_pinch_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{scale:e.scale,shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_rotate_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{rotation:e.rotation,shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_tap_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_move_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e)),{shiftKey:e.shiftKey,ctrlKey:e.ctrlKey})}_scroll_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e)),{delta:d.getDeltaY(e),shiftKey:e.shiftKey,ctrlKey:e.ctrlKey})}_key_event(e){return{type:e.type,keyCode:e.keyCode}}_pan_start(e){const t=this._pan_event(e);t.sx-=e.deltaX,t.sy-=e.deltaY,this._trigger(this.pan_start,t,e.srcEvent)}_pan(e){this._trigger(this.pan,this._pan_event(e),e.srcEvent)}_pan_end(e){this._trigger(this.pan_end,this._pan_event(e),e.srcEvent)}_pinch_start(e){this._trigger(this.pinch_start,this._pinch_event(e),e.srcEvent)}_pinch(e){this._trigger(this.pinch,this._pinch_event(e),e.srcEvent)}_pinch_end(e){this._trigger(this.pinch_end,this._pinch_event(e),e.srcEvent)}_rotate_start(e){this._trigger(this.rotate_start,this._rotate_event(e),e.srcEvent)}_rotate(e){this._trigger(this.rotate,this._rotate_event(e),e.srcEvent)}_rotate_end(e){this._trigger(this.rotate_end,this._rotate_event(e),e.srcEvent)}_tap(e){this._trigger(this.tap,this._tap_event(e),e.srcEvent)}_doubletap(e){this._trigger(this.doubletap,this._tap_event(e),e.srcEvent)}_press(e){this._trigger(this.press,this._tap_event(e),e.srcEvent)}_pressup(e){this._trigger(this.pressup,this._tap_event(e),e.srcEvent)}_mouse_enter(e){this._trigger(this.move_enter,this._move_event(e),e)}_mouse_move(e){this._trigger(this.move,this._move_event(e),e)}_mouse_exit(e){this._trigger(this.move_exit,this._move_event(e),e)}_mouse_wheel(e){this._trigger(this.scroll,this._scroll_event(e),e)}_context_menu(e){!this.menu.is_open&&this.menu.can_open&&e.preventDefault();var{sx:t,sy:e}=this._get_sxy(e);this.menu.toggle({left:t,top:e})}_key_down(e){this.trigger(this.keydown,this._key_event(e))}_key_up(e){this.trigger(this.keyup,this._key_event(e))}}(n.UIEventBus=g).__name__="UIEventBus"},function(e,t,n,r,i){r();var a=this&&this.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(o=(a<3?i(o):3<a?i(t,n,o):i(t,n))||o);return 3<a&&o&&Object.defineProperty(t,n,o),o};function o(t){return function(e){e.prototype.event_name=t}}class s{to_json(){var{event_name:e}=this;return{event_name:e,event_values:this._to_json()}}}(n.BokehEvent=s).__name__="BokehEvent";class l extends s{constructor(){super(...arguments),this.origin=null}_to_json(){return{model:this.origin}}}(n.ModelEvent=l).__name__="ModelEvent";r=class extends s{_to_json(){return{}}};(n.DocumentReady=r).__name__="DocumentReady",n.DocumentReady=r=a([o("document_ready")],r);r=class extends l{};(n.ButtonClick=r).__name__="ButtonClick",n.ButtonClick=r=a([o("button_click")],r);r=class extends l{constructor(e){super(),this.item=e}_to_json(){var{item:e}=this;return Object.assign(Object.assign({},super._to_json()),{item:e})}};(n.MenuItemClick=r).__name__="MenuItemClick",n.MenuItemClick=r=a([o("menu_item_click")],r);class c extends l{}(n.UIEvent=c).__name__="UIEvent";r=class extends c{};(n.LODStart=r).__name__="LODStart",n.LODStart=r=a([o("lodstart")],r);r=class extends c{};(n.LODEnd=r).__name__="LODEnd",n.LODEnd=r=a([o("lodend")],r);r=class extends c{constructor(e,t){super(),this.geometry=e,this.final=t}_to_json(){var{geometry:e,final:t}=this;return Object.assign(Object.assign({},super._to_json()),{geometry:e,final:t})}};(n.SelectionGeometry=r).__name__="SelectionGeometry",n.SelectionGeometry=r=a([o("selectiongeometry")],r);r=class extends c{};(n.Reset=r).__name__="Reset",n.Reset=r=a([o("reset")],r);class u extends c{constructor(e,t,n,r){super(),this.sx=e,this.sy=t,this.x=n,this.y=r}_to_json(){var{sx:e,sy:t,x:n,y:r}=this;return Object.assign(Object.assign({},super._to_json()),{sx:e,sy:t,x:n,y:r})}}(n.PointEvent=u).__name__="PointEvent";r=class extends u{constructor(e,t,n,r,i,a){super(e,t,n,r),this.sx=e,this.sy=t,this.x=n,this.y=r,this.delta_x=i,this.delta_y=a}_to_json(){var{delta_x:e,delta_y:t}=this;return Object.assign(Object.assign({},super._to_json()),{delta_x:e,delta_y:t})}};(n.Pan=r).__name__="Pan",n.Pan=r=a([o("pan")],r);r=class extends u{constructor(e,t,n,r,i){super(e,t,n,r),this.sx=e,this.sy=t,this.x=n,this.y=r,this.scale=i}_to_json(){var{scale:e}=this;return Object.assign(Object.assign({},super._to_json()),{scale:e})}};(n.Pinch=r).__name__="Pinch",n.Pinch=r=a([o("pinch")],r);r=class extends u{constructor(e,t,n,r,i){super(e,t,n,r),this.sx=e,this.sy=t,this.x=n,this.y=r,this.rotation=i}_to_json(){var{rotation:e}=this;return Object.assign(Object.assign({},super._to_json()),{rotation:e})}};(n.Rotate=r).__name__="Rotate",n.Rotate=r=a([o("rotate")],r);r=class extends u{constructor(e,t,n,r,i){super(e,t,n,r),this.sx=e,this.sy=t,this.x=n,this.y=r,this.delta=i}_to_json(){var{delta:e}=this;return Object.assign(Object.assign({},super._to_json()),{delta:e})}};(n.MouseWheel=r).__name__="MouseWheel",n.MouseWheel=r=a([o("wheel")],r);r=class extends u{};(n.MouseMove=r).__name__="MouseMove",n.MouseMove=r=a([o("mousemove")],r);r=class extends u{};(n.MouseEnter=r).__name__="MouseEnter",n.MouseEnter=r=a([o("mouseenter")],r);r=class extends u{};(n.MouseLeave=r).__name__="MouseLeave",n.MouseLeave=r=a([o("mouseleave")],r);r=class extends u{};(n.Tap=r).__name__="Tap",n.Tap=r=a([o("tap")],r);r=class extends u{};(n.DoubleTap=r).__name__="DoubleTap",n.DoubleTap=r=a([o("doubletap")],r);r=class extends u{};(n.Press=r).__name__="Press",n.Press=r=a([o("press")],r);r=class extends u{};(n.PressUp=r).__name__="PressUp",n.PressUp=r=a([o("pressup")],r);r=class extends u{};(n.PanStart=r).__name__="PanStart",n.PanStart=r=a([o("panstart")],r);r=class extends u{};(n.PanEnd=r).__name__="PanEnd",n.PanEnd=r=a([o("panend")],r);r=class extends u{};(n.PinchStart=r).__name__="PinchStart",n.PinchStart=r=a([o("pinchstart")],r);r=class extends u{};(n.PinchEnd=r).__name__="PinchEnd",n.PinchEnd=r=a([o("pinchend")],r);r=class extends u{};(n.RotateStart=r).__name__="RotateStart",n.RotateStart=r=a([o("rotatestart")],r);r=class extends u{};(n.RotateEnd=r).__name__="RotateEnd",n.RotateEnd=r=a([o("rotateend")],r)},function(e,t,n,r,i){function a(e){e=getComputedStyle(e).fontSize;return null!=e?parseInt(e,10):null}r(),n.getDeltaY=function(e){let t=-e.deltaY;if(e.target instanceof HTMLElement)switch(e.deltaMode){case e.DOM_DELTA_LINE:t*=null!==(r=null!==(n=a(null!==(n=(r=e.target).offsetParent)&&void 0!==n?n:document.body))&&void 0!==n?n:a(r))&&void 0!==r?r:16;break;case e.DOM_DELTA_PAGE:t*=e.target.clientHeight}var n,r;return t}},function(e,t,n,r,i){r(),i("Expression",e(124).Expression),i("CustomJSExpr",e(267).CustomJSExpr),i("Stack",e(268).Stack),i("CumSum",e(269).CumSum),i("ScalarExpression",e(124).ScalarExpression),i("Minimum",e(270).Minimum),i("Maximum",e(271).Maximum)},function(e,t,n,r,i){r();const a=e(14),o=e(124),s=e(24),l=e(9),c=e(13),u=e(34),d=e(8);class h extends o.Expression{constructor(e){super(e)}static init_CustomJSExpr(){this.define(({Unknown:e,String:t,Dict:n})=>({args:[n(e),{}],code:[t,""]}))}connect_signals(){super.connect_signals();for(const e of c.values(this.args))e instanceof a.HasProps&&e.change.connect(()=>{this._result.clear(),this.change.emit()})}get names(){return c.keys(this.args)}get values(){return c.values(this.args)}get func(){var e=u.use_strict(this.code);return new s.GeneratorFunction(...this.names,e)}_v_compute(e){const t=this.func.apply(e,this.values);let n=t.next();if(n.done&&void 0!==n.value){const{value:t}=n;return d.isArray(t)||d.isTypedArray(t)?t:d.isIterable(t)?[...t]:l.repeat(t,e.length)}{const e=[];for(;e.push(n.value),n=t.next(),!n.done;);return e}}}(n.CustomJSExpr=h).__name__="CustomJSExpr",h.init_CustomJSExpr()},function(e,t,n,r,i){r();e=e(124);class a extends e.Expression{constructor(e){super(e)}static init_Stack(){this.define(({String:e,Array:t})=>({fields:[t(e),[]]}))}_v_compute(e){var t;const n=null!==(t=e.get_length())&&void 0!==t?t:0,r=new Float64Array(n);for(const t of this.fields){var i=e.data[t];if(null!=i)for(let e=0,t=Math.min(n,i.length);e<t;e++)r[e]+=i[e]}return r}}(n.Stack=a).__name__="Stack",a.init_Stack()},function(e,t,n,r,i){r();e=e(124);class a extends e.Expression{constructor(e){super(e)}static init_CumSum(){this.define(({Boolean:e,String:t})=>({field:[t],include_zero:[e,!1]}))}_v_compute(e){var t;const n=new Float64Array(null!==(t=e.get_length())&&void 0!==t?t:0),r=e.data[this.field],i=this.include_zero?1:0;n[0]=this.include_zero?0:r[0];for(let e=1;e<n.length;e++)n[e]=n[e-1]+r[e-i];return n}}(n.CumSum=a).__name__="CumSum",a.init_CumSum()},function(e,t,n,r,i){r();const a=e(124),o=e(9);class s extends a.ScalarExpression{constructor(e){super(e)}static init_Minimum(){this.define(({Number:e,String:t,Nullable:n})=>({field:[t],initial:[n(e),null]}))}_compute(e){var t,e=null!==(t=e.data[this.field])&&void 0!==t?t:[];return Math.min(null!==(t=this.initial)&&void 0!==t?t:1/0,o.min(e))}}(n.Minimum=s).__name__="Minimum",s.init_Minimum()},function(e,t,n,r,i){r();const a=e(124),o=e(9);class s extends a.ScalarExpression{constructor(e){super(e)}static init_Maximum(){this.define(({Number:e,String:t,Nullable:n})=>({field:[t],initial:[n(e),null]}))}_compute(e){var t,e=null!==(t=e.data[this.field])&&void 0!==t?t:[];return Math.max(null!==(t=this.initial)&&void 0!==t?t:-1/0,o.max(e))}}(n.Maximum=s).__name__="Maximum",s.init_Maximum()},function(e,t,n,r,i){r(),i("BooleanFilter",e(273).BooleanFilter),i("CustomJSFilter",e(274).CustomJSFilter),i("Filter",e(121).Filter),i("GroupFilter",e(275).GroupFilter),i("IndexFilter",e(276).IndexFilter)},function(e,t,n,r,i){r();const a=e(121),o=e(24);class s extends a.Filter{constructor(e){super(e)}static init_BooleanFilter(){this.define(({Boolean:e,Array:t,Nullable:n})=>({booleans:[n(t(e)),null]}))}compute_indices(e){var t=e.length,{booleans:e}=this;return null==e?o.Indices.all_set(t):o.Indices.from_booleans(t,e)}}(n.BooleanFilter=s).__name__="BooleanFilter",s.init_BooleanFilter()},function(e,t,n,r,i){r();const a=e(121),o=e(24),s=e(13),l=e(8),c=e(34);class u extends a.Filter{constructor(e){super(e)}static init_CustomJSFilter(){this.define(({Unknown:e,String:t,Dict:n})=>({args:[n(e),{}],code:[t,""]}))}get names(){return s.keys(this.args)}get values(){return s.values(this.args)}get func(){var e=c.use_strict(this.code);return new Function(...this.names,"source",e)}compute_indices(e){var t=e.length,e=this.func(...this.values,e);if(null==e)return o.Indices.all_set(t);if(l.isArrayOf(e,l.isInteger))return o.Indices.from_indices(t,e);if(l.isArrayOf(e,l.isBoolean))return o.Indices.from_booleans(t,e);throw new Error(`expect an array of integers or booleans, or null, got ${e}`)}}(n.CustomJSFilter=u).__name__="CustomJSFilter",u.init_CustomJSFilter()},function(e,t,n,r,i){r();const a=e(121),o=e(24),s=e(19);class l extends a.Filter{constructor(e){super(e)}static init_GroupFilter(){this.define(({String:e})=>({column_name:[e],group:[e]}))}compute_indices(e){var t=e.get_column(this.column_name);if(null==t)return s.logger.warn(`${this}: groupby column '${this.column_name}' not found in the data source`),new o.Indices(e.length,1);{const n=new o.Indices(e.length);for(let e=0;e<n.size;e++)t[e]===this.group&&n.set(e);return n}}}(n.GroupFilter=l).__name__="GroupFilter",l.init_GroupFilter()},function(e,t,n,r,i){r();const a=e(121),o=e(24);class s extends a.Filter{constructor(e){super(e)}static init_IndexFilter(){this.define(({Int:e,Array:t,Nullable:n})=>({indices:[n(t(e)),null]}))}compute_indices(e){var t=e.length,{indices:e}=this;return null==e?o.Indices.all_set(t):o.Indices.from_indices(t,e)}}(n.IndexFilter=s).__name__="IndexFilter",s.init_IndexFilter()},function(e,t,n,r,i){r(),i("AnnularWedge",e(278).AnnularWedge),i("Annulus",e(279).Annulus),i("Arc",e(280).Arc),i("Bezier",e(281).Bezier),i("Circle",e(282).Circle),i("Ellipse",e(286).Ellipse),i("EllipseOval",e(287).EllipseOval),i("Glyph",e(98).Glyph),i("HArea",e(117).HArea),i("HBar",e(289).HBar),i("HexTile",e(291).HexTile),i("Image",e(292).Image),i("ImageRGBA",e(294).ImageRGBA),i("ImageURL",e(295).ImageURL),i("Line",e(63).Line),i("MultiLine",e(127).MultiLine),i("MultiPolygons",e(297).MultiPolygons),i("Oval",e(298).Oval),i("Patch",e(116).Patch),i("Patches",e(128).Patches),i("Quad",e(299).Quad),i("Quadratic",e(300).Quadratic),i("Ray",e(301).Ray),i("Rect",e(302).Rect),i("Scatter",e(303).Scatter),i("Segment",e(306).Segment),i("Spline",e(307).Spline),i("Step",e(309).Step),i("Text",e(310).Text),i("VArea",e(119).VArea),i("VBar",e(311).VBar),i("Wedge",e(312).Wedge)},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(106),l=e(48),c=e(24),u=e(20),d=a.__importStar(e(18)),h=e(10),f=e(59);class p extends o.XYGlyphView{_map_data(){"data"==this.model.properties.inner_radius.units?this.sinner_radius=this.sdist(this.renderer.xscale,this._x,this.inner_radius):this.sinner_radius=c.to_screen(this.inner_radius),"data"==this.model.properties.outer_radius.units?this.souter_radius=this.sdist(this.renderer.xscale,this._x,this.outer_radius):this.souter_radius=c.to_screen(this.outer_radius)}_render(e,t,n){const{sx:r,sy:i,start_angle:a,end_angle:o,sinner_radius:s,souter_radius:l}=null!=n?n:this,c="anticlock"==this.model.direction;for(const n of t){const t=r[n],d=i[n],h=s[n],f=l[n],p=a.get(n),m=o.get(n);var u;isNaN(t+d+h+f+p+m)||(u=m-p,e.translate(t,d),e.rotate(p),e.beginPath(),e.moveTo(f,0),e.arc(0,0,f,0,u,c),e.rotate(u),e.lineTo(h,0),e.arc(0,0,h,0,-u,!c),e.closePath(),e.rotate(-u-p),e.translate(-t,-d),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),e.stroke()))}}_hit_point(e){const{sx:t,sy:n}=e,r=this.renderer.xscale.invert(t),i=this.renderer.yscale.invert(n);let a,o,s,l;if("data"==this.model.properties.outer_radius.units)a=r-this.max_outer_radius,s=r+this.max_outer_radius,o=i-this.max_outer_radius,l=i+this.max_outer_radius;else{const e=t-this.max_outer_radius,r=t+this.max_outer_radius;[a,s]=this.renderer.xscale.r_invert(e,r);const i=n-this.max_outer_radius,c=n+this.max_outer_radius;[o,l]=this.renderer.yscale.r_invert(i,c)}const c=[];for(const e of this.index.indices({x0:a,x1:s,y0:o,y1:l})){const t=this.souter_radius[e]**2,n=this.sinner_radius[e]**2,[a,o]=this.renderer.xscale.r_compute(r,this._x[e]),[s,l]=this.renderer.yscale.r_compute(i,this._y[e]),u=(a-o)**2+(s-l)**2;u<=t&&u>=n&&c.push(e)}const u="anticlock"==this.model.direction,d=[];for(const e of c){const r=Math.atan2(n-this.sy[e],t-this.sx[e]);h.angle_between(-r,-this.start_angle.get(e),-this.end_angle.get(e),u)&&d.push(e)}return new f.Selection({indices:d})}draw_legend_for_index(e,t,n){s.generic_area_vector_legend(this.visuals,e,t,n)}scenterxy(e){var t=(this.sinner_radius[e]+this.souter_radius[e])/2,n=(this.start_angle.get(e)+this.end_angle.get(e))/2;return[this.sx[e]+t*Math.cos(n),this.sy[e]+t*Math.sin(n)]}}(n.AnnularWedgeView=p).__name__="AnnularWedgeView";class m extends o.XYGlyph{constructor(e){super(e)}static init_AnnularWedge(){this.prototype.default_view=p,this.mixins([l.LineVector,l.FillVector,l.HatchVector]),this.define(({})=>({direction:[u.Direction,"anticlock"],inner_radius:[d.DistanceSpec,{field:"inner_radius"}],outer_radius:[d.DistanceSpec,{field:"outer_radius"}],start_angle:[d.AngleSpec,{field:"start_angle"}],end_angle:[d.AngleSpec,{field:"end_angle"}]}))}}(n.AnnularWedge=m).__name__="AnnularWedge",m.init_AnnularWedge()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(24),l=e(48),c=a.__importStar(e(18)),d=e(27),h=e(59);class u extends o.XYGlyphView{_map_data(){"data"==this.model.properties.inner_radius.units?this.sinner_radius=this.sdist(this.renderer.xscale,this._x,this.inner_radius):this.sinner_radius=s.to_screen(this.inner_radius),"data"==this.model.properties.outer_radius.units?this.souter_radius=this.sdist(this.renderer.xscale,this._x,this.outer_radius):this.souter_radius=s.to_screen(this.outer_radius)}_render(t,n,e){var{sx:r,sy:i,sinner_radius:a,souter_radius:o}=null!=e?e:this;for(const e of n){const n=r[e],l=i[e],c=a[e],u=o[e];function s(){if(t.beginPath(),d.is_ie)for(const e of[!1,!0])t.arc(n,l,c,0,Math.PI,e),t.arc(n,l,u,Math.PI,0,!e);else t.arc(n,l,c,0,2*Math.PI,!0),t.arc(n,l,u,2*Math.PI,0,!1)}isNaN(n+l+c+u)||(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,e),s(),t.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(t,e),s(),t.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(t,e),t.beginPath(),t.arc(n,l,c,0,2*Math.PI),t.moveTo(n+u,l),t.arc(n,l,u,0,2*Math.PI),t.stroke()))}}_hit_point(e){const{sx:t,sy:n}=e,r=this.renderer.xscale.invert(t),i=this.renderer.yscale.invert(n);let a,o,s,l;if("data"==this.model.properties.outer_radius.units)a=r-this.max_outer_radius,s=r+this.max_outer_radius,o=i-this.max_outer_radius,l=i+this.max_outer_radius;else{const e=t-this.max_outer_radius,r=t+this.max_outer_radius;[a,s]=this.renderer.xscale.r_invert(e,r);const i=n-this.max_outer_radius,c=n+this.max_outer_radius;[o,l]=this.renderer.yscale.r_invert(i,c)}const c=[];for(const e of this.index.indices({x0:a,x1:s,y0:o,y1:l})){const t=this.souter_radius[e]**2,n=this.sinner_radius[e]**2,[a,o]=this.renderer.xscale.r_compute(r,this._x[e]),[s,l]=this.renderer.yscale.r_compute(i,this._y[e]),u=(a-o)**2+(s-l)**2;u<=t&&u>=n&&c.push(e)}return new h.Selection({indices:c})}draw_legend_for_index(e,{x0:t,y0:n,x1:r,y1:i},a){const o=a+1,s=new Array(o);s[a]=(t+r)/2;const l=new Array(o);l[a]=(n+i)/2;const c=.5*Math.min(Math.abs(r-t),Math.abs(i-n)),u=new Array(o);u[a]=.4*c;const d=new Array(o);d[a]=.8*c,this._render(e,[a],{sx:s,sy:l,sinner_radius:u,souter_radius:d})}}(n.AnnulusView=u).__name__="AnnulusView";class f extends o.XYGlyph{constructor(e){super(e)}static init_Annulus(){this.prototype.default_view=u,this.mixins([l.LineVector,l.FillVector,l.HatchVector]),this.define(({})=>({inner_radius:[c.DistanceSpec,{field:"inner_radius"}],outer_radius:[c.DistanceSpec,{field:"outer_radius"}]}))}}(n.Annulus=f).__name__="Annulus",f.init_Annulus()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(106),l=e(48),c=e(24),u=e(20),d=a.__importStar(e(18));class h extends o.XYGlyphView{_map_data(){"data"==this.model.properties.radius.units?this.sradius=this.sdist(this.renderer.xscale,this._x,this.radius):this.sradius=c.to_screen(this.radius)}_render(e,t,n){if(this.visuals.line.doit){const{sx:r,sy:i,sradius:a,start_angle:o,end_angle:s}=null!=n?n:this,l="anticlock"==this.model.direction;for(const n of t){const t=r[n],c=i[n],u=a[n],d=o.get(n),h=s.get(n);isNaN(t+c+u+d+h)||(e.beginPath(),e.arc(t,c,u,d,h,l),this.visuals.line.set_vectorize(e,n),e.stroke())}}}draw_legend_for_index(e,t,n){s.generic_line_vector_legend(this.visuals,e,t,n)}}(n.ArcView=h).__name__="ArcView";class f extends o.XYGlyph{constructor(e){super(e)}static init_Arc(){this.prototype.default_view=h,this.mixins(l.LineVector),this.define(({})=>({direction:[u.Direction,"anticlock"],radius:[d.DistanceSpec,{field:"radius"}],start_angle:[d.AngleSpec,{field:"start_angle"}],end_angle:[d.AngleSpec,{field:"end_angle"}]}))}}(n.Arc=f).__name__="Arc",f.init_Arc()},function(e,t,n,r,i){r();const a=e(1),o=e(48),s=e(98),l=e(106),c=e(65),u=a.__importStar(e(18));class d extends s.GlyphView{_project_data(){c.inplace.project_xy(this._x0,this._y0),c.inplace.project_xy(this._x1,this._y1)}_index_data(t){const{data_size:n,_x0:r,_y0:i,_x1:a,_y1:o,_cx0:s,_cy0:l,_cx1:c,_cy1:u}=this;for(let e=0;e<n;e++){const n=r[e],d=i[e],h=a[e],f=o[e],p=s[e],m=l[e],g=c[e],_=u[e];if(isNaN(n+h+d+f+p+m+g+_))t.add_empty();else{const[r,i,a,o]=function(i,a,o,s,l,c,u,d){const h=[],e=[[],[]];for(let r=0;r<=2;r++){let e,t,n;if(n=0===r?(t=6*i-12*o+6*l,e=-3*i+9*o-9*l+3*u,3*o-3*i):(t=6*a-12*s+6*c,e=-3*a+9*s-9*c+3*d,3*s-3*a),Math.abs(e)<1e-12){if(Math.abs(t)<1e-12)continue;const i=-n/t;0<i&&i<1&&h.push(i)}else{var f=t*t-4*n*e,p=Math.sqrt(f);f<0||(0<(f=(-t+p)/(2*e))&&f<1&&h.push(f),0<(p=(-t-p)/(2*e))&&p<1&&h.push(p))}}let t=h.length;const n=t;for(;t--;){const n=h[t],m=1-n,g=m*m*m*i+3*m*m*n*o+3*m*n*n*l+n*n*n*u;e[0][t]=g;var r=m*m*m*a+3*m*m*n*s+3*m*n*n*c+n*n*n*d;e[1][t]=r}return e[0][n]=i,e[1][n]=a,e[0][n+1]=u,e[1][n+1]=d,[Math.min(...e[0]),Math.max(...e[1]),Math.max(...e[0]),Math.min(...e[1])]}(n,d,h,f,p,m,g,_);t.add(r,i,a,o)}}}_render(e,t,n){if(this.visuals.line.doit){var{sx0:r,sy0:i,sx1:a,sy1:o,scx0:s,scy0:l,scx1:c,scy1:u}=null!=n?n:this;for(const n of t){const t=r[n],d=i[n],h=a[n],f=o[n],p=s[n],m=l[n],g=c[n],_=u[n];isNaN(t+d+h+f+p+m+g+_)||(e.beginPath(),e.moveTo(t,d),e.bezierCurveTo(p,m,g,_,h,f),this.visuals.line.set_vectorize(e,n),e.stroke())}}}draw_legend_for_index(e,t,n){l.generic_line_vector_legend(this.visuals,e,t,n)}scenterxy(){throw new Error(`${this}.scenterxy() is not implemented`)}}(n.BezierView=d).__name__="BezierView";class h extends s.Glyph{constructor(e){super(e)}static init_Bezier(){this.prototype.default_view=d,this.define(({})=>({x0:[u.XCoordinateSpec,{field:"x0"}],y0:[u.YCoordinateSpec,{field:"y0"}],x1:[u.XCoordinateSpec,{field:"x1"}],y1:[u.YCoordinateSpec,{field:"y1"}],cx0:[u.XCoordinateSpec,{field:"cx0"}],cy0:[u.YCoordinateSpec,{field:"cy0"}],cx1:[u.XCoordinateSpec,{field:"cx1"}],cy1:[u.YCoordinateSpec,{field:"cy1"}]})),this.mixins(o.LineVector)}}(n.Bezier=h).__name__="Bezier",h.init_Bezier()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(283),l=e(48),c=e(24),u=e(20),d=a.__importStar(e(107)),h=a.__importStar(e(18)),f=e(9),p=e(12),m=e(59);class g extends o.XYGlyphView{initialize(){super.initialize();var{webgl:e}=this.renderer.plot_view.canvas_view;null!=e&&(this.glglyph=new s.MarkerGL(e.gl,this,"circle"))}get use_radius(){return!(this.radius.is_Scalar()&&isNaN(this.radius.value))}_map_data(){if(this.use_radius)if("data"==this.model.properties.radius.units)switch(this.model.radius_dimension){case"x":this.sradius=this.sdist(this.renderer.xscale,this._x,this.radius);break;case"y":this.sradius=this.sdist(this.renderer.yscale,this._y,this.radius);break;case"max":{const t=this.sdist(this.renderer.xscale,this._x,this.radius),n=this.sdist(this.renderer.yscale,this._y,this.radius);this.sradius=p.map(t,(e,t)=>Math.max(e,n[t]));break}case"min":{const r=this.sdist(this.renderer.xscale,this._x,this.radius),i=this.sdist(this.renderer.yscale,this._y,this.radius);this.sradius=p.map(r,(e,t)=>Math.min(e,i[t]));break}}else this.sradius=c.to_screen(this.radius),this._configure("max_size",{value:2*this.max_radius});else{var e=new c.ScreenArray(this.size);this.sradius=p.map(e,e=>e/2)}}_mask_data(){const{frame:e}=this.renderer.plot_view,t=e.x_target,n=e.y_target;let r,i;return i=this.use_radius&&"data"==this.model.properties.radius.units?(r=t.map(e=>this.renderer.xscale.invert(e)).widen(this.max_radius),n.map(e=>this.renderer.yscale.invert(e)).widen(this.max_radius)):(r=t.widen(this.max_size).map(e=>this.renderer.xscale.invert(e)),n.widen(this.max_size).map(e=>this.renderer.yscale.invert(e))),this.index.indices({x0:r.start,x1:r.end,y0:i.start,y1:i.end})}_render(e,t,n){var{sx:r,sy:i,sradius:a}=null!=n?n:this;for(const n of t){const t=r[n],o=i[n],s=a[n];isNaN(t+o+s)||(e.beginPath(),e.arc(t,o,s,0,2*Math.PI,!1),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),e.stroke()))}}_hit_point(e){const{sx:t,sy:n}=e,r=this.renderer.xscale.invert(t),i=this.renderer.yscale.invert(n),{hit_dilation:a}=this.model;let o,s,l,c;if(this.use_radius&&"data"==this.model.properties.radius.units)o=r-this.max_radius*a,s=r+this.max_radius*a,l=i-this.max_radius*a,c=i+this.max_radius*a;else{const e=t-this.max_size*a,r=t+this.max_size*a;[o,s]=this.renderer.xscale.r_invert(e,r);const i=n-this.max_size*a,u=n+this.max_size*a;[l,c]=this.renderer.yscale.r_invert(i,u)}const u=this.index.indices({x0:o,x1:s,y0:l,y1:c}),d=[];if(this.use_radius&&"data"==this.model.properties.radius.units)for(const e of u){const t=(this.sradius[e]*a)**2,[n,o]=this.renderer.xscale.r_compute(r,this._x[e]),[s,l]=this.renderer.yscale.r_compute(i,this._y[e]);(n-o)**2+(s-l)**2<=t&&d.push(e)}else for(const e of u){const r=(this.sradius[e]*a)**2;(this.sx[e]-t)**2+(this.sy[e]-n)**2<=r&&d.push(e)}return new m.Selection({indices:d})}_hit_span(e){const{sx:n,sy:r}=e,i=this.bounds();let a,o,s,l;if("h"==e.direction){let e,t;if(s=i.y0,l=i.y1,this.use_radius&&"data"==this.model.properties.radius.units)e=n-this.max_radius,t=n+this.max_radius,[a,o]=this.renderer.xscale.r_invert(e,t);else{const i=this.max_size/2;e=n-i,t=n+i,[a,o]=this.renderer.xscale.r_invert(e,t)}}else{let e,t;if(a=i.x0,o=i.x1,this.use_radius&&"data"==this.model.properties.radius.units)e=r-this.max_radius,t=r+this.max_radius,[s,l]=this.renderer.yscale.r_invert(e,t);else{const i=this.max_size/2;e=r-i,t=r+i,[s,l]=this.renderer.yscale.r_invert(e,t)}}e=[...this.index.indices({x0:a,x1:o,y0:s,y1:l})];return new m.Selection({indices:e})}_hit_rect(e){var{sx0:t,sx1:n,sy0:r,sy1:e}=e,[t,n]=this.renderer.xscale.r_invert(t,n),[r,e]=this.renderer.yscale.r_invert(r,e),e=[...this.index.indices({x0:t,x1:n,y0:r,y1:e})];return new m.Selection({indices:e})}_hit_poly(e){const{sx:n,sy:r}=e,i=f.range(0,this.sx.length),a=[];for(let e=0,t=i.length;e<t;e++){var o=i[e];d.point_in_poly(this.sx[e],this.sy[e],n,r)&&a.push(o)}return new m.Selection({indices:a})}draw_legend_for_index(e,{x0:t,y0:n,x1:r,y1:i},a){const o=a+1,s=new Array(o);s[a]=(t+r)/2;const l=new Array(o);l[a]=(n+i)/2;const c=new Array(o);c[a]=.2*Math.min(Math.abs(r-t),Math.abs(i-n)),this._render(e,[a],{sx:s,sy:l,sradius:c})}}(n.CircleView=g).__name__="CircleView";class _ extends o.XYGlyph{constructor(e){super(e)}static init_Circle(){this.prototype.default_view=g,this.mixins([l.LineVector,l.FillVector,l.HatchVector]),this.define(({Number:e})=>({angle:[h.AngleSpec,0],size:[h.ScreenDistanceSpec,{value:4}],radius:[h.NullDistanceSpec,null],radius_dimension:[u.RadiusDimension,"x"],hit_dilation:[e,1]}))}}(n.Circle=_).__name__="Circle",_.init_Circle()},function(e,t,n,r,i){r();const a=e(1),o=e(109),s=e(113),l=a.__importDefault(e(284)),c=a.__importDefault(e(285)),u=e(282),d=e(12),h=e(19),f=e(24),p=e(22),m=e(11);function g(e,n,r,i,t,a,o){if(t.doit)if(a.is_Scalar()&&o.is_Scalar()){n.used=!1;const[i,t,s,l]=p.color2rgba(a.value,o.value);e.set_attribute(r,"vec4",[i/255,t/255,s/255,l/255])}else{let t;if(n.used=!0,a.is_Vector()){const e=new f.ColorArray(a.array);if(t=new f.RGBAArray(e.buffer),!o.is_Scalar()||1!=o.value)for(let e=0;e<i;e++){const n=4*e+3;255==t[n]&&(t[n]=255*o.get(e))}}else if(a.is_Scalar()&&o.is_Vector()){const e=new f.ColorArray(i);e.fill(a.value),t=new f.RGBAArray(e.buffer);for(let e=0;e<i;e++)for(let e=0;e<i;e++){const n=4*e+3;255==t[n]&&(t[n]=255*o.get(e))}}else m.unreachable();n.set_size(4*i),n.set_data(0,t),e.set_attribute(r,"vec4_uint8",n,0,0,!0)}else n.used=!1,e.set_attribute(r,"vec4",[0,0,0,0])}class _ extends s.BaseGLGlyph{constructor(e,t,n){super(e,t),this.glyph=t;const r=[`#define USE_${(this.marker_type=n).toUpperCase()}`],i=l.default,a=`${r.join("\n")}\n\n${c.default}`;this.prog=new o.Program(e),this.prog.set_shaders(i,a),this.vbo_sx=new o.VertexBuffer(e),this.prog.set_attribute("a_sx","float",this.vbo_sx),this.vbo_sy=new o.VertexBuffer(e),this.prog.set_attribute("a_sy","float",this.vbo_sy),this.vbo_s=new o.VertexBuffer(e),this.prog.set_attribute("a_size","float",this.vbo_s),this.vbo_a=new o.VertexBuffer(e),this.prog.set_attribute("a_angle","float",this.vbo_a),this.vbo_linewidth=new o.VertexBuffer(e),this.vbo_fg_color=new o.VertexBuffer(e),this.vbo_bg_color=new o.VertexBuffer(e),this.index_buffer=new o.IndexBuffer(e)}static is_supported(e){switch(e){case"asterisk":case"circle":case"circle_cross":case"circle_x":case"cross":case"diamond":case"diamond_cross":case"hex":case"inverted_triangle":case"square":case"square_cross":case"square_x":case"star":case"triangle":case"x":return!0;default:return!1}}draw(n,e,r){const i=e.glglyph,{nvertices:a}=i;if(i.data_changed&&(i._set_data(a),this.glyph instanceof u.CircleView&&null!=this.glyph.radius&&this.vbo_s.set_data(0,d.map(this.glyph.sradius,e=>2*e)),i.data_changed=!1),this.visuals_changed&&(this._set_visuals(a),this.visuals_changed=!1),this.prog.set_uniform("u_pixel_ratio","float",[r.pixel_ratio]),this.prog.set_uniform("u_canvas_size","vec2",[r.width,r.height]),this.prog.set_attribute("a_sx","float",i.vbo_sx),this.prog.set_attribute("a_sy","float",i.vbo_sy),this.prog.set_attribute("a_size","float",i.vbo_s),this.prog.set_attribute("a_angle","float",i.vbo_a),0!=n.length)if(n.length===a)this.prog.draw(this.gl.POINTS,[0,a]);else if(a<65535){const e=window.navigator.userAgent;0<e.indexOf("MSIE ")+e.indexOf("Trident/")+e.indexOf("Edge/")&&h.logger.warn("WebGL warning: IE is known to produce 1px sprites whith selections."),this.index_buffer.set_size(2*n.length),this.index_buffer.set_data(0,new Uint16Array(n)),this.prog.draw(this.gl.POINTS,this.index_buffer)}else{const e=64e3,r=[];for(let e=0,t=Math.ceil(a/64e3);e<t;e++)r.push([]);for(let e=0,t=n.length;e<t;e++){const a=n[e]%64e3;r[Math.floor(n[e]/64e3)].push(a)}for(let e=0,t=r.length;e<t;e++){const a=new Uint16Array(r[e]),o=64e3*e*4;0!==a.length&&(this.prog.set_attribute("a_sx","float",i.vbo_sx,0,o),this.prog.set_attribute("a_sy","float",i.vbo_sy,0,o),this.prog.set_attribute("a_size","float",i.vbo_s,0,o),this.prog.set_attribute("a_angle","float",i.vbo_a,0,o),this.vbo_linewidth.used&&this.prog.set_attribute("a_linewidth","float",this.vbo_linewidth,0,o),this.vbo_fg_color.used&&this.prog.set_attribute("a_fg_color","vec4_uint8",this.vbo_fg_color,0,4*o,!0),this.vbo_bg_color.used&&this.prog.set_attribute("a_bg_color","vec4_uint8",this.vbo_bg_color,0,4*o,!0),this.index_buffer.set_size(2*a.length),this.index_buffer.set_data(0,a),this.prog.draw(this.gl.POINTS,this.index_buffer))}}}_set_data(e){e*=4;this.vbo_sx.set_size(e),this.vbo_sy.set_size(e),this.vbo_a.set_size(e),this.vbo_s.set_size(e),this.vbo_sx.set_data(0,this.glyph.sx),this.vbo_sy.set_data(0,this.glyph.sy),null!=this.glyph.angle&&this.vbo_a.set_data(0,new Float32Array(this.glyph.angle)),this.glyph instanceof u.CircleView&&null!=this.glyph.radius?this.vbo_s.set_data(0,d.map(this.glyph.sradius,e=>2*e)):this.vbo_s.set_data(0,new Float32Array(this.glyph.size))}_set_visuals(e){var{line:t,fill:n}=this.glyph.visuals;!function(e,t,n,r,i,a){if(i.doit){if(a.is_Scalar())t.used=!1,e.set_attribute(n,"float",[a.value]);else if(a.is_Vector()){t.used=!0;const i=new Float32Array(a.array);t.set_size(4*r),t.set_data(0,i),e.set_attribute(n,"float",t)}}else t.used=!1,e.set_attribute(n,"float",[0])}(this.prog,this.vbo_linewidth,"a_linewidth",e,t,t.line_width),g(this.prog,this.vbo_fg_color,"a_fg_color",e,t,t.line_color,t.line_alpha),g(this.prog,this.vbo_bg_color,"a_bg_color",e,n,n.fill_color,n.fill_alpha),this.prog.set_uniform("u_antialias","float",[.8])}}(n.MarkerGL=_).__name__="MarkerGL"},function(e,t,n,r,i){r(),n.default="\nprecision mediump float;\nconst float SQRT_2 = 1.4142135623730951;\n//\nuniform float u_pixel_ratio;\nuniform vec2 u_canvas_size;\nuniform vec2 u_offset;\nuniform vec2 u_scale;\nuniform float u_antialias;\n//\nattribute float a_sx;\nattribute float a_sy;\nattribute float a_size;\nattribute float a_angle;  // in radians\nattribute float a_linewidth;\nattribute vec4  a_fg_color;\nattribute vec4  a_bg_color;\n//\nvarying float v_linewidth;\nvarying float v_size;\nvarying vec4  v_fg_color;\nvarying vec4  v_bg_color;\nvarying vec2  v_rotation;\n\nvoid main (void)\n{\n    v_size = a_size * u_pixel_ratio;\n    v_linewidth = a_linewidth * u_pixel_ratio;\n    v_fg_color = a_fg_color;\n    v_bg_color = a_bg_color;\n    v_rotation = vec2(cos(-a_angle), sin(-a_angle));\n    vec2 pos = vec2(a_sx, a_sy);  // in pixels\n    pos += 0.5;  // make up for Bokeh's offset\n    pos /= u_canvas_size / u_pixel_ratio;  // in 0..1\n    gl_Position = vec4(pos*2.0-1.0, 0.0, 1.0);\n    gl_Position.y *= -1.0;\n    gl_PointSize = SQRT_2 * v_size + 2.0 * (v_linewidth + 1.5*u_antialias);\n}\n"},function(e,t,n,r,i){r(),n.default='\nprecision mediump float;\n\nconst float SQRT_2 = 1.4142135623730951;\nconst float PI = 3.14159265358979323846264;\n\nconst float IN_ANGLE = 0.6283185307179586; // PI/5. = 36 degrees (star of 5 pikes)\n//const float OUT_ANGLE = PI/2. - IN_ANGLE; // External angle for regular stars\nconst float COS_A = 0.8090169943749475; // cos(IN_ANGLE)\nconst float SIN_A = 0.5877852522924731; // sin(IN_ANGLE)\nconst float COS_B = 0.5877852522924731; // cos(OUT_ANGLE)\nconst float SIN_B = 0.8090169943749475; // sin(OUT_ANGLE)\n\n//\nuniform float u_antialias;\n//\nvarying vec4  v_fg_color;\nvarying vec4  v_bg_color;\nvarying float v_linewidth;\nvarying float v_size;\nvarying vec2  v_rotation;\n\n#ifdef USE_ASTERISK\n// asterisk\nfloat marker(vec2 P, float size)\n{\n    // Masks\n    float diamond = max(abs(SQRT_2 / 2.0 * (P.x - P.y)), abs(SQRT_2 / 2.0 * (P.x + P.y))) - size / (2.0 * SQRT_2);\n    float square = max(abs(P.x), abs(P.y)) - size / (2.0 * SQRT_2);\n    // Shapes\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of "width" for aa\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of "width" for aa\n    // Result is union of masked shapes\n    return min(max(X, diamond), max(cross, square));\n}\n#endif\n\n#ifdef USE_CIRCLE\n// circle\nfloat marker(vec2 P, float size)\n{\n    return length(P) - size/2.0;\n}\n#endif\n\n#ifdef USE_SQUARE\n// square\nfloat marker(vec2 P, float size)\n{\n    return max(abs(P.x), abs(P.y)) - size/2.0;\n}\n#endif\n\n#ifdef USE_DIAMOND\n// diamond\nfloat marker(vec2 P, float size)\n{\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\n    return r1 / SQRT_2;\n}\n#endif\n\n#ifdef USE_HEX\n// hex\nfloat marker(vec2 P, float size)\n{\n    vec2 q = abs(P);\n    return max(q.y * 0.57735 + q.x - 1.0 * size/2.0, q.y - 0.866 * size/2.0);\n}\n#endif\n\n#ifdef USE_STAR\n// star\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\nfloat marker(vec2 P, float size)\n{\n    float bn = mod(atan(P.x, -P.y), 2.0*IN_ANGLE) - IN_ANGLE;\n    P = length(P)*vec2(cos(bn), abs(sin(bn)));\n    P -= size*vec2(COS_A, SIN_A)/2.;\n    P += vec2(COS_B, SIN_B)*clamp(-(P.x*COS_B + P.y*SIN_B), 0.0, size*SIN_A/SIN_B/2.);\n\n    return length(P)*sign(P.x);\n}\n#endif\n\n#ifdef USE_TRIANGLE\n// triangle\nfloat marker(vec2 P, float size)\n{\n    P.y -= size * 0.3;\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\n    float r2 = P.y;\n    return max(r1 / SQRT_2, r2);  // Intersect diamond with rectangle\n}\n#endif\n\n#ifdef USE_INVERTED_TRIANGLE\n// inverted_triangle\nfloat marker(vec2 P, float size)\n{\n    P.y += size * 0.3;\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\n    float r2 = - P.y;\n    return max(r1 / SQRT_2, r2);  // Intersect diamond with rectangle\n}\n#endif\n\n#ifdef USE_CROSS\n// cross\nfloat marker(vec2 P, float size)\n{\n    float square = max(abs(P.x), abs(P.y)) - size / 2.5;   // 2.5 is a tweak\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of "width" for aa\n    return max(square, cross);\n}\n#endif\n\n#ifdef USE_CIRCLE_CROSS\n// circle_cross\nfloat marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float circle = length(P) - size/2.0;\n    float c1 = max(circle, s1);\n    float c2 = max(circle, s2);\n    float c3 = max(circle, s3);\n    float c4 = max(circle, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\n#ifdef USE_SQUARE_CROSS\n// square_cross\nfloat marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\n    float c1 = max(square, s1);\n    float c2 = max(square, s2);\n    float c3 = max(square, s3);\n    float c4 = max(square, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\n#ifdef USE_DIAMOND_CROSS\n// diamond_cross\nfloat marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\n    float diamond = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\n    diamond /= SQRT_2;\n    float c1 = max(diamond, s1);\n    float c2 = max(diamond, s2);\n    float c3 = max(diamond, s3);\n    float c4 = max(diamond, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\n#ifdef USE_X\n// x\nfloat marker(vec2 P, float size)\n{\n    float circle = length(P) - size / 1.6;\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of "width" for aa\n    return max(circle, X);\n}\n#endif\n\n#ifdef USE_CIRCLE_X\n// circle_x\nfloat marker(vec2 P, float size)\n{\n    float x = P.x - P.y;\n    float y = P.x + P.y;\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float circle = length(P) - size/2.0;\n    float c1 = max(circle, s1);\n    float c2 = max(circle, s2);\n    float c3 = max(circle, s3);\n    float c4 = max(circle, s4);\n    // Union\n    float almost = min(min(min(c1, c2), c3), c4);\n    // In this case, the X is also outside of the main shape\n    float Xmask = length(P) - size / 1.6;  // a circle\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of "width" for aa\n    return min(max(X, Xmask), almost);\n}\n#endif\n\n#ifdef USE_SQUARE_X\n// square_x\nfloat marker(vec2 P, float size)\n{\n    float x = P.x - P.y;\n    float y = P.x + P.y;\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\n    float c1 = max(square, s1);\n    float c2 = max(square, s2);\n    float c3 = max(square, s3);\n    float c4 = max(square, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\nvec4 outline(float distance, float linewidth, float antialias, vec4 fg_color, vec4 bg_color)\n{\n    vec4 frag_color;\n    float t = linewidth/2.0 - antialias;\n    float signed_distance = distance;\n    float border_distance = abs(signed_distance) - t;\n    float alpha = border_distance/antialias;\n    alpha = exp(-alpha*alpha);\n\n    // If fg alpha is zero, it probably means no outline. To avoid a dark outline\n    // shining through due to aa, we set the fg color to the bg color. Avoid if (i.e. branching).\n    float select = float(bool(fg_color.a));\n    fg_color.rgb = select * fg_color.rgb + (1.0  - select) * bg_color.rgb;\n    // Similarly, if we want a transparent bg\n    select = float(bool(bg_color.a));\n    bg_color.rgb = select * bg_color.rgb + (1.0  - select) * fg_color.rgb;\n\n    if( border_distance < 0.0)\n        frag_color = fg_color;\n    else if( signed_distance < 0.0 ) {\n        frag_color = mix(bg_color, fg_color, sqrt(alpha));\n    } else {\n        if( abs(signed_distance) < (linewidth/2.0 + antialias) ) {\n            frag_color = vec4(fg_color.rgb, fg_color.a * alpha);\n        } else {\n            discard;\n        }\n    }\n    return frag_color;\n}\n\nvoid main()\n{\n    vec2 P = gl_PointCoord.xy - vec2(0.5, 0.5);\n    P = vec2(v_rotation.x*P.x - v_rotation.y*P.y,\n             v_rotation.y*P.x + v_rotation.x*P.y);\n    float point_size = SQRT_2*v_size  + 2.0 * (v_linewidth + 1.5*u_antialias);\n    float distance = marker(P*point_size, v_size);\n    gl_FragColor = outline(distance, v_linewidth, u_antialias, v_fg_color, v_bg_color);\n}\n'},function(e,t,n,r,i){r();var a=e(287);class o extends a.EllipseOvalView{}(n.EllipseView=o).__name__="EllipseView";class s extends a.EllipseOval{constructor(e){super(e)}static init_Ellipse(){this.prototype.default_view=o}}(n.Ellipse=s).__name__="Ellipse",s.init_Ellipse()},function(e,t,n,r,i){r();const a=e(1),o=e(288),g=a.__importStar(e(107)),s=e(24),_=e(59);class l extends o.CenterRotatableView{_map_data(){"data"==this.model.properties.width.units?this.sw=this.sdist(this.renderer.xscale,this._x,this.width,"center"):this.sw=s.to_screen(this.width),"data"==this.model.properties.height.units?this.sh=this.sdist(this.renderer.yscale,this._y,this.height,"center"):this.sh=s.to_screen(this.height)}_render(e,t,n){const{sx:r,sy:i,sw:a,sh:o,angle:s}=null!=n?n:this;for(const n of t){const t=r[n],l=i[n],c=a[n],u=o[n],d=s.get(n);isNaN(t+l+c+u+d)||(e.beginPath(),e.ellipse(t,l,c/2,u/2,d,0,2*Math.PI),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),e.stroke()))}}_hit_point(e){let t,n,r,i,a,o,s,l,c;var{sx:u,sy:d}=e,h=this.renderer.xscale.invert(u),e=this.renderer.yscale.invert(d);"data"==this.model.properties.width.units?(t=h-this.max_width,n=h+this.max_width):(o=u-this.max_width,s=u+this.max_width,[t,n]=this.renderer.xscale.r_invert(o,s)),"data"==this.model.properties.height.units?(r=e-this.max_height,i=e+this.max_height):(l=d-this.max_height,c=d+this.max_height,[r,i]=this.renderer.yscale.r_invert(l,c));const f=this.index.indices({x0:t,x1:n,y0:r,y1:i}),p=[];for(const m of f)a=g.point_in_ellipse(u,d,this.angle.get(m),this.sh[m]/2,this.sw[m]/2,this.sx[m],this.sy[m]),a&&p.push(m);return new _.Selection({indices:p})}draw_legend_for_index(e,{x0:t,y0:n,x1:r,y1:i},a){const o=a+1,s=new Array(o);s[a]=(t+r)/2;const l=new Array(o);l[a]=(n+i)/2;const c=this.sw[a]/this.sh[a],u=.8*Math.min(Math.abs(r-t),Math.abs(i-n)),d=new Array(o),h=new Array(o);1<c?(d[a]=u,h[a]=u/c):(d[a]=u*c,h[a]=u),this._render(e,[a],{sx:s,sy:l,sw:d,sh:h,_angle:[0]})}}n.EllipseOvalView=l,l.__name__="EllipseOvalView";class c extends o.CenterRotatable{constructor(e){super(e)}}(n.EllipseOval=c).__name__="EllipseOval"},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(48),l=a.__importStar(e(18));class c extends o.XYGlyphView{get max_w2(){return"data"==this.model.properties.width.units?this.max_width/2:0}get max_h2(){return"data"==this.model.properties.height.units?this.max_height/2:0}_bounds({x0:e,x1:t,y0:n,y1:r}){var{max_w2:i,max_h2:a}=this;return{x0:e-i,x1:t+i,y0:n-a,y1:r+a}}}n.CenterRotatableView=c,c.__name__="CenterRotatableView";class u extends o.XYGlyph{constructor(e){super(e)}static init_CenterRotatable(){this.mixins([s.LineVector,s.FillVector,s.HatchVector]),this.define(({})=>({angle:[l.AngleSpec,0],width:[l.DistanceSpec,{field:"width"}],height:[l.DistanceSpec,{field:"height"}]}))}}(n.CenterRotatable=u).__name__="CenterRotatable",u.init_CenterRotatable()},function(e,t,n,r,i){r();const a=e(1),o=e(290),s=e(24),l=a.__importStar(e(18));class c extends o.BoxView{scenterxy(e){return[(this.sleft[e]+this.sright[e])/2,this.sy[e]]}_lrtb(e){var t=this._left[e],n=this._right[e],r=this._y[e],e=this.height.get(e)/2;return[Math.min(t,n),Math.max(t,n),r+e,r-e]}_map_data(){this.sy=this.renderer.yscale.v_compute(this._y),this.sh=this.sdist(this.renderer.yscale,this._y,this.height,"center"),this.sleft=this.renderer.xscale.v_compute(this._left),this.sright=this.renderer.xscale.v_compute(this._right);var t=this.sy.length;this.stop=new s.ScreenArray(t),this.sbottom=new s.ScreenArray(t);for(let e=0;e<t;e++)this.stop[e]=this.sy[e]-this.sh[e]/2,this.sbottom[e]=this.sy[e]+this.sh[e]/2;this._clamp_viewport()}}(n.HBarView=c).__name__="HBarView";class u extends o.Box{constructor(e){super(e)}static init_HBar(){this.prototype.default_view=c,this.define(({})=>({left:[l.XCoordinateSpec,{value:0}],y:[l.YCoordinateSpec,{field:"y"}],height:[l.NumberSpec,{value:1}],right:[l.XCoordinateSpec,{field:"right"}]}))}}(n.HBar=u).__name__="HBar",u.init_HBar()},function(e,t,n,r,i){r();const a=e(48),o=e(98),s=e(106),l=e(59);class c extends o.GlyphView{get_anchor_point(e,t,n){var r=Math.min(this.sleft[t],this.sright[t]),i=Math.max(this.sright[t],this.sleft[t]),a=Math.min(this.stop[t],this.sbottom[t]),o=Math.max(this.sbottom[t],this.stop[t]);switch(e){case"top_left":return{x:r,y:a};case"top":case"top_center":return{x:(r+i)/2,y:a};case"top_right":return{x:i,y:a};case"bottom_left":return{x:r,y:o};case"bottom":case"bottom_center":return{x:(r+i)/2,y:o};case"bottom_right":return{x:i,y:o};case"left":case"center_left":return{x:r,y:(a+o)/2};case"center":case"center_center":return{x:(r+i)/2,y:(a+o)/2};case"right":case"center_right":return{x:i,y:(a+o)/2}}}_index_data(t){const{min:n,max:r}=Math,{data_size:i}=this;for(let e=0;e<i;e++){const[i,a,o,s]=this._lrtb(e);isNaN(i+a+o+s)||!isFinite(i+a+o+s)?t.add_empty():t.add(n(i,a),n(o,s),r(a,i),r(o,s))}}_render(e,t,n){var{sleft:r,sright:i,stop:a,sbottom:o}=null!=n?n:this;for(const n of t){const t=r[n],l=a[n],c=i[n],u=o[n];function s(){e.beginPath(),e.rect(t,l,c-t,u-l)}isNaN(t+l+c+u)||(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),s(),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),s(),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),s(),e.stroke()))}}_clamp_viewport(){var t=this.renderer.plot_view.frame.bbox.h_range,n=this.renderer.plot_view.frame.bbox.v_range,r=this.stop.length;for(let e=0;e<r;e++)this.stop[e]=Math.max(this.stop[e],n.start),this.sbottom[e]=Math.min(this.sbottom[e],n.end),this.sleft[e]=Math.max(this.sleft[e],t.start),this.sright[e]=Math.min(this.sright[e],t.end)}_hit_rect(e){return this._hit_rect_against_index(e)}_hit_point(e){var{sx:t,sy:e}=e,t=this.renderer.xscale.invert(t),e=this.renderer.yscale.invert(e),e=[...this.index.indices({x0:t,y0:e,x1:t,y1:e})];return new l.Selection({indices:e})}_hit_span(e){const{sx:t,sy:n}=e;let r;if("v"==e.direction){const e=this.renderer.yscale.invert(n),t=this.renderer.plot_view.frame.bbox.h_range,[i,a]=this.renderer.xscale.r_invert(t.start,t.end);r=[...this.index.indices({x0:i,y0:e,x1:a,y1:e})]}else{const e=this.renderer.xscale.invert(t),n=this.renderer.plot_view.frame.bbox.v_range,[o,s]=this.renderer.yscale.r_invert(n.start,n.end);r=[...this.index.indices({x0:e,y0:o,x1:e,y1:s})]}return new l.Selection({indices:r})}draw_legend_for_index(e,t,n){s.generic_area_vector_legend(this.visuals,e,t,n)}}(n.BoxView=c).__name__="BoxView";class u extends o.Glyph{constructor(e){super(e)}static init_Box(){this.mixins([a.LineVector,a.FillVector,a.HatchVector])}}n.Box=u,u.__name__="Box",u.init_Box()},function(e,t,n,r,i){r();const a=e(1),o=e(98),s=a.__importStar(e(107)),l=a.__importStar(e(18)),c=e(48),u=e(20),d=e(65),h=e(106),f=e(59);class p extends o.GlyphView{scenterxy(e){return[this.sx[e],this.sy[e]]}_set_data(){const{orientation:e,size:t,aspect_scale:n}=this.model,{q:r,r:i}=this,a=this.q.length;this._x=new Float64Array(a),this._y=new Float64Array(a);const{_x:o,_y:s}=this,l=Math.sqrt(3);if("pointytop"==e)for(let e=0;e<a;e++){const a=r.get(e),c=i.get(e)/2;o[e]=t*l*(a+c)/n,s[e]=-3*t*c}else for(let e=0;e<a;e++){const a=r.get(e)/2,u=i.get(e);o[e]=3*t*a,s[e]=-t*l*(u+a)*n}}_project_data(){d.inplace.project_xy(this._x,this._y)}_index_data(t){let n=this.model.size,r=Math.sqrt(3)*n/2;"flattop"==this.model.orientation?([r,n]=[n,r],n*=this.model.aspect_scale):r/=this.model.aspect_scale;const{data_size:i}=this;for(let e=0;e<i;e++){const i=this._x[e],a=this._y[e];isNaN(i+a)||!isFinite(i+a)?t.add_empty():t.add(i-r,a-n,i+r,a+n)}}map_data(){[this.sx,this.sy]=this.renderer.coordinates.map_to_screen(this._x,this._y),[this.svx,this.svy]=this._get_unscaled_vertices()}_get_unscaled_vertices(){var e=this.model.size,t=this.model.aspect_scale;if("pointytop"==this.model.orientation){const n=this.renderer.yscale,r=this.renderer.xscale,i=Math.abs(n.compute(0)-n.compute(e)),a=Math.sqrt(3)/2*Math.abs(r.compute(0)-r.compute(e))/t,o=i/2;return[[0,-a,-a,0,a,a],[i,o,-o,-i,-o,o]]}{const s=this.renderer.xscale,l=this.renderer.yscale,c=Math.abs(s.compute(0)-s.compute(e)),u=Math.sqrt(3)/2*Math.abs(l.compute(0)-l.compute(e))*t,d=c/2;return[[c,d,-d,-c,-d,d],[0,-u,-u,0,u,u]]}}_render(t,e,n){const{sx:r,sy:i,svx:a,svy:o,scale:s}=null!=n?n:this;for(const n of e){const e=r[n],l=i[n],c=s.get(n);if(!isNaN(e+l+c)){t.translate(e,l),t.beginPath();for(let e=0;e<6;e++)t.lineTo(a[e]*c,o[e]*c);t.closePath(),t.translate(-e,-l),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,n),t.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(t,n),t.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(t,n),t.stroke())}}}_hit_point(e){const{sx:t,sy:n}=e,r=this.renderer.xscale.invert(t),i=this.renderer.yscale.invert(n),a=this.index.indices({x0:r,y0:i,x1:r,y1:i}),o=[];for(const e of a)s.point_in_poly(t-this.sx[e],n-this.sy[e],this.svx,this.svy)&&o.push(e);return new f.Selection({indices:o})}_hit_span(e){const{sx:t,sy:n}=e;let r;if("v"==e.direction){const e=this.renderer.yscale.invert(n),t=this.renderer.plot_view.frame.bbox.h_range,[i,a]=this.renderer.xscale.r_invert(t.start,t.end);r=[...this.index.indices({x0:i,y0:e,x1:a,y1:e})]}else{const e=this.renderer.xscale.invert(t),n=this.renderer.plot_view.frame.bbox.v_range,[o,s]=this.renderer.yscale.r_invert(n.start,n.end);r=[...this.index.indices({x0:e,y0:o,x1:e,y1:s})]}return new f.Selection({indices:r})}_hit_rect(e){var{sx0:t,sx1:n,sy0:r,sy1:e}=e,[t,n]=this.renderer.xscale.r_invert(t,n),[r,e]=this.renderer.yscale.r_invert(r,e),e=[...this.index.indices({x0:t,x1:n,y0:r,y1:e})];return new f.Selection({indices:e})}draw_legend_for_index(e,t,n){h.generic_area_vector_legend(this.visuals,e,t,n)}}(n.HexTileView=p).__name__="HexTileView";class m extends o.Glyph{constructor(e){super(e)}static init_HexTile(){this.prototype.default_view=p,this.mixins([c.LineVector,c.FillVector,c.HatchVector]),this.define(({Number:e})=>({r:[l.NumberSpec,{field:"r"}],q:[l.NumberSpec,{field:"q"}],scale:[l.NumberSpec,1],size:[e,1],aspect_scale:[e,1],orientation:[u.HexTileOrientation,"pointytop"]})),this.override({line_color:null})}}(n.HexTile=m).__name__="HexTile",m.init_HexTile()},function(e,t,n,r,i){r();const a=e(293),o=e(203),s=e(214);class l extends a.ImageBaseView{connect_signals(){super.connect_signals(),this.connect(this.model.color_mapper.change,()=>this._update_image())}_update_image(){null!=this.image_data&&(this._set_data(null),this.renderer.request_render())}_flat_img_to_buf8(e){return this.model.color_mapper.rgba_mapper.v_compute(e)}}(n.ImageView=l).__name__="ImageView";class c extends a.ImageBase{constructor(e){super(e)}static init_Image(){this.prototype.default_view=l,this.define(({Ref:e})=>({color_mapper:[e(o.ColorMapper),()=>new s.LinearColorMapper({palette:["#000000","#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0","#ffffff"]})]}))}}(n.Image=c).__name__="Image",c.init_Image()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(24),l=a.__importStar(e(18)),c=e(59),u=e(9),d=e(29),h=e(11);class f extends o.XYGlyphView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.global_alpha.change,()=>this.renderer.request_render())}_render(e,t,n){const{image_data:r,sx:i,sy:a,sw:o,sh:s}=null!=n?n:this,l=e.getImageSmoothingEnabled();e.setImageSmoothingEnabled(!1),e.globalAlpha=this.model.global_alpha;for(const n of t){const t=r[n],l=i[n],u=a[n],d=o[n],h=s[n];var c;null==t||isNaN(l+u+d+h)||(e.translate(0,c=u),e.scale(1,-1),e.translate(0,-c),e.drawImage(t,0|l,0|u,d,h),e.translate(0,c),e.scale(1,-1),e.translate(0,-c))}e.setImageSmoothingEnabled(l)}_set_data(n){this._set_width_heigh_data();for(let t=0,e=this.image.length;t<e;t++)if(!(null!=n&&n.indexOf(t)<0)){var r=this.image.get(t);let e;d.is_NDArray(r)?(h.assert(2==r.dimension,"expected a 2D array"),e=r,this._height[t]=r.shape[0],this._width[t]=r.shape[1]):(e=u.concat(r),this._height[t]=r.length,this._width[t]=r[0].length);r=this._flat_img_to_buf8(e);this._set_image_data_from_buffer(t,r)}}_index_data(t){const{data_size:n}=this;for(let e=0;e<n;e++){const[n,r,i,a]=this._lrtb(e);isNaN(n+r+i+a)||!isFinite(n+r+i+a)?t.add_empty():t.add(n,a,r,i)}}_lrtb(e){var t=this.dw.get(e),n=this.dh.get(e),r=this.renderer.xscale.source_range,i=this._x[e],r=r.is_reversed?i-t:i+t,t=this.renderer.yscale.source_range,e=this._y[e],n=t.is_reversed?e-n:e+n,[r,i]=i<r?[i,r]:[r,i],[n,e]=e<n?[e,n]:[n,e];return[r,i,e,n]}_set_width_heigh_data(){null!=this.image_data&&this.image_data.length==this.image.length||(this.image_data=new Array(this.image.length)),null!=this._width&&this._width.length==this.image.length||(this._width=new Uint32Array(this.image.length)),null!=this._height&&this._height.length==this.image.length||(this._height=new Uint32Array(this.image.length))}_get_or_create_canvas(e){const t=this.image_data[e];if(null!=t&&t.width==this._width[e]&&t.height==this._height[e])return t;{const t=document.createElement("canvas");return t.width=this._width[e],t.height=this._height[e],t}}_set_image_data_from_buffer(e,t){const n=this._get_or_create_canvas(e),r=n.getContext("2d"),i=r.getImageData(0,0,this._width[e],this._height[e]);i.data.set(t),r.putImageData(i,0,0),this.image_data[e]=n}_map_data(){"data"==this.model.properties.dw.units?this.sw=this.sdist(this.renderer.xscale,this._x,this.dw,"edge",this.model.dilate):this.sw=s.to_screen(this.dw),"data"==this.model.properties.dh.units?this.sh=this.sdist(this.renderer.yscale,this._y,this.dh,"edge",this.model.dilate):this.sh=s.to_screen(this.dh)}_image_index(e,t,n){var[r,i,a,o]=this._lrtb(e),s=this._width[e],l=this._height[e],a=(a-o)/l;let c=Math.floor((t-r)/((i-r)/s)),u=Math.floor((n-o)/a);return this.renderer.xscale.source_range.is_reversed&&(c=s-c-1),this.renderer.yscale.source_range.is_reversed&&(u=l-u-1),{index:e,dim1:c,dim2:u,flat_index:u*s+c}}_hit_point(e){const{sx:t,sy:n}=e,r=this.renderer.xscale.invert(t),i=this.renderer.yscale.invert(n),a=this.index.indices({x0:r,x1:r,y0:i,y1:i}),o=new c.Selection;for(const e of a)t!=1/0&&n!=1/0&&o.image_indices.push(this._image_index(e,r,i));return o}}(n.ImageBaseView=f).__name__="ImageBaseView";class p extends o.XYGlyph{constructor(e){super(e)}static init_ImageBase(){this.define(({Boolean:e,Alpha:t})=>({image:[l.NDArraySpec,{field:"image"}],dw:[l.DistanceSpec,{field:"dw"}],dh:[l.DistanceSpec,{field:"dh"}],dilate:[e,!1],global_alpha:[t,1]}))}}(n.ImageBase=p).__name__="ImageBase",p.init_ImageBase()},function(e,t,n,r,i){r();const a=e(293),o=e(8);class s extends a.ImageBaseView{_flat_img_to_buf8(e){e=o.isArray(e)?new Uint32Array(e):e;return new Uint8ClampedArray(e.buffer)}}(n.ImageRGBAView=s).__name__="ImageRGBAView";class l extends a.ImageBase{constructor(e){super(e)}static init_ImageRGBA(){this.prototype.default_view=s}}(n.ImageRGBA=l).__name__="ImageRGBA",l.init_ImageRGBA()},function(e,t,n,r,i){r();const a=e(1),o=e(64),p=e(24),s=e(20),l=a.__importStar(e(18)),m=e(12),g=e(296);class c extends o.XYGlyphView{constructor(){super(...arguments),this._images_rendered=!1,this._set_data_iteration=0}connect_signals(){super.connect_signals(),this.connect(this.model.properties.global_alpha.change,()=>this.renderer.request_render())}_index_data(t){var{data_size:n}=this;for(let e=0;e<n;e++)t.add_empty()}_set_data(){this._set_data_iteration++;const e=this.url.length;this.image=new Array(e);const{retry_attempts:n,retry_timeout:r}=this.model,{_set_data_iteration:i}=this;for(let t=0;t<e;t++){const e=this.url.get(t);e&&new g.ImageLoader(e,{loaded:e=>{this._set_data_iteration==i&&(this.image[t]=e,this.renderer.request_render())},attempts:n+1,timeout:r})}const t="data"==this.model.properties.w.units,a="data"==this.model.properties.h.units,o=this._x.length,s=new p.ScreenArray(t?2*o:o),l=new p.ScreenArray(a?2*o:o),{anchor:c}=this.model;if(t)for(let e=0;e<o;e++)[s[e],s[o+e]]=function(e,t){switch(c){case"top_left":case"bottom_left":case"left":case"center_left":return[e,e+t];case"top":case"top_center":case"bottom":case"bottom_center":case"center":case"center_center":return[e-t/2,e+t/2];case"top_right":case"bottom_right":case"right":case"center_right":return[e-t,e]}}(this._x[e],this.w.get(e));else s.set(this._x,0);if(a)for(let e=0;e<o;e++)[l[e],l[o+e]]=function(e,t){switch(c){case"top_left":case"top":case"top_center":case"top_right":return[e,e-t];case"bottom_left":case"bottom":case"bottom_center":case"bottom_right":return[e+t,e];case"left":case"center_left":case"center":case"center_center":case"right":case"center_right":return[e+t/2,e-t/2]}}(this._y[e],this.h.get(e));else l.set(this._y,0);var[u,d]=m.minmax(s),[h,f]=m.minmax(l);this._bounds_rect={x0:u,x1:d,y0:h,y1:f}}has_finished(){return super.has_finished()&&1==this._images_rendered}_map_data(){"data"==this.model.properties.w.units?this.sw=this.sdist(this.renderer.xscale,this._x,this.w,"edge",this.model.dilate):this.sw=p.to_screen(this.w),"data"==this.model.properties.h.units?this.sh=this.sdist(this.renderer.yscale,this._y,this.h,"edge",this.model.dilate):this.sh=p.to_screen(this.h)}_render(e,t,n){const{image:r,sx:i,sy:a,sw:o,sh:s,angle:l}=null!=n?n:this,{frame:c}=this.renderer.plot_view;e.rect(c.bbox.left+1,c.bbox.top+1,c.bbox.width-2,c.bbox.height-2),e.clip();let u=!0;for(const n of t)if(!isNaN(i[n]+a[n]+l.get(n))){const t=r[n];null!=t?this._render_image(e,n,t,i,a,o,s,l):u=!1}u&&!this._images_rendered&&(this._images_rendered=!0,this.notify_finished())}_final_sx_sy(e,t,n,r,i){switch(e){case"top_left":return[t,n];case"top":case"top_center":return[t-r/2,n];case"top_right":return[t-r,n];case"right":case"center_right":return[t-r,n-i/2];case"bottom_right":return[t-r,n-i];case"bottom":case"bottom_center":return[t-r/2,n-i];case"bottom_left":return[t,n-i];case"left":case"center_left":return[t,n-i/2];case"center":case"center_center":return[t-r/2,n-i/2]}}_render_image(e,t,n,r,i,a,o,s){isNaN(a[t])&&(a[t]=n.width),isNaN(o[t])&&(o[t]=n.height);var l=a[t],a=o[t],{anchor:o}=this.model,[o,r]=this._final_sx_sy(o,r[t],i[t],l,a),i=s.get(t);e.save(),e.globalAlpha=this.model.global_alpha;s=l/2,t=a/2;i?(e.translate(o,r),e.translate(s,t),e.rotate(i),e.translate(-s,-t),e.drawImage(n,0,0,l,a),e.translate(s,t),e.rotate(-i),e.translate(-s,-t),e.translate(-o,-r)):e.drawImage(n,o,r,l,a),e.restore()}bounds(){return this._bounds_rect}}(n.ImageURLView=c).__name__="ImageURLView";class u extends o.XYGlyph{constructor(e){super(e)}static init_ImageURL(){this.prototype.default_view=c,this.define(({Boolean:e,Int:t,Alpha:n})=>({url:[l.StringSpec,{field:"url"}],anchor:[s.Anchor,"top_left"],global_alpha:[n,1],angle:[l.AngleSpec,0],w:[l.NullDistanceSpec,null],h:[l.NullDistanceSpec,null],dilate:[e,!1],retry_attempts:[t,0],retry_timeout:[t,0]}))}}(n.ImageURL=u).__name__="ImageURL",u.init_ImageURL()},function(e,t,n,r,i){r();const s=e(19);class a{constructor(r,i={}){this._image=new Image,this._finished=!1;const{attempts:a=1,timeout:o=1}=i;this.promise=new Promise((e,t)=>{this._image.crossOrigin="anonymous";let n=0;this._image.onerror=()=>{if(++n==a){const o=`unable to load ${r} image after ${a} attempts`;if(s.logger.warn(o),null==this._image.crossOrigin)return void(null!=i.failed&&i.failed());s.logger.warn(`attempting to load ${r} without a cross origin policy`),this._image.crossOrigin=null,n=0}setTimeout(()=>this._image.src=r,o)},this._image.onload=()=>{this._finished=!0,null!=i.loaded&&i.loaded(this._image),e(this._image)},this._image.src=r})}get finished(){return this._finished}get image(){if(this._finished)return this._image;throw new Error("not loaded yet")}}(n.ImageLoader=a).__name__="ImageLoader"},function(e,t,n,r,i){r();const a=e(1),g=e(101),o=e(98),s=e(106),_=e(12),l=e(12),c=e(48),f=a.__importStar(e(107)),u=a.__importStar(e(18)),p=e(59),d=e(11);class h extends o.GlyphView{_project_data(){}_index_data(o){const{min:s,max:l}=Math,{data_size:c}=this;for(let e=0;e<c;e++){const c=this._xs[e],h=this._ys[e];if(0!=c.length&&0!=h.length){let n=1/0,r=-1/0,i=1/0,a=-1/0;for(let e=0,t=c.length;e<t;e++){var u=c[e][0],d=h[e][0];if(0!=u.length&&0!=d.length){const[o,c]=_.minmax(u),[f,p]=_.minmax(d);n=s(n,o),r=l(r,c),i=s(i,f),a=l(a,p)}}isFinite(n+r+i+a)?o.add(n,i,r,a):o.add_empty()}else o.add_empty()}this._hole_index=this._index_hole_data()}_index_hole_data(){const{min:o,max:s}=Math,{data_size:l}=this,c=new g.SpatialIndex(l);for(let e=0;e<l;e++){const l=this._xs[e],h=this._ys[e];if(0!=l.length&&0!=h.length){let n=1/0,r=-1/0,i=1/0,a=-1/0;for(let e=0,t=l.length;e<t;e++){var u=l[e],d=h[e];if(1<u.length&&1<d.length)for(let e=1,t=u.length;e<t;e++){const[c,f]=_.minmax(u[e]),[p,m]=_.minmax(d[e]);n=o(n,c),r=s(r,f),i=o(i,p),a=s(a,m)}}isFinite(n+r+i+a)?c.add(n,i,r,a):c.add_empty()}else c.add_empty()}return c.finish(),c}_mask_data(){var{x_range:e,y_range:t}=this.renderer.plot_view.frame;return this.index.indices({x0:e.min,x1:e.max,y0:t.min,y1:t.max})}_inner_loop(r,i,a){r.beginPath();for(let n=0,e=i.length;n<e;n++)for(let e=0,t=i[n].length;e<t;e++){var o=i[n][e],s=a[n][e];for(let e=0,t=o.length;e<t;e++)0!=e?r.lineTo(o[e],s[e]):r.moveTo(o[e],s[e]);r.closePath()}}_render(e,t,n){if(this.visuals.fill.doit||this.visuals.line.doit){var{sxs:r,sys:i}=null!=n?n:this;for(const n of t){const t=r[n],a=i[n];this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),this._inner_loop(e,t,a),e.fill("evenodd")),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),this._inner_loop(e,t,a),e.fill("evenodd")),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),this._inner_loop(e,t,a),e.stroke())}}}_hit_rect(e){const{sx0:i,sx1:a,sy0:t,sy1:n}=e,o=[i,a,a,i],s=[t,t,n,n],[l,c]=this.renderer.xscale.r_invert(i,a),[r,u]=this.renderer.yscale.r_invert(t,n),d=this.index.indices({x0:l,x1:c,y0:r,y1:u}),h=[];for(const e of d){const i=this.sxs[e],a=this.sys[e];let r=!0;for(let n=0,e=i.length;n<e;n++){for(let e=0,t=i[n][0].length;e<t;e++){const l=i[n][0][e],c=a[n][0][e];if(!f.point_in_poly(l,c,o,s)){r=!1;break}}if(!r)break}r&&h.push(e)}return new p.Selection({indices:h})}_hit_point(r){const{sx:i,sy:a}=r,o=this.renderer.xscale.invert(i),s=this.renderer.yscale.invert(a),e=this.index.indices({x0:o,y0:s,x1:o,y1:s}),t=this._hole_index.indices({x0:o,y0:s,x1:o,y1:s}),l=[];for(const r of e){const o=this.sxs[r],s=this.sys[r];for(let n=0,e=o.length;n<e;n++){var c=o[n].length;if(f.point_in_poly(i,a,o[n][0],s[n][0]))if(1==c)l.push(r);else if(t.get(r)){if(1<c){let t=!1;for(let e=1;e<c;e++){const l=o[n][e],u=s[n][e];if(f.point_in_poly(i,a,l,u)){t=!0;break}}t||l.push(r)}}else l.push(r)}}return new p.Selection({indices:l})}_get_snap_coord(e){return l.sum(e)/e.length}scenterxy(e,n,r){if(1==this.sxs[e].length)return[this._get_snap_coord(this.sxs[e][0][0]),this._get_snap_coord(this.sys[e][0][0])];var i=this.sxs[e],a=this.sys[e];for(let e=0,t=i.length;e<t;e++)if(f.point_in_poly(n,r,i[e][0],a[e][0]))return[this._get_snap_coord(i[e][0]),this._get_snap_coord(a[e][0])];d.unreachable()}map_data(){const r=this._xs.length;this.sxs=new Array(r),this.sys=new Array(r);for(let n=0;n<r;n++){const r=this._xs[n].length;this.sxs[n]=new Array(r),this.sys[n]=new Array(r);for(let t=0;t<r;t++){const r=this._xs[n][t].length;this.sxs[n][t]=new Array(r),this.sys[n][t]=new Array(r);for(let e=0;e<r;e++){const[r,i]=this.renderer.coordinates.map_to_screen(this._xs[n][t][e],this._ys[n][t][e]);this.sxs[n][t][e]=r,this.sys[n][t][e]=i}}}}draw_legend_for_index(e,t,n){s.generic_area_vector_legend(this.visuals,e,t,n)}}(n.MultiPolygonsView=h).__name__="MultiPolygonsView";class m extends o.Glyph{constructor(e){super(e)}static init_MultiPolygons(){this.prototype.default_view=h,this.define(({})=>({xs:[u.XCoordinateSeqSeqSeqSpec,{field:"xs"}],ys:[u.YCoordinateSeqSeqSeqSpec,{field:"ys"}]})),this.mixins([c.LineVector,c.FillVector,c.HatchVector])}}(n.MultiPolygons=m).__name__="MultiPolygons",m.init_MultiPolygons()},function(e,t,n,r,i){r();const a=e(287),o=e(12);class s extends a.EllipseOvalView{_map_data(){super._map_data(),o.mul(this.sw,.75)}}(n.OvalView=s).__name__="OvalView";class l extends a.EllipseOval{constructor(e){super(e)}static init_Oval(){this.prototype.default_view=s}}(n.Oval=l).__name__="Oval",l.init_Oval()},function(e,t,n,r,i){r();const a=e(1),o=e(290),s=a.__importStar(e(18));class l extends o.BoxView{scenterxy(e){return[this.sleft[e]/2+this.sright[e]/2,this.stop[e]/2+this.sbottom[e]/2]}_lrtb(e){return[this._left[e],this._right[e],this._top[e],this._bottom[e]]}}(n.QuadView=l).__name__="QuadView";class c extends o.Box{constructor(e){super(e)}static init_Quad(){this.prototype.default_view=l,this.define(({})=>({right:[s.XCoordinateSpec,{field:"right"}],bottom:[s.YCoordinateSpec,{field:"bottom"}],left:[s.XCoordinateSpec,{field:"left"}],top:[s.YCoordinateSpec,{field:"top"}]}))}}(n.Quad=c).__name__="Quad",c.init_Quad()},function(e,t,n,r,i){r();const a=e(1),o=e(48),s=e(65),l=e(98),c=e(106),u=a.__importStar(e(18));function p(e,t,n){if(t==(e+n)/2)return[e,n];var r=(e-t)/(e-2*t+n),r=e*(1-r)**2+2*t*(1-r)*r+n*r**2;return[Math.min(e,n,r),Math.max(e,n,r)]}class d extends l.GlyphView{_project_data(){s.inplace.project_xy(this._x0,this._y0),s.inplace.project_xy(this._x1,this._y1)}_index_data(t){const{_x0:n,_x1:r,_y0:i,_y1:a,_cx:o,_cy:s,data_size:l}=this;for(let e=0;e<l;e++){const l=n[e],c=r[e],u=i[e],d=a[e],h=o[e],f=s[e];if(isNaN(l+c+u+d+h+f))t.add_empty();else{const[n,r]=p(l,h,c),[i,a]=p(u,f,d);t.add(n,i,r,a)}}}_render(e,t,n){if(this.visuals.line.doit){var{sx0:r,sy0:i,sx1:a,sy1:o,scx:s,scy:l}=null!=n?n:this;for(const n of t){const t=r[n],c=i[n],u=a[n],d=o[n],h=s[n],f=l[n];isNaN(t+c+u+d+h+f)||(e.beginPath(),e.moveTo(t,c),e.quadraticCurveTo(h,f,u,d),this.visuals.line.set_vectorize(e,n),e.stroke())}}}draw_legend_for_index(e,t,n){c.generic_line_vector_legend(this.visuals,e,t,n)}scenterxy(){throw new Error(`${this}.scenterxy() is not implemented`)}}(n.QuadraticView=d).__name__="QuadraticView";class h extends l.Glyph{constructor(e){super(e)}static init_Quadratic(){this.prototype.default_view=d,this.define(({})=>({x0:[u.XCoordinateSpec,{field:"x0"}],y0:[u.YCoordinateSpec,{field:"y0"}],x1:[u.XCoordinateSpec,{field:"x1"}],y1:[u.YCoordinateSpec,{field:"y1"}],cx:[u.XCoordinateSpec,{field:"cx"}],cy:[u.YCoordinateSpec,{field:"cy"}]})),this.mixins(o.LineVector)}}(n.Quadratic=h).__name__="Quadratic",h.init_Quadratic()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(106),l=e(48),c=e(24),u=a.__importStar(e(18));class d extends o.XYGlyphView{_map_data(){"data"==this.model.properties.length.units?this.slength=this.sdist(this.renderer.xscale,this._x,this.length):this.slength=c.to_screen(this.length);const{width:e,height:t}=this.renderer.plot_view.frame.bbox,n=2*(e+t),{slength:r}=this;for(let e=0,t=r.length;e<t;e++)0==r[e]&&(r[e]=n)}_render(e,t,n){const{sx:r,sy:i,slength:a,angle:o}=null!=n?n:this;if(this.visuals.line.doit)for(const n of t){const t=r[n],s=i[n],l=o.get(n),c=a[n];isNaN(t+s+l+c)||(e.translate(t,s),e.rotate(l),e.beginPath(),e.moveTo(0,0),e.lineTo(c,0),this.visuals.line.set_vectorize(e,n),e.stroke(),e.rotate(-l),e.translate(-t,-s))}}draw_legend_for_index(e,t,n){s.generic_line_vector_legend(this.visuals,e,t,n)}}(n.RayView=d).__name__="RayView";class h extends o.XYGlyph{constructor(e){super(e)}static init_Ray(){this.prototype.default_view=d,this.mixins(l.LineVector),this.define(({})=>({length:[u.DistanceSpec,0],angle:[u.AngleSpec,0]}))}}(n.Ray=h).__name__="Ray",h.init_Ray()},function(e,t,n,r,i){r();const a=e(288),o=e(106),m=e(24),g=e(12),_=e(59);class s extends a.CenterRotatableView{_map_data(){if("data"==this.model.properties.width.units)[this.sw,this.sx0]=this._map_dist_corner_for_data_side_length(this._x,this.width,this.renderer.xscale);else{this.sw=m.to_screen(this.width);const t=this.sx.length;this.sx0=new m.ScreenArray(t);for(let e=0;e<t;e++)this.sx0[e]=this.sx[e]-this.sw[e]/2}if("data"==this.model.properties.height.units)[this.sh,this.sy1]=this._map_dist_corner_for_data_side_length(this._y,this.height,this.renderer.yscale);else{this.sh=m.to_screen(this.height);const t=this.sy.length;this.sy1=new m.ScreenArray(t);for(let e=0;e<t;e++)this.sy1[e]=this.sy[e]-this.sh[e]/2}const t=this.sw.length;this.ssemi_diag=new m.ScreenArray(t);for(let e=0;e<t;e++)this.ssemi_diag[e]=Math.sqrt(this.sw[e]/2*this.sw[e]/2+this.sh[e]/2*this.sh[e]/2)}_render(e,t,n){const{sx:r,sy:i,sx0:a,sy1:o,sw:s,sh:l,angle:c}=null!=n?n:this;for(const n of t){const t=r[n],u=i[n],d=a[n],h=o[n],f=s[n],p=l[n],m=c.get(n);isNaN(t+u+d+h+f+p+m)||0!=f&&0!=p&&(e.beginPath(),m?(e.translate(t,u),e.rotate(m),e.rect(-f/2,-p/2,f,p),e.rotate(-m),e.translate(-t,-u)):e.rect(d,h,f,p),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),e.stroke()))}}_hit_rect(e){return this._hit_rect_against_index(e)}_hit_point(e){let{sx:t,sy:n}=e;const r=this.renderer.xscale.invert(t),i=this.renderer.yscale.invert(n),a=this.sx0.length,o=new m.ScreenArray(a);for(let e=0;e<a;e++)o[e]=this.sx0[e]+this.sw[e]/2;const s=new m.ScreenArray(a);for(let e=0;e<a;e++)s[e]=this.sy1[e]+this.sh[e]/2;var l=g.max(this._ddist(0,o,this.ssemi_diag)),c=g.max(this._ddist(1,s,this.ssemi_diag)),u=r-l,e=r+l,l=i-c,c=i+c;let d,h;const f=[];for(const p of this.index.indices({x0:u,x1:e,y0:l,y1:c})){const r=this.angle.get(p);if(r){const i=Math.sin(-r),a=Math.cos(-r),o=a*(t-this.sx[p])-i*(n-this.sy[p])+this.sx[p],m=i*(t-this.sx[p])+a*(n-this.sy[p])+this.sy[p];t=o,n=m,d=Math.abs(this.sx[p]-t)<=this.sw[p]/2,h=Math.abs(this.sy[p]-n)<=this.sh[p]/2}else{const r=t-this.sx0[p],i=n-this.sy1[p];d=0<=r&&r<=this.sw[p],h=0<=i&&i<=this.sh[p]}d&&h&&f.push(p)}return new _.Selection({indices:f})}_map_dist_corner_for_data_side_length(t,n,r){const i=t.length,a=new Float64Array(i),o=new Float64Array(i);for(let e=0;e<i;e++){const i=t[e],s=n.get(e)/2;a[e]=i-s,o[e]=i+s}const s=r.v_compute(a),l=r.v_compute(o),e=this.sdist(r,a,n,"edge",this.model.dilate);let c=s;for(let e=0;e<i;e++){const n=s[e],r=l[e];if(!isNaN(n+r)&&n!=r){c=n<r?s:l;break}}return[e,c]}_ddist(e,t,n){const r=m.infer_type(t,n),i=0==e?this.renderer.xscale:this.renderer.yscale,a=t,o=a.length,s=new r(o);for(let e=0;e<o;e++)s[e]=a[e]+n[e];const l=i.v_invert(a),c=i.v_invert(s),u=l.length,d=new r(u);for(let e=0;e<u;e++)d[e]=Math.abs(c[e]-l[e]);return d}draw_legend_for_index(e,t,n){o.generic_area_vector_legend(this.visuals,e,t,n)}}n.RectView=s,s.__name__="RectView";class l extends a.CenterRotatable{constructor(e){super(e)}static init_Rect(){this.prototype.default_view=s,this.define(({Boolean:e})=>({dilate:[e,!1]}))}}(n.Rect=l).__name__="Rect",l.init_Rect()},function(e,t,n,r,i){r();const a=e(1),o=e(304),f=e(305),s=e(283),l=a.__importStar(e(18));class c extends o.MarkerView{_init_webgl(){var{webgl:e}=this.renderer.plot_view.canvas_view;if(null!=e){var t=new Set(this.marker);if(1==t.size){var[n]=[...t];if(s.MarkerGL.is_supported(n)){var{glglyph:t}=this;if(null==t||t.marker_type!=n)return void(this.glglyph=new s.MarkerGL(e.gl,this,n))}}}delete this.glglyph}_set_data(e){super._set_data(e),this._init_webgl()}_render(e,t,n){const{sx:r,sy:i,size:a,angle:o,marker:s}=null!=n?n:this;for(const n of t){const t=r[n],c=i[n],u=a.get(n),d=o.get(n),h=s.get(n);var l;isNaN(t+c+u+d)||null==h||(l=u/2,e.beginPath(),e.translate(t,c),d&&e.rotate(d),f.marker_funcs[h](e,n,l,this.visuals),d&&e.rotate(-d),e.translate(-t,-c))}}draw_legend_for_index(e,{x0:t,x1:n,y0:r,y1:i},a){var o=a+1,s=this.marker.get(a),o=Object.assign(Object.assign({},this._get_legend_args({x0:t,x1:n,y0:r,y1:i},a)),{marker:new l.UniformScalar(s,o)});this._render(e,[a],o)}}(n.ScatterView=c).__name__="ScatterView";class u extends o.Marker{constructor(e){super(e)}static init_Scatter(){this.prototype.default_view=c,this.define(()=>({marker:[l.MarkerSpec,{value:"circle"}]}))}}(n.Scatter=u).__name__="Scatter",u.init_Scatter()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(48),l=a.__importStar(e(107)),c=a.__importStar(e(18)),u=e(9),m=e(59);class d extends o.XYGlyphView{_render(e,t,n){const{sx:r,sy:i,size:a,angle:o}=null!=n?n:this;for(const n of t){const t=r[n],l=i[n],c=a.get(n),u=o.get(n);var s;isNaN(t+l+c+u)||(s=c/2,e.beginPath(),e.translate(t,l),u&&e.rotate(u),this._render_one(e,n,s,this.visuals),u&&e.rotate(-u),e.translate(-t,-l))}}_mask_data(){const{x_target:e,y_target:t}=this.renderer.plot_view.frame,n=e.widen(this.max_size).map(e=>this.renderer.xscale.invert(e)),r=t.widen(this.max_size).map(e=>this.renderer.yscale.invert(e));return this.index.indices({x0:n.start,x1:n.end,y0:r.start,y1:r.end})}_hit_point(e){const{sx:t,sy:n}=e,{max_size:r}=this,{hit_dilation:i}=this.model,a=t-r*i,o=t+r*i,[s,l]=this.renderer.xscale.r_invert(a,o),c=n-r*i,u=n+r*i,[d,h]=this.renderer.yscale.r_invert(c,u),f=this.index.indices({x0:s,x1:l,y0:d,y1:h}),p=[];for(const e of f){const r=this.size.get(e)/2*i;Math.abs(this.sx[e]-t)<=r&&Math.abs(this.sy[e]-n)<=r&&p.push(e)}return new m.Selection({indices:p})}_hit_span(e){const{sx:t,sy:n}=e,r=this.bounds(),i=this.max_size/2;let a,o,s,l;if("h"==e.direction){s=r.y0,l=r.y1;const c=t-i,n=t+i;[a,o]=this.renderer.xscale.r_invert(c,n)}else{a=r.x0,o=r.x1;const c=n-i,t=n+i;[s,l]=this.renderer.yscale.r_invert(c,t)}e=[...this.index.indices({x0:a,x1:o,y0:s,y1:l})];return new m.Selection({indices:e})}_hit_rect(e){var{sx0:t,sx1:n,sy0:r,sy1:e}=e,[t,n]=this.renderer.xscale.r_invert(t,n),[r,e]=this.renderer.yscale.r_invert(r,e),e=[...this.index.indices({x0:t,x1:n,y0:r,y1:e})];return new m.Selection({indices:e})}_hit_poly(e){const{sx:n,sy:r}=e,i=u.range(0,this.sx.length),a=[];for(let e=0,t=i.length;e<t;e++){var o=i[e];l.point_in_poly(this.sx[e],this.sy[e],n,r)&&a.push(o)}return new m.Selection({indices:a})}_get_legend_args({x0:e,x1:t,y0:n,y1:r},i){const a=i+1,o=new Array(a),s=new Array(a);o[i]=(e+t)/2,s[i]=(n+r)/2;n=.4*Math.min(Math.abs(t-e),Math.abs(r-n));return{sx:o,sy:s,size:new c.UniformScalar(n,a),angle:new c.UniformScalar(0,a)}}draw_legend_for_index(e,{x0:t,x1:n,y0:r,y1:i},a){i=this._get_legend_args({x0:t,x1:n,y0:r,y1:i},a);this._render(e,[a],i)}}(n.MarkerView=d).__name__="MarkerView";class h extends o.XYGlyph{constructor(e){super(e)}static init_Marker(){this.mixins([s.LineVector,s.FillVector,s.HatchVector]),this.define(({Number:e})=>({size:[c.ScreenDistanceSpec,{value:4}],angle:[c.AngleSpec,0],hit_dilation:[e,1]}))}}(n.Marker=h).__name__="Marker",h.init_Marker()},function(e,t,n,r,i){r();const s=Math.sqrt(3),o=Math.sqrt(5),l=(o+1)/4,c=Math.sqrt((5-o)/8),u=(o-1)/4,d=Math.sqrt((5+o)/8);function a(e,t){e.rotate(Math.PI/4),f(e,t),e.rotate(-Math.PI/4)}function h(e,t){var n=t*s,r=n/3;e.moveTo(-n/2,-r),e.lineTo(0,0),e.lineTo(n/2,-r),e.lineTo(0,0),e.lineTo(0,t)}function f(e,t){e.moveTo(0,t),e.lineTo(0,-t),e.moveTo(-t,0),e.lineTo(t,0)}function p(e,t){e.moveTo(0,t),e.lineTo(t/1.5,0),e.lineTo(0,-t),e.lineTo(-t/1.5,0),e.closePath()}function m(e,t){var n=t*s,r=n/3;e.moveTo(-t,r),e.lineTo(t,r),e.lineTo(0,r-n),e.closePath()}function g(e,t,n,r){e.arc(0,0,n,0,2*Math.PI,!1),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())}function _(e,t,n,r){p(e,n),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())}function y(e,t,n,r){var i;i=n,(n=e).beginPath(),n.arc(0,0,i/4,0,2*Math.PI,!1),n.closePath(),r.line.set_vectorize(e,t),e.fillStyle=e.strokeStyle,e.fill()}function v(e,t,n,r){var i,a,o;i=e,o=(a=n)/2,n=s*o,i.moveTo(a,0),i.lineTo(o,-n),i.lineTo(-o,-n),i.lineTo(-a,0),i.lineTo(-o,n),i.lineTo(o,n),i.closePath(),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())}function b(e,t,n,r){var i=2*n;e.rect(-n,-n,i,i),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())}function x(e,t,n,r){var i,a;i=e,a=n,n=Math.sqrt(5-2*o)*a,i.moveTo(0,-a),i.lineTo(n*u,n*d-a),i.lineTo(n*(1+u),n*d-a),i.lineTo(n*(1+u-l),n*(d+c)-a),i.lineTo(n*(1+2*u-l),n*(2*d+c)-a),i.lineTo(0,2*n*d-a),i.lineTo(-n*(1+2*u-l),n*(2*d+c)-a),i.lineTo(-n*(1+u-l),n*(d+c)-a),i.lineTo(-n*(1+u),n*d-a),i.lineTo(-n*u,n*d-a),i.closePath(),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())}function w(e,t,n,r){m(e,n),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())}n.marker_funcs={asterisk:function(e,t,n,r){f(e,n),a(e,n),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())},circle:g,circle_cross:function(e,t,n,r){e.arc(0,0,n,0,2*Math.PI,!1),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),f(e,n),e.stroke())},circle_dot:function(e,t,n,r){g(e,t,n,r),y(e,t,n,r)},circle_y:function(e,t,n,r){e.arc(0,0,n,0,2*Math.PI,!1),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),h(e,n),e.stroke())},circle_x:function(e,t,n,r){e.arc(0,0,n,0,2*Math.PI,!1),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),a(e,n),e.stroke())},cross:function(e,t,n,r){f(e,n),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())},diamond:_,diamond_dot:function(e,t,n,r){_(e,t,n,r),y(e,t,n,r)},diamond_cross:function(e,t,n,r){p(e,n),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-n/1.5,0),e.lineTo(n/1.5,0),e.stroke())},dot:y,hex:v,hex_dot:function(e,t,n,r){v(e,t,n,r),y(e,t,n,r)},inverted_triangle:function(e,t,n,r){e.rotate(Math.PI),m(e,n),e.rotate(-Math.PI),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())},plus:function(t,e,n,r){var i=3*n/8,a=[i,i,n,n,i,i,-i,-i,-n,-n,-i,-i],o=[n,i,i,-i,-i,-n,-n,-i,-i,i,i,n];t.beginPath();for(let e=0;e<12;e++)t.lineTo(a[e],o[e]);t.closePath(),r.fill.doit&&(r.fill.set_vectorize(t,e),t.fill()),r.hatch.doit&&(r.hatch.set_vectorize(t,e),t.fill()),r.line.doit&&(r.line.set_vectorize(t,e),t.stroke())},square:b,square_cross:function(e,t,n,r){var i=2*n;e.rect(-n,-n,i,i),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),f(e,n),e.stroke())},square_dot:function(e,t,n,r){b(e,t,n,r),y(e,t,n,r)},square_pin:function(e,t,n,r){var i=3*n/8;e.moveTo(-n,-n),e.quadraticCurveTo(0,-i,n,-n),e.quadraticCurveTo(i,0,n,n),e.quadraticCurveTo(0,i,-n,n),e.quadraticCurveTo(-i,0,-n,-n),e.closePath(),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())},square_x:function(e,t,n,r){var i=2*n;e.rect(-n,-n,i,i),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.moveTo(-n,n),e.lineTo(n,-n),e.moveTo(-n,-n),e.lineTo(n,n),e.stroke())},star:x,star_dot:function(e,t,n,r){x(e,t,n,r),y(e,t,n,r)},triangle:w,triangle_dot:function(e,t,n,r){w(e,t,n,r),y(e,t,n,r)},triangle_pin:function(e,t,n,r){var i=n*s,a=i/3,o=3*a/8;e.moveTo(-n,a),e.quadraticCurveTo(0,o,n,a),e.quadraticCurveTo(s*o/2,o/2,0,a-i),e.quadraticCurveTo(-s*o/2,o/2,-n,a),e.closePath(),r.fill.doit&&(r.fill.set_vectorize(e,t),e.fill()),r.hatch.doit&&(r.hatch.set_vectorize(e,t),e.fill()),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())},dash:function(e,t,n,r){var i;i=n,(n=e).moveTo(-i,0),n.lineTo(i,0),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())},x:function(e,t,n,r){a(e,n),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())},y:function(e,t,n,r){h(e,n),r.line.doit&&(r.line.set_vectorize(e,t),e.stroke())}}},function(e,t,n,r,i){r();const a=e(1),u=a.__importStar(e(107)),o=a.__importStar(e(18)),s=e(48),l=e(65),c=e(98),d=e(106),p=e(59);class h extends c.GlyphView{_project_data(){l.inplace.project_xy(this._x0,this._y0),l.inplace.project_xy(this._x1,this._y1)}_index_data(t){const{min:n,max:r}=Math,{_x0:i,_x1:a,_y0:o,_y1:s,data_size:l}=this;for(let e=0;e<l;e++){const l=i[e],c=a[e],u=o[e],d=s[e];isNaN(l+c+u+d)?t.add_empty():t.add(n(l,c),n(u,d),r(l,c),r(u,d))}}_render(e,t,n){if(this.visuals.line.doit){var{sx0:r,sy0:i,sx1:a,sy1:o}=null!=n?n:this;for(const n of t){const t=r[n],s=i[n],l=a[n],c=o[n];isNaN(t+s+l+c)||(e.beginPath(),e.moveTo(t,s),e.lineTo(l,c),this.visuals.line.set_vectorize(e,n),e.stroke())}}}_hit_point(e){const{sx:t,sy:n}=e,r={x:t,y:n},[i,a]=this.renderer.xscale.r_invert(t-2,t+2),[o,s]=this.renderer.yscale.r_invert(n-2,n+2),l=this.index.indices({x0:i,y0:o,x1:a,y1:s}),c=[];for(const e of l){const t=Math.max(2,this.line_width.get(e)/2)**2,n={x:this.sx0[e],y:this.sy0[e]},i={x:this.sx1[e],y:this.sy1[e]};u.dist_to_segment_squared(r,n,i)<t&&c.push(e)}return new p.Selection({indices:c})}_hit_span(e){const[t,n]=this.renderer.plot_view.frame.bbox.ranges,{sx:r,sy:i}=e;let a,o,s;"v"==e.direction?(s=this.renderer.yscale.invert(i),[a,o]=[this._y0,this._y1]):(s=this.renderer.xscale.invert(r),[a,o]=[this._x0,this._x1]);const l=[],[c,u]=this.renderer.xscale.r_invert(t.start,t.end),[d,h]=this.renderer.yscale.r_invert(n.start,n.end),f=this.index.indices({x0:c,y0:d,x1:u,y1:h});for(const t of f){(a[t]<=s&&s<=o[t]||o[t]<=s&&s<=a[t])&&l.push(t);const n=1.5+this.line_width.get(t)/2;a[t]==o[t]&&("h"==e.direction?Math.abs(this.sx0[t]-r)<=n&&l.push(t):Math.abs(this.sy0[t]-i)<=n&&l.push(t))}return new p.Selection({indices:l})}scenterxy(e){return[this.sx0[e]/2+this.sx1[e]/2,this.sy0[e]/2+this.sy1[e]/2]}draw_legend_for_index(e,t,n){d.generic_line_vector_legend(this.visuals,e,t,n)}}(n.SegmentView=h).__name__="SegmentView";class f extends c.Glyph{constructor(e){super(e)}static init_Segment(){this.prototype.default_view=h,this.define(({})=>({x0:[o.XCoordinateSpec,{field:"x0"}],y0:[o.YCoordinateSpec,{field:"y0"}],x1:[o.XCoordinateSpec,{field:"x1"}],y1:[o.YCoordinateSpec,{field:"y1"}]})),this.mixins(s.LineVector)}}(n.Segment=f).__name__="Segment",f.init_Segment()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=a.__importStar(e(48)),l=e(308);class c extends o.XYGlyphView{_set_data(){var{tension:e,closed:t}=this.model;[this._xt,this._yt]=l.catmullrom_spline(this._x,this._y,20,e,t)}_map_data(){const{x_scale:e,y_scale:t}=this.renderer.coordinates;this.sxt=e.v_compute(this._xt),this.syt=t.v_compute(this._yt)}_render(t,e,n){var{sxt:r,syt:i}=null!=n?n:this;this.visuals.line.set_value(t);var a=r.length;for(let e=0;e<a;e++)0!=e?isNaN(r[e])||isNaN(i[e])?(t.stroke(),t.beginPath()):t.lineTo(r[e],i[e]):(t.beginPath(),t.moveTo(r[e],i[e]));t.stroke()}}(n.SplineView=c).__name__="SplineView";class u extends o.XYGlyph{constructor(e){super(e)}static init_Spline(){this.prototype.default_view=c,this.mixins(s.LineScalar),this.define(({Boolean:e,Number:t})=>({tension:[t,.5],closed:[e,!1]}))}}(n.Spline=u).__name__="Spline",u.init_Spline()},function(e,t,n,r,i){r();const m=e(24),g=e(11);n.catmullrom_spline=function(e,t,r=10,i=.5,a=!1){g.assert(e.length==t.length);const o=e.length,s=a?o+1:o,l=m.infer_type(e,t),c=new l(s+2),u=new l(s+2);c.set(e,1),u.set(t,1),a?(c[0]=e[o-1],u[0]=t[o-1],c[s]=e[0],u[s]=t[0],c[s+1]=e[1],u[s+1]=t[1]):(c[0]=e[0],u[0]=t[0],c[s+1]=e[o-1],u[s+1]=t[o-1]);const d=new l(4*(r+1));for(let e=0,t=0;e<=r;e++){const i=e/r,a=i**2,m=i*a;d[t++]=2*m-3*a+1,d[t++]=-2*m+3*a,d[t++]=m-2*a+i,d[t++]=m-a}const h=new l((s-1)*(r+1)),f=new l((s-1)*(r+1));for(let t=1,n=0;t<s;t++){const a=(c[t+1]-c[t-1])*i,m=(u[t+1]-u[t-1])*i,g=(c[t+2]-c[t])*i,o=(u[t+2]-u[t])*i;for(let e=0;e<=4*r;n++){const r=d[e++],s=d[e++],l=d[e++],p=d[e++];h[n]=r*c[t]+s*c[t+1]+l*a+p*g,f[n]=r*u[t]+s*u[t+1]+l*m+p*o}}return[h,f]}},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(106),l=a.__importStar(e(48)),c=e(20);class u extends o.XYGlyphView{_render(i,e,t){var{sx:a,sy:o}=null!=t?t:this;let s=!1,l=null;this.visuals.line.set_value(i);t=e.length;if(!(t<2)){i.beginPath(),i.moveTo(a[0],o[0]);for(const c of e){let e,t,n,r;switch(this.model.mode){case"before":[e,n]=[a[c-1],o[c]],[t,r]=[a[c],o[c]];break;case"after":[e,n]=[a[c],o[c-1]],[t,r]=[a[c],o[c]];break;case"center":{const i=(a[c-1]+a[c])/2;[e,n]=[i,o[c-1]],[t,r]=[i,o[c]];break}default:throw new Error("unexpected")}if(s){if(!isFinite(a[c]+o[c])){i.stroke(),i.beginPath(),s=!1,l=c;continue}null!=l&&1<c-l&&(i.stroke(),s=!1)}s?(i.lineTo(e,n),i.lineTo(t,r)):(i.beginPath(),i.moveTo(a[c],o[c]),s=!0),l=c}i.lineTo(a[t-1],o[t-1]),i.stroke()}}draw_legend_for_index(e,t,n){s.generic_line_scalar_legend(this.visuals,e,t)}}(n.StepView=u).__name__="StepView";class d extends o.XYGlyph{constructor(e){super(e)}static init_Step(){this.prototype.default_view=u,this.mixins(l.LineScalar),this.define(()=>({mode:[c.StepMode,"before"]}))}}(n.Step=d).__name__="Step",d.init_Step()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(48),d=a.__importStar(e(107)),l=a.__importStar(e(18)),g=e(143),c=e(11),h=e(59);class u extends o.XYGlyphView{_rotate_point(e,t,n,r,i){return[(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r]}_text_bounds(e,t,n,r){return[[e,e+n,e+n,e,e],[t,t,t-r,t-r,t]]}_render(t,n,r){const{sx:i,sy:a,x_offset:o,y_offset:s,angle:l,text:e}=null!=r?r:this;this._sys=[],this._sxs=[];for(const r of n){const n=this._sxs[r]=[],c=this._sys[r]=[],u=i[r],d=a[r],h=o.get(r),f=s.get(r),p=l.get(r),m=e.get(r);if(!isNaN(u+d+h+f+p)&&null!=m&&this.visuals.text.doit){const i=`${m}`;t.save(),t.translate(u+h,d+f),t.rotate(p),this.visuals.text.set_vectorize(t,r);const a=this.visuals.text.font_value(r),{height:o}=g.font_metrics(a),s=this.text_line_height.get(r)*o;if(-1==i.indexOf("\n")){t.fillText(i,0,0);const r=u+h,a=d+f,o=t.measureText(i).width,[l,e]=this._text_bounds(r,a,o,s);n.push(l),c.push(e)}else{const a=i.split("\n"),o=s*a.length,l=this.text_baseline.get(r);let e;switch(l){case"top":e=0;break;case"middle":e=-o/2+s/2;break;case"bottom":e=-o+s;break;default:e=0,console.warn(`'${l}' baseline not supported with multi line text`)}for(const r of a){t.fillText(r,0,e);const i=u+h,a=e+d+f,o=t.measureText(r).width,[l,g]=this._text_bounds(i,a,o,s);n.push(l),c.push(g),e+=s}}t.restore()}}}_hit_point(e){const{sx:r,sy:i}=e,a=[];for(let n=0;n<this._sxs.length;n++){var o=this._sxs[n],s=this._sys[n],l=o.length;for(let e=0,t=l;e<t;e++){var[c,u]=this._rotate_point(r,i,o[l-1][0],s[l-1][0],-this.angle.get(n));d.point_in_poly(c,u,o[e],s[e])&&a.push(n)}}return new h.Selection({indices:a})}scenterxy(e){var t=this._sxs[e],n=this._sys[e];c.assert(0!=t.length&&0!=n.length);var r=t[0][0],i=n[0][0],t=(t[0][2]+r)/2,n=(n[0][2]+i)/2,[i,e]=this._rotate_point(t,n,r,i,this.angle.get(e));return[i,e]}}(n.TextView=u).__name__="TextView";class f extends o.XYGlyph{constructor(e){super(e)}static init_Text(){this.prototype.default_view=u,this.mixins(s.TextVector),this.define(({})=>({text:[l.NullStringSpec,{field:"text"}],angle:[l.AngleSpec,0],x_offset:[l.NumberSpec,0],y_offset:[l.NumberSpec,0]}))}}(n.Text=f).__name__="Text",f.init_Text()},function(e,t,n,r,i){r();const a=e(1),o=e(290),s=e(24),l=a.__importStar(e(18));class c extends o.BoxView{scenterxy(e){return[this.sx[e],(this.stop[e]+this.sbottom[e])/2]}_lrtb(e){var t=this.width.get(e)/2,n=this._x[e],r=this._top[e],e=this._bottom[e];return[n-t,n+t,Math.max(r,e),Math.min(r,e)]}_map_data(){this.sx=this.renderer.xscale.v_compute(this._x),this.sw=this.sdist(this.renderer.xscale,this._x,this.width,"center"),this.stop=this.renderer.yscale.v_compute(this._top),this.sbottom=this.renderer.yscale.v_compute(this._bottom);var t=this.sx.length;this.sleft=new s.ScreenArray(t),this.sright=new s.ScreenArray(t);for(let e=0;e<t;e++)this.sleft[e]=this.sx[e]-this.sw[e]/2,this.sright[e]=this.sx[e]+this.sw[e]/2;this._clamp_viewport()}}n.VBarView=c,c.__name__="VBarView";class u extends o.Box{constructor(e){super(e)}static init_VBar(){this.prototype.default_view=c,this.define(({})=>({x:[l.XCoordinateSpec,{field:"x"}],bottom:[l.YCoordinateSpec,{value:0}],width:[l.NumberSpec,{value:1}],top:[l.YCoordinateSpec,{field:"top"}]}))}}(n.VBar=u).__name__="VBar",u.init_VBar()},function(e,t,n,r,i){r();const a=e(1),o=e(64),s=e(106),l=e(48),c=e(24),u=e(20),d=a.__importStar(e(18)),y=e(10),v=e(59);class h extends o.XYGlyphView{_map_data(){"data"==this.model.properties.radius.units?this.sradius=this.sdist(this.renderer.xscale,this._x,this.radius):this.sradius=c.to_screen(this.radius)}_render(e,t,n){const{sx:r,sy:i,sradius:a,start_angle:o,end_angle:s}=null!=n?n:this,l="anticlock"==this.model.direction;for(const n of t){const t=r[n],c=i[n],u=a[n],d=o.get(n),h=s.get(n);isNaN(t+c+u+d+h)||(e.beginPath(),e.arc(t,c,u,d,h,l),e.lineTo(t,c),e.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,n),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(e,n),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,n),e.stroke()))}}_hit_point(e){let t,n,r,i,a,o,s,l,c;var{sx:u,sy:d}=e,h=this.renderer.xscale.invert(u),f=this.renderer.yscale.invert(d),e=2*this.max_radius;"data"===this.model.properties.radius.units?(o=h-e,s=h+e,l=f-e,c=f+e):(n=u-e,r=u+e,[o,s]=this.renderer.xscale.r_invert(n,r),i=d-e,a=d+e,[l,c]=this.renderer.yscale.r_invert(i,a));const p=[];for(const _ of this.index.indices({x0:o,x1:s,y0:l,y1:c})){const o=this.sradius[_]**2;[n,r]=this.renderer.xscale.r_compute(h,this._x[_]),[i,a]=this.renderer.yscale.r_compute(f,this._y[_]),t=(n-r)**2+(i-a)**2,t<=o&&p.push(_)}const m="anticlock"==this.model.direction,g=[];for(const _ of p){const t=Math.atan2(d-this.sy[_],u-this.sx[_]);y.angle_between(-t,-this.start_angle.get(_),-this.end_angle.get(_),m)&&g.push(_)}return new v.Selection({indices:g})}draw_legend_for_index(e,t,n){s.generic_area_vector_legend(this.visuals,e,t,n)}scenterxy(e){var t=this.sradius[e]/2,n=(this.start_angle.get(e)+this.end_angle.get(e))/2;return[this.sx[e]+t*Math.cos(n),this.sy[e]+t*Math.sin(n)]}}(n.WedgeView=h).__name__="WedgeView";class f extends o.XYGlyph{constructor(e){super(e)}static init_Wedge(){this.prototype.default_view=h,this.mixins([l.LineVector,l.FillVector,l.HatchVector]),this.define(({})=>({direction:[u.Direction,"anticlock"],radius:[d.DistanceSpec,{field:"radius"}],start_angle:[d.AngleSpec,{field:"start_angle"}],end_angle:[d.AngleSpec,{field:"end_angle"}]}))}}(n.Wedge=f).__name__="Wedge",f.init_Wedge()},function(e,t,n,r,i){r();const a=e(1);a.__exportStar(e(126),n),a.__exportStar(e(125),n),a.__exportStar(e(314),n)},function(e,t,n,r,i){r();e=e(125);class a extends e.LayoutProvider{constructor(e){super(e)}static init_StaticLayoutProvider(){this.define(({Number:e,Tuple:t,Dict:n})=>({graph_layout:[n(t(e,e)),{}]}))}get_node_coordinates(t){const n=null!==(t=t.data.index)&&void 0!==t?t:[],r=n.length,i=new Float64Array(r),a=new Float64Array(r);for(let e=0;e<r;e++){const t=this.graph_layout[n[e]],[r,o]=null!=t?t:[NaN,NaN];i[e]=r,a[e]=o}return[i,a]}get_edge_coordinates(e){var r;const i=null!==(r=e.data.start)&&void 0!==r?r:[],a=null!==(r=e.data.end)&&void 0!==r?r:[],t=Math.min(i.length,a.length),o=[],s=[],l=null!=e.data.xs&&null!=e.data.ys;for(let n=0;n<t;n++){const r=null!=this.graph_layout[i[n]]&&null!=this.graph_layout[a[n]];if(l&&r)o.push(e.data.xs[n]),s.push(e.data.ys[n]);else{let e,t;t=r?(e=this.graph_layout[i[n]],this.graph_layout[a[n]]):(e=[NaN,NaN],[NaN,NaN]),o.push([e[0],t[0]]),s.push([e[1],t[1]])}}return[o,s]}}(n.StaticLayoutProvider=a).__name__="StaticLayoutProvider",a.init_StaticLayoutProvider()},function(e,t,n,r,i){r(),i("Grid",e(316).Grid)},function(e,t,n,r,i){r();const a=e(1),s=e(162),o=e(164),l=e(165),c=a.__importStar(e(48)),u=e(8);class d extends o.GuideRendererView{_render(){const e=this.layer.ctx;e.save(),this._draw_regions(e),this._draw_minor_grids(e),this._draw_grids(e),e.restore()}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_draw_regions(t){if(this.visuals.band_fill.doit||this.visuals.band_hatch.doit){var n,r,i,a,[o,s]=this.grid_coords("major",!1);for(let e=0;e<o.length-1;e++)e%2==1&&([n,r]=this.coordinates.map_to_screen(o[e],s[e]),[i,a]=this.coordinates.map_to_screen(o[e+1],s[e+1]),t.beginPath(),t.rect(n[0],r[0],i[1]-n[0],a[1]-r[0]),this.visuals.band_fill.doit&&(this.visuals.band_fill.set_value(t),t.fill()),this.visuals.band_hatch.doit&&(this.visuals.band_hatch.set_value(t),t.fill()))}}_draw_grids(e){var t,n;this.visuals.grid_line.doit&&([t,n]=this.grid_coords("major"),this._draw_grid_helper(e,this.visuals.grid_line,t,n))}_draw_minor_grids(e){var t,n;this.visuals.minor_grid_line.doit&&([t,n]=this.grid_coords("minor"),this._draw_grid_helper(e,this.visuals.minor_grid_line,t,n))}_draw_grid_helper(t,e,n,r){e.set_value(t),t.beginPath();for(let e=0;e<n.length;e++){var[i,a]=this.coordinates.map_to_screen(n[e],r[e]);t.moveTo(Math.round(i[0]),Math.round(a[0]));for(let e=1;e<i.length;e++)t.lineTo(Math.round(i[e]),Math.round(a[e]))}t.stroke()}ranges(){var e=this.model.dimension,{ranges:t}=this.coordinates;return[t[e],t[(e+1)%2]]}computed_bounds(){const[e]=this.ranges(),t=this.model.bounds,n=[e.min,e.max];let r,i;if(u.isArray(t))r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),r<n[0]&&(r=n[0]),i>n[1]&&(i=n[1]);else{[r,i]=n;for(const e of this.plot_view.axis_views)e.dimension==this.model.dimension&&e.model.x_range_name==this.model.x_range_name&&e.model.y_range_name==this.model.y_range_name&&([r,i]=e.computed_bounds)}return[r,i]}grid_coords(e,n=!0){const r=this.model.dimension,i=(r+1)%2,[a,o]=this.ranges();let[s,t]=this.computed_bounds();[s,t]=[Math.min(s,t),Math.max(s,t)];const l=[[],[]],c=this.model.get_ticker();if(null==c)return l;const u=c.get_ticks(s,t,a,o.min)[e],d=a.min,h=a.max,f=o.min,p=o.max;n||(u[0]!=d&&u.splice(0,0,d),u[u.length-1]!=h&&u.push(h));for(let t=0;t<u.length;t++)if(u[t]!=d&&u[t]!=h||!n){const a=[],o=[],s=2;for(let e=0;e<2;e++){const r=f+(p-f)*e;a.push(u[t]),o.push(r)}l[r].push(a),l[i].push(o)}return l}}(n.GridView=d).__name__="GridView";class h extends o.GuideRenderer{constructor(e){super(e)}static init_Grid(){this.prototype.default_view=d,this.mixins([["grid_",c.Line],["minor_grid_",c.Line],["band_",c.Fill],["band_",c.Hatch]]),this.define(({Number:e,Auto:t,Enum:n,Ref:r,Tuple:i,Or:a,Nullable:o})=>({bounds:[a(i(e,e),t),"auto"],dimension:[n(0,1),0],axis:[o(r(s.Axis)),null],ticker:[o(r(l.Ticker)),null]})),this.override({level:"underlay",band_fill_color:null,band_fill_alpha:0,grid_line_color:"#e5e5e5",minor_grid_line_color:null})}get_ticker(){return null!=this.ticker?this.ticker:null!=this.axis?this.axis.ticker:null}}(n.Grid=h).__name__="Grid",h.init_Grid()},function(e,t,n,r,i){r(),i("Box",e(318).Box),i("Column",e(320).Column),i("GridBox",e(321).GridBox),i("HTMLBox",e(322).HTMLBox),i("LayoutDOM",e(319).LayoutDOM),i("Panel",e(323).Panel),i("Row",e(324).Row),i("Spacer",e(325).Spacer),i("Tabs",e(326).Tabs),i("WidgetBox",e(329).WidgetBox)},function(e,t,n,r,i){r();const a=e(319);class o extends a.LayoutDOMView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.children.change,()=>this.rebuild())}get child_models(){return this.model.children}}(n.BoxView=o).__name__="BoxView";class s extends a.LayoutDOM{constructor(e){super(e)}static init_Box(){this.define(({Number:e,Array:t,Ref:n})=>({children:[t(n(a.LayoutDOM)),[]],spacing:[e,0]}))}}(n.Box=s).__name__="Box",s.init_Box()},function(e,t,n,r,i){r();const a=e(53),f=e(20),p=e(43),o=e(19),d=e(8),s=e(22),l=e(122),c=e(240),m=e(221),g=e(44),u=e(249);class h extends c.DOMView{constructor(){super(...arguments),this._idle_notified=!1,this._offset_parent=null,this._viewport={}}initialize(){super.initialize(),this.el.style.position=this.is_root?"relative":"absolute",this._child_views=new Map}async lazy_initialize(){await super.lazy_initialize(),await this.build_child_views()}remove(){for(const e of this.child_views)e.remove();this._child_views.clear(),super.remove()}connect_signals(){super.connect_signals(),this.is_root&&(this._on_resize=()=>this.resize_layout(),window.addEventListener("resize",this._on_resize),this._parent_observer=setInterval(()=>{var e=this.el.offsetParent;this._offset_parent==e||null!=(this._offset_parent=e)&&(this.compute_viewport(),this.invalidate_layout())},250));var e=this.model.properties;this.on_change([e.width,e.height,e.min_width,e.min_height,e.max_width,e.max_height,e.margin,e.width_policy,e.height_policy,e.sizing_mode,e.aspect_ratio,e.visible],()=>this.invalidate_layout()),this.on_change([e.background,e.css_classes],()=>this.invalidate_render())}disconnect_signals(){null!=this._parent_observer&&clearTimeout(this._parent_observer),null!=this._on_resize&&window.removeEventListener("resize",this._on_resize),super.disconnect_signals()}css_classes(){return super.css_classes().concat(this.model.css_classes)}get child_views(){return this.child_models.map(e=>this._child_views.get(e))}async build_child_views(){await l.build_views(this._child_views,this.child_models,{parent:this})}render(){super.render(),p.empty(this.el);const{background:e}=this.model;this.el.style.backgroundColor=null!=e?s.color2css(e):"",p.classes(this.el).clear().add(...this.css_classes());for(const e of this.child_views)this.el.appendChild(e.el),e.render()}update_layout(){for(const e of this.child_views)e.update_layout();this._update_layout()}update_position(){this.el.style.display=this.model.visible?"block":"none";const e=this.is_root?this.layout.sizing.margin:void 0;p.position(this.el,this.layout.bbox,e);for(const e of this.child_views)e.update_position()}after_layout(){for(const e of this.child_views)e.after_layout();this._has_finished=!0}compute_viewport(){this._viewport=this._viewport_size()}renderTo(e){e.appendChild(this.el),this._offset_parent=this.el.offsetParent,this.compute_viewport(),this.build()}build(){return this.assert_root(),this.render(),this.update_layout(),this.compute_layout(),this}async rebuild(){await this.build_child_views(),this.invalidate_render()}compute_layout(){var e=Date.now();this.layout.compute(this._viewport),this.update_position(),this.after_layout(),o.logger.debug(`layout computed in ${Date.now()-e} ms`),this.notify_finished()}resize_layout(){this.root.compute_viewport(),this.root.compute_layout()}invalidate_layout(){this.root.update_layout(),this.root.compute_layout()}invalidate_render(){this.render(),this.invalidate_layout()}has_finished(){if(!super.has_finished())return!1;for(const e of this.child_views)if(!e.has_finished())return!1;return!0}notify_finished(){this.is_root?!this._idle_notified&&this.has_finished()&&null!=this.model.document&&(this._idle_notified=!0,this.model.document.notify_idle(this.model)):this.root.notify_finished()}_width_policy(){return null!=this.model.width?"fixed":"fit"}_height_policy(){return null!=this.model.height?"fixed":"fit"}box_sizing(){let{width_policy:e,height_policy:t,aspect_ratio:n}=this.model;"auto"==e&&(e=this._width_policy()),"auto"==t&&(t=this._height_policy());const{sizing_mode:r}=this.model;if(null!=r)if("fixed"==r)e=t="fixed";else if("stretch_both"==r)e=t="max";else if("stretch_width"==r)e="max";else if("stretch_height"==r)t="max";else switch(null==n&&(n="auto"),r){case"scale_width":e="max",t="min";break;case"scale_height":e="min",t="max";break;case"scale_both":e="max",t="max"}const i={width_policy:e,height_policy:t},{min_width:a,min_height:o}=this.model;null!=a&&(i.min_width=a),null!=o&&(i.min_height=o);var{width:s,height:l}=this.model;null!=s&&(i.width=s),null!=l&&(i.height=l);var{max_width:c,max_height:u}=this.model;null!=c&&(i.max_width=c),null!=u&&(i.max_height=u),"auto"==n&&null!=s&&null!=l?i.aspect=s/l:d.isNumber(n)&&(i.aspect=n);var{margin:l}=this.model;if(null!=l)if(d.isNumber(l))i.margin={top:l,right:l,bottom:l,left:l};else if(2==l.length){const[e,t]=l;i.margin={top:e,right:t,bottom:e,left:t}}else{const[e,t,n,r]=l;i.margin={top:e,right:t,bottom:n,left:r}}i.visible=this.model.visible;var{align:l}=this.model;return d.isArray(l)?[i.halign,i.valign]=l:i.halign=i.valign=l,i}_viewport_size(){return p.undisplayed(this.el,()=>{let t=this.el;for(;t=t.parentElement;)if(!t.classList.contains(g.root)){if(t==document.body){const{margin:{left:t,right:l,top:c,bottom:u}}=p.extents(document.body);return{width:Math.ceil(document.documentElement.clientWidth-t-l),height:Math.ceil(document.documentElement.clientHeight-c-u)}}var{padding:{left:n,right:r,top:i,bottom:a}}=p.extents(t),{width:o,height:s}=t.getBoundingClientRect();let e=0;for(const d of t.children){const{height:t}=d.getBoundingClientRect(),{margin:{top:h,bottom:f}}=p.extents(d);e+=t+h+f}r=Math.ceil(o-n-r),a=Math.ceil(s-i-a-e);if(0<r||0<a)return{width:0<r?r:void 0,height:0<a?a:void 0}}return{}})}export(e,t=!0){const n="png"==e?"canvas":"svg",r=new u.CanvasLayer(n,t),{width:i,height:a}=this.layout.bbox;r.resize(i,a);for(const n of this.child_views){const i=n.export(e,t),{x:a,y:o}=n.layout.bbox;r.ctx.drawImage(i.canvas,a,o)}return r}serializable_state(){return Object.assign(Object.assign({},super.serializable_state()),{bbox:this.layout.bbox.box,children:this.child_views.map(e=>e.serializable_state())})}}(n.LayoutDOMView=h).__name__="LayoutDOMView";class _ extends a.Model{constructor(e){super(e)}static init_LayoutDOM(){this.define(e=>{const{Boolean:t,Number:n,String:r,Auto:i,Color:a,Array:o,Tuple:s,Or:l,Null:c,Nullable:u}=e,d=s(n,n),h=s(n,n,n,n);return{width:[u(n),null],height:[u(n),null],min_width:[u(n),null],min_height:[u(n),null],max_width:[u(n),null],max_height:[u(n),null],margin:[u(l(n,d,h)),[0,0,0,0]],width_policy:[l(m.SizingPolicy,i),"auto"],height_policy:[l(m.SizingPolicy,i),"auto"],aspect_ratio:[l(n,i,c),null],sizing_mode:[u(f.SizingMode),null],visible:[t,!0],disabled:[t,!1],align:[l(f.Align,s(f.Align,f.Align)),"start"],background:[u(a),null],css_classes:[o(r),[]]}})}}(n.LayoutDOM=_).__name__="LayoutDOM",_.init_LayoutDOM()},function(e,t,n,r,i){r();const a=e(318),o=e(223);class s extends a.BoxView{_update_layout(){var e=this.child_views.map(e=>e.layout);this.layout=new o.Column(e),this.layout.rows=this.model.rows,this.layout.spacing=[this.model.spacing,0],this.layout.set_sizing(this.box_sizing())}}(n.ColumnView=s).__name__="ColumnView";class l extends a.Box{constructor(e){super(e)}static init_Column(){this.prototype.default_view=s,this.define(({Any:e})=>({rows:[e,"auto"]}))}}(n.Column=l).__name__="Column",l.init_Column()},function(e,t,n,r,i){r();const l=e(319),a=e(223);class o extends l.LayoutDOMView{connect_signals(){super.connect_signals();var{children:e,rows:t,cols:n,spacing:r}=this.model.properties;this.on_change([e,t,n,r],()=>this.rebuild())}get child_models(){return this.model.children.map(([e])=>e)}_update_layout(){this.layout=new a.Grid,this.layout.rows=this.model.rows,this.layout.cols=this.model.cols,this.layout.spacing=this.model.spacing;for(var[e,t,n,r,i]of this.model.children){e=this._child_views.get(e);this.layout.items.push({layout:e.layout,row:t,col:n,row_span:r,col_span:i})}this.layout.set_sizing(this.box_sizing())}}(n.GridBoxView=o).__name__="GridBoxView";class s extends l.LayoutDOM{constructor(e){super(e)}static init_GridBox(){this.prototype.default_view=o,this.define(({Any:e,Int:t,Number:n,Tuple:r,Array:i,Ref:a,Or:o,Opt:s})=>({children:[i(r(a(l.LayoutDOM),t,t,s(t),s(t))),[]],rows:[e,"auto"],cols:[e,"auto"],spacing:[o(n,r(n,n)),0]}))}}(n.GridBox=s).__name__="GridBox",s.init_GridBox()},function(e,t,n,r,i){r();const a=e(319),o=e(221);class s extends a.LayoutDOMView{get child_models(){return[]}_update_layout(){this.layout=new o.ContentBox(this.el),this.layout.set_sizing(this.box_sizing())}}(n.HTMLBoxView=s).__name__="HTMLBoxView";class l extends a.LayoutDOM{constructor(e){super(e)}}(n.HTMLBox=l).__name__="HTMLBox"},function(e,t,n,r,i){r();const a=e(53),o=e(319);class s extends a.Model{constructor(e){super(e)}static init_Panel(){this.define(({Boolean:e,String:t,Ref:n})=>({title:[t,""],child:[n(o.LayoutDOM)],closable:[e,!1]}))}}(n.Panel=s).__name__="Panel",s.init_Panel()},function(e,t,n,r,i){r();const a=e(318),o=e(223);class s extends a.BoxView{_update_layout(){var e=this.child_views.map(e=>e.layout);this.layout=new o.Row(e),this.layout.cols=this.model.cols,this.layout.spacing=[0,this.model.spacing],this.layout.set_sizing(this.box_sizing())}}n.RowView=s,s.__name__="RowView";class l extends a.Box{constructor(e){super(e)}static init_Row(){this.prototype.default_view=s,this.define(({Any:e})=>({cols:[e,"auto"]}))}}(n.Row=l).__name__="Row",l.init_Row()},function(e,t,n,r,i){r();const a=e(319),o=e(221);class s extends a.LayoutDOMView{get child_models(){return[]}_update_layout(){this.layout=new o.LayoutItem,this.layout.set_sizing(this.box_sizing())}}(n.SpacerView=s).__name__="SpacerView";class l extends a.LayoutDOM{constructor(e){super(e)}static init_Spacer(){this.prototype.default_view=s}}(n.Spacer=l).__name__="Spacer",l.init_Spacer()},function(e,t,n,r,i){r();const a=e(1),l=e(221),c=e(43),u=e(9),o=e(20),s=e(319),d=e(323),h=a.__importStar(e(327)),f=h,p=a.__importStar(e(328)),m=p,g=a.__importStar(e(243)),_=g;class y extends s.LayoutDOMView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.tabs.change,()=>this.rebuild()),this.connect(this.model.properties.active.change,()=>this.on_active_change())}styles(){return[...super.styles(),p.default,g.default,h.default]}get child_models(){return this.model.tabs.map(e=>e.child)}_update_layout(){const e=this.model.tabs_location,a="above"==e||"below"==e,{scroll_el:o,headers_el:s}=this;this.header=new class extends l.ContentBox{_measure(e){const t=c.size(o),n=c.children(s).slice(0,3).map(e=>c.size(e)),{width:r,height:i}=super._measure(e);if(a){const a=t.width+u.sum(n.map(e=>e.width));return{width:e.width!=1/0?e.width:a,height:i}}{const a=t.height+u.sum(n.map(e=>e.height));return{width:r,height:e.height!=1/0?e.height:a}}}}(this.header_el),a?this.header.set_sizing({width_policy:"fit",height_policy:"fixed"}):this.header.set_sizing({width_policy:"fixed",height_policy:"fit"});let t=1,n=1;switch(e){case"above":--t;break;case"below":t+=1;break;case"left":--n;break;case"right":n+=1}var r={layout:this.header,row:t,col:n},i=this.child_views.map(e=>({layout:e.layout,row:1,col:1}));this.layout=new l.Grid([r,...i]),this.layout.set_sizing(this.box_sizing())}update_position(){super.update_position(),this.header_el.style.position="absolute",c.position(this.header_el,this.header.bbox);const e=this.model.tabs_location,t="above"==e||"below"==e,n=c.size(this.scroll_el),r=c.scroll_size(this.headers_el);if(t){const{width:e}=this.header.bbox;r.width>e?(this.wrapper_el.style.maxWidth=e-n.width+"px",c.display(this.scroll_el)):(this.wrapper_el.style.maxWidth="",c.undisplay(this.scroll_el))}else{const{height:e}=this.header.bbox;r.height>e?(this.wrapper_el.style.maxHeight=e-n.height+"px",c.display(this.scroll_el)):(this.wrapper_el.style.maxHeight="",c.undisplay(this.scroll_el))}var{child_views:i}=this;for(const e of i)c.hide(e.el);i=i[this.model.active];null!=i&&c.show(i.el)}render(){super.render();const{active:r}=this.model,e=this.model.tabs_location,i="above"==e||"below"==e,t=this.model.tabs.map((e,t)=>{const n=c.div({class:[f.tab,t==r?f.active:null]},e.title);if(n.addEventListener("click",e=>{e.target==e.currentTarget&&this.change_active(t)}),e.closable){const r=c.div({class:f.close});r.addEventListener("click",e=>{if(e.target==e.currentTarget){this.model.tabs=u.remove_at(this.model.tabs,t);const e=this.model.tabs.length;this.model.active>e-1&&(this.model.active=e-1)}}),n.appendChild(r)}return n});this.headers_el=c.div({class:[f.headers]},t),this.wrapper_el=c.div({class:f.headers_wrapper},this.headers_el);const a=c.div({class:[m.btn,m.btn_default],disabled:""},c.div({class:[_.caret,f.left]})),o=c.div({class:[m.btn,m.btn_default]},c.div({class:[_.caret,f.right]}));let s=0;var n=n=>()=>{var e=this.model.tabs.length;s="left"==n?Math.max(s-1,0):Math.min(s+1,e-1),0==s?a.setAttribute("disabled",""):a.removeAttribute("disabled"),s==e-1?o.setAttribute("disabled",""):o.removeAttribute("disabled");const t=c.children(this.headers_el).slice(0,s).map(e=>e.getBoundingClientRect());if(i){const n=-u.sum(t.map(e=>e.width));this.headers_el.style.left=`${n}px`}else{const n=-u.sum(t.map(e=>e.height));this.headers_el.style.top=`${n}px`}};a.addEventListener("click",n("left")),o.addEventListener("click",n("right")),this.scroll_el=c.div({class:m.btn_group},a,o),this.header_el=c.div({class:[f.tabs_header,f[e]]},this.scroll_el,this.wrapper_el),this.el.appendChild(this.header_el)}change_active(e){e!=this.model.active&&(this.model.active=e)}on_active_change(){const e=this.model.active,t=c.children(this.headers_el);for(const e of t)e.classList.remove(f.active);t[e].classList.add(f.active);var{child_views:n}=this;for(const e of n)c.hide(e.el);c.show(n[e].el)}}(n.TabsView=y).__name__="TabsView";class v extends s.LayoutDOM{constructor(e){super(e)}static init_Tabs(){this.prototype.default_view=y,this.define(({Int:e,Array:t,Ref:n})=>({tabs:[t(n(d.Panel)),[]],tabs_location:[o.Location,"above"],active:[e,0]}))}}(n.Tabs=v).__name__="Tabs",v.init_Tabs()},function(e,t,n,r,i){r(),n.root="bk-root",n.tabs_header="bk-tabs-header",n.btn_group="bk-btn-group",n.btn="bk-btn",n.headers_wrapper="bk-headers-wrapper",n.above="bk-above",n.right="bk-right",n.below="bk-below",n.left="bk-left",n.headers="bk-headers",n.tab="bk-tab",n.active="bk-active",n.close="bk-close",n.default='.bk-root .bk-tabs-header{display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;overflow:hidden;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;}.bk-root .bk-tabs-header .bk-btn-group{height:auto;margin-right:5px;}.bk-root .bk-tabs-header .bk-btn-group > .bk-btn{flex-grow:0;-webkit-flex-grow:0;height:auto;padding:4px 4px;}.bk-root .bk-tabs-header .bk-headers-wrapper{flex-grow:1;-webkit-flex-grow:1;overflow:hidden;color:#666666;}.bk-root .bk-tabs-header.bk-above .bk-headers-wrapper{border-bottom:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-right .bk-headers-wrapper{border-left:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-below .bk-headers-wrapper{border-top:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-left .bk-headers-wrapper{border-right:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-above,.bk-root .bk-tabs-header.bk-below{flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-tabs-header.bk-above .bk-headers,.bk-root .bk-tabs-header.bk-below .bk-headers{flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-tabs-header.bk-left,.bk-root .bk-tabs-header.bk-right{flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-tabs-header.bk-left .bk-headers,.bk-root .bk-tabs-header.bk-right .bk-headers{flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-tabs-header .bk-headers{position:relative;display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;}.bk-root .bk-tabs-header .bk-tab{padding:4px 8px;border:solid transparent;white-space:nowrap;cursor:pointer;}.bk-root .bk-tabs-header .bk-tab:hover{background-color:#f2f2f2;}.bk-root .bk-tabs-header .bk-tab.bk-active{color:#4d4d4d;background-color:white;border-color:#e6e6e6;}.bk-root .bk-tabs-header .bk-tab .bk-close{margin-left:10px;}.bk-root .bk-tabs-header.bk-above .bk-tab{border-width:3px 1px 0px 1px;border-radius:4px 4px 0 0;}.bk-root .bk-tabs-header.bk-right .bk-tab{border-width:1px 3px 1px 0px;border-radius:0 4px 4px 0;}.bk-root .bk-tabs-header.bk-below .bk-tab{border-width:0px 1px 3px 1px;border-radius:0 0 4px 4px;}.bk-root .bk-tabs-header.bk-left .bk-tab{border-width:1px 0px 1px 3px;border-radius:4px 0 0 4px;}.bk-root .bk-close{display:inline-block;width:10px;height:10px;vertical-align:middle;background-image:url(\'data:image/svg+xml;utf8,      <svg viewPort="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg">        <line x1="1" y1="9" x2="9" y2="1" stroke="gray" stroke-width="2"/>        <line x1="1" y1="1" x2="9" y2="9" stroke="gray" stroke-width="2"/>      </svg>\');}.bk-root .bk-close:hover{background-image:url(\'data:image/svg+xml;utf8,      <svg viewPort="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg">        <line x1="1" y1="9" x2="9" y2="1" stroke="red" stroke-width="2"/>        <line x1="1" y1="1" x2="9" y2="9" stroke="red" stroke-width="2"/>      </svg>\');}'},function(e,t,n,r,i){r(),n.root="bk-root",n.btn="bk-btn",n.active="bk-active",n.btn_default="bk-btn-default",n.btn_primary="bk-btn-primary",n.btn_success="bk-btn-success",n.btn_warning="bk-btn-warning",n.btn_danger="bk-btn-danger",n.btn_light="bk-btn-light",n.btn_group="bk-btn-group",n.dropdown_toggle="bk-dropdown-toggle",n.default=".bk-root .bk-btn{height:100%;display:inline-block;text-align:center;vertical-align:middle;white-space:nowrap;cursor:pointer;padding:6px 12px;font-size:12px;border:1px solid transparent;border-radius:4px;outline:0;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;}.bk-root .bk-btn:hover,.bk-root .bk-btn:focus{text-decoration:none;}.bk-root .bk-btn:active,.bk-root .bk-btn.bk-active{background-image:none;box-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);}.bk-root .bk-btn[disabled]{cursor:not-allowed;pointer-events:none;opacity:0.65;box-shadow:none;}.bk-root .bk-btn-default{color:#333;background-color:#fff;border-color:#ccc;}.bk-root .bk-btn-default:hover{background-color:#f5f5f5;border-color:#b8b8b8;}.bk-root .bk-btn-default.bk-active{background-color:#ebebeb;border-color:#adadad;}.bk-root .bk-btn-default[disabled],.bk-root .bk-btn-default[disabled]:hover,.bk-root .bk-btn-default[disabled]:focus,.bk-root .bk-btn-default[disabled]:active,.bk-root .bk-btn-default[disabled].bk-active{background-color:#e6e6e6;border-color:#ccc;}.bk-root .bk-btn-primary{color:#fff;background-color:#428bca;border-color:#357ebd;}.bk-root .bk-btn-primary:hover{background-color:#3681c1;border-color:#2c699e;}.bk-root .bk-btn-primary.bk-active{background-color:#3276b1;border-color:#285e8e;}.bk-root .bk-btn-primary[disabled],.bk-root .bk-btn-primary[disabled]:hover,.bk-root .bk-btn-primary[disabled]:focus,.bk-root .bk-btn-primary[disabled]:active,.bk-root .bk-btn-primary[disabled].bk-active{background-color:#506f89;border-color:#357ebd;}.bk-root .bk-btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c;}.bk-root .bk-btn-success:hover{background-color:#4eb24e;border-color:#409240;}.bk-root .bk-btn-success.bk-active{background-color:#47a447;border-color:#398439;}.bk-root .bk-btn-success[disabled],.bk-root .bk-btn-success[disabled]:hover,.bk-root .bk-btn-success[disabled]:focus,.bk-root .bk-btn-success[disabled]:active,.bk-root .bk-btn-success[disabled].bk-active{background-color:#667b66;border-color:#4cae4c;}.bk-root .bk-btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236;}.bk-root .bk-btn-warning:hover{background-color:#eea43b;border-color:#e89014;}.bk-root .bk-btn-warning.bk-active{background-color:#ed9c28;border-color:#d58512;}.bk-root .bk-btn-warning[disabled],.bk-root .bk-btn-warning[disabled]:hover,.bk-root .bk-btn-warning[disabled]:focus,.bk-root .bk-btn-warning[disabled]:active,.bk-root .bk-btn-warning[disabled].bk-active{background-color:#c89143;border-color:#eea236;}.bk-root .bk-btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a;}.bk-root .bk-btn-danger:hover{background-color:#d5433e;border-color:#bd2d29;}.bk-root .bk-btn-danger.bk-active{background-color:#d2322d;border-color:#ac2925;}.bk-root .bk-btn-danger[disabled],.bk-root .bk-btn-danger[disabled]:hover,.bk-root .bk-btn-danger[disabled]:focus,.bk-root .bk-btn-danger[disabled]:active,.bk-root .bk-btn-danger[disabled].bk-active{background-color:#a55350;border-color:#d43f3a;}.bk-root .bk-btn-light{color:#333;background-color:#fff;border-color:#ccc;border-color:transparent;}.bk-root .bk-btn-light:hover{background-color:#f5f5f5;border-color:#b8b8b8;}.bk-root .bk-btn-light.bk-active{background-color:#ebebeb;border-color:#adadad;}.bk-root .bk-btn-light[disabled],.bk-root .bk-btn-light[disabled]:hover,.bk-root .bk-btn-light[disabled]:focus,.bk-root .bk-btn-light[disabled]:active,.bk-root .bk-btn-light[disabled].bk-active{background-color:#e6e6e6;border-color:#ccc;}.bk-root .bk-btn-group{height:100%;display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-btn-group > .bk-btn{flex-grow:1;-webkit-flex-grow:1;}.bk-root .bk-btn-group > .bk-btn + .bk-btn{margin-left:-1px;}.bk-root .bk-btn-group > .bk-btn:first-child:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0;}.bk-root .bk-btn-group > .bk-btn:not(:first-child):last-child{border-bottom-left-radius:0;border-top-left-radius:0;}.bk-root .bk-btn-group > .bk-btn:not(:first-child):not(:last-child){border-radius:0;}.bk-root .bk-btn-group .bk-dropdown-toggle{flex:0 0 0;-webkit-flex:0 0 0;padding:6px 6px;}"},function(e,t,n,r,i){r();var a=e(320);class o extends a.ColumnView{}(n.WidgetBoxView=o).__name__="WidgetBoxView";class s extends a.Column{constructor(e){super(e)}static init_WidgetBox(){this.prototype.default_view=o}}(n.WidgetBox=s).__name__="WidgetBox",s.init_WidgetBox()},function(e,t,n,r,i){r(),i("MapOptions",e(331).MapOptions),i("GMapOptions",e(331).GMapOptions),i("GMapPlot",e(331).GMapPlot),i("Plot",e(332).Plot)},function(e,t,n,r,i){r();const a=e(332),o=e(53),s=e(156),l=e(337);i("GMapPlotView",l.GMapPlotView);class c extends o.Model{constructor(e){super(e)}static init_MapOptions(){this.define(({Int:e,Number:t})=>({lat:[t],lng:[t],zoom:[e,12]}))}}(n.MapOptions=c).__name__="MapOptions",c.init_MapOptions();class u extends c{constructor(e){super(e)}static init_GMapOptions(){this.define(({Boolean:e,Int:t,String:n})=>({map_type:[n,"roadmap"],scale_control:[e,!1],styles:[n],tilt:[t,45]}))}}(n.GMapOptions=u).__name__="GMapOptions",u.init_GMapOptions();class d extends a.Plot{constructor(e){super(e),this.use_map=!0}static init_GMapPlot(){this.prototype.default_view=l.GMapPlotView,this.define(({String:e,Ref:t})=>({map_options:[t(u)],api_key:[e],api_version:[e,"3.43"]})),this.override({x_range:()=>new s.Range1d,y_range:()=>new s.Range1d})}}(n.GMapPlot=d).__name__="GMapPlot",d.init_GMapPlot()},function(e,t,n,r,i){r();const a=e(1),o=a.__importStar(e(48)),c=a.__importStar(e(18)),s=e(15),u=e(20),l=e(9),d=e(13),h=e(8),f=e(319),p=e(163),m=e(316),g=e(40),_=e(138),y=e(218),v=e(235),b=e(105),x=e(146),w=e(130),T=e(41),A=e(62),k=e(61),M=e(159),S=e(333);i("PlotView",S.PlotView);class E extends f.LayoutDOM{constructor(e){super(e),this.use_map=!1}static init_Plot(){this.prototype.default_view=S.PlotView,this.mixins([["outline_",o.Line],["background_",o.Fill],["border_",o.Fill]]),this.define(({Boolean:e,Number:t,String:n,Array:r,Dict:i,Or:a,Ref:o,Null:s,Nullable:l})=>({toolbar:[o(v.Toolbar),()=>new v.Toolbar],toolbar_location:[l(u.Location),"right"],toolbar_sticky:[e,!0],plot_width:[c.Alias("width")],plot_height:[c.Alias("height")],frame_width:[l(t),null],frame_height:[l(t),null],title:[a(o(_.Title),n,s),()=>new _.Title({text:""})],title_location:[l(u.Location),"above"],above:[r(a(o(g.Annotation),o(p.Axis))),[]],below:[r(a(o(g.Annotation),o(p.Axis))),[]],left:[r(a(o(g.Annotation),o(p.Axis))),[]],right:[r(a(o(g.Annotation),o(p.Axis))),[]],center:[r(a(o(g.Annotation),o(m.Grid))),[]],renderers:[r(o(T.Renderer)),[]],x_range:[o(b.Range),()=>new M.DataRange1d],extra_x_ranges:[i(o(b.Range)),{}],y_range:[o(b.Range),()=>new M.DataRange1d],extra_y_ranges:[i(o(b.Range)),{}],x_scale:[o(x.Scale),()=>new y.LinearScale],y_scale:[o(x.Scale),()=>new y.LinearScale],lod_factor:[t,10],lod_interval:[t,300],lod_threshold:[l(t),2e3],lod_timeout:[t,500],hidpi:[e,!0],output_backend:[u.OutputBackend,"canvas"],min_border:[l(t),5],min_border_top:[l(t),null],min_border_left:[l(t),null],min_border_bottom:[l(t),null],min_border_right:[l(t),null],inner_width:[t,0],inner_height:[t,0],outer_width:[t,0],outer_height:[t,0],match_aspect:[e,!1],aspect_scale:[t,1],reset_policy:[u.ResetPolicy,"standard"]})),this.override({width:600,height:600,outline_line_color:"#e5e5e5",border_fill_color:"#ffffff",background_fill_color:"#ffffff"})}_doc_attached(){super._doc_attached(),this._push_changes([[this.properties.inner_height,null,this.inner_height],[this.properties.inner_width,null,this.inner_width]])}initialize(){super.initialize(),this.reset=new s.Signal0(this,"reset");for(const t of d.values(this.extra_x_ranges).concat(this.x_range)){let e=t.plots;h.isArray(e)&&(e=e.concat(this),t.setv({plots:e},{silent:!0}))}for(const n of d.values(this.extra_y_ranges).concat(this.y_range)){let e=n.plots;h.isArray(e)&&(e=e.concat(this),n.setv({plots:e},{silent:!0}))}}add_layout(e,t="center"){var n=this.properties[t].get_value();this.setv({[t]:[...n,e]})}remove_layout(t){var e=e=>{l.remove_by(e,e=>e==t)};e(this.left),e(this.right),e(this.above),e(this.below),e(this.center)}get data_renderers(){return this.renderers.filter(e=>e instanceof A.DataRenderer)}add_renderers(...e){this.renderers=this.renderers.concat(e)}add_glyph(e,t=new w.ColumnDataSource,n={}){e=new k.GlyphRenderer(Object.assign(Object.assign({},n),{data_source:t,glyph:e}));return this.add_renderers(e),e}add_tools(...e){this.toolbar.tools=this.toolbar.tools.concat(e)}get panels(){return[...this.side_panels,...this.center]}get side_panels(){var{above:e,below:t,left:n,right:r}=this;return l.concat([e,t,n,r])}}(n.Plot=E).__name__="Plot",E.init_Plot()},function(e,t,n,r,i){r();const a=e(1),o=e(144),s=e(262),l=e(319),b=e(40),x=e(138),c=e(163),w=e(234),u=e(264),d=e(122),h=e(45),f=e(19),p=e(334),T=e(8),A=e(9),m=e(249),k=e(222),M=e(225),S=e(223),E=e(140),g=e(99),_=e(335),y=e(336),v=e(28);class C extends l.LayoutDOMView{constructor(){super(...arguments),this._outer_bbox=new g.BBox,this._inner_bbox=new g.BBox,this._needs_paint=!0,this._needs_layout=!1,this._invalidated_painters=new Set,this._invalidate_all=!0}get canvas(){return this.canvas_view}get state(){return this._state_manager}set invalidate_dataranges(e){this._range_manager.invalidate_dataranges=e}renderer_view(e){const t=this.renderer_views.get(e);if(null==t)for(const[,t]of this.renderer_views){var n=t.renderer_view(e);if(null!=n)return n}return t}get is_paused(){return null!=this._is_paused&&0!==this._is_paused}get child_models(){return[]}pause(){null==this._is_paused?this._is_paused=1:this._is_paused+=1}unpause(e=!1){if(null==this._is_paused)throw new Error("wasn't paused");--this._is_paused,0!=this._is_paused||e||this.request_paint("everything")}request_render(){this.request_paint("everything")}request_paint(e){this.invalidate_painters(e),this.schedule_paint()}invalidate_painters(e){if("everything"==e)this._invalidate_all=!0;else if(T.isArray(e))for(const t of e)this._invalidated_painters.add(t);else this._invalidated_painters.add(e)}schedule_paint(){if(!this.is_paused){const e=this.throttled_paint();this._ready=this._ready.then(()=>e)}}request_layout(){this._needs_layout=!0,this.request_paint("everything")}reset(){"standard"==this.model.reset_policy&&(this.state.clear(),this.reset_range(),this.reset_selection()),this.model.trigger_event(new u.Reset)}remove(){d.remove_views(this.renderer_views),d.remove_views(this.tool_views),this.canvas_view.remove(),super.remove()}render(){super.render(),this.el.appendChild(this.canvas_view.el),this.canvas_view.render()}initialize(){this.pause(),super.initialize(),this.lod_started=!1,this.visuals=new h.Visuals(this),this._initial_state={selection:new Map,dimensions:{width:0,height:0}},this.visibility_callbacks=[],this.renderer_views=new Map,this.tool_views=new Map,this.frame=new o.CartesianFrame(this.model.x_scale,this.model.y_scale,this.model.x_range,this.model.y_range,this.model.extra_x_ranges,this.model.extra_y_ranges),this._range_manager=new _.RangeManager(this),this._state_manager=new y.StateManager(this,this._initial_state),this.throttled_paint=p.throttle(()=>this.repaint(),1e3/60);var{title_location:e,title:t}=this.model;null!=e&&null!=t&&(this._title=t instanceof x.Title?t:new x.Title({text:t}));const{toolbar_location:n,toolbar:r}=this.model;null!=n&&null!=r&&(this._toolbar=new w.ToolbarPanel({toolbar:r}),r.toolbar_location=n)}async lazy_initialize(){await super.lazy_initialize();var{hidpi:e,output_backend:t}=this.model,t=new s.Canvas({hidpi:e,output_backend:t});this.canvas_view=await d.build_view(t,{parent:this}),this.canvas_view.plot_views=[this],await this.build_renderer_views(),await this.build_tool_views(),this._range_manager.update_dataranges(),this.unpause(!0),f.logger.debug("PlotView initialized")}_width_policy(){return null==this.model.frame_width?super._width_policy():"min"}_height_policy(){return null==this.model.frame_height?super._height_policy():"min"}_update_layout(){this.layout=new M.BorderLayout,this.layout.set_sizing(this.box_sizing());const t=A.copy(this.model.above),n=A.copy(this.model.below),r=A.copy(this.model.left),i=A.copy(this.model.right),e=e=>{switch(e){case"above":return t;case"below":return n;case"left":return r;case"right":return i}},{title_location:a,title:o}=this.model;null!=a&&null!=o&&e(a).push(this._title);var{toolbar_location:s,toolbar:l}=this.model;if(null!=s&&null!=l){const y=e(s);let t=!0;if(this.model.toolbar_sticky)for(let e=0;e<y.length;e++){const v=y[e];if(v instanceof x.Title){y[e]="above"==s||"below"==s?[v,this._toolbar]:[this._toolbar,v],t=!1;break}}t&&y.push(this._toolbar)}const c=(e,t)=>{const n=this.renderer_view(t);return n.panel=new E.Panel(e),null===(e=n.update_layout)||void 0===e||e.call(n),n.layout},u=(n,t)=>{const r="above"==n||"below"==n,i=[];for(const a of t)if(T.isArray(a)){const t=a.map(e=>{const t=c(n,e);if(e instanceof w.ToolbarPanel){const n=r?"width_policy":"height_policy";t.set_sizing(Object.assign(Object.assign({},t.sizing),{[n]:"min"}))}return t});let e;r?(e=new S.Row(t),e.set_sizing({width_policy:"max",height_policy:"min"})):(e=new S.Column(t),e.set_sizing({width_policy:"min",height_policy:"max"})),e.absolute=!0,i.push(e)}else i.push(c(n,a));return i},d=null!==(_=this.model.min_border)&&void 0!==_?_:0;this.layout.min_border={left:null!==(l=this.model.min_border_left)&&void 0!==l?l:d,top:null!==(_=this.model.min_border_top)&&void 0!==_?_:d,right:null!==(l=this.model.min_border_right)&&void 0!==l?l:d,bottom:null!==(_=this.model.min_border_bottom)&&void 0!==_?_:d};const h=new k.NodeLayout,f=new k.VStack,p=new k.VStack,m=new k.HStack,g=new k.HStack;h.absolute=!0,f.absolute=!0,p.absolute=!0,m.absolute=!0,g.absolute=!0,h.children=this.model.center.filter(e=>e instanceof b.Annotation).map(e=>{var t=this.renderer_view(e);return null===(e=t.update_layout)||void 0===e||e.call(t),t.layout}).filter(e=>null!=e);var{frame_width:l,frame_height:_}=this.model;h.set_sizing(Object.assign(Object.assign({},null!=l?{width_policy:"fixed",width:l}:{width_policy:"fit"}),null!=_?{height_policy:"fixed",height:_}:{height_policy:"fit"})),h.on_resize(e=>this.frame.set_geometry(e)),f.children=A.reversed(u("above",t)),p.children=u("below",n),m.children=A.reversed(u("left",r)),g.children=u("right",i),f.set_sizing({width_policy:"fit",height_policy:"min"}),p.set_sizing({width_policy:"fit",height_policy:"min"}),m.set_sizing({width_policy:"min",height_policy:"fit"}),g.set_sizing({width_policy:"min",height_policy:"fit"}),this.layout.center_panel=h,this.layout.top_panel=f,this.layout.bottom_panel=p,this.layout.left_panel=m,this.layout.right_panel=g}get axis_views(){const e=[];for(var[,t]of this.renderer_views)t instanceof c.AxisView&&e.push(t);return e}set_toolbar_visibility(e){for(const t of this.visibility_callbacks)t(e)}update_range(e,t){this.pause(),this._range_manager.update(e,t),this.unpause()}reset_range(){this.update_range(null)}get_selection(){const e=new Map;for(const n of this.model.data_renderers){var{selected:t}=n.selection_manager.source;e.set(n,t)}return e}update_selection(e){for(const n of this.model.data_renderers){const r=n.selection_manager.source;var t;null!=e?null!=(t=e.get(n))&&r.selected.update(t,!0):r.selection_manager.clear()}}reset_selection(){this.update_selection(null)}_invalidate_layout(){(()=>{var e;for(const n of this.model.side_panels){var t=this.renderer_views.get(n);if(null!==(e=t.layout)&&void 0!==e&&e.has_size_changed())return this.invalidate_painters(t),!0}return!1})()&&this.root.compute_layout()}get_renderer_views(){return this.computed_renderers.map(e=>this.renderer_views.get(e))}*_compute_renderers(){const{above:e,below:t,left:n,right:r,center:i,renderers:a}=this.model;yield*a,yield*e,yield*t,yield*n,yield*r,yield*i,null!=this._title&&(yield this._title),null!=this._toolbar&&(yield this._toolbar);for(const e of this.model.toolbar.tools)null!=e.overlay&&(yield e.overlay),yield*e.synthetic_renderers}async build_renderer_views(){this.computed_renderers=[...this._compute_renderers()],await d.build_views(this.renderer_views,this.computed_renderers,{parent:this})}async build_tool_views(){var e=this.model.toolbar.tools;(await d.build_views(this.tool_views,e,{parent:this})).map(e=>this.canvas_view.ui_event_bus.register_tool(e))}connect_signals(){super.connect_signals();const{x_ranges:e,y_ranges:t}=this.frame;for(const[,t]of e)this.connect(t.change,()=>{this._needs_layout=!0,this.request_paint("everything")});for(const[,e]of t)this.connect(e.change,()=>{this._needs_layout=!0,this.request_paint("everything")});var{above:n,below:r,left:i,right:a,center:o,renderers:s}=this.model.properties;this.on_change([n,r,i,a,o,s],async()=>this.build_renderer_views()),this.connect(this.model.toolbar.properties.tools.change,async()=>{await this.build_renderer_views(),await this.build_tool_views()}),this.connect(this.model.change,()=>this.request_paint("everything")),this.connect(this.model.reset,()=>this.reset())}has_finished(){if(!super.has_finished())return!1;if(this.model.visible)for(var[,e]of this.renderer_views)if(!e.has_finished())return!1;return!0}after_layout(){var e;super.after_layout();for(const[,t]of this.renderer_views)t instanceof b.AnnotationView&&(null===(e=t.after_layout)||void 0===e||e.call(t));if(this._needs_layout=!1,this.model.setv({inner_width:Math.round(this.frame.bbox.width),inner_height:Math.round(this.frame.bbox.height),outer_width:Math.round(this.layout.bbox.width),outer_height:Math.round(this.layout.bbox.height)},{no_change:!0}),!1!==this.model.match_aspect&&(this.pause(),this._range_manager.update_dataranges(),this.unpause(!0)),!this._outer_bbox.equals(this.layout.bbox)){const{width:e,height:t}=this.layout.bbox;this.canvas_view.resize(e,t),this._outer_bbox=this.layout.bbox,this._invalidate_all=!0,this._needs_paint=!0}const{inner_bbox:t}=this.layout;this._inner_bbox.equals(t)||(this._inner_bbox=t,this._needs_paint=!0),this._needs_paint&&this.paint()}repaint(){this._needs_layout&&this._invalidate_layout(),this.paint()}paint(){var n;if(!this.is_paused&&this.model.visible){f.logger.trace(`PlotView.paint() for ${this.model.id}`);const{document:r}=this.model;if(null!=r){const n=r.interactive_duration();0<=n&&n<this.model.lod_interval?setTimeout(()=>{r.interactive_duration()>this.model.lod_timeout&&r.interactive_stop(),this.request_paint("everything")},this.model.lod_timeout):r.interactive_stop()}this._range_manager.invalidate_dataranges&&(this._range_manager.update_dataranges(),this._invalidate_layout());let e=!1,t=!1;if(this._invalidate_all)e=!0,t=!0;else for(const n of this._invalidated_painters){const{level:r}=n.model;if("overlay"!=r?e=!0:t=!0,e&&t)break}this._invalidated_painters.clear(),this._invalidate_all=!1;const i=[this.frame.bbox.left,this.frame.bbox.top,this.frame.bbox.width,this.frame.bbox.height],{primary:a,overlays:o}=this.canvas_view;e&&(a.prepare(),this.canvas_view.prepare_webgl(i),this._map_hook(a.ctx,i),this._paint_empty(a.ctx,i),this._paint_outline(a.ctx,i),this._paint_levels(a.ctx,"image",i,!0),this._paint_levels(a.ctx,"underlay",i,!0),this._paint_levels(a.ctx,"glyph",i,!0),this._paint_levels(a.ctx,"guide",i,!1),this._paint_levels(a.ctx,"annotation",i,!1),a.finish()),(t||v.settings.wireframe)&&(o.prepare(),this._paint_levels(o.ctx,"overlay",i,!1),v.settings.wireframe&&this._paint_layout(o.ctx,this.layout),o.finish()),null==this._initial_state.range&&(this._initial_state.range=null!==(n=this._range_manager.compute_initial())&&void 0!==n?n:void 0),this._needs_paint=!1}}_paint_levels(e,t,n,r){for(const i of this.computed_renderers)if(i.level==t){const a=this.renderer_views.get(i);e.save(),(r||a.needs_clip)&&(e.beginPath(),e.rect(...n),e.clip()),a.render(),e.restore(),a.has_webgl&&a.needs_webgl_blit&&this.canvas_view.blit_webgl(e)}}_paint_layout(e,t){const{x:n,y:r,width:i,height:a}=t.bbox;e.strokeStyle="blue",e.strokeRect(n,r,i,a);for(const i of t)e.save(),t.absolute||e.translate(n,r),this._paint_layout(e,i),e.restore()}_map_hook(e,t){}_paint_empty(e,t){var[n,r,i,a]=[0,0,this.layout.bbox.width,this.layout.bbox.height],[o,s,l,t]=t;this.visuals.border_fill.doit&&(this.visuals.border_fill.set_value(e),e.fillRect(n,r,i,a),e.clearRect(o,s,l,t)),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),e.fillRect(o,s,l,t))}_paint_outline(i,a){if(this.visuals.outline_line.doit){i.save(),this.visuals.outline_line.set_value(i);let[e,t,n,r]=a;e+n==this.layout.bbox.width&&--n,t+r==this.layout.bbox.height&&--r,i.strokeRect(e,t,n,r),i.restore()}}to_blob(){return this.canvas_view.to_blob()}export(e,t=!0){const n="png"==e?"canvas":"svg",r=new m.CanvasLayer(n,t),{width:i,height:a}=this.layout.bbox;r.resize(i,a);var{canvas:t}=this.canvas_view.compose();return r.ctx.drawImage(t,0,0),r}serializable_state(){var e=super.serializable_state(),{children:t}=e,n=a.__rest(e,["children"]),e=this.get_renderer_views().map(e=>e.serializable_state()).filter(e=>null!=e.bbox);return Object.assign(Object.assign({},n),{children:[...null!=t?t:[],...e]})}}(n.PlotView=C).__name__="PlotView"},function(e,t,n,r,i){r(),n.throttle=function(a,o){let s=null,l=0,c=!1;return function(){return new Promise((e,t)=>{const n=function(){l=Date.now(),s=null,c=!1;try{a(),e()}catch(e){t(e)}},r=Date.now(),i=o-(r-l);i<=0&&!c?(null!=s&&clearTimeout(s),c=!0,requestAnimationFrame(n)):s||c?e():s=setTimeout(()=>requestAnimationFrame(n),i)})}}},function(e,t,n,r,i){r();const l=e(159),c=e(19);class a{constructor(e){this.parent=e,this.invalidate_dataranges=!0}get frame(){return this.parent.frame}update(e,t){const{x_ranges:n,y_ranges:r}=this.frame;if(null==e){for(const[,e]of n)e.reset();for(const[,e]of r)e.reset();this.update_dataranges()}else{const i=[];for(const[t,r]of n)i.push([r,e.xrs.get(t)]);for(const[t,n]of r)i.push([n,e.yrs.get(t)]);null!=t&&t.scrolling&&this._update_ranges_together(i),this._update_ranges_individually(i,t)}}reset(){this.update(null)}update_dataranges(){const e=new Map,t=new Map;let n=!1;for(const[,e]of this.frame.x_ranges)e instanceof l.DataRange1d&&"log"==e.scale_hint&&(n=!0);for(const[,e]of this.frame.y_ranges)e instanceof l.DataRange1d&&"log"==e.scale_hint&&(n=!0);for(const r of this.parent.model.data_renderers){const i=this.parent.renderer_view(r);if(null!=i){const l=i.glyph_view.bounds();if(null!=l&&e.set(r,l),n){const e=i.glyph_view.log_bounds();null!=e&&t.set(r,e)}}}let r=!1,i=!1;var{width:a,height:o}=this.frame.bbox;let s;!1!==this.parent.model.match_aspect&&0!=a&&0!=o&&(s=1/this.parent.model.aspect_scale*(a/o));for(const[,n]of this.frame.x_ranges){if(n instanceof l.DataRange1d){const i="log"==n.scale_hint?t:e;n.update(i,0,this.parent.model,s),n.follow&&(r=!0)}null!=n.bounds&&(i=!0)}for(const[,n]of this.frame.y_ranges){if(n instanceof l.DataRange1d){const i="log"==n.scale_hint?t:e;n.update(i,1,this.parent.model,s),n.follow&&(r=!0)}null!=n.bounds&&(i=!0)}if(r&&i){c.logger.warn("Follow enabled so bounds are unset.");for(const[,e]of this.frame.x_ranges)e.bounds=null;for(const[,e]of this.frame.y_ranges)e.bounds=null}this.invalidate_dataranges=!1}compute_initial(){let e=!0;const{x_ranges:t,y_ranges:n}=this.frame,r=new Map,i=new Map;for(const[n,i]of t){const{start:t,end:a}=i;if(null==t||null==a||isNaN(t+a)){e=!1;break}r.set(n,{start:t,end:a})}if(e)for(const[t,r]of n){const{start:n,end:o}=r;if(null==n||null==o||isNaN(n+o)){e=!1;break}i.set(t,{start:n,end:o})}return e?{xrs:r,yrs:i}:(c.logger.warn("could not set initial ranges"),null)}_update_ranges_together(e){let t=1;for(var[n,r]of e)t=Math.min(t,this._get_weight_to_constrain_interval(n,r));if(t<1)for(var[i,a]of e)a.start=t*a.start+(1-t)*i.start,a.end=t*a.end+(1-t)*i.end}_update_ranges_individually(e,t){const n=!(null==t||!t.panning),r=!(null==t||!t.scrolling);let i=!1;for(const[t,a]of e){if(!r){const e=this._get_weight_to_constrain_interval(t,a);e<1&&(a.start=e*a.start+(1-e)*t.start,a.end=e*a.end+(1-e)*t.end)}if(null!=t.bounds&&"auto"!=t.bounds){const[e,o]=t.bounds,s=Math.abs(a.end-a.start);t.is_reversed?(null!=e&&e>=a.end&&(i=!0,a.end=e,(n||r)&&(a.start=e+s)),null!=o&&o<=a.start&&(i=!0,a.start=o,(n||r)&&(a.end=o-s))):(null!=e&&e>=a.start&&(i=!0,a.start=e,(n||r)&&(a.end=e+s)),null!=o&&o<=a.end&&(i=!0,a.end=o,(n||r)&&(a.start=o-s)))}}if(!(r&&i&&null!=t&&t.maintain_focus))for(const[t,n]of e)t.have_updated_interactively=!0,t.start==n.start&&t.end==n.end||t.setv(n)}_get_weight_to_constrain_interval(e,t){const{min_interval:n}=e;let{max_interval:r}=e;if(null!=e.bounds&&"auto"!=e.bounds){const[a,n]=e.bounds;if(null!=a&&null!=n){const o=Math.abs(n-a);r=null!=r?Math.min(r,o):o}}let i=1;return null==n&&null==r||(e=Math.abs(e.end-e.start),t=Math.abs(t.end-t.start),null!=n&&0<n&&t<n&&(i=(e-n)/(e-t)),null!=r&&0<r&&t>r&&(i=(r-e)/(t-e)),i=Math.max(0,Math.min(1,i))),i}}(n.RangeManager=a).__name__="RangeManager"},function(e,t,n,r,i){r();const a=e(15);class o{constructor(e,t){this.parent=e,this.initial_state=t,this.changed=new a.Signal0(this.parent,"state_changed"),this.history=[],this.index=-1}_do_state_change(e){e=null!=this.history[e]?this.history[e].state:this.initial_state;null!=e.range&&this.parent.update_range(e.range),null!=e.selection&&this.parent.update_selection(e.selection)}push(e,t){var{history:n,index:r}=this,r=null!=n[r]?n[r].state:{},t=Object.assign(Object.assign(Object.assign({},this.initial_state),r),t);this.history=this.history.slice(0,this.index+1),this.history.push({type:e,state:t}),this.index=this.history.length-1,this.changed.emit()}clear(){this.history=[],this.index=-1,this.changed.emit()}undo(){this.can_undo&&(--this.index,this._do_state_change(this.index),this.changed.emit())}redo(){this.can_redo&&(this.index+=1,this._do_state_change(this.index),this.changed.emit())}get can_undo(){return 0<=this.index}get can_redo(){return this.index<this.history.length-1}}(n.StateManager=o).__name__="StateManager"},function(e,t,n,r,i){r();const a=e(19),o=e(15),s=e(43),l=e(65),c=e(22),u=e(333),d=new o.Signal0({},"gmaps_ready");class h extends u.PlotView{initialize(){this.pause(),super.initialize(),this._tiles_loaded=!1,this.zoom_count=0;const{zoom:e,lat:t,lng:n}=this.model.map_options;if(this.initial_zoom=e,this.initial_lat=t,this.initial_lng=n,!this.model.api_key){const e="https://developers.google.com/maps/documentation/javascript/get-api-key";a.logger.error("api_key is required. See https://developers.google.com/maps/documentation/javascript/get-api-key for more information on how to obtain your own.")}if("undefined"==typeof google||null==google.maps){if(void 0===window._bokeh_gmaps_callback){const{api_key:e,api_version:t}=this.model;!function(e,t){window._bokeh_gmaps_callback=()=>d.emit();const n=encodeURIComponent,r=document.createElement("script");r.type="text/javascript",r.src=`https://maps.googleapis.com/maps/api/js?v=${n(t)}&key=${n(e)}&callback=_bokeh_gmaps_callback`,document.body.appendChild(r)}(e,t)}d.connect(()=>this.request_paint("everything"))}this.unpause()}remove(){s.remove(this.map_el),super.remove()}update_range(e,t){var n;if(null==e)this.map.setCenter({lat:this.initial_lat,lng:this.initial_lng}),this.map.setOptions({zoom:this.initial_zoom}),super.update_range(null,t);else if(null!=e.sdx||null!=e.sdy)this.map.panBy(null!==(n=e.sdx)&&void 0!==n?n:0,null!==(n=e.sdy)&&void 0!==n?n:0),super.update_range(e,t);else if(null!=e.factor){if(10!==this.zoom_count)return void(this.zoom_count+=1);this.zoom_count=0,this.pause(),super.update_range(e,t);const r=e.factor<0?-1:1,n=this.map.getZoom(),i=n+r;if(2<=i){this.map.setZoom(i);const[e,t]=this._get_projected_bounds();t-e<0&&this.map.setZoom(n)}this.unpause()}this._set_bokeh_ranges()}_build_map(){const{maps:e}=google;this.map_types={satellite:e.MapTypeId.SATELLITE,terrain:e.MapTypeId.TERRAIN,roadmap:e.MapTypeId.ROADMAP,hybrid:e.MapTypeId.HYBRID};const t=this.model.map_options,n={center:new e.LatLng(t.lat,t.lng),zoom:t.zoom,disableDefaultUI:!0,mapTypeId:this.map_types[t.map_type],scaleControl:t.scale_control,tilt:t.tilt};null!=t.styles&&(n.styles=JSON.parse(t.styles)),this.map_el=s.div({style:{position:"absolute"}}),this.canvas_view.add_underlay(this.map_el),this.map=new e.Map(this.map_el,n),e.event.addListener(this.map,"idle",()=>this._set_bokeh_ranges()),e.event.addListener(this.map,"bounds_changed",()=>this._set_bokeh_ranges()),e.event.addListenerOnce(this.map,"tilesloaded",()=>this._render_finished()),this.connect(this.model.properties.map_options.change,()=>this._update_options()),this.connect(this.model.map_options.properties.styles.change,()=>this._update_styles()),this.connect(this.model.map_options.properties.lat.change,()=>this._update_center("lat")),this.connect(this.model.map_options.properties.lng.change,()=>this._update_center("lng")),this.connect(this.model.map_options.properties.zoom.change,()=>this._update_zoom()),this.connect(this.model.map_options.properties.map_type.change,()=>this._update_map_type()),this.connect(this.model.map_options.properties.scale_control.change,()=>this._update_scale_control()),this.connect(this.model.map_options.properties.tilt.change,()=>this._update_tilt())}_render_finished(){this._tiles_loaded=!0,this.notify_finished()}has_finished(){return super.has_finished()&&!0===this._tiles_loaded}_get_latlon_bounds(){const e=this.map.getBounds(),t=e.getNorthEast(),n=e.getSouthWest();return[n.lng(),t.lng(),n.lat(),t.lat()]}_get_projected_bounds(){var[e,t,n,r]=this._get_latlon_bounds(),[e,n]=l.wgs84_mercator.compute(e,n),[t,r]=l.wgs84_mercator.compute(t,r);return[e,t,n,r]}_set_bokeh_ranges(){var[e,t,n,r]=this._get_projected_bounds();this.frame.x_range.setv({start:e,end:t}),this.frame.y_range.setv({start:n,end:r})}_update_center(e){const t=this.map.getCenter().toJSON();t[e]=this.model.map_options[e],this.map.setCenter(t),this._set_bokeh_ranges()}_update_map_type(){this.map.setOptions({mapTypeId:this.map_types[this.model.map_options.map_type]})}_update_scale_control(){this.map.setOptions({scaleControl:this.model.map_options.scale_control})}_update_tilt(){this.map.setOptions({tilt:this.model.map_options.tilt})}_update_options(){this._update_styles(),this._update_center("lat"),this._update_center("lng"),this._update_zoom(),this._update_map_type()}_update_styles(){this.map.setOptions({styles:JSON.parse(this.model.map_options.styles)})}_update_zoom(){this.map.setOptions({zoom:this.model.map_options.zoom}),this._set_bokeh_ranges()}_map_hook(e,t){if(null==this.map&&"undefined"!=typeof google&&null!=google.maps&&this._build_map(),null!=this.map_el){const[e,n,r,i]=t;this.map_el.style.top=`${n}px`,this.map_el.style.left=`${e}px`,this.map_el.style.width=`${r}px`,this.map_el.style.height=`${i}px`}}_paint_empty(e,t){var n=this.layout.bbox.width,r=this.layout.bbox.height,[i,a,o,t]=t;e.clearRect(0,0,n,r),e.beginPath(),e.moveTo(0,0),e.lineTo(0,r),e.lineTo(n,r),e.lineTo(n,0),e.lineTo(0,0),e.moveTo(i,a),e.lineTo(i+o,a),e.lineTo(i+o,a+t),e.lineTo(i,a+t),e.lineTo(i,a),e.closePath(),null!=this.model.border_fill_color&&(e.fillStyle=c.color2css(this.model.border_fill_color),e.fill())}}(n.GMapPlotView=h).__name__="GMapPlotView"},function(e,t,n,r,i){r(),e(1).__exportStar(e(169),n)},function(e,t,n,r,i){r(),i("GlyphRenderer",e(61).GlyphRenderer),i("GraphRenderer",e(123).GraphRenderer),i("GuideRenderer",e(164).GuideRenderer),i("Renderer",e(41).Renderer)},function(e,t,n,r,i){r(),e(1).__exportStar(e(129),n),i("Selection",e(59).Selection)},function(e,t,n,r,i){r(),i("ServerSentDataSource",e(342).ServerSentDataSource),i("AjaxDataSource",e(344).AjaxDataSource),i("ColumnDataSource",e(130).ColumnDataSource),i("ColumnarDataSource",e(57).ColumnarDataSource),i("CDSView",e(120).CDSView),i("DataSource",e(58).DataSource),i("GeoJSONDataSource",e(345).GeoJSONDataSource),i("WebDataSource",e(343).WebDataSource)},function(e,t,n,r,i){r();e=e(343);class a extends e.WebDataSource{constructor(e){super(e),this.initialized=!1}setup(){this.initialized||(this.initialized=!0,new EventSource(this.data_url).onmessage=e=>{this.load_data(JSON.parse(e.data),this.mode,null!==(e=this.max_size)&&void 0!==e?e:void 0)})}}(n.ServerSentDataSource=a).__name__="ServerSentDataSource"},function(e,t,n,r,i){r();const a=e(130),o=e(20);class s extends a.ColumnDataSource{constructor(e){super(e)}get_column(e){e=this.data[e];return null!=e?e:[]}get_length(){var e;return null!==(e=super.get_length())&&void 0!==e?e:0}initialize(){super.initialize(),this.setup()}load_data(e,t,n){const{adapter:r}=this;let i;switch(i=null!=r?r.execute(this,{response:e}):e,t){case"replace":this.data=i;break;case"append":{const e=this.data;for(const t of this.columns()){const r=Array.from(e[t]),a=Array.from(i[t]),o=r.concat(a);i[t]=null!=n?o.slice(-n):o}this.data=i;break}}}static init_WebDataSource(){this.define(({Any:e,Int:t,String:n,Nullable:r})=>({max_size:[r(t),null],mode:[o.UpdateMode,"replace"],adapter:[r(e),null],data_url:[n]}))}}(n.WebDataSource=s).__name__="WebDataSource",s.init_WebDataSource()},function(e,t,n,r,i){r();const a=e(343),o=e(20),s=e(19),l=e(13);class c extends a.WebDataSource{constructor(e){super(e),this.interval=null,this.initialized=!1}static init_AjaxDataSource(){this.define(({Boolean:e,Int:t,String:n,Dict:r,Nullable:i})=>({polling_interval:[i(t),null],content_type:[n,"application/json"],http_headers:[r(n),{}],method:[o.HTTPMethod,"POST"],if_modified:[e,!1]}))}destroy(){null!=this.interval&&clearInterval(this.interval),super.destroy()}setup(){this.initialized||(this.initialized=!0,this.get_data(this.mode),null==this.polling_interval)||(this.interval=setInterval(()=>this.get_data(this.mode,this.max_size,this.if_modified),this.polling_interval))}get_data(e,t=null,n){const r=this.prepare_request();r.addEventListener("load",()=>this.do_load(r,e,null!=t?t:void 0)),r.addEventListener("error",()=>this.do_error(r)),r.send()}prepare_request(){const e=new XMLHttpRequest;e.open(this.method,this.data_url,!0),e.withCredentials=!1,e.setRequestHeader("Content-Type",this.content_type);var t,n,r=this.http_headers;for([t,n]of l.entries(r))e.setRequestHeader(t,n);return e}do_load(e,t,n){200===e.status&&(e=JSON.parse(e.responseText),this.load_data(e,t,n))}do_error(e){s.logger.error(`Failed to fetch JSON from ${this.data_url} with code ${e.status}`)}}(n.AjaxDataSource=c).__name__="AjaxDataSource",c.init_AjaxDataSource()},function(e,t,n,r,i){r();const a=e(57),m=e(19),o=e(9),s=e(13);function g(e){return null!=e?e:NaN}const{hasOwnProperty:l}=Object.prototype;class c extends a.ColumnarDataSource{constructor(e){super(e)}static init_GeoJSONDataSource(){this.define(({String:e})=>({geojson:[e]})),this.internal(({Dict:e,Arrayable:t})=>({data:[e(t),{}]}))}initialize(){super.initialize(),this._update_data()}connect_signals(){super.connect_signals(),this.connect(this.properties.geojson.change,()=>this._update_data())}_update_data(){this.data=this.geojson_to_column_data()}_get_new_list_array(e){return o.range(0,e).map(e=>[])}_get_new_nan_array(e){return o.range(0,e).map(e=>NaN)}_add_properties(e,t,n,r){e=null!==(e=e.properties)&&void 0!==e?e:{};for(const[i,a]of s.entries(e))l.call(t,i)||(t[i]=this._get_new_nan_array(r)),t[i][n]=g(a)}_add_geometry(e,t,n){function r(e,t){return e.concat([[NaN,NaN,NaN]]).concat(t)}switch(e.type){case"Point":{const[r,o,s]=e.coordinates;t.x[n]=r,t.y[n]=o,t.z[n]=g(s);break}case"LineString":{const{coordinates:r}=e;for(let e=0;e<r.length;e++){const[l,c,m]=r[e];t.xs[n][e]=l,t.ys[n][e]=c,t.zs[n][e]=g(m)}break}case"Polygon":{1<e.coordinates.length&&m.logger.warn("Bokeh does not support Polygons with holes in, only exterior ring used.");const r=e.coordinates[0];for(let e=0;e<r.length;e++){const[u,d,m]=r[e];t.xs[n][e]=u,t.ys[n][e]=d,t.zs[n][e]=g(m)}break}case"MultiPoint":m.logger.warn("MultiPoint not supported in Bokeh");break;case"MultiLineString":var i=e.coordinates.reduce(r);for(let e=0;e<i.length;e++){const[r,h,m]=i[e];t.xs[n][e]=r,t.ys[n][e]=h,t.zs[n][e]=g(m)}break;case"MultiPolygon":{const f=[];for(const t of e.coordinates)1<t.length&&m.logger.warn("Bokeh does not support Polygons with holes in, only exterior ring used."),f.push(t[0]);var a=f.reduce(r);for(let e=0;e<a.length;e++){const[r,p,m]=a[e];t.xs[n][e]=r,t.ys[n][e]=p,t.zs[n][e]=g(m)}break}default:throw new Error(`Invalid GeoJSON geometry type: ${e.type}`)}}geojson_to_column_data(){const e=JSON.parse(this.geojson);let t;switch(e.type){case"GeometryCollection":if(null==e.geometries)throw new Error("No geometries found in GeometryCollection");if(0===e.geometries.length)throw new Error("geojson.geometries must have one or more items");t=e.geometries;break;case"FeatureCollection":if(null==e.features)throw new Error("No features found in FeaturesCollection");if(0==e.features.length)throw new Error("geojson.features must have one or more items");t=e.features;break;default:throw new Error("Bokeh only supports type GeometryCollection and FeatureCollection at top level")}let n=0;for(const e of t){const t="Feature"===e.type?e.geometry:e;"GeometryCollection"==t.type?n+=t.geometries.length:n+=1}var r={x:this._get_new_nan_array(n),y:this._get_new_nan_array(n),z:this._get_new_nan_array(n),xs:this._get_new_list_array(n),ys:this._get_new_list_array(n),zs:this._get_new_list_array(n)};let i=0;for(const e of t){const t="Feature"==e.type?e.geometry:e;if("GeometryCollection"==t.type)for(const a of t.geometries)this._add_geometry(a,r,i),"Feature"===e.type&&this._add_properties(e,r,i,n),i+=1;else this._add_geometry(t,r,i),"Feature"===e.type&&this._add_properties(e,r,i,n),i+=1}return r}}(n.GeoJSONDataSource=c).__name__="GeoJSONDataSource",c.init_GeoJSONDataSource()},function(e,t,n,r,i){r(),i("BBoxTileSource",e(347).BBoxTileSource),i("MercatorTileSource",e(348).MercatorTileSource),i("QUADKEYTileSource",e(351).QUADKEYTileSource),i("TileRenderer",e(352).TileRenderer),i("TileSource",e(349).TileSource),i("TMSTileSource",e(355).TMSTileSource),i("WMTSTileSource",e(353).WMTSTileSource)},function(e,t,n,r,i){r();e=e(348);class a extends e.MercatorTileSource{constructor(e){super(e)}static init_BBoxTileSource(){this.define(({Boolean:e})=>({use_latlon:[e,!1]}))}get_image_url(e,t,n){const r=this.string_lookup_replace(this.url,this.extra_url_vars);let i,a,o,s;return this.use_latlon?[a,s,i,o]=this.get_tile_geographic_bounds(e,t,n):[a,s,i,o]=this.get_tile_meter_bounds(e,t,n),r.replace("{XMIN}",a.toString()).replace("{YMIN}",s.toString()).replace("{XMAX}",i.toString()).replace("{YMAX}",o.toString())}}(n.BBoxTileSource=a).__name__="BBoxTileSource",a.init_BBoxTileSource()},function(e,t,n,r,i){r();const a=e(349),o=e(9),s=e(350);class l extends a.TileSource{constructor(e){super(e)}static init_MercatorTileSource(){this.define(({Boolean:e})=>({snap_to_zoom:[e,!1],wrap_around:[e,!0]})),this.override({x_origin_offset:20037508.34,y_origin_offset:20037508.34,initial_resolution:156543.03392804097})}initialize(){super.initialize(),this._resolutions=o.range(this.min_zoom,this.max_zoom+1).map(e=>this.get_resolution(e))}_computed_initial_resolution(){return null!=this.initial_resolution?this.initial_resolution:2*Math.PI*6378137/this.tile_size}is_valid_tile(e,t,n){return!(!this.wrap_around&&(e<0||2**n<=e)||t<0||2**n<=t)}parent_by_tile_xyz(e,t,n){const r=this.tile_xyz_to_quadkey(e,t,n),i=r.substring(0,r.length-1);return this.quadkey_to_tile_xyz(i)}get_resolution(e){return this._computed_initial_resolution()/2**e}get_resolution_by_extent(e,t,n){return[(e[2]-e[0])/n,(e[3]-e[1])/t]}get_level_by_extent(e,t,n){var n=(e[2]-e[0])/n,t=(e[3]-e[1])/t,r=Math.max(n,t);let i=0;for(const e of this._resolutions){if(r>e){if(0==i)return 0;if(0<i)return i-1}i+=1}return i-1}get_closest_level_by_extent(e,t,n){const r=(e[2]-e[0])/n,i=(e[3]-e[1])/t,a=Math.max(r,i),o=this._resolutions.reduce(function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e});return this._resolutions.indexOf(o)}snap_to_zoom_level(e,t,n,r){var[i,a,o,e]=e,r=this._resolutions[r];let s=n*r,l=t*r;if(!this.snap_to_zoom){const c=(o-i)/s,u=(e-a)/l;c>u?(s=o-i,l*=c):(s*=u,l=e-a)}t=(s-(o-i))/2,r=(l-(e-a))/2;return[i-t,a-r,o+t,e+r]}tms_to_wmts(e,t,n){return[e,2**n-1-t,n]}wmts_to_tms(e,t,n){return[e,2**n-1-t,n]}pixels_to_meters(e,t,n){n=this.get_resolution(n);return[e*n-this.x_origin_offset,t*n-this.y_origin_offset]}meters_to_pixels(e,t,n){n=this.get_resolution(n);return[(e+this.x_origin_offset)/n,(t+this.y_origin_offset)/n]}pixels_to_tile(e,t){let n=Math.ceil(e/this.tile_size);return n=0===n?n:n-1,[n,Math.max(Math.ceil(t/this.tile_size)-1,0)]}pixels_to_raster(e,t,n){return[e,(this.tile_size<<n)-t]}meters_to_tile(e,t,n){var[t,n]=this.meters_to_pixels(e,t,n);return this.pixels_to_tile(t,n)}get_tile_meter_bounds(e,t,n){var[r,i]=this.pixels_to_meters(e*this.tile_size,t*this.tile_size,n),[t,n]=this.pixels_to_meters((e+1)*this.tile_size,(t+1)*this.tile_size,n);return[r,i,t,n]}get_tile_geographic_bounds(e,t,n){var r=this.get_tile_meter_bounds(e,t,n),[e,t,n,r]=s.meters_extent_to_geographic(r);return[e,t,n,r]}get_tiles_by_extent(e,n,r=1){var[t,i,a,e]=e,[o,s]=this.meters_to_tile(t,i,n),[l,e]=this.meters_to_tile(a,e,n);o-=r,s-=r,l+=r;const c=[];for(let t=e+=r;t>=s;t--)for(let e=o;e<=l;e++)this.is_valid_tile(e,t,n)&&c.push([e,t,n,this.get_tile_meter_bounds(e,t,n)]);return this.sort_tiles_from_center(c,[o,s,l,e]),c}quadkey_to_tile_xyz(t){let n=0,r=0;var i=t.length;for(let e=i;0<e;e--){var a=1<<e-1;switch(t.charAt(i-e)){case"0":continue;case"1":n|=a;break;case"2":r|=a;break;case"3":n|=a,r|=a;break;default:throw new TypeError(`Invalid Quadkey: ${t}`)}}return[n,r,i]}tile_xyz_to_quadkey(n,r,i){let a="";for(let t=i;0<t;t--){const i=1<<t-1;let e=0;0!=(n&i)&&(e+=1),0!=(r&i)&&(e+=2),a+=e.toString()}return a}children_by_tile_xyz(e,t,n){const r=this.tile_xyz_to_quadkey(e,t,n),i=[];for(let e=0;e<=3;e++){const[t,n,a]=this.quadkey_to_tile_xyz(r+e.toString()),o=this.get_tile_meter_bounds(t,n,a);i.push([t,n,a,o])}return i}get_closest_parent_by_tile_xyz(e,t,n){var r=this.calculate_world_x_by_tile_xyz(e,t,n);[e,t,n]=this.normalize_xyz(e,t,n);let i=this.tile_xyz_to_quadkey(e,t,n);for(;0<i.length;)if(i=i.substring(0,i.length-1),[e,t,n]=this.quadkey_to_tile_xyz(i),[e,t,n]=this.denormalize_xyz(e,t,n,r),this.tiles.has(this.tile_xyz_to_key(e,t,n)))return[e,t,n];return[0,0,0]}normalize_xyz(e,t,n){if(this.wrap_around){var r=2**n;return[(e%r+r)%r,t,n]}return[e,t,n]}denormalize_xyz(e,t,n,r){return[e+r*2**n,t,n]}denormalize_meters(e,t,n,r){return[e+2*r*Math.PI*6378137,t]}calculate_world_x_by_tile_xyz(e,t,n){return Math.floor(e/2**n)}}(n.MercatorTileSource=l).__name__="MercatorTileSource",l.init_MercatorTileSource()},function(e,t,n,r,i){r();const a=e(53),o=e(13);class s extends a.Model{constructor(e){super(e)}static init_TileSource(){this.define(({Number:e,String:t,Dict:n,Nullable:r})=>({url:[t,""],tile_size:[e,256],max_zoom:[e,30],min_zoom:[e,0],extra_url_vars:[n(t),{}],attribution:[t,""],x_origin_offset:[e],y_origin_offset:[e],initial_resolution:[r(e),null]}))}initialize(){super.initialize(),this.tiles=new Map,this._normalize_case()}connect_signals(){super.connect_signals(),this.connect(this.change,()=>this._clear_cache())}string_lookup_replace(e,t){let n=e;for(const[e,r]of o.entries(t))n=n.replace(`{${e}}`,r);return n}_normalize_case(){var e=this.url.replace("{x}","{X}").replace("{y}","{Y}").replace("{z}","{Z}").replace("{q}","{Q}").replace("{xmin}","{XMIN}").replace("{ymin}","{YMIN}").replace("{xmax}","{XMAX}").replace("{ymax}","{YMAX}");this.url=e}_clear_cache(){this.tiles=new Map}tile_xyz_to_key(e,t,n){return`${e}:${t}:${n}`}key_to_tile_xyz(e){var[t,n,e]=e.split(":").map(e=>parseInt(e));return[t,n,e]}sort_tiles_from_center(e,t){const[n,r,i,a]=t,o=(i-n)/2+n,s=(a-r)/2+r;e.sort(function(e,t){return Math.sqrt((o-e[0])**2+(s-e[1])**2)-Math.sqrt((o-t[0])**2+(s-t[1])**2)})}get_image_url(e,t,n){return this.string_lookup_replace(this.url,this.extra_url_vars).replace("{X}",e.toString()).replace("{Y}",t.toString()).replace("{Z}",n.toString())}}(n.TileSource=s).__name__="TileSource",s.init_TileSource()},function(e,t,n,r,i){r();const a=e(65);function o(e,t){return a.wgs84_mercator.compute(e,t)}function s(e,t){return a.wgs84_mercator.invert(e,t)}n.geographic_to_meters=o,n.meters_to_geographic=s,n.geographic_extent_to_meters=function(e){var[t,n,r,e]=e,[t,n]=o(t,n),[r,e]=o(r,e);return[t,n,r,e]},n.meters_extent_to_geographic=function(e){var[t,n,r,e]=e,[t,n]=s(t,n),[r,e]=s(r,e);return[t,n,r,e]}},function(e,t,n,r,i){r();e=e(348);class a extends e.MercatorTileSource{constructor(e){super(e)}get_image_url(e,t,n){const r=this.string_lookup_replace(this.url,this.extra_url_vars),[i,a,o]=this.tms_to_wmts(e,t,n),s=this.tile_xyz_to_quadkey(i,a,o);return r.replace("{Q}",s)}}(n.QUADKEYTileSource=a).__name__="QUADKEYTileSource"},function(e,t,n,r,i){r();const a=e(1),o=e(349),s=e(353),l=e(41),c=e(156),u=e(43),d=e(296),p=e(9),h=e(8),f=a.__importStar(e(354));class m extends l.RendererView{initialize(){this._tiles=[],super.initialize()}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render()),this.connect(this.model.tile_source.change,()=>this.request_render())}styles(){return[...super.styles(),f.default]}get_extent(){return[this.x_range.start,this.y_range.start,this.x_range.end,this.y_range.end]}get map_plot(){return this.plot_model}get map_canvas(){return this.layer.ctx}get map_frame(){return this.plot_view.frame}get x_range(){return this.map_plot.x_range}get y_range(){return this.map_plot.y_range}_set_data(){this.extent=this.get_extent(),this._last_height=void 0,this._last_width=void 0}_update_attribution(){null!=this.attribution_el&&u.removeElement(this.attribution_el);var e,t,n,{attribution:r}=this.model.tile_source;h.isString(r)&&0<r.length&&({layout:t,frame:n}=this.plot_view,e=t.bbox.width-n.bbox.right,t=t.bbox.height-n.bbox.bottom,n=n.bbox.width,this.attribution_el=u.div({class:f.tile_attribution,style:{position:"absolute",right:`${e}px`,bottom:`${t}px`,"max-width":n-4+"px",padding:"2px","background-color":"rgba(255,255,255,0.5)","font-size":"9px","line-height":"1.05","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}),this.plot_view.canvas_view.add_event(this.attribution_el),this.attribution_el.innerHTML=r,this.attribution_el.title=this.attribution_el.textContent.replace(/\s*\n\s*/g," "))}_map_data(){this.initial_extent=this.get_extent();var e=this.model.tile_source.get_level_by_extent(this.initial_extent,this.map_frame.bbox.height,this.map_frame.bbox.width),e=this.model.tile_source.snap_to_zoom_level(this.initial_extent,this.map_frame.bbox.height,this.map_frame.bbox.width,e);this.x_range.start=e[0],this.y_range.start=e[1],this.x_range.end=e[2],this.y_range.end=e[3],this.x_range instanceof c.Range1d&&(this.x_range.reset_start=e[0],this.x_range.reset_end=e[2]),this.y_range instanceof c.Range1d&&(this.y_range.reset_start=e[1],this.y_range.reset_end=e[3]),this._update_attribution()}_create_tile(e,t,n,r,i=!1){const[a,o,s]=this.model.tile_source.normalize_xyz(e,t,n),l={img:void 0,tile_coords:[e,t,n],normalized_coords:[a,o,s],quadkey:this.model.tile_source.tile_xyz_to_quadkey(e,t,n),cache_key:this.model.tile_source.tile_xyz_to_key(e,t,n),bounds:r,loaded:!1,finished:!1,x_coord:r[0],y_coord:r[3]},c=this.model.tile_source.get_image_url(a,o,s);new d.ImageLoader(c,{loaded:e=>{Object.assign(l,{img:e,loaded:!0}),i?(l.finished=!0,this.notify_finished()):this.request_render()},failed(){l.finished=!0}}),this.model.tile_source.tiles.set(l.cache_key,l),this._tiles.push(l)}_enforce_aspect_ratio(){var e,t;this._last_height===this.map_frame.bbox.height&&this._last_width===this.map_frame.bbox.width||(e=this.get_extent(),t=this.model.tile_source.get_level_by_extent(e,this.map_frame.bbox.height,this.map_frame.bbox.width),t=this.model.tile_source.snap_to_zoom_level(e,this.map_frame.bbox.height,this.map_frame.bbox.width,t),this.x_range.setv({start:t[0],end:t[2]}),this.y_range.setv({start:t[1],end:t[3]}),this.extent=t,this._last_height=this.map_frame.bbox.height,this._last_width=this.map_frame.bbox.width)}has_finished(){if(!super.has_finished())return!1;if(0===this._tiles.length)return!1;for(const e of this._tiles)if(!e.finished)return!1;return!0}_render(){null==this.map_initialized&&(this._set_data(),this._map_data(),this.map_initialized=!0),this._enforce_aspect_ratio(),this._update(),null!=this.prefetch_timer&&clearTimeout(this.prefetch_timer),this.prefetch_timer=setTimeout(this._prefetch_tiles.bind(this),500),this.has_finished()&&this.notify_finished()}_draw_tile(e){const t=this.model.tile_source.tiles.get(e);if(null!=t&&t.loaded){const[[e],[n]]=this.coordinates.map_to_screen([t.bounds[0]],[t.bounds[3]]),[[r],[i]]=this.coordinates.map_to_screen([t.bounds[2]],[t.bounds[1]]),a=r-e,o=i-n,s=e,l=n,c=this.map_canvas.getImageSmoothingEnabled();this.map_canvas.setImageSmoothingEnabled(this.model.smoothing),this.map_canvas.drawImage(t.img,s,l,a,o),this.map_canvas.setImageSmoothingEnabled(c),t.finished=!0}}_set_rect(){var e=this.plot_model.outline_line_width,t=this.map_frame.bbox.left+e/2,n=this.map_frame.bbox.top+e/2,r=this.map_frame.bbox.width-e,e=this.map_frame.bbox.height-e;this.map_canvas.rect(t,n,r,e),this.map_canvas.clip()}_render_tiles(e){this.map_canvas.save(),this._set_rect(),this.map_canvas.globalAlpha=this.model.alpha;for(const t of e)this._draw_tile(t);this.map_canvas.restore()}_prefetch_tiles(){const{tile_source:n}=this.model,r=this.get_extent(),i=this.map_frame.bbox.height,a=this.map_frame.bbox.width,o=this.model.tile_source.get_level_by_extent(r,i,a),s=this.model.tile_source.get_tiles_by_extent(r,o);for(let e=0,t=Math.min(10,s.length);e<t;e++){const[i,a,o]=s[e],l=this.model.tile_source.children_by_tile_xyz(i,a,o);for(const r of l){const[i,a,o,s]=r;n.tiles.has(n.tile_xyz_to_key(i,a,o))||this._create_tile(i,a,o,s,!0)}}}_fetch_tiles(e){for(const t of e){const[e,n,r,i]=t;this._create_tile(e,n,r,i)}}_update(){const{tile_source:e}=this.model,{min_zoom:t}=e,{max_zoom:n}=e;let r=this.get_extent();const i=this.extent[2]-this.extent[0]<r[2]-r[0],a=this.map_frame.bbox.height,o=this.map_frame.bbox.width;let s=e.get_level_by_extent(r,a,o),l=!1;s<t?(r=this.extent,s=t,l=!0):s>n&&(r=this.extent,s=n,l=!0),l&&(this.x_range.setv({start:r[0],end:r[2]}),this.y_range.setv({start:r[1],end:r[3]})),this.extent=r;const c=e.get_tiles_by_extent(r,s),u=[],d=[],h=[],f=[];for(const t of c){const[n,r,a]=t,o=e.tile_xyz_to_key(n,r,a),s=e.tiles.get(o);if(null!=s&&s.loaded)d.push(o);else if(this.model.render_parents){const[t,o,s]=e.get_closest_parent_by_tile_xyz(n,r,a),l=e.tile_xyz_to_key(t,o,s),c=e.tiles.get(l);if(null!=c&&c.loaded&&!p.includes(h,l)&&h.push(l),i){const t=e.children_by_tile_xyz(n,r,a);for(const[n,r,i]of t){const t=e.tile_xyz_to_key(n,r,i);e.tiles.has(t)&&f.push(t)}}}null==s&&u.push(t)}this._render_tiles(h),this._render_tiles(f),this._render_tiles(d),null!=this.render_timer&&clearTimeout(this.render_timer),this.render_timer=setTimeout(()=>this._fetch_tiles(u),65)}}(n.TileRendererView=m).__name__="TileRendererView";class g extends l.Renderer{constructor(e){super(e)}static init_TileRenderer(){this.prototype.default_view=m,this.define(({Boolean:e,Number:t,Ref:n})=>({alpha:[t,1],smoothing:[e,!0],tile_source:[n(o.TileSource),()=>new s.WMTSTileSource],render_parents:[e,!0]})),this.override({level:"image"})}}(n.TileRenderer=g).__name__="TileRenderer",g.init_TileRenderer()},function(e,t,n,r,i){r();e=e(348);class a extends e.MercatorTileSource{constructor(e){super(e)}get_image_url(e,t,n){const r=this.string_lookup_replace(this.url,this.extra_url_vars),[i,a,o]=this.tms_to_wmts(e,t,n);return r.replace("{X}",i.toString()).replace("{Y}",a.toString()).replace("{Z}",o.toString())}}(n.WMTSTileSource=a).__name__="WMTSTileSource"},function(e,t,n,r,i){r(),n.root="bk-root",n.tile_attribution="bk-tile-attribution",n.default=".bk-root .bk-tile-attribution a{color:black;}"},function(e,t,n,r,i){r();e=e(348);class a extends e.MercatorTileSource{constructor(e){super(e)}get_image_url(e,t,n){return this.string_lookup_replace(this.url,this.extra_url_vars).replace("{X}",e.toString()).replace("{Y}",t.toString()).replace("{Z}",n.toString())}}(n.TMSTileSource=a).__name__="TMSTileSource"},function(e,t,n,r,i){r(),i("CanvasTexture",e(357).CanvasTexture),i("ImageURLTexture",e(359).ImageURLTexture),i("Texture",e(358).Texture)},function(e,t,n,r,i){r();const a=e(358),o=e(34);class s extends a.Texture{constructor(e){super(e)}static init_CanvasTexture(){this.define(({String:e})=>({code:[e]}))}get func(){var e=o.use_strict(this.code);return new Function("ctx","color","scale","weight",e)}get_pattern(e,t,n){const r=document.createElement("canvas");r.width=t,r.height=t;var i=r.getContext("2d");return this.func.call(this,i,e,t,n),r}}(n.CanvasTexture=s).__name__="CanvasTexture",s.init_CanvasTexture()},function(e,t,n,r,i){r();const a=e(53),o=e(20);class s extends a.Model{constructor(e){super(e)}static init_Texture(){this.define(()=>({repetition:[o.TextureRepetition,"repeat"]}))}}(n.Texture=s).__name__="Texture",s.init_Texture()},function(e,t,n,r,i){r();const a=e(358),o=e(296);class s extends a.Texture{constructor(e){super(e)}static init_ImageURLTexture(){this.define(({String:e})=>({url:[e]}))}initialize(){super.initialize(),this._loader=new o.ImageLoader(this.url)}get_pattern(e,t,n){var{_loader:r}=this;return this._loader.finished?r.image:r.promise}}(n.ImageURLTexture=s).__name__="ImageURLTexture",s.init_ImageURLTexture()},function(e,t,n,r,i){r(),i("ActionTool",e(251).ActionTool),i("CustomAction",e(361).CustomAction),i("HelpTool",e(252).HelpTool),i("RedoTool",e(362).RedoTool),i("ResetTool",e(363).ResetTool),i("SaveTool",e(364).SaveTool),i("UndoTool",e(365).UndoTool),i("ZoomInTool",e(366).ZoomInTool),i("ZoomOutTool",e(369).ZoomOutTool),i("ButtonTool",e(238).ButtonTool),i("EditTool",e(370).EditTool),i("BoxEditTool",e(371).BoxEditTool),i("FreehandDrawTool",e(372).FreehandDrawTool),i("PointDrawTool",e(373).PointDrawTool),i("PolyDrawTool",e(374).PolyDrawTool),i("PolyTool",e(375).PolyTool),i("PolyEditTool",e(376).PolyEditTool),i("BoxSelectTool",e(377).BoxSelectTool),i("BoxZoomTool",e(379).BoxZoomTool),i("GestureTool",e(237).GestureTool),i("LassoSelectTool",e(380).LassoSelectTool),i("LineEditTool",e(382).LineEditTool),i("PanTool",e(384).PanTool),i("PolySelectTool",e(381).PolySelectTool),i("RangeTool",e(385).RangeTool),i("SelectTool",e(378).SelectTool),i("TapTool",e(386).TapTool),i("WheelPanTool",e(387).WheelPanTool),i("WheelZoomTool",e(388).WheelZoomTool),i("CrosshairTool",e(389).CrosshairTool),i("CustomJSHover",e(390).CustomJSHover),i("HoverTool",e(391).HoverTool),i("InspectTool",e(247).InspectTool),i("Tool",e(236).Tool),i("ToolProxy",e(392).ToolProxy),i("Toolbar",e(235).Toolbar),i("ToolbarBase",e(248).ToolbarBase),i("ProxyToolbar",e(393).ProxyToolbar),i("ToolbarBox",e(393).ToolbarBox)},function(e,t,n,r,i){r();e=e(251);class a extends e.ActionToolButtonView{css_classes(){return super.css_classes().concat("bk-toolbar-button-custom-action")}}(n.CustomActionButtonView=a).__name__="CustomActionButtonView";class o extends e.ActionToolView{doit(){var e;null===(e=this.model.callback)||void 0===e||e.execute(this.model)}}(n.CustomActionView=o).__name__="CustomActionView";class s extends e.ActionTool{constructor(e){super(e),this.tool_name="Custom Action",this.button_view=a}static init_CustomAction(){this.prototype.default_view=o,this.define(({Any:e,String:t,Nullable:n})=>({callback:[n(e)],icon:[t]})),this.override({description:"Perform a Custom Action"})}}(n.CustomAction=s).__name__="CustomAction",s.init_CustomAction()},function(e,t,n,r,i){r();const a=e(251),o=e(242);class s extends a.ActionToolView{connect_signals(){super.connect_signals(),this.connect(this.plot_view.state.changed,()=>this.model.disabled=!this.plot_view.state.can_redo)}doit(){this.plot_view.state.redo()}}(n.RedoToolView=s).__name__="RedoToolView";class l extends a.ActionTool{constructor(e){super(e),this.tool_name="Redo",this.icon=o.tool_icon_redo}static init_RedoTool(){this.prototype.default_view=s,this.override({disabled:!0}),this.register_alias("redo",()=>new l)}}n.RedoTool=l,l.__name__="RedoTool",l.init_RedoTool()},function(e,t,n,r,i){r();const a=e(251),o=e(242);class s extends a.ActionToolView{doit(){this.plot_view.reset()}}(n.ResetToolView=s).__name__="ResetToolView";class l extends a.ActionTool{constructor(e){super(e),this.tool_name="Reset",this.icon=o.tool_icon_reset}static init_ResetTool(){this.prototype.default_view=s,this.register_alias("reset",()=>new l)}}(n.ResetTool=l).__name__="ResetTool",l.init_ResetTool()},function(e,t,n,r,i){r();const a=e(251),o=e(242);class s extends a.ActionToolView{async copy(){var e=await this.plot_view.to_blob(),e=new ClipboardItem({[e.type]:e});await navigator.clipboard.write([e])}async save(e){const t=await this.plot_view.to_blob(),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=e,n.target="_blank",n.dispatchEvent(new MouseEvent("click"))}doit(e="save"){switch(e){case"save":this.save("bokeh_plot");break;case"copy":this.copy()}}}(n.SaveToolView=s).__name__="SaveToolView";class l extends a.ActionTool{constructor(e){super(e),this.tool_name="Save",this.icon=o.tool_icon_save}static init_SaveTool(){this.prototype.default_view=s,this.register_alias("save",()=>new l)}get menu(){return[{icon:"bk-tool-icon-copy-to-clipboard",tooltip:"Copy image to clipboard",if:()=>"undefined"!=typeof ClipboardItem,handler:()=>{this.do.emit("copy")}}]}}(n.SaveTool=l).__name__="SaveTool",l.init_SaveTool()},function(e,t,n,r,i){r();const a=e(251),o=e(242);class s extends a.ActionToolView{connect_signals(){super.connect_signals(),this.connect(this.plot_view.state.changed,()=>this.model.disabled=!this.plot_view.state.can_undo)}doit(){this.plot_view.state.undo()}}(n.UndoToolView=s).__name__="UndoToolView";class l extends a.ActionTool{constructor(e){super(e),this.tool_name="Undo",this.icon=o.tool_icon_undo}static init_UndoTool(){this.prototype.default_view=s,this.override({disabled:!0}),this.register_alias("undo",()=>new l)}}n.UndoTool=l,l.__name__="UndoTool",l.init_UndoTool()},function(e,t,n,r,i){r();const a=e(367),o=e(242);class s extends a.ZoomBaseToolView{}(n.ZoomInToolView=s).__name__="ZoomInToolView";class l extends a.ZoomBaseTool{constructor(e){super(e),this.sign=1,this.tool_name="Zoom In",this.icon=o.tool_icon_zoom_in}static init_ZoomInTool(){this.prototype.default_view=s,this.register_alias("zoom_in",()=>new l({dimensions:"both"})),this.register_alias("xzoom_in",()=>new l({dimensions:"width"})),this.register_alias("yzoom_in",()=>new l({dimensions:"height"}))}}(n.ZoomInTool=l).__name__="ZoomInTool",l.init_ZoomInTool()},function(e,t,n,r,i){r();const a=e(251),o=e(20),s=e(368);class l extends a.ActionToolView{doit(){var e=this.plot_view.frame,t=this.model.dimensions,n="width"==t||"both"==t,t="height"==t||"both"==t,t=s.scale_range(e,this.model.sign*this.model.factor,n,t);this.plot_view.state.push("zoom_out",{range:t}),this.plot_view.update_range(t,{scrolling:!0}),null===(t=this.model.document)||void 0===t||t.interactive_start(this.plot_model)}}n.ZoomBaseToolView=l,l.__name__="ZoomBaseToolView";class c extends a.ActionTool{constructor(e){super(e)}static init_ZoomBaseTool(){this.define(({Percent:e})=>({factor:[e,.1],dimensions:[o.Dimensions,"both"]}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}(n.ZoomBaseTool=c).__name__="ZoomBaseTool",c.init_ZoomBaseTool()},function(e,t,n,r,i){r();const o=e(10);function s(e,t,n){var[r,e]=[e.start,e.end],n=null!=n?n:(e+r)/2;return[r-(r-n)*t,e-(e-n)*t]}function l(e,[t,n]){const r=new Map;for(var[i,a]of e){const[e,o]=a.r_invert(t,n);r.set(i,{start:e,end:o})}return r}n.scale_highlow=s,n.get_info=l,n.scale_range=function(e,t,n=!0,r=!0,i){t=o.clamp(t,-.9,.9);var[a,n]=s(e.bbox.h_range,n?t:0,null!=i?i.x:void 0),n=l(e.x_scales,[a,n]),[r,i]=s(e.bbox.v_range,r?t:0,null!=i?i.y:void 0);return{xrs:n,yrs:l(e.y_scales,[r,i]),factor:t}}},function(e,t,n,r,i){r();const a=e(367),o=e(242);class s extends a.ZoomBaseToolView{}(n.ZoomOutToolView=s).__name__="ZoomOutToolView";class l extends a.ZoomBaseTool{constructor(e){super(e),this.sign=-1,this.tool_name="Zoom Out",this.icon=o.tool_icon_zoom_out}static init_ZoomOutTool(){this.prototype.default_view=s,this.register_alias("zoom_out",()=>new l({dimensions:"both"})),this.register_alias("xzoom_out",()=>new l({dimensions:"width"})),this.register_alias("yzoom_out",()=>new l({dimensions:"height"}))}}(n.ZoomOutTool=l).__name__="ZoomOutTool",l.init_ZoomOutTool()},function(e,t,n,r,i){r();const a=e(9),o=e(8),s=e(11),l=e(61),c=e(237);class u extends c.GestureToolView{constructor(){super(...arguments),this._mouse_in_frame=!0}_select_mode(e){var{shiftKey:t,ctrlKey:e}=e;return t||e?t&&!e?"append":!t&&e?"intersect":t&&e?"subtract":void s.unreachable():"replace"}_move_enter(e){this._mouse_in_frame=!0}_move_exit(e){this._mouse_in_frame=!1}_map_drag(e,t,n){if(!this.plot_view.frame.bbox.contains(e,t))return null;const r=this.plot_view.renderer_view(n);return null==r?null:[r.coordinates.x_scale.invert(e),r.coordinates.y_scale.invert(t)]}_delete_selected(e){const t=e.data_source,n=t.selected.indices;n.sort();for(const e of t.columns()){const r=t.get_array(e);for(let e=0;e<n.length;e++){const t=n[e];r.splice(t-e,1)}}this._emit_cds_changes(t)}_pop_glyphs(t,n){var e=t.columns();if(n&&e.length)for(const i of e){let e=t.get_array(i);var r=e.length-n+1;r<1||(o.isArray(e)||(e=Array.from(e),t.data[i]=e),e.splice(0,r))}}_emit_cds_changes(e,t=!0,n=!0,r=!0){n&&e.selection_manager.clear(),t&&e.change.emit(),r&&(e.data=e.data,e.properties.data.change.emit())}_drag_points(e,t,n="both"){if(null!=this._basepoint){var[r,i]=this._basepoint;for(const a of t){const t=this._map_drag(r,i,a),o=this._map_drag(e.sx,e.sy,a);if(null!=o&&null!=t){const[s,l]=o,[c,u]=t,[d,h]=[s-c,l-u],f=a.glyph,p=a.data_source,[m,g]=[f.x.field,f.y.field];for(const e of p.selected.indices)!m||"width"!=n&&"both"!=n||(p.data[m][e]+=d),!g||"height"!=n&&"both"!=n||(p.data[g][e]+=h);p.change.emit()}}this._basepoint=[e.sx,e.sy]}}_pad_empty_columns(e,t){for(const n of e.columns())a.includes(t,n)||e.get_array(n).push(this.model.empty_value)}_select_event(e,t,n){const r=this.plot_view.frame,{sx:i,sy:a}=e;if(!r.bbox.contains(i,a))return[];const o={type:"point",sx:i,sy:a},s=[];for(const e of n){const n=e.get_selection_manager(),r=e.data_source,i=this.plot_view.renderer_view(e);null!=i&&(n.select([i],o,!0,t)&&s.push(e),r.properties.selected.change.emit())}return s}}(n.EditToolView=u).__name__="EditToolView";class d extends c.GestureTool{constructor(e){super(e)}static init_EditTool(){this.define(({Unknown:e,String:t,Array:n,Ref:r,Nullable:i})=>({custom_icon:[i(t),null],empty_value:[e],renderers:[n(r(l.GlyphRenderer)),[]]}))}get computed_icon(){var e;return null!==(e=this.custom_icon)&&void 0!==e?e:this.icon}}(n.EditTool=d).__name__="EditTool",d.init_EditTool()},function(e,t,n,r,i){r();const a=e(43),o=e(20),s=e(370),l=e(242);class c extends s.EditToolView{_tap(e){null==this._draw_basepoint&&null==this._basepoint&&this._select_event(e,this._select_mode(e),this.model.renderers)}_keyup(e){if(this.model.active&&this._mouse_in_frame)for(const t of this.model.renderers)e.keyCode===a.Keys.Backspace?this._delete_selected(t):e.keyCode==a.Keys.Esc&&t.data_source.selection_manager.clear()}_set_extent([e,t],[n,r],i,a=!1){const o=this.model.renderers[0],s=this.plot_view.renderer_view(o);if(null!=s){const l=o.glyph,c=o.data_source,[u,d]=s.coordinates.x_scale.r_invert(e,t),[h,f]=s.coordinates.y_scale.r_invert(n,r),[p,m]=[(u+d)/2,(h+f)/2],[g,_]=[d-u,f-h],[y,v]=[l.x.field,l.y.field],[b,x]=[l.width.field,l.height.field];if(i)this._pop_glyphs(c,this.model.num_objects),y&&c.get_array(y).push(p),v&&c.get_array(v).push(m),b&&c.get_array(b).push(g),x&&c.get_array(x).push(_),this._pad_empty_columns(c,[y,v,b,x]);else{const e=c.data[y].length-1;y&&(c.data[y][e]=p),v&&(c.data[v][e]=m),b&&(c.data[b][e]=g),x&&(c.data[x][e]=_)}this._emit_cds_changes(c,!0,!1,a)}}_update_box(e,t=!1,n=!1){if(null!=this._draw_basepoint){const r=[e.sx,e.sy],i=this.plot_view.frame,a=this.model.dimensions,o=this.model._get_dim_limits(this._draw_basepoint,r,i,a);if(null!=o){const[e,r]=o;this._set_extent(e,r,t,n)}}}_doubletap(e){this.model.active&&(null!=this._draw_basepoint?(this._update_box(e,!1,!0),this._draw_basepoint=null):(this._draw_basepoint=[e.sx,e.sy],this._select_event(e,"append",this.model.renderers),this._update_box(e,!0,!1)))}_move(e){this._update_box(e,!1,!1)}_pan_start(e){e.shiftKey?null==this._draw_basepoint&&(this._draw_basepoint=[e.sx,e.sy],this._update_box(e,!0,!1)):null==this._basepoint&&(this._select_event(e,"append",this.model.renderers),this._basepoint=[e.sx,e.sy])}_pan(e,t=!1,n=!1){e.shiftKey?null!=this._draw_basepoint&&this._update_box(e,t,n):null!=this._basepoint&&this._drag_points(e,this.model.renderers)}_pan_end(e){if(this._pan(e,!1,!0),e.shiftKey)this._draw_basepoint=null;else{this._basepoint=null;for(const e of this.model.renderers)this._emit_cds_changes(e.data_source,!1,!0,!0)}}}(n.BoxEditToolView=c).__name__="BoxEditToolView";class u extends s.EditTool{constructor(e){super(e),this.tool_name="Box Edit Tool",this.icon=l.tool_icon_box_edit,this.event_type=["tap","pan","move"],this.default_order=1}static init_BoxEditTool(){this.prototype.default_view=c,this.define(({Int:e})=>({dimensions:[o.Dimensions,"both"],num_objects:[e,0]}))}}(n.BoxEditTool=u).__name__="BoxEditTool",u.init_BoxEditTool()},function(e,t,n,r,i){r();const a=e(43),d=e(8),o=e(370),s=e(242);class l extends o.EditToolView{_draw(e,t,n=!1){if(this.model.active){var r=this.model.renderers[0],e=this._map_drag(e.sx,e.sy,r);if(null!=e){const[i,a]=e,o=r.data_source,s=r.glyph,[l,c]=[s.xs.field,s.ys.field];if("new"==t)this._pop_glyphs(o,this.model.num_objects),l&&o.get_array(l).push([i]),c&&o.get_array(c).push([a]),this._pad_empty_columns(o,[l,c]);else if("add"==t){if(l){const u=o.data[l].length-1;let e=o.get_array(l)[u];d.isArray(e)||(e=Array.from(e),o.data[l][u]=e),e.push(i)}if(c){const u=o.data[c].length-1;let e=o.get_array(c)[u];d.isArray(e)||(e=Array.from(e),o.data[c][u]=e),e.push(a)}}this._emit_cds_changes(o,!0,!0,n)}}}_pan_start(e){this._draw(e,"new")}_pan(e){this._draw(e,"add")}_pan_end(e){this._draw(e,"add",!0)}_tap(e){this._select_event(e,this._select_mode(e),this.model.renderers)}_keyup(e){if(this.model.active&&this._mouse_in_frame)for(const t of this.model.renderers)e.keyCode===a.Keys.Esc?t.data_source.selection_manager.clear():e.keyCode===a.Keys.Backspace&&this._delete_selected(t)}}(n.FreehandDrawToolView=l).__name__="FreehandDrawToolView";class c extends o.EditTool{constructor(e){super(e),this.tool_name="Freehand Draw Tool",this.icon=s.tool_icon_freehand_draw,this.event_type=["pan","tap"],this.default_order=3}static init_FreehandDrawTool(){this.prototype.default_view=l,this.define(({Int:e})=>({num_objects:[e,0]})),this.register_alias("freehand_draw",()=>new c)}}(n.FreehandDrawTool=c).__name__="FreehandDrawTool",c.init_FreehandDrawTool()},function(e,t,n,r,i){r();const a=e(43),o=e(370),s=e(242);class l extends o.EditToolView{_tap(e){if(!this._select_event(e,this._select_mode(e),this.model.renderers).length&&this.model.add){var t=this.model.renderers[0],e=this._map_drag(e.sx,e.sy,t);if(null!=e){const n=t.glyph,r=t.data_source,[i,a]=[n.x.field,n.y.field],[o,s]=e;this._pop_glyphs(r,this.model.num_objects),i&&r.get_array(i).push(o),a&&r.get_array(a).push(s),this._pad_empty_columns(r,[i,a]),r.change.emit(),r.data=r.data,r.properties.data.change.emit()}}}_keyup(e){if(this.model.active&&this._mouse_in_frame)for(const t of this.model.renderers)e.keyCode===a.Keys.Backspace?this._delete_selected(t):e.keyCode==a.Keys.Esc&&t.data_source.selection_manager.clear()}_pan_start(e){this.model.drag&&(this._select_event(e,"append",this.model.renderers),this._basepoint=[e.sx,e.sy])}_pan(e){this.model.drag&&null!=this._basepoint&&this._drag_points(e,this.model.renderers)}_pan_end(e){if(this.model.drag){this._pan(e);for(const e of this.model.renderers)this._emit_cds_changes(e.data_source,!1,!0,!0);this._basepoint=null}}}(n.PointDrawToolView=l).__name__="PointDrawToolView";class c extends o.EditTool{constructor(e){super(e),this.tool_name="Point Draw Tool",this.icon=s.tool_icon_point_draw,this.event_type=["tap","pan","move"],this.default_order=2}static init_PointDrawTool(){this.prototype.default_view=l,this.define(({Boolean:e,Int:t})=>({add:[e,!0],drag:[e,!0],num_objects:[t,0]}))}}(n.PointDrawTool=c).__name__="PointDrawTool",c.init_PointDrawTool()},function(e,t,n,r,i){r();const a=e(43),d=e(8),o=e(375),s=e(242);class l extends o.PolyToolView{constructor(){super(...arguments),this._drawing=!1,this._initialized=!1}_tap(e){this._drawing?this._draw(e,"add",!0):this._select_event(e,this._select_mode(e),this.model.renderers)}_draw(t,e,n=!1){var r=this.model.renderers[0],i=this._map_drag(t.sx,t.sy,r);if(this._initialized||this.activate(),null!=i){const[a,o]=this._snap_to_vertex(t,...i),s=r.data_source,l=r.glyph,[c,u]=[l.xs.field,l.ys.field];if("new"==e)this._pop_glyphs(s,this.model.num_objects),c&&s.get_array(c).push([a,a]),u&&s.get_array(u).push([o,o]),this._pad_empty_columns(s,[c,u]);else if("edit"==e){if(c){const t=s.data[c][s.data[c].length-1];t[t.length-1]=a}if(u){const t=s.data[u][s.data[u].length-1];t[t.length-1]=o}}else if("add"==e){if(c){const t=s.data[c].length-1;let e=s.get_array(c)[t];const n=e[e.length-1];e[e.length-1]=a,d.isArray(e)||(e=Array.from(e),s.data[c][t]=e),e.push(n)}if(u){const t=s.data[u].length-1;let e=s.get_array(u)[t];const n=e[e.length-1];e[e.length-1]=o,d.isArray(e)||(e=Array.from(e),s.data[u][t]=e),e.push(n)}}this._emit_cds_changes(s,!0,!1,n)}}_show_vertices(){if(this.model.active){const t=[],n=[];for(let e=0;e<this.model.renderers.length;e++){const r=this.model.renderers[e],i=r.data_source,a=r.glyph,[o,s]=[a.xs.field,a.ys.field];if(o)for(const n of i.get_array(o))t.push(...n);if(s)for(const t of i.get_array(s))n.push(...t);this._drawing&&e==this.model.renderers.length-1&&(t.splice(t.length-1,1),n.splice(n.length-1,1))}this._set_vertices(t,n)}}_doubletap(e){this.model.active&&(this._drawing?(this._drawing=!1,this._draw(e,"edit",!0)):(this._drawing=!0,this._draw(e,"new",!0)))}_move(e){this._drawing&&this._draw(e,"edit")}_remove(){const e=this.model.renderers[0],t=e.data_source,n=e.glyph,[r,i]=[n.xs.field,n.ys.field];if(r){const e=t.data[r].length-1,n=t.get_array(r)[e];n.splice(n.length-1,1)}if(i){const e=t.data[i].length-1,n=t.get_array(i)[e];n.splice(n.length-1,1)}this._emit_cds_changes(t)}_keyup(e){if(this.model.active&&this._mouse_in_frame)for(const t of this.model.renderers)e.keyCode===a.Keys.Backspace?this._delete_selected(t):e.keyCode==a.Keys.Esc&&(this._drawing&&(this._remove(),this._drawing=!1),t.data_source.selection_manager.clear())}_pan_start(e){this.model.drag&&(this._select_event(e,"append",this.model.renderers),this._basepoint=[e.sx,e.sy])}_pan(e){if(null!=this._basepoint&&this.model.drag){var[t,n]=this._basepoint;for(const c of this.model.renderers){var r=this._map_drag(t,n,c),i=this._map_drag(e.sx,e.sy,c);if(null!=i&&null!=r){const u=c.data_source,d=c.glyph,[h,f]=[d.xs.field,d.ys.field];if(h||f){var[a,o]=i,[i,r]=r,[s,l]=[a-i,o-r];for(const e of u.selected.indices){let t,n,r;h&&(n=u.data[h][e]),t=f?(r=u.data[f][e],r.length):n.length;for(let e=0;e<t;e++)n&&(n[e]+=s),r&&(r[e]+=l)}u.change.emit()}}}this._basepoint=[e.sx,e.sy]}}_pan_end(e){if(this.model.drag){this._pan(e);for(const e of this.model.renderers)this._emit_cds_changes(e.data_source);this._basepoint=null}}activate(){if(this.model.vertex_renderer&&this.model.active){if(this._show_vertices(),!this._initialized)for(const e of this.model.renderers){const t=e.data_source;t.connect(t.properties.data.change,()=>this._show_vertices())}this._initialized=!0}}deactivate(){this._drawing&&(this._remove(),this._drawing=!1),this.model.vertex_renderer&&this._hide_vertices()}}(n.PolyDrawToolView=l).__name__="PolyDrawToolView";class c extends o.PolyTool{constructor(e){super(e),this.tool_name="Polygon Draw Tool",this.icon=s.tool_icon_poly_draw,this.event_type=["pan","tap","move"],this.default_order=3}static init_PolyDrawTool(){this.prototype.default_view=l,this.define(({Boolean:e,Int:t})=>({drag:[e,!0],num_objects:[t,0]}))}}(n.PolyDrawTool=c).__name__="PolyDrawTool",c.init_PolyDrawTool()},function(e,t,n,r,i){r();const o=e(8),a=e(370);class s extends a.EditToolView{_set_vertices(e,t){const n=this.model.vertex_renderer.glyph,r=this.model.vertex_renderer.data_source,[i,a]=[n.x.field,n.y.field];i&&(o.isArray(e)?r.data[i]=e:n.x={value:e}),a&&(o.isArray(t)?r.data[a]=t:n.y={value:t}),this._emit_cds_changes(r,!0,!0,!1)}_hide_vertices(){this._set_vertices([],[])}_snap_to_vertex(e,t,n){if(this.model.vertex_renderer){const r=this._select_event(e,"replace",[this.model.vertex_renderer]),i=this.model.vertex_renderer.data_source,a=this.model.vertex_renderer.glyph,[o,s]=[a.x.field,a.y.field];if(r.length){const e=i.selected.indices[0];o&&(t=i.data[o][e]),s&&(n=i.data[s][e]),i.selection_manager.clear()}}return[t,n]}}n.PolyToolView=s,s.__name__="PolyToolView";class l extends a.EditTool{constructor(e){super(e)}static init_PolyTool(){this.define(({AnyRef:e})=>({vertex_renderer:[e()]}))}}(n.PolyTool=l).__name__="PolyTool",l.init_PolyTool()},function(e,t,n,r,i){r();const a=e(43),l=e(8),o=e(375),s=e(242);class c extends o.PolyToolView{constructor(){super(...arguments),this._drawing=!1,this._cur_index=null}_doubletap(e){if(this.model.active){var t=this._map_drag(e.sx,e.sy,this.model.vertex_renderer);if(null!=t){const[n,r]=t,i=this._select_event(e,"replace",[this.model.vertex_renderer]),a=this.model.vertex_renderer.data_source,o=this.model.vertex_renderer.glyph,[s,l]=[o.x.field,o.y.field];if(i.length&&null!=this._selected_renderer){const e=a.selected.indices[0];this._drawing?(this._drawing=!1,a.selection_manager.clear()):(a.selected.indices=[e+1],s&&a.get_array(s).splice(e+1,0,n),l&&a.get_array(l).splice(e+1,0,r),this._drawing=!0),a.change.emit(),this._emit_cds_changes(this._selected_renderer.data_source)}else this._show_vertices(e)}}}_show_vertices(e){if(this.model.active){const t=this.model.renderers[0],n=()=>this._update_vertices(t),r=null==t?void 0:t.data_source,i=this._select_event(e,"replace",this.model.renderers);if(!i.length)return this._set_vertices([],[]),this._selected_renderer=null,this._drawing=!1,void((this._cur_index=null)!=r&&r.disconnect(r.properties.data.change,n));null!=r&&r.connect(r.properties.data.change,n),this._cur_index=i[0].data_source.selected.indices[0],this._update_vertices(i[0])}}_update_vertices(n){const r=n.glyph,i=n.data_source,a=this._cur_index,[o,s]=[r.xs.field,r.ys.field];if(!this._drawing&&(null!=a||!o&&!s)){let e,t;o&&null!=a?(e=i.data[o][a],l.isArray(e)||(i.data[o][a]=e=Array.from(e))):e=r.xs.value,s&&null!=a?(t=i.data[s][a],l.isArray(t)||(i.data[s][a]=t=Array.from(t))):t=r.ys.value,this._selected_renderer=n,this._set_vertices(e,t)}}_move(e){if(this._drawing&&null!=this._selected_renderer){const a=this.model.vertex_renderer,o=a.data_source,s=a.glyph,l=this._map_drag(e.sx,e.sy,a);var t,n,r,i;null!=l&&([t,n]=l,i=o.selected.indices,[t,n]=this._snap_to_vertex(e,t,n),o.selected.indices=i,[r,e]=[s.x.field,s.y.field],i=i[0],r&&(o.data[r][i]=t),e&&(o.data[e][i]=n),o.change.emit(),this._selected_renderer.data_source.change.emit())}}_tap(e){const t=this.model.vertex_renderer,n=this._map_drag(e.sx,e.sy,t);if(null!=n){if(this._drawing&&this._selected_renderer){var[r,i]=n;const o=t.data_source,s=t.glyph,[l,c]=[s.x.field,s.y.field],u=o.selected.indices;[r,i]=this._snap_to_vertex(e,r,i);var a=u[0];if(o.selected.indices=[a+1],l){const e=o.get_array(l),t=e[a];e[a]=r,e.splice(a+1,0,t)}if(c){const e=o.get_array(c),t=e[a];e[a]=i,e.splice(a+1,0,t)}return o.change.emit(),void this._emit_cds_changes(this._selected_renderer.data_source,!0,!1,!0)}a=this._select_mode(e);this._select_event(e,a,[t]),this._select_event(e,a,this.model.renderers)}}_remove_vertex(){if(this._drawing&&this._selected_renderer){const e=this.model.vertex_renderer,t=e.data_source,n=e.glyph,r=t.selected.indices[0],[i,a]=[n.x.field,n.y.field];i&&t.get_array(i).splice(r,1),a&&t.get_array(a).splice(r,1),t.change.emit(),this._emit_cds_changes(this._selected_renderer.data_source)}}_pan_start(e){this._select_event(e,"append",[this.model.vertex_renderer]),this._basepoint=[e.sx,e.sy]}_pan(e){null!=this._basepoint&&(this._drag_points(e,[this.model.vertex_renderer]),this._selected_renderer&&this._selected_renderer.data_source.change.emit())}_pan_end(e){null!=this._basepoint&&(this._drag_points(e,[this.model.vertex_renderer]),this._emit_cds_changes(this.model.vertex_renderer.data_source,!1,!0,!0),this._selected_renderer&&this._emit_cds_changes(this._selected_renderer.data_source),this._basepoint=null)}_keyup(e){if(this.model.active&&this._mouse_in_frame)for(const t of this._selected_renderer?[this.model.vertex_renderer]:this.model.renderers)e.keyCode===a.Keys.Backspace?(this._delete_selected(t),this._selected_renderer&&this._emit_cds_changes(this._selected_renderer.data_source)):e.keyCode==a.Keys.Esc&&(this._drawing?(this._remove_vertex(),this._drawing=!1):this._selected_renderer&&this._hide_vertices(),t.data_source.selection_manager.clear())}deactivate(){this._selected_renderer&&(this._drawing&&(this._remove_vertex(),this._drawing=!1),this._hide_vertices())}}(n.PolyEditToolView=c).__name__="PolyEditToolView";class u extends o.PolyTool{constructor(e){super(e),this.tool_name="Poly Edit Tool",this.icon=s.tool_icon_poly_edit,this.event_type=["tap","pan","move"],this.default_order=4}static init_PolyEditTool(){this.prototype.default_view=c}}(n.PolyEditTool=u).__name__="PolyEditTool",u.init_PolyEditTool()},function(e,t,n,r,i){r();const a=e(378),o=e(136),s=e(20),l=e(242);class c extends a.SelectToolView{_compute_limits(e){const t=this.plot_view.frame,n=this.model.dimensions;let r=this._base_point;if("center"==this.model.origin){const[t,n]=r,[i,a]=e;r=[t-(i-t),n-(a-n)]}return this.model._get_dim_limits(r,e,t,n)}_pan_start(e){var{sx:t,sy:e}=e;this._base_point=[t,e]}_pan(e){var{sx:t,sy:n}=e,[t,n]=this._compute_limits([t,n]);this.model.overlay.update({left:t[0],right:t[1],top:n[0],bottom:n[1]}),this.model.select_every_mousemove&&this._do_select(t,n,!1,this._select_mode(e))}_pan_end(e){var{sx:t,sy:n}=e,[t,n]=this._compute_limits([t,n]);this._do_select(t,n,!0,this._select_mode(e)),this.model.overlay.update({left:null,right:null,top:null,bottom:null}),this._base_point=null,this.plot_view.state.push("box_select",{selection:this.plot_view.get_selection()})}_do_select([e,t],[n,r],i,a="replace"){this._select({type:"rect",sx0:e,sx1:t,sy0:n,sy1:r},i,a)}}(n.BoxSelectToolView=c).__name__="BoxSelectToolView";class u extends a.SelectTool{constructor(e){super(e),this.tool_name="Box Select",this.icon=l.tool_icon_box_select,this.event_type="pan",this.default_order=30}static init_BoxSelectTool(){this.prototype.default_view=c,this.define(({Boolean:e,Ref:t})=>({dimensions:[s.Dimensions,"both"],select_every_mousemove:[e,!1],overlay:[t(o.BoxAnnotation),()=>new o.BoxAnnotation({level:"overlay",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:2,line_dash:[4,4]})],origin:[s.BoxOrigin,"corner"]})),this.register_alias("box_select",()=>new u),this.register_alias("xbox_select",()=>new u({dimensions:"width"})),this.register_alias("ybox_select",()=>new u({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}(n.BoxSelectTool=u).__name__="BoxSelectTool",u.init_BoxSelectTool()},function(e,t,n,r,i){r();const a=e(237),o=e(61),s=e(123),l=e(62),c=e(161),u=e(20),d=e(43),x=e(264),h=e(15),f=e(11);class p extends a.GestureToolView{connect_signals(){super.connect_signals(),this.model.clear.connect(()=>this._clear())}get computed_renderers(){var{renderers:e,names:t}=this.model,n=this.plot_model.data_renderers;return c.compute_renderers(e,n,t)}_computed_renderers_by_data_source(){const t=new Map;for(const r of this.computed_renderers){let e;if(r instanceof o.GlyphRenderer)e=r.data_source;else{if(!(r instanceof s.GraphRenderer))continue;e=r.node_renderer.data_source}var n=null!==(n=t.get(e))&&void 0!==n?n:[];t.set(e,[...n,r])}return t}_select_mode(e){var{shiftKey:t,ctrlKey:e}=e;return t||e?t&&!e?"append":!t&&e?"intersect":t&&e?"subtract":void f.unreachable():this.model.mode}_keyup(e){e.keyCode==d.Keys.Esc&&this._clear()}_clear(){for(const e of this.computed_renderers)e.get_selection_manager().clear();const e=this.computed_renderers.map(e=>this.plot_view.renderer_view(e));this.plot_view.request_paint(e)}_select(e,t,n){const r=this._computed_renderers_by_data_source();for(var[,i]of r){const r=i[0].get_selection_manager(),a=[];for(const e of i){const t=this.plot_view.renderer_view(e);null!=t&&a.push(t)}r.select(a,e,t,n)}null!=this.model.callback&&this._emit_callback(e),this._emit_selection_event(e,t)}_emit_selection_event(e,t=!0){const{x_scale:n,y_scale:r}=this.plot_view.frame;let i;switch(e.type){case"point":{const{sx:t,sy:a}=e,o=n.invert(t),s=r.invert(a);i=Object.assign(Object.assign({},e),{x:o,y:s});break}case"span":{const{sx:t,sy:l}=e,c=n.invert(t),u=r.invert(l);i=Object.assign(Object.assign({},e),{x:c,y:u});break}case"rect":{const{sx0:t,sx1:d,sy0:h,sy1:f}=e,[p,m]=n.r_invert(t,d),[g,_]=r.r_invert(h,f);i=Object.assign(Object.assign({},e),{x0:p,y0:g,x1:m,y1:_});break}case"poly":{const{sx:t,sy:y}=e,v=n.v_invert(t),b=r.v_invert(y);i=Object.assign(Object.assign({},e),{x:v,y:b});break}}this.plot_model.trigger_event(new x.SelectionGeometry(i,t))}}(n.SelectToolView=p).__name__="SelectToolView";class m extends a.GestureTool{constructor(e){super(e)}initialize(){super.initialize(),this.clear=new h.Signal0(this,"clear")}static init_SelectTool(){this.define(({String:e,Array:t,Ref:n,Or:r,Auto:i})=>({renderers:[r(t(n(l.DataRenderer)),i),"auto"],names:[t(e),[]],mode:[u.SelectionMode,"replace"]}))}get menu(){return[{icon:"bk-tool-icon-replace-mode",tooltip:"Replace the current selection",active:()=>"replace"==this.mode,handler:()=>{this.mode="replace",this.active=!0}},{icon:"bk-tool-icon-append-mode",tooltip:"Append to the current selection (Shift)",active:()=>"append"==this.mode,handler:()=>{this.mode="append",this.active=!0}},{icon:"bk-tool-icon-intersect-mode",tooltip:"Intersect with the current selection (Ctrl)",active:()=>"intersect"==this.mode,handler:()=>{this.mode="intersect",this.active=!0}},{icon:"bk-tool-icon-subtract-mode",tooltip:"Subtract from the current selection (Shift+Ctrl)",active:()=>"subtract"==this.mode,handler:()=>{this.mode="subtract",this.active=!0}},null,{icon:"bk-tool-icon-clear-selection",tooltip:"Clear the current selection (Esc)",handler:()=>{this.clear.emit()}}]}}(n.SelectTool=m).__name__="SelectTool",m.init_SelectTool()},function(e,t,n,r,i){r();const a=e(237),o=e(136),s=e(20),l=e(242);class c extends a.GestureToolView{_match_aspect(e,t,n){var r=n.bbox.aspect,i=n.bbox.h_range.end,a=n.bbox.h_range.start,o=n.bbox.v_range.end,s=n.bbox.v_range.start;let l=Math.abs(e[0]-t[0]),c=Math.abs(e[1]-t[1]);var n=0==c?0:l/c,[n]=r<=n?[1,n/r]:[r/n,1];let u,d,h,f;return e[0]<=t[0]?(u=e[0],d=e[0]+l*n,d>i&&(d=i)):(d=e[0],u=e[0]-l*n,u<a&&(u=a)),l=Math.abs(d-u),e[1]<=t[1]?(f=e[1],h=e[1]+l/r,h>o&&(h=o)):(h=e[1],f=e[1]-l/r,f<s&&(f=s)),c=Math.abs(h-f),e[0]<=t[0]?d=e[0]+r*c:u=e[0]-r*c,[[u,d],[f,h]]}_compute_limits(e){const t=this.plot_view.frame,n=this.model.dimensions;let r,i,a=this._base_point;if("center"==this.model.origin){const[t,n]=a,[r,i]=e;a=[t-(r-t),n-(i-n)]}return this.model.match_aspect&&"both"==n?[r,i]=this._match_aspect(a,e,t):[r,i]=this.model._get_dim_limits(a,e,t,n),[r,i]}_pan_start(e){this._base_point=[e.sx,e.sy]}_pan(e){var t=[e.sx,e.sy],[e,t]=this._compute_limits(t);this.model.overlay.update({left:e[0],right:e[1],top:t[0],bottom:t[1]})}_pan_end(e){var t=[e.sx,e.sy],[e,t]=this._compute_limits(t);this._update(e,t),this.model.overlay.update({left:null,right:null,top:null,bottom:null}),this._base_point=null}_update([e,t],[n,r]){if(!(Math.abs(t-e)<=5||Math.abs(r-n)<=5)){const{x_scales:a,y_scales:o}=this.plot_view.frame,s=new Map;for(const[n,r]of a){const[a,o]=r.r_invert(e,t);s.set(n,{start:a,end:o})}const l=new Map;for(const[e,t]of o){const[a,o]=t.r_invert(n,r);l.set(e,{start:a,end:o})}var i={xrs:s,yrs:l};this.plot_view.state.push("box_zoom",{range:i}),this.plot_view.update_range(i)}}}(n.BoxZoomToolView=c).__name__="BoxZoomToolView";class u extends a.GestureTool{constructor(e){super(e),this.tool_name="Box Zoom",this.icon=l.tool_icon_box_zoom,this.event_type="pan",this.default_order=20}static init_BoxZoomTool(){this.prototype.default_view=c,this.define(({Boolean:e,Ref:t})=>({dimensions:[s.Dimensions,"both"],overlay:[t(o.BoxAnnotation),()=>new o.BoxAnnotation({level:"overlay",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:2,line_dash:[4,4]})],match_aspect:[e,!1],origin:[s.BoxOrigin,"corner"]})),this.register_alias("box_zoom",()=>new u({dimensions:"both"})),this.register_alias("xbox_zoom",()=>new u({dimensions:"width"})),this.register_alias("ybox_zoom",()=>new u({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}(n.BoxZoomTool=u).__name__="BoxZoomTool",u.init_BoxZoomTool()},function(e,t,n,r,i){r();const a=e(378),o=e(231),s=e(381),l=e(43),c=e(242);class u extends a.SelectToolView{constructor(){super(...arguments),this.sxs=[],this.sys=[]}connect_signals(){super.connect_signals(),this.connect(this.model.properties.active.change,()=>this._active_change())}_active_change(){this.model.active||this._clear_overlay()}_keyup(e){e.keyCode==l.Keys.Enter&&this._clear_overlay()}_pan_start(e){this.sxs=[],this.sys=[];var{sx:t,sy:e}=e;this._append_overlay(t,e)}_pan(e){var[t,n]=this.plot_view.frame.bbox.clip(e.sx,e.sy);this._append_overlay(t,n),this.model.select_every_mousemove&&this._do_select(this.sxs,this.sys,!1,this._select_mode(e))}_pan_end(e){var{sxs:t,sys:n}=this;this._clear_overlay(),this._do_select(t,n,!0,this._select_mode(e)),this.plot_view.state.push("lasso_select",{selection:this.plot_view.get_selection()})}_append_overlay(e,t){const{sxs:n,sys:r}=this;n.push(e),r.push(t),this.model.overlay.update({xs:n,ys:r})}_clear_overlay(){this.sxs=[],this.sys=[],this.model.overlay.update({xs:this.sxs,ys:this.sys})}_do_select(e,t,n,r){this._select({type:"poly",sx:e,sy:t},n,r)}}(n.LassoSelectToolView=u).__name__="LassoSelectToolView";class d extends a.SelectTool{constructor(e){super(e),this.tool_name="Lasso Select",this.icon=c.tool_icon_lasso_select,this.event_type="pan",this.default_order=12}static init_LassoSelectTool(){this.prototype.default_view=u,this.define(({Boolean:e,Ref:t})=>({select_every_mousemove:[e,!0],overlay:[t(o.PolyAnnotation),s.DEFAULT_POLY_OVERLAY]})),this.register_alias("lasso_select",()=>new d)}}(n.LassoSelectTool=d).__name__="LassoSelectTool",d.init_LassoSelectTool()},function(e,t,n,r,i){r();const a=e(378),o=e(231),s=e(43),l=e(9),c=e(242);class u extends a.SelectToolView{initialize(){super.initialize(),this.data={sx:[],sy:[]}}connect_signals(){super.connect_signals(),this.connect(this.model.properties.active.change,()=>this._active_change())}_active_change(){this.model.active||this._clear_data()}_keyup(e){e.keyCode==s.Keys.Enter&&this._clear_data()}_doubletap(e){this._do_select(this.data.sx,this.data.sy,!0,this._select_mode(e)),this.plot_view.state.push("poly_select",{selection:this.plot_view.get_selection()}),this._clear_data()}_clear_data(){this.data={sx:[],sy:[]},this.model.overlay.update({xs:[],ys:[]})}_tap(e){var{sx:t,sy:e}=e;this.plot_view.frame.bbox.contains(t,e)&&(this.data.sx.push(t),this.data.sy.push(e),this.model.overlay.update({xs:l.copy(this.data.sx),ys:l.copy(this.data.sy)}))}_do_select(e,t,n,r){this._select({type:"poly",sx:e,sy:t},n,r)}}(n.PolySelectToolView=u).__name__="PolySelectToolView",n.DEFAULT_POLY_OVERLAY=()=>new o.PolyAnnotation({level:"overlay",xs_units:"screen",ys_units:"screen",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:2,line_dash:[4,4]});class d extends a.SelectTool{constructor(e){super(e),this.tool_name="Poly Select",this.icon=c.tool_icon_polygon_select,this.event_type="tap",this.default_order=11}static init_PolySelectTool(){this.prototype.default_view=u,this.define(({Ref:e})=>({overlay:[e(o.PolyAnnotation),n.DEFAULT_POLY_OVERLAY]})),this.register_alias("poly_select",()=>new d)}}(n.PolySelectTool=d).__name__="PolySelectTool",d.init_PolySelectTool()},function(e,t,n,r,i){r();const a=e(20),o=e(383),s=e(242);class l extends o.LineToolView{constructor(){super(...arguments),this._drawing=!1}_doubletap(e){if(this.model.active){for(const t of this.model.renderers)1==this._select_event(e,"replace",[t]).length&&(this._selected_renderer=t);this._show_intersections(),this._update_line_cds()}}_show_intersections(){if(this.model.active&&null!=this._selected_renderer){if(!this.model.renderers.length)return this._set_intersection([],[]),this._selected_renderer=null,void(this._drawing=!1);const e=this._selected_renderer.data_source,t=this._selected_renderer.glyph,[n,r]=[t.x.field,t.y.field],i=e.get_array(n),a=e.get_array(r);this._set_intersection(i,a)}}_tap(e){var t=this.model.intersection_renderer;if(null!=this._map_drag(e.sx,e.sy,t)){if(this._drawing&&this._selected_renderer){const n=this._select_mode(e);if(0==this._select_event(e,n,[t]).length)return}const n=this._select_mode(e);this._select_event(e,n,[t]),this._select_event(e,n,this.model.renderers)}}_update_line_cds(){if(null!=this._selected_renderer){const e=this.model.intersection_renderer.glyph,t=this.model.intersection_renderer.data_source,[n,r]=[e.x.field,e.y.field];if(n&&r){const e=t.data[n],i=t.data[r];this._selected_renderer.data_source.data[n]=e,this._selected_renderer.data_source.data[r]=i}this._emit_cds_changes(this._selected_renderer.data_source,!0,!0,!1)}}_pan_start(e){this._select_event(e,"append",[this.model.intersection_renderer]),this._basepoint=[e.sx,e.sy]}_pan(e){null!=this._basepoint&&(this._drag_points(e,[this.model.intersection_renderer],this.model.dimensions),this._selected_renderer&&this._selected_renderer.data_source.change.emit())}_pan_end(e){null!=this._basepoint&&(this._drag_points(e,[this.model.intersection_renderer]),this._emit_cds_changes(this.model.intersection_renderer.data_source,!1,!0,!0),this._selected_renderer&&this._emit_cds_changes(this._selected_renderer.data_source),this._basepoint=null)}activate(){this._drawing=!0}deactivate(){this._selected_renderer&&(this._drawing&&(this._drawing=!1),this._hide_intersections())}}(n.LineEditToolView=l).__name__="LineEditToolView";class c extends o.LineTool{constructor(e){super(e),this.tool_name="Line Edit Tool",this.icon=s.tool_icon_line_edit,this.event_type=["tap","pan","move"],this.default_order=4}static init_LineEditTool(){this.prototype.default_view=l,this.define(()=>({dimensions:[a.Dimensions,"both"]}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}(n.LineEditTool=c).__name__="LineEditTool",c.init_LineEditTool()},function(e,t,n,r,i){r();const o=e(8),a=e(370);class s extends a.EditToolView{_set_intersection(e,t){const n=this.model.intersection_renderer.glyph,r=this.model.intersection_renderer.data_source,[i,a]=[n.x.field,n.y.field];i&&(o.isArray(e)?r.data[i]=e:n.x={value:e}),a&&(o.isArray(t)?r.data[a]=t:n.y={value:t}),this._emit_cds_changes(r,!0,!0,!1)}_hide_intersections(){this._set_intersection([],[])}}(n.LineToolView=s).__name__="LineToolView";class l extends a.EditTool{constructor(e){super(e)}static init_LineTool(){this.define(({AnyRef:e})=>({intersection_renderer:[e()]}))}}(n.LineTool=l).__name__="LineTool",l.init_LineTool()},function(e,t,n,r,i){r();const a=e(1),o=e(237),s=e(20),l=a.__importStar(e(242));function y(e,t,n){const r=new Map;for(var[i,a]of e){const[e,o]=a.r_invert(t,n);r.set(i,{start:e,end:o})}return r}n.update_ranges=y;class c extends o.GestureToolView{_pan_start(e){this.last_dx=0,this.last_dy=0;const{sx:t,sy:n}=e,r=this.plot_view.frame.bbox;if(!r.contains(t,n)){const i=r.h_range,e=r.v_range;(t<i.start||t>i.end)&&(this.v_axis_only=!0),(n<e.start||n>e.end)&&(this.h_axis_only=!0)}null===(e=this.model.document)||void 0===e||e.interactive_start(this.plot_model)}_pan(e){this._update(e.deltaX,e.deltaY),null===(e=this.model.document)||void 0===e||e.interactive_start(this.plot_model)}_pan_end(e){this.h_axis_only=!1,this.v_axis_only=!1,null!=this.pan_info&&this.plot_view.state.push("pan",{range:this.pan_info})}_update(e,t){var n=this.plot_view.frame,r=e-this.last_dx,i=t-this.last_dy,a=n.bbox.h_range,o=a.start-r,s=a.end-r,l=n.bbox.v_range,c=l.start-i,u=l.end-i,d=this.model.dimensions;let h,f,p,m,g,_;p="width"!=d&&"both"!=d||this.v_axis_only?(h=a.start,f=a.end,0):(h=o,f=s,-r),_="height"!=d&&"both"!=d||this.h_axis_only?(m=l.start,g=l.end,0):(m=c,g=u,-i),this.last_dx=e,this.last_dy=t;var{x_scales:t,y_scales:n}=n,t=y(t,h,f),n=y(n,m,g);this.pan_info={xrs:t,yrs:n,sdx:p,sdy:_},this.plot_view.update_range(this.pan_info,{panning:!0})}}(n.PanToolView=c).__name__="PanToolView";class u extends o.GestureTool{constructor(e){super(e),this.tool_name="Pan",this.event_type="pan",this.default_order=10}static init_PanTool(){this.prototype.default_view=c,this.define(()=>({dimensions:[s.Dimensions,"both",{on_update(e,t){switch(e){case"both":t.icon=l.tool_icon_pan;break;case"width":t.icon=l.tool_icon_xpan;break;case"height":t.icon=l.tool_icon_ypan}}}]})),this.register_alias("pan",()=>new u({dimensions:"both"})),this.register_alias("xpan",()=>new u({dimensions:"width"})),this.register_alias("ypan",()=>new u({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}(n.PanTool=u).__name__="PanTool",u.init_PanTool()},function(e,t,n,r,i){r();const d=e(136),a=e(156),o=e(19),s=e(237),l=e(242);function c(e){switch(e){case 1:return 2;case 2:return 1;case 4:return 5;case 5:return 4;default:return e}}function h(e,t,n,r){if(null==t)return!1;t=n.compute(t);return Math.abs(e-t)<r}function f(e,t,n,r,i){let a=!0;if(null!=i.left&&null!=i.right){const t=n.invert(e);(t<i.left||t>i.right)&&(a=!1)}if(null!=i.bottom&&null!=i.top){const e=r.invert(t);(e<i.bottom||e>i.top)&&(a=!1)}return a}function u(e,t,n){let r=0;return e>=n.start&&e<=n.end&&(r+=1),t>=n.start&&t<=n.end&&(r+=1),r}function p(e,t,n,r){var i=t.compute(e),n=t.invert(i+n);return n>=r.start&&n<=r.end?n:e}function m(e,t,n){return e>t.start?(t.end=e,n):(t.end=t.start,t.start=e,c(n))}function g(e,t,n){return e<t.end?(t.start=e,n):(t.start=t.end,t.end=e,c(n))}function _(e,t,n,r){var[i,a]=t.r_compute(e.start,e.end),[i,a]=t.r_invert(i+n,a+n),n=u(e.start,e.end,r);u(i,a,r)>=n&&(e.start=i,e.end=a)}n.flip_side=c,n.is_near=h,n.is_inside=f,n.sides_inside=u,n.compute_value=p,n.update_range_end_side=m,n.update_range_start_side=g,n.update_range=_;class y extends s.GestureToolView{initialize(){super.initialize(),this.side=0,this.model.update_overlay_from_ranges()}connect_signals(){super.connect_signals(),null!=this.model.x_range&&this.connect(this.model.x_range.change,()=>this.model.update_overlay_from_ranges()),null!=this.model.y_range&&this.connect(this.model.y_range.change,()=>this.model.update_overlay_from_ranges())}_pan_start(e){this.last_dx=0,this.last_dy=0;var t=this.model.x_range,n=this.model.y_range,{frame:r}=this.plot_view,i=r.x_scale,a=r.y_scale,o=this.model.overlay,{left:s,right:l,top:c,bottom:u}=o,r=this.model.overlay.line_width+d.EDGE_TOLERANCE;null!=t&&this.model.x_interaction&&(h(e.sx,s,i,r)?this.side=1:h(e.sx,l,i,r)?this.side=2:f(e.sx,e.sy,i,a,o)&&(this.side=3)),null!=n&&this.model.y_interaction&&(0==this.side&&h(e.sy,u,a,r)&&(this.side=4),0==this.side&&h(e.sy,c,a,r)?this.side=5:f(e.sx,e.sy,i,a,this.model.overlay)&&(3==this.side?this.side=7:this.side=6))}_pan(e){var t=this.plot_view.frame,n=e.deltaX-this.last_dx,r=e.deltaY-this.last_dy,i=this.model.x_range,a=this.model.y_range,o=t.x_scale,s=t.y_scale;if(null!=i)if(3==this.side||7==this.side)_(i,o,n,t.x_range);else if(1==this.side){const e=p(i.start,o,n,t.x_range);this.side=g(e,i,this.side)}else if(2==this.side){const e=p(i.end,o,n,t.x_range);this.side=m(e,i,this.side)}if(null!=a)if(6==this.side||7==this.side)_(a,s,r,t.y_range);else if(4==this.side){const e=p(a.start,s,r,t.y_range);this.side=g(e,a,this.side)}else if(5==this.side){const e=p(a.end,s,r,t.y_range);this.side=m(e,a,this.side)}this.last_dx=e.deltaX,this.last_dy=e.deltaY}_pan_end(e){this.side=0}}(n.RangeToolView=y).__name__="RangeToolView";class v extends s.GestureTool{constructor(e){super(e),this.tool_name="Range Tool",this.icon=l.tool_icon_range,this.event_type="pan",this.default_order=1}static init_RangeTool(){this.prototype.default_view=y,this.define(({Boolean:e,Ref:t,Nullable:n})=>({x_range:[n(t(a.Range1d)),null],x_interaction:[e,!0],y_range:[n(t(a.Range1d)),null],y_interaction:[e,!0],overlay:[t(d.BoxAnnotation),()=>new d.BoxAnnotation({level:"overlay",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:.5,line_dash:[2,2]})]}))}initialize(){super.initialize(),this.overlay.in_cursor="grab",this.overlay.ew_cursor=null!=this.x_range&&this.x_interaction?"ew-resize":null,this.overlay.ns_cursor=null!=this.y_range&&this.y_interaction?"ns-resize":null}update_overlay_from_ranges(){null==this.x_range&&null==this.y_range&&(this.overlay.left=null,this.overlay.right=null,this.overlay.bottom=null,this.overlay.top=null,o.logger.warn("RangeTool not configured with any Ranges.")),null==this.x_range?(this.overlay.left=null,this.overlay.right=null):(this.overlay.left=this.x_range.start,this.overlay.right=this.x_range.end),null==this.y_range?(this.overlay.bottom=null,this.overlay.top=null):(this.overlay.bottom=this.y_range.start,this.overlay.top=this.y_range.end)}}(n.RangeTool=v).__name__="RangeTool",v.init_RangeTool()},function(e,t,n,r,i){r();const a=e(378),o=e(20),s=e(242);class l extends a.SelectToolView{_tap(e){"tap"==this.model.gesture&&this._handle_tap(e)}_doubletap(e){"doubletap"==this.model.gesture&&this._handle_tap(e)}_handle_tap(e){var{sx:t,sy:n}=e;this._select({type:"point",sx:t,sy:n},!0,this._select_mode(e))}_select(e,t,n){const{callback:r}=this.model;if("select"==this.model.behavior){var i;for([,i]of this._computed_renderers_by_data_source()){const a=i[0].get_selection_manager(),o=i.map(e=>this.plot_view.renderer_view(e)).filter(e=>null!=e);if(a.select(o,e,t,n)&&null!=r){const t=o[0].coordinates.x_scale.invert(e.sx),n=o[0].coordinates.y_scale.invert(e.sy),s={geometries:Object.assign(Object.assign({},e),{x:t,y:n}),source:a.source};r.execute(this.model,s)}}this._emit_selection_event(e),this.plot_view.state.push("tap",{selection:this.plot_view.get_selection()})}else for(const t of this.computed_renderers){const n=this.plot_view.renderer_view(t);if(null!=n){const l=t.get_selection_manager();if(l.inspect(n,e)&&null!=r){const t=n.coordinates.x_scale.invert(e.sx),c=n.coordinates.y_scale.invert(e.sy),u={geometries:Object.assign(Object.assign({},e),{x:t,y:c}),source:l.source};r.execute(this.model,u)}}}}}(n.TapToolView=l).__name__="TapToolView";class c extends a.SelectTool{constructor(e){super(e),this.tool_name="Tap",this.icon=s.tool_icon_tap_select,this.event_type="tap",this.default_order=10}static init_TapTool(){this.prototype.default_view=l,this.define(({Any:e,Enum:t,Nullable:n})=>({behavior:[o.TapBehavior,"select"],gesture:[t("tap","doubletap"),"tap"],callback:[n(e)]})),this.register_alias("click",()=>new c({behavior:"inspect"})),this.register_alias("tap",()=>new c),this.register_alias("doubletap",()=>new c({gesture:"doubletap"}))}}n.TapTool=c,c.__name__="TapTool",c.init_TapTool()},function(e,t,n,r,i){r();const a=e(237),o=e(20),s=e(242),h=e(384);class l extends a.GestureToolView{_scroll(e){let t=this.model.speed*e.delta;.9<t?t=.9:t<-.9&&(t=-.9),this._update_ranges(t)}_update_ranges(e){var{frame:t}=this.plot_view,n=t.bbox.h_range,r=t.bbox.v_range,[i,a]=[n.start,n.end],[o,s]=[r.start,r.end];let l,c,u,d;switch(this.model.dimension){case"height":{const t=Math.abs(s-o);l=i,c=a,u=o-t*e,d=s-t*e;break}case"width":{const t=Math.abs(a-i);l=i-t*e,c=a-t*e,u=o,d=s;break}}var{x_scales:r,y_scales:t}=t,t={xrs:h.update_ranges(r,l,c),yrs:h.update_ranges(t,u,d),factor:e};this.plot_view.state.push("wheel_pan",{range:t}),this.plot_view.update_range(t,{scrolling:!0}),null===(t=this.model.document)||void 0===t||t.interactive_start(this.plot_model)}}(n.WheelPanToolView=l).__name__="WheelPanToolView";class c extends a.GestureTool{constructor(e){super(e),this.tool_name="Wheel Pan",this.icon=s.tool_icon_wheel_pan,this.event_type="scroll",this.default_order=12}static init_WheelPanTool(){this.prototype.default_view=l,this.define(()=>({dimension:[o.Dimension,"width"]})),this.internal(({Number:e})=>({speed:[e,.001]})),this.register_alias("xwheel_pan",()=>new c({dimension:"width"})),this.register_alias("ywheel_pan",()=>new c({dimension:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimension)}}(n.WheelPanTool=c).__name__="WheelPanTool",c.init_WheelPanTool()},function(e,t,n,r,i){r();const a=e(237),s=e(368),o=e(20),l=e(27),c=e(242);class u extends a.GestureToolView{_pinch(e){var{sx:t,sy:n,scale:r,ctrlKey:i,shiftKey:e}=e;this._scroll({type:"wheel",sx:t,sy:n,delta:1<=r?20*(r-1):-20/r,ctrlKey:i,shiftKey:e})}_scroll(e){var{frame:t}=this.plot_view,n=t.bbox.h_range,r=t.bbox.v_range,{sx:i,sy:a}=e,o=this.model.dimensions,n=("width"==o||"both"==o)&&n.start<i&&i<n.end,r=("height"==o||"both"==o)&&r.start<a&&a<r.end;(n&&r||this.model.zoom_on_axis)&&(e=this.model.speed*e.delta,i=s.scale_range(t,e,n,r,{x:i,y:a}),this.plot_view.state.push("wheel_zoom",{range:i}),{maintain_focus:a}=this.model,this.plot_view.update_range(i,{scrolling:!0,maintain_focus:a}),null===(a=this.model.document)||void 0===a||a.interactive_start(this.plot_model))}}(n.WheelZoomToolView=u).__name__="WheelZoomToolView";class d extends a.GestureTool{constructor(e){super(e),this.tool_name="Wheel Zoom",this.icon=c.tool_icon_wheel_zoom,this.event_type=l.is_mobile?"pinch":"scroll",this.default_order=10}static init_WheelZoomTool(){this.prototype.default_view=u,this.define(({Boolean:e,Number:t})=>({dimensions:[o.Dimensions,"both"],maintain_focus:[e,!0],zoom_on_axis:[e,!0],speed:[t,1/600]})),this.register_alias("wheel_zoom",()=>new d({dimensions:"both"})),this.register_alias("xwheel_zoom",()=>new d({dimensions:"width"})),this.register_alias("ywheel_zoom",()=>new d({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}(n.WheelZoomTool=d).__name__="WheelZoomTool",d.init_WheelZoomTool()},function(e,t,n,r,i){r();const a=e(247),o=e(233),s=e(20),l=e(13),c=e(242);class u extends a.InspectToolView{_move(e){var t;this.model.active&&({sx:t,sy:e}=e,this.plot_view.frame.bbox.contains(t,e)?this._update_spans(t,e):this._update_spans(null,null))}_move_exit(e){this._update_spans(null,null)}_update_spans(e,t){var n=this.model.dimensions;"width"!=n&&"both"!=n||(this.model.spans.width.location=t),"height"!=n&&"both"!=n||(this.model.spans.height.location=e)}}n.CrosshairToolView=u,u.__name__="CrosshairToolView";class d extends a.InspectTool{constructor(e){super(e),this.tool_name="Crosshair",this.icon=c.tool_icon_crosshair}static init_CrosshairTool(){function n(e,t){return new o.Span({for_hover:!0,dimension:t,location_units:"screen",level:"overlay",line_color:e.line_color,line_width:e.line_width,line_alpha:e.line_alpha})}this.prototype.default_view=u,this.define(({Alpha:e,Number:t,Color:n})=>({dimensions:[s.Dimensions,"both"],line_color:[n,"black"],line_width:[t,1],line_alpha:[e,1]})),this.internal(({Struct:e,Ref:t})=>({spans:[e({width:t(o.Span),height:t(o.Span)}),e=>({width:n(e,"width"),height:n(e,"height")})]})),this.register_alias("crosshair",()=>new d)}get tooltip(){return this._get_dim_tooltip(this.dimensions)}get synthetic_renderers(){return l.values(this.spans)}}(n.CrosshairTool=d).__name__="CrosshairTool",d.init_CrosshairTool()},function(e,t,n,r,i){r();const a=e(53),o=e(13),s=e(34);class l extends a.Model{constructor(e){super(e)}static init_CustomJSHover(){this.define(({Unknown:e,String:t,Dict:n})=>({args:[n(e),{}],code:[t,""]}))}get values(){return o.values(this.args)}_make_code(e,t,n,r){return new Function(...o.keys(this.args),e,t,n,s.use_strict(r))}format(e,t,n){return this._make_code("value","format","special_vars",this.code)(...this.values,e,t,n)}}(n.CustomJSHover=l).__name__="CustomJSHover",l.init_CustomJSHover()},function(e,t,n,r,i){r();const a=e(1),o=e(247),d=e(390),s=e(254),b=e(61),l=e(123),h=e(62),x=e(63),w=e(127),c=a.__importStar(e(107)),f=e(182),T=e(43),p=e(22),A=e(13),m=e(245),g=e(8),u=e(122),_=e(20),y=e(242),v=e(15),k=e(161),M=a.__importStar(e(255));function S(e,t,n,r,i,a){var o={x:i[e],y:a[e]},a={x:i[e+1],y:a[e+1]};let s,l;if("span"==t.type)l="h"==t.direction?(s=Math.abs(o.x-n),Math.abs(a.x-n)):(s=Math.abs(o.y-r),Math.abs(a.y-r));else{const e={x:n,y:r};s=c.dist_2_pts(o,e),l=c.dist_2_pts(a,e)}return s<l?[[o.x,o.y],e]:[[a.x,a.y],e+1]}function E(e,t,n){return[[e[n],t[n]],n]}n._nearest_line_hit=S,n._line_hit=E;class C extends o.InspectToolView{initialize(){super.initialize(),this._ttmodels=new Map,this._ttviews=new Map}async lazy_initialize(){await super.lazy_initialize(),await this._update_ttmodels()}remove(){u.remove_views(this._ttviews),super.remove()}connect_signals(){super.connect_signals();var e=this.plot_model.properties.renderers,{renderers:t,tooltips:n}=this.model.properties;this.on_change(n,()=>delete this._template_el),this.on_change([e,t,n],async()=>this._update_ttmodels())}async _update_ttmodels(){const{_ttmodels:e,computed_renderers:t}=this;e.clear();var{tooltips:n}=this.model;if(null!=n)for(const t of this.computed_renderers){const r=new s.Tooltip({custom:g.isString(n)||g.isFunction(n),attachment:this.model.attachment,show_arrow:this.model.show_arrow});t instanceof b.GlyphRenderer?e.set(t,r):t instanceof l.GraphRenderer&&(e.set(t.node_renderer,r),e.set(t.edge_renderer,r))}const r=await u.build_views(this._ttviews,[...e.values()],{parent:this.plot_view});for(const e of r)e.render();const i=[...function*(){for(const e of t)e instanceof b.GlyphRenderer?yield e:e instanceof l.GraphRenderer&&(yield e.node_renderer,yield e.edge_renderer)}()],a=this._slots.get(this._update);if(null!=a){const e=new Set(i.map(e=>e.data_source));v.Signal.disconnect_receiver(this,a,e)}for(const e of i)this.connect(e.data_source.inspect,this._update)}get computed_renderers(){var{renderers:e,names:t}=this.model,n=this.plot_model.data_renderers;return k.compute_renderers(e,n,t)}get ttmodels(){return this._ttmodels}_clear(){this._inspect(1/0,1/0);for(var[,e]of this.ttmodels)e.clear()}_move(e){var t;this.model.active&&({sx:t,sy:e}=e,this.plot_view.frame.bbox.contains(t,e)?this._inspect(t,e):this._clear())}_move_exit(){this._clear()}_inspect(e,t){let n;n="mouse"==this.model.mode?{type:"point",sx:e,sy:t}:{type:"span",direction:"vline"==this.model.mode?"h":"v",sx:e,sy:t};for(const e of this.computed_renderers){const t=e.get_selection_manager(),r=this.plot_view.renderer_view(e);null!=r&&t.inspect(r,n)}this._emit_callback(n)}_update([s,{geometry:l}]){var r;if(this.model.active&&("point"==l.type||"span"==l.type)&&s instanceof b.GlyphRenderer&&("ignore"!=this.model.muted_policy||!s.muted)){const u=this.ttmodels.get(s);if(null!=u){const i=s.get_selection_manager();let o=i.inspectors.get(s);if(o=s.view.convert_selection_to_subset(o),o.is_empty())u.clear();else{var c=i.source,e=this.plot_view.renderer_view(s);if(null!=e){const{sx:d,sy:h}=l,f=e.coordinates.x_scale,p=e.coordinates.y_scale,m=f.invert(d),g=p.invert(h),{glyph:_}=e,y=[];if(_ instanceof x.LineView)for(const v of o.line_indices){let e,t,n=_._x[v+1],r=_._y[v+1],i=v;switch(this.model.line_policy){case"interp":[n,r]=_.get_interpolation_hit(v,l),e=f.compute(n),t=p.compute(r);break;case"prev":[[e,t],i]=E(_.sx,_.sy,v);break;case"next":[[e,t],i]=E(_.sx,_.sy,v+1);break;case"nearest":[[e,t],i]=S(v,l,d,h,_.sx,_.sy),n=_._x[i],r=_._y[i];break;default:[e,t]=[d,h]}const x={index:i,x:m,y:g,sx:d,sy:h,data_x:n,data_y:r,rx:e,ry:t,indices:o.line_indices,name:s.name};y.push([e,t,this._render_tooltips(c,i,x)])}for(const l of o.image_indices){const v={index:l.index,x:m,y:g,sx:d,sy:h,name:s.name},r=this._render_tooltips(c,l,v);y.push([d,h,r])}for(const u of o.indices)if(_ instanceof w.MultiLineView&&!A.isEmpty(o.multiline_indices))for(const v of o.multiline_indices[u.toString()]){let e,t,n,r=_._xs.get(u)[v],i=_._ys.get(u)[v],a=v;switch(this.model.line_policy){case"interp":[r,i]=_.get_interpolation_hit(u,v,l),e=f.compute(r),t=p.compute(i);break;case"prev":[[e,t],a]=E(_.sxs.get(u),_.sys.get(u),v);break;case"next":[[e,t],a]=E(_.sxs.get(u),_.sys.get(u),v+1);break;case"nearest":[[e,t],a]=S(v,l,d,h,_.sxs.get(u),_.sys.get(u)),r=_._xs.get(u)[a],i=_._ys.get(u)[a];break;default:throw new Error("shouldn't have happened")}const A={index:n=s instanceof b.GlyphRenderer?s.view.convert_indices_from_subset([u])[0]:u,x:m,y:g,sx:d,sy:h,data_x:r,data_y:i,segment_index:a,indices:o.multiline_indices,name:s.name};y.push([e,t,this._render_tooltips(c,n,A)])}else{const l=null===(r=_._x)||void 0===r?void 0:r[u],i=null===(r=_._y)||void 0===r?void 0:r[u];let t,n,e;if("snap_to_data"==this.model.point_policy){let e=_.get_anchor_point(this.model.anchor,u,[d,h]);if(null==e&&(e=_.get_anchor_point("center",u,[d,h]),null==e))continue;t=e.x,n=e.y}else[t,n]=[d,h];const f={index:e=s instanceof b.GlyphRenderer?s.view.convert_indices_from_subset([u])[0]:u,x:m,y:g,sx:d,sy:h,data_x:l,data_y:i,indices:o.indices,name:s.name};y.push([t,n,this._render_tooltips(c,e,f)])}if(0==y.length)u.clear();else{const{content:s}=u;T.empty(u.content);for(const[,,l]of y)null!=l&&s.appendChild(l);const[l,v]=y[y.length-1];u.setv({position:[l,v]},{check_eq:!1})}}}}}}_emit_callback(e){const{callback:t}=this.model;if(null!=t)for(const r of this.computed_renderers)if(r instanceof b.GlyphRenderer){var n=this.plot_view.renderer_view(r);if(null!=n){const{x_scale:i,y_scale:a}=n.coordinates,o=i.invert(e.sx),s=a.invert(e.sy),l=r.data_source.inspected;t.execute(this.model,{geometry:Object.assign({x:o,y:s},e),renderer:r,index:l})}}}_create_template(e){const t=T.div({style:{display:"table",borderSpacing:"2px"}});for(var[n]of e){const e=T.div({style:{display:"table-row"}});t.appendChild(e);n=T.div({style:{display:"table-cell"},class:M.tooltip_row_label},0!=n.length?`${n}: `:"");e.appendChild(n);const r=T.span();r.dataset.value="";const i=T.span({class:M.tooltip_color_block}," ");i.dataset.swatch="",T.undisplay(i);n=T.div({style:{display:"table-cell"},class:M.tooltip_row_value},r,i);e.appendChild(n)}return t}_render_template(e,t,n,r,i){const a=e.cloneNode(!0),o=a.querySelectorAll("[data-value]"),s=a.querySelectorAll("[data-swatch]"),l=/\$color(\[.*\])?:(\w*)/,c=/\$swatch:(\w*)/;for(const[[,e],a]of m.enumerate(t)){const t=e.match(c),u=e.match(l);if(null!=t||null!=u){if(null!=t){const[,e]=t,i=n.get_column(e);if(null==i)o[a].textContent=`${e} unknown`;else{const e=g.isNumber(r)?i[r]:null;null!=e&&(s[a].style.backgroundColor=p.color2css(e),T.display(s[a]))}}if(null!=u){const[,e="",t]=u,i=n.get_column(t);if(null!=i){const l=0<=e.indexOf("hex"),c=0<=e.indexOf("swatch"),d=g.isNumber(r)?i[r]:null;null!=d?(o[a].textContent=l?p.color2hex(d):p.color2css(d),c&&(s[a].style.backgroundColor=p.color2css(d),T.display(s[a]))):o[a].textContent="(null)"}else o[a].textContent=`${t} unknown`}}else{const t=f.replace_placeholders(e.replace("$~","$data_"),n,r,this.model.formatters,i);if(g.isString(t))o[a].textContent=t;else for(const e of t)o[a].appendChild(e)}}return a}_render_tooltips(e,t,n){const{tooltips:r}=this.model;if(g.isString(r)){const a=f.replace_placeholders({html:r},e,t,this.model.formatters,n);return T.div({},a)}if(g.isFunction(r))return r(e,n);if(null==r)return null;var i=null!==(i=this._template_el)&&void 0!==i?i:this._template_el=this._create_template(r);return this._render_template(i,r,e,t,n)}}(n.HoverToolView=C).__name__="HoverToolView";class L extends o.InspectTool{constructor(e){super(e),this.tool_name="Hover",this.icon=y.tool_icon_hover}static init_HoverTool(){this.prototype.default_view=C,this.define(({Any:e,Boolean:t,String:n,Array:r,Tuple:i,Dict:a,Or:o,Ref:s,Function:l,Auto:c,Nullable:u})=>({tooltips:[u(o(n,r(i(n,n)),l())),[["index","$index"],["data (x, y)","($x, $y)"],["screen (x, y)","($sx, $sy)"]]],formatters:[a(o(s(d.CustomJSHover),f.FormatterType)),{}],renderers:[o(r(s(h.DataRenderer)),c),"auto"],names:[r(n),[]],mode:[_.HoverMode,"mouse"],muted_policy:[_.MutedPolicy,"show"],point_policy:[_.PointPolicy,"snap_to_data"],line_policy:[_.LinePolicy,"nearest"],show_arrow:[t,!0],anchor:[_.Anchor,"center"],attachment:[_.TooltipAttachment,"horizontal"],callback:[u(e)]})),this.register_alias("hover",()=>new L)}}(n.HoverTool=L).__name__="HoverTool",L.init_HoverTool()},function(e,t,n,r,i){r();const a=e(15),o=e(53),s=e(238),l=e(247),c=e(245);class u extends o.Model{constructor(e){super(e)}static init_ToolProxy(){this.define(({Boolean:e,Array:t,Ref:n})=>({tools:[t(n(s.ButtonTool)),[]],active:[e,!1],disabled:[e,!1]}))}get button_view(){return this.tools[0].button_view}get event_type(){return this.tools[0].event_type}get tooltip(){return this.tools[0].tooltip}get tool_name(){return this.tools[0].tool_name}get icon(){return this.tools[0].computed_icon}get computed_icon(){return this.icon}get toggleable(){var e=this.tools[0];return e instanceof l.InspectTool&&e.toggleable}initialize(){super.initialize(),this.do=new a.Signal0(this,"do")}connect_signals(){super.connect_signals(),this.connect(this.do,()=>this.doit()),this.connect(this.properties.active.change,()=>this.set_active());for(const e of this.tools)this.connect(e.properties.active.change,()=>{this.active=e.active})}doit(){for(const e of this.tools)e.do.emit()}set_active(){for(const e of this.tools)e.active=this.active}get menu(){const{menu:e}=this.tools[0];if(null==e)return null;const t=[];for(const[n,r]of c.enumerate(e))if(null==n)t.push(null);else{const e=()=>{var e;for(const t of this.tools)null===(e=null===(e=t.menu)||void 0===e?void 0:e[r])||void 0===e||e.handler()};t.push(Object.assign(Object.assign({},n),{handler:e}))}return t}}(n.ToolProxy=u).__name__="ToolProxy",u.init_ToolProxy()},function(e,t,n,r,i){r();const a=e(20),o=e(9),s=e(13),l=e(248),c=e(235),u=e(392),d=e(319),h=e(221);class f extends l.ToolbarBase{constructor(e){super(e)}static init_ProxyToolbar(){this.define(({Array:e,Ref:t})=>({toolbars:[e(t(c.Toolbar)),[]]}))}initialize(){super.initialize(),this._merge_tools()}_merge_tools(){this._proxied_tools=[];const e={},t={},n={},r=[],i=[];for(const e of this.help)o.includes(i,e.redirect)||(r.push(e),i.push(e.redirect));this._proxied_tools.push(...r),this.help=r;for(const[e,t]of s.entries(this.gestures)){e in n||(n[e]={});for(const r of t.tools)r.type in n[e]||(n[e][r.type]=[]),n[e][r.type].push(r)}for(const t of this.inspectors)t.type in e||(e[t.type]=[]),e[t.type].push(t);for(const e of this.actions)e.type in t||(t[e.type]=[]),t[e.type].push(e);var a=(e,t=!1)=>{t=new u.ToolProxy({tools:e,active:t});return this._proxied_tools.push(t),t};for(const e of s.keys(n)){const t=this.gestures[e];t.tools=[];for(const r of s.keys(n[e])){const i=n[e][r];if(0<i.length)if("multi"==e)for(const e of i){const n=a([e]);t.tools.push(n),this.connect(n.properties.active.change,()=>this._active_change(n))}else{const e=a(i);t.tools.push(e),this.connect(e.properties.active.change,()=>this._active_change(e))}}}this.actions=[];for(const[e,n]of s.entries(t))if("CustomAction"==e)for(const e of n)this.actions.push(a([e]));else 0<n.length&&this.actions.push(a(n));this.inspectors=[];for(const t of s.values(e))0<t.length&&this.inspectors.push(a(t,!0));for(const[e,t]of s.entries(this.gestures))0!=t.tools.length&&(t.tools=o.sort_by(t.tools,e=>e.default_order),"pinch"!=e&&"scroll"!=e&&"multi"!=e&&(t.tools[0].active=!0))}}(n.ProxyToolbar=f).__name__="ProxyToolbar",f.init_ProxyToolbar();class p extends d.LayoutDOMView{initialize(){this.model.toolbar.toolbar_location=this.model.toolbar_location,super.initialize()}get child_models(){return[this.model.toolbar]}_update_layout(){this.layout=new h.ContentBox(this.child_views[0].el);var{toolbar:e}=this.model;e.horizontal?this.layout.set_sizing({width_policy:"fit",min_width:100,height_policy:"fixed"}):this.layout.set_sizing({width_policy:"fixed",height_policy:"fit",min_height:100})}}(n.ToolbarBoxView=p).__name__="ToolbarBoxView";class m extends d.LayoutDOM{constructor(e){super(e)}static init_ToolbarBox(){this.prototype.default_view=p,this.define(({Ref:e})=>({toolbar:[e(l.ToolbarBase)],toolbar_location:[a.Location,"right"]}))}}(n.ToolbarBox=m).__name__="ToolbarBox",m.init_ToolbarBox()},function(e,t,n,r,i){r();const a=e(1),c=e(53),u=a.__importStar(e(21)),d=e(8),h=e(13);n.resolve_defs=function(e,o){var t,n;function s(e){return null!=e.module?`${e.module}.${e.name}`:e.name}function l(e){if(d.isString(e))switch(e){case"Any":return u.Any;case"Unknown":return u.Unknown;case"Boolean":return u.Boolean;case"Number":return u.Number;case"Int":return u.Int;case"String":return u.String;case"Null":return u.Null}else switch(e[0]){case"Nullable":{const[,o]=e;return u.Nullable(l(o))}case"Or":{const[,...o]=e;return u.Or(...o.map(l))}case"Tuple":{const[,o,...r]=e;return u.Tuple(l(o),...r.map(l))}case"Array":{const[,o]=e;return u.Array(l(o))}case"Struct":{const[,...o]=e,i=o.map(([e,t])=>[e,l(t)]);return u.Struct(h.to_object(i))}case"Dict":{const[,o]=e;return u.Dict(l(o))}case"Map":{const[,o,a]=e;return u.Map(l(o),l(a))}case"Enum":{const[,...o]=e;return u.Enum(...o)}case"Ref":var[,t]=e,n=o.get(s(t));if(null!=n)return u.Ref(n);throw new Error(`${s(t)} wasn't defined before referencing it`);case"AnyRef":return u.AnyRef()}}for(const u of e){const e=(()=>{if(null==u.extends)return c.Model;var e=o.get(s(u.extends));if(null!=e)return e;throw new Error(`base model ${s(u.extends)} of ${s(u)} is not defined`)})(),d=((n=class extends e{}).__name__=u.name,n.__module__=u.module,n);for(const e of null!==(n=u.properties)&&void 0!==n?n:[]){const o=l(null!==(t=e.kind)&&void 0!==t?t:"Unknown");d.define({[e.name]:[o,e.default]})}for(const e of null!==(n=u.overrides)&&void 0!==n?n:[])d.override({[e.name]:e.default});o.register(d)}}},function(e,t,l,n,r){n();const c=e(5),u=e(240),d=e(122),h=e(43),f=e(396);l.index={},l.add_document_standalone=async function(i,a,o=[],t=!1){const s=new Map;async function n(e){let t;var n=i.roots().indexOf(e),n=o[n];null!=n?t=n:a.classList.contains(f.BOKEH_ROOT)?t=a:(t=h.div({class:f.BOKEH_ROOT}),a.appendChild(t));const r=await d.build_view(e,{parent:null});return r instanceof u.DOMView&&r.renderTo(t),s.set(e,r),l.index[e.id]=r,r}for(const a of i.roots())await n(a);return t&&(window.document.title=i.title()),i.on_change(e=>{e instanceof c.RootAddedEvent?n(e.model):e instanceof c.RootRemovedEvent?function(e){const t=s.get(e);null!=t&&(t.remove(),s.delete(e),delete l.index[e.id])}(e.model):t&&e instanceof c.TitleChangedEvent&&(window.document.title=e.title)}),[...s.values()]}},function(e,t,n,r,i){r();const a=e(43),o=e(44);function s(e){let t=document.getElementById(e);if(null==t)throw new Error(`Error rendering Bokeh model: could not find #${e} HTML tag`);if(!document.body.contains(t))throw new Error(`Error rendering Bokeh model: element #${e} must be under <body>`);if("SCRIPT"==t.tagName){const e=a.div({class:n.BOKEH_ROOT});a.replaceWith(t,e),t=e}return t}n.BOKEH_ROOT=o.root,n._resolve_element=function(e){var{elementid:e}=e;return null!=e?s(e):document.body},n._resolve_root_elements=function(e){const t=[];if(null!=e.root_ids&&null!=e.roots)for(const n of e.root_ids)t.push(s(e.roots[n]));return t}},function(e,t,n,r,i){r();const s=e(398),l=e(19),c=e(395);n._get_ws_url=function(e,t){let n,r="ws:";return"https:"==window.location.protocol&&(r="wss:"),null!=t?(n=document.createElement("a"),n.href=t):n=window.location,null!=e?"/"==e&&(e=""):e=n.pathname.replace(/\/+$/,""),r+"//"+n.host+e+"/ws"};const u={};n.add_document_from_session=async function(e,t,n,r=[],i=!1){var a=window.location.search.substr(1);let o;try{o=await function(e,t,n){var r=s.parse_token(t).session_id;e in u||(u[e]={});const i=u[e];return r in i||(i[r]=s.pull_session(e,t,n)),i[r]}(e,t,a)}catch(e){const n=s.parse_token(t).session_id;throw l.logger.error(`Failed to load Bokeh session ${n}: ${e}`),e}return c.add_document_standalone(o.document,n,r,i)}},function(e,t,r,n,i){n();const a=e(19),o=e(5),s=e(399),l=e(400),c=e(401);r.DEFAULT_SERVER_WEBSOCKET_URL="ws://localhost:5006/ws",r.DEFAULT_TOKEN="eyJzZXNzaW9uX2lkIjogImRlZmF1bHQifQ";let u=0;function d(e){let t=e.split(".")[0];e=t.length%4;return 0!=e&&(t+="=".repeat(4-e)),JSON.parse(atob(t.replace(/_/g,"/").replace(/-/g,"+")))}r.parse_token=d;class h{constructor(e=r.DEFAULT_SERVER_WEBSOCKET_URL,t=r.DEFAULT_TOKEN,n=null){this.url=e,this.token=t,this.args_string=n,this._number=u++,this.socket=null,this.session=null,this.closed_permanently=!1,this._current_handler=null,this._pending_replies=new Map,this._pending_messages=[],this._receiver=new l.Receiver,this.id=d(t).session_id.split(".")[0],a.logger.debug(`Creating websocket ${this._number} to '${this.url}' session '${this.id}'`)}async connect(){if(this.closed_permanently)throw new Error("Cannot connect() a closed ClientConnection");if(null!=this.socket)throw new Error("Already connected");this._current_handler=null,this._pending_replies.clear(),this._pending_messages=[];try{let e=`${this.url}`;return null!=this.args_string&&0<this.args_string.length&&(e+=`?${this.args_string}`),this.socket=new WebSocket(e,["bokeh",this.token]),new Promise((e,t)=>{this.socket.binaryType="arraybuffer",this.socket.onopen=()=>this._on_open(e,t),this.socket.onmessage=e=>this._on_message(e),this.socket.onclose=e=>this._on_close(e,t),this.socket.onerror=()=>this._on_error(t)})}catch(e){throw a.logger.error(`websocket creation failed to url: ${this.url}`),a.logger.error(` - ${e}`),e}}close(){this.closed_permanently||(a.logger.debug(`Permanently closing websocket connection ${this._number}`),this.closed_permanently=!0,null!=this.socket&&this.socket.close(1e3,`close method called on ClientConnection ${this._number}`),this.session._connection_closed())}_schedule_reconnect(e){setTimeout(()=>{this.closed_permanently||a.logger.info(`Websocket connection ${this._number} disconnected, will not attempt to reconnect`)},e)}send(e){if(null==this.socket)throw new Error(`not connected so cannot send ${e}`);e.send(this.socket)}async send_with_reply(n){const e=await new Promise((e,t)=>{this._pending_replies.set(n.msgid(),{resolve:e,reject:t}),this.send(n)});if("ERROR"===e.msgtype())throw new Error(`Error reply ${e.content.text}`);return e}async _pull_doc_json(){var e=s.Message.create("PULL-DOC-REQ",{}),e=await this.send_with_reply(e);if(!("doc"in e.content))throw new Error("No 'doc' field in PULL-DOC-REPLY");return e.content.doc}async _repull_session_doc(e,t){var n;a.logger.debug(this.session?"Repulling session":"Pulling session for first time");try{const n=await this._pull_doc_json();if(null==this.session)if(this.closed_permanently)a.logger.debug("Got new document after connection was already closed"),t(new Error("The connection has been closed"));else{const t=o.Document.from_json(n),r=o.Document._compute_patch_since_json(n,t);if(0<r.events.length){a.logger.debug(`Sending ${r.events.length} changes from model construction back to server`);const e=s.Message.create("PATCH-DOC",{},r);this.send(e)}this.session=new c.ClientSession(this,t,this.id);for(const e of this._pending_messages)this.session.handle(e);this._pending_messages=[],a.logger.debug("Created a new session from new pulled doc"),e(this.session)}else this.session.document.replace_with_json(n),a.logger.debug("Updated existing session with new pulled doc")}catch(e){null===(n=console.trace)||void 0===n||n.call(console,e),a.logger.error(`Failed to repull session ${e}`),t(e instanceof Error?e:`${e}`)}}_on_open(t,n){a.logger.info(`Websocket connection ${this._number} is now open`),this._current_handler=e=>{this._awaiting_ack_handler(e,t,n)}}_on_message(e){null==this._current_handler&&a.logger.error("Got a message with no current handler set");try{this._receiver.consume(e.data)}catch(e){this._close_bad_protocol(`${e}`)}const t=this._receiver.message;if(null!=t){const e=t.problem();null!=e&&this._close_bad_protocol(e),this._current_handler(t)}}_on_close(e,t){a.logger.info(`Lost websocket ${this._number} connection, ${e.code} (${e.reason})`),this.socket=null,this._pending_replies.forEach(e=>e.reject("Disconnected")),this._pending_replies.clear(),this.closed_permanently||this._schedule_reconnect(2e3),t(new Error(`Lost websocket connection, ${e.code} (${e.reason})`))}_on_error(e){a.logger.debug(`Websocket error on socket ${this._number}`);var t="Could not open websocket";a.logger.error(`Failed to connect to Bokeh server: ${t}`),e(new Error(t))}_close_bad_protocol(e){a.logger.error(`Closing connection: ${e}`),null!=this.socket&&this.socket.close(1002,e)}_awaiting_ack_handler(e,t,n){"ACK"===e.msgtype()?(this._current_handler=e=>this._steady_state_handler(e),this._repull_session_doc(t,n)):this._close_bad_protocol("First message was not an ACK")}_steady_state_handler(e){const t=e.reqid(),n=this._pending_replies.get(t);n?(this._pending_replies.delete(t),n.resolve(e)):this.session?this.session.handle(e):"PATCH-DOC"!=e.msgtype()&&this._pending_messages.push(e)}}(r.ClientConnection=h).__name__="ClientConnection",r.pull_session=function(e,t,n){return new h(e,t,n).connect()}},function(e,t,n,r,i){r();const a=e(34);class o{constructor(e,t,n){this.header=e,this.metadata=t,this.content=n,this.buffers=new Map}static assemble(e,t,n){e=JSON.parse(e),t=JSON.parse(t),n=JSON.parse(n);return new o(e,t,n)}assemble_buffer(e,t){var n=null!=this.header.num_buffers?this.header.num_buffers:0;if(n<=this.buffers.size)throw new Error(`too many buffers received, expecting ${n}`);var{id:e}=JSON.parse(e);this.buffers.set(e,t)}static create(e,t,n={}){e=o.create_header(e);return new o(e,t,n)}static create_header(e){return{msgid:a.uniqueId(),msgtype:e}}complete(){return null!=this.header&&null!=this.metadata&&null!=this.content&&(null==this.header.num_buffers||this.buffers.size==this.header.num_buffers)}send(e){if(0<(null!=this.header.num_buffers?this.header.num_buffers:0))throw new Error("BokehJS only supports receiving buffers, not sending");var t=JSON.stringify(this.header),n=JSON.stringify(this.metadata),r=JSON.stringify(this.content);e.send(t),e.send(n),e.send(r)}msgid(){return this.header.msgid}msgtype(){return this.header.msgtype}reqid(){return this.header.reqid}problem(){return"msgid"in this.header?"msgtype"in this.header?null:"No msgtype in header":"No msgid in header"}}n.Message=o,o.__name__="Message"},function(e,t,n,r,i){r();const a=e(399),o=e(8);class s{constructor(){this.message=null,this._partial=null,this._fragments=[],this._buf_header=null,this._current_consumer=this._HEADER}consume(e){this._current_consumer(e)}_HEADER(e){this._assume_text(e),this.message=null,this._partial=null,this._fragments=[e],this._buf_header=null,this._current_consumer=this._METADATA}_METADATA(e){this._assume_text(e),this._fragments.push(e),this._current_consumer=this._CONTENT}_CONTENT(e){this._assume_text(e),this._fragments.push(e);var[t,n,e]=this._fragments.slice(0,3);this._partial=a.Message.assemble(t,n,e),this._check_complete()}_BUFFER_HEADER(e){this._assume_text(e),this._buf_header=e,this._current_consumer=this._BUFFER_PAYLOAD}_BUFFER_PAYLOAD(e){this._assume_binary(e),this._partial.assemble_buffer(this._buf_header,e),this._check_complete()}_assume_text(e){if(!o.isString(e))throw new Error("Expected text fragment but received binary fragment")}_assume_binary(e){if(!(e instanceof ArrayBuffer))throw new Error("Expected binary fragment but received text fragment")}_check_complete(){this._partial.complete()?(this.message=this._partial,this._current_consumer=this._HEADER):this._current_consumer=this._BUFFER_HEADER}}(n.Receiver=s).__name__="Receiver"},function(e,t,n,r,i){r();const a=e(5),o=e(399),s=e(19);class l{constructor(e,t,n){this._connection=e,this.document=t,this.id=n,this._document_listener=e=>{this._document_changed(e)},this.document.on_change(this._document_listener,!0)}handle(e){var t=e.msgtype();"PATCH-DOC"===t?this._handle_patch(e):"OK"===t?this._handle_ok(e):"ERROR"===t?this._handle_error(e):s.logger.debug(`Doing nothing with message ${e.msgtype()}`)}close(){this._connection.close()}_connection_closed(){this.document.remove_on_change(this._document_listener)}async request_server_info(){var e=o.Message.create("SERVER-INFO-REQ",{});return(await this._connection.send_with_reply(e)).content}async force_roundtrip(){await this.request_server_info()}_document_changed(e){e.setter_id!==this.id&&(e=e instanceof a.DocumentEventBatch?e.events:[e],e=this.document.create_json_patch(e),e=o.Message.create("PATCH-DOC",{},e),this._connection.send(e))}_handle_patch(e){this.document.apply_json_patch(e.content,e.buffers,this.id)}_handle_ok(e){s.logger.trace(`Unhandled OK reply to ${e.reqid()}`)}_handle_error(e){s.logger.error(`Unhandled ERROR reply to ${e.reqid()}: ${e.content.text}`)}}(n.ClientSession=l).__name__="ClientSession"},function(e,t,i,n,r){n();const c=e(1),a=e(5),u=e(400),d=e(19),o=e(43),s=e(13),l=e(395),h=e(396),f=c.__importDefault(e(44)),p=c.__importDefault(e(253)),m=c.__importDefault(e(403));function g(e,t){0<t.buffers.length?e.consume(t.buffers[0].buffer):e.consume(t.content.data);e=e.message;null!=e&&this.apply_json_patch(e.content,e.buffers)}o.stylesheet.append(f.default),o.stylesheet.append(p.default),o.stylesheet.append(m.default),i.kernels={},i.embed_items_notebook=function(e,t){if(1!=s.size(e))throw new Error("embed_items_notebook expects exactly one document in docs_json");var n=a.Document.from_json(s.values(e)[0]);for(const e of t){null!=e.notebook_comms_target&&function(s,l){if("undefined"!=typeof Jupyter&&null!=Jupyter.notebook.kernel){d.logger.info(`Registering Jupyter comms for target ${s}`);const i=Jupyter.notebook.kernel.comm_manager;try{i.register_target(s,e=>{d.logger.info(`Registering Jupyter comms for target ${s}`);var t=new u.Receiver;e.on_msg(g.bind(l,t))})}catch(s){d.logger.warn(`Jupyter comms failed to register. push_notebook() will not function. (exception reported: ${s})`)}}else if(l.roots()[0].id in i.kernels){d.logger.info(`Registering JupyterLab comms for target ${s}`);const e=i.kernels[l.roots()[0].id];try{e.registerCommTarget(s,e=>{d.logger.info(`Registering JupyterLab comms for target ${s}`);var t=new u.Receiver;e.onMsg=g.bind(l,t)})}catch(s){d.logger.warn(`Jupyter comms failed to register. push_notebook() will not function. (exception reported: ${s})`)}}else if("undefined"!=typeof google&&null!=google.colab.kernel){d.logger.info(`Registering Google Colab comms for target ${s}`);const i=google.colab.kernel.comms;try{i.registerTarget(s,async e=>{var t,n,r;d.logger.info(`Registering Google Colab comms for target ${s}`);var i=new u.Receiver;try{for(var a,o=c.__asyncValues(e.messages);!(a=await o.next()).done;){const s=a.value,e={data:s.data},t=[];for(const l of null!==(r=s.buffers)&&void 0!==r?r:[])t.push(new DataView(l));const n={content:e,buffers:t};g.bind(l)(i,n)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&await n.call(o)}finally{if(t)throw t.error}}})}catch(s){d.logger.warn(`Google Colab comms failed to register. push_notebook() will not function. (exception reported: ${s})`)}}else console.warn("Jupyter notebooks comms not available. push_notebook() will not function. If running JupyterLab ensure the latest @bokeh/jupyter_bokeh extension is installed. In an exported notebook this warning is expected.")}(e.notebook_comms_target,n);const t=h._resolve_element(e),r=h._resolve_root_elements(e);l.add_document_standalone(n,t,r)}}},function(e,t,n,r,i){r(),n.root="bk-root",n.tooltip="bk-tooltip",n.default=".rendered_html .bk-root .bk-tooltip table,.rendered_html .bk-root .bk-tooltip tr,.rendered_html .bk-root .bk-tooltip th,.rendered_html .bk-root .bk-tooltip td{border:none;padding:1px;}"},function(e,t,n,r,i){r();const a=e(1);a.__exportStar(e(399),n),a.__exportStar(e(400),n)},function(e,t,n,r,i){function a(){const e=document.getElementsByTagName("body")[0],t=document.getElementsByClassName("bokeh-test-div");1==t.length&&(e.removeChild(t[0]),delete t[0]);const n=document.createElement("div");n.classList.add("bokeh-test-div"),n.style.display="none",e.insertBefore(n,e.firstChild)}r(),n.results={},n.init=function(){a()},n.record0=function(e,t){n.results[e]=t},n.record=function(e,t){n.results[e]=t,a()},n.count=function(e){null==n.results[e]&&(n.results[e]=0),n.results[e]+=1,a()}},function(e,t,n,r,i){r(),n.safely=function(e,t=!1){try{return e()}catch(e){if(function(e){const t=document.createElement("div");t.style.backgroundColor="#f2dede",t.style.border="1px solid #a94442",t.style.borderRadius="4px",t.style.display="inline-block",t.style.fontFamily="sans-serif",t.style.marginTop="5px",t.style.minWidth="200px",t.style.padding="5px 5px 5px 10px",t.classList.add("bokeh-error-box-into-flames");const n=document.createElement("span");n.style.backgroundColor="#a94442",n.style.borderRadius="0px 4px 0px 0px",n.style.color="white",n.style.cursor="pointer",n.style.cssFloat="right",n.style.fontSize="0.8em",n.style.margin="-6px -6px 0px 0px",n.style.padding="2px 5px 4px 5px",n.title="close",n.setAttribute("aria-label","close"),n.appendChild(document.createTextNode("x")),n.addEventListener("click",()=>a.removeChild(t));const r=document.createElement("h3");r.style.color="#a94442",r.style.margin="8px 0px 0px 0px",r.style.padding="0px",r.appendChild(document.createTextNode("Bokeh Error"));const i=document.createElement("pre");i.style.whiteSpace="unset",i.style.overflowX="auto",i.appendChild(document.createTextNode(e)),t.appendChild(n),t.appendChild(r),t.appendChild(i);const a=document.getElementsByTagName("body")[0];a.insertBefore(t,a.firstChild)}(e instanceof Error&&e.stack?e.stack:`${e}`),t)return;throw e}}}],{main:0,tslib:1,index:2,version:3,"embed/index":4,"document/index":5,"document/document":6,base:7,"core/util/types":8,"core/util/array":9,"core/util/math":10,"core/util/assert":11,"core/util/arrayable":12,"core/util/object":13,"core/has_props":14,"core/signaling":15,"core/util/defer":16,"core/util/refs":17,"core/properties":18,"core/logging":19,"core/enums":20,"core/kinds":21,"core/util/color":22,"core/util/svg_colors":23,"core/types":24,"core/util/bitset":25,"core/util/eq":26,"core/util/platform":27,"core/settings":28,"core/util/ndarray":29,"core/serializer":30,"core/util/serialization":31,"core/util/buffer":32,"core/uniforms":33,"core/util/string":34,"document/events":35,"core/util/pretty":36,"core/util/cloneable":37,"models/index":38,"models/annotations/index":39,"models/annotations/annotation":40,"models/renderers/renderer":41,"core/view":42,"core/dom":43,"styles/root.css":44,"core/visuals/index":45,"core/visuals/line":46,"core/visuals/visual":47,"core/property_mixins":48,"core/visuals/fill":49,"core/visuals/text":50,"core/visuals/hatch":51,"core/visuals/patterns":52,model:53,"models/canvas/coordinates":54,"models/annotations/arrow":55,"models/annotations/data_annotation":56,"models/sources/columnar_data_source":57,"models/sources/data_source":58,"models/selections/selection":59,"core/selection_manager":60,"models/renderers/glyph_renderer":61,"models/renderers/data_renderer":62,"models/glyphs/line":63,"models/glyphs/xy_glyph":64,"core/util/projections":65,"models/glyphs/glyph":98,"core/util/bbox":99,"core/util/ragged_array":100,"core/util/spatial":101,"models/ranges/factor_range":104,"models/ranges/range":105,"models/glyphs/utils":106,"core/hittest":107,"models/glyphs/webgl/line":108,"models/glyphs/webgl/utils/index":109,"models/glyphs/webgl/utils/program":110,"models/glyphs/webgl/utils/buffer":111,"models/glyphs/webgl/utils/texture":112,"models/glyphs/webgl/base":113,"models/glyphs/webgl/line.vert":114,"models/glyphs/webgl/line.frag":115,"models/glyphs/patch":116,"models/glyphs/harea":117,"models/glyphs/area":118,"models/glyphs/varea":119,"models/sources/cds_view":120,"models/filters/filter":121,"core/build_views":122,"models/renderers/graph_renderer":123,"models/expressions/expression":124,"models/graphs/layout_provider":125,"models/graphs/graph_hit_test_policy":126,"models/glyphs/multi_line":127,"models/glyphs/patches":128,"models/selections/interaction_policy":129,"models/sources/column_data_source":130,"core/util/typed_array":131,"core/util/set":132,"models/annotations/arrow_head":133,"models/annotations/band":134,"models/annotations/upper_lower":135,"models/annotations/box_annotation":136,"models/annotations/color_bar":137,"models/annotations/title":138,"models/annotations/text_annotation":139,"core/layout/side_panel":140,"core/layout/types":141,"core/layout/layoutable":142,"core/util/text":143,"models/canvas/cartesian_frame":144,"models/scales/categorical_scale":145,"models/scales/scale":146,"models/transforms/index":147,"models/transforms/customjs_transform":148,"models/transforms/transform":149,"models/transforms/dodge":150,"models/transforms/range_transform":151,"models/transforms/interpolator":152,"models/transforms/jitter":153,"models/transforms/linear_interpolator":154,"models/transforms/step_interpolator":155,"models/ranges/range1d":156,"models/scales/log_scale":157,"models/scales/continuous_scale":158,"models/ranges/data_range1d":159,"models/ranges/data_range":160,"models/util":161,"models/axes/index":162,"models/axes/axis":163,"models/renderers/guide_renderer":164,"models/tickers/ticker":165,"models/formatters/tick_formatter":166,"core/graphics":167,"core/util/affine":168,"models/policies/labeling":169,"models/axes/categorical_axis":170,"models/tickers/categorical_ticker":171,"models/formatters/categorical_tick_formatter":172,"models/axes/continuous_axis":173,"models/axes/datetime_axis":174,"models/axes/linear_axis":175,"models/formatters/basic_tick_formatter":176,"models/tickers/basic_ticker":177,"models/tickers/adaptive_ticker":178,"models/tickers/continuous_ticker":179,"models/formatters/datetime_tick_formatter":180,"core/util/templating":182,"models/tickers/datetime_ticker":185,"models/tickers/composite_ticker":186,"models/tickers/days_ticker":187,"models/tickers/single_interval_ticker":188,"models/tickers/util":189,"models/tickers/months_ticker":190,"models/tickers/years_ticker":191,"models/axes/log_axis":192,"models/formatters/log_tick_formatter":193,"models/tickers/log_ticker":194,"models/axes/mercator_axis":195,"models/formatters/mercator_tick_formatter":196,"models/tickers/mercator_ticker":197,"models/tickers/index":198,"models/tickers/fixed_ticker":199,"models/tickers/binned_ticker":200,"models/mappers/scanning_color_mapper":201,"models/mappers/continuous_color_mapper":202,"models/mappers/color_mapper":203,"models/mappers/mapper":204,"models/formatters/index":205,"models/formatters/func_tick_formatter":206,"models/formatters/numeral_tick_formatter":207,"models/formatters/printf_tick_formatter":208,"models/mappers/index":209,"models/mappers/categorical_color_mapper":210,"models/mappers/categorical_mapper":211,"models/mappers/categorical_marker_mapper":212,"models/mappers/categorical_pattern_mapper":213,"models/mappers/linear_color_mapper":214,"models/mappers/log_color_mapper":215,"models/mappers/eqhist_color_mapper":216,"models/scales/index":217,"models/scales/linear_scale":218,"models/scales/linear_interpolation_scale":219,"models/ranges/index":220,"core/layout/index":221,"core/layout/alignments":222,"core/layout/grid":223,"core/layout/html":224,"core/layout/border":225,"models/annotations/label":226,"models/annotations/label_set":227,"models/annotations/legend":228,"models/annotations/legend_item":229,"core/vectorization":230,"models/annotations/poly_annotation":231,"models/annotations/slope":232,"models/annotations/span":233,"models/annotations/toolbar_panel":234,"models/tools/toolbar":235,"models/tools/tool":236,"models/tools/gestures/gesture_tool":237,"models/tools/button_tool":238,"core/dom_view":240,"styles/toolbar.css":241,"styles/icons.css":242,"styles/menus.css":243,"core/util/menus":244,"core/util/iterator":245,"models/tools/on_off_button":246,"models/tools/inspectors/inspect_tool":247,"models/tools/toolbar_base":248,"core/util/canvas":249,"core/util/svg":250,"models/tools/actions/action_tool":251,"models/tools/actions/help_tool":252,"styles/logo.css":253,"models/annotations/tooltip":254,"styles/tooltips.css":255,"models/annotations/whisker":256,"models/callbacks/index":257,"models/callbacks/customjs":258,"models/callbacks/callback":259,"models/callbacks/open_url":260,"models/canvas/index":261,"models/canvas/canvas":262,"core/ui_events":263,"core/bokeh_events":264,"core/util/wheel":265,"models/expressions/index":266,"models/expressions/customjs_expr":267,"models/expressions/stack":268,"models/expressions/cumsum":269,"models/expressions/minimum":270,"models/expressions/maximum":271,"models/filters/index":272,"models/filters/boolean_filter":273,"models/filters/customjs_filter":274,"models/filters/group_filter":275,"models/filters/index_filter":276,"models/glyphs/index":277,"models/glyphs/annular_wedge":278,"models/glyphs/annulus":279,"models/glyphs/arc":280,"models/glyphs/bezier":281,"models/glyphs/circle":282,"models/glyphs/webgl/markers":283,"models/glyphs/webgl/markers.vert":284,"models/glyphs/webgl/markers.frag":285,"models/glyphs/ellipse":286,"models/glyphs/ellipse_oval":287,"models/glyphs/center_rotatable":288,"models/glyphs/hbar":289,"models/glyphs/box":290,"models/glyphs/hex_tile":291,"models/glyphs/image":292,"models/glyphs/image_base":293,"models/glyphs/image_rgba":294,"models/glyphs/image_url":295,"core/util/image":296,"models/glyphs/multi_polygons":297,"models/glyphs/oval":298,"models/glyphs/quad":299,"models/glyphs/quadratic":300,"models/glyphs/ray":301,"models/glyphs/rect":302,"models/glyphs/scatter":303,"models/glyphs/marker":304,"models/glyphs/defs":305,"models/glyphs/segment":306,"models/glyphs/spline":307,"core/util/interpolation":308,"models/glyphs/step":309,"models/glyphs/text":310,"models/glyphs/vbar":311,"models/glyphs/wedge":312,"models/graphs/index":313,"models/graphs/static_layout_provider":314,"models/grids/index":315,"models/grids/grid":316,"models/layouts/index":317,"models/layouts/box":318,"models/layouts/layout_dom":319,"models/layouts/column":320,"models/layouts/grid_box":321,"models/layouts/html_box":322,"models/layouts/panel":323,"models/layouts/row":324,"models/layouts/spacer":325,"models/layouts/tabs":326,"styles/tabs.css":327,"styles/buttons.css":328,"models/layouts/widget_box":329,"models/plots/index":330,"models/plots/gmap_plot":331,"models/plots/plot":332,"models/plots/plot_canvas":333,"core/util/throttle":334,"models/plots/range_manager":335,"models/plots/state_manager":336,"models/plots/gmap_plot_canvas":337,"models/policies/index":338,"models/renderers/index":339,"models/selections/index":340,"models/sources/index":341,"models/sources/server_sent_data_source":342,"models/sources/web_data_source":343,"models/sources/ajax_data_source":344,"models/sources/geojson_data_source":345,"models/tiles/index":346,"models/tiles/bbox_tile_source":347,"models/tiles/mercator_tile_source":348,"models/tiles/tile_source":349,"models/tiles/tile_utils":350,"models/tiles/quadkey_tile_source":351,"models/tiles/tile_renderer":352,"models/tiles/wmts_tile_source":353,"styles/tiles.css":354,"models/tiles/tms_tile_source":355,"models/textures/index":356,"models/textures/canvas_texture":357,"models/textures/texture":358,"models/textures/image_url_texture":359,"models/tools/index":360,"models/tools/actions/custom_action":361,"models/tools/actions/redo_tool":362,"models/tools/actions/reset_tool":363,"models/tools/actions/save_tool":364,"models/tools/actions/undo_tool":365,"models/tools/actions/zoom_in_tool":366,"models/tools/actions/zoom_base_tool":367,"core/util/zoom":368,"models/tools/actions/zoom_out_tool":369,"models/tools/edit/edit_tool":370,"models/tools/edit/box_edit_tool":371,"models/tools/edit/freehand_draw_tool":372,"models/tools/edit/point_draw_tool":373,"models/tools/edit/poly_draw_tool":374,"models/tools/edit/poly_tool":375,"models/tools/edit/poly_edit_tool":376,"models/tools/gestures/box_select_tool":377,"models/tools/gestures/select_tool":378,"models/tools/gestures/box_zoom_tool":379,"models/tools/gestures/lasso_select_tool":380,"models/tools/gestures/poly_select_tool":381,"models/tools/edit/line_edit_tool":382,"models/tools/edit/line_tool":383,"models/tools/gestures/pan_tool":384,"models/tools/gestures/range_tool":385,"models/tools/gestures/tap_tool":386,"models/tools/gestures/wheel_pan_tool":387,"models/tools/gestures/wheel_zoom_tool":388,"models/tools/inspectors/crosshair_tool":389,"models/tools/inspectors/customjs_hover":390,"models/tools/inspectors/hover_tool":391,"models/tools/tool_proxy":392,"models/tools/toolbar_box":393,"document/defs":394,"embed/standalone":395,"embed/dom":396,"embed/server":397,"client/connection":398,"protocol/message":399,"protocol/receiver":400,"client/session":401,"embed/notebook":402,"styles/notebook.css":403,"protocol/index":404,testing:405,safely:406},{}));var a;t.__bokeh__=!0,void 0!==e.Bokeh&&void 0!==e.Bokeh.__bokeh__||(e.Bokeh=t);const n=e.Bokeh;n[t.version]=t}(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t(e.Popper)}(this,function(e){"use strict";function t(n){if(n&&n.__esModule)return n;var r=Object.create(null);return n&&Object.keys(n).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(n,e),Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}}))}),r.default=n,Object.freeze(r)}var o=t(e);const d={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(e=>e.matches(t))},parents(e,t){const n=[];let r=e.parentNode;for(;r&&r.nodeType===Node.ELEMENT_NODE&&3!==r.nodeType;)r.matches(t)&&n.push(r),r=r.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]}},a="transitionend",s=e=>{for(;e+=Math.floor(1e6*Math.random()),document.getElementById(e););return e},n=t=>{let n=t.getAttribute("data-bs-target");if(!n||"#"===n){let e=t.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),n=e&&"#"!==e?e.trim():null}return n},l=e=>{e=n(e);return e&&document.querySelector(e)?e:null},i=e=>{e=n(e);return e?document.querySelector(e):null},c=e=>{e.dispatchEvent(new Event(a))},u=e=>!(!e||"object"!=typeof e)&&void 0!==(e=void 0!==e.jquery?e[0]:e).nodeType,h=e=>u(e)?e.jquery?e[0]:e:"string"==typeof e&&0<e.length?d.findOne(e):null,r=(i,a,o)=>{Object.keys(o).forEach(e=>{var t,n=o[e],r=a[e],t=r&&u(r)?"element":null==(t=r)?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(t))throw new TypeError(`${i.toUpperCase()}: Option "${e}" provided type "${t}" but expected type "${n}".`)})},f=e=>!(!u(e)||0===e.getClientRects().length)&&"visible"===getComputedStyle(e).getPropertyValue("visibility"),p=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),m=e=>{if(!document.documentElement.attachShadow)return null;if("function"!=typeof e.getRootNode)return e instanceof ShadowRoot?e:e.parentNode?m(e.parentNode):null;e=e.getRootNode();return e instanceof ShadowRoot?e:null},g=()=>{},_=e=>e.offsetHeight,y=()=>{var{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},v=[],b=()=>"rtl"===document.documentElement.dir;var x=r=>{var e;e=()=>{const e=y();if(e){const t=r.NAME,n=e.fn[t];e.fn[t]=r.jQueryInterface,e.fn[t].Constructor=r,e.fn[t].noConflict=()=>(e.fn[t]=n,r.jQueryInterface)}},"loading"===document.readyState?(v.length||document.addEventListener("DOMContentLoaded",()=>{v.forEach(e=>e())}),v.push(e)):e()};const w=e=>{"function"==typeof e&&e()},T=(n,r,e=!0)=>{if(e){e=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);var r=Number.parseFloat(t),e=Number.parseFloat(n);return r||e?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(r)+5;let t=!1;const i=({target:e})=>{e===r&&(t=!0,r.removeEventListener(a,i),w(n))};r.addEventListener(a,i),setTimeout(()=>{t||c(r)},e)}else w(n)},A=(e,t,n,r)=>{let i=e.indexOf(t);if(-1===i)return e[!n&&r?e.length-1:0];t=e.length;return i+=n?1:-1,r&&(i=(i+t)%t),e[Math.max(0,Math.min(i,t-1))]},k=/[^.]*(?=\..*)\.|.*/,M=/\..*/,S=/::\d+$/,E={};let C=1;const L={mouseenter:"mouseover",mouseleave:"mouseout"},D=/^(mouseenter|mouseleave)/i,O=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function P(e,t){return t&&`${t}::${C++}`||e.uidEvent||C++}function R(e){var t=P(e);return e.uidEvent=t,E[t]=E[t]||{},E[t]}function I(n,r,i=null){var a=Object.keys(n);for(let e=0,t=a.length;e<t;e++){var o=n[a[e]];if(o.originalHandler===r&&o.delegationSelector===i)return o}return null}function N(e,t,n){var r="string"==typeof t,t=r?n:t;let i=j(e);return O.has(i)||(i=e),[r,t,i]}function z(e,t,n,r,i){if("string"==typeof t&&e){n||(n=r,r=null),D.test(t)&&(s=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)},r?r=s(r):n=s(n));var[a,o,s]=N(t,n,r);const f=R(e),p=f[s]||(f[s]={}),m=I(p,o,a?n:null);if(m)m.oneOff=m.oneOff&&i;else{var l,c,u,d,h,t=P(o,t.replace(k,""));const g=a?(u=e,d=n,h=r,function n(r){var i=u.querySelectorAll(d);for(let{target:t}=r;t&&t!==this;t=t.parentNode)for(let e=i.length;e--;)if(i[e]===t)return r.delegateTarget=t,n.oneOff&&B.off(u,r.type,d,h),h.apply(t,[r]);return null}):(l=e,c=n,function e(t){return t.delegateTarget=l,e.oneOff&&B.off(l,t.type,c),c.apply(l,[t])});g.delegationSelector=a?n:null,g.originalHandler=o,g.oneOff=i,g.uidEvent=t,p[t]=g,e.addEventListener(s,g,a)}}}function F(e,t,n,r,i){r=I(t[n],r,i);r&&(e.removeEventListener(n,r,Boolean(i)),delete t[n][r.uidEvent])}function j(e){return e=e.replace(M,""),L[e]||e}const B={on(e,t,n,r){z(e,t,n,r,!1)},one(e,t,n,r){z(e,t,n,r,!0)},off(n,r,e,t){if("string"==typeof r&&n){const[i,a,o]=N(r,e,t),s=o!==r,l=R(n);t=r.startsWith(".");if(void 0!==a)return l&&l[o]?void F(n,l,o,a,i?e:null):void 0;t&&Object.keys(l).forEach(e=>{!function(t,n,r,i){const a=n[r]||{};Object.keys(a).forEach(e=>{e.includes(i)&&(e=a[e],F(t,n,r,e.originalHandler,e.delegationSelector))})}(n,l,e,r.slice(1))});const c=l[o]||{};Object.keys(c).forEach(e=>{var t=e.replace(S,"");s&&!r.includes(t)||(e=c[e],F(n,l,o,e.originalHandler,e.delegationSelector))})}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=y();var i=j(t),a=t!==i,o=O.has(i);let s,l=!0,c=!0,u=!1,d=null;return a&&r&&(s=r.Event(t,n),r(e).trigger(s),l=!s.isPropagationStopped(),c=!s.isImmediatePropagationStopped(),u=s.isDefaultPrevented()),o?(d=document.createEvent("HTMLEvents"),d.initEvent(i,l,!0)):d=new CustomEvent(t,{bubbles:l,cancelable:!0}),void 0!==n&&Object.keys(n).forEach(e=>{Object.defineProperty(d,e,{get(){return n[e]}})}),u&&d.preventDefault(),c&&e.dispatchEvent(d),d.defaultPrevented&&void 0!==s&&s.preventDefault(),d}},H=new Map;var U=function(e,t,n){H.has(e)||H.set(e,new Map);const r=H.get(e);r.has(t)||0===r.size?r.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},V=function(e,t){return H.has(e)&&H.get(e).get(t)||null},q=function(e,t){if(H.has(e)){const n=H.get(e);n.delete(t),0===n.size&&H.delete(e)}};class Y{constructor(e){(e=h(e))&&(this._element=e,U(this._element,this.constructor.DATA_KEY,this))}dispose(){q(this._element,this.constructor.DATA_KEY),B.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(e=>{this[e]=null})}_queueCallback(e,t,n=!0){T(e,t,n)}static getInstance(e){return V(e,this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.0.2"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}class G extends Y{static get NAME(){return"alert"}close(e){var t=e?this._getRootElement(e):this._element,e=this._triggerCloseEvent(t);null===e||e.defaultPrevented||this._removeElement(t)}_getRootElement(e){return i(e)||e.closest(".alert")}_triggerCloseEvent(e){return B.trigger(e,"close.bs.alert")}_removeElement(e){e.classList.remove("show");var t=e.classList.contains("fade");this._queueCallback(()=>this._destroyElement(e),e,t)}_destroyElement(e){e.remove(),B.trigger(e,"closed.bs.alert")}static jQueryInterface(t){return this.each(function(){const e=G.getOrCreateInstance(this);"close"===t&&e[t](this)})}static handleDismiss(t){return function(e){e&&e.preventDefault(),t.close(this)}}}B.on(document,"click.bs.alert.data-api",'[data-bs-dismiss="alert"]',G.handleDismiss(new G)),x(G);const W='[data-bs-toggle="button"]';class X extends Y{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const e=X.getOrCreateInstance(this);"toggle"===t&&e[t]()})}}function Z(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function J(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}B.on(document,"click.bs.button.data-api",W,e=>{e.preventDefault();e=e.target.closest(W);const t=X.getOrCreateInstance(e);t.toggle()}),x(X);const $={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${J(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${J(t)}`)},getDataAttributes(n){if(!n)return{};const r={};return Object.keys(n.dataset).filter(e=>e.startsWith("bs")).forEach(e=>{let t=e.replace(/^bs/,"");t=t.charAt(0).toLowerCase()+t.slice(1,t.length),r[t]=Z(n.dataset[e])}),r},getDataAttribute(e,t){return Z(e.getAttribute(`data-bs-${J(t)}`))},offset(e){e=e.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position(e){return{top:e.offsetTop,left:e.offsetLeft}}};var Q=".bs.carousel";const K={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ee={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},te="next",ne="prev",re="left",ie="right",ae={ArrowLeft:ie,ArrowRight:re},oe=`slid${Q}`;const se="active",le=".active.carousel-item";class ce extends Y{constructor(e,t){super(e),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._indicatorsElement=d.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return K}static get NAME(){return"carousel"}next(){this._slide(te)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(ne)}pause(e){e||(this._isPaused=!0),d.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(c(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=d.findOne(le,this._element);var t=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)B.one(this._element,oe,()=>this.to(e));else{if(t===e)return this.pause(),void this.cycle();t=t<e?te:ne;this._slide(t,this._items[e])}}_getConfig(e){return e={...K,...$.getDataAttributes(this._element),..."object"==typeof e?e:{}},r("carousel",e,ee),e}_handleSwipe(){var e=Math.abs(this.touchDeltaX);e<=40||(e=e/this.touchDeltaX,this.touchDeltaX=0,e&&this._slide(0<e?ie:re))}_addEventListeners(){this._config.keyboard&&B.on(this._element,"keydown.bs.carousel",e=>this._keydown(e)),"hover"===this._config.pause&&(B.on(this._element,"mouseenter.bs.carousel",e=>this.pause(e)),B.on(this._element,"mouseleave.bs.carousel",e=>this.cycle(e))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=e=>{!this._pointerEvent||"pen"!==e.pointerType&&"touch"!==e.pointerType?this._pointerEvent||(this.touchStartX=e.touches[0].clientX):this.touchStartX=e.clientX},n=e=>{this.touchDeltaX=e.touches&&1<e.touches.length?0:e.touches[0].clientX-this.touchStartX},r=e=>{!this._pointerEvent||"pen"!==e.pointerType&&"touch"!==e.pointerType||(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(e=>this.cycle(e),500+this._config.interval))};d.find(".carousel-item img",this._element).forEach(e=>{B.on(e,"dragstart.bs.carousel",e=>e.preventDefault())}),this._pointerEvent?(B.on(this._element,"pointerdown.bs.carousel",e=>t(e)),B.on(this._element,"pointerup.bs.carousel",e=>r(e)),this._element.classList.add("pointer-event")):(B.on(this._element,"touchstart.bs.carousel",e=>t(e)),B.on(this._element,"touchmove.bs.carousel",e=>n(e)),B.on(this._element,"touchend.bs.carousel",e=>r(e)))}_keydown(e){var t;/input|textarea/i.test(e.target.tagName)||(t=ae[e.key])&&(e.preventDefault(),this._slide(t))}_getItemIndex(e){return this._items=e&&e.parentNode?d.find(".carousel-item",e.parentNode):[],this._items.indexOf(e)}_getItemByOrder(e,t){e=e===te;return A(this._items,t,e,this._config.wrap)}_triggerSlideEvent(e,t){var n=this._getItemIndex(e),r=this._getItemIndex(d.findOne(le,this._element));return B.trigger(this._element,"slide.bs.carousel",{relatedTarget:e,direction:t,from:r,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=d.findOne(".active",this._indicatorsElement);e.classList.remove(se),e.removeAttribute("aria-current");const n=d.find("[data-bs-target]",this._indicatorsElement);for(let e=0;e<n.length;e++)if(Number.parseInt(n[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[e].classList.add(se),n[e].setAttribute("aria-current","true");break}}}_updateInterval(){const e=this._activeElement||d.findOne(le,this._element);var t;e&&((t=Number.parseInt(e.getAttribute("data-bs-interval"),10))?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval)}_slide(e,t){var n=this._directionToOrder(e);const r=d.findOne(le,this._element),i=this._getItemIndex(r),a=t||this._getItemByOrder(n,r),o=this._getItemIndex(a);e=Boolean(this._interval),t=n===te;const s=t?"carousel-item-start":"carousel-item-end",l=t?"carousel-item-next":"carousel-item-prev",c=this._orderToDirection(n);if(a&&a.classList.contains(se))this._isSliding=!1;else if(!this._isSliding){n=this._triggerSlideEvent(a,c);if(!n.defaultPrevented&&r&&a){this._isSliding=!0,e&&this.pause(),this._setActiveIndicatorElement(a),this._activeElement=a;const u=()=>{B.trigger(this._element,oe,{relatedTarget:a,direction:c,from:i,to:o})};this._element.classList.contains("slide")?(a.classList.add(l),_(a),r.classList.add(s),a.classList.add(s),this._queueCallback(()=>{a.classList.remove(s,l),a.classList.add(se),r.classList.remove(se,l,s),this._isSliding=!1,setTimeout(u,0)},r,!0)):(r.classList.remove(se),a.classList.add(se),this._isSliding=!1,u()),e&&this.cycle()}}}_directionToOrder(e){return[ie,re].includes(e)?b()?e===re?ne:te:e===re?te:ne:e}_orderToDirection(e){return[te,ne].includes(e)?b()?e===ne?re:ie:e===ne?ie:re:e}static carouselInterface(e,t){const n=ce.getOrCreateInstance(e,t);let{_config:r}=n;"object"==typeof t&&(r={...r,...t});e="string"==typeof t?t:r.slide;if("number"==typeof t)n.to(t);else if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}else r.interval&&r.ride&&(n.pause(),n.cycle())}static jQueryInterface(e){return this.each(function(){ce.carouselInterface(this,e)})}static dataApiClickHandler(e){const t=i(this);if(t&&t.classList.contains("carousel")){const r={...$.getDataAttributes(t),...$.getDataAttributes(this)};var n=this.getAttribute("data-bs-slide-to");n&&(r.interval=!1),ce.carouselInterface(t,r),n&&ce.getInstance(t).to(n),e.preventDefault()}}}B.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",ce.dataApiClickHandler),B.on(window,"load.bs.carousel.data-api",()=>{var n=d.find('[data-bs-ride="carousel"]');for(let e=0,t=n.length;e<t;e++)ce.carouselInterface(n[e],ce.getInstance(n[e]))}),x(ce);const ue="bs.collapse";ue;const de={toggle:!0,parent:""},he={toggle:"boolean",parent:"(string|element)"};const fe="show",pe="collapse",me="collapsing",ge="collapsed",_e='[data-bs-toggle="collapse"]';class ye extends Y{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=d.find(`${_e}[href="#${this._element.id}"],`+`${_e}[data-bs-target="#${this._element.id}"]`);var n=d.find(_e);for(let e=0,t=n.length;e<t;e++){var r=n[e],i=l(r),a=d.find(i).filter(e=>e===this._element);null!==i&&a.length&&(this._selector=i,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return de}static get NAME(){return"collapse"}toggle(){this._element.classList.contains(fe)?this.hide():this.show()}show(){if(!this._isTransitioning&&!this._element.classList.contains(fe)){let e,t;this._parent&&(e=d.find(".show, .collapsing",this._parent).filter(e=>"string"==typeof this._config.parent?e.getAttribute("data-bs-parent")===this._config.parent:e.classList.contains(pe)),0===e.length&&(e=null));const r=d.findOne(this._selector);if(e){var n=e.find(e=>r!==e);if(t=n?ye.getInstance(n):null,t&&t._isTransitioning)return}if(!B.trigger(this._element,"show.bs.collapse").defaultPrevented){e&&e.forEach(e=>{r!==e&&ye.collapseInterface(e,"hide"),t||U(e,ue,null)});const i=this._getDimension();this._element.classList.remove(pe),this._element.classList.add(me),this._element.style[i]=0,this._triggerArray.length&&this._triggerArray.forEach(e=>{e.classList.remove(ge),e.setAttribute("aria-expanded",!0)}),this.setTransitioning(!0);n=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(()=>{this._element.classList.remove(me),this._element.classList.add(pe,fe),this._element.style[i]="",this.setTransitioning(!1),B.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[i]=`${this._element[n]}px`}}}hide(){if(!this._isTransitioning&&this._element.classList.contains(fe)&&!B.trigger(this._element,"hide.bs.collapse").defaultPrevented){var e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,_(this._element),this._element.classList.add(me),this._element.classList.remove(pe,fe);var t=this._triggerArray.length;if(0<t)for(let e=0;e<t;e++){const n=this._triggerArray[e],r=i(n);r&&!r.classList.contains(fe)&&(n.classList.add(ge),n.setAttribute("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[e]="",this._queueCallback(()=>{this.setTransitioning(!1),this._element.classList.remove(me),this._element.classList.add(pe),B.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}}setTransitioning(e){this._isTransitioning=e}_getConfig(e){return(e={...de,...e}).toggle=Boolean(e.toggle),r("collapse",e,he),e}_getDimension(){return this._element.classList.contains("width")?"width":"height"}_getParent(){var{parent:e}=this._config,e=h(e),t=`${_e}[data-bs-parent="${e}"]`;return d.find(t,e).forEach(e=>{var t=i(e);this._addAriaAndCollapsedClass(t,[e])}),e}_addAriaAndCollapsedClass(e,t){if(e&&t.length){const n=e.classList.contains(fe);t.forEach(e=>{n?e.classList.remove(ge):e.classList.add(ge),e.setAttribute("aria-expanded",n)})}}static collapseInterface(e,t){let n=ye.getInstance(e);const r={...de,...$.getDataAttributes(e),..."object"==typeof t&&t?t:{}};if(!n&&r.toggle&&"string"==typeof t&&/show|hide/.test(t)&&(r.toggle=!1),n=n||new ye(e,r),"string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}static jQueryInterface(e){return this.each(function(){ye.collapseInterface(this,e)})}}B.on(document,"click.bs.collapse.data-api",_e,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const r=$.getDataAttributes(this);e=l(this);const t=d.find(e);t.forEach(e=>{const t=ye.getInstance(e);let n;n=t?(null===t._parent&&"string"==typeof r.parent&&(t._config.parent=r.parent,t._parent=t._getParent()),"toggle"):r,ye.collapseInterface(e,n)})}),x(ye);const ve="dropdown";var e=".bs.dropdown",be=".data-api";const xe="Escape",we="ArrowUp",Te="ArrowDown",Ae=new RegExp(`${we}|${Te}|Escape`);var Q=`click${e}${be}`,ke=`keydown${e}${be}`;const Me="show",Se='[data-bs-toggle="dropdown"]',Ee=".dropdown-menu",Ce=b()?"top-end":"top-start",Le=b()?"top-start":"top-end",De=b()?"bottom-end":"bottom-start",Oe=b()?"bottom-start":"bottom-end",Pe=b()?"left-start":"right-start",Re=b()?"right-start":"left-start",Ie={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Ne={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class ze extends Y{constructor(e,t){super(e),this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}static get Default(){return Ie}static get DefaultType(){return Ne}static get NAME(){return ve}toggle(){p(this._element)||(this._element.classList.contains(Me)?this.hide():this.show())}show(){if(!p(this._element)&&!this._menu.classList.contains(Me)){const n=ze.getParentFromElement(this._element);var e={relatedTarget:this._element};if(!B.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(this._inNavbar)$.setDataAttribute(this._menu,"popper","none");else{if(void 0===o)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=n:u(this._config.reference)?e=h(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const r=this._getPopperConfig();var t=r.modifiers.find(e=>"applyStyles"===e.name&&!1===e.enabled);this._popper=o.createPopper(e,this._menu,r),t&&$.setDataAttribute(this._menu,"popper","static")}"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(e=>B.on(e,"mouseover",g)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.toggle(Me),this._element.classList.toggle(Me),B.trigger(this._element,"shown.bs.dropdown",e)}}}hide(){var e;!p(this._element)&&this._menu.classList.contains(Me)&&(e={relatedTarget:this._element},this._completeHide(e))}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_addEventListeners(){B.on(this._element,"click.bs.dropdown",e=>{e.preventDefault(),this.toggle()})}_completeHide(e){B.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>B.off(e,"mouseover",g)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Me),this._element.classList.remove(Me),this._element.setAttribute("aria-expanded","false"),$.removeDataAttribute(this._menu,"popper"),B.trigger(this._element,"hidden.bs.dropdown",e))}_getConfig(e){if(e={...this.constructor.Default,...$.getDataAttributes(this._element),...e},r(ve,e,this.constructor.DefaultType),"object"==typeof e.reference&&!u(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${ve.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_getMenuElement(){return d.next(this._element,Ee)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains("dropend"))return Pe;if(e.classList.contains("dropstart"))return Re;var t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Le:Ce:t?Oe:De}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=d.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(f);n.length&&A(n,t,e===Te,!n.includes(t)).focus()}static dropdownInterface(e,t){const n=ze.getOrCreateInstance(e,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}static jQueryInterface(e){return this.each(function(){ze.dropdownInterface(this,e)})}static clearMenus(n){if(!n||2!==n.button&&("keyup"!==n.type||"Tab"===n.key)){var r=d.find(Se);for(let e=0,t=r.length;e<t;e++){const a=ze.getInstance(r[e]);if(a&&!1!==a._config.autoClose&&a._element.classList.contains(Me)){const o={relatedTarget:a._element};if(n){const s=n.composedPath();var i=s.includes(a._menu);if(s.includes(a._element)||"inside"===a._config.autoClose&&!i||"outside"===a._config.autoClose&&i)continue;if(a._menu.contains(n.target)&&("keyup"===n.type&&"Tab"===n.key||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;"click"===n.type&&(o.clickEvent=n)}a._completeHide(o)}}}}static getParentFromElement(e){return i(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?!("Space"===e.key||e.key!==xe&&(e.key!==Te&&e.key!==we||e.target.closest(Ee))):Ae.test(e.key)){var t=this.classList.contains(Me);if((t||e.key!==xe)&&(e.preventDefault(),e.stopPropagation(),!p(this))){var n=()=>this.matches(Se)?this:d.prev(this,Se)[0];return e.key===xe?(n().focus(),void ze.clearMenus()):e.key===we||e.key===Te?(t||n().click(),void ze.getInstance(n())._selectMenuItem(e)):void(t&&"Space"!==e.key||ze.clearMenus())}}}}B.on(document,ke,Se,ze.dataApiKeydownHandler),B.on(document,ke,Ee,ze.dataApiKeydownHandler),B.on(document,Q,ze.clearMenus),B.on(document,"keyup.bs.dropdown.data-api",ze.clearMenus),B.on(document,Q,Se,function(e){e.preventDefault(),ze.dropdownInterface(this)}),x(ze);const Fe=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",je=".sticky-top";class Be{constructor(){this._element=document.body}getWidth(){var e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",e=>e+t),this._setElementAttributes(Fe,"paddingRight",e=>e+t),this._setElementAttributes(je,"marginRight",e=>e-t)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const i=this.getWidth();this._applyManipulationCallback(e,e=>{var t;e!==this._element&&window.innerWidth>e.clientWidth+i||(this._saveInitialAttribute(e,n),t=window.getComputedStyle(e)[n],e.style[n]=`${r(Number.parseFloat(t))}px`)})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(Fe,"paddingRight"),this._resetElementAttributes(je,"marginRight")}_saveInitialAttribute(e,t){var n=e.style[t];n&&$.setDataAttribute(e,t,n)}_resetElementAttributes(e,n){this._applyManipulationCallback(e,e=>{var t=$.getDataAttribute(e,n);void 0===t?e.style.removeProperty(n):($.removeDataAttribute(e,n),e.style[n]=t)})}_applyManipulationCallback(e,t){u(e)?t(e):d.find(e,this._element).forEach(t)}isOverflowing(){return 0<this.getWidth()}}const He={isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Ue={isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},Ve="mousedown.bs.backdrop";class qe{constructor(e){this._config=this._getConfig(e),this._isAppended=!1,this._element=null}show(e){this._config.isVisible?(this._append(),this._config.isAnimated&&_(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation(()=>{w(e)})):w(e)}hide(e){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),w(e)})):w(e)}_getElement(){if(!this._element){const e=document.createElement("div");e.className="modal-backdrop",this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_getConfig(e){return(e={...He,..."object"==typeof e?e:{}}).rootElement=h(e.rootElement),r("backdrop",e,Ue),e}_append(){this._isAppended||(this._config.rootElement.appendChild(this._getElement()),B.on(this._getElement(),Ve,()=>{w(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(B.off(this._element,Ve),this._element.remove(),this._isAppended=!1)}_emulateAnimation(e){T(e,this._getElement(),this._config.isAnimated)}}const Ye=".bs.modal";const Ge={backdrop:!0,keyboard:!0,focus:!0},We={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Xe=(Ye,Ye,`hidden${Ye}`),Ze=`show${Ye}`,Je=(Ye,`focusin${Ye}`),$e=`resize${Ye}`,Qe=`click.dismiss${Ye}`,Ke=`keydown.dismiss${Ye}`,et=(Ye,`mousedown.dismiss${Ye}`);Ye;const tt="modal-open",nt="modal-static";class rt extends Y{constructor(e,t){super(e),this._config=this._getConfig(t),this._dialog=d.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Be}static get Default(){return Ge}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||B.trigger(this._element,Ze,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(tt),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),B.on(this._element,Qe,'[data-bs-dismiss="modal"]',e=>this.hide(e)),B.on(this._dialog,et,()=>{B.one(this._element,"mouseup.dismiss.bs.modal",e=>{e.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}hide(e){e&&["A","AREA"].includes(e.target.tagName)&&e.preventDefault(),this._isShown&&!this._isTransitioning&&(B.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,(e=this._isAnimated())&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),B.off(document,Je),this._element.classList.remove("show"),B.off(this._element,Qe),B.off(this._dialog,et),this._queueCallback(()=>this._hideModal(),this._element,e)))}dispose(){[window,this._dialog].forEach(e=>B.off(e,Ye)),this._backdrop.dispose(),super.dispose(),B.off(document,Je)}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new qe({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_getConfig(e){return e={...Ge,...$.getDataAttributes(this._element),..."object"==typeof e?e:{}},r("modal",e,We),e}_showElement(e){var t=this._isAnimated();const n=d.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),t&&_(this._element),this._element.classList.add("show"),this._config.focus&&this._enforceFocus();this._queueCallback(()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,B.trigger(this._element,"shown.bs.modal",{relatedTarget:e})},this._dialog,t)}_enforceFocus(){B.off(document,Je),B.on(document,Je,e=>{document===e.target||this._element===e.target||this._element.contains(e.target)||this._element.focus()})}_setEscapeEvent(){this._isShown?B.on(this._element,Ke,e=>{this._config.keyboard&&"Escape"===e.key?(e.preventDefault(),this.hide()):this._config.keyboard||"Escape"!==e.key||this._triggerBackdropTransition()}):B.off(this._element,Ke)}_setResizeEvent(){this._isShown?B.on(window,$e,()=>this._adjustDialog()):B.off(window,$e)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(tt),this._resetAdjustments(),this._scrollBar.reset(),B.trigger(this._element,Xe)})}_showBackdrop(e){B.on(this._element,Qe,e=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:e.target===e.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())}),this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(!B.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented){const{classList:e,scrollHeight:t,style:n}=this._element,r=t>document.documentElement.clientHeight;!r&&"hidden"===n.overflowY||e.contains(nt)||(r||(n.overflowY="hidden"),e.add(nt),this._queueCallback(()=>{e.remove(nt),r||this._queueCallback(()=>{n.overflowY=""},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){var e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=0<t;(!n&&e&&!b()||n&&!e&&b())&&(this._element.style.paddingLeft=`${t}px`),(n&&!e&&!b()||!n&&e&&b())&&(this._element.style.paddingRight=`${t}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const e=rt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](n)}})}}B.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(e){const t=i(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),B.one(t,Ze,e=>{e.defaultPrevented||B.one(t,Xe,()=>{f(this)&&this.focus()})});const n=rt.getOrCreateInstance(t);n.toggle(this)}),x(rt);ke=".bs.offcanvas";const it={backdrop:!0,keyboard:!0,scroll:!1},at={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},ot=".offcanvas.show",st=`hidden${ke}`,lt=`focusin${ke}`;class ct extends Y{constructor(e,t){super(e),this._config=this._getConfig(t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._addEventListeners()}static get NAME(){return"offcanvas"}static get Default(){return it}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||B.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||((new Be).hide(),this._enforceFocusOnElement(this._element)),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback(()=>{B.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(B.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(B.off(document,lt),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new Be).reset(),B.trigger(this._element,st)},this._element,!0)))}dispose(){this._backdrop.dispose(),super.dispose(),B.off(document,lt)}_getConfig(e){return e={...it,...$.getDataAttributes(this._element),..."object"==typeof e?e:{}},r("offcanvas",e,at),e}_initializeBackDrop(){return new qe({isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_enforceFocusOnElement(t){B.off(document,lt),B.on(document,lt,e=>{document===e.target||t===e.target||t.contains(e.target)||t.focus()}),t.focus()}_addEventListeners(){B.on(this._element,"click.dismiss.bs.offcanvas",'[data-bs-dismiss="offcanvas"]',()=>this.hide()),B.on(this._element,"keydown.dismiss.bs.offcanvas",e=>{this._config.keyboard&&"Escape"===e.key&&this.hide()})}static jQueryInterface(t){return this.each(function(){const e=ct.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}B.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(e){var t=i(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),!p(this)){B.one(t,st,()=>{f(this)&&this.focus()});e=d.findOne(ot);e&&e!==t&&ct.getInstance(e).hide();const n=ct.getOrCreateInstance(t);n.toggle(this)}}),B.on(window,"load.bs.offcanvas.data-api",()=>d.find(ot).forEach(e=>ct.getOrCreateInstance(e).show())),x(ct);const ut=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const dt=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i,ht=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;Q={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function ft(e,n,t){if(!e.length)return e;if(t&&"function"==typeof t)return t(e);const r=new window.DOMParser,i=r.parseFromString(e,"text/html"),a=Object.keys(n);var o=[].concat(...i.body.querySelectorAll("*"));for(let e=0,t=o.length;e<t;e++){const l=o[e];var s=l.nodeName.toLowerCase();if(a.includes(s)){const c=[].concat(...l.attributes),u=[].concat(n["*"]||[],n[s]||[]);c.forEach(e=>{((e,t)=>{var n=e.nodeName.toLowerCase();if(t.includes(n))return!ut.has(n)||Boolean(dt.test(e.nodeValue)||ht.test(e.nodeValue));const r=t.filter(e=>e instanceof RegExp);for(let e=0,t=r.length;e<t;e++)if(r[e].test(n))return!0;return!1})(e,u)||l.removeAttribute(e.nodeName)})}else l.remove()}return i.body.innerHTML}ke=".bs.tooltip";const pt="bs-tooltip",mt=new RegExp(`(^|\\s)${pt}\\S+`,"g"),gt=new Set(["sanitize","allowList","sanitizeFn"]),_t={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},yt={AUTO:"auto",TOP:"top",RIGHT:b()?"left":"right",BOTTOM:"bottom",LEFT:b()?"right":"left"},vt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:Q,popperConfig:null},bt={HIDE:`hide${ke}`,HIDDEN:`hidden${ke}`,SHOW:`show${ke}`,SHOWN:`shown${ke}`,INSERTED:`inserted${ke}`,CLICK:`click${ke}`,FOCUSIN:`focusin${ke}`,FOCUSOUT:`focusout${ke}`,MOUSEENTER:`mouseenter${ke}`,MOUSELEAVE:`mouseleave${ke}`},xt="fade",wt="show",Tt="show",At="hover";class kt extends Y{constructor(e,t){if(void 0===o)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(t),this.tip=null,this._setListeners()}static get Default(){return vt}static get NAME(){return"tooltip"}static get Event(){return bt}static get DefaultType(){return _t}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled)if(e){const t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click,t._isWithActiveTrigger()?t._enter(null,t):t._leave(null,t)}else this.getTipElement().classList.contains(wt)?this._leave(null,this):this._enter(null,this)}dispose(){clearTimeout(this._timeout),B.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._popper&&this._popper.destroy(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(this.isWithContent()&&this._isEnabled){var e=B.trigger(this._element,this.constructor.Event.SHOW);const n=m(this._element);var t=(null===n?this._element.ownerDocument.documentElement:n).contains(this._element);if(!e.defaultPrevented&&t){const r=this.getTipElement();t=s(this.constructor.NAME);r.setAttribute("id",t),this._element.setAttribute("aria-describedby",t),this.setContent(),this._config.animation&&r.classList.add(xt);t="function"==typeof this._config.placement?this._config.placement.call(this,r,this._element):this._config.placement,t=this._getAttachment(t);this._addAttachmentClass(t);const{container:i}=this._config;U(r,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(i.appendChild(r),B.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=o.createPopper(this._element,r,this._getPopperConfig(t)),r.classList.add(wt);const a="function"==typeof this._config.customClass?this._config.customClass():this._config.customClass;a&&r.classList.add(...a.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>{B.on(e,"mouseover",g)});t=this.tip.classList.contains(xt);this._queueCallback(()=>{var e=this._hoverState;this._hoverState=null,B.trigger(this._element,this.constructor.Event.SHOWN),"out"===e&&this._leave(null,this)},this.tip,t)}}}hide(){if(this._popper){const t=this.getTipElement();var e;B.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented||(t.classList.remove(wt),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>B.off(e,"mouseover",g)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger[At]=!1,e=this.tip.classList.contains(xt),this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==Tt&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),B.trigger(this._element,this.constructor.Event.HIDDEN),this._popper&&(this._popper.destroy(),this._popper=null))},this.tip,e),this._hoverState="")}}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const e=document.createElement("div");return e.innerHTML=this._config.template,this.tip=e.children[0],this.tip}setContent(){const e=this.getTipElement();this.setElementContent(d.findOne(".tooltip-inner",e),this.getTitle()),e.classList.remove(xt,wt)}setElementContent(e,t){if(null!==e)return u(t)?(t=h(t),void(this._config.html?t.parentNode!==e&&(e.innerHTML="",e.appendChild(t)):e.textContent=t.textContent)):void(this._config.html?(this._config.sanitize&&(t=ft(t,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=t):e.textContent=t)}getTitle(){let e=this._element.getAttribute("data-bs-original-title");return e=e||("function"==typeof this._config.title?this._config.title.call(this._element):this._config.title),e}updateAttachment(e){return"right"===e?"end":"left"===e?"start":e}_initializeOnDelegatedTarget(e,t){var n=this.constructor.DATA_KEY;return(t=t||V(e.delegateTarget,n))||(t=new this.constructor(e.delegateTarget,this._getDelegateConfig()),U(e.delegateTarget,n,t)),t}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(e){e={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:e=>this._handlePopperPlacementChange(e)}],onFirstUpdate:e=>{e.options.placement!==e.placement&&this._handlePopperPlacementChange(e)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(`${pt}-${this.updateAttachment(e)}`)}_getAttachment(e){return yt[e.toUpperCase()]}_setListeners(){const e=this._config.trigger.split(" ");e.forEach(e=>{var t;"click"===e?B.on(this._element,this.constructor.Event.CLICK,this._config.selector,e=>this.toggle(e)):"manual"!==e&&(t=e===At?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,e=e===At?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT,B.on(this._element,t,this._config.selector,e=>this._enter(e)),B.on(this._element,e,this._config.selector,e=>this._leave(e)))}),this._hideModalHandler=()=>{this._element&&this.hide()},B.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){var e=this._element.getAttribute("title"),t=typeof this._element.getAttribute("data-bs-original-title");!e&&"string"==t||(this._element.setAttribute("data-bs-original-title",e||""),!e||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}_enter(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusin"===e.type?"focus":At]=!0),t.getTipElement().classList.contains(wt)||t._hoverState===Tt?t._hoverState=Tt:(clearTimeout(t._timeout),t._hoverState=Tt,t._config.delay&&t._config.delay.show?t._timeout=setTimeout(()=>{t._hoverState===Tt&&t.show()},t._config.delay.show):t.show())}_leave(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusout"===e.type?"focus":At]=t._element.contains(e.relatedTarget)),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState="out",t._config.delay&&t._config.delay.hide?t._timeout=setTimeout(()=>{"out"===t._hoverState&&t.hide()},t._config.delay.hide):t.hide())}_isWithActiveTrigger(){for(const e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}_getConfig(e){const t=$.getDataAttributes(this._element);return Object.keys(t).forEach(e=>{gt.has(e)&&delete t[e]}),(e={...this.constructor.Default,...t,..."object"==typeof e&&e?e:{}}).container=!1===e.container?document.body:h(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),r("tooltip",e,this.constructor.DefaultType),e.sanitize&&(e.template=ft(e.template,e.allowList,e.sanitizeFn)),e}_getDelegateConfig(){const e={};if(this._config)for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e}_cleanTipClass(){const t=this.getTipElement(),e=t.getAttribute("class").match(mt);null!==e&&0<e.length&&e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}_handlePopperPlacementChange(e){var{state:e}=e;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}static jQueryInterface(t){return this.each(function(){const e=kt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}x(kt);ke=".bs.popover";const Mt="bs-popover",St=new RegExp(`(^|\\s)${Mt}\\S+`,"g"),Et={...kt.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Ct={...kt.DefaultType,content:"(string|element|function)"},Lt={HIDE:`hide${ke}`,HIDDEN:`hidden${ke}`,SHOW:`show${ke}`,SHOWN:`shown${ke}`,INSERTED:`inserted${ke}`,CLICK:`click${ke}`,FOCUSIN:`focusin${ke}`,FOCUSOUT:`focusout${ke}`,MOUSEENTER:`mouseenter${ke}`,MOUSELEAVE:`mouseleave${ke}`},Dt=".popover-header",Ot=".popover-body";class Pt extends kt{static get Default(){return Et}static get NAME(){return"popover"}static get Event(){return Lt}static get DefaultType(){return Ct}isWithContent(){return this.getTitle()||this._getContent()}getTipElement(){return this.tip||(this.tip=super.getTipElement(),this.getTitle()||d.findOne(Dt,this.tip).remove(),this._getContent()||d.findOne(Ot,this.tip).remove(),this.tip)}setContent(){const e=this.getTipElement();this.setElementContent(d.findOne(Dt,e),this.getTitle());let t=this._getContent();"function"==typeof t&&(t=t.call(this._element)),this.setElementContent(d.findOne(Ot,e),t),e.classList.remove("fade","show")}_addAttachmentClass(e){this.getTipElement().classList.add(`${Mt}-${this.updateAttachment(e)}`)}_getContent(){return this._element.getAttribute("data-bs-content")||this._config.content}_cleanTipClass(){const t=this.getTipElement(),e=t.getAttribute("class").match(St);null!==e&&0<e.length&&e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}static jQueryInterface(t){return this.each(function(){const e=Pt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}x(Pt);const Rt="scrollspy";const It=".bs.scrollspy";const Nt={offset:10,method:"auto",target:""},zt={offset:"number",method:"string",target:"(string|element)"};It,It;It;const Ft="dropdown-item",jt="active",Bt=".nav-link",Ht=".list-group-item";class Ut extends Y{constructor(e,t){super(e),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(t),this._selector=`${this._config.target} ${Bt}, ${this._config.target} ${Ht}, ${this._config.target} .${Ft}`,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,B.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return Nt}static get NAME(){return Rt}refresh(){var e=this._scrollElement===this._scrollElement.window?"offset":"position";const r="auto"===this._config.method?e:this._config.method,i="position"===r?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();const t=d.find(this._selector);t.map(e=>{var t=l(e);const n=t?d.findOne(t):null;if(n){e=n.getBoundingClientRect();if(e.width||e.height)return[$[r](n).top+i,t]}return null}).filter(e=>e).sort((e,t)=>e[0]-t[0]).forEach(e=>{this._offsets.push(e[0]),this._targets.push(e[1])})}dispose(){B.off(this._scrollElement,It),super.dispose()}_getConfig(t){if("string"!=typeof(t={...Nt,...$.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}}).target&&u(t.target)){let{id:e}=t.target;e||(e=s(Rt),t.target.id=e),t.target=`#${e}`}return r(Rt,t,zt),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;)this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}_activate(t){this._activeTarget=t,this._clear();const e=this._selector.split(",").map(e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`),n=d.findOne(e.join(","));n.classList.contains(Ft)?(d.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(jt),n.classList.add(jt)):(n.classList.add(jt),d.parents(n,".nav, .list-group").forEach(e=>{d.prev(e,`${Bt}, ${Ht}`).forEach(e=>e.classList.add(jt)),d.prev(e,".nav-item").forEach(e=>{d.children(e,Bt).forEach(e=>e.classList.add(jt))})})),B.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){d.find(this._selector).filter(e=>e.classList.contains(jt)).forEach(e=>e.classList.remove(jt))}static jQueryInterface(t){return this.each(function(){const e=Ut.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}B.on(window,"load.bs.scrollspy.data-api",()=>{d.find('[data-bs-spy="scroll"]').forEach(e=>new Ut(e))}),x(Ut);const Vt="active",qt=":scope > li > .active";class Yt extends Y{static get NAME(){return"tab"}show(){if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE||!this._element.classList.contains(Vt)){let e;var t=i(this._element),n=this._element.closest(".nav, .list-group");n&&(r="UL"===n.nodeName||"OL"===n.nodeName?qt:".active",e=d.find(r,n),e=e[e.length-1]);var r=e?B.trigger(e,"hide.bs.tab",{relatedTarget:this._element}):null;B.trigger(this._element,"show.bs.tab",{relatedTarget:e}).defaultPrevented||null!==r&&r.defaultPrevented||(this._activate(this._element,n),n=()=>{B.trigger(e,"hidden.bs.tab",{relatedTarget:this._element}),B.trigger(this._element,"shown.bs.tab",{relatedTarget:e})},t?this._activate(t,t.parentNode,n):n())}}_activate(e,t,n){const r=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?d.children(t,".active"):d.find(qt,t))[0];var i=n&&r&&r.classList.contains("fade"),t=()=>this._transitionComplete(e,r,n);r&&i?(r.classList.remove("show"),this._queueCallback(t,e,!0)):t()}_transitionComplete(e,t,n){if(t){t.classList.remove(Vt);const i=d.findOne(":scope > .dropdown-menu .active",t.parentNode);i&&i.classList.remove(Vt),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}e.classList.add(Vt),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),_(e),e.classList.contains("fade")&&e.classList.add("show");let r=e.parentNode;r&&"LI"===r.nodeName&&(r=r.parentNode),r&&r.classList.contains("dropdown-menu")&&((t=e.closest(".dropdown"))&&d.find(".dropdown-toggle",t).forEach(e=>e.classList.add(Vt)),e.setAttribute("aria-expanded",!0)),n&&n()}static jQueryInterface(t){return this.each(function(){const e=Yt.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}B.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),!p(this)){const t=Yt.getOrCreateInstance(this);t.show()}}),x(Yt);const Gt="show",Wt={animation:"boolean",autohide:"boolean",delay:"number"},Xt={animation:!0,autohide:!0,delay:5e3};class Zt extends Y{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Wt}static get Default(){return Xt}static get NAME(){return"toast"}show(){B.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),_(this._element),this._element.classList.add("showing"),this._queueCallback(()=>{this._element.classList.remove("showing"),this._element.classList.add(Gt),B.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(Gt)&&(B.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.remove(Gt),this._queueCallback(()=>{this._element.classList.add("hide"),B.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(Gt)&&this._element.classList.remove(Gt),super.dispose()}_getConfig(e){return e={...Xt,...$.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}},r("toast",e,this.constructor.DefaultType),e}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}t?this._clearTimeout():(e=e.relatedTarget,this._element===e||this._element.contains(e)||this._maybeScheduleHide())}_setListeners(){B.on(this._element,"click.dismiss.bs.toast",'[data-bs-dismiss="toast"]',()=>this.hide()),B.on(this._element,"mouseover.bs.toast",e=>this._onInteraction(e,!0)),B.on(this._element,"mouseout.bs.toast",e=>this._onInteraction(e,!1)),B.on(this._element,"focusin.bs.toast",e=>this._onInteraction(e,!0)),B.on(this._element,"focusout.bs.toast",e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Zt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}})}}return x(Zt),{Alert:G,Button:X,Carousel:ce,Collapse:ye,Dropdown:ze,Modal:rt,Offcanvas:ct,Popover:Pt,ScrollSpy:Ut,Tab:Yt,Toast:Zt,Tooltip:kt}}),function(e,t){"function"==typeof define&&define.amd?define([],t):e.htmx=t()}("undefined"!=typeof self?self:this,function(){"use strict";var htmx={onLoad:onLoadHelper,process:processNode,on:addEventListenerImpl,off:removeEventListenerImpl,trigger:triggerEvent,ajax:ajaxHelper,find:find,findAll:findAll,closest:closest,values:function(e,t){return getInputValues(e,t||"post").values},remove:removeElement,addClass:addClassToElement,removeClass:removeClassFromElement,toggleClass:toggleClassOnElement,takeClass:takeClassForElement,defineExtension:defineExtension,removeExtension:removeExtension,logAll:logAll,logger:null,useTemplateFragments:!1,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,attributesToSettle:["class","style","width","height"],withCredentials:!1,wsReconnectDelay:"full-jitter",disableSelector:"[hx-disable], [data-hx-disable]"},parseInterval:parseInterval,_:internalEval,createEventSource:function(e){return new EventSource(e,{withCredentials:!0})},createWebSocket:function(e){return new WebSocket(e,[])}},VERBS=["get","post","put","delete","patch"],VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function parseInterval(e){if(null!=e)return"ms"==e.slice(-2)?parseFloat(e.slice(0,-2))||void 0:"s"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1))||void 0:parseFloat(e)||void 0}function getRawAttribute(e,t){return e.getAttribute&&e.getAttribute(t)}function hasAttribute(e,t){return e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){return e.parentElement}function getDocument(){return document}function getClosestMatch(e,t){return t(e)?e:parentElt(e)?getClosestMatch(parentElt(e),t):null}function getClosestAttributeValue(e,t){var n=null;return getClosestMatch(e,function(e){return n=getAttributeValue(e,t)}),n}function matches(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function getStartTag(e){e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return e?e[1].toLowerCase():""}function parseHTML(e,t){for(var n=(new DOMParser).parseFromString(e,"text/html").body;0<t;)t--,n=n.firstChild;return n=null==n?getDocument().createDocumentFragment():n}function makeFragment(e){if(htmx.config.useTemplateFragments)return parseHTML("<body><template>"+e+"</template></body>",0).querySelector("template").content;switch(getStartTag(e)){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return parseHTML("<table>"+e+"</table>",1);case"col":return parseHTML("<table><colgroup>"+e+"</colgroup></table>",2);case"tr":return parseHTML("<table><tbody>"+e+"</tbody></table>",2);case"td":case"th":return parseHTML("<table><tbody><tr>"+e+"</tr></tbody></table>",3);case"script":return parseHTML("<div>"+e+"</div>",1);default:return parseHTML(e,0)}}function maybeCall(e){e&&e()}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return isType(e,"Function")}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){var t="htmx-internal-data";return e[t]||(e[t]={})}function toArray(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n]);return t}function forEach(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n])}function isScrolledIntoView(e){var t=e.getBoundingClientRect(),e=t.top,t=t.bottom;return e<window.innerHeight&&0<=t}function bodyContains(e){return getDocument().body.contains(e)}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function parseJSON(e){try{return JSON.parse(e)}catch(e){return logError(e),null}}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){return htmx.on("htmx:load",function(e){t(e.detail.elt)})}function logAll(){htmx.logger=function(e,t,n){console&&console.log(t,e,n)}}function find(e,t){return t?e.querySelector(t):find(getDocument(),e)}function findAll(e,t){return t?e.querySelectorAll(t):findAll(getDocument(),e)}function removeElement(e,t){e=resolveTarget(e),t?setTimeout(function(){removeElement(e)},t):e.parentElement.removeChild(e)}function addClassToElement(e,t,n){e=resolveTarget(e),n?setTimeout(function(){addClassToElement(e,t)},n):e.classList.add(t)}function removeClassFromElement(e,t,n){e=resolveTarget(e),n?setTimeout(function(){removeClassFromElement(e,t)},n):e.classList.remove(t)}function toggleClassOnElement(e,t){(e=resolveTarget(e)).classList.toggle(t)}function takeClassForElement(e,t){forEach((e=resolveTarget(e)).parentElement.children,function(e){removeClassFromElement(e,t)}),addClassToElement(e,t)}function closest(e,t){if((e=resolveTarget(e)).closest)return e.closest(t);do{if(null==e||matches(e,t))return e}while(e=e&&parentElt(e))}function querySelectorAllExt(e,t){return 0===t.indexOf("closest ")?[closest(e,t.substr(8))]:0===t.indexOf("find ")?[find(e,t.substr(5))]:getDocument().querySelectorAll(t)}function querySelectorExt(e,t){return querySelectorAllExt(e,t)[0]}function resolveTarget(e){return isType(e,"String")?find(e):e}function processEventArgs(e,t,n){return isFunction(t)?{target:getDocument().body,event:e,listener:t}:{target:resolveTarget(e),event:t,listener:n}}function addEventListenerImpl(t,n,r){return ready(function(){var e=processEventArgs(t,n,r);e.target.addEventListener(e.event,e.listener)}),isFunction(n)?n:r}function removeEventListenerImpl(t,n,r){return ready(function(){var e=processEventArgs(t,n,r);e.target.removeEventListener(e.event,e.listener)}),isFunction(n)?n:r}function getTarget(e){var t=getClosestMatch(e,function(e){return null!==getAttributeValue(e,"hx-target")});if(t){var n=getAttributeValue(t,"hx-target");return"this"===n?t:querySelectorExt(e,n)}return getInternalData(e).boosted?getDocument().body:e}function shouldSettleAttribute(e){for(var t=htmx.config.attributesToSettle,n=0;n<t.length;n++)if(e===t[n])return 1}function cloneAttributes(t,n){forEach(t.attributes,function(e){!n.hasAttribute(e.name)&&shouldSettleAttribute(e.name)&&t.removeAttribute(e.name)}),forEach(n.attributes,function(e){shouldSettleAttribute(e.name)&&t.setAttribute(e.name,e.value)})}function isInlineSwap(e,t){for(var n=getExtensions(t),r=0;r<n.length;r++){var i=n[r];try{if(i.isInlineSwap(e))return 1}catch(e){logError(e)}}return"outerHTML"===e}function oobSwap(e,t,n){var r="#"+t.id,i="outerHTML";"true"===e||(0<e.indexOf(":")?(i=e.substr(0,e.indexOf(":")),r=e.substr(e.indexOf(":")+1,e.length)):i=e);var a=getDocument().querySelector(r);return a?((r=getDocument().createDocumentFragment()).appendChild(t),swap(i,a,a,r=!isInlineSwap(i,a)?t:r,n)):(t.parentNode.removeChild(t),triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:t})),e}function handleOutOfBandSwaps(e,n){forEach(findAll(e,"[hx-swap-oob], [data-hx-swap-oob]"),function(e){var t=getAttributeValue(e,"hx-swap-oob");null!=t&&oobSwap(t,e,n)})}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=getAttributeValue(e,"id"),t=getDocument().getElementById(t);null!=t&&e.parentNode.replaceChild(t,e)})}function handleAttributes(r,e,i){forEach(e.querySelectorAll("[id]"),function(e){var t,n;e.id&&0<e.id.length&&((t=r.querySelector(e.tagName+"[id='"+e.id+"']"))&&t!==r&&(n=e.cloneNode(),cloneAttributes(e,t),i.tasks.push(function(){cloneAttributes(e,n)})))})}function makeAjaxLoadTask(e){return function(){processNode(e),processScripts(e),processFocus(e),triggerEvent(e,"htmx:load")}}function processFocus(e){var t="[autofocus]",t=matches(e,t)?e:e.querySelector(t);null!=t&&t.focus()}function insertNodesBefore(e,t,n,r){for(handleAttributes(e,n,r);0<n.childNodes.length;){var i=n.firstChild;e.insertBefore(i,t),i.nodeType!==Node.TEXT_NODE&&i.nodeType!==Node.COMMENT_NODE&&r.tasks.push(makeAjaxLoadTask(i))}}function cleanUpElement(t){var e=getInternalData(t);e.webSocket&&e.webSocket.close(),e.sseEventSource&&e.sseEventSource.close(),e.listenerInfos&&forEach(e.listenerInfos,function(e){t!==e.on&&e.on.removeEventListener(e.trigger,e.listener)}),t.children&&forEach(t.children,function(e){cleanUpElement(e)})}function swapOuterHTML(e,t,n){if("BODY"===e.tagName)return swapInnerHTML(e,t,n);var r,i=e.previousSibling;for(insertNodesBefore(parentElt(e),e,t,n),r=null==i?parentElt(e).firstChild:i.nextSibling,getInternalData(e).replacedWith=r,n.elts=[];r&&r!==e;)r.nodeType===Node.ELEMENT_NODE&&n.elts.push(r),r=r.nextElementSibling;cleanUpElement(e),parentElt(e).removeChild(e)}function swapAfterBegin(e,t,n){return insertNodesBefore(e,e.firstChild,t,n)}function swapBeforeBegin(e,t,n){return insertNodesBefore(parentElt(e),e,t,n)}function swapBeforeEnd(e,t,n){return insertNodesBefore(e,null,t,n)}function swapAfterEnd(e,t,n){return insertNodesBefore(parentElt(e),e.nextSibling,t,n)}function swapInnerHTML(e,t,n){var r=e.firstChild;if(insertNodesBefore(e,r,t,n),r){for(;r.nextSibling;)cleanUpElement(r.nextSibling),e.removeChild(r.nextSibling);cleanUpElement(r),e.removeChild(r)}}function maybeSelectFromResponse(e,t){var n,e=getClosestAttributeValue(e,"hx-select");return e&&(n=getDocument().createDocumentFragment(),forEach(t.querySelectorAll(e),function(e){n.appendChild(e)}),t=n),t}function swap(e,t,n,r,i){switch(e){case"none":return;case"outerHTML":return void swapOuterHTML(n,r,i);case"afterbegin":return void swapAfterBegin(n,r,i);case"beforebegin":return void swapBeforeBegin(n,r,i);case"beforeend":return void swapBeforeEnd(n,r,i);case"afterend":return void swapAfterEnd(n,r,i);default:for(var a=getExtensions(t),o=0;o<a.length;o++){var s=a[o];try{var l=s.handleSwap(e,n,r,i);if(l){if(void 0!==l.length)for(var c=0;c<l.length;c++){var u=l[c];u.nodeType!==Node.TEXT_NODE&&u.nodeType!==Node.COMMENT_NODE&&i.tasks.push(makeAjaxLoadTask(u))}return}}catch(e){logError(e)}}swapInnerHTML(n,r,i)}}var TITLE_FINDER=/<title>([\s\S]+?)<\/title>/im;function findTitle(e){if(-1<e.indexOf("<title>")&&(-1==e.indexOf("<svg>")||e.indexOf("<title>")<e.indexOf("<svg>"))){e=TITLE_FINDER.exec(e);if(e)return e[1]}}function selectAndSwap(e,t,n,r,i){var a,o=findTitle(r);o&&((a=find("title"))?a.innerHTML=o:window.document.title=o);r=makeFragment(r);return r&&(handleOutOfBandSwaps(r,i),handlePreservedElements(r=maybeSelectFromResponse(n,r)),swap(e,n,t,r,i))}function handleTrigger(e,t,n){t=e.getResponseHeader(t);if(0===t.indexOf("{")){var r,i,a=parseJSON(t);for(r in a)a.hasOwnProperty(r)&&triggerEvent(n,r,i=!isRawObject(i=a[r])?{value:i}:i)}else triggerEvent(n,t,[])}var WHITESPACE=/\s/,WHITESPACE_OR_COMMA=/[\s,]/,SYMBOL_START=/[_$a-zA-Z]/,SYMBOL_CONT=/[_$a-zA-Z0-9]/,STRINGISH_START=['"',"'","/"],NOT_WHITESPACE=/[^\s]/;function tokenizeString(e){for(var t=[],n=0;n<e.length;){if(SYMBOL_START.exec(e.charAt(n))){for(var r=n;SYMBOL_CONT.exec(e.charAt(n+1));)n++;t.push(e.substr(r,n-r+1))}else if(-1!==STRINGISH_START.indexOf(e.charAt(n))){var i=e.charAt(n),r=n;for(n++;n<e.length&&e.charAt(n)!==i;)"\\"===e.charAt(n)&&n++,n++;t.push(e.substr(r,n-r+1))}else{var a=e.charAt(n);t.push(a)}n++}return t}function isPossibleRelativeReference(e,t,n){return SYMBOL_START.exec(e.charAt(0))&&"true"!==e&&"false"!==e&&"this"!==e&&e!==n&&"."!==t}function maybeGenerateConditional(e,t,n){if("["===t[0]){t.shift();for(var r=1,i=" return (function("+n+"){ return (",a=null;0<t.length;){var o=t[0];if("]"===o){if(0===--r){null===a&&(i+="true"),t.shift(),i+=")})";try{var s=maybeEval(e,function(){return Function(i)()},function(){return!0});return s.source=i,s}catch(e){return triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:e,source:i}),null}}}else"["===o&&r++;isPossibleRelativeReference(o,a,n)?i+="(("+n+"."+o+") ? ("+n+"."+o+") : (window."+o+"))":i+=o,a=t.shift()}}}function consumeUntil(e,t){for(var n="";0<e.length&&!e[0].match(t);)n+=e.shift();return n}var INPUT_SELECTOR="input, textarea, select";function getTriggerSpecs(e){var t=getAttributeValue(e,"hx-trigger"),n=[];if(t){var r=tokenizeString(t);do{consumeUntil(r,NOT_WHITESPACE);var i=r.length,a=consumeUntil(r,/[,\[\s]/);if(""!==a)if("every"===a){var o={trigger:"every"};consumeUntil(r,NOT_WHITESPACE),o.pollInterval=parseInterval(consumeUntil(r,WHITESPACE)),n.push(o)}else if(0===a.indexOf("sse:"))n.push({trigger:"sse",sseEvent:a.substr(4)});else{var s={trigger:a},a=maybeGenerateConditional(e,r,"event");for(a&&(s.eventFilter=a);0<r.length&&","!==r[0];){consumeUntil(r,NOT_WHITESPACE);var l=r.shift();"changed"===l?s.changed=!0:"once"===l?s.once=!0:"consume"===l?s.consume=!0:"delay"===l&&":"===r[0]?(r.shift(),s.delay=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):"from"===l&&":"===r[0]?(r.shift(),s.from=consumeUntil(r,WHITESPACE_OR_COMMA)):"target"===l&&":"===r[0]?(r.shift(),s.target=consumeUntil(r,WHITESPACE_OR_COMMA)):"throttle"===l&&":"===r[0]?(r.shift(),s.throttle=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):"queue"===l&&":"===r[0]?(r.shift(),s.queue=consumeUntil(r,WHITESPACE_OR_COMMA)):"root"!==l&&"threshold"!==l||":"!==r[0]?triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()}):(r.shift(),s[l]=consumeUntil(r,WHITESPACE_OR_COMMA))}n.push(s)}}while(r.length===i&&triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()}),consumeUntil(r,NOT_WHITESPACE),","===r[0]&&r.shift())}return 0<n.length?n:matches(e,"form")?[{trigger:"submit"}]:matches(e,INPUT_SELECTOR)?[{trigger:"change"}]:[{trigger:"click"}]}function cancelPolling(e){getInternalData(e).cancelled=!0}function processPolling(e,t,n,r){var i=getInternalData(e);i.timeout=setTimeout(function(){bodyContains(e)&&!0!==i.cancelled&&(issueAjaxRequest(t,n,e),processPolling(e,t,getAttributeValue(e,"hx-"+t),r))},r)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&0!==getRawAttribute(e,"href").indexOf("#")}function boostElement(t,n,e){var r,i,a;("A"===t.tagName&&isLocalLink(t)||"FORM"===t.tagName)&&(n.boosted=!0,"A"===t.tagName?(a="get",r=getRawAttribute(t,"href"),n.pushURL=!0):(i=getRawAttribute(t,"method"),"get"===(a=i?i.toLowerCase():"get")&&(n.pushURL=!0),r=getRawAttribute(t,"action")),e.forEach(function(e){addEventListener(t,a,r,n,e,!0)}))}function shouldCancel(e){return"FORM"===e.tagName||matches(e,'input[type="submit"], button')&&null!==closest(e,"form")||"A"===e.tagName&&e.href&&("#"===e.getAttribute("href")||0!==e.getAttribute("href").indexOf("#"))}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&"A"===e.tagName&&"click"===t.type&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(t,e){t=t.eventFilter;if(t)try{return!0!==t(e)}catch(e){return triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:e,source:t.source}),1}}function addEventListener(r,i,a,e,o,s){var l=r;o.from&&(l=find(o.from));var c=function(e){if(bodyContains(r)){if(!ignoreBoostedAnchorCtrlClick(r,e)&&((s||shouldCancel(r))&&e.preventDefault(),!maybeFilterEvent(o,e))){var t=getInternalData(e);t.triggerSpec=o,null==t.handledFor&&(t.handledFor=[]);var n=getInternalData(r);if(t.handledFor.indexOf(r)<0&&(t.handledFor.push(r),o.consume&&e.stopPropagation(),!o.target||!e.target||matches(e.target,o.target))){if(o.once){if(n.triggeredOnce)return;n.triggeredOnce=!0}if(o.changed){if(n.lastValue===r.value)return;n.lastValue=r.value}n.delayed&&clearTimeout(n.delayed),n.throttle||(o.throttle?n.throttle||(issueAjaxRequest(i,a,r,e),n.throttle=setTimeout(function(){n.throttle=null},o.throttle)):o.delay?n.delayed=setTimeout(function(){issueAjaxRequest(i,a,r,e)},o.delay):issueAjaxRequest(i,a,r,e))}}}else l.removeEventListener(o.trigger,c)};null==e.listenerInfos&&(e.listenerInfos=[]),e.listenerInfos.push({trigger:o.trigger,listener:c,on:l}),l.addEventListener(o.trigger,c)}var windowIsScrolling=!1,scrollHandler=null;function initScrollHandler(){scrollHandler||(scrollHandler=function(){windowIsScrolling=!0},window.addEventListener("scroll",scrollHandler),setInterval(function(){windowIsScrolling&&(windowIsScrolling=!1,forEach(getDocument().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(e){maybeReveal(e)}))},200))}function maybeReveal(e){var t=getInternalData(e);!t.revealed&&isScrolledIntoView(e)&&(t.revealed=!0,t.initialized?issueAjaxRequest(t.verb,t.path,e):e.addEventListener("htmx:afterProcessNode",function(){issueAjaxRequest(t.verb,t.path,e)},{once:!0}))}function processWebSocketInfo(e,t,n){for(var r=splitOnWhitespace(n),i=0;i<r.length;i++){var a=r[i].split(/:(.+)/);"connect"===a[0]&&ensureWebSocket(e,a[1],0),"send"===a[0]&&processWebSocketSend(e)}}function ensureWebSocket(o,t,n){var e,r;bodyContains(o)&&(0==t.indexOf("/")&&(e=location.hostname+(location.port?":"+location.port:""),"https:"==location.protocol?t="wss://"+e+t:"http:"==location.protocol&&(t="ws://"+e+t)),(r=htmx.createWebSocket(t)).onerror=function(e){triggerErrorEvent(o,"htmx:wsError",{error:e,socket:r}),maybeCloseWebSocketSource(o)},r.onclose=function(e){[1006,1012,1013].includes(e.code)&&(e=getWebSocketReconnectDelay(n),setTimeout(function(){ensureWebSocket(o,t,n+1)},e))},r.onopen=function(e){n=0},(getInternalData(o).webSocket=r).addEventListener("message",function(e){if(!maybeCloseWebSocketSource(o)){var t=e.data;withExtensions(o,function(e){t=e.transformResponse(t,null,o)});for(var n=makeSettleInfo(o),r=toArray(makeFragment(t).children),i=0;i<r.length;i++){var a=r[i];oobSwap(getAttributeValue(a,"hx-swap-oob")||"true",a,n)}settleImmediately(n.tasks)}}))}function maybeCloseWebSocketSource(e){return!bodyContains(e)&&(getInternalData(e).webSocket.close(),1)}function processWebSocketSend(a){var o=getClosestMatch(a,function(e){return null!=getInternalData(e).webSocket});o?a.addEventListener(getTriggerSpecs(a)[0].trigger,function(e){var t=getInternalData(o).webSocket,n=getHeaders(a,o),r=getInputValues(a,"post"),i=r.errors,r=filterValues(mergeObjects(r.values,getExpressionVars(a)),a);r.HEADERS=n,i&&0<i.length?triggerEvent(a,"htmx:validation:halted",i):(t.send(JSON.stringify(r)),shouldCancel(a)&&e.preventDefault())}):triggerErrorEvent(a,"htmx:noWebSocketSourceError")}function getWebSocketReconnectDelay(e){var t=htmx.config.wsReconnectDelay;if("function"==typeof t)return t(e);if("full-jitter"===t){e=Math.min(e,6);return 1e3*Math.pow(2,e)*Math.random()}logError('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function processSSEInfo(e,t,n){for(var r=splitOnWhitespace(n),i=0;i<r.length;i++){var a=r[i].split(/:(.+)/);"connect"===a[0]&&processSSESource(e,a[1]),"swap"===a[0]&&processSSESwap(e,a[1])}}function processSSESource(t,e){var n=htmx.createEventSource(e);n.onerror=function(e){triggerErrorEvent(t,"htmx:sseError",{error:e,source:n}),maybeCloseSSESource(t)},getInternalData(t).sseEventSource=n}function processSSESwap(a,o){var s,l,c=getClosestMatch(a,hasEventSource);c?(s=getInternalData(c).sseEventSource,l=function(e){var t,n,r,i;maybeCloseSSESource(c)?s.removeEventListener(o,l):(t=e.data,withExtensions(a,function(e){t=e.transformResponse(t,null,a)}),n=getSwapSpecification(a),r=getTarget(a),i=makeSettleInfo(a),selectAndSwap(n.swapStyle,a,r,t,i),settleImmediately(i.tasks),triggerEvent(a,"htmx:sseMessage",e))},getInternalData(a).sseListener=l,s.addEventListener(o,l)):triggerErrorEvent(a,"htmx:noSSESourceError")}function processSSETrigger(e,t,n,r){var i,a,o=getClosestMatch(e,hasEventSource);o?(i=getInternalData(o).sseEventSource,a=function(){maybeCloseSSESource(o)||(bodyContains(e)?issueAjaxRequest(t,n,e):i.removeEventListener(r,a))},getInternalData(e).sseListener=a,i.addEventListener(r,a)):triggerErrorEvent(e,"htmx:noSSESourceError")}function maybeCloseSSESource(e){return!bodyContains(e)&&(getInternalData(e).sseEventSource.close(),1)}function hasEventSource(e){return null!=getInternalData(e).sseEventSource}function loadImmediately(e,t,n,r,i){function a(){r.loaded||(r.loaded=!0,issueAjaxRequest(t,n,e))}i?setTimeout(a,i):a()}function processVerbs(i,a,e){var t=!1;return forEach(VERBS,function(n){var r;hasAttribute(i,"hx-"+n)&&(r=getAttributeValue(i,"hx-"+n),t=!0,a.path=r,a.verb=n,e.forEach(function(e){var t;e.sseEvent?processSSETrigger(i,n,r,e.sseEvent):"revealed"===e.trigger?(initScrollHandler(),maybeReveal(i)):"intersect"===e.trigger?(t={},e.root&&(t.root=querySelectorExt(e.root)),e.threshold&&(t.threshold=parseFloat(e.threshold)),new IntersectionObserver(function(e){for(var t=0;t<e.length;t++)if(e[t].isIntersecting){triggerEvent(i,"intersect");break}},t).observe(i),addEventListener(i,n,r,a,e)):"load"===e.trigger?loadImmediately(i,n,r,a,e.delay):e.pollInterval?(a.polling=!0,processPolling(i,n,r,e.pollInterval)):addEventListener(i,n,r,a,e)}))}),t}function evalScript(e){if("text/javascript"===e.type||""===e.type)try{maybeEval(e,function(){(0,eval)(e.innerText)})}catch(e){logError(e)}}function processScripts(e){matches(e,"script")&&evalScript(e),forEach(findAll(e,"script"),function(e){evalScript(e)})}function isBoosted(){return document.querySelector("[hx-boost], [data-hx-boost]")}function findElementsToProcess(e){if(e.querySelectorAll){var t=isBoosted()?", a, form":"";return e.querySelectorAll(VERB_SELECTOR+t+", [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws]")}return[]}function initNode(e){var t,n;e.closest&&e.closest(htmx.config.disableSelector)||((t=getInternalData(e)).initialized||(t.initialized=!0,triggerEvent(e,"htmx:beforeProcessNode"),e.value&&(t.lastValue=e.value),processVerbs(e,t,n=getTriggerSpecs(e))||"true"!==getClosestAttributeValue(e,"hx-boost")||boostElement(e,t,n),(n=getAttributeValue(e,"hx-sse"))&&processSSEInfo(e,t,n),(n=getAttributeValue(e,"hx-ws"))&&processWebSocketInfo(e,t,n),triggerEvent(e,"htmx:afterProcessNode")))}function processNode(e){initNode(e=resolveTarget(e)),forEach(findElementsToProcess(e),function(e){initNode(e)})}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){var n;return window.CustomEvent&&"function"==typeof window.CustomEvent?n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}):(n=getDocument().createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),n}function triggerErrorEvent(e,t,n){triggerEvent(e,t,mergeObjects({error:t},n))}function ignoreEventForLogging(e){return"htmx:afterProcessNode"===e}function withExtensions(e,t){forEach(getExtensions(e),function(e){try{t(e)}catch(e){logError(e)}})}function logError(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function triggerEvent(e,t,n){e=resolveTarget(e),(n=null==n?{}:n).elt=e;var r=makeEvent(t,n);htmx.logger&&!ignoreEventForLogging(t)&&htmx.logger(e,t,n),n.error&&(logError(n.error),triggerEvent(e,"htmx:error",{errorInfo:n}));var i=e.dispatchEvent(r),n=kebabEventName(t);return i&&n!==t&&(n=makeEvent(n,r.detail),i=i&&e.dispatchEvent(n)),withExtensions(e,function(e){i=i&&!1!==e.onEvent(t,r)}),i}var currentPathForHistory=null;function getHistoryElement(){return getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]")||getDocument().body}function saveToHistoryCache(e,t,n,r){for(var i=parseJSON(localStorage.getItem("htmx-history-cache"))||[],a=0;a<i.length;a++)if(i[a].url===e){i.splice(a,1);break}for(i.push({url:e,content:t,title:n,scroll:r});i.length>htmx.config.historyCacheSize;)i.shift();for(;0<i.length;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(i));break}catch(e){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:e,cache:i}),i.shift()}}function getCachedHistory(e){for(var t=parseJSON(localStorage.getItem("htmx-history-cache"))||[],n=0;n<t.length;n++)if(t[n].url===e)return t[n];return null}function cleanInnerHtmlForHistory(e){var t=htmx.config.requestClass,e=e.cloneNode(!0);return forEach(findAll(e,"."+t),function(e){removeClassFromElement(e,t)}),e.innerHTML}function saveHistory(){var e=getHistoryElement(),t=currentPathForHistory||location.pathname+location.search;triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e}),htmx.config.historyEnabled&&history.replaceState({htmx:!0},getDocument().title,window.location.href),saveToHistoryCache(t,cleanInnerHtmlForHistory(e),getDocument().title,window.scrollY)}function pushUrlIntoHistory(e){htmx.config.historyEnabled&&history.pushState({htmx:!0},"",e),currentPathForHistory=e}function settleImmediately(e){forEach(e,function(e){e.call()})}function loadHistoryFromServer(n){var e=new XMLHttpRequest,r={path:n,xhr:e};triggerEvent(getDocument().body,"htmx:historyCacheMiss",r),e.open("GET",n,!0),e.setRequestHeader("HX-History-Restore-Request","true"),e.onload=function(){var e,t;200<=this.status&&this.status<400?(triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",r),e=(e=makeFragment(this.response)).querySelector("[hx-history-elt],[data-hx-history-elt]")||e,swapInnerHTML(t=getHistoryElement(),e,t=makeSettleInfo(t)),settleImmediately(t.tasks),currentPathForHistory=n,triggerEvent(getDocument().body,"htmx:historyRestore",{path:n})):triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",r)},e.send()}function restoreHistory(e){saveHistory();var t,n,r=getCachedHistory(e=e||location.pathname+location.search);r?(t=makeFragment(r.content),swapInnerHTML(n=getHistoryElement(),t,n=makeSettleInfo(n)),settleImmediately(n.tasks),document.title=r.title,window.scrollTo(0,r.scroll),currentPathForHistory=e,triggerEvent(getDocument().body,"htmx:historyRestore",{path:e})):htmx.config.refreshOnHistoryMiss?window.location.reload(!0):loadHistoryFromServer(e)}function shouldPush(e){var t=getClosestAttributeValue(e,"hx-push-url");return t&&"false"!==t||getInternalData(e).boosted&&getInternalData(e).pushURL}function getPushUrl(e){e=getClosestAttributeValue(e,"hx-push-url");return"true"===e||"false"===e?null:e}function addRequestIndicatorClasses(e){var t=getClosestAttributeValue(e,"hx-indicator"),e=t?querySelectorAllExt(e,t):[e];return forEach(e,function(e){e.classList.add.call(e.classList,htmx.config.requestClass)}),e}function removeRequestIndicatorClasses(e){forEach(e,function(e){e.classList.remove.call(e.classList,htmx.config.requestClass)})}function haveSeenNode(e,t){for(var n=0;n<e.length;n++)if(e[n].isSameNode(t))return 1}function shouldInclude(e){return""!==e.name&&null!=e.name&&!e.disabled&&("button"!==e.type&&"submit"!==e.type&&"image"!==e.tagName&&"reset"!==e.tagName&&"file"!==e.tagName&&("checkbox"!==e.type&&"radio"!==e.type||e.checked))}function processInputValue(t,n,r,e,i){var a,o,s;null==e||haveSeenNode(t,e)||(t.push(e),shouldInclude(e)&&(a=getRawAttribute(e,"name"),o=e.value,e.multiple&&(o=toArray(e.querySelectorAll("option:checked")).map(function(e){return e.value})),e.files&&(o=toArray(e.files)),null!=a&&null!=o&&((s=n[a])?Array.isArray(s)?Array.isArray(o)?n[a]=s.concat(o):s.push(o):Array.isArray(o)?n[a]=[s].concat(o):n[a]=[s,o]:n[a]=o),i&&validateElement(e,r)),matches(e,"form")&&forEach(e.elements,function(e){processInputValue(t,n,r,e,i)}))}function validateElement(e,t){e.willValidate&&(triggerEvent(e,"htmx:validation:validate"),e.checkValidity()||(t.push({elt:e,message:e.validationMessage,validity:e.validity}),triggerEvent(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})))}function getInputValues(e,t){var n=[],r={},i={},a=[],o=matches(e,"form")&&!0!==e.noValidate;"get"!==t&&processInputValue(n,i,a,closest(e,"form"),o),processInputValue(n,r,a,e,o);t=getClosestAttributeValue(e,"hx-include");return t&&forEach(querySelectorAllExt(e,t),function(e){processInputValue(n,r,a,e,o),matches(e,"form")||forEach(e.querySelectorAll(INPUT_SELECTOR),function(e){processInputValue(n,r,a,e,o)})}),r=mergeObjects(r,i),{errors:a,values:r}}function appendParam(e,t,n){return""!==e&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n)}function urlEncode(e){var t,n,r="";for(t in e)e.hasOwnProperty(t)&&(n=e[t],Array.isArray(n)?forEach(n,function(e){r=appendParam(r,t,e)}):r=appendParam(r,t,n));return r}function makeFormData(e){var t,n,r=new FormData;for(t in e)e.hasOwnProperty(t)&&(n=e[t],Array.isArray(n)?forEach(n,function(e){r.append(t,e)}):r.append(t,n));return r}function getHeaders(e,t,n){t={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":getDocument().location.href};return getValuesForElement(e,"hx-headers",!1,t),void 0!==n&&(t["HX-Prompt"]=n),t}function filterValues(t,e){e=getClosestAttributeValue(e,"hx-params");if(e){if("none"===e)return{};if("*"===e)return t;if(0===e.indexOf("not "))return forEach(e.substr(4).split(","),function(e){e=e.trim(),delete t[e]}),t;var n={};return forEach(e.split(","),function(e){e=e.trim(),n[e]=t[e]}),n}return t}function isAnchorLink(e){return getRawAttribute(e,"href")&&0<=getRawAttribute(e,"href").indexOf("#")}function getSwapSpecification(e){var t=getClosestAttributeValue(e,"hx-swap"),n={swapStyle:getInternalData(e).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(getInternalData(e).boosted&&!isAnchorLink(e)&&(n.show="top"),t){var r=splitOnWhitespace(t);if(0<r.length){n.swapStyle=r[0];for(var i=1;i<r.length;i++){var a=r[i];0===a.indexOf("swap:")&&(n.swapDelay=parseInterval(a.substr(5))),0===a.indexOf("settle:")&&(n.settleDelay=parseInterval(a.substr(7))),0===a.indexOf("scroll:")&&(n.scroll=a.substr(7)),0===a.indexOf("show:")&&(n.show=a.substr(5))}}}return n}function encodeParamsForBody(t,n,r){var i=null;return withExtensions(n,function(e){null==i&&(i=e.encodeParameters(t,r,n))}),null!=i?i:("multipart/form-data"===getClosestAttributeValue(n,"hx-encoding")?makeFormData:urlEncode)(r)}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){var n=e[0],e=e[e.length-1];t.scroll&&("top"===t.scroll&&n&&(n.scrollTop=0),"bottom"===t.scroll&&e&&(e.scrollTop=e.scrollHeight)),t.show&&("top"===t.show&&n&&n.scrollIntoView(!0),"bottom"===t.show&&e&&e.scrollIntoView(!1))}function getValuesForElement(e,t,n,r){if(null==r&&(r={}),null==e)return r;var i=getAttributeValue(e,t);if(i){var a,o,s=i.trim(),i=n;for(o in 0===s.indexOf("javascript:")&&(s=s.substr(11),i=!0),0!==s.indexOf("{")&&(s="{"+s+"}"),a=i?maybeEval(e,function(){return Function("return ("+s+")")()},{}):parseJSON(s))a.hasOwnProperty(o)&&null==r[o]&&(r[o]=a[o])}return getValuesForElement(parentElt(e),t,n,r)}function maybeEval(e,t,n){return htmx.config.allowEval?t():(triggerErrorEvent(e,"htmx:evalDisallowedError"),n)}function getHXVarsForElement(e,t){return getValuesForElement(e,"hx-vars",!0,t)}function getHXValsForElement(e,t){return getValuesForElement(e,"hx-vals",!1,t)}function getExpressionVars(e){return mergeObjects(getHXVarsForElement(e),getHXValsForElement(e))}function safelySetHeaderValue(t,n,r){if(null!==r)try{t.setRequestHeader(n,r)}catch(e){t.setRequestHeader(n,encodeURIComponent(r)),t.setRequestHeader(n+"-URI-AutoEncoded","true")}}function getResponseURL(t){if(t.responseURL&&"undefined"!=typeof URL)try{var e=new URL(t.responseURL);return e.pathname+e.search}catch(e){triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}function hasHeader(e,t){return e.getAllResponseHeaders().match(t)}function ajaxHelper(e,t,n){return n?n instanceof Element||isType(n,"String")?issueAjaxRequest(e,t,null,null,{targetOverride:resolveTarget(n)}):issueAjaxRequest(e,t,resolveTarget(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:resolveTarget(n.target)}):issueAjaxRequest(e,t)}function hierarchyForElt(e){for(var t=[];e;)t.push(e),e=e.parentElement;return t}function issueAjaxRequest(e,t,r,n,i){var a,o=null,s=null;i=null!=i?i:{},"undefined"!=typeof Promise&&(a=new Promise(function(e,t){o=e,s=t})),null==r&&(r=getDocument().body);var l=i.handler||handleAjaxResponse;if(bodyContains(r)){var c=i.targetOverride||getTarget(r);if(null!=c){var u=getInternalData(r);if(u.requestInFlight){var d="last",h=getInternalData(n);return h&&h.triggerSpec&&h.triggerSpec.queue&&(d=h.triggerSpec.queue),null==u.queuedRequests&&(u.queuedRequests=[]),void("first"===d&&0===u.queuedRequests.length||"all"===d?u.queuedRequests.push(function(){issueAjaxRequest(e,t,r,n)}):"last"===d&&(u.queuedRequests=[],u.queuedRequests.push(function(){issueAjaxRequest(e,t,r,n)})))}u.requestInFlight=!0;var f=function(){u.requestInFlight=!1,null!=u.queuedRequests&&0<u.queuedRequests.length&&u.queuedRequests.shift()()},h=getClosestAttributeValue(r,"hx-prompt");if(h){var p=prompt(h);if(null===p||!triggerEvent(r,"htmx:prompt",{prompt:p,target:c}))return maybeCall(o),f(),a}d=getClosestAttributeValue(r,"hx-confirm");if(d&&!confirm(d))return maybeCall(o),f(),a;var m=new XMLHttpRequest,g=getHeaders(r,c,p);i.headers&&(g=mergeObjects(g,i.values));h=getInputValues(r,e),d=h.errors,p=h.values;i.values&&(p=mergeObjects(p,i.values));h=mergeObjects(p,getExpressionVars(r)),i=filterValues(h,r);"get"!==e&&null==getClosestAttributeValue(r,"hx-encoding")&&(g["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),null!=t&&""!==t||(t=getDocument().location.href);p={parameters:i,unfilteredParameters:h,headers:g,target:c,verb:e,errors:d,path:t,triggeringEvent:n};if(!triggerEvent(r,"htmx:configRequest",p))return maybeCall(o),f(),a;if(t=p.path,e=p.verb,g=p.headers,i=p.parameters,(d=p.errors)&&0<d.length)return triggerEvent(r,"htmx:validation:halted",p),maybeCall(o),f(),a;var _,y,v,h=t.split("#"),d=h[0],h=h[1];for(y in"get"===e?(_=d,0!==Object.keys(i).length&&(_.indexOf("?")<0?_+="?":_+="&",_+=urlEncode(i),h&&(_+="#"+h)),m.open("GET",_,!0)):m.open(e.toUpperCase(),t,!0),m.overrideMimeType("text/html"),m.withCredentials=htmx.config.withCredentials,g)g.hasOwnProperty(y)&&(v=g[y],safelySetHeaderValue(m,y,v));var b={xhr:m,target:c,requestConfig:p,pathInfo:{path:t,finalPath:_,anchor:h}};if(m.onload=function(){try{var e=hierarchyForElt(r);if(l(r,b),removeRequestIndicatorClasses(x),triggerEvent(r,"htmx:afterRequest",b),triggerEvent(r,"htmx:afterOnLoad",b),!bodyContains(r)){for(var t=null;0<e.length&&null==t;){var n=e.shift();bodyContains(n)&&(t=n)}t&&(triggerEvent(t,"htmx:afterRequest",b),triggerEvent(t,"htmx:afterOnLoad",b))}maybeCall(o),f()}catch(e){throw triggerErrorEvent(r,"htmx:onLoadError",mergeObjects({error:e},b)),e}},m.onerror=function(){removeRequestIndicatorClasses(x),triggerErrorEvent(r,"htmx:afterRequest",b),triggerErrorEvent(r,"htmx:sendError",b),maybeCall(s),f()},m.onabort=function(){removeRequestIndicatorClasses(x),triggerErrorEvent(r,"htmx:afterRequest",b),triggerErrorEvent(r,"htmx:sendAbort",b),maybeCall(s),f()},!triggerEvent(r,"htmx:beforeRequest",b))return maybeCall(o),f(),a;var x=addRequestIndicatorClasses(r);return forEach(["loadstart","loadend","progress","abort"],function(t){forEach([m,m.upload],function(e){e.addEventListener(t,function(e){triggerEvent(r,"htmx:xhr:"+t,{lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})})}),triggerEvent(r,"htmx:beforeSend",b),m.send("get"===e?null:encodeParamsForBody(m,r,i)),a}triggerErrorEvent(r,"htmx:targetError",{target:getAttributeValue(r,"hx-target")})}}function handleAjaxResponse(o,s){var l,c,u,d,e,h=s.xhr,f=s.target;triggerEvent(o,"htmx:beforeOnLoad",s)&&(hasHeader(h,/HX-Trigger:/i)&&handleTrigger(h,"HX-Trigger",o),hasHeader(h,/HX-Push:/i)&&(l=h.getResponseHeader("HX-Push")),hasHeader(h,/HX-Redirect:/i)?window.location.href=h.getResponseHeader("HX-Redirect"):hasHeader(h,/HX-Refresh:/i)&&"true"===h.getResponseHeader("HX-Refresh")?location.reload():(c=shouldPush(o)||l,200<=h.status&&h.status<400?(286===h.status&&cancelPolling(o),204!==h.status&&triggerEvent(f,"htmx:beforeSwap",s)&&(u=h.response,withExtensions(o,function(e){u=e.transformResponse(u,h,o)}),c&&saveHistory(),d=getSwapSpecification(o),f.classList.add(htmx.config.swappingClass),e=function(){try{var e=document.activeElement,t={};try{t={elt:e,start:e?e.selectionStart:null,end:e?e.selectionEnd:null}}catch(e){}var n,r,i=makeSettleInfo(f);selectAndSwap(d.swapStyle,f,o,u,i),!t.elt||bodyContains(t.elt)||!t.elt.id||(n=document.getElementById(t.elt.id))&&(t.start&&n.setSelectionRange&&n.setSelectionRange(t.start,t.end),n.focus()),f.classList.remove(htmx.config.swappingClass),forEach(i.elts,function(e){e.classList&&e.classList.add(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSwap",s)}),s.pathInfo.anchor&&(location.hash=s.pathInfo.anchor),hasHeader(h,/HX-Trigger-After-Swap:/i)&&(bodyContains(r=o)||(r=getDocument().body),handleTrigger(h,"HX-Trigger-After-Swap",r));var a=function(){var e;forEach(i.tasks,function(e){e.call()}),forEach(i.elts,function(e){e.classList&&e.classList.remove(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSettle",s)}),c&&(pushUrlIntoHistory(e=l||getPushUrl(o)||getResponseURL(h)||s.pathInfo.finalPath||s.pathInfo.path),triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:e})),updateScrollState(i.elts,d),hasHeader(h,/HX-Trigger-After-Settle:/i)&&(bodyContains(e=o)||(e=getDocument().body),handleTrigger(h,"HX-Trigger-After-Settle",e))};0<d.settleDelay?setTimeout(a,d.settleDelay):a()}catch(e){throw triggerErrorEvent(o,"htmx:swapError",s),e}},0<d.swapDelay?setTimeout(e,d.swapDelay):e())):triggerErrorEvent(o,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+h.status+" from "+s.pathInfo.path},s))))}var extensions={};function extensionBase(){return{onEvent:function(e,t){return!0},transformResponse:function(e,t,n){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,n,r){return!1},encodeParameters:function(e,t,n){return null}}}function defineExtension(e,t){extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,n,r){if(null==e)return n;null==n&&(n=[]),null==r&&(r=[]);var t=getAttributeValue(e,"hx-ext");return t&&forEach(t.split(","),function(e){var t;"ignore:"!=(e=e.replace(/ /g,"")).slice(0,7)?r.indexOf(e)<0&&((t=extensions[e])&&n.indexOf(t)<0&&n.push(t)):r.push(e.slice(7))}),getExtensions(parentElt(e),n,r)}function ready(e){"loading"!==getDocument().readyState?e():getDocument().addEventListener("DOMContentLoaded",e)}function insertIndicatorStyles(){!1!==htmx.config.includeIndicatorStyles&&getDocument().head.insertAdjacentHTML("beforeend","<style>                      ."+htmx.config.indicatorClass+"{opacity:0;transition: opacity 200ms ease-in;}                      ."+htmx.config.requestClass+" ."+htmx.config.indicatorClass+"{opacity:1}                      ."+htmx.config.requestClass+"."+htmx.config.indicatorClass+"{opacity:1}                    </style>")}function getMetaConfig(){var e=getDocument().querySelector('meta[name="htmx-config"]');return e?parseJSON(e.content):null}function mergeMetaConfig(){var e=getMetaConfig();e&&(htmx.config=mergeObjects(htmx.config,e))}return ready(function(){mergeMetaConfig(),insertIndicatorStyles();var e=getDocument().body;processNode(e),window.onpopstate=function(e){e.state&&e.state.htmx&&restoreHistory()},setTimeout(function(){triggerEvent(e,"htmx:load",{})},0)}),htmx}),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";function m(e){return null!=e&&e===e.window}var t=[],n=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},l=t.push,i=t.indexOf,r={},a=r.toString,_=r.hasOwnProperty,o=_.toString,c=o.call(Object),y={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},T=w.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,a=(n=n||T).createElement("script");if(a.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function p(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[a.call(e)]||"object":typeof e}var A=function(e,t){return new A.fn.init(e,t)};function d(e){var t=!!e&&"length"in e&&e.length,n=p(e);return!v(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}A.fn=A.prototype={jquery:"3.6.0",constructor:A,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=A.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return A.each(this,e)},map:function(n){return this.pushStack(A.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},A.extend=A.fn.extend=function(){var e,t,n,r,i,a=arguments[0]||{},o=1,s=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[o]||{},o++),"object"==typeof a||v(a)||(a={}),o===s&&(a=this,o--);o<s;o++)if(null!=(e=arguments[o]))for(t in e)n=e[t],"__proto__"!==t&&a!==n&&(l&&n&&(A.isPlainObject(n)||(r=Array.isArray(n)))?(i=a[t],i=r&&!Array.isArray(i)?[]:r||A.isPlainObject(i)?i:{},r=!1,a[t]=A.extend(l,i,n)):void 0!==n&&(a[t]=n));return a},A.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==a.call(e))&&(!(e=n(e))||"function"==typeof(e=_.call(e,"constructor")&&e.constructor)&&o.call(e)===c)},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(d(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(d(Object(e))?A.merge(t,"string"==typeof e?[e]:e):l.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!=o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(d(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return g(o)},guid:1,support:y}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=t[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var h=function(n){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function r(){w()}var e,h,b,a,i,f,p,m,x,l,c,w,T,o,A,g,s,u,_,k="sizzle"+ +new Date,y=n.document,M=0,v=0,S=le(),E=le(),C=le(),L=le(),D=function(e,t){return e===t&&(c=!0),0},O={}.hasOwnProperty,t=[],P=t.pop,R=t.push,I=t.push,N=t.slice,z=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",H="\\["+j+"*("+B+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+j+"*\\]",U=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",V=new RegExp(j+"+","g"),q=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),Y=new RegExp("^"+j+"*,"+j+"*"),G=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),W=new RegExp(j+"|>"),X=new RegExp(U),Z=new RegExp("^"+B+"$"),J={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ne=/[+~]/,re=new RegExp("\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\([^\\r\\n\\f])","g"),ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(t=N.call(y.childNodes),y.childNodes),t[y.childNodes.length].nodeType}catch(e){I={apply:t.length?function(e,t){R.apply(e,N.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(t,e,n,r){var i,a,o,s,l,c,u=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!r&&(w(e),e=e||T,A)){if(11!==d&&(s=te.exec(t)))if(c=s[1]){if(9===d){if(!(a=e.getElementById(c)))return n;if(a.id===c)return n.push(a),n}else if(u&&(a=u.getElementById(c))&&_(e,a)&&a.id===c)return n.push(a),n}else{if(s[2])return I.apply(n,e.getElementsByTagName(t)),n;if((c=s[3])&&h.getElementsByClassName&&e.getElementsByClassName)return I.apply(n,e.getElementsByClassName(c)),n}if(h.qsa&&!L[t+" "]&&(!g||!g.test(t))&&(1!==d||"object"!==e.nodeName.toLowerCase())){if(c=t,u=e,1===d&&(W.test(t)||G.test(t))){for((u=ne.test(t)&&me(e.parentNode)||e)===e&&h.scope||((o=e.getAttribute("id"))?o=o.replace(ie,ae):e.setAttribute("id",o=k)),i=(l=f(t)).length;i--;)l[i]=(o?"#"+o:":scope")+" "+_e(l[i]);c=l.join(",")}try{return I.apply(n,u.querySelectorAll(c)),n}catch(e){L(t,!0)}finally{o===k&&e.removeAttribute("id")}}}return m(t.replace(q,"$1"),e,n,r)}function le(){var n=[];function r(e,t){return n.push(e+" ")>b.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function ce(e){return e[k]=!0,e}function ue(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function de(e,t){for(var n=e.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=t}function he(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&oe(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pe(o){return ce(function(a){return a=+a,ce(function(e,t){for(var n,r=o([],e.length,a),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!$.test(t||e&&e.nodeName||"HTML")},w=se.setDocument=function(e){var t,e=e?e.ownerDocument||e:y;return e!=T&&9===e.nodeType&&e.documentElement&&(o=(T=e).documentElement,A=!i(T),y!=T&&(t=T.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",r,!1):t.attachEvent&&t.attachEvent("onunload",r)),h.scope=ue(function(e){return o.appendChild(e).appendChild(T.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),h.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=ue(function(e){return e.appendChild(T.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=ee.test(T.getElementsByClassName),h.getById=ue(function(e){return o.appendChild(e).id=k,!T.getElementsByName||!T.getElementsByName(k).length}),h.getById?(b.filter.ID=function(e){var t=e.replace(re,d);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&A){e=t.getElementById(e);return e?[e]:[]}}):(b.filter.ID=function(e){var t=e.replace(re,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),b.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;n=a[i++];)1===n.nodeType&&r.push(n);return r},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&A)return t.getElementsByClassName(e)},s=[],g=[],(h.qsa=ee.test(T.querySelectorAll))&&(ue(function(e){var t;o.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+j+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+k+"-]").length||g.push("~="),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+j+"*name"+j+"*="+j+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=T.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),o.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(h.matchesSelector=ee.test(u=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ue(function(e){h.disconnectedMatch=u.call(e,"*"),u.call(e,"[s!='']:x"),s.push("!=",U)}),g=g.length&&new RegExp(g.join("|")),s=s.length&&new RegExp(s.join("|")),t=ee.test(o.compareDocumentPosition),_=t||ee.test(o.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e==T||e.ownerDocument==y&&_(y,e)?-1:t==T||t.ownerDocument==y&&_(y,t)?1:l?z(l,e)-z(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e==T?-1:t==T?1:i?-1:a?1:l?z(l,e)-z(l,t):0;if(i===a)return he(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?he(o[r],s[r]):o[r]==y?-1:s[r]==y?1:0}),T},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(w(e),h.matchesSelector&&A&&!L[t+" "]&&(!s||!s.test(t))&&(!g||!g.test(t)))try{var n=u.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){L(t,!0)}return 0<se(t,T,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=T&&w(e),_(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=T&&w(e);var n=b.attrHandle[t.toLowerCase()],n=n&&O.call(b.attrHandle,t.toLowerCase())?n(e,t,!A):void 0;return void 0!==n?n:h.attributes||!A?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},se.escape=function(e){return(e+"").replace(ie,ae)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(c=!h.detectDuplicates,l=!h.sortStable&&e.slice(0),e.sort(D),c){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return l=null,e},a=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},(b=se.selectors={cacheLength:50,createPseudo:ce,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,d),e[3]=(e[3]||e[4]||e[5]||"").replace(re,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=f(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=se.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(V," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,m,g){var _="nth"!==p.slice(0,3),y="last"!==p.slice(-4),v="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,a,o,s,l,c=_!=y?"nextSibling":"previousSibling",u=e.parentNode,d=v&&e.nodeName.toLowerCase(),h=!n&&!v,f=!1;if(u){if(_){for(;c;){for(o=e;o=o[c];)if(v?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&h){for(f=(s=(r=(i=(a=(o=u)[k]||(o[k]={}))[o.uniqueID]||(a[o.uniqueID]={}))[p]||[])[0]===M&&r[1])&&r[2],o=s&&u.childNodes[s];o=++s&&o&&o[c]||(f=s=0)||l.pop();)if(1===o.nodeType&&++f&&o===e){i[p]=[M,s,f];break}}else if(!1===(f=h?s=(r=(i=(a=(o=e)[k]||(o[k]={}))[o.uniqueID]||(a[o.uniqueID]={}))[p]||[])[0]===M&&r[1]:f))for(;(o=++s&&o&&o[c]||(f=s=0)||l.pop())&&((v?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++f||(h&&((i=(a=o[k]||(o[k]={}))[o.uniqueID]||(a[o.uniqueID]={}))[p]=[M,f]),o!==e)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(e,a){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[k]?o(a):1<o.length?(t=[e,e,"",a],b.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,t){for(var n,r=o(e,a),i=r.length;i--;)e[n=z(e,r[i])]=!(t[n]=r[i])}):function(e){return o(e,0,t)}):o}},pseudos:{not:ce(function(e){var r=[],i=[],s=p(e.replace(q,"$1"));return s[k]?ce(function(e,t,n,r){for(var i,a=s(e,null,r,[]),o=e.length;o--;)(i=a[o])&&(e[o]=!(t[o]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:ce(function(t){return function(e){return 0<se(t,e).length}}),contains:ce(function(t){return t=t.replace(re,d),function(e){return-1<(e.textContent||a(e)).indexOf(t)}}),lang:ce(function(n){return Z.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(re,d).toLowerCase(),function(e){var t;do{if(t=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function ge(){}function _e(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(o,e,t){var s=e.dir,l=e.next,c=l||s,u=t&&"parentNode"===c,d=v++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||u)return o(e,t,n);return!1}:function(e,t,n){var r,i,a=[M,d];if(n){for(;e=e[s];)if((1===e.nodeType||u)&&o(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||u)if(r=(i=e[k]||(e[k]={}))[e.uniqueID]||(i[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((i=r[c])&&i[0]===M&&i[1]===d)return a[2]=i[2];if((r[c]=a)[2]=o(e,t,n))return!0}return!1}}function ve(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function be(e,t,n,r,i){for(var a,o=[],s=0,l=e.length,c=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),c&&t.push(s)));return o}function xe(f,p,m,g,_,e){return g&&!g[k]&&(g=xe(g)),_&&!_[k]&&(_=xe(_,e)),ce(function(e,t,n,r){var i,a,o,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(p||"*",n.nodeType?[n]:n,[]),d=!f||!e&&p?u:be(u,s,f,n,r),h=m?_||(e?f:c||g)?[]:t:d;if(m&&m(d,h,n,r),g)for(i=be(h,l),g(i,[],n,r),a=i.length;a--;)(o=i[a])&&(h[l[a]]=!(d[l[a]]=o));if(e){if(_||f){if(_){for(i=[],a=h.length;a--;)(o=h[a])&&i.push(d[a]=o);_(null,h=[],i,r)}for(a=h.length;a--;)(o=h[a])&&-1<(i=_?z(e,o):s[a])&&(e[i]=!(t[i]=o))}}else h=be(h===t?h.splice(c,h.length):h),_?_(null,t,h,r):I.apply(t,h)})}function we(g,_){function e(e,t,n,r,i){var a,o,s,l=0,c="0",u=e&&[],d=[],h=x,f=e||v&&b.find.TAG("*",i),p=M+=null==h?1:Math.random()||.1,m=f.length;for(i&&(x=t==T||t||i);c!==m&&null!=(a=f[c]);c++){if(v&&a){for(o=0,t||a.ownerDocument==T||(w(a),n=!A);s=g[o++];)if(s(a,t||T,n)){r.push(a);break}i&&(M=p)}y&&((a=!s&&a)&&l--,e&&u.push(a))}if(l+=c,y&&c!==l){for(o=0;s=_[o++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=P.call(r));d=be(d)}I.apply(r,d),i&&!e&&0<d.length&&1<l+_.length&&se.uniqueSort(r)}return i&&(M=p,x=h),u}var y=0<_.length,v=0<g.length;return y?ce(e):e}return ge.prototype=b.filters=b.pseudos,b.setFilters=new ge,f=se.tokenize=function(e,t){var n,r,i,a,o,s,l,c=E[e+" "];if(c)return t?0:c.slice(0);for(o=e,s=[],l=b.preFilter;o;){for(a in n&&!(r=Y.exec(o))||(r&&(o=o.slice(r[0].length)||o),s.push(i=[])),n=!1,(r=G.exec(o))&&(n=r.shift(),i.push({value:n,type:r[0].replace(q," ")}),o=o.slice(n.length)),b.filter)!(r=J[a].exec(o))||l[a]&&!(r=l[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?se.error(e):E(e,s).slice(0)},p=se.compile=function(e,t){var n,r=[],i=[],a=C[e+" "];if(!a){for(n=(t=t||f(e)).length;n--;)((a=function e(t){for(var r,n,i,a=t.length,o=b.relative[t[0].type],s=o||b.relative[" "],l=o?1:0,c=ye(function(e){return e===r},s,!0),u=ye(function(e){return-1<z(r,e)},s,!0),d=[function(e,t,n){return n=!o&&(n||t!==x)||((r=t).nodeType?c:u)(e,t,n),r=null,n}];l<a;l++)if(n=b.relative[t[l].type])d=[ye(ve(d),n)];else{if((n=b.filter[t[l].type].apply(null,t[l].matches))[k]){for(i=++l;i<a&&!b.relative[t[i].type];i++);return xe(1<l&&ve(d),1<l&&_e(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(q,"$1"),n,l<i&&e(t.slice(l,i)),i<a&&e(t=t.slice(i)),i<a&&_e(t))}d.push(n)}return ve(d)}(t[n]))[k]?r:i).push(a);(a=C(e,we(i,r))).selector=e}return a},m=se.select=function(e,t,n,r){var i,a,o,s,l,c="function"==typeof e&&e,u=!r&&f(e=c.selector||e);if(n=n||[],1===u.length){if(2<(a=u[0]=u[0].slice(0)).length&&"ID"===(o=a[0]).type&&9===t.nodeType&&A&&b.relative[a[1].type]){if(!(t=(b.find.ID(o.matches[0].replace(re,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(i=J.needsContext.test(e)?0:a.length;i--&&(o=a[i],!b.relative[s=o.type]);)if((l=b.find[s])&&(r=l(o.matches[0].replace(re,d),ne.test(a[0].type)&&me(t.parentNode)||t))){if(a.splice(i,1),!(e=r.length&&_e(a)))return I.apply(n,r),n;break}}return(c||p(e,u))(r,t,!A,n,!t||ne.test(e)&&me(t.parentNode)||t),n},h.sortStable=k.split("").sort(D).join("")===k,h.detectDuplicates=!!c,w(),h.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||de(F,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),se}(w);A.find=h,A.expr=h.selectors,A.expr[":"]=A.expr.pseudos,A.uniqueSort=A.unique=h.uniqueSort,A.text=h.getText,A.isXMLDoc=h.isXML,A.contains=h.contains,A.escapeSelector=h.escape;function f(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&A(e).is(n))break;r.push(e)}return r}function x(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var k=A.expr.match.needsContext;function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var S=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function E(e,n,r){return v(n)?A.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?A.grep(e,function(e){return e===n!==r}):"string"!=typeof n?A.grep(e,function(e){return-1<i.call(n,e)!==r}):A.filter(n,e,r)}A.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?A.find.matchesSelector(r,e)?[r]:[]:A.find.matches(e,A.grep(t,function(e){return 1===e.nodeType}))},A.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(A(e).filter(function(){for(t=0;t<r;t++)if(A.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)A.find(e,i[t],n);return 1<r?A.uniqueSort(n):n},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&k.test(e)?A(e):e||[],!1).length}});var C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(e,t,n){if(!e)return this;if(n=n||L,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(A):A.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:C.exec(e))||!r[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(r[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),S.test(r[1])&&A.isPlainObject(t))for(var r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(e=T.getElementById(r[2]))&&(this[0]=e,this.length=1),this}).prototype=A.fn;var L=A(T),D=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}A.fn.extend({has:function(e){var t=A(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(A.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&A(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&A.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(1<a.length?A.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?i.call(A(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),A.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return f(e,"parentNode")},parentsUntil:function(e,t,n){return f(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return f(e,"nextSibling")},prevAll:function(e){return f(e,"previousSibling")},nextUntil:function(e,t,n){return f(e,"nextSibling",n)},prevUntil:function(e,t,n){return f(e,"previousSibling",n)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return null!=e.contentDocument&&n(e.contentDocument)?e.contentDocument:(M(e,"template")&&(e=e.content||e),A.merge([],e.childNodes))}},function(r,i){A.fn[r]=function(e,t){var n=A.map(this,i,e);return(t="Until"!==r.slice(-5)?e:t)&&"string"==typeof t&&(n=A.filter(t,n)),1<this.length&&(O[r]||A.uniqueSort(n),D.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function I(e){return e}function N(e){throw e}function z(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}A.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},A.each(e.match(R)||[],function(e,t){n[t]=!0}),n):A.extend({},r);function i(){for(s=s||r.once,o=a=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=l.length,t=!1);r.memory||(t=!1),a=!1,s&&(l=t?[]:"")}var a,t,o,s,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!a&&(u=l.length-1,c.push(t)),function n(e){A.each(e,function(e,t){v(t)?r.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==p(t)&&n(t)})}(arguments),t&&!a&&i()),this},remove:function(){return A.each(arguments,function(e,t){for(var n;-1<(n=A.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<A.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||a||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),a||i()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},A.extend({Deferred:function(e){var a=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var i=arguments;return A.Deferred(function(r){A.each(a,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var l=0;function c(i,a,o,s){return function(){function e(){var e,t;if(!(i<l)){if((e=o.apply(n,r))===a.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,c(l,a,I,s),c(l,a,N,s)):(l++,t.call(e,c(l,a,I,s),c(l,a,N,s),c(l,a,I,a.notifyWith))):(o!==I&&(n=void 0,r=[e]),(s||a.resolveWith)(n,r))}}var n=this,r=arguments,t=s?e:function(){try{e()}catch(e){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(e,t.stackTrace),l<=i+1&&(o!==N&&(n=void 0,r=[e]),a.rejectWith(n,r))}};i?t():(A.Deferred.getStackHook&&(t.stackTrace=A.Deferred.getStackHook()),w.setTimeout(t))}}return A.Deferred(function(e){a[0][3].add(c(0,e,v(r)?r:I,e.notifyWith)),a[1][3].add(c(0,e,v(t)?t:I)),a[2][3].add(c(0,e,v(n)?n:N))}).promise()},promise:function(e){return null!=e?A.extend(e,o):o}},s={};return A.each(a,function(e,t){var n=t[2],r=t[5];o[t[1]]=n.add,r&&n.add(function(){i=r},a[3-e][2].disable,a[3-e][3].disable,a[0][2].lock,a[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){i[t]=this,a[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(i,a)}}var n=arguments.length,r=n,i=Array(r),a=s.call(arguments),o=A.Deferred();if(n<=1&&(z(e,o.done(t(r)).resolve,o.reject,!n),"pending"===o.state()||v(a[r]&&a[r].then)))return o.then();for(;r--;)z(a[r],t(r),o.reject);return o.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&F.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},A.readyException=function(e){w.setTimeout(function(){throw e})};var j=A.Deferred();function B(){T.removeEventListener("DOMContentLoaded",B),w.removeEventListener("load",B),A.ready()}A.fn.ready=function(e){return j.then(e).catch(function(e){A.readyException(e)}),this},A.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--A.readyWait:A.isReady)||(A.isReady=!0)!==e&&0<--A.readyWait||j.resolveWith(T,[A])}}),A.ready.then=j.then,"complete"===T.readyState||"loading"!==T.readyState&&!T.documentElement.doScroll?w.setTimeout(A.ready):(T.addEventListener("DOMContentLoaded",B),w.addEventListener("load",B));var H=function(e,t,n,r,i,a,o){var s=0,l=e.length,c=null==n;if("object"===p(n))for(s in i=!0,n)H(e,t,s,n[s],!0,a,o);else if(void 0!==r&&(i=!0,v(r)||(o=!0),t=c?o?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(A(e),n)}):t))for(;s<l;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):a},U=/^-ms-/,V=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function Y(e){return e.replace(U,"ms-").replace(V,q)}function G(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function W(){this.expando=A.expando+W.uid++}W.uid=1,W.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[Y(t)]=n;else for(r in t)i[Y(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in r?[t]:t.match(R)||[]).length;for(;n--;)delete r[t[n]]}void 0!==t&&!A.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!A.isEmptyObject(e)}};var X=new W,Z=new W,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/[A-Z]/g;function Q(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace($,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}A.extend({hasData:function(e){return Z.hasData(e)||X.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),A.fn.extend({data:function(n,e){var t,r,i,a=this[0],o=a&&a.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){Z.set(this,n)}):H(this,function(e){var t;return a&&void 0===e?void 0!==(t=Z.get(a,n))||void 0!==(t=Q(a,n))?t:void 0:void this.each(function(){Z.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=Z.get(a),1===a.nodeType&&!X.get(a,"hasDataAttrs"))){for(t=o.length;t--;)o[t]&&0===(r=o[t].name).indexOf("data-")&&(r=Y(r.slice(5)),Q(a,r,i[r]));X.set(a,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),A.extend({queue:function(e,t,n){var r;if(e)return r=X.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=X.access(e,t,A.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=A.queue(e,t),r=n.length,i=n.shift(),a=A._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,function(){A.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:A.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),A.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?A.queue(this[0],t):void 0===n?this:this.each(function(){var e=A.queue(this,t,n);A._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&A.dequeue(this,t)})},dequeue:function(e){return this.each(function(){A.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||a.resolveWith(o,[o])}var r,i=1,a=A.Deferred(),o=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=X.get(o[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),a.promise(t)}});var K=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=T.documentElement,re=function(e){return A.contains(e.ownerDocument,e)},ie={composed:!0};ne.getRootNode&&(re=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(ie)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===A.css(e,"display")};function oe(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return A.css(e,t,"")},l=s(),c=n&&n[3]||(A.cssNumber[t]?"":"px"),u=e.nodeType&&(A.cssNumber[t]||"px"!==c&&+l)&&ee.exec(A.css(e,t));if(u&&u[3]!==c){for(c=c||u[3],u=+(l/=2)||1;o--;)A.style(e,t,u+c),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),u/=a;A.style(e,t,(u*=2)+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var se={};function le(e,t){for(var n,r,i,a,o,s=[],l=0,c=e.length;l<c;l++)(r=e[l]).style&&(n=r.style.display,t?("none"===n&&(s[l]=X.get(r,"display")||null,s[l]||(r.style.display="")),""===r.style.display&&ae(r)&&(s[l]=(o=a=void 0,a=(i=r).ownerDocument,o=i.nodeName,(i=se[o])||(a=a.body.appendChild(a.createElement(o)),i=A.css(a,"display"),a.parentNode.removeChild(a),se[o]=i="none"===i?"block":i)))):"none"!==n&&(s[l]="none",X.set(r,"display",n)));for(l=0;l<c;l++)null!=s[l]&&(e[l].style.display=s[l]);return e}A.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?A(this).show():A(this).hide()})}});var ce=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,de=/^$|^module$|\/(?:java|ecma)script/i;Wt=T.createDocumentFragment().appendChild(T.createElement("div")),(h=T.createElement("input")).setAttribute("type","radio"),h.setAttribute("checked","checked"),h.setAttribute("name","t"),Wt.appendChild(h),y.checkClone=Wt.cloneNode(!0).cloneNode(!0).lastChild.checked,Wt.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!Wt.cloneNode(!0).lastChild.defaultValue,Wt.innerHTML="<option></option>",y.option=!!Wt.lastChild;var he={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&M(e,t)?A.merge([e],n):n}function pe(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td,y.option||(he.optgroup=he.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function ge(e,t,n,r,i){for(var a,o,s,l,c,u=t.createDocumentFragment(),d=[],h=0,f=e.length;h<f;h++)if((a=e[h])||0===a)if("object"===p(a))A.merge(d,a.nodeType?[a]:a);else if(me.test(a)){for(o=o||u.appendChild(t.createElement("div")),s=(ue.exec(a)||["",""])[1].toLowerCase(),s=he[s]||he._default,o.innerHTML=s[1]+A.htmlPrefilter(a)+s[2],c=s[0];c--;)o=o.lastChild;A.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(t.createTextNode(a));for(u.textContent="",h=0;a=d[h++];)if(r&&-1<A.inArray(a,r))i&&i.push(a);else if(l=re(a),o=fe(u.appendChild(a),"script"),l&&pe(o),n)for(c=0;a=o[c++];)de.test(a.type||"")&&n.push(a);return u}var _e=/^([^.]*)(?:\.(.+)|)/;function ye(){return!0}function ve(){return!1}function be(e,t){return e===function(){try{return T.activeElement}catch(e){}}()==("focus"===t)}function xe(e,t,n,r,i,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)xe(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ve;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return A().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=A.guid++)),e.each(function(){A.event.add(this,t,i,r,n)})}function we(e,i,a){a?(X.set(e,i,!1),A.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=X.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(A.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),X.set(this,i,r),t=a(this,i),this[i](),r!==(n=X.get(this,i))||t?X.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(X.set(this,i,{value:A.event.trigger(A.extend(r[0],A.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,i)&&A.event.add(e,i,ye)}A.event={global:{},add:function(t,e,n,r,i){var a,o,s,l,c,u,d,h,f,p=X.get(t);if(G(t))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&A.find.matchesSelector(ne,i),n.guid||(n.guid=A.guid++),(s=p.events)||(s=p.events=Object.create(null)),(o=p.handle)||(o=p.handle=function(e){return void 0!==A&&A.event.triggered!==e.type?A.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;l--;)d=f=(c=_e.exec(e[l])||[])[1],h=(c[2]||"").split(".").sort(),d&&(u=A.event.special[d]||{},d=(i?u.delegateType:u.bindType)||d,u=A.event.special[d]||{},c=A.extend({type:d,origType:f,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&A.expr.match.needsContext.test(i),namespace:h.join(".")},a),(f=s[d])||((f=s[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,h,o)||t.addEventListener&&t.addEventListener(d,o)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),A.event.global[d]=!0)},remove:function(e,t,n,r,i){var a,o,s,l,c,u,d,h,f,p,m,g=X.hasData(e)&&X.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(R)||[""]).length;c--;)if(f=m=(s=_e.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=A.event.special[f]||{},h=l[f=(r?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)u=h[a],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(h.splice(a,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||A.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)A.event.remove(e,f+t[c],n,r,!0);A.isEmptyObject(l)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o=new Array(arguments.length),s=A.event.fix(e),l=(X.get(this,"events")||Object.create(null))[s.type]||[],e=A.event.special[s.type]||{};for(o[0]=s,t=1;t<arguments.length;t++)o[t]=arguments[t];if(s.delegateTarget=this,!e.preDispatch||!1!==e.preDispatch.call(this,s)){for(a=A.event.handlers.call(this,s,l),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==i.namespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(i=((A.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,o))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return e.postDispatch&&e.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,a,o,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],o={},n=0;n<l;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?-1<A(i,this).index(c):A.find(i,this,null,[c]).length),o[i]&&a.push(r);a.length&&s.push({elem:c,handlers:a})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(A.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return ce.test(e.type)&&e.click&&M(e,"input")&&we(e,"click",ye),!1},trigger:function(e){e=this||e;return ce.test(e.type)&&e.click&&M(e,"input")&&we(e,"click"),!0},_default:function(e){e=e.target;return ce.test(e.type)&&e.click&&M(e,"input")&&X.get(e,"click")||M(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},A.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ye:ve,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:ve,isPropagationStopped:ve,isImmediatePropagationStopped:ve,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ye,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ye,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ye,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},function(e,t){A.event.special[e]={setup:function(){return we(this,e,be),!1},trigger:function(){return we(this,e),!0},_default:function(){return!0},delegateType:t}}),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){A.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||A.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),A.fn.extend({on:function(e,t,n,r){return xe(this,e,t,n,r)},one:function(e,t,n,r){return xe(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,A(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ve),this.each(function(){A.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var Te=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return M(e,"table")&&M(11!==t.nodeType?t:t.firstChild,"tr")&&A(e).children("tbody")[0]||e}function Se(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ee(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ce(e,t){var n,r,i,a;if(1===t.nodeType){if(X.hasData(e)&&(a=X.get(e).events))for(i in X.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)A.event.add(t,i,a[i][n]);Z.hasData(e)&&(e=Z.access(e),e=A.extend({},e),Z.set(t,e))}}function Le(n,r,i,a){r=g(r);var e,t,o,s,l,c,u=0,d=n.length,h=d-1,f=r[0],p=v(f);if(p||1<d&&"string"==typeof f&&!y.checkClone&&Ae.test(f))return n.each(function(e){var t=n.eq(e);p&&(r[0]=f.call(this,e,t.html())),Le(t,r,i,a)});if(d&&(t=(e=ge(r,n[0].ownerDocument,!1,n,a)).firstChild,1===e.childNodes.length&&(e=t),t||a)){for(s=(o=A.map(fe(e,"script"),Se)).length;u<d;u++)l=e,u!==h&&(l=A.clone(l,!0,!0),s&&A.merge(o,fe(l,"script"))),i.call(n[u],l,u);if(s)for(c=o[o.length-1].ownerDocument,A.map(o,Ee),u=0;u<s;u++)l=o[u],de.test(l.type||"")&&!X.access(l,"globalEval")&&A.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?A._evalUrl&&!l.noModule&&A._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):b(l.textContent.replace(ke,""),l,c))}return n}function De(e,t,n){for(var r,i=t?A.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||A.cleanData(fe(r)),r.parentNode&&(n&&re(r)&&pe(fe(r,"script")),r.parentNode.removeChild(r));return e}A.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,a,o,s,l,c,u=e.cloneNode(!0),d=re(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||A.isXMLDoc(e)))for(o=fe(u),r=0,i=(a=fe(e)).length;r<i;r++)s=a[r],l=o[r],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ce.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(a=a||fe(e),o=o||fe(u),r=0,i=a.length;r<i;r++)Ce(a[r],o[r]);else Ce(e,u);return 0<(o=fe(u,"script")).length&&pe(o,!d&&fe(e,"script")),u},cleanData:function(e){for(var t,n,r,i=A.event.special,a=0;void 0!==(n=e[a]);a++)if(G(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)i[r]?A.event.remove(n,r):A.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),A.fn.extend({detach:function(e){return De(this,e,!0)},remove:function(e){return De(this,e)},text:function(e){return H(this,function(e){return void 0===e?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Le(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Le(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Me(this,e)).insertBefore(e,t.firstChild)})},before:function(){return Le(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Le(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(A.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return A.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Te.test(e)&&!he[(ue.exec(e)||["",""])[1].toLowerCase()]){e=A.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(A.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Le(this,arguments,function(e){var t=this.parentNode;A.inArray(this,n)<0&&(A.cleanData(fe(this)),t&&t.replaceChild(e,this))},n)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){A.fn[e]=function(e){for(var t,n=[],r=A(e),i=r.length-1,a=0;a<=i;a++)t=a===i?this:this.clone(!0),A(r[a])[o](t),l.apply(n,t.get());return this.pushStack(n)}});function Oe(e,t,n){var r,i={};for(r in t)i[r]=e.style[r],e.style[r]=t[r];for(r in n=n.call(e),t)e.style[r]=i[r];return n}var Pe,Re,Ie,Ne,ze,Fe,je,Be,He=new RegExp("^("+K+")(?!px)[a-z%]+$","i"),Ue=function(e){var t=e.ownerDocument.defaultView;return(t=!t||!t.opener?w:t).getComputedStyle(e)},Ve=new RegExp(te.join("|"),"i");function qe(){var e;Be&&(je.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Be.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(je).appendChild(Be),e=w.getComputedStyle(Be),Pe="1%"!==e.top,Fe=12===Ye(e.marginLeft),Be.style.right="60%",Ne=36===Ye(e.right),Re=36===Ye(e.width),Be.style.position="absolute",Ie=12===Ye(Be.offsetWidth/3),ne.removeChild(je),Be=null)}function Ye(e){return Math.round(parseFloat(e))}function Ge(e,t,n){var r,i,a=e.style;return(n=n||Ue(e))&&(""!==(i=n.getPropertyValue(t)||n[t])||re(e)||(i=A.style(e,t)),!y.pixelBoxStyles()&&He.test(i)&&Ve.test(t)&&(r=a.width,e=a.minWidth,t=a.maxWidth,a.minWidth=a.maxWidth=a.width=i,i=n.width,a.width=r,a.minWidth=e,a.maxWidth=t)),void 0!==i?i+"":i}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}je=T.createElement("div"),(Be=T.createElement("div")).style&&(Be.style.backgroundClip="content-box",Be.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===Be.style.backgroundClip,A.extend(y,{boxSizingReliable:function(){return qe(),Re},pixelBoxStyles:function(){return qe(),Ne},pixelPosition:function(){return qe(),Pe},reliableMarginLeft:function(){return qe(),Fe},scrollboxSize:function(){return qe(),Ie},reliableTrDimensions:function(){var e,t,n;return null==ze&&(e=T.createElement("table"),t=T.createElement("tr"),n=T.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ne.appendChild(e).appendChild(t).appendChild(n),n=w.getComputedStyle(t),ze=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight,ne.removeChild(e)),ze}}));var Xe=["Webkit","Moz","ms"],Ze=T.createElement("div").style,Je={};function $e(e){var t=A.cssProps[e]||Je[e];return t||(e in Ze?e:Je[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if((e=Xe[n]+t)in Ze)return e}(e)||e)}var Qe=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function nt(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function rt(e,t,n,r,i,a){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=A.css(e,n+te[o],!0,i)),r?("content"===n&&(l-=A.css(e,"padding"+te[o],!0,i)),"margin"!==n&&(l-=A.css(e,"border"+te[o]+"Width",!0,i))):(l+=A.css(e,"padding"+te[o],!0,i),"padding"!==n?l+=A.css(e,"border"+te[o]+"Width",!0,i):s+=A.css(e,"border"+te[o]+"Width",!0,i));return!r&&0<=a&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))||0),l}function it(e,t,n){var r=Ue(e),i=(!y.boxSizingReliable()||n)&&"border-box"===A.css(e,"boxSizing",!1,r),a=i,o=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(He.test(o)){if(!n)return o;o="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&M(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===A.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===A.css(e,"boxSizing",!1,r),(a=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+rt(e,t,n||(i?"border":"content"),a,r,o)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}A.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=Ge(e,"opacity");return""===e?"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=Y(t),l=Ke.test(t),c=e.style;if(l||(t=$e(s)),o=A.cssHooks[t]||A.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:c[t];"string"===(a=typeof n)&&(i=ee.exec(n))&&i[1]&&(n=oe(e,t,i),a="number"),null!=n&&n==n&&("number"!==a||l||(n+=i&&i[3]||(A.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,a=Y(t);return Ke.test(t)||(t=$e(a)),"normal"===(i=void 0===(i=(a=A.cssHooks[t]||A.cssHooks[a])&&"get"in a?a.get(e,!0,n):i)?Ge(e,t,r):i)&&t in tt&&(i=tt[t]),""===n||n?(t=parseFloat(i),!0===n||isFinite(t)?t||0:i):i}}),A.each(["height","width"],function(e,s){A.cssHooks[s]={get:function(e,t,n){if(t)return!Qe.test(A.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?it(e,s,n):Oe(e,et,function(){return it(e,s,n)})},set:function(e,t,n){var r,i=Ue(e),a=!y.scrollboxSize()&&"absolute"===i.position,o=(a||n)&&"border-box"===A.css(e,"boxSizing",!1,i),n=n?rt(e,s,n,o,i):0;return o&&a&&(n-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(i[s])-rt(e,s,"border",!1,i)-.5)),n&&(r=ee.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=A.css(e,s)),nt(0,t,n)}}}),A.cssHooks.marginLeft=We(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Oe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),A.each({margin:"",padding:"",border:"Width"},function(i,a){A.cssHooks[i+a]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+te[t]+a]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(A.cssHooks[i+a].set=nt)}),A.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=Ue(e),i=t.length;o<i;o++)a[t[o]]=A.css(e,t[o],!1,r);return a}return void 0!==n?A.style(e,t,n):A.css(e,t)},e,t,1<arguments.length)}}),(A.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||A.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(A.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return(e&&e.get?e:at.propHooks._default).get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:at.propHooks._default).set(this),this}},at.prototype.init.prototype=at.prototype,at.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=A.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){A.fx.step[e.prop]?A.fx.step[e.prop](e):1!==e.elem.nodeType||!A.cssHooks[e.prop]&&null==e.elem.style[$e(e.prop)]?e.elem[e.prop]=e.now:A.style(e.elem,e.prop,e.now+e.unit)}}},at.propHooks.scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},A.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},A.fx=at.prototype.init,A.fx.step={};var ot,st,lt=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function ut(){st&&(!1===T.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(ut):w.setTimeout(ut,A.fx.interval),A.fx.tick())}function dt(){return w.setTimeout(function(){ot=void 0}),ot=Date.now()}function ht(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=te[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ft(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function pt(i,e,t){var n,a,r=0,o=pt.prefilters.length,s=A.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=ot||dt(),e=Math.max(0,c.startTime+c.duration-e),t=1-(e/c.duration||0),n=0,r=c.tweens.length;n<r;n++)c.tweens[n].run(t);return s.notifyWith(i,[c,t,e]),t<1&&r?e:(r||s.notifyWith(i,[c,1,0]),s.resolveWith(i,[c]),!1)},c=s.promise({elem:i,props:A.extend({},e),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},t),originalProperties:e,originalOptions:t,startTime:ot||dt(),duration:t.duration,tweens:[],createTween:function(e,t){e=A.Tween(i,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(e),e},stop:function(e){var t=0,n=e?c.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)c.tweens[t].run(1);return e?(s.notifyWith(i,[c,1,0]),s.resolveWith(i,[c,e])):s.rejectWith(i,[c,e]),this}}),u=c.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=Y(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=A.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);r<o;r++)if(n=pt.prefilters[r].call(c,i,u,c.opts))return v(n.stop)&&(A._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return A.map(u,ft,c),v(c.opts.start)&&c.opts.start.call(i,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),A.fx.timer(A.extend(l,{elem:i,anim:c,queue:c.opts.queue})),c}A.Animation=A.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=v(e)?(t=e,["*"]):e.match(R)).length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,s,l,c,u="width"in t||"height"in t,d=this,h={},f=e.style,p=e.nodeType&&ae(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(o=A._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,A.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[r],lt.test(i)){if(delete t[r],a=a||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;p=!0}h[r]=m&&m[r]||A.style(e,r)}if((l=!A.isEmptyObject(t))||!A.isEmptyObject(h))for(r in u&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=X.get(e,"display")),"none"===(u=A.css(e,"display"))&&(c?u=c:(le([e],!0),c=e.style.display||c,u=A.css(e,"display"),le([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===A.css(e,"float")&&(l||(d.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,h)l||(m?"hidden"in m&&(p=m.hidden):m=X.access(e,"fxshow",{display:c}),a&&(m.hidden=!p),p&&le([e],!0),d.done(function(){for(r in p||le([e]),X.remove(e,"fxshow"),h)A.style(e,r,h[r])})),l=ft(p?m[r]:0,r,d),r in m||(m[r]=l.start,p&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),A.speed=function(e,t,n){var r=e&&"object"==typeof e?A.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return A.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in A.fx.speeds?r.duration=A.fx.speeds[r.duration]:r.duration=A.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&A.dequeue(this,r.queue)},r},A.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=A.isEmptyObject(t),a=A.speed(e,n,r),r=function(){var e=pt(this,A.extend({},t),a);(i||X.get(this,"finish"))&&e.stop(!0)};return r.finish=r,i||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(i,e,a){function o(e){var t=e.stop;delete e.stop,t(a)}return"string"!=typeof i&&(a=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=A.timers,r=X.get(this);if(t)r[t]&&r[t].stop&&o(r[t]);else for(t in r)r[t]&&r[t].stop&&ct.test(t)&&o(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(a),e=!1,n.splice(t,1));!e&&a||A.dequeue(this,i)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=X.get(this),n=t[o+"queue"],r=t[o+"queueHooks"],i=A.timers,a=n?n.length:0;for(t.finish=!0,A.queue(this,o,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===o&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),A.each(["toggle","show","hide"],function(e,r){var i=A.fn[r];A.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ht(r,!0),e,t,n)}}),A.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){A.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),A.timers=[],A.fx.tick=function(){var e,t=0,n=A.timers;for(ot=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||A.fx.stop(),ot=void 0},A.fx.timer=function(e){A.timers.push(e),A.fx.start()},A.fx.interval=13,A.fx.start=function(){st||(st=!0,ut())},A.fx.stop=function(){st=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(r,e){return r=A.fx&&A.fx.speeds[r]||r,this.queue(e=e||"fx",function(e,t){var n=w.setTimeout(e,r);t.stop=function(){w.clearTimeout(n)}})},Wt=T.createElement("input"),K=T.createElement("select").appendChild(T.createElement("option")),Wt.type="checkbox",y.checkOn=""!==Wt.value,y.optSelected=K.selected,(Wt=T.createElement("input")).value="t",Wt.type="radio",y.radioValue="t"===Wt.value;var mt,gt=A.expr.attrHandle;A.fn.extend({attr:function(e,t){return H(this,A.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){A.removeAttr(this,e)})}}),A.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?A.prop(e,t,n):(1===a&&A.isXMLDoc(e)||(i=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void A.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):!(i&&"get"in i&&null!==(r=i.get(e,t)))&&null==(r=A.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&M(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?A.removeAttr(e,n):e.setAttribute(n,n),n}},A.each(A.expr.match.bool.source.match(/\w+/g),function(e,t){var o=gt[t]||A.find.attr;gt[t]=function(e,t,n){var r,i,a=t.toLowerCase();return n||(i=gt[a],gt[a]=r,r=null!=o(e,t,n)?a:null,gt[a]=i),r}});var _t=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function vt(e){return(e.match(R)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}A.fn.extend({prop:function(e,t){return H(this,A.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[A.propFix[e]||e]})}}),A.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&A.isXMLDoc(e)||(t=A.propFix[t]||t,i=A.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=A.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(A.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this}),A.fn.extend({addClass:function(t){var e,n,r,i,a,o,s=0;if(v(t))return this.each(function(e){A(this).addClass(t.call(this,e,bt(this)))});if((e=xt(t)).length)for(;n=this[s++];)if(o=bt(n),r=1===n.nodeType&&" "+vt(o)+" "){for(a=0;i=e[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o!==(o=vt(r))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,r,i,a,o,s=0;if(v(t))return this.each(function(e){A(this).removeClass(t.call(this,e,bt(this)))});if(!arguments.length)return this.attr("class","");if((e=xt(t)).length)for(;n=this[s++];)if(o=bt(n),r=1===n.nodeType&&" "+vt(o)+" "){for(a=0;i=e[a++];)for(;-1<r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");o!==(o=vt(r))&&n.setAttribute("class",o)}return this},toggleClass:function(i,t){var a=typeof i,o="string"==a||Array.isArray(i);return"boolean"==typeof t&&o?t?this.addClass(i):this.removeClass(i):v(i)?this.each(function(e){A(this).toggleClass(i.call(this,e,bt(this),t),t)}):this.each(function(){var e,t,n,r;if(o)for(t=0,n=A(this),r=xt(i);e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=a||((e=bt(this))&&X.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==i&&X.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+vt(bt(t))+" ").indexOf(r))return!0;return!1}});var wt=/\r/g;A.fn.extend({val:function(t){var n,e,r,i=this[0];return arguments.length?(r=v(t),this.each(function(e){1===this.nodeType&&(null==(e=r?t.call(this,e,A(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=A.map(e,function(e){return null==e?"":e+""})),(n=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):i?(n=A.valHooks[i.type]||A.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(wt,""):null==e?"":e:void 0}}),A.extend({valHooks:{option:{get:function(e){var t=A.find.attr(e,"value");return null!=t?t:vt(A.text(e))}},select:{get:function(e){for(var t,n=e.options,r=e.selectedIndex,i="select-one"===e.type,a=i?null:[],o=i?r+1:n.length,s=r<0?o:i?r:0;s<o;s++)if(((t=n[s]).selected||s===r)&&!t.disabled&&(!t.parentNode.disabled||!M(t.parentNode,"optgroup"))){if(t=A(t).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,a=A.makeArray(t),o=i.length;o--;)((r=i[o]).selected=-1<A.inArray(A.valHooks.option.get(r),a))&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<A.inArray(A(e).val(),t)}},y.checkOn||(A.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in w;function Tt(e){e.stopPropagation()}var At=/^(?:focusinfocus|focusoutblur)$/;A.extend(A.event,{trigger:function(e,t,n,r){var i,a,o,s,l,c,u,d=[n||T],h=_.call(e,"type")?e.type:e,f=_.call(e,"namespace")?e.namespace.split("."):[],p=u=a=n=n||T;if(3!==n.nodeType&&8!==n.nodeType&&!At.test(h+A.event.triggered)&&(-1<h.indexOf(".")&&(h=(f=h.split(".")).shift(),f.sort()),s=h.indexOf(":")<0&&"on"+h,(e=e[A.expando]?e:new A.Event(h,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:A.makeArray(t,[e]),c=A.event.special[h]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!m(n)){for(o=c.delegateType||h,At.test(o+h)||(p=p.parentNode);p;p=p.parentNode)d.push(p),a=p;a===(n.ownerDocument||T)&&d.push(a.defaultView||a.parentWindow||w)}for(i=0;(p=d[i++])&&!e.isPropagationStopped();)u=p,e.type=1<i?o:c.bindType||h,(l=(X.get(p,"events")||Object.create(null))[e.type]&&X.get(p,"handle"))&&l.apply(p,t),(l=s&&p[s])&&l.apply&&G(p)&&(e.result=l.apply(p,t),!1===e.result&&e.preventDefault());return e.type=h,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!G(n)||s&&v(n[h])&&!m(n)&&((a=n[s])&&(n[s]=null),A.event.triggered=h,e.isPropagationStopped()&&u.addEventListener(h,Tt),n[h](),e.isPropagationStopped()&&u.removeEventListener(h,Tt),A.event.triggered=void 0,a&&(n[s]=a)),e.result}},simulate:function(e,t,n){e=A.extend(new A.Event,n,{type:e,isSimulated:!0});A.event.trigger(e,null,t)}}),A.fn.extend({trigger:function(e,t){return this.each(function(){A.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return A.event.trigger(e,t,n,!0)}}),y.focusin||A.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){A.event.simulate(r,e.target,A.event.fix(e))}A.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=X.access(e,r);t||e.addEventListener(n,i,!0),X.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=X.access(e,r)-1;t?X.access(e,r,t):(e.removeEventListener(n,i,!0),X.remove(e,r))}}});var kt=w.location,Mt={guid:Date.now()},St=/\?/;A.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||A.error("Invalid XML: "+(n?A.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Et=/\[\]$/,Ct=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;A.param=function(e,t){function n(e,t){t=v(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var r,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,function(){n(this.name,this.value)});else for(r in e)!function n(r,e,i,a){if(Array.isArray(e))A.each(e,function(e,t){i||Et.test(r)?a(r,t):n(r+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,a)});else if(i||"object"!==p(e))a(r,e);else for(var t in e)n(r+"["+t+"]",e[t],i,a)}(r,e[r],t,n);return i.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=A.prop(this,"elements");return e?A.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!A(this).is(":disabled")&&Dt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!ce.test(e))}).map(function(e,t){var n=A(this).val();return null==n?null:Array.isArray(n)?A.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}});var Ot=/%20/g,Pt=/#.*$/,Rt=/([?&])_=[^&]*/,It=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,zt=/^\/\//,Ft={},jt={},Bt="*/".concat("*"),Ht=T.createElement("a");function Ut(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(v(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(t)):(a[n]=a[n]||[]).push(t)}}function Vt(t,r,i,a){var o={},s=t===jt;function l(e){var n;return o[e]=!0,A.each(t[e]||[],function(e,t){t=t(r,i,a);return"string"!=typeof t||s||o[t]?s?!(n=t):void 0:(r.dataTypes.unshift(t),l(t),!1)}),n}return l(r.dataTypes[0])||!o["*"]&&l("*")}function qt(e,t){var n,r,i=A.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&A.extend(!0,e,r),e}Ht.href=kt.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,A.ajaxSettings),t):qt(A.ajaxSettings,e)},ajaxPrefilter:Ut(Ft),ajaxTransport:Ut(jt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,u,n,d,h,f,r,i,p=A.ajaxSetup({},t=t||{}),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?A(m):A.event,_=A.Deferred(),y=A.Callbacks("once memory"),v=p.statusCode||{},a={},o={},s="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n)for(n={};t=It.exec(u);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?u:null},setRequestHeader:function(e,t){return null==h&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(p.mimeType=e),this},statusCode:function(e){if(e)if(h)b.always(e[b.status]);else for(var t in e)v[t]=[v[t],e[t]];return this},abort:function(e){e=e||s;return l&&l.abort(e),x(0,e),this}};if(_.promise(b),p.url=((e||p.url||kt.href)+"").replace(zt,kt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(R)||[""],null==p.crossDomain){i=T.createElement("a");try{i.href=p.url,i.href=i.href,p.crossDomain=Ht.protocol+"//"+Ht.host!=i.protocol+"//"+i.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=A.param(p.data,p.traditional)),Vt(Ft,p,t,b),h)return b;for(r in(f=A.event&&p.global)&&0==A.active++&&A.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nt.test(p.type),c=p.url.replace(Pt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ot,"+")):(i=p.url.slice(c.length),p.data&&(p.processData||"string"==typeof p.data)&&(c+=(St.test(c)?"&":"?")+p.data,delete p.data),!1===p.cache&&(c=c.replace(Rt,"$1"),i=(St.test(c)?"&":"?")+"_="+Mt.guid+++i),p.url=c+i),p.ifModified&&(A.lastModified[c]&&b.setRequestHeader("If-Modified-Since",A.lastModified[c]),A.etag[c]&&b.setRequestHeader("If-None-Match",A.etag[c])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&b.setRequestHeader("Content-Type",p.contentType),b.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Bt+"; q=0.01":""):p.accepts["*"]),p.headers)b.setRequestHeader(r,p.headers[r]);if(p.beforeSend&&(!1===p.beforeSend.call(m,b,p)||h))return b.abort();if(s="abort",y.add(p.complete),b.done(p.success),b.fail(p.error),l=Vt(jt,p,t,b)){if(b.readyState=1,f&&g.trigger("ajaxSend",[b,p]),h)return b;p.async&&0<p.timeout&&(d=w.setTimeout(function(){b.abort("timeout")},p.timeout));try{h=!1,l.send(a,x)}catch(e){if(h)throw e;x(-1,e)}}else x(-1,"No Transport");function x(e,t,n,r){var i,a,o,s=t;h||(h=!0,d&&w.clearTimeout(d),l=void 0,u=r||"",b.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(o=function(e,t,n){for(var r,i,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}o=o||i}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}(p,b,n)),!r&&-1<A.inArray("script",p.dataTypes)&&A.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),o=function(e,t,n,r){var i,a,o,s,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=c[l+" "+a]||c["* "+a]))for(i in c)if((s=i.split(" "))[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[i]:!0!==c[i]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(p,o,b,r),r?(p.ifModified&&((n=b.getResponseHeader("Last-Modified"))&&(A.lastModified[c]=n),(n=b.getResponseHeader("etag"))&&(A.etag[c]=n)),204===e||"HEAD"===p.type?s="nocontent":304===e?s="notmodified":(s=o.state,i=o.data,r=!(a=o.error))):(a=s,!e&&s||(s="error",e<0&&(e=0))),b.status=e,b.statusText=(t||s)+"",r?_.resolveWith(m,[i,s,b]):_.rejectWith(m,[b,s,a]),b.statusCode(v),v=void 0,f&&g.trigger(r?"ajaxSuccess":"ajaxError",[b,p,r?i:a]),y.fireWith(m,[b,s]),f&&(g.trigger("ajaxComplete",[b,p]),--A.active||A.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,n){return A.get(e,t,n,"json")},getScript:function(e,t){return A.get(e,void 0,t,"script")}}),A.each(["get","post"],function(e,i){A[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),A.ajax(A.extend({url:e,type:i,dataType:r,data:t,success:n},A.isPlainObject(e)&&e))}}),A.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),A._evalUrl=function(e,t,n){return A.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){A.globalEval(e,t,n)}})},A.fn.extend({wrapAll:function(e){return this[0]&&(v(e)&&(e=e.call(this[0])),e=A(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){A(this).wrapInner(n.call(this,e))}):this.each(function(){var e=A(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){A(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}}),A.expr.pseudos.hidden=function(e){return!A.expr.pseudos.visible(e)},A.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Gt=A.ajaxSettings.xhr();y.cors=!!Gt&&"withCredentials"in Gt,y.ajax=Gt=!!Gt,A.ajaxTransport(function(i){var a,o;if(y.cors||Gt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);a=function(e){return function(){a&&(a=o=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=a(),o=r.onerror=r.ontimeout=a("error"),void 0!==r.onabort?r.onabort=o:r.onreadystatechange=function(){4===r.readyState&&w.setTimeout(function(){a&&o()})},a=a("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(a)throw e}},abort:function(){a&&a()}}}),A.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return A.globalEval(e),e}}}),A.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),A.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=A("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),T.head.appendChild(r[0])},abort:function(){i&&i()}}});var Wt,Xt=[],Zt=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||A.expando+"_"+Mt.guid++;return this[e]=!0,e}}),A.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,a,o=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||A.error(r+" was not called"),a[0]},e.dataTypes[0]="json",i=w[r],w[r]=function(){a=arguments},n.always(function(){void 0===i?A(w).removeProp(r):w[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),a&&v(i)&&i(a[0]),a=i=void 0}),"script"}),y.createHTMLDocument=((Wt=T.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),A.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=T.implementation.createHTMLDocument("")).createElement("base")).href=T.location.href,t.head.appendChild(r)):t=T),r=!n&&[],(n=S.exec(e))?[t.createElement(n[1])]:(n=ge([e],t,r),r&&r.length&&A(r).remove(),A.merge([],n.childNodes)));var r},A.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<o.length&&A.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(r?A("<div>").append(A.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},A.expr.pseudos.animated=function(t){return A.grep(A.timers,function(e){return t===e.elem}).length},A.offset={setOffset:function(e,t,n){var r,i,a,o,s=A.css(e,"position"),l=A(e),c={};"static"===s&&(e.style.position="relative"),a=l.offset(),r=A.css(e,"top"),o=A.css(e,"left"),o=("absolute"===s||"fixed"===s)&&-1<(r+o).indexOf("auto")?(i=(s=l.position()).top,s.left):(i=parseFloat(r)||0,parseFloat(o)||0),null!=(t=v(t)?t.call(e,n,A.extend({},a)):t).top&&(c.top=t.top-a.top+i),null!=t.left&&(c.left=t.left-a.left+o),"using"in t?t.using.call(e,c):l.css(c)}},A.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){A.offset.setOffset(this,t,e)});var e,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===A.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===A.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=A(e).offset()).top+=A.css(e,"borderTopWidth",!0),i.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-A.css(r,"marginTop",!0),left:t.left-i.left-A.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===A.css(e,"position");)e=e.offsetParent;return e||ne})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var a="pageYOffset"===i;A.fn[t]=function(e){return H(this,function(e,t,n){var r;return m(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n?r?r[i]:e[t]:void(r?r.scrollTo(a?r.pageXOffset:n,a?n:r.pageYOffset):e[t]=n)},t,e,arguments.length)}}),A.each(["top","left"],function(e,n){A.cssHooks[n]=We(y.pixelPosition,function(e,t){if(t)return t=Ge(e,n),He.test(t)?A(e).position()[n]+"px":t})}),A.each({Height:"height",Width:"width"},function(o,s){A.each({padding:"inner"+o,content:s,"":"outer"+o},function(r,a){A.fn[a]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return H(this,function(e,t,n){var r;return m(e)?0===a.indexOf("outer")?e["inner"+o]:e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?A.css(e,t,i):A.style(e,t,n,i)},s,n?e:void 0,n)}})}),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){A.fn[t]=function(e){return this.on(t,e)}}),A.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){A.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Jt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;A.proxy=function(e,t){var n,r;if("string"==typeof t&&(r=e[t],t=e,e=r),v(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||A.guid++,r},A.holdReady=function(e){e?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=M,A.isFunction=v,A.isWindow=m,A.camelCase=Y,A.type=p,A.now=Date.now,A.isNumeric=function(e){var t=A.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},A.trim=function(e){return null==e?"":(e+"").replace(Jt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return A});var $t=w.jQuery,Qt=w.$;return A.noConflict=function(e){return w.$===A&&(w.$=Qt),e&&w.jQuery===A&&(w.jQuery=$t),A},void 0===e&&(w.jQuery=w.$=A),A}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=e()}(function(){return function r(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,a,o)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";var r,i=e("../src/lib"),a={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(r in a){var o=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(o,a[r])}},{"../src/lib":230}],2:[function(e,t,n){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":381}],3:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":331}],4:[function(e,t,n){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":98}],5:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":212}],6:[function(e,t,n){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":382}],7:[function(e,t,n){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":383}],8:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),t.exports=r},{"./aggregate":2,"./bar":3,"./calendars":4,"./core":5,"./filter":6,"./groupby":7,"./pie":9,"./sort":10}],9:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":346}],10:[function(e,t,n){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":385}],11:[function(e,Ks,t){!function(){var P={version:"3.6.1"},i=[].slice,h=function(e){return i.call(e)},R=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function I(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R)try{h(R.documentElement.childNodes)[0].nodeType}catch(e){h=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),R)try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,r=t.setAttributeNS,a=this.CSSStyleDeclaration.prototype,o=a.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){r.call(this,e,t,n+"")},a.setProperty=function(e,t,n){o.call(this,e,t+"",n)}}function l(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function c(e){return null===e?NaN:+e}function u(e){return!isNaN(e)}function e(a){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var i=n+r>>>1;a(e[i],t)<0?n=1+i:r=i}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var i=n+r>>>1;0<a(e[i],t)?r=i:n=1+i}return n}}}P.ascending=l,P.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},P.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r<n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r<n&&(n=r)}return n},P.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n<r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n<r&&(n=r)}return n},P.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(r<n&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(r<n&&(n=r),i<r&&(i=r))}return[n,i]},P.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)u(n=+e[a])&&(r+=n);else for(;++a<i;)u(n=+t.call(e,e[a],a))&&(r+=n);return r},P.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)u(n=c(e[a]))?r+=n:--o;else for(;++a<i;)u(n=c(t.call(e,e[a],a)))?r+=n:--o;if(o)return r/o},P.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),t=+e[r-1],n=n-r;return n?t+n*(e[r]-t):t},P.median=function(e,t){var n,r=[],i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)u(n=c(e[a]))&&r.push(n);else for(;++a<i;)u(n=c(t.call(e,e[a],a)))&&r.push(n);if(r.length)return P.quantile(r.sort(l),.5)},P.variance=function(e,t){var n,r,i=e.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)u(n=c(e[s]))&&(o+=(r=n-a)*(n-(a+=r/++l)));else for(;++s<i;)u(n=c(t.call(e,e[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++l)));if(1<l)return o/(l-1)},P.deviation=function(){var e=P.variance.apply(this,arguments);return e&&Math.sqrt(e)};var d=e(l);function f(e){return e.length}P.bisectLeft=d.left,P.bisect=P.bisectRight=d.right,P.bisector=function(n){return e(1===n.length?function(e,t){return l(n(e),t)}:n)},P.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},P.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},P.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},P.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=P.min(e,f),r=new Array(n);++t<n;)for(var i,a=-1,o=r[t]=new Array(i);++a<i;)o[a]=e[a][t];return r},P.zip=function(){return P.transpose(arguments)},P.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},P.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},P.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},P.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--o]=r[t];return n};var D=Math.abs;function p(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function y(){this._=Object.create(null)}P.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(e){var t=1;for(;e*t%1;)t*=10;return t}(D(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},P.map=function(e,t){var n=new y;if(e instanceof y)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var m="__proto__",g="\0";function _(e){return(e+="")===m||e[0]===g?g+e:e}function v(e){return(e+="")[0]===g?e.slice(1):e}function b(e){return _(e)in this._}function x(e){return(e=_(e))in this._&&delete this._[e]}function w(){var e,t=[];for(e in this._)t.push(v(e));return t}function T(){var e,t=0;for(e in this._)++t;return t}function A(){for(var e in this._)return!1;return!0}function k(){this._=Object.create(null)}function L(e){return e}function M(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=S.length;n<r;++n){var i=S[n]+t;if(i in e)return i}}p(y,{has:b,get:function(e){return this._[_(e)]},set:function(e,t){return this._[_(e)]=t},remove:x,keys:w,values:function(){var e,t=[];for(e in this._)t.push(this._[e]);return t},entries:function(){var e,t=[];for(e in this._)t.push({key:v(e),value:this._[e]});return t},size:T,empty:A,forEach:function(e){for(var t in this._)e.call(this,v(t),this._[t])}}),P.nest=function(){var d,h,f={},p=[],t=[];function m(n,e,r){if(r>=p.length)return h?h.call(f,e):d?e.sort(d):e;for(var t,i,a,o,s=-1,l=e.length,c=p[r++],u=new y;++s<l;)(o=u.get(t=c(i=e[s])))?o.push(i):u.set(t,[i]);return a=n?(i=n(),function(e,t){i.set(e,m(n,t,r))}):(i={},function(e,t){i[e]=m(n,t,r)}),u.forEach(a),i}return f.map=function(e,t){return m(t,e,0)},f.entries=function(e){return function n(e,r){if(r>=p.length)return e;var i=[],a=t[r++];return e.forEach(function(e,t){i.push({key:e,values:n(t,r)})}),a?i.sort(function(e,t){return a(e.key,t.key)}):i}(m(P.map,e,0),0)},f.key=function(e){return p.push(e),f},f.sortKeys=function(e){return t[p.length-1]=e,f},f.sortValues=function(e){return d=e,f},f.rollup=function(e){return h=e,f},f},P.set=function(e){var t=new k;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},p(k,{has:b,add:function(e){return this._[_(e+="")]=!0,e},remove:x,values:w,size:T,empty:A,forEach:function(e){for(var t in this._)e.call(this,v(t))}}),P.behavior={},P.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=function(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}(e,t,t[n]);return e};var S=["webkit","ms","moz","Moz","o","O"];function E(){}function C(){}function O(i){var a=[],r=new y;function e(){for(var e,t=a,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return i}return e.on=function(e,t){var n=r.get(e);return arguments.length<2?n&&n.on:(n&&(n.on=null,a=a.slice(0,n=a.indexOf(n)).concat(a.slice(n+1)),r.remove(e)),t&&a.push(r.set(e,{on:t})),i)},e}function N(){P.event.preventDefault()}function z(){for(var e,t=P.event;e=t.sourceEvent;)t=e;return t}function F(i){for(var a=new C,e=0,t=arguments.length;++e<t;)a[arguments[e]]=O(a);return a.of=function(n,r){return function(e){try{var t=e.sourceEvent=P.event;e.target=i,P.event=e,a[e.type].apply(n,r)}finally{P.event=t}}},a}P.dispatch=function(){for(var e=new C,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=O(e);return e},C.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},P.event=null,P.requote=function(e){return e.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function H(e){return B(e,Y),e}var U=function(e,t){return t.querySelector(e)},V=function(e,t){return t.querySelectorAll(e)},q=function(e,t){var n=e.matches||e[M(e,"matchesSelector")];return(q=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(U=function(e,t){return Sizzle(e,t)[0]||null},q=(V=Sizzle).matchesSelector),P.selection=function(){return P.select(R.documentElement)};var Y=P.selection.prototype=[];function G(e){return"function"==typeof e?e:function(){return U(e,this)}}function W(e){return"function"==typeof e?e:function(){return V(e,this)}}Y.select=function(e){var t,n,r,i,a=[];e=G(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return H(a)},Y.selectAll=function(e){var t,n,r=[];e=W(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=h(e.call(n,n.__data__,s,i))),t.parentNode=n);return H(r)};var X="http://www.w3.org/1999/xhtml",Z={svg:"http://www.w3.org/2000/svg",xhtml:X,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J(t,n){return t=P.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function $(e){return e.trim().replace(/\s+/g," ")}function Q(e){return new RegExp("(?:^|\\s+)"+P.requote(e)+"(?:\\s+|$)","g")}function K(e){return(e+"").trim().split(/^|\s+/)}function ee(n,r){var i=(n=K(n).map(te)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<i;)n[e](this,t)}:function(){for(var e=-1;++e<i;)n[e](this,r)}}function te(r){var i=Q(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(i.lastIndex=0,i.test(n)||e.setAttribute("class",$(n+" "+r))):e.setAttribute("class",$(n.replace(i," ")))}}function ne(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function re(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function ie(n){return"function"==typeof n?n:(n=P.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===X&&e.documentElement.namespaceURI===X?e.createElement(n):e.createElementNS(t,n)}}function ae(){var e=this.parentNode;e&&e.removeChild(this)}function oe(e){return{__data__:e}}function se(e){return function(){return q(this,e)}}function le(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function ce(e){return B(e,ue),e}P.ns={prefix:Z,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Z.hasOwnProperty(n)?{space:Z[n],local:e}:e}},Y.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=P.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(J(t,e[t]));return this}return this.each(J(e,t))},Y.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=K(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!Q(e[i]).test(t))return!1;return!0}for(t in e)this.each(ee(t,e[t]));return this}return this.each(ee(e,t))},Y.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(ne(n,e[n],t));return this}if(r<2){r=this.node();return I(r).getComputedStyle(r,null).getPropertyValue(e)}n=""}return this.each(ne(e,t,n))},Y.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))},Y.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Y.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Y.append=function(e){return e=ie(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Y.insert=function(e,t){return e=ie(e),t=G(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Y.remove=function(){return this.each(ae)},Y.data=function(e,p){var t,n,r=-1,i=this.length;if(!arguments.length){for(e=new Array(i=(t=this[0]).length);++r<i;)(n=t[r])&&(e[r]=n.__data__);return e}function a(e,t){var n,r,i=e.length,a=t.length,o=Math.min(i,a),s=new Array(a),l=new Array(a),c=new Array(i);if(p){for(var u,d=new y,h=new Array(i),f=-1;++f<i;)(n=e[f])&&(d.has(u=p.call(n,n.__data__,f))?c[f]=n:d.set(u,n),h[f]=u);for(f=-1;++f<a;)(n=d.get(u=p.call(t,r=t[f],f)))?!0!==n&&((s[f]=n).__data__=r):l[f]=oe(r),d.set(u,!0);for(f=-1;++f<i;)f in h&&!0!==d.get(h[f])&&(c[f]=e[f])}else{for(f=-1;++f<o;)n=e[f],r=t[f],n?(n.__data__=r,s[f]=n):l[f]=oe(r);for(;f<a;++f)l[f]=oe(t[f]);for(;f<i;++f)c[f]=e[f]}l.update=s,l.parentNode=s.parentNode=c.parentNode=e.parentNode,m.push(l),g.push(s),_.push(c)}var m=ce([]),g=H([]),_=H([]);if("function"==typeof e)for(;++r<i;)a(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<i;)a(t=this[r],e);return g.enter=function(){return m},g.exit=function(){return _},g},Y.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Y.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=se(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return H(i)},Y.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];0<=--i;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Y.sort=function(e){e=function(n){arguments.length||(n=l);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Y.each=function(r){return le(this,function(e,t,n){r.call(e,e.__data__,t,n)})},Y.call=function(e){var t=h(arguments);return e.apply(t[0]=this,t),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Y.size=function(){var e=0;return le(this,function(){++e}),e};var ue=[];function de(i,t,n){var r="__on"+i,e=i.indexOf("."),a=fe;0<e&&(i=i.slice(0,e));var o=he.get(i);function s(){var e=this[r];e&&(this.removeEventListener(i,e,e.$),delete this[r])}return o&&(i=o,a=pe),e?t?function(){var e=a(t,h(arguments));s.call(this),this.addEventListener(i,this[r]=e,e.$=n),e._=t}:s:t?E:function(){var e,t,n,r=new RegExp("^__on([^.]+)"+P.requote(i)+"$");for(t in this)(e=t.match(r))&&(n=this[t],this.removeEventListener(e[1],n,n.$),delete this[t])}}P.selection.enter=ce,(P.selection.enter.prototype=ue).append=Y.append,ue.empty=Y.empty,ue.node=Y.node,ue.call=Y.call,ue.size=Y.size,ue.select=function(e){for(var t,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(t.push(r[c]=n=e.call(i.parentNode,a.__data__,c,s)),n.__data__=a.__data__):t.push(null)}return H(o)},ue.insert=function(e,t){var o,s,l;return arguments.length<2&&(o=this,t=function(e,t,n){var r,i=o[n].update,a=i.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=i[s])&&++s<a;);return r}),Y.insert.call(this,e,t)},P.select=function(e){var t;return"string"==typeof e?(t=[U(e,R)]).parentNode=R.documentElement:(t=[e]).parentNode=s(e),H([t])},P.selectAll=function(e){var t;return"string"==typeof e?(t=h(V(e,R))).parentNode=R.documentElement:(t=h(e)).parentNode=null,H([t])},Y.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(de(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(de(e,t,n))};var he=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});function fe(n,r){return function(e){var t=P.event;P.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{P.event=t}}}function pe(e,t){var n=fe(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}R&&he.forEach(function(e){"on"+e in R&&he.remove(e)});var me,ge=0;function _e(e){var n,r,i=".dragsuppress-"+ ++ge,a="click"+i,o=P.select(I(e)).on("touchmove"+i,N).on("dragstart"+i,N).on("selectstart"+i,N);return(me=null==me?!("onselectstart"in e)&&M(e.style,"userSelect"):me)&&(n=s(e).style,r=n[me],n[me]="none"),function(e){var t;o.on(i,null),me&&(n[me]=r),e&&(t=function(){o.on(a,null)},o.on(a,function(){N(),t()},!0),setTimeout(t,0))}}P.mouse=function(e){return ve(e,z())};var ye=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ve(e,t){if(t.changedTouches&&(t=t.changedTouches[0]),(n=e.ownerSVGElement||e).createSVGPoint){var n,r,i=n.createSVGPoint();return ye<0&&(((r=I(e)).scrollX||r.scrollY)&&(r=(n=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),ye=!(r.f||r.e),n.remove())),ye?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function be(){return P.event.changedTouches[0].identifier}P.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=z().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return ve(e,r)},P.behavior.drag=function(){var m=F(n,"drag","dragstart","dragend"),g=null,e=r(E,P.mouse,I,"mousemove","mouseup"),t=r(be,P.touch,L,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(u,d,h,f,p){return function(){var r,e=P.event.target.correspondingElement||P.event.target,i=this.parentNode,a=m.of(this,arguments),o=0,s=u(),t=".drag"+(null==s?"":"-"+s),n=P.select(h(e)).on(f+t,function(){var e,t,n=d(i,s);n&&(e=n[0]-c[0],t=n[1]-c[1],o|=e|t,a({type:"drag",x:(c=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t}))}).on(p+t,function(){d(i,s)&&(n.on(f+t,null).on(p+t,null),l(o),a({type:"dragend"}))}),l=_e(e),c=d(i,s);r=g?[(r=g.apply(this,arguments)).x-c[0],r.y-c[1]]:[0,0],a({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(g=e,n):g},P.rebind(n,m,"on")},P.touches=function(n,e){return(e=arguments.length<2?z().touches:e)?h(e).map(function(e){var t=ve(n,e);return t.identifier=e.identifier,t}):[]};var xe=1e-6,we=xe*xe,Te=Math.PI,Ae=2*Te,ke=Ae-xe,Me=Te/2,Se=Te/180,Ee=180/Te;function Ce(e){return 0<e?1:e<0?-1:0}function Le(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function De(e){return 1<e?0:e<-1?Te:Math.acos(e)}function Oe(e){return 1<e?Me:e<-1?-Me:Math.asin(e)}function Pe(e){return((e=Math.exp(e))+1/e)/2}function Re(e){return(e=Math.sin(e/2))*e}var Ie=Math.SQRT2;P.interpolateZoom=function(e,t){var r,i,a,n,o=e[0],s=e[1],l=e[2],c=t[0],e=t[1],t=t[2],u=c-o,d=e-s,c=u*u+d*d;return(n=c<we?(a=Math.log(t/l)/Ie,function(e){return[o+e*u,s+e*d,l*Math.exp(Ie*e*a)]}):(r=Math.sqrt(c),e=(t*t-l*l+4*c)/(2*l*2*r),n=(t*t-l*l-4*c)/(2*t*2*r),i=Math.log(Math.sqrt(e*e+1)-e),a=(Math.log(Math.sqrt(n*n+1)-n)-i)/Ie,function(e){var t=e*a,n=Pe(i),e=l/(2*r)*(n*(e=Ie*t+i,((e=Math.exp(2*e))-1)/(e+1))-(e=i,((e=Math.exp(i))-1/e)/2));return[o+e*u,s+e*d,l*n/Pe(Ie*t+i)]})).duration=1e3*a,n},P.behavior.zoom=function(){var t,s,n,r,y,i,a,o,l,v={x:0,y:0,k:1},c=[960,500],u=Fe,d=250,h=0,b="mousedown.zoom",f="mousemove.zoom",p="mouseup.zoom",x="touchstart.zoom",w=F(m,"zoomstart","zoom","zoomend");function m(e){e.on(b,L).on(ze+".zoom",_).on("dblclick.zoom",O).on(x,D)}function T(e){return[(e[0]-v.x)/v.k,(e[1]-v.y)/v.k]}function A(e){v.k=Math.max(u[0],Math.min(u[1],e))}function k(e,t){var n;t=[(n=t)[0]*v.k+v.x,n[1]*v.k+v.y],v.x+=e[0]-t[0],v.y+=e[1]-t[1]}function M(e,t,n,r){e.__chart__={x:v.x,y:v.y,k:v.k},A(Math.pow(2,r)),k(s=t,n),e=P.select(e),(e=0<d?e.transition().duration(d):e).call(m.event)}function g(){a&&a.domain(i.range().map(function(e){return(e-v.x)/v.k}).map(i.invert)),l&&l.domain(o.range().map(function(e){return(e-v.y)/v.k}).map(o.invert))}function S(e){h++||e({type:"zoomstart"})}function E(e){g(),e({type:"zoom",scale:v.k,translate:[v.x,v.y]})}function C(e){--h||(e({type:"zoomend"}),s=null)}function L(){var e=this,t=w.of(e,arguments),n=0,r=P.select(I(e)).on(f,function(){n=1,k(P.mouse(e),i),E(t)}).on(p,function(){r.on(f,null).on(p,null),a(n),C(t)}),i=T(P.mouse(e)),a=_e(e);ks.call(e),S(t)}function D(){var l,c=this,u=w.of(c,arguments),d={},h=0,i=".zoom-"+P.event.changedTouches[0].identifier,o="touchmove"+i,s="touchend"+i,f=[],a=P.select(c),p=_e(c);function m(){var e=P.touches(c);return l=v.k,e.forEach(function(e){e.identifier in d&&(d[e.identifier]=T(e))}),e}function e(){var e=P.event.target;P.select(e).on(o,g).on(s,_),f.push(e);for(var t=P.event.changedTouches,n=0,r=t.length;n<r;++n)d[t[n].identifier]=null;var i,a=m(),e=Date.now();1===a.length?(e-y<500&&(i=a[0],M(c,i,d[i.identifier],Math.floor(Math.log(v.k)/Math.LN2)+1),N()),y=e):1<a.length&&(i=a[0],e=a[1],a=i[0]-e[0],e=i[1]-e[1],h=a*a+e*e)}function g(){var e,t,n=P.touches(c);ks.call(c);for(var r,i,a,o=0,s=n.length;o<s;++o,t=null)if(e=n[o],t=d[e.identifier]){if(a)break;i=e,a=t}t&&(r=(r=e[0]-i[0])*r+(r=e[1]-i[1])*r,r=h&&Math.sqrt(r/h),i=[(i[0]+e[0])/2,(i[1]+e[1])/2],a=[(a[0]+t[0])/2,(a[1]+t[1])/2],A(r*l)),y=null,k(i,a),E(u)}function _(){if(P.event.touches.length){for(var e,t=P.event.changedTouches,n=0,r=t.length;n<r;++n)delete d[t[n].identifier];for(e in d)return void m()}P.selectAll(f).on(i,null),a.on(b,L).on(x,D),p(),C(u)}e(),S(u),a.on(b,null).on(x,e)}function _(){var e=w.of(this,arguments);r?clearTimeout(r):(ks.call(this),t=T(s=n||P.mouse(this)),S(e)),r=setTimeout(function(){r=null,C(e)},50),N(),A(Math.pow(2,.002*Ne())*v.k),k(s,t),E(e)}function O(){var e=P.mouse(this),t=Math.log(v.k)/Math.LN2;M(this,e,T(e),P.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return ze=ze||("onwheel"in R?(Ne=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ne=function(){return P.event.wheelDelta},"mousewheel"):(Ne=function(){return-P.event.detail},"MozMousePixelScroll")),m.event=function(e){e.each(function(){var o=w.of(this,arguments),t=v;Es?P.select(this).transition().each("start.zoom",function(){v=this.__chart__||{x:0,y:0,k:1},S(o)}).tween("zoom:zoom",function(){var n=c[0],e=c[1],r=s?s[0]:n/2,i=s?s[1]:e/2,a=P.interpolateZoom([(r-v.x)/v.k,(i-v.y)/v.k,n/v.k],[(r-t.x)/t.k,(i-t.y)/t.k,n/t.k]);return function(e){var t=a(e),e=n/t[2];this.__chart__=v={x:r-t[0]*e,y:i-t[1]*e,k:e},E(o)}}).each("interrupt.zoom",function(){C(o)}).each("end.zoom",function(){C(o)}):(this.__chart__=v,S(o),E(o),C(o))})},m.translate=function(e){return arguments.length?(v={x:+e[0],y:+e[1],k:v.k},g(),m):[v.x,v.y]},m.scale=function(e){return arguments.length?(v={x:v.x,y:v.y,k:null},A(+e),g(),m):v.k},m.scaleExtent=function(e){return arguments.length?(u=null==e?Fe:[+e[0],+e[1]],m):u},m.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],m):n},m.size=function(e){return arguments.length?(c=e&&[+e[0],+e[1]],m):c},m.duration=function(e){return arguments.length?(d=+e,m):d},m.x=function(e){return arguments.length?(i=(a=e).copy(),v={x:0,y:0,k:1},m):a},m.y=function(e){return arguments.length?(o=(l=e).copy(),v={x:0,y:0,k:1},m):l},P.rebind(m,w,"on")};var Ne,ze,Fe=[0,1/0];function je(){}function Be(e,t,n){return this instanceof Be?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Be?new Be(e.h,e.s,e.l):it(""+e,at,Be):new Be(e,t,n)}(P.color=je).prototype.toString=function(){return this.rgb()+""};t=(P.hsl=Be).prototype=new je;function He(e,t,n){var r,i;function a(e){return Math.round(255*(360<(e=e)?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new et(a(e+120),a(e),a(e-120))}function Ue(e,t,n){return this instanceof Ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Ue?new Ue(e.h,e.c,e.l):Je((e instanceof qe?e:e=ot((e=P.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ue(e,t,n)}t.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Be(this.h,this.s,this.l/e)},t.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Be(this.h,this.s,e*this.l)},t.rgb=function(){return He(this.h,this.s,this.l)};a=(P.hcl=Ue).prototype=new je;function Ve(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new qe(n,Math.cos(e*=Se)*t,Math.sin(e)*t)}function qe(e,t,n){return this instanceof qe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof qe?new qe(e.l,e.a,e.b):e instanceof Ue?Ve(e.h,e.c,e.l):ot((e=et(e)).r,e.g,e.b):new qe(e,t,n)}a.brighter=function(e){return new Ue(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?e:1)))},a.darker=function(e){return new Ue(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?e:1)))},a.rgb=function(){return Ve(this.h,this.c,this.l).rgb()},P.lab=qe;var Ye=18,Ge=.95047,We=1,Xe=1.08883,d=qe.prototype=new je;function Ze(e,t,n){e=(e+16)/116,n=e-n/200;return new et(Ke(3.2404542*(t=$e(t=e+t/500)*Ge)-1.5371385*(e=$e(e)*We)-.4985314*(n=$e(n)*Xe)),Ke(-.969266*t+1.8760108*e+.041556*n),Ke(.0556434*t-.2040259*e+1.0572252*n))}function Je(e,t,n){return 0<e?new Ue(Math.atan2(n,t)*Ee,Math.sqrt(t*t+n*n),e):new Ue(NaN,NaN,e)}function $e(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function Qe(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function Ke(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function et(e,t,n){return this instanceof et?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof et?new et(e.r,e.g,e.b):it(""+e,et,He):new et(e,t,n)}function tt(e){return new et(e>>16,e>>8&255,255&e)}function nt(e){return tt(e)+""}d.brighter=function(e){return new qe(Math.min(100,this.l+Ye*(arguments.length?e:1)),this.a,this.b)},d.darker=function(e){return new qe(Math.max(0,this.l-Ye*(arguments.length?e:1)),this.a,this.b)},d.rgb=function(){return Ze(this.l,this.a,this.b)};t=(P.rgb=et).prototype=new je;function rt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function it(e,t,n){var r,i=0,a=0,o=0,s=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(s)switch(r=s[2].split(","),s[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(lt(r[0]),lt(r[1]),lt(r[2]))}return(s=ct.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(i=(3840&s)>>4,i|=i>>4,a=240&s,a|=a>>4,o=15&s,o|=o<<4):7===e.length&&(i=(16711680&s)>>16,a=(65280&s)>>8,o=255&s)),t(i,a,o))}function at(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=0<l&&l<1?0:r),new Be(r,i,l)}function ot(e,t,n){var r=Qe((.4124564*(e=st(e))+.3575761*(t=st(t))+.1804375*(n=st(n)))/Ge),i=Qe((.2126729*e+.7151522*t+.072175*n)/We);return qe(116*i-16,500*(r-i),200*(i-Qe((.0193339*e+.119192*t+.9503041*n)/Xe)))}function st(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function lt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}t.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new et(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new et(30,30,30)},t.darker=function(e){return new et((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},t.hsl=function(){return at(this.r,this.g,this.b)},t.toString=function(){return"#"+rt(this.r)+rt(this.g)+rt(this.b)};var ct=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ut(e){return"function"==typeof e?e:function(){return e}}function dt(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),ht(e,t,r,n)}}function ht(i,a,o,e){var n,s={},l=P.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function t(){var e,t,n,r=u.status;if(!r&&((n=(t=u).responseType)&&"text"!==n?t.response:t.responseText)||200<=r&&r<300||304===r){try{e=o.call(s,u)}catch(e){return void l.error.call(s,e)}l.load.call(s,e)}else l.error.call(s,u)}return"onload"in(u=self.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(i)?new XDomainRequest:u)?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=P.event;P.event=e;try{l.progress.call(s,u)}finally{P.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c[e]:(null==t?delete c[e]:c[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(a=null==e?null:e+"",s):a},s.responseType=function(e){return arguments.length?(d=e,s):d},s.response=function(e){return o=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(h(arguments)))}}),s.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),u.open(e,i,!0),null==a||"accept"in c||(c.accept=a+",*/*"),u.setRequestHeader)for(var r in c)u.setRequestHeader(r,c[r]);return null!=a&&u.overrideMimeType&&u.overrideMimeType(a),null!=d&&(u.responseType=d),null!=n&&s.on("error",n).on("load",function(e){n(null,e)}),l.beforesend.call(s,u),u.send(null==t?null:t),s},s.abort=function(){return u.abort(),s},P.rebind(s,l,"on"),null==e?s:s.get(1===(n=e).length?function(e,t){n(null==e?t:null)}:n)}ct.forEach(function(e,t){ct.set(e,tt(t))}),P.functor=ut,P.xhr=dt(L),P.dsv=function(i,a){var t=new RegExp('["'+i+"\n]"),h=i.charCodeAt(0);function o(e,t,n){arguments.length<3&&(n=t,t=null);var r=ht(e,a,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}function n(e){return e.map(c).join(i)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o.parse=function(e,r){var t;return o.parseRows(e,function(i,e){if(t)return t(i,e-1);function n(e){for(var t={},n=i.length,r=0;r<n;++r)t[i[r]]=e[r];return t}t=r?function(e,t){return r(n(e),t)}:n})},o.parseRows=function(i,e){var t,a,o={},s={},n=[],l=i.length,c=0,r=0;function u(){if(l<=c)return s;if(a)return a=!1,o;var e=c;if(34===i.charCodeAt(e)){for(var t=e;t++<l;)if(34===i.charCodeAt(t)){if(34!==i.charCodeAt(t+1))break;++t}return c=t+2,13===(n=i.charCodeAt(t+1))?(a=!0,10===i.charCodeAt(t+2)&&++c):10===n&&(a=!0),i.slice(e+1,t).replace(/""/g,'"')}for(;c<l;){var n,r=1;if(10===(n=i.charCodeAt(c++)))a=!0;else if(13===n)a=!0,10===i.charCodeAt(c)&&(++c,++r);else if(n!==h)continue;return i.slice(e,c-r)}return i.slice(e)}for(;(t=u())!==s;){for(var d=[];t!==o&&t!==s;)d.push(t),t=u();e&&null==(d=e(d,r++))||n.push(d)}return n},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new k,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(c).join(i)].concat(e.map(function(t){return r.map(function(e){return c(t[e])}).join(i)})).join("\n")},o.formatRows=function(e){return e.map(n).join("\n")},o},P.csv=P.dsv(",","text/csv"),P.tsv=P.dsv("\t","text/tab-separated-values");var ft,pt,mt,gt,_t=this[M(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function yt(e,t,n){var r=arguments.length;r<2&&(t=0);r={c:e,t:(n=r<3?Date.now():n)+t,n:null};return pt?pt.n=r:ft=r,pt=r,mt||(gt=clearTimeout(gt),mt=1,_t(vt)),r}function vt(){var e=bt(),e=xt()-e;24<e?(isFinite(e)&&(clearTimeout(gt),gt=setTimeout(vt,e)),mt=0):(mt=1,_t(vt))}function bt(){for(var e=Date.now(),t=ft;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function xt(){for(var e,t=ft,n=1/0;t;)t=t.c?(t.t<n&&(n=t.t),(e=t).n):e?e.n=t.n:ft=t.n;return pt=e,n}function wt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}P.timer=function(){yt.apply(this,arguments)},P.timer.flush=function(){bt(),xt()},P.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Tt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*D(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}});P.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=P.round(e,wt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Tt[8+n/3]};var At=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,kt=P.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=P.round(e,wt(e,t))).toFixed(Math.max(0,Math.min(20,wt(e*(1+1e-15),t))))}});function Mt(e){return e+""}var St=P.time={},Et=Date;function Ct(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Ct.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Lt.setUTCDate.apply(this._,arguments)},setDay:function(){Lt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Lt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Lt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Lt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Lt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Lt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Lt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Lt.setTime.apply(this._,arguments)}};var Lt=Date.prototype;function Dt(r,a,o){function e(e){var t=r(e),n=i(t,1);return e-t<n-e?t:n}function s(e){return a(e=r(new Et(e-1)),1),e}function i(e,t){return a(e=new Et(+e),t),e}function l(e,t,n){var r=s(e),i=[];if(1<n)for(;r<t;)o(r)%n||i.push(new Date(+r)),a(r,1);else for(;r<t;)i.push(new Date(+r)),a(r,1);return i}(r.floor=r).round=e,r.ceil=s,r.offset=i,r.range=l;var t=r.utc=Ot(r);return(t.floor=t).round=Ot(e),t.ceil=Ot(s),t.offset=Ot(i),t.range=function(e,t,n){try{var r=new(Et=Ct);return r._=e,l(r,t,n)}finally{Et=Date}},r}function Ot(r){return function(e,t){try{var n=new(Et=Ct);return n._=e,r(n,t)._}finally{Et=Date}}}function Pt(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function c(s){var l=s.length;function e(e){for(var t,n,r,i=[],a=-1,o=0;++a<l;)37===s.charCodeAt(a)&&(i.push(s.slice(o,a)),null!=(n=Rt[t=s.charAt(++a)])&&(t=s.charAt(++a)),(r=b[t])&&(t=r(e,null==n?"e"===t?" ":"0":n)),i.push(t),o=a+1);return i.push(s.slice(o,a)),i.join("")}return e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(t,s,e,0)!=e.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var n=null!=t.Z&&Et!==Ct,e=new(n?Ct:Et);return"j"in t?e.setFullYear(t.y,0,t.j):"W"in t||"U"in t?("w"in t||(t.w="W"in t?1:0),e.setFullYear(t.y,0,1),e.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(e.getDay()+5)%7:t.w+7*t.U-(e.getDay()+6)%7)):e.setFullYear(t.y,t.m,t.d),e.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),n?e._:e},e.toString=function(){return s},e}function u(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(a=t.charAt(o++),!(a=x[a in Rt?t.charAt(o++):a])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var n=c(e);function t(e){try{var t=new(Et=Ct);return t._=e,n(t)}finally{Et=Date}}return t.parse=function(e){try{Et=Ct;var t=n.parse(e);return t&&t._}finally{Et=Date}},t.toString=n.toString,t},c.multi=c.utc.multi=tn;var d=P.map(),h=Ft(a),f=jt(a),p=Ft(o),m=jt(o),g=Ft(s),_=jt(s),y=Ft(l),v=jt(l);i.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(t),d:function(e,t){return zt(e.getDate(),t,2)},e:function(e,t){return zt(e.getDate(),t,2)},H:function(e,t){return zt(e.getHours(),t,2)},I:function(e,t){return zt(e.getHours()%12||12,t,2)},j:function(e,t){return zt(1+St.dayOfYear(e),t,3)},L:function(e,t){return zt(e.getMilliseconds(),t,3)},m:function(e,t){return zt(e.getMonth()+1,t,2)},M:function(e,t){return zt(e.getMinutes(),t,2)},p:function(e){return i[+(12<=e.getHours())]},S:function(e,t){return zt(e.getSeconds(),t,2)},U:function(e,t){return zt(St.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return zt(St.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return zt(e.getFullYear()%100,t,2)},Y:function(e,t){return zt(e.getFullYear()%1e4,t,4)},Z:Kt,"%":function(){return"%"}},x={a:function(e,t,n){p.lastIndex=0;t=p.exec(t.slice(n));return t?(e.w=m.get(t[0].toLowerCase()),n+t[0].length):-1},A:function(e,t,n){h.lastIndex=0;t=h.exec(t.slice(n));return t?(e.w=f.get(t[0].toLowerCase()),n+t[0].length):-1},b:function(e,t,n){y.lastIndex=0;t=y.exec(t.slice(n));return t?(e.m=v.get(t[0].toLowerCase()),n+t[0].length):-1},B:function(e,t,n){g.lastIndex=0;t=g.exec(t.slice(n));return t?(e.m=_.get(t[0].toLowerCase()),n+t[0].length):-1},c:function(e,t,n){return u(e,b.c.toString(),t,n)},d:Wt,e:Wt,H:Zt,I:Zt,j:Xt,L:Qt,m:Gt,M:Jt,p:function(e,t,n){t=d.get(t.slice(n,n+=2).toLowerCase());return null==t?-1:(e.p=t,n)},S:$t,U:Ht,w:Bt,W:Ut,x:function(e,t,n){return u(e,b.x.toString(),t,n)},X:function(e,t,n){return u(e,b.X.toString(),t,n)},y:qt,Y:Vt,Z:Yt,"%":en};return c}St.year=Dt(function(e){return(e=St.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),St.years=St.year.range,St.years.utc=St.year.utc.range,St.day=Dt(function(e){var t=new Et(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),St.days=St.day.range,St.days.utc=St.day.utc.range,St.dayOfYear=function(e){var t=St.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,n){n=7-n;var t=St[e]=Dt(function(e){return(e=St.day(e)).setDate(e.getDate()-(e.getDay()+n)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)-(t!==n)});St[e+"s"]=t.range,St[e+"s"].utc=t.utc.range,St[e+"OfYear"]=function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)}}),St.week=St.sunday,St.weeks=St.sunday.range,St.weeks.utc=St.sunday.utc.range,St.weekOfYear=St.sundayOfYear;var Rt={"-":"",_:" ",0:"0"},It=/^\s*\d+/,Nt=/^%/;function zt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",e=i.length;return r+(e<n?new Array(n-e+1).join(t)+i:i)}function Ft(e){return new RegExp("^(?:"+e.map(P.requote).join("|")+")","i")}function jt(e){for(var t=new y,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Bt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function Ht(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n));return t?(e.U=+t[0],n+t[0].length):-1}function Ut(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n));return t?(e.W=+t[0],n+t[0].length):-1}function Vt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function qt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.y=(e=+t[0])+(68<e?1900:2e3),n+t[0].length):-1}function Yt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Gt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function Wt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function Xt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+3));return t?(e.j=+t[0],n+t[0].length):-1}function Zt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function Jt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function $t(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function Qt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function Kt(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",e=D(t)/60|0,t=D(t)%60;return n+zt(e,"0",2)+zt(t,"0",2)}function en(e,t,n){Nt.lastIndex=0;t=Nt.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function tn(r){for(var e=r.length,t=-1;++t<e;)r[t][0]=this(r[t][0]);return function(e){for(var t=0,n=r[t];!n[1](e);)n=r[++t];return n[0](e)}}P.locale=function(e){return{numberFormat:(x=e.decimal,s=e.thousands,l=e.grouping,n=e.currency,w=l&&s?function(e,t){for(var n=e.length,r=[],i=0,a=l[0],o=0;0<n&&0<a&&(t<o+a+1&&(a=Math.max(1,t-o)),r.push(e.substring(n-=a,n+a)),!((o+=a+1)>t));)a=l[i=(i+1)%l.length];return r.reverse().join(s)}:L,function(e){var e=At.exec(e),s=e[1]||" ",l=e[2]||">",c=e[3]||"-",t=e[4]||"",u=e[5],d=+e[6],h=e[7],f=e[8],p=e[9],m=1,g="",_="",y=!1,v=!0,f=f&&+f.substring(1);switch((u||"0"===s&&"="===l)&&(u=s="0",l="="),p){case"n":h=!0,p="g";break;case"%":m=100,_="%",p="f";break;case"p":m=100,_="%",p="r";break;case"b":case"o":case"x":case"X":"#"===t&&(g="0"+p.toLowerCase());case"c":v=!1;case"d":y=!0,f=0;break;case"s":m=-1,p="r"}"$"===t&&(g=n[0],_=n[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f))));var p=kt.get(p)||Mt,b=u&&h;return function(e){var t=_;if(y&&e%1)return"";var n=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===c?"":c;m<0?(e=(i=P.formatPrefix(e,f)).scale(e),t=i.symbol+_):e*=m;var r,i,a=(e=p(e,f)).lastIndexOf(".");i=a<0?(o=v?e.lastIndexOf("e"):-1)<0?(r=e,""):(r=e.substring(0,o),e.substring(o)):(r=e.substring(0,a),x+e.substring(a+1)),!u&&h&&(r=w(r,1/0));var o=g.length+r.length+i.length+(b?0:n.length),a=o<d?new Array(o=d-o+1).join(s):"";return b&&(r=w(a+r,a.length?d-i.length:1/0)),n+=g,e=r+i,("<"===l?n+e+a:">"===l?a+n+e:"^"===l?a.substring(0,o>>=1)+n+e+a.substring(o):n+(b?e:a+e))+t}}),timeFormat:Pt(e)};var x,s,l,n,w};a=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nn(){}P.format=a.numberFormat,P.geo={},nn.prototype={s:0,t:0,add:function(e){an(e,this.t,rn),an(rn.s,this.s,this),this.s?this.t+=rn.t:this.s=rn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rn=new nn;function an(e,t,n){var r=n.s=e+t,i=r-e;n.t=e-(r-i)+(t-i)}function on(e,t){e&&ln.hasOwnProperty(e.type)&&ln[e.type](e,t)}P.geo.stream=function(e,t){e&&sn.hasOwnProperty(e.type)?sn[e.type](e,t):on(e,t)};var sn={Feature:function(e,t){on(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)on(n[r].geometry,t)}},ln={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){cn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)cn(n[r],t,0)},Polygon:function(e,t){un(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)un(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)on(n[r],t)}};function cn(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function un(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)cn(e[n],t,1);t.polygonEnd()}P.geo.area=function(e){return dn=0,P.geo.stream(e,Nn),dn};var dn,hn,fn,pn,mn,gn,_n,yn,vn,bn,xn,wn,Tn,An,kn,Mn,Sn,En,Cn,Ln,Dn,On,Pn,Rn,In=new nn,Nn={sphere:function(){dn+=4*Te},point:E,lineStart:E,lineEnd:E,polygonStart:function(){In.reset(),Nn.lineStart=zn},polygonEnd:function(){var e=2*In;dn+=e<0?4*Te+e:e,Nn.lineStart=Nn.lineEnd=Nn.point=E}};function zn(){var n,r,s,l,c;function i(e,t){t=t*Se/2+Te/4;var n=(e*=Se)-s,r=0<=n?1:-1,i=r*n,a=Math.cos(t),o=Math.sin(t),n=c*o,t=l*a+n*Math.cos(i),i=n*r*Math.sin(i);In.add(Math.atan2(i,t)),s=e,l=a,c=o}Nn.point=function(e,t){Nn.point=i,s=(n=e)*Se,l=Math.cos(t=(r=t)*Se/2+Te/4),c=Math.sin(t)},Nn.lineEnd=function(){i(n,r)}}function Fn(e){var t=e[0],n=e[1],e=Math.cos(n);return[e*Math.cos(t),e*Math.sin(t),Math.sin(n)]}function jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Hn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Un(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Vn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function qn(e){return[Math.atan2(e[1],e[0]),Oe(e[2])]}function Yn(e,t){return D(e[0]-t[0])<xe&&D(e[1]-t[1])<xe}function Gn(e,t){xn.push(wn=[hn=e,pn=e]),t<fn&&(fn=t),mn<t&&(mn=t)}function Wn(e,t){var n,r,i,a,o,s=Fn([e*Se,t*Se]);vn?(i=Bn(vn,s),Vn(n=Bn([i[1],-i[0],0],i)),n=qn(n),a=e-gn,i=n[0]*Ee*(r=0<a?1:-1),(a=180<D(a))^(r*gn<i&&i<r*e)?(o=n[1]*Ee,mn<o&&(mn=o)):a^(r*gn<(i=(i+360)%360-180)&&i<r*e)?(o=-n[1]*Ee)<fn&&(fn=o):(t<fn&&(fn=t),mn<t&&(mn=t)),a?e<gn?Kn(hn,e)>Kn(hn,pn)&&(pn=e):Kn(e,pn)>Kn(hn,pn)&&(hn=e):hn<=pn?(e<hn&&(hn=e),pn<e&&(pn=e)):gn<e?Kn(hn,e)>Kn(hn,pn)&&(pn=e):Kn(e,pn)>Kn(hn,pn)&&(hn=e)):Gn(e,t),vn=s,gn=e}function Xn(){Tn.point=Wn}function Zn(){wn[0]=hn,wn[1]=pn,Tn.point=Gn,vn=null}function Jn(e,t){var n;vn?bn+=180<D(n=e-gn)?n+(0<n?360:-360):n:(_n=e,yn=t),Nn.point(e,t),Wn(e,t)}function $n(){Nn.lineStart()}function Qn(){Jn(_n,yn),Nn.lineEnd(),D(bn)>xe&&(hn=-(pn=180)),wn[0]=hn,wn[1]=pn,vn=null}function Kn(e,t){return(t-=e)<0?t+360:t}function er(e,t){return e[0]-t[0]}function tr(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}P.geo.bounds=(Tn={point:Gn,lineStart:Xn,lineEnd:Zn,polygonStart:function(){Tn.point=Jn,Tn.lineStart=$n,Tn.lineEnd=Qn,bn=0,Nn.polygonStart()},polygonEnd:function(){Nn.polygonEnd(),Tn.point=Gn,Tn.lineStart=Xn,Tn.lineEnd=Zn,In<0?(hn=-(pn=180),fn=-(mn=90)):xe<bn?mn=90:bn<-xe&&(fn=-90),wn[0]=hn,wn[1]=pn}},function(e){if(mn=pn=-(hn=fn=1/0),xn=[],P.geo.stream(e,Tn),i=xn.length){xn.sort(er);for(var t=1,n=[s=xn[0]];t<i;++t)tr((a=xn[t])[0],s)||tr(a[1],s)?(Kn(s[0],a[1])>Kn(s[0],s[1])&&(s[1]=a[1]),Kn(a[0],s[1])>Kn(s[0],s[1])&&(s[0]=a[0])):n.push(s=a);for(var r,i,a,o=-1/0,t=0,s=n[i=n.length-1];t<=i;s=a,++t)a=n[t],(r=Kn(s[1],a[0]))>o&&(o=r,hn=a[0],pn=s[1])}return xn=wn=null,hn===1/0||fn===1/0?[[NaN,NaN],[NaN,NaN]]:[[hn,fn],[pn,mn]]}),P.geo.centroid=function(e){An=kn=Mn=Sn=En=Cn=Ln=Dn=On=Pn=Rn=0,P.geo.stream(e,nr);var t=On,n=Pn,r=Rn,e=t*t+n*n+r*r;return e<we&&(t=Cn,n=Ln,r=Dn,kn<xe&&(t=Mn,n=Sn,r=En),(e=t*t+n*n+r*r)<we)?[NaN,NaN]:[Math.atan2(n,t)*Ee,Oe(r/Math.sqrt(e))*Ee]};var nr={sphere:E,point:rr,lineStart:ar,lineEnd:or,polygonStart:function(){nr.lineStart=sr},polygonEnd:function(){nr.lineStart=ar}};function rr(e,t){e*=Se;var n=Math.cos(t*=Se);ir(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ir(e,t,n){Mn+=(e-Mn)/++An,Sn+=(t-Sn)/An,En+=(n-En)/An}function ar(){var i,a,o;function r(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),n=n*Math.sin(e),e=Math.sin(t),t=Math.atan2(Math.sqrt((t=a*e-o*n)*t+(t=o*r-i*e)*t+(t=i*n-a*r)*t),i*r+a*n+o*e);kn+=t,Cn+=t*(i+(i=r)),Ln+=t*(a+(a=n)),Dn+=t*(o+(o=e)),ir(i,a,o)}nr.point=function(e,t){e*=Se;var n=Math.cos(t*=Se);i=n*Math.cos(e),a=n*Math.sin(e),o=Math.sin(t),nr.point=r,ir(i,a,o)}}function or(){nr.point=rr}function sr(){var r,i,c,u,d;function a(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),i=n*Math.sin(e),a=Math.sin(t),o=u*a-d*i,s=d*r-c*a,l=c*i-u*r,n=Math.sqrt(o*o+s*s+l*l),e=c*r+u*i+d*a,t=n&&-De(e)/n,e=Math.atan2(n,e);On+=t*o,Pn+=t*s,Rn+=t*l,kn+=e,Cn+=e*(c+(c=r)),Ln+=e*(u+(u=i)),Dn+=e*(d+(d=a)),ir(c,u,d)}nr.point=function(e,t){r=e,i=t,nr.point=a,e*=Se;var n=Math.cos(t*=Se);c=n*Math.cos(e),u=n*Math.sin(e),d=Math.sin(t),ir(c,u,d)},nr.lineEnd=function(){a(r,i),nr.lineEnd=or,nr.point=rr}}function lr(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function cr(){return!0}function ur(e,t,n,r,s){var l=[],c=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Yn(n,r)){s.lineStart();for(var i=0;i<t;++i)s.point((n=e[i])[0],n[1]);s.lineEnd()}else{var a=new hr(n,e,null,!0),o=new hr(n,null,a,!1);a.o=o,l.push(a),c.push(o),a=new hr(r,e,null,!1),o=new hr(r,null,a,!0),a.o=o,l.push(a),c.push(o)}}}),c.sort(t),dr(l),dr(c),l.length){for(var i=0,a=n,o=c.length;i<o;++i)c[i].e=a=!a;for(var u,d=l[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;p=h.z,s.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(i=0,o=p.length;i<o;++i)s.point((u=p[i])[0],u[1]);else r(h.x,h.n.x,1,s);h=h.n}else{if(f)for(var p,i=(p=h.p.z).length-1;0<=i;--i)s.point((u=p[i])[0],u[1]);else r(h.x,h.p.x,-1,s);h=h.p}}while(p=(h=h.o).z,f=!f,!h.v);s.lineEnd()}}}function dr(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function hr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fr(y,v,b,x){return function(r,o){var s,n=v(o),t=r.invert(x[0],x[1]),i={point:a,lineStart:l,lineEnd:c,polygonStart:function(){i.point=m,i.lineStart=g,i.lineEnd=_,s=[],u=[]},polygonEnd:function(){i.point=a,i.lineStart=l,i.lineEnd=c,s=P.merge(s);var e=function(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;In.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],h=d[0],f=d[1]/2+Te/4,p=Math.sin(f),m=Math.cos(f),g=1;;){var _=(e=c[g=g===u?0:g])[0],y=e[1]/2+Te/4,v=Math.sin(y),b=Math.cos(y),x=_-h,w=0<=x?1:-1,T=w*x,A=Te<T,y=p*v;if(In.add(Math.atan2(y*w*Math.sin(T),m*b+y*Math.cos(T))),a+=A?x+w*Ae:x,A^n<=h^n<=_&&(Vn(T=Bn(Fn(d),Fn(e))),Vn(w=Bn(i,T)),((w=(A^0<=x?-1:1)*Oe(w[2]))<r||r===w&&(T[0]||T[1]))&&(o+=A^0<=x?1:-1)),!g++)break;h=_,p=v,m=b,d=e}}return(a<-xe||a<xe&&In<-xe)^1&o}(t,u);s.length?(p||(o.polygonStart(),p=!0),ur(s,gr,e,b,o)):e&&(p||(o.polygonStart(),p=!0),o.lineStart(),b(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=u=null},sphere:function(){o.polygonStart(),o.lineStart(),b(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function a(e,t){var n=r(e,t);y(e=n[0],t=n[1])&&o.point(e,t)}function e(e,t){t=r(e,t);n.point(t[0],t[1])}function l(){i.point=e,n.lineStart()}function c(){i.point=a,n.lineEnd()}var u,d,h=mr(),f=v(h),p=!1;function m(e,t){d.push([e,t]);t=r(e,t);f.point(t[0],t[1])}function g(){f.lineStart(),d=[]}function _(){m(d[0][0],d[0][1]),f.lineEnd();var e=f.clean(),t=h.buffer(),n=t.length;if(d.pop(),u.push(d),d=null,n)if(1&e){var r,i,a=-1;if(0<(n=(r=t[0]).length-1)){for(p||(o.polygonStart(),p=!0),o.lineStart();++a<n;)o.point((i=r[a])[0],i[1]);o.lineEnd()}}else 1<n&&2&e&&t.push(t.pop().concat(t.shift())),s.push(t.filter(pr))}return i}}function pr(e){return 1<e.length}function mr(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(e,t){n.push([e,t])},lineEnd:E,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function gr(e,t){return((e=e.x)[0]<0?e[1]-Me-xe:Me-e[1])-((t=t.x)[0]<0?t[1]-Me-xe:Me-t[1])}var _r=fr(cr,function(c){var u,d=NaN,h=NaN,f=NaN;return{lineStart:function(){c.lineStart(),u=1},point:function(e,t){var n,r,i,a,o,s=0<e?Te:-Te,l=D(e-d);D(l-Te)<xe?(c.point(d,h=0<(h+t)/2?Me:-Me),c.point(f,h),c.lineEnd(),c.lineStart(),c.point(s,h),c.point(e,h),u=0):f!==s&&Te<=l&&(D(d-f)<xe&&(d-=f*xe),D(e-s)<xe&&(e-=s*xe),n=d,r=h,i=e,a=t,o=Math.sin(n-i),h=D(o)>xe?Math.atan((Math.sin(r)*(l=Math.cos(a))*Math.sin(i)-Math.sin(a)*(i=Math.cos(r))*Math.sin(n))/(i*l*o)):(r+a)/2,c.point(f,h),c.lineEnd(),c.lineStart(),c.point(s,h),u=0),c.point(d=e,h=t),f=s},lineEnd:function(){c.lineEnd(),d=h=NaN},clean:function(){return 2-u}}},function(e,t,n,r){var i;null==e?(i=n*Me,r.point(-Te,i),r.point(0,i),r.point(Te,i),r.point(Te,0),r.point(Te,-i),r.point(0,-i),r.point(-Te,-i),r.point(-Te,0),r.point(-Te,i)):D(e[0]-t[0])>xe?(e=e[0]<t[0]?Te:-Te,i=n*e/2,r.point(-e,i),r.point(0,i),r.point(e,i)):r.point(t[0],t[1])},[-Te,-Te/2]);function yr(i){var f=Math.cos(i),h=0<f,p=D(f)>xe;return fr(m,function(o){var s,l,c,u,d;return{lineStart:function(){u=c=!1,d=1},point:function(e,t){var n,r,i=[e,t],a=m(e,t),t=h?a?0:_(e,t):a?_(e+(e<0?Te:-Te),t):0;!s&&(u=c=a)&&o.lineStart(),a!==c&&(n=g(s,i),(Yn(s,n)||Yn(i,n))&&(i[0]+=xe,i[1]+=xe,a=m(i[0],i[1]))),a!==c?(d=0,a?(o.lineStart(),n=g(i,s),o.point(n[0],n[1])):(n=g(s,i),o.point(n[0],n[1]),o.lineEnd()),s=n):p&&s&&h^a&&(t&l||!(r=g(i,s,!0))||(d=0,h?(o.lineStart(),o.point(r[0][0],r[0][1]),o.point(r[1][0],r[1][1]),o.lineEnd()):(o.point(r[1][0],r[1][1]),o.lineEnd(),o.lineStart(),o.point(r[0][0],r[0][1])))),!a||s&&Yn(s,i)||o.point(i[0],i[1]),s=i,c=a,l=t},lineEnd:function(){c&&o.lineEnd(),s=null},clean:function(){return d|(u&&c)<<1}}},ei(i,6*Se),h?[0,-i]:[-Te,i-Te]);function m(e,t){return Math.cos(e)*Math.cos(t)>f}function g(e,t,n){var r=[1,0,0],i=Bn(Fn(e),Fn(t)),a=jn(i,i),o=i[0],s=a-o*o;if(!s)return!n&&e;var l=Bn(r,i),c=Un(r,f*a/s);Hn(c,Un(i,-f*o/s));var u=l,d=jn(c,u),r=jn(u,u),a=d*d-r*(jn(c,c)-1);if(!(a<0)){i=Math.sqrt(a),o=Un(u,(-d-i)/r);if(Hn(o,c),o=qn(o),!n)return o;var h,s=e[0],l=t[0],a=e[1],n=t[1];l<s&&(h=s,s=l,l=h);e=l-s,t=D(e-Te)<xe;if(!t&&n<a&&(h=a,a=n,n=h),t||e<xe?t?0<a+n^o[1]<(D(o[0]-s)<xe?a:n):a<=o[1]&&o[1]<=n:Te<e^(s<=o[0]&&o[0]<=l)){r=Un(u,(-d+i)/r);return Hn(r,c),[o,qn(r)]}}}function _(e,t){var n=h?i:Te-i,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}}function vr(l,c,u,d){return function(e){var t=e.a,n=e.b,r=t.x,i=t.y,a=0,o=1,s=n.x-r,t=n.y-i,n=l-r;if(s||!(0<n)){if(n/=s,s<0){if(n<a)return;n<o&&(o=n)}else if(0<s){if(o<n)return;a<n&&(a=n)}if(n=u-r,s||!(n<0)){if(n/=s,s<0){if(o<n)return;a<n&&(a=n)}else if(0<s){if(n<a)return;n<o&&(o=n)}if(n=c-i,t||!(0<n)){if(n/=t,t<0){if(n<a)return;n<o&&(o=n)}else if(0<t){if(o<n)return;a<n&&(a=n)}if(n=d-i,t||!(n<0)){if(n/=t,t<0){if(o<n)return;a<n&&(a=n)}else if(0<t){if(n<a)return;n<o&&(o=n)}return 0<a&&(e.a={x:r+a*s,y:i+a*t}),o<1&&(e.b={x:r+o*s,y:i+o*t}),e}}}}}}var br=1e9;function xr(b,x,w,T){return function(i){var r,u,a,o,s,l,c,d,h,f,p,m=i,e=mr(),g=vr(b,x,w,T),t={point:n,lineStart:function(){t.point=v,u&&u.push(a=[]);f=!0,h=!1,c=d=NaN},lineEnd:function(){r&&(v(o,s),l&&h&&e.rejoin(),r.push(e.buffer()));t.point=n,h&&i.lineEnd()},polygonStart:function(){i=e,r=[],u=[],p=!0},polygonEnd:function(){i=m,r=P.merge(r);var e=function(e){for(var t=0,n=u.length,r=e[1],i=0;i<n;++i)for(var a,o=1,s=u[i],l=s.length,c=s[0];o<l;++o)a=s[o],c[1]<=r?a[1]>r&&0<Le(c,a,e)&&++t:a[1]<=r&&Le(c,a,e)<0&&--t,c=a;return 0!==t}([b,T]),t=p&&e,n=r.length;(t||n)&&(i.polygonStart(),t&&(i.lineStart(),_(null,null,1,i),i.lineEnd()),n&&ur(r,k,e,_,i),i.polygonEnd()),r=u=a=null}};function _(e,t,n,r){var i=0,a=0;if(null==e||(i=A(e,n))!==(a=A(t,n))||M(e,t)<0^0<n)for(;r.point(0===i||3===i?b:w,1<i?T:x),(i=(i+n+4)%4)!==a;);else r.point(t[0],t[1])}function y(e,t){return b<=e&&e<=w&&x<=t&&t<=T}function n(e,t){y(e,t)&&i.point(e,t)}function v(e,t){var n,r=y(e=Math.max(-br,Math.min(br,e)),t=Math.max(-br,Math.min(br,t)));u&&a.push([e,t]),f?(o=e,s=t,f=!1,(l=r)&&(i.lineStart(),i.point(e,t))):r&&h?i.point(e,t):g(n={a:{x:c,y:d},b:{x:e,y:t}})?(h||(i.lineStart(),i.point(n.a.x,n.a.y)),i.point(n.b.x,n.b.y),r||i.lineEnd(),p=!1):r&&(i.lineStart(),i.point(e,t),p=!1),c=e,d=t,h=r}return t};function A(e,t){return D(e[0]-b)<xe?0<t?0:3:D(e[0]-w)<xe?0<t?2:1:D(e[1]-x)<xe?0<t?1:0:0<t?3:2}function k(e,t){return M(e.x,t.x)}function M(e,t){var n=A(e,1),r=A(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function wr(e){var t=0,n=Te/3,r=Gr(e),e=r(t,n);return e.parallels=function(e){return arguments.length?r(t=e[0]*Te/180,n=e[1]*Te/180):[t/Te*180,n/Te*180]},e}function Tr(e,t){var e=Math.sin(e),n=(e+Math.sin(t))/2,r=1+e*(2*n-e),i=Math.sqrt(r)/n;function a(e,t){t=Math.sqrt(r-2*n*Math.sin(t))/n;return[t*Math.sin(e*=n),i-t*Math.cos(e)]}return a.invert=function(e,t){t=i-t;return[Math.atan2(e,t)/n,Oe((r-(e*e+t*t)*n*n)/(2*n))]},a}P.geo.clipExtent=function(){var t,n,r,i,a,o,s={stream:function(e){return a&&(a.valid=!1),(a=o(e)).valid=!0,a},extent:function(e){return arguments.length?(o=xr(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a&&(a.valid=!1,a=null),s):[[t,n],[r,i]]}};return s.extent([[0,0],[960,500]])},(P.geo.conicEqualArea=function(){return wr(Tr)}).raw=Tr,P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},P.geo.albersUsa=function(){var n,i,a,o,s=P.geo.albers(),l=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){n=[e,t]}};function d(e){var t=e[0],e=e[1];return n=null,i(t,e),n||(a(t,e),n)||o(t,e),n}return d.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,t=(e[1]-n[1])/t;return(.12<=t&&t<.234&&-.425<=r&&r<-.214?l:.166<=t&&t<.234&&-.214<=r&&r<-.115?c:s).invert(e)},d.stream=function(e){var n=s.stream(e),r=l.stream(e),i=c.stream(e);return{point:function(e,t){n.point(e,t),r.point(e,t),i.point(e,t)},sphere:function(){n.sphere(),r.sphere(),i.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),i.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),i.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),i.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),i.polygonEnd()}}},d.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),c.precision(e),d):s.precision()},d.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),c.scale(e),d.translate(s.translate())):s.scale()},d.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),n=+e[0],r=+e[1];return i=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(u).point,a=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+xe,r+.12*t+xe],[n-.214*t-xe,r+.234*t-xe]]).stream(u).point,o=c.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+xe,r+.166*t+xe],[n-.115*t-xe,r+.234*t-xe]]).stream(u).point,d},d.scale(1070)};var Ar,kr,Mr,Sr,Er,Cr,Lr={point:E,lineStart:E,lineEnd:E,polygonStart:function(){kr=0,Lr.lineStart=Dr},polygonEnd:function(){Lr.lineStart=Lr.lineEnd=Lr.point=E,Ar+=D(kr/2)}};function Dr(){var n,r,i,a;function o(e,t){kr+=a*e-i*t,i=e,a=t}Lr.point=function(e,t){Lr.point=o,n=i=e,r=a=t},Lr.lineEnd=function(){o(n,r)}}var Or={point:function(e,t){e<Mr&&(Mr=e);Er<e&&(Er=e);t<Sr&&(Sr=t);Cr<t&&(Cr=t)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Pr(){var n=Rr(4.5),r=[],i={point:e,lineStart:function(){i.point=t},lineEnd:o,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=o,i.point=e},pointRadius:function(e){return n=Rr(e),i},result:function(){if(r.length){var e=r.join("");return r=[],e}}};function e(e,t){r.push("M",e,",",t,n)}function t(e,t){r.push("M",e,",",t),i.point=a}function a(e,t){r.push("L",e,",",t)}function o(){i.point=e}function s(){r.push("Z")}return i}function Rr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Ir,Nr={point:zr,lineStart:Fr,lineEnd:jr,polygonStart:function(){Nr.lineStart=Br},polygonEnd:function(){Nr.point=zr,Nr.lineStart=Fr,Nr.lineEnd=jr}};function zr(e,t){Mn+=e,Sn+=t,++En}function Fr(){var i,a;function n(e,t){var n=e-i,r=t-a,r=Math.sqrt(n*n+r*r);Cn+=r*(i+e)/2,Ln+=r*(a+t)/2,Dn+=r,zr(i=e,a=t)}Nr.point=function(e,t){Nr.point=n,zr(i=e,a=t)}}function jr(){Nr.point=zr}function Br(){var n,r,i,a;function o(e,t){var n=e-i,r=t-a,r=Math.sqrt(n*n+r*r);Cn+=r*(i+e)/2,Ln+=r*(a+t)/2,Dn+=r,On+=(r=a*e-i*t)*(i+e),Pn+=r*(a+t),Rn+=3*r,zr(i=e,a=t)}Nr.point=function(e,t){Nr.point=o,zr(n=i=e,r=a=t)},Nr.lineEnd=function(){o(n,r)}}function Hr(n){var r=4.5,i={point:e,lineStart:function(){i.point=t},lineEnd:o,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=o,i.point=e},pointRadius:function(e){return r=e,i},result:E};function e(e,t){n.moveTo(e+r,t),n.arc(e,t,r,0,Ae)}function t(e,t){n.moveTo(e,t),i.point=a}function a(e,t){n.lineTo(e,t)}function o(){i.point=e}function s(){n.closePath()}return i}function Ur(S){var E=.5,C=Math.cos(30*Se),x=16;function t(e){return(x?r:n)(e)}function n(n){return qr(n,function(e,t){e=S(e,t),n.point(e[0],e[1])})}function r(r){var n,i,a,o,s,l,c,u,d,h,f,p,m={point:e,lineStart:t,lineEnd:_,polygonStart:function(){r.polygonStart(),m.lineStart=y},polygonEnd:function(){r.polygonEnd(),m.lineStart=t}};function e(e,t){e=S(e,t),r.point(e[0],e[1])}function t(){u=NaN,m.point=g,r.lineStart()}function g(e,t){var n=Fn([e,t]),t=S(e,t);L(u,d,c,h,f,p,u=t[0],d=t[1],c=e,h=n[0],f=n[1],p=n[2],x,r),r.point(u,d)}function _(){m.point=e,r.lineEnd()}function y(){t(),m.point=v,m.lineEnd=b}function v(e,t){g(n=e,t),i=u,a=d,o=h,s=f,l=p,m.point=g}function b(){L(u,d,c,h,f,p,i,a,n,o,s,l,x,r),m.lineEnd=_,_()}return m}function L(e,t,n,r,i,a,o,s,l,c,u,d,h,f){var p,m,g,_,y,v,b,x,w,T,A=o-e,k=s-t,M=A*A+k*k;4*E<M&&h--&&(p=r+c,m=i+u,g=a+d,_=Math.sqrt(p*p+m*m+g*g),w=Math.asin(g/=_),y=D(D(g)-1)<xe||D(n-l)<xe?(n+l)/2:Math.atan2(m,p),v=(T=S(y,w))[0],b=T[1],(E<(T=k*(x=v-e)-A*(w=b-t))*T/M||.3<D((A*x+k*w)/M-.5)||r*c+i*u+a*d<C)&&(L(e,t,n,r,i,a,v,b,y,p/=_,m/=_,g,h,f),f.point(v,b),L(v,b,y,p,m,g,o,s,l,c,u,d,h,f)))}return t.precision=function(e){return arguments.length?(x=0<(E=e*e)&&16,t):Math.sqrt(E)},t}function Vr(e){this.stream=e}function qr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Yr(e){return Gr(function(){return e})()}function Gr(e){var n,t,r,i,a,o,s=Ur(function(e,t){return[(e=n(e,t))[0]*l+i,a-e[1]*l]}),l=150,c=480,u=250,d=0,h=0,f=0,p=0,m=0,g=_r,_=L,y=null,v=null;function b(e){return[(e=r(e[0]*Se,e[1]*Se))[0]*l+i,a-e[1]*l]}function x(e){return(e=r.invert((e[0]-i)/l,(a-e[1])/l))&&[e[0]*Ee,e[1]*Ee]}function w(){r=lr(t=Jr(f,p,m),n);var e=n(d,h);return i=c-e[0]*l,a=u+e[1]*l,T()}function T(){return o&&(o.valid=!1,o=null),b}return b.stream=function(e){return o&&(o.valid=!1),(o=Wr(g(t,s(_(e))))).valid=!0,o},b.clipAngle=function(e){return arguments.length?(g=null==e?(y=e,_r):yr((y=+e)*Se),T()):y},b.clipExtent=function(e){return arguments.length?(_=(v=e)?xr(e[0][0],e[0][1],e[1][0],e[1][1]):L,T()):v},b.scale=function(e){return arguments.length?(l=+e,w()):l},b.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],w()):[c,u]},b.center=function(e){return arguments.length?(d=e[0]%360*Se,h=e[1]%360*Se,w()):[d*Ee,h*Ee]},b.rotate=function(e){return arguments.length?(f=e[0]%360*Se,p=e[1]%360*Se,m=2<e.length?e[2]%360*Se:0,w()):[f*Ee,p*Ee,m*Ee]},P.rebind(b,s,"precision"),function(){return n=e.apply(this,arguments),b.invert=n.invert&&x,w()}}function Wr(n){return qr(n,function(e,t){n.point(e*Se,t*Se)})}function Xr(e,t){return[e,t]}function Zr(e,t){return[Te<e?e-Ae:e<-Te?e+Ae:e,t]}function Jr(e,t,n){return e?t||n?lr(Qr(e),Kr(t,n)):Qr(e):t||n?Kr(t,n):Zr}function $r(n){return function(e,t){return[Te<(e+=n)?e-Ae:e<-Te?e+Ae:e,t]}}function Qr(e){var t=$r(e);return t.invert=$r(-e),t}function Kr(e,t){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(t),s=Math.sin(t);function n(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*i+r*a;return[Math.atan2(e*o-t*s,r*i-n*a),Oe(t*o+e*s)]}return n.invert=function(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*o-e*s;return[Math.atan2(e*o+n*s,r*i+t*a),Oe(t*i-r*a)]},n}function ei(s,l){var c=Math.cos(s),u=Math.sin(s);return function(e,t,n,r){var i=n*l;null!=e?(e=ti(c,e),t=ti(c,t),(0<n?e<t:t<e)&&(e+=n*Ae)):(e=s+n*Ae,t=s-.5*i);for(var a,o=e;0<n?t<o:o<t;o-=i)r.point((a=qn([c,-u*Math.cos(o),-u*Math.sin(o)]))[0],a[1])}}function ti(e,t){t=Fn(t);t[0]-=e,Vn(t);e=De(-t[1]);return((-t[2]<0?-e:e)+2*Math.PI-xe)%(2*Math.PI)}function ni(e,t,n){var r=P.range(e,t-xe,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function ri(e,t,n){var r=P.range(e,t-xe,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function ii(e){return e.source}function ai(e){return e.target}P.geo.path=function(){var r,t,i,n,a,o=4.5;function s(e){return e&&("function"==typeof o&&n.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=i(n)),P.geo.stream(e,a)),n.result()}function l(){return a=null,s}return s.area=function(e){return Ar=0,P.geo.stream(e,i(Lr)),Ar},s.centroid=function(e){return Mn=Sn=En=Cn=Ln=Dn=On=Pn=Rn=0,P.geo.stream(e,i(Nr)),Rn?[On/Rn,Pn/Rn]:Dn?[Cn/Dn,Ln/Dn]:En?[Mn/En,Sn/En]:[NaN,NaN]},s.bounds=function(e){return Er=Cr=-(Mr=Sr=1/0),P.geo.stream(e,i(Or)),[[Mr,Sr],[Er,Cr]]},s.projection=function(e){return arguments.length?(i=(r=e)?e.stream||(n=e,t=Ur(function(e,t){return n([e*Ee,t*Ee])}),function(e){return Wr(t(e))}):L,l()):r;var n,t},s.context=function(e){return arguments.length?(n=null==(t=e)?new Pr:new Hr(e),"function"!=typeof o&&n.pointRadius(o),l()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(n.pointRadius(+e),+e),s):o},s.projection(P.geo.albersUsa()).context(null)},P.geo.transform=function(r){return{stream:function(e){var t,n=new Vr(e);for(t in r)n[t]=r[t];return n}}},Vr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},P.geo.projection=Yr,P.geo.projectionMutator=Gr,(P.geo.equirectangular=function(){return Yr(Xr)}).raw=Xr.invert=Xr,P.geo.rotation=function(t){function e(e){return(e=t(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e}return t=Jr(t[0]%360*Se,t[1]*Se,2<t.length?t[2]*Se:0),e.invert=function(e){return(e=t.invert(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e},e},Zr.invert=Xr,P.geo.circle=function(){var t,i,a=[0,0],n=6;function r(){var e="function"==typeof a?a.apply(this,arguments):a,n=Jr(-e[0]*Se,-e[1]*Se,0).invert,r=[];return i(null,null,1,{point:function(e,t){r.push(e=n(e,t)),e[0]*=Ee,e[1]*=Ee}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(e){return arguments.length?(a=e,r):a},r.angle=function(e){return arguments.length?(i=ei((t=+e)*Se,n*Se),r):t},r.precision=function(e){return arguments.length?(i=ei(t*Se,(n=+e)*Se),r):n},r.angle(90)},P.geo.distance=function(e,t){var n=(t[0]-e[0])*Se,r=e[1]*Se,i=t[1]*Se,a=Math.sin(n),e=Math.cos(n),t=Math.sin(r),n=Math.cos(r),r=Math.sin(i),i=Math.cos(i);return Math.atan2(Math.sqrt((a=i*a)*a+(a=n*r-t*i*e)*a),t*r+n*i*e)},P.geo.graticule=function(){var t,n,r,i,a,o,s,l,c,u,d,h,f=10,p=f,m=90,g=360,_=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return P.range(Math.ceil(i/m)*m,r,m).map(d).concat(P.range(Math.ceil(l/g)*g,s,g).map(h)).concat(P.range(Math.ceil(n/f)*f,t,f).filter(function(e){return D(e%m)>xe}).map(c)).concat(P.range(Math.ceil(o/p)*p,a,p).filter(function(e){return D(e%g)>xe}).map(u))}return y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(s).slice(1),d(r).reverse().slice(1),h(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<i&&(e=i,i=r,r=e),s<l&&(e=l,l=s,s=e),y.precision(_)):[[i,l],[r,s]]},y.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],a=+e[1][1],t<n&&(e=n,n=t,t=e),a<o&&(e=o,o=a,a=e),y.precision(_)):[[n,o],[t,a]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(m=+e[0],g=+e[1],y):[m,g]},y.minorStep=function(e){return arguments.length?(f=+e[0],p=+e[1],y):[f,p]},y.precision=function(e){return arguments.length?(_=+e,c=ni(o,a,90),u=ri(n,t,_),d=ni(l,s,90),h=ri(i,r,_),y):_},y.majorExtent([[-180,-90+xe],[180,90-xe]]).minorExtent([[-180,-80-xe],[180,80+xe]])},P.geo.greatArc=function(){var t,n,r=ii,i=ai;function a(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}return a.distance=function(){return P.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},a.source=function(e){return arguments.length?(t="function"==typeof(r=e)?null:e,a):r},a.target=function(e){return arguments.length?(n="function"==typeof(i=e)?null:e,a):i},a.precision=function(){return arguments.length?a:0},a},P.geo.interpolate=function(e,t){return n=e[0]*Se,r=e[1]*Se,i=t[0]*Se,a=t[1]*Se,e=Math.cos(r),o=Math.sin(r),t=Math.cos(a),s=Math.sin(a),l=e*Math.cos(n),c=e*Math.sin(n),u=t*Math.cos(i),d=t*Math.sin(i),h=2*Math.asin(Math.sqrt(Re(a-r)+e*t*Re(i-n))),f=1/Math.sin(h),(i=h?function(e){var t=Math.sin(e*=h)*f,n=Math.sin(h-e)*f,r=n*l+t*u,e=n*c+t*d,t=n*o+t*s;return[Math.atan2(e,r)*Ee,Math.atan2(t,Math.sqrt(r*r+e*e))*Ee]}:function(){return[n*Ee,r*Ee]}).distance=h,i;var n,r,i,a,o,s,l,c,u,d,h,f},P.geo.length=function(e){return Ir=0,P.geo.stream(e,oi),Ir};var oi={sphere:E,point:E,lineStart:function(){var a,o,s;function n(e,t){var n=Math.sin(t*=Se),r=Math.cos(t),i=D((e*=Se)-a),t=Math.cos(i);Ir+=Math.atan2(Math.sqrt((i=r*Math.sin(i))*i+(i=s*n-o*r*t)*i),o*n+s*r*t),a=e,o=n,s=r}oi.point=function(e,t){a=e*Se,o=Math.sin(t*=Se),s=Math.cos(t),oi.point=n},oi.lineEnd=function(){oi.point=oi.lineEnd=E}},lineEnd:E,polygonStart:E,polygonEnd:E};function si(i,a){function e(e,t){var n=Math.cos(e),r=Math.cos(t),n=i(n*r);return[n*r*Math.sin(e),n*Math.sin(t)]}return e.invert=function(e,t){var n=Math.sqrt(e*e+t*t),r=a(n),i=Math.sin(r),r=Math.cos(r);return[Math.atan2(e*i,n*r),Math.asin(n&&t*i/n)]},e}var li=si(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(P.geo.azimuthalEqualArea=function(){return Yr(li)}).raw=li;var ci=si(function(e){e=Math.acos(e);return e&&e/Math.sin(e)},L);function ui(e,t){function n(e){return Math.tan(Te/4+e/2)}var r=Math.cos(e),i=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),a=r*Math.pow(n(e),i)/i;return i?(o.invert=function(e,t){var n=a-t,t=Ce(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/t,1/i))-Me]},o):fi;function o(e,t){0<a?t<-Me+xe&&(t=-Me+xe):Me-xe<t&&(t=Me-xe);t=a/Math.pow(n(t),i);return[t*Math.sin(i*e),a-t*Math.cos(i*e)]}}function di(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;return D(r)<xe?Xr:(a.invert=function(e,t){t=i-t;return[Math.atan2(e,t)/r,i-Ce(r)*Math.sqrt(e*e+t*t)]},a);function a(e,t){t=i-t;return[t*Math.sin(r*e),i-t*Math.cos(r*e)]}}(P.geo.azimuthalEquidistant=function(){return Yr(ci)}).raw=ci,(P.geo.conicConformal=function(){return wr(ui)}).raw=ui,(P.geo.conicEquidistant=function(){return wr(di)}).raw=di;var hi=si(function(e){return 1/e},Math.atan);function fi(e,t){return[e,Math.log(Math.tan(Te/4+t/2))]}function pi(e){var i,a=Yr(e),o=a.scale,s=a.translate,l=a.clipExtent;return a.scale=function(){var e=o.apply(a,arguments);return e===a?i?a.clipExtent(null):a:e},a.translate=function(){var e=s.apply(a,arguments);return e===a?i?a.clipExtent(null):a:e},a.clipExtent=function(e){var t,n,r=l.apply(a,arguments);return r===a?(i=null==e)&&(t=Te*o(),n=s(),l([[n[0]-t,n[1]-t],[n[0]+t,n[1]+t]])):i&&(r=null),r},a.clipExtent(null)}(P.geo.gnomonic=function(){return Yr(hi)}).raw=hi,fi.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Me]},(P.geo.mercator=function(){return pi(fi)}).raw=fi;var mi=si(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Yr(mi)}).raw=mi;var gi=si(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function _i(e,t){return[Math.log(Math.tan(Te/4+t/2)),-e]}function yi(e){return e[0]}function vi(e){return e[1]}function bi(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;1<r&&Le(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function xi(e,t){return e[0]-t[0]||e[1]-t[1]}(P.geo.stereographic=function(){return Yr(gi)}).raw=gi,_i.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Me]},(P.geo.transverseMercator=function(){var e=pi(_i),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=_i,P.geom={},P.geom.hull=function(e){var h=yi,f=vi;return arguments.length?t(e):(t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(f=e,t):f},t);function t(e){if(e.length<3)return[];for(var t=ut(h),n=ut(f),r=e.length,i=[],a=[],o=0;o<r;o++)i.push([+t.call(this,e[o],o),+n.call(this,e[o],o),o]);for(i.sort(xi),o=0;o<r;o++)a.push([i[o][0],-i[o][1]]);var s=bi(i),l=bi(a),c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],d=[];for(o=s.length-1;0<=o;--o)d.push(e[i[s[o]][2]]);for(o=+c;o<l.length-u;++o)d.push(e[i[l[o]][2]]);return d}},P.geom.polygon=function(e){return B(e,wi),e};var wi=P.geom.polygon.prototype=[];function Ti(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ai(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,e=e[1],n=n[1],t=t[1]-e,r=r[1]-n,s=(s*(e-n)-r*(i-a))/(r*o-s*t);return[i+s*o,e+s*t]}function ki(e){var t=e[0],e=e[e.length-1];return!(t[0]-e[0]||t[1]-e[1])}wi.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},wi.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},wi.clip=function(e){for(var t,n,r,i,a,o,s=ki(e),l=-1,c=this.length-ki(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,i=this[l],a=t[(r=t.length-s)-1],n=-1;++n<r;)Ti(o=t[n],u,i)?(Ti(a,u,i)||e.push(Ai(a,o,u,i)),e.push(o)):Ti(a,u,i)&&e.push(Ai(a,o,u,i)),a=o;s&&e.push(e[0]),u=i}return e};var Mi,Si,Ei,Ci,Li,Di=[],Oi=[];function Pi(){Ji(this),this.edge=this.site=this.circle=null}function Ri(e){var t=Di.pop()||new Pi;return t.site=e,t}function Ii(e){Vi(e),Ei.remove(e),Di.push(e),Ji(e)}function Ni(e){for(var t,n,r,i,a=e.x,o=e.y,s=Ei._;s;)if(r=zi(s,o)-a,xe<r)s=s.L;else{if(i=a-function(e,t){var n=e.N;if(n)return zi(n,t);e=e.site;return e.y===t?e.x:1/0}(s,o),!(xe<i)){-xe<r?(t=s.P,n=s):-xe<i?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l,c,u,d,h,f,p,m,g,_,y=Ri(e);if(Ei.insert(t,y),t||n){if(t===n)return Vi(t),n=Ri(t.site),Ei.insert(y,n),y.edge=n.edge=Gi(t.site,y.site),Ui(t),void Ui(n);n?(Vi(t),Vi(n),c=(l=t.site).x,_=l.y,u=e.x-c,p=e.y-_,h=(d=n.site).x-c,f=d.y-_,Wi(n.edge,l,d,_={x:(f*(m=u*u+p*p)-p*(g=h*h+f*f))/(p=2*(u*f-p*h))+c,y:(u*g-h*m)/p+_}),y.edge=Gi(l,e,null,_),n.edge=Gi(e,d,null,_),Ui(t),Ui(n)):y.edge=Gi(t.site,y.site)}}function zi(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,e=l-t;if(!e)return s;o=s-r,n=1/a-1/e,t=o/e;return n?(-t+Math.sqrt(t*t-2*n*(o*o/(-2*e)-l+e/2+i-a/2)))/n+r:(r+s)/2}function Fi(e){this.site=e,this.edges=[]}function ji(e){for(var t,n,r,i,a,o,s,l,c,u=e[0][0],d=e[1][0],h=e[0][1],f=e[1][1],p=Si,m=p.length;m--;)if((i=p[m])&&i.prepare())for(s=(o=i.edges).length,a=0;a<s;)n=(c=o[a].end()).x,r=c.y,t=(l=o[++a%s].start()).x,l=l.y,(D(n-t)>xe||D(r-l)>xe)&&(o.splice(a,0,new Xi(function(e,t,n){e=new Yi(e,null);return e.a=t,e.b=n,Mi.push(e),e}(i.site,c,D(n-u)<xe&&xe<f-r?{x:u,y:D(t-u)<xe?l:f}:D(r-f)<xe&&xe<d-n?{x:D(l-f)<xe?t:d,y:f}:D(n-d)<xe&&xe<r-h?{x:d,y:D(t-d)<xe?l:h}:D(r-h)<xe&&xe<n-u?{x:D(l-h)<xe?t:u,y:h}:null),i.site,null)),++s)}function Bi(e,t){return t.angle-e.angle}function Hi(){Ji(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ui(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,c=r.y-s,u=a.x-o,n=2*(l*(t=a.y-s)-c*u);if(!(-we<=n)){var r=l*l+c*c,a=u*u+t*t,c=(t*r-c*a)/n,n=(l*a-u*r)/n,t=n+s,d=Oi.pop()||new Hi;d.arc=e,d.site=i,d.x=c+o,d.y=t+Math.sqrt(c*c+n*n),d.cy=t,e.circle=d;for(var h=null,f=Li._;f;)if(d.y<f.y||d.y===f.y&&d.x<=f.x){if(!f.L){h=f.P;break}f=f.L}else{if(!f.R){h=f;break}f=f.R}Li.insert(h,d),h||(Ci=d)}}}}function Vi(e){var t=e.circle;t&&(t.P||(Ci=t.N),Li.remove(t),Oi.push(t),Ji(t),e.circle=null)}function qi(e){for(var t,n=Mi,r=vr(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(function(e,t){var n=e.b;if(n)return!0;var r=e.a,i=t[0][0],a=t[1][0],o=t[0][1],s=t[1][1],l=e.l,c=e.r,u=l.x,d=l.y,h=c.x,t=c.y,l=(u+h)/2,c=(d+t)/2;if(t===d){if(l<i||a<=l)return;if(h<u){if(r){if(r.y>=s)return}else r={x:l,y:o};n={x:l,y:s}}else{if(r){if(r.y<o)return}else r={x:l,y:s};n={x:l,y:o}}}else if(l=c-(c=(u-h)/(t-d))*l,c<-1||1<c)if(h<u){if(r){if(r.y>=s)return}else r={x:(o-l)/c,y:o};n={x:(s-l)/c,y:s}}else{if(r){if(r.y<o)return}else r={x:(s-l)/c,y:s};n={x:(o-l)/c,y:o}}else if(d<t){if(r){if(r.x>=a)return}else r={x:i,y:c*i+l};n={x:a,y:c*a+l}}else{if(r){if(r.x<i)return}else r={x:a,y:c*a+l};n={x:i,y:c*i+l}}return e.a=r,e.b=n,!0})(t=n[i],e)&&r(t)&&!(D(t.a.x-t.b.x)<xe&&D(t.a.y-t.b.y)<xe)||(t.a=t.b=null,n.splice(i,1))}function Yi(e,t){this.l=e,this.r=t,this.a=this.b=null}function Gi(e,t,n,r){var i=new Yi(e,t);return Mi.push(i),n&&Wi(i,e,t,n),r&&Wi(i,t,e,r),Si[e.i].edges.push(new Xi(i,e,t)),Si[t.i].edges.push(new Xi(i,t,e)),i}function Wi(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Xi(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Zi(){this._=null}function Ji(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function $i(e,t){var n=t,r=t.R,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Qi(e,t){var n=t,r=t.L,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ki(e){for(;e.L;)e=e.L;return e}function ea(e,t){var n,r,i,a=e.sort(ta).pop();for(Mi=[],Si=new Array(e.length),Ei=new Zi,Li=new Zi;;)if(i=Ci,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(Si[a.i]=new Fi(a),Ni(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;!function(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Ii(e);for(var l=a;l.circle&&D(n-l.circle.x)<xe&&D(r-l.circle.cy)<xe;)a=l.P,s.unshift(l),Ii(l),l=a;s.unshift(l),Vi(l);for(var c=o;c.circle&&D(n-c.circle.x)<xe&&D(r-c.circle.cy)<xe;)o=c.N,s.push(c),Ii(c),c=o;s.push(c),Vi(c);for(var u=s.length,d=1;d<u;++d)c=s[d],l=s[d-1],Wi(c.edge,l.site,c.site,i);l=s[0],(c=s[u-1]).edge=Gi(l.site,c.site,null,i),Ui(l),Ui(c)}(i.arc)}t&&(qi(t),ji(t));t={cells:Si,edges:Mi};return Ei=Li=Mi=Si=null,t}function ta(e,t){return t.y-e.y||t.x-e.x}Fi.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Bi),t.length},Xi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zi.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=Ki(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&($i(this,n),n=(e=n).U),n.C=!1,r.C=!0,Qi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Qi(this,n),n=(e=n).U),n.C=!1,r.C=!0,$i(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r=e.U,i=e.L,a=e.R,o=i?a?Ki(a):i:a;if(r?r.L===e?r.L=o:r.R=o:this._=o,i&&a?(n=o.C,o.C=e.C,((o.L=i).U=o)!==a?(r=o.U,o.U=e.U,e=o.R,r.L=e,(o.R=a).U=o):(o.U=r,e=(r=o).R)):(n=e.C,e=o),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,$i(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Qi(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,$i(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Qi(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,$i(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Qi(this,r),e=this._;break}}while(t.C=!0,r=(e=r).U,!e.C);e&&(e.C=!1)}}},P.geom.voronoi=function(e){var t=yi,n=vi,r=t,i=n,c=na;return e?a(e):(a.links=function(t){return ea(h(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(u){var d=[];return ea(h(u)).cells.forEach(function(e,t){for(var n,r,i=e.site,a=e.edges.sort(Bi),o=-1,s=a.length,l=a[s-1].edge,c=l.l===i?l.r:l.l;++o<s;)n=c,c=(l=a[o].edge).l===i?l.r:l.l,t<n.i&&t<c.i&&(r=c,(i.x-r.x)*(n.y-i.y)-(i.x-n.x)*(r.y-i.y)<0)&&d.push([u[t],u[n.i],u[c.i]])}),d},a.x=function(e){return arguments.length?(r=ut(t=e),a):t},a.y=function(e){return arguments.length?(i=ut(n=e),a):n},a.clipExtent=function(e){return arguments.length?(c=null==e?na:e,a):c===na?null:c},a.size=function(e){return arguments.length?a.clipExtent(e&&[[0,0],e]):c===na?null:c&&c[1]},a);function a(r){var i=new Array(r.length),a=c[0][0],o=c[0][1],s=c[1][0],l=c[1][1];return ea(h(r),c).cells.forEach(function(e,t){var n=e.edges,e=e.site;(i[t]=n.length?n.map(function(e){e=e.start();return[e.x,e.y]}):e.x>=a&&e.x<=s&&e.y>=o&&e.y<=l?[[a,l],[s,l],[s,o],[a,o]]:[]).point=r[t]}),i}function h(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/xe)*xe,y:Math.round(i(e,t)/xe)*xe,i:t}})}};var na=[[-1e6,-1e6],[1e6,1e6]];function ra(e){return e.x}function ia(e){return e.y}function aa(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function oa(e,t){e=P.rgb(e),t=P.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,s=t.b-i;return function(e){return"#"+rt(Math.round(n+a*e))+rt(Math.round(r+o*e))+rt(Math.round(i+s*e))}}function sa(e,t){var n,r={},i={};for(n in e)n in t?r[n]=ha(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function la(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function ca(e,r){var t,n,i,a=ua.lastIndex=da.lastIndex=0,o=-1,s=[],l=[];for(e+="",r+="";(t=ua.exec(e))&&(n=da.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(t=t[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:la(t,n)})),a=da.lastIndex;return a<r.length&&(i=r.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}P.geom.delaunay=function(e){return P.geom.voronoi().triangles(e)},P.geom.quadtree=function(e,y,v,b,w){var T,A=yi,k=vi;return(T=arguments.length)?(A=ra,k=ia,3===T&&(w=v,b=y,v=y=0),t(e)):(t.x=function(e){return arguments.length?(A=e,t):A},t.y=function(e){return arguments.length?(k=e,t):k},t.extent=function(e){return arguments.length?(null==e?y=v=b=w=null:(y=+e[0][0],v=+e[0][1],b=+e[1][0],w=+e[1][1]),t):null==y?null:[[y,v],[b,w]]},t.size=function(e){return arguments.length?(null==e?y=v=b=w=null:(y=v=0,b=+e[0],w=+e[1]),t):null==y?null:[b-y,w-v]},t);function t(e){var t,n,r,i,a,o,s,l,c,u=ut(A),d=ut(k);if(null!=y)o=y,s=v,l=b,c=w;else if(l=c=-(o=s=1/0),n=[],r=[],a=e.length,T)for(i=0;i<a;++i)(t=e[i]).x<o&&(o=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>c&&(c=t.y),n.push(t.x),r.push(t.y);else for(i=0;i<a;++i){var h=+u(t=e[i],i),f=+d(t,i);h<o&&(o=h),f<s&&(s=f),l<h&&(l=h),c<f&&(c=f),n.push(h),r.push(f)}var p=l-o,m=c-s;function g(e,t,n,r,i,a,o,s){var l,c,u;isNaN(n)||isNaN(r)||(e.leaf?(l=e.x,c=e.y,null!=l?(D(l-n)+D(c-r)<.01||(u=e.point,e.x=e.y=e.point=null,_(e,u,l,c,i,a,o,s)),_(e,t,n,r,i,a,o,s)):(e.x=n,e.y=r,e.point=t)):_(e,t,n,r,i,a,o,s))}function _(e,t,n,r,i,a,o,s){var l=.5*(i+o),c=.5*(a+s),u=l<=n,d=c<=r,h=d<<1|u;e.leaf=!1,u?i=l:o=l,d?a=c:s=c,g(e=e.nodes[h]||(e.nodes[h]=aa()),t,n,r,i,a,o,s)}m<p?c=s+p:l=o+m;var x=aa();if(x.add=function(e){g(x,e,+u(e,++i),+d(e,i),o,s,l,c)},x.visit=function(e){!function e(t,n,r,i,a,o){{var s,l;t(n,r,i,a,o)||(s=.5*(r+a),l=.5*(i+o),(n=n.nodes)[0]&&e(t,n[0],r,i,s,l),n[1]&&e(t,n[1],s,i,a,l),n[2]&&e(t,n[2],r,l,s,o),n[3]&&e(t,n[3],s,l,a,o))}}(e,x,o,s,l,c)},x.find=function(e){return f=e[0],p=e[1],b=1/0,function e(t,n,r,i,a){if(!(_<n||y<r||i<m||a<g)){var o,s;!(o=t.point)||(s=(s=f-t.x)*s+(s=p-t.y)*s)<b&&(s=Math.sqrt(b=s),m=f-s,g=p-s,_=f+s,y=p+s,v=o);for(var l=t.nodes,c=.5*(n+i),u=.5*(r+a),d=(u<=p)<<1|c<=f,h=d+4;d<h;++d)if(t=l[3&d])switch(3&d){case 0:e(t,n,r,c,u);break;case 1:e(t,c,r,i,u);break;case 2:e(t,n,u,c,a);break;case 3:e(t,c,u,i,a)}}}(x,m=o,g=s,_=l,y=c),v;var f,p,m,g,_,y,v,b},i=-1,null==y){for(;++i<a;)g(x,e[i],n[i],r[i],o,s,l,c);--i}else e.forEach(x.add);return n=r=e=t=null,x}},P.interpolateRgb=oa,P.interpolateObject=sa,P.interpolateNumber=la,P.interpolateString=ca;var ua=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,da=new RegExp(ua.source,"g");function ha(e,t){for(var n,r=P.interpolators.length;0<=--r&&!(n=P.interpolators[r](e,t)););return n}function fa(e,t){for(var n=[],r=[],i=e.length,a=t.length,o=Math.min(e.length,t.length),s=0;s<o;++s)n.push(ha(e[s],t[s]));for(;s<i;++s)r[s]=e[s];for(;s<a;++s)r[s]=t[s];return function(e){for(s=0;s<o;++s)r[s]=n[s](e);return r}}P.interpolate=ha,P.interpolators=[function(e,t){var n=typeof t;return("string"==n?ct.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?oa:ca:t instanceof je?oa:Array.isArray(t)?fa:"object"==n&&isNaN(t)?sa:la)(e,t)}],P.interpolateArray=fa;function pa(){return L}var ma=P.map({linear:pa,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return va},cubic:function(){return ba},sin:function(){return wa},exp:function(){return Ta},circle:function(){return Aa},elastic:function(t,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/Ae*Math.asin(1/t):(t=1,n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*Ae/n)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ka}}),ga=P.map({in:L,out:_a,"in-out":ya,"out-in":function(e){return ya(_a(e))}});function _a(t){return function(e){return 1-t(1-e)}}function ya(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function va(e){return e*e}function ba(e){return e*e*e}function xa(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function wa(e){return 1-Math.cos(e*Me)}function Ta(e){return Math.pow(2,10*(e-1))}function Aa(e){return 1-Math.sqrt(1-e*e)}function ka(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ma(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Sa(e){var t,n,r,i=[e.a,e.b],a=[e.c,e.d],o=Ca(i),s=Ea(i,a),t=Ca(((t=a)[0]+=(r=-s)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Ee,this.translate=[e.e,e.f],this.scale=[o,t],this.skew=t?Math.atan2(s,t)*Ee:0}function Ea(e,t){return e[0]*t[0]+e[1]*t[1]}function Ca(e){var t=Math.sqrt(Ea(e,e));return t&&(e[0]/=t,e[1]/=t),t}P.ease=function(e){var t,n=e.indexOf("-"),r=0<=n?e.slice(0,n):e,n=0<=n?e.slice(n+1):"in",r=ma.get(r)||pa,n=ga.get(n)||L;return t=n(r.apply(null,i.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},P.interpolateHcl=function(e,t){e=P.hcl(e),t=P.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,s=t.l-i;isNaN(o)&&(o=0,r=isNaN(r)?t.c:r);isNaN(a)?(a=0,n=isNaN(n)?t.h:n):180<a?a-=360:a<-180&&(a+=360);return function(e){return Ve(n+a*e,r+o*e,i+s*e)+""}},P.interpolateHsl=function(e,t){e=P.hsl(e),t=P.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,s=t.l-i;isNaN(o)&&(o=0,r=isNaN(r)?t.s:r);isNaN(a)?(a=0,n=isNaN(n)?t.h:n):180<a?a-=360:a<-180&&(a+=360);return function(e){return He(n+a*e,r+o*e,i+s*e)+""}},P.interpolateLab=function(e,t){e=P.lab(e),t=P.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(e){return Ze(n+a*e,r+o*e,i+s*e)+""}},P.interpolateRound=Ma,P.transform=function(e){var n=R.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(e){var t;return null!=e&&(n.setAttribute("transform",e),t=n.transform.baseVal.consolidate()),new Sa(t?t.matrix:La)})(e)},Sa.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var La={a:1,b:0,c:0,d:1,e:0,f:0};function Da(e){return e.length?e.pop()+",":""}function Oa(e,t){var n,r,i,a,o,s=[],l=[];return e=P.transform(e),t=P.transform(t),r=e.translate,i=t.translate,o=s,a=l,r[0]!==i[0]||r[1]!==i[1]?(n=o.push("translate(",null,",",null,")"),a.push({i:n-4,x:la(r[0],i[0])},{i:n-2,x:la(r[1],i[1])})):(i[0]||i[1])&&o.push("translate("+i+")"),a=e.rotate,n=t.rotate,r=s,o=l,a!==n?(180<a-n?n+=360:180<n-a&&(a+=360),o.push({i:r.push(Da(r)+"rotate(",null,")")-2,x:la(a,n)})):n&&r.push(Da(r)+"rotate("+n+")"),i=e.skew,o=t.skew,a=s,r=l,i!==o?r.push({i:a.push(Da(a)+"skewX(",null,")")-2,x:la(i,o)}):o&&a.push(Da(a)+"skewX("+o+")"),n=e.scale,r=t.scale,i=s,a=l,n[0]!==r[0]||n[1]!==r[1]?(o=i.push(Da(i)+"scale(",null,",",null,")"),a.push({i:o-4,x:la(n[0],r[0])},{i:o-2,x:la(n[1],r[1])})):1===r[0]&&1===r[1]||i.push(Da(i)+"scale("+r+")"),e=t=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}function Pa(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Ra(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Ia(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function Na(e){e.fixed|=2}function za(e){e.fixed&=-7}function Fa(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ja(e){e.fixed&=-5}P.interpolateTransform=Oa,P.layout={},P.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(function(e){var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Ia(e),r=Ia(t),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];for(;t!==r;)t=t.parent,i.push(t);var a=i.length;for(;n!==r;)i.splice(a,0,n),n=n.parent;return i}(e[n]));return t}},P.layout.chord=function(){var g,_,y,v,b,x,w,t={},T=0;function e(){var e,t,n,r,i,a={},o=[],s=P.range(v),l=[];for(g=[],_=[],e=0,r=-1;++r<v;){for(t=0,i=-1;++i<v;)t+=y[r][i];o.push(t),l.push(P.range(v)),e+=t}for(b&&s.sort(function(e,t){return b(o[e],o[t])}),x&&l.forEach(function(e,n){e.sort(function(e,t){return x(y[n][e],y[n][t])})}),e=(Ae-T*v)/e,t=0,r=-1;++r<v;){for(n=t,i=-1;++i<v;){var c=s[r],u=l[c][i],d=y[c][u],h=t,f=t+=d*e;a[c+"-"+u]={index:c,subindex:u,startAngle:h,endAngle:f,value:d}}_[c]={index:c,startAngle:n,endAngle:t,value:o[c]},t+=T}for(r=-1;++r<v;)for(i=r-1;++i<v;){var p=a[r+"-"+i],m=a[i+"-"+r];(p.value||m.value)&&g.push(p.value<m.value?{source:m,target:p}:{source:p,target:m})}w&&A()}function A(){g.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(v=(y=e)&&y.length,g=_=null,t):y},t.padding=function(e){return arguments.length?(T=e,g=_=null,t):T},t.sortGroups=function(e){return arguments.length?(b=e,g=_=null,t):b},t.sortSubgroups=function(e){return arguments.length?(x=e,g=null,t):x},t.sortChords=function(e){return arguments.length?(w=e,g&&A(),t):w},t.chords=function(){return g||e(),g},t.groups=function(){return _||e(),_},t},P.layout.force=function(){var d,e,h,f,p,m,i={},g=P.dispatch("start","tick","end"),_=[1,1],y=.9,a=Ba,o=Ha,v=-30,b=Ua,x=.1,w=.64,T=[],A=[];function t(e){e.px=P.event.x,e.py=P.event.y,i.resume()}return i.tick=function(){if((h*=.99)<.005)return d=null,g.end({type:"end",alpha:h=0}),!0;for(var e,t,n,r,i,a,o,s,l=T.length,c=A.length,u=0;u<c;++u)n=(t=A[u]).source,(i=(o=(r=t.target).x-n.x)*o+(s=r.y-n.y)*s)&&(o*=i=h*p[u]*((i=Math.sqrt(i))-f[u])/i,s*=i,r.x-=o*(a=n.weight+r.weight?n.weight/(n.weight+r.weight):.5),r.y-=s*a,n.x+=o*(a=1-a),n.y+=s*a);if((a=h*x)&&(o=_[0]/2,s=_[1]/2,u=-1,a))for(;++u<l;)(t=T[u]).x+=(o-t.x)*a,t.y+=(s-t.y)*a;if(v)for(!function e(t,n,r){var i=0,a=0;t.charge=0;if(!t.leaf)for(var o,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(o=s[c])&&(e(o,n,r),t.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);{var u;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),u=n*r[t.point.index],t.charge+=t.pointCharge=u,i+=u*t.point.x,a+=u*t.point.y)}t.cx=i/t.charge;t.cy=a/t.charge}(e=P.geom.quadtree(T),h,m),u=-1;++u<l;)(t=T[u]).fixed||e.visit(function(s){return function(e,t,n,r){if(e.point!==s){var i,a=e.cx-s.x,o=e.cy-s.y,r=r-t,t=a*a+o*o;if(r*r/w<t)return t<b&&(i=e.charge/t,s.px-=a*i,s.py-=o*i),!0;e.point&&t&&t<b&&(i=e.pointCharge/t,s.px-=a*i,s.py-=o*i)}return!e.charge}}(t));for(u=-1;++u<l;)(t=T[u]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*y,t.y-=(t.py-(t.py=t.y))*y);g.tick({type:"tick",alpha:h})},i.nodes=function(e){return arguments.length?(T=e,i):T},i.links=function(e){return arguments.length?(A=e,i):A},i.size=function(e){return arguments.length?(_=e,i):_},i.linkDistance=function(e){return arguments.length?(a="function"==typeof e?e:+e,i):a},i.distance=i.linkDistance,i.linkStrength=function(e){return arguments.length?(o="function"==typeof e?e:+e,i):o},i.friction=function(e){return arguments.length?(y=+e,i):y},i.charge=function(e){return arguments.length?(v="function"==typeof e?e:+e,i):v},i.chargeDistance=function(e){return arguments.length?(b=e*e,i):Math.sqrt(b)},i.gravity=function(e){return arguments.length?(x=+e,i):x},i.theta=function(e){return arguments.length?(w=e*e,i):Math.sqrt(w)},i.alpha=function(e){return arguments.length?(e=+e,h?0<e?h=e:(d.c=null,d.t=NaN,d=null,g.end({type:"end",alpha:h=0})):0<e&&(g.start({type:"start",alpha:h=e}),d=yt(i.tick)),i):h},i.start=function(){for(var s,e,l=T.length,c=A.length,t=_[0],n=_[1],u=0;u<l;++u)(e=T[u]).index=u,e.weight=0;for(u=0;u<c;++u)"number"==typeof(e=A[u]).source&&(e.source=T[e.source]),"number"==typeof e.target&&(e.target=T[e.target]),++e.source.weight,++e.target.weight;for(u=0;u<l;++u)e=T[u],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(f=[],"function"==typeof a)for(u=0;u<c;++u)f[u]=+a.call(this,A[u],u);else for(u=0;u<c;++u)f[u]=a;if(p=[],"function"==typeof o)for(u=0;u<c;++u)p[u]=+o.call(this,A[u],u);else for(u=0;u<c;++u)p[u]=o;if(m=[],"function"==typeof v)for(u=0;u<l;++u)m[u]=+v.call(this,T[u],u);else for(u=0;u<l;++u)m[u]=v;function r(e,t){if(!s){for(s=new Array(l),a=0;a<l;++a)s[a]=[];for(a=0;a<c;++a){var n=A[a];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var r,i=s[u],a=-1,o=i.length;++a<o;)if(!isNaN(r=i[a][e]))return r;return Math.random()*t}return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(e=e||P.behavior.drag().origin(L).on("dragstart.force",Na).on("drag.force",t).on("dragend.force",za),!arguments.length)return e;this.on("mouseover.force",Fa).on("mouseout.force",ja).call(e)},P.rebind(i,g,"on")};var Ba=20,Ha=1,Ua=1/0;function Va(e,t){return P.rebind(e,t,"sort","children","value"),(e.nodes=e).links=Za,e}function qa(e,t){for(var n,r,i=[e];null!=(e=i.pop());)if(t(e),(r=e.children)&&(n=r.length))for(;0<=--n;)i.push(r[n])}function Ya(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function Ga(e){return e.children}function Wa(e){return e.value}function Xa(e,t){return t.value-e.value}function Za(e){return P.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}P.layout.hierarchy=function(){var s=Xa,l=Ga,c=Wa;function u(e){var t,n,r,i,a=[e],o=[];for(e.depth=0;null!=(t=a.pop());)if(o.push(t),(r=l.call(u,t,t.depth))&&(n=r.length)){for(;0<=--n;)a.push(i=r[n]),i.parent=t,i.depth=t.depth+1;c&&(t.value=0),t.children=r}else c&&(t.value=+c.call(u,t,t.depth)||0),delete t.children;return Ya(e,function(e){var t,n;s&&(t=e.children)&&t.sort(s),c&&(n=e.parent)&&(n.value+=e.value)}),o}return u.sort=function(e){return arguments.length?(s=e,u):s},u.children=function(e){return arguments.length?(l=e,u):l},u.value=function(e){return arguments.length?(c=e,u):c},u.revalue=function(e){return c&&(qa(e,function(e){e.children&&(e.value=0)}),Ya(e,function(e){var t;e.children||(e.value=+c.call(u,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},u},P.layout.partition=function(){var n=P.layout.hierarchy(),r=[1,1];function t(e,t){t=n.call(this,e,t);return function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=a[l],n,s=s.value*r,i),n+=s}}(t[0],0,r[0],r[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}(t[0])),t}return t.size=function(e){return arguments.length?(r=e,t):r},Va(t,n)},P.layout.pie=function(){var d=Number,h=Ja,f=0,p=Ae,m=0;function g(n){var t,e=n.length,r=n.map(function(e,t){return+d.call(g,e,t)}),i=+("function"==typeof f?f.apply(this,arguments):f),a=("function"==typeof p?p.apply(this,arguments):p)-i,o=Math.min(Math.abs(a)/e,+("function"==typeof m?m.apply(this,arguments):m)),s=o*(a<0?-1:1),l=P.sum(r),c=l?(a-e*s)/l:0,e=P.range(e),u=[];return null!=h&&e.sort(h===Ja?function(e,t){return r[t]-r[e]}:function(e,t){return h(n[e],n[t])}),e.forEach(function(e){u[e]={data:n[e],value:t=r[e],startAngle:i,endAngle:i+=t*c+s,padAngle:o}}),u}return g.value=function(e){return arguments.length?(d=e,g):d},g.sort=function(e){return arguments.length?(h=e,g):h},g.startAngle=function(e){return arguments.length?(f=e,g):f},g.endAngle=function(e){return arguments.length?(p=e,g):p},g.padAngle=function(e){return arguments.length?(m=e,g):m},g};var Ja={};function $a(e){return e.x}function Qa(e){return e.y}function Ka(e,t,n){e.y0=t,e.y=n}P.layout.stack=function(){var d=L,h=no,f=ro,p=Ka,m=$a,g=Qa;function _(e,t){if(!(n=e.length))return e;for(var n,r,i,a=(s=e.map(function(e,t){return d.call(_,e,t)})).map(function(e){return e.map(function(e,t){return[m.call(_,e,t),g.call(_,e,t)]})}),o=h.call(_,a,t),s=P.permute(s,o),a=P.permute(a,o),l=f.call(_,a,t),c=s[0].length,u=0;u<c;++u)for(p.call(_,s[0][u],i=l[u],a[0][u][1]),r=1;r<n;++r)p.call(_,s[r][u],i+=a[r-1][u][1],a[r][u][1]);return e}return _.values=function(e){return arguments.length?(d=e,_):d},_.order=function(e){return arguments.length?(h="function"==typeof e?e:eo.get(e)||no,_):h},_.offset=function(e){return arguments.length?(f="function"==typeof e?e:to.get(e)||ro,_):f},_.x=function(e){return arguments.length?(m=e,_):m},_.y=function(e){return arguments.length?(g=e,_):g},_.out=function(e){return arguments.length?(p=e,_):p},_};var eo=P.map({"inside-out":function(e){for(var t,n=e.length,r=e.map(io),i=e.map(ao),a=P.range(n).sort(function(e,t){return r[e]-r[t]}),o=0,s=0,l=[],c=[],u=0;u<n;++u)t=a[u],o<s?(o+=i[t],l.push(t)):(s+=i[t],c.push(t));return c.reverse().concat(l)},reverse:function(e){return P.range(e.length).reverse()},default:no}),to=P.map({silhouette:function(e){for(var t,n,r=e.length,i=e[0].length,a=[],o=0,s=[],l=0;l<i;++l){for(n=t=0;t<r;t++)n+=e[t][l][1];o<n&&(o=n),a.push(n)}for(l=0;l<i;++l)s[l]=(o-a[l])/2;return s},wiggle:function(e){var t,n,r,i,a,o,s,l,c,u=e.length,d=e[0],h=d.length,f=[];for(f[0]=l=c=0,n=1;n<h;++n){for(i=t=0;t<u;++t)i+=e[t][n][1];for(s=d[n][a=t=0]-d[n-1][0];t<u;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}f[n]=l-=i?a/i*s:0,l<c&&(c=l)}for(n=0;n<h;++n)f[n]-=c;return f},expand:function(e){for(var t,n,r=e.length,i=e[0].length,a=1/r,o=[],s=0;s<i;++s){for(n=t=0;t<r;t++)n+=e[t][s][1];if(n)for(t=0;t<r;t++)e[t][s][1]/=n;else for(t=0;t<r;t++)e[t][s][1]=a}for(s=0;s<i;++s)o[s]=0;return o},zero:ro});function no(e){return P.range(e.length)}function ro(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function io(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function ao(e){return e.reduce(oo,0)}function oo(e,t){return e+t[1]}function so(e,t){return lo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function lo(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function co(e){return[P.min(e),P.max(e)]}function uo(e,t){return e.value-t.value}function ho(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function fo(e,t){(e._pack_next=t)._pack_prev=e}function po(e,t){var n=t.x-e.x,r=t.y-e.y,t=e.r+t.r;return n*n+r*r<.999*t*t}function mo(e){if((t=e.children)&&(o=t.length)){var t,n,r,i,a,o,s=1/0,l=-1/0,c=1/0,u=-1/0;if(t.forEach(go),(n=t[0]).x=-n.r,n.y=0,v(n),1<o&&((r=t[1]).x=r.r,r.y=0,v(r),2<o))for(yo(n,r,i=t[2]),v(i),ho(n,i),ho(n._pack_prev=i,r),r=n._pack_next,y=3;y<o;y++){yo(n,r,i=t[y]);for(var d=0,h=1,f=1,p=r._pack_next;p!==r;p=p._pack_next,h++)if(po(p,i)){d=1;break}if(1==d)for(a=n._pack_prev;a!==p._pack_prev&&!po(a,i);a=a._pack_prev,f++);d?(h<f||h==f&&r.r<n.r?fo(n,r=p):fo(n=a,r),y--):(ho(n,i),v(r=i))}for(var m=(s+l)/2,g=(c+u)/2,_=0,y=0;y<o;y++)(i=t[y]).x-=m,i.y-=g,_=Math.max(_,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=_,t.forEach(_o)}function v(e){s=Math.min(e.x-e.r,s),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}}function go(e){e._pack_next=e._pack_prev=e}function _o(e){delete e._pack_next,delete e._pack_prev}function yo(e,t,n){var r,i,a=e.r+n.r,o=t.x-e.x,s=t.y-e.y;a&&(o||s)?(r=t.r+n.r,t=.5+((a*=a)-(r*=r))/(2*(i=o*o+s*s)),i=Math.sqrt(Math.max(0,2*r*(a+i)-(a-=i)*a-r*r))/(2*i),n.x=e.x+t*o+i*s,n.y=e.y+t*s-i*o):(n.x=e.x+a,n.y=e.y)}function vo(e,t){return e.parent==t.parent?1:2}function bo(e){var t=e.children;return t.length?t[0]:e.t}function xo(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function wo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function To(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],t=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),t<0&&(r+=t/2,t=0),{x:n,y:r,dx:i,dy:t}}function Ao(e){var t=e[0],e=e[e.length-1];return t<e?[t,e]:[e,t]}function ko(e){return e.rangeExtent?e.rangeExtent():Ao(e.range())}function Mo(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function So(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Eo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Co}P.layout.histogram=function(){var d=!0,h=Number,f=co,p=so;function n(e,t){for(var n,r,i=[],a=e.map(h,this),o=f.call(this,a,t),s=p.call(this,o,a,t),t=-1,l=a.length,c=s.length-1,u=d?1:1/l;++t<c;)(n=i[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<c)for(t=-1;++t<l;)(r=a[t])>=o[0]&&r<=o[1]&&((n=i[P.bisect(s,r,1,c)-1]).y+=u,n.push(e[t]));return i}return n.value=function(e){return arguments.length?(h=e,n):h},n.range=function(e){return arguments.length?(f=ut(e),n):f},n.bins=function(t){return arguments.length?(p="number"==typeof t?function(e){return lo(e,t)}:ut(t),n):p},n.frequency=function(e){return arguments.length?(d=!!e,n):d},n},P.layout.pack=function(){var o,s=P.layout.hierarchy().sort(uo),l=0,c=[1,1];function t(e,t){var n,r=s.call(this,e,t),i=r[0],e=c[0],t=c[1],a=null==o?Math.sqrt:"function"==typeof o?o:function(){return o};return i.x=i.y=0,Ya(i,function(e){e.r=+a(e.value)}),Ya(i,mo),l&&(n=l*(o?1:Math.max(2*i.r/e,2*i.r/t))/2,Ya(i,function(e){e.r+=n}),Ya(i,mo),Ya(i,function(e){e.r-=n})),function e(t,n,r,i){var a=t.children;t.x=n+=i*t.x;t.y=r+=i*t.y;t.r*=i;if(a)for(var o=-1,s=a.length;++o<s;)e(a[o],n,r,i)}(i,e/2,t/2,o?1:1/Math.max(2*i.r/e,2*i.r/t)),r}return t.size=function(e){return arguments.length?(c=e,t):c},t.radius=function(e){return arguments.length?(o=null==e||"function"==typeof e?e:+e,t):o},t.padding=function(e){return arguments.length?(l=+e,t):l},Va(t,s)},P.layout.tree=function(){var c=P.layout.hierarchy().sort(null).value(null),h=vo,u=[1,1],d=null;function t(e,t){var n,r,i,a,o,s,l=c.call(this,e,t),e=l[0],t=function(e){var t,e={A:null,children:[e]},n=[e];for(;null!=(t=n.pop());)for(var r,i=t.children,a=0,o=i.length;a<o;++a)n.push((i[a]=r={_:i[a],parent:t,children:(r=i[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return e.children[0]}(e);return Ya(t,f),t.parent.m=-t.z,qa(t,p),d?qa(e,m):(qa(i=r=n=e,function(e){e.x<n.x&&(n=e),e.x>r.x&&(r=e),e.depth>i.depth&&(i=e)}),a=h(n,r)/2-n.x,o=u[0]/(r.x+h(r,n)/2+a),s=u[1]/(i.depth||1),qa(e,function(e){e.x=(e.x+a)*o,e.y=e.depth*s})),l}function f(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;t.length?(function(e){var t,n=0,r=0,i=e.children,a=i.length;for(;0<=--a;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e),t=(t[0].z+t[t.length-1].z)/2,r?(e.z=r.z+h(e._,r._),e.m=e.z-t):e.z=t):r&&(e.z=r.z+h(e._,r._)),e.parent.A=function(e,t,n){if(t){for(var r,i=e,a=e,o=t,s=i.parent.children[0],l=i.m,c=a.m,u=o.m,d=s.m;o=xo(o),i=bo(i),o&&i;)s=bo(s),(a=xo(a)).a=e,0<(r=o.z+u-i.z-l+h(o._,i._))&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}(function(e,t,n){return e.a.parent===t.parent?e.a:n}(o,e,n),e,r),l+=r,c+=r),u+=o.m,l+=i.m,d+=s.m,c+=a.m;o&&!xo(a)&&(a.t=o,a.m+=u-c),i&&!bo(s)&&(s.t=i,s.m+=l-d,n=e)}return n}(e,r,e.parent.A||n[0])}function p(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=u[0],e.y=e.depth*u[1]}return t.separation=function(e){return arguments.length?(h=e,t):h},t.size=function(e){return arguments.length?(d=null==(u=e)?m:null,t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null==(u=e)?null:m,t):d?u:null},Va(t,c)},P.layout.cluster=function(){var l=P.layout.hierarchy().sort(null).value(null),c=vo,u=[1,1],d=!1;function t(e,t){var r,n=l.call(this,e,t),i=n[0],a=0;Ya(i,function(e){var t,n=e.children;n&&n.length?(e.x=(t=n).reduce(function(e,t){return e+t.x},0)/t.length,e.y=1+P.max(n,function(e){return e.y})):(e.x=r?a+=c(e,r):0,e.y=0,r=e)});var e=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(i),t=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(i),o=e.x-c(e,t)/2,s=t.x+c(t,e)/2;return Ya(i,d?function(e){e.x=(e.x-i.x)*u[0],e.y=(i.y-e.y)*u[1]}:function(e){e.x=(e.x-o)/(s-o)*u[0],e.y=(1-(i.y?e.y/i.y:1))*u[1]}),n}return t.separation=function(e){return arguments.length?(c=e,t):c},t.size=function(e){return arguments.length?(d=null==(u=e),t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null!=(u=e),t):d?u:null},Va(t,l)},P.layout.treemap=function(){var n,r=P.layout.hierarchy(),u=Math.round,i=[1,1],a=null,c=wo,o=!1,d="squarify",h=.5*(1+Math.sqrt(5));function f(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function p(e){var t=e.children;if(t&&t.length){var n,r,i=c(e),a=[],o=t.slice(),s=1/0,l="slice"===d?i.dx:"dice"===d?i.dy:"slice-dice"===d?1&e.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(f(o,i.dx*i.dy/e.value),a.area=0;0<(r=o.length);)a.push(r=o[r-1]),a.area+=r.area,s="squarify"!==d||(n=function(e,t){var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;for(;++o<s;)(n=e[o].area)&&(n<a&&(a=n),i<n&&(i=n));return t*=t,(r*=r)?Math.max(t*i*h/r,r/(t*a*h)):1/0}(a,l))<=s?(o.pop(),n):(a.area-=a.pop().area,m(a,l,i,!1),l=Math.min(i.dx,i.dy),1/(a.length=a.area=0));a.length&&(m(a,l,i,!0),a.length=a.area=0),t.forEach(p)}}function s(e){var t=e.children;if(t&&t.length){var n,r=c(e),i=t.slice(),a=[];for(f(i,r.dx*r.dy/e.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(m(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);t.forEach(s)}}function m(e,t,n,r){var i,a=-1,o=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)(i=e[a]).x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)(i=e[a]).x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function l(e){var t=n||r(e),e=t[0];return e.x=e.y=0,e.value?(e.dx=i[0],e.dy=i[1]):e.dx=e.dy=0,n&&r.revalue(e),f([e],e.dx*e.dy/e.value),(n?s:p)(e),o&&(n=t),t}return l.size=function(e){return arguments.length?(i=e,l):i},l.padding=function(n){return arguments.length?(c=null==(a=n)?wo:"function"==(t=typeof n)?function(e){var t=n.call(l,e,e.depth);return null==t?wo(e):To(e,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(n=[n,n,n,n]),e),l):a;function e(e){return To(e,n)}var t},l.round=function(e){return arguments.length?(u=e?Math.round:Number,l):u!=Number},l.sticky=function(e){return arguments.length?(o=e,n=null,l):o},l.ratio=function(e){return arguments.length?(h=e,l):h},l.mode=function(e){return arguments.length?(d=e+"",l):d},Va(l,r)},P.random={normal:function(r,i){var e=arguments.length;return e<2&&(i=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+i*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=P.random.normal.apply(P,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=P.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},P.scale={};var Co={floor:L,ceil:L};function Lo(n,e,t,r){var i=[],a=[],o=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(t(n[o-1],n[o])),a.push(r(e[o-1],e[o]));return function(e){var t=P.bisect(n,e,1,s)-1;return a[t](i[t](e))}}function Do(e,t){return P.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Oo(e,t){return So(e,Eo(Po(e,t)[2])),So(e,Eo(Po(e,t)[2])),e}function Po(e,t){null==t&&(t=10);var n=Ao(e),r=n[1]-n[0],e=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),r=t/r*e;return r<=.15?e*=10:r<=.35?e*=5:r<=.75&&(e*=2),n[0]=Math.ceil(n[0]/e)*e,n[1]=Math.floor(n[1]/e)*e+.5*e,n[2]=e,n}function Ro(e,t){return P.range.apply(P,Po(e,t))}function Io(e,t,n){var r,i=Po(e,t);if(n){var a=At.exec(n);if(a.shift(),"s"===a[8]){var o=P.formatPrefix(Math.max(D(i[0]),D(i[1])));return a[7]||(a[7]="."+zo(o.scale(i[2]))),a[8]="f",n=P.format(a.join("")),function(e){return n(o.scale(e))+o.symbol}}a[7]||(a[7]="."+(r=a[8],t=zo((e=i)[2]),r in No?Math.abs(t-zo(Math.max(D(e[0]),D(e[1]))))+ +("e"!==r):t-2*("%"===r))),n=a.join("")}else n=",."+zo(i[2])+"f";return P.format(n)}P.scale.linear=function(){return function e(n,r,i,a){var o,s;function t(){var e=2<Math.min(n.length,r.length)?Lo:Mo,t=a?Ra:Pa;return o=e(n,r,t,i),s=e(r,n,t,ha),l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(Ma)};l.clamp=function(e){return arguments.length?(a=e,t()):a};l.interpolate=function(e){return arguments.length?(i=e,t()):i};l.ticks=function(e){return Ro(n,e)};l.tickFormat=function(e,t){return Io(n,e,t)};l.nice=function(e){return Oo(n,e),t()};l.copy=function(){return e(n,r,i,a)};return t()}([0,1],[0,1],ha,!1)};var No={s:1,g:1,p:1,r:1,e:1};function zo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}P.scale.log=function(){return function e(t,l,c,u){function d(e){return(c?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function h(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function i(e){return t(d(e))}i.invert=function(e){return h(t.invert(e))};i.domain=function(e){return arguments.length?(c=0<=e[0],t.domain((u=e.map(Number)).map(d)),i):u};i.base=function(e){return arguments.length?(l=+e,t.domain(u.map(d)),i):l};i.nice=function(){var e=So(u.map(d),c?Math:jo);return t.domain(e),u=e.map(h),i};i.ticks=function(){var e=Ao(u),t=[],n=e[0],r=e[1],i=Math.floor(d(n)),a=Math.ceil(d(r)),o=l%1?2:l;if(isFinite(a-i)){if(c){for(;i<a;i++)for(var s=1;s<o;s++)t.push(h(i)*s);t.push(h(i))}else for(t.push(h(i));i++<a;)for(s=o-1;0<s;s--)t.push(h(i)*s);for(i=0;t[i]<n;i++);for(a=t.length;t[a-1]>r;a--);t=t.slice(i,a)}return t};i.tickFormat=function(e,n){if(!arguments.length)return Fo;arguments.length<2?n=Fo:"function"!=typeof n&&(n=P.format(n));var r=Math.max(1,l*e/i.ticks().length);return function(e){var t=e/h(Math.round(d(e)));return t*l<l-.5&&(t*=l),t<=r?n(e):""}};i.copy=function(){return e(t.copy(),l,c,u)};return Do(i,t)}(P.scale.linear().domain([0,1]),10,!0,[1,10])};var Fo=P.format(".0e"),jo={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Bo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}P.scale.pow=function(){return function e(t,n,r){var i=Bo(n),a=Bo(1/n);function o(e){return t(i(e))}o.invert=function(e){return a(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(i)),o):r};o.ticks=function(e){return Ro(r,e)};o.tickFormat=function(e,t){return Io(r,e,t)};o.nice=function(e){return o.domain(Oo(r,e))};o.exponent=function(e){return arguments.length?(i=Bo(n=e),a=Bo(1/n),t.domain(r.map(i)),o):n};o.copy=function(){return e(t.copy(),n,r)};return Do(o,t)}(P.scale.linear(),1,[0,1])},P.scale.sqrt=function(){return P.scale.pow().exponent(.5)},P.scale.ordinal=function(){return function e(s,l){var i,c,u;function d(e){return c[((i.get(e)||("range"===l.t?i.set(e,s.push(e)):NaN))-1)%c.length]}function h(t,n){return P.range(s.length).map(function(e){return t+n*e})}d.domain=function(e){if(!arguments.length)return s;s=[],i=new y;for(var t,n=-1,r=e.length;++n<r;)i.has(t=e[n])||i.set(t,s.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(c=e,u=0,l={t:"range",a:arguments},d):c};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],r=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+t);return c=h(n+r*t/2,r),u=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],i=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+t)|0;return c=h(n+Math.round(i*t/2+(r-n-(s.length-1+t)*i)/2),i),u=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],i=e[+r],a=e[1-r],a=(a-i)/(s.length-t+2*n);return c=h(i+a*n,a),r&&c.reverse(),u=a*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],i=e[+r],a=e[1-r],o=Math.floor((a-i)/(s.length-t+2*n));return c=h(i+Math.round((a-i-(s.length-t)*o)/2),o),r&&c.reverse(),u=Math.round(o*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return u};d.rangeExtent=function(){return Ao(l.a[0])};d.copy=function(){return e(s,l)};return d.domain(s)}([],{t:"range",a:[[]]})},P.scale.category10=function(){return P.scale.ordinal().range(Ho)},P.scale.category20=function(){return P.scale.ordinal().range(Uo)},P.scale.category20b=function(){return P.scale.ordinal().range(Vo)},P.scale.category20c=function(){return P.scale.ordinal().range(qo)};var Ho=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nt),Uo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nt),Vo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nt),qo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nt);function Yo(){return 0}P.scale.quantile=function(){return function e(n,r){var i;function t(){var e=0,t=r.length;for(i=[];++e<t;)i[e-1]=P.quantile(n,e/t);return a}function a(e){if(!isNaN(e=+e))return r[P.bisect(i,e)]}a.domain=function(e){return arguments.length?(n=e.map(c).filter(u).sort(l),t()):n};a.range=function(e){return arguments.length?(r=e,t()):r};a.quantiles=function(){return i};a.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]};a.copy=function(){return e(n,r)};return t()}([],[])},P.scale.quantize=function(){return function e(t,n,r){var i,a;function o(e){return r[Math.max(0,Math.min(a,Math.floor(i*(e-t))))]}function s(){return i=r.length/(n-t),a=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};o.range=function(e){return arguments.length?(r=e,s()):r};o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/i+t,e+1/i]};o.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},P.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[P.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},P.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return Ro(n,e)};t.tickFormat=function(e,t){return Io(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},P.svg={},P.svg.arc=function(){var M=Wo,S=Xo,E=Yo,C=Go,L=Zo,D=Jo,O=$o;function t(){var e=Math.max(0,+M.apply(this,arguments)),t=Math.max(0,+S.apply(this,arguments)),n=L.apply(this,arguments)-Me,r=D.apply(this,arguments)-Me,i=Math.abs(r-n),a=r<n?0:1;if(t<e&&(o=t,t=e,e=o),ke<=i)return P(t,a)+(e?P(e,1-a):"")+"Z";var o,s,l,c,u,d,h,f,p,m,g,_,y,v,b,x,w,T=0,A=0,k=[];return(l=(+O.apply(this,arguments)||0)/2)&&(s=C===Go?Math.sqrt(e*e+t*t):+C.apply(this,arguments),a||(A*=-1),t&&(A=Oe(s/t*Math.sin(l))),e&&(T=Oe(s/e*Math.sin(l)))),t?(d=t*Math.cos(n+A),h=t*Math.sin(n+A),f=t*Math.cos(r-A),c=t*Math.sin(r-A),u=Math.abs(r-n-2*A)<=Te?0:1,A&&Qo(d,h,f,c)===a^u&&(x=(n+r)/2,d=t*Math.cos(x),h=t*Math.sin(x),f=c=null)):d=h=0,e?(g=e*Math.cos(r-T),_=e*Math.sin(r-T),y=e*Math.cos(n+T),p=e*Math.sin(n+T),m=Math.abs(n-r+2*T)<=Te?0:1,T&&Qo(g,_,y,p)===1-a^m&&(v=(n+r)/2,g=e*Math.cos(v),_=e*Math.sin(v),y=p=null)):g=_=0,xe<i&&.001<(o=Math.min(Math.abs(t-e)/2,+E.apply(this,arguments)))?(A=e<t^a?0:1,T=x=o,i<Te&&(r=d-(n=null==y?[g,_]:null==f?[d,h]:Ai([d,h],[y,p],[f,c],[g,_]))[0],v=h-n[1],i=f-n[0],b=c-n[1],b=1/Math.sin(Math.acos((r*i+v*b)/(Math.sqrt(r*r+v*v)*Math.sqrt(i*i+b*b)))/2),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),T=Math.min(o,(e-n)/(b-1)),x=Math.min(o,(t-n)/(1+b))),null!=f?(b=Ko(null==y?[g,_]:[y,p],[d,h],t,x,a),w=Ko([f,c],[g,_],t,x,a),o===x?k.push("M",b[0],"A",x,",",x," 0 0,",A," ",b[1],"A",t,",",t," 0 ",1-a^Qo(b[1][0],b[1][1],w[1][0],w[1][1]),",",a," ",w[1],"A",x,",",x," 0 0,",A," ",w[0]):k.push("M",b[0],"A",x,",",x," 0 1,",A," ",w[0])):k.push("M",d,",",h),null!=y?(x=Ko([d,h],[y,p],e,-T,a),w=Ko([g,_],null==f?[d,h]:[f,c],e,-T,a),o===T?k.push("L",w[0],"A",T,",",T," 0 0,",A," ",w[1],"A",e,",",e," 0 ",a^Qo(w[1][0],w[1][1],x[1][0],x[1][1]),",",1-a," ",x[1],"A",T,",",T," 0 0,",A," ",x[0]):k.push("L",w[0],"A",T,",",T," 0 0,",A," ",x[0])):k.push("L",g,",",_)):(k.push("M",d,",",h),null!=f&&k.push("A",t,",",t," 0 ",u,",",a," ",f,",",c),k.push("L",g,",",_),null!=y&&k.push("A",e,",",e," 0 ",m,",",1-a," ",y,",",p)),k.push("Z"),k.join("")}function P(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(M=ut(e),t):M},t.outerRadius=function(e){return arguments.length?(S=ut(e),t):S},t.cornerRadius=function(e){return arguments.length?(E=ut(e),t):E},t.padRadius=function(e){return arguments.length?(C=e==Go?Go:ut(e),t):C},t.startAngle=function(e){return arguments.length?(L=ut(e),t):L},t.endAngle=function(e){return arguments.length?(D=ut(e),t):D},t.padAngle=function(e){return arguments.length?(O=ut(e),t):O},t.centroid=function(){var e=(+M.apply(this,arguments)+ +S.apply(this,arguments))/2,t=(+L.apply(this,arguments)+ +D.apply(this,arguments))/2-Me;return[Math.cos(t)*e,Math.sin(t)*e]},t};var Go="auto";function Wo(e){return e.innerRadius}function Xo(e){return e.outerRadius}function Zo(e){return e.startAngle}function Jo(e){return e.endAngle}function $o(e){return e&&e.padAngle}function Qo(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Ko(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=e[0]+l,d=e[1]+c,h=t[0]+l,f=t[1]+c,i=(u+h)/2,o=(d+f)/2,s=h-u,a=f-d,e=s*s+a*a,t=n-r,r=u*f-h*d,u=(a<0?-1:1)*Math.sqrt(Math.max(0,t*t*e-r*r)),f=(r*a-s*u)/e,h=(-r*s-a*u)/e,d=(r*a+s*u)/e,a=(-r*s+a*u)/e,u=f-i,e=h-o,i=d-i,o=a-o;return i*i+o*o<u*u+e*e&&(f=d,h=a),[[f-l,h-c],[f*n/t,h*n/t]]}function es(c){var u=yi,d=vi,h=cr,f=ns,t=f.key,p=.7;function n(e){var t,n=[],r=[],i=-1,a=e.length,o=ut(u),s=ut(d);function l(){n.push("M",f(c(r),p))}for(;++i<a;)h.call(this,t=e[i],i)?r.push([+o.call(this,t,i),+s.call(this,t,i)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(u=e,n):u},n.y=function(e){return arguments.length?(d=e,n):d},n.defined=function(e){return arguments.length?(h=e,n):h},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?f=e:(f=ts.get(e)||ns).key,n):t},n.tension=function(e){return arguments.length?(p=e,n):p},n}P.svg.line=function(){return es(L)};var ts=P.map({linear:ns,"linear-closed":rs,step:function(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];for(;++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&i.push("H",r[0]);return i.join("")},"step-before":is,"step-after":as,basis:ls,"basis-open":function(e){if(e.length<4)return ns(e);var t,n=[],r=-1,i=e.length,a=[0],o=[0];for(;++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);n.push(cs(hs,a)+","+cs(hs,o)),--r;for(;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),fs(n,a,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];for(;++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);t=[cs(hs,o),",",cs(hs,s)],--r;for(;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),fs(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,c=-1;++c<=n;)r=e[c],i=c/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*l);return ls(e)},cardinal:function(e,t){return e.length<3?ns(e):e[0]+os(e,ss(e,t))},"cardinal-open":function(e,t){return e.length<4?ns(e):e[1]+os(e.slice(1,-1),ss(e,t))},"cardinal-closed":function(e,t){return e.length<3?rs(e):e[0]+os((e.push(e[0]),e),ss([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?ns(e):e[0]+os(e,function(e){var t,n,r,i,a=[],o=function(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=ps(i,a);for(;++t<n;)r[t]=(o+(o=ps(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=ps(e[s],e[s+1]),D(t)<xe?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,9<(i=n*n+r*r)&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));s=-1;for(;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(e))}});function ns(e){return 1<e.length?e.join("L"):e+"Z"}function rs(e){return e.join("L")+"Z"}function is(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function as(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function os(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ns(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),1<t.length){s=t[1],a=e[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,l++)a=e[l],s=t[c],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}return n&&(n=e[l],r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+n[0]+","+n[1]),r}function ss(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function ls(e){if(e.length<3)return ns(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",cs(hs,o),",",cs(hs,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),fs(l,o,s);return e.pop(),l.push("L",r),l.join("")}function cs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ts.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var us=[0,2/3,1/3,0],ds=[0,1/3,2/3,0],hs=[0,1/6,2/3,1/6];function fs(e,t,n){e.push("C",cs(us,t),",",cs(us,n),",",cs(ds,t),",",cs(ds,n),",",cs(hs,t),",",cs(hs,n))}function ps(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ms(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]-Me,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function gs(p){var m=yi,g=yi,_=0,y=vi,v=cr,b=ns,t=b.key,x=b,w="L",T=.7;function n(e){var t,n,r,i=[],a=[],o=[],s=-1,l=e.length,c=ut(m),u=ut(_),d=m===g?function(){return n}:ut(g),h=_===y?function(){return r}:ut(y);function f(){i.push("M",b(p(o),T),w,x(p(a.reverse()),T),"Z")}for(;++s<l;)v.call(this,t=e[s],s)?(a.push([n=+c.call(this,t,s),r=+u.call(this,t,s)]),o.push([+d.call(this,t,s),+h.call(this,t,s)])):a.length&&(f(),a=[],o=[]);return a.length&&f(),i.length?i.join(""):null}return n.x=function(e){return arguments.length?(m=g=e,n):g},n.x0=function(e){return arguments.length?(m=e,n):m},n.x1=function(e){return arguments.length?(g=e,n):g},n.y=function(e){return arguments.length?(_=y=e,n):y},n.y0=function(e){return arguments.length?(_=e,n):_},n.y1=function(e){return arguments.length?(y=e,n):y},n.defined=function(e){return arguments.length?(v=e,n):v},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?b=e:(b=ts.get(e)||ns).key,x=b.reverse||b,w=b.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(T=e,n):T},n}function _s(e){return e.radius}function ys(e){return[e.x,e.y]}function vs(){return 64}function bs(){return"circle"}function xs(e){e=Math.sqrt(e/Te);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}P.svg.line.radial=function(){var e=es(ms);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(is.reverse=as).reverse=is,P.svg.area=function(){return gs(L)},P.svg.area.radial=function(){var e=gs(ms);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},P.svg.chord=function(){var i=ii,a=ai,o=_s,s=Zo,l=Jo;function t(e,t){var n=c(this,i,e,t),r=c(this,a,e,t);return"M"+n.p0+u(n.r,n.p1,n.a1-n.a0)+(e=r,(t=n).a0==e.a0&&t.a1==e.a1?d(n.r,n.p1,n.r,n.p0):d(n.r,n.p1,r.r,r.p0)+u(r.r,r.p1,r.a1-r.a0)+d(r.r,r.p1,n.r,n.p0))+"Z"}function c(e,t,n,r){var i=t.call(e,n,r),t=o.call(e,i,r),n=s.call(e,i,r)-Me,r=l.call(e,i,r)-Me;return{r:t,a0:n,a1:r,p0:[t*Math.cos(n),t*Math.sin(n)],p1:[t*Math.cos(r),t*Math.sin(r)]}}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(Te<n)+",1 "+t}function d(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(o=ut(e),t):o},t.source=function(e){return arguments.length?(i=ut(e),t):i},t.target=function(e){return arguments.length?(a=ut(e),t):a},t.startAngle=function(e){return arguments.length?(s=ut(e),t):s},t.endAngle=function(e){return arguments.length?(l=ut(e),t):l},t},P.svg.diagonal=function(){var r=ii,i=ai,a=ys;function t(e,t){var n=r.call(this,e,t),e=i.call(this,e,t),t=(n.y+e.y)/2,e=[n,{x:n.x,y:t},{x:e.x,y:t},e];return"M"+(e=e.map(a))[0]+"C"+e[1]+" "+e[2]+" "+e[3]}return t.source=function(e){return arguments.length?(r=ut(e),t):r},t.target=function(e){return arguments.length?(i=ut(e),t):i},t.projection=function(e){return arguments.length?(a=e,t):a},t},P.svg.diagonal.radial=function(){var e=P.svg.diagonal(),t=ys,r=e.projection;return e.projection=function(e){return arguments.length?r((n=t=e,function(){var e=n.apply(this,arguments),t=e[0],e=e[1]-Me;return[t*Math.cos(e),t*Math.sin(e)]})):t;var n},e},P.svg.symbol=function(){var n=bs,r=vs;function t(e,t){return(ws.get(n.call(this,e,t))||xs)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=ut(e),t):n},t.size=function(e){return arguments.length?(r=ut(e),t):r},t};var ws=P.map({circle:xs,cross:function(e){e=Math.sqrt(e/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*As)),e=t*As;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(e){e=Math.sqrt(e)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});P.svg.symbolTypes=ws.keys();var Ts=Math.sqrt(3),As=Math.tan(30*Se);Y.transition=function(e){for(var t,n,r=Es||++Ds,i=Rs(e),a=[],o=Cs||{time:Date.now(),ease:xa,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Is(n,u,i,r,o),t.push(n)}return Ss(a,i,r)},Y.interrupt=function(e){return this.each(null==e?ks:Ms(Rs(e)))};var ks=Ms(Rs());function Ms(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ss(e,t,n){return B(e,Ls),e.namespace=t,e.id=n,e}var Es,Cs,Ls=[],Ds=0;function Os(e,r,i,a){var o=e.id,s=e.namespace;return le(e,"function"==typeof i?function(e,t,n){e[s][o].tween.set(r,a(i.call(e,e.__data__,t,n)))}:(i=a(i),function(e){e[s][o].tween.set(r,i)}))}function Ps(e){return null==e&&(e=""),function(){this.textContent=e}}function Rs(e){return null==e?"__transition__":"__transition_"+e+"__"}function Is(a,o,r,s,e){var l,c,u,d,h,f=a[r]||(a[r]={active:0,count:0}),p=f[s];function n(e){var t,n,r=f.active,i=f[r];for(t in i&&(i.timer.c=null,i.timer.t=NaN,--f.count,delete f[r],i.event&&i.event.interrupt.call(a,a.__data__,i.index)),f)+t<s&&((n=f[t]).timer.c=null,n.timer.t=NaN,--f.count,delete f[t]);c.c=m,yt(function(){return c.c&&m(e||1)&&(c.c=null,c.t=NaN),1},0,l),f.active=s,p.event&&p.event.start.call(a,a.__data__,o),h=[],p.tween.forEach(function(e,t){(t=t.call(a,a.__data__,o))&&h.push(t)}),d=p.ease,u=p.duration}function m(e){for(var e=e/u,t=d(e),n=h.length;0<n;)h[--n].call(a,t);if(1<=e)return p.event&&p.event.end.call(a,a.__data__,o),--f.count?delete f[s]:delete a[r],1}p||(l=e.time,c=yt(function(e){var t=p.delay;if(c.t=t+l,t<=e)return n(e-t);c.c=n},0,l),p=f[s]={tween:new y,time:l,timer:c,delay:e.delay,duration:e.duration,ease:e.ease,index:o},e=null,++f.count)}Ls.call=Y.call,Ls.empty=Y.empty,Ls.node=Y.node,Ls.size=Y.size,P.transition=function(e,t){return e&&e.transition?Es?e.transition(t):e:P.selection().transition(e)},(P.transition.prototype=Ls).select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=G(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),Is(n,u,a,i,r[a][i]),t.push(n)):t.push(null)}return Ss(o,a,i)},Ls.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,l=[];e=W(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,f=d.length;++h<f;)if(r=d[h]){a=r[s][o],n=e.call(r,r.__data__,h,c),l.push(t=[]);for(var p=-1,m=n.length;++p<m;)(i=n[p])&&Is(i,p,s,o,a),t.push(i)}return Ss(l,s,o)},Ls.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=se(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return Ss(r,this.namespace,this.id)},Ls.tween=function(t,n){var r=this.id,i=this.namespace;return arguments.length<2?this.node()[i][r].tween.get(t):le(this,null==n?function(e){e[i][r].tween.remove(t)}:function(e){e[i][r].tween.set(t,n)})},Ls.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?Oa:ha,i=P.ns.qualify(e);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}return Os(this,"attr."+e,t,i.local?function(n){return null==n?o:(n+="",function(){var t,e=this.getAttributeNS(i.space,i.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(i.space,i.local,t(e))})})}:function(n){return null==n?a:(n+="",function(){var t,e=this.getAttribute(i);return e!==n&&(t=r(e,n),function(e){this.setAttribute(i,t(e))})})})},Ls.attrTween=function(e,r){var i=P.ns.qualify(e);return this.tween("attr."+e,i.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(i.space,i.local));return n&&function(e){this.setAttributeNS(i.space,i.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(i));return n&&function(e){this.setAttribute(i,n(e))}})},Ls.style=function(r,e,i){var t=arguments.length;if(t<3){if("string"!=typeof r){for(i in t<2&&(e=""),r)this.style(i,r[i],e);return this}i=""}function a(){this.style.removeProperty(r)}return Os(this,"style."+r,e,function(n){return null==n?a:(n+="",function(){var t,e=I(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=ha(e,n),function(e){this.style.setProperty(r,t(e),i)})})})},Ls.styleTween=function(r,i,a){return arguments.length<3&&(a=""),this.tween("style."+r,function(e,t){var n=i.call(this,e,t,I(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),a)}})},Ls.text=function(e){return Os(this,"text",e,Ps)},Ls.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ls.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=P.ease.apply(P,arguments)),le(this,function(e){e[r][n].ease=t}))},Ls.delay=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].delay:le(this,"function"==typeof r?function(e,t,n){e[a][i].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[a][i].delay=r}))},Ls.duration=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].duration:le(this,"function"==typeof r?function(e,t,n){e[a][i].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[a][i].duration=r}))},Ls.each=function(r,t){var i=this.id,a=this.namespace;if(arguments.length<2){var e=Cs,n=Es;try{Es=i,le(this,function(e,t,n){Cs=e[a][i],r.call(e,e.__data__,t,n)})}finally{Cs=e,Es=n}}else le(this,function(e){e=e[a][i];(e.event||(e.event=P.dispatch("start","end","interrupt"))).on(r,t)});return this},Ls.transition=function(){for(var e,t,n,r=this.id,i=++Ds,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&Is(t,u,a,i,{time:(n=t[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ss(o,a,i)},P.svg.axis=function(){var x,w=P.scale.linear(),T=Ns,A=6,k=6,M=3,S=[10],E=null;function n(e){e.each(function(){var e,t=P.select(this),n=this.__chart__||w,r=this.__chart__=w.copy(),i=null==E?r.ticks?r.ticks.apply(r,S):r.domain():E,a=null==x?r.tickFormat?r.tickFormat.apply(r,S):L:x,o=t.selectAll(".tick").data(i,r),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",xe),l=P.transition(o.exit()).style("opacity",xe).remove(),c=P.transition(o.order()).style("opacity",1),u=Math.max(A,0)+M,d=ko(r),h=t.selectAll(".domain").data([0]),f=(h.enter().append("path").attr("class","domain"),P.transition(h));s.append("line"),s.append("text");var p,m,g,_,y,v,b=s.select("line"),i=c.select("line"),t=o.select("text").text(a),h=s.select("text"),o=c.select("text"),a="top"===T||"left"===T?-1:1;"bottom"===T||"top"===T?(e=Fs,p="x",g="y",m="x2",_="y2",t.attr("dy",a<0?"0em":".71em").style("text-anchor","middle"),f.attr("d","M"+d[0]+","+a*k+"V0H"+d[1]+"V"+a*k)):(e=js,p="y",g="x",m="y2",_="x2",t.attr("dy",".32em").style("text-anchor",a<0?"end":"start"),f.attr("d","M"+a*k+","+d[0]+"H0V"+d[1]+"H"+a*k)),b.attr(_,a*A),h.attr(g,a*u),i.attr(m,0).attr(_,a*A),o.attr(p,0).attr(g,a*u),r.rangeBand?(v=(y=r).rangeBand()/2,n=r=function(e){return y(e)+v}):n.rangeBand?n=r:l.call(e,r,n),s.call(e,n,r),c.call(e,r,r)})}return n.scale=function(e){return arguments.length?(w=e,n):w},n.orient=function(e){return arguments.length?(T=e in zs?e+"":Ns,n):T},n.ticks=function(){return arguments.length?(S=h(arguments),n):S},n.tickValues=function(e){return arguments.length?(E=e,n):E},n.tickFormat=function(e){return arguments.length?(x=e,n):x},n.tickSize=function(e){var t=arguments.length;return t?(A=+e,k=+arguments[t-1],n):A},n.innerTickSize=function(e){return arguments.length?(A=+e,n):A},n.outerTickSize=function(e){return arguments.length?(k=+e,n):k},n.tickPadding=function(e){return arguments.length?(M=+e,n):M},n.tickSubdivide=function(){return arguments.length&&n},n};var Ns="bottom",zs={top:1,right:1,bottom:1,left:1};function Fs(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function js(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}P.svg.brush=function(){var _,y,v=F(M,"brushstart","brush","brushend"),b=null,x=null,w=[0,0],T=[0,0],A=!0,k=!0,i=Hs[0];function M(e){e.each(function(){var e=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(i,L);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Bs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",M.empty()?"none":null);var r,e=P.transition(e),t=P.transition(t);b&&(r=ko(b),t.attr("x",r[0]).attr("width",r[1]-r[0]),E(e)),x&&(r=ko(x),t.attr("y",r[0]).attr("height",r[1]-r[0]),C(e)),S(e)})}function S(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+w[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function E(e){e.select(".extent").attr("x",w[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function C(e){e.select(".extent").attr("y",T[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function a(){var l,e,n,r=this,t=P.select(P.event.target),i=v.of(r,arguments),a=P.select(r),o=t.datum(),s=!/^(n|s)$/.test(o)&&b,c=!/^(e|w)$/.test(o)&&x,u=t.classed("extent"),d=_e(r),h=P.mouse(r),f=P.select(I(r)).on("keydown.brush",function(){32==P.event.keyCode&&(u||(l=null,h[0]-=w[1],h[1]-=T[1],u=2),N())}).on("keyup.brush",function(){32==P.event.keyCode&&2==u&&(h[0]+=w[1],h[1]+=T[1],u=0,N())});function p(){var e=P.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),u||(P.event.altKey?(l=l||[(w[0]+w[1])/2,(T[0]+T[1])/2],h[0]=w[+(e[0]<l[0])],h[1]=T[+(e[1]<l[1])]):l=null),s&&m(e,b,0)&&(E(a),t=!0),c&&m(e,x,1)&&(C(a),t=!0),t&&(S(a),i({type:"brush",mode:u?"move":"resize"}))}function m(e,t,n){var r,i=ko(t),a=i[0],o=i[1],s=h[n],t=n?T:w,i=t[1]-t[0];return u&&(a-=s,o-=i+s),e=(n?k:A)?Math.max(a,Math.min(o,e[n])):e[n],u?r=(e+=s)+i:(s=l?Math.max(a,Math.min(o,2*l[n]-e)):s)<e?(r=e,e=s):r=s,(t[0]!=e||t[1]!=r)&&(n?y=null:_=null,t[0]=e,t[1]=r,1)}function g(){p(),a.style("pointer-events","all").selectAll(".resize").style("display",M.empty()?"none":null),P.select("body").style("cursor",null),f.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),d(),i({type:"brushend"})}P.event.changedTouches?f.on("touchmove.brush",p).on("touchend.brush",g):f.on("mousemove.brush",p).on("mouseup.brush",g),a.interrupt().selectAll("*").interrupt(),u?(h[0]=w[0]-h[0],h[1]=T[0]-h[1]):o?(e=+/w$/.test(o),o=+/^n/.test(o),n=[w[1-e]-h[0],T[1-o]-h[1]],h[0]=w[e],h[1]=T[o]):P.event.altKey&&(l=h.slice()),a.style("pointer-events","none").selectAll(".resize").style("display",null),P.select("body").style("cursor",t.style("cursor")),i({type:"brushstart"}),p()}return M.event=function(e){e.each(function(){var r=v.of(this,arguments),i={x:w,y:T,i:_,j:y},e=this.__chart__||i;this.__chart__=i,Es?P.select(this).transition().each("start.brush",function(){_=e.i,y=e.j,w=e.x,T=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=fa(w,i.x),n=fa(T,i.y);return _=y=null,function(e){w=i.x=t(e),T=i.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){_=i.i,y=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},M.x=function(e){return arguments.length?(i=Hs[!(b=e)<<1|!x],M):b},M.y=function(e){return arguments.length?(i=Hs[!b<<1|!(x=e)],M):x},M.clamp=function(e){return arguments.length?(b&&x?(A=!!e[0],k=!!e[1]):b?A=!!e:x&&(k=!!e),M):b&&x?[A,k]:b?A:x?k:null},M.extent=function(e){var t,n,r,i,a;return arguments.length?(b&&(t=e[0],n=e[1],x&&(t=t[0],n=n[0]),_=[t,n],b.invert&&(t=b(t),n=b(n)),n<t&&(a=t,t=n,n=a),t==w[0]&&n==w[1]||(w=[t,n])),x&&(r=e[0],i=e[1],b&&(r=r[1],i=i[1]),y=[r,i],x.invert&&(r=x(r),i=x(i)),i<r&&(a=r,r=i,i=a),r==T[0]&&i==T[1]||(T=[r,i])),M):(b&&(_?(t=_[0],n=_[1]):(t=w[0],n=w[1],b.invert&&(t=b.invert(t),n=b.invert(n)),n<t&&(a=t,t=n,n=a))),x&&(y?(r=y[0],i=y[1]):(r=T[0],i=T[1],x.invert&&(r=x.invert(r),i=x.invert(i)),i<r&&(a=r,r=i,i=a))),b&&x?[[t,r],[n,i]]:b?[t,n]:x&&[r,i])},M.clear=function(){return M.empty()||(w=[0,0],T=[0,0],_=y=null),M},M.empty=function(){return!!b&&w[0]==w[1]||!!x&&T[0]==T[1]},P.rebind(M,v,"on")};var Bs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d=St.format=a.timeFormat,t=d.utc,a=t("%Y-%m-%dT%H:%M:%S.%LZ");function Us(e){return e.toISOString()}function Vs(t,i,e){function a(e){return t(e)}function o(e,t){var n=(e[1]-e[0])/t,r=P.bisect(Ys,n);return r==Ys.length?[i.year,Po(e.map(function(e){return e/31536e6}),t)[2]]:r?i[n/Ys[r-1]<Ys[r]/n?r-1:r]:[Xs,Po(e,t)[2]]}return a.invert=function(e){return qs(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain().map(qs)},a.nice=function(t,n){var e=a.domain(),r=Ao(e),r=null==t?o(r,10):"number"==typeof t&&o(r,t);function i(e){return!isNaN(e)&&!t.range(e,qs(+e+1),n).length}return r&&(t=r[0],n=r[1]),a.domain(So(e,1<n?{floor:function(e){for(;i(e=t.floor(e));)e=qs(e-1);return e},ceil:function(e){for(;i(e=t.ceil(e));)e=qs(+e+1);return e}}:t))},a.ticks=function(e,t){var n=Ao(a.domain()),r=null==e?o(n,10):"number"==typeof e?o(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],qs(+n[1]+1),t<1?1:t)},a.tickFormat=function(){return e},a.copy=function(){return Vs(t.copy(),i,e)},Do(a,t)}function qs(e){return new Date(e)}d.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Us:a,Us.parse=function(e){e=new Date(e);return isNaN(e)?null:e},Us.toString=a.toString,St.second=Dt(function(e){return new Et(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),St.seconds=St.second.range,St.seconds.utc=St.second.utc.range,St.minute=Dt(function(e){return new Et(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),St.minutes=St.minute.range,St.minutes.utc=St.minute.utc.range,St.hour=Dt(function(e){var t=e.getTimezoneOffset()/60;return new Et(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),St.hours=St.hour.range,St.hours.utc=St.hour.utc.range,St.month=Dt(function(e){return(e=St.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),St.months=St.month.range,St.months.utc=St.month.utc.range;var Ys=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gs=[[St.second,1],[St.second,5],[St.second,15],[St.second,30],[St.minute,1],[St.minute,5],[St.minute,15],[St.minute,30],[St.hour,1],[St.hour,3],[St.hour,6],[St.hour,12],[St.day,1],[St.day,2],[St.week,1],[St.month,1],[St.month,3],[St.year,1]],Ws=d.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",cr]]),Xs={range:function(e,t,n){return P.range(Math.ceil(e/n)*n,+t,n).map(qs)},floor:L,ceil:L};Gs.year=St.year,St.scale=function(){return Vs(P.scale.linear(),Gs,Ws)};var Zs=Gs.map(function(e){return[e[0].utc,e[1]]}),Js=t.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",cr]]);function $s(e){return JSON.parse(e.responseText)}function Qs(e){var t=R.createRange();return t.selectNode(R.body),t.createContextualFragment(e.responseText)}Zs.year=St.year.utc,St.scale.utc=function(){return Vs(P.scale.linear(),Zs,Js)},P.text=dt(function(e){return e.responseText}),P.json=function(e,t){return ht(e,"application/json",$s,t)},P.html=function(e,t){return ht(e,"text/html",Qs,t)},P.xml=dt(function(e){return e.responseXML}),"object"==typeof Ks&&Ks.exports?Ks.exports=P:this.d3=P}.apply(self)},{}],12:[function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,l=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(i,a){return new Promise(function(e,t){function n(){void 0!==r&&i.removeListener("error",r),e([].slice.call(arguments))}var r;"error"!==a&&(r=function(e){i.removeListener(a,n),t(e)},i.once("error",r)),i.once(a,n)})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,a;return c(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),a=i[t]),void 0===a?(a=i[t]=n,++e._eventsCount):("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),0<(n=u(e))&&a.length>n&&!a.warned&&(a.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,n=n,console&&console.warn&&console.warn(n))),e}function h(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function f(e,t,n){e=e._events;if(void 0===e)return[];t=e[t];return void 0===t?[]:"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):m(t,t.length)}function p(e){var t=this._events;if(void 0!==t){e=t[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r,i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){if((r=0<t.length?t[0]:r)instanceof Error)throw r;i=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw i.context=r,i}e=a[e];if(void 0===e)return!1;if("function"==typeof e)l(e,this,t);else for(var o=e.length,s=m(e,o),n=0;n<o;++n)l(s[n],this,t);return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},{}],13:[function(e,t,n){var r,i;r=this,i=function(t,k){"use strict";function M(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function S(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function E(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,i=e.date,a=e.time,t=e.periods,n=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=L(t),u=D(t),d=L(n),h=D(n),f=L(o),p=D(o),m=L(s),g=D(s),_=L(l),y=D(l),v={a:function(e){return o[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Q,e:Q,f:re,H:K,I:ee,j:te,L:ne,m:ie,M:ae,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Pe,s:Re,S:oe,u:se,U:le,V:ce,w:ue,W:de,x:null,X:null,y:he,Y:fe,Z:pe,"%":Oe},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:me,e:me,f:be,H:ge,I:_e,j:ye,L:ve,m:xe,M:we,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Pe,s:Re,S:Te,u:Ae,U:ke,V:Me,w:Se,W:Ee,x:null,X:null,y:Ce,Y:Le,Z:De,"%":Oe},x={a:function(e,t,n){t=f.exec(t.slice(n));return t?(e.w=p[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=d.exec(t.slice(n));return t?(e.w=h[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=_.exec(t.slice(n));return t?(e.m=y[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=m.exec(t.slice(n));return t?(e.m=g[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return A(e,r,t,n)},d:U,e:U,f:X,H:q,I:q,j:V,L:W,m:H,M:Y,p:function(e,t,n){t=c.exec(t.slice(n));return t?(e.p=u[t[0].toLowerCase()],n+t[0].length):-1},q:B,Q:J,s:$,S:G,u:P,U:R,V:I,w:O,W:N,x:function(e,t,n){return A(e,i,t,n)},X:function(e,t,n){return A(e,a,t,n)},y:F,Y:z,Z:j,"%":Z};function w(l,c){return function(e){var t,n,r,i=[],a=-1,o=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===l.charCodeAt(a)&&(i.push(l.slice(o,a)),null!=(n=C[t=l.charAt(++a)])?t=l.charAt(++a):n="e"===t?" ":"0",(r=c[t])&&(t=r(e,n)),i.push(t),o=a+1);return i.push(l.slice(o,a)),i.join("")}}function T(i,a){return function(e){var t,n,r=E(1900,void 0,1);if(A(r,i,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!a||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=S(E(r.y,0,1))).getUTCDay())||0===n?k.utcMonday.ceil(t):k.utcMonday(t),t=k.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=M(E(r.y,0,1))).getDay())||0===n?k.timeMonday.ceil(t):k.timeMonday(t),t=k.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?S(E(r.y,0,1)).getUTCDay():M(E(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,S(r)):M(r)}}function A(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in C?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return v.x=w(i,v),v.X=w(a,v),v.c=w(r,v),b.x=w(i,b),b.X=w(a,b),b.c=w(r,b),{format:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=T(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=T(e+="",!0);return t.toString=function(){return e},t}}}var r,C={"-":"",_:" ",0:"0"},i=/^\s*\d+/,a=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",e=i.length;return r+(e<n?new Array(n-e+1).join(t)+i:i)}function l(e){return e.replace(o,"\\$&")}function L(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function D(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function O(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function P(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function R(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function I(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function N(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function z(e,t,n){t=i.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function F(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function j(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function B(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function H(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function U(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function V(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function q(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function Y(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function G(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function W(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function X(e,t,n){t=i.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function Z(e,t,n){t=a.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function J(e,t,n){t=i.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function $(e,t,n){t=i.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function Q(e,t){return s(e.getDate(),t,2)}function K(e,t){return s(e.getHours(),t,2)}function ee(e,t){return s(e.getHours()%12||12,t,2)}function te(e,t){return s(1+k.timeDay.count(k.timeYear(e),e),t,3)}function ne(e,t){return s(e.getMilliseconds(),t,3)}function re(e,t){return ne(e,t)+"000"}function ie(e,t){return s(e.getMonth()+1,t,2)}function ae(e,t){return s(e.getMinutes(),t,2)}function oe(e,t){return s(e.getSeconds(),t,2)}function se(e){e=e.getDay();return 0===e?7:e}function le(e,t){return s(k.timeSunday.count(k.timeYear(e)-1,e),t,2)}function ce(e,t){var n=e.getDay();return e=4<=n||0===n?k.timeThursday(e):k.timeThursday.ceil(e),s(k.timeThursday.count(k.timeYear(e),e)+(4===k.timeYear(e).getDay()),t,2)}function ue(e){return e.getDay()}function de(e,t){return s(k.timeMonday.count(k.timeYear(e)-1,e),t,2)}function he(e,t){return s(e.getFullYear()%100,t,2)}function fe(e,t){return s(e.getFullYear()%1e4,t,4)}function pe(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function me(e,t){return s(e.getUTCDate(),t,2)}function ge(e,t){return s(e.getUTCHours(),t,2)}function _e(e,t){return s(e.getUTCHours()%12||12,t,2)}function ye(e,t){return s(1+k.utcDay.count(k.utcYear(e),e),t,3)}function ve(e,t){return s(e.getUTCMilliseconds(),t,3)}function be(e,t){return ve(e,t)+"000"}function xe(e,t){return s(e.getUTCMonth()+1,t,2)}function we(e,t){return s(e.getUTCMinutes(),t,2)}function Te(e,t){return s(e.getUTCSeconds(),t,2)}function Ae(e){e=e.getUTCDay();return 0===e?7:e}function ke(e,t){return s(k.utcSunday.count(k.utcYear(e)-1,e),t,2)}function Me(e,t){var n=e.getUTCDay();return e=4<=n||0===n?k.utcThursday(e):k.utcThursday.ceil(e),s(k.utcThursday.count(k.utcYear(e),e)+(4===k.utcYear(e).getUTCDay()),t,2)}function Se(e){return e.getUTCDay()}function Ee(e,t){return s(k.utcMonday.count(k.utcYear(e)-1,e),t,2)}function Ce(e,t){return s(e.getUTCFullYear()%100,t,2)}function Le(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function De(){return"+0000"}function Oe(){return"%"}function Pe(e){return+e}function Re(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var c="%Y-%m-%dT%H:%M:%S.%LZ";var u=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(c);c=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:t.utcParse(c);t.isoFormat=u,t.isoParse=c,t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-time")):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":14}],14:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var i=new Date,l=new Date;function c(a,o,n,r){function s(e){return a(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return a(e=new Date(+e)),e},s.ceil=function(e){return a(e=new Date(e-1)),o(e,1),a(e),e},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,n){var r,i=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return i;for(;i.push(r=new Date(+e)),o(e,n),a(e),r<e&&e<t;);return i},s.filter=function(n){return c(function(e){if(e<=e)for(;a(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},n&&(s.count=function(e,t){return i.setTime(+e),l.setTime(+t),a(i),a(l),Math.floor(n(i,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var t=c(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?c(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null};var n=t.range,r=c(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),a=r.range,o=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),s=o.range,u=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),d=u.range,h=c(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=h.range;function p(t){return c(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var m=p(0),g=p(1),_=p(2),y=p(3),v=p(4),b=p(5),x=p(6),w=m.range,T=g.range,A=_.range,k=y.range,M=v.range,S=b.range,E=x.range,C=c(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),L=C.range,D=c(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});D.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var O=D.range,P=c(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),R=P.range,I=c(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),N=I.range,z=c(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),F=z.range;function j(t){return c(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var B=j(0),H=j(1),U=j(2),V=j(3),q=j(4),Y=j(5),G=j(6),W=B.range,X=H.range,Z=U.range,J=V.range,$=q.range,Q=Y.range,K=G.range,ee=c(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),te=ee.range,ne=c(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ne.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var re=ne.range;e.timeDay=h,e.timeDays=f,e.timeFriday=b,e.timeFridays=S,e.timeHour=u,e.timeHours=d,e.timeInterval=c,e.timeMillisecond=t,e.timeMilliseconds=n,e.timeMinute=o,e.timeMinutes=s,e.timeMonday=g,e.timeMondays=T,e.timeMonth=C,e.timeMonths=L,e.timeSaturday=x,e.timeSaturdays=E,e.timeSecond=r,e.timeSeconds=a,e.timeSunday=m,e.timeSundays=w,e.timeThursday=v,e.timeThursdays=M,e.timeTuesday=_,e.timeTuesdays=A,e.timeWednesday=y,e.timeWednesdays=k,e.timeWeek=m,e.timeWeeks=w,e.timeYear=D,e.timeYears=O,e.utcDay=z,e.utcDays=F,e.utcFriday=Y,e.utcFridays=Q,e.utcHour=I,e.utcHours=N,e.utcMillisecond=t,e.utcMilliseconds=n,e.utcMinute=P,e.utcMinutes=R,e.utcMonday=H,e.utcMondays=X,e.utcMonth=ee,e.utcMonths=te,e.utcSaturday=G,e.utcSaturdays=K,e.utcSecond=r,e.utcSeconds=a,e.utcSunday=B,e.utcSundays=W,e.utcThursday=q,e.utcThursdays=$,e.utcTuesday=U,e.utcTuesdays=Z,e.utcWednesday=V,e.utcWednesdays=J,e.utcWeek=B,e.utcWeeks=W,e.utcYear=ne,e.utcYears=re,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):i((r=r||self).d3=r.d3||{})},{}],15:[function(e,t,n){"use strict";var r=e("is-string-blank");t.exports=function(e){var t=typeof e;if("string"==t){var n=e;if(0===(e=+e)&&r(n))return!1}else if("number"!=t)return!1;return e-e<1}},{"is-string-blank":50}],16:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],t=t[15];return e[0]=s*(h*t-f*g)-d*(l*t-c*g)+m*(l*f-c*h),e[1]=-(r*(h*t-f*g)-d*(i*t-a*g)+m*(i*f-a*h)),e[2]=r*(l*t-c*g)-s*(i*t-a*g)+m*(i*c-a*l),e[3]=-(r*(l*f-c*h)-s*(i*f-a*h)+d*(i*c-a*l)),e[4]=-(o*(h*t-f*g)-u*(l*t-c*g)+p*(l*f-c*h)),e[5]=n*(h*t-f*g)-u*(i*t-a*g)+p*(i*f-a*h),e[6]=-(n*(l*t-c*g)-o*(i*t-a*g)+p*(i*c-a*l)),e[7]=n*(l*f-c*h)-o*(i*f-a*h)+u*(i*c-a*l),e[8]=o*(d*t-f*m)-u*(s*t-c*m)+p*(s*f-c*d),e[9]=-(n*(d*t-f*m)-u*(r*t-a*m)+p*(r*f-a*d)),e[10]=n*(s*t-c*m)-o*(r*t-a*m)+p*(r*c-a*s),e[11]=-(n*(s*f-c*d)-o*(r*f-a*d)+u*(r*c-a*s)),e[12]=-(o*(d*g-h*m)-u*(s*g-l*m)+p*(s*h-l*d)),e[13]=n*(d*g-h*m)-u*(r*g-i*m)+p*(r*h-i*d),e[14]=-(n*(s*g-l*m)-o*(r*g-i*m)+p*(r*l-i*s)),e[15]=n*(s*h-l*d)-o*(r*h-i*d)+u*(r*l-i*s),e}},{}],17:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],18:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],19:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],20:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],e=e[15];return(t*o-n*a)*(d*e-h*m)-(t*s-r*a)*(u*e-h*p)+(t*l-i*a)*(u*m-d*p)+(n*s-r*o)*(c*e-h*f)-(n*l-i*o)*(c*m-d*f)+(r*l-i*s)*(c*p-u*f)}},{}],21:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,t=r*s,n=i*o,r=i*s,i=i*l,o=a*o,s=a*s,l=a*l;return e[0]=1-t-i,e[1]=u+l,e[2]=n-s,e[3]=0,e[4]=u-l,e[5]=1-c-i,e[6]=r+o,e[7]=0,e[8]=n+s,e[9]=r-o,e[10]=1-c-t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],22:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.sqrt(r*r+i*i+a*a);if(Math.abs(o)<1e-6)return null;return r*=o=1/o,i*=o,a*=o,n=Math.sin(t),o=Math.cos(t),t=1-o,e[0]=r*r*t+o,e[1]=i*r*t+a*n,e[2]=a*r*t-i*n,e[3]=0,e[4]=r*i*t-a*n,e[5]=i*i*t+o,e[6]=a*i*t+r*n,e[7]=0,e[8]=r*a*t+i*n,e[9]=i*a*t-r*n,e[10]=a*a*t+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],23:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,c=a+a,u=r*s,d=r*l,t=r*c,r=i*l,i=i*c,a=a*c,s=o*s,l=o*l,c=o*c;return e[0]=1-(r+a),e[1]=d+c,e[2]=t-l,e[3]=0,e[4]=d-c,e[5]=1-(u+a),e[6]=i+s,e[7]=0,e[8]=t+l,e[9]=i-s,e[10]=1-(u+r),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],24:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],25:[function(e,t,n){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],26:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],27:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],28:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],29:[function(e,t,n){t.exports=function(e,t,n,r,i,a,o){var s=1/(n-t),l=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}},{}],30:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],31:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":16,"./clone":17,"./copy":18,"./create":19,"./determinant":20,"./fromQuat":21,"./fromRotation":22,"./fromRotationTranslation":23,"./fromScaling":24,"./fromTranslation":25,"./fromXRotation":26,"./fromYRotation":27,"./fromZRotation":28,"./frustum":29,"./identity":30,"./invert":32,"./lookAt":33,"./multiply":34,"./ortho":35,"./perspective":36,"./perspectiveFromFieldOfView":37,"./rotate":38,"./rotateX":39,"./rotateY":40,"./rotateZ":41,"./scale":42,"./str":43,"./translate":44,"./transpose":45}],32:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],_=t[15],y=n*s-r*o,v=n*l-i*o,b=n*c-a*o,x=r*l-i*s,w=r*c-a*s,T=i*c-a*l,A=u*m-d*p,k=u*g-h*p,M=u*_-f*p,S=d*g-h*m,E=d*_-f*m,C=h*_-f*g,t=y*C-v*E+b*S+x*M-w*k+T*A;return t?(t=1/t,e[0]=(s*C-l*E+c*S)*t,e[1]=(i*E-r*C-a*S)*t,e[2]=(m*T-g*w+_*x)*t,e[3]=(h*w-d*T-f*x)*t,e[4]=(l*M-o*C-c*k)*t,e[5]=(n*C-i*M+a*k)*t,e[6]=(g*b-p*T-_*v)*t,e[7]=(u*T-h*b+f*v)*t,e[8]=(o*E-s*M+c*A)*t,e[9]=(r*M-n*E-a*A)*t,e[10]=(p*w-m*b+_*y)*t,e[11]=(d*b-u*w-f*y)*t,e[12]=(s*k-o*S-l*A)*t,e[13]=(n*S-r*k+i*A)*t,e[14]=(m*v-p*x-g*y)*t,e[15]=(u*x-d*v+h*y)*t,e):null}},{}],33:[function(e,t,n){var p=e("./identity");t.exports=function(e,t,n,r){var i,a=t[0],o=t[1],s=t[2],l=r[0],c=r[1],u=r[2],d=n[0],h=n[1],f=n[2];if(Math.abs(a-d)<1e-6&&Math.abs(o-h)<1e-6&&Math.abs(s-f)<1e-6)return p(e);i=a-d,t=o-h,r=s-f,n=1/Math.sqrt(i*i+t*t+r*r),d=c*(r*=n)-u*(t*=n),h=u*(i*=n)-l*r,f=l*t-c*i,(n=Math.sqrt(d*d+h*h+f*f))?(d*=n=1/n,h*=n,f*=n):f=h=d=0;u=t*f-r*h,l=r*d-i*f,c=i*h-t*d,(n=Math.sqrt(u*u+l*l+c*c))?(u*=n=1/n,l*=n,c*=n):c=l=u=0;return e[0]=d,e[1]=u,e[2]=i,e[3]=0,e[4]=h,e[5]=l,e[6]=t,e[7]=0,e[8]=f,e[9]=c,e[10]=r,e[11]=0,e[12]=-(d*a+h*o+f*s),e[13]=-(u*a+l*o+c*s),e[14]=-(i*a+t*o+r*s),e[15]=1,e}},{"./identity":30}],34:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],g=t[13],_=t[14],y=t[15],v=n[0],b=n[1],x=n[2],t=n[3];return e[0]=v*r+b*s+x*d+t*m,e[1]=v*i+b*l+x*h+t*g,e[2]=v*a+b*c+x*f+t*_,e[3]=v*o+b*u+x*p+t*y,v=n[4],b=n[5],x=n[6],t=n[7],e[4]=v*r+b*s+x*d+t*m,e[5]=v*i+b*l+x*h+t*g,e[6]=v*a+b*c+x*f+t*_,e[7]=v*o+b*u+x*p+t*y,v=n[8],b=n[9],x=n[10],t=n[11],e[8]=v*r+b*s+x*d+t*m,e[9]=v*i+b*l+x*h+t*g,e[10]=v*a+b*c+x*f+t*_,e[11]=v*o+b*u+x*p+t*y,v=n[12],b=n[13],x=n[14],t=n[15],e[12]=v*r+b*s+x*d+t*m,e[13]=v*i+b*l+x*h+t*g,e[14]=v*a+b*c+x*f+t*_,e[15]=v*o+b*u+x*p+t*y,e}},{}],35:[function(e,t,n){t.exports=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*c,e[15]=1,e}},{}],36:[function(e,t,n){t.exports=function(e,t,n,r,i){var a=1/Math.tan(t/2),t=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*t,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*t,e[15]=0,e}},{}],37:[function(e,t,n){t.exports=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),t=2/(i+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(i-a)*t*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},{}],38:[function(e,t,n){t.exports=function(e,t,n,r){var i,a,o,s,l,c,u,d,h,f,p,m,g,_,y,v,b,x,w,T=r[0],A=r[1],k=r[2],M=Math.sqrt(T*T+A*A+k*k);if(Math.abs(M)<1e-6)return null;T*=M=1/M,A*=M,k*=M,x=Math.sin(n),w=Math.cos(n),i=1-w,a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7],f=t[8],p=t[9],m=t[10],g=t[11],_=T*T*i+w,y=A*T*i+k*x,v=k*T*i-A*x,b=T*A*i-k*x,r=A*A*i+w,M=k*A*i+T*x,n=T*k*i+A*x,x=A*k*i-T*x,w=k*k*i+w,e[0]=a*_+c*y+f*v,e[1]=o*_+u*y+p*v,e[2]=s*_+d*y+m*v,e[3]=l*_+h*y+g*v,e[4]=a*b+c*r+f*M,e[5]=o*b+u*r+p*M,e[6]=s*b+d*r+m*M,e[7]=l*b+h*r+g*M,e[8]=a*n+c*x+f*w,e[9]=o*n+u*x+p*w,e[10]=s*n+d*x+m*w,e[11]=l*n+h*x+g*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],39:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*i+c*r,e[5]=o*i+u*r,e[6]=s*i+d*r,e[7]=l*i+n*r,e[8]=c*i-a*r,e[9]=u*i-o*r,e[10]=d*i-s*r,e[11]=n*i-l*r,e}},{}],40:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i-c*r,e[1]=o*i-u*r,e[2]=s*i-d*r,e[3]=l*i-n*r,e[8]=a*r+c*i,e[9]=o*r+u*i,e[10]=s*r+d*i,e[11]=l*r+n*i,e}},{}],41:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],n=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i+c*r,e[1]=o*i+u*r,e[2]=s*i+d*r,e[3]=l*i+n*r,e[4]=c*i-a*r,e[5]=u*i-o*r,e[6]=d*i-s*r,e[7]=n*i-l*r,e}},{}],42:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],43:[function(e,t,n){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],44:[function(e,t,n){t.exports=function(e,t,n){var r,i,a,o,s,l,c,u,d,h,f,p=n[0],m=n[1],g=n[2];t===e?(e[12]=t[0]*p+t[4]*m+t[8]*g+t[12],e[13]=t[1]*p+t[5]*m+t[9]*g+t[13],e[14]=t[2]*p+t[6]*m+t[10]*g+t[14],e[15]=t[3]*p+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],n=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=f,e[11]=n,e[12]=r*p+s*m+d*g+t[12],e[13]=i*p+l*m+h*g+t[13],e[14]=a*p+c*m+f*g+t[14],e[15]=o*p+u*m+n*g+t[15]);return e}},{}],45:[function(e,t,n){t.exports=function(e,t){{var n,r,i,a,o,s;e===t?(n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e}},{}],46:[function(n,r,e){!function(t){!function(){"use strict";var e=n("is-browser"),e="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:e;r.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":48}],47:[function(e,t,n){"use strict";e=e("is-browser");t.exports=e&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":48}],48:[function(e,t,n){t.exports=!0},{}],49:[function(e,t,n){"use strict";t.exports=a,t.exports.isMobile=a,t.exports.default=a;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(e){var t=(e=e||{}).ua;if("string"!=typeof(t=(t=!t&&"undefined"!=typeof navigator?navigator.userAgent:t)&&t.headers&&"string"==typeof t.headers["user-agent"]?t.headers["user-agent"]:t))return!1;var n=(e.tablet?i:r).test(t);return n=!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")?!0:n}},{}],50:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],51:[function(e,t,n){var i={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,e=e.clientY||0,t=function(e){return e===window||e===document||e===document.body?i:e.getBoundingClientRect()}(t);return n[0]=r-t.left,n[1]=e-t.top,n}},{}],52:[function(e,i,t){!function(r,v){!function(){var e,t,n;n=function(){"use strict";var t,n,r,i,a,e=Object.prototype.toString,o=void 0!==v?function(e){return v(e)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(e,t,n){return e[t]=n,e}}function s(e,t){this.fn=e,this.self=t,this.next=void 0}function l(e,t){_.add(e,t),n=n||o(_.drain)}function c(e){var t,n=typeof e;return"function"==typeof(t=null!=e&&("object"==n||"function"==n)?e.then:t)&&t}function u(){for(var e=0;e<this.chain.length;e++)!function(e,t,n){var r,i;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=c(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function d(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=c(e))?l(function(){var t=new p(r);try{n.call(e,function(){d.apply(t,arguments)},function(){h.apply(t,arguments)})}catch(e){h.call(t,e)}}):(r.msg=e,r.state=1,0<r.chain.length&&l(u,r))}catch(e){h.call(new p(r),e)}}}function h(e){var t=this;t.triggered||(t.triggered=!0,(t=t.def?t.def:t).msg=e,t.state=2,0<t.chain.length&&l(u,t))}function f(e,n,r,i){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},i)}(t)}function p(e){this.def=e,this.triggered=!1}function m(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new m(this);this.then=function(e,t){var n={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&l(u,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){d.call(r,e)},function(e){h.call(r,e)})}catch(e){h.call(r,e)}}var _={add:function(e,t){a=new s(e,t),i?i.next=a:r=a,i=a,a=void 0},drain:function(){var e=r;for(r=i=n=void 0;e;)e.fn.call(e.self),e=e.next}},y=t({},"constructor",g,!1);return t(g.prototype=y,"__NPO__",0,!1),t(g,"resolve",function(n){return n&&"object"==typeof n&&1===n.__NPO__?n:new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(n)})}),t(g,"reject",function(n){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(n)})}),t(g,"all",function(t){var o=this;return"[object Array]"!=e.call(t)?o.reject(TypeError("Not an array")):0===t.length?o.resolve([]):new o(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");var r=t.length,i=Array(r),a=0;f(o,t,function(e,t){i[e]=t,++a===r&&n(i)},e)})}),t(g,"race",function(t){var r=this;return"[object Array]"!=e.call(t)?r.reject(TypeError("Not an array")):new r(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");f(r,t,function(e,t){n(t)},e)})}),g},(t=void 0!==r?r:this)[e="Promise"]=t[e]||n(),void 0!==i&&i.exports&&(i.exports=t[e])}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:64}],53:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))c.call(n,a)&&(r[a]=n[a]);if(l)for(var o=l(n),s=0;s<o.length;s++)u.call(n,o[s])&&(r[o[s]]=n[o[s]])}return r}},{}],54:[function(e,t,n){t.exports=function(e){var i=[];return e.replace(r,function(e,t,n){var r=t.toLowerCase();for(n=function(e){e=e.match(o);return e?e.map(Number):[]}(n),"m"==r&&2<n.length&&(i.push([t].concat(n.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(n.length==a[r])return n.unshift(t),i.push(n);if(n.length<a[r])throw new Error("malformed path data");i.push([t].concat(n.splice(0,a[r])))}}),i};var a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],55:[function(e,t,n){var r,i=e("./lib/build-log"),a=e("./lib/epsilon"),o=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),c=e("./lib/geojson"),u=!1,d=a();function h(e,t,n){e=r.segments(e),t=r.segments(t),t=n(r.combine(e,t));return r.polygon(t)}r={buildLog:function(e){return!0===e?u=i():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=o(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:o(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,d,e)},union:function(e,t){return h(e,t,r.selectUnion)},intersect:function(e,t){return h(e,t,r.selectIntersect)},difference:function(e,t){return h(e,t,r.selectDifference)},differenceRev:function(e,t){return h(e,t,r.selectDifferenceRev)},xor:function(e,t){return h(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},{"./lib/build-log":56,"./lib/epsilon":57,"./lib/geojson":58,"./lib/intersecter":59,"./lib/segment-chainer":61,"./lib/segment-selector":62}],56:[function(e,t,n){t.exports=function(){var n,e=0,t=!1;function r(e,t){return n.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),n}return n={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(e){return e===t?n:r("vert",{x:t=e})},log:function(e){return r("log",{txt:e="string"!=typeof e?JSON.stringify(e,!1,"  "):e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],57:[function(e,t,n){t.exports=function(u){"number"!=typeof u&&(u=1e-10);var n={epsilon:function(e){return u="number"==typeof e?e:u},pointAboveOrOnLine:function(e,t,n){var r=t[0],i=t[1],a=n[0],t=n[1],n=e[0],e=e[1];return-u<=(a-r)*(e-i)-(t-i)*(n-r)},pointBetween:function(e,t,n){var r=e[1]-t[1],i=n[0]-t[0],e=e[0]-t[0],t=n[1]-t[1],r=e*i+r*t;return!(r<u)&&!(-u<r-(i*i+t*t))},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<u},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<u},pointsSame:function(e,t){return n.pointsSameX(e,t)&&n.pointsSameY(e,t)},pointsCompare:function(e,t){return n.pointsSameX(e,t)?n.pointsSameY(e,t)?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1},pointsCollinear:function(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],e=t[0]-n[0],n=t[1]-n[1];return Math.abs(r*n-e*i)<u},linesIntersect:function(e,t,n,r){var i=t[0]-e[0],a=t[1]-e[1],o=r[0]-n[0],s=r[1]-n[1],t=i*s-a*o;if(Math.abs(t)<u)return!1;r=e[0]-n[0],n=e[1]-n[1],s=(o*n-s*r)/t,t=(i*n-a*r)/t,a={alongA:0,alongB:0,pt:[e[0]+s*i,e[1]+s*a]};return a.alongA=s<=-u?-2:s<u?-1:s-1<=-u?0:s-1<u?1:2,a.alongB=t<=-u?-2:t<u?-1:t-1<=-u?0:t-1<u?1:2,a},pointInsideRegion:function(e,t){for(var n=e[0],r=e[1],i=t[t.length-1][0],a=t[t.length-1][1],o=!1,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];u<c-r!=u<a-r&&u<(i-l)*(r-c)/(a-c)+l-n&&(o=!o),i=l,a=c}return o}};return n}},{}],58:[function(e,t,n){var r={toPolygon:function(i,e){function t(e){if(e.length<=0)return i.segments({inverted:!1,regions:[]});function t(e){e=e.slice(0,e.length-1);return i.segments({inverted:!1,regions:[e]})}for(var n=t(e[0]),r=1;r<e.length;r++)n=i.selectDifference(i.combine(n,t(e[r])));return n}if("Polygon"===e.type)return i.polygon(t(e.coordinates));if("MultiPolygon"!==e.type)throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");for(var n=i.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=i.selectUnion(i.combine(n,t(e.coordinates[r])));return i.polygon(n)},fromPolygon:function(e,n,t){function o(e,t){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],t)}function s(e){return{region:e,children:[]}}t=e.polygon(e.segments(t));var r=s(null);for(var i=0;i<t.regions.length;i++){var a=t.regions[i];a.length<3||!function e(t,n){for(var r=0;r<t.children.length;r++)if(o(n,(i=t.children[r]).region))return void e(i,n);for(var i,a=s(n),r=0;r<t.children.length;r++)o((i=t.children[r]).region,n)&&(a.children.push(i),t.children.splice(r,1),r--);t.children.push(a)}(r,a)}function l(e,t){for(var n=0,r=e[e.length-1][0],i=e[e.length-1][1],a=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];a.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==t&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var c=[];function u(e){var t=[l(e.region,!1)];c.push(t);for(var n=0;n<e.children.length;n++)t.push(function(e){for(var t=0;t<e.children.length;t++)u(e.children[t]);return l(e.region,!0)}(e.children[n]))}for(i=0;i<r.children.length;i++)u(r.children[i]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};t.exports=r},{}],59:[function(e,t,n){var _=e("./linked-list");t.exports=function(h,f,p){function i(e,t,n){return{id:p?p.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var m=_.create();function a(o,s){m.insertBefore(o,function(e){var t,n,r,i,a;return(t=o.isStart,n=o.pt,r=s,i=e.isStart,a=e.pt,e=e.other.pt,0!==(n=f.pointsCompare(n,a))?n:f.pointsSame(r,e)?0:t!==i?t?1:-1:f.pointAboveOrOnLine(r,i?a:e,i?e:a)?1:-1)<0})}function o(e,t){var n,r,n=(n=e,r=t,a(r=_.node({isStart:!0,pt:n.start,seg:n,primary:r,other:null,status:null}),n.end),r);return r=n,t=t,t=_.node({isStart:!1,pt:e.end,seg:e,primary:t,other:r,status:null}),a(r.other=t,r.pt),n}function g(e,t){var n,r=i(t,e.seg.end,e.seg);return n=e,t=t,p&&p.segmentChop(n.seg,t),n.other.remove(),n.seg.end=t,n.other.pt=t,a(n.other,n.pt),o(r,e.primary)}function s(e,t){var n=_.create();function r(i){return n.findTransition(function(e){var t,n,r;return 0<(t=i,n=e.ev,r=t.seg.start,e=t.seg.end,t=n.seg.start,n=n.seg.end,f.pointsCollinear(r,t,n)?f.pointsCollinear(e,t,n)||f.pointAboveOrOnLine(e,t,n)?1:-1:f.pointAboveOrOnLine(r,t,n)?1:-1)})}function i(e,t){var n=e.seg,r=t.seg,i=n.start,a=n.end,o=r.start,s=r.end;p&&p.checkIntersection(n,r);var l=f.linesIntersect(i,a,o,s);if(!1===l){if(!f.pointsCollinear(i,a,o))return!1;if(f.pointsSame(i,s)||f.pointsSame(a,o))return!1;var c=f.pointsSame(i,o),u=f.pointsSame(a,s);if(c&&u)return t;n=!c&&f.pointBetween(i,o,s),r=!u&&f.pointBetween(a,o,s);if(c)return r?g(t,a):g(e,s),t;n&&(u||(r?g(t,a):g(e,s)),g(t,i))}else 0===l.alongA&&(-1===l.alongB?g(e,o):0===l.alongB?g(e,l.pt):1===l.alongB&&g(e,s)),0===l.alongB&&(-1===l.alongA?g(t,i):0===l.alongA?g(t,l.pt):1===l.alongA&&g(t,a));return!1}for(var a=[];!m.isEmpty();){var o=m.getHead();if(p&&p.vert(o.pt[0]),o.isStart){p&&p.segmentNew(o.seg,o.primary);var s=r(o),l=s.before?s.before.ev:null,c=s.after?s.after.ev:null;p&&p.tempStatus(o.seg,!!l&&l.seg,!!c&&c.seg);var u,d=function(){if(l){var e=i(o,l);if(e)return e}return!!c&&i(o,c)}();if(d&&(h?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below)&&(d.seg.myFill.above=!d.seg.myFill.above):d.seg.otherFill=o.seg.myFill,p&&p.segmentUpdate(d.seg),o.other.remove(),o.remove()),m.getHead()!==o){p&&p.rewind(o.seg);continue}h?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below,o.seg.myFill.below=c?c.seg.myFill.above:e,o.seg.myFill.above=u?!o.seg.myFill.below:o.seg.myFill.below):null===o.seg.otherFill&&(d=c?(o.primary===c.primary?c.seg.otherFill:c.seg.myFill).above:o.primary?t:e,o.seg.otherFill={above:d,below:d}),p&&p.status(o.seg,!!l&&l.seg,!!c&&c.seg),o.other.status=s.insert(_.node({ev:o}))}else{s=o.status;if(null===s)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");n.exists(s.prev)&&n.exists(s.next)&&i(s.prev.ev,s.next.ev),p&&p.statusRemove(s.ev.seg),s.remove(),o.primary||(s=o.seg.myFill,o.seg.myFill=o.seg.otherFill,o.seg.otherFill=s),a.push(o.seg)}m.getHead().remove()}return p&&p.done(),a}return h?{addRegion:function(e){for(var t,n=e[e.length-1],r=0;r<e.length;r++){var i=n,n=e[r],a=f.pointsCompare(i,n);0!==a&&o((t=a<0?i:n,i=a<0?n:i,{id:p?p.segmentId():-1,start:t,end:i,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return s(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){o(i(e.start,e.end,e),!0)}),n.forEach(function(e){o(i(e.start,e.end,e),!1)}),s(t,r)}}}},{"./linked-list":60}],60:[function(e,t,n){t.exports={create:function(){var i={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==i.root},isEmpty:function(){return null===i.root.next},getHead:function(){return i.root.next},insertBefore:function(e,t){for(var n=i.root,r=i.root.next;null!==r;){if(t(r))return e.prev=r.prev,(e.next=r).prev.next=e,void(r.prev=e);r=(n=r).next}(n.next=e).prev=n,e.next=null},findTransition:function(e){for(var t=i.root,n=i.root.next;null!==n&&!e(n);)n=(t=n).next;return{before:t===i.root?null:t,after:n,insert:function(e){return e.prev=t,e.next=n,t.next=e,null!==n&&(n.prev=e),e}}}};return i},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],61:[function(e,t,n){t.exports=function(e,v,b){var x=[],w=[];return e.forEach(function(e){var t=e.start,n=e.end;if(v.pointsSame(t,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(e);for(var r={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},a=r,o=0;o<x.length;o++){var s=(h=x[o])[0],l=(h[1],h[h.length-1]);h[h.length-2];if(v.pointsSame(s,t)){if(g(o,!0,!0))break}else if(v.pointsSame(s,n)){if(g(o,!0,!1))break}else if(v.pointsSame(l,t)){if(g(o,!1,!0))break}else if(v.pointsSame(l,n)&&g(o,!1,!1))break}if(a===r)return x.push([t,n]),void(b&&b.chainNew(t,n));if(a===i){b&&b.chainMatch(r.index);var c=r.index,u=r.matches_pt1?n:t,d=r.matches_head,h=x[c],f=d?h[0]:h[h.length-1],p=d?h[1]:h[h.length-2],m=d?h[h.length-1]:h[0],e=d?h[h.length-2]:h[1];return(v.pointsCollinear(p,f,u)&&(d?(b&&b.chainRemoveHead(r.index,u),h.shift()):(b&&b.chainRemoveTail(r.index,u),h.pop()),f=p),v.pointsSame(m,u))?(x.splice(c,1),v.pointsCollinear(e,m,f)&&(d?(b&&b.chainRemoveTail(r.index,f),h.pop()):(b&&b.chainRemoveHead(r.index,f),h.shift())),b&&b.chainClose(r.index),void w.push(h)):void(d?(b&&b.chainAddHead(r.index,u),h.unshift(u)):(b&&b.chainAddTail(r.index,u),h.push(u)))}f=r.index,d=i.index;b&&b.chainConnect(f,d);u=x[f].length<x[d].length;r.matches_head?i.matches_head?u?(_(f),y(f,d)):(_(d),y(d,f)):y(d,f):i.matches_head?y(f,d):u?(_(f),y(d,f)):(_(d),y(f,d))}function g(e,t,n){if(a.index=e,a.matches_head=t,a.matches_pt1=n,a!==r)return a=null,1;a=i}function _(e){b&&b.chainReverse(e),x[e].reverse()}function y(e,t){var n=x[e],r=x[t],i=n[n.length-1],a=n[n.length-2],o=r[0],s=r[1];v.pointsCollinear(a,i,o)&&(b&&b.chainRemoveTail(e,i),n.pop(),i=a),v.pointsCollinear(i,o,s)&&(b&&b.chainRemoveHead(t,o),r.shift()),b&&b.chainJoin(e,t),x[e]=n.concat(r),x.splice(t,1)}}),w}},{}],62:[function(e,t,n){function r(e,n,r){var i=[];return e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==n[t]&&i.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===n[t],below:2===n[t]},otherFill:null})}),r&&r.selected(i),i}t.exports={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}},{}],63:[function(e,t,n){var r,i,t=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],64:[function(l,e,c){!function(n,s){!function(){var r=l("process/browser.js").nextTick,e=Function.prototype.apply,i=Array.prototype.slice,a={},o=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof n?n:function(e){var t=o++,n=!(arguments.length<2)&&i.call(arguments,1);return a[t]=!0,r(function(){a[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete a[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":63,timers:64}],65:[function(e,H,t){!function(l){var c=/^\s+/,u=/\s+$/,r=0,a=l.round,d=l.min,h=l.max,e=l.random;function f(e,t){if(t=t||{},(e=e||"")instanceof f)return e;if(!(this instanceof f))return new f(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(c,"").replace(u,"").toLowerCase();var t,n=!1;if(M[e])e=M[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=j.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=j.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=j.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=j.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=j.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=j.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=j.hex8.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),a:I(t[4]),format:n?"name":"hex8"};if(t=j.hex6.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),format:n?"name":"hex"};if(t=j.hex4.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),a:I(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=j.hex3.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(B(e.r)&&B(e.g)&&B(e.b)?(t=function(e,t,n){return{r:255*C(e,255),g:255*C(t,255),b:255*C(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):B(e.h)&&B(e.s)&&B(e.v)?(r=P(e.s),i=P(e.v),t=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=l.floor(e),i=e-r,a=n*(1-t),e=n*(1-i*t),t=n*(1-(1-i)*t),r=r%6;return{r:255*[n,e,a,a,t,n][r],g:255*[t,n,n,e,a,a][r],b:255*[a,a,t,n,n,e][r]}}(e.h,r,i),o=!0,s="hsv"):B(e.h)&&B(e.s)&&B(e.l)&&(r=P(e.s),a=P(e.l),t=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e=C(e,360),t=C(t,100),n=C(n,100),0===t?r=i=a=n:(r=o(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),i=o(t,n,e),a=o(t,n,e-1/3));return{r:255*r,g:255*i,b:255*a}}(e.h,r,a),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=E(n),{ok:o,format:e.format||s,r:d(255,h(t.r,0)),g:d(255,h(t.g,0)),b:d(255,h(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=r++}function i(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,i=h(e,t,n),a=d(e,t,n),o=(i+a)/2;if(i==a)r=l=0;else{var s=i-a,l=.5<o?s/(2-i-a):s/(i+a);switch(i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,l:o}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,i=h(e,t,n),a=d(e,t,n),o=i,s=i-a,l=0===i?0:s/i;if(i==a)r=0;else{switch(i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,v:o}}function t(e,t,n,r){n=[O(a(e).toString(16)),O(a(t).toString(16)),O(a(n).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function s(e,t,n,r){return[O(R(r)),O(a(e).toString(16)),O(a(t).toString(16)),O(a(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.s-=t/100,e.s=L(e.s),f(e)}function p(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.s+=t/100,e.s=L(e.s),f(e)}function m(e){return f(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.l+=t/100,e.l=L(e.l),f(e)}function _(e,t){t=0===t?0:t||10;e=f(e).toRgb();return e.r=h(0,d(255,e.r-a(-t/100*255))),e.g=h(0,d(255,e.g-a(-t/100*255))),e.b=h(0,d(255,e.b-a(-t/100*255))),f(e)}function y(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.l-=t/100,e.l=L(e.l),f(e)}function v(e,t){e=f(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,f(e)}function b(e){e=f(e).toHsl();return e.h=(e.h+180)%360,f(e)}function x(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+120)%360,s:t.s,l:t.l}),f({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+90)%360,s:t.s,l:t.l}),f({h:(n+180)%360,s:t.s,l:t.l}),f({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+72)%360,s:t.s,l:t.l}),f({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var r=f(e).toHsl(),i=360/n,a=[f(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(f(r));return a}function k(e,t){t=t||6;for(var e=f(e).toHsv(),n=e.h,r=e.s,i=e.v,a=[],o=1/t;t--;)a.push(f({h:n,s:r,v:i})),i=(i+o)%1;return a}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:l.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:l.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:l.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=E(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),e=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),e=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){r=[O(a(e).toString(16)),O(a(t).toString(16)),O(a(n).toString(16)),O(R(r))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*C(this._r,255))+"%",g:a(100*C(this._g,255))+"%",b:a(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*C(this._r,255))+"%, "+a(100*C(this._g,255))+"%, "+a(100*C(this._b,255))+"%)":"rgba("+a(100*C(this._r,255))+"%, "+a(100*C(this._g,255))+"%, "+a(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&S[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+s((e=f(e))._r,e._g,e._b,e._a):n)+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){t=e.apply(null,[this].concat([].slice.call(t)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},f.fromRatio=function(e,t){if("object"==typeof e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:P(e[n]));e=r}return f(e,t)},f.equals=function(e,t){return!(!e||!t)&&f(e).toRgbString()==f(t).toRgbString()},f.random=function(){return f.fromRatio({r:e(),g:e(),b:e()})},f.mix=function(e,t,n){n=0===n?0:n||50;e=f(e).toRgb(),t=f(t).toRgb(),n/=100;return f({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},f.readability=function(e,t){e=f(e),t=f(t);return(l.max(e.getLuminance(),t.getLuminance())+.05)/(l.min(e.getLuminance(),t.getLuminance())+.05)},f.isReadable=function(e,t,n){var r=f.readability(e,t),i=!1,n=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(n);switch(n.level+n.size){case"AAsmall":case"AAAlarge":i=4.5<=r;break;case"AAlarge":i=3<=r;break;case"AAAsmall":i=7<=r}return i},f.mostReadable=function(e,t,n){for(var r,i=null,a=0,o=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,c=0;c<t.length;c++)a<(r=f.readability(e,t[c]))&&(a=r,i=f(t[c]));return f.isReadable(e,i,{level:s,size:l})||!o?i:(n.includeFallbackColors=!1,f.mostReadable(e,["#fff","#000"],n))};var M=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=f.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(M);function E(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function C(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n,n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=d(t,h(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),l.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function L(e){return d(1,h(0,e))}function D(e){return parseInt(e,16)}function O(e){return 1==e.length?"0"+e:""+e}function P(e){return e=e<=1?100*e+"%":e}function R(e){return l.round(255*parseFloat(e)).toString(16)}function I(e){return D(e)/255}var N,z,F,j=(z="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",F="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(e){return j.CSS_UNIT.exec(e)}void 0!==H&&H.exports?H.exports=f:window.tinycolor=f}(Math)},{}],66:[function(e,t,n){var i=e("../main"),e=e("object-assign"),a=i.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(o.prototype=new i.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e){var n=e.match(l);return n?n[0]:""}var r=this._validateYear(e),n=e.month(),e=""+this.toChineseMonth(r,n);return t&&e.length<2&&(e="0"+e),this.isIntercalaryMonth(r,n)&&(e+="i"),e},monthNames:function(e){if("string"==typeof e){var t=e.match(r);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},monthNamesShort:function(e){if("string"==typeof e){var t=e.match(c);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);return isNaN(r)?(""===t[0]&&(n=!0,t=t.substring(1)),""===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["","","","","","","","","","","",""].indexOf(t)):n="i"===(t=t[t.length-1])||"I"===t,this.toMonthIndex(e,r,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if("number"!=typeof(e=e.year?e.year():e)||e<1888||2111<e)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){e=this.intercalaryMonth(e);if(n&&t!==e||t<1||12<t)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||!n&&t<=e?t-1:t},toChineseMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);if(t<0||(e?12:11)<t)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||t<e?t+1:t},intercalaryMonth:function(e){return e=this._validateYear(e),h[e-h[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);return!!e&&e===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var r=this._validateYear(e,i.local.invalidyear),r=f[r-f[0]],r=a.newDate(r>>9&4095,r>>5&15,31&r);r.add(4-(r.dayOfWeek()||7),"d");r=this.toJD(e,t,n)-r.toJD();return 1+Math.floor(r/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);e=h[e-h[0]];if((e>>13?12:11)<t)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return e&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,void 0,n,i.local.invalidDate);e=this._validateYear(r.year()),t=r.month(),n=r.day();r=this.isIntercalaryMonth(e,t),r=function(e,t,n,r,i){var a,o;if("object"==typeof e)d=e,a=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=30))throw new Error("Lunar day outside range 1 - 30");a="object"==typeof r?(c=!1,r):(c=!!r,i||{}),d={year:e,month:t,day:n,isIntercalary:c}}o=d.day-1;var s,l=h[d.year-h[0]],c=l>>13;s=c&&(d.month>c||d.isIntercalary)?d.month:d.month-1;for(var u=0;u<s;u++)o+=l&1<<12-u?30:29;var d=f[d.year-f[0]],d=new Date(d>>9&4095,(d>>5&15)-1,(31&d)+o);return a.year=d.getFullYear(),a.month=1+d.getMonth(),a.day=d.getDate(),a}(e,this.toChineseMonth(e,t),n,r);return a.toJD(r.year,r.month,r.day)},fromJD:function(e){var t=a.fromJD(e),e=function(e,t,n,r){var i;if("object"==typeof e)o=e,i=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=31))throw new Error("Solar day outside range 1 - 31");o={year:e,month:t,day:n},i=r||{}}n=f[o.year-f[0]],r=o.year<<9|o.month<<5|o.day;i.year=n<=r?o.year:o.year-1,n=f[i.year-f[0]];var a,n=new Date(n>>9&4095,(n>>5&15)-1,31&n),o=new Date(o.year,o.month-1,o.day);a=Math.round((o-n)/864e5);var s,l=h[i.year-h[0]];for(s=0;s<13;s++){var c=l&1<<12-s?30:29;if(a<c)break;a-=c}n=l>>13;!n||s<n?(i.isIntercalary=!1,i.month=1+s):(i.isIntercalary=s===n,i.month=s);return i.day=1+a,i}(t.year(),t.month(),t.day()),t=this.toMonthIndex(e.year,e.month,e.isIntercalary);return this.newDate(e.year,t,e.day)},fromString:function(e){var t=e.match(s),n=this._validateYear(+t[1]),r=+t[2],e=!!t[3],e=this.toMonthIndex(n,r,e),t=+t[4];return this.newDate(n,e,t)},add:function(e,t,n){var r=e.year(),i=e.month(),a=this.isIntercalaryMonth(r,i),r=this.toChineseMonth(r,i),i=Object.getPrototypeOf(o.prototype).add.call(this,e,t,n);return"y"===n&&(e=i.year(),t=i.month(),n=this.isIntercalaryMonth(e,r),(r=a&&n?this.toMonthIndex(e,r,!0):this.toMonthIndex(e,r,!1))!==t&&i.month(r)),i}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,l=/^\d?\d[iI]?/m,r=/^??[]?/m,c=/^??[]?/m;i.calendars.chinese=o;var h=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":80,"object-assign":53}],67:[function(e,t,n){var r=e("../main");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(i.prototype=new r.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.coptic=i},{"../main":80,"object-assign":53}],68:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),400},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,i.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){n=this.dayOfWeek(e,t,n);return 2<=n&&n<=6},extraInfo:function(e,t,n){n=this._validate(e,t,n,i.local.invalidDate);return{century:a[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year()+(r.year()<0?1:0),t=r.month(),(n=r.day())+(1<t?16:0)+(2<t?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=15<e?16:0;var n=Math.floor(e/32)+1;return this.newDate(t<=0?t-1:t,n,e-32*(n-1)+1)}});var a={20:"Fruitbat",21:"Anchovy"};i.calendars.discworld=r},{"../main":80,"object-assign":53}],69:[function(e,t,n){var r=e("../main");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(i.prototype=new r.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.ethiopian=i},{"../main":80,"object-assign":53}],70:[function(e,t,n){var o=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new o.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this._leapYear(e.year())},_leapYear:function(e){return i(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,o.local.invalidMonth),12===t&&this.leapYear(e)||8===t&&5===i(this.daysInYear(e),10)?30:9===t&&3===i(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){n=this._validate(e,t,n,o.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=e<=0?e+1:e,i=this.jdEpoch+this._delay1(r)+this._delay2(r)+n+1;if(t<7){for(var a=7;a<=this.monthsInYear(e);a++)i+=this.daysInMonth(e,a);for(a=1;a<t;a++)i+=this.daysInMonth(e,a)}else for(a=7;a<t;a++)i+=this.daysInMonth(e,a);return i},_delay1:function(e){e=Math.floor((235*e-234)/19),e=29*e+Math.floor((12084+13753*e)/25920);return i(3*(e+1),7)<3&&e++,e},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),o.calendars.hebrew=r},{"../main":80,"object-assign":53}],71:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,i.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),t=r.month(),e=e<=0?e+1:e,(n=r.day())+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=(t=Math.floor((30*(e-this.jdEpoch)+10646)/10631))<=0?t-1:t,n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),e=e-this.toJD(t,n,1)+1;return this.newDate(t,n,e)}}),i.calendars.islamic=r},{"../main":80,"object-assign":53}],72:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return(e=t.year()<0?t.year()+1:t.year())%4==0},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5)+1524,n=Math.floor((t-122.1)/365.25),r=Math.floor(365.25*n),i=Math.floor((t-r)/30.6001),e=i-Math.floor(i<14?1:13),n=n-Math.floor(2<e?4716:4715),i=t-r-Math.floor(30.6001*i);return n<=0&&n--,this.newDate(n,e,i)}}),i.calendars.julian=r},{"../main":80,"object-assign":53}],73:[function(e,t,n){var r=e("../main");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}function o(e,t){return a(e-1,t)+1}e("object-assign")(i.prototype=new r.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year();var t=Math.floor(e/400);return e%=400,e+=e<0?400:0,t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(19<Math.abs(r)||0<n&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),!0},extraInfo:function(e,t,n){t=this._validate(e,t,n,r.local.invalidDate).toJD(),n=this._toHaab(t),t=this._toTzolkin(t);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[t[0]-1],tzolkinDay:t[0],tzolkinTrecena:t[1]}},_toHaab:function(e){e=a((e-=this.jdEpoch)+8+340,365);return[Math.floor(e/20)+1,a(e,20)]},_toTzolkin:function(e){return[o((e-=this.jdEpoch)+20,20),o(e+4,13)]},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20);return this.newDate(t,n,e%20)}}),r.calendars.mayan=i},{"../main":80,"object-assign":53}],74:[function(e,t,n){var o=e("../main"),e=e("object-assign");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}r.prototype=new o.baseCalendar;var s=o.instance("gregorian");e(r.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(e.year()+(e.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidMonth);(e=r.year())<0&&e++;for(var i=r.day(),a=1;a<r.month();a++)i+=this.daysPerMonth[a-1];return i+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),o.calendars.nanakshahi=r},{"../main":80,"object-assign":53}],75:[function(e,t,n){var s=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new s.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var t=0,n=this.minMonth;n<=12;n++)t+=this.NEPALI_CALENDAR_DATA[e][n];return t},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=s.instance(),i=0,a=t,o=e;this._createMissingCalendarData(e);e-=9<a||9===a&&n>=this.NEPALI_CALENDAR_DATA[o][0]?56:57;for(9!==t&&(i=n,a--);9!==a;)a<=0&&(a=12,o--),i+=this.NEPALI_CALENDAR_DATA[o][a],a--;return 9===t?(i+=n-this.NEPALI_CALENDAR_DATA[o][0])<0&&(i+=r.daysInYear(e)):i+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],r.newDate(e,1,1).add(i,"d").toJD()},fromJD:function(e){var t=s.instance().fromJD(e),e=t.year(),n=t.dayOfYear(),r=e+56;this._createMissingCalendarData(r);for(var i=9,e=this.NEPALI_CALENDAR_DATA[r][0],a=this.NEPALI_CALENDAR_DATA[r][i]-e+1;a<n;)12<++i&&(i=1,r++),a+=this.NEPALI_CALENDAR_DATA[r][i];e=this.NEPALI_CALENDAR_DATA[r][i]-(a-n);return this.newDate(r,i,e)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),s.calendars.nepali=r},{"../main":80,"object-assign":53}],76:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return 682*((e.year()-(0<e.year()?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-(n.dayOfWeek()+1)%7,"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);e=r.year(),t=r.month(),n=r.day();r=e-(0<=e?474:473),e=474+a(r,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*e-110)/2816)+365*(e-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(t/1029983),r=a(t,1029983),i=2820;1029982!==r&&(t=Math.floor(r/366),r=a(r,366),i=Math.floor((2134*t+2816*r+2815)/1028522)+t+1);i=(i=i+2820*n+474)<=0?i-1:i,n=e-this.toJD(i,1,1)+1,n=n<=186?Math.ceil(n/31):Math.ceil((n-6)/30),e=e-this.toJD(i,n,1)+1;return this.newDate(i,n,e)}}),i.calendars.persian=r,i.calendars.jalali=r},{"../main":80,"object-assign":53}],77:[function(e,t,n){var i=e("../main"),e=e("object-assign"),a=i.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new i.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(t.year());return a.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(r.year());return a.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,i.local.invalidDate),e=this._t2gYear(n.year());return a.toJD(e,n.month(),n.day())},fromJD:function(e){var t=a.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)}}),i.calendars.taiwan=r},{"../main":80,"object-assign":53}],78:[function(e,t,n){var i=e("../main"),e=e("object-assign"),a=i.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new i.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(t.year());return a.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(r.year());return a.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,i.local.invalidDate),e=this._t2gYear(n.year());return a.toJD(e,n.month(),n.day())},fromJD:function(e){var t=a.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),i.calendars.thai=r},{"../main":80,"object-assign":53}],79:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 355===this.daysInYear(e.year())},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,a.local.invalidMonth).toJD()-24e5+.5,r=0,i=0;i<o.length;i++){if(o[i]>n)return o[r]-o[r-1];r++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){t=this._validate(e,t,n,a.local.invalidDate),n=12*(t.year()-1)+t.month()-15292;return 24e5+(t.day()+o[n-1]-1)-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<o.length&&!(o[r]>t);r++)n++;var i=n+15292,a=Math.floor((i-1)/12),e=t-o[n-1]+1;return this.newDate(a+1,i-12*a,e)},isValid:function(e,t,n){return a.baseCalendar.prototype.isValid.apply(this,arguments)&&(1276<=(e=null!=e.year?e.year:e)&&e<=1500)},_validate:function(e,t,n,r){var i=a.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||1500<i.year)throw r.replace(/\{0\}/,this.local.name);return i}}),a.calendars.ummalqura=r;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":80,"object-assign":53}],80:[function(e,t,n){e=e("object-assign");function r(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function i(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function a(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function o(){this.shortYearCutoff="+10"}function s(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}e(r.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();var n=this._localCals[e+"-"+(t=t||"")];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,i){return(r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,i):r)||this.instance()).newDate(e,t,n)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(i,a){return function(e){for(var t="",n=0;0<e;){var r=e%10,t=(0==r?"":i[r]+a[n])+t;n++,e=Math.floor(e/10)}return(t=0===t.indexOf(i[1]+a[1])?t.substr(1):t)||i[0]}}}),e(i.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0==e?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+a(Math.abs(this.year()),4)+"-"+a(this.month(),2)+"-"+a(this.day(),2)}}),e(o.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new i(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+a(Math.abs(e.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return(t.month()+this.monthsInYear(t)-this.firstMonth)%this.monthsInYear(t)+this.minMonth},fromMonthOfYear:function(e,t){t=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth),t},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),r=e.calendar().fromJD(r);return this._validateLevel--,[r.year(),r.month(),r.day()]}try{var i=e.year()+("y"===n?t:0),a=e.monthOfYear()+("m"===n?t:0),r=e.day();"y"===n?(e.month()!==this.fromMonthOfYear(i,a)&&(a=this.newDate(i,e.month(),this.minDay).monthOfYear()),a=Math.min(a,this.monthsInYear(i)),r=Math.min(r,this.daysInMonth(i,this.fromMonthOfYear(i,a)))):"m"===n&&(function(e){for(;a<e.minMonth;)i--,a+=e.monthsInYear(i);for(var t=e.monthsInYear(i);a>t-1+e.minMonth;)i++,a-=t,t=e.monthsInYear(i)}(this),r=Math.min(r,this.daysInMonth(i,this.fromMonthOfYear(i,a))));var o=[i,this.fromMonthOfYear(i,a),r];return this._validateLevel--,o}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){return this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&0<e.year()==0<t[0]||(r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],t=this._add(e,n*r[0]+(n<0?-1:1)*r[1],r[2])),e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),i="m"===n?t:e.month(),t="d"===n?t:e.day();return"y"!==n&&"m"!==n||(t=Math.min(t,this.daysInMonth(r,i))),e.date(r,i,t)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;return r&&(e=this.newDate(e,t,this.minDay),r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(e)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(e)),this._validateLevel--,r},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return l.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(l.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var i=this.newDate(e,t,n);return this._validateLevel--,i}catch(e){throw this._validateLevel--,e}}}),e(s.prototype=new o,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);r=Math.floor(e/100),r=2-r+Math.floor(r/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25),r=1524+(n=t+1+n-Math.floor(n/4)),e=Math.floor((r-122.1)/365.25),t=Math.floor(365.25*e),n=Math.floor((r-t)/30.6001),t=r-t-Math.floor(30.6001*n),n=n-(13.5<n?13:1),e=e-(2.5<n?4716:4715);return e<=0&&e--,this.newDate(e,n,t)},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=new Date(n.year(),n.month()-1,n.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(12<n.getHours()?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var l=t.exports=new r;l.cdate=i,l.baseCalendar=o,l.calendars.gregorian=s},{"object-assign":53}],81:[function(e,t,n){var r=e("object-assign"),M=e("./main");r(M.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),M.local=M.regionalOptions[""],r(M.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(M.baseCalendar.prototype,{UNIX_EPOCH:M.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:M.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,e,t){if("string"!=typeof r&&(t=e,e=r,r=""),!e)return"";if(e.calendar()!==this)throw M.local.invalidFormat||M.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;function a(e,t){for(var n=1;x+n<r.length&&r.charAt(x+n)===e;)n++;return x+=n-1,1<Math.floor(n/(t||1))}function n(e,t,n,r){var i=""+t;if(a(e,r))for(;i.length<n;)i="0"+i;return i}for(var i,o,s,l,c,u,d=(t=t||{}).dayNamesShort||this.local.dayNamesShort,h=t.dayNames||this.local.dayNames,f=t.monthNumbers||this.local.monthNumbers,p=t.monthNamesShort||this.local.monthNamesShort,m=t.monthNames||this.local.monthNames,g=(t.calculateWeek||this.local.calculateWeek,this),_=this.local.digits,y=function(e){return t.localNumbers&&_?_(e):e},v="",b=!1,x=0;x<r.length;x++)if(b)"'"!==r.charAt(x)||a("'")?v+=r.charAt(x):b=!1;else switch(r.charAt(x)){case"d":v+=y(n("d",e.day(),2));break;case"D":v+=(s="D",l=e.dayOfWeek(),c=d,u=h,(a(s)?u:c)[l]);break;case"o":v+=n("o",e.dayOfYear(),3);break;case"w":v+=n("w",e.weekOfYear(),2);break;case"m":v+=(o=e,"function"==typeof f?f.call(g,o,a("m")):y(n("m",o.month(),2)));break;case"M":v+=(i=e,a("M")?"function"==typeof m?m.call(g,i):m[i.month()-g.minMonth]:"function"==typeof p?p.call(g,i):p[i.month()-g.minMonth]);break;case"y":v+=a("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":a("Y",2),v+=e.formatYear();break;case"J":v+=e.toJD();break;case"@":v+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":v+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":a("'")?v+="'":b=!0;break;default:v+=r.charAt(x)}return v},parseDate:function(r,o,e){if(null==o)throw M.local.invalidArguments||M.regionalOptions[""].invalidArguments;if(""===(o="object"==typeof o?o.toString():o+""))return null;r=r||this.local.dateFormat;function s(e,t){for(var n=1;T+n<r.length&&r.charAt(T+n)===e;)n++;return T+=n-1,1<Math.floor(n/(t||1))}function t(e,t){if(t=s(e,t),e=[2,3,t?4:2,t?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],e=new RegExp("^-?\\d{1,"+e+"}"),!(e=o.substring(w).match(e)))throw(M.local.missingNumberAt||M.regionalOptions[""].missingNumberAt).replace(/\{0\}/,w);return w+=e[0].length,parseInt(e[0],10)}function n(e,t,n,r){for(var i=s(e,r)?n:t,a=0;a<i.length;a++)if(o.substr(w,i[a].length).toLowerCase()===i[a].toLowerCase())return w+=i[a].length,a+x.minMonth;throw(M.local.unknownNameAt||M.regionalOptions[""].unknownNameAt).replace(/\{0\}/,w)}function i(){if(o.charAt(w)!==r.charAt(T))throw(M.local.unexpectedLiteralAt||M.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,w);w++}for(var a="string"!=typeof(a=(e=e||{}).shortYearCutoff||this.shortYearCutoff)?a:this.today().year()%100+parseInt(a,10),l=e.dayNamesShort||this.local.dayNamesShort,c=e.dayNames||this.local.dayNames,u=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,h=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames,p=-1,m=-1,g=-1,_=-1,y=-1,v=!1,b=!1,x=this,w=0,T=0;T<r.length;T++)if(b)"'"!==r.charAt(T)||s("'")?i():b=!1;else switch(r.charAt(T)){case"d":_=t("d");break;case"D":n("D",l,c);break;case"o":y=t("o");break;case"w":t("w");break;case"m":g=function(){if("function"!=typeof d)return t("m");s("m");var e=d.call(x,o.substring(w));return w+=e.length,e}();break;case"M":g=function(){if("function"!=typeof f)return n("M",h,f);var e=(s("M")?f:h).call(x,o.substring(w));return w+=e.length,e}();break;case"y":var A=T,v=!s("y",2),T=A,m=t("y",2);break;case"Y":m=t("Y",2);break;case"J":p=t("J")+.5,"."===o.charAt(w)&&(w++,t("J"));break;case"@":p=t("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=t("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":w=o.length;break;case"'":s("'")?i():b=!0;break;default:i()}if(w<o.length)throw M.local.unexpectedText||M.regionalOptions[""].unexpectedText;if(-1===m?m=this.today().year():m<100&&v&&(m+=-1===a?1900:this.today().year()-this.today().year()%100-(m<=a?0:100)),"string"==typeof g&&(g=u.call(this,m,g)),-1<y)for(var g=1,_=y,k=this.daysInMonth(m,g);k<_;k=this.daysInMonth(m,g))g++,_-=k;return-1<p?this.fromJD(p):this.newDate(m,g,_)},determineDate:function(e,t,i,a,o){i&&"object"!=typeof i&&(o=a,a=i,i=null),"string"!=typeof a&&(o=a,a="");var s=this;return t=t?t.newDate():null,e=null==e?t:"string"==typeof e?function(e){try{return s.parseDate(a,e,o)}catch(e){}for(var t=((e=e.toLowerCase()).match(/^c/)&&i?i.newDate():null)||s.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,r=n.exec(e);r;)t.add(parseInt(r[1],10),r[2]||"d"),r=n.exec(e);return t}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e)}})},{"./main":80,"object-assign":53}],82:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],83:[function(e,t,n){"use strict";var r=e("./arrow_paths"),i=e("../../plots/font_attributes"),a=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/font_attributes":305,"./arrow_paths":82}],84:[function(e,t,n){"use strict";var r=e("../../lib"),p=e("../../plots/cartesian/axes"),i=e("./draw").draw;function a(a){var e=a._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var t=p.getFromId(a,e.xref),n=p.getFromId(a,e.yref),r=p.getRefType(e.xref),i=p.getRefType(e.yref);e._extremes={},"range"===r&&o(e,t),"range"===i&&o(e,n)})}function o(e,t){var n=t._id,r=n.charAt(0),i=e[r],a=e["a"+r],o=e[r+"ref"],s=e["a"+r+"ref"],l=e["_"+r+"padplus"],c=e["_"+r+"padminus"],u={x:1,y:-1}[r]*e[r+"shift"],d=3*e.arrowsize*e.arrowwidth||0,h=d+u,f=d-u,r=3*e.startarrowsize*e.arrowwidth||0,d=r+u,u=r-u;u=s===o?(s=p.findExtremes(t,[t.r2c(i)],{ppadplus:h,ppadminus:f}),o=p.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,d),ppadminus:Math.max(c,u)}),{min:[s.min[0],o.min[0]],max:[s.max[0],o.max[0]]}):(d=a?d+a:d,u=a?u-a:u,p.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,h,d),ppadminus:Math.max(c,f,u)})),e._extremes[n]=u}t.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([i,a],e)}},{"../../lib":230,"../../plots/cartesian/axes":276,"./draw":89}],85:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../registry"),u=e("../../plot_api/plot_template").arrayEditor;function d(e,t){for(var n,r,i,a,o,s,l=e._fullLayout.annotations,c=[],u=[],d=[],h=(t||[]).length,f=0;f<l.length;f++)if(i=(r=l[f]).clicktoshow){for(n=0;n<h;n++)if(o=(a=t[n]).xaxis,s=a.yaxis,o._id===r.xref&&s._id===r.yref&&o.d2r(a.x)===p(r._xclick,o)&&s.d2r(a.y)===p(r._yclick,s)){(r.visible?"onout"===i?u:d:c).push(f);break}n===h&&r.visible&&"onout"===i&&u.push(f)}return{on:c,off:u,explicitOff:d}}function p(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){t=d(e,t);return 0<t.on.length||0<t.explicitOff.length},onClick:function(e,t){var n,r,t=d(e,t),i=t.on,a=t.off.concat(t.explicitOff),o={},s=e._fullLayout.annotations;if(i.length||a.length){for(n=0;n<i.length;n++)(r=u(e.layout,"annotations",s[i[n]])).modifyItem("visible",!0),l.extendFlat(o,r.getUpdateObj());for(n=0;n<a.length;n++)(r=u(e.layout,"annotations",s[a[n]])).modifyItem("visible",!1),l.extendFlat(o,r.getUpdateObj());return c.call("update",e,{},o)}}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313}],86:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../color");t.exports=function(e,t,n,r){r("opacity");var i=r("bgcolor"),a=r("bordercolor"),o=d.opacity(a);r("borderpad");var s,l,c=r("borderwidth"),a=r("showarrow");r("text",a?" ":n._dfltTitle.annotation),r("textangle"),u.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),a&&(-1!==(a=r("arrowside")).indexOf("end")&&(s=r("arrowhead"),l=r("arrowsize")),-1!==a.indexOf("start")&&(r("startarrowhead",s),r("startarrowsize",l)),r("arrowcolor",o?t.bordercolor:d.defaultLine),r("arrowwidth",2*(o&&c||1)),r("standoff"),r("startstandoff"));c=r("hovertext"),n=n.hoverlabel||{};c&&(i=r("hoverlabel.bgcolor",n.bgcolor||(d.opacity(i)?d.rgb(i):d.defaultLine)),i=r("hoverlabel.bordercolor",n.bordercolor||d.contrast(i)),u.coerceFont(r,"hoverlabel.font",{family:n.font.family,size:n.font.size,color:n.font.color||i})),r("captureevents",!!c)}},{"../../lib":230,"../color":100}],87:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),h=e("../../lib/to_log_range");t.exports=function(e,r,t,i){r=r||{};var a="log"===t&&"linear"===r.type,t="linear"===t&&"log"===r.type;if(a||t)for(var o,s,n=e._fullLayout.annotations,l=r._id.charAt(0),c=0;c<n.length;c++)o=n[c],s="annotations["+c+"].",o[l+"ref"]===r._id&&u(l),o["a"+l+"ref"]===r._id&&u("a"+l);function u(e){var t=o[e],n=null,n=a?h(t,r.range):Math.pow(10,t);d(n)||(n=null),i(s+e,n)}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],88:[function(e,t,n){"use strict";var m=e("../../lib"),g=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),_=e("./common_defaults"),y=e("./attributes");function i(n,r,e){function t(e,t){return m.coerce(n,r,y,e,t)}var i=t("visible"),a=t("clicktoshow");if(i||a){_(n,r,e,t);for(var o=r.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:e},u=0;u<2;u++){var d,h,f=s[u],p=g.coerceRef(n,r,c,f,"","paper");"paper"!==p&&g.getFromId(c,p)._annIndices.push(r._index),g.coercePosition(r,c,t,p,f,.5),o&&("pixel"!==(h=g.coerceRef(n,r,c,d="a"+f,"pixel",["pixel","paper"]))&&h!==p&&(h=r[d]="pixel"),g.coercePosition(r,c,t,h,d,"pixel"===h?l[u]:.4)),t(f+"anchor"),t(f+"shift")}m.noneOrAll(n,r,["x","y"]),o&&m.noneOrAll(n,r,["ax","ay"]),a&&(e=t("xclick"),a=t("yclick"),r._xclick=void 0===e?r.x:g.cleanPosition(e,c,r.xref),r._yclick=void 0===a?r.y:g.cleanPosition(a,c,r.yref))}}t.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:i})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":83,"./common_defaults":86}],89:[function(e,t,n){"use strict";var o=e("@plotly/d3"),ie=e("../../registry"),r=e("../../plots/plots"),ae=e("../../lib"),oe=ae.strTranslate,se=e("../../plots/cartesian/axes"),le=e("../color"),ce=e("../drawing"),s=e("../fx"),ue=e("../../lib/svg_text_utils"),de=e("../../lib/setcursor"),he=e("../dragelement"),l=e("../../plot_api/plot_template").arrayEditor,fe=e("./draw_arrow_head");function i(e,t){var n=e._fullLayout.annotations[t]||{},r=se.getFromId(e,n.xref),i=se.getFromId(e,n.yref);r&&r.setScale(),i&&i.setScale(),a(e,n,t,!1,r,i)}function pe(e,t,n,r,i){var a=i[n],i=i[n+"ref"],n=-1!==n.indexOf("y"),i="domain"===se.getRefType(i),r=n?r.h:r.w;return e?i?a+(n?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(n?-t:t)/r}function a(P,R,t,I,N,z){var F=P._fullLayout,j=P._fullLayout._size,B=P._context.edits,e=I?(r="annotation-"+I,I+".annotations"):(r="annotation","annotations"),e=l(P.layout,e,R),H=e.modifyBase,U=e.modifyItem,V=e.getUpdateObj;F._infolayer.selectAll("."+r+'[data-index="'+t+'"]').remove();var q,Y,G,W,X,Z,J,$,Q,K,ee,n,r,te,ne="clip"+F._uid+"_ann"+t;function re(e){e={index:t,annotation:R._input,fullAnnotation:R,event:e};return I&&(e.subplotId=I),e}function i(e){return e.call(ce.font,n).attr({"text-anchor":{left:"start",right:"end"}[R.align]||"middle"}),ue.convertToTspans(e,P,a),e}function a(){var e=te.selectAll("a");1===e.size()&&e.text()===te.text()&&Z.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var t=Z.select(".annotation-text-math-group"),n=!t.empty(),r=ce.bBox((n?t:te).node()),i=r.width,a=r.height,o=R.width||i,s=R.height||a,l=Math.round(o+2*$),c=Math.round(s+2*$);function u(e,t){return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t="auto"===t?e<1/3?"left":2/3<e?"right":"center":t]}for(var d,h,f,p=!1,m=["x","y"],g=0;g<m.length;g++){var _,y,v,b,x,w=m[g],T=R[w+"ref"]||w,A=R["a"+w+"ref"],k={x:N,y:z}[w],M=(Y+("x"===w?0:-90))*Math.PI/180,S=l*Math.cos(M),E=c*Math.sin(M),C=Math.abs(S)+Math.abs(E),L=R[w+"anchor"],D=R[w+"shift"]*("x"===w?1:-1),O=q[w],M=se.getRefType(T);M=k&&"domain"!==M?(((y=k.r2fraction(R[w]))<0||1<y)&&(A!==T||(y=k.r2fraction(R["a"+w]))<0||1<y)&&(p=!0),y=k._offset+k.r2p(R[w]),.5):(x="domain"===M,y="x"===w?(_=R[w],x?k._offset+k._length*_:j.l+j.w*_):(_=1-R[w],x?k._offset+k._length*_:j.t+j.h*_),R.showarrow?.5:_),R.showarrow?(O.head=y,x=R["a"+w],v=S*u(.5,R.xanchor)-E*u(.5,R.yanchor),b=A===T?(b=se.getRefType(A),O.tail="domain"===b?k._offset+k._length*(x="y"===w?1-x:x):"paper"===b?"y"===w?j.t+j.h*(x=1-x):j.l+j.w*x:k._offset+k.r2p(x),v):(O.tail=y+x,v+x),O.text=O.tail+v,x=F["x"===w?"width":"height"],"paper"===T&&(O.head=ae.constrain(O.head,1,x-1)),"pixel"===A&&(A=-Math.max(O.tail-3,O.text),x=Math.min(O.tail+3,O.text)-x,0<A?(O.tail+=A,O.text+=A):0<x&&(O.tail-=x,O.text-=x)),O.tail+=D,O.head+=D):(b=v=C*u(M,L),O.text=y+v),O.text+=D,v+=D,b+=D,R["_"+w+"padplus"]=C/2+b,R["_"+w+"padminus"]=C/2-b,R["_"+w+"size"]=C,R["_"+w+"shift"]=v}p?Z.remove():(e=d=0,"left"!==R.align&&(d=(o-i)*("center"===R.align?.5:1)),"top"!==R.valign&&(e=(s-a)*("middle"===R.valign?.5:1)),n?t.select("svg").attr({x:$+d-1,y:$+e}).call(ce.setClipUrl,K?ne:null,P):(e=$+e-r.top,r=$+d-r.left,te.call(ue.positionText,r,e).call(ce.setClipUrl,K?ne:null,P)),ee.select("rect").call(ce.setRect,$,$,o,s),Q.call(ce.setRect,J/2,J/2,l-J,c-J),Z.call(ce.setTranslate,Math.round(q.x.text-l/2),Math.round(q.y.text-c/2)),W.attr({transform:"rotate("+Y+","+q.x.text+","+q.y.text+")"}),h=function(e,t){G.selectAll(".annotation-arrow-g").remove();var i,a,o,n=q.x.head,r=q.y.head,s=q.x.tail+e,l=q.y.tail+t,c=q.x.text+e,u=q.y.text+t,d=ae.rotationXYMatrix(Y,c,u),h=ae.apply2DTransform(d),e=ae.apply2DTransform2(d),t=+Q.attr("width"),d=+Q.attr("height"),c=c-.5*t,t=c+t,u=u-.5*d,d=u+d,t=[[c,u,c,d],[c,d,t,d],[t,d,t,u],[t,u,c,u]].map(e);t.reduce(function(e,t){return e^!!ae.segmentsIntersect(n,r,n+1e6,r+1e6,t[0],t[1],t[2],t[3])},!1)||(t.forEach(function(e){e=ae.segmentsIntersect(s,l,n,r,e[0],e[1],e[2],e[3]);e&&(s=e.x,l=e.y)}),c=R.arrowwidth,u=R.arrowcolor,e=R.arrowside,t=(i=G.append("g").style({opacity:le.opacity(u)}).classed("annotation-arrow-g",!0)).append("path").attr("d","M"+s+","+l+"L"+n+","+r).style("stroke-width",c+"px").call(le.stroke,le.rgb(u)),fe(t,e,R),B.annotationPosition&&t.node().parentNode&&!I&&(u=n,e=r,R.standoff&&(t=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-l,2)),u+=R.standoff*(s-n)/t,e+=R.standoff*(l-r)/t),c=i.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(s-u)+","+(l-e),transform:oe(u,e)}).style("stroke-width",c+6+"px").call(le.stroke,"rgba(0,0,0,0)").call(le.fill,"rgba(0,0,0,0)"),he.init({element:c.node(),gd:P,prepFn:function(){var e=ce.getTranslate(Z);a=e.x,o=e.y,N&&N.autorange&&H(N._name+".autorange",!0),z&&z.autorange&&H(z._name+".autorange",!0)},moveFn:function(e,t){var n=h(a,o),r=n[0]+e,n=n[1]+t;Z.call(ce.setTranslate,r,n),U("x",pe(N,e,"x",j,R)),U("y",pe(z,t,"y",j,R)),R.axref===R.xref&&U("ax",pe(N,e,"ax",j,R)),R.ayref===R.yref&&U("ay",pe(z,t,"ay",j,R)),i.attr("transform",oe(e,t)),W.attr({transform:"rotate("+Y+","+r+","+n+")"})},doneFn:function(){ie.call("_guiRelayout",P,V());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})))},R.showarrow&&h(0,0),X&&he.init({element:Z.node(),gd:P,prepFn:function(){f=W.attr("transform")},moveFn:function(e,t){var n,r,i,a="pointer";if(R.showarrow)R.axref===R.xref?U("ax",pe(N,e,"ax",j,R)):U("ax",R.ax+e),R.ayref===R.yref?U("ay",pe(z,t,"ay",j.w,R)):U("ay",R.ay+t),h(e,t);else{if(I)return;n=N?pe(N,e,"x",j,R):(r=R._xsize/j.w,n=R.x+(R._xshift-R.xshift)/j.w-r/2,he.align(n+e/j.w,r,0,1,R.xanchor)),i=z?pe(z,t,"y",j,R):(i=R._ysize/j.h,r=R.y-(R._yshift+R.yshift)/j.h-i/2,he.align(r-t/j.h,i,0,1,R.yanchor)),U("x",n),U("y",i),N&&z||(a=he.getCursor(N?.5:n,z?.5:i,R.xanchor,R.yanchor))}W.attr({transform:oe(e,t)+f}),de(Z,a)},clickFn:function(e,t){R.captureevents&&P.emit("plotly_clickannotation",re(t))},doneFn:function(){de(Z),ie.call("_guiRelayout",P,V());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}}))}R._input&&!1!==R.visible?(q={x:{},y:{}},Y=+R.textangle||0,G=F._infolayer.append("g").classed(r,!0).attr("data-index",String(t)).style("opacity",R.opacity),W=G.append("g").classed("annotation-text-g",!0),X=B[R.showarrow?"annotationTail":"annotationPosition"],r=R.captureevents||B.annotationText||X,Z=W.append("g").style("pointer-events",r?"all":null).call(de,"pointer").on("click",function(){P._dragging=!1,P.emit("plotly_clickannotation",re(o.event))}),R.hovertext&&Z.on("mouseover",function(){var e=R.hoverlabel,t=e.font,n=this.getBoundingClientRect(),r=P.getBoundingClientRect();s.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:R.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:P})}).on("mouseout",function(){s.loneUnhover(F._hoverlayer.node())}),J=R.borderwidth,r=R.borderpad,$=J+r,Q=Z.append("rect").attr("class","bg").style("stroke-width",J+"px").call(le.stroke,R.bordercolor).call(le.fill,R.bgcolor),K=R.width||R.height,(ee=F._topclips.selectAll("#"+ne).data(K?[0]:[])).enter().append("clipPath").classed("annclip",!0).attr("id",ne).append("rect"),ee.exit().remove(),n=R.font,r=F._meta?ae.templateString(R.text,F._meta):R.text,te=Z.append("text").classed("annotation-text",!0).text(r),B.annotationText?te.call(ue.makeEditable,{delegate:Z,gd:P}).call(i).on("edit",function(e){R.text=e,this.call(i),U("text",e),N&&N.autorange&&H(N._name+".autorange",!0),z&&z.autorange&&H(z._name+".autorange",!0),ie.call("_guiRelayout",P,V())}):te.call(i)):o.selectAll("#"+ne).remove()}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&i(e,n);return r.previousPromises(e)},drawOne:i,drawRaw:a}},{"../../lib":230,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../fx":140,"./draw_arrow_head":90,"@plotly/d3":11}],90:[function(e,t,n){"use strict";var T=e("@plotly/d3"),A=e("../color"),k=e("./arrow_paths"),e=e("../../lib"),M=e.strScale,S=e.strRotate,E=e.strTranslate;t.exports=function(i,e,a){var o=i.node(),t=k[a.arrowhead||0],n=k[a.startarrowhead||0],r=(a.arrowwidth||1)*(a.arrowsize||1),s=(a.arrowwidth||1)*(a.startarrowsize||1),l=0<=e.indexOf("start"),c=0<=e.indexOf("end"),u=t.backoff*r+a.standoff,d=n.backoff*s+a.startstandoff;if("line"===o.nodeName){var h,f={x:+i.attr("x1"),y:+i.attr("y1")},p={x:+i.attr("x2"),y:+i.attr("y2")},m=f.x-p.x,g=f.y-p.y,_=(h=Math.atan2(g,m))+Math.PI;if(u&&d&&u+d>Math.sqrt(m*m+g*g))return void x();if(u){if(m*m+g*g<u*u)return void x();var y=u*Math.cos(h),e=u*Math.sin(h);p.x+=y,p.y+=e,i.attr({x2:p.x,y2:p.y})}if(d){if(m*m+g*g<d*d)return void x();var v=d*Math.cos(h),b=d*Math.sin(h);f.x-=v,f.y-=b,i.attr({x1:f.x,y1:f.y})}}else if("path"===o.nodeName){m=o.getTotalLength();if(m<u+d)return void x();v=o.getPointAtLength(0),b=o.getPointAtLength(.1);h=Math.atan2(v.y-b.y,v.x-b.x),f=o.getPointAtLength(Math.min(d,m));g="0px,"+d+"px,",v=o.getPointAtLength(m),b=o.getPointAtLength(m-.1);_=Math.atan2(v.y-b.y,v.x-b.x),p=o.getPointAtLength(Math.max(0,m-u)),i.style("stroke-dasharray",g+=m-(g?d+u:u)+"px,"+m+"px")}function x(){i.style("stroke-dasharray","0px,100px")}function w(e,t,n,r){e.path&&(e.noRotate&&(n=0),T.select(o.parentNode).append("path").attr({class:i.attr("class"),d:e.path,transform:E(t.x,t.y)+S(180*n/Math.PI)+M(r)}).style({fill:A.rgb(a.arrowcolor),"stroke-width":0}))}l&&w(n,f,h,s),c&&w(t,p,_,r)}},{"../../lib":230,"../color":100,"./arrow_paths":82,"@plotly/d3":11}],91:[function(e,t,n){"use strict";var r=e("./draw"),i=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":83,"./calc_autorange":84,"./click":85,"./convert_coords":87,"./defaults":88,"./draw":89}],92:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../plot_api/edit_types").overrideAll,e=e("../../plot_api/plot_template").templatedArray;t.exports=i(e("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../annotations/attributes":83}],93:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("../../plots/cartesian/axes");t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)!function(e,t){var n=t.fullSceneLayout.domain,r=t.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},i.extendFlat(e._xa,t),a.setConvert(e._xa),e._xa._offset=r.l+n.x[0]*r.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*r.w*(n.x[1]-n.x[0])},e._ya={},i.extendFlat(e._ya,t),a.setConvert(e._ya),e._ya._offset=r.t+(1-n.y[1])*r.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*r.h*(n.y[1]-n.y[0])}}(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":230,"../../plots/cartesian/axes":276}],94:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),l=e("../annotations/common_defaults"),c=e("./attributes");function i(n,r,i,e){function a(e,t){return o.coerce(n,r,c,e,t)}function t(e){var t=e+"axis",n={_fullLayout:{}};return n._fullLayout[t]=i[t],s.coercePosition(r,n,a,e,e,.5)}a("visible")&&(l(n,r,e.fullLayout,a),t("x"),t("y"),t("z"),o.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",a("ax",-10),a("ay",-30),o.noneOrAll(n,r,["ax","ay"])))}t.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:i,fullLayout:n.fullLayout})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"../annotations/common_defaults":86,"./attributes":92}],95:[function(e,t,n){"use strict";var u=e("../annotations/draw").drawRaw,d=e("../../plots/gl3d/project"),h=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,i=0;i<r.length;i++){for(var a=r[i],o=!1,s=0;s<3;s++){var l=h[s],c=a[l],c=t[l+"axis"].r2fraction(c);if(c<0||1<c){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+i+'"]').remove():(a._pdata=d(e.glplot.cameraParams,[t.xaxis.r2l(a.x)*n[0],t.yaxis.r2l(a.y)*n[1],t.zaxis.r2l(a.z)*n[2]]),u(e.graphDiv,a,i,e.id,a._xa,a._ya))}}},{"../../plots/gl3d/project":308,"../annotations/draw":89}],96:[function(e,t,n){"use strict";var s=e("../../registry"),l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=s.subplotsRegistry.gl3d;if(n)for(var r=n.attrRegex,i=Object.keys(e),a=0;a<i.length;a++){var o=i[a];r.test(o)&&(e[o].annotations||[]).length&&(l.pushUnique(t._basePlotModules,n),l.pushUnique(t._subplots.gl3d,o))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":230,"../../registry":313,"./attributes":92,"./convert":93,"./defaults":94,"./draw":95}],97:[function(e,t,n){"use strict";t.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":66,"world-calendars/dist/calendars/coptic":67,"world-calendars/dist/calendars/discworld":68,"world-calendars/dist/calendars/ethiopian":69,"world-calendars/dist/calendars/hebrew":70,"world-calendars/dist/calendars/islamic":71,"world-calendars/dist/calendars/julian":72,"world-calendars/dist/calendars/mayan":73,"world-calendars/dist/calendars/nanakshahi":74,"world-calendars/dist/calendars/nepali":75,"world-calendars/dist/calendars/persian":76,"world-calendars/dist/calendars/taiwan":77,"world-calendars/dist/calendars/thai":78,"world-calendars/dist/calendars/ummalqura":79,"world-calendars/dist/main":80,"world-calendars/dist/plus":81}],98:[function(e,t,n){"use strict";function a(e,t,n,r){var i={};return i[n]=s,o.coerce(e,t,i,n,r)}var r=e("./calendars"),o=e("../../lib"),i=e("../../constants/numerical"),c=i.EPOCHJD,u=i.ONEDAY,s={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var l={};function h(e){var t=l[e];return t=t||(l[e]=r.instance(e))}function f(e){return o.extendFlat({},s,{description:e})}function p(e){return"Sets the calendar system to use with `"+e+"` date data."}var m={xcalendar:f(p("x"))},g=o.extendFlat({},m,{ycalendar:f(p("y"))}),e=o.extendFlat({},g,{zcalendar:f(p("z"))}),i=f(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:e,surface:e,mesh3d:e,scattergl:g,ohlc:m,candlestick:m},layout:{calendar:f(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:i},yaxis:{calendar:i},scene:{xaxis:{calendar:i},yaxis:{calendar:i},zaxis:{calendar:i}},polar:{radialaxis:{calendar:i}}},transforms:{filter:{valuecalendar:f(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:f(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:s,handleDefaults:a,handleTraceDefaults:function(e,t,n,r){for(var i=0;i<n.length;i++)a(e,t,n[i]+"calendar",r.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:h,worldCalFmt:function(e,t,n){for(var r,i,a,o,t=Math.floor((t+.05)/u)+c,s=h(n).fromJD(t),l=0;-1!==(l=e.indexOf("%",l));)"0"===(o=e.charAt(l+1))||"-"===o||"_"===o?(i=3,r=e.charAt(l+2),"_"===o&&(o="-")):(r=o,o="0",i=2),(a=d[r])?(o="##"===a?"##":s.formatDate(a[o]),e=e.substr(0,l)+o+e.substr(l+i),l+=o.length):l+=i;return e}}},{"../../constants/numerical":210,"../../lib":230,"./calendars":97}],99:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],100:[function(e,t,n){"use strict";var i=e("tinycolor2"),a=e("fast-isnumeric"),o=e("../../lib/array").isTypedArray,s=t.exports={},e=e("./attributes");s.defaults=e.defaults;var l=s.defaultLine=e.defaultLine;s.lightLine=e.lightLine;var c=s.background=e.background;function u(e){if(a(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),n="a"===t.charAt(3)&&4===r.length;if(!n&&3!==r.length)return e;for(var i=0;i<r.length;i++){if(!r[i].length)return e;if(r[i]=Number(r[i]),!(0<=r[i]))return e;if(3===i)1<r[i]&&(r[i]=1);else if(1<=r[i])return e}t=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return n?"rgba("+t+", "+r[3]+")":"rgb("+t+")"}s.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},s.rgb=function(e){return s.tinyRGB(i(e))},s.opacity=function(e){return e?i(e).getAlpha():0},s.addOpacity=function(e,t){e=i(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+t+")"},s.combine=function(e,t){var n=i(e).toRgb();if(1===n.a)return i(e).toRgbString();t=i(t||c).toRgb(),t=1===t.a?t:{r:255*(1-t.a)+t.r*t.a,g:255*(1-t.a)+t.g*t.a,b:255*(1-t.a)+t.b*t.a},n={r:t.r*(1-n.a)+n.r*n.a,g:t.g*(1-n.a)+n.g*n.a,b:t.b*(1-n.a)+n.b*n.a};return i(n).toRgbString()},s.contrast=function(e,t,n){var r=i(e);return((r=1!==r.getAlpha()?i(s.combine(e,c)):r).isDark()?t?r.lighten(t):c:n?r.darken(n):l).toString()},s.stroke=function(e,t){t=i(t);e.style({stroke:s.tinyRGB(t),"stroke-opacity":t.getAlpha()})},s.fill=function(e,t){t=i(t);e.style({fill:s.tinyRGB(t),"fill-opacity":t.getAlpha()})},s.clean=function(e){if(e&&"object"==typeof e)for(var t,n,r=Object.keys(e),i=0;i<r.length;i++)if(n=e[a=r[i]],"color"===a.substr(a.length-5))if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]=u(n[t]);else e[a]=u(n);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(n))for(t=0;t<n.length;t++)Array.isArray(n[t])&&(n[t][1]=u(n[t][1]));else if(Array.isArray(n)){var a=n[0];if(!Array.isArray(a)&&a&&"object"==typeof a)for(t=0;t<n.length;t++)s.clean(n[t])}else n&&"object"==typeof n&&!o(n)&&s.clean(n)}},{"../../lib/array":216,"./attributes":99,"fast-isnumeric":15,tinycolor2:65}],101:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),i=e("../../plots/font_attributes"),a=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;t.exports=e({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:a({},r.ticks,{dflt:""}),ticklabeloverflow:a({},r.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plots/cartesian/layout_attributes":291,"../../plots/font_attributes":305}],102:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],103:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../plot_api/plot_template"),c=e("../../plots/cartesian/tick_value_defaults"),u=e("../../plots/cartesian/tick_mark_defaults"),d=e("../../plots/cartesian/tick_label_defaults"),h=e("./attributes");t.exports=function(e,t,n){var r=l.newContainer(t,"colorbar"),i=e.colorbar||{};function a(e,t){return s.coerce(i,r,h,e,t)}var o=a("thicknessmode");a("thickness","fraction"===o?30/(n.width-n.margin.l-n.margin.r):30);t=a("lenmode");a("len","fraction"===t?1:n.height-n.margin.t-n.margin.b),a("x"),a("xanchor"),a("xpad"),a("y"),a("yanchor"),a("ypad"),s.noneOrAll(i,r,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");e=a("ticklabelposition");a("ticklabeloverflow",-1!==e.indexOf("inside")?"hide past domain":"hide past div"),c(i,r,a,"linear");o=n.font,t={outerTicks:!1,font:o};-1!==e.indexOf("inside")&&(t.bgColor="black"),d(i,r,a,"linear",t),u(i,r,a,"linear",t),a("title.text",n._dfltTitle.colorbar);n=r.tickfont,n=s.extendFlat({},n,{color:o.color,size:s.bigFont(n.size)});s.coerceFont(a,"title.font",n),a("title.side")}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/tick_label_defaults":298,"../../plots/cartesian/tick_mark_defaults":299,"../../plots/cartesian/tick_value_defaults":300,"./attributes":101}],104:[function(e,t,n){"use strict";var P=e("@plotly/d3"),R=e("tinycolor2"),I=e("../../plots/plots"),d=e("../../registry"),N=e("../../plots/cartesian/axes"),h=e("../dragelement"),z=e("../../lib"),F=z.strTranslate,j=e("../../lib/extend").extendFlat,f=e("../../lib/setcursor"),B=e("../drawing"),H=e("../color"),U=e("../titles"),V=e("../../lib/svg_text_utils"),y=e("../colorscale/helpers").flipScale,q=e("../../plots/cartesian/axis_defaults"),Y=e("../../plots/cartesian/position_defaults"),G=e("../../plots/cartesian/layout_attributes"),r=e("../../constants/alignment"),W=r.LINE_SPACING,X=r.FROM_TL,Z=r.FROM_BR,J=e("./constants").cn;t.exports={draw:function(u){var e=u._fullLayout._infolayer.selectAll("g."+J.colorbar).data(function(e){var t,n,r,i,a=e._fullLayout,o=e.calcdata,s=[];function l(e){return j(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(e,r,t):(t._fillgradient=n.reversescale?y(n.colorscale):n.colorscale,t._zrange=[n[i.min],n[i.max]])}for(var u,d=0;d<o.length;d++){var h=o[d],h=(r=h[0].trace)._module.colorbar;if(!0===r.visible&&h)for(var f=Array.isArray(h),p=f?h:[h],m=0;m<p.length;m++){var g=(i=p[m]).container;(n=g?r[g]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(f&&g?"-"+g:""),t._traceIndex=r.index,t._propPrefix=(g?g+".":"")+"colorbar.",t._meta=r._meta,c(),s.push(t))}}for(u in a._colorAxes){var _;(n=a[u]).showscale&&(_=a._colorAxes[u],(t=l(n.colorbar))._id="cb"+u,t._propPrefix=u+".colorbar.",t._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==_[0]&&(r=_[1],i.calc=r._module.colorbar.calc),c(),s.push(t))}return s}(u),function(e){return e._id});e.enter().append("g").attr("class",function(e){return e._id}).classed(J.colorbar,!0),e.each(function(e){var t=P.select(this);z.ensureSingle(t,"rect",J.cbbg),z.ensureSingle(t,"g",J.cbfills),z.ensureSingle(t,"g",J.cblines),z.ensureSingle(t,"g",J.cbaxis,function(e){e.classed(J.crisp,!0)}),z.ensureSingle(t,"g",J.cbtitleunshift,function(e){e.append("g").classed(J.cbtitle,!0)}),z.ensureSingle(t,"rect",J.cboutline);var n,r,i,a,o,s,l,c=function(o,s,l){var i=l._fullLayout,c=i._size,e=s._fillcolor,u=s._line,t=s.title,d=t.side,h=s._zrange||P.extent(("function"==typeof e?e:u.color).domain()),f="function"==typeof u.color?u.color:function(){return u.color},p="function"==typeof e?e:function(){return e},n=s._levels,r=function(e,t){var n,r,i=e._levels,a=[],o=[],s=i.end+i.size/100,l=i.size,c=1.001*t[0]-.001*t[1],u=1.001*t[1]-.001*t[0];for(r=0;r<1e5&&(n=i.start+r*l,!(0<l?s<=n:n<=s));r++)c<n&&n<u&&a.push(n);if(e._fillgradient)o=[0];else if("function"==typeof e._fillcolor){var d=e._filllevels;if(d)for(s=d.end+d.size/100,l=d.size,r=0;r<1e5&&(n=d.start+r*l,!(0<l?s<=n:n<=s));r++)n>t[0]&&n<t[1]&&o.push(n);else(o=a.map(function(e){return e-i.size/2})).push(o[o.length-1]+i.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(o=[0]);i.size<0&&(a.reverse(),o.reverse());return{line:a,fill:o}}(s,h),m=r.fill,g=r.line,_=Math.round(s.thickness*("fraction"===s.thicknessmode?c.w:1)),a=_/c.w,y=Math.round(s.len*("fraction"===s.lenmode?c.h:1)),v=y/c.h,b=s.xpad/c.w,x=(s.borderwidth+s.outlinewidth)/2,w=s.ypad/c.h,T=Math.round(s.x*c.w+s.xpad),r=s.x-a*({middle:.5,right:1}[s.xanchor]||0),A=s.y+v*(({top:-.5,bottom:.5}[s.yanchor]||0)-.5),k=Math.round(c.h*(1-A)),M=k-y;s._lenFrac=v,s._thickFrac=a,s._xLeftFrac=r,s._yBottomFrac=A;var S=s._axis=function(e,t,n){var e=e._fullLayout,r={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:"right",position:1},i={type:"linear",_id:"y"+t._id},t={letter:"y",font:e.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:e.calendar};function a(e,t){return z.coerce(r,i,G,e,t)}return q(r,i,a,t,e),Y(r,i,a,t),i}(l,s,h);S.position=s.x+b+a,-1!==["top","bottom"].indexOf(d)&&(S.title.side=d,S.titlex=s.x+b,S.titley=A+("top"===t.side?v-w:w));u.color&&"auto"===s.tickmode&&(S.tickmode="linear",S.tick0=n.start,r=n.size,a=z.constrain((k-M)/50,4,15)+1,1<(t=(h[1]-h[0])/((s.nticks||a)*r))&&(a=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),r*=a*z.roundUp(t/a,[2,5,10]),(Math.abs(n.start)/n.size+1e-6)%1<2e-6&&(S.tick0=0)),S.dtick=r);S.domain=[A+w,A+v-w],S.setScale(),o.attr("transform",F(Math.round(c.l),Math.round(c.t)));var E,C=o.select("."+J.cbtitleunshift).attr("transform",F(-Math.round(c.l),-Math.round(c.t))),L=o.select("."+J.cbaxis),D=0;function O(e,t){var n={propContainer:S,propName:s._propPrefix+"title",traceIndex:s._traceIndex,_meta:s._meta,placeholder:i._dfltTitle.colorbar,containerGroup:o.select("."+J.cbtitle)},r="h"===e.charAt(0)?e.substr(1):"h"+e;o.selectAll("."+r+",."+r+"-math-group").remove(),U.draw(l,e,j(n,t||{}))}return z.syncOrAsync([I.previousPromises,function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(e=c.l+(s.x+b)*c.w,t=S.title.font.size,t="top"===d?(1-(A+v-w))*c.h+c.t+3+.75*t:(1-(A+w))*c.h+c.t-3-.25*t,O(S._id+"title",{attributes:{x:e,y:t,"text-anchor":"start"}}))},function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(t=(a=o.select("."+J.cbtitle)).select("text"),r=[-s.outlinewidth/2,s.outlinewidth/2],e=a.select(".h"+S._id+"title-math-group").node(),i=15.6,t.node()&&(i=parseInt(t.node().style.fontSize,10)*W),e?i<(D=B.bBox(e).height)&&(r[1]-=(D-i)/2):t.node()&&!t.classed(J.jsPlaceholder)&&(D=B.bBox(t.node()).height),D&&(D+=5,"top"===d?(S.domain[1]-=D/c.h,r[1]*=-1):(S.domain[0]+=D/c.h,t=V.lineCount(t),r[1]+=(1-t)*i),a.attr("transform",F(r[0],r[1])),S.setScale())),o.selectAll("."+J.cbfills+",."+J.cblines).attr("transform",F(0,Math.round(c.h*(1-S.domain[1])))),L.attr("transform",F(0,Math.round(-c.t))),(i=o.select("."+J.cbfills).selectAll("rect."+J.cbfill).attr("style","").data(m)).enter().append("rect").classed(J.cbfill,!0).style("stroke","none"),i.exit().remove();var n=h.map(S.c2p).map(Math.round).sort(function(e,t){return e-t});i.each(function(e,t){t=[0===t?h[0]:(m[t]+m[t-1])/2,t===m.length-1?h[1]:(m[t]+m[t+1])/2].map(S.c2p).map(Math.round);t[1]=z.constrain(t[1]+(t[1]>t[0])?1:-1,n[0],n[1]);t=P.select(this).attr({x:T,width:Math.max(_,2),y:P.min(t),height:Math.max(P.max(t)-P.min(t),2)});s._fillgradient?B.gradient(t,l,s._id,"vertical",s._fillgradient,"fill"):(e=p(e).replace("e-",""),t.attr("fill",R(e).toHexString()))}),(a=o.select("."+J.cblines).selectAll("path."+J.cbline).data(u.color&&u.width?g:[])).enter().append("path").classed(J.cbline,!0),a.exit().remove(),a.each(function(e){P.select(this).attr("d","M"+T+","+(Math.round(S.c2p(e))+u.width/2%1)+"h"+_).call(B.lineGroupStyle,u.width,f(e),u.dash)}),L.selectAll("g."+S._id+"tick,path").remove();var r=T+_+(s.outlinewidth||0)/2-("outside"===s.ticks?1:0),i=N.calcTicks(S),a=N.getTickSigns(S)[2];return N.drawTicks(l,S,{vals:"inside"===S.ticks?N.clipEnds(S,i):i,layer:L,path:N.makeTickPath(S,r,a),transFn:N.makeTransTickFn(S)}),N.drawLabels(l,S,{vals:i,layer:L,transFn:N.makeTransTickLabelFn(S),labelFns:N.makeLabelFns(S,r)})},function(){var e,t;-1===["top","bottom"].indexOf(d)&&(t=S.title.font.size,e=S._offset+S._length/2,t=c.l+(S.position||0)*c.w+("right"===S.side?10+t*(S.showticklabels?1:.5):-10-t*(S.showticklabels?.5:0)),O("h"+S._id+"title",{avoid:{selection:P.select(l).selectAll("g."+S._id+"tick"),side:d,offsetLeft:c.l,offsetTop:0,maxShift:i.width},attributes:{x:t,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}}))},I.previousPromises,function(){var e=_+s.outlinewidth/2;-1===S.ticklabelposition.indexOf("inside")&&(e+=B.bBox(L.node()).width),(E=C.select("text")).node()&&!E.classed(J.jsPlaceholder)&&(i=(r=C.select(".h"+S._id+"title-math-group").node())&&-1!==["top","bottom"].indexOf(d)?B.bBox(r).width:B.bBox(C.node()).right-T-c.l,e=Math.max(e,i));var t=2*s.xpad+e+s.borderwidth+s.outlinewidth/2,n=k-M;o.select("."+J.cbbg).attr({x:T-s.xpad-(s.borderwidth+s.outlinewidth)/2,y:M-x,width:Math.max(t,2),height:Math.max(n+2*x,2)}).call(H.fill,s.bgcolor).call(H.stroke,s.bordercolor).style("stroke-width",s.borderwidth),o.selectAll("."+J.cboutline).attr({x:T,y:M+s.ypad+("top"===d?D:0),width:Math.max(_,2),height:Math.max(n-2*s.ypad-D,2)}).call(H.stroke,s.outlinecolor).style({fill:"none","stroke-width":s.outlinewidth});var r=({center:.5,right:1}[s.xanchor]||0)*t;o.attr("transform",F(c.l-r,c.t));var i={},e=X[s.yanchor],r=Z[s.yanchor];"pixels"===s.lenmode?(i.y=s.y,i.t=n*e,i.b=n*r):(i.t=i.b=0,i.yt=s.y+s.len*e,i.yb=s.y-s.len*r),e=X[s.xanchor],r=Z[s.xanchor],"pixels"===s.thicknessmode?(i.x=s.x,i.l=t*e,i.r=t*r):(i.l=(t=t-_)*e,i.r=t*r,i.xl=s.x-s.thickness*e,i.xr=s.x+s.thickness*r),I.autoMargin(l,s._id,i)}],l)}(t,e,u);c&&c.then&&(u._promises||[]).push(c),u._context.edits.colorbarPosition&&(n=t,r=e,l=(i=u)._fullLayout._size,h.init({element:n.node(),gd:i,prepFn:function(){a=n.attr("transform"),f(n)},moveFn:function(e,t){n.attr("transform",a+F(e,t)),o=h.align(r._xLeftFrac+e/l.w,r._thickFrac,0,1,r.xanchor),s=h.align(r._yBottomFrac-t/l.h,r._lenFrac,0,1,r.yanchor);t=h.getCursor(o,s,r.xanchor,r.yanchor);f(n,t)},doneFn:function(){var e;f(n),void 0!==o&&void 0!==s&&((e={})[r._propPrefix+"x"]=o,e[r._propPrefix+"y"]=s,void 0!==r._traceIndex?d.call("_guiRestyle",i,e,r._traceIndex):d.call("_guiRelayout",i,e))}}))}),e.exit().each(function(e){I.autoMargin(u,e._id)}).remove(),e.order()}}},{"../../constants/alignment":205,"../../lib":230,"../../lib/extend":224,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_defaults":278,"../../plots/cartesian/layout_attributes":291,"../../plots/cartesian/position_defaults":294,"../../plots/plots":311,"../../registry":313,"../color":100,"../colorscale/helpers":111,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":102,"@plotly/d3":11,tinycolor2:65}],105:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":230}],106:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":101,"./defaults":103,"./draw":104,"./has_colorbar":105}],107:[function(e,t,n){"use strict";var f=e("../colorbar/attributes"),p=e("../../lib/regex").counter,m=e("./scales.js").scales;Object.keys(m);function g(e){return"`"+e+"`"}t.exports=function(e,t){e=e||"";var n,r=(t=t||{}).cLetter||"c",i=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),a="showScaleDflt"in t?t.showScaleDflt:"z"===r,o="string"==typeof t.colorscaleDflt?m[t.colorscaleDflt]:null,s=t.editTypeOverride||"",l=e?e+".":"",c="colorAttr"in t?(n=t.colorAttr,t.colorAttr):"in "+g(l+(n={z:"z",c:"color"}[r])),u=r+"auto",d=r+"min",e=r+"max",h=r+"mid",c={};c[d]=c[e]=void 0;r={};r[u]=!1;l={};return"color"===n&&(l.color={valType:"color",arrayOk:!0,editType:s||"style"},t.anim&&(l.color.anim=!0)),l[u]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},l[d]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[e]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[h]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},l.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},l.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},l.reversescale={valType:"boolean",dflt:!1,editType:"plot"},i||(l.showscale={valType:"boolean",dflt:a,editType:"calc"},l.colorbar=f),t.noColorAxis||(l.coloraxis={valType:"subplotid",regex:p("coloraxis"),dflt:null,editType:"calc"}),l}},{"../../lib/regex":246,"../colorbar/attributes":101,"./scales.js":115}],108:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("../../lib"),h=e("./helpers").extractOpts;t.exports=function(e,t,n){var r=e._fullLayout,i=n.vals,a=n.containerStr,o=a?d.nestedProperty(t,a).get():t,s=h(o),l=!1!==s.auto,c=s.min,e=s.max,n=s.mid,a=function(){return d.aggNums(Math.min,null,i)},t=function(){return d.aggNums(Math.max,null,i)};void 0===c?c=a():l&&(c=o._colorAx&&u(c)?Math.min(c,a()):a()),void 0===e?e=t():l&&(e=o._colorAx&&u(e)?Math.max(e,t()):t()),l&&void 0!==n&&(n-c<e-n?c=n-(e-n):e-n<n-c&&(e=n+(n-c))),c===e&&(c-=.5,e+=.5),s._sync("min",c),s._sync("max",e),s.autocolorscale&&(r=c*e<0?r.colorscale.diverging:0<=c?r.colorscale.sequential:r.colorscale.sequentialminus,s._sync("colorscale",r))}},{"../../lib":230,"./helpers":111,"fast-isnumeric":15}],109:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("./helpers").hasColorscale,d=e("./helpers").extractOpts;t.exports=function(e,i){function a(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function t(e,t){var n,r=t.container?c.nestedProperty(e,t.container).get():e;r&&(r.coloraxis?r._colorAx=i[r.coloraxis]:(!(e=(n=d(r)).auto)&&void 0!==n.min||a(r,t.min),!e&&void 0!==n.max||a(r,t.max),n.autocolorscale&&a(r,"colorscale")))}for(var n,r=0;r<e.length;r++){var o=e[r],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)t(o,s[l]);else t(o,s);u(o,"marker.line")&&t(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(n in i._colorAxes)t(i[n],{min:"cmin",max:"cmax"})}},{"../../lib":230,"./helpers":111}],110:[function(e,t,n){"use strict";var v=e("fast-isnumeric"),b=e("../../lib"),x=e("../colorbar/has_colorbar"),w=e("../colorbar/defaults"),T=e("./scales").isValid,A=e("../../registry").traceIs;function k(e,t){var n=t.slice(0,t.length-1);return t?b.nestedProperty(e,n).get()||{}:e}t.exports=function e(t,n,r,i,a){var o=a.prefix,s=a.cLetter,l="_module"in n,c=k(t,o),u=k(n,o),d=k(n._template||{},o)||{},h=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,r,i,a)};if(l){var f=r._colorAxes||{},p=i(o+"coloraxis");if(p){var m=A(n,"contour")&&b.nestedProperty(n,"contours.coloring").get()||"heatmap",g=f[p];return void(g?(g[2].push(h),g[0]!==m&&(g[0]=!1,b.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):f[p]=[m,n,[h]])}}m=c[s+"min"],h=c[s+"max"],h=v(m)&&v(h)&&m<h;i(o+s+"auto",!h)?i(o+s+"mid"):(i(o+s+"min"),i(o+s+"max"));var _,y,h=c.colorscale,s=d.colorscale;void 0!==h&&(_=!T(h)),void 0!==s&&(_=!T(s)),i(o+"autocolorscale",_),i(o+"colorscale"),i(o+"reversescale"),"marker.line."!==o&&(o&&l&&(y=x(c)),i(o+"showscale",y)&&(o&&d&&(u._template=d),w(c,u,r)))}},{"../../lib":230,"../../registry":313,"../colorbar/defaults":103,"../colorbar/has_colorbar":105,"./scales":115,"fast-isnumeric":15}],111:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("tinycolor2"),d=e("fast-isnumeric"),o=e("../../lib"),h=e("../color"),s=e("./scales").isValid;var l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],f=["min","max","mid","auto"];function p(e){var n,t,r=e._colorAx,i=r||e,a={};for(s=0;s<l.length;s++)a[t=l[s]]=i[t];if(r)for(n="c",s=0;s<f.length;s++)a[t=f[s]]=i["c"+t];else{for(var o,s=0;s<f.length;s++)((o="c"+(t=f[s]))in i||(o="z"+t)in i)&&(a[t]=i[o]);n=o.charAt(0)}return a._sync=function(e,t){e=-1!==f.indexOf(e)?n+e:e;i[e]=i["_"+e]=t},a}function r(e){for(var e=p(e),t=e.min,n=e.max,r=e.reversescale?m(e.colorscale):e.colorscale,i=r.length,a=new Array(i),o=new Array(i),s=0;s<i;s++){var l=r[s];a[s]=t+l[0]*(n-t),o[s]=l[1]}return{domain:a,range:o}}function m(e){for(var t=e.length,n=new Array(t),r=t-1,i=0;0<=r;r--,i++){var a=e[r];n[i]=[1-a[0],a[1]]}return n}function i(e,t){t=t||{};for(var n=e.domain,r=e.range,i=r.length,a=new Array(i),o=0;o<i;o++){var s=u(r[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l=c.scale.linear().domain(n).range(a).clamp(!0),n=t.noNumericCheck,t=t.returnArray,t=n&&t?l:n?function(e){return g(l(e))}:t?function(e){return d(e)?l(e):u(e).isValid()?e:h.defaultLine}:function(e){return d(e)?g(l(e)):u(e).isValid()?e:h.defaultLine};return t.domain=l.domain,t.range=function(){return r},t}function g(e){e={r:e[0],g:e[1],b:e[2],a:e[3]};return u(e).toRgbString()}t.exports={hasColorscale:function(e,t,n){var r=(e=t?o.nestedProperty(e,t).get()||{}:e)[n||"color"],i=!1;if(o.isArrayOrTypedArray(r))for(var a=0;a<r.length;a++)if(d(r[a])){i=!0;break}return o.isPlainObject(e)&&(i||!0===e.showscale||d(e.cmin)&&d(e.cmax)||s(e.colorscale)||o.isPlainObject(e.colorbar))},extractOpts:p,extractScale:r,flipScale:m,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(e,t){return i(r(e),t)}}},{"../../lib":230,"../color":100,"./scales":115,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],112:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},{"./attributes":107,"./calc":108,"./cross_trace_defaults":109,"./defaults":110,"./helpers":111,"./layout_attributes":113,"./layout_defaults":114,"./scales":115}],113:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,i=e("./attributes"),e=e("./scales").scales;t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:e.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:e.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:e.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":224,"./attributes":107,"./scales":115}],114:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plot_api/plot_template"),h=e("./layout_attributes"),f=e("./defaults");t.exports=function(n,r){function e(e,t){return u.coerce(n,r,h,e,t)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var i,a,t,o=r._colorAxes;function s(e,t){return u.coerce(i,a,h.coloraxis,e,t)}for(t in o){var l=o[t];if(l[0])i=n[t]||{},(a=d.newContainer(r,t,"coloraxis"))._name=t,f(i,a,r,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete r._colorAxes[t]}}}},{"../../lib":230,"../../plot_api/plot_template":265,"./defaults":110,"./layout_attributes":113}],115:[function(e,t,n){"use strict";var i=e("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=r.RdBu;function o(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!i(r[1]).isValid())return!1;t=+r[0]}return!0}t.exports={scales:r,defaultScale:a,get:function(t,n){return n=n||a,t?("string"==typeof t&&(e(),"string"==typeof t&&e()),o(t)?t:n):n;function e(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}},isValid:function(e){return void 0!==r[e]||o(e)}}},{tinycolor2:65}],116:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){e=(e-n)/(r-n),r=e+t/(r-n),n=(e+r)/2;return"left"===i||"bottom"===i?e:"center"===i||"middle"===i?n:"right"===i||"top"===i?r:e<2/3-n?e:4/3-n<r?r:n}},{}],117:[function(e,t,n){"use strict";var i=e("../../lib"),a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:i.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:i.constrain(Math.floor(3*t),0,2),a[t][e]}},{"../../lib":230}],118:[function(e,t,n){"use strict";n.selectMode=function(e){return"lasso"===e||"select"===e},n.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.openMode=function(e){return"drawline"===e||"drawopenpath"===e},n.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},n.selectingOrDrawing=function(e){return n.freeMode(e)||n.rectMode(e)}},{}],119:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),y=e("has-hover"),v=e("has-passive-events"),b=e("../../lib").removeElement,x=e("../../plots/cartesian/constants"),w=t.exports={};w.align=e("./align"),w.getCursor=e("./cursor");e=e("./unhover");function T(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function A(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}w.unhover=e.wrapped,w.unhoverRaw=e.raw,w.init=function(i){var r,a,n,o,s,l,c,u,d=i.gd,h=1,f=d._context.doubleClickDelay,p=i.element;d._mouseDownTime||(d._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=e,v?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=e,p.addEventListener("touchstart",e,{passive:!1})):p.ontouchstart=e;var m=i.clampFn||function(e,t,n){return[e=Math.abs(e)<n?0:e,t=Math.abs(t)<n?0:t]};function e(e){d._dragged=!1,d._dragging=!0;var t=A(e);r=t[0],a=t[1],c=e.target,u=2===(l=e).buttons||e.ctrlKey,void 0===e.clientX&&void 0===e.clientY&&(e.clientX=r,e.clientY=a),(n=(new Date).getTime())-d._mouseDownTime<f?h+=1:(h=1,d._mouseDownTime=n),i.prepFn&&i.prepFn(e,r,a),y&&!u?(s=T()).style.cursor=window.getComputedStyle(p).cursor:y||(s=document,o=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),!1!==i.dragmode&&(e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(e){e.preventDefault();var t=A(e),n=i.minDrag||x.MINDRAG,t=m(t[0]-r,t[1]-a,n),n=t[0],t=t[1];(n||t)&&(d._dragged=!0,w.unhover(d,e)),d._dragged&&i.moveFn&&!u&&(d._dragdata={element:p,dx:n,dy:t},i.moveFn(n,t))}function _(t){if(delete d._dragdata,!1!==i.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),y?b(s):o&&(s.documentElement.style.cursor=o,o=null),d._dragging){if(d._dragging=!1,(new Date).getTime()-d._mouseDownTime>f&&(h=Math.max(h-1,1)),d._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(h,l),!u){try{n=new MouseEvent("click",t)}catch(e){var n,r=A(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}c.dispatchEvent(n)}d._dragging=!1,d._dragged=!1}else d._dragged=!1}},w.coverSlip=T},{"../../lib":230,"../../plots/cartesian/constants":283,"./align":116,"./cursor":117,"./unhover":120,"has-hover":46,"has-passive-events":47,"mouse-event-offset":51}],120:[function(e,t,n){"use strict";var i=e("../../lib/events"),r=e("../../lib/throttle"),a=e("../../lib/dom").getGraphDiv,o=e("../fx/constants"),s=t.exports={};s.wrapped=function(e,t,n){(e=a(e))._fullLayout&&r.clear(e._fullLayout._uid+o.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,r=e._hoverdata;(t=t||{}).target&&!e._dragged&&!1===i.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))}},{"../../lib/dom":222,"../../lib/events":223,"../../lib/throttle":253,"../fx/constants":134}],121:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],122:[function(e,t,n){"use strict";var k=e("@plotly/d3"),i=e("fast-isnumeric"),h=e("tinycolor2"),y=e("../../registry"),M=e("../color"),r=e("../colorscale"),S=e("../../lib"),l=S.strTranslate,d=e("../../lib/svg_text_utils"),a=e("../../constants/xmlns_namespaces"),c=e("../../constants/alignment").LINE_SPACING,v=e("../../constants/interactions").DESELECTDIM,o=e("../../traces/scatter/subtypes"),s=e("../../traces/scatter/make_bubble_size_func"),f=e("../../components/fx/helpers").appendArrayPointValue,m=t.exports={};m.font=function(e,t,n,r){S.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(M.fill,r)},m.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},m.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},m.setRect=function(e,t,n,r,i){e.call(m.setPosition,t,n).call(m.setSize,r,i)},m.translatePoint=function(e,t,n,r){n=n.c2p(e.x),e=r.c2p(e.y);return!!(i(n)&&i(e)&&t.node())&&("text"===t.node().nodeName?t.attr("x",n).attr("y",e):t.attr("transform",l(n,e)),!0)},m.translatePoints=function(e,n,r){e.each(function(e){var t=k.select(this);m.translatePoint(e,t,n,r)})},m.hideOutsideRangePoint=function(e,t,n,r,i,a){t.attr("display",n.isPtWithinRange(e,i)&&r.isPtWithinRange(e,a)?null:"none")},m.hideOutsideRangePoints=function(r,e){var i,a;e._hasClipOnAxisFalse&&(i=e.xaxis,a=e.yaxis,r.each(function(e){var e=e[0].trace,t=e.xcalendar,n=e.ycalendar,e=y.traceIs(e,"bar-like")?".bartext":".point,.textpoint";r.selectAll(e).each(function(e){m.hideOutsideRangePoint(e,k.select(this),i,a,t,n)})}))},m.crispRound=function(e,t,n){return t&&i(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},m.singleLineStyle=function(e,t,n,r,i){t.style("fill","none");e=(((e||[])[0]||{}).trace||{}).line||{},n=n||e.width||0,i=i||e.dash||"";M.stroke(t,r||e.color),m.dashLine(t,i,n)},m.lineGroupStyle=function(e,r,i,a){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{},n=r||t.width||0,e=a||t.dash||"";k.select(this).call(M.stroke,i||t.color).call(m.dashLine,e,n)})},m.dashLine=function(e,t,n){t=m.dashStyle(t,n=+n||0),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},m.dashStyle=function(e,t){t=+t||1;t=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=t+"px,"+t+"px":"dash"===e?e=3*t+"px,"+3*t+"px":"longdash"===e?e=5*t+"px,"+5*t+"px":"dashdot"===e?e=3*t+"px,"+t+"px,"+t+"px,"+t+"px":"longdashdot"===e&&(e=5*t+"px,"+2*t+"px,"+t+"px,"+2*t+"px"),e},m.singleFillStyle=function(e){var t=(((k.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(M.fill,t)},m.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=k.select(this);e[0].trace&&t.call(M.fill,e[0].trace.fillcolor)})};var u=e("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(u).forEach(function(e){var t=u[e],n=t.n;m.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),m.symbolNames[n]=e,m.symbolFuncs[n]=t.f,t.needLine&&(m.symbolNeedLines[n]=!0),t.noDot?m.symbolNoDot[n]=!0:m.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(m.symbolNoFill[n]=!0)});var p=m.symbolNames.length;function g(e,t){return m.symbolFuncs[e%100](t)+(200<=e?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(e){var t;return i(e)?e=+e:"string"==typeof e&&((t=0)<e.indexOf("-open")&&(t=100,e=e.replace("-open","")),0<e.indexOf("-dot")&&(t+=200,e=e.replace("-dot","")),0<=(e=m.symbolNames.indexOf(e))&&(e+=t)),p<=e%100||400<=e?0:Math.floor(Math.max(e,0))};var t={x1:1,x2:0,y1:0,y2:0},e={x1:0,x2:0,y1:1,y2:0},_=k.format("~.1f"),b={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:t},horizontalreversed:{node:"linearGradient",attrs:t,reversed:!0},vertical:{node:"linearGradient",attrs:e},verticalreversed:{node:"linearGradient",attrs:e,reversed:!0}};m.gradient=function(e,t,n,r,i,a){for(var o=i.length,s=b[r],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[_(100*(1-i[c][0])),i[c][1]]:l[c]=[_(100*i[c][0]),i[c][1]];var u=t._fullLayout,d="g"+u._uid+"-"+n,r=u._defs.select(".gradients").selectAll("#"+d).data([r+l.join(";")],S.identity);r.exit().remove(),r.enter().append(s.node).each(function(){var e=k.select(this);s.attrs&&e.attr(s.attrs),e.attr("id",d);e=e.selectAll("stop").data(l);e.exit().remove(),e.enter().append("stop"),e.each(function(e){var t=h(e[1]);k.select(this).attr({offset:e[0]+"%","stop-color":M.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(a,P(d,t)).style(a+"-opacity",null);a=function(e){return"."+e.attr("class").replace(/\s/g,".")},e=a(k.select(e.node().parentNode))+">"+a(e);u._gradientUrlQueryParts[e]=1},m.pattern=function(e,t,n,r,i,a,o,s,l,c,u,d){var h="legend"===t;s&&(u="overlay"===l?(c=s,M.contrast(c)):(c=void 0,s));var f,p,m,g,_,y,v,b,x,w,s=n._fullLayout,T="p"+s._uid+"-"+r,A={};switch(i){case"/":f=a*Math.sqrt(2),p=a*Math.sqrt(2),_="path",A={d:m="M-"+f/4+","+p/4+"l"+f/2+",-"+p/2+"M0,"+p+"L"+f+",0M"+f/4*3+","+p/4*5+"l"+f/2+",-"+p/2,opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"\\":f=a*Math.sqrt(2),p=a*Math.sqrt(2),_="path",A={d:m="M"+f/4*3+",-"+p/4+"l"+f/2+","+p/2+"M0,0L"+f+","+p+"M-"+f/4+","+p/4*3+"l"+f/2+","+p/2,opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"x":f=a*Math.sqrt(2),p=a*Math.sqrt(2),m="M-"+f/4+","+p/4+"l"+f/2+",-"+p/2+"M0,"+p+"L"+f+",0M"+f/4*3+","+p/4*5+"l"+f/2+",-"+p/2+"M"+f/4*3+",-"+p/4+"l"+f/2+","+p/2+"M0,0L"+f+","+p+"M-"+f/4+","+p/4*3+"l"+f/2+","+p/2,g=a-a*Math.sqrt(1-o),_="path",A={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case"|":_=_="path",A={d:m="M"+(f=a)/2+",0L"+f/2+","+(p=a),opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"-":_=_="path",A={d:m="M0,"+(p=f=a)/2+"L"+f+","+p/2,opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"+":_="path",m="M"+(f=a)/2+",0L"+f/2+","+(p=a)+"M0,"+p/2+"L"+f+","+p/2,g=a-a*Math.sqrt(1-o),_="path",A={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case".":p=f=a,g=o<Math.PI/4?Math.sqrt(o*a*a/Math.PI):(y=o,v=Math.PI/4,b=1,x=a/2,w=a/Math.sqrt(2),x+(w-x)*(y-v)/(b-v)),_="circle",A={cx:f/2,cy:p/2,r:g,opacity:d,fill:u}}i=[i||"noSh",c||"noBg",u||"noFg",a,o].join(";"),i=s._defs.select(".patterns").selectAll("#"+T).data([i],S.identity);i.exit().remove(),i.enter().append("pattern").each(function(){var e,t=k.select(this);t.attr({id:T,width:f+"px",height:p+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),c&&((e=t.selectAll("rect").data([0])).exit().remove(),e.enter().append("rect").attr({width:f+"px",height:p+"px",fill:c}));t=t.selectAll(_).data([0]);t.exit().remove(),t.enter().append(_).attr(A)}),e.style("fill",P(T,n)).style("fill-opacity",null),e.classed("pattern_filled",!0);e="."+k.select(e.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";s._patternUrlQueryParts[e]=1},m.initGradients=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},m.initPatterns=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),e._patternUrlQueryParts={}},m.getPatternAttr=function(e,t,n){return e&&S.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},m.pointStyle=function(e,t,n){var r;e.size()&&(r=m.makePointStyleFns(t),e.each(function(e){m.singlePointStyle(e,k.select(this),t,r,n)}))},m.singlePointStyle=function(e,t,n,r,i){var a=n.marker,o=a.line;t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?a.opacity:e.mo),r.ms2mrc&&(u="various"===e.ms||"various"===a.size?3:r.ms2mrc(e.ms),e.mrc=u,r.selectedSizeFn&&(u=e.mrc=r.selectedSizeFn(e)),p=m.symbolNumber(e.mx||a.symbol)||0,e.om=100<=p%200,t.attr("d",g(p,u)));var s,l,c,u,d,h,f,p=!1;e.so?(l=o.outlierwidth,c=o.outliercolor,s=a.outliercolor):(h=(o||{}).width,l=(e.mlw+1||h+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,c="mlc"in e?e.mlcc=r.lineScale(e.mlc):S.isArrayOrTypedArray(o.color)?M.defaultLine:o.color,S.isArrayOrTypedArray(a.color)&&(s=M.defaultLine,p=!0),s="mc"in e?e.mcc=r.markerScale(e.mc):a.color||"rgba(0,0,0,0)",r.selectedColorFn&&(s=r.selectedColorFn(e))),e.om?t.call(M.stroke,s).style({"stroke-width":(l||1)+"px",fill:"none"}):(t.style("stroke-width",(e.isBlank?0:l)+"px"),u=a.gradient,(h=e.mgt)?p=!0:h=u&&u.type,S.isArrayOrTypedArray(h)&&(h=h[0],b[h]||(h=0)),r=(o=a.pattern)&&m.getPatternAttr(o.shape,e.i,""),h&&"none"!==h?((f=e.mgc)?p=!0:f=u.color,d=n.uid,p&&(d+="-"+e.i),m.gradient(t,i,d,h,[[0,f],[1,s]],"fill")):r?(a=m.getPatternAttr(o.bgcolor,e.i,null),u=m.getPatternAttr(o.fgcolor,e.i,null),p=o.fgopacity,d=m.getPatternAttr(o.size,e.i,8),h=m.getPatternAttr(o.solidity,e.i,.3),f=e.mcc||S.isArrayOrTypedArray(o.shape)||S.isArrayOrTypedArray(o.bgcolor)||S.isArrayOrTypedArray(o.size)||S.isArrayOrTypedArray(o.solidity),n=n.uid,f&&(n+="-"+e.i),m.pattern(t,"point",i,n,r,d,h,e.mcc,o.fillmode,a,u,p)):M.fill(t,s),l&&M.stroke(t,c))},m.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=m.tryColorscale(n,""),t.lineScale=m.tryColorscale(n,"line"),y.traceIs(e,"symbols")&&(t.ms2mrc=o.isBubble(e)?s(e):function(){return(n.size||6)/2}),e.selectedpoints&&S.extendFlat(t,m.makeSelectedPointStyleFns(e)),t},m.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.marker||{},a=n.marker||{},n=r.marker||{},r=i.opacity,o=a.opacity,s=n.opacity,l=void 0!==o,c=void 0!==s;(S.isArrayOrTypedArray(r)||l||c)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?i.opacity:e.mo;return e.selected?l?o:t:c?s:v*t});var u=i.color,d=a.color,h=n.color;(d||h)&&(t.selectedColorFn=function(e){var t=e.mcc||u;return e.selected?d||t:h||t});var f=i.size,p=a.size,m=n.size,g=void 0!==p,_=void 0!==m;return y.traceIs(e,"symbols")&&(g||_)&&(t.selectedSizeFn=function(e){var t=e.mrc||f/2;return e.selected?g?p/2:t:_?m/2:t}),t},m.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},e=e.textfont||{},n=n.textfont||{},r=r.textfont||{},i=e.color,a=n.color,o=r.color;return t.selectedTextColorFn=function(e){var t=e.tc||i;return e.selected?a||t:o||(a?t:M.addOpacity(t,v))},t},m.selectedPointStyle=function(e,t){var i,a,r;e.size()&&t.selectedpoints&&(i=m.makeSelectedPointStyleFns(t),a=t.marker||{},r=[],i.selectedOpacityFn&&r.push(function(e,t){e.style("opacity",i.selectedOpacityFn(t))}),i.selectedColorFn&&r.push(function(e,t){M.fill(e,i.selectedColorFn(t))}),i.selectedSizeFn&&r.push(function(e,t){var n=t.mx||a.symbol||0,r=i.selectedSizeFn(t);e.attr("d",g(m.symbolNumber(n),r)),t.mrc2=r}),r.length&&e.each(function(e){for(var t=k.select(this),n=0;n<r.length;n++)r[n](t,e)}))},m.tryColorscale=function(e,t){t=t?S.nestedProperty(e,t).get():e;if(t){e=t.color;if((t.colorscale||t._colorAx)&&S.isArrayOrTypedArray(e))return r.makeColorScaleFuncFromTrace(t)}return S.identity};var x={start:1,end:-1,middle:0,bottom:1,top:-1};function w(e,t,n,r){var i=k.select(e.node().parentNode),a=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",o=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",s=r?r/.8+1:0,t=(d.lineCount(e)-1)*c+1,r=x[o]*s,n=.75*n+x[a]*s+(x[a]-1)*t*n/2;e.attr("text-anchor",o),i.attr("transform",l(r,n))}function T(e,t){t=e.ts||t.textfont.size;return i(t)&&0<t?t:0}m.textPointStyle=function(e,o,s){var l,c,u;e.size()&&(o.selectedpoints&&(l=m.makeSelectedTextStyleFns(o).selectedTextColorFn),c=o.texttemplate,u=s._fullLayout,e.each(function(e){var t,n,r,i=k.select(this),a=c?S.extractOption(e,o,"txt","texttemplate"):S.extractOption(e,o,"tx","text");a||0===a?(c&&(t=(r=o._module.formatLabels)?r(e,o,u):{},f(n={},o,e.i),r=o._meta||{},a=S.texttemplateString(a,t,u._d3locale,n,e,r)),t=e.tp||o.textposition,n=T(e,o),r=l?l(e):e.tc||o.textfont.color,i.call(m.font,e.tf||o.textfont.family,n,r).text(a).call(d.convertToTspans,s).call(w,t,n,e.mrc)):i.remove()}))},m.selectedTextStyle=function(e,a){var o;e.size()&&a.selectedpoints&&(o=m.makeSelectedTextStyleFns(a),e.each(function(e){var t=k.select(this),n=o.selectedTextColorFn(e),r=e.tp||a.textposition,i=T(e,a);M.fill(t,n),w(t,r,i,e.mrc2||e.mrc)}))};var A=.5;function E(e,t,n,r){var i=e[0]-t[0],a=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],e=Math.pow(i*i+a*a,A/2),n=Math.pow(o*o+s*s,A/2),o=(n*n*i-e*e*o)*r,s=(n*n*a-e*e*s)*r,r=3*n*(e+n),n=3*e*(e+n);return[[k.round(t[0]+(r&&o/r),2),k.round(t[1]+(r&&s/r),2)],[k.round(t[0]-(n&&o/n),2),k.round(t[1]-(n&&s/n),2)]]}m.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");for(var n="M"+e[0],r=[],i=1;i<e.length-1;i++)r.push(E(e[i-1],e[i],e[i+1],t));for(n+="Q"+r[0][0]+" "+e[1],i=2;i<e.length-1;i++)n+="C"+r[i-2][1]+" "+r[i-1][0]+" "+e[i];return n+="Q"+r[e.length-3][1]+" "+e[e.length-1]},m.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";for(var n="M"+e[0],r=e.length-1,i=[E(e[r],e[0],e[1],t)],a=1;a<r;a++)i.push(E(e[a-1],e[a],e[a+1],t));for(i.push(E(e[r-1],e[r],e[0],t)),a=1;a<=r;a++)n+="C"+i[a-1][1]+" "+i[a][0]+" "+e[a];return n+="C"+i[r][1]+" "+i[0][0]+" "+e[0]+"Z"};function C(e,t){return"L"+k.round(t[0],2)+","+k.round(t[1],2)}var L={hv:function(e,t){return"H"+k.round(t[0],2)+"V"+k.round(t[1],2)},vh:function(e,t){return"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},hvh:function(e,t){return"H"+k.round((e[0]+t[0])/2,2)+"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},vhv:function(e,t){return"V"+k.round((e[1]+t[1])/2,2)+"H"+k.round(t[0],2)+"V"+k.round(t[1],2)}};m.steps=function(e){var r=L[e]||C;return function(e){for(var t="M"+k.round(e[0][0],2)+","+k.round(e[0][1],2),n=1;n<e.length;n++)t+=r(e[n-1],e[n]);return t}},m.makeTester=function(){var e=S.ensureSingleById(k.select("body"),"svg","js-plotly-tester",function(e){e.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=S.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=e,m.testref=t},m.savedBBoxes={};var D=0;function O(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function P(e,t){if(!e)return null;t=t._context,t=!t._exportedPlot&&t._baseUrl||"";return t?"url('"+t+"#"+e+"')":"url(#"+e+")"}m.bBox=function(e,t,n){var r,i;if(n=n||O(e)){if(c=m.savedBBoxes[n])return S.extendFlat({},c)}else if(1===e.childNodes.length){var a=e.childNodes[0];if(n=O(a)){var o=+a.getAttribute("x")||0,s=+a.getAttribute("y")||0,l=a.getAttribute("transform");if(!l){a=m.bBox(a,!1,n);return o&&(a.left+=o,a.right+=o),s&&(a.top+=s,a.bottom+=s),a}if(c=m.savedBBoxes[n+="~"+o+"~"+s+"~"+l])return S.extendFlat({},c)}}t?r=e:(i=m.tester.node(),r=e.cloneNode(!0),i.appendChild(r)),k.select(r).attr("transform",null).call(d.positionText,0,0);var c=r.getBoundingClientRect(),e=m.testref.node().getBoundingClientRect();t||i.removeChild(r);e={height:c.height,width:c.width,left:c.left-e.left,top:c.top-e.top,right:c.right-e.left,bottom:c.bottom-e.top};return 1e4<=D&&(m.savedBBoxes={},D=0),n&&(m.savedBBoxes[n]=e),D++,S.extendFlat({},e)},m.setClipUrl=function(e,t,n){e.attr("clip-path",P(t,n))},m.getTranslate=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},m.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=l(t,n)).trim(),e[i]("transform",r),r},m.getScale=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},m.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+="scale("+t+","+n+")").trim(),e[i]("transform",r),r};var R=/\s*sc.*/;m.setPointGroupScale=function(e,t,n){var r;t=t||1,n=n||1,e&&(r=1===t&&1===n?"":"scale("+t+","+n+")",e.each(function(){var e=(this.getAttribute("transform")||"").replace(R,""),e=(e+=r).trim();this.setAttribute("transform",e)}))};var I=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(e,i,a){e&&e.each(function(){var e,t,n=k.select(this),r=n.select("text");r.node()&&(e=parseFloat(r.attr("x")||0),t=parseFloat(r.attr("y")||0),r=(n.attr("transform")||"").match(I),t=1===i&&1===a?[]:[l(e,t),"scale("+i+","+a+")",l(-e,-t)],r&&t.push(r),n.attr("transform",t.join("")))})}},{"../../components/fx/helpers":136,"../../constants/alignment":205,"../../constants/interactions":209,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../lib/svg_text_utils":252,"../../registry":313,"../../traces/scatter/make_bubble_size_func":370,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale":112,"./symbol_defs":123,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],123:[function(e,t,n){"use strict";var c=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){e=c.round(e,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(e){var t=c.round(.4*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H"+t+"V"+e+"H-"+t+"V"+t+"H-"+e+"V-"+t+"H-"+t+"V-"+e+"H"+t+"V-"+t+"H"+e+"Z"}},x:{n:4,f:function(e){var t=c.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,r="l"+t+",-"+t,i="l-"+t+",-"+t,e="l-"+t+","+t;return"M0,"+t+n+r+i+r+i+e+i+e+n+e+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+","+c.round(e/2,2)+"H"+t+"L0,-"+c.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+c.round(e/2,2)+"H"+t+"L0,"+c.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M"+c.round(e/2,2)+",-"+t+"V"+t+"L-"+c.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+c.round(e/2,2)+",-"+t+"V"+t+"L"+c.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+e+",-"+t+"H"+t+"V"+e+"Z"}},"triangle-se":{n:10,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+t+",-"+e+"V"+t+"H-"+e+"Z"}},"triangle-sw":{n:11,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H-"+t+"V-"+e+"Z"}},"triangle-nw":{n:12,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+t+","+e+"V-"+t+"H"+e+"Z"}},pentagon:{n:13,f:function(e){var t=c.round(.951*e,2),n=c.round(.588*e,2),r=c.round(-e,2),i=c.round(-.309*e,2);return"M"+t+","+i+"L"+n+","+c.round(.809*e,2)+"H-"+n+"L-"+t+","+i+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M"+e+",-"+n+"V"+n+"L0,"+t+"L-"+e+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+e+"H"+n+"L"+t+",0L"+n+",-"+e+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=c.round(.924*e,2),e=c.round(.383*e,2);return"M-"+e+",-"+t+"H"+e+"L"+t+",-"+e+"V"+e+"L"+e+","+t+"H-"+e+"L-"+t+","+e+"V-"+e+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=c.round(.225*t,2),r=c.round(.951*t,2),i=c.round(.363*t,2),a=c.round(.588*t,2),o=c.round(-t,2),s=c.round(-.309*t,2),l=c.round(.118*t,2),e=c.round(.809*t,2);return"M"+n+","+s+"H"+r+"L"+i+","+l+"L"+a+","+e+"L0,"+c.round(.382*t,2)+"L-"+a+","+e+"L-"+i+","+l+"L-"+r+","+s+"H-"+n+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=c.round(.66*e,2),n=c.round(.38*e,2),e=c.round(.76*e,2);return"M-"+e+",0l-"+n+",-"+t+"h"+e+"l"+n+",-"+t+"l"+n+","+t+"h"+e+"l-"+n+","+t+"l"+n+","+t+"h-"+e+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+","+n+e+t+","+n+e+"0,-"+r+e+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M"+t+",-"+n+e+"-"+t+",-"+n+e+"0,"+r+e+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=c.round(1.1*e,2),e=c.round(2*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",-"+t+e+"-"+t+","+t+e+t+","+t+e+t+",-"+t+e+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=c.round(1.4*e,2),e=c.round(1.9*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",0"+e+"0,"+t+e+t+",0"+e+"0,-"+t+e+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=c.round(.7*e,2),e=c.round(1.4*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=c.round(1.4*e,2),e=c.round(.7*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(e){e=c.round(e,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=c.round(e,2),e=c.round(e/Math.sqrt(2),2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=c.round(1.3*e,2),e=c.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+e+",-"+e+"L"+e+","+e+"M-"+e+","+e+"L"+e+",-"+e},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=c.round(1.2*e,2),e=c.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=c.round(e/2,2),e=c.round(e,2);return"M"+t+","+e+"V-"+e+"m-"+e+",0V"+e+"M"+e+","+t+"H-"+e+"m0,-"+e+"H"+e},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+","+e+"L0,0M"+t+","+e+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+",-"+e+"L0,0M"+t+",-"+e+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M"+e+","+t+"L0,0M"+e+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+e+","+t+"L0,0M-"+e+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){e=c.round(1.4*e,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){e=c.round(e,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L-"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L-"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":11}],124:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],125:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),s=e("../../registry"),f=e("../../plots/cartesian/axes"),p=e("../../lib"),m=e("./compute_error");function l(e,t,n,r){var i=t["error_"+r]||{},a=[];if(i.visible&&-1!==["linear","log"].indexOf(n.type)){for(var o=m(i),s=0;s<e.length;s++){var l=e[s],c=l.i;if(void 0===c)c=s;else if(null===c)continue;var u,d=l[r];h(n.c2l(d))&&(u=o(d,c),h(u[0])&&h(u[1])&&(c=l[r+"s"]=d-u[0],u=l[r+"h"]=d+u[1],a.push(c,u)))}i=n._id,t=t._extremes[i],i=f.findExtremes(n,a,p.extendFlat({tozero:t.opts.tozero},{padded:!0}));t.min=t.min.concat(i.min),t.max=t.max.concat(i.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r,i,a=t[n],o=a[0].trace;!0===o.visible&&s.traceIs(o,"errorBarsOK")&&(r=f.getFromId(e,o.xaxis),i=f.getFromId(e,o.yaxis),l(a,o,r,"x"),l(a,o,i,"y"))}}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./compute_error":126,"fast-isnumeric":15}],126:[function(e,t,n){"use strict";function s(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var r=e.array||[];if(n)return function(e,t){t=+r[t];return[t,t]};var i=e.arrayminus||[];return function(e,t){var n=+r[t],t=+i[t];return isNaN(n)&&isNaN(t)?[NaN,NaN]:[t||0,n||0]}}var a=s(t,e.value),o=s(t,e.valueminus);return n||void 0===e.valueminus?function(e){e=a(e);return[e,e]}:function(e){return[o(e),a(e)]}}},{}],127:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../registry"),u=e("../../lib"),d=e("../../plot_api/plot_template"),h=e("./attributes");t.exports=function(e,t,n,r){var i="error_"+r.axis,a=d.newContainer(t,i),o=e[i]||{};function s(e,t){return u.coerce(o,a,h,e,t)}!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)&&(e=!0,"sqrt"!==(i=s("type","array"in o?"data":"percent"))&&(e=s("symmetric",!(("data"===i?"arrayminus":"valueminus")in o))),"data"===i?(s("array"),s("traceref"),e||(s("arrayminus"),s("tracerefminus"))):"percent"!==i&&"constant"!==i||(s("value"),e||s("valueminus")),e="copy_"+r.inherit+"style",r.inherit&&(t["error_"+r.inherit]||{}).visible&&s(e,!(o.color||l(o.thickness)||l(o.width))),r.inherit&&a[e]||(s("color",n),s("thickness"),s("width",c.traceIs(t,"gl3d")?0:4)))}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"./attributes":124,"fast-isnumeric":15}],128:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plot_api/edit_types").overrideAll,a=e("./attributes"),o={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;a={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a),error_z:r.extendFlat({},a)};delete a.error_x.copy_ystyle,delete a.error_y.copy_ystyle,delete a.error_z.copy_ystyle,delete a.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:i(a,"calc","nested"),scattergl:i(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":230,"../../plot_api/edit_types":258,"./attributes":124,"./calc":125,"./compute_error":126,"./defaults":127,"./plot":129,"./style":130}],129:[function(e,t,n){"use strict";var h=e("@plotly/d3"),f=e("fast-isnumeric"),p=e("../drawing"),m=e("../../traces/scatter/subtypes");t.exports=function(r,e,i,l){var c=i.xaxis,u=i.yaxis,d=l&&0<l.duration;e.each(function(e){var t=e[0].trace,a=t.error_x||{},o=t.error_y||{};t.ids&&(n=function(e){return e.id});var s=m.hasMarkers(t)&&0<t.marker.maxdisplayed;o.visible||a.visible||(e=[]);var n=h.select(this).selectAll("g.errorbar").data(e,n);n.exit().remove(),e.length&&(a.visible||n.selectAll("path.xerror").remove(),o.visible||n.selectAll("path.yerror").remove(),n.style("opacity",1),e=n.enter().append("g").classed("errorbar",!0),d&&e.style("opacity",0).transition().duration(l.duration).style("opacity",1),p.setClipUrl(n,i.layerClipId,r),n.each(function(e){var t,n,r=h.select(this),i=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),f(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),f(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,c,u);s&&!e.vis||(e=r.select("path.yerror"),o.visible&&f(i.x)&&f(i.yh)&&f(i.ys)?(n=o.width,t="M"+(i.x-n)+","+i.yh+"h"+2*n+"m-"+n+",0V"+i.ys,i.noYS||(t+="m-"+n+",0h"+2*n),!e.size()?e=r.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(e=e.transition().duration(l.duration).ease(l.easing)),e.attr("d",t)):e.remove(),n=r.select("path.xerror"),a.visible&&f(i.y)&&f(i.xh)&&f(i.xs)?(e=(a.copy_ystyle?o:a).width,t="M"+i.xh+","+(i.y-e)+"v"+2*e+"m0,-"+e+"H"+i.xs,i.noXS||(t+="m0,-"+e+"v"+2*e),!n.size()?n=r.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(n=n.transition().duration(l.duration).ease(l.easing)),n.attr("d",t)):n.remove())}))})}},{"../../traces/scatter/subtypes":378,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],130:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},e=t.error_x||{},t=r.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),e.copy_ystyle&&(e=n),t.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(i.stroke,e.color)})}},{"../color":100,"@plotly/d3":11}],131:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("./layout_attributes").hoverlabel,e=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:e({},i.bgcolor,{arrayOk:!0}),bordercolor:e({},i.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:e({},i.align,{arrayOk:!0}),namelength:e({},i.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":224,"../../plots/font_attributes":305,"./layout_attributes":141}],132:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");function c(e,t,n,r){r=r||s.identity,Array.isArray(e)&&(t[0][n]=r(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;for(var r=0;r<t.length;r++){var i,a=t[r],o=a[0].trace;l.traceIs(o,"pie-like")||((i=l.traceIs(o,"2dMap")?c:s.fillArray)(o.hoverinfo,a,"hi",function(t){return function(e){return s.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}(o)),o.hovertemplate&&i(o.hovertemplate,a,"ht"),o.hoverlabel&&(i(o.hoverlabel.bgcolor,a,"hbg"),i(o.hoverlabel.bordercolor,a,"hbc"),i(o.hoverlabel.font.size,a,"hts"),i(o.hoverlabel.font.color,a,"htc"),i(o.hoverlabel.font.family,a,"htf"),i(o.hoverlabel.namelength,a,"hnl"),i(o.hoverlabel.align,a,"hta")))}}},{"../../lib":230,"../../registry":313}],133:[function(e,t,n){"use strict";var a=e("../../registry"),o=e("./hover").hover;t.exports=function(e,t,n){var r=a.getComponentMethod("annotations","onClick")(e,e._hoverdata);function i(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&o(e,t,n,!0),e._hoverdata&&t&&t.target&&(r&&r.then?r.then(i):i(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":313,"./hover":137}],134:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],135:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./attributes"),o=e("./hoverlabel_defaults");t.exports=function(n,r,e,t){t=i.extendFlat({},t.hoverlabel);r.hovertemplate&&(t.namelength=-1),o(n,r,function(e,t){return i.coerce(n,r,a,e,t)},t)}},{"../../lib":230,"./attributes":131,"./hoverlabel_defaults":138}],136:[function(e,t,o){"use strict";var u=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},o.isTraceInSubplots=function(e,t){if("splom"!==e.type)return-1!==t.indexOf(o.getSubplot(e));for(var n=e.xaxes||[],r=e.yaxes||[],i=0;i<n.length;i++)for(var a=0;a<r.length;a++)if(-1!==t.indexOf(n[i]+r[a]))return!0;return!1},o.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},o.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},o.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||o.quadrature(t,n):"x"===e.charAt(0)?t:n},o.getClosest=function(e,t,n){if(!1!==n.index)0<=n.index&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},o.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},o.quadrature=function(n,r){return function(e){var t=n(e),e=r(e);return Math.sqrt(t*t+e*e)}},o.makeEventData=function(e,t,n){var r,i="index"in e?e.index:e.pointNumber,a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};return t._indexToPoints?1===(r=t._indexToPoints[i]).length?a.pointIndex=r[0]:a.pointIndices=r:a.pointIndex=i,t._module.eventData?a=t._module.eventData(a,e,t,n,i):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),void 0!==e.zLabelVal&&(a.z=e.zLabelVal)),o.appendArrayPointValue(a,t,i),a},o.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=d(a);void 0!==e[o]||void 0!==(a=h(u.nestedProperty(t,a).get(),n))&&(e[o]=a)}},o.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=d(a);if(void 0===e[o]){for(var s=u.nestedProperty(t,a).get(),l=new Array(n.length),c=0;c<n.length;c++)l[c]=h(s,n[c]);e[o]=l}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function d(e){return n[e]||e}function h(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var r={x:!0,y:!0},i={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(e){return"string"==typeof e&&!!i[e]},o.isXYhover=function(e){return"string"==typeof e&&!!r[e]}},{"../../lib":230}],137:[function(e,t,n){"use strict";var te=e("@plotly/d3"),ne=e("fast-isnumeric"),x=e("tinycolor2"),re=e("../../lib"),D=re.strTranslate,O=re.strRotate,ie=e("../../lib/events"),P=e("../../lib/svg_text_utils"),ae=e("../../lib/override_cursor"),R=e("../drawing"),oe=e("../color"),se=e("../dragelement"),le=e("../../plots/cartesian/axes"),ce=e("../../registry"),ue=e("./helpers"),I=e("./constants"),N=e("../legend/defaults"),z=e("../legend/draw"),F=I.YANGLE,e=Math.PI*F/180,de=1/Math.sin(e),_=Math.cos(e),y=Math.sin(e),j=I.HOVERARROWSIZE,B=I.HOVERTEXTPAD,he={box:!0,ohlc:!0,violin:!0,candlestick:!0};function fe(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}n.hover=function(e,t,n,r){e=re.getGraphDiv(e),re.throttle(e._fullLayout._uid+I.HOVERID,I.HOVERMINTIME,function(){!function(e,l,t,n){t=t||"xy";var c=Array.isArray(t)?t:[t],u=e._fullLayout,r=u._plots||[],t=r[t],d=u._has("cartesian");t&&(t=t.overlays.map(function(e){return e.id}),c=c.concat(t));for(var i=c.length,h=new Array(i),f=new Array(i),a=!1,o=0;o<i;o++){var s=c[o];if(r[s])a=!0,h[o]=r[s].xaxis,f[o]=r[s].yaxis;else{if(!u[s]||!u[s]._subplot)return re.warn("Unrecognized subplot: "+s);s=u[s]._subplot;h[o]=s.xaxis,f[o]=s.yaxis}}var p=l.hovermode||u.hovermode;p&&!a&&(p="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(p)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return se.unhoverRaw(e,l);var m=u.hoverdistance;-1===m&&(m=1/0);var g=u.spikedistance;-1===g&&(g=1/0);var _,y,v,b,x,w,T,A,k,M,S,E,C,L=[],D=[],O={hLinePoint:null,vLinePoint:null},P=!1;if(Array.isArray(l))for(p="array",v=0;v<l.length;v++)(x=e.calcdata[l[v].curveNumber||0])&&(w=x[0].trace,"skip"!==x[0].trace.hoverinfo&&(D.push(x),"h"===w.orientation&&(P=!0)));else{for(b=0;b<e.calcdata.length;b++)x=e.calcdata[b],"skip"!==(w=x[0].trace).hoverinfo&&ue.isTraceInSubplots(w,c)&&(D.push(x),"h"===w.orientation&&(P=!0));if(!l.target)j="xpx"in l?l.xpx:h[0]._length/2,B="ypx"in l?l.ypx:f[0]._length/2;else{if(!1===ie.triggerHandler(e,"plotly_beforehover",l))return;var R=l.composedPath&&l.composedPath()[0],R=(R=R||l.target).getBoundingClientRect();j=l.clientX-R.left,B=l.clientY-R.top,u._calcInverseTransform(e);R=re.apply3DTransform(u._invTransform)(j,B);if(j=R[0],B=R[1],j<0||j>h[0]._length||B<0||B>f[0]._length)return se.unhoverRaw(e,l)}if(l.pointerX=j+h[0]._offset,l.pointerY=B+f[0]._offset,_="xval"in l?ue.flat(c,l.xval):ue.p2c(h,j),y="yval"in l?ue.flat(c,l.yval):ue.p2c(f,B),!ne(_[0])||!ne(y[0]))return re.warn("Fx.hover failed",l,e),se.unhoverRaw(e,l)}var I=1/0;function N(e,t){for(b=0;b<D.length;b++)if((x=D[b])&&x[0]&&x[0].trace&&!0===(w=x[0].trace).visible&&0!==w._length&&-1===["carpet","contourcarpet"].indexOf(w._module.name)){var n,r,i;if("splom"===w.type?T=c[A=0]:(T=ue.getSubplot(w),A=c.indexOf(T)),k=p,ue.isUnifiedHover(k)&&(k=k.charAt(0)),E={cd:x,trace:w,xa:h[A],ya:f[A],maxHoverDistance:m,maxSpikeDistance:g,index:!1,distance:Math.min(I,m),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:oe.defaultLine,name:w.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[T]&&(E.subplot=u[T]._subplot),u._splomScenes&&u._splomScenes[w.uid]&&(E.scene=u._splomScenes[w.uid]),C=L.length,"array"===k?"pointNumber"in(r=l[b])?(E.index=r.pointNumber,k="closest"):(k="","xval"in r&&(M=r.xval,k="x"),"yval"in r&&(S=r.yval,k=k?"closest":"y")):S=void 0!==e&&void 0!==t?(M=e,t):(M=_[A],y[A]),0!==m)if(w._module&&w._module.hoverPoints){var a=w._module.hoverPoints(E,M,S,k,{finiteRange:!0,hoverLayer:u._hoverlayer});if(a)for(var o,s=0;s<a.length;s++)o=a[s],ne(o.x0)&&ne(o.y0)&&L.push(function(r,e){var n=r.index,i=r.trace||{},a=r.cd[0],o=r.cd[n]||{};function s(e){return e||ne(e)&&0===e}var l=Array.isArray(n)?function(e,t){e=re.castOption(a,n,e);return s(e)?e:re.extractOption({},i,"",t)}:function(e,t){return re.extractOption(o,i,e,t)};function t(e,t,n){n=l(t,n);s(n)&&(r[e]=n)}t("hoverinfo","hi","hoverinfo"),t("bgcolor","hbg","hoverlabel.bgcolor"),t("borderColor","hbc","hoverlabel.bordercolor"),t("fontFamily","htf","hoverlabel.font.family"),t("fontSize","hts","hoverlabel.font.size"),t("fontColor","htc","hoverlabel.font.color"),t("nameLength","hnl","hoverlabel.namelength"),t("textAlign","hta","hoverlabel.align"),r.posref="y"===e||"closest"===e&&"h"===i.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=re.constrain(r.x0,0,r.xa._length),r.x1=re.constrain(r.x1,0,r.xa._length),r.y0=re.constrain(r.y0,0,r.ya._length),r.y1=re.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:le.hoverLabelText(r.xa,r.xLabelVal,i.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal));void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:le.hoverLabelText(r.ya,r.yLabelVal,i.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal));void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal));isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0||(c=le.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text,void 0!==r.xerrneg?r.xLabel+=" +"+c+" / -"+le.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+="  "+c,"x"===e&&(r.distance+=1));{var c;isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0||(c=le.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text,void 0!==r.yerrneg?r.yLabel+=" +"+c+" / -"+le.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+="  "+c,"y"===e&&(r.distance+=1))}e=r.hoverinfo||r.trace.hoverinfo;e&&"all"!==e&&(-1===(e=Array.isArray(e)?e:e.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===e.indexOf("y")&&(r.yLabel=void 0),-1===e.indexOf("z")&&(r.zLabel=void 0),-1===e.indexOf("text")&&(r.text=void 0),-1===e.indexOf("name")&&(r.name=void 0));return r}(o,p))}else re.log("Unrecognized trace type in hover:",w);"closest"===p&&L.length>C&&(L.splice(0,C),I=L[0].distance),d&&0!==g&&0===L.length&&(E.distance=g,E.index=!1,(i=(i=w._module.hoverPoints(E,M,S,"closest",{hoverLayer:u._hoverlayer}))&&i.filter(function(e){return e.spikeDistance<=g}))&&i.length&&((r=i.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap})).length&&(r=r[0],ne(r.x0)&&ne(r.y0)&&(n=F(r),(!O.vLinePoint||O.vLinePoint.spikeDistance>n.spikeDistance)&&(O.vLinePoint=n))),(i=i.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap})).length&&(i=i[0],ne(i.x0)&&ne(i.y0)&&(n=F(i),(!O.hLinePoint||O.hLinePoint.spikeDistance>n.spikeDistance)&&(O.hLinePoint=n)))))}}function z(e,t){for(var n,r=null,i=1/0,a=0;a<e.length;a++)(n=e[a].spikeDistance)<=i&&n<=t&&(r=e[a],i=n);return r}function F(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}N();var R={fullLayout:u,container:u._hoverlayer,outerContainer:u._paperdiv,event:l},j=e._spikepoints,B={vLinePoint:O.vLinePoint,hLinePoint:O.hLinePoint};e._spikepoints=B,!d||0===g||0!==L.length&&(H=z(L.filter(function(e){return e.ya.showspikes}),g),O.hLinePoint=F(H),H=z(L.filter(function(e){return e.xa.showspikes}),g),O.vLinePoint=F(H));if(0===L.length){var H=se.unhoverRaw(e,l);return!d||null===O.hLinePoint&&null===O.vLinePoint||_e(j)&&ge(e,O,R)}d&&_e(j)&&ge(e,O,R);var U,R=function(){L.sort(function(e,t){return e.distance-t.distance}),L=function(e,t){for(var n=t.charAt(0),r=[],i=[],a=[],o=0;o<e.length;o++){var s=e[o];(ce.traceIs(s.trace,"bar-like")||ce.traceIs(s.trace,"box-violin")?a:s.trace[n+"period"]?i:r).push(s)}return r.concat(i).concat(a)}(L,p)};if(R(),ue.isXYhover(k)&&0!==L[0].length&&"splom"!==L[0].trace.type){var V=L[0],q=(L=he[V.trace.type]?L.filter(function(e){return e.trace.index===V.trace.index}):[V]).length,Y=ye("x",V,u),G=ye("y",V,u);N(Y,G);var W=[],X={},Z=0,J=function(e){var t,n,r=he[e.trace.type]?fe(e):e.trace.index;X[r]?(t=X[r]-1,n=W[t],0<t&&Math.abs(e.distance)<Math.abs(n.distance)&&(W[t]=e)):(Z++,X[r]=Z,W.push(e))};for(U=0;U<q;U++)J(L[U]);for(U=L.length-1;q-1<U;U--)J(L[U]);L=W,R()}var Y=e._hoverdata,$=[];for(v=0;v<L.length;v++){var Q,K=L[v],ee=ue.makeEventData(K,K.trace,K.cd);!1!==K.hovertemplate&&(Q=!1,K.cd[K.index]&&K.cd[K.index].ht&&(Q=K.cd[K.index].ht),K.hovertemplate=Q||K.trace.hovertemplate||!1),K.eventData=[ee],$.push(ee)}e._hoverdata=$;G="y"===p&&(1<D.length||1<L.length)||"closest"===p&&P&&1<L.length,R=oe.combine(u.plot_bgcolor||oe.background,u.paper_bgcolor),R={hovermode:p,rotateLabels:G,bgColor:R,container:u._hoverlayer,outerContainer:u._paperdiv,commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance},R=pe(L,R,e);ue.isUnifiedHover(p)||(function(e,r,i){var a,o,s,l,c,u,t,n=0,d=1,h=e.size(),f=new Array(h),p=0;function m(e){var t=e[0],n=e[e.length-1];if(o=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,.01<o){for(c=e.length-1;0<=c;c--)e[c].dp+=o;a=!1}if(!(s<.01)){if(o<-.01){for(c=e.length-1;0<=c;c--)e[c].dp-=s;a=!1}if(a){var r=0;for(l=0;l<e.length;l++)(u=e[l]).pos+u.dp+u.size>t.pmax&&r++;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos>t.pmax-1&&(u.del=!0,r--);for(l=0;l<e.length&&!(r<=0);l++)if((u=e[l]).pos<t.pmin+1)for(u.del=!0,r--,s=2*u.size,c=e.length-1;0<=c;c--)e[c].dp-=s;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos+u.dp+u.size>t.pmax&&(u.del=!0,r--)}}}e.each(function(e){var t=e[r],n="x"===t._id.charAt(0),t=t.range;0===p&&t&&t[0]>t[1]!=n&&(d=-1),f[p++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(n?de:1)/2,pmin:0,pmax:n?i.width:i.height}]}),f.sort(function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)});for(;!a&&n<=h;){for(n++,a=!0,l=0;l<f.length-1;){var g=f[l],_=f[l+1],y=g[g.length-1],v=_[0];if(.01<(o=y.pos+y.dp+y.size-v.pos-v.dp+v.size)&&y.pmin===v.pmin&&y.pmax===v.pmax){for(c=_.length-1;0<=c;c--)_[c].dp+=o;for(g.push.apply(g,_),f.splice(l+1,1),t=0,c=g.length-1;0<=c;c--)t+=g[c].dp;for(s=t/g.length,c=g.length-1;0<=c;c--)g[c].dp-=s;a=!1}else l++}f.forEach(m)}for(l=f.length-1;0<=l;l--){var b=f[l];for(c=b.length-1;0<=c;c--){var x=b[c],w=x.datum;w.offset=x.dp,w.del=x.del}}}(R,G?"xa":"ya",u),me(R,G,u._invScaleX,u._invScaleY));l.target&&l.target.tagName&&(G=ce.getComponentMethod("annotations","hasClickToShow")(e,$),ae(te.select(l.target),G?"pointer":""));l.target&&!n&&function(e,t){if(!t||t.length!==e._hoverdata.length)return!0;for(var n=t.length-1;0<=n;n--){var r=t[n],i=e._hoverdata[n];if(r.curveNumber!==i.curveNumber||String(r.pointNumber)!==String(i.pointNumber)||String(r.pointNumbers)!==String(i.pointNumbers))return!0}return!1}(e,Y)&&(Y&&e.emit("plotly_unhover",{event:l,points:Y}),e.emit("plotly_hover",{event:l,points:e._hoverdata,xaxes:h,yaxes:f,xvals:_,yvals:y}))}(e,t,n,r)})},n.loneHover=function(e,r){var t=!0;Array.isArray(e)||(t=!1,e=[e]);var n=e.map(function(e){return{color:e.color||oe.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,eventData:e.eventData||!1,hovertemplateLabels:e.hovertemplateLabels||!1}}),i=te.select(r.container),a=r.outerContainer?te.select(r.outerContainer):i,e={hovermode:"closest",rotateLabels:!1,bgColor:r.bgColor||oe.background,container:i,outerContainer:a},i=pe(n,e,r.gd),o=0,s=0;i.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var n=e.y0-e.by/2;e.offset=n-5<o?o-n+5:0,o=n+e.by+e.offset,t===r.anchorIndex&&(s=e.offset)}).each(function(e){e.offset-=s});a=r.gd._fullLayout._invScaleX,n=r.gd._fullLayout._invScaleY;return me(i,e.rotateLabels,a,n),t?i:i.node()};var l=/<extra>([\s\S]*)<\/extra>/;function pe(e,t,g){var _=g._fullLayout,y=t.hovermode,p=t.rotateLabels,m=t.bgColor,n=t.container,r=t.outerContainer,v=t.commonLabelOpts||{},b=t.fontFamily||I.HOVERFONT,x=t.fontSize||I.HOVERFONTSIZE,w=e[0],T=w.xa,A=w.ya,i=y.charAt(0),k=w[i+"Label"],a=r.node().getBoundingClientRect(),M=a.top,S=a.width,E=a.height,C=void 0!==k&&w.distance<=t.hoverdistance&&("x"===y||"y"===y);if(C){for(var o=!0,s=0;s<e.length;s++)if(o&&void 0===e[s].zLabel&&(o=!1),l=e[s].hoverinfo||e[s].trace.hoverinfo){var l=Array.isArray(l)?l:l.split("+");if(-1===l.indexOf("all")&&-1===l.indexOf(y)){C=!1;break}}o&&(C=!1)}var c=n.selectAll("g.axistext").data(C?[0]:[]);if(c.enter().append("g").classed("axistext",!0),c.exit().remove(),c.each(function(){var e=te.select(this),t=re.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})}),n=re.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)}),r=v.bgcolor||oe.defaultLine,i=v.bordercolor||oe.contrast(r),a=oe.contrast(r),o={family:v.font.family||b,size:v.font.size||x,color:v.font.color||a};t.style({fill:r,stroke:i}),n.text(k).call(R.font,o).call(P.positionText,0,0).call(P.convertToTspans,g),e.attr("transform","");var s,l,c,u,d,h,f,p,m=n.node().getBoundingClientRect();"x"===y?(d="top"===T.side?"-":"",n.attr("text-anchor","middle").call(P.positionText,0,"top"===T.side?M-m.bottom-j-B:M-m.top+j+B),s=T._offset+(w.x0+w.x1)/2,l=A._offset+("top"===T.side?0:A._length),s<(i=m.width/2+B)?t.attr("d","M-"+((s=i)-j)+",0L-"+(i-2*j)+","+d+j+"H"+(B+m.width/2)+"v"+d+(2*B+m.height)+"H-"+i+"V"+d+j+"Z"):s>_.width-i?(s=_.width-i,t.attr("d","M"+(i-j)+",0L"+i+","+d+j+"v"+d+(2*B+m.height)+"H-"+i+"V"+d+j+"H"+(i-2*j)+"Z")):t.attr("d","M0,0L"+j+","+d+j+"H"+(B+m.width/2)+"v"+d+(2*B+m.height)+"H-"+(B+m.width/2)+"V"+d+j+"H-"+j+"Z")):(s="right"===A.side?(c="start",u=1,h="",T._offset+T._length):(c="end",u=-1,h="-",T._offset),l=A._offset+(w.y0+w.y1)/2,n.attr("text-anchor",c),t.attr("d","M0,0L"+h+j+","+j+"V"+(B+m.height/2)+"h"+h+(2*B+m.width)+"V-"+(B+m.height/2)+"H"+h+j+"V-"+j+"Z"),d=m.height/2,t=M-m.top-d,h="clip"+_._uid+"commonlabel"+A._id,s<m.width+2*B+j?(f="M-"+(j+B)+"-"+d+"h-"+(m.width-B)+"V"+d+"h"+(m.width-B)+"Z",p=m.width-s+B,P.positionText(n,p,t),"end"===c&&n.selectAll("tspan").each(function(){var e=te.select(this),t=R.tester.append("text").text(e.text()).call(R.font,o),n=t.node().getBoundingClientRect();Math.round(n.width)<Math.round(m.width)&&e.attr("x",p-n.width),t.remove()})):(P.positionText(n,u*(B+j),t),f=null),(t=_._topclips.selectAll("#"+h).data(f?[0]:[])).enter().append("clipPath").attr("id",h).append("path"),t.exit().remove(),t.select("path").attr("d",f),R.setClipUrl(n,f?h:null,g)),e.attr("transform",D(s,l))}),ue.isUnifiedHover(y)){if(n.selectAll("g.hovertext").remove(),0===e.length)return;i={showlegend:!0,legend:{title:{text:k,font:_.hoverlabel.font},font:_.hoverlabel.font,bgcolor:_.hoverlabel.bgcolor,bordercolor:_.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:_.legend?_.legend.traceorder:void 0,orientation:"v"}},r={};N(i,r,g._fullData);var u=r.legend;u.entries=[];for(var d=0;d<e.length;d++){var h=H(e[d],!0,y,_,k),f=h[0],L=h[1],h=e[d];h.name=L,h.text=""!==L?L+" : "+f:f;f=h.cd[h.index];f&&(f.mc&&(h.mc=f.mc),f.mcc&&(h.mc=f.mcc),f.mlc&&(h.mlc=f.mlc),f.mlcc&&(h.mlc=f.mlcc),f.mlw&&(h.mlw=f.mlw),f.mrc&&(h.mrc=f.mrc),f.dir&&(h.dir=f.dir)),h._distinct=!0,u.entries.push([h])}u.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),u.layer=n,u._inHover=!0,z(g,u);a=e[0],t=(a.y0+a.y1)/2,c=(a.x0+a.x1)/2,i=n.select("g.legend"),r=i.node().getBoundingClientRect();c+=T._offset,t+=A._offset-r.height/2;a=r.width+2*B;!(c+a<=S)&&0<=c-a?c-=a:c+=2*B;a=r.height+2*B,r=E<=t+a;return a<=E&&(t<=M?t=A._offset+2*B:r&&(t=E-a)),i.attr("transform",D(c,t)),i}n=n.selectAll("g.hovertext").data(e,fe);return n.enter().append("g").classed("hovertext",!0).each(function(){var e=te.select(this);e.append("rect").call(oe.fill,oe.addOpacity(m,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(R.font,b,x)}),n.exit().remove(),n.each(function(e){var t=te.select(this).attr("transform",""),n=e.color;Array.isArray(n)&&(n=n[e.eventData[0].pointNumber]);var r=e.bgcolor||n,i=oe.combine(oe.opacity(r)?r:oe.defaultLine,m),a=oe.combine(oe.opacity(n)?n:oe.defaultLine,m),o=e.borderColor||oe.contrast(i),s=H(e,C,y,_,k,t),l=s[0],c=s[1],u=t.select("text.nums").call(R.font,e.fontFamily||b,e.fontSize||x,e.fontColor||o).text(l).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),r=t.select("text.name"),n=0,s=0;c&&c!==l?(r.call(R.font,e.fontFamily||b,e.fontSize||x,a).text(c).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),n=(f=r.node().getBoundingClientRect()).width+2*B,s=f.height+2*B):(r.remove(),t.select("rect").remove()),t.select("path").style({fill:i,stroke:o});var d,h,l=u.node().getBoundingClientRect(),a=e.xa._offset+(e.x0+e.x1)/2,c=e.ya._offset+(e.y0+e.y1)/2,f=Math.abs(e.x1-e.x0),i=Math.abs(e.y1-e.y0),o=l.width+j+B+n;e.ty0=M-l.top,e.bx=l.width+2*B,e.by=Math.max(l.height+2*B,s),e.anchor="start",e.txwidth=l.width,e.tx2width=n,e.offset=0,p?(e.pos=a,h=c+i/2+o<=E,d=0<=c-i/2-o,"top"!==e.idealAlign&&h||!d?h?(c+=i/2,e.anchor="start"):e.anchor="middle":(c-=i/2,e.anchor="end")):(e.pos=c,h=a+f/2+o<=S,d=0<=a-f/2-o,"left"!==e.idealAlign&&h||!d?h?(a+=f/2,e.anchor="start"):(e.anchor="middle",o=a-(h=o/2),0<(h=a+h-S)&&(a-=h),o<0&&(a+=-o)):(a-=f/2,e.anchor="end")),u.attr("text-anchor",e.anchor),n&&r.attr("text-anchor",e.anchor),t.attr("transform",D(a,c)+(p?O(F):""))}),n}function H(n,e,t,r,i,a){var o="",s="";void 0!==n.nameOverride&&(n.name=n.nameOverride),n.name&&(n.trace._meta&&(n.name=re.templateString(n.name,n.trace._meta)),o=c(n.name,n.nameLength));t=t.charAt(0);void 0!==n.zLabel?(void 0!==n.xLabel&&(s+="x: "+n.xLabel+"<br>"),void 0!==n.yLabel&&(s+="y: "+n.yLabel+"<br>"),"choropleth"!==n.trace.type&&"choroplethmapbox"!==n.trace.type&&(s+=(s?"z: ":"")+n.zLabel)):e&&n[t+"Label"]===i?s=n[("x"===t?"y":"x")+"Label"]||"":void 0===n.xLabel?void 0!==n.yLabel&&"scattercarpet"!==n.trace.type&&(s=n.yLabel):s=void 0===n.yLabel?n.xLabel:"("+n.xLabel+", "+n.yLabel+")",!n.text&&0!==n.text||Array.isArray(n.text)||(s+=(s?"<br>":"")+n.text),void 0!==n.extraText&&(s+=(s?"<br>":"")+n.extraText),a&&""===s&&!n.hovertemplate&&(""===o&&a.remove(),s=o);e=n.hovertemplate||!1;return e&&(a=n.hovertemplateLabels||n,n[t+"Label"]!==i&&(a[t+"other"]=a[t+"Val"],a[t+"otherLabel"]=a[t+"Label"]),s=(s=re.hovertemplateString(e,a,r._d3locale,n.eventData[0]||{},n.trace._meta)).replace(l,function(e,t){return o=c(t,n.nameLength),""})),[s,o]}function me(e,h,f,p){function m(e){return e*f}function g(e){return e*p}e.each(function(e){var t=te.select(this);if(e.del)return t.remove();var n=t.select("text.nums"),r=e.anchor,i="end"===r?-1:1,a={start:1,end:-1,middle:0}[r],o=a*(j+B),s=o+a*(e.txwidth+B),l=0,c=e.offset,u="middle"===r;u&&(o-=e.tx2width/2,s+=e.txwidth/2+B),h&&(c*=-y,l=e.offset*_),t.select("path").attr("d",u?"M-"+m(e.bx/2+e.tx2width/2)+","+g(c-e.by/2)+"h"+m(e.bx)+"v"+g(e.by)+"h-"+m(e.bx)+"Z":"M0,0L"+m(i*j+l)+","+g(j+c)+"v"+g(e.by/2-j)+"h"+m(i*e.bx)+"v-"+g(e.by)+"H"+m(i*j+l)+"V"+g(c-j)+"Z");var d=l+o,i=c+e.ty0-e.by/2+B,o=e.textAlign||"auto";"auto"!==o&&("left"===o&&"start"!==r?(n.attr("text-anchor","start"),d=u?-e.bx/2-e.tx2width/2+B:-e.bx-B):"right"===o&&"end"!==r&&(n.attr("text-anchor","end"),d=u?e.bx/2-e.tx2width/2-B:e.bx+B)),n.call(P.positionText,d*f,i*p),e.tx2width&&(t.select("text.name").call(P.positionText,m(s+a*B+l),g(c+e.ty0-e.by/2+B)),t.select("rect").call(R.setRect,m(s+(a-1)*e.tx2width/2+l),g(c-e.by/2-1),m(e.tx2width),g(e.by+2)))})}function ge(e,t,n){var r,i,a,o,s,l,c,u,d,h,f,p,m=n.container,g=n.fullLayout,_=g._size,y=n.event,v=!!t.hLinePoint,b=!!t.vLinePoint;m.selectAll(".spikeline").remove(),(b||v)&&(r=oe.combine(g.plot_bgcolor,g.paper_bgcolor),v&&(i=(o=t.hLinePoint)&&o.xa,a="cursor"===(d=o&&o.ya).spikesnap?(c=y.pointerX,y.pointerY):(c=i._offset+o.x,d._offset+o.y),n=x.readability(o.color,r)<1.5?oe.contrast(r):o.color,g=d.spikemode,v=d.spikethickness,h=d.spikecolor||n,o=le.getPxPosition(e,d),-1===g.indexOf("toaxis")&&-1===g.indexOf("across")||(-1!==g.indexOf("toaxis")&&(s=o,l=c),-1!==g.indexOf("across")&&(n=d._counterDomainMin,c=d._counterDomainMax,"free"===d.anchor&&(n=Math.min(n,d.position),c=Math.max(c,d.position)),s=_.l+n*_.w,l=_.l+c*_.w),m.insert("line",":first-child").attr({x1:s,x2:l,y1:a,y2:a,"stroke-width":v,stroke:h,"stroke-dasharray":R.dashStyle(d.spikedash,v)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:s,x2:l,y1:a,y2:a,"stroke-width":v+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==g.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:o+("right"!==d.side?v:-v),cy:a,r:v,fill:h}).classed("spikeline",!0)),b&&(i=(h=t.vLinePoint)&&h.xa,d=h&&h.ya,b="cursor"===i.spikesnap?(u=y.pointerX,y.pointerY):(u=i._offset+h.x,d._offset+h.y),t=x.readability(h.color,r)<1.5?oe.contrast(r):h.color,y=i.spikemode,d=i.spikethickness,h=i.spikecolor||t,t=le.getPxPosition(e,i),-1===y.indexOf("toaxis")&&-1===y.indexOf("across")||(-1!==y.indexOf("toaxis")&&(f=t,p=b),-1!==y.indexOf("across")&&(e=i._counterDomainMin,b=i._counterDomainMax,"free"===i.anchor&&(e=Math.min(e,i.position),b=Math.max(b,i.position)),f=_.t+(1-b)*_.h,p=_.t+(1-e)*_.h),m.insert("line",":first-child").attr({x1:u,x2:u,y1:f,y2:p,"stroke-width":d,stroke:h,"stroke-dasharray":R.dashStyle(i.spikedash,d)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:u,x2:u,y1:f,y2:p,"stroke-width":d+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==y.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:u,cy:t-("top"!==i.side?d:-d),r:d,fill:h}).classed("spikeline",!0)))}function _e(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function c(e,t){return P.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function ye(e,t,n){var r=t[e+"a"],e=t[e+"Val"];"category"===r.type?e=r._categoriesMap[e]:"date"===r.type&&(e=r.d2c(e));t=t.cd[t.index];return t&&t.t&&t.t.posLetter===r._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(e+=t.t.dPos)),e}},{"../../lib":230,"../../lib/events":223,"../../lib/override_cursor":241,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../legend/defaults":152,"../legend/draw":153,"./constants":134,"./helpers":136,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],138:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("../color"),s=e("./helpers").isUnifiedHover;t.exports=function(e,t,n,r){function i(e){r.font[e]||(r.font[e]=(t.legend||t).font[e])}r=r||{},t&&s(t.hovermode)&&(r.font||(r.font={}),i("size"),i("family"),i("color"),t.legend?(r.bgcolor||(r.bgcolor=o.combine(t.legend.bgcolor,t.paper_bgcolor)),r.bordercolor||(r.bordercolor=t.legend.bordercolor)):r.bgcolor||(r.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),a.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":230,"../color":100,"./helpers":136}],139:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return void 0!==r[e]?r[e]:i.coerce(n,r,a,e,t)}return e("clickmode"),e("hovermode")}},{"../../lib":230,"./layout_attributes":141}],140:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../../lib"),a=e("../dragelement"),o=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,n){return i.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(t,n,e){return i.castOption(t,e,"hoverinfo",function(e){return i.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)})},hover:l.hover,unhover:a.unhover,loneHover:l.loneHover,loneUnhover:function(e){e=i.isD3Selection(e)?e:r.select(e);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":230,"../dragelement":119,"./attributes":131,"./calc":132,"./click":133,"./constants":134,"./defaults":135,"./helpers":136,"./hover":137,"./layout_attributes":141,"./layout_defaults":142,"./layout_global_defaults":143,"@plotly/d3":11}],141:[function(e,t,n){"use strict";var r=e("./constants"),e=e("../../plots/font_attributes")({editType:"none"});e.family.dflt=r.HOVERFONT,e.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:e,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":305,"./constants":134}],142:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes"),l=e("./hovermode_defaults"),c=e("./hoverlabel_defaults");t.exports=function(n,r){function e(e,t){return o.coerce(n,r,s,e,t)}l(n,r)&&(e("hoverdistance"),e("spikedistance")),"select"===e("dragmode")&&e("selectdirection");var t=r._has("mapbox"),i=r._has("geo"),a=r._basePlotModules.length;"zoom"===r.dragmode&&((t||i)&&1===a||t&&i&&2===a)&&(r.dragmode="pan"),c(n,r,e)}},{"../../lib":230,"./hoverlabel_defaults":138,"./hovermode_defaults":139,"./layout_attributes":141}],143:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./hoverlabel_defaults"),o=e("./layout_attributes");t.exports=function(n,r){a(n,r,function(e,t){return i.coerce(n,r,o,e,t)})}},{"../../lib":230,"./hoverlabel_defaults":138,"./layout_attributes":141}],144:[function(e,t,n){"use strict";var p=e("../../lib"),r=e("../../lib/regex").counter,i=e("../../plots/domain").attributes,a=e("../../plots/cartesian/constants").idRegex,m=e("../../plot_api/plot_template"),g={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function D(e,t,n){t=t[n+"axes"],n=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(t)?t:n.length?n:void 0}function _(e,t,n,r,i,a){var o=t(e+"gap",n),n=t("domain."+e);t(e+"side",r);for(var s=new Array(i),l=n[0],c=(n[1]-l)/(i-o),u=c*(1-o),d=0;d<i;d++){var h=l+c*d;s[a?i-1-d:d]=[h,h+u]}return s}function O(e,n,t,r,i){var a,o=new Array(t);function s(e,t){-1!==n.indexOf(t)&&void 0===r[t]?(o[e]=t,r[t]=e):o[e]=""}if(Array.isArray(e))for(a=0;a<t;a++)s(a,e[a]);else for(s(0,i),a=1;a<t;a++)s(a,i+(a+1));return o}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:g}},layoutAttributes:g,sizeDefaults:function(e,t){var n,r,i,a,o,s,l,c,u=e.grid||{},d=D(t,u,"x"),h=D(t,u,"y");function f(e,t){return p.coerce(u,r,g,e,t)}(e.grid||d||h)&&(n=Array.isArray(u.subplots)&&Array.isArray(u.subplots[0]),o=Array.isArray(d),s=Array.isArray(h),e=o&&d!==u.xaxes&&s&&h!==u.yaxes,n?(i=u.subplots.length,a=u.subplots[0].length):(s&&(i=h.length),o&&(a=d.length)),r=m.newContainer(t,"grid"),1<(i=f("rows",i))*(a=f("columns",a))?(n||o||s||"independent"===f("pattern")&&(n=!0),r._hasSubplotGrid=n,o="top to bottom"===f("roworder"),s=n?.3:.1,e&&t._splomGridDflt&&(l=t._splomGridDflt.xside,c=t._splomGridDflt.yside),r._domains={x:_("x",f,n?.2:.1,l,a),y:_("y",f,s,c,i,o)}):delete t.grid)},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,i,a,o,s=e.grid||{},l=t._subplots,c=n._hasSubplotGrid,u=n.rows,d=n.columns,h="independent"===n.pattern,f=n._axisMap={};if(c)for(var p=s.subplots||[],m=n.subplots=new Array(u),g=1,_=0;_<u;_++)for(var y=m[_]=new Array(d),v=p[_]||[],b=0;b<d;b++)h?(a=1===g?"xy":"x"+g+"y"+g,g++):a=v[b],y[b]="",-1!==l.cartesian.indexOf(a)&&(o=a.indexOf("y"),r=a.slice(0,o),i=a.slice(o),void 0!==f[r]&&f[r]!==b||void 0!==f[i]&&f[i]!==_||(y[b]=a,f[r]=b,f[i]=_));else{e=D(t,s,"x"),s=D(t,s,"y");n.xaxes=O(e,l.xaxis,d,f,"x"),n.yaxes=O(s,l.yaxis,u,f,"y")}var x,w=n._anchors={},T="top to bottom"===n.roworder;for(x in f){var A,k,M,S=x.charAt(0),E=n[S+"side"];if(E.length<8)w[x]="free";else if("x"===S){if(M="t"===E.charAt(0)==T?(A=0,k=1,u):(A=u-1,k=-1),c){var C=f[x];for(_=A;_!==M;_+=k)if((a=m[_][C])&&(o=a.indexOf("y"),a.slice(0,o)===x)){w[x]=a.slice(o);break}}else for(_=A;_!==M;_+=k)if(i=n.yaxes[_],-1!==l.cartesian.indexOf(x+i)){w[x]=i;break}}else if(M="l"===E.charAt(0)?(A=0,k=1,d):(A=d-1,k=-1),c){var L=f[x];for(_=A;_!==M;_+=k)if((a=m[L][_])&&(o=a.indexOf("y"),a.slice(o)===x)){w[x]=a.slice(0,o);break}}else for(_=A;_!==M;_+=k)if(r=n.xaxes[_],-1!==l.cartesian.indexOf(r+x)){w[x]=r;break}}}}}},{"../../lib":230,"../../lib/regex":246,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/domain":304}],145:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),i=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283}],146:[function(e,t,n){"use strict";var p=e("fast-isnumeric"),m=e("../../lib/to_log_range");t.exports=function(e,t,n,r){t=t||{};var i="log"===n&&"linear"===t.type,n="linear"===n&&"log"===t.type;if(i||n)for(var a=e._fullLayout.images,o=t._id.charAt(0),s=0;s<a.length;s++){var l,c,u,d,h,f="images["+s+"].";(h=a[s])[o+"ref"]===t._id&&(l=h[o],c=h["size"+o],d=u=null,d=i?(u=m(l,t.range),h=c/Math.pow(10,u)/2,2*Math.log(h+Math.sqrt(1+h*h))/Math.LN10):(u=Math.pow(10,l))*(Math.pow(10,c/2)-Math.pow(10,-c/2)),p(u)?p(d)||(d=null):d=u=null,r(f+o,u),r(f+"size"+o,d))}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],147:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),h=e("./attributes");function i(n,r,e){function t(e,t){return u.coerce(n,r,h,e,t)}var i=t("source");if(!t("visible",!!i))return r;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var a={_fullLayout:e},o=["x","y"],s=0;s<2;s++){var l=o[s],c=d.coerceRef(n,r,a,l,"paper",void 0);"paper"!==c&&d.getFromId(a,c)._imgIndices.push(r._index),d.coercePosition(r,a,t,c,l,0)}return r}t.exports=function(e,t){r(e,t,{name:"images",handleItemDefaults:i})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":145}],148:[function(e,t,n){"use strict";var _=e("@plotly/d3"),y=e("../drawing"),v=e("../../plots/cartesian/axes"),b=e("../../plots/cartesian/axis_ids"),x=e("../../constants/xmlns_namespaces");t.exports=function(h){for(var f=h._fullLayout,e=[],t={},n=[],r=0;r<f.images.length;r++){var i,a,o=f.images[r];o.visible&&("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref?(i=b.ref2id(o.xref)+b.ref2id(o.yref),(a=f._plots[i])?(t[i=a.mainplot?a.mainplot.id:i]||(t[i]=[]),t[i].push(o)):n.push(o)):("above"===o.layer?e:n).push(o))}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var e,i=_.select(this);this._imgSrc!==r.source&&(i.attr("xmlns",x.svg),r.source&&"data:"===r.source.slice(0,5)?(i.attr("xlink:href",r.source),this._imgSrc=r.source):(e=new Promise(function(t){var e=new Image;function n(){i.remove(),t()}(this.img=e).setAttribute("crossOrigin","anonymous"),e.onerror=n,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);e=e.toDataURL("image/png");i.attr("xlink:href",e),t()},i.on("error",n),e.src=r.source,this._imgSrc=r.source}.bind(this)),h._promises.push(e)))}function l(e){var t=_.select(this),n=v.getFromId(h,e.xref),r=v.getFromId(h,e.yref),i="domain"===v.getRefType(e.xref),a="domain"===v.getRefType(e.yref),o=f._size,s=void 0!==n?"string"==typeof e.xref&&i?n._length*e.sizex:Math.abs(n.l2p(e.sizex)-n.l2p(0)):e.sizex*o.w,l=void 0!==r?"string"==typeof e.yref&&a?r._length*e.sizey:Math.abs(r.l2p(e.sizey)-r.l2p(0)):e.sizey*o.h,c=s*p[e.xanchor].offset,u=l*m[e.yanchor].offset,d=p[e.xanchor].sizing+m[e.yanchor].sizing,i=void 0!==n?"string"==typeof e.xref&&i?n._length*e.x+n._offset:n.r2p(e.x)+n._offset:e.x*o.w+o.l;switch(i+=c,o=void 0!==r?"string"==typeof e.yref&&a?r._length*(1-e.y)+r._offset:r.r2p(e.y)+r._offset:o.h-e.y*o.h+o.t,o+=u,e.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}t.attr({x:i,y:o,width:s,height:l,preserveAspectRatio:d,opacity:e.opacity});r=(n&&"domain"!==v.getRefType(e.xref)?n._id:"")+(r&&"domain"!==v.getRefType(e.yref)?r._id:"");y.setClipUrl(t,r?"clip"+f._uid+r:null,h)}var c=f._imageLowerLayer.selectAll("image").data(n),u=f._imageUpperLayer.selectAll("image").data(e);c.enter().append("image"),u.enter().append("image"),c.exit().remove(),u.exit().remove(),c.each(function(e){s.bind(this)(e),l.bind(this)(e)}),u.each(function(e){s.bind(this)(e),l.bind(this)(e)});var d=Object.keys(f._plots);for(r=0;r<d.length;r++){i=d[r];var g=f._plots[i];g.imagelayer&&((g=g.imagelayer.selectAll("image").data(t[i]||[])).enter().append("image"),g.exit().remove(),g.each(function(e){s.bind(this)(e),l.bind(this)(e)}))}}},{"../../constants/xmlns_namespaces":211,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_ids":280,"../drawing":122,"@plotly/d3":11}],149:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":145,"./convert_coords":146,"./defaults":147,"./draw":148}],150:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),e=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":305,"../color/attributes":99}],151:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],152:[function(e,t,n){"use strict";var m=e("../../registry"),g=e("../../lib"),_=e("../../plot_api/plot_template"),y=e("./attributes"),v=e("../../plots/layout_attributes"),b=e("./helpers");t.exports=function(e,t,n){for(var r=e.legend||{},i=0,a=!1,o="normal",s=0;s<n.length;s++){var l=n[s];l.visible&&(!l.showlegend&&(!l._dfltShowLegend||l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt)||(i++,l.showlegend&&(a=!0,!m.traceIs(l,"pie-like")&&!0!==l._input.showlegend||i++)),(m.traceIs(l,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(o=b.isGrouped({traceorder:o})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(o=b.isReversed({traceorder:o})?"reversed+grouped":"grouped"))}var c,u,d,h,f=g.coerce(e,t,v,"showlegend",a&&1<i);function p(e,t){return g.coerce(r,c,y,e,t)}!1===f&&!r.uirevision||(c=_.newContainer(t,"legend"),p("uirevision",t.uirevision),!1!==f&&(p("bgcolor",t.paper_bgcolor),p("bordercolor"),p("borderwidth"),h=g.coerceFont(p,"font",t.font),e=(f="h"===p("orientation"))?(u=0,m.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(d=1.1,"bottom"):(d=-.1,"top")):(u=1.02,d=1,"auto"),p("traceorder",o),b.isGrouped(t.legend)&&p("tracegroupgap"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("x",u),p("xanchor"),p("y",d),p("yanchor",e),p("valign"),g.noneOrAll(r,c,["x","y"]),p("title.text")&&(p("title.side",f?"left":"top"),h=g.extendFlat({},h,{size:g.bigFont(h.size)}),g.coerceFont(p,"title.font",h))))}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/layout_attributes":309,"../../registry":313,"./attributes":150,"./helpers":156}],153:[function(e,t,n){"use strict";var P=e("@plotly/d3"),D=e("../../lib"),O=e("../../plots/plots"),R=e("../../registry"),o=e("../../lib/events"),I=e("../dragelement"),N=e("../drawing"),s=e("../color"),m=e("../../lib/svg_text_utils"),l=e("./handle_click"),z=e("./constants"),r=e("../../constants/alignment"),g=r.LINE_SPACING,F=r.FROM_TL,j=r.FROM_BR,c=e("./get_legend_data"),u=e("./style"),B=e("./helpers"),_=1;function H(e,t,n,r,i){var a=n.data()[0][0].trace,i={event:i,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};a._group&&(i.group=a._group),R.traceIs(a,"pie-like")&&(i.label=n.datum()[0].label),!1!==o.triggerHandler(e,"plotly_legendclick",i)&&(1===r?t._clickTimeout=setTimeout(function(){e._fullLayout&&l(n,e,r)},e._context.doubleClickDelay):2===r&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==o.triggerHandler(e,"plotly_legenddoubleclick",i)&&l(n,e,r)))}function d(i,a,o){var e,s=i.data()[0][0],l=s.trace,t=R.traceIs(l,"pie-like"),n=!o._inHover&&a._context.edits.legendText&&!t,c=o._maxNameLength;s.groupTitle?(e=s.groupTitle.text,r=s.groupTitle.font):(r=o.font,o.entries?e=s.text:(e=t?s.label:l.name,l._meta&&(e=D.templateString(e,l._meta))));t=D.ensureSingle(i,"text","legendtext");t.attr("text-anchor","start").call(N.font,r).text(n?h(e,c):e);var r=o.itemwidth+2*z.itemGap;m.positionText(t,r,0),n?t.call(m.makeEditable,{gd:a,text:e}).call(p,i,a,o).on("edit",function(e){this.text(h(e,c)).call(p,i,a,o);var t,n=s.trace._fullInput||{},r={};return R.hasTransform(n,"groupby")?(t=(t=R.getTransformIndices(n,"groupby"))[t.length-1],(t=D.keyedContainer(n,"transforms["+t+"].styles","target","value.name")).set(s.trace._group,e),r=t.constructUpdate()):r.name=e,R.call("_guiRestyle",a,r,l.index)}):p(t,i,a,o)}function h(e,t){t=Math.max(4,t);if(e&&e.trim().length>=t/2)return e;for(var n=t-(e=e||"").length;0<n;n--)e+=" ";return e}function f(t,n){var e,r=n._context.doubleClickDelay,i=1,a=D.ensureSingle(t,"rect","legendtoggle",function(e){n._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(s.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(a.on("mousedown",function(){(e=(new Date).getTime())-n._legendMouseDownTime<r?i+=1:(i=1,n._legendMouseDownTime=e)}),a.on("mouseup",function(){var e;n._dragged||n._editing||(e=n._fullLayout.legend,(new Date).getTime()-n._legendMouseDownTime>r&&(i=Math.max(i-1,1)),H(n,e,t,i,P.event))}))}function p(e,d,h,f,p){f._inHover&&e.attr("data-notex",!0),m.convertToTspans(e,h,function(){var e,t,n,r,i,a,o,s,l,c,u;t=h,n=f,r=p,u=(e=d).data()[0][0],n._inHover||!u||u.trace.showlegend?(l=e.select("g[class*=math-group]"),o=l.node(),c=(n=n||t._fullLayout.legend).borderwidth,t=(r===_?n.title:u.groupTitle||n).font.size*g,o?(s=N.bBox(o),i=s.height,a=s.width,r===_?N.setTranslate(l,c,c+.75*i):N.setTranslate(l,0,.25*i)):(o=e.select(r===_?".legendtitletext":".legendtext"),s=m.lineCount(o),l=o.node(),i=t*s,a=l?N.bBox(l).width:0,r===_?("left"===n.title.side&&(a+=2*z.itemGap),m.positionText(o,c+z.titlePad,c+t)):(c=2*z.itemGap+n.itemwidth,u.groupTitle&&(c=z.itemGap,a-=n.itemwidth),m.positionText(o,c,-t*((s-1)/2-.3)))),r===_?(n._titleWidth=a,n._titleHeight=i):(u.lineHeight=t,u.height=Math.max(i,16)+3,u.width=a)):e.remove()})}function U(e){return D.isRightAnchor(e)?"right":D.isCenterAnchor(e)?"center":"left"}function V(e){return D.isBottomAnchor(e)?"bottom":D.isMiddleAnchor(e)?"middle":"top"}t.exports=function(e,t){return function(b,x){var w,e,T=b._fullLayout,A="legend"+T._uid,k=x._inHover;k?(w=x.layer,A+="-hover"):w=T._infolayer;if(w){if(b._legendMouseDownTime||(b._legendMouseDownTime=0),k){if(!x.entries)return;e=c(x.entries,x)}else{if(!b.calcdata)return;e=T.showlegend&&c(b.calcdata,x)}var n=T.hiddenlabels||[];if(!(k||T.showlegend&&e.length))return w.selectAll(".legend").remove(),T._topdefs.select("#"+A).remove(),O.autoMargin(b,"legend");var M=D.ensureSingle(w,"g","legend",function(e){k||e.attr("pointer-events","all")}),S=D.ensureSingleById(T._topdefs,"clipPath",A,function(e){e.append("rect")}),E=D.ensureSingle(M,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});E.call(s.stroke,x.bordercolor).call(s.fill,x.bgcolor).style("stroke-width",x.borderwidth+"px");var t,C=D.ensureSingle(M,"g","scrollbox"),r=x.title;x._titleWidth=0,x._titleHeight=0,r.text?((t=D.ensureSingle(C,"text","legendtitletext")).attr("text-anchor","start").call(N.font,r.font).text(r.text),p(t,C,b,x,_)):C.selectAll(".legendtitletext").remove();var L=D.ensureSingle(M,"rect","scrollbar",function(e){e.attr(z.scrollBarEnterAttrs).call(s.fill,z.scrollBarColor)}),i=C.selectAll("g.groups").data(e);i.enter().append("g").attr("class","groups"),i.exit().remove();var a=i.selectAll("g.traces").data(D.identity);a.enter().append("g").attr("class","traces"),a.exit().remove(),a.style("opacity",function(e){var t=e[0].trace;return R.traceIs(t,"pie-like")?-1!==n.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){P.select(this).call(d,b,x)}).call(u,b,x).each(function(){k||P.select(this).call(f,b)}),D.syncOrAsync([O.previousPromises,function(){return function(e,t,n,i){var r=e._fullLayout;i=i||r.legend;var a=r._size,o=B.isVertical(i),s=B.isGrouped(i),l=i.borderwidth,c=2*l,u=z.itemGap,d=i.itemwidth+2*u,h=2*(l+u),f=V(i),p=i.y<0||0===i.y&&"top"===f,m=1<i.y||1===i.y&&"bottom"===f,g=i.tracegroupgap;i._maxHeight=Math.max(p||m?r.height/2:a.h,30);var _=0;i._width=0,i._height=0;var y=function(e){var t=0,n=0,r=e.title.side;r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight));return[t,n]}(i);{var v,b,x,w,T,A,k,M,S,E,C,L,D;o?(n.each(function(e){var t=e[0].height;N.setTranslate(this,l+y[0],l+y[1]+i._height+t/2+u),i._height+=t,i._width=Math.max(i._width,e[0].width)}),_=d+i._width,i._width+=u+d+c,i._height+=h,s&&(t.each(function(e,t){N.setTranslate(this,0,t*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap)):(v=U(i),b=i.x<0||0===i.x&&"right"===v,f=1<i.x||1===i.x&&"left"===v,p=m||p,r=r.width/2,i._maxWidth=Math.max(b?p&&"left"===v?a.l+a.w:r:f?p&&"right"===v?a.r+a.w:r:a.w,2*d),w=x=0,n.each(function(e){e=e[0].width+d;x=Math.max(x,e),w+=e}),_=null,T=0,s?(M=k=A=0,t.each(function(){var n=0,r=0;P.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;N.setTranslate(this,y[0],y[1]+l+u+t/2+r),r+=t,n=Math.max(n,d+e[0].width)}),A=Math.max(A,r);var e=n+u;e+l+k>i._maxWidth&&(T=Math.max(T,k),k=0,M+=A+g,A=r),N.setTranslate(this,k,M),k+=e}),i._width=Math.max(T,k)+l,i._height=M+A+h):(t=n.size(),S=w+c+(t-1)*u<i._maxWidth,D=L=C=E=0,n.each(function(e){var t=e[0].height,n=d+e[0].width,e=(S?n:x)+u;e+l+C-u>=i._maxWidth&&(T=Math.max(T,D),C=0,L+=E,i._height+=E,E=0),N.setTranslate(this,y[0]+l+C,y[1]+l+L+t/2+u),D=C+n+u,C+=e,E=Math.max(E,t)}),S?(i._width=C+c,i._height=E+h):(i._width=Math.max(T,D)+c,i._height+=E+h)))}i._width=Math.ceil(Math.max(i._width+y[0],i._titleWidth+2*(l+z.titlePad))),i._height=Math.ceil(Math.max(i._height+y[1],i._titleHeight+2*(l+z.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var e=e._context.edits,O=e.legendText||e.legendPosition;n.each(function(e){var t=P.select(this).select(".legendtoggle"),n=e[0].height,e=O?d:_||d+e[0].width;o||(e+=u/2),N.setRect(t,0,-n/2,e,n)})}(b,i,a,x)},function(){var n,r,e,t,i,a,o,s,l,c,u,d,h,f,p,m,g,_,y;function v(e,t,n){x._scrollY=b._fullLayout.legend._scrollY=e,N.setTranslate(C,0,-e),N.setRect(L,x._width,z.scrollBarMargin+e*n,z.scrollBarWidth,t),S.select("rect").attr("y",r+e)}!k&&(e=(i=b)._fullLayout.legend,a=U(e),t=V(e),O.autoMargin(i,"legend",{x:e.x,y:e.y,l:e._width*F[a],r:e._width*j[a],b:e._effHeight*j[t],t:e._effHeight*F[t]}))||(n=T._size,r=x.borderwidth,i=n.l+n.w*x.x-F[U(x)]*x._width,a=n.t+n.h*(1-x.y)-F[V(x)]*x._effHeight,!k&&T.margin.autoexpand&&(e=i,t=a,i=D.constrain(i,0,T.width-x._width),a=D.constrain(a,0,T.height-x._effHeight),i!==e&&D.log("Constrain legend.x to make legend fit inside graph"),a!==t&&D.log("Constrain legend.y to make legend fit inside graph")),k||N.setTranslate(M,i,a),L.on(".drag",null),M.on("wheel",null),k||x._height<=x._maxHeight||b._context.staticPlot?(p=x._effHeight,k&&(p=x._height),E.attr({width:x._width-r,height:p-r,x:r/2,y:r/2}),N.setTranslate(C,0,0),S.select("rect").attr({width:x._width-2*r,height:p-2*r,x:r,y:r}),N.setClipUrl(C,A,b),N.setRect(L,0,0,0,0),delete x._scrollY):(o=Math.max(z.scrollBarMinHeight,x._effHeight*x._effHeight/x._height),s=x._effHeight-o-2*z.scrollBarMargin,l=x._height-x._effHeight,c=s/l,u=Math.min(x._scrollY||0,l),E.attr({width:x._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:x._effHeight-r,x:r/2,y:r/2}),S.select("rect").attr({width:x._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:x._effHeight-2*r,x:r,y:r+u}),N.setClipUrl(C,A,b),v(u,o,c),M.on("wheel",function(){v(u=D.constrain(x._scrollY+P.event.deltaY/s*l,0,l),o,c),0!==u&&u!==l&&P.event.preventDefault()}),p=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;d=("touchstart"===e.type?e.changedTouches[0]:e).clientY,f=u}).on("drag",function(){var e,t,n=P.event.sourceEvent;2===n.buttons||n.ctrlKey||(h=("touchmove"===n.type?n.changedTouches[0]:n).clientY,e=f,t=d,n=h,v(u=D.constrain((n-t)/c+e,0,l),o,c))}),L.call(p),p=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;"touchstart"===e.type&&(d=e.changedTouches[0].clientY,f=u)}).on("drag",function(){var e,t,n=P.event.sourceEvent;"touchmove"===n.type&&(h=n.changedTouches[0].clientY,e=f,t=d,n=h,v(u=D.constrain((t-n)/c+e,0,l),o,c))}),C.call(p)),b._context.edits.legendPosition&&(M.classed("cursor-move",!0),I.init({element:M.node(),gd:b,prepFn:function(){var e=N.getTranslate(M);_=e.x,y=e.y},moveFn:function(e,t){e=_+e,t=y+t;N.setTranslate(M,e,t),m=I.align(e,0,n.l,n.l+n.w,x.xanchor),g=I.align(t,0,n.t+n.h,n.t,x.yanchor)},doneFn:function(){void 0!==m&&void 0!==g&&R.call("_guiRelayout",b,{"legend.x":m,"legend.y":g})},clickFn:function(e,t){var n=w.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});0<n.size()&&H(b,M,n,e,t)}})))}],b)}}(e,t=t||(e._fullLayout.legend||{}))}},{"../../constants/alignment":205,"../../lib":230,"../../lib/events":223,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":151,"./get_legend_data":154,"./handle_click":155,"./helpers":156,"./style":158,"@plotly/d3":11}],154:[function(e,t,n){"use strict";var S=e("../../registry"),E=e("./helpers");t.exports=function(e,n){var t=E.isGrouped(n),r=E.isReversed(n),i={},a=[],o=!1,s={},l=0,c=0;function u(e,t){""!==e&&E.isGrouped(n)?-1===a.indexOf(e)?(a.push(e),o=!0,i[e]=[t]):i[e].push(t):(e="~~i"+l,a.push(e),i[e]=[t],l++)}for(y=0;y<e.length;y++){var d=e[y],h=d[0],f=h.trace,p=f.legendgroup;if(n._inHover||f.visible&&f.showlegend)if(S.traceIs(f,"pie-like"))for(s[p]||(s[p]={}),x=0;x<d.length;x++){var m=d[x].label;s[p][m]||(u(p,{label:m,color:d[x].color,i:d[x].i,trace:f,pts:d[x].pts}),s[p][m]=!0,c=Math.max(c,(m||"").length))}else u(p,h),c=Math.max(c,(f.name||"").length)}if(!a.length)return[];for(var g=!o||!t,_=[],y=0;y<a.length;y++){var v=i[a[y]];g?_.push(v[0]):_.push(v)}for(g&&(_=[_]),y=0;y<_.length;y++){for(var b=1/0,x=0;x<_[y].length;x++){var w=_[y][x].trace.legendrank;w<b&&(b=w)}_[y][0]._groupMinRank=b,_[y][0]._preGroupSort=y}function T(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort}for(_.forEach(function(e,t){e[0]._preGroupSort=t}),_.sort(function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort}),y=0;y<_.length;y++){_[y].forEach(function(e,t){e._preSort=t}),_[y].sort(T);var A=_[y][0],k=null;for(x=0;x<_[y].length;x++){var M=_[y][x].trace.legendgrouptitle;if(M&&M.text){k=M;break}}for(r&&_[y].reverse(),k&&_[y].unshift({i:-1,groupTitle:k,trace:{showlegend:A.trace.showlegend}}),x=0;x<_[y].length;x++)_[y][x]=[_[y][x]]}return n._lgroupsLength=_.length,n._maxNameLength=c,_}},{"../../registry":313,"./helpers":156}],155:[function(e,t,n){"use strict";var P=e("../../lib"),R=e("../../registry"),I=!0;t.exports=function(e,t,n){var r=t._fullLayout;if(!t._dragged&&!t._editing){var i,a=r.legend.itemclick,o=r.legend.itemdoubleclick;if(I=(1===n&&"toggle"===a&&"toggleothers"===o&&I&&t.data&&t._context.showTips&&P.notifier(P._(t,"Double-click on legend to isolate one trace"),"long"),!1),1===n?i=a:2===n&&(i=o),i){var s=r.hiddenlabels?r.hiddenlabels.slice():[],e=e.data()[0][0];if(!e.groupTitle){var l,c,u,d=t._fullData,h=e.trace,f=h.legendgroup,p={},m=[],g=[],_=[];if(R.traceIs(h,"pie-like")){var y=e.label,e=s.indexOf(y);"toggle"===i?-1===e?s.push(y):s.splice(e,1):"toggleothers"===i&&(s=[],t.calcdata[0].forEach(function(e){y!==e.label&&s.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===s.length&&-1===e&&(s=[])),R.call("_guiRelayout",t,"hiddenlabels",s)}else{var v,b,x=f&&f.length,w=[];if(x)for(S=0;S<d.length;S++)(v=d[S]).visible&&v.legendgroup===f&&w.push(S);if("toggle"===i){switch(h.visible){case!0:b="legendonly";break;case!1:b=!1;break;case"legendonly":b=!0}if(x)for(S=0;S<d.length;S++)!1!==d[S].visible&&d[S].legendgroup===f&&O(d[S],b);else O(h,b)}else if("toggleothers"===i){for(var T,A,k,M=!0,S=0;S<d.length;S++)if(T=d[S]===h,k=!0!==d[S].showlegend,!(T||k||(A=x&&d[S].legendgroup===f)||!0!==d[S].visible||R.traceIs(d[S],"notLegendIsolatable"))){M=!1;break}for(S=0;S<d.length;S++)if(!1!==d[S].visible&&!R.traceIs(d[S],"notLegendIsolatable"))switch(h.visible){case"legendonly":O(d[S],!0);break;case!0:T=d[S]===h,k=!0!==d[S].showlegend&&!d[S].legendgroup,A=T||x&&d[S].legendgroup===f,O(d[S],!(!A&&!k)||(!!M||"legendonly"))}}for(S=0;S<g.length;S++)if(l=g[S])for(var E=l.constructUpdate(),C=Object.keys(E),L=0;L<C.length;L++)c=C[L],(p[c]=p[c]||[])[_[S]]=E[c];for(u=Object.keys(p),S=0;S<u.length;S++)for(c=u[S],L=0;L<m.length;L++)p[c].hasOwnProperty(L)||(p[c][L]=void 0);R.call("_guiRestyle",t,p,m)}}}}function D(e,t,n){var r=m.indexOf(e),i=(i=p[t])||(p[t]=[]);return-1===m.indexOf(e)&&(m.push(e),r=m.length-1),i[r]=n,r}function O(e,t){var n,r,i=e._fullInput;R.hasTransform(i,"groupby")?((n=g[i.index])||(r=(r=R.getTransformIndices(i,"groupby"))[r.length-1],n=P.keyedContainer(i,"transforms["+r+"].styles","target","value.visible"),g[i.index]=n),!1!==(r=void 0===(r=n.get(e._group))?!0:r)&&n.set(e._group,t),_[i.index]=D(i.index,"visible",!1!==i.visible)):(t=!1!==i.visible&&t,D(i.index,"visible",t))}}},{"../../lib":230,"../../registry":313}],156:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],157:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":150,"./defaults":152,"./draw":153,"./style":158}],158:[function(e,t,n){"use strict";var b=e("@plotly/d3"),o=e("../../registry"),m=e("../../lib"),a=m.strTranslate,x=e("../drawing"),w=e("../color"),T=e("../colorscale/helpers").extractOpts,A=e("../../traces/scatter/subtypes"),s=e("../../traces/pie/style_one"),l=e("../../traces/pie/helpers").castOption,i=e("./constants");function k(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function M(e){var t=e[0].trace,n=t.contours,r=A.hasLines(t),i=A.hasMarkers(t),a=t.visible&&t.fill&&"none"!==t.fill,o=!1,e=!1;return n&&("lines"===(t=n.coloring)?o=!0:r="none"===t||"heatmap"===t||n.showlines,"constraint"===n.type?a="="!==n._operation:"fill"!==t&&"heatmap"!==t||(e=!0)),{showMarker:i,showLine:r,showFill:a,showGradientLine:o,showGradientFill:e,anyLine:r||o,anyFill:a||e}}function S(e,t,n){return e&&m.isArrayOrTypedArray(e)?t:n<e?n:e}t.exports=function(e,g,_){var t=g._fullLayout,f="constant"===(_=_||t.legend).itemsizing,p=_.itemwidth,t=(p+2*i.itemGap)/2,y=a(t,0),v=function(e,t,n,r){var i;if(e+1)i=e;else{if(!(t&&0<t.width))return 0;i=t.width}return f?r:Math.min(i,n)};function r(e,t,n){var f=e[0].trace,p=f.marker||{},m=p.line||{},r=n?f.visible&&f.type===n:o.traceIs(f,"bar"),e=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(r?[e]:[]);e.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),e.exit().remove(),e.each(function(e){var t=b.select(this),n=e[0],r=v(n.mlw,p.line,5,2);t.style("stroke-width",r+"px");var i=n.mcc;!_._inHover&&"mc"in n&&(void 0===(c=(l=T(p)).mid)&&(c=(l.max+l.min)/2),i=x.tryColorscale(p,"")(c));var a,o,s,l,c,u=i||n.mc||p.color,d=p.pattern,h=d&&x.getPatternAttr(d.shape,0,"");h?(a=x.getPatternAttr(d.bgcolor,0,null),o=x.getPatternAttr(d.fgcolor,0,null),s=d.fgopacity,e=S(d.size,8,10),l=S(d.solidity,.5,1),c="legend-"+f.uid,t.call(x.pattern,"legend",g,c,h,e,l,i,d.fillmode,a,o,s)):t.call(w.fill,u),r&&w.stroke(t,n.mlc||m.color)})}function n(e,t,n){var r=e[0],i=r.trace,a=n?i.visible&&i.type===n:o.traceIs(i,n),a=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(a?[e]:[]);a.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),a.exit().remove(),a.size()&&(e=(i.marker||{}).line,n=v(l(e.width,r.pts),e,5,2),(n=m.minExtend(i,{marker:{line:{width:n}}})).marker.line.color=e.color,r=m.minExtend(r,{trace:n}),s(a,r,n))}e.each(function(e){var t=b.select(this),n=m.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity);var r=_.valign,i=e[0].lineHeight,t=e[0].height;"middle"!==r&&i&&t?n.attr("transform",a(0,{top:1,bottom:-1}[r]*(.5*(i-t+3)))):n.attr("transform",null),n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);n=n.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var l,c=e[0].trace,t=[];if(c.visible)switch(c.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]],l=!0;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]],l=!0;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],l="radial";break;case"cone":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]]);break;case"streamtube":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]]);break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],l=!0;break;case"mesh3d":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]]);break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],l=!0;break;case"isosurface":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]])}e=b.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);e.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n,r,i=b.select(this),a=T(c),o=a.colorscale,s=a.reversescale;o?l||(n=o.length,r=(0===t?o[s?n-1:0]:1===t?o[s?0:n-1]:o[Math.floor((n-1)/2)])[1]):(n=c.vertexcolor||c.facecolor||c.color,r=m.isArrayOrTypedArray(n)?n[t]||n[0]:n),i.attr("d",e[0]),r?i.call(w.fill,r):i.call(function(e){var t;e.size()&&(t="legendfill-"+c.uid,x.gradient(e,g,t,k(s,"radial"===l),o,"fill"))})})}).each(function(e){var i=e[0].trace,t="waterfall"===i.type;if(e[0]._distinct&&t){var n=e[0].trace[e[0].dir].marker;return e[0].mc=n.color,e[0].mlw=n.line.width,e[0].mlc=n.line.color,r(e,this,"waterfall")}n=[];i.visible&&t&&(n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);n=b.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);n.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e){var t=b.select(this),n=i[e[0]].marker,r=v(void 0,n.line,5,2);t.attr("d",e[1]).style("stroke-width",r+"px").call(w.fill,n.color),r&&t.call(w.stroke,n.line.color)})}).each(function(e){r(e,this,"funnel")}).each(function(e){r(e,this)}).each(function(e){var n=e[0].trace,r=b.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&o.traceIs(n,"box-violin")?[e]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),r.exit().remove(),r.each(function(){var e,t=b.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==w.opacity(n.fillcolor)||0!==w.opacity((n.line||{}).color)?(e=v(void 0,n.line,5,2),t.style("stroke-width",e+"px").call(w.fill,n.fillcolor),e&&w.stroke(t,n.line.color)):(t=m.minExtend(n,{marker:{size:f?12:m.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(x.pointStyle,t,g))})}).each(function(e){n(e,this,"funnelarea")}).each(function(e){n(e,this,"pie")}).each(function(e){var t=M(e),n=t.showFill,r=t.showLine,i=t.showGradientLine,a=t.showGradientFill,o=t.anyFill,s=t.anyLine,l=e[0],c=l.trace,t=T(c),u=t.colorscale,d=t.reversescale,o=A.hasMarkers(c)||!o?"M5,0":s?"M5,-2":"M5,-3",s=b.select(this),e=s.select(".legendfill").selectAll("path").data(n||a?[e]:[]);e.enter().append("path").classed("js-fill",!0),e.exit().remove(),e.attr("d",o+"h"+p+"v6h-"+p+"z").call(n?x.fillGroupStyle:function(e){var t;e.size()&&(t="legendfill-"+c.uid,x.gradient(e,g,t,k(d),u,"fill"))}),(r||i)&&(h=v(void 0,c.line,10,5),h=m.minExtend(c,{line:{width:h}}),h=[m.minExtend(l,{trace:h})]);var h=s.select(".legendlines").selectAll("path").data(r||i?[h]:[]);h.enter().append("path").classed("js-line",!0),h.exit().remove(),h.attr("d",o+(i?"l"+p+",0.0001":"h"+p)).call(r?x.lineGroupStyle:function(e){var t;e.size()&&(t="legendline-"+c.uid,x.lineGroupStyle(e),x.gradient(e,g,t,k(d),u,"stroke"))})}).each(function(e){var t=M(e),n=t.anyFill,r=t.anyLine,i=t.showLine,t=t.showMarker,a=e[0],o=a.trace,n=!t&&!r&&!n&&A.hasText(o);function s(e,t,n,r){e=m.nestedProperty(o,e).get(),e=m.isArrayOrTypedArray(e)&&t?t(e):e;if(f&&e&&void 0!==r&&(e=r),n){if(e<n[0])return n[0];if(e>n[1])return n[1]}return e}function l(e){return a._distinct&&a.index&&e[a.index]?e[a.index]:e[0]}{var c;(t||n||i)&&(u={},d={},t&&(u.mc=s("marker.color",l),u.mx=s("marker.symbol",l),u.mo=s("marker.opacity",m.mean,[.2,1]),u.mlc=s("marker.line.color",l),u.mlw=s("marker.line.width",m.mean,[0,5],2),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"},c=s("marker.size",m.mean,[2,16],12),u.ms=c,d.marker.size=c),i&&(d.line={width:s("line.width",l,[0,10],5)}),n&&(u.tx="Aa",u.tp=s("textposition",l),u.ts=10,u.tc=s("textfont.color",l),u.tf=s("textfont.family",l)),h=[m.minExtend(a,u)],(c=m.minExtend(o,d)).selectedpoints=null,c.texttemplate=null)}var u=b.select(this).select("g.legendpoints"),d=u.selectAll("path.scatterpts").data(t?h:[]);d.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),d.exit().remove(),d.call(x.pointStyle,c,g),t&&(h[0].mrc=3);var h=u.selectAll("g.pointtext").data(n?h:[]);h.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),h.exit().remove(),h.selectAll("text").call(x.textPointStyle,c,g)}).each(function(e){var i=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&"candlestick"===i.type?[e,e]:[]);e.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=i[t?"increasing":"decreasing"],t=v(void 0,r.line,5,2);n.style("stroke-width",t+"px").call(w.fill,r.fillcolor),t&&w.stroke(n,r.line.color)})}).each(function(e){var i=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&"ohlc"===i.type?[e,e]:[]);e.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=i[t?"increasing":"decreasing"],t=v(void 0,r.line,5,2);n.style("fill","none").call(x.dashLine,r.line.dash,t),t&&w.stroke(n,r.line.color)})})}},{"../../lib":230,"../../registry":313,"../../traces/pie/helpers":345,"../../traces/pie/style_one":351,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale/helpers":111,"../drawing":122,"./constants":151,"@plotly/d3":11}],159:[function(e,t,n){"use strict";e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":161}],160:[function(e,t,n){"use strict";var m=e("../../registry"),r=e("../../plots/plots"),g=e("../../plots/cartesian/axis_ids"),i=e("../../fonts/ploticon"),a=e("../shapes/draw").eraseActiveShape,o=e("../../lib"),s=o._,t=t.exports={};function l(e,t){var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,a=e._fullLayout,o={},s=g.list(e,null,!0),l=a._cartesianSpikesEnabled;if("zoom"===r)for(var c,u,d,t="in"===i?.5:2,h=(1+t)/2,f=(1-t)/2,p=0;p<s.length;p++)(d=s[p]).fixedrange||(u=d._name,"auto"===i?o[u+".autorange"]=!0:"reset"===i?(void 0===d._rangeInitial?o[u+".autorange"]=!0:(c=d._rangeInitial.slice(),o[u+".range[0]"]=c[0],o[u+".range[1]"]=c[1]),void 0!==d._showSpikeInitial&&(o[u+".showspikes"]=d._showSpikeInitial,"on"!==l||d._showSpikeInitial||(l="off"))):(c=[d.r2l(d.range[0]),d.r2l(d.range[1])],o[u+".range[0]"]=d.l2r((c=[h*c[0]+f*c[1],h*c[1]+f*c[0]])[0]),o[u+".range[1]"]=d.l2r(c[1])));else"hovermode"!==r||"x"!==i&&"y"!==i||(i=a._isHoriz?"y":"x",n.setAttribute("data-val",i)),o[r]=i;a._cartesianSpikesEnabled=l,m.call("_guiRelayout",e,o)}function c(e,t){for(var n=t.currentTarget,t=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,i=e._fullLayout._subplots.gl3d||[],a={},o=t.split("."),s=0;s<i.length;s++)a[i[s]+"."+o[1]]=r;a.dragmode="pan"===r?r:"zoom",m.call("_guiRelayout",e,a)}function u(e,t){for(var t=t.currentTarget.getAttribute("data-attr"),n="resetLastSave"===t,r="resetDefault"===t,i=e._fullLayout,a=i._subplots.gl3d||[],o={},s=0;s<a.length;s++){var l,c=a[s],u=c+".camera",d=c+".aspectratio",h=c+".aspectmode",c=i[c]._scene;n?(o[u+".up"]=c.viewInitial.up,o[u+".eye"]=c.viewInitial.eye,o[u+".center"]=c.viewInitial.center,l=!0):r&&(o[u+".up"]=null,o[u+".eye"]=null,l=!(o[u+".center"]=null)),l&&(o[d+".x"]=c.viewInitial.aspectratio.x,o[d+".y"]=c.viewInitial.aspectratio.y,o[d+".z"]=c.viewInitial.aspectratio.z,o[h]=c.viewInitial.aspectmode)}m.call("_guiRelayout",e,o)}function d(e,t){var n=t.currentTarget,t=n._previousVal,r=e._fullLayout,i=r._subplots.gl3d||[],a=["xaxis","yaxis","zaxis"],o={},s={};if(t)s=t,n._previousVal=null;else{for(var l=0;l<i.length;l++){var c=i[l],u=r[c],d=c+".hovermode";o[d]=u.hovermode,s[d]=!1;for(var h=0;h<3;h++){var f=a[h],p=c+"."+f+".showspikes";s[p]=!1,o[p]=u[f].showspikes}}n._previousVal=o}return s}function h(e,t){for(var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,i=e._fullLayout,a=i._subplots.geo||[],o=0;o<a.length;o++){var s=a[o],l=i[s];"zoom"===n&&(l=l.projection.scale,m.call("_guiRelayout",e,s+".projection.scale","in"===r?2*l:.5*l))}"reset"===n&&y(e,"geo")}function f(e){e=e._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function p(e){var t=f(e);m.call("_guiRelayout",e,"hovermode",t)}function _(e,t){for(var n=t.currentTarget.getAttribute("data-val"),r=e._fullLayout,i=r._subplots.mapbox||[],a={},o=0;o<i.length;o++){var s=i[o],l=r[s].zoom;a[s+".zoom"]="in"===n?1.05*l:l/1.05}m.call("_guiRelayout",e,a)}function y(e,t){for(var n=e._fullLayout,r=n._subplots[t]||[],i={},a=0;a<r.length;a++)for(var o=r[a],s=n[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];i[o+"."+u]=s[u]}m.call("_guiRelayout",e,i)}t.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return s(e,"png"===t?"Download plot as a png":"Download plot")},icon:i.camera,click:function(t){var n=t._context.toImageButtonOptions,r={format:n.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&o.isIE()&&(o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(e){e in n&&(r[e]=n[e])}),m.call("downloadImage",t,r).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.disk,click:function(e){r.sendDataToCloud(e)}},t.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.pencil,click:function(e){r.sendDataToCloud(e)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:i.zoombox,click:l},t.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:i.pan,click:l},t.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:i.selectbox,click:l},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:i.lasso,click:l},t.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:i.drawclosedpath,click:l},t.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:i.drawopenpath,click:l},t.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:i.drawline,click:l},t.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:i.drawrect,click:l},t.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:i.drawcircle,click:l},t.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:i.eraseshape,click:a},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:l},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:l},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:i.autoscale,click:l},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:i.home,click:l},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:l},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:i.tooltip_compare,gravity:"ne",click:l},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:i.zoombox,click:c},t.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:i.pan,click:c},t.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:i["3d_rotate"],click:c},t.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:i["z-axis"],click:c},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:i.home,click:u},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:i.movie,click:u},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);m.call("_guiRelayout",e,t)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:h},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:h},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:i.autoscale,click:h},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:p},t.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:i.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var r=e._fullData[n]._viewInitial;t["node.groups"].push(r.node.groups.slice()),t["node.x"].push(r.node.x.slice()),t["node.y"].push(r.node.y.slice())}m.call("restyle",e,t)}},t.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);t.hovermode=f(e),m.call("_guiRelayout",e,t)}},t.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:i.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(e,t),n.setAttribute("data-attr","resetLastSave"),u(e,t),y(e,"geo"),y(e,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:i.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",m.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=g.list(e,null,!0),r={},i=0;i<n.length;i++){var a=n[i];r[a._name+".showspikes"]=t||a._showSpikeInitial}return r}(e))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:i.home,click:function(e){y(e,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:_},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:_}},{"../../fonts/ploticon":213,"../../lib":230,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../shapes/draw":184}],161:[function(e,t,n){"use strict";var r=e("./buttons"),i=Object.keys(r),e=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],a=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(e),o=[];i.forEach(function(e){var t;t=r[e],-1===a.indexOf(t._cat||t.name)&&(e=t.name,t=(t._cat||t.name).toLowerCase(),-1===o.indexOf(e)&&o.push(e),-1===o.indexOf(t)&&o.push(t))}),o.sort(),t.exports={DRAW_MODES:e,backButtons:a,foreButtons:o}},{"./buttons":160}],162:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("../color"),s=e("../../plot_api/plot_template"),l=e("./attributes");t.exports=function(e,t){var n=e.modebar||{},r=s.newContainer(t,"modebar");function i(e,t){return a.coerce(n,r,l,e,t)}i("orientation"),i("bgcolor",o.addOpacity(t.paper_bgcolor,.5));e=o.contrast(o.rgb(t.modebar.bgcolor));i("color",o.addOpacity(e,.3)),i("activecolor",o.addOpacity(e,.7)),i("uirevision",t.uirevision),i("add"),i("remove")}},{"../../lib":230,"../../plot_api/plot_template":265,"../color":100,"./attributes":159}],163:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":159,"./defaults":162,"./manage":164}],164:[function(e,t,n){"use strict";var C=e("../../plots/cartesian/axis_ids"),L=e("../../traces/scatter/subtypes"),D=e("../../registry"),O=e("../fx/helpers").isUnifiedHover,a=e("./modebar"),P=e("./buttons"),R=e("./constants").DRAW_MODES;t.exports=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i=n.modeBarButtons,n=Array.isArray(i)&&i.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===P[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=P[i]}}return e}(i):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,r=e._context;function i(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return 1}else{var n=t.name,t=t._cat||t.name;if(n===e||t===e.toLowerCase())return 1}}var a=t.modebar.add;"string"==typeof a&&(a=[a]);var o=t.modebar.remove;"string"==typeof o&&(o=[o]);var s=r.modeBarButtonsToAdd.concat(a.filter(function(e){for(var t=0;t<r.modeBarButtonsToRemove.length;t++)if(i(e,r.modeBarButtonsToRemove[t]))return!1;return!0})),u=r.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<r.modeBarButtonsToAdd.length;t++)if(i(e,r.modeBarButtonsToAdd[t]))return!1;return!0})),l=t._has("cartesian"),c=t._has("gl3d"),d=t._has("geo"),h=t._has("pie"),f=t._has("funnelarea"),p=t._has("gl2d"),m=t._has("ternary"),g=t._has("mapbox"),_=t._has("polar"),y=t._has("sankey"),v=function(e){for(var t=C.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),e=O(t.hovermode),b=[];function x(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i=P[r],a=i.name.toLowerCase(),o=(i._cat||i.name).toLowerCase(),s=!1,l=0;l<u.length;l++){var c=u[l].toLowerCase();if(c===a||c===o){s=!0;break}}s||t.push(P[r])}b.push(t)}}a=["toImage"];r.showEditInChartStudio?a.push("editInChartStudio"):r.showSendToCloud&&a.push("sendDataToCloud");x(a);var o=[],w=[],a=[],T=[];1<(l||p||h||f||m)+d+c+g+_?(w=["toggleHover"],a=["resetViews"]):d?(o=["zoomInGeo","zoomOutGeo"],w=["hoverClosestGeo"],a=["resetGeo"]):c?(w=["hoverClosest3d"],a=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(o=["zoomInMapbox","zoomOutMapbox"],w=["toggleHover"],a=["resetViewMapbox"]):p?w=["hoverClosestGl2d"]:h?w=["hoverClosestPie"]:y?(w=["hoverClosestCartesian","hoverCompareCartesian"],a=["resetViewSankey"]):w=["toggleHover"];l&&(w=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(e){for(var t=0;t<e.length;t++)if(!D.traceIs(e[t],"noHover"))return!1;return!0}(n)||e)&&(w=[]);!l&&!p||v||(o=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==a[0]&&(a=["resetScale2d"]));c?T=["zoom3d","pan3d","orbitRotation","tableRotation"]:(l||p)&&!v||m?T=["zoom2d","pan2d"]:g||d?T=["pan2d"]:_&&(T=["zoom2d"]);!function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(D.traceIs(r,"scatter-like")?(L.hasMarkers(r)||L.hasText(r))&&(t=!0):D.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(n)||T.push("select2d","lasso2d");function A(e){-1===k.indexOf(e)&&-1!==w.indexOf(e)&&k.push(e)}var k=[];if(Array.isArray(s)){for(var M=[],S=0;S<s.length;S++){var E=s[S];"string"==typeof E?(E=E.toLowerCase(),-1!==R.indexOf(E)?(t._has("mapbox")||t._has("cartesian"))&&T.push(E):"togglespikelines"===E?A("toggleSpikelines"):"togglehover"===E?A("toggleHover"):"hovercompare"===E?A("hoverCompareCartesian"):"hoverclosest"===E?(A("hoverClosestCartesian"),A("hoverClosestGeo"),A("hoverClosest3d"),A("hoverClosestGl2d"),A("hoverClosestPie")):"v1hovermode"===E&&(A("toggleHover"),A("hoverClosestCartesian"),A("hoverCompareCartesian"),A("hoverClosestGeo"),A("hoverClosest3d"),A("hoverClosestGl2d"),A("hoverClosestPie"))):M.push(E)}s=M}return x(T),x(o.concat(a)),x(k),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(b,s)}(e);r?r.update(e,n):t._modeBar=a(e,n)}else r&&(r.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":280,"../../registry":313,"../../traces/scatter/subtypes":378,"../fx/helpers":136,"./buttons":160,"./constants":161,"./modebar":165}],165:[function(e,t,n){"use strict";var o=e("@plotly/d3"),i=e("fast-isnumeric"),s=e("../../lib"),a=e("../../fonts/ploticon"),l=new DOMParser;function r(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}e=r.prototype;e.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var a=r.modebar,e="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(i),s.addRelatedStyleRule(i,e+"#"+i+" .modebar-group","background-color: "+a.bgcolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);e=!this.hasButtons(t),i=this.hasLogo!==n.displaylogo,a=this.locale!==n.locale;this.locale=n.locale,(e||i||a)&&(this.removeAllButtons(),this.updateButtons(t),(n.watermark||n.displaylogo)&&(t=this.getLogo(),n.watermark&&(t.className=t.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(t,this.element.childNodes[0]):this.element.appendChild(t),this.hasLogo=!0)),this.updateActiveButton()},e.updateButtons=function(e){var r=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=r.createGroup();e.forEach(function(e){var t=e.name;if(!t)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(t))throw new Error("button name '"+t+"' is taken");r.buttonsNames.push(t);e=r.createButton(e);r.buttonElements.push(e),n.appendChild(e)}),r.element.appendChild(n)})},e.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},e.createButton=function(t){var n=this,e=document.createElement("a");e.setAttribute("rel","tooltip"),e.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),!r&&0!==r||e.setAttribute("data-title",r),void 0!==t.attr&&e.setAttribute("data-attr",t.attr);r=t.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),e.setAttribute("data-val",r)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");e.addEventListener("click",function(e){t.click(n.graphInfo,e),n.updateActiveButton(e.currentTarget)}),e.setAttribute("data-toggle",t.toggle||!1),t.toggle&&o.select(e).classed("active",!0);r=t.icon;return"function"==typeof r?e.appendChild(r()):e.appendChild(this.createIcon(r||a.question)),e.setAttribute("data-gravity",t.gravity||"n"),e},e.createIcon=function(e){var t,n=i(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";return e.path&&((t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon"),(r=document.createElementNS(r,"path")).setAttribute("d",e.path),e.transform?r.setAttribute("transform",e.transform):void 0!==e.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(r)),(t=e.svg?l.parseFromString(e.svg,"application/xml").childNodes[0]:t).setAttribute("height","1em"),t.setAttribute("width","1em"),t},e.updateActiveButton=function(e){var i=this.graphInfo._fullLayout,a=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||!0,n=e.getAttribute("data-attr"),r="true"===e.getAttribute("data-toggle"),e=o.select(e);r?n===a&&e.classed("active",!e.classed("active")):(n=null===n?n:s.nestedProperty(i,n).get(),e.classed("active",n===t))})},e.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},e.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(a.newplotlylogo)),e.appendChild(t),e},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,t=new r({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&o.select(t.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),t}},{"../../fonts/ploticon":213,"../../lib":230,"@plotly/d3":11,"fast-isnumeric":15}],166:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),e=(0,e("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:e,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../color/attributes":99}],167:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],168:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../color"),u=e("../../plot_api/plot_template"),d=e("../../plots/array_container_defaults"),h=e("./attributes"),f=e("./constants");function p(n,r,e,t){var i=t.calendar;function a(e,t){return l.coerce(n,r,h.buttons,e,t)}a("visible")&&("all"!==(t=a("step"))&&(!i||"gregorian"===i||"month"!==t&&"year"!==t?a("stepmode"):r.stepmode="backward",a("count")),a("label"))}t.exports=function(e,t,n,r,i){var a=e.rangeselector||{},o=u.newContainer(t,"rangeselector");function s(e,t){return l.coerce(a,o,h,e,t)}s("visible",0<d(a,o,{name:"buttons",handleItemDefaults:p,calendar:i}).length)&&(s("x",(r=function(t,n,e){for(var r=e.filter(function(e){return n[e].anchor===t._id}),i=0,a=0;a<r.length;a++){var o=n[r[a]].domain;o&&(i=Math.max(o[1],i))}return[t.domain[0],i+f.yPad]}(t,n,r))[0]),s("y",r[1]),l.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),l.coerceFont(s,"font",n.font),n=s("bgcolor"),s("activecolor",c.contrast(n,f.lightAmount,f.darkAmount)),s("bordercolor"),s("borderwidth"))}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/array_container_defaults":271,"../color":100,"./attributes":166,"./constants":167}],169:[function(e,t,n){"use strict";var d=e("@plotly/d3"),o=e("../../registry"),h=e("../../plots/plots"),r=e("../color"),f=e("../drawing"),p=e("../../lib"),m=p.strTranslate,g=e("../../lib/svg_text_utils"),s=e("../../plots/cartesian/axis_ids"),i=e("../../constants/alignment"),_=i.LINE_SPACING,y=i.FROM_TL,v=i.FROM_BR,b=e("./constants"),l=e("./get_update_object");function c(e){return e._id}function u(e,t,n){e=p.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});e.attr({rx:b.rx,ry:b.ry}),e.call(r.stroke,t.bordercolor).call(r.fill,(e=t,(n=n)._isActive||n._isHovered?e.activecolor:e.bgcolor)).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){p.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")}).call(f.font,t.font).text(function(e,t){if(e.label)return t?p.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,r._fullLayout._meta)).call(function(e){g.convertToTspans(e,r)})}t.exports=function(a){var e=a._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=s.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(a),c);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var t=d.select(this),r=e,i=r.rangeselector,e=t.selectAll("g.button").data(p.filterVisible(i.buttons));e.enter().append("g").classed("button",!0),e.exit().remove(),e.each(function(e){var t=d.select(this),n=l(r,e);e._isActive=function(e,t,n){{if("all"===t.step)return!0===e.autorange;t=Object.keys(n);return e.range[0]===n[t[0]]&&e.range[1]===n[t[1]]}}(r,e,n),t.call(u,i,e),t.call(x,i,e,a),t.on("click",function(){a._dragged||o.call("_guiRelayout",a,n)}),t.on("mouseover",function(){e._isHovered=!0,t.call(u,i,e)}),t.on("mouseout",function(){e._isHovered=!1,t.call(u,i,e)})}),function(e,t,o,n,r){var s=0,l=0,c=o.borderwidth;t.each(function(){var e=d.select(this).select(".selector-text"),t=o.font.size*_,e=Math.max(t*g.lineCount(e),16)+3;l=Math.max(l,e)}),t.each(function(){var e=d.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),r=n.node()&&f.bBox(n.node()).width,i=o.font.size*_,a=g.lineCount(n),r=Math.max(r+10,b.minButtonWidth);e.attr("transform",m(c+s,c)),t.attr({x:0,y:0,width:r,height:l}),g.positionText(n,r/2,l/2-(a-1)*i/2+3),s+=r+5});var i=e._fullLayout._size,a=i.l+i.w*o.x,u=i.t+i.h*(1-o.y),t="left";p.isRightAnchor(o)&&(a-=s,t="right");p.isCenterAnchor(o)&&(a-=s/2,t="center");i="top";p.isBottomAnchor(o)&&(u-=l,i="bottom");p.isMiddleAnchor(o)&&(u-=l/2,i="middle");s=Math.ceil(s),l=Math.ceil(l),a=Math.round(a),u=Math.round(u),h.autoMargin(e,n+"-range-selector",{x:o.x,y:o.y,l:s*y[t],r:s*v[t],b:l*v[i],t:l*y[i]}),r.attr("transform",m(a,u))}(a,e,i,r._name,t)})}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"./constants":167,"./get_update_object":170,"@plotly/d3":11}],170:[function(e,t,n){"use strict";var l=e("@plotly/d3");t.exports=function(e,t){var n=e._name,r={};return"all"===t.step?r[n+".autorange"]=!0:(t=function(e,t){var n,r=e.range,i=new Date(e.r2l(r[1])),a=t.step,o=t.count;switch(t.stepmode){case"backward":n=e.l2r(+l.time[a].utc.offset(i,-o));break;case"todate":var s=l.time[a].utc.offset(i,-o);n=e.l2r(+l.time[a].utc.ceil(s))}r=r[1];return[n,r]}(e,t),r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]),r}},{"@plotly/d3":11}],171:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":166,"./defaults":168,"./draw":169}],172:[function(e,t,n){"use strict";e=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:e.background,editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":99}],173:[function(e,t,n){"use strict";var a=e("../../plots/cartesian/axis_ids").list,o=e("../../plots/cartesian/autorange").getAutoRange,s=e("./constants");t.exports=function(e){for(var t=a(e,"x",!0),n=0;n<t.length;n++){var r=t[n],i=r[s.name];i&&i.visible&&i.autorange&&(i._input.autorange=!0,i._input.range=i.range=o(e,r))}}},{"../../plots/cartesian/autorange":275,"../../plots/cartesian/axis_ids":280,"./constants":174}],174:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],175:[function(e,t,n){"use strict";var p=e("../../lib"),m=e("../../plot_api/plot_template"),g=e("../../plots/cartesian/axis_ids"),_=e("./attributes"),y=e("./oppaxis_attributes");t.exports=function(e,t,n){var r=e[n],e=t[n];if(r.rangeslider||t._requestRangeslider[e._id]){p.isPlainObject(r.rangeslider)||(r.rangeslider={});var i=r.rangeslider,a=m.newContainer(e,"rangeslider");if(h("visible")){h("bgcolor",t.plot_bgcolor),h("bordercolor"),h("borderwidth"),h("thickness"),h("autorange",!e.isValidRange(i.range)),h("range");e=t._subplots;if(e)for(var e=e.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===g.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),o=p.simpleMap(e,g.id2name),s=0;s<o.length;s++){var l,c=o[s],u=i[c]||{},d=m.newContainer(a,c,"yaxis"),c=t[c];"match"!==f("rangemode",l=u.range&&c.isValidRange(u.range)?"fixed":l)&&f("range",c.range.slice())}a._input=i}}function h(e,t){return p.coerce(i,a,_,e,t)}function f(e,t){return p.coerce(u,d,y,e,t)}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_ids":280,"./attributes":172,"./oppaxis_attributes":179}],176:[function(e,t,n){"use strict";var S=e("@plotly/d3"),E=e("../../registry"),h=e("../../plots/plots"),C=e("../../lib"),L=C.strTranslate,o=e("../drawing"),l=e("../color"),D=e("../titles"),f=e("../../plots/cartesian"),O=e("../../plots/cartesian/axis_ids"),P=e("../dragelement"),R=e("../../lib/setcursor"),I=e("./constants");function N(e,t,n,r){var i=C.ensureSingle(e,"rect",I.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,e=-r._offsetShift,t=o.crispRound(t,r.borderwidth);i.attr({width:r._width+a,height:r._height+a,transform:L(e,e),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":t})}function z(e,t,n,r){t=t._fullLayout;C.ensureSingleById(t._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function F(e,s,l,c){var u,d=s.calcdata,e=e.selectAll("g."+I.rangePlotClassName).data(l._subplotsWith,C.identity);e.enter().append("g").attr("class",function(e){return I.rangePlotClassName+" "+e}).call(o.setClipUrl,c._clipId,s),e.order(),e.exit().remove(),e.each(function(e,t){var n=S.select(this),r=0===t,i=O.getFromId(s,e,"y"),a=i._name,o=c[a],t={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:c.range.slice(),calendar:l.calendar},width:c._width,height:c._height,margin:{t:0,b:0,l:0,r:0}},_context:s._context};l.rangebreaks&&(t.layout.xaxis.rangebreaks=l.rangebreaks),t.layout[a]={type:i.type,domain:[0,1],range:("match"!==o.rangemode?o:i).range.slice(),calendar:i.calendar},i.rangebreaks&&(t.layout[a].rangebreaks=i.rangebreaks),h.supplyDefaults(t);i=t._fullLayout.xaxis,a=t._fullLayout[a];i.clearCalc(),i.setScale(),a.clearCalc(),a.setScale();a={id:e,plotgroup:n,xaxis:i,yaxis:a,isRangePlot:!0};r?u=a:(a.mainplot="xy",a.mainplotinfo=u),f.rangePlot(s,a,function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i[0].trace;a.xaxis+a.yaxis===t&&n.push(i)}return n}(d,e))})}function j(e,t,n,r,i){C.ensureSingle(e,"rect",I.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,I.maskColor),C.ensureSingle(e,"rect",I.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,I.maskColor),"match"!==i.rangemode&&(C.ensureSingle(e,"rect",I.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,I.maskOppAxisColor),C.ensureSingle(e,"rect",I.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",I.maskOppBorder).call(l.fill,I.maskOppAxisColor))}function B(e,t,n,r){t._context.staticPlot||C.ensureSingle(e,"rect",I.slideBoxClassName,function(e){e.attr({y:0,cursor:I.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:I.slideBoxFill})}function H(e,t,n,r){var i=C.ensureSingle(e,"g",I.grabberMinClassName),a=C.ensureSingle(e,"g",I.grabberMaxClassName),o={x:0,width:I.handleWidth,rx:I.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":I.handleStrokeWidth,"shape-rendering":"crispEdges"},e={y:Math.round(r._height/4),height:Math.round(r._height/2)};C.ensureSingle(i,"rect",I.handleMinClassName,function(e){e.attr(o)}).attr(e),C.ensureSingle(a,"rect",I.handleMaxClassName,function(e){e.attr(o)}).attr(e);var s={width:I.grabAreaWidth,x:0,y:0,fill:I.grabAreaFill,cursor:t._context.staticPlot?void 0:I.grabAreaCursor};C.ensureSingle(i,"rect",I.grabAreaMinClassName,function(e){e.attr(s)}).attr("height",r._height),C.ensureSingle(a,"rect",I.grabAreaMaxClassName,function(e){e.attr(s)}).attr("height",r._height)}t.exports=function(k){for(var M=k._fullLayout,e=M._rangeSliderData,t=0;t<e.length;t++){var n=e[t][I.name];n._clipId=n._id+"-"+M._uid}var r=M._infolayer.selectAll("g."+I.containerClassName).data(e,function(e){return e._name});r.exit().each(function(e){e=e[I.name];M._topdefs.select("#"+e._clipId).remove()}).remove(),0!==e.length&&(r.enter().append("g").classed(I.containerClassName,!0).attr("pointer-events","all"),r.each(function(e){var t=S.select(this),n=e[I.name],r=M[O.id2name(e.anchor)],i=n[O.id2name(e.anchor)];n.range&&(o=C.simpleMap(n.range,e.r2l),o=(a=C.simpleMap(e.range,e.r2l))[0]<a[1]?[Math.min(o[0],a[0]),Math.max(o[1],a[1])]:[Math.max(o[0],a[0]),Math.min(o[1],a[1])],n.range=n._input.range=C.simpleMap(o,e.l2r)),e.cleanRange("rangeslider.range");var a=M._size,o=e.domain;n._width=a.w*(o[1]-o[0]);o=Math.round(a.l+a.w*o[0]),a=Math.round(a.t+a.h*(1-e._counterDomainMin)+("bottom"===e.side?e._depth:0)+n._offsetShift+I.extraPad);t.attr("transform",L(o,a)),n._rl=C.simpleMap(n.range,e.r2l);var s,l,c,_,y,v,b,x,w,u=n._rl[0],o=n._rl[1],d=o-u;if(n.p2d=function(e){return e/n._width*d+u},n.d2p=function(e){return(e-u)/d*n._width},e.rangebreaks){var h=e.locateBreaks(u,o);if(h.length){for(var f,p=0,m=0;m<h.length;m++)p+=(f=h[m]).max-f.min;var g=n._width/(o-u-p),T=[-g*u];for(m=0;m<h.length;m++)f=h[m],T.push(T[T.length-1]-g*(f.max-f.min));for(n.d2p=function(e){for(var t=T[0],n=0;n<h.length;n++){var r=h[n];if(e>=r.max)t=T[n+1];else if(e<r.min)break}return t+g*e},m=0;m<h.length;m++)(f=h[m]).pmin=n.d2p(f.min),f.pmax=n.d2p(f.max);n.p2d=function(e){for(var t=T[0],n=0;n<h.length;n++){var r=h[n];if(e>=r.pmax)t=T[n+1];else if(e<r.pmin)break}return(e-t)/g}}}function A(){var e=S.event,d=e.target,h=e.clientX||e.touches[0].clientX,f=h-c.node().getBoundingClientRect().left,p=v.d2p(y._rl[0]),m=v.d2p(y._rl[1]),g=P.coverSlip();function t(e){var t,n,r,i,a,o,s,l,c=+(e.clientX||e.touches[0].clientX)-h;switch(d){case b:t="ew-resize",r=p+c,n=m+c;break;case x:t="col-resize",r=p+c,n=m;break;case w:t="col-resize",r=p,n=m+c;break;default:t="ew-resize",n=(r=f)+c}function u(e){return a.l2r(C.constrain(e,o._rl[0],o._rl[1]))}n<r&&(e=n,n=r,r=e),v._pixelMin=r,v._pixelMax=n,R(S.select(g),t),i=_,a=y,s=u((o=v).p2d(o._pixelMin)),l=u(o.p2d(o._pixelMax)),window.requestAnimationFrame(function(){E.call("_guiRelayout",i,a._name+".range",[s,l])})}function n(){g.removeEventListener("mousemove",t),g.removeEventListener("mouseup",n),this.removeEventListener("touchmove",t),this.removeEventListener("touchend",n),C.removeElement(g)}this.addEventListener("touchmove",t),this.addEventListener("touchend",n),g.addEventListener("mousemove",t),g.addEventListener("mouseup",n)}"match"!==i.rangemode&&(s=r.r2l(i.range[0]),l=r.r2l(i.range[1])-s,n.d2pOppAxis=function(e){return(e-s)/l*n._height}),t.call(N,k,e,n).call(z,k,e,n).call(F,k,e,n).call(j,k,e,n,i).call(B,k,e,n).call(H,k,e,n),c=t,y=e,v=n,(_=k)._context.staticPlot||(b=c.select("rect."+I.slideBoxClassName).node(),x=c.select("rect."+I.grabAreaMinClassName).node(),w=c.select("rect."+I.grabAreaMaxClassName).node(),c.on("mousedown",A),c.on("touchstart",A)),function(e,t,n,r,i){var a=I.handleWidth/2;function o(e){return C.constrain(e,0,n._width)}function s(e){return C.constrain(e,0,n._height)}function l(e){return C.constrain(e,-a,n._width+a)}var c=o(n.d2p(t._rl[0])),t=o(n.d2p(t._rl[1]));e.select("rect."+I.slideBoxClassName).attr("x",c).attr("width",t-c),e.select("rect."+I.maskMinClassName).attr("width",c),e.select("rect."+I.maskMaxClassName).attr("x",t).attr("width",n._width-t),"match"!==i.rangemode&&(i=n._height-s(n.d2pOppAxis(r._rl[1])),r=n._height-s(n.d2pOppAxis(r._rl[0])),e.select("rect."+I.maskMinOppAxisClassName).attr("x",c).attr("height",i).attr("width",t-c),e.select("rect."+I.maskMaxOppAxisClassName).attr("x",c).attr("y",r).attr("height",n._height-r).attr("width",t-c),e.select("rect."+I.slideBoxClassName).attr("y",i).attr("height",r-i));c=Math.round(l(c-a))-.5,t=Math.round(l(t-a))+.5;e.select("g."+I.grabberMinClassName).attr("transform",L(c,.5)),e.select("g."+I.grabberMaxClassName).attr("transform",L(t,.5))}(t,e,n,r,i),"bottom"===e.side&&D.draw(k,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:M._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:a+n._height+n._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":230,"../../lib/setcursor":250,"../../plots/cartesian":290,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":174,"@plotly/d3":11}],177:[function(e,t,n){"use strict";var s=e("../../plots/cartesian/axis_ids"),o=e("../../lib/svg_text_utils"),l=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,u=l.name;function d(e){e=e&&e[u];return e&&e.visible}n.isVisible=d,n.makeData=function(e){var t=s.list({_fullLayout:e},"x",!0),n=e.margin,r=[];if(!e._has("gl2d"))for(var i=0;i<t.length;i++){var a,o=t[i];d(o)&&(r.push(o),(a=o[u])._id=u+o._id,a._height=(e.height-n.b-n.t)*a.thickness,a._offsetShift=Math.floor(a.borderwidth/2))}e._rangeSliderData=r},n.autoMarginOpts=function(e,t){var n=e._fullLayout,r=t[u],i=t._id.charAt(0),a=0,e=0;return"bottom"===t.side&&(a=t._depth,t.title.text!==n._dfltTitle[i]&&(e=1.5*t.title.font.size+10+r._offsetShift,e+=(t.title.text.match(o.BR_TAG_ALL)||[]).length*t.title.font.size*c)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(n.margin.b,e),pad:l.extraPad+2*r._offsetShift}}},{"../../constants/alignment":205,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"./constants":174}],178:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),a=e("./oppaxis_attributes"),o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:a})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":230,"./attributes":172,"./calc_autorange":173,"./defaults":175,"./draw":176,"./helpers":177,"./oppaxis_attributes":179}],179:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],180:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../traces/scatter/attributes").line,a=e("../drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},i.color,{editType:"arraydraw"}),width:o({},i.width,{editType:"calc+arraydraw"}),dash:o({},a,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../traces/scatter/attributes":353,"../annotations/attributes":83,"../drawing/attributes":121}],181:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),h=e("./constants"),f=e("./helpers");function p(e,t,n,r,i,a){var o=e/2,e=a;if("pixel"!==t)return{ppad:o};n=i?f.extractPathCoords(i,a?h.paramIsY:h.paramIsX):[n,r],r=u.aggNums(Math.max,null,n),n=u.aggNums(Math.min,null,n),n=n<0?Math.abs(n)+o:o,r=0<r?r+o:o;return{ppad:o,ppadplus:e?n:r,ppadminus:e?r:n}}function m(e,t,n,r,i){var a="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[a(t),a(n)];if(r){var o,s,l,c=1/0,u=-1/0,d=r.match(h.segmentRE);for("date"===e.type&&(a=f.decodeDate(a)),o=0;o<d.length;o++)void 0!==(l=i[d[o].charAt(0)].drawn)&&(!(s=d[o].substr(1).match(h.paramRE))||s.length<l||((l=a(s[l]))<c&&(c=l),u<l&&(u=l)));return c<=u?[c,u]:void 0}}t.exports=function(e){var t=e._fullLayout,n=u.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var i=n[r];i._extremes={};var a,o,s,l=d.getRefType(i.xref),c=d.getRefType(i.yref);"paper"!==i.xref&&"domain"!==l&&(o="pixel"===i.xsizemode?i.xanchor:i.x0,s="pixel"===i.xsizemode?i.xanchor:i.x1,(o=m(a=d.getFromId(e,i.xref),o,s,i.path,h.paramIsX))&&(i._extremes[a._id]=d.findExtremes(a,o,p(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)))),"paper"!==i.yref&&"domain"!==c&&(s="pixel"===i.ysizemode?i.yanchor:i.y0,c="pixel"===i.ysizemode?i.yanchor:i.y1,(o=m(a=d.getFromId(e,i.yref),s,c,i.path,h.paramIsY))&&(i._extremes[a._id]=d.findExtremes(a,o,p(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0))))}}},{"../../lib":230,"../../plots/cartesian/axes":276,"./constants":182,"./helpers":191}],182:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],183:[function(e,t,n){"use strict";var b=e("../../lib"),x=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),w=e("./attributes"),T=e("./helpers");function i(n,r,e){function t(e,t){return b.coerce(n,r,w,e,t)}if(t("visible")){var i=t("path"),a=t("type",i?"path":"rect");"path"!==r.type&&delete r.path,t("editable"),t("layer"),t("opacity"),t("fillcolor"),t("fillrule"),t("line.width")&&(t("line.color"),t("line.dash"));for(var o=t("xsizemode"),s=t("ysizemode"),l=["x","y"],c=0;c<2;c++){var u,d,h,f,p=l[c],m=p+"anchor",g="x"===p?o:s,_={_fullLayout:e},y=x.coerceRef(n,r,_,p,void 0,"paper"),v="range"===x.getRefType(y)?((h=x.getFromId(_,y))._shapeIndices.push(r._index),u=T.rangeToShapePosition(h),T.shapePositionToRange(h)):u=b.identity;"path"!==a&&(f=n[d=p+"0"],p=n[h=p+"1"],n[d]=v(n[d],!0),n[h]=v(n[h],!0),"pixel"===g?(t(d,0),t(h,10)):(x.coercePosition(r,_,t,y,d,.25),x.coercePosition(r,_,t,y,h,.75)),r[d]=u(r[d]),r[h]=u(r[h]),n[d]=f,n[h]=p),"pixel"===g&&(g=n[m],n[m]=v(n[m],!0),x.coercePosition(r,_,t,y,m,.25),r[m]=u(r[m]),n[m]=g)}"path"===a?t("path"):b.noneOrAll(n,r,["x0","x1","y0","y1"])}}t.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:i})}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":180,"./helpers":191}],184:[function(e,t,n){"use strict";var re=e("../../registry"),ie=e("../../lib"),ae=e("../../plots/cartesian/axes"),oe=e("./draw_newshape/helpers").readPaths,se=e("./draw_newshape/display_outlines"),a=e("../../plots/cartesian/handle_outline").clearOutlineControllers,le=e("../color"),ce=e("../drawing"),ue=e("../../plot_api/plot_template").arrayEditor,de=e("../dragelement"),he=e("../../lib/setcursor"),fe=e("./constants"),pe=e("./helpers");function me(e){var t,n=e._fullLayout;for(t in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._plots){var r=n._plots[t].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<n.shapes.length;i++)n.shapes[i].visible&&o(e,i)}function ge(e){return e._fullLayout._drawing}function _e(e){return!e._context.edits.shapePosition}function o(K,ee){K._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+ee+'"]').remove();var e=pe.makeOptionsAndPlotinfo(K,ee),te=e.options,ne=e.plotinfo;function t(e){var t=ve(K,te),n={"data-index":ee,"fill-rule":te.fillrule,d:t},r=te.opacity,i=te.fillcolor,a=te.line.width?te.line.color:"rgba(0,0,0,0)",o=te.line.width,s=te.line.dash;o||!0!==te.editable||(o=5,s="solid");var l="Z"!==t[t.length-1],c=_e(K)&&te.editable&&K._fullLayout._activeShapeIndex===ee;c&&(i=l?"rgba(0,0,0,0)":K._fullLayout.activeshape.fillcolor,r=K._fullLayout.activeshape.opacity);var u,d,h,f,p,m,g,_,y,v,b,x,w,T,A,k,M,S,E,C,L,D,O,P,R,I,N,z,F,j,B,H,U,V,q,Y,G,W=e.append("path").attr(n).style("opacity",r).call(le.stroke,a).call(le.fill,i).call(ce.dashLine,s,o);function X(e){var t,n,r,i;D=ge(u)?null:N?"path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point":(t=(r=G.element.getBoundingClientRect()).right-r.left,i=r.bottom-r.top,n=e.clientX-r.left,r=e.clientY-r.top,i=!z&&O<t&&P<i&&!e.shiftKey?de.getCursor(n/t,1-r/i):"move",he(d,i),i.split("-")[0])}function Z(t,n){var e,r;"path"===h.type?(r=e=function(e){return e},R?F("xanchor",h.xanchor=q(b+t)):(e=function(e){return q(U(e)+t)},j&&"date"===j.type&&(e=pe.encodeDate(e))),I?F("yanchor",h.yanchor=Y(x+n)):(r=function(e){return Y(V(e)+n)},B&&"date"===B.type&&(r=pe.encodeDate(r))),F("path",h.path=be(L,e,r))):(R?F("xanchor",h.xanchor=q(b+t)):(F("x0",h.x0=q(g+t)),F("x1",h.x1=q(y+t))),I?F("yanchor",h.yanchor=Y(x+n)):(F("y0",h.y0=Y(_+n)),F("y1",h.y1=Y(v+n)))),d.attr("d",ve(u,h)),$(p,h)}function J(t,n){var e,r,i,a,o,s;z?(e=a=function(e){return e},R?F("xanchor",h.xanchor=q(b+t)):(a=function(e){return q(U(e)+t)},j&&"date"===j.type&&(a=pe.encodeDate(a))),I?F("yanchor",h.yanchor=Y(x+n)):(e=function(e){return Y(V(e)+n)},B&&"date"===B.type&&(e=pe.encodeDate(e))),F("path",h.path=be(L,a,e))):N?"resize-over-start-point"===D?(r=g+t,o=I?_-n:_+n,F("x0",h.x0=R?r:q(r)),F("y0",h.y0=I?o:Y(o))):"resize-over-end-point"===D&&(s=y+t,i=I?v-n:v+n,F("x1",h.x1=R?s:q(s)),F("y1",h.y1=I?i:Y(i))):(e=(a=function(e){return-1!==D.indexOf(e)})("n"),r=a("s"),o=a("w"),s=a("e"),i=e?w+n:w,a=r?T+n:T,o=o?A+t:A,s=s?k+t:k,I&&(e&&(i=w-n),r&&(a=T-n)),(!I&&P<a-i||I&&P<i-a)&&(F(M,h[M]=I?i:Y(i)),F(S,h[S]=I?a:Y(a))),O<s-o&&(F(E,h[E]=R?o:q(o)),F(C,h[C]=R?s:q(s)))),d.attr("d",ve(u,h)),$(p,h)}function $(i,a){(R||I)&&function(){var e="path"!==a.type,t=i.selectAll(".visual-cue").data([0]);t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var n=U(R?a.xanchor:ie.midRange(e?[a.x0,a.x1]:pe.extractPathCoords(a.path,fe.paramIsX))),e=V(I?a.yanchor:ie.midRange(e?[a.y0,a.y1]:pe.extractPathCoords(a.path,fe.paramIsY)));{var r;n=pe.roundPositionForSharpStrokeRendering(n,1),e=pe.roundPositionForSharpStrokeRendering(e,1),R&&I?(r="M"+(n-1-1)+","+(e-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",t.attr("d",r)):R?(r="M"+(n-1-1)+","+(e-9-1)+"v18 h2 v-18 Z",t.attr("d",r)):(e="M"+(n-9-1)+","+(e-1-1)+"h18 v2 h-18 Z",t.attr("d",e))}}()}function Q(e){e.selectAll(".visual-cue").remove()}ye(W,K,te),(c||K._context.edits.shapePosition)&&(H=ue(K.layout,"shapes",te)),c?(W.style({cursor:"move"}),c={element:W.node(),plotinfo:ne,gd:K,editHelpers:H,isActiveShape:!0},t=oe(t,K),se(t,W,c)):K._context.edits.shapePosition?(u=K,d=W,f=ee,p=e,m=H,P=O=10,R="pixel"===(h=te).xsizemode,I="pixel"===h.ysizemode,N="line"===h.type,z="path"===h.type,F=m.modifyItem,j=ae.getFromId(u,h.xref),e=ae.getRefType(h.xref),B=ae.getFromId(u,h.yref),H=ae.getRefType(h.yref),U=pe.getDataToPixel(u,j,!1,e),V=pe.getDataToPixel(u,B,!0,H),q=pe.getPixelToData(u,j,!1,e),Y=pe.getPixelToData(u,B,!0,H),H=N?function(){var e=Math.max(h.line.width,10),t=p.append("g").attr("data-index",f);t.append("path").attr("d",d.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"});var n={"fill-opacity":"0"},e=Math.max(e/2,10);return t.append("circle").attr({"data-line-point":"start-point",cx:R?U(h.xanchor)+h.x0:U(h.x0),cy:I?V(h.yanchor)-h.y0:V(h.y0),r:e}).style(n).classed("cursor-grab",!0),t.append("circle").attr({"data-line-point":"end-point",cx:R?U(h.xanchor)+h.x1:U(h.x1),cy:I?V(h.yanchor)-h.y1:V(h.y1),r:e}).style(n).classed("cursor-grab",!0),t}():d,G={element:H.node(),gd:u,prepFn:function(e){ge(u)||(R&&(b=U(h.xanchor)),I&&(x=V(h.yanchor)),"path"===h.type?L=h.path:(g=R?h.x0:U(h.x0),_=I?h.y0:V(h.y0),y=R?h.x1:U(h.x1),v=I?h.y1:V(h.y1)),C=g<y?(A=g,E="x0",k=y,"x1"):(A=y,E="x1",k=g,"x0"),S=!I&&_<v||I&&v<_?(w=_,M="y0",T=v,"y1"):(w=v,M="y1",T=_,"y0"),X(e),$(p,h),function(e,t,n){var r=t.xref,i=t.yref,a=ae.getFromId(n,r),o=ae.getFromId(n,i),t="";"paper"===r||a.autorange||(t+=r);"paper"===i||o.autorange||(t+=i);ce.setClipUrl(e,t?"clip"+n._fullLayout._uid+t:null,n)}(d,h,u),G.moveFn="move"===D?Z:J,G.altKey=e.altKey)},doneFn:function(){ge(u)||(he(d),Q(p),ye(d,u,h),re.call("_guiRelayout",u,m.getUpdateObj()))},clickFn:function(){ge(u)||Q(p)}},de.init(G),H.node().onmousemove=X):!0===te.editable&&W.style("pointer-events",l||le.opacity(i)*r<=.5?"stroke":"all"),W.node().addEventListener("click",function(){var e,t;t=W,!_e(e=K)||0<=(t=+t.node().getAttribute("data-index"))&&(t!==e._fullLayout._activeShapeIndex?(e._fullLayout._activeShapeIndex=t,e._fullLayout._deactivateShape=xe,me(e)):xe(e))})}te._input&&!1!==te.visible&&("below"!==te.layer?t(K._fullLayout._shapeUpperLayer):"paper"!==te.xref&&"paper"!==te.yref&&ne._hadPlotinfo?t((ne.mainplotinfo||ne).shapelayer):t(K._fullLayout._shapeLowerLayer))}function ye(e,t,n){n=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ce.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function ve(e,t){var n,r,s,l,c,u,d,h,i=t.type,a=ae.getRefType(t.xref),o=ae.getRefType(t.yref),f=ae.getFromId(e,t.xref),p=ae.getFromId(e,t.yref),m=e._fullLayout._size,e=f?"domain"===a?function(e){return f._offset+f._length*e}:(n=pe.shapePositionToRange(f),function(e){return f._offset+f.r2p(n(e,!0))}):function(e){return m.l+m.w*e},a=p?"domain"===o?function(e){return p._offset+p._length*(1-e)}:(r=pe.shapePositionToRange(p),function(e){return p._offset+p.r2p(r(e,!0))}):function(e){return m.t+m.h*(1-e)};if("path"===i)return f&&"date"===f.type&&(e=pe.decodeDate(e)),p&&"date"===p.type&&(a=pe.decodeDate(a)),s=e,l=a,o=t.path,c=t.xsizemode,u=t.ysizemode,d=t.xanchor,h=t.yanchor,o.replace(fe.segmentRE,function(e){var t=0,n=e.charAt(0),r=fe.paramIsX[n],i=fe.paramIsY[n],a=fe.numParams[n],o=e.substr(1).replace(fe.paramRE,function(e){return r[t]?e="pixel"===c?s(d)+Number(e):s(e):i[t]&&(e="pixel"===u?l(h)-Number(e):l(e)),e=a<++t?"X":e});return a<t&&(o=o.replace(/[\s,]*X.*/,""),ie.log("Ignoring extra params in segment "+e)),n+o});if(g="pixel"===t.xsizemode?(_=(g=e(t.xanchor))+t.x0,g+t.x1):(_=e(t.x0),e(t.x1)),t="pixel"===t.ysizemode?(y=(e=a(t.yanchor))-t.y0,e-t.y1):(y=a(t.y0),a(t.y1)),"line"===i)return"M"+_+","+y+"L"+g+","+t;if("rect"===i)return"M"+_+","+y+"H"+g+"V"+t+"H"+_+"Z";var i=(_+g)/2,g=(y+t)/2,t=Math.abs(i-_),_=Math.abs(g-y),y="A"+t+","+_,t=i+t+","+g;return"M"+t+y+" 0 1,1 "+(i+","+(g-_))+y+" 0 0,1 "+t+"Z"}function be(e,o,s){return e.replace(fe.segmentRE,function(e){var t=0,n=e.charAt(0),r=fe.paramIsX[n],i=fe.paramIsY[n],a=fe.numParams[n];return n+e.substr(1).replace(fe.paramRE,function(e){return a<=t||(r[t]?e=o(e):i[t]&&(e=s(e)),t++),e})})}function xe(e){_e(e)&&0<=e._fullLayout._activeShapeIndex&&(a(e),delete e._fullLayout._activeShapeIndex,me(e))}t.exports={draw:me,drawOne:o,eraseActiveShape:function(e){if(_e(e)){a(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var r=[],i=0;i<n.length;i++)i!==t&&r.push(n[i]);delete e._fullLayout._activeShapeIndex,re.call("_guiRelayout",e,{shapes:r})}}}}},{"../../lib":230,"../../lib/setcursor":250,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/cartesian/handle_outline":287,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":182,"./draw_newshape/display_outlines":188,"./draw_newshape/helpers":189,"./helpers":191}],185:[function(e,t,n){"use strict";var r=e("../../drawing/attributes").dash,e=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:e({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":224,"../../drawing/attributes":121}],186:[function(e,t,n){"use strict";t.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],187:[function(e,t,n){"use strict";var r=e("../../color");t.exports=function(e,t,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(e=(e||{}).plot_bgcolor||"#FFF",n("newshape.line.color",r.contrast(e)),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":100}],188:[function(e,t,n){"use strict";var T=e("../../dragelement"),A=e("../../dragelement/helpers").drawMode,k=e("../../../registry"),r=e("./constants"),M=r.i000,S=r.i090,E=r.i180,C=r.i270,L=e("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=e("./helpers"),D=r.pointsShapeRectangle,O=r.pointsShapeEllipse,P=r.writePaths,R=e("./newshapes");t.exports=function e(u,n,r,t){t=t||0;var s=r.gd;function d(){e(u,n,r,t++),O(u[0])&&i({redrawing:!0})}function i(e){r.isActiveShape=!1;var t=R(n,r);Object.keys(t).length&&k.call((e||{}).redrawing?"relayout":"_guiRelayout",s,t)}var l,a,h,f,p,o=r.isActiveShape,c=s._fullLayout._zoomlayer,m=r.dragmode;function g(e){h=+e.srcElement.getAttribute("data-i"),f=+e.srcElement.getAttribute("data-j"),l[h][f].moveFn=_}function _(e,t){if(u.length){var n=p[h][f][1],r=p[h][f][2],i=u[h],a=i.length;if(D(i)){for(var o,s=0;s<a;s++)s!==f&&((o=i[s])[1]===i[f][1]&&(o[1]=n+e),o[2]===i[f][2]&&(o[2]=r+t));if(i[f][1]=n+e,i[f][2]=r+t,!D(i))for(var l=0;l<a;l++)for(var c=0;c<i[l].length;c++)i[l][c]=p[h][l][c]}else i[f][1]=n+e,i[f][2]=r+t;d()}}function y(){i()}function v(e,t){2===e&&(h=+t.srcElement.getAttribute("data-i"),f=+t.srcElement.getAttribute("data-j"),t=u[h],D(t)||O(t)||function(){if(u.length&&u[h]&&u[h].length){for(var e=[],t=0;t<u[h].length;t++)t!==f&&e.push(u[h][t]);1<e.length&&(2!==e.length||"Z"!==e[1][0])&&(0===f&&(e[0][0]="M"),u[h]=e,d(),i())}}())}function b(e,t){!function(e,t){if(u.length)for(var n=0;n<u.length;n++)for(var r=0;r<u[n].length;r++)for(var i=0;i+2<u[n][r].length;i+=2)u[n][r][i+1]=p[n][r][i+1]+e,u[n][r][i+2]=p[n][r][i+2]+t}(e,t),d()}function x(e){h=+e.srcElement.getAttribute("data-i"),a[h=h||0].moveFn=b}function w(){i()}A(m)?s._fullLayout._drawing=!0:0<=s._fullLayout._activeShapeIndex&&L(s),n.attr("d",P(u)),o&&!t&&(p=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var i=0;i<r.length;i++){e[n][i]=[];for(var a=0;a<r[i].length;a++)e[n][i][a]=r[i][a]}}return e}([],u),function(e){l=[];for(var t=0;t<u.length;t++){var n=u[t],r=!D(n)&&O(n);l[t]=[];for(var i,a,o=0;o<n.length;o++)"Z"!==n[o][0]&&(r&&o!==M&&o!==S&&o!==E&&o!==C||(i=n[o][1],a=n[o][2],a=e.append("circle").classed("cursor-grab",!0).attr("data-i",t).attr("data-j",o).attr("cx",i).attr("cy",a).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1}),l[t][o]={element:a.node(),gd:s,prepFn:g,doneFn:y,clickFn:v},T.init(l[t][o])))}}(c.append("g").attr("class","outline-controllers")),a=[],u.length&&(a[0]={element:n[0][0],gd:s,prepFn:x,doneFn:w},T.init(a[0])))}},{"../../../plots/cartesian/handle_outline":287,"../../../registry":313,"../../dragelement":119,"../../dragelement/helpers":118,"./constants":186,"./helpers":189,"./newshapes":190}],189:[function(e,t,u){"use strict";var R=e("parse-svg-path"),n=e("./constants"),I=n.CIRCLE_SIDES,d=n.SQRT2,e=e("../../../plots/cartesian/helpers"),N=e.p2r,z=e.r2p,h=[0,3,4,5,6,1,2],f=[0,3,4,1,2];function a(e,t){return Math.abs(e-t)<=1e-6}function o(e,t){var n=t[1]-e[1],e=t[2]-e[2];return Math.sqrt(n*n+e*e)}u.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var i=e[r].length,a=0;a<i;a++){var o=e[r][a][0];if("Z"===o)n+="Z";else for(var s=e[r][a].length,l=0;l<s;l++){var c=l;"Q"===o||"S"===o?c=f[l]:"C"===o&&(c=h[l]),n+=e[r][a][c],0<l&&l<s-1&&(n+=",")}}return n},u.readPaths=function(e,t,n,r){function i(){a=u,o=d}var a,o,s=R(e),l=[],c=-1,u=0,d=0;i();for(var h=0;h<s.length;h++){var f,p,m,g,_=[],y=s[h][0],v=y;switch(y){case"M":l[++c]=[],u=+s[h][1],d=+s[h][2],_.push([v,u,d]),i();break;case"Q":case"S":f=+s[h][1],m=+s[h][2],u=+s[h][3],d=+s[h][4],_.push([v,u,d,f,m]);break;case"C":f=+s[h][1],m=+s[h][2],p=+s[h][3],g=+s[h][4],u=+s[h][5],d=+s[h][6],_.push([v,u,d,f,m,p,g]);break;case"T":case"L":u=+s[h][1],d=+s[h][2],_.push([v,u,d]);break;case"H":u=+s[h][1],_.push([v="L",u,d]);break;case"V":d=+s[h][1],_.push([v="L",u,d]);break;case"A":var v="L",b=+s[h][1],x=+s[h][2];+s[h][4]||(b=-b,x=-x);for(var w=u-b,T=d,A=1;A<=I/2;A++){var k=2*Math.PI*A/I;_.push([v,w+b*Math.cos(k),T+x*Math.sin(k)])}break;case"Z":u===a&&d===o||(u=a,d=o,_.push([v,u,d]))}for(var M=(n||{}).domain,S=t._fullLayout._size,E=n&&"pixel"===n.xsizemode,C=n&&"pixel"===n.ysizemode,L=!1===r,D=0;D<_.length;D++){for(A=0;A+2<7;A+=2){var O=_[D][A+1],P=_[D][A+2];void 0!==O&&void 0!==P&&(u=O,d=P,n&&(n.xaxis&&n.xaxis.p2r?(L&&(O-=n.xaxis._offset),O=E?z(n.xaxis,n.xanchor)+O:N(n.xaxis,O)):(L&&(O-=S.l),M?O=M.x[0]+O/S.w:O/=S.w),P=n.yaxis&&n.yaxis.p2r?(L&&(P-=n.yaxis._offset),C?z(n.yaxis,n.yanchor)-P:N(n.yaxis,P)):(L&&(P-=S.t),M?M.y[1]-P/S.h:1-P/S.h)),_[D][A+1]=O,_[D][A+2]=P)}l[c].push(_[D].slice())}}return l},u.pointsShapeRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!a(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!a(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!a(e[0][1],e[1][1])&&!a(e[0][1],e[3][1]))&&!!(o(e[0],e[1])*o(e[0],e[3]))},u.pointsShapeEllipse=function(e){if((t=e.length)!==I+1)return!1;for(var t=I,n=0;n<t;n++){var r=(2*t-n)%t,i=(t/2+r)%t;if(!a(o(e[n],e[(t/2+n)%t]),o(e[r],e[i])))return!1}return!0},u.handleEllipse=function(e,t,n){if(!e)return[t,n];for(var n=u.ellipseOver({x0:t[0],y0:t[1],x1:n[0],y1:n[1]}),r=(n.x1+n.x0)/2,i=(n.y1+n.y0)/2,a=(n.x1-n.x0)/2,o=(n.y1-n.y0)/2,a=a||(o/=d),o=o||(a/=d),s=[],l=0;l<I;l++){var c=2*l*Math.PI/I;s.push([r+a*Math.cos(c),i+o*Math.sin(c)])}return s},u.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,i=e.y1,a=r-t,e=i-n,r=((t-=a)+r)/2,i=((n-=e)+i)/2;return{x0:r-(a*=d),y0:i-(e*=d),x1:r+a,y1:i+e}}},{"../../../plots/cartesian/helpers":288,"./constants":186,"parse-svg-path":54}],190:[function(e,t,n){"use strict";var r=e("../../dragelement/helpers"),L=r.drawMode,D=r.openMode,r=e("./constants"),O=r.i000,P=r.i090,R=r.i180,I=r.i270,N=r.cos45,z=r.sin45,r=e("../../../plots/cartesian/helpers"),F=r.p2r,j=r.r2p,B=e("../../../plots/cartesian/handle_outline").clearSelect,e=e("./helpers"),H=e.readPaths,U=e.writePaths,V=e.ellipseOver;t.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var r=n.getAttribute("d"),i=t.gd,a=i._fullLayout.newshape,o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=!!o.domain||!o.xaxis,u=!!o.domain||!o.yaxis,d=t.isActiveShape,h=t.dragmode,f=(i.layout||{}).shapes||[];if(!L(h)&&void 0!==d){var p=i._fullLayout._activeShapeIndex;if(p<f.length)switch(i._fullLayout.shapes[p].type){case"rect":h="drawrect";break;case"circle":h="drawcircle";break;case"line":h="drawline";break;case"path":var m=f[p].path||"",h="Z"===m[m.length-1]?"drawclosedpath":"drawopenpath"}}var g,_,y,v,b,x,w=D(h),T=H(r,i,o,d),A={editable:!0,xref:c?"paper":s._id,yref:u?"paper":l._id,layer:a.layer,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};w||(A.fillcolor=a.fillcolor,A.fillrule=a.fillrule),(g=1===T.length?T[0]:g)&&"drawrect"===h?(A.type="rect",A.x0=g[0][1],A.y0=g[0][2],A.x1=g[2][1],A.y1=g[2][2]):g&&"drawline"===h?(A.type="line",A.x0=g[0][1],A.y0=g[0][2],A.x1=g[1][1],A.y1=g[1][2]):g&&"drawcircle"===h?(A.type="circle",_=g[O][1],y=g[P][1],v=g[R][1],b=g[I][1],x=g[O][2],e=g[P][2],n=g[R][2],r=g[I][2],c=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),u=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type),c&&(_=j(o.xaxis,_),y=j(o.xaxis,y),v=j(o.xaxis,v),b=j(o.xaxis,b)),u&&(x=j(o.yaxis,x),e=j(o.yaxis,e),n=j(o.yaxis,n),r=j(o.yaxis,r)),x=V({x0:w=(y+b)/2,y0:a=(x+n)/2,x1:w+(b-y+v-_)/2*N,y1:a+(r-e+n-x)/2*z}),c&&(x.x0=F(o.xaxis,x.x0),x.x1=F(o.xaxis,x.x1)),u&&(x.y0=F(o.yaxis,x.y0),x.y1=F(o.yaxis,x.y1)),A.x0=x.x0,A.y0=x.y0,A.x1=x.x1,A.y1=x.y1):(A.type="path",s&&l&&function(e,t,n){var r="date"===t.type,i="date"===n.type;if(!r&&!i)return;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)r&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),i&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"))}(T,s,l),A.path=U(T),g=null),B(i);for(var t=t.editHelpers,k=(t||{}).modifyItem,M=[],S=0;S<f.length;S++){var E=i._fullLayout.shapes[S];if(M[S]=E._input,void 0!==d&&S===i._fullLayout._activeShapeIndex){var C=A;switch(E.type){case"line":case"rect":case"circle":k("x0",C.x0),k("x1",C.x1),k("y0",C.y0),k("y1",C.y1);break;case"path":k("path",C.path)}}}return void 0===d?(M.push(A),M):t?t.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":287,"../../../plots/cartesian/helpers":288,"../../dragelement/helpers":118,"./constants":186,"./helpers":189}],191:[function(e,t,s){"use strict";var i=e("./constants"),a=e("../../lib");s.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},s.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},s.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},s.extractPathCoords=function(e,n){var r=[];return e.match(i.segmentRE).forEach(function(e){var t=n[e.charAt(0)].drawn;void 0!==t&&(!(e=e.substr(1).match(i.paramRE))||e.length<t||r.push(a.cleanNumber(e[t])))}),r},s.getDataToPixel=function(e,t,n,r){var i,a,o=e._fullLayout._size;return t?"domain"===r?a=function(e){return t._length*(n?1-e:e)+t._offset}:(i=s.shapePositionToRange(t),a=function(e){return t._offset+t.r2p(i(e,!0))},"date"===t.type&&(a=s.decodeDate(a))):a=n?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e},a},s.getPixelToData=function(e,t,n,r){var i,a=e._fullLayout._size;return t?"domain"===r?function(e){e=(e-t._offset)/t._length;return n?1-e:e}:(i=s.rangeToShapePosition(t),function(e){return i(t.p2r(e-t._offset))}):n?function(e){return 1-(e-a.t)/a.h}:function(e){return(e-a.l)/a.w}},s.roundPositionForSharpStrokeRendering=function(e,t){t=1===Math.round(t%2),e=Math.round(e);return t?e+.5:e},s.makeOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},t=e._fullLayout._plots[n.xref+n.yref];return!!t?t._hadPlotinfo=!0:(t={},n.xref&&"paper"!==n.xref&&(t.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(t.yaxis=e._fullLayout[n.yref+"axis"])),t.xsizemode=n.xsizemode,t.ysizemode=n.ysizemode,t.xanchor=n.xanchor,t.yanchor=n.yanchor,{options:n,plotinfo:t}}},{"../../lib":230,"./constants":182}],192:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":289,"./attributes":180,"./calc_autorange":181,"./defaults":183,"./draw":184,"./draw_newshape/defaults":187}],193:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../../plots/pad_attributes"),a=e("../../lib/extend").extendDeepAll,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,c=e("./constants"),e=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/animation_attributes":270,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"./constants":194}],194:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],195:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../plots/array_container_defaults"),u=e("./attributes"),r=e("./constants").name,i=u.steps;function a(n,r,e){function t(e,t){return l.coerce(n,r,u,e,t)}for(var i,a=c(n,r,{name:"steps",handleItemDefaults:d}),o=0,s=0;s<a.length;s++)a[s].visible&&o++;(o<2?r.visible=!1:t("visible"))&&(r._stepCount=o,i=r._visibleSteps=l.filterVisible(a),(a[t("active")]||{}).visible||(r.active=i[0]._index),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("len"),t("lenmode"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("currentvalue.visible")&&(t("currentvalue.xanchor"),t("currentvalue.prefix"),t("currentvalue.suffix"),t("currentvalue.offset"),l.coerceFont(t,"currentvalue.font",r.font)),t("transition.duration"),t("transition.easing"),t("bgcolor"),t("activebgcolor"),t("bordercolor"),t("borderwidth"),t("ticklen"),t("tickwidth"),t("tickcolor"),t("minorticklen"))}function d(n,r){function e(e,t){return l.coerce(n,r,i,e,t)}var t="skip"===n.method||Array.isArray(n.args)?e("visible"):r.visible=!1;t&&(e("method"),e("args"),t=e("label","step-"+r._index),e("value",t),e("execute"))}t.exports=function(e,t){c(e,t,{name:r,handleItemDefaults:a})}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":193,"./constants":194}],196:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("../../plots/plots"),l=e("../color"),d=e("../drawing"),h=e("../../lib"),s=h.strTranslate,f=e("../../lib/svg_text_utils"),p=e("../../plot_api/plot_template").arrayEditor,m=e("./constants"),e=e("../../constants/alignment"),g=e.LINE_SPACING,_=e.FROM_TL,y=e.FROM_BR;function v(e){return m.autoMarginIdRoot+e._index}function o(e){return e._index}function b(e,t,n){if(t.currentvalue.visible){var r,i,a=t._dims;switch(t.currentvalue.xanchor){case"right":r=a.inputAreaLength-m.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":r=.5*a.inputAreaLength,i="middle";break;default:r=m.currentValueInset,i="left"}var o=h.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":i,"data-notex":1})}),s=t.currentvalue.prefix||"";"string"==typeof n?s+=n:(e=t.steps[t.active].label,s+=e=(n=t._gd._fullLayout._meta)?h.templateString(e,n):e),t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(d.font,t.currentvalue.font).text(s).call(f.convertToTspans,t._gd);s=f.lineCount(o),t=(a.currentValueMaxLines+1-s)*t.currentvalue.font.size*g;return f.positionText(o,r,t),o}}function x(t,n,r){h.ensureSingle(t,"rect",m.gripRectClass,function(e){e.call(a,n,t,r).style("pointer-events","all")}).attr({width:m.gripWidth,height:m.gripHeight,rx:m.gripRadius,ry:m.gripRadius}).call(l.stroke,r.bordercolor).call(l.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function w(e,t,n){var r=h.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})}),e=t.step.label,t=n._gd._fullLayout._meta;return t&&(e=h.templateString(e,t)),r.call(d.font,n.font).text(e).call(f.convertToTspans,n._gd),r}function T(e,n){var e=h.ensureSingle(e,"g",m.labelsClass),r=n._dims,e=e.selectAll("g."+m.labelGroupClass).data(r.labelSteps);e.enter().append("g").classed(m.labelGroupClass,!0),e.exit().remove(),e.each(function(e){var t=c.select(this);t.call(w,e,n),d.setTranslate(t,E(n,e.fraction),m.tickOffset+n.ticklen+n.font.size*g+m.labelOffset+r.currentValueTotalHeight)})}function A(e,t,n,r,i){r=Math.round(r*(n._stepCount-1)),r=n._visibleSteps[r]._index;r!==n.active&&k(e,t,n,r,!0,i)}function k(t,n,e,r,i,a){var o=e.active;e.active=r,p(t.layout,m.name,e).applyUpdate("active",r);r=e.steps[e.active];n.call(S,e,a),n.call(b,e),t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:i,previousActive:o}),r&&r.method&&i&&(n._nextMethod?(n._nextMethod.step=r,n._nextMethod.doCallback=i,n._nextMethod.doTransition=a):(n._nextMethod={step:r,doCallback:i,doTransition:a},n._nextMethodRaf=window.requestAnimationFrame(function(){var e=n._nextMethod.step;e.method&&(e.execute&&u.executeAPICommand(t,e.method,e.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function a(e,r,i){var a=i.node(),o=c.select(r);function s(){return i.data()[0]}e.on("mousedown",function(){var e=s();r.emit("plotly_sliderstart",{slider:e});var t=i.select("."+m.gripRectClass);c.event.stopPropagation(),c.event.preventDefault(),t.call(l.fill,e.activebgcolor);var n=C(e,c.mouse(a)[0]);A(r,i,e,n,!0),e._dragging=!0,o.on("mousemove",function(){var e=s(),t=C(e,c.mouse(a)[0]);A(r,i,e,t,!1)}),o.on("mouseup",function(){var e=s();e._dragging=!1,t.call(l.fill,e.bgcolor),o.on("mouseup",null),o.on("mousemove",null),r.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function M(e,i){var e=e.selectAll("rect."+m.tickRectClass).data(i._visibleSteps),a=i._dims;e.enter().append("rect").classed(m.tickRectClass,!0),e.exit().remove(),e.attr({width:i.tickwidth+"px","shape-rendering":"crispEdges"}),e.each(function(e,t){var n=t%a.labelStride==0,r=c.select(this);r.attr({height:n?i.ticklen:i.minorticklen}).call(l.fill,i.tickcolor),d.setTranslate(r,E(i,t/(i._stepCount-1))-.5*i.tickwidth,(n?m.tickOffset:m.minorTickOffset)+a.currentValueTotalHeight)})}function S(e,t,n){for(var r=e.select("rect."+m.gripRectClass),i=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){i=a;break}var o=E(t,i/(t._stepCount-1));t._invokingCommand||(e=r,(e=n&&0<t.transition.duration?r.transition().duration(t.transition.duration).ease(t.transition.easing):e).attr("transform",s(o-.5*m.gripWidth,t._dims.currentValueTotalHeight)))}function E(e,t){e=e._dims;return e.inputAreaStart+m.stepInset+(e.inputAreaLength-2*m.stepInset)*Math.min(1,Math.max(0,t))}function C(e,t){e=e._dims;return Math.min(1,Math.max(0,(t-m.stepInset-e.inputAreaStart)/(e.inputAreaLength-2*m.stepInset-2*e.inputAreaStart)))}function L(t,n,r){var e=r._dims,i=h.ensureSingle(t,"rect",m.railTouchRectClass,function(e){e.call(a,n,t,r).style("pointer-events","all")});i.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,m.tickOffset+r.ticklen+e.labelHeight)}).call(l.fill,r.bgcolor).attr("opacity",0),d.setTranslate(i,0,e.currentValueTotalHeight)}function D(e,t){var n=t._dims,r=n.inputAreaLength-2*m.railInset,e=h.ensureSingle(e,"rect",m.railRectClass);e.attr({width:r,height:m.railWidth,rx:m.railRadius,ry:m.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),d.setTranslate(e,m.railInset,.5*(n.inputAreaWidth-m.railWidth)+n.currentValueTotalHeight)}t.exports=function(r){var e=r._fullLayout,t=function(e,t){for(var n=e[m.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&(a._gd=t,r.push(a))}return r}(e,r),e=e._infolayer.selectAll("g."+m.containerClassName).data(0<t.length?[0]:[]);function n(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),u.autoMargin(r,v(e))}if(e.enter().append("g").classed(m.containerClassName,!0).style("cursor","ew-resize"),e.exit().each(function(){c.select(this).selectAll("g."+m.groupClassName).each(n)}).remove(),0!==t.length){e=e.selectAll("g."+m.groupClassName).data(t,o);e.enter().append("g").classed(m.groupClassName,!0),e.exit().each(n).remove();for(var i=0;i<t.length;i++){var a=t[i];!function(e,n){var t=d.tester.selectAll("g."+m.labelGroupClass).data(n._visibleSteps);t.enter().append("g").classed(m.labelGroupClass,!0);var r=0,i=0;t.each(function(e){e=w(c.select(this),{step:e},n).node();e&&(e=d.bBox(e),i=Math.max(i,e.height),r=Math.max(r,e.width))}),t.remove();var a=n._dims={};a.inputAreaWidth=Math.max(m.railWidth,m.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*n.x,a.ly=o.t+o.h*(1-n.y),"fraction"===n.lenmode?a.outerLength=Math.round(o.w*n.len):a.outerLength=n.len;a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-n.pad.l-n.pad.r);var s=(a.inputAreaLength-2*m.stepInset)/(n._stepCount-1),o=r+m.labelPadding;{var l;a.labelStride=Math.max(1,Math.ceil(o/s)),a.labelHeight=i,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,n.currentvalue.visible&&(l=d.tester.append("g"),t.each(function(e){var t=b(l,n,e.label),e=t.node()&&d.bBox(t.node())||{width:0,height:0},t=f.lineCount(t);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(e.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(e.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,t)}),a.currentValueTotalHeight=a.currentValueHeight+n.currentvalue.offset,l.remove())}a.height=a.currentValueTotalHeight+m.tickOffset+n.ticklen+m.labelOffset+a.labelHeight+n.pad.t+n.pad.b;s="left";h.isRightAnchor(n)&&(a.lx-=a.outerLength,s="right");h.isCenterAnchor(n)&&(a.lx-=a.outerLength/2,s="center");t="top";h.isBottomAnchor(n)&&(a.ly-=a.height,t="bottom");h.isMiddleAnchor(n)&&(a.ly-=a.height/2,t="middle");a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);t={y:n.y,b:a.height*y[t],t:a.height*_[t]};"fraction"===n.lenmode?(t.l=0,t.xl=n.x-n.len*_[s],t.r=0,t.xr=n.x+n.len*y[s]):(t.x=n.x,t.l=a.outerLength*_[s],t.r=a.outerLength*y[s]);u.autoMargin(e,v(n),t)}(r,a)}e.each(function(e){var n=c.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(e),u.manageCommandObserver(r,e,e._visibleSteps,function(e){var t=n.data()[0];t.active!==e.index&&(t._dragging||k(r,n,t,e.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(b,n).call(D,n).call(T,n).call(M,n).call(L,e,n).call(x,e,n);e=n._dims;d.setTranslate(t,e.lx+n.pad.l,e.ly+n.pad.t),t.call(S,n,!1),t.call(b,n)}(r,c.select(this),e)})}}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":194,"@plotly/d3":11}],197:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":193,"./constants":194,"./defaults":195,"./draw":196}],198:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),A=e("../../plots/plots"),k=e("../../registry"),M=e("../../lib"),S=M.strTranslate,E=e("../drawing"),C=e("../color"),L=e("../../lib/svg_text_utils"),D=e("../../constants/interactions"),O=e("../../constants/alignment").OPPOSITE_SIDE,P=/ [XY][0-9]* /;t.exports={draw:function(n,e,t){var r=t.propContainer,i=t.propName,a=t.placeholder,o=t.traceIndex,c=t.avoid||{},s=t.attributes,l=t.transform,u=t.containerGroup,d=n._fullLayout,h=1,f=!1,p=((r=r.title)&&r.text?r.text:"").trim(),m=(r=r&&r.font?r.font:{}).family,g=r.size,_=r.color;"title.text"===i?y="titleText":-1!==i.indexOf("axis")?y="axisTitleText":i.indexOf(!0)&&(y="colorbarTitleText");var y=n._context.edits[y];""===p?h=0:p.replace(P," % ")===a.replace(P," % ")&&(h=.2,f=!0,y||(p="")),t._meta?p=M.templateString(p,t._meta):d._meta&&(p=M.templateString(p,d._meta));t=p||y,r=(u=u||M.ensureSingle(d._infolayer,"g","g-"+e)).selectAll("text").data(t?[0]:[]);return r.enter().append("text"),r.text(p).attr("class",e),r.exit().remove(),t&&(r.call(v),y&&(p?r.on(".opacity",null):(f=!(h=0),r.text(a).on("mouseover.opacity",function(){w.select(this).transition().duration(D.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(D.HIDE_PLACEHOLDER).style("opacity",0)})),r.call(L.makeEditable,{gd:n}).on("edit",function(e){void 0!==o?k.call("_guiRestyle",n,i,e,o):k.call("_guiRelayout",n,i,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(v)}).on("input",function(e){this.text(e||" ").call(L.positionText,s.x,s.y)})),r.classed("js-placeholder",f)),u;function v(e){M.syncOrAsync([b,x],e)}function b(e){var t;return l?(t="",l.rotate&&(t+="rotate("+[l.rotate,s.x,s.y]+")"),l.offset&&(t+=S(0,l.offset))):t=null,e.attr("transform",t),e.style({"font-family":m,"font-size":w.round(g,2)+"px",fill:C.rgb(_),opacity:h*C.opacity(_),"font-weight":A.fontWeight}).attr(s).call(L.convertToTspans,n),A.previousPromises(n)}function x(e){var t,n,r,i,a,o,s,l=w.select(e.node().parentNode);c&&c.selection&&c.side&&p&&(l.attr("transform",null),t=O[c.side],n="left"===c.side||"top"===c.side?-1:1,r=T(c.pad)?c.pad:2,i=E.bBox(l.node()),a={left:0,top:0,right:d.width,bottom:d.height},o=c.maxShift||n*(a[c.side]-i[c.side]),((s=0)<(s=o<0?o:(e=c.offsetLeft||0,a=c.offsetTop||0,i.left-=e,i.right-=e,i.top-=a,i.bottom-=a,c.selection.each(function(){var e=E.bBox(this);M.bBoxIntersect(i,e,r)&&(s=Math.max(s,n*(e[c.side]-i[t])+r))}),Math.min(o,s)))||o<0)&&(o={left:[-s,0],right:[s,0],top:[0,-s],bottom:[0,s]}[c.side],l.attr("transform",S(o[0],o[1]))))}}}},{"../../constants/alignment":205,"../../constants/interactions":209,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],199:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),a=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l=e("../../plot_api/plot_template").templatedArray,e=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:e,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"../color/attributes":99}],200:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],201:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("../../plots/array_container_defaults"),o=e("./attributes"),r=e("./constants").name,s=o.buttons;function l(n,r,e){function t(e,t){return i.coerce(n,r,o,e,t)}t("visible",0<a(n,r,{name:"buttons",handleItemDefaults:c}).length)&&(t("active"),t("direction"),t("type"),t("showactive"),t("x"),t("y"),i.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),i.coerceFont(t,"font",e.font),t("bgcolor",e.paper_bgcolor),t("bordercolor"),t("borderwidth"))}function c(n,r){function e(e,t){return i.coerce(n,r,s,e,t)}e("visible","skip"===n.method||Array.isArray(n.args))&&(e("method"),e("args"),e("args2"),e("label"),e("execute"))}t.exports=function(e,t){a(e,t,{name:r,handleItemDefaults:l})}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":199,"./constants":200}],202:[function(e,t,n){"use strict";var d=e("@plotly/d3"),h=e("../../plots/plots"),a=e("../color"),u=e("../drawing"),f=e("../../lib"),p=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,m=e("../../constants/alignment").LINE_SPACING,g=e("./constants"),_=e("./scrollbox");function y(e){return e._index}function v(e,t){return+e.attr(g.menuIndexAttrName)===t._index}function b(e,t,n,r,i,a,o,s){t.active=o,l(e.layout,g.name,t).applyUpdate("active",o),"buttons"===t.type?w(e,r,null,null,t):"dropdown"===t.type&&(i.attr(g.menuIndexAttrName,"-1"),x(e,r,i,a,t),s||w(e,r,i,a,t))}function x(e,t,n,r,i){var a=f.ensureSingle(t,"g",g.headerClassName,function(e){e.style("pointer-events","all")}),o=i._dims,s=i.active,l=i.buttons[s]||g.blankHeaderOpts,c={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},s={width:o.headerWidth,height:o.headerHeight};a.call(T,i,l,e).call(E,i,c,s),f.ensureSingle(t,"text",g.headerArrowClassName,function(e){e.attr("text-anchor","end").call(u.font,i.font).text(g.arrowSymbol[i.direction])}).attr({x:o.headerWidth-g.arrowOffsetX+i.pad.l,y:o.headerHeight/2+g.textOffsetY+i.pad.t}),a.on("click",function(){n.call(C,String(v(n,i)?-1:i._index)),w(e,t,n,r,i)}),a.on("mouseover",function(){a.call(k)}),a.on("mouseout",function(){a.call(M,i)}),u.setTranslate(t,o.lx,o.ly)}function w(r,i,a,o,s){a||(a=i).attr("pointer-events","all");var e=-1!=+a.attr(g.menuIndexAttrName)||"buttons"===s.type?s.buttons:[],t="dropdown"===s.type?g.dropdownButtonClassName:g.buttonClassName,l=a.selectAll("g."+t).data(f.filterVisible(e)),n=l.enter().append("g").classed(t,!0),c=l.exit();"dropdown"===s.type?(n.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();e=0,t=0,n=s._dims,c=-1!==["up","down"].indexOf(s.direction);"dropdown"===s.type&&(c?t=n.headerHeight+g.gapButtonHeader:e=n.headerWidth+g.gapButtonHeader),"dropdown"===s.type&&"up"===s.direction&&(t=-g.gapButtonHeader+g.gapButton-n.openHeight),"dropdown"===s.type&&"left"===s.direction&&(e=-g.gapButtonHeader+g.gapButton-n.openWidth);var u={x:n.lx+e+s.pad.l,y:n.ly+t+s.pad.t,yPad:g.gapButton,xPad:g.gapButton,index:0},t={l:u.x+s.borderwidth,t:u.y+s.borderwidth};l.each(function(e,t){var n=d.select(this);n.call(T,s,e,r).call(E,s,u),n.on("click",function(){d.event.defaultPrevented||(e.execute&&(e.args2&&s.active===t?(b(r,s,0,i,a,o,-1),h.executeAPICommand(r,e.method,e.args2)):(b(r,s,0,i,a,o,t),h.executeAPICommand(r,e.method,e.args))),r.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active}))}),n.on("mouseover",function(){n.call(k)}),n.on("mouseout",function(){n.call(M,s),l.call(A,s)})}),l.call(A,s),c?(t.w=Math.max(n.openWidth,n.headerWidth),t.h=u.y-t.t):(t.w=u.x-t.l,t.h=Math.max(n.openHeight,n.headerHeight)),t.direction=s.direction,o&&(l.size()?function(e,t,n){var r,i,a,o=t.direction,o="up"===o||"down"===o,s=t._dims,l=t.active;if(o)for(a=i=0;a<l;a++)i+=s.heights[a]+g.gapButton;else for(a=r=0;a<l;a++)r+=s.widths[a]+g.gapButton;e.enable(n,r,i),e.hbar&&e.hbar.attr("opacity","0").transition().attr("opacity","1");e.vbar&&e.vbar.attr("opacity","0").transition().attr("opacity","1")}(o,s,t):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()});n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(o))}function T(e,t,n,r){e.call(i,t).call(o,t,n,r)}function i(e,t){f.ensureSingle(e,"rect",g.itemRectClassName,function(e){e.attr({rx:g.rx,ry:g.ry,"shape-rendering":"crispEdges"})}).call(a.stroke,t.bordercolor).call(a.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,n,r){var i=f.ensureSingle(e,"text",g.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})}),e=n.label,n=r._fullLayout._meta;n&&(e=f.templateString(e,n)),i.call(u.font,t.font).text(e).call(p.convertToTspans,r)}function A(e,r){var i=r.active;e.each(function(e,t){var n=d.select(this);t===i&&r.showactive&&n.select("rect."+g.itemRectClassName).call(a.fill,g.activeColor)})}function k(e){e.select("rect."+g.itemRectClassName).call(a.fill,g.hoverColor)}function M(e,t){e.select("rect."+g.itemRectClassName).call(a.fill,t.bgcolor)}function S(e){return g.autoMarginIdRoot+e._index}function E(e,t,n,r){r=r||{};var i=e.select("."+g.itemRectClassName),a=e.select("."+g.itemTextClassName),o=t.borderwidth,s=n.index,l=t._dims;u.setTranslate(e,o+n.x,o+n.y);e=-1!==["up","down"].indexOf(t.direction),o=r.height||(e?l.heights[s]:l.height1);i.attr({x:0,y:0,width:r.width||(e?l.width1:l.widths[s]),height:o});r=t.font.size*m,t=p.lineCount(a);p.positionText(a,g.textOffsetX,o/2-(t-1)*r/2+g.textOffsetY),e?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function C(e,t){e.attr(g.menuIndexAttrName,t||"-1").selectAll("g."+g.dropdownButtonClassName).remove()}t.exports=function(i){var e=i._fullLayout,t=f.filterVisible(e[g.name]);function n(e){h.autoMargin(i,S(e))}var r=e._menulayer.selectAll("g."+g.containerClassName).data(0<t.length?[0]:[]);if(r.enter().append("g").classed(g.containerClassName,!0).style("cursor","pointer"),r.exit().each(function(){d.select(this).selectAll("g."+g.headerGroupClassName).each(n)}).remove(),0!==t.length){var a=r.selectAll("g."+g.headerGroupClassName).data(t,y);a.enter().append("g").classed(g.headerGroupClassName,!0);for(var o=f.ensureSingle(r,"g",g.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),s=0;s<t.length;s++){var l=t[s];!function(i,a){var o=a._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},e=u.tester.selectAll("g."+g.dropdownButtonClassName).data(f.filterVisible(a.buttons));e.enter().append("g").classed(g.dropdownButtonClassName,!0);var s=-1!==["up","down"].indexOf(a.direction);e.each(function(e,t){var n=d.select(this);n.call(T,a,e,i);var r=n.select("."+g.itemTextClassName),e=r.node()&&u.bBox(r.node()).width,n=Math.max(e+g.textPadX,g.minWidth),e=a.font.size*m,r=p.lineCount(r),r=Math.max(e*r,g.minHeight)+g.textOffsetY,r=Math.ceil(r),n=Math.ceil(n);o.widths[t]=n,o.heights[t]=r,o.height1=Math.max(o.height1,r),o.width1=Math.max(o.width1,n),s?(o.totalWidth=Math.max(o.totalWidth,n),o.openWidth=o.totalWidth,o.totalHeight+=r+g.gapButton,o.openHeight+=r+g.gapButton):(o.totalWidth+=n+g.gapButton,o.openWidth+=n+g.gapButton,o.totalHeight=Math.max(o.totalHeight,r),o.openHeight=o.totalHeight)}),s?o.totalHeight-=g.gapButton:o.totalWidth-=g.gapButton;o.headerWidth=o.width1+g.arrowPadX,o.headerHeight=o.height1,"dropdown"===a.type&&(s?(o.width1+=g.arrowPadX,o.totalHeight=o.height1):o.totalWidth=o.width1,o.totalWidth+=g.arrowPadX);e.remove();var t=o.totalWidth+a.pad.l+a.pad.r,n=o.totalHeight+a.pad.t+a.pad.b,r=i._fullLayout._size;o.lx=r.l+r.w*a.x,o.ly=r.t+r.h*(1-a.y);e="left";f.isRightAnchor(a)&&(o.lx-=t,e="right");f.isCenterAnchor(a)&&(o.lx-=t/2,e="center");r="top";f.isBottomAnchor(a)&&(o.ly-=n,r="bottom");f.isMiddleAnchor(a)&&(o.ly-=n/2,r="middle");o.totalWidth=Math.ceil(o.totalWidth),o.totalHeight=Math.ceil(o.totalHeight),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),h.autoMargin(i,S(a),{x:a.x,y:a.y,l:t*({right:1,center:.5}[e]||0),r:t*({left:1,center:.5}[e]||0),b:n*({top:1,middle:.5}[r]||0),t:n*({bottom:1,middle:.5}[r]||0)})}(i,l)}var e="updatemenus"+e._uid,c=new _(i,o,e);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(C)),a.exit().each(function(e){o.call(C),n(e)}).remove(),a.each(function(t){var n=d.select(this),r="dropdown"===t.type?o:null;h.manageCommandObserver(i,t,t.buttons,function(e){b(i,t,t.buttons[e.index],n,r,c,e.index,!0)}),"dropdown"===t.type?(x(i,n,o,c,t),v(o,t)&&w(i,n,o,c,t)):w(i,n,null,null,t)})}}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":200,"./scrollbox":204,"@plotly/d3":11}],203:[function(e,t,n){arguments[4][197][0].apply(n,arguments)},{"./attributes":199,"./constants":200,"./defaults":201,"./draw":202,dup:197}],204:[function(e,t,n){"use strict";t.exports=T;var b=e("@plotly/d3"),x=e("../color"),w=e("../drawing"),i=e("../../lib");function T(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(e,t,n){var r=this.gd._fullLayout,i=r.width,a=r.height;this.position=e;var o=this.position.l,s=this.position.w,l=this.position.t,c=this.position.h,u=this.position.direction,d="down"===u,h="left"===u,f="up"===u,p=s,m=c;d||h||"right"===u||f||(this.position.direction="down",d=!0),d||f?(_=(g=o)+p,m=d?(y=l,(v=Math.min(y+m,a))-y):(v=l+m)-(y=Math.max(v-m,0))):(v=(y=l)+m,p=h?(_=o+p)-(g=Math.max(_-p,0)):(g=o,(_=Math.min(g+p,i))-g)),this._box={l:g,t:y,w:p,h:m};e=p<s,u=T.barLength+2*T.barPad,f=T.barWidth+2*T.barPad,d=o,h=l+c;a<h+f&&(h=a-f);a=this.container.selectAll("rect.scrollbar-horizontal").data(e?[0]:[]);a.exit().on(".drag",null).remove(),a.enter().append("rect").classed("scrollbar-horizontal",!0).call(x.fill,T.barColor),e?(this.hbar=a.attr({rx:T.barRadius,ry:T.barRadius,x:d,y:h,width:u,height:f}),this._hbarXMin=d+u/2,this._hbarTranslateMax=p-u):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);a=m<c,h=T.barWidth+2*T.barPad,d=T.barLength+2*T.barPad,p=o+s,u=l;i<p+h&&(p=i-h);i=this.container.selectAll("rect.scrollbar-vertical").data(a?[0]:[]);i.exit().on(".drag",null).remove(),i.enter().append("rect").classed("scrollbar-vertical",!0).call(x.fill,T.barColor),a?(this.vbar=i.attr({rx:T.barRadius,ry:T.barRadius,x:p,y:u,width:h,height:d}),this._vbarYMin=u+d/2,this._vbarTranslateMax=m-d):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var d=this.id,g=g-.5,_=a?_+h+.5:_+.5,y=y-.5,v=e?v+f+.5:v+.5,r=r._topdefs.selectAll("#"+d).data(e||a?[0]:[]);r.exit().remove(),r.enter().append("clipPath").attr("id",d).append("rect"),e||a?(this._clipRect=r.select("rect").attr({x:Math.floor(g),y:Math.floor(y),width:Math.ceil(_)-Math.floor(g),height:Math.ceil(v)-Math.floor(y)}),this.container.call(w.setClipUrl,d,this.gd),this.bg.attr({x:o,y:l,width:s,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),(e||a)&&(c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(c),c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault(),b.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),e&&this.hbar.on(".drag",null).call(c),a&&this.vbar.on(".drag",null).call(c)),this.setTranslate(t,n)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=b.event.dx),this.vbar&&(t-=b.event.dy),this.setTranslate(e,t)},T.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=b.event.deltaY),this.vbar&&(t+=b.event.deltaY),this.setTranslate(e,t)},T.prototype._onBarDrag=function(){var e,t,n=this.translateX,r=this.translateY;this.hbar&&(e=(t=n+this._hbarXMin)+this._hbarTranslateMax,n=(i.constrain(b.event.x,t,e)-t)/(e-t)*(this.position.w-this._box.w)),this.vbar&&(t=(e=r+this._vbarYMin)+this._vbarTranslateMax,r=(i.constrain(b.event.y,e,t)-e)/(t-e)*(this.position.h-this._box.h)),this.setTranslate(n,r)},T.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;e=i.constrain(e||0,0,n),t=i.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(w.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(w.setTranslate,e+e/n*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(w.setTranslate,e,t+t/r*this._vbarTranslateMax)}},{"../../lib":230,"../color":100,"../drawing":122,"@plotly/d3":11}],205:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],206:[function(e,t,n){"use strict";t.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},{}],207:[function(e,t,n){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],208:[function(e,t,n){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],209:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],210:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],211:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],212:[function(e,t,n){"use strict";n.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var r=e("./registry"),i=n.register=r.register,a=e("./plot_api"),o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=a[l]),i({moduleType:"apiMethod",name:l,fn:a[l]})}i(e("./traces/scatter")),i([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),i([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=e("./fonts/ploticon");var c=e("./components/fx"),r=e("./plots/plots");n.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},n.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":91,"./components/annotations3d":96,"./components/colorbar":106,"./components/colorscale":112,"./components/errorbars":128,"./components/fx":140,"./components/grid":144,"./components/images":149,"./components/legend":157,"./components/modebar":163,"./components/rangeselector":171,"./components/rangeslider":178,"./components/shapes":192,"./components/sliders":197,"./components/updatemenus":203,"./fonts/ploticon":213,"./locale-en":256,"./locale-en-us":255,"./plot_api":260,"./plot_api/plot_schema":264,"./plots/plots":311,"./registry":313,"./snapshot":318,"./traces/scatter":365,"./version":386,"native-promise-only":52}],213:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],214:[function(e,t,n){"use strict";n.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},{}],215:[function(e,t,n){"use strict";var e=e("./mod"),i=e.mod,r=e.modHalf,m=Math.PI,g=2*m;function _(e){return Math.abs(e[1]-e[0])>g-1e-14}function a(e,t){return r(t-e,g)}function o(e,t){if(_(t))return!0;var n=t[0]<t[1]?(r=t[0],t[1]):(r=t[1],t[0]),r=i(r,g);(n=i(n,g))<r&&(n+=g);t=i(e,g),e=t+g;return r<=t&&t<=n||r<=e&&e<=n}function s(e,t,n,r,i,a,o){i=i||0,a=a||0;var s,l,c,u=_([n,r]);function d(e,t){return[e*Math.cos(t)+i,a-e*Math.sin(t)]}var h,n=u?(s=0,l=m,g):n<r?(s=n,r):(s=r,n),e=e<t?(c=e,t):(c=t,e),f=Math.abs(n-s)<=m?0:1;function p(e,t,n){return"A"+[e,e]+" "+[0,f,n]+" "+d(e,t)}return u?h=null===c?"M"+d(e,s)+p(e,l,0)+p(e,n,0)+"Z":"M"+d(c,s)+p(c,l,0)+p(c,n,0)+"ZM"+d(e,s)+p(e,l,1)+p(e,n,1)+"Z":null===c?(h="M"+d(e,s)+p(e,n,0),o&&(h+="L0,0Z")):h="M"+d(c,s)+"L"+d(e,s)+p(e,n,0)+"L"+d(c,n)+p(c,s,1)+"Z",h}t.exports={deg2rad:function(e){return e/180*m},rad2deg:function(e){return e/m*180},angleDelta:a,angleDist:function(e,t){return Math.abs(a(e,t))},isFullCircle:_,isAngleInsideSector:o,isPtInsideSector:function(e,t,n,r){if(!o(t,r))return!1;var i,n=n[0]<n[1]?(i=n[0],n[1]):(i=n[1],n[0]);return i<=e&&e<=n},pathArc:function(e,t,n,r,i){return s(null,e,t,n,r,i,0)},pathSector:function(e,t,n,r,i){return s(null,e,t,n,r,i,1)},pathAnnulus:function(e,t,n,r,i,a){return s(e,t,n,r,i,a,1)}}},{"./mod":237}],216:[function(e,t,n){"use strict";var d=Array.isArray,r=ArrayBuffer,i=DataView;function a(e){return r.isView(e)&&!(e instanceof i)}function o(e){return d(e)||a(e)}function s(e,t,n){if(o(e)){if(o(e[0])){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i].length);return r}return e.length}return 0}n.isTypedArray=a,n.isArrayOrTypedArray=o,n.isArray1D=function(e){return!o(e[0])},n.ensureArray=function(e,t){return(e=!d(e)?[]:e).length=t,e},n.concat=function(){for(var e,t,n,r,i,a,o,s=[],l=!0,c=0,u=0;u<arguments.length;u++)(i=(n=arguments[u]).length)&&(t?s.push(n):(t=n,r=i),d(n)?e=!1:(l=!1,c?e!==n.constructor&&(e=!1):e=n.constructor),c+=i);if(!c)return[];if(!s.length)return t;if(l)return t.concat.apply(t,s);if(e){for((a=new e(c)).set(t),u=0;u<s.length;u++)n=s[u],a.set(n,r),r+=n.length;return a}for(a=new Array(c),o=0;o<t.length;o++)a[o]=t[o];for(u=0;u<s.length;u++){for(n=s[u],o=0;o<n.length;o++)a[r+o]=n[o];r+=o}return a},n.maxRowLength=function(e){return s(e,Math.max,0)},n.minRowLength=function(e){return s(e,Math.min,1/0)}},{}],217:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../constants/numerical").BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(a,"")),r(e)?Number(e):i}},{"../constants/numerical":210,"fast-isnumeric":15}],218:[function(e,t,n){"use strict";t.exports=function(e){e=e._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],219:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],220:[function(e,t,_){"use strict";var i=e("fast-isnumeric"),r=e("tinycolor2"),o=e("../plots/attributes"),a=e("../components/colorscale/scales"),s=e("../components/color"),l=e("../constants/interactions").DESELECTDIM,c=e("./nested_property"),u=e("./regex").counter,d=e("./mod").modHalf,h=e("./array").isArrayOrTypedArray;function f(e,t){var n=_.valObjectMeta[t.valType];if(t.arrayOk&&h(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},i=r,a={set:function(e){i=e}};return n.coerceFunction(e,a,r,t),i!==r}_.valObjectMeta={data_array:{coerceFunction:function(e,t,n){h(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){"string"!=typeof e?!0!==r.strict&&"number"==typeof e?t.set(String(e)):t.set(n):r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return r(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(a.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):i(e)?t.set(d(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){r=r.regex||u(n);"string"==typeof e&&r.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){t=t.dflt;return e===t||"string"==typeof e&&!!u(t).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var i=e.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?t.set(i.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,n,r){function i(e,t,n){var r,i={set:function(e){r=e}};return void 0===n&&(n=t.dflt),_.valObjectMeta[t.valType].coerceFunction(e,i,n,t),r}var a=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var o,s,l,c,u,d,h=r.items,f=[],p=Array.isArray(h),r=p&&a&&Array.isArray(h[0]),m=a&&p&&!r,g=(p&&!m?h:e).length;if(n=Array.isArray(n)?n:[],a)for(o=0;o<g;o++)for(f[o]=[],l=Array.isArray(e[o])?e[o]:[],u=(m?h:p?h[o]:l).length,s=0;s<u;s++)c=m?h[s]:p?h[o][s]:h,void 0!==(d=i(l[s],c,(n[o]||[])[s]))&&(f[o][s]=d);else for(o=0;o<g;o++)void 0!==(d=i(e[o],p?h[o]:h,n[o]))&&(f[o]=d);t.set(f)}else t.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),i=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var a=0;a<e.length;a++)if(i){if(!Array.isArray(e[a])||!t.freeLength&&e[a].length!==n[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!f(e[a][o],r?n[a][o]:n))return!1}else if(!f(e[a],r?n[a]:n))return!1;return!0}}},_.coerce=function(e,t,n,r,i){var a=c(n,r).get(),o=c(e,r),s=c(t,r),n=o.get(),e=t._template;if(void 0===n&&e&&(n=c(e,r).get(),e=0),void 0===i&&(i=a.dflt),a.arrayOk&&h(n))return s.set(n),n;o=_.valObjectMeta[a.valType].coerceFunction;o(n,s,i,a);t=s.get();return e&&t===i&&!f(n,a)&&(o(n=c(e,r).get(),s,i,a),t=s.get()),t},_.coerce2=function(e,t,n,r,i){var a=c(e,r),i=_.coerce(e,t,n,r,i),a=a.get();return null!=a&&i},_.coerceFont=function(e,t,n){var r={};return r.family=e(t+".family",(n=n||{}).family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},_.coercePattern=function(e,t,n,r){var i;e(t+".shape")&&(e(t+".solidity"),e(t+".size"),i="overlay"===e(t+".fillmode"),r||(r=e(t+".bgcolor",i?n:void 0),e(t+".fgcolor",i?s.contrast(r):n)),e(t+".fgopacity",i?.5:1))},_.coerceHoverinfo=function(e,t,n){var r,i=t._module.attributes,a=i.hoverinfo?i:o,i=a.hoverinfo;return 1===n._dataLength&&((r="all"===i.dflt?i.flags.slice():i.dflt.split("+")).splice(r.indexOf("name"),1),r=r.join("+")),_.coerce(e,t,a,"hoverinfo",r)},_.coerceSelectionMarkerOpacity=function(e,t){var n,r,i;!e.marker||void 0!==(n=e.marker.opacity)&&(h(n)||e.selected||e.unselected||(i=l*(r=n)),t("selected.marker.opacity",r),t("unselected.marker.opacity",i))},_.validate=f},{"../components/color":100,"../components/colorscale/scales":115,"../constants/interactions":209,"../plots/attributes":272,"./array":216,"./mod":237,"./nested_property":238,"./regex":246,"fast-isnumeric":15,tinycolor2:65}],221:[function(e,t,h){"use strict";var f,p,n=e("d3-time-format").timeFormat,u=e("fast-isnumeric"),s=e("./loggers"),m=e("./mod").mod,r=e("../constants/numerical"),g=r.BADNUM,_=r.ONEDAY,y=r.ONEHOUR,v=r.ONEMIN,b=r.ONESEC,x=r.EPOCHJD,w=e("../registry"),d=e("d3-time-format").utcFormat,T=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,k=(new Date).getFullYear()-70;function M(e){return e&&w.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function l(e,t){return String(e+Math.pow(10,t)).substr(1)}h.dateTick0=function(e,t){var n,r=(r=!!t,M(n=e)?(r?w.getComponentMethod("calendars","CANONICAL_SUNDAY"):w.getComponentMethod("calendars","CANONICAL_TICK"))[n]:r?"2000-01-02":"2000-01-01");if(t<2)return r;var r=h.dateTime2ms(r,e);return h.ms2DateTime(r+=_*(t-1),0,e)},h.dfltRange=function(e){return M(e)?w.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},h.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},h.dateTime2ms=function(e,t){if(h.isJSDate(e)){var n=e.getTimezoneOffset()*v,r=(e.getUTCMinutes()-e.getMinutes())*v+(e.getUTCSeconds()-e.getSeconds())*b+(e.getUTCMilliseconds()-e.getMilliseconds());return r&&(n=n-(l=3*v)/2+m(r-n+l/2,l)),e=Number(e)-n,f<=e&&e<=p?e:g}if("string"!=typeof e&&"number"!=typeof e)return g;e=String(e);var i=M(t),a=e.charAt(0);!i||"G"!==a&&"g"!==a||(e=e.substr(1),t="");var o=i&&"chinese"===t.substr(0,7),s=e.match(o?A:T);if(!s)return g;var r=s[1],l=s[3]||"1",n=Number(s[5]||1),a=Number(s[7]||0),e=Number(s[9]||0),s=Number(s[11]||0);if(i){if(2===r.length)return g;r=Number(r);try{var c,u,d=w.getComponentMethod("calendars","getCal")(t);u=o?(c="i"===l.charAt(l.length-1),l=parseInt(l,10),d.newDate(r,d.toMonthIndex(r,l,c),n)):d.newDate(r,Number(l),n)}catch(e){return g}return u?(u.toJD()-x)*_+a*y+e*v+s*b:g}r=2===r.length?(Number(r)+2e3-k)%100+k:Number(r),--l;e=new Date(Date.UTC(2e3,l,n,a,e));return e.setUTCFullYear(r),e.getUTCMonth()!==l||e.getUTCDate()!==n?g:e.getTime()+s*b},f=h.MIN_MS=h.dateTime2ms("-9999"),p=h.MAX_MS=h.dateTime2ms("9999-12-31 23:59:59.9999"),h.isDateTime=function(e,t){return h.dateTime2ms(e,t)!==g};var S=90*_,E=3*y,C=5*v;function L(e,t,n,r,i){if((t||n||r||i)&&(e+=" "+l(t,2)+":"+l(n,2),(r||i)&&(e+=":"+l(r,2),i))){for(var a=4;i%10==0;)--a,i/=10;e+="."+l(i,a)}return e}h.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(f<=e&&e<=p))return g;t=t||0;var r,i,a,o=Math.floor(10*m(e+.05,1)),s=Math.round(e-o/10);if(M(n)){var l=Math.floor(s/_)+x,c=Math.floor(m(e,_));try{r=w.getComponentMethod("calendars","getCal")(n).fromJD(l).formatDate("yyyy-mm-dd")}catch(e){r=d("G%Y-%m-%d")(new Date(s))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;i=t<S?Math.floor(c/y):0,a=t<S?Math.floor(c%y/v):0,l=t<E?Math.floor(c%v/b):0,c=t<C?c%b*10+o:0}else s=new Date(s),r=d("%Y-%m-%d")(s),i=t<S?s.getUTCHours():0,a=t<S?s.getUTCMinutes():0,l=t<E?s.getUTCSeconds():0,c=t<C?10*s.getUTCMilliseconds()+o:0;return L(r,i,a,l,c)},h.ms2DateTimeLocal=function(e){if(!(f+_<=e&&e<=p-_))return g;var t=Math.floor(10*m(e+.05,1)),e=new Date(Math.round(e-t/10));return L(n("%Y-%m-%d")(e),e.getHours(),e.getMinutes(),e.getSeconds(),10*e.getUTCMilliseconds()+t)},h.cleanDate=function(e,t,n){if(e===g)return t;if(h.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(M(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=h.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!h.isDateTime(e,n))return s.error("unrecognized date",e),t;return e};var a=/%\d?f/g,o=/%h/g,c={1:"1",2:"1",3:"2",4:"2"};function D(e,t,n,r){e=e.replace(a,function(e){e=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(e).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(t+.05));if(e=e.replace(o,function(){return c[n("%q")(i)]}),M(r))try{e=w.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(i)}var O=[59,59.9,59.99,59.999,59.9999];h.formatDate=function(e,t,n,r,i,a){if(i=M(i)&&i,!t)if("y"===n)t=a.year;else if("m"===n)t=a.month;else{if("d"!==n)return s=n,n=m((o=e)+.05,_),n=l(Math.floor(n/y),2)+":"+l(m(Math.floor(n/v),60),2),"M"!==s&&(u(s)||(s=0),o=(100+Math.min(m(o/b,60),O[s])).toFixed(s).substr(1),n+=":"+(o=0<s?o.replace(/0+$/,"").replace(/[\.]$/,""):o)),n+"\n"+D(a.dayMonthYear,e,r,i);t=a.dayMonth+"\n"+a.year}var o,s;return D(t,e,r,i)};var P=3*_;h.incrementMonth=function(t,e,n){n=M(n)&&n;var r=m(t,_);if(t=Math.round(t-r),n)try{var i=Math.round(t/_)+x,a=w.getComponentMethod("calendars","getCal")(n),o=a.fromJD(i);return e%12?a.add(o,e,"m"):a.add(o,e/12,"y"),(o.toJD()-x)*_+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}t=new Date(t+P);return t.setUTCMonth(t.getUTCMonth()+e)+r-P},h.findExactDates=function(e,t){for(var n,r,i=0,a=0,o=0,s=0,l=M(t)&&w.getComponentMethod("calendars","getCal")(t),c=0;c<e.length;c++)if(r=e[c],u(r)){if(!(r%_))if(l)try{1===(n=l.fromJD(r/_+x)).day()?1===n.month()?i++:a++:o++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:a++:o++}else s++;t=e.length-s;return{exactYears:i/t,exactMonths:(a+=i)/t,exactDays:(o+=a)/t}}},{"../constants/numerical":210,"../registry":313,"./loggers":234,"./mod":237,"d3-time-format":13,"fast-isnumeric":15}],222:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("./loggers"),a=e("./matrix"),o=e("gl-mat4");function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r="plotly.js-style-"+e,e=document.getElementById(r);e||((e=document.createElement("style")).setAttribute("id",r),e.appendChild(document.createTextNode("")),document.head.appendChild(e));e=e.sheet;e.insertRule?e.insertRule(t+"{"+n+"}",0):e.addRule?e.addRule(t,n,0):i.warn("addStyleRule failed")}function c(e){e=window.getComputedStyle(e,null),e=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===e?null:e.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function u(e){for(var t,n=[];(t=e)&&(t instanceof Element||t instanceof HTMLElement);)n.push(e),e=e.parentNode;return n}t.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){return(e=r.select(e)).node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){(e=document.getElementById("plotly.js-style-"+e))&&s(e)},getFullTransformMatrix:function(e){var e=u(e),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(e){e=c(e);e&&(e=a.convertCssMatrix(e),t=o.multiply(t,t,e))}),t},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},{"./loggers":234,"./matrix":236,"@plotly/d3":11,"gl-mat4":31}],223:[function(e,t,n){"use strict";var a=e("events").EventEmitter,e={init:function(n){if(n._ev instanceof a)return n;var r=new a,i=new a;return n._ev=r,n._internalEv=i,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=i.on.bind(i),n._internalOnce=i.once.bind(i),n._removeInternalListener=i.removeListener.bind(i),n._removeAllInternalListeners=i.removeAllListeners.bind(i),n.emit=function(e,t){"undefined"!=typeof jQuery&&jQuery(n).trigger(e,t),r.emit(e,t),i.emit(e,t)},n},triggerHandler:function(e,t,n){var r;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var i=e._ev;if(!i)return r;var a,o=i._events[t];if(!o)return r;function s(e){return e.listener?(i.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(i,[n]))):e.apply(i,[n])}for(o=Array.isArray(o)?o:[o],a=0;a<o.length-1;a++)s(o[a]);return e=s(o[a]),void 0!==r?r:e},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=e},{events:12}],224:[function(e,t,n){"use strict";var h=e("./is_plain_object.js"),f=Array.isArray;function p(e,t,n,r){var i,a,o,s,l,c=e[0],u=e.length;if(2===u&&f(c)&&f(e[1])&&0===c.length){if(function(e,t){for(var n,r=0;r<e.length;r++){if(null!==(n=e[r])&&"object"==typeof n)return!1;void 0!==n&&(t[r]=n)}return!0}(e[1],c))return c;c.splice(0,c.length)}for(var d=1;d<u;d++)for(a in i=e[d])l=c[a],o=i[a],r&&f(o)?c[a]=o:t&&o&&(h(o)||(s=f(o)))?(l=s?(s=!1,l&&f(l)?l:[]):l&&h(l)?l:{},c[a]=p([l,o],t,n,r)):void 0===o&&!n||(c[a]=o);return c}n.extendFlat=function(){return p(arguments,!1,!1,!1)},n.extendDeep=function(){return p(arguments,!0,!1,!1)},n.extendDeepAll=function(){return p(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return p(arguments,!0,!1,!0)}},{"./is_plain_object.js":231}],225:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var a=e[i];1!==t[a]&&(t[a]=1,n[r++]=a)}return n}},{}],226:[function(e,t,n){"use strict";function o(e){return!0===e.visible}function s(e){e=e[0].trace;return!0===e.visible&&0!==e._length}t.exports=function(e){for(var t,n=(t=e,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?s:o),r=[],i=0;i<e.length;i++){var a=e[i];n(a)&&r.push(a)}return r}},{}],227:[function(e,t,n){"use strict";var o,s,l,c=e("./mod").mod;function p(e,t,n,r,i,a,o,s){var l=n-e,n=i-e,o=o-i,i=r-t,r=a-t,s=s-a,a=l*s-o*i;if(0==a)return null;o=(n*s-o*r)/a,a=(n*i-l*r)/a;return a<0||1<a||o<0||1<o?null:{x:e+l*o,y:t+i*o}}function m(e,t,n,r,i){var a=r*e+i*t;if(a<0)return r*r+i*i;if(n<a){var o=r-e,a=i-t;return o*o+a*a}e=r*t-i*e;return e*e/n}n.segmentsIntersect=p,n.segmentDistance=function(e,t,n,r,i,a,o,s){if(p(e,t,n,r,i,a,o,s))return 0;var l=n-e,c=r-t,u=o-i,d=s-a,h=l*l+c*c,f=u*u+d*d,a=Math.min(m(l,c,h,i-e,a-t),m(l,c,h,o-e,s-t),m(u,d,f,e-i,t-a),m(u,d,f,n-i,r-a));return Math.sqrt(a)},n.getTextLocation=function(e,t,n,r){if(e===s&&r===l||(o={},s=e,l=r),o[n])return o[n];var i=e.getPointAtLength(c(n-r/2,t)),a=e.getPointAtLength(c(n+r/2,t)),r=Math.atan((a.y-i.y)/(a.x-i.x)),t=e.getPointAtLength(c(n,t)),r={x:(4*t.x+i.x+a.x)/6,y:(4*t.y+i.y+a.y)/6,theta:r};return o[n]=r},n.clearLocationCache=function(){s=null},n.getVisibleSegment=function(n,e,t){var r,i,a=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=n.getTotalLength(),d=u;function h(e){var t=n.getPointAtLength(e);0===e?r=t:e===u&&(i=t);e=t.x<a?a-t.x:t.x>o?t.x-o:0,t=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(e*e+t*t)}for(var f=h(c);f;){if(d<(c+=f+t))return;f=h(c)}for(f=h(d);f;){if((d-=f+t)<c)return;f=h(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var i,a,o,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,h=0,f=s;d<c;){if(o=(a=e.getPointAtLength(i=(h+f)/2))[n]-t,Math.abs(o)<l)return a;0<u*o?f=i:h=i,d++}return a}},{"./mod":237}],228:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],229:[function(e,t,n){"use strict";t.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),r=1<n?(n*e+n*t)/n:e+t,n=String(r).length;return 16<n&&(t=String(t).length,String(e).length+t<=n&&(-1===(n=parseFloat(r).toPrecision(12)).indexOf("e+")&&(r=+n))),r}},{}],230:[function(e,t,n){"use strict";var _=e("@plotly/d3"),y=e("d3-time-format").utcFormat,r=e("fast-isnumeric"),i=e("../constants/numerical"),a=i.FP_SAFE,o=-a,s=i.BADNUM,v=t.exports={};v.nestedProperty=e("./nested_property"),v.keyedContainer=e("./keyed_container"),v.relativeAttr=e("./relative_attr"),v.isPlainObject=e("./is_plain_object"),v.toLogRange=e("./to_log_range"),v.relinkPrivateKeys=e("./relink_private");t=e("./array");v.isTypedArray=t.isTypedArray,v.isArrayOrTypedArray=t.isArrayOrTypedArray,v.isArray1D=t.isArray1D,v.ensureArray=t.ensureArray,v.concat=t.concat,v.maxRowLength=t.maxRowLength,v.minRowLength=t.minRowLength;t=e("./mod");v.mod=t.mod,v.modHalf=t.modHalf;t=e("./coerce");v.valObjectMeta=t.valObjectMeta,v.coerce=t.coerce,v.coerce2=t.coerce2,v.coerceFont=t.coerceFont,v.coercePattern=t.coercePattern,v.coerceHoverinfo=t.coerceHoverinfo,v.coerceSelectionMarkerOpacity=t.coerceSelectionMarkerOpacity,v.validate=t.validate;t=e("./dates");v.dateTime2ms=t.dateTime2ms,v.isDateTime=t.isDateTime,v.ms2DateTime=t.ms2DateTime,v.ms2DateTimeLocal=t.ms2DateTimeLocal,v.cleanDate=t.cleanDate,v.isJSDate=t.isJSDate,v.formatDate=t.formatDate,v.incrementMonth=t.incrementMonth,v.dateTick0=t.dateTick0,v.dfltRange=t.dfltRange,v.findExactDates=t.findExactDates,v.MIN_MS=t.MIN_MS,v.MAX_MS=t.MAX_MS;t=e("./search");v.findBin=t.findBin,v.sorterAsc=t.sorterAsc,v.sorterDes=t.sorterDes,v.distinctVals=t.distinctVals,v.roundUp=t.roundUp,v.sort=t.sort,v.findIndexOfMin=t.findIndexOfMin;t=e("./stats");v.aggNums=t.aggNums,v.len=t.len,v.mean=t.mean,v.median=t.median,v.midRange=t.midRange,v.variance=t.variance,v.stdev=t.stdev,v.interp=t.interp;t=e("./matrix");v.init2dArray=t.init2dArray,v.transposeRagged=t.transposeRagged,v.dot=t.dot,v.translationMatrix=t.translationMatrix,v.rotationMatrix=t.rotationMatrix,v.rotationXYMatrix=t.rotationXYMatrix,v.apply3DTransform=t.apply3DTransform,v.apply2DTransform=t.apply2DTransform,v.apply2DTransform2=t.apply2DTransform2,v.convertCssMatrix=t.convertCssMatrix,v.inverseTransformMatrix=t.inverseTransformMatrix;t=e("./angles");v.deg2rad=t.deg2rad,v.rad2deg=t.rad2deg,v.angleDelta=t.angleDelta,v.angleDist=t.angleDist,v.isFullCircle=t.isFullCircle,v.isAngleInsideSector=t.isAngleInsideSector,v.isPtInsideSector=t.isPtInsideSector,v.pathArc=t.pathArc,v.pathSector=t.pathSector,v.pathAnnulus=t.pathAnnulus;t=e("./anchor_utils");v.isLeftAnchor=t.isLeftAnchor,v.isCenterAnchor=t.isCenterAnchor,v.isRightAnchor=t.isRightAnchor,v.isTopAnchor=t.isTopAnchor,v.isMiddleAnchor=t.isMiddleAnchor,v.isBottomAnchor=t.isBottomAnchor;t=e("./geometry2d");v.segmentsIntersect=t.segmentsIntersect,v.segmentDistance=t.segmentDistance,v.getTextLocation=t.getTextLocation,v.clearLocationCache=t.clearLocationCache,v.getVisibleSegment=t.getVisibleSegment,v.findPointOnPath=t.findPointOnPath;t=e("./extend");v.extendFlat=t.extendFlat,v.extendDeep=t.extendDeep,v.extendDeepAll=t.extendDeepAll,v.extendDeepNoArrays=t.extendDeepNoArrays;t=e("./loggers");v.log=t.log,v.warn=t.warn,v.error=t.error;t=e("./regex");v.counterRegex=t.counter;t=e("./throttle");v.throttle=t.throttle,v.throttleDone=t.done,v.clearThrottle=t.clear;t=e("./dom");function c(e){var t,n={};for(t in e)for(var r=e[t],i=0;i<r.length;i++)n[r[i]]=+t;return n}v.getGraphDiv=t.getGraphDiv,v.isPlotDiv=t.isPlotDiv,v.removeElement=t.removeElement,v.addStyleRule=t.addStyleRule,v.addRelatedStyleRule=t.addRelatedStyleRule,v.deleteRelatedStyleRule=t.deleteRelatedStyleRule,v.getFullTransformMatrix=t.getFullTransformMatrix,v.getElementTransformMatrix=t.getElementTransformMatrix,v.getElementAndAncestors=t.getElementAndAncestors,v.equalDomRects=t.equalDomRects,v.clearResponsive=e("./clear_responsive"),v.preserveDrawingBuffer=e("./preserve_drawing_buffer"),v.makeTraceGroups=e("./make_trace_groups"),v._=e("./localize"),v.notifier=e("./notifier"),v.filterUnique=e("./filter_unique"),v.filterVisible=e("./filter_visible"),v.pushUnique=e("./push_unique"),v.increment=e("./increment"),v.cleanNumber=e("./clean_number"),v.ensureNumber=function(e){return r(e)?(e=Number(e),a<e||e<o?s:e):s},v.isIndex=function(e,t){return!(void 0!==t&&t<=e)&&(r(e)&&0<=e&&e%1==0)},v.noop=e("./noop"),v.identity=e("./identity"),v.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},v.swapAttrs=function(e,t,n,r){n=n||"x",r=r||"y";for(var i=0;i<t.length;i++){var a=t[i],o=v.nestedProperty(e,a.replace("?",n)),s=v.nestedProperty(e,a.replace("?",r)),a=o.get();o.set(s.get()),s.set(a)}},v.raiseToTop=function(e){e.parentNode.appendChild(e)},v.cancelTransition=function(e){return e.transition().duration(0)},v.constrain=function(e,t,n){return n<t?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},v.bBoxIntersect=function(e,t,n){return e.left<=t.right+(n=n||0)&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},v.simpleMap=function(e,t,n,r,i){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],n,r,i);return o},v.randstr=function e(t,n,r,i){if(r=r||16,(n=void 0===n?24:n)<=0)return"0";for(var a=Math.log(Math.pow(2,n))/Math.log(r),o="",s=2;a===1/0;s*=2)a=Math.log(Math.pow(2,n/s))/Math.log(r)*s;var l=a-Math.floor(a);for(s=0;s<Math.floor(a);s++)o=Math.floor(Math.random()*r).toString(r)+o;l&&(c=Math.pow(r,l),o=Math.floor(Math.random()*c).toString(r)+o);var c=parseInt(o,r);return t&&t[o]||c!==1/0&&c>=Math.pow(2,n)?10<i?(v.warn("randstr failed uniqueness"),o):e(t,n,r,(i||0)+1):o},v.OptionControl=function(t,n){t=t||{};var r={optionList:[],_newoption:function(e){e[n]=t,r[e.name]=e,r.optionList.push(e)}};return r["_"+(n=n||"opt")]=t,r},v.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;for(var n,r,i,a=e.length,o=2*a,s=2*t-1,l=new Array(s),c=new Array(a),u=0;u<s;u++)l[u]=(1-Math.cos(Math.PI*(u+1)/t))/(2*t);for(u=0;u<a;u++){for(n=i=0;n<s;n++)(r=u+n+1-t)<-a?r-=o*Math.round(r/o):o<=r&&(r-=o*Math.floor(r/o)),r<0?r=-1-r:a<=r&&(r=o-1-r),i+=e[r]*l[n];c[u]=i}return c},v.syncOrAsync=function(e,t,n){var r;function i(){return v.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(i).then(void 0,v.promiseError);return n&&n(t)},v.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},v.noneOrAll=function(e,t,n){if(e){for(var r=!1,i=!0,a=0;a<n.length;a++)null!=e[n[a]]?r=!0:i=!1;if(r&&!i)for(a=0;a<n.length;a++)e[n[a]]=t[n[a]]}},v.mergeArray=function(e,t,n,r){var i="function"==typeof r;if(v.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][n]=i?r(s):s}},v.mergeArrayCastPositive=function(e,t,n){return v.mergeArray(e,t,n,function(e){e=+e;return isFinite(e)&&0<e?e:0})},v.fillArray=function(e,t,n,r){if(r=r||v.identity,v.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=r(e[i])},v.castOption=function(e,t,n,r){r=r||v.identity;n=v.nestedProperty(e,n).get();return v.isArrayOrTypedArray(n)?Array.isArray(t)&&v.isArrayOrTypedArray(n[t[0]])?r(n[t[0]][t[1]]):r(n[t]):n},v.extractOption=function(e,t,n,r){if(n in e)return e[n];r=v.nestedProperty(t,r).get();return Array.isArray(r)?void 0:r},v.tagSelected=function(e,t,n){var r,i=t.selectedpoints,t=t._indexToPoints;t&&(r=c(t));for(var a,o=0;o<i.length;o++){var s,l=i[o];(v.isIndex(l)||v.isArrayOrTypedArray(l)&&v.isIndex(l[0])&&v.isIndex(l[1]))&&(l=r?r[l]:l,s=n?n[l]:l,void 0!==(a=s)&&a<e.length&&(e[s].selected=1))}},v.selIndices2selPoints=function(e){var t=e.selectedpoints,e=e._indexToPoints;if(e){for(var n=c(e),r=[],i=0;i<t.length;i++){var a=t[i];v.isIndex(a)&&(a=n[a],v.isIndex(a)&&r.push(a))}return r}return t},v.getTargetArray=function(e,t){t=t.target;if("string"==typeof t&&t){e=v.nestedProperty(e,t).get();return!!Array.isArray(e)&&e}return!!Array.isArray(t)&&t},v.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});for(var r,i,a=Object.keys(e),o=0;o<a.length;o++)i=e[r=a[o]],"_"!==r.charAt(0)&&"function"!=typeof i&&("module"===r?n[r]=i:Array.isArray(i)?n[r]="colorscale"===r?i.slice():i.slice(0,3):v.isTypedArray(i)?n[r]=i.subarray(0,3):n[r]=i&&"object"==typeof i?v.minExtend(e[r],t[r]):i);for(a=Object.keys(t),o=0;o<a.length;o++)"object"==typeof(i=t[r=a[o]])&&r in n&&"object"==typeof n[r]||(n[r]=i);return n},v.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},v.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},v.isIE=function(){return void 0!==window.navigator.msSaveBlob};var l=/Version\/[\d\.]+.*Safari/;v.isSafari=function(){return l.test(window.navigator.userAgent)};var u=/iPad|iPhone|iPod/;v.isIOS=function(){return u.test(window.navigator.userAgent)};var d=/Firefox\/(\d+)\.\d+/;v.getFirefoxVersion=function(){var e=d.exec(window.navigator.userAgent);if(e&&2===e.length){e=parseInt(e[1]);if(!isNaN(e))return e}return null},v.isD3Selection=function(e){return e instanceof _.selection},v.ensureSingle=function(e,t,n,r){var i=e.select(t+(n?"."+n:""));if(i.size())return i;t=e.append(t);return n&&t.classed(n,!0),r&&t.call(r),t},v.ensureSingleById=function(e,t,n,r){var i=e.select(t+"#"+n);if(i.size())return i;n=e.append(t).attr("id",n);return r&&n.call(r),n},v.objectFromPath=function(e,t){for(var n=e.split("."),e=s={},r=0;r<n.length;r++)var i,a=n[r],o=n[r].match(/(.*)\[([0-9]+)\]/),s=o?(a=o[1],i=o[2],s=s[a]=[],r===n.length-1?s[i]=t:s[i]={},s[i]):(r===n.length-1?s[a]=t:s[a]={},s[a]);return e};var h=/^([^\[\.]+)\.(.+)?/,f=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;v.expandObjectPaths=function(e){var t,n,r,i,a,o;if("object"==typeof e&&!Array.isArray(e))for(t in e)e.hasOwnProperty(t)&&((a=t.match(h))?(r=e[t],n=a[1],delete e[t],e[n]=v.extendDeepNoArrays(e[n]||{},v.objectFromPath(t,v.expandObjectPaths(r))[n])):(a=t.match(f))?(r=e[t],n=a[1],i=parseInt(a[2]),delete e[t],e[n]=e[n]||[],"."===a[3]?(o=a[4],a=e[n][i]=e[n][i]||{},v.extendDeepNoArrays(a,v.objectFromPath(o,v.expandObjectPaths(r)))):e[n][i]=v.expandObjectPaths(r)):e[t]=v.expandObjectPaths(e[t]));return e},v.numSeparate=function(e,t,n){if(n=n||!1,"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),a=t.charAt(1),e=e.split("."),o=e[0],i=1<e.length?i+e[1]:"";if(a&&(1<e.length||4<o.length||n))for(;r.test(o);)o=o.replace(r,"$1"+a+"$2");return o+i},v.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var b=/^\w*$/;v.templateString=function(e,n){var r={};return e.replace(v.TEMPLATE_STRING_REGEX,function(e,t){t=b.test(t)?n[t]:(r[t]=r[t]||v.nestedProperty(n,t).get,r[t]());return v.isValidTextValue(t)?t:""})};var p={max:10,count:0,name:"hovertemplate"};v.hovertemplateString=function(){return g.apply(p,arguments)};var m={max:10,count:0,name:"texttemplate"};v.texttemplateString=function(){return g.apply(m,arguments)};var x=/^[:|\|]/;function g(e,h,f){var p=this,m=arguments;h=h||{};var g={};return e.replace(v.TEMPLATE_STRING_REGEX,function(e,t,n){var r,i,a="_xother"===t||"_yother"===t,o="_xother_"===t||"_yother_"===t,s="xother_"===t||"yother_"===t,l="xother"===t||"yother"===t||a||s||o,c=t;if((a||o)&&(c=c.substring(1)),(s||o)&&(c=c.substring(0,c.length-1)),l){if(void 0===(r=h[c]))return""}else for(var u,d=3;d<m.length;d++)if(u=m[d]){if(u.hasOwnProperty(c)){r=u[c];break}if(b.test(c)||(r=v.nestedProperty(u,c).get(),(r=g[c]||v.nestedProperty(u,c).get())&&(g[c]=r)),void 0!==r)break}return void 0===r&&p?(p.count<p.max&&(v.warn("Variable '"+c+"' in "+p.name+" could not be found!"),r=e),p.count===p.max&&v.warn("Too many "+p.name+" warnings - additional warnings will be suppressed"),p.count++,e):(n?(":"===n[0]&&(r=(i=f?f.numberFormat:_.format)(n.replace(x,""))(r)),"|"===n[0]&&(i=f?f.timeFormat:y,e=v.dateTime2ms(r),r=v.formatDate(e,n.replace(x,""),!1,i))):h.hasOwnProperty(i=c+"Label")&&(r=h[i]),l&&(r="("+r+")",(a||o)&&(r=" "+r),(s||o)&&(r+=" ")),r)})}v.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,i=0,a=0;a<n;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=48<=o&&o<=57,c=48<=s&&s<=57;if(l&&(r=10*r+o-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var w=2e9;v.seedPseudoRandom=function(){w=2e9},v.pseudoRandom=function(){var e=w;return w=(69069*w+1)%4294967296,Math.abs(w-e)<429496729?v.pseudoRandom():w/4294967296},v.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},i=v.extractOption(e,t,"htx","hovertext");if(v.isValidTextValue(i))return r(i);t=v.extractOption(e,t,"tx","text");return v.isValidTextValue(t)?r(t):void 0},v.isValidTextValue=function(e){return e||0===e},v.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},v.isHidden=function(e){e=window.getComputedStyle(e).display;return!e||"none"===e},v.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},v.strRotate=function(e){return e?"rotate("+e+")":""},v.strScale=function(e){return 1!==e?"scale("+e+")":""},v.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,i=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,e=e.scale;return e?1<e&&(e=1):e=0,v.strTranslate(i-e*(n+o),a-e*(r+s))+v.strScale(e)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},v.ensureUniformFontSize=function(e,t){var n=v.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},v.join2=function(e,t,n){var r=e.length;return 1<r?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},v.bigFont=function(e){return Math.round(1.2*e)};var e=v.getFirefoxVersion(),T=null!==e&&e<86;v.getPositionFromD3Event=function(){return T?[_.event.layerX,_.event.layerY]:[_.event.offsetX,_.event.offsetY]}},{"../constants/numerical":210,"./anchor_utils":214,"./angles":215,"./array":216,"./clean_number":217,"./clear_responsive":219,"./coerce":220,"./dates":221,"./dom":222,"./extend":224,"./filter_unique":225,"./filter_visible":226,"./geometry2d":227,"./identity":228,"./increment":229,"./is_plain_object":231,"./keyed_container":232,"./localize":233,"./loggers":234,"./make_trace_groups":235,"./matrix":236,"./mod":237,"./nested_property":238,"./noop":239,"./notifier":240,"./preserve_drawing_buffer":243,"./push_unique":244,"./regex":246,"./relative_attr":247,"./relink_private":248,"./search":249,"./stats":251,"./throttle":253,"./to_log_range":254,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],231:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},{}],232:[function(e,t,n){"use strict";var p=e("./nested_property"),i=/^\w*$/;t.exports=function(e,a,o,s){var r,l;o=o||"name",s=s||"value";var c={},u=a&&a.length?(l=p(e,a)).get():e;a=a||"";var d={};if(u)for(r=0;r<u.length;r++)d[u[r][o]]=r;var h=i.test(s),f={set:function(e,t){var n=null===t?4:0;if(!u){if(!l||4===n)return;u=[],l.set(u)}var r=d[e];if(void 0===r){if(4===n)return;n|=3,r=u.length,d[e]=r}else t!==(h?u[r][s]:p(u[r],s).get())&&(n|=2);var i=u[r]=u[r]||{};return i[o]=e,h?i[s]=t:p(i,s).set(t),null!==t&&(n&=-5),c[r]=c[r]|n,f},get:function(e){if(u){e=d[e];return void 0!==e?h?u[e][s]:p(u[e],s).get():void 0}},rename:function(e,t){var n=d[e];return void 0===n||(c[n]=1|c[n],d[t]=n,delete d[e],u[n][o]=t),f},remove:function(e){var t=d[e];if(void 0===t)return f;var n=u[t];if(2<Object.keys(n).length)return c[t]=2|c[t],f.set(e,null);if(h){for(r=t;r<u.length;r++)c[r]=3|c[r];for(r=t;r<u.length;r++)d[u[r][o]]--;u.splice(t,1),delete d[e]}else p(n,s).set(null),c[t]=6|c[t];return f},constructUpdate:function(){for(var e,t,n={},r=Object.keys(c),i=0;i<r.length;i++)t=r[i],e=a+"["+t+"]",u[t]?(1&c[t]&&(n[e+"."+o]=u[t][o]),2&c[t]&&(n[e+"."+s]=h?4&c[t]?null:u[t][s]:4&c[t]?null:p(u[t],s).get())):n[e]=null;return n}};return f}},{"./nested_property":238}],233:[function(e,t,n){"use strict";var l=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var i=e._context.locales,a=0;a<2;a++){var o=(i[n]||{}).dictionary;if(o){o=o[t];if(o)return o}i=l.localeRegistry}var s=n.split("-")[0];if(s===n)break;n=s}return t}},{"../registry":313}],234:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config").dfltConfig,i=e("./notifier"),t=t.exports={};t.log=function(){if(1<r.logging){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(1<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"long")}},t.warn=function(){if(0<r.logging){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}},t.error=function(){if(0<r.logging){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":263,"./notifier":240}],235:[function(e,t,n){"use strict";var i=e("@plotly/d3");t.exports=function(e,t,n){t=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});t.exit().remove(),t.enter().append("g").attr("class",n),t.order();var r=e.classed("rangeplot")?"nodeRangePlot3":"node3";return t.each(function(e){e[0][r]=i.select(this)}),t}},{"@plotly/d3":11}],236:[function(e,t,o){"use strict";var n=e("gl-mat4");o.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},o.transposeRagged=function(e){for(var t,n=0,r=e.length,i=0;i<r;i++)n=Math.max(n,e[i].length);var a=new Array(n);for(i=0;i<n;i++)for(a[i]=new Array(r),t=0;t<r;t++)a[i][t]=e[t][i];return a},o.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n=e.length;if(e[0].length)for(i=new Array(n),a=0;a<n;a++)i[a]=o.dot(e[a],t);else if(t[0].length)for(var r=o.transposeRagged(t),i=new Array(r.length),a=0;a<r.length;a++)i[a]=o.dot(e,r[a]);else for(a=i=0;a<n;a++)i+=e[a]*t[a];return i},o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},o.rotationMatrix=function(e){e=e*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},o.rotationXYMatrix=function(e,t,n){return o.dot(o.dot(o.translationMatrix(t,n),o.rotationMatrix(e)),o.translationMatrix(-t,-n))},o.apply3DTransform=function(t){return function(){var e=arguments,e=1===arguments.length?e[0]:[e[0],e[1],e[2]||0];return o.dot(t,[e[0],e[1],e[2],1]).slice(0,3)}},o.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);e=1===arguments.length?e[0]:[e[0],e[1]];return o.dot(t,[e[0],e[1],1]).slice(0,2)}},o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}},o.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(e){var t=[];return n.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":31}],237:[function(e,t,n){"use strict";t.exports={mod:function(e,t){return(e%=t)<0?e+t:e},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],238:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("./array").isArrayOrTypedArray;t.exports=function(e,t){if(u(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,i,a=0,o=t.split(".");a<o.length;){if(n=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[a]=n[1];else{if(0!==a)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),i=0;i<r.length;i++)a++,o.splice(a,0,Number(r[i]))}a++}return"object"!=typeof e?{set:function(){throw"bad container"},get:function(){},astr:t,parts:o,obj:e}:{set:f(e,o,t),get:function o(s,l){return function(){var e,t,n,r,i,a=s;for(r=0;r<l.length-1;r++){if(-1===(e=l[r])){for(t=!0,n=[],i=0;i<a.length;i++)n[i]=o(a[i],l.slice(r+1))(),n[i]!==n[0]&&(t=!1);return t?n[0]:n}if("number"==typeof e&&!d(a))return;if("object"!=typeof(a=a[e])||null===a)return}if("object"==typeof a&&null!==a&&null!==(n=a[l[r]]))return n}}(e,o),astr:t,parts:o,obj:e}};var r=/(^|\.)args\[/;function h(e,t){return void 0===e||null===e&&!t.match(r)}function f(s,l,c){return function(e){for(var t,n=s,r="",i=[[s,r]],a=h(e,c),o=0;o<l.length-1;o++){if("number"==typeof(t=l[o])&&!d(n))throw"array index but container is not an array";if(-1===t){if(a=!function(e,t,n,r){var i,a=d(n),o=!0,s=n,l=r.replace("-1",0),c=!a&&h(n,l),u=t[0];for(i=0;i<e.length;i++)l=r.replace("-1",i),a&&(s=n[i%n.length],c=h(s,l)),c&&(o=!1),p(e,i,u,c)&&f(e[i],t,r.replace("-1",i))(s);return o}(n,l.slice(o+1),e,c))break;return}if(!p(n,t,l[o+1],a))break;if("object"!=typeof(n=n[t])||null===n)throw"container is not an object";r=function(e,t){var n=t;u(t)?n="["+t+"]":e&&(n="."+t);return e+n}(r,t),i.push([n,r])}if(a){if(o===l.length-1&&(delete n[l[o]],Array.isArray(n)&&+l[o]==n.length-1))for(;n.length&&void 0===n[n.length-1];)n.pop()}else n[l[o]]=e}}function p(e,t,n,r){if(void 0===e[t]){if(r)return;e[t]="number"==typeof n?[]:{}}return 1}},{"./array":216,"fast-isnumeric":15}],239:[function(e,t,n){"use strict";t.exports=function(){}},{}],240:[function(e,t,n){"use strict";var l=e("@plotly/d3"),r=e("fast-isnumeric"),i=[];t.exports=function(e,a){var o;function s(e){e.duration(700).style("opacity",0).each("end",function(e){e=i.indexOf(e);-1!==e&&i.splice(e,1),l.select(this).remove()})}-1===i.indexOf(e)&&(i.push(e),o=1e3,r(a)?o=a:"long"===a&&(o=3e3),(e=l.select("body").selectAll(".plotly-notifier").data([0])).enter().append("div").classed("plotly-notifier",!0),e.selectAll(".notifier-note").data(i).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(s)});for(var n=t.append("p"),r=e.split(/<br\s*\/?>/g),i=0;i<r.length;i++)i&&n.append("br"),n.append("span").text(r[i]);"stick"===a?t.transition().duration(350).style("opacity",1):t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}))}},{"@plotly/d3":11,"fast-isnumeric":15}],241:[function(e,t,n){"use strict";var o=e("./setcursor"),s="data-savedcursor";t.exports=function(e,t){var n=e.attr(s);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),i=0;i<r.length;i++){var a=r[i];0===a.indexOf("cursor-")&&e.attr(s,a.substr(7)).classed(a,!1)}e.attr(s)||e.attr(s,"!!")}o(e,t)}else n&&(e.attr(s,null),"!!"===n?o(e):o(e,n))}},{"./setcursor":250}],242:[function(e,t,n){"use strict";var h=e("./matrix").dot,_=e("../constants/numerical").BADNUM,c=t.exports={};c.tester=function(e){var h=e.slice(),f=h[0][0],p=f,m=h[0][1],g=m;for(h.push(h[0]),r=1;r<h.length;r++)f=Math.min(f,h[r][0]),p=Math.max(p,h[r][0]),m=Math.min(m,h[r][1]),g=Math.max(g,h[r][1]);var i,e=!1;5===h.length&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(e=!0,i=function(e){return e[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(e=!0,i=function(e){return e[1]===h[0][1]}));for(var t=!0,n=h[0],r=1;r<h.length;r++)if(n[0]!==h[r][0]||n[1]!==h[r][1]){t=!1;break}return{xmin:f,xmax:p,ymin:m,ymax:g,pts:h,contains:e?function(e,t){var n=e[0],r=e[1];return!(n===_||n<f||p<n||r===_||r<m||g<r)&&(!t||!i(e))}:function(e,t){var n=e[0],r=e[1];if(n===_||n<f||p<n||r===_||r<m||g<r)return!1;for(var i,a,o,s=h.length,l=h[0][0],c=h[0][1],u=0,d=1;d<s;d++)if(o=l,i=c,l=h[d][0],c=h[d][1],!(n<(a=Math.min(o,l))||n>Math.max(o,l)||r>Math.max(i,c)))if(r<Math.min(i,c))n!==a&&u++;else{if(r===(o=l===o?r:i+(n-o)*(c-i)/(l-o)))return 1!==d||!t;r<=o&&n!==a&&u++}return u%2==1},isRect:e,degenerate:t}},c.isSegmentBent=function(e,t,n,r){for(var i,a,o=e[t],s=[e[n][0]-o[0],e[n][1]-o[1]],l=h(s,s),c=Math.sqrt(l),u=[-s[1]/c,s[0]/c],d=t+1;d<n;d++)if(i=[e[d][0]-o[0],e[d][1]-o[1]],(a=h(i,s))<0||l<a||Math.abs(h(i,u))>r)return!0;return!1},c.filter=function(i,a){var o=[i[0]],s=0,l=0;function e(e){i.push(e);var t=o.length,n=s;o.splice(l+1);for(var r=n+1;r<i.length;r++)r!==i.length-1&&!c.isSegmentBent(i,n,r+1,a)||(o.push(i[r]),o.length<t-2&&(s=r,l=o.length-1),n=r)}return 1<i.length&&e(i.pop()),{addPt:e,raw:i,filtered:o}}},{"../constants/numerical":210,"./matrix":236}],243:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),s=e("is-mobile");t.exports=function(e){var t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}();if("string"!=typeof t)return!0;e=s({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!e)for(var n=t.split(" "),r=1;r<n.length;r++)if(-1!==n[r].indexOf("Safari"))for(var i=r-1;-1<i;i--){var a=n[i];if("Version/"===a.substr(0,8)){a=a.substr(8).split(".")[0];if(13<=(a=o(a)?+a:a))return!0}}return e}},{"fast-isnumeric":15,"is-mobile":49}],244:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],245:[function(e,t,n){"use strict";var a=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;var r={add:function(e,t,n,r,i){var a,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(i)),e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)r.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)r.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};r.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],i=0;i<t.length;i++)n=t[i],r[i]=n!==e&&"object"==typeof n?Array.isArray(n)?a.extendDeep([],n):a.extendDeepAll({},n):n;return r}(e,n),t.apply(null,n)},t.exports=r},{"../lib":230,"../plot_api/plot_config":263}],246:[function(e,t,n){"use strict";n.counter=function(e,t,n,r){n=(t||"")+(n?"":"$"),r=!1===r?"":"^";return"xy"===e?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(r+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],247:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(i))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],248:[function(e,t,n){"use strict";var l=e("./array").isArrayOrTypedArray,c=e("./is_plain_object");t.exports=function e(t,n){for(var r in n){var i=n[r],a=t[r];if(a!==i)if("_"===r.charAt(0)||"function"==typeof i)r in t||(t[r]=i);else if(l(i)&&l(a)&&c(i[0])){if("customdata"!==r&&"ids"!==r)for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&c(i[s])&&c(a[s])&&e(a[s],i[s])}else c(i)&&c(a)&&(e(a,i),Object.keys(a).length||delete t[r])}}},{"./array":216,"./is_plain_object":231}],249:[function(e,t,u){"use strict";var c=e("fast-isnumeric"),d=e("./loggers"),o=e("./identity"),h=e("../constants/numerical").BADNUM;function f(e,t){return e<t}function p(e,t){return e<=t}function m(e,t){return t<e}function g(e,t){return t<=e}u.findBin=function(e,t,n){if(c(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,i=0,a=t.length,o=0,s=1<a?(t[a-1]-t[0])/(a-1):1,l=0<=s?n?f:p:n?g:m;for(e+=1e-9*s*(n?-1:1)*(0<=s?1:-1);i<a&&o++<100;)l(t[r=Math.floor((i+a)/2)],e)?i=r+1:a=r;return 90<o&&d.log("Long binary search..."),i-1},u.sorterAsc=function(e,t){return e-t},u.sorterDes=function(e,t){return t-e},u.distinctVals=function(e){var t,n=e.slice();for(n.sort(u.sorterAsc),t=n.length-1;-1<t&&n[t]===h;t--);for(var r,i=n[t]-n[0]||1,a=i/(t||1)/1e4,o=[],s=0;s<=t;s++){var l=n[s],c=l-r;void 0===r?(o.push(l),r=l):a<c&&(i=Math.min(i,c),o.push(l),r=l)}return{vals:o,minDiff:i}},u.roundUp=function(e,t,n){for(var r,i=0,a=t.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<a&&o++<100;)t[r=c((i+a)/2)]<=e?i=r+s:a=r-l;return t[i]},u.sort=function(e,t){for(var n=0,r=0,i=1;i<e.length;i++){var a=t(e[i],e[i-1]);if(a<0?n=1:0<a&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},u.findIndexOfMin=function(e,t){t=t||o;for(var n,r=1/0,i=0;i<e.length;i++){var a=t(e[i]);a<r&&(r=a,n=i)}return n}},{"../constants/numerical":210,"./identity":228,"./loggers":234,"fast-isnumeric":15}],250:[function(e,t,n){"use strict";t.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],251:[function(e,t,o){"use strict";var s=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,n,r){var i,a;if((!r||r>n.length)&&(r=n.length),s(t)||(t=!1),l(n[0])){for(a=new Array(r),i=0;i<r;i++)a[i]=o.aggNums(e,t,n[i]);n=a}for(i=0;i<r;i++)s(t)?s(n[i])&&(t=e(+t,+n[i])):t=n[i];return t},o.len=function(e){return o.aggNums(function(e){return e+1},0,e)},o.mean=function(e,t){return t=t||o.len(e),o.aggNums(function(e,t){return e+t},0,e)/t},o.midRange=function(e){if(void 0!==e&&0!==e.length)return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2},o.variance=function(e,t,n){return t=t||o.len(e),s(n)||(n=o.mean(e,t)),o.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},o.stdev=function(e,t,n){return Math.sqrt(o.variance(e,t,n))},o.median=function(e){e=e.slice().sort();return o.interp(e,.5)},o.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./array":216,"fast-isnumeric":15}],252:[function(e,t,n){"use strict";var g=e("@plotly/d3"),_=e("../lib"),y=_.strTranslate,v=e("../constants/xmlns_namespaces"),b=e("../constants/alignment").LINE_SPACING;function x(e,t){return e.node().getBoundingClientRect()[t]}var r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(c,e,u){var d=c.text(),h=!c.attr("data-notex")&&"undefined"!=typeof MathJax&&d.match(r),f=g.select(c.node().parentNode);if(!f.empty()){var p=c.attr("class")?c.attr("class").split(" ")[0]:"text";return p+="-math",f.selectAll("svg."+p).remove(),f.selectAll("g."+p+"-group").remove(),c.style("display",null).attr({"data-unformatted":d,"data-math":"N"}),h?(e&&e._promises||[]).push(new Promise(function(o){c.style("display","none");var n,t,r,i,e,a,s,l=parseInt(c.node().style.fontSize,10);n=h[2],t={fontSize:l},r=function(e,t,n){f.selectAll("svg."+p).remove(),f.selectAll("g."+p+"-group").remove();var r=e&&e.select("svg");if(!r||!r.node())return m(),void o();var i=f.append("g").classed(p+"-group",!0).attr({"pointer-events":"none","data-unformatted":d,"data-math":"Y"});i.node().appendChild(r.node()),t&&t.node()&&r.node().insertBefore(t.node().cloneNode(!0),r.node().firstChild),r.attr({class:p,height:n.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var a=c.node().style.fill||"black",e=r.select("g");e.attr({fill:a,stroke:a});t=x(e,"width"),n=x(e,"height"),a=+c.attr("x")-t*{start:0,middle:.5,end:1}[c.attr("text-anchor")||"start"],e=-(l||x(c,"height"))/4;"y"===p[0]?(i.attr({transform:"rotate("+[-90,+c.attr("x"),+c.attr("y")]+")"+y(-t/2,e-n/2)}),r.attr({x:+c.attr("x"),y:+c.attr("y")})):"l"===p[0]?r.attr({x:c.attr("x"),y:e-n/2}):"a"===p[0]&&0!==p.indexOf("atitle")?r.attr({x:0,y:e}):r.attr({x:a,y:+c.attr("y")+e-n/2}),u&&u.call(c,i),o(i)},MathJax.Hub.Queue(function(){return e=_.extendDeepAll({},MathJax.Hub.config),a=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(i=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+_.randstr({},64);return s=g.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(n.replace(w,"\\lt ").replace(T,"\\gt ")),MathJax.Hub.Typeset(s.node())},function(){var e,t=g.select("body").select("#MathJax_SVG_glyphs");if(s.select(".MathJax_SVG").empty()||!s.select("svg").node()?(_.log("There was an error in the tex syntax.",n),r()):(e=s.select("svg").node().getBoundingClientRect(),r(s.select(".MathJax_SVG"),t,e)),s.remove(),"SVG"!==i)return MathJax.Hub.setRenderer(i)},function(){return void 0!==a&&(MathJax.Hub.processSectionDelay=a),MathJax.Hub.Config(e)})})):m(),c}function m(){f.empty()||(p=c.attr("class")+"-math",f.select("svg."+p).remove()),c.text("").style("white-space","pre"),function(r,n){n=n.replace(C," ");var s,e=!1,l=[],i=-1;function t(){i++;var e=document.createElementNS(v.svg,"tspan");g.select(e).attr({class:"line",dy:i*b+"em"}),r.appendChild(e);var t=l;if(l=[{node:s=e}],1<t.length)for(var n=1;n<t.length;n++)a(t[n])}function a(e){var t,n,r=e.type,i={};"a"===r?(a="a",t=e.target,n=e.href,o=e.popup,n&&(i={"xlink:xlink:show":"_blank"===t||"_"!==t.charAt(0)?"new":"replace",target:t,"xlink:xlink:href":n},o&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'))):a="tspan",e.style&&(i.style=e.style);var a,o=document.createElementNS(v.svg,a);"sup"===r||"sub"===r?(c(s,S),s.appendChild(o),c(a=document.createElementNS(v.svg,"tspan"),S),g.select(a).attr("dy",M[r]),i.dy=k[r],s.appendChild(o),s.appendChild(a)):s.appendChild(o),g.select(o).attr(i),s=e.node=o,l.push(e)}function c(e,t){e.appendChild(document.createTextNode(t))}O.test(n)?t():l=[{node:s=r}];for(var o=n.split(L),u=0;u<o.length;u++){var d,h=o[u],f=h.match(D),p=f&&f[2].toLowerCase(),m=A[p];"br"===p?t():void 0===m?c(s,j(h)):f[1]?function(e){var t;1!==l.length?(e!==(t=l.pop()).type&&_.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),s=l[l.length-1].node):_.log("Ignoring unexpected end tag </"+e+">.",n)}(p):(d=f[4],h={type:p},(f=z(d,P))?(f=f.replace(F,"$1 fill:"),m&&(f+=";"+m)):m&&(f=m),f&&(h.style=f),"a"===p&&(e=!0,(f=z(d,R))&&((p=document.createElement("a")).href=f,-1!==E.indexOf(p.protocol)&&(h.href=encodeURI(decodeURI(f)),h.target=z(d,I)||"_blank",h.popup=z(d,N)))),a(h))}return e}(c.node(),d)&&c.style("pointer-events","all"),n.positionText(c),u&&u.call(c)}};var w=/(<|&lt;|&#60;)/g,T=/(>|&gt;|&#62;)/g;var A={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},k={sub:"0.3em",sup:"-0.6em"},M={sub:"-0.21em",sup:"0.42em"},S="",E=["http:","https:","mailto:","",void 0,":"],C=n.NEWLINES=/(\r\n?|\n)/g,L=/(<[^<>]*>)/,D=/<(\/?)([^ >]*)(\s+(.*))?>/i,O=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var P=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,R=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,I=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,N=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function z(e,t){if(!e)return null;t=e.match(t),t=t&&(t[3]||t[4]);return t&&j(t)}var F=/(^|;)\s*color:/;n.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],i="...".length,a=e.split(L),o=[],s="",l=0,c=0;c<a.length;c++){var u=a[c],d=u.match(D),h=d&&d[2].toLowerCase();if(h)-1!==r.indexOf(h)&&(o.push(u),s=h);else{d=u.length;if(l+d<n)o.push(u),l+=d;else if(l<n){h=n-l;s&&("br"!==s||h<=i||d<=i)&&o.pop(),i<n?o.push(u.substr(0,h-i)+"..."):o.push(u.substr(0,h));break}s=""}}return o.join("")};var i={mu:"",amp:"&",lt:"<",gt:">",nbsp:" ",times:"",plusmn:"",deg:""},a=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function j(e){return e.replace(a,function(e,t){t="#"===t.charAt(0)?function(e){if(!(1114111<e)){var t=String.fromCodePoint;if(t)return t(e);t=String.fromCharCode;return e<=65535?t(e):t(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):i[t];return t||e})}function u(e,t,r){var i,n=r.horizontalAlign,a=r.verticalAlign||"top",o=e.node().getBoundingClientRect(),s=t.node().getBoundingClientRect(),l="bottom"===a?function(){return o.bottom-i.height}:"middle"===a?function(){return o.top+(o.height-i.height)/2}:function(){return o.top},c="right"===n?function(){return o.right-i.width}:"center"===n?function(){return o.left+(o.width-i.width)/2}:function(){return o.left};return function(){i=this.node().getBoundingClientRect();var e=c()-s.left,t=l()-s.top,n=r.gd||{};return r.gd&&(n._fullLayout._calcInverseTransform(n),e=(n=_.apply3DTransform(n._fullLayout._invTransform)(e,t))[0],t=n[1]),this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}n.convertEntities=j,n.sanitizeHTML=function(e){e=e.replace(C," ");for(var t=document.createElement("p"),n=t,r=[],i=e.split(L),a=0;a<i.length;a++){var o,s,l,c=i[a],u=c.match(D),d=u&&u[2].toLowerCase();d in A?u[1]?r.length&&(n=r.pop()):(o=(s=z(l=u[4],P))?{style:s}:{},"a"!==d||(u=z(l,R))&&((s=document.createElement("a")).href=u,-1!==E.indexOf(s.protocol)&&(o.href=encodeURI(decodeURI(u)),(l=z(l,I))&&(o.target=l))),d=document.createElement(d),n.appendChild(d),g.select(d).attr(o),r.push(n=d)):n.appendChild(document.createTextNode(j(c)))}return t.innerHTML},n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,i,a){return e.each(function(){var n=g.select(this);function e(e,t){return void 0===t?null===(t=n.attr(e))&&(n.attr(e,0),t=0):n.attr(e,t),t}var t=e("x",i),r=e("y",a);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:t,y:r})})};n.makeTextShadow=function(e){var t="1px ",n="1px ",r="1px ";return t+n+r+e+", -"+t+"-"+n+r+e+", "+t+"-"+n+r+e+", -"+t+n+r+e},n.makeEditable=function(a,o){var s=o.gd,e=o.delegate,l=g.dispatch("edit","input","cancel"),t=e||a;if(a.style({"pointer-events":e?"none":"all"}),1!==a.size())throw new Error("boo");function n(){!function(){var e=g.select(s).select(".svg-container"),t=e.append("div"),n=a.node().style,r=parseFloat(n.fontSize||12),i=o.text;void 0===i&&(i=a.attr("data-unformatted"));t.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:o.fill||n.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(i).call(u(a,e,o)).on("blur",function(){s._editing=!1,a.text(this.textContent).style({opacity:1});var e=g.select(this).attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(a.node().parentNode).select(e).style({opacity:0});e=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),l.edit.call(a,e)}).on("focus",function(){var e=this;s._editing=!0,g.select(document).on("mouseup",function(){return g.event.target!==e&&void(document.activeElement===t.node()&&t.node().blur())})}).on("keyup",function(){27===g.event.which?(s._editing=!1,a.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(a,this.textContent)):(l.input.call(a,this.textContent),g.select(this).call(u(a,e,o)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(c)}(),a.style({opacity:0});var e=t.attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(a.node().parentNode).select(e).style({opacity:0})}function c(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);e=window.getSelection();e.removeAllRanges(),e.addRange(n),t.focus()}return o.immediate?n():t.on("click",n),g.rebind(a,l,"on")}},{"../constants/alignment":205,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],253:[function(e,t,n){"use strict";var s={};function l(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var r=s[e],i=Date.now();if(!r){for(var a in s)s[a].ts<i-6e4&&delete s[a];r=s[e]={ts:0,timer:null}}function o(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),i>r.ts+t?o():r.timer=setTimeout(function(){o(),r.timer=null},t)},n.done=function(e){var n=s[e];return n&&n.timer?new Promise(function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)l(s[e]),delete s[e];else for(var t in s)n.clear(t)}},{}],254:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(0<e)return Math.log(e)/Math.LN10;e=Math.log(Math.min(t[0],t[1]))/Math.LN10;return e=!r(e)?Math.log(Math.max(t[0],t[1]))/Math.LN10-6:e}},{"fast-isnumeric":15}],255:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],256:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],257:[function(e,t,n){"use strict";var s=e("../registry");t.exports=function(e){for(var t,n,r=s.layoutArrayContainers,i=s.layoutArrayRegexes,a=e.split("[")[0],o=0;o<i.length;o++)if((n=e.match(i[o]))&&0===n.index){t=n[0];break}if(!(t=t||r[r.indexOf(a)]))return!1;a=e.substr(t.length);return a?!!(n=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":313}],258:[function(e,t,n){"use strict";var r=e("../lib"),s=r.extendFlat,o=r.isPlainObject,e={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},i=e.flags.slice().concat(["fullReplot"]),a=r.flags.slice().concat("layoutReplot");function l(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function c(e,t,n){var r,i=s({},e);for(r in i){var a=i[r];o(a)&&(i[r]=function e(t,n,r,i){{if(t.valType){var a=s({},t);if(a.editType=n,Array.isArray(t.items)){a.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)a.items[o]=e(t.items[o],n,"from-root")}return a}return c(t,n,"_"===i.charAt(0)?"nested":"from-root")}}(a,t,0,r))}return"from-root"===n&&(i.editType=t),i}t.exports={traces:e,layout:r,traceFlags:function(){return l(i)},layoutFlags:function(){return l(a)},update:function(e,t){t=t.editType;if(t&&"none"!==t)for(var n=t.split("+"),r=0;r<n.length;r++)e[n[r]]=!0},overrideAll:c}},{"../lib":230}],259:[function(e,t,w){"use strict";var l=e("fast-isnumeric"),T=e("gl-mat4/fromQuat"),m=e("../registry"),A=e("../lib"),k=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),M=e("../components/color"),S=n.cleanId,c=n.getFromTrace,g=m.traceIs;function E(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=S(n,r,!0))}function C(i){function e(e,t){var n=i[e],r=i.title&&i.title[t];n&&!r&&(i.title||(i.title={}),i.title[t]=i[e],delete i[e])}i&&("string"!=typeof i.title&&"number"!=typeof i.title||(i.title={text:i.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function _(e){if(!A.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function y(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function L(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}w.clearPromiseQueue=function(e){Array.isArray(e._promises)&&0<e._promises.length&&A.log("Clearing previous rejected promises from queue."),e._promises=[]},w.cleanLayout=function(e){(e=e||{}).xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);for(var t=(k.subplotsRegistry.cartesian||{}).attrRegex,n=(k.subplotsRegistry.polar||{}).attrRegex,r=(k.subplotsRegistry.ternary||{}).attrRegex,i=(k.subplotsRegistry.gl3d||{}).attrRegex,a=Object.keys(e),o=0;o<a.length;o++){var s=a[o];if(t&&t.test(s)){var l=e[s];l.anchor&&"free"!==l.anchor&&(l.anchor=S(l.anchor)),l.overlaying&&(l.overlaying=S(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,L(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick),C(l)}else if(n&&n.test(s))C(e[s].radialaxis);else if(r&&r.test(s)){var c=e[s];C(c.aaxis),C(c.baxis),C(c.caxis)}else if(i&&i.test(s)){l=e[s],c=l.cameraposition;if(Array.isArray(c)&&4===c[0].length){for(var s=c[0],u=c[1],d=c[2],h=T([],s),f=[],p=0;p<3;++p)f[p]=u[p]+d*h[2+4*p];l.camera={eye:{x:f[0],y:f[1],z:f[2]},center:{x:u[0],y:u[1],z:u[2]},up:{x:0,y:0,z:1}},delete l.cameraposition}C(l.xaxis),C(l.yaxis),C(l.zaxis)}}var m=Array.isArray(e.annotations)?e.annotations.length:0;for(o=0;o<m;o++){var g=e.annotations[o];A.isPlainObject(g)&&(g.ref&&("paper"===g.ref?(g.xref="paper",g.yref="paper"):"data"===g.ref&&(g.xref="x",g.yref="y"),delete g.ref),E(g,"xref"),E(g,"yref"))}var _=Array.isArray(e.shapes)?e.shapes.length:0;for(o=0;o<_;o++){var y=e.shapes[o];A.isPlainObject(y)&&(E(y,"xref"),E(y,"yref"))}var v=Array.isArray(e.images)?e.images.length:0;for(o=0;o<v;o++){var b=e.images[o];A.isPlainObject(b)&&(E(b,"xref"),E(b,"yref"))}var x=e.legend;return x&&(3<x.x?(x.x=1.02,x.xanchor="left"):x.x<-2&&(x.x=-.02,x.xanchor="right"),3<x.y?(x.y=1.02,x.yanchor="bottom"):x.y<-2&&(x.y=-.02,x.yanchor="top")),C(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),M.clean(e),e.template&&e.template.layout&&w.cleanLayout(e.template.layout),e},w.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y&&(o=M.defaults,r=n.error_y.color||(g(n,"bar")?M.defaultLine:o[t%o.length]),n.error_y.color=M.addOpacity(M.rgb(r),M.opacity(r)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!g(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",w.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&w.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=S(n.xaxis,"x")),n.yaxis&&(n.yaxis=S(n.yaxis,"y")),g(n,"gl3d")&&n.scene&&(n.scene=k.subplotsRegistry.gl3d.cleanId(n.scene)),!g(n,"pie-like")&&!g(n,"bar-like"))if(Array.isArray(n.textposition))for(l=0;l<n.textposition.length;l++)n.textposition[l]=y(n.textposition[l]);else n.textposition&&(n.textposition=y(n.textposition));var r,i,a,o=m.getModule(n);if(o&&o.colorbar&&((a=(i=o.colorbar.container)?n[i]:n)&&a.colorscale&&("YIGnBu"===a.colorscale&&(a.colorscale="YlGnBu"),"YIOrRd"===a.colorscale&&(a.colorscale="YlOrRd"))),"surface"===n.type&&A.isPlainObject(n.contours))for(var s=["x","y","z"],l=0;l<s.length;l++){var c=n.contours[s[l]];A.isPlainObject(c)&&(c.highlightColor&&(c.highlightcolor=c.highlightColor,delete c.highlightColor),c.highlightWidth&&(c.highlightwidth=c.highlightWidth,delete c.highlightWidth))}if("candlestick"!==n.type&&"ohlc"!==n.type||(r=!1!==(n.increasing||{}).showlegend,o=!1!==(n.decreasing||{}).showlegend,i=_(n.increasing),a=_(n.decreasing),!1!==i&&!1!==a?(o=function(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var i,a=Math.min(e.length,t.length);for(i=0;i<a&&e.charAt(i)===t.charAt(i);i++);return e.substr(0,i).trim()}(i,a,r,o))&&(n.name=o):!i&&!a||n.name||(n.name=i||a)),Array.isArray(n.transforms)){var u=n.transforms;for(l=0;l<u.length;l++){var d=u[l];if(A.isPlainObject(d))switch(d.type){case"filter":d.filtersrc&&(d.target=d.filtersrc,delete d.filtersrc),d.calendar&&(d.valuecalendar||(d.valuecalendar=d.calendar),delete d.calendar);break;case"groupby":if(d.styles=d.styles||d.style,d.styles&&!Array.isArray(d.styles)){var h=d.styles,f=Object.keys(h);d.styles=[];for(var p=0;p<f.length;p++)d.styles.push({target:f[p],value:h[f[p]]})}}}}L(n,"line")&&delete n.line,"marker"in n&&(L(n.marker,"line")&&delete n.marker.line,L(n,"marker")&&delete n.marker),M.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),C(n),n.colorbar&&C(n.colorbar),n.marker&&n.marker.colorbar&&C(n.marker.colorbar),n.line&&n.line.colorbar&&C(n.line.colorbar),n.aaxis&&C(n.aaxis),n.baxis&&C(n.baxis)}},w.swapXYData=function(e){var t;if(A.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y&&(t="copy_ystyle"in(t=e.error_y)?t.copy_ystyle:!(t.color||t.thickness||t.width),A.swapAttrs(e,["error_?.copy_ystyle"]),t&&A.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])),"string"==typeof e.hoverinfo){for(var n=e.hoverinfo.split("+"),r=0;r<n.length;r++)"x"===n[r]?n[r]="y":"y"===n[r]&&(n[r]="x");e.hoverinfo=n.join("+")}},w.coerceTraceIndices=function(e,t){if(l(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)A.isIndex(t[r],e.data.length)?n.push(t[r]):A.warn("trace index (",t[r],") is not a number or is out of bounds");return n}return t},w.manageArrayContainers=function(e,t,n){var r=e.obj,i=e.parts,a=i.length,o=i[a-1],s=l(o);s&&null===t?(a=i.slice(0,a-1).join("."),A.nestedProperty(r,a).get().splice(o,1)):(s&&void 0===e.get()&&void 0===e.get()&&(n[e.astr]=null),e.set(t))};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function i(e){var t=e.search(r);if(0<t)return e.substr(0,t)}w.hasParent=function(e,t){for(var n=i(t);n;){if(n in e)return!0;n=i(n)}return!1};var u=["x","y","z"];w.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var i=e._fullData[r],a=0;a<3;a++){var o=c(e,i,u[a]);if(o&&"log"!==o.type){var s=o._name,o=o._id.substr(1);if("scene"===o.substr(0,5)){if(void 0!==n[o])continue;s=o+"."+s}o=s+".type";void 0===n[s]&&void 0===n[o]&&A.nestedProperty(e.layout,o).set(null)}}}},{"../components/color":100,"../lib":230,"../plots/cartesian/axis_ids":280,"../plots/plots":311,"../registry":313,"fast-isnumeric":15,"gl-mat4/fromQuat":21}],260:[function(e,t,n){"use strict";var r=e("./plot_api");n._doPlot=r._doPlot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download");e=e("./template_api");n.makeTemplate=e.makeTemplate,n.validateTemplate=e.validateTemplate},{"../snapshot/download":315,"./plot_api":262,"./template_api":267,"./to_image":268,"./validate":269}],261:[function(e,t,n){"use strict";var r=e("../lib/is_plain_object"),M=e("../lib/noop"),S=e("../lib/loggers"),E=e("../lib/search").sorterAsc,C=e("../registry");n.containerArrayMatch=e("./container_array_match");var L=n.isAddVal=function(e){return"add"===e||r(e)},D=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,r,i){var a=t.astr,o=C.getComponentMethod(a,"supplyLayoutDefaults"),s=C.getComponentMethod(a,"draw"),l=C.getComponentMethod(a,"drawOne"),c=r.replot||r.recalc||o===M||s===M,u=e.layout,r=e._fullLayout;if(n[""]){1<Object.keys(n).length&&S.warn("Full array edits are incompatible with other edits",a);var d=n[""][""];if(D(d))t.set(null);else{if(!Array.isArray(d))return S.warn("Unrecognized full array edit value",a,d),!0;t.set(d)}return c?!1:(o(u,r),s(e),!0)}for(var h,f,p,m,g,_,y,v=Object.keys(n).map(Number).sort(E),d=t.get(),b=d||[],x=i(r,a).get(),w=[],T=-1,A=b.length,k=0;k<v.length;k++)if(p=n[f=v[k]],m=Object.keys(p),g=p[""],_=L(g),f<0||f>b.length-(_?0:1))S.warn("index out of range",a,f);else if(void 0!==g)1<m.length&&S.warn("Insertion & removal are incompatible with edits to the same index.",a,f),D(g)?w.push(f):_?(b.splice(f,0,g="add"===g?{}:g),x&&x.splice(f,0,{})):S.warn("Unrecognized full object edit value",a,f,g),-1===T&&(T=f);else for(h=0;h<m.length;h++)i(b[f],m[h],a+"["+f+"].").set(p[m[h]]);for(k=w.length-1;0<=k;k--)b.splice(w[k],1),x&&x.splice(w[k],1);if(b.length?d||t.set(b):t.set(null),c)return!1;if(o(u,r),l!==M){if(-1===T)y=v;else{for(A=Math.max(b.length,A),y=[],k=0;k<v.length&&!(T<=(f=v[k]));k++)y.push(f);for(k=T;k<A;k++)y.push(k)}for(k=0;k<y.length;k++)l(e,y[k])}else s(e);return!0}},{"../lib/is_plain_object":231,"../lib/loggers":234,"../lib/noop":239,"../lib/search":249,"../registry":313,"./container_array_match":257}],262:[function(e,t,A){"use strict";var p=e("@plotly/d3"),h=e("fast-isnumeric"),u=e("has-hover"),j=e("../lib"),B=j.nestedProperty,m=e("../lib/events"),x=e("../lib/queue"),H=e("../registry"),U=e("./plot_schema"),F=e("../plots/plots"),V=e("../plots/cartesian/axes"),g=e("../components/drawing"),n=e("../components/color"),_=e("../plots/cartesian/graph_interact").initInteractions,y=e("../constants/xmlns_namespaces"),r=e("../plots/cartesian/select").clearSelect,d=e("./plot_config").dfltConfig,q=e("./manage_arrays"),Y=e("./helpers"),k=e("./subroutines"),G=e("./edit_types"),W=e("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function M(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function f(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){j.error(e)}}function v(e,t){f(e,n.combine(t,"white"))}function S(e,t){var n;e._context||(e._context=j.extendDeep({},d),n=p.select("base"),e._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:"");var r,i,a=e._context;if(t){for(r=Object.keys(t),c=0;c<r.length;c++)"editable"!==(i=r[c])&&"edits"!==i&&i in a&&("setBackground"===i&&"opaque"===t[i]?a[i]=v:a[i]=t[i]);t.plot3dPixelRatio&&!a.plotGlPixelRatio&&(a.plotGlPixelRatio=a.plot3dPixelRatio);var o=t.editable;if(void 0!==o)for(a.editable=o,r=Object.keys(a.edits),c=0;c<r.length;c++)a.edits[r[c]]=o;if(t.edits)for(r=Object.keys(t.edits),c=0;c<r.length;c++)(i=r[c])in a.edits&&(a.edits[i]=t.edits[i]);a._exportedPlot=t._exportedPlot}a.staticPlot&&(a.editable=!1,a.edits={},a.autosizable=!1,a.scrollZoom=!1,a.doubleClick=!1,a.showTips=!1,a.showLink=!1,a.displayModeBar=!1),"hover"!==a.displayModeBar||u||(a.displayModeBar=!0),"transparent"!==a.setBackground&&"function"==typeof a.setBackground||(a.setBackground=f),a._hasZeroHeight=a._hasZeroHeight||0===e.clientHeight,a._hasZeroWidth=a._hasZeroWidth||0===e.clientWidth;var e=a.scrollZoom,s=a._scrollZoom={};if(!0===e)s.cartesian=1,s.gl3d=1,s.geo=1,s.mapbox=1;else if("string"==typeof e)for(var l=e.split("+"),c=0;c<l.length;c++)s[l[c]]=1;else!1!==e&&(s.gl3d=1,s.geo=1,s.mapbox=1)}function b(e,t){for(var n,r=t+1,i=[],a=0;a<e.length;a++)(n=e[a])<0?i.push(r+n):i.push(n);return i}function T(e,t,n){for(var r,i=0;i<t.length;i++){if((r=t[i])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=e.data.length||r<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<t.indexOf(r,i+1)||0<=r&&-1<t.indexOf(-e.data.length+r)||r<0&&-1<t.indexOf(e.data.length+r))throw new Error("each index in "+n+" must be unique.")}}function E(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(T(e,t=!Array.isArray(t)?[t]:t,"currentIndices"),void 0!==(n=void 0!==n&&!Array.isArray(n)?[n]:n)&&T(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function a(e,t,n,r,i){!function(e,t,n,r){var i,a=j.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!j.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(i in T(e,n,"indices"),t){if(!Array.isArray(t[i])||t[i].length!==n.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(a&&(!(i in r)||!Array.isArray(r[i])||r[i].length!==t[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var a=function(e,t,n,r){var i,a,o,s,l,c=j.isPlainObject(r),u=[];for(l in n=b(n=!Array.isArray(n)?[n]:n,e.data.length-1),t)for(var d=0;d<n.length;d++){if(s=e.data[n[d]],i=(a=B(s,l)).get(),o=t[l][d],!j.isArrayOrTypedArray(o))throw new Error("attribute: "+l+" index: "+d+" must be an array");if(!j.isArrayOrTypedArray(i))throw new Error("cannot extend missing or non-array attribute: "+l);if(i.constructor!==o.constructor)throw new Error("cannot extend array with an array of a different type: "+l);s=c?r[l][d]:r,h(s)||(s=-1),u.push({prop:a,target:i,insert:o,maxp:Math.floor(s)})}return u}(e,t,n,r),o={},s={},l=0;l<a.length;l++){var c=a[l].prop,u=a[l].maxp,u=i(a[l].target,a[l].insert,u);c.set(u[0]),Array.isArray(o[c.astr])||(o[c.astr]=[]),o[c.astr].push(u[1]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(a[l].target.length)}return{update:o,maxPoints:s}}function s(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function o(e,t,n,r){e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var i={};if("string"==typeof t)i[t]=n;else{if(!j.isPlainObject(t))return j.warn("Restyle fail.",t,n,r),Promise.reject();i=j.extendFlat({},t),void 0===r&&(r=n)}Object.keys(i).length&&(e.changed=!0);var r=Y.coerceTraceIndices(e,r),a=l(e,i,r),i=a.flags;i.calc&&(e.calcdata=void 0),i.clearAxisTypes&&Y.clearAxisTypes(e,r,{});r=[];i.fullReplot?r.push(A._doPlot):(r.push(F.previousPromises),F.supplyDefaults(e),i.markerSize&&(F.doCalcdata(e),D(r)),i.style&&r.push(k.doTraceStyle),i.colorbars&&r.push(k.doColorBars),r.push(M)),r.push(F.rehover,F.redrag),x.add(e,o,[e,a.undoit,a.traces],o,[e,a.redoit,a.traces]);r=j.syncOrAsync(r,e);return(r=!r||!r.then?Promise.resolve():r).then(function(){return e.emit("plotly_restyle",a.eventData),e})}function X(e){return void 0===e?null:e}function Z(a,e){return e?function(e,t,n){var r=B(e,t),i=r.set;return r.set=function(e){C((n||"")+t,r.get(),e,a),i(e)},r}:B}function C(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var i=Array.isArray(t)?t:[],a=Array.isArray(n)?n:[],o=Math.max(i.length,a.length),s=0;s<o;s++)C(e+"["+s+"]",i[s],a[s],r);else if(j.isPlainObject(t)||j.isPlainObject(n)){var l,c=j.isPlainObject(t)?t:{},u=j.isPlainObject(n)?n:{};for(l in j.extendFlat({},c,u))C(e+"."+l,c[l],u[l],r)}else void 0===r[e]&&(r[e]=X(t))}function l(i,a,o){var e,s=i._fullLayout,r=i._fullData,l=i.data,c=s._guiEditing,u=Z(s._preGUI,c),t=j.extendDeepAll({},a);J(a);var n,d,h=G.traceFlags(),f={},p={};function m(){return o.map(function(){})}function g(e){e=V.id2name(e);-1===n.indexOf(e)&&n.push(e)}function _(e){return"LAYOUT"+e+".autorange"}function y(e){return"LAYOUT"+e+".range"}function v(e){for(var t=e;t<r.length;t++)if(r[t]._input===l[e])return r[t]}function b(e,t,n){var r;Array.isArray(e)?e.forEach(function(e){b(e,t,n)}):e in a||Y.hasParent(a,e)||(r="LAYOUT"===e.substr(0,6)?u(i.layout,e.replace("LAYOUT","")):(r=o[n],Z(s._tracePreGUI[v(r)._fullInput.uid],c)(l[r],e)),e in p||(p[e]=m()),void 0===p[e][n]&&(p[e][n]=X(r.get())),void 0!==t&&r.set(t))}for(d in a){if(Y.hasParent(a,d))throw new Error("cannot set "+d+" and a parent attribute simultaneously");var x,w,T=a[d];if("autobinx"!==d&&"autobiny"!==d||(d=d.charAt(d.length-1)+"bins",T=Array.isArray(T)?T.map(function(n){return function(e,t){return!1===e?r[o[t]][n]:null}}(d)):!1===T?o.map(function(t){return function(e){return r[e][t]}}(d)):null),f[d]=T,"LAYOUT"!==d.substr(0,6)){for(p[d]=m(),e=0;e<o.length;e++){var A,k,M=l[o[e]],S=v(o[e]),E=(A=Z(s._tracePreGUI[S._fullInput.uid],c)(M,d)).get();if(void 0!==(k=Array.isArray(T)?T[e%T.length]:T)){var C,L,D=A.parts[A.parts.length-1],O=d.substr(0,d.length-D.length-1),P=O?O+".":"",O=O?B(S,O).get():S,R=U.getTraceValObject(S,A.parts);if(R&&R.impliedEdits&&null!==k)for(var I in R.impliedEdits)b(j.relativeAttr(d,I),R.impliedEdits[I],e);else"thicknessmode"!==D&&"lenmode"!==D||E===k||"fraction"!==k&&"pixels"!==k||!O?"type"!==d||"pie"===k==("pie"===E)&&"funnelarea"===k==("funnelarea"===E)||(C="x",L="y","bar"!==k&&"bar"!==E||"h"!==M.orientation||(C="y",L="x"),j.swapAttrs(M,["?","?src"],"labels",C),j.swapAttrs(M,["d?","?0"],"label",C),j.swapAttrs(M,["?","?src"],"values",L),"pie"===E||"funnelarea"===E?(B(M,"marker.color").set(B(M,"marker.colors").get()),s._pielayer.selectAll("g.trace").remove()):H.traceIs(M,"cartesian")&&B(M,"marker.colors").set(B(M,"marker.color").get())):(C=s._size,L="top"===(L=O.orient)||"bottom"===L,"thicknessmode"===D?(D=L?C.h:C.w,b(P+"thickness",O.thickness*("fraction"===k?1/D:D),e)):(N=L?C.w:C.h,b(P+"len",O.len*("fraction"===k?1/N:N),e)));p[d][e]=X(E);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(d)){if("orientation"===d){A.set(k);var N=M.x&&!M.y?"h":"v";if((A.get()||N)===S.orientation)continue}else"orientationaxes"===d&&(M.orientation={v:"h",h:"v"}[S.orientation]);Y.swapXYData(M),h.calc=h.clearAxisTypes=!0}else-1!==F.dataArrayContainers.indexOf(A.parts[0])?(Y.manageArrayContainers(A,k,p),h.calc=!0):(!R||R.arrayOk&&!H.traceIs(S,"regl")&&(j.isArrayOrTypedArray(k)||j.isArrayOrTypedArray(E))?h.calc=!0:G.update(h,R),A.set(k))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(d)&&V.swap(i,o),"orientationaxes"===d&&("x"===(w=(x=B(i.layout,"hovermode")).get())?x.set("y"):"y"===w?x.set("x"):"x unified"===w?x.set("y unified"):"y unified"===w&&x.set("x unified")),-1!==["orientation","type"].indexOf(d)){for(n=[],e=0;e<o.length;e++){var z=l[o[e]];H.traceIs(z,"cartesian")&&(g(z.xaxis||"x"),g(z.yaxis||"y"))}b(n.map(_),!0,0),b(n.map(y),[0,1],0)}}else A=u(i.layout,d.replace("LAYOUT","")),p[d]=[X(A.get())],A.set(Array.isArray(T)?T[0]:T),h.calc=!0}return(h.calc||h.plot)&&(h.fullReplot=!0),{flags:h,undoit:p,redoit:f,traces:o,eventData:j.extendDeepNoArrays([],[t,o])}}function J(n){for(var e,t,r=j.counterRegex("axis",".title",!1,!1),i=/colorbar\.title$/,a=Object.keys(n),o=0;o<a.length;o++)e=a[o],t=n[e],"title"!==e&&!r.test(e)&&!i.test(e)||"string"!=typeof t&&"number"!=typeof t?-1<e.indexOf("titlefont")?s(e,e.replace("titlefont","title.font")):-1<e.indexOf("titleposition")?s(e,e.replace("titleposition","title.position")):-1<e.indexOf("titleside")?s(e,e.replace("titleside","title.side")):-1<e.indexOf("titleoffset")&&s(e,e.replace("titleoffset","title.offset")):s(e,e.replace("title","title.text"));function s(e,t){n[t]=n[e],delete n[e]}}function L(e,t,n){e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!j.isPlainObject(t))return j.warn("Relayout fail.",t,n),Promise.reject();r=j.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var i=O(e,r),n=i.flags;n.calc&&(e.calcdata=void 0);t=[F.previousPromises];n.layoutReplot?t.push(k.layoutReplot):Object.keys(r).length&&(c(e,n,i)||F.supplyDefaults(e),n.legend&&t.push(k.doLegend),n.layoutstyle&&t.push(k.layoutStyles),n.axrange&&D(t,i.rangesAltered),n.ticks&&t.push(k.doTicksRelayout),n.modebar&&t.push(k.doModeBar),n.camera&&t.push(k.doCamera),n.colorbars&&t.push(k.doColorBars),t.push(M)),t.push(F.rehover,F.redrag),x.add(e,L,[e,i.undoit],L,[e,i.redoit]);t=j.syncOrAsync(t,e);return(t=!t||!t.then?Promise.resolve(e):t).then(function(){return e.emit("plotly_relayout",i.eventData),e})}function c(e,t,n){var r=e._fullLayout;if(t.axrange){for(var i in t)if("axrange"!==i&&t[i])return;for(var a in n.rangesAltered){var o=V.id2name(a),s=e.layout[o],l=r[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)c!==a&&((c=r[V.id2name(c)]).autorange=l.autorange,c.range=l.range.slice(),c._input.range=l.range.slice())}return 1}}function D(e,o){var t=o?function(e){var t,n=[],r=!0;for(t in o){var i=V.getFromId(e,t);if(n.push(t),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&n.push(i._anchorAxis._id),i._matchGroup)for(var a in i._matchGroup)o[a]||n.push(a);i.automargin&&(r=!1)}return V.draw(e,n,{skipTitle:r})}:function(e){return V.draw(e,"redraw")};e.push(r,k.doAutoRangeAndConstraints,t,k.drawData,k.finalDraw)}var $=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Q=/^[xyz]axis[0-9]*\.autorange$/,K=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function O(e,r){var t,i=e.layout,n=e._fullLayout,a=n._guiEditing,o=Z(n._preGUI,a),s=Object.keys(r),l=V.list(e),a=j.extendDeepAll({},r),c={};for(J(r),s=Object.keys(r),R=0;R<s.length;R++)if(0===s[R].indexOf("allaxes")){for(t=0;t<l.length;t++){var u=l[t]._id.substr(1),u=-1!==u.indexOf("scene")?u+".":"",u=s[R].replace("allaxes",u+l[t]._name);r[u]||(r[u]=r[s[R]])}delete r[s[R]]}var d=G.layoutFlags(),h={},f={};function p(e,t){var n;Array.isArray(e)?e.forEach(function(e){p(e,t)}):e in r||Y.hasParent(r,e)||(n=o(i,e),e in f||(f[e]=X(n.get())),void 0!==t&&n.set(t))}var m,g,_={};function y(e){e=V.name2id(e.split(".")[0]);return _[e]=1,e}for(m in r){if(Y.hasParent(r,m))throw new Error("cannot set "+m+" and a parent attribute simultaneously");for(var v=o(i,m),b=r[m],x=v.parts.length-1;0<x&&"string"!=typeof v.parts[x];)x--;var w=v.parts[x],T=v.parts[x-1]+"."+w,A=v.parts.slice(0,x).join("."),k=B(e.layout,A).get(),M=B(n,A).get(),S=v.get();if(void 0!==b){h[m]=b,f[m]="reverse"===w?b:X(S);var E,C,L,D=U.getLayoutValObject(n,v.parts);if(D&&D.impliedEdits&&null!==b)for(var O in D.impliedEdits)p(j.relativeAttr(m,O),D.impliedEdits[O]);-1!==["width","height"].indexOf(m)?b?(p("autosize",null),p(C="height"===m?"width":"height",n[C])):n[m]=e._initialAutoSize[m]:"autosize"===m?(p("width",b?null:n.width),p("height",b?null:n.height)):T.match($)?(y(T),B(n,A+"._inputRange").set(null)):T.match(Q)?(y(T),B(n,A+"._inputRange").set(null),(L=B(n,A).get())._inputDomain&&(L._input.domain=L._inputDomain.slice())):T.match(K)&&B(n,A+"._inputDomain").set(null),"type"===w?(E=k,C="linear"===M.type&&"log"===b,L="log"===M.type&&"linear"===b,C||L?(E&&E.range?M.autorange?C&&(E.range=E.range[1]>E.range[0]?[1,2]:[2,1]):(T=E.range[0],L=E.range[1],C?(T<=0&&L<=0&&p(A+".autorange",!0),T<=0?T=L/1e6:L<=0&&(L=T/1e6),p(A+".range[0]",Math.log(T)/Math.LN10),p(A+".range[1]",Math.log(L)/Math.LN10)):(p(A+".range[0]",Math.pow(10,T)),p(A+".range[1]",Math.pow(10,L)))):p(A+".autorange",!0),Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[v.parts[0]]&&"radialaxis"===v.parts[1]&&delete n[v.parts[0]]._subplot.viewInitial["radialaxis.range"],H.getComponentMethod("annotations","convertCoords")(e,M,b,p),H.getComponentMethod("images","convertCoords")(e,M,b,p)):(p(A+".autorange",!0),p(A+".range",null)),B(n,A+"._inputRange").set(null)):w.match(W)&&(N=B(n,m).get(),(I=(b||{}).type)&&"-"!==I||(I="linear"),H.getComponentMethod("annotations","convertCoords")(e,N,I,p),H.getComponentMethod("images","convertCoords")(e,N,I,p));var P,R,I,N=q.containerArrayMatch(m);N?(P=N.array,R=N.index,I=N.property,N=D||{editType:"calc"},""!==R&&""===I&&(q.isAddVal(b)?f[m]=null:q.isRemoveVal(b)?f[m]=(B(i,P).get()||[])[R]:j.warn("unrecognized full object value",r)),G.update(d,N),c[P]||(c[P]={}),(c[P][R]||(c[P][R]={}))[I]=b,delete r[m]):"reverse"===w?(k.range?k.range.reverse():(p(A+".autorange",!0),k.range=[1,0]),M.autorange?d.calc=!0:d.plot=!0):(n._has("scatter-like")&&n._has("regl")&&"dragmode"===m&&("lasso"===b||"select"===b)&&"lasso"!==S&&"select"!==S||n._has("gl2d")?d.plot=!0:D?G.update(d,D):d.calc=!0,v.set(b))}}for(P in c)q.applyContainerArrayChanges(e,o(i,P),c[P],d,o)||(d.plot=!0);for(g in _){var z=(E=V.getFromId(e,g))&&E._constraintGroup;if(z)for(var F in d.calc=!0,z)_[F]||(V.getFromId(e,F)._constraintShrinkable=!0)}return(ee(e)||r.height||r.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,rangesAltered:_,undoit:f,redoit:h,eventData:a}}function ee(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&F.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function P(e,t,n,r){e=j.getGraphDiv(e),Y.clearPromiseQueue(e),j.isPlainObject(t)||(t={}),j.isPlainObject(n)||(n={}),Object.keys(t).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var i=Y.coerceTraceIndices(e,r),a=l(e,j.extendFlat({},t),i),r=a.flags,o=O(e,j.extendFlat({},n)),t=o.flags;(r.calc||t.calc)&&(e.calcdata=void 0),r.clearAxisTypes&&Y.clearAxisTypes(e,i,n);n=[];t.layoutReplot?n.push(k.layoutReplot):r.fullReplot?n.push(A._doPlot):(n.push(F.previousPromises),c(e,t,o)||F.supplyDefaults(e),r.style&&n.push(k.doTraceStyle),(r.colorbars||t.colorbars)&&n.push(k.doColorBars),t.legend&&n.push(k.doLegend),t.layoutstyle&&n.push(k.layoutStyles),t.axrange&&D(n,o.rangesAltered),t.ticks&&n.push(k.doTicksRelayout),t.modebar&&n.push(k.doModeBar),t.camera&&n.push(k.doCamera),n.push(M)),n.push(F.rehover,F.redrag),x.add(e,P,[e,a.undoit,o.undoit,a.traces],P,[e,a.redoit,o.redoit,a.traces]);n=j.syncOrAsync(n,e);return(n=!n||!n.then?Promise.resolve(e):n).then(function(){return e.emit("plotly_update",{data:a.eventData,layout:o.eventData}),e})}function i(n){return function(e){e._fullLayout._guiEditing=!0;var t=n.apply(null,arguments);return e._fullLayout._guiEditing=!1,t}}var R=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],I=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function N(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=e.match(r.pattern);if(i)return{head:i[1],attr:r.attr}}}function z(e,t){var n=B(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();1<r.length;)if(r.pop(),void 0!==(n=B(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function te(e,t){var n=j.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&j.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function ne(e,t,n,r){var i,a,o,s,l,c,u,d,h=r._preGUI,f=[],p={};for(i in h){if(l=N(i,R)){if(a=l.attr||l.head+".uirevision",(s=(o=B(r,a).get())&&z(a,t))&&s===o&&(null===(c=h[i])&&(c=void 0),te(d=(u=B(t,i)).get(),c))){void 0===d&&"autorange"===i.substr(i.length-9)&&f.push(i.substr(0,i.length-10)),u.set(X(B(r,i).get()));continue}}else j.warn("unrecognized GUI edit: "+i);delete h[i],"range["===i.substr(i.length-8,6)&&(p[i.substr(0,i.length-9)]=1)}for(var m=0;m<f.length;m++){var g=f[m];!p[g]||(g=B(t,g).get())&&delete g.autorange}var _,y=r._tracePreGUI;for(_ in y){var v=y[_],b=null;for(i in v){if(!b){var x=function(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}(_,n);if(x<0){delete y[_];break}var w,x=function(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}(_,e,(w=n[x]._fullInput).index);if(x<0){delete y[_];break}b=e[x]}if(l=N(i,I)){if(l.attr?s=(o=B(r,l.attr).get())&&z(l.attr,t):(o=w.uirevision,void 0===(s=b.uirevision)&&(s=t.uirevision)),s&&s===o&&(null===(c=v[i])&&(c=void 0),te(d=(u=B(b,i)).get(),c))){u.set(X(B(w,i).get()));continue}}else j.warn("unrecognized GUI edit: "+i+" in trace uid "+_);delete v[i]}}}function re(e,t,n,r){var i,a,o=r.getValObject,s=r.flags,l=r.immutable,c=r.inArray,u=r.arrayIndex;function d(){var e=i.editType;c&&-1!==e.indexOf("arraydraw")?j.pushUnique(s.arrays[c],u):(G.update(s,i),"none"!==e&&s.nChanges++,r.transition&&i.anim&&s.nChangesAnim++,($.test(g)||Q.test(g))&&(s.rangesAltered[n[0]]=1),K.test(g)&&B(t,"_inputDomain").set(null),"datarevision"===a&&(s.newDataRevision=1))}function h(e){return"data_array"===e.valType||e.arrayOk}for(a in e){if(s.calc&&!r.transition)return;var f=e[a],p=t[a],m=n.concat(a),g=m.join(".");if("_"!==a.charAt(0)&&"function"!=typeof f&&f!==p){if(("tick0"===a||"dtick"===a)&&"geo"!==n[0]){var _=t.tickmode;if("auto"===_||"array"===_||!_)continue}if(("range"!==a||!t.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==t.type)&&(i=o(m))&&(!i._compareAsJSON||JSON.stringify(f)!==JSON.stringify(p))){var y,v=i.valType,b=h(i),x=Array.isArray(f),w=Array.isArray(p);if(x&&w){var T="_input_"+a,_=e[T],T=t[T];if(Array.isArray(_)&&_===T)continue}if(void 0===p)b&&x?s.calc=!0:d();else if(i._isLinkedToArray){var A=[],T=!1;c||(s.arrays[a]=A);var k=Math.min(f.length,p.length),M=Math.max(f.length,p.length);if(k!==M){if("arraydraw"!==i.editType){d();continue}T=!0}for(y=0;y<k;y++)re(f[y],p[y],m.concat(y),j.extendFlat({inArray:a,arrayIndex:y},r));if(T)for(y=k;y<M;y++)A.push(y)}else!v&&j.isPlainObject(f)?re(f,p,m,r):b?x&&w?(l&&(s.calc=!0),(l||r.newDataRevision)&&d()):x!==w?s.calc=!0:d():x&&w&&f.length===p.length&&String(f)===String(p)||d()}}}for(a in t)if(!(a in e||"_"===a.charAt(0)||"function"==typeof t[a])){if(h(i=o(n.concat(a)))&&Array.isArray(t[a]))return void(s.calc=!0);d()}}function ie(e){var t=e._fullLayout,n=e.getBoundingClientRect();j.equalDomRects(n,t._lastBBox)||(e=t._invTransform=j.inverseTransformMatrix(j.getFullTransformMatrix(e)),t._invScaleX=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]+e[0][2]*e[0][2]),t._invScaleY=Math.sqrt(e[1][0]*e[1][0]+e[1][1]*e[1][1]+e[1][2]*e[1][2]),t._lastBBox=n)}A.animate=function(p,m,g){if(p=j.getGraphDiv(p),!j.isPlotDiv(p))throw new Error("This element is not a Plotly plot: "+p+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var _=p._transitionData;_._frameQueue||(_._frameQueue=[]);var y=(g=F.supplyAnimationDefaults(g)).transition,v=g.frame;return void 0===_._frameWaitingCnt&&(_._frameWaitingCnt=0),new Promise(function(a,o){function e(e){if(0!==e.length){for(var t=0;t<e.length;t++){var n="byname"===e[t].type?F.computeFrame(p,e[t].name):e[t].data,r=(i=t,Array.isArray(v)?i>=v.length?v[0]:v[i]:v),i=(i=t,Array.isArray(y)?i>=y.length?y[0]:y[i]:y);i.duration=Math.min(i.duration,r.duration);i={frame:n,name:e[t].name,frameOpts:r,transitionOpts:i};t===e.length-1&&(i.onComplete=function(e,t){var n=0;return function(){if(e&&++n===t)return e()}}(a,2),i.onInterrupt=o),_._frameQueue.push(i)}"immediate"===g.mode&&(_._lastFrameAt=-1/0),_._animationRaf||function(){p.emit("plotly_animating"),_._lastFrameAt=-1/0,_._timeToNext=0,_._runningTransitions=0,_._currentFrame=null;var e=function(){_._animationRaf=window.requestAnimationFrame(e),Date.now()-_._lastFrameAt>_._timeToNext&&function(){_._currentFrame&&_._currentFrame.onComplete&&_._currentFrame.onComplete();var e=_._currentFrame=_._frameQueue.shift();{var t;e?(t=e.name?e.name.toString():null,p._fullLayout._currentFrame=t,_._lastFrameAt=Date.now(),_._timeToNext=e.frameOpts.duration,F.transition(p,e.frame.data,e.frame.layout,Y.coerceTraceIndices(p,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),p.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})):(p.emit("plotly_animated"),window.cancelAnimationFrame(_._animationRaf),_._animationRaf=null)}}()};e()}()}}var t,n=0;function r(e){return Array.isArray(y)?n>=y.length?e.transitionOpts=y[n]:e.transitionOpts=y[0]:e.transitionOpts=y,n++,e}var i=[],s=null==m,l=Array.isArray(m);if(!s&&!l&&j.isPlainObject(m))i.push({type:"object",data:r(j.extendFlat({},m))});else if(s||-1!==["string","number"].indexOf(typeof m))for(f=0;f<_._frames.length;f++)(t=_._frames[f])&&(!s&&String(t.group)!==String(m)||i.push({type:"byname",name:String(t.name),data:r({name:t.name})}));else if(l)for(f=0;f<m.length;f++){var c=m[f];-1!==["number","string"].indexOf(typeof c)?(c=String(c),i.push({type:"byname",name:c,data:r({name:c})})):j.isPlainObject(c)&&i.push({type:"object",data:r(j.extendFlat({},c))})}for(f=0;f<i.length;f++)if("byname"===(t=i[f]).type&&!_._frameHash[t.data.name])return j.warn('animate failure: frame not found: "'+t.data.name+'"'),void o();-1!==["next","immediate"].indexOf(g.mode)&&function(){if(0!==_._frameQueue.length){for(;_._frameQueue.length;){var e=_._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}p.emit("plotly_animationinterrupted",[])}}(),"reverse"===g.direction&&i.reverse();var u=p._fullLayout._currentFrame;if(u&&g.fromcurrent){var d=-1;for(f=0;f<i.length;f++)if("byname"===(t=i[f]).type&&t.name===u){d=f;break}if(0<d&&d<i.length-1){for(var h=[],f=0;f<i.length;f++)t=i[f],("byname"!==i[f].type||d<f)&&h.push(t);i=h}}0<i.length?e(i):(p.emit("plotly_animated"),a())})},A.addFrames=function(e,t,n){if(e=j.getGraphDiv(e),null==t)return Promise.resolve();if(!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,i,a,o=e._transitionData._frames,s=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);for(var l,c,u,d,h=o.length+2*t.length,f=[],p={},m=t.length-1;0<=m;m--)j.isPlainObject(t[m])&&(c=(s[l=t[m].name]||p[l]||{}).name,u=t[m].name,d=s[c]||p[c],c&&u&&"number"==typeof u&&d&&w<5&&(w++,j.warn('addFrames: overwriting frame "'+(s[c]||p[c]).name+'" with a frame whose name of type "number" also equates to "'+c+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&j.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[l]={name:l},f.push({frame:F.supplyFrameDefaults(t[m]),index:n&&void 0!==n[m]&&null!==n[m]?n[m]:h+m}));f.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var g=[],_=[],y=o.length;for(m=f.length-1;0<=m;m--){if("number"==typeof(r=f[m].frame).name&&j.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;s[r.name="frame "+e._transitionData._counter++];);if(s[r.name]){for(i=0;i<o.length&&(o[i]||{}).name!==r.name;i++);g.push({type:"replace",index:i,value:r}),_.unshift({type:"replace",index:i,value:o[i]})}else a=Math.max(0,Math.min(f[m].index,y)),g.push({type:"insert",index:a,value:r}),_.unshift({type:"delete",index:a}),y++}var v=F.modifyFrames,b=F.modifyFrames;return x&&x.add(e,v,[e,_],b,[e,g]),F.modifyFrames(e,g)},A.deleteFrames=function(e,t){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,a=[],o=[];if(!t)for(t=[],n=0;n<i.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;0<=n;n--)r=t[n],a.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:i[r]});var s=F.modifyFrames,l=F.modifyFrames;return x&&x.add(e,s,[e,o],l,[e,a]),F.modifyFrames(e,a)},A.addTraces=function e(t,n,r){t=j.getGraphDiv(t);var i,a,o=[],s=A.deleteTraces,l=e,c=[t,o],u=[t,n];for(function(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(i=t[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0!==(n=void 0===n||Array.isArray(n)?n:[n])&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,n,r),n=(n=Array.isArray(n)?n:[n]).map(function(e){return j.extendFlat({},e)}),Y.cleanData(n),i=0;i<n.length;i++)t.data.push(n[i]);for(i=0;i<n.length;i++)o.push(-n.length+i);if(void 0===r)return a=A.redraw(t),x.add(t,s,c,l,u),a;Array.isArray(r)||(r=[r]);try{E(t,o,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return x.startSequence(t),x.add(t,s,c,l,u),a=A.moveTraces(t,o,r),x.stopSequence(t),a},A.deleteTraces=function e(t,n){t=j.getGraphDiv(t);var r,i,a=[],o=A.addTraces,s=e,l=[t,a,n],c=[t,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(T(t,n=Array.isArray(n)?n:[n],"indices"),(n=b(n,t.data.length-1)).sort(j.sorterDes),r=0;r<n.length;r+=1)i=t.data.splice(n[r],1)[0],a.push(i);var u=A.redraw(t);return x.add(t,o,l,s,c),u},A.extendTraces=function e(t,n,r,i){n=a(t=j.getGraphDiv(t),n,r,i,function(e,t,n){var r,i,a,o;return j.isTypedArray(e)?n<0?(r=new e.constructor(0),i=s(e,t),r=n<0?(o=i,r):(o=r,i)):(o=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),r.set(e)):n<t.length?(a=t.length-n,o.set(t.subarray(a)),r.set(e),r.set(t.subarray(0,a),e.length)):(i=n-t.length,a=e.length-i,o.set(e.subarray(a)),o.set(t,i),r.set(e.subarray(0,a)))):(o=e.concat(t),r=0<=n&&n<o.length?o.splice(0,o.length-n):[]),[o,r]}),i=A.redraw(t),n=[t,n.update,r,n.maxPoints];return x.add(t,A.prependTraces,n,e,arguments),i},A.moveTraces=function e(t,n,r){var i,a=[],o=[],s=e,l=e,c=[t=j.getGraphDiv(t),r,n],u=[t,n,r];if(E(t,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],i=0;i<n.length;i++)r.push(-n.length+i);for(r=Array.isArray(r)?r:[r],n=b(n,t.data.length-1),r=b(r,t.data.length-1),i=0;i<t.data.length;i++)-1===n.indexOf(i)&&a.push(t.data[i]);for(i=0;i<n.length;i++)o.push({newIndex:r[i],trace:t.data[n[i]]});for(o.sort(function(e,t){return e.newIndex-t.newIndex}),i=0;i<o.length;i+=1)a.splice(o[i].newIndex,0,o[i].trace);t.data=a;var d=A.redraw(t);return x.add(t,s,c,l,u),d},A.prependTraces=function e(t,n,r,i){n=a(t=j.getGraphDiv(t),n,r,i,function(e,t,n){var r,i,a,o;return j.isTypedArray(e)?n<=0?(r=new e.constructor(0),i=s(t,e),i=n<0?(o=i,r):(o=r,i)):(o=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),i.set(e)):n<t.length?(a=t.length-n,o.set(t.subarray(0,a)),i.set(t.subarray(a)),i.set(e,a)):(a=n-t.length,o.set(t),o.set(e.subarray(0,a),t.length),i.set(e.subarray(a)))):(o=t.concat(e),i=0<=n&&n<o.length?o.splice(n,o.length):[]),[o,i]}),i=A.redraw(t),n=[t,n.update,r,n.maxPoints];return x.add(t,A.extendTraces,n,e,arguments),i},A.newPlot=function(e,t,n,r){return e=j.getGraphDiv(e),F.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),F.purge(e),A._doPlot(e,t,n,r)},A._doPlot=function(i,e,t,n){var r,a;if(i=j.getGraphDiv(i),m.init(i),j.isPlainObject(e)&&(e=(a=e).data,t=a.layout,n=a.config,r=a.frames),!1===m.triggerHandler(i,"plotly_beforeplot",[e,t,n]))return Promise.reject();e||t||j.isPlotDiv(i)||j.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",i),S(i,n),t=t||{},p.select(i).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(i._promises)||(i._promises=[]);var o=0===(i.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(Y.cleanData(e),o?i.data=e:i.data.push.apply(i.data,e),i.empty=!1),i.layout&&!o||(i.layout=Y.cleanLayout(t)),F.supplyDefaults(i);var s=i._fullLayout,e=s._has("cartesian");s._replotting=!0,(o||s._shouldCreateBgLayer)&&(function(e){var t=p.select(e),n=e._fullLayout;{var r;n._calcInverseTransform=ie,n._calcInverseTransform(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),n._uid||(r={},p.selectAll("defs").each(function(){this.id&&(r[this.id.split("-")[1]]=1)}),n._uid=j.randstr(r))}n._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);t=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=t.append("g").classed("imagelayer",!0),n._shapeLowerLayer=t.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);t=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=t.append("g").classed("imagelayer",!0),n._shapeUpperLayer=t.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(i),s._shouldCreateBgLayer&&delete s._shouldCreateBgLayer),g.initGradients(i),g.initPatterns(i),o&&V.saveShowSpikeInitial(i);var l=!i.calcdata||i.calcdata.length!==(i._fullData||[]).length;l&&F.doCalcdata(i);for(var c=0;c<i.calcdata.length;c++)i.calcdata[c][0].trace=i._fullData[c];i._context.responsive?i._responsiveChartHandler||(i._responsiveChartHandler=function(){j.isHidden(i)||F.resize(i)},window.addEventListener("resize",i._responsiveChartHandler)):j.clearResponsive(i);var u=j.extendFlat({},s._size),d=0;function h(){if(F.clearAutoMarginIds(i),k.drawMarginPushers(i),V.allowAutoMargin(i),s._has("pie"))for(var e=i._fullData,t=0;t<e.length;t++){var n=e[t];"pie"===n.type&&n.automargin&&F.allowAutoMargin(i,"pie."+n.uid+".automargin")}return F.doAutoMargin(i),F.previousPromises(i)}function f(){i._transitioning||(k.doAutoRangeAndConstraints(i),o&&V.saveRangeInitial(i),H.getComponentMethod("rangeslider","calcAutorange")(i))}return t=[F.previousPromises,function(){if(r)return A.addFrames(i,r)},function e(){for(var t=s._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(i);if(!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),s._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),s._glcanvas){s._glcanvas.attr("width",s.width).attr("height",s.height);var r=s._glcanvas.data()[0].regl;if(r&&(Math.floor(s.width)!==r._gl.drawingBufferWidth||Math.floor(s.height)!==r._gl.drawingBufferHeight)){if(r="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!d)return j.log(r+" Clearing graph and plotting again."),F.cleanPlot([],{},i._fullData,s),F.supplyDefaults(i),s=i._fullLayout,F.doCalcdata(i),d++,e();j.error(r)}}return"h"===s.modebar.orientation?s._modebardiv.style("height",null).style("width","100%"):s._modebardiv.style("width",null).style("height",s.height+"px"),F.previousPromises(i)},h,function(){if(F.didMarginChange(u,s._size))return j.syncOrAsync([h,k.layoutStyles],i)}],e&&t.push(function(){if(l)return j.syncOrAsync([H.getComponentMethod("shapes","calcAutorange"),H.getComponentMethod("annotations","calcAutorange"),f],i);f()}),t.push(k.layoutStyles),e&&t.push(function(){return V.draw(i,o?"":"redraw")},function(e){e._fullLayout._insideTickLabelsAutorange&&L(e,e._fullLayout._insideTickLabelsAutorange).then(function(){e._fullLayout._insideTickLabelsAutorange=void 0})}),t.push(k.drawData,k.finalDraw,_,F.addLinks,F.rehover,F.redrag,F.doAutoMargin,function(e){e._fullLayout._insideTickLabelsAutorange&&o&&V.saveRangeInitial(e,!0)},F.previousPromises),(t=!(t=j.syncOrAsync(t,i))||!t.then?Promise.resolve():t).then(function(){return M(i),i})},A.purge=function(e){var t=(e=j.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return F.cleanPlot([],{},n,t),F.purge(e),m.purge(e),t._container&&t._container.remove(),delete e._context,e},A.react=function(e,t,n,r){var i;e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var a=e._fullData,o=e._fullLayout;if(j.isPlotDiv(e)&&a&&o){j.isPlainObject(t)&&(t=(d=t).data,n=d.layout,r=d.config,i=d.frames);var s=!1;r&&(f=j.extendDeep({},e._context),e._context=void 0,S(e,r),s=function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var i=t[r],a=n[r];if(i!==a)if(j.isPlainObject(i)&&j.isPlainObject(a)){if(e(i,a))return!0}else{if(!Array.isArray(i)||!Array.isArray(a))return!0;if(i.length!==a.length)return!0;for(var o=0;o<i.length;o++)if(i[o]!==a[o]){if(!j.isPlainObject(i[o])||!j.isPlainObject(a[o]))return!0;if(e(i[o],a[o]))return!0}}}}(f,e._context)),e.data=t||[],Y.cleanData(e.data),e.layout=n||{},Y.cleanLayout(e.layout),ne(e.data,e.layout,a,o),F.supplyDefaults(e,{skipUpdateCalc:!0});var l=e._fullData,c=e._fullLayout,u=void 0===c.datarevision,d=c.transition,h=function(e,t,n,r,i){var a=G.layoutFlags();a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,re(t,n,[],{getValObject:function(e){return U.getLayoutValObject(n,e)},flags:a,immutable:r,transition:i,gd:e}),(a.plot||a.calc)&&(a.layoutReplot=!0);i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(e,o,c,u,d),f=h.newDataRevision,p=function(e,t,n,r,i,a){var o=t.length===n.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,c=G.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(e){return e=U.getTraceValObject(l,e),!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:c,immutable:r,transition:i,newDataRevision:a,gd:e},d={};for(s=0;s<t.length;s++)n[s]&&(l=n[s]._fullInput,F.hasMakesDataTransform(l)&&(l=n[s]),d[l.uid]||(d[l.uid]=1,re(t[s]._fullInput,l,[],u)));(c.calc||c.plot)&&(c.fullReplot=!0);i&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(e,a,l,u,d,f);if(ee(e)&&(h.layoutReplot=!0),p.calc||h.calc){e.calcdata=void 0;for(var m=Object.getOwnPropertyNames(c),g=0;g<m.length;g++){var _=m[g],y=_.substring(0,5);"xaxis"!==y&&"yaxis"!==y||(_=c[_]._emptyCategories)&&_()}}else F.supplyDefaultsUpdateCalc(e.calcdata,l);var l=[];if(i&&(e._transitionData={},F.createTransitionData(e),l.push(function(){return A.addFrames(e,i)})),c.transition&&!s&&(p.anim||h.anim))h.ticks&&l.push(k.doTicksRelayout),F.doCalcdata(e),k.doAutoRangeAndConstraints(e),l.push(function(){return F.transitionFromReact(e,p,h,o)});else if(p.fullReplot||h.layoutReplot||s)e._fullLayout._skipDefaults=!0,l.push(A._doPlot);else{for(var v in h.arrays){var b=h.arrays[v];if(b.length){var x=H.getComponentMethod(v,"drawOne");if(x!==j.noop)for(var w=0;w<b.length;w++)x(e,b[w]);else{var T=H.getComponentMethod(v,"draw");if(T===j.noop)throw new Error("cannot draw components: "+v);T(e)}}}l.push(F.previousPromises),p.style&&l.push(k.doTraceStyle),(p.colorbars||h.colorbars)&&l.push(k.doColorBars),h.legend&&l.push(k.doLegend),h.layoutstyle&&l.push(k.layoutStyles),h.axrange&&D(l),h.ticks&&l.push(k.doTicksRelayout),h.modebar&&l.push(k.doModeBar),h.camera&&l.push(k.doCamera),l.push(M)}l.push(F.rehover,F.redrag),(l=j.syncOrAsync(l,e))&&l.then||(l=Promise.resolve(e))}else l=A.newPlot(e,t,n,r);return l.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},A.redraw=function(e){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return Y.cleanData(e.data),Y.cleanLayout(e.layout),e.calcdata=void 0,A._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})},A.relayout=L,A.restyle=o,A.setPlotConfig=function(e){return j.extendFlat(d,e)},A.update=P,A._guiRelayout=i(L),A._guiRestyle=i(o),A._guiUpdate=i(P),A._storeDirectGUIEdit=function(e,t,n){for(var r in n)C(r,B(e,r).get(),n[r],t)}},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"../lib/events":223,"../lib/queue":245,"../plots/cartesian/axes":276,"../plots/cartesian/constants":283,"../plots/cartesian/graph_interact":286,"../plots/cartesian/select":296,"../plots/plots":311,"../registry":313,"./edit_types":258,"./helpers":259,"./manage_arrays":261,"./plot_config":263,"./plot_schema":264,"./subroutines":266,"@plotly/d3":11,"fast-isnumeric":15,"has-hover":46}],263:[function(e,t,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};!function e(t,n){for(var r in t){var i=t[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),e(i,n[r]))}}(r,i),t.exports={configAttributes:r,dfltConfig:i}},{}],264:[function(e,t,d){"use strict";var u=e("../registry"),n=e("../lib"),h=e("../plots/attributes"),f=e("../plots/layout_attributes"),r=e("../plots/frame_attributes"),a=e("../plots/animation_attributes"),o=e("./plot_config").configAttributes,s=e("./edit_types"),l=n.extendDeepAll,p=n.isPlainObject,m=n.isArrayOrTypedArray,c=n.nestedProperty,g=n.valObjectMeta,i="_isSubplotObj",_="_isLinkedToArray",n="_deprecated",y=[i,_,"_arrayAttrRegexps",n];function v(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(b(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!p(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!b(t[++n]))return!1}else if("info_array"===e.valType){var i=t[++n];if(!b(i))return!1;var a=e.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;r=t[n];if(!b(r))return!1;e=a[i][r]}else e=a[i]}else e=a}}return e}function b(e){return e===Math.round(e)&&0<=e}function x(e){return d.crawl(e,function(e,t,n){d.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(n[t+"src"]={valType:"string",editType:"none"}):p(e)&&(e.role="object")}),d.crawl(e,function(e,t,n){var r;!e||(r=e[_])&&(delete e[_],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}),function e(t){for(var n in t)if(p(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e),e}function w(e,t,n){n=c(e,n),t=l({},t.layoutAttributes);t[i]=!0,n.set(t)}function T(e,t,n){n=c(e,n);n.set(l(n.get()||{},t))}d.IS_SUBPLOT_OBJ=i,d.IS_LINKED_TO_ARRAY=_,d.DEPRECATED=n,d.UNDERSCORE_ATTRS=y,d.get=function(){var t={};u.allTypes.forEach(function(e){t[e]=function(e){var t,n;t=u.modules[e]._module,n=t.basePlotModule;var r={type:null},a=l({},h),o=l({},t.attributes);d.crawl(o,function(e,t,n,r,i){c(a,i).set(void 0),void 0===e&&c(o,i).set(void 0)}),l(r,a),u.traceIs(e,"noOpacity")&&delete r.opacity;u.traceIs(e,"showLegend")||(delete r.showlegend,delete r.legendgroup);u.traceIs(e,"noHover")&&(delete r.hoverinfo,delete r.hoverlabel);t.selectPoints||delete r.selectedpoints;l(r,o),n.attributes&&l(r,n.attributes);r.type=e;e={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:x(r)};t.layoutAttributes&&(l(r={},t.layoutAttributes),e.layoutAttributes=x(r));t.animatable||d.crawl(e,function(e){d.isValObject(e)&&"anim"in e&&delete e.anim});return e}(e)});var e,i={};return Object.keys(u.transformsRegistry).forEach(function(e){var n,r;i[e]=(n=e,e=u.transformsRegistry[n],r=l({},e.attributes),Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];t.schema&&t.schema.transforms&&t.schema.transforms[n]&&Object.keys(t.schema.transforms[n]).forEach(function(e){T(r,t.schema.transforms[n][e],e)})}),{attributes:x(r)})}),{defs:{valObjects:g,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:s.traces,layout:s.layout},impliedEdits:{}},traces:t,layout:function(){var e,t,n={};for(e in l(n,f),u.subplotsRegistry)if((t=u.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var r=0;r<t.attr.length;r++)w(n,t,t.attr[r]);else{var i="subplot"===t.attr?t.name:t.attr;w(n,t,i)}for(e in u.componentsRegistry){var a=(t=u.componentsRegistry[e]).schema;if(a&&(a.subplots||a.layout)){a=a.subplots;if(a&&a.xaxis&&!a.yaxis)for(var o in a.xaxis)delete n.yaxis[o]}else"colorscale"===t.name?l(n,t.layoutAttributes):t.layoutAttributes&&T(n,t.layoutAttributes,t.name)}return{layoutAttributes:x(n)}}(),transforms:i,frames:(x(e={frames:l({},r)}),e.frames),animation:x(a),config:x(o)}},d.crawl=function(r,i,e,a){var o=e||0;a=a||"",Object.keys(r).forEach(function(e){var t,n=r[e];-1===y.indexOf(e)&&(i(n,e,r,o,t=(a?a+".":"")+e),d.isValObject(n)||p(n)&&"impliedEdits"!==e&&d.crawl(n,i,o+1,t))})},d.isValObject=function(e){return e&&void 0!==e.valType},d.findArrayAttributes=function(e){var i,s,l=[],c=[],u=[];function t(e,t,n,r){c=c.slice(0,r).concat([t]),u=u.slice(0,r).concat([e&&e._isLinkedToArray]),!e||"data_array"!==e.valType&&!0!==e.arrayOk||"colorbar"===c[r-1]&&("ticktext"===t||"tickvals"===t)||function e(t,n,r){var i=t[c[n]];var a=r+c[n];if(n===c.length-1)m(i)&&l.push(s+a);else if(u[n]){if(Array.isArray(i))for(var o=0;o<i.length;o++)p(i[o])&&e(i[o],n+1,a+"["+o+"].")}else p(i)&&e(i,n+1,a+".")}(i,0,"")}i=e,s="",d.crawl(h,t),e._module&&e._module.attributes&&d.crawl(e._module.attributes,t);var n=e.transforms;if(n)for(var r=0;r<n.length;r++){var a=n[r],o=a._module;o&&(s="transforms["+r+"].",i=a,d.crawl(o.attributes,t))}return l},d.getTraceValObject=function(e,t){var n,r=t[0],i=1;if("transforms"===r){if(1===t.length)return h.transforms;var a=e.transforms;if(!Array.isArray(a)||!a.length)return!1;var o=t[1];if(!b(o)||o>=a.length)return!1;a=(n=(u.transformsRegistry[a[o].type]||{}).attributes)&&n[t[2]],i=3}else{o=e._module;if(!(o=o||(u.modules[e.type||h.type.dflt]||{})._module))return!1;(a=(n=o.attributes)&&n[r])||(o=o.basePlotModule)&&o.attributes&&(a=o.attributes[r]),a=a||h[r]}return v(a,t,i)},d.getLayoutValObject=function(e,t){return v(function(e,t){var n,r,i,a,o,s=e._basePlotModules;if(s){for(n=0;n<s.length;n++){if((i=s[n]).attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!o&&i.layoutAttributes&&(o=i.layoutAttributes)}var l=i.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(o)return o}var c=e._modules;if(c)for(n=0;n<c.length;n++)if((a=c[n].layoutAttributes)&&t in a)return a[t];for(r in u.componentsRegistry){if("colorscale"===(i=u.componentsRegistry[r]).name&&0===t.indexOf("coloraxis"))return i.layoutAttributes[t];if(!i.schema&&t===i.name)return i.layoutAttributes}return t in f&&f[t]}(e,t[0]),t,1)}},{"../lib":230,"../plots/animation_attributes":270,"../plots/attributes":272,"../plots/frame_attributes":306,"../plots/layout_attributes":309,"../registry":313,"./edit_types":258,"./plot_config":263}],265:[function(e,t,n){"use strict";var d=e("../lib"),o=e("../plots/attributes"),h="templateitemname",r={name:{valType:"string",editType:"none"}};function c(e){return e&&"string"==typeof e}function i(e){var t=e.length-1;return"s"!==e.charAt(t)&&d.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}r[h]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=r.name,t[h]=r[h],t},n.traceTemplater=function(n){var r,i,a={};for(r in n)i=n[r],Array.isArray(i)&&i.length&&(a[r]=0);return{newTrace:function(e){var t={type:r=d.coerce(e,{},o,"type"),_template:null};return r in a&&(i=n[r],e=a[r]%i.length,a[r]++,t._template=i[e]),t}}},n.newContainer=function(e,t,n){var r=e._template,n=r&&(r[t]||n&&r[n]);return d.isPlainObject(n)||(n=null),e[t]={_template:n}},n.arrayTemplater=function(e,t,a){var e=e._template,o=e&&e[i(t)],s=e&&e[t];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(e){var t={name:e.name,_input:e},n=t[h]=e[h];if(!c(n))return t._template=o,t;for(var r=0;r<s.length;r++){var i=s[r];if(i.name===n)return l[n]=1,t._template=i,t}return t[a]=e[a]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<s.length;t++){var n,r=s[t],i=r.name;c(i)&&!l[i]&&((n={_template:r,name:i,_input:{_templateitemname:i}})[h]=r[h],e.push(n),l[i]=1)}return e}}},n.arrayDefaultKey=i,n.arrayEditor=function(i,e,t){var n,r=(d.nestedProperty(i,e).get()||[]).length,a=t._index,o=r<=a&&(t._input||{})._templateitemname,s=e+"["+(a=o?r:a)+"]";function l(){n={},o&&(n[s]={},n[s][h]=o)}function c(e,t){o?d.nestedProperty(n[s],e).set(t):n[s+"."+e]=t}function u(){var e=n;return l(),e}return l(),{modifyBase:function(e,t){n[e]=t},modifyItem:c,getUpdateObj:u,applyUpdate:function(e,t){e&&c(e,t);var n,r=u();for(n in r)d.nestedProperty(i,n).set(r[n])}}}},{"../lib":230,"../plots/attributes":272}],266:[function(e,t,z){"use strict";var F=e("@plotly/d3"),u=e("../registry"),j=e("../plots/plots"),B=e("../lib"),d=e("../lib/clear_gl_canvases"),H=e("../components/color"),U=e("../components/drawing"),i=e("../components/titles"),V=e("../components/modebar"),q=e("../plots/cartesian/axes"),Y=e("../constants/alignment"),n=e("../plots/cartesian/constraints"),l=n.enforce,c=n.clean,h=e("../plots/cartesian/autorange").doAutoRange;function r(e){var t,r,n=e._fullLayout,i=n._size,a=i.p,o=q.list(e,"",!0);if(n._paperdiv.style({width:e._context.responsive&&n.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":n.width+"px",height:e._context.responsive&&n.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":n.height+"px"}).selectAll(".main-svg").call(U.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor),z.drawMainTitle(e),V.manage(e),!n._has("cartesian"))return j.previousPromises(e);function s(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-a-r:t._offset+t._length+a+r:i.t+i.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+a+r:t._offset-a-r:i.l+i.w*(e.position||0)+r%1}for(t=0;t<o.length;t++){var l,c=(l=o[t])._anchorAxis;l._linepositions={},l._lw=U.crispRound(e,l.linewidth,1),l._mainLinePosition=s(l,c,l.side),l._mainMirrorPosition=l.mirror&&c?s(l,c,Y.OPPOSITE_SIDE[l.side]):null}var u,d,h,f,p=[],m=[],g=[],_=1===H.opacity(n.paper_bgcolor)&&1===H.opacity(n.plot_bgcolor)&&n.paper_bgcolor===n.plot_bgcolor;for(r in n._plots)(f=n._plots[r]).mainplot?(f.bg&&f.bg.remove(),f.bg=void 0):(u=f.xaxis.domain,d=f.yaxis.domain,h=f.plotgroup,!function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&(a[0]<t[1]&&a[1]>t[0]))return 1}}(u,d,g)?(h.select("rect.bg").remove(),g.push([u,d]),_||(p.push(r),m.push(r))):(d=h.node(),h=f.bg=B.ensureSingle(h,"rect","bg"),d.insertBefore(h.node(),d.childNodes[0]),m.push(r)));var y,v,b,x,w,T,A=n._bgLayer.selectAll(".bg").data(p);for(A.enter().append("rect").classed("bg",!0),A.exit().remove(),A.each(function(e){n._plots[e].bg=F.select(this)}),t=0;t<m.length;t++)f=n._plots[m[t]],M=f.xaxis,S=f.yaxis,f.bg&&void 0!==M._offset&&void 0!==S._offset&&f.bg.call(U.setRect,M._offset-a,S._offset-a,M._length+2*a,S._length+2*a).call(H.fill,n.plot_bgcolor).style("stroke-width",0);if(!n._hasOnlyLargeSploms)for(r in n._plots){var k,M=(f=n._plots[r]).xaxis,S=f.yaxis,E=f.clipId="clip"+n._uid+r+"plot",C=B.ensureSingleById(n._clips,"clipPath",E,function(e){e.classed("plotclip",!0).append("rect")});f.clipRect=C.select("rect").attr({width:M._length,height:S._length}),U.setTranslate(f.plot,M._offset,S._offset),E=f._hasClipOnAxisFalse?(k=null,E):(k=E,null),U.setClipUrl(f.plot,k,e),f.layerClipId=E}function L(e){return"M"+y+","+e+"H"+v}function D(e){return"M"+M._offset+","+e+"h"+M._length}function O(e){return"M"+e+","+x+"V"+b}function P(e){return"M"+e+","+S._offset+"v"+S._length}function R(e,t,n){if(!e.showline||r!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);n=t(e._mainLinePosition);return e.mirror&&(n+=t(e._mainMirrorPosition)),n}for(r in n._plots){f=n._plots[r],M=f.xaxis,S=f.yaxis;var I="M0,0";G(M,r)&&(w=W(M,"left",S,o),y=M._offset-(w?a+w:0),T=W(M,"right",S,o),v=M._offset+M._length+(T?a+T:0),N=s(M,S,"bottom"),w=s(M,S,"top"),!(T=!M._anchorAxis||r!==M._mainSubplot)||"allticks"!==M.mirror&&"all"!==M.mirror||(M._linepositions[r]=[N,w]),I=R(M,L,D),T&&M.showline&&("all"===M.mirror||"allticks"===M.mirror)&&(I+=L(N)+L(w)),f.xlines.style("stroke-width",M._lw+"px").call(H.stroke,M.showline?M.linecolor:"rgba(0,0,0,0)")),f.xlines.attr("d",I);var N="M0,0";G(S,r)&&(w=W(S,"bottom",M,o),b=S._offset+S._length+(w?a:0),I=W(S,"top",M,o),x=S._offset-(I?a:0),w=s(S,M,"left"),I=s(S,M,"right"),!(T=!S._anchorAxis||r!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[r]=[w,I]),N=R(S,O,P),T&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(N+=O(w)+O(I)),f.ylines.style("stroke-width",S._lw+"px").call(H.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),f.ylines.attr("d",N)}return q.makeClipPaths(e),j.previousPromises(e)}function G(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function o(e,t,n){if(n.showline&&n._lw){if("all"===n.mirror||"allticks"===n.mirror)return 1;var r=n._anchorAxis;if(r){var i=Y.FROM_BL[t];return n.side===t?r.domain[i]===e.domain[i]:n.mirror&&r.domain[1-i]===e.domain[1-i]}}}function W(e,t,n,r){if(o(e,t,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&o(e,t,a))return a._lw}return 0}z.layoutStyles=function(e){return B.syncOrAsync([j.doAutoMargin,r],e)},z.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var t=e.title,e="middle";B.isRightAnchor(t)?e="end":B.isLeftAnchor(t)&&(e="start");return e}(t),r=function(e){var t=e.title,e="0em";B.isTopAnchor(t)?e=Y.CAP_SHIFT+"em":B.isMiddleAnchor(t)&&(e=Y.MID_SHIFT+"em");return e}(t);i.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:function(e,t){var n=e.title,r=e._size,i=0;"start"===t?i=n.pad.l:"end"===t&&(i=-n.pad.r);return"paper"!==n.xref?e.width*n.x+i:r.l+r.w*n.x+i}(t,n),y:function(e,t){var n=e.title,r=e._size,i=0;"0em"!==t&&t?t===Y.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b;return"auto"===n.y?r.t/2:"paper"!==n.yref?e.height-e.height*n.y+i:r.t+r.h-r.h*n.y+i}(t,r),"text-anchor":n,dy:r}})},z.doTraceStyle=function(e){for(var t=e.calcdata,n=[],r=0;r<t.length;r++){var i=t[r],a=i[0]||{},o=a.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(i,o);s=s.editStyle;s&&n.push({fn:s,cd0:a})}if(n.length){for(r=0;r<n.length;r++){var c=n[r];c.fn(e,c.cd0)}d(e),z.redrawReglTraces(e)}return j.style(e),u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doColorBars=function(e){return u.getComponentMethod("colorbar","draw")(e),j.previousPromises(e)},z.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,u.call("_doPlot",e,"",t)},z.doLegend=function(e){return u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doTicksRelayout=function(e){return q.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(u.subplotsRegistry.splom.updateGrid(e),d(e),z.redrawReglTraces(e)),z.drawMainTitle(e),j.previousPromises(e)},z.doModeBar=function(e){var t=e._fullLayout;V.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return j.previousPromises(e)},z.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var i=t[n[r]];i._scene.setViewport(i)}},z.drawData=function(e){var t=e._fullLayout;d(e);for(var n=t._basePlotModules,r=0;r<n.length;r++)n[r].plot(e);return z.redrawReglTraces(e),j.style(e),u.getComponentMethod("shapes","draw")(e),u.getComponentMethod("annotations","draw")(e),u.getComponentMethod("images","draw")(e),t._replotting=!1,j.previousPromises(e)},z.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,i=e._fullData,a=[],o=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<i.length;n++){var s=i[n];!0===s.visible&&0!==s._length&&("splom"===s.type?t._splomScenes[s.uid].draw():"scattergl"===s.type?B.pushUnique(a,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&B.pushUnique(o,s.subplot))}for(n=0;n<a.length;n++)(r=t._plots[a[n]])._scene&&r._scene.draw();for(n=0;n<o.length;n++)(r=t[o[n]]._subplot)._scene&&r._scene.draw()}},z.doAutoRangeAndConstraints=function(e){for(var t,n=q.list(e,"",!0),r={},i=0;i<n.length;i++)if(!r[(t=n[i])._id]){r[t._id]=1,c(e,t),h(e,t);var a=t._matchGroup;if(a)for(var o in a){var s=q.getFromId(e,o);h(e,s,t.range),r[o]=1}}l(e)},z.finalDraw=function(e){u.getComponentMethod("rangeslider","draw")(e),u.getComponentMethod("rangeselector","draw")(e)},z.drawMarginPushers=function(e){u.getComponentMethod("legend","draw")(e),u.getComponentMethod("rangeselector","draw")(e),u.getComponentMethod("sliders","draw")(e),u.getComponentMethod("updatemenus","draw")(e),u.getComponentMethod("colorbar","draw")(e)}},{"../components/color":100,"../components/drawing":122,"../components/modebar":163,"../components/titles":198,"../constants/alignment":205,"../lib":230,"../lib/clear_gl_canvases":218,"../plots/cartesian/autorange":275,"../plots/cartesian/axes":276,"../plots/cartesian/constraints":284,"../plots/plots":311,"../registry":313,"@plotly/d3":11}],267:[function(e,t,n){"use strict";var y=e("../lib"),v=y.isPlainObject,d=e("./plot_schema"),p=e("../plots/plots"),h=e("../plots/attributes"),b=e("./plot_template"),m=e("./plot_config").dfltConfig;function f(s,e){s=y.extendDeep({},s);var t,l,n=Object.keys(s).sort();function r(e,t,n){if(v(t)&&v(e))f(e,t);else if(Array.isArray(t)&&Array.isArray(e)){var r=b.arrayTemplater({_template:s},n);for(l=0;l<t.length;l++){var i=t[l],a=r.newItem(i)._template;a&&f(a,i)}var o=r.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(t=0;t<n.length;t++){var i=n[t],a=s[i];if(i in e?r(a,e[i],i):e[i]=a,x(i)===i)for(var o in e){var c=x(o);o===c||c!==i||o in s||r(a,e[o],i)}}}function x(e){return e.replace(/[0-9]+$/,"")}function w(e,t,n,r,i){var a,o=i&&n(i);for(a in e){var s,l=e[a],c=T(e,a,r),u=T(e,a,i),d=n(u);if(d||(s=x(a))!==a&&(d=n(u=T(e,s,i))),(!o||o!==d)&&!(!d||d._noTemplating||"data_array"===d.valType||d.arrayOk&&Array.isArray(l)))if(!d.valType&&v(l))w(l,t,n,c,u);else if(d._isLinkedToArray&&Array.isArray(l))for(var h=!1,f=0,p={},m=0;m<l.length;m++){var g,_=l[m];v(_)&&((g=_.name)?p[g]||(w(_,t,n,T(l,f,c),T(l,f,u)),f++,p[g]=1):h||(g=T(e,b.arrayDefaultKey(a),r),w(_,t,n,_=T(l,f,c),T(l,f,u)),_=y.nestedProperty(t,_),y.nestedProperty(t,g).set(_.get()),_.set(null),h=!0))}else y.nestedProperty(t,c).set(l)}}function T(e,t,n){t=n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t;return t}function g(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=y.isPlainObject(e)?e:y.getGraphDiv(e),e=y.extendDeep({_context:m},{data:e.data,layout:e.layout}),p.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var r={data:{},layout:{}};t.forEach(function(e){var t={};w(e,t,function(e,t){return d.getTraceValObject(e,y.nestedProperty({},t).parts)}.bind(null,e));e=y.coerce(e,{},h,"type");(r.data[e]||(r.data[e]=[])).push(t)}),w(n,r.layout,function(e,t){return d.getLayoutValObject(e,y.nestedProperty({},t).parts)}.bind(null,n)),delete r.layout.template;t=n.template;if(v(t)){var i,a,o,s,l,c,n=t.layout;v(n)&&f(n,r.layout);var u=t.data;if(v(u)){for(a in r.data)if(o=u[a],Array.isArray(o)){for(c=(l=r.data[a]).length,s=o.length,i=0;i<c;i++)f(o[i%s],l[i]);for(i=c;i<s;i++)l.push(y.extendDeep({},o[i]))}for(a in u)a in r.data||(r.data[a]=y.extendDeep([],u[a]))}}return r},n.validateTemplate=function(e,t){var n=y.extendDeep({},{_context:m,data:e.data,layout:e.layout}),r=n.layout||{},e=(t=!v(t)?r.template||{}:t).layout,i=t.data,a=[];n.layout=r,n.layout.template=t,p.supplyDefaults(n);var t=n._fullLayout,o=n._fullData,s={};if(v(e)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&v(t[r])){for(var i=x(r),a=[],o=0;o<n.length;o++)a.push(T(t,r,n[o])),i!==r&&a.push(T(t,i,n[o]));for(o=0;o<a.length;o++)s[a[o]]=1;e(t[r],a)}}(t,["layout"]),function e(t,n){for(var r in t){var i;-1===r.indexOf("defaults")&&v(t[r])&&(i=T(t,r,n),s[i]?e(t[r],i):a.push({code:"unused",path:i}))}}(e,"layout")):a.push({code:"layout"}),v(i)){for(var l={},c=0;c<o.length;c++){var u,d=o[c];l[u=d.type]=(l[u]||0)+1,d._fullInput._template||a.push({code:"missing",index:d._fullInput.index,traceType:u})}for(u in i){var h=i[u].length,f=l[u]||0;f<h?a.push({code:"unused",traceType:u,templateCount:h,dataCount:f}):h<f&&a.push({code:"reused",traceType:u,templateCount:h,dataCount:f})}}else a.push({code:"data"});if(!function e(t,n){for(var r in t){var i;"_"!==r.charAt(0)&&(i=t[r],r=T(t,r,n),v(i)?(Array.isArray(t)&&!1===i._template&&i.templateitemname&&a.push({code:"missing",path:r,templateitemname:i.templateitemname}),e(i,r)):Array.isArray(i)&&function(e){for(var t=0;t<e.length;t++)if(v(e[t]))return 1}(i)&&e(i,r))}}({data:o,layout:t},""),a.length)return a.map(g)}},{"../lib":230,"../plots/attributes":272,"../plots/plots":311,"./plot_config":263,"./plot_schema":264,"./plot_template":265}],268:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),x=e("./plot_api"),w=e("../plots/plots"),T=e("../lib"),A=e("../snapshot/helpers"),k=e("../snapshot/tosvg"),M=e("../snapshot/svgtoimg"),S=e("../version").version,E={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};t.exports=function(e,n){var r,t,i,a;function o(e){return!(e in n)||T.validate(n[e],E[e])}if(n=n||{},a=T.isPlainObject(e)?(r=e.data||[],t=e.layout||{},i=e.config||{},{}):(e=T.getGraphDiv(e),r=T.extendDeep([],e.data),t=T.extendDeep({},e.layout),i=e._context,e._fullLayout||{}),!o("width")&&null!==n.width||!o("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+T.join2(E.format.values,", "," or ")+".");var s={};function l(e,t){return T.coerce(n,s,E,e,t)}var c=l("format"),u=l("width"),d=l("height"),h=l("scale"),e=l("setBackground"),f=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var m=T.extendFlat({},t);u?m.width=u:null===n.width&&b(a.width)&&(m.width=a.width),d?m.height=d:null===n.height&&b(a.height)&&(m.height=a.height);var g=T.extendFlat({},i,{_exportedPlot:!0,staticPlot:!0,setBackground:e}),_=A.getRedrawFunc(p);function y(){return new Promise(function(e){setTimeout(e,A.getDelay(p._fullLayout))})}function v(){return new Promise(function(e,t){var n=k(p,c,h),r=p._fullLayout.width,i=p._fullLayout.height;function a(){x.purge(p),document.body.removeChild(p)}if("full-json"===c){var o=w.graphJson(p,!1,"keepdata","object",!0,!0);return o.version=S,o=JSON.stringify(o),a(),e(f?o:A.encodeJSON(o))}if(a(),"svg"===c)return e(f?n:A.encodeSVG(n));o=document.createElement("canvas");o.id=T.randstr(),M({format:c,width:r,height:i,scale:h,canvas:o,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(t,n){x.newPlot(p,r,m,g).then(_).then(y).then(v).then(function(e){t((e=e,f?e.replace(A.IMAGE_URL_PREFIX,""):e))}).catch(function(e){n(e)})})}},{"../lib":230,"../plots/plots":311,"../snapshot/helpers":317,"../snapshot/svgtoimg":319,"../snapshot/tosvg":321,"../version":386,"./plot_api":262,"fast-isnumeric":15}],269:[function(e,t,n){"use strict";var D=e("../lib"),b=e("../plots/plots"),x=e("./plot_schema"),w=e("./plot_config").dfltConfig,O=D.isPlainObject,P=Array.isArray,R=D.isArrayOrTypedArray;function I(e,t,n,r,i,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=a.slice();c.push(l);var u=e[l],d=t[l],h=function(e,t){if(t in e)return e[t];t=z(t);return e[t.keyMinusId]}(n,l),f=(h||{}).valType,p="info_array"===f,m="colorscale"===f,g=(h||{}).items;if(function(e,t){var n=z(t),r=n.keyMinusId,n=n.id;if(r in e&&e[r]._isSubplotObj&&n)return!0;return t in e}(n,l))if(O(u)&&O(d)&&"any"!==f)I(u,d,h,r,i,c);else if(p&&P(u)){u.length>d.length&&r.push(N("unused",i,c.concat(d.length)));var _,y,v,b,x=d.length,w=Array.isArray(g);if(w&&(x=Math.min(x,g.length)),2===h.dimensions)for(_=0;_<x;_++)if(P(u[_])){u[_].length>d[_].length&&r.push(N("unused",i,c.concat(_,d[_].length)));for(var T=d[_].length,A=0;A<(w?Math.min(T,g[_].length):T);A++)y=w?g[_][A]:g,v=u[_][A],b=d[_][A],D.validate(v,y)?b!==v&&b!==+v&&r.push(N("dynamic",i,c.concat(_,A),v,b)):r.push(N("value",i,c.concat(_,A),v))}else r.push(N("array",i,c.concat(_),u[_]));else for(_=0;_<x;_++)y=w?g[_]:g,v=u[_],b=d[_],D.validate(v,y)?b!==v&&b!==+v&&r.push(N("dynamic",i,c.concat(_),v,b)):r.push(N("value",i,c.concat(_),v))}else if(h.items&&!p&&P(u)){for(var k=g[Object.keys(g)[0]],M=[],S=0;S<d.length;S++){var E,C,L=d[S]._index||S;(C=c.slice()).push(L),O(u[L])&&O(d[S])&&(M.push(L),E=u[L],L=d[S],O(E)&&!1!==E.visible&&!1===L.visible?r.push(N("invisible",i,C)):I(E,L,k,r,i,C))}for(S=0;S<u.length;S++)(C=c.slice()).push(S),O(u[S])?-1===M.indexOf(S)&&r.push(N("unused",i,C)):r.push(N("object",i,C,u[S]))}else!O(u)&&O(d)?r.push(N("object",i,c,u)):R(u)||!R(d)||p||m?l in t?D.validate(u,h)?"enumerated"===h.valType&&(h.coerceNumber&&u!==+d||u!==d)&&r.push(N("dynamic",i,c,u,d)):r.push(N("value",i,c,u)):r.push(N("unused",i,c,u)):r.push(N("array",i,c,u));else r.push(N("schema",i,c))}}return r}t.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,r,i=x.get(),a=[],o={_context:D.extendFlat({},w)};P(e)?(o.data=D.extendDeep([],e),n=e):(o.data=[],n=[],a.push(N("array","data"))),O(t)?(o.layout=D.extendDeep({},t),r=t):(o.layout={},r={},1<arguments.length&&a.push(N("object","layout"))),b.supplyDefaults(o);for(var s=o._fullData,l=n.length,c=0;c<l;c++){var u=n[c],d=["data",c];if(O(u)){var h=s[c],f=h.type,p=i.traces[f].attributes;!(p.type={valType:"enumerated",values:[f]})===h.visible&&!1!==u.visible&&a.push(N("invisible",d)),I(u,h,p,a,d);var m=u.transforms,g=h.transforms;if(m){P(m)||a.push(N("array",d,["transforms"])),d.push("transforms");for(var _=0;_<m.length;_++){var y=["transforms",_],v=m[_].type;O(m[_])?((v=i.transforms[v]?i.transforms[v].attributes:{}).type={valType:"enumerated",values:Object.keys(i.transforms)},I(m[_],g[_],v,a,d,y)):a.push(N("object",d,y))}}}else a.push(N("object",d))}return I(r,o._fullLayout,function(e,t){for(var n=e.layout.layoutAttributes,r=0;r<t.length;r++){var i=t[r],a=e.traces[i.type],o=a.layoutAttributes;o&&(i.subplot?D.extendFlat(n[a.attributes.subplot.dflt],o):D.extendFlat(n,o))}return n}(i,s),a,"layout"),0===a.length?void 0:a};var l={object:function(e,t){t="layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":i(e)+"key "+t;return t+" must be linked to an object container"},array:function(e,t){t="data"===e?"The data argument":i(e)+"key "+t;return t+" must be linked to an array container"},schema:function(e,t){return i(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){n=O(n)?"container":"key";return i(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[i(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?i(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[i(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function i(e){return P(e)?"In data trace "+e[1]+", ":"In "+e+", "}function N(e,t,n,r,i){var a;n=n||"";var o=P(t)?(a=t[0],t[1]):(a=t,null),s=function(e){if(!P(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),i=l[e](t,s,r,i);return D.log(i),{code:e,container:a,trace:o,path:n,astr:s,msg:i}}var r=D.counterRegex("([a-z]+)");function z(e){e=e.match(r);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":230,"../plots/plots":311,"./plot_config":263,"./plot_schema":264}],270:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],271:[function(e,t,n){"use strict";var p=e("../lib"),m=e("../plot_api/plot_template");t.exports=function(e,t,n){var r,i=n.name,a=n.inclusionAttr||"visible",o=t[i],s=p.isArrayOrTypedArray(e[i])?e[i]:[],l=t[i]=[],c=m.arrayTemplater(t,i,a);for(f=0;f<s.length;f++){var u=s[f];p.isPlainObject(u)?r=c.newItem(u):(r=c.newItem({}))[a]=!1,r._index=f,!1!==r[a]&&n.handleItemDefaults(u,r,t,n),l.push(r)}var d=c.defaultItems();for(f=0;f<d.length;f++)(r=d[f])._index=l.length,n.handleItemDefaults({},r,t,n,{}),l.push(r);if(p.isArrayOrTypedArray(o))for(var h=Math.min(o.length,l.length),f=0;f<h;f++)p.relinkPrivateKeys(l[f],o[f]);return l}},{"../lib":230,"../plot_api/plot_template":265}],272:[function(e,t,n){"use strict";var r=e("./font_attributes"),e=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:r({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":131,"./font_attributes":305}],273:[function(e,t,n){"use strict";var v=e("fast-isnumeric"),r=e("../../lib"),b=r.dateTime2ms,x=r.incrementMonth,w=e("../../constants/numerical").ONEAVGMONTH;t.exports=function(e,t,n,r){if("date"!==t.type)return r;var i=e[n+"periodalignment"];if(!i)return r;var a,o=e[n+"period"];if(v(o)){if((o=+o)<=0)return r}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(0<s&&Math.round(s)===s))return r;a=s}for(var l=t.calendar,c="start"===i,u="end"===i,n=e[n+"period0"],d=b(n,l)||0,h=[],f=r.length,p=0;p<f;p++){var m,g,_,y=r[p];if(a){for(m=Math.round((y-d)/(a*w)),_=x(d,a*m,l);y<_;)_=x(_,-a,l);for(;_<=y;)_=x(_,a,l);g=x(_,-a,l)}else{for(_=d+(m=Math.round((y-d)/o))*o;y<_;)_-=o;for(;_<=y;)_+=o;g=_-o}h[p]=c?g:u?_:(g+_)/2}return h}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],274:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],275:[function(e,t,n){"use strict";var f=e("@plotly/d3"),S=e("fast-isnumeric"),k=e("../../lib"),E=e("../../constants/numerical").FP_SAFE,a=e("../../registry"),p=e("../../components/drawing"),e=e("./axis_ids"),m=e.getFromId,s=e.isLinked;function o(e,t){var n,r=[],i=e._fullLayout,a=C(i,t,0),o=C(i,t,1),s=L(e,t),l=s.min,c=s.max;if(0===l.length||0===c.length)return k.simpleMap(t.range,t.r2l);for(var u=l[0].val,d=c[0].val,h=1;h<l.length&&u===d;h++)u=Math.min(u,l[h].val);for(h=1;h<c.length&&u===d;h++)d=Math.max(d,c[h].val);var f=!1;t.range&&(f=(b=k.simpleMap(t.range,t.r2l))[1]<b[0]),"reversed"===t.autorange&&(t.autorange=f=!0);var p,m,g,_,y,v,b,x=t.rangemode,i="tozero"===x,e="nonnegative"===x,w=t._length,T=w/10,A=0;for(h=0;h<l.length;h++)for(p=l[h],n=0;n<c.length;n++)0<(v=(m=c[n]).val-p.val-M(t,p.val,m.val))&&(T<(y=w-a(p)-o(m))?A<v/y&&(g=p,_=m,A=v/y):A<v/w&&(g={val:p.val,nopad:1},_={val:m.val,nopad:1},A=v/w));return r=u===d?(s=u-1,b=u+1,i?0===u?[0,1]:(x=(0<u?c:l).reduce(function(e,t){return Math.max(e,o(t))},0),x=u/(1-Math.min(.5,x/w)),0<u?[0,x]:[x,0]):e?[Math.max(0,s),Math.max(1,b)]:[s,b]):(i?(0<=g.val&&(g={val:0,nopad:1}),_.val<=0&&(_={val:0,nopad:1})):e&&(g.val-A*a(g)<0&&(g={val:0,nopad:1}),_.val<=0&&(_={val:1,nopad:1})),A=(_.val-g.val-M(t,p.val,m.val))/(w-a(g)-o(_)),[g.val-A*a(g),_.val+A*o(_)]),f&&r.reverse(),k.simpleMap(r,t.l2r||Number)}function M(e,t,n){var r=0;if(e.rangebreaks)for(var i=e.locateBreaks(t,n),a=0;a<i.length;a++){var o=i[a];r+=o.max-o.min}return r}function C(e,t,n){var r,i=.05*t._length,a=t._anchorAxis||{};-1===(t.ticklabelposition||"").indexOf("inside")&&-1===(a.ticklabelposition||"").indexOf("inside")||(r=!(r="reversed"===t.autorange)?(a=k.simpleMap(t.range,t.r2l))[1]<a[0]:r)&&(n=!n);var o=0;return s(e,t._id)||(o=function(e,t,n){var r,i=0,a="x"===t._id.charAt(0);for(r in e._plots){var o=e._plots[r];if(t._id===o.xaxis._id||t._id===o.yaxis._id){var s=(a?o.yaxis:o.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===s.side||"bottom"===s.side)||n&&("top"===s.side||"right"===s.side))){if(s._vals){var o=k.deg2rad(s._tickAngles[s._id+"tick"]||0),l=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o));s._vals[0].bb||(o=s._id+"tick",s._selections[o].each(function(e){var t=f.select(this);t.select(".text-math-group").empty()&&(e.bb=p.bBox(t.node()))}));for(var u=0;u<s._vals.length;u++){var d,h=s._vals[u].bb;h&&(d=2*g+h.width,h=2*g+h.height,i=Math.max(i,a?Math.max(d*l,h*c):Math.max(h*l,d*c)))}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(i+=s.ticklen||0)}}}return i}(e,t,n)),i=Math.max(o,i),"domain"===t.constrain&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?i:o)}}t.exports={getAutoRange:o,makePadFn:C,doAutoRange:function(e,t,n){t.setScale(),t.autorange&&(t.range=n?n.slice():o(e,t),t._r=t.range.slice(),t._rl=k.simpleMap(t._r,t.r2l),i=t._input,(r={})[t._attr+".range"]=t.range,r[t._attr+".autorange"]=t.autorange,a.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,r),i.range=t.range.slice(),i.autorange=t.autorange);var r=t._anchorAxis;{var i;r&&r.rangeslider&&((i=r.rangeslider[t._name])&&"auto"===i.rangemode&&(i.range=o(e,t)),r._input.rangeslider[t._name]=k.extendFlat({},i))}},findExtremes:function(t,n,e){e=e||{};t._m||t.setScale();var r,i,a,o,s,l,c,u,d=[],h=[],f=n.length,p=e.padded||!1,m=e.tozero&&("linear"===t.type||"-"===t.type),g="log"===t.type,_=!1,y=e.vpadLinearized||!1;function v(t){if(Array.isArray(t))return _=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var b=v((0<t._m?e.ppadplus:e.ppadminus)||e.ppad||0),x=v((0<t._m?e.ppadminus:e.ppadplus)||e.ppad||0),w=v(e.vpadplus||e.vpad),T=v(e.vpadminus||e.vpad);if(!_){if(c=1/0,u=-1/0,g)for(r=0;r<f;r++)(i=n[r])<c&&0<i&&(c=i),u<i&&i<E&&(u=i);else for(r=0;r<f;r++)(i=n[r])<c&&-E<i&&(c=i),u<i&&i<E&&(u=i);n=[c,u],f=2}var A={tozero:m,extrapad:p};function k(e){o=n[e],S(o)&&(s=b(e),l=x(e),o=y?(a=t.c2l(o)-T(e),t.c2l(o)+w(e)):(c=o-T(e),u=o+w(e),g&&c<u/10&&(c=u/10),a=t.c2l(c),t.c2l(u)),m&&(a=Math.min(0,a),o=Math.max(0,o)),P(a)&&D(d,a,l,A),P(o)&&O(h,o,s,A))}var M=Math.min(6,f);for(r=0;r<M;r++)k(r);for(r=f-1;M<=r;r--)k(r);return{min:d,max:h,opts:e}},concatExtremes:L};var g=3;function L(e,t,n){var i,a,o=t._id,r=e._fullData,s=e._fullLayout,l=[],c=[];function u(e,t){for(i=0;i<t.length;i++){var n=e[t[i]],r=(n._extremes||{})[o];if(!0===n.visible&&r){for(p=0;p<r.min.length;p++)a=r.min[p],D(l,a.val,a.pad,{extrapad:a.extrapad});for(p=0;p<r.max.length;p++)a=r.max[p],O(c,a.val,a.pad,{extrapad:a.extrapad})}}}if(u(r,t._traceIndices),u(s.annotations||[],t._annIndices||[]),u(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var d in t._matchGroup)if(d!==t._id){for(var d=m(e,d),h=L(e,d,!0),f=t._length/d._length,p=0;p<h.min.length;p++)a=h.min[p],D(l,a.val,a.pad*f,{extrapad:a.extrapad});for(p=0;p<h.max.length;p++)a=h.max[p],O(c,a.val,a.pad*f,{extrapad:a.extrapad})}return{min:l,max:c}}function D(e,t,n,r){i(e,t,n,r,l)}function O(e,t,n,r){i(e,t,n,r,c)}function i(e,t,n,r,i){for(var a=r.tozero,o=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(i(c.val,t)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}i(t,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(e.splice(l,1),l--)}s&&e.push({val:t,pad:(a=a&&0===t)?0:n,extrapad:!a&&o})}function P(e){return S(e)&&Math.abs(e)<E}function l(e,t){return e<=t}function c(e,t){return t<=e}},{"../../components/drawing":122,"../../constants/numerical":210,"../../lib":230,"../../registry":313,"./axis_ids":280,"@plotly/d3":11,"fast-isnumeric":15}],276:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),j=e("../../plots/plots"),B=e("../../registry"),H=e("../../lib"),u=H.strTranslate,d=e("../../lib/svg_text_utils"),U=e("../../components/titles"),V=e("../../components/color"),q=e("../../components/drawing"),b=e("./layout_attributes"),h=e("./clean_ticks"),r=e("../../constants/numerical"),A=r.ONEMAXYEAR,k=r.ONEAVGYEAR,M=r.ONEMINYEAR,S=r.ONEMAXQUARTER,E=r.ONEAVGQUARTER,C=r.ONEMINQUARTER,L=r.ONEMAXMONTH,D=r.ONEAVGMONTH,O=r.ONEMINMONTH,P=r.ONEWEEK,R=r.ONEDAY,I=R/2,N=r.ONEHOUR,s=r.ONEMIN,l=r.ONESEC,_=r.MINUS_SIGN,z=r.BADNUM,o={K:"zeroline"},F={K:"gridline",L:"path"},Y={K:"tick",L:"path"},G={K:"tick",L:"text"},r=e("../../constants/alignment"),v=r.MID_SHIFT,x=r.CAP_SHIFT,W=r.LINE_SPACING,X=r.OPPOSITE_SIDE,Z=t.exports={};Z.setConvert=e("./set_convert");var c=e("./axis_autotype"),t=e("./axis_ids"),a=t.idSort,J=t.isLinked;Z.id2name=t.id2name,Z.name2id=t.name2id,Z.cleanId=t.cleanId,Z.list=t.list,Z.listIds=t.listIds,Z.getFromId=t.getFromId,Z.getFromTrace=t.getFromTrace;e=e("./autorange");Z.getAutoRange=e.getAutoRange,Z.findExtremes=e.findExtremes;var i=1e-4;function $(e){var t=(e[1]-e[0])*i;return[e[0]-t,e[1]+t]}Z.coerceRef=function(e,t,n,r,i,a){var o=r.charAt(r.length-1),n=n._fullLayout._subplots[o+"axis"],o=r+"ref",r={};return i=i||(n[0]||("string"==typeof a?a:a[0])),a=a||i,n=n.concat(n.map(function(e){return e+" domain"})),r[o]={valType:"enumerated",values:n.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},H.coerce(e,t,r,o)},Z.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},Z.coercePosition=function(e,t,n,r,i,a){var o,s;"range"!==Z.getRefType(r)?(s=H.ensureNumber,o=n(i,a)):(o=n(i,a=(r=Z.getFromId(t,r)).fraction2r(a)),s=r.cleanPos),e[i]=s(o)},Z.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?H.ensureNumber:Z.getFromId(t,n).cleanPos)(e)},Z.redrawComponents=function(u,d){d=d||Z.listIds(u);var h=u._fullLayout;function e(e,t,n,r){for(var i=B.getComponentMethod(e,t),a={},o=0;o<d.length;o++)for(var s=h[Z.id2name(d[o])][n],l=0;l<s.length;l++){var c=s[l];if(!a[c]&&(i(u,c),a[c]=1,r))return}}e("annotations","drawOne","_annIndices"),e("shapes","drawOne","_shapeIndices"),e("images","draw","_imgIndices",!0)};var f=Z.getDataConversions=function(e,t,n,r){var i,n="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(n)){if(i={type:c(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},Z.setConvert(i),"category"===i.type)for(var a=0;a<r.length;a++)i.d2c(r[a])}else i=Z.getFromTrace(e,t,n);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===n?{d2c:m,c2d:m}:{d2c:p,c2d:p}};function p(e){return+e}function m(e){return String(e)}function g(e){return+e.substring(1)}Z.getDataToCoordFunc=function(e,t,n,r){return f(e,t,n,r).d2c},Z.counterLetter=function(e){e=e.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},Z.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):(2e-6<(t/e._minDtick+1e-6)%1||2e-6<((n-e._forceTick0)/e._minDtick%1+1.000001)%1)&&(e._minDtick=0)):e._minDtick=0},Z.saveRangeInitial=function(e,t){for(var n=Z.list(e,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||t&&s)&&(a._rangeInitial=a.range.slice(),r=!0)}return r},Z.saveShowSpikeInitial=function(e,t){for(var n=Z.list(e,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,r},Z.autoBin=function(e,t,n,r,i,a){var o,s=H.aggNums(Math.min,null,e),l=H.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-s};i=i||t.calendar,o="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:H.simpleMap([s,l],t.c2r,0,i),calendar:i},Z.setConvert(o),(a=a&&h.dtick(a,o.type))?(o.dtick=a,o.tick0=h.tick0(void 0,o.type,i)):(n?d=(l-s)/n:(a=H.distinctVals(e),n=(n=Math.pow(10,Math.floor(Math.log(a.minDiff)/Math.LN10)))*H.roundUp(a.minDiff/n,[.9,1.9,4.9,9.9],!0),d=Math.max(n,2*H.stdev(e)/Math.pow(e.length,r?.25:.4)),T(d)||(d=1)),Z.autoTicks(o,d));var c,u=o.dtick,d=Z.tickIncrement(Z.tickFirst(o),u,"reverse",i);if("number"==typeof u)c=(d=function(t,e,n,r,i){var a=0,o=0,s=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:T(e[u])||l++,c(e[u])&&a++,c(e[u]+n.dtick/2)&&o++;var d=e.length-l;s===d&&"date"!==n.type?n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick):o<.1*d&&(.3*d<a||c(r)||c(i))&&(i=n.dtick/2,t+=t+i<r?i:-i);return t}(d,e,o,s,l))+(1+Math.floor((l-d)/u))*u;else for(c=d="M"===o.dtick.charAt(0)?function(e,t,n,r,i){t=H.findExactDates(t,i);if(.8<t.exactDays){i=Number(n.substr(1));.8<t.exactYears&&i%12==0?e=Z.tickIncrement(e,"M6","reverse")+1.5*R:.8<t.exactMonths?e=Z.tickIncrement(e,"M1","reverse")+15.5*R:e-=I;n=Z.tickIncrement(e,n);if(n<=r)return n}return e}(d,e,u,s,i):d,0;c<=l;)c=Z.tickIncrement(c,u,!1,i),0;return{start:t.c2r(d,0,i),end:t.c2r(c,0,i),size:u,_dataSpan:l-s}},Z.prepTicks=function(e,t){var n,r=H.simpleMap(e.range,e.r2l,void 0,void 0,t);e._dtickInit=e.dtick,e._tick0Init=e.tick0,"auto"!==e.tickmode&&e.dtick||((t=e.nticks)||(t="category"===e.type||"multicategory"===e.type?(n=e.tickfont?H.bigFont(e.tickfont.size||12):15,e._length/n):(n="y"===e._id.charAt(0)?40:80,H.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(t*=2)),"array"===e.tickmode&&(t*=100),e._roughDTick=Math.abs(r[1]-r[0])/t,Z.autoTicks(e,e._roughDTick),0<e._minDtick&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))),"period"===e.ticklabelmode&&function(e){var t;function n(){return!(T(e.dtick)||"M"!==e.dtick.charAt(0))}var r=n(),i=Z.getTickFormat(e);{var a;i&&(a=e._dtickInit!==e.dtick,/%[fLQsSMX]/.test(i)||(/%[HI]/.test(i)?(t=N,a&&!r&&e.dtick<N&&(e.dtick=N)):/%p/.test(i)?(t=I,a&&!r&&e.dtick<I&&(e.dtick=I)):/%[Aadejuwx]/.test(i)?(t=R,a&&!r&&e.dtick<R&&(e.dtick=R)):/%[UVW]/.test(i)?(t=P,a&&!r&&e.dtick<P&&(e.dtick=P)):/%[Bbm]/.test(i)?(t=D,a&&(r?g(e.dtick)<1:e.dtick<O)&&(e.dtick="M1")):/%[q]/.test(i)?(t=E,a&&(r?g(e.dtick)<3:e.dtick<C)&&(e.dtick="M3")):/%[Yy]/.test(i)&&(t=k,a&&(r?g(e.dtick)<12:e.dtick<M)&&(e.dtick="M12"))))}(r=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0);e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),ae(e)},Z.calcTicks=function(e,t){Z.prepTicks(e,t);var n=H.simpleMap(e.range,e.r2l,void 0,void 0,t);if("array"===e.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,r=new Array(e.length),i=$(H.simpleMap(t.range,t.r2l)),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),s=0;Array.isArray(n)||(n=[]);var l="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var c=0;c<e.length;c++){var u=l(e[c]);a<u&&u<o&&(void 0===n[c]?r[s]=Z.tickText(t,u):r[s]=oe(t,u,String(n[c])),s++)}s<e.length&&r.splice(s,e.length-s);t.rangebreaks&&(r=r.filter(function(e){return t.maskBreaks(e.x)!==z}));return r}(e);var r=$(n),i=r[0],a=r[1],o=n[1]<n[0],s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]),c="log"===e.type&&!(T(e.dtick)||"L"===e.dtick.charAt(0)),r="period"===e.ticklabelmode;if(e._tmin=Z.tickFirst(e,t),e._tmin<i!=o)return[];"category"!==e.type&&"multicategory"!==e.type||(a=o?Math.max(-.5,a):Math.min(e._categories.length-.5,a));var u=e._tmin;e.rangebreaks&&e._tick0Init!==e.tick0&&(u=xe(u,e),o||(u=Z.tickIncrement(u,e.dtick,!o,e.calendar))),r&&(u=Z.tickIncrement(u,e.dtick,!o,e.calendar));for(var d=Math.max(1e3,e._length||0),h=[],f=null;o?a<=u:u<=a;u=Z.tickIncrement(u,e.dtick,o,e.calendar)){if(e.rangebreaks&&!o){if(u<i)continue;if(e.maskBreaks(u)===z&&xe(u,e)>=l)break}if(h.length>d||u===f)break;var f=u,p=c&&u!==(0|u)?!0:!1;h.push({minor:p,value:u})}if(r&&function(e,t,n){for(var r=0;r<e.length;r++){var i,a=e[r].value,o=r,s=r+1,s=r<e.length-1?(o=r)+1:0<r?(o=r-1,r):o=r,l=e[o].value,o=e[s].value,s=Math.abs(o-l),o=n||s,l=0;M<=o?l=M<=s&&s<=A?s:k:n===E&&C<=o?l=C<=s&&s<=S?s:E:O<=o?l=O<=s&&s<=L?s:D:n===P&&P<=o?l=P:R<=o?l=R:n===I&&I<=o?l=I:n===N&&N<=o&&(l=N),s<=l&&(l=s,i=!0);var c=a+l;if(t.rangebreaks&&0<l){for(var u=0,d=0;d<84;d++){var h=(d+.5)/84;t.maskBreaks(a*(1-h)+h*c)!==z&&u++}(l*=u/84)||(e[r].drop=!0),i&&P<s&&(l=s)}(0<l||0===r)&&(e[r].periodX=a+l/2)}}(h,e,e._definedDelta),e.rangebreaks){var m="y"===e._id.charAt(0),g=1;"auto"===e.tickmode&&(g=e.tickfont?e.tickfont.size:12);for(var _,y=NaN,v=h.length-1;-1<v;v--)h[v].drop?h.splice(v,1):(h[v].value=xe(h[v].value,e),_=e.c2p(h[v].value),(m?_-g<y:y<_+g)?h.splice(o?v+1:v,1):y=_)}be(e)&&360===Math.abs(n[1]-n[0])&&h.pop(),e._tmax=(h[h.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var b=[];for(v=0;v<h.length;v++){var x=h[v].minor,w=h[v].value,w=Z.tickText(e,w,!1,x);void 0!==(x=h[v].periodX)&&(l<(w.periodX=x)||x<s)&&(l<x&&(w.periodX=l),x<s&&(w.periodX=s),w.text=" ",e._prevDateHead=""),b.push(w)}return e._inCalcTicks=!1,b};var y=[2,5,10],Q=[1,2,3,6,12],K=[1,2,5,10,15,30],ee=[1,2,3,7,14],te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ne=[-.301,0,.301,.699,1],re=[15,30,45,90,180];function ie(e,t,n){return t*H.roundUp(e/t,n)}function ae(e){var t,n,r,i,a=e.dtick;e._tickexponent=0,T(a)||"string"==typeof a||(a=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type?(t=e.r2l(e.tick0),r=(n=e.l2r(t).replace(/(^-|i)/g,"")).length,"M"===String(a).charAt(0)?10<r||"01-01"!==n.substr(5)?e._tickround="d":e._tickround=+a.substr(1)%12==0?"y":"m":R<=a&&r<=10||15*R<=a?e._tickround="d":s<=a&&r<=16||N<=a?e._tickround="M":l<=a&&r<=19||s<=a?e._tickround="S":(i=e.l2r(t+a).replace(/^-/,"").length,e._tickround=Math.max(r,i)-20,e._tickround<0&&(e._tickround=4))):T(a)||"L"===a.charAt(0)?(i=e.range.map(e.r2d||Number),T(a)||(a=Number(a.substr(1))),e._tickround=2-Math.floor(Math.log(a)/Math.LN10+.01),a=Math.max(Math.abs(i[0]),Math.abs(i[1])),i=Math.floor(Math.log(a)/Math.LN10+.01),a=void 0===e.minexponent?3:e.minexponent,Math.abs(i)>a&&(le(e.exponentformat)&&!ce(i)?e._tickexponent=3*Math.round((i-1)/3):e._tickexponent=i)):e._tickround=null}function oe(e,t,n){e=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:e.size,font:e.family,fontColor:e.color}}Z.autoTicks=function(e,t){var n,r,i;function a(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type?(e.tick0=H.dateTick0(e.calendar,0),k<(i=2*t)?(t/=k,o=a(10),e.dtick="M"+12*ie(t,o,y)):D<i?(t/=D,e.dtick="M"+ie(t,1,Q)):R<i?(e.dtick=ie(t,R,e._hasDayOfWeekBreaks?[1,2,7,14]:ee),n=Z.getTickFormat(e),(r="period"===e.ticklabelmode)&&(e._rawTick0=e.tick0),/%[uVW]/.test(n)?e.tick0=H.dateTick0(e.calendar,2):e.tick0=H.dateTick0(e.calendar,1),r&&(e._dowTick0=e.tick0)):N<i?e.dtick=ie(t,N,Q):s<i?e.dtick=ie(t,s,K):l<i?e.dtick=ie(t,l,K):(o=a(10),e.dtick=ie(t,o,y))):"log"===e.type?(e.tick0=0,r=H.simpleMap(e.range,e.r2l),.7<t?e.dtick=Math.ceil(t):Math.abs(r[1]-r[0])<1?(i=1.5*Math.abs((r[1]-r[0])/t),t=Math.abs(Math.pow(10,r[1])-Math.pow(10,r[0]))/i,o=a(10),e.dtick="L"+ie(t,o,y)):e.dtick=.3<t?"D2":"D1"):"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):be(e)?(e.tick0=0,e.dtick=ie(t,o=1,re)):(e.tick0=0,o=a(10),e.dtick=ie(t,o,y)),0===e.dtick&&(e.dtick=1),!T(e.dtick)&&"string"!=typeof e.dtick){var o=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(o)}},Z.tickIncrement=function(e,t,n,r){var i=n?-1:1;if(T(t))return H.increment(e,i*t);var a=t.charAt(0),o=i*Number(t.substr(1));if("M"===a)return H.incrementMonth(e,o,r);if("L"===a)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"!==a)throw"unrecognized dtick "+String(t);t="D2"===t?ne:te,i=e+.01*i,n=H.roundUp(H.mod(i,1),t,n);return Math.floor(i)+Math.log(w.round(Math.pow(10,n),1))/Math.LN10},Z.tickFirst=function(e,t){var n=e.r2l||Number,r=H.simpleMap(e.range,n,void 0,void 0,t),i=r[1]<r[0],t=i?Math.floor:Math.ceil,a=$(r)[0],o=e.dtick,r=n(e.tick0);if(T(o)){n=t((a-r)/o)*o+r;return n="category"===e.type||"multicategory"===e.type?H.constrain(n,0,e._categories.length-1):n}var s=o.charAt(0),l=Number(o.substr(1));if("M"===s){for(var c,u,d=0,h=r;d<10;){if(((u=Z.tickIncrement(h,o,i,e.calendar))-a)*(h-a)<=0)return i?Math.min(h,u):Math.max(h,u);c=(a-(h+u)/2)/(u-h),u=s+(Math.abs(Math.round(c))||1)*l,h=Z.tickIncrement(h,u,c<0?!i:i,e.calendar),d++}return H.error("tickFirst did not converge",e),h}if("L"===s)return Math.log(t((Math.pow(10,a)-r)/l)*l+r)/Math.LN10;if("D"!==s)throw"unrecognized dtick "+String(o);r="D2"===o?ne:te,r=H.roundUp(H.mod(a,1),r,i);return Math.floor(a)+Math.log(w.round(Math.pow(10,r),1))/Math.LN10},Z.tickText=function(n,r,i,e){var t=oe(n,r),a="array"===n.tickmode,o=i||a,s=n.type,l="category"===s?n.d2l_noadd:n.d2l;if(a&&Array.isArray(n.ticktext)){for(var c=H.simpleMap(n.range,n.r2l),u=(Math.abs(c[1]-c[0])-(n._lBreaks||0))/1e4,d=0;d<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[d]))<u);d++);if(d<n.ticktext.length)return t.text=String(n.ticktext[d]),t}function h(e){if(void 0===e)return 1;if(i)return"none"===e;var t={first:n._tmin,last:n._tmax}[e];return"all"!==e&&r!==t}var f,p,m,g,c=i?"never":"none"!==n.exponentformat&&h(n.showexponent)?"hide":"";return"date"===s?function(e,t,n,r){var i=e._tickround,a=n&&e.hoverformat||Z.getTickFormat(e);r&&(i=T(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,s=H.formatDate(t.x,a,i,e._dateFormat,e.calendar,e._extraFormat),a=s.indexOf("\n");-1!==a&&(o=s.substr(a+1),s=s.substr(0,a));r&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,"")));o&&(n?"d"===i?s+=", "+o:s=o+(s?", "+s:""):e._inCalcTicks&&e._prevDateHead===o?(n=we(e),i=e._realSide||e.side,(!n&&"top"===i||n&&"bottom"===i)&&(s+="<br> ")):(e._prevDateHead=o,s+="<br>"+o));t.text=s}(n,t,i,o):"log"===s?function(e,t,n,r){var i=e.dtick,a=t.x,o=e.tickformat,s="string"==typeof i&&i.charAt(0);"never"===r&&(r="");n&&"L"!==s&&(i="L3",s="L");if(o||"L"===s)t.text=ue(Math.pow(10,a),e,r,n);else if(T(i)||"D"===s&&H.mod(a+.01,1)<.1){o=Math.round(a),r=Math.abs(o),n=e.exponentformat;"power"===n||le(n)&&ce(o)?(t.text=0===o?1:1===o?"10":"10<sup>"+(1<o?"":_)+r+"</sup>",t.fontSize*=1.25):("e"===n||"E"===n)&&2<r?t.text="1"+n+(0<o?"+":_)+r:(t.text=ue(Math.pow(10,a),e,"","fakehover"),"D1"===i&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==s)throw"unrecognized dtick "+String(i);t.text=String(Math.round(Math.pow(10,H.mod(a,1)))),t.fontSize*=.75}"D1"===e.dtick&&("0"!==(i=String(t.text).charAt(0))&&"1"!==i||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(a<0?.5:.25))))}(n,t,o,c):"category"===s?function(e,t){e=e._categories[Math.round(t.x)];void 0===e&&(e="");t.text=String(e)}(n,t):"multicategory"===s?(f=n,p=t,m=i,g=Math.round(p.x),f=f._categories[g]||[],g=void 0===f[1]?"":String(f[1]),f=void 0===f[0]?"":String(f[0]),m?p.text=f+" - "+g:(p.text=g,p.text2=f)):be(n)?(s=t,m=i,g=o,p=c,"radians"!==(f=n).thetaunit||m?s.text=ue(s.x,f,p,g):0==(m=s.x/180)?s.text="0":100<=(m=function(e){function r(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){for(var t=1;!r(Math.round(e*t)/t,e);)t*=10;return t}(e),n=e*t,e=Math.abs(function e(t,n){return r(n,0)?t:e(n,t%n)}(n,t));return[Math.round(n/e),Math.round(t/e)]}(m))[1]?s.text=ue(H.deg2rad(s.x),f,p,g):(g=s.x<0,1===m[1]?1===m[0]?s.text="":s.text=m[0]+"":s.text=["<sup>",m[0],"</sup>","","<sub>",m[1],"</sub>",""].join(""),g&&(s.text=_+s.text))):function(e,t,n,r){"never"===r?r="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(r="hide");t.text=ue(t.x,e,r,n)}(n,t,o,c),e||(n.tickprefix&&!h(n.showtickprefix)&&(t.text=n.tickprefix+t.text),n.ticksuffix&&!h(n.showticksuffix)&&(t.text+=n.ticksuffix)),"boundaries"!==n.tickson&&!n.showdividers||(t.xbnd=[(e=function(e){var t=n.l2p(e);return 0<=t&&t<=n._length?e:null})(t.x-.5),e(t.x+n.dtick-.5)]),t},Z.hoverLabelText=function(e,t,n){n&&(e=H.extendFlat({},e,{hoverformat:n}));var r=Array.isArray(t)?t[0]:t,t=Array.isArray(t)?t[1]:void 0;if(void 0!==t&&t!==r)return Z.hoverLabelText(e,r,n)+" - "+Z.hoverLabelText(e,t,n);n="log"===e.type&&r<=0,e=Z.tickText(e,e.c2l(n?-r:r),"hover").text;return n?0===r?"0":_+e:e};var se=["f","p","n","","m","","k","M","G","T"];function le(e){return"SI"===e||"B"===e}function ce(e){return 14<e||e<-15}function ue(e,t,n,r){var i=e<0,a=t._tickround,o=n||t.exponentformat||"B",s=t._tickexponent,l=Z.getTickFormat(t),n=t.separatethousands;if(r&&(ae(r={exponentformat:o,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:T(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]}),a=(Number(r._tickround)||0)+4,s=r._tickexponent,t.hoverformat&&(l=t.hoverformat)),l)return t._numFormat(l)(e).replace(/-/g,_);l=Math.pow(10,-a)/2;if("none"===o&&(s=0),(e=Math.abs(e))<l)i=!(e="0");else{if(e+=l,s&&(e*=Math.pow(10,-s),a+=s),0===a)e=String(Math.floor(e));else if(a<0){e=(e=String(Math.round(e))).substr(0,e.length+a);for(var c=a;c<0;c++)e+="0"}else{l=(e=String(e)).indexOf(".")+1;l&&(e=e.substr(0,l+a).replace(/\.?0+$/,""))}e=H.numSeparate(e,t._separators,n)}return s&&"hide"!==o&&(le(o)&&ce(s)&&(o="power"),n=s<0?_+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?e+=o+n:"power"===o?e+="10<sup>"+n+"</sup>":"B"===o&&9===s?e+="B":le(o)&&(e+=se[s/3+5])),i?_+e:e}function de(e){return void 0!==e.periodX?e.periodX:e.x}function he(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function fe(e){var t=e.title.font.size,n=(e.title.text.match(d.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*(x+n*W):t*x:n?t*(n+1)*W:t}function pe(e,t){t=e.l2p(t);return 1<t&&t<e._length-1}function me(e){var t=w.select(e),e=t.select(".text-math-group");return e.empty()?t.select("text"):e}function ge(e){return e._id+".automargin"}function _e(e){return ge(e)+".mirror"}function ye(e){return e._id+".rangeslider"}function ve(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function be(e){return"angularaxis"===e._id}function xe(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var i=t._rangebreaks[r];if(e>=i.min&&e<i.max)return i.max}return e}function we(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function Te(e,t){we(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}Z.getTickFormat=function(e){var t,n,r,i,a,o,s,l,c,u,d,h;function f(e){return"string"!=typeof e?e:Number(e.replace("M",""))*D}function p(e,t){var n=["L","D"];if(typeof e!=typeof t)return"number"==typeof e?1:-1;if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),n=n.indexOf(t.charAt(0));return r===n?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-n}if(e.tickformatstops&&0<e.tickformatstops.length)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(c=e.dtick,u=r.dtickrange,h=void 0,h=(d=f)||function(e){return e},d=u[0],u=u[1],(!d&&"number"!=typeof d||h(d)<=h(c))&&(!u&&"number"!=typeof u||h(u)>=h(c)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(i=e.dtick,a=r.dtickrange,l=s=o=void 0,o=null===a[0],s=null===a[1],l=0<=p(i,a[0]),a=p(i,a[1])<=0,(o||l)&&(s||a))){n=r;break}}return n?n.value:e.tickformat},Z.getSubplots=function(e,t){e=e._fullLayout._subplots,e=e.cartesian.concat(e.gl2d||[]),e=t?Z.findSubplotsWithAxis(e,t):e;return e.sort(function(e,t){e=e.substr(1).split("y"),t=t.substr(1).split("y");return e[0]===t[0]?+e[1]-+t[1]:+e[0]-+t[0]}),e},Z.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var a=e[i];n.test(a)&&r.push(a)}return r},Z.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){for(var n,r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},a=Z.list(e,"x",!0),o=Z.list(e,"y",!0),s=[],l=0;l<a.length;l++)for(s.push({x:a[l],y:i}),n=0;n<o.length;n++)0===l&&s.push({x:r,y:o[n]}),s.push({x:a[l],y:o[n]});e=t._clips.selectAll(".axesclip").data(s,function(e){return e.x._id+e.y._id});e.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),e.exit().remove(),e.each(function(e){w.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},Z.draw=function(r,e,i){var a=r._fullLayout;"redraw"===e&&a._paper.selectAll("g.subplot").each(function(e){var t=e[0],n=a._plots[t];n&&(e=n.xaxis,t=n.yaxis,n.xaxislayer.selectAll("."+e._id+"tick").remove(),n.yaxislayer.selectAll("."+t._id+"tick").remove(),n.xaxislayer.selectAll("."+e._id+"tick2").remove(),n.yaxislayer.selectAll("."+t._id+"tick2").remove(),n.xaxislayer.selectAll("."+e._id+"divider").remove(),n.yaxislayer.selectAll("."+t._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),a._infolayer.select(".g-"+e._id+"title").remove(),a._infolayer.select(".g-"+t._id+"title").remove())});e=e&&"redraw"!==e?e:Z.listIds(r);return H.syncOrAsync(e.map(function(n){return function(){if(n){var e=Z.getFromId(r,n),t=Z.drawOne(r,e,i);return e._r=e.range.slice(),e._rl=H.simpleMap(e._r,e.r2l),t}}}))},Z.drawOne=function(u,d,e){e=e||{},d.setScale();var h=u._fullLayout,t=d._id,f=t.charAt(0),p=Z.counterLetter(t),n=h._plots[d._mainSubplot];if(n){var a=n[f+"axislayer"],o=d._mainLinePosition,r=d._mainMirrorPosition,i=d._vals=Z.calcTicks(d),s=[d.mirror,o,r].join("_");for(T=0;T<i.length;T++)i[T].axInfo=s;d._selections={},d._tickAngles&&(d._prevTickAngles=d._tickAngles),d._tickAngles={},d._depth=null;var l={};if(d.visible){var c,m=Z.makeTransTickFn(d),g=Z.makeTransTickLabelFn(d),_="inside"===d.ticks,y="outside"===d.ticks;c="boundaries"===d.tickson?(n=function(e){function t(e,t){null!==(t=e.xbnd[t])&&r.push(H.extendFlat({},e,{x:t}))}var n,r=[];if(e.length){for(n=0;n<e.length;n++)t(e[n],0);t(e[n-1],1)}return r}(i),D=Z.clipEnds(d,n),_?D:n):(D=Z.clipEnds(d,i),_&&"period"!==d.ticklabelmode?D:i);var v=d._gridVals=D,b=function(e,t){function n(e,t){null!==(t=e.xbnd[t])&&a.push(H.extendFlat({},e,{x:t}))}var r,i,a=[],o=t.length&&t[t.length-1].x<t[0].x;if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];s.text2!==i&&n(s,o?1:0),i=s.text2}n(t[r-1],o?0:1)}return a}(d,i);if(!h._hasOnlyLargeSploms)for(var x=d._subplotsWith,w={},T=0;T<x.length;T++){var A,k=x[T],M=(A=h._plots[k])[p+"axis"],S=M._mainAxis._id;w[S]||(w[S]=1,S="x"===f?"M0,"+M._offset+"v"+M._length:"M"+M._offset+",0h"+M._length,Z.drawGrid(u,d,{vals:v,counterAxis:M,layer:A.gridlayer.select("."+t),path:S,transFn:m}),Z.drawZeroLine(u,d,{counterAxis:M,layer:A.zerolinelayer,path:S,transFn:m}))}var E=Z.getTickSigns(d),C=[];if(d.ticks){var L,D=Z.makeTickPath(d,o,E[2]),O=d._anchorAxis&&d.mirror&&!0!==d.mirror?D+(L=Z.makeTickPath(d,r,E[3])):(L="",D);if(d.showdividers&&y&&"boundaries"===d.tickson){var P={};for(T=0;T<b.length;T++)P[b[T].x]=1;N=function(e){return P[e.x]?L:O}}else N=O;Z.drawTicks(u,d,{vals:c,layer:a,path:N,transFn:m}),"allticks"===d.mirror&&(C=Object.keys(d._linepositions||{}))}for(T=0;T<C.length;T++){k=C[T],A=h._plots[k];var R=d._linepositions[k]||[],R=Z.makeTickPath(d,R[0],E[0])+Z.makeTickPath(d,R[1],E[1]);Z.drawTicks(u,d,{vals:c,layer:A[f+"axislayer"],path:R,transFn:m})}var I,N=[];N.push(function(){return Z.drawLabels(u,d,{vals:i,layer:a,plotinfo:A,transFn:g,labelFns:Z.makeLabelFns(d,o)})}),"multicategory"===d.type?(I={x:2,y:10}[f],N.push(function(){var e={x:"height",y:"width"}[f],e=F()[e]+I+(d._tickAngles[t+"tick"]?d.tickfont.size*W:0);return Z.drawLabels(u,d,{vals:function(e,t){for(var n,r=[],i={},a=0;a<t.length;a++){var o=t[a];i[o.text2]?i[o.text2].push(o.x):i[o.text2]=[o.x]}for(n in i)r.push(oe(e,H.interp(i[n],.5),n));return r}(d,i),layer:a,cls:t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:m,labelFns:Z.makeLabelFns(d,o+e*E[4])})}),N.push(function(){var e,t,n,r,i;d._depth=E[4]*(F("tick2")[d.side]-o),e=u,t=d,n={vals:b,layer:a,path:Z.makeTickPath(d,o,E[4],d._depth),transFn:m},r=t._id+"divider",i=n.vals,(i=n.layer.selectAll("path."+r).data(i,he)).exit().remove(),i.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(V.stroke,t.dividercolor).style("stroke-width",q.crispRound(e,t.dividerwidth,1)+"px"),i.attr("transform",n.transFn).attr("d",n.path)})):d.title.hasOwnProperty("standoff")&&N.push(function(){d._depth=E[4]*(F()[d.side]-o)});var z=B.getComponentMethod("rangeslider","isVisible")(d);return N.push(function(){var e,t,n,r,i,a,o=d.side.charAt(0),s=X[d.side].charAt(0),l=Z.getPxPosition(u,d),c=y?d.ticklen:0;(d.automargin||z)&&("multicategory"===d.type?a=F("tick2"):(a=F(),"x"===f&&"b"===o&&(d._depth=Math.max(0<a.width?a.bottom-l:0,c)))),d.automargin&&(n={x:0,y:0,r:0,l:0,t:0,b:0},r=[0,1],"x"===f?("b"===o?n[o]=d._depth:(n[o]=d._depth=Math.max(0<a.width?l-a.top:0,c),r.reverse()),0<a.width&&(0<(i=a.right-(d._offset+d._length))&&(n.xr=1,n.r=i),0<(i=d._offset-a.left)&&(n.xl=0,n.l=i))):("l"===o?n[o]=d._depth=Math.max(0<a.height?l-a.left:0,c):(n[o]=d._depth=Math.max(0<a.height?a.right-l:0,c),r.reverse()),0<a.height&&(0<(l=a.bottom-(d._offset+d._length))&&(n.yb=0,n.b=l),0<(a=d._offset-a.top)&&(n.yt=1,n.t=a))),n[p]="free"===d.anchor?d.position:d._anchorAxis.domain[r[0]],d.title.text!==h._dfltTitle[f]&&(n[o]+=fe(d)+(d.title.standoff||0)),d.mirror&&"free"!==d.anchor&&((e={x:0,y:0,r:0,l:0,t:0,b:0})[s]=d.linewidth,d.mirror&&!0!==d.mirror&&(e[s]+=c),!0===d.mirror||"ticks"===d.mirror?e[p]=d._anchorAxis.domain[r[1]]:"all"!==d.mirror&&"allticks"!==d.mirror||(e[p]=[d._counterDomainMin,d._counterDomainMax][r[1]]))),z&&(t=B.getComponentMethod("rangeslider","autoMarginOpts")(u,d)),j.autoMargin(u,ge(d),n),j.autoMargin(u,_e(d),e),j.autoMargin(u,ye(d),t)}),e.skipTitle||z&&"bottom"===d.side||N.push(function(){return function(e,t){var n=e._fullLayout,r=t._id,i=r.charAt(0),a=t.title.font.size;{var o,s;t.title.hasOwnProperty("standoff")?h=t._depth+t.title.standoff+fe(t):(o=we(t),h="multicategory"===t.type?t._depth:(s=1.5*a,o&&(s=.5*a,"outside"===t.ticks&&(s+=t.ticklen)),10+s+(t.linewidth?t.linewidth-1:0)),o||(h+="x"===i?"top"===t.side?a*(t.showticklabels?1:0):a*(t.showticklabels?1.5:.5):"right"===t.side?a*(t.showticklabels?1:.5):a*(t.showticklabels?.5:0)))}var l,c,u,d,a=Z.getPxPosition(e,t);"x"===i?(c=t._offset+t._length/2,u="top"===t.side?a-h:a+h):(u=t._offset+t._length/2,c="right"===t.side?a+h:a-h,l={rotate:"-90",offset:0});{var h;"multicategory"!==t.type&&(h=t._selections[t._id+"tick"],d={selection:h,side:t.side},h&&h.node()&&h.node().parentNode&&(h=q.getTranslate(h.node().parentNode),d.offsetLeft=h.x,d.offsetTop=h.y),t.title.hasOwnProperty("standoff")&&(d.pad=0))}return U.draw(e,r+"title",{propContainer:t,propName:t._name+".title.text",placeholder:n._dfltTitle[i],avoid:d,transform:l,attributes:{x:c,y:u,"text-anchor":"middle"}})}(u,d)}),H.syncOrAsync(N)}}function F(e){e=t+(e||"tick");return l[e]||(l[e]=function(e,t){var n,r,i,a;e._selections[t].size()?(i=n=1/0,a=r=-1/0,e._selections[t].each(function(){var e=me(this),e=q.bBox(e.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),i=Math.min(i,e.left),a=Math.max(a,e.right)})):a=i=r=n=0;return{top:n,bottom:r,left:i,right:a,height:r-n,width:a-i}}(d,e)),l[e]}},Z.getTickSigns=function(e){var t=e._id.charAt(0),n=e.side==={x:"top",y:"right"}[t]?1:-1,n=[-1,1,n,-n];return"inside"!==e.ticks==("x"===t)&&(n=n.map(function(e){return-e})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n},Z.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return u(t._offset+t.l2p(e.x),0)}:function(e){return u(0,t._offset+t.l2p(e.x))}},Z.makeTransTickLabelFn=function(t){var e=function(e){var t=e.ticklabelposition||"",n=function(e){return-1!==t.indexOf(e)},r=n("top"),i=n("left"),a=n("right"),o=n("bottom"),s=n("inside"),l=o||i||r||a;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=3,n=e.tickfont?e.tickfont.size:12;(o||r)&&(u+=n*x,d+=(e.linewidth||0)/2);(i||a)&&(u+=(e.linewidth||0)/2,d+=3);s&&"top"===c&&(d-=n*(1-x));(i||r)&&(u=-u);"bottom"!==c&&"right"!==c||(d=-d);return[l?u:0,s?d:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return u(n+t._offset+t.l2p(de(e)),r)}:function(e){return u(r,n+t._offset+t.l2p(de(e)))}},Z.makeTickPath=function(e,t,n,r){r=void 0!==r?r:e.ticklen;var i=e._id.charAt(0),e=(e.linewidth||1)/2;return"x"===i?"M0,"+(t+e*n)+"v"+r*n:"M"+(t+e*n)+",0h"+r*n},Z.makeLabelFns=function(r,t,e){var n=r.ticklabelposition||"",i=function(e){return-1!==n.indexOf(e)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom")||o||a||s,c=i("inside"),u="inside"===n&&"inside"===r.ticks||!c&&"outside"===r.ticks&&"boundaries"!==r.tickson,d=0,a=0,i=u?r.ticklen:0;c?i*=-1:l&&(i=0),u&&(d+=i,e&&(y=H.deg2rad(e),d=i*Math.cos(y)+1,a=i*Math.sin(y))),r.showticklabels&&(u||r.showline)&&(d+=.2*r.tickfont.size);var h,f,p,m,g,e={labelStandoff:d+=(r.linewidth||1)/2*(c?-1:1),labelShift:a},_=0,i=r.side,y=r._id.charAt(0),u=r.tickangle;return"x"===y?(g=(m=!c&&"bottom"===i||c&&"top"===i)?1:-1,c&&(g*=-1),h=a*g,f=t+d*g,p=m?1:-.2,90===Math.abs(u)&&(c?p+=v:p=-90===u&&"bottom"===i?x:90===u&&"top"===i?v:.5,_=v/2*(u/90)),e.xFn=function(e){return e.dx+h+_*e.fontSize},e.yFn=function(e){return e.dy+f+e.fontSize*p},e.anchorFn=function(e,t){if(l){if(o)return"end";if(s)return"start"}return T(t)&&0!==t&&180!==t?t*g<0!==c?"end":"start":"middle"},e.heightFn=function(e,t,n){return t<-60||60<t?-.5*n:"top"===r.side!==c?-n:0}):"y"===y&&(g=(m=!c&&"left"===i||c&&"right"===i)?1:-1,c&&(g*=-1),h=d,f=a*g,p=0,c||90!==Math.abs(u)||(p=-90===u&&"left"===i||90===u&&"right"===i?x:.5),!c||0!=(u=T(u)?+u:0)&&(u=H.deg2rad(u),_=Math.abs(Math.sin(u))*x*g,p=0),e.xFn=function(e){return e.dx+t-(h+e.fontSize*p)*g+_*e.fontSize},e.yFn=function(e){return e.dy+f+e.fontSize*v},e.anchorFn=function(e,t){return T(t)&&90===Math.abs(t)?"middle":m?"end":"start"},e.heightFn=function(e,t,n){return"right"===r.side&&(t*=-1),t<-30?-n:t<30?-.5*n:0}),e},Z.drawTicks=function(e,t,n){var r=t._id+"tick",i=(n=n||{}).vals;"period"===t.ticklabelmode&&(i=i.slice()).shift();i=n.layer.selectAll("path."+r).data(t.ticks?i:[],he);i.exit().remove(),i.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(V.stroke,t.tickcolor).style("stroke-width",q.crispRound(e,t.tickwidth,1)+"px").attr("d",n.path).style("display",null),Te(t,[Y]),i.attr("transform",n.transFn)},Z.drawGrid=function(e,t,n){var r=t._id+"grid",i=(n=n||{}).vals,a=n.counterAxis;if(!1===t.showgrid)i=[];else if(a&&Z.shouldShowZeroLine(e,t,a))for(var o="array"===t.tickmode,s=0;s<i.length;s++){var l=i[s].x;if(o?!l:Math.abs(l)<t.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!o)break;s--}}a=n.layer.selectAll("path."+r).data(i,he);a.exit().remove(),a.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),t._gw=q.crispRound(e,t.gridwidth,1),a.attr("transform",n.transFn).attr("d",n.path).call(V.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),Te(t,[F]),"function"==typeof n.path&&a.attr("d",n.path)},Z.drawZeroLine=function(e,t,n){var r=t._id+"zl",i=Z.shouldShowZeroLine(e,t,n.counterAxis),i=n.layer.selectAll("path."+r).data(i?[{x:0,id:t._id}]:[]);i.exit().remove(),i.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(e,t){return a(e.id,t.id)})}),i.attr("transform",n.transFn).attr("d",n.path).call(V.stroke,t.zerolinecolor||V.defaultLine).style("stroke-width",q.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),Te(t,[o])},Z.drawLabels=function(h,p,m){m=m||{};var f=h._fullLayout,e=p._id,g=e.charAt(0),t=m.cls||e+"tick",_=m.vals,c=m.labelFns,y=m.secondary?0:p.tickangle,n=(p._prevTickAngles||{})[t],v=m.layer.selectAll("g."+t).data(p.showticklabels?_:[],he),r=[];function b(e,l){e.each(function(e){var t,n=w.select(this),r=n.select(".text-math-group"),i=c.anchorFn(e,l),a=m.transFn.call(n.node(),e)+(T(l)&&0!=+l?" rotate("+l+","+c.xFn(e)+","+(c.yFn(e)-e.fontSize/2)+")":""),o=d.lineCount(n),s=W*e.fontSize,s=c.heightFn(e,T(l)?+l:0,(o-1)*s);s&&(a+=u(0,s)),r.empty()?((t=n.select("text")).attr({transform:a,"text-anchor":i}),t.style("opacity",1),p._adjustTickLabelsOverflow&&p._adjustTickLabelsOverflow()):(t=q.bBox(r.node()).width,r.attr("transform",a+u(t*{end:-.5,start:.5}[i],0)))})}v.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=w.select(this),n=h._promises.length;t.call(d.positionText,c.xFn(e),c.yFn(e)).call(q.font,e.font,e.fontSize,e.fontColor).text(e.text).call(d.convertToTspans,h),h._promises[n]?r.push(h._promises.pop().then(function(){b(t,y)})):b(t,y)}),Te(p,[G]),v.exit().remove(),m.repositionOnUpdate&&v.each(function(e){w.select(this).select("text").call(d.positionText,c.xFn(e),c.yFn(e))}),p._adjustTickLabelsOverflow=function(){var e=p.ticklabeloverflow;if(e&&"allow"!==e){var i=-1!==e.indexOf("hide"),a="x"===p._id.charAt(0),t=0,n=a?h._fullLayout.width:h._fullLayout.height;-1!==e.indexOf("domain")&&(e=H.simpleMap(p.range,p.r2l),t=p.l2p(e[0])+p._offset,n=p.l2p(e[1])+p._offset);var r,o=Math.min(t,n),s=Math.max(t,n),l=p.side,c=1/0,u=-1/0;for(r in v.each(function(e){var t,n,r=w.select(this);r.select(".text-math-group").empty()&&(t=q.bBox(r.node()),n=0,a?(t.right>s||t.left<o)&&(n=1):(t.bottom>s||t.top+(p.tickangle?0:e.fontSize/4)<o)&&(n=1),r=r.select("text"),n?i&&r.style("opacity",0):(r.style("opacity",1),c="bottom"===l||"right"===l?Math.min(c,a?t.top:t.left):-1/0,u="top"===l||"left"===l?Math.max(u,a?t.bottom:t.right):1/0))}),f._plots){var d=f._plots[r];p._id!==d.xaxis._id&&p._id!==d.yaxis._id||(d=a?d.yaxis:d.xaxis)&&(d["_visibleLabelMin_"+p._id]=c,d["_visibleLabelMax_"+p._id]=u)}}},p._hideCounterAxisInsideTickLabels=function(e){var t,n="x"===p._id.charAt(0),r=[];for(t in f._plots){var i=f._plots[t];p._id!==i.xaxis._id&&p._id!==i.yaxis._id||r.push(n?i.yaxis:i.xaxis)}r.forEach(function(i,a){i&&we(i)&&(e||[o,F,Y,G]).forEach(function(n){var r="tick"===n.K&&"text"===n.L&&"period"===p.ticklabelmode,e=f._plots[p._mainSubplot],e=n.K===o.K?e.zerolinelayer.selectAll("."+p._id+"zl"):n.K===F.K?e.gridlayer.selectAll("."+p._id):e[p._id.charAt(0)+"axislayer"];e.each(function(){var e=w.select(this);(e=n.L?e.selectAll(n.L):e).each(function(e){var t=p.l2p(r?de(e):e.x)+p._offset,e=w.select(this);t<p["_visibleLabelMax_"+i._id]&&t>p["_visibleLabelMin_"+i._id]?e.style("display","none"):"tick"!==n.K||a||e.style("display",null)})})})})},b(v,n+1?n:y);var x=null;p._selections&&(p._selections[t]=v);var i=[function(){return r.length&&Promise.all(r)}];p.automargin&&f._redrawFromAutoMarginCount&&90===n?(x=90,i.push(function(){b(v,n)})):i.push(function(){if(b(v,y),_.length&&"x"===g&&!T(y)&&("log"!==p.type||"D"!==String(p.dtick).charAt(0))){var n=x=0,r=[];if(v.each(function(e){n=Math.max(n,e.fontSize);var t=p.l2p(e.x),e=me(this),e=q.bBox(e.node());r.push({top:0,bottom:10,height:10,left:t-e.width/2,right:t+e.width/2+2,width:e.width+2})}),"boundaries"!==p.tickson&&!p.showdividers||m.secondary){for(var e=_.length,t=Math.abs((_[e-1].x-_[0].x)*p._m)/(e-1),i=p.ticklabelposition||"",a=function(e){return-1!==i.indexOf(e)},o=a("top"),s=a("left"),e=a("right"),l=a("bottom")||s||o||e?(p.tickwidth||0)+6:0,c=t<2.5*n||"multicategory"===p.type,u=0;u<r.length-1;u++)if(H.bBoxIntersect(r[u],r[u+1],l)){x=c?90:30;break}}else{var d=2;for(p.ticks&&(d+=p.tickwidth/2),u=0;u<r.length;u++){var h=_[u].xbnd,f=r[u];if(null!==h[0]&&f.left-p.l2p(h[0])<d||null!==h[1]&&p.l2p(h[1])-f.right<d){x=90;break}}}x&&b(v,x)}}),p._tickAngles&&i.push(function(){p._tickAngles[t]=null===x?T(y)?y:0:x});e=p._anchorAxis;e&&e.autorange&&we(p)&&!J(f,p._id)&&(f._insideTickLabelsAutorange||(f._insideTickLabelsAutorange={}),f._insideTickLabelsAutorange[e._name+".autorange"]=e.autorange,i.push(function(){v.each(function(e,t){var n=me(this);n.select(".text-math-group").empty()&&(p._vals[t].bb=q.bBox(n.node()))})}));i=H.syncOrAsync(i);return i&&i.then&&h._promises.push(i),i},Z.getPxPosition=function(e,t){var n,r=e._fullLayout._size,i=t._id.charAt(0),e=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===i?n={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(t.position||0)*r.w,_length:0}),"top"===e||"left"===e?n._offset:"bottom"===e||"right"===e?n._offset+n._length:void 0},Z.shouldShowZeroLine=function(e,t,n){var r=H.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===z)&&(pe(t,0)||!function(e,a,t,n){var r=t._mainAxis;if(r){var i=e._fullLayout,o=a._id.charAt(0),s=Z.counterLetter(a._id),l=a._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:a._length),i=i._plots[t._mainSubplot];if(!(i.mainplotinfo||i).overlays.length)return h(t);for(var c=Z.list(e,s),u=0;u<c.length;u++){var d=c[u];if(d._mainAxis===r&&h(d))return!0}}function h(e){if(!e.showline||!e.linewidth)return!1;var t=Math.max((e.linewidth+a.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-l)<t}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;var r,i=e._linepositions||{};for(r in i)if(n(i[r][0])||n(i[r][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,i=t._id.charAt(0),a=0;a<n.length;a++){var o=n[a];if(!0===o.visible&&o.xaxis+o.yaxis===r){if(B.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[i])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===i)return!0}}return!1}(e,t))},Z.clipEnds=function(t,e){return e.filter(function(e){return pe(t,e.x)})},Z.allowAutoMargin=function(e){for(var t=Z.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(j.allowAutoMargin(e,ge(r)),r.mirror&&j.allowAutoMargin(e,_e(r))),B.getComponentMethod("rangeslider","isVisible")(r)&&j.allowAutoMargin(e,ye(r))}},Z.swap=function(e,t){for(var n=function(e,t){var n,r,i,a=[];for(n=0;n<t.length;n++){var o=[],s=e._fullData[t[n]].xaxis,l=e._fullData[t[n]].yaxis;if(s&&l){for(r=0;r<a.length;r++)-1===a[r].x.indexOf(s)&&-1===a[r].y.indexOf(l)||o.push(r);if(o.length){var c=a[o[0]];if(1<o.length)for(r=1;r<o.length;r++)i=a[o[r]],ve(c.x,i.x),ve(c.y,i.y);ve(c.x,[s]),ve(c.y,[l])}else a.push({x:[s],y:[l]})}}return a}(e,t),r=0;r<n.length;r++)!function(e,t,n){var r,i,a=[],o=[],s=e.layout;for(r=0;r<t.length;r++)a.push(Z.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push(Z.getFromId(e,n[r]));var l=Object.keys(b),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(r=0;r<l.length;r++){var d=l[r],h=a[0][d],f=o[0][d],p=!0,m=!1,g=!1;if("_"!==d.charAt(0)&&"function"!=typeof h&&-1===c.indexOf(d)){for(i=1;i<a.length&&p;i++){var _=a[i][d];"type"===d&&-1!==u.indexOf(h)&&-1!==u.indexOf(_)&&h!==_?m=!0:_!==h&&(p=!1)}for(i=1;i<o.length&&p;i++){var y=o[i][d];"type"===d&&-1!==u.indexOf(f)&&-1!==u.indexOf(y)&&f!==y?g=!0:o[i][d]!==f&&(p=!1)}p&&(m&&(s[a[0]._name].type="linear"),g&&(s[o[0]._name].type="linear"),function(e,t,n,r,i){var a,o=H.nestedProperty,s=o(e[n[0]._name],t).get(),l=o(e[r[0]._name],t).get();"title"===t&&(s&&s.text===i.x&&(s.text=i.y),l&&l.text===i.y&&(l.text=i.x));for(a=0;a<n.length;a++)o(e,n[a]._name+"."+t).set(l);for(a=0;a<r.length;a++)o(e,r[a]._name+"."+t).set(s)}(s,d,a,o,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var v=e._fullLayout.annotations[r];-1!==t.indexOf(v.xref)&&-1!==n.indexOf(v.yref)&&H.swapAttrs(s.annotations[r],["?"])}}(e,n[r].x,n[r].y)}},{"../../components/color":100,"../../components/drawing":122,"../../components/titles":198,"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"./autorange":275,"./axis_autotype":277,"./axis_ids":280,"./clean_ticks":282,"./layout_attributes":291,"./set_convert":297,"@plotly/d3":11,"fast-isnumeric":15}],277:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),r=e("../../lib"),d=e("../../constants/numerical").BADNUM,l=r.isArrayOrTypedArray,h=r.isDateTime,f=r.cleanNumber,p=Math.round;function m(e){return Math.max(1,(e-1)/1e3)}t.exports=function(e,t,n){var r=e,i=n.noMultiCategory;if(l(r)&&!r.length)return"-";if(!i&&(l((e=r)[0])&&l(e[1])))return"multicategory";if(i&&Array.isArray(r[0])){for(var a=[],o=0;o<r.length;o++)if(l(r[o]))for(var s=0;s<r[o].length;s++)a.push(r[o][s]);r=a}if(function(e,t){for(var n=e.length,r=m(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=p(s),c=e[l],l=String(c);o[l]||(o[l]=1,h(c,t)&&i++,u(c)&&a++)}return 2*a<i}(r,t))return"date";n="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=m(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=p(s),c=e[l],l=String(c);o[l]||(o[l]=1,"boolean"==(l=typeof c)?a++:(t?f(c)!==d:"number"==l)?i++:"string"==l&&a++)}return 2*i<a}(r,n)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(function(e,t){return t?u(e):"number"==typeof e}(e[r],t))return!0;return!1}(r,n)?"linear":"-"}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],278:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),g=e("../../registry"),_=e("../../lib"),y=e("../array_container_defaults"),v=e("./layout_attributes"),b=e("./tick_value_defaults"),x=e("./tick_mark_defaults"),w=e("./tick_label_defaults"),T=e("./category_order_defaults"),A=e("./line_grid_defaults"),k=e("./set_convert"),M=e("./constants").WEEKDAY_PATTERN,d=e("./constants").HOUR_PATTERN;function S(n,r,e){function t(e,t){return _.coerce(n,r,v.rangebreaks,e,t)}if(t("enabled")){var i=t("bounds");if(i&&2<=i.length){var a,o,s="";if(2===i.length)for(a=0;a<2;a++)if(o=h(i[a])){s=M;break}var l=t("pattern",s);if(l===M)for(a=0;a<2;a++)(o=h(i[a]))&&(r.bounds[a]=i[a]=o-1);if(l)for(a=0;a<2;a++)switch(o=i[a],l){case M:if(!u(o))return void(r.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||7<=o)return void(r.enabled=!1);r.bounds[a]=i[a]=o;break;case d:if(!u(o))return void(r.enabled=!1);if((o=+o)<0||24<o)return void(r.enabled=!1);r.bounds[a]=i[a]=o}!1===e.autorange&&((c=e.range)[0]<c[1]?i[0]<c[0]&&i[1]>c[1]&&(r.enabled=!1):i[0]>c[0]&&i[1]<c[1]&&(r.enabled=!1))}else{var c=t("values");c&&c.length?t("dvalue"):r.enabled=!1}}}t.exports=function(e,t,n,r,i){var a=r.letter,o=r.font||{},s=r.splomStash||{},l=n("visible",!r.visibleDflt),c=t._template||{},u=t.type||c.type||"-";"date"===u&&(g.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(d=n("ticklabelmode")));c="";r.noTicklabelposition&&"multicategory"!==u||(c=_.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===d?["outside","inside"]:"x"===a?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==c.indexOf("inside")?"hide past domain":"category"===u||"multicategory"===u?"allow":"hide past div"),k(t,i);var d=!t.isValidRange(e.range);!n("autorange",d=d&&r.reverseDflt?"reversed":d)||"linear"!==u&&"-"!==u||n("rangemode"),n("range"),t.cleanRange(),T(e,t,n,r),"category"===u||r.noHover||n("hoverformat");c=n("color"),d=c!==v.color.dflt?c:o.color,a=s.label||i._dfltTitle[a];if(w(e,t,n,u,r,{pass:1}),!l)return t;n("title.text",a),_.coerceFont(n,"title.font",{family:o.family,size:_.bigFont(o.size),color:d}),b(e,t,n,u),w(e,t,n,u,r,{pass:2}),x(e,t,n,r),A(e,t,n,{dfltColor:c,bgColor:r.bgColor,showGrid:r.showGrid,attributes:v}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin");var h,c="multicategory"===u;if(r.noTickson||"category"!==u&&!c||!t.ticks&&!t.showgrid||"boundaries"===n("tickson",h=c?"boundaries":h)&&delete t.ticklabelposition,c&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===u)if(y(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:S}),t.rangebreaks.length){for(var f=0;f<t.rangebreaks.length;f++)if(t.rangebreaks[f].pattern===M){t._hasDayOfWeekBreaks=!0;break}if(k(t,i),i._has("scattergl")||i._has("splom"))for(var p=0;p<r.data.length;p++){var m=r.data[p];"scattergl"!==m.type&&"splom"!==m.type||(m.visible=!1,_.warn(m.type+" traces do not work on axes with rangebreaks. Setting trace "+m.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};var r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function h(e){if("string"==typeof e)return r[e.substr(0,3).toLowerCase()]}},{"../../lib":230,"../../registry":313,"../array_container_defaults":271,"./category_order_defaults":281,"./constants":283,"./layout_attributes":291,"./line_grid_defaults":293,"./set_convert":297,"./tick_label_defaults":298,"./tick_mark_defaults":299,"./tick_value_defaults":300,"fast-isnumeric":15}],279:[function(e,t,n){"use strict";var e=e("../../constants/docs"),r=e.FORMAT_LINK,i=e.DATE_FORMAT_LINK;function a(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+r+"."].join(" ")}function o(e,t){return a(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?a:o)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:a,descriptionWithDates:o}},{"../../constants/docs":207}],280:[function(e,t,u){"use strict";var o=e("../../registry"),i=e("./constants");function n(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}u.id2name=function(e){if("string"==typeof e&&e.match(i.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},u.name2id=function(e){if(e.match(i.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},u.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(i.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||n)){t=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},u.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var i=u.listIds(e,t),a=new Array(i.length);for(l=0;l<i.length;l++){var o=i[l];a[l]=r[o.charAt(0)+"axis"+o.substr(1)]}if(!n)for(var s=r._subplots.gl3d||[],l=0;l<s.length;l++){var c=r[s[l]];t?a.push(c[t+"axis"]):a.push(c.xaxis,c.yaxis,c.zaxis)}return a},u.listIds=function(e,t){e=e._fullLayout;if(!e)return[];e=e._subplots;return t?e[t+"axis"]:e.xaxis.concat(e.yaxis)},u.getFromId=function(e,t,n){e=e._fullLayout;return t=void 0===t||"string"!=typeof t?t:t.replace(" domain",""),"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),e[u.id2name(t)]},u.getFromTrace=function(e,t,n){var r,i=e._fullLayout,a=null;return o.traceIs(t,"gl3d")?"scene"===(r=t.scene).substr(0,5)&&(a=i[r][n+"axis"]):a=u.getFromId(e,t[n+"axis"]||n),a},u.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?r<n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},u.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},u.isLinked=function(e,t){return n(t,e._axisMatchGroups)||n(t,e._axisConstraintGroups)}},{"../../registry":313,"./constants":283}],281:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i,a;"category"===t.type&&(e=e.categoryarray,"array"===(i=n("categoryorder",i=(e=Array.isArray(e)&&0<e.length)?"array":i))&&(a=n("categoryarray")),"trace"===(i=!e&&"array"===i?t.categoryorder="trace":i)?t._initialCategories=[]:"array"===i?t._initialCategories=a.slice():(a=function(e,t){var n,r,i=t.dataAttr||e._id.charAt(0),a={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var o=t.data[r];o[i+"axis"]===e._id&&n.push(o)}for(r=0;r<n.length;r++)for(var s=n[r][i],l=0;l<s.length;l++){var c=s[l];null!=c&&(a[c]=1)}return Object.keys(a)}(t,r).sort(),"category ascending"===i?t._initialCategories=a:"category descending"===i&&(t._initialCategories=a.reverse())))}},{}],282:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),i=e("../../lib"),e=e("../../constants/numerical"),s=e.ONEDAY,a=e.ONEWEEK;n.dtick=function(e,t){var n="log"===t,r="date"===t,i="category"===t,a=r?s:1;if(!e)return a;if(o(e))return(e=Number(e))<=0?a:i?Math.max(1,Math.round(e)):r?Math.max(.1,e):e;if("string"!=typeof e||!r&&!n)return a;t=e.charAt(0),i=e.substr(1);return(i=o(i)?Number(i):0)<=0||!(r&&"M"===t&&i===Math.round(i)||n&&"L"===t||n&&"D"===t&&(1===i||2===i))?a:e},n.tick0=function(e,t,n,r){return"date"===t?i.cleanDate(e,i.dateTick0(n,r%a==0?1:0)):"D1"!==r&&"D2"!==r?o(e)?Number(e):0:void 0}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],283:[function(e,t,n){"use strict";e=e("../../lib/regex").counter;t.exports={idRegex:{x:e("x","( domain)?"),y:e("y","( domain)?")},attrRegex:e("[xy]axis"),xAxisMatch:e("xaxis"),yAxisMatch:e("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":246}],284:[function(e,t,n){"use strict";var T=e("../../lib"),O=e("./autorange"),P=e("./axis_ids").id2name,A=e("./layout_attributes"),R=e("./scale_zoom"),k=e("./set_convert"),I=e("../../constants/numerical").ALMOST_EQUAL,i=e("../../constants/alignment").FROM_BL;function M(e,t){var n=t.domain;return(n=n||e[P(t.overlaying)].domain)[1]-n[0]}function S(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function E(e,t,n,r){var i,a,o,s=S(e,t);null===s?((s={})[t]=1,o=e.length,e.push(s)):o=e.indexOf(s);for(var l=Object.keys(s),c=0;c<e.length;c++)if(i=e[c],c!==o&&i[n]){for(var u=i[n],d=0;d<l.length;d++)i[a=l[d]]=f(u,f(r,s[a]));return void e.splice(o,1)}if(1!==r)for(d=0;d<l.length;d++){var h=l[d];s[h]=f(r,s[h])}s[n]=1}function f(e,t){var n,r,i="",a="";"string"==typeof e&&(n=(i=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(a=t.match(/^[xy]*/)[0]).length,t=+t.substr(r));var o=e*t;return n||r?n&&r&&i.charAt(0)!==a.charAt(0)?n===r?o:(r<n?i.substr(r):a.substr(n))+o:i+a+e*t:o}function N(e,t){var n=e._inputDomain,r=i[e.constraintoward],r=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[r+(n[0]-r)/t,r+(n[1]-r)/t],e.setScale()}n.handleDefaults=function(e,n,t){for(var r,i,a,o,s=t.axIds,l=t.axHasImage,c=n._axisConstraintGroups=[],u=n._axisMatchGroups=[],d=0;d<s.length;d++)!function(n,r,e){var t=e.axIds,i=e.layoutOut,a=e.hasImage,o=i._axisConstraintGroups,s=i._axisMatchGroups,l=r._id,c=l.charAt(0),e=((i._splomAxes||{})[c]||{})[l]||{},u=r._id,c="x"===u.charAt(0);function d(e,t){return T.coerce(n,r,A,e,t)}r._matchGroup=null,r._constraintGroup=null,d("constrain",a?"domain":"range"),T.coerce(n,r,{constraintoward:{valType:"enumerated",values:c?["left","center","right"]:["bottom","middle","top"],dflt:c?"center":"middle"}},"constraintoward");var h,f,p=r.type,m=[];for(h=0;h<t.length;h++)(f=t[h])!==u&&i[P(f)].type===p&&m.push(f);var g=S(o,u);if(g){var _=[];for(h=0;h<m.length;h++)f=m[h],g[f]||_.push(f);m=_}var y,v,l=m.length;l&&(n.matches||e.matches)&&(y=T.coerce(n,r,{matches:{valType:"enumerated",values:m,dflt:-1!==m.indexOf(e.matches)?e.matches:void 0}},"matches"));a=a&&!c?r.anchor:void 0;l&&!y&&(n.scaleanchor||a)&&(v=T.coerce(n,r,{scaleanchor:{valType:"enumerated",values:m}},"scaleanchor",a));y?(r._matchGroup=E(s,u,y,1),b=i[P(y)],b=M(i,r)/M(i,b),c!=("x"===y.charAt(0))&&(b=(c?"x":"y")+b),E(o,u,y,b)):n.matches&&-1!==t.indexOf(n.matches)&&T.warn("ignored "+r._name+'.matches: "'+n.matches+'" to avoid an infinite loop');{var b;v?(b=(b=d("scaleratio"))||(r.scaleratio=1),E(o,u,v,b)):n.scaleanchor&&-1!==t.indexOf(n.scaleanchor)&&T.warn("ignored "+r._name+'.scaleanchor: "'+n.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}}(a=e[i=P(s[d])],o=n[i],{axIds:s,layoutOut:n,hasImage:l[i]});function h(e,t){for(d=0;d<e.length;d++)for(r in y=e[d])n[P(r)][t]=y}for(h(u,"_matchGroup"),d=0;d<c.length;d++)for(r in y=c[d])if((o=n[P(r)]).fixedrange){for(var f in y){f=P(f);!1===(e[f]||{}).fixedrange&&T.warn("fixedrange was specified as false for axis "+f+" but was overridden because another axis in its constraint group has fixedrange true"),n[f].fixedrange=!0}break}for(d=0;d<c.length;){for(r in y=c[d]){(o=n[P(r)])._matchGroup&&Object.keys(o._matchGroup).length===Object.keys(y).length&&(c.splice(d,1),d--);break}d++}h(c,"_constraintGroup");var p=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],m=!1,g=!1;function _(){w=o[x],"rangebreaks"===x&&(g=o._hasDayOfWeekBreaks)}for(d=0;d<u.length;d++)for(var y=u[d],v=0;v<p.length;v++){var b,x=p[v],w=null;for(r in y)if(a=e[i=P(r)],o=n[i],x in o){if(!o.matches&&(b=o,x in a)){_();break}null===w&&x in a&&_()}if("range"===x&&w&&(m=!0),null!==(w=null===(w="autorange"===x&&null===w&&m?!1:w)&&x in b?b[x]:w))for(r in y)(o=n[P(r)])[x]="range"===x?w.slice():w,"rangebreaks"===x&&(o._hasDayOfWeekBreaks=g,k(o,n))}},n.enforce=function(e){for(var t,n,r,i,a=e._fullLayout,o=a._axisConstraintGroups||[],s=0;s<o.length;s++){for(var l=function(e,t){for(var n=(t=t._size).h/t.w,r={},i=Object.keys(e),a=0;a<i.length;a++){var o=i[a];if("string"==typeof(c=e[o]))for(var s=c.match(/^[xy]*/)[0],l=s.length,c=+c.substr(l),u="y"===s.charAt(0)?n:1/n,d=0;d<l;d++)c*=u;r[o]=c}return r}(o[s],a),c=Object.keys(l),u=1/0,d=0,h=1/0,f={},p={},m=!1,g=0;g<c.length;g++)p[t=c[g]]=n=a[P(t)],n._inputDomain?n.domain=n._inputDomain.slice():n._inputDomain=n.domain.slice(),n._inputRange||(n._inputRange=n.range.slice()),n.setScale(),f[t]=r=Math.abs(n._m)/l[t],u=Math.min(u,r),"domain"!==n.constrain&&n._constraintShrinkable||(h=Math.min(h,r)),delete n._constraintShrinkable,d=Math.max(d,r),"domain"===n.constrain&&(m=!0);if(!(I*d<u)||m)for(g=0;g<c.length;g++)if(r=f[t=c[g]],b=(n=p[t]).constrain,r!==h||"domain"===b)if(i=r/h,"range"===b)R(n,i);else{var _=n._inputDomain,y=(n.domain[1]-n.domain[0])/(_[1]-_[0]),v=(n.r2l(n.range[1])-n.r2l(n.range[0]))/(n.r2l(n._inputRange[1])-n.r2l(n._inputRange[0]));if((i/=y)*v<1)n.domain=n._input.domain=_.slice(),R(n,i);else{if(v<1&&(n.range=n._input.range=n._inputRange.slice(),i*=v),n.autorange){var b=n.r2l(n.range[0]),y=n.r2l(n.range[1]),_=(b+y)/2,x=_,w=_,v=Math.abs(y-_),T=_-v*i*1.0001,A=_+v*i*1.0001,k=O.makePadFn(a,n,0),M=O.makePadFn(a,n,1);N(n,i);for(var S,E=Math.abs(n._m),_=O.concatExtremes(e,n),C=_.min,L=_.max,D=0;D<C.length;D++)T<(S=C[D].val-k(C[D])/E)&&S<x&&(x=S);for(D=0;D<L.length;D++)(S=L[D].val+M(L[D])/E)<A&&w<S&&(w=S);i/=(w-x)/(2*v),x=n.l2r(x),w=n.l2r(w),n.range=n._input.range=b<y?[x,w]:[w,x]}N(n,i)}}}},n.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++)if(n[r][t])return"g"+r;return t},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,i=e._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"./autorange":275,"./axis_ids":280,"./layout_attributes":291,"./scale_zoom":295,"./set_convert":297}],285:[function(e,t,n){"use strict";var pe=e("@plotly/d3"),me=e("tinycolor2"),r=e("has-passive-events"),ge=e("../../registry"),_e=e("../../lib"),a=_e.strTranslate,ye=e("../../lib/svg_text_utils"),i=e("../../components/color"),ve=e("../../components/drawing"),be=e("../../components/fx"),xe=e("./axes"),o=e("../../lib/setcursor"),we=e("../../components/dragelement"),s=e("../../components/dragelement/helpers"),Te=s.selectingOrDrawing,Ae=s.freeMode,ke=e("../../constants/alignment").FROM_TL,Me=e("../../lib/clear_gl_canvases"),Se=e("../../plot_api/subroutines").redrawReglTraces,Ee=e("../plots"),Ce=e("./axis_ids").getFromId,Le=e("./select").prepSelect,De=e("./select").clearSelect,Oe=e("./select").selectOnClick,Pe=e("./scale_zoom"),Re=e("./constants"),Ie=Re.MINDRAG,Ne=Re.MINZOOM,l=!0;function c(t,e,n,r){n=_e.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return n.call(o,r),n.node()}function ze(e,t,n,r,i,a,o){n=c(e,"rect",t,n);return pe.select(n).call(ve.setRect,r,i,a,o),n}function Fe(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function je(e,t,n,r,i){for(var a=0;a<e.length;a++){var o,s,l=e[a];l.fixedrange||(l.rangebreaks?(s=(o="y"===l._id.charAt(0))?1-n:n,r[l._name+".range[0]"]=l.l2r(l.p2l((o?1-t:t)*l._length)),r[l._name+".range[1]"]=l.l2r(l.p2l(s*l._length))):(o=l._rl[0],s=l._rl[1]-o,r[l._name+".range[0]"]=l.l2r(o+s*t),r[l._name+".range[1]"]=l.l2r(o+s*n)))}i&&i.length&&je(i,i=(t+(1-n))/2,1-i,r,[])}function Be(e,t){for(var n=0;n<e.length;n++){var r,i=e[n];i.fixedrange||(i.rangebreaks?(r=i._length,r=(i.p2l(0+t)-i.p2l(0)+(i.p2l(r+t)-i.p2l(r)))/2,i.range=[i.l2r(i._rl[0]-r),i.l2r(i._rl[1]-r)]):i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)])}}function He(e,t,n,r,i){return e.append("path").attr("class","zoombox").style({fill:.2<t?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(n,r)).attr("d",i+"Z")}function Ue(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(t,n)).attr("d","M0,0Z")}function Ve(e,t,n,r,i,a){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),u(e,t,i,a)}function u(e,t,n,r){n||(e.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function qe(e){pe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Ye(e){l&&e.data&&e._context.showTips&&(_e.notifier(_e._(e,"Double-click to zoom back out"),"long"),l=!1)}function Ge(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,Ne)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function We(e,t,n,r,i){for(var a,o,s,l,c=!1,u={},d={},h=(i||{}).xaHash,f=(i||{}).yaHash,p=0;p<t.length;p++){var m=t[p];for(a in n)if(m[a]){for(s in m)i&&(h[s]||f[s])||("x"===s.charAt(0)?n:r)[s]||(u[s]=a);for(o in r)i&&(h[o]||f[o])||!m[o]||(c=!0)}for(o in r)if(m[o])for(l in m)i&&(h[l]||f[l])||("x"===l.charAt(0)?n:r)[l]||(d[l]=o)}c&&(_e.extendFlat(u,d),d={});var g={},_=[];for(s in u){var y=Ce(e,s);_.push(y),g[y._id]=y}var v={},b=[];for(l in d){var x=Ce(e,l);b.push(x),v[x._id]=x}return{xaHash:g,yaHash:v,xaxes:_,yaxes:b,xLinks:u,yLinks:d,isSubplotConstrained:c}}function Xe(e,t){var n;r?(n=void 0!==e.onwheel?"wheel":"mousewheel",e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})):void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function Ze(e){var t,n=[];for(t in e)n.push(e[t]);return n}t.exports={makeDragBox:function(y,s,e,t,n,r,v,b){var x,w,T,A,l,c,a,o,u,d,h,k,M,S,f,E,C,L,D,O,p,m,g,_=y._fullLayout._zoomlayer,P=v+b==="nsew",R=1===(v+b).length;function I(){if(x=s.xaxis,w=s.yaxis,u=x._length,d=w._length,a=x._offset,o=w._offset,(T={})[x._id]=x,(A={})[w._id]=w,v&&b)for(var e=s.overlays,t=0;t<e.length;t++){var n=e[t].xaxis;T[n._id]=n;n=e[t].yaxis;A[n._id]=n}l=Ze(T),c=Ze(A),M=Fe(l,b),S=Fe(c,v),f=!S&&!M,k=We(y,y._fullLayout._axisMatchGroups,T,A);var r=(h=We(y,y._fullLayout._axisConstraintGroups,T,A,k)).isSubplotConstrained||k.isSubplotConstrained;E=b||r,C=v||r;r=y._fullLayout;L=r._has("scattergl"),D=r._has("splom"),O=r._has("svg")}I();var i,N,z=(i=S+M,z=y._fullLayout.dragmode,N=P,i?"nsew"!==i?i.toLowerCase()+"-resize":N?"":"pan"===z?"move":"crosshair":"pointer"),F=ze(s,v+b+"drag",z,e,t,n,r);if(f&&!P)return F.onmousedown=null,F.style.pointerEvents="none",F;var j,B,H,U,V,q,Y,G,W,X,Z={element:F,gd:y,plotinfo:s};function J(){Z.plotinfo.selection=!1,De(y)}function $(e,t){var n,r,i,a,o=Z.gd;0<=o._fullLayout._activeShapeIndex?o._fullLayout._deactivateShape(o):(a=o._fullLayout.clickmode,qe(o),2!==e||R||function(){if(!y._transitioningWithDuration){var e=y._context.doubleClick,t=[];M&&(t=t.concat(l)),S&&(t=t.concat(c)),k.xaxes&&(t=t.concat(k.xaxes)),k.yaxes&&(t=t.concat(k.yaxes));var n,r,i,a={};if("reset+autosize"===e)for(e="autosize",r=0;r<t.length;r++)if((n=t[r])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}if("autosize"===e)for(r=0;r<t.length;r++)(n=t[r]).fixedrange||(a[n._name+".autorange"]=!0);else if("reset"===e)for((M||h.isSubplotConstrained)&&(t=t.concat(h.xaxes)),S&&!h.isSubplotConstrained&&(t=t.concat(h.yaxes)),h.isSubplotConstrained&&(M?S||(t=t.concat(c)):t=t.concat(l)),r=0;r<t.length;r++)(n=t[r]).fixedrange||(n._rangeInitial?(i=n._rangeInitial,a[n._name+".range[0]"]=i[0],a[n._name+".range[1]"]=i[1]):a[n._name+".autorange"]=!0);y.emit("plotly_doubleclick",null),ge.call("_guiRelayout",y,a)}}(),P?(-1<a.indexOf("select")&&Oe(t,o,l,c,s.id,Z),-1<a.indexOf("event")&&be.click(o,t,s.id)):1===e&&R&&(r=(n=v?w:x)._name+".range["+(a="s"===v||"w"===b?0:1)+"]",t=a,a=(e=n).range[t],t=Math.abs(a-e.range[1-t]),t="date"===e.type?a:"log"===e.type?(i=Math.ceil(Math.max(0,-Math.log(t)/Math.LN10))+3,pe.format("."+i+"g")(Math.pow(10,a))):(i=Math.floor(Math.log(Math.abs(a))/Math.LN10)-Math.floor(Math.log(t)/Math.LN10)+4,pe.format("."+String(i)+"g")(a)),i="left",a="middle",n.fixedrange||(v?(a="n"===v?"top":"bottom","right"===n.side&&(i="right")):"e"===b&&(i="right"),o._context.showAxisRangeEntryBoxes&&pe.select(F).call(ye.makeEditable,{gd:o,immediate:!0,background:o._fullLayout.paper_bgcolor,text:String(t),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:i,verticalAlign:a}).on("edit",function(e){e=n.d2r(e);void 0!==e&&ge.call("_guiRelayout",o,r,e)}))))}function Q(e,t){if(y._transitioningWithDuration)return!1;var n,r,i=Math.max(0,Math.min(u,m*e+j)),a=Math.max(0,Math.min(d,g*t+B)),e=Math.abs(i-j),t=Math.abs(a-B);function o(){Y="",H.r=H.l,H.t=H.b,W.attr("d","M0,0Z")}H.l=Math.min(j,i),H.r=Math.max(j,i),H.t=Math.min(B,a),H.b=Math.max(B,a),h.isSubplotConstrained?Ne<e||Ne<t?(Y="xy",t/d<e/u?(t=e*d/u,a<B?H.t=B-t:H.b=B+t):(e=t*u/d,i<j?H.l=j-e:H.r=j+e),W.attr("d",Ge(H))):o():k.isSubplotConstrained?Ne<e||Ne<t?(Y="xy",r=Math.min(H.l/u,(d-H.b)/d),n=Math.max(H.r/u,(d-H.t)/d),H.l=r*u,H.r=n*u,H.b=(1-r)*d,H.t=(1-n)*d,W.attr("d",Ge(H))):o():!S||t<Math.min(Math.max(.6*e,Ie),Ne)?e<Ie||!M?o():(H.t=0,H.b=d,Y="x",W.attr("d",(r=B,"M"+((n=H).l-.5)+","+(r-Ne-.5)+"h-3v"+(2*Ne+1)+"h3ZM"+(n.r+.5)+","+(r-Ne-.5)+"h3v"+(2*Ne+1)+"h-3Z"))):!M||e<Math.min(.6*t,Ne)?(H.l=0,H.r=u,Y="y",W.attr("d","M"+((e=j)-Ne-.5)+","+((t=H).t-.5)+"v-3h"+(2*Ne+1)+"v3ZM"+(e-Ne-.5)+","+(t.b+.5)+"v3h"+(2*Ne+1)+"v-3Z")):(Y="xy",W.attr("d",Ge(H))),H.w=H.r-H.l,H.h=H.b-H.t,Y&&(X=!0),y._dragged=X,Ve(G,W,H,V,q,U),K(),y.emit("plotly_relayouting",p),q=!0}function K(){p={},"xy"!==Y&&"x"!==Y||(je(l,H.l/u,H.r/u,p,h.xaxes),se("x",p)),"xy"!==Y&&"y"!==Y||(je(c,(d-H.b)/d,(d-H.t)/d,p,h.yaxes),se("y",p))}function ee(){K(),qe(y),ce(),Ye(y)}Z.prepFn=function(e,t,n){var r=Z.dragmode,i=y._fullLayout.dragmode;i!==r&&(Z.dragmode=i),I(),m=y._fullLayout._invScaleX,g=y._fullLayout._invScaleY,f||(P?e.shiftKey?"pan"===i?i="zoom":Te(i)||(i="pan"):e.ctrlKey&&(i="pan"):i="pan"),Ae(i)?Z.minDrag=1:Z.minDrag=void 0,Te(i)?(Z.xaxes=l,Z.yaxes=c,Le(e,t,n,Z,i)):(Z.clickFn=$,Te(r)&&J(),f||("zoom"===i?(Z.moveFn=Q,Z.doneFn=ee,Z.minDrag=1,function(e,t){var n=F.getBoundingClientRect();j=e-n.left,B=t-n.top,y._fullLayout._calcInverseTransform(y);n=_e.apply3DTransform(y._fullLayout._invTransform)(j,B);j=n[0],B=n[1],H={l:j,r:j,w:0,t:B,b:B,h:0},U=y._hmpixcount?y._hmlumcount/y._hmpixcount:me(y._fullLayout.plot_bgcolor).getLuminance(),Y="xy",X=q=!1,G=He(_,U,a,o,V="M0,0H"+u+"V"+d+"H0V0"),W=Ue(_,a,o)}(t,n)):"pan"===i&&(Z.moveFn=oe,Z.doneFn=ce))),y._fullLayout._redrag=function(){var e,t=y._dragdata;t&&t.element===F&&(e=y._fullLayout.dragmode,Te(e)||(I(),ue([0,0,u,d]),Z.moveFn(t.dx,t.dy)))}},we.init(Z);var te=[0,0,u,d],ne=null,re=Re.REDRAWDELAY,ie=s.mainplot?y._fullLayout._plots[s.mainplot]:s;function ae(e){if(y._context._scrollZoom.cartesian||y._fullLayout._enablescrollzoom){if(J(),y._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();I(),clearTimeout(ne);var t=-e.deltaY;if(isFinite(t)||(t=e.wheelDelta/10),isFinite(t)){var n,r=Math.exp(-Math.min(Math.max(t,-20),20)/200),t=ie.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(e.clientX-t.left)/t.width,a=(t.bottom-e.clientY)/t.height;if(E){for(b||(i=.5),n=0;n<l.length;n++)o(l[n],i,r);se("x"),te[2]*=r,te[0]+=te[2]*i*(1/r-1)}if(C){for(v||(a=.5),n=0;n<c.length;n++)o(c[n],a,r);se("y"),te[3]*=r,te[1]+=te[3]*(1-a)*(1/r-1)}ue(te),le(),y.emit("plotly_relayouting",p),ne=setTimeout(function(){y._fullLayout&&(te=[0,0,u,d],ce())},re),e.preventDefault()}else _e.log("Did not find wheel motion attributes: ",e)}function o(t,e,n){var r,i;t.fixedrange||(r=_e.simpleMap(t.range,t.r2l),i=r[0]+(r[1]-r[0])*e,t.range=r.map(function(e){return t.l2r(i+(e-i)*n)}))}}function oe(e,t){if(e*=m,t*=g,!y._transitioningWithDuration){if(y._fullLayout._replotting=!0,"ew"===M||"ns"===S){var n=M?-e:0,r=S?-t:0;return k.isSubplotConstrained&&(M&&S&&(n=-(e=(a=(e/u-t/d)/2)*u),r=-(t=-a*d)),S?n=-r*u/d:r=-n*d/u),M&&(Be(l,e),se("x")),S&&(Be(c,t),se("y")),ue([n,r,u,d]),le(),void y.emit("plotly_relayouting",p)}var i,a="w"===M==("n"===S)?1:-1;if(M&&S&&(h.isSubplotConstrained||k.isSubplotConstrained)&&(e=(o=(e/u+a*t/d)/2)*u,t=a*o*d),"w"===M?e=s(l,0,e):"e"===M?e=s(l,1,-e):M||(e=0),"n"===S?t=s(c,1,t):"s"===S?t=s(c,0,-t):S||(t=0),n="w"===M?e:0,r="n"===S?t:0,h.isSubplotConstrained&&!k.isSubplotConstrained||k.isSubplotConstrained&&M&&S&&0<a){if(k.isSubplotConstrained||!M&&1===S.length){for(i=0;i<l.length;i++)l[i].range=l[i]._r.slice(),Pe(l[i],1-t/d);n=(e=t*u/d)/2}if(k.isSubplotConstrained||!S&&1===M.length){for(i=0;i<c.length;i++)c[i].range=c[i]._r.slice(),Pe(c[i],1-e/u);r=(t=e*d/u)/2}}k.isSubplotConstrained&&S||se("x"),k.isSubplotConstrained&&M||se("y");var o=u-e,a=d-t;!k.isSubplotConstrained||M&&S||(M?(r=n?0:e*d/u,a=o*d/u):(n=r?0:t*u/d,o=a*u/d)),ue([n,r,o,a]),le(),y.emit("plotly_relayouting",p)}function s(e,t,n){for(var r=1-t,i=0;i<e.length;i++){var a,o,s,l=e[i];l.fixedrange||(o=(a=l)._rl[r]+(l._rl[t]-l._rl[r])/(1-(0<=(s=n/l._length)?Math.min(s,.9):1/(1/Math.max(s,-.3)+3.222))),!1!==(s=l.l2r(o))&&void 0!==s&&(l.range[t]=s))}return a._length*(a._rl[t]-o)/(a._rl[t]-a._rl[r])}}function se(e,t){for(var n=k.isSubplotConstrained?{x:c,y:l}[e]:k[e+"axes"],r=k.isSubplotConstrained?{x:l,y:c}[e]:[],i=0;i<n.length;i++){var a=n[i],o=a._id,o=k.xLinks[o]||k.yLinks[o],o=r[0]||T[o]||A[o];o&&(t?(t[a._name+".range[0]"]=t[o._name+".range[0]"],t[a._name+".range[1]"]=t[o._name+".range[1]"]):a.range=o.range.slice())}}function le(){var t,n=[];function e(e){for(t=0;t<e.length;t++)e[t].fixedrange||n.push(e[t]._id)}for(E&&(e(l),e(h.xaxes),e(k.xaxes)),C&&(e(c),e(h.yaxes),e(k.yaxes)),p={},t=0;t<n.length;t++){var r=n[t],r=Ce(y,r);xe.drawOne(y,r,{skipTitle:!0}),p[r._name+".range[0]"]=r.range[0],p[r._name+".range[1]"]=r.range[1]}xe.redrawComponents(y,n)}function ce(){ue([0,0,u,d]),_e.syncOrAsync([Ee.previousPromises,function(){y._fullLayout._replotting=!1,ge.call("_guiRelayout",y,p)}],y)}function ue(e){var t=y._fullLayout,n=t._plots,r=t._subplots.cartesian;if(D&&ge.subplotsRegistry.splom.drag(y),L)for(d=0;d<r.length;d++){var i,a,o,s=(o=n[r[d]]).xaxis,l=o.yaxis;o._scene&&(i=_e.simpleMap(s.range,s.r2l),a=_e.simpleMap(l.range,l.r2l),o._scene.update({range:[i[0],a[0],i[1],a[1]]}))}if((D||L)&&(Me(y),Se(y)),O)for(var c=e[2]/x._length,u=e[3]/w._length,d=0;d<r.length;d++){s=(o=n[r[d]]).xaxis,l=o.yaxis;var h,f,p=(E||k.isSubplotConstrained)&&!s.fixedrange&&T[s._id],m=(C||k.isSubplotConstrained)&&!l.fixedrange&&A[l._id],g=p?(h=c,b||k.isSubplotConstrained?e[0]:fe(s,h)):k.xaHash[s._id]?(h=c,e[0]*s._length/x._length):k.yaHash[s._id]?(h=u,"ns"===S?-e[1]*s._length/w._length:fe(s,h,{n:"top",s:"bottom"}[S])):he(s,h=de(s,c,u)),_=m?(f=u,v||k.isSubplotConstrained?e[1]:fe(l,f)):k.yaHash[l._id]?(f=u,e[1]*l._length/w._length):k.xaHash[l._id]?(f=c,"ew"===M?-e[0]*l._length/x._length:fe(l,f,{e:"right",w:"left"}[M])):he(l,f=de(l,c,u));(h||f)&&(p=s._offset-g/(h=h||1),m=l._offset-_/(f=f||1),o.clipRect.call(ve.setTranslate,g,_).call(ve.setScale,h,f),o.plot.call(ve.setTranslate,p,m).call(ve.setScale,1/h,1/f),h===o.xScaleFactor&&f===o.yScaleFactor||(ve.setPointGroupScale(o.zoomScalePts,h,f),ve.setTextPointsScale(o.zoomScaleTxt,h,f)),ve.hideOutsideRangePoints(o.clipOnAxisFalseTraces,o),o.xScaleFactor=h,o.yScaleFactor=f)}}function de(e,t,n){return e.fixedrange?0:E&&h.xaHash[e._id]?t:C&&(h.isSubplotConstrained?h.xaHash:h.yaHash)[e._id]?n:0}function he(e,t){return t?(e.range=e._r.slice(),Pe(e,t),fe(e,t)):0}function fe(e,t,n){return e._length*(1-t)*ke[n||e.constraintoward||"middle"]}return v.length*b.length!=1&&Xe(F,ae),F},makeDragger:c,makeRectDragger:ze,makeZoombox:He,makeCorners:Ue,updateZoombox:Ve,xyCorners:Ge,transitionZoombox:u,removeZoombox:qe,showDoubleClickNotifier:Ye,attachWheelEventHandler:Xe}},{"../../components/color":100,"../../components/dragelement":119,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../constants/alignment":205,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/subroutines":266,"../../registry":313,"../plots":311,"./axes":276,"./axis_ids":280,"./constants":283,"./scale_zoom":295,"./select":296,"@plotly/d3":11,"has-passive-events":47,tinycolor2:65}],286:[function(e,t,n){"use strict";var r=e("@plotly/d3"),l=e("../../components/fx"),c=e("../../components/dragelement"),i=e("../../lib/setcursor"),u=e("./dragbox").makeDragBox,d=e("./constants").DRAGGERSIZE;n.initInteractions=function(o){var e,s=o._fullLayout;o._context.staticPlot?r.select(o).selectAll(".drag").remove():(s._has("cartesian")||s._has("splom"))&&(Object.keys(s._plots||{}).sort(function(e,t){if((s._plots[e].mainplot&&!0)!==(s._plots[t].mainplot&&!0))return s._plots[e].mainplot?1:-1;e=e.split("y"),t=t.split("y");return e[0]===t[0]?Number(e[1]||1)-Number(t[1]||1):Number(e[0]||1)-Number(t[0]||1)}).forEach(function(t){var n,e,r=s._plots[t],i=r.xaxis,a=r.yaxis;r.mainplot||((n=u(o,r,i._offset,a._offset,i._length,a._length,"ns","ew")).onmousemove=function(e){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===t&&o._fullLayout._plots[t]&&l.hover(o,e,t)},l.hover(o,e,t),o._fullLayout._lasthover=n,o._fullLayout._hoversubplot=t},n.onmouseout=function(e){o._dragging||(o._fullLayout._hoversubplot=null,c.unhover(o,e))},o._context.showAxisDragHandles&&(u(o,r,i._offset-d,a._offset-d,d,d,"n","w"),u(o,r,i._offset+i._length,a._offset-d,d,d,"n","e"),u(o,r,i._offset-d,a._offset+a._length,d,d,"s","w"),u(o,r,i._offset+i._length,a._offset+a._length,d,d,"s","e"))),o._context.showAxisDragHandles&&(t===i._mainSubplot&&(e=i._mainLinePosition,"top"===i.side&&(e-=d),u(o,r,i._offset+.1*i._length,e,.8*i._length,d,"","ew"),u(o,r,i._offset,e,.1*i._length,d,"","w"),u(o,r,i._offset+.9*i._length,e,.1*i._length,d,"","e")),t===a._mainSubplot&&(i=a._mainLinePosition,"right"!==a.side&&(i-=d),u(o,r,i,a._offset+.1*a._length,d,.8*a._length,"ns",""),u(o,r,i,a._offset+.9*a._length,d,.1*a._length,"s",""),u(o,r,i,a._offset,d,.1*a._length,"n","")))}),(e=s._hoverlayer.node()).onmousemove=function(e){e.target=o._fullLayout._lasthover,l.hover(o,e,s._hoversubplot)},e.onclick=function(e){e.target=o._fullLayout._lasthover,l.click(o,e)},e.onmousedown=function(e){o._fullLayout._lasthover.onmousedown(e)},n.updateFx(o))},n.updateFx=function(e){var t=e._fullLayout,e="pan"===t.dragmode?"move":"crosshair";i(t._draggers,e)}},{"../../components/dragelement":119,"../../components/fx":140,"../../lib/setcursor":250,"./constants":283,"./dragbox":285,"@plotly/d3":11}],287:[function(e,t,n){"use strict";t.exports={clearOutlineControllers:function(e){(e=e._fullLayout._zoomlayer)&&e.selectAll(".outline-controllers").remove()},clearSelect:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}}},{}],288:[function(e,t,n){"use strict";var r=e("../../lib").strTranslate;function i(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}t.exports={p2r:i,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(t){var n="y"===t._id.charAt(0)?1:0;return function(e){return i(t,e[n])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},{"../../lib":230}],289:[function(e,t,n){"use strict";var g=e("../../registry"),_=e("../../lib"),y=e("./axis_ids");t.exports=function(m){return function(e,t){var n=e[m];if(Array.isArray(n))for(var r=g.subplotsRegistry.cartesian,i=r.idRegex,e=t._subplots,a=e.xaxis,o=e.yaxis,s=e.cartesian,l=t._has("cartesian")||t._has("gl2d"),c=0;c<n.length;c++){var u,d,h,f,p=n[c];_.isPlainObject(p)&&(u=y.cleanId(p.xref,"x",!1),d=y.cleanId(p.yref,"y",!1),h=i.x.test(u),f=i.y.test(d),(h||f)&&(l||_.pushUnique(t._basePlotModules,r),p=!1,h&&-1===a.indexOf(u)&&(a.push(u),p=!0),f&&-1===o.indexOf(d)&&(o.push(d),p=!0),p&&h&&f&&s.push(u+d)))}}}},{"../../lib":230,"../../registry":313,"./axis_ids":280}],290:[function(e,t,n){"use strict";var y=e("@plotly/d3"),v=e("../../registry"),f=e("../../lib"),r=e("../plots"),b=e("../../components/drawing"),x=e("../get_data").getModuleCalcData,m=e("./axis_ids"),w=e("./constants"),i=e("../../constants/xmlns_namespaces"),u=f.ensureSingle;function d(e,t,n){return f.ensureSingle(e,t,n,function(e){e.datum(n)})}function g(r,i,e,a,o){for(var t=w.traceLayerClasses,n=r._fullLayout,s=n._modules,l=[],c=[],u=0;u<s.length;u++){var d,h,f,p,m=(d=s[u]).name,g=v.modules[m].categories;g.svg&&(h=d.layerName||m+"layer",f=d.plot,p=(m=x(e,f))[0],e=m[1],p.length&&l.push({i:t.indexOf(h),className:h,plotMethod:f,cdModule:p}),g.zoomScale&&c.push("."+h))}l.sort(function(e,t){return e.i-t.i});var _=i.plot.selectAll("g.mlayer").data(l,function(e){return e.className});_.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0).classed("rangeplot",i.isRangePlot),_.exit().remove(),_.order(),_.each(function(e){var t=y.select(this),n=e.className;e.plotMethod(r,i,e.cdModule,t,a,o),-1===w.clipOnAxisFalseQuery.indexOf("."+n)&&b.setClipUrl(t,i.layerClipId,r)}),n._has("scattergl")&&(d=v.getModule("scattergl"),p=x(e,d)[0],d.plot(r,i,p)),r._context.staticPlot||(i._hasClipOnAxisFalse&&(i.clipOnAxisFalseTraces=i.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),c.length&&(n=i.plot.selectAll(c.join(",")).selectAll(".trace"),i.zoomScalePts=n.selectAll("path.point"),i.zoomScaleTxt=n.selectAll(".textpoint")))}function a(e,t){var n,r,i,a=t.plotgroup,o=t.id,s=w.layerValue2layerClass[t.xaxis.layer],l=w.layerValue2layerClass[t.yaxis.layer],c=e._fullLayout._hasOnlyLargeSploms;t.mainplot?(r=(n=t.mainplotinfo).plotgroup,e=o+"-x",i=o+"-y",t.gridlayer=n.gridlayer,t.zerolinelayer=n.zerolinelayer,u(n.overlinesBelow,"path",e),u(n.overlinesBelow,"path",i),u(n.overaxesBelow,"g",e),u(n.overaxesBelow,"g",i),t.plot=u(n.overplot,"g",o),u(n.overlinesAbove,"path",e),u(n.overlinesAbove,"path",i),u(n.overaxesAbove,"g",e),u(n.overaxesAbove,"g",i),t.xlines=r.select(".overlines-"+s).select("."+e),t.ylines=r.select(".overlines-"+l).select("."+i),t.xaxislayer=r.select(".overaxes-"+s).select("."+e),t.yaxislayer=r.select(".overaxes-"+l).select("."+i)):c?(t.xlines=u(a,"path","xlines-above"),t.ylines=u(a,"path","ylines-above"),t.xaxislayer=u(a,"g","xaxislayer-above"),t.yaxislayer=u(a,"g","yaxislayer-above")):(i=u(a,"g","layer-subplot"),t.shapelayer=u(i,"g","shapelayer"),t.imagelayer=u(i,"g","imagelayer"),t.gridlayer=u(a,"g","gridlayer"),t.zerolinelayer=u(a,"g","zerolinelayer"),u(a,"path","xlines-below"),u(a,"path","ylines-below"),t.overlinesBelow=u(a,"g","overlines-below"),u(a,"g","xaxislayer-below"),u(a,"g","yaxislayer-below"),t.overaxesBelow=u(a,"g","overaxes-below"),t.plot=u(a,"g","plot"),t.overplot=u(a,"g","overplot"),t.xlines=u(a,"path","xlines-above"),t.ylines=u(a,"path","ylines-above"),t.overlinesAbove=u(a,"g","overlines-above"),u(a,"g","xaxislayer-above"),u(a,"g","yaxislayer-above"),t.overaxesAbove=u(a,"g","overaxes-above"),t.xlines=a.select(".xlines-"+s),t.ylines=a.select(".ylines-"+l),t.xaxislayer=a.select(".xaxislayer-"+s),t.yaxislayer=a.select(".yaxislayer-"+l)),c||(d(t.gridlayer,"g",t.xaxis._id),d(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(m.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function _(e,t){if(e){var n,r={};for(n in e.each(function(e){e=e[0];y.select(this).remove(),T(e,t),r[e]=!0}),t._plots)for(var i=t._plots[n].overlays||[],a=0;a<i.length;a++){var o=i[a];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function T(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=w.idRegex,n.attrRegex=w.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){for(var n,r,t=t._subplots,i=t.xaxis,a=t.yaxis,o=t.cartesian,s=o.concat(t.gl2d||[]),l={},c={},u=0;u<s.length;u++){var d=s[u].split("y");c["y"+d[l[d[0]]=1]]=1}for(u=0;u<i.length;u++)l[n=i[u]]||(r=(e[m.id2name(n)]||{}).anchor,w.idRegex.y.test(r)||(r="y"),o.push(n+r),s.push(n+r),c[r]||(c[r]=1,f.pushUnique(a,r)));for(u=0;u<a.length;u++)c[r=a[u]]||(n=(e[m.id2name(r)]||{}).anchor,w.idRegex.x.test(n)||(n="x"),o.push(n+r),s.push(n+r),l[n]||(l[n]=1,f.pushUnique(i,n)));if(!s.length){for(var h in r=n="",e)w.attrRegex.test(h)&&("x"===h.charAt(0)?(!n||+h.substr(5)<+n.substr(5))&&(n=h):(!r||+h.substr(5)<+r.substr(5))&&(r=h));n=n?m.name2id(n):"x",r=r?m.name2id(r):"y",i.push(n),a.push(r),o.push(n+r)}},n.plot=function(e,t,n,r){var i,a=e._fullLayout,o=a._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],i=0;i<s.length;i++)t.push(i);for(i=0;i<o.length;i++){for(var l,c=o[i],u=a._plots[c],d=[],h=0;h<s.length;h++){var f=s[h],p=f[0].trace;p.xaxis+p.yaxis===c&&(-1===t.indexOf(p.index)&&!p.carpet||(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(f)),l=f)}g(e,u,d,n,r)}},n.clean=function(e,t,n,r){var i,a,o=r._plots||{},s=t._plots||{},l=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(a in o)(i=o[a]).plotgroup&&i.plotgroup.remove();var c=r._has&&r._has("gl"),u=t._has&&t._has("gl");if(c&&!u)for(a in o)(i=o[a])._scene&&i._scene.destroy();if(l.xaxis&&l.yaxis)for(var d=m.listIds({_fullLayout:r}),h=0;h<d.length;h++){var f=d[h];t[m.id2name(f)]||r._infolayer.selectAll(".g-"+f+"title").remove()}c=r._has&&r._has("cartesian"),u=t._has&&t._has("cartesian");if(c&&!u)_(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(l.cartesian)for(h=0;h<l.cartesian.length;h++){var p=l.cartesian[h];s[p]||(r._cartesianlayer.selectAll("."+p+",."+p+"-x,."+p+"-y").remove(),T(p,r))}},n.drawFramework=function(n){var r=n._fullLayout,e=function(e){var t,n,r,i,a,o,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){r=l[t],i=s._plots[r],a=i.xaxis,o=i.yaxis;var h=a._mainAxis,f=o._mainAxis,h=h._id+f._id,f=s._plots[h];i.overlays=[],h!==r&&f?(i.mainplot=h,i.mainplotinfo=f,d.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,u.push(r))}for(t=0;t<d.length;t++)r=d[t],(i=s._plots[r]).mainplotinfo.overlays.push(i);var p=u.concat(d),m=new Array(c);for(t=0;t<c;t++){r=p[t],i=s._plots[r],a=i.xaxis,o=i.yaxis;var g=[r,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(n=0;n<i.overlays.length;n++)g.push(i.overlays[n].id);m[t]=g}return m}(n),e=r._cartesianlayer.selectAll(".subplot").data(e,String);e.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),e.order(),e.exit().call(_,r),e.each(function(e){var t=e[0],e=r._plots[t];e.plotgroup=y.select(this),a(n,e),e.draglayer=u(r._draggers,"g",t)})},n.rangePlot=function(e,t,n){a(e,t),g(e,t,n),r.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=y.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:i.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":122,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../registry":313,"../get_data":307,"../plots":311,"./attributes":274,"./axis_ids":280,"./constants":283,"./graph_interact":286,"./layout_attributes":291,"./layout_defaults":292,"./transition_axes":301,"@plotly/d3":11}],291:[function(e,t,n){"use strict";var r=e("../font_attributes"),i=e("../../components/color/attributes"),a=e("../../components/drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,c=e("../../constants/numerical").ONEDAY,u=e("./constants"),d=u.HOUR_PATTERN,e=u.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,d,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":99,"../../components/drawing/attributes":121,"../../constants/numerical":210,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_format_attributes":279,"../font_attributes":305,"./constants":283}],292:[function(e,t,n){"use strict";var Q=e("../../lib"),K=e("../../components/color"),ee=e("../../components/fx/helpers").isUnifiedHover,te=e("../../components/fx/hovermode_defaults"),ne=e("../../plot_api/plot_template"),re=e("../layout_attributes"),ie=e("./layout_attributes"),ae=e("./type_defaults"),oe=e("./axis_defaults"),se=e("./constraints"),le=e("./position_defaults"),ce=e("./axis_ids"),ue=ce.id2name,de=ce.name2id,he=e("./constants").AX_ID_PATTERN,e=e("../../registry"),fe=e.traceIs,pe=e.getComponentMethod;function me(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(o,e,t){for(var n,r=e.autotypenumbers,i={},a={},s={},l={},c={},u={},d={},h={},f={},p={},m=0;m<t.length;m++){var g,_,y=t[m];if(fe(y,"cartesian")||fe(y,"gl2d")){if(y.xaxis)g=ue(y.xaxis),me(i,g,y);else if(y.xaxes)for(n=0;n<y.xaxes.length;n++)me(i,ue(y.xaxes[n]),y);if(y.yaxis)_=ue(y.yaxis),me(i,_,y);else if(y.yaxes)for(n=0;n<y.yaxes.length;n++)me(i,ue(y.yaxes[n]),y);"funnel"===y.type?"h"===y.orientation?(g&&(a[g]=!0),_&&(d[_]=!0)):_&&(s[_]=!0):"image"===y.type?(_&&(h[_]=!0),g&&(h[g]=!0)):(_&&(c[_]=!0,u[_]=!0),fe(y,"carpet")&&("carpet"!==y.type||y._cheater)||g&&(l[g]=!0)),"carpet"===y.type&&y._cheater&&g&&(a[g]=!0),fe(y,"2dMap")&&(f[g]=!0,f[_]=!0),fe(y,"oriented")&&(p["h"===y.orientation?_:g]=!0)}}var v=e._subplots,b=v.xaxis,x=v.yaxis,w=Q.simpleMap(b,ue),T=Q.simpleMap(x,ue),A=w.concat(T),v=K.background;b.length&&x.length&&(v=Q.coerce(o,e,re,"plot_bgcolor"));var k,M,S=K.combine(v,e.paper_bgcolor);function E(){var e=i[X]||[];J._traceIndices=e.map(function(e){return e._expandedIndex}),J._annIndices=[],J._shapeIndices=[],J._imgIndices=[],J._subplotsWith=[],J._counterAxes=[],J._name=J._attr=X,J._id=k}function C(e,t){return Q.coerce(Z,J,ie,e,t)}function L(e,t){return Q.coerce2(Z,J,ie,e,t)}function D(e,t){for(var n="x"===e?w:T,r=[],i=0;i<n.length;i++){var a=n[i];a===t||(o[a]||{}).overlaying||r.push(de(a))}return r}var O={x:x,y:b},P=O.x.concat(O.y),R={},I=[];function N(){var e=Z.matches;he.test(e)&&-1===P.indexOf(e)&&(R[e]=Z.type,I=Object.keys(R))}var z=te(o,e),F=ee(z);for(m=0;m<A.length;m++){X=A[m],k=de(X),M=X.charAt(0),Q.isPlainObject(o[X])||(o[X]={}),Z=o[X],J=ne.newContainer(e,X,M+"axis"),E();var j="x"===M&&!l[X]&&a[X]||"y"===M&&!c[X]&&s[X],B="y"===M&&(!u[X]&&d[X]||h[X]),H={letter:M,font:e.font,outerTicks:f[X],showGrid:!p[X],data:i[X]||[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:j,reverseDflt:B,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[M]||{})[k]};C("uirevision",e.uirevision),ae(Z,J,C,H),oe(Z,J,C,H,e);var U=F&&M===z.charAt(0),V=L("spikecolor",F?J.color:void 0),q=L("spikethickness",F?1.5:void 0),j=L("spikedash",F?"dot":void 0),B=L("spikemode",F?"across":void 0),H=L("spikesnap");C("showspikes",!!(U||V||q||j||B||H))||(delete J.spikecolor,delete J.spikethickness,delete J.spikedash,delete J.spikemode,delete J.spikesnap),le(Z,J,C,{letter:M,counterAxes:O[M],overlayableAxes:D(M,X),grid:e.grid}),C("title.standoff"),N(),J._input=Z}for(m=0;m<I.length;){k=I[m++],M=(X=ue(k)).charAt(0),Q.isPlainObject(o[X])||(o[X]={}),Z=o[X],J=ne.newContainer(e,X,M+"axis"),E();var Y={letter:M,font:e.font,outerTicks:f[X],showGrid:!p[X],data:[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[M]||{})[k]};C("uirevision",e.uirevision),J.type=R[k]||"linear",oe(Z,J,C,Y,e),le(Z,J,C,{letter:M,counterAxes:O[M],overlayableAxes:D(M,X),grid:e.grid}),C("fixedrange"),N(),J._input=Z}var G=pe("rangeslider","handleDefaults"),W=pe("rangeselector","handleDefaults");for(m=0;m<w.length;m++)X=w[m],Z=o[X],J=e[X],G(o,e,X),"date"===J.type&&W(Z,J,e,T,J.calendar),C("fixedrange");for(m=0;m<T.length;m++){var X=T[m],Z=o[X],J=e[X],$=e[ue(J.anchor)];C("fixedrange",pe("rangeslider","isVisible")($))}se.handleDefaults(o,e,{axIds:P.concat(I).sort(ce.idSort),axHasImage:h})}},{"../../components/color":100,"../../components/fx/helpers":136,"../../components/fx/hovermode_defaults":139,"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"../layout_attributes":309,"./axis_defaults":278,"./axis_ids":280,"./constants":283,"./constraints":284,"./layout_attributes":291,"./position_defaults":294,"./type_defaults":302}],293:[function(e,t,n){"use strict";var l=e("tinycolor2").mix,c=e("../../components/color/attributes").lightFraction,u=e("../../lib");t.exports=function(n,r,e,i){var t=(i=i||{}).dfltColor;function a(e,t){return u.coerce2(n,r,i.attributes,e,t)}var o=a("linecolor",t),s=a("linewidth");e("showline",i.showLine||!!o||!!s)||(delete r.linecolor,delete r.linewidth);o=a("gridcolor",l(t,i.bgColor,i.blend||c).toRgbString()),s=a("gridwidth");e("showgrid",i.showGrid||!!o||!!s)||(delete r.gridcolor,delete r.gridwidth),i.noZeroLine||(s=a("zerolinecolor",t),t=a("zerolinewidth"),e("zeroline",i.showGrid||!!s||!!t)||(delete r.zerolinecolor,delete r.zerolinewidth))}},{"../../components/color/attributes":99,"../../lib":230,tinycolor2:65}],294:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),h=e("../../lib");t.exports=function(e,t,n,r){var i=r.counterAxes||[],a=r.overlayableAxes||[],o=r.letter,r=r.grid;r&&(s=r._domains[o][r._axisMap[t._id]],l=r._anchors[t._id],s&&(c=r[o+"side"].split(" ")[0],u=r.domain[o]["right"===c||"top"===c?1:0]));var s=s||[0,1],l=l||!d(e.position)&&i[0]||"free",c=c||("x"===o?"bottom":"left"),u=u||0;"free"===h.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:l}},"anchor")&&n("position",u),h.coerce(e,t,{side:{valType:"enumerated",values:"x"===o?["bottom","top"]:["left","right"],dflt:c}},"side");c=!1;return(c=a.length?h.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(a),dflt:!1}},"overlaying"):c)||((c=n("domain",s))[0]>c[1]-1/4096&&(t.domain=s),h.noneOrAll(e.domain,t.domain,s)),n("layer"),t}},{"../../lib":230,"fast-isnumeric":15}],295:[function(e,t,n){"use strict";var i=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=i[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],n=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(n+(r[0]-n)*t),e.l2r(n+(r[1]-n)*t)],e.setScale()}},{"../../constants/alignment":205}],296:[function(e,t,n){"use strict";var U=e("polybooljs"),p=e("../../registry"),V=e("../../components/drawing").dashStyle,q=e("../../components/color"),Y=e("../../components/fx"),a=e("../../components/fx/helpers").makeEventData,r=e("../../components/dragelement/helpers"),G=r.freeMode,W=r.rectMode,X=r.drawMode,Z=r.openMode,J=r.selectMode,$=e("../../components/shapes/draw_newshape/display_outlines"),Q=e("../../components/shapes/draw_newshape/helpers").handleEllipse,i=e("../../components/shapes/draw_newshape/newshapes"),K=e("../../lib"),l=e("../../lib/polygon"),ee=e("../../lib/throttle"),h=e("./axis_ids").getFromId,m=e("../../lib/clear_gl_canvases"),g=e("../../plot_api/subroutines").redrawReglTraces,te=e("./constants"),ne=te.MINSELECT,re=l.filter,ie=l.tester,s=e("./handle_outline").clearSelect,e=e("./helpers"),ae=e.p2r,oe=e.axValue,se=e.getTransform;function le(e,t,n,r,i,a,o){var s,l,c,u=t._hoverdata,d=-1<t._fullLayout.clickmode.indexOf("event"),h=[];if((c=u)&&Array.isArray(c)&&!0!==c[0].hoverOnBox){ue(e,t,a);var f,i=function(e,t){var n,r,i=e[0],a=-1,o=[];for(r=0;r<t.length;r++)if(n=t[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(u,f=he(t,n,r,i));if(0<i.pointNumbers.length?function(e,t){var n,r,i,a=[];for(i=0;i<e.length;i++)(n=e[i]).cd[0].trace.selectedpoints&&0<n.cd[0].trace.selectedpoints.length&&a.push(n);if(1===a.length&&a[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(i=0;i<t.pointNumbers.length;i++)if(r.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}(f,i):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if(t=e[n],(t=t.cd[0].trace).selectedpoints){if(1<t.selectedpoints.length)return!1;if(1<(r+=t.selectedpoints.length))return!1}return 1===r}(f)&&(p=y(i))){for(o&&o.remove(),g=0;g<f.length;g++)(s=f[g])._module.selectPoints(s,!1);fe(t,f),de(a),d&&t.emit("plotly_deselect",null)}else{for(var e=e.shiftKey&&(void 0!==p?p:y(i)),p={pointNumber:i.pointNumber,searchInfo:i.searchInfo,subtract:e},m=ce(a.selectionDefs.concat([p])),g=0;g<f.length;g++)if(l=pe(f[g]._module.selectPoints(f[g],m),f[g]),h.length)for(var _=0;_<l.length;_++)h.push(l[_]);else h=l;fe(t,f,i={points:h}),a&&a.selectionDefs.push(p),o&&(e=a.mergedPolygons,p=Z(a.dragmode),$(me(e,p),o,a)),d&&t.emit("plotly_selected",i)}}}function c(e){return"pointNumber"in e&&"searchInfo"in e}function ce(e){for(var t,o=[],n=c(e[0])?0:e[0][0][0],r=n,i=c(e[0])?0:e[0][0][1],a=i,s=0;s<e.length;s++)c(e[s])?o.push(function(a){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,n,r){var i=a.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===i&&n===a.pointNumber},isRect:!1,degenerate:!1,subtract:a.subtract}}(e[s])):((t=l.tester(e[s])).subtract=e[s].subtract,o.push(t),n=Math.min(n,t.xmin),r=Math.max(r,t.xmax),i=Math.min(i,t.ymin),a=Math.max(a,t.ymax));return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(e,t,n,r){for(var i=!1,a=0;a<o.length;a++)o[a].contains(e,t,n,r)&&(i=!1===o[a].subtract);return i},isRect:!1,degenerate:!1}}function ue(e,t,n){t._fullLayout._drawing=!1;var r=t._fullLayout,i=n.plotinfo,a=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,a=(e.shiftKey||e.altKey)&&!(X(a)&&Z(a));o&&a&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):a&&i.selection||de(n),o||(s(t),r._lastSelectedSubplot=i.id)}function de(e){var t=e.dragmode,n=e.plotinfo,r=e.gd;0<=r._fullLayout._activeShapeIndex&&r._fullLayout._deactivateShape(r),!X(t)||(t=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id))&&r._fullLayout._drawing&&((t=i(t,e))&&p.call("_guiRelayout",r,{shapes:t}),r._fullLayout._drawing=!1),n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function he(e,t,n,r){for(var i,a,o,s=[],l=t.map(function(e){return e._id}),c=n.map(function(e){return e._id}),u=0;u<e.calcdata.length;u++)!0===(o=(i=e.calcdata[u])[0].trace).visible&&o._module&&o._module.selectPoints&&(!r||o.subplot!==r&&o.geo!==r?"splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[c[0]]?((a=d(o._module,i,t[0],n[0])).scene=e._fullLayout._splomScenes[o.uid],s.push(a)):"sankey"===o.type?(a=d(o._module,i,t[0],n[0]),s.push(a)):-1!==l.indexOf(o.xaxis)&&-1!==c.indexOf(o.yaxis)&&s.push(d(o._module,i,h(e,o.xaxis),h(e,o.yaxis))):s.push(d(o._module,i,t[0],n[0])));return s;function d(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function y(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,e=e.pointNumbers,n=0<e.length?e[0]:n;return!!t.selectedpoints&&-1<t.selectedpoints.indexOf(n)}function fe(e,t,n){var r,i;for(l=0;l<t.length;l++){var a=t[l].cd[0].trace._fullInput,o=e._fullLayout._tracePreGUI[a.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=a._input.selectedpoints||null)}if(n){for(var s=n.points||[],l=0;l<t.length;l++)(i=t[l].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(l=0;l<s.length;l++){var c=s[l],u=c.data,d=c.fullData;c.pointIndices?([].push.apply(u.selectedpoints,c.pointIndices),i._fullInput!==i&&[].push.apply(d.selectedpoints,c.pointIndices)):(u.selectedpoints.push(c.pointIndex),i._fullInput!==i&&d.selectedpoints.push(c.pointIndex))}}else for(l=0;l<t.length;l++)delete(i=t[l].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;var h=!1;for(l=0;l<t.length;l++){i=(r=(f=t[l]).cd)[0].trace,p.traceIs(i,"regl")&&(h=!0);var f=f._module,f=f.styleOnSelect||f.style;f&&(f(e,r,r[0].node3),r[0].nodeRangePlot3&&f(e,r,r[0].nodeRangePlot3))}h&&(m(e),g(e))}function pe(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,i=0;i<e.length;i++)e[i]=a(e[i],r,n);return e}function me(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var i=0;i<e[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var a=0;a<e[r][i].length;a++)n[r][i].push(e[r][i][a])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}t.exports={prepSelect:function(e,t,n,s,r){var l=G(r),c=W(r),u=Z(r),d=X(r),h=J(r),f="drawcircle"===r,p="drawline"===r||f,m=s.gd,g=m._fullLayout,i=g._zoomlayer,a=s.element.getBoundingClientRect(),o=s.plotinfo,_=se(o),y=t-a.left,v=n-a.top;g._calcInverseTransform(m);var b,x,w,T,A,k,M,S,E,y=(a=K.apply3DTransform(g._invTransform)(y,v))[0],v=a[1],C=g._invScaleX,L=g._invScaleY,a="M"+y+","+v,D=s.xaxes[0]._length,O=s.yaxes[0]._length,P=s.xaxes.concat(s.yaxes),R=e.altKey&&!(X(r)&&u);ue(e,m,s),l&&(w=re([[y,v]],te.BENDPX));var I=i.selectAll("path.select-outline-"+o.id).data(d?[0]:[1,2]),e=g.newshape;I.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+o.id}).style(d?{opacity:e.opacity/2,fill:u?void 0:e.fillcolor,stroke:e.line.color,"stroke-dasharray":V(e.line.dash,e.line.width),"stroke-width":e.line.width+"px"}:{}).attr("fill-rule",e.fillrule).classed("cursor-move",!!d).attr("transform",_).attr("d",a+"Z");var N,z=i.append("path").attr("class","zoombox-corners").style({fill:q.background,stroke:q.defaultLine,"stroke-width":1}).attr("transform",_).attr("d","M0,0Z"),F=g._uid+te.SELECTID,j=[],B=he(m,s.xaxes,s.yaxes,s.subplot);function H(e,t){return e-t}N=o.fillRangeItems||(c?function(e,t){var n=e.range={};for(M=0;M<P.length;M++){var r=P[M],i=r._id.charAt(0);n[r._id]=[ae(r,t[i+"min"]),ae(r,t[i+"max"])].sort(H)}}:function(e,t,n){var r=e.lassoPoints={};for(M=0;M<P.length;M++){var i=P[M];r[i._id]=n.filtered.map(oe(i))}}),s.moveFn=function(e,t){b=Math.max(0,Math.min(D,C*e+y)),x=Math.max(0,Math.min(O,L*t+v));var n,r,i=Math.abs(b-y),a=Math.abs(x-v);if(c){if(h){var o,t=g.selectdirection;switch(o="any"===t?a<Math.min(.6*i,ne)?"h":i<Math.min(.6*a,ne)?"v":"d":t){case"h":n=f?O/2:0,r=O;break;case"v":n=f?D/2:0,r=D}}if(d)switch(g.newshape.drawdirection){case"vertical":o="h",n=f?O/2:0,r=O;break;case"horizontal":o="v",n=f?D/2:0,r=D;break;case"ortho":r=i<a?(o="h",n=v,x):(o="v",n=y,b);break;default:o="d"}"h"===o?((k=p?Q(f,[b,n],[b,r]):[[y,n],[y,r],[b,r],[b,n]]).xmin=p?b:Math.min(y,b),k.xmax=p?b:Math.max(y,b),k.ymin=Math.min(n,r),k.ymax=Math.max(n,r),z.attr("d","M"+k.xmin+","+(v-ne)+"h-4v"+2*ne+"h4ZM"+(k.xmax-1)+","+(v-ne)+"h4v"+2*ne+"h-4Z")):"v"===o?((k=p?Q(f,[n,x],[r,x]):[[n,v],[n,x],[r,x],[r,v]]).xmin=Math.min(n,r),k.xmax=Math.max(n,r),k.ymin=p?x:Math.min(v,x),k.ymax=p?x:Math.max(v,x),z.attr("d","M"+(y-ne)+","+k.ymin+"v-4h"+2*ne+"v4ZM"+(y-ne)+","+(k.ymax-1)+"v4h"+2*ne+"v-4Z")):"d"===o&&((k=p?Q(f,[y,v],[b,x]):[[y,v],[y,x],[b,x],[b,v]]).xmin=Math.min(y,b),k.xmax=Math.max(y,b),k.ymin=Math.min(v,x),k.ymax=Math.max(v,x),z.attr("d","M0,0Z"))}else l&&(w.addPt([b,x]),k=w.filtered);T=s.selectionDefs&&s.selectionDefs.length?(A=function(e,t,n){if(n)return U.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions;return U.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(s.mergedPolygons,k,R),k.subtract=R,ce(s.selectionDefs.concat([k]))):(A=[k],ie(k)),$(me(A,u),I,s),h&&ee.throttle(F,te.SELECTDELAY,function(){var e;j=[];var t,n=[];for(M=0;M<B.length;M++)if(t=(S=B[M])._module.selectPoints(S,T),n.push(t),e=pe(t,S),j.length)for(var r=0;r<e.length;r++)j.push(e[r]);else j=e;fe(m,B,E={points:j}),N(E,k,w),s.gd.emit("plotly_selecting",E)})},s.clickFn=function(e,t){var n;z.remove(),0<=m._fullLayout._activeShapeIndex?m._fullLayout._deactivateShape(m):d||(n=g.clickmode,ee.done(F).then(function(){if(ee.clear(F),2===e){for(I.remove(),M=0;M<B.length;M++)(S=B[M])._module.selectPoints(S,!1);fe(m,B),de(s),m.emit("plotly_deselect",null)}else-1<n.indexOf("select")&&le(t,m,s.xaxes,s.yaxes,s.subplot,s,I),"event"===n&&m.emit("plotly_selected",void 0);Y.click(m,t)}).catch(K.error))},s.doneFn=function(){z.remove(),ee.done(F).then(function(){ee.clear(F),s.gd.emit("plotly_selected",E),k&&s.selectionDefs&&(k.subtract=R,s.selectionDefs.push(k),s.mergedPolygons.length=0,[].push.apply(s.mergedPolygons,A)),s.doneFnCompleted&&s.doneFnCompleted(j)}).catch(K.error),d&&de(s)}},clearSelect:s,clearSelectionsCache:de,selectOnClick:le}},{"../../components/color":100,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../components/fx/helpers":136,"../../components/shapes/draw_newshape/display_outlines":188,"../../components/shapes/draw_newshape/helpers":189,"../../components/shapes/draw_newshape/newshapes":190,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/polygon":242,"../../lib/throttle":253,"../../plot_api/subroutines":266,"../../registry":313,"./axis_ids":280,"./constants":283,"./handle_outline":287,"./helpers":288,polybooljs:55}],297:[function(e,t,n){"use strict";var _=e("@plotly/d3"),v=e("d3-time-format").utcFormat,b=e("fast-isnumeric"),x=e("../../lib"),w=x.cleanNumber,T=x.ms2DateTime,A=x.dateTime2ms,k=x.ensureNumber,M=x.isArrayOrTypedArray,r=e("../../constants/numerical"),S=r.FP_SAFE,E=r.BADNUM,C=r.LOG_CLIP,L=r.ONEWEEK,D=r.ONEDAY,O=r.ONEHOUR,P=r.ONEMIN,R=r.ONESEC,I=e("./axis_ids"),N=e("./constants"),z=N.HOUR_PATTERN,F=N.WEEKDAY_PATTERN;function j(e){return Math.pow(10,e)}function B(e){return null!=e}t.exports=function(y,f){f=f||{};var p=y._id||"x",m=p.charAt(0);function n(e,t){if(0<e)return Math.log(e)/Math.LN10;if(e<=0&&t&&y.range&&2===y.range.length){e=y.range[0],t=y.range[1];return.5*(e+t-2*C*Math.abs(e-t))}return E}function r(e,t,n,r){if((r||{}).msUTC&&b(e))return+e;if((r=A(e,n||y.calendar))===E){if(!b(e))return E;e=+e;n=Math.floor(10*x.mod(e+.05,1)),e=Math.round(e-n/10),r=A(new Date(e))+n/10}return r}function i(e,t,n){return T(e,t,n||y.calendar)}function t(e){return y._categories[Math.round(e)]}function g(e){if(B(e)){if(void 0===y._categoriesMap&&(y._categoriesMap={}),void 0!==y._categoriesMap[e])return y._categoriesMap[e];y._categories.push("number"==typeof e?String(e):e);var t=y._categories.length-1;return y._categoriesMap[e]=t}return E}function d(e){if(y._categoriesMap)return y._categoriesMap[e]}function a(e){var t=d(e);return void 0!==t?t:b(e)?+e:void 0}function o(e){return b(e)?+e:d(e)}function c(e,t,n){return _.round(n+t*e,2)}function s(e,t,n){return(e-n)/t}var u,l=function(e){return b(e)?c(e,y._m,y._b):E},h=function(e){return s(e,y._m,y._b)};y.rangebreaks&&(u="y"===m,l=function(e){if(!b(e))return E;var t=y._rangebreaks.length;if(!t)return c(e,y._m,y._b);for(var n=u,r=(n=y.range[0]>y.range[1]?!n:n)?-1:1,i=r*e,a=0,o=0;o<t;o++){var s=r*y._rangebreaks[o].min,l=r*y._rangebreaks[o].max;if(i<s)break;if(!(l<i)){a=i<(s+l)/2?o:o+1;break}a=o+1}n=y._B[a]||0;return isFinite(n)?c(e,y._m2,n):0},h=function(e){var t=y._rangebreaks.length;if(!t)return s(e,y._m,y._b);for(var n=0,r=0;r<t&&!(e<y._rangebreaks[r].pmin);r++)e>y._rangebreaks[r].pmax&&(n=r+1);return s(e,y._m2,y._B[n])}),y.c2l="log"===y.type?n:k,y.l2c="log"===y.type?j:k,y.l2p=l,y.p2l=h,y.c2p="log"===y.type?function(e,t){return l(n(e,t))}:l,y.p2c="log"===y.type?function(e){return j(h(e))}:h,-1!==["linear","-"].indexOf(y.type)?(y.d2r=y.r2d=y.d2c=y.r2c=y.d2l=y.r2l=w,y.c2d=y.c2r=y.l2d=y.l2r=k,y.d2p=y.r2p=function(e){return y.l2p(w(e))},y.p2d=y.p2r=h,y.cleanPos=k):"log"===y.type?(y.d2r=y.d2l=function(e,t){return n(w(e),t)},y.r2d=y.r2c=function(e){return j(w(e))},y.d2c=y.r2l=w,y.c2d=y.l2r=k,y.c2r=n,y.l2d=j,y.d2p=function(e,t){return y.l2p(y.d2r(e,t))},y.p2d=function(e){return j(h(e))},y.r2p=function(e){return y.l2p(w(e))},y.p2r=h,y.cleanPos=k):"date"===y.type?(y.d2r=y.r2d=x.identity,y.d2c=y.r2c=y.d2l=y.r2l=r,y.c2d=y.c2r=y.l2d=y.l2r=i,y.d2p=y.r2p=function(e,t,n){return y.l2p(r(e,0,n))},y.p2d=y.p2r=function(e,t,n){return i(h(e),t,n)},y.cleanPos=function(e){return x.cleanDate(e,E,y.calendar)}):"category"===y.type?(y.d2c=y.d2l=g,y.r2d=y.c2d=y.l2d=t,y.d2r=y.d2l_noadd=a,y.r2c=function(e){e=o(e);return void 0!==e?e:y.fraction2r(.5)},y.l2r=y.c2r=k,y.r2l=o,y.d2p=function(e){return y.l2p(y.r2c(e))},y.p2d=function(e){return t(h(e))},y.r2p=y.d2p,y.p2r=h,y.cleanPos=function(e){return"string"==typeof e&&""!==e?e:k(e)}):"multicategory"===y.type&&(y.r2d=y.c2d=y.l2d=t,y.d2r=y.d2l_noadd=a,y.r2c=function(e){e=a(e);return void 0!==e?e:y.fraction2r(.5)},y.r2c_just_indices=d,y.l2r=y.c2r=k,y.r2l=a,y.d2p=function(e){return y.l2p(y.r2c(e))},y.p2d=function(e){return t(h(e))},y.r2p=y.d2p,y.p2r=h,y.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:k(e)},y.setupMultiCategory=function(e){var t,n=y._traceIndices,r=y._matchGroup;if(r&&0===y._categories.length)for(var i in r)i!==p&&(i=f[I.id2name(i)],n=n.concat(i._traceIndices));for(var a=[[0,{}],[0,{}]],o=[],s=0;s<n.length;s++){var l=e[n[s]];if(m in l){var c=l[m],u=l._length||x.minRowLength(c);if(M(c[0])&&M(c[1]))for(t=0;t<u;t++){var d=c[0][t],h=c[1][t];B(d)&&B(h)&&(o.push([d,h]),d in a[0][1]||(a[0][1][d]=a[0][0]++),h in a[1][1]||(a[1][1][h]=a[1][0]++))}}}for(o.sort(function(e,t){var n=a[0][1],n=n[e[0]]-n[t[0]];if(n)return n;n=a[1][1];return n[e[1]]-n[t[1]]}),s=0;s<o.length;s++)g(o[s])}),y.fraction2r=function(e){var t=y.r2l(y.range[0]),n=y.r2l(y.range[1]);return y.l2r(t+e*(n-t))},y.r2fraction=function(e){var t=y.r2l(y.range[0]),n=y.r2l(y.range[1]);return(y.r2l(e)-t)/(n-t)},y.cleanRange=function(e,t){t=t||{};var n,r=x.nestedProperty(y,e=e||"range").get(),i="date"===y.type?x.dfltRange(y.calendar):"y"===m?N.DFLTRANGEY:t.dfltRange||N.DFLTRANGEX;if(i=i.slice(),"tozero"!==y.rangemode&&"nonnegative"!==y.rangemode||(i[0]=0),r&&2===r.length)for("date"!==y.type||y.autorange||(r[0]=x.cleanDate(r[0],E,y.calendar),r[1]=x.cleanDate(r[1],E,y.calendar)),n=0;n<2;n++)if("date"===y.type){if(!x.isDateTime(r[n],y.calendar)){y[e]=i;break}if(y.r2l(r[0])===y.r2l(r[1])){var a=x.constrain(y.r2l(r[0]),x.MIN_MS+1e3,x.MAX_MS-1e3);r[0]=y.l2r(a-1e3),r[1]=y.l2r(a+1e3);break}}else{if(!b(r[n])){if(!b(r[1-n])){y[e]=i;break}r[n]=r[1-n]*(n?10:.1)}r[n]<-S?r[n]=-S:r[n]>S&&(r[n]=S),r[0]===r[1]&&(a=Math.max(1,Math.abs(1e-6*r[0])),r[0]-=a,r[1]+=a)}else x.nestedProperty(y,e).set(i)},y.setScale=function(e){var t=f._size;y.overlaying&&(r=I.getFromId({_fullLayout:f},y.overlaying),y.domain=r.domain);var n=e&&y._r?"_r":"range",r=y.calendar;y.cleanRange(n);var i,a,e=y.r2l(y[n][0],r),n=y.r2l(y[n][1],r),r="y"===m;if((r?(y._offset=t.t+(1-y.domain[1])*t.h,y._length=t.h*(y.domain[1]-y.domain[0]),y._m=y._length/(e-n),y._b=-y._m*n):(y._offset=t.l+y.domain[0]*t.w,y._length=t.w*(y.domain[1]-y.domain[0]),y._m=y._length/(n-e),y._b=-y._m*e),y._rangebreaks=[],y._lBreaks=0,y._m2=0,y._B=[],y.rangebreaks)&&(y._rangebreaks=y.locateBreaks(Math.min(e,n),Math.max(e,n)),y._rangebreaks.length)){for(i=0;i<y._rangebreaks.length;i++)a=y._rangebreaks[i],y._lBreaks+=Math.abs(a.max-a.min);t=r;(t=n<e?!r:r)&&y._rangebreaks.reverse();var o=t?-1:1;for(y._m2=o*y._length/(Math.abs(n-e)-y._lBreaks),y._B.push(-y._m2*(r?n:e)),i=0;i<y._rangebreaks.length;i++)a=y._rangebreaks[i],y._B.push(y._B[y._B.length-1]-o*y._m2*(a.max-a.min));for(i=0;i<y._rangebreaks.length;i++)(a=y._rangebreaks[i]).pmin=l(a.min),a.pmax=l(a.max)}if(!isFinite(y._m)||!isFinite(y._b)||y._length<0)throw f._replotting=!1,new Error("Something went wrong with axis scaling")},y.maskBreaks=function(e){var t=y.rangebreaks||[];t._cachedPatterns||(t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?x.simpleMap(e.bounds,e.pattern?w:y.d2c):null})),t._cachedValues||(t._cachedValues=t.map(function(e){return e.enabled&&e.values?x.simpleMap(e.values,y.d2c).sort(x.sorterAsc):null}));for(var n=0;n<t.length;n++){var r=t[n];if(r.enabled)if(r.bounds){var i,a=r.pattern,o=(i=t._cachedPatterns[n])[0],s=i[1];switch(a){case F:c=(l=new Date(e)).getUTCDay(),s<o&&(s+=7,c<o&&(c+=7));break;case z:var l,c=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5);s<o&&(s+=24,c<o&&(c+=24));break;case"":c=e}if(o<=c&&c<s)return E}else for(var u=t._cachedValues[n],d=0;d<u.length;d++)if(s=(o=u[d])+r.dvalue,o<=e&&e<s)return E}return e},y.locateBreaks=function(a,o){var s=[];if(!y.rangebreaks)return s;for(var e=y.rangebreaks.slice().sort(function(e,t){return e.pattern===F&&t.pattern===z?-1:t.pattern===F&&e.pattern===z?1:0}),t=function(e,t){if((e=x.constrain(e,a,o))!==(t=x.constrain(t,a,o))){for(var n=!0,r=0;r<s.length;r++){var i=s[r];e<i.max&&t>=i.min&&(e<i.min&&(i.min=e),t>i.max&&(i.max=t),n=!1)}n&&s.push({min:e,max:t})}},n=0;n<e.length;n++){var r=e[n];if(r.enabled)if(r.bounds){var i=a,l=o;r.pattern&&(i=Math.floor(i));var c,u,d,h=(c=x.simpleMap(r.bounds,r.pattern?w:y.r2l))[0],f=c[1],p=new Date(i);switch(r.pattern){case F:d=L,u=(f-h+(f<h?7:0))*D,i+=h*D-(p.getUTCDay()*D+p.getUTCHours()*O+p.getUTCMinutes()*P+p.getUTCSeconds()*R+p.getUTCMilliseconds());break;case z:d=D,u=(f-h+(f<h?24:0))*O,i+=h*O-(p.getUTCHours()*O+p.getUTCMinutes()*P+p.getUTCSeconds()*R+p.getUTCMilliseconds());break;default:i=Math.min(c[0],c[1]),u=d=(l=Math.max(c[0],c[1]))-i}for(var m=i;m<l;m+=d)t(m,m+u)}else for(var g=x.simpleMap(r.values,y.d2c),_=0;_<g.length;_++)t(h=g[_],f=h+r.dvalue)}return s.sort(function(e,t){return e.min-t.min}),s},y.makeCalcdata=function(e,t,n){var r=y.type,i="date"===r&&e[t+"calendar"];if(t in e){if(s=e[t],l=e._length||x.minRowLength(s),x.isTypedArray(s)&&("linear"===r||"log"===r)){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}if("multicategory"===r)return function(e,t){for(var n=new Array(t),r=0;r<t;r++){var i=(e[0]||[])[r],a=(e[1]||[])[r];n[r]=d([i,a])}return n}(s,l);for(c=new Array(l),u=0;u<l;u++)c[u]=y.d2c(s[u],0,i,n)}else for(var a=(t+"0"in e?y.d2c(e[t+"0"],0,i):0),o=e["d"+t]?Number(e["d"+t]):1,s=e[{x:"y",y:"x"}[t]],l=e._length||s.length,c=new Array(l),u=0;u<l;u++)c[u]=a+u*o;if(y.rangebreaks)for(u=0;u<l;u++)c[u]=y.maskBreaks(c[u]);return c},y.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&b(y.r2l(e[0]))&&b(y.r2l(e[1]))},y.isPtWithinRange=function(e,t){var n=y.c2l(e[m],null,t),e=y.r2l(y.range[0]),t=y.r2l(y.range[1]);return e<t?e<=n&&n<=t:t<=n&&n<=e},y._emptyCategories=function(){y._categories=[],y._categoriesMap={}},y.clearCalc=function(){var e=y._matchGroup;if(e){var t,n=null,r=null;for(t in e){var i=f[I.id2name(t)];if(i._categories){n=i._categories,r=i._categoriesMap;break}}n&&r?(y._categories=n,y._categoriesMap=r):y._emptyCategories()}else y._emptyCategories();if(y._initialCategories)for(var a=0;a<y._initialCategories.length;a++)g(y._initialCategories[a])},y.sortByInitialCategories=function(){var e=[];if(y._emptyCategories(),y._initialCategories)for(var t=0;t<y._initialCategories.length;t++)g(y._initialCategories[t]);var n,r,e=e.concat(y._traceIndices);for(n in y._matchGroup)p!==n&&((r=f[I.id2name(n)])._categories=y._categories,r._categoriesMap=y._categoriesMap,e=e.concat(r._traceIndices));return e};var e=f._d3locale;"date"===y.type&&(y._dateFormat=e?e.timeFormat:v,y._extraFormat=f._extraFormat),y._separators=f.separators,y._numFormat=e?e.numberFormat:_.format,delete y._minDtick,delete y._forceTick0}},{"../../constants/numerical":210,"../../lib":230,"./axis_ids":280,"./constants":283,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],298:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../components/color").contrast,u=e("./layout_attributes"),d=e("../array_container_defaults");function h(t){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(n.every(function(e){return t[e]===t[n[0]]})||1===n.length)return t[n[0]]}function f(n,r){function e(e,t){return l.coerce(n,r,u.tickformatstops,e,t)}e("enabled")&&(e("dtickrange"),e("value"))}t.exports=function(e,t,n,r,i,a){a&&1!==a.pass||function(e,t,n){e=h(e);t("tickprefix")&&t("showtickprefix",e);t("ticksuffix",n.tickSuffixDflt)&&t("showticksuffix",e)}(e,n,i),a&&2!==a.pass||function(e,t,n,r,i){var a=h(e);n("tickprefix")&&n("showtickprefix",a);n("ticksuffix",i.tickSuffixDflt)&&n("showticksuffix",a);{var o,s;n("showticklabels")&&(o=i.font||{},s=t.color,s=-1!==(t.ticklabelposition||"").indexOf("inside")?c(i.bgColor):s&&s!==u.color.dflt?s:o.color,l.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:s}),n("tickangle"),"category"!==r&&(s=n("tickformat"),d(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:f}),t.tickformatstops.length||delete t.tickformatstops,s||"date"===r||(n("showexponent",a),n("exponentformat"),n("minexponent"),n("separatethousands"))))}}(e,t,n,r,i)}},{"../../components/color":100,"../../lib":230,"../array_container_defaults":271,"./layout_attributes":291}],299:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes");t.exports=function(e,t,n,r){var i=o.coerce2(e,t,s,"ticklen"),a=o.coerce2(e,t,s,"tickwidth"),e=o.coerce2(e,t,s,"tickcolor",t.color);n("ticks",r.outerTicks||i||a||e?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":230,"./layout_attributes":291}],300:[function(e,t,n){"use strict";var l=e("./clean_ticks"),c=e("../../lib").isArrayOrTypedArray;t.exports=function(n,r,e,t){function i(e){var t=n[e];return void 0!==t?t:(r._template||{})[e]}var a=i("tick0"),o=i("dtick"),s=i("tickvals"),s=e("tickmode",c(s)?"array":o?"linear":"auto");"auto"===s?e("nticks"):"linear"===s?(o=r.dtick=l.dtick(o,t),r.tick0=l.tick0(a,t,r.calendar,o)):"multicategory"!==t&&(void 0===e("tickvals")?r.tickmode="auto":e("ticktext"))}},{"../../lib":230,"./clean_ticks":282}],301:[function(e,t,n){"use strict";var h=e("@plotly/d3"),f=e("../../registry"),y=e("../../lib"),v=e("../../components/drawing"),b=e("./axes");t.exports=function(_,a,i,e){var o,s,l,c,r=_._fullLayout;if(0!==a.length){e&&(o=e());var u=h.ease(i.easing);return _._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var e={},t=0;t<a.length;t++){var n=a[t],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr0&&(e[r._name+".range"]=n.xr0.slice()),n.yr0&&(e[i._name+".range"]=n.yr0.slice())}return f.call("relayout",_,e).then(function(){for(var e=0;e<a.length;e++)d(a[e].plotinfo)})}()}),s=Date.now(),c=window.requestAnimationFrame(function e(){l=Date.now();for(var t=Math.min(1,(l-s)/i.duration),n=u(t),r=0;r<a.length;r++)!function(e,t){var n,r,i,a,o=e.plotinfo,s=o.xaxis,l=o.yaxis,c=s._length,u=l._length,d=!!e.xr1,h=!!e.yr1,f=[];d?(n=y.simpleMap(e.xr0,s.r2l),r=y.simpleMap(e.xr1,s.r2l),i=n[1]-n[0],a=r[1]-r[0],f[0]=(n[0]*(1-t)+t*r[0]-n[0])/(n[1]-n[0])*c,f[2]=c*(1-t+t*a/i),s.range[0]=s.l2r(n[0]*(1-t)+t*r[0]),s.range[1]=s.l2r(n[1]*(1-t)+t*r[1])):(f[0]=0,f[2]=c),h?(m=y.simpleMap(e.yr0,l.r2l),g=y.simpleMap(e.yr1,l.r2l),p=m[1]-m[0],e=g[1]-g[0],f[1]=(m[1]*(1-t)+t*g[1]-m[1])/(m[0]-m[1])*u,f[3]=u*(1-t+t*e/p),l.range[0]=s.l2r(m[0]*(1-t)+t*g[0]),l.range[1]=l.l2r(m[1]*(1-t)+t*g[1])):(f[1]=0,f[3]=u),b.drawOne(_,s,{skipTitle:!0}),b.drawOne(_,l,{skipTitle:!0}),b.redrawComponents(_,[s._id,l._id]);var p=d?c/f[2]:1,m=h?u/f[3]:1,t=d?f[0]:0,g=h?f[1]:0,c=d?f[0]/f[2]*c:0,u=h?f[1]/f[3]*u:0,c=s._offset-c,u=l._offset-u;o.clipRect.call(v.setTranslate,t,g).call(v.setScale,1/p,1/m),o.plot.call(v.setTranslate,c,u).call(v.setScale,p,m),v.setPointGroupScale(o.zoomScalePts,1/p,1/m),v.setTextPointsScale(o.zoomScaleTxt,1/p,1/m)}(a[r],n);c=l-s>i.duration?(function(){for(var e={},t=0;t<a.length;t++){var n=a[t],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr1&&(e[r._name+".range"]=n.xr1.slice()),n.yr1&&(e[i._name+".range"]=n.yr1.slice())}o&&o(),f.call("relayout",_,e).then(function(){for(var e=0;e<a.length;e++)d(a[e].plotinfo)})}(),window.cancelAnimationFrame(e)):window.requestAnimationFrame(e)}),Promise.resolve()}function d(e){var t=e.xaxis,n=e.yaxis;r._defs.select("#"+e.clipId+"> rect").call(v.setTranslate,0,0).call(v.setScale,1,1),e.plot.call(v.setTranslate,t._offset,n._offset).call(v.setScale,1,1);n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(v.setPointGroupScale,1,1),n.selectAll(".textpoint").call(v.setTextPointsScale,1,1),n.call(v.hideOutsideRangePoints,e)}b.redrawComponents(_)}},{"../../components/drawing":122,"../../lib":230,"../../registry":313,"./axes":276,"@plotly/d3":11}],302:[function(e,t,n){"use strict";var f=e("../../registry").traceIs,p=e("./axis_autotype");function m(e){return{v:"x",h:"y"}[e.orientation||"v"]}function g(e,t){var n=m(e),r=f(e,"box-violin"),i=f(e._fullInput||{},"candlestick");return r&&!i&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,r){n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)&&(function(e,t){if("-"===e.type){var n,r=e._id,i=r.charAt(0);-1!==r.indexOf("scene")&&(r=i);var a=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if("splom"===i.type&&0<i._length&&(i["_"+n+"axes"]||{})[t])return i;if((i[n+"axis"]||n)===t){if(g(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(t,r,i);if(a)if("histogram"!==a.type||i!=={v:"y",h:"x"}[a.orientation||"v"]){var o,s=i+"calendar",l=a[s],c={noMultiCategory:!f(a,"cartesian")||f(a,"noMultiCategory")};if("box"===a.type&&a._hasPreCompStats&&i==={h:"x",v:"y"}[a.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=e.autotypenumbers,g(a,i)){var u=m(a),d=[];for(n=0;n<t.length;n++){var h=t[n];f(h,"box-violin")&&(h[i+"axis"]||i)===r&&(void 0!==h[u]?d.push(h[u][0]):void 0!==h.name?d.push(h.name):d.push("text"),h[s]!==l&&(l=void 0))}e.type=p(d,l,c)}else"splom"===a.type?(o=a.dimensions[a._axesDim[r]]).visible&&(e.type=p(o.values,l,c)):e.type=p(a[i]||[a[i+"0"]],l,c)}else e.type="linear"}}(t,r.data),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":313,"./axis_autotype":277}],303:[function(e,t,u){"use strict";var o=e("../registry"),h=e("../lib");function c(e,t,n){var r,i=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return r=h.nestedProperty(r,t.prop).get(),{changed:i=(n=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&n[t.prop]!==r?!0:i,value:n[t.prop]=r}}function a(e,t){var r=[],n=t[0],i={};if("string"==typeof n)i[n]=t[1];else{if(!h.isPlainObject(n))return r;i=n}return l(i,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0),r}function s(c,e){var u=[],t=e[0],n=e[1],d=e[2],e={};if("string"==typeof t)e[t]=n;else{if(!h.isPlainObject(t))return u;e=t,void 0===d&&(d=n)}return void 0===d&&(d=null),l(e,function(e,t,n){if(Array.isArray(n)){var r=n.slice(),i=Math.min(r.length,c.data.length);d&&(i=Math.min(i,d.length));for(var a=[],o=0;o<i;o++)a[o]=d?d[o]:o}else r=n,a=d?d.slice():null;if(null===a)Array.isArray(r)&&(r=r[0]);else if(Array.isArray(a)){if(!Array.isArray(r)){var s=r;r=[];for(var l=0;l<a.length;l++)r[l]=s}r.length=Math.min(a.length,r.length)}u.push({type:"data",prop:e,traces:a,value:r})},"",0),u}function l(r,i,a,o){Object.keys(r).forEach(function(e){var t,n=r[e];"_"!==e[0]&&(t=a+(0<o?".":"")+e,h.isPlainObject(n)?l(n,i,t,o+1):i(t,e,n))})}u.manageCommandObserver=function(t,e,n,r){var i={},a=!0;(i=e&&e._commandObserver?e._commandObserver:i).cache||(i.cache={}),i.lookupTable={};var o=u.hasSimpleAPICommandBindings(t,n,i.lookupTable);if(e&&e._commandObserver){if(o)return i;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,i}if(o){c(t,o,i.cache),i.check=function(){if(a){var e=c(t,o,i.cache);return e.changed&&r&&void 0!==i.lookupTable[e.value]&&(i.disable(),Promise.resolve(r({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:i.lookupTable[e.value]})).then(i.enable,i.enable)),e.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],i.check);i.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],i.check)}}else h.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){a=!1},i.enable=function(){a=!0},e&&(e._commandObserver=i),i},u.hasSimpleAPICommandBindings=function(e,t,n){for(var r,i=t.length,a=0;a<i;a++){var o=t[a],s=o.method,o=o.args;if(Array.isArray(o)||(o=[]),!s)return!1;o=u.computeAPICommandBindings(e,s,o);if(1!==o.length)return!1;if(r){if((c=o[0]).type!==r.type)return!1;if(c.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var l=0;l<r.traces.length;l++)if(r.traces[l]!==c.traces[l])return!1}else if(c.prop!==r.prop)return!1}else r=o[0],Array.isArray(r.traces)&&r.traces.sort();var c,o=(c=o[0]).value;if(Array.isArray(o)){if(1!==o.length)return!1;o=o[0]}n&&(n[o]=a)}return r},u.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=o.apiMethodRegistry[t],i=[e];Array.isArray(n)||(n=[]);for(var a=0;a<n.length;a++)i.push(n[a]);return r.apply(null,i).catch(function(e){return h.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},u.computeAPICommandBindings=function(e,t,n){var r,i;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=a(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(a(0,[n[1]]));break;case"animate":i=n,r=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":230,"../registry":313}],304:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},n=(e.name&&e.name,e.trace,(t=t||{}).description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:e.editType},n.column={valType:"integer",min:0,dflt:0,editType:e.editType}),n},n.defaults=function(e,t,n,r){var i=r&&r.x||[0,1],r=r&&r.y||[0,1],t=t.grid;t&&(void 0!==(a=n("domain.column"))&&(a<t.columns?i=t._domains.x[a]:delete e.domain.column),void 0!==(a=n("domain.row"))&&(a<t.rows?r=t._domains.y[a]:delete e.domain.row));var a=n("domain.x",i),n=n("domain.y",r);a[0]<a[1]||(e.domain.x=i.slice()),n[0]<n[1]||(e.domain.y=r.slice())}},{"../lib/extend":224}],305:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType,t={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n=void 0===n?t:n},editType:t};return e.arrayOk&&(t.family.arrayOk=!0,t.size.arrayOk=!0,t.color.arrayOk=!0),t}},{}],306:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],307:[function(e,t,n){"use strict";var u=e("../registry"),d=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){t=u.subplotsRegistry[t];if(!t)return[];for(var r=t.attr,i=[],a=0;a<e.length;a++){var o=e[a];o[0].trace[r]===n&&i.push(o)}return i},n.getModuleCalcData=function(e,t){var n=[],r=[],i="string"==typeof t?u.getModule(t).plot:"function"==typeof t?t:t.plot;if(!i)return[n,e];for(var a=0;a<e.length;a++){var o=e[a],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===i?n:r).push(o)}return[n,r]},n.getSubplotData=function(e,t,n){if(!u.subplotsRegistry[t])return[];var r,i,a,o,s=u.subplotsRegistry[t].attr,l=[];"gl2d"===t&&(a="x"+(i=n.match(d))[1],o="y"+i[2]);for(var c=0;c<e.length;c++)r=e[c],"gl2d"===t&&u.traceIs(r,"gl2d")?r[s[0]]===a&&r[s[1]]===o&&l.push(r):r[s]===n&&l.push(r);return l}},{"../registry":313,"./cartesian/constants":283}],308:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[0,0,0,0],i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=e[4*i+n]*t[i];return r}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],309:[function(e,t,n){"use strict";var r=e("./font_attributes"),i=e("./animation_attributes"),a=e("../components/color/attributes"),o=e("../components/shapes/draw_newshape/attributes"),s=e("./pad_attributes"),l=e("../lib/extend").extendFlat,e=r({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=a.defaultLine,t.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":99,"../components/shapes/draw_newshape/attributes":185,"../lib/extend":224,"./animation_attributes":270,"./font_attributes":305,"./pad_attributes":310}],310:[function(e,t,n){"use strict";t.exports=function(e){e=e.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],311:[function(e,t,n){"use strict";var k=e("@plotly/d3"),M=e("d3-time-format").timeFormatLocale,E=e("fast-isnumeric"),L=e("../registry"),_=e("../plot_api/plot_schema"),T=e("../plot_api/plot_template"),D=e("../lib"),m=e("../components/color"),y=e("../constants/numerical").BADNUM,O=e("./cartesian/axis_ids"),S=e("./cartesian/handle_outline").clearSelect,i=e("./animation_attributes"),a=e("./frame_attributes"),o=e("../plots/get_data").getModuleCalcData,C=D.relinkPrivateKeys,P=D._,R=t.exports={};D.extendFlat(R,L),R.attributes=e("./attributes"),R.attributes.type.values=R.allTypes,R.fontAttrs=e("./font_attributes"),R.layoutAttributes=e("./layout_attributes"),R.fontWeight="normal";var A=R.transformsRegistry,e=e("./command");R.executeAPICommand=e.executeAPICommand,R.computeAPICommandBindings=e.computeAPICommandBindings,R.manageCommandObserver=e.manageCommandObserver,R.hasSimpleAPICommandBindings=e.hasSimpleAPICommandBindings,R.redrawText=function(t){return t=D.getGraphDiv(t),new Promise(function(e){setTimeout(function(){t._fullLayout&&(L.getComponentMethod("annotations","draw")(t),L.getComponentMethod("legend","draw")(t),L.getComponentMethod("colorbar","draw")(t),e(R.previousPromises(t)))},300)})},R.resize=function(n){var r;n=D.getGraphDiv(n);var e=new Promise(function(t,e){n&&!D.isHidden(n)||e(new Error("Resize must be passed a displayed plot div element.")),n._redrawTimer&&clearTimeout(n._redrawTimer),n._resolveResize&&(r=n._resolveResize),n._resolveResize=t,n._redrawTimer=setTimeout(function(){var e;!n.layout||n.layout.width&&n.layout.height||D.isHidden(n)?t(n):(delete n.layout.width,delete n.layout.height,e=n.changed,n.autoplay=!0,L.call("relayout",n,{autosize:!0}).then(function(){n.changed=e,n._resolveResize===t&&(delete n._resolveResize,t(n))}))},100)});return r&&r(e),e},R.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},R.addLinks=function(e){var t,n,r,i;(e._context.showLink||e._context.showSources)&&(n=e._fullLayout,t=(i=D.ensureSingle(n._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:m.defaultLine,"pointer-events":"all"}).each(function(){var e=k.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})})).node(),r={y:n._paper.attr("height")-9},document.body.contains(t)&&t.getComputedTextLength()>=n.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=n._paper.attr("width")-7),i.attr(r),n=i.select(".js-link-to-tool"),r=i.select(".js-link-spacer"),i=i.select(".js-sourcelinks"),e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));{var r;e._context.sendData?n.on("click",function(){R.sendDataToCloud(e)}):(r=window.location.pathname.split("/"),t=window.location.search,n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+t}))}}(e,n),r.text(n.text()&&i.text()?" - ":""))},R.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=k.select(e).append("div").attr("id","hiddenform").style("display","none"),t=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return t.append("input").attr({type:"text",name:"data"}).node().value=R.graphJson(e,!1,"keepdata"),t.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var I=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],N=["year","month","dayMonth","dayMonthYear"];function z(e,i){var t=(t=e._context.locale)||"en-US",a=!1,o={};function n(e){for(var t=!0,n=0;n<i.length;n++){var r=i[n];o[r]||(e[r]?o[r]=e[r]:t=!1)}t&&(a=!0)}for(var r=0;r<2;r++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[t]||{}).format;if(c&&(n(c),a))break;s=L.localeRegistry}var u=t.split("-")[0];if(a||u===t)break;t=u}return a||n(L.localeRegistry.en.format),o}function g(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],r=r._module||A[r.type];if(r&&r.makesData)return!0}return!1}function c(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function F(e){var t=e.margin;e._size||((t=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)}).w=Math.round(e.width)-t.l-t.r,t.h=Math.round(e.height)-t.t-t.b),e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}R.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var i=e._fullLayout={},a=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],c=e.calcdata||[],u=e._context||{};e._transitionData||R.createTransitionData(e),i._dfltTitle={plot:P(e,"Click to enter Plot title"),x:P(e,"Click to enter X axis title"),y:P(e,"Click to enter Y axis title"),colorbar:P(e,"Click to enter Colorscale title"),annotation:P(e,"new text")},i._traceWord=P(e,"trace");var d,h=z(e,I);i._mapboxAccessToken=u.mapboxAccessToken,r._initialAutoSizeIsDone?(t=r.width,d=r.height,R.supplyLayoutGlobalDefaults(a,i,h),a.width||(i.width=t),a.height||(i.height=d),R.sanitizeMargins(i)):(R.supplyLayoutGlobalDefaults(a,i,h),p=!a.width||!a.height,d=i.autosize,u=u.autosizable,p&&(d||u)?R.plotAutoSize(e,a,i):p&&R.sanitizeMargins(i),!d&&p&&(a.width=i.width,a.height=i.height)),i._d3locale=(p=h,h=i.separators,p.decimal=h.charAt(0),p.thousands=h.charAt(1),{numberFormat:k.locale(p).numberFormat,timeFormat:M(p).utcFormat}),i._extraFormat=z(e,N),i._initialAutoSizeIsDone=!0,i._dataLength=l.length,i._modules=[],i._visibleModules=[],i._basePlotModules=[];var f=i._subplots=function(){var e,t,n=L.collectableSubplotTypes,r={};if(!n){n=[];var i,a=L.subplotsRegistry;for(i in a){var o=a[i].attr;if(o&&(n.push(i),Array.isArray(o)))for(t=0;t<o.length;t++)D.pushUnique(n,o[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}(),h=i._splomAxes={x:{},y:{}},p=i._splomSubplots={};i._splomGridDflt={},i._scatterStackOpts={},i._firstScatter={},i._alignmentOpts={},i._colorAxes={},i._requestRangeslider={},i._traceUids=function(e,t){var n,r,i=t.length,a=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==r&&a.push(o),r=o}var s=a.length,l=new Array(i),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){return e&&"string"==typeof e&&!c[e]&&(u(e,t),1)}for(n=0;n<i;n++){var h=t[n].uid;d(h="number"==typeof h?String(h):h,n)||n<s&&d(a[n].uid,n)||u(D.randstr(c),n)}return l}(o,l),i._globalTransforms=(e._context||{}).globalTransforms,R.supplyDataDefaults(l,s,a,i);var m=Object.keys(h.x),g=Object.keys(h.y);if(1<m.length&&1<g.length){for(L.getComponentMethod("grid","sizeDefaults")(a,i),b=0;b<m.length;b++)D.pushUnique(f.xaxis,m[b]);for(b=0;b<g.length;b++)D.pushUnique(f.yaxis,g[b]);for(var _ in p)D.pushUnique(f.cartesian,_)}if(i._has=R._hasPlotType.bind(i),o.length===s.length)for(b=0;b<s.length;b++)C(s[b],o[b]);R.supplyLayoutModuleDefaults(a,i,s,e._transitionData);for(var y=i._visibleModules,v=[],b=0;b<y.length;b++){var x=y[b].crossTraceDefaults;x&&D.pushUnique(v,x)}for(b=0;b<v.length;b++)v[b](s,i);i._hasOnlyLargeSploms=1===i._basePlotModules.length&&"splom"===i._basePlotModules[0].name&&15<m.length&&15<g.length&&0===i.shapes.length&&0===i.images.length,R.linkSubplots(s,i,o,r),R.cleanPlot(s,i,o,r);p=!(!r._has||!r._has("gl2d")),a=!(!i._has||!i._has("gl2d")),p=!(!r._has||!r._has("cartesian"))||p,a=!(!i._has||!i._has("cartesian"))||a;p&&!a?r._bgLayer.remove():a&&!p&&(i._shouldCreateBgLayer=!0),r._zoomlayer&&!e._dragging&&S({_fullLayout:r}),function(e,t){var n,r=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var i=0;i<e.length;i++){var a=e[i];a.meta?r[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}r.length&&((n=n||(t._meta={})).data=r)}(s,i),C(i,r),L.getComponentMethod("colorscale","crossTraceDefaults")(s,i),i._preGUI||(i._preGUI={}),i._tracePreGUI||(i._tracePreGUI={});var w,T=i._tracePreGUI,A={};for(w in T)A[w]="old";for(b=0;b<s.length;b++)A[w=s[b]._fullInput.uid]||(T[w]={}),A[w]="new";for(w in A)"old"===A[w]&&delete T[w];F(i),L.getComponentMethod("rangeslider","makeData")(i),n||c.length!==s.length||R.supplyDefaultsUpdateCalc(c,s)}},R.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=(e[n]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform)for(var o,s,l=a._arrayAttrs,c=0;c<l.length;c++)o=l[c],s=D.nestedProperty(a,o).get().slice(),D.nestedProperty(r,o).set(s);i.trace=r}}},R.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},R._hasPlotType=function(e){for(var t=this._basePlotModules||[],n=0;n<t.length;n++)if(t[n].name===e)return!0;var r=this._modules||[];for(n=0;n<r.length;n++){var i=r[n].name;if(i===e)return!0;i=L.modules[i];if(i&&i.categories[e])return!0}return!1},R.cleanPlot=function(e,t,n,r){for(var i=r._basePlotModules||[],a=0;a<i.length;a++){var o=i[a];o.clean&&o.clean(e,t,n,r)}var s=r._has&&r._has("gl"),l=t._has&&t._has("gl");s&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var c=!!r._infolayer;e:for(a=0;a<n.length;a++){for(var u=n[a].uid,d=0;d<e.length;d++)if(u===e[d].uid)continue e;c&&r._infolayer.select(".cb"+u).remove()}},R.linkSubplots=function(e,t,n,r){for(var i=r._plots||{},a=t._plots={},r=t._subplots,o={_fullData:e,_fullLayout:t},s=r.cartesian.concat(r.gl2d||[]),l=0;l<s.length;l++){var c,u=s[l],d=i[u],h=O.getFromId(o,u,"x"),f=O.getFromId(o,u,"y");for(d?c=a[u]=d:(c=a[u]={}).id=u,h._counterAxes.push(f._id),f._counterAxes.push(h._id),h._subplotsWith.push(u),f._subplotsWith.push(u),c.xaxis=h,c.yaxis=f,c._hasClipOnAxisFalse=!1,b=0;b<e.length;b++){var p=e[b];if(p.xaxis===c.xaxis._id&&p.yaxis===c.yaxis._id&&!1===p.cliponaxis){c._hasClipOnAxisFalse=!0;break}}}var m=O.list(o,null,!0);for(l=0;l<m.length;l++){var g,_=null;(g=m[l]).overlaying&&(_=O.getFromId(o,g.overlaying))&&_.overlaying&&(g.overlaying=!1,_=null),g._mainAxis=_||g,_&&(g.domain=_.domain.slice()),g._anchorAxis="free"===g.anchor?null:O.getFromId(o,g.anchor)}for(l=0;l<m.length;l++)if((g=m[l])._counterAxes.sort(O.idSort),g._subplotsWith.sort(D.subplotSort),g._mainSubplot=function(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),i=e._mainAxis._anchorAxis,a="",o="",s="";i&&(s=i._mainAxis._id,a=r?e._id+s:s+e._id);if(!a||!t._plots[a]){a="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=r?e._id+u:u+e._id;o=o||d;u=O.getFromId(n,u);if(s&&u.overlaying===s){a=d;break}}}return a||o}(g,t),g._counterAxes.length&&(g.spikemode&&-1!==g.spikemode.indexOf("across")||g.automargin&&g.mirror&&"free"!==g.anchor||L.getComponentMethod("rangeslider","isVisible")(g))){for(var y=1,v=0,b=0;b<g._counterAxes.length;b++)var x=O.getFromId(o,g._counterAxes[b]),y=Math.min(y,x.domain[0]),v=Math.max(v,x.domain[1]);y<v&&(g._counterDomainMin=y,g._counterDomainMax=v)}},R.clearExpandedTraceDefaultColors=function(e){var i,a,t;for(a=[],(i=e._module._colorAttrs)||(e._module._colorAttrs=i=[],_.crawl(e._module.attributes,function(e,t,n,r){a[r]=t,a.length=r+1,"color"===e.valType&&void 0===e.dflt&&i.push(a.join("."))})),t=0;t<i.length;t++)D.nestedProperty(e,"_input."+i[t]).get()||D.nestedProperty(e,i[t]).set(null)},R.supplyDataDefaults=function(e,n,t,r){var i,a=r._modules,o=r._visibleModules,s=r._basePlotModules,l=0,c=0;function u(e){n.push(e);var t=e._module;t&&(D.pushUnique(a,t),!0===e.visible&&D.pushUnique(o,t),D.pushUnique(s,e._module.basePlotModule),l++,!1!==e._input.visible&&c++)}r._transformModules=[];for(var d,h,f={},p=[],m=(t.template||{}).data||{},g=T.traceTemplater(m),_=0;_<e.length;_++){if(i=e[_],(h=g.newTrace(i)).uid=r._traceUids[_],R.supplyTraceDefaults(i,h,c,r,_),h.index=_,h._input=i,h._expandedIndex=l,h.transforms&&h.transforms.length)for(var y=!1!==i.visible&&!1===h.visible,v=function(e,t,n,r){for(var i=e.transforms,a=[e],o=0;o<i.length;o++){var s=i[o],l=A[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return a}(h,n,t,r),b=0;b<v.length;b++){var x=v[b],w={_template:h._template,type:h.type,uid:h.uid+b};y&&!1===x.visible&&delete x.visible,R.supplyTraceDefaults(x,w,l,r,_),C(w,x),w.index=_,w._input=i,w._fullInput=h,w._expandedIndex=l,w._expandedInput=x,u(w)}else u((h._fullInput=h)._expandedInput=h);L.traceIs(h,"carpetAxis")&&(f[h.carpet]=h),L.traceIs(h,"carpetDependent")&&p.push(_)}for(_=0;_<p.length;_++)(h=n[p[_]]).visible&&(d=f[h.carpet],(h._carpet=d)&&d.visible?(h.xaxis=d.xaxis,h.yaxis=d.yaxis):h.visible=!1)},R.supplyAnimationDefaults=function(n){var e;n=n||{};var r={};function t(e,t){return D.coerce(n||{},r,i,e,t)}if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],e=0;e<n.frame.length;e++)r.frame[e]=R.supplyAnimationFrameDefaults(n.frame[e]||{});else r.frame=R.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],e=0;e<n.transition.length;e++)r.transition[e]=R.supplyAnimationTransitionDefaults(n.transition[e]||{});else r.transition=R.supplyAnimationTransitionDefaults(n.transition||{});return r},R.supplyAnimationFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,i.frame,e,t)}return e("duration"),e("redraw"),r},R.supplyAnimationTransitionDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,i.transition,e,t)}return e("duration"),e("easing"),r},R.supplyFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n,r,a,e,t)}return e("group"),e("name"),e("traces"),e("baseframe"),e("data"),e("layout"),r},R.supplyTraceDefaults=function(n,r,e,t,i){var a,o=t.colorway||m.defaults,s=o[e%o.length];function l(e,t){return D.coerce(n,r,R.attributes,e,t)}e=l("visible");l("type"),l("name",t._traceWord+" "+i),l("uirevision",t.uirevision);o=R.getModule(r);if(r._module=o){var i=o.basePlotModule,c=i.attr,u=i.attributes;if(c&&u){var d=t._subplots,h="";if(e||"gl2d"!==i.name){if(Array.isArray(c))for(a=0;a<c.length;a++){var f=c[a],p=D.coerce(n,r,u,f);d[f]&&D.pushUnique(d[f],p),h+=p}else h=D.coerce(n,r,u,c);d[i.name]&&D.pushUnique(d[i.name],h)}}}return e&&(l("customdata"),l("ids"),l("meta"),L.traceIs(r,"showLegend")?(D.coerce(n,r,(o.attributes.showlegend?o:R).attributes,"showlegend"),l("legendgroup"),l("legendgrouptitle.text")&&D.coerceFont(l,"legendgrouptitle.font",D.extendFlat({},t.font,{size:Math.round(1.1*t.font.size)})),l("legendrank"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,o&&o.supplyDefaults(n,r,s,t),L.traceIs(r,"noOpacity")||l("opacity"),L.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),L.traceIs(r,"noHover")||(r.hovertemplate||D.coerceHoverinfo(n,r,t),"parcats"!==r.type&&L.getComponentMethod("fx","supplyDefaults")(n,r,s,t)),o&&o.selectPoints&&l("selectedpoints"),R.supplyTransformDefaults(n,r,t)),r},R.hasMakesDataTransform=g,R.supplyTransformDefaults=function(e,t,n){if(t._length||g(e)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var a=e.transforms||[],o=r.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,h=A[d],f=!(u._module&&u._module===h),p=h&&"function"==typeof h.transform;h||D.warn("Unrecognized transform type "+d+"."),h&&h.supplyDefaults&&(f||p)?((c=h.supplyDefaults(u,t,n,e)).type=d,c._module=h,D.pushUnique(i,h)):c=D.extendFlat({},u),s.push(c)}}},R.supplyLayoutGlobalDefaults=function(n,r,e){function t(e,t){return D.coerce(n,r,R.layoutAttributes,e,t)}var i=n.template;D.isPlainObject(i)&&(r.template=i,r._template=i.layout,r._dataTemplate=i.data),t("autotypenumbers");i=D.coerceFont(t,"font");t("title.text",r._dfltTitle.plot),D.coerceFont(t,"title.font",{family:i.family,size:Math.round(1.4*i.size),color:i.color}),t("title.xref"),t("title.yref"),t("title.x"),t("title.y"),t("title.xanchor"),t("title.yanchor"),t("title.pad.t"),t("title.pad.r"),t("title.pad.b"),t("title.pad.l"),t("uniformtext.mode")&&t("uniformtext.minsize"),t("autosize",!(n.width&&n.height)),t("width"),t("height"),t("margin.l"),t("margin.r"),t("margin.t"),t("margin.b"),t("margin.pad"),t("margin.autoexpand"),n.width&&n.height&&R.sanitizeMargins(r),L.getComponentMethod("grid","sizeDefaults")(n,r),t("paper_bgcolor"),t("separators",e.decimal+e.thousands),t("hidesources"),t("colorway"),t("datarevision");e=t("uirevision");t("editrevision",e),t("selectionrevision",e),L.getComponentMethod("modebar","supplyLayoutDefaults")(n,r),L.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(n,r,t),t("meta"),D.isPlainObject(n.transition)&&(t("transition.duration"),t("transition.easing"),t("transition.ordering")),L.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),L.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,t)},R.plotAutoSize=function(e,t,n){var r,i,a=e._context||{},o=a.frameMargins,s=D.isPlotDiv(e);s&&e.emit("plotly_autosize"),a.fillFrame?(r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden"):(r=c((s=s?window.getComputedStyle(e):{}).width)||c(s.maxWidth)||n.width,i=c(s.height)||c(s.maxHeight)||n.height,E(o)&&0<o&&(l=1-2*o,r=Math.round(l*r),i=Math.round(l*i)));var o=R.layoutAttributes.width.min,l=R.layoutAttributes.height.min;r<o&&(r=o),i<l&&(i=l);l=!t.width&&1<Math.abs(n.width-r),t=!t.height&&1<Math.abs(n.height-i);(t||l)&&(l&&(n.width=r),t&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),R.sanitizeMargins(n)},R.supplyLayoutModuleDefaults=function(e,t,n,r){var i,a,o,s=L.componentsRegistry,l=t._basePlotModules,c=L.subplotsRegistry.cartesian;for(i in s)(a=s[i]).includeBasePlot&&a.includeBasePlot(e,t);for(o in l.length||l.push(c),t._has("cartesian")&&(L.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[o].sort(D.subplotSort);for(d=0;d<l.length;d++)(a=l[d]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n);for(var u=t._modules,d=0;d<u.length;d++)(a=u[d]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n);var h=t._transformModules;for(d=0;d<h.length;d++)(a=h[d]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n,r);for(i in s)(a=s[i]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n)},R.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),D.clearThrottle(),D.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},R.style=function(e){for(var t=e._fullLayout._visibleModules,n=[],r=0;r<t.length;r++){var i=t[r];i.style&&D.pushUnique(n,i.style)}for(r=0;r<n.length;r++)n[r](e)},R.sanitizeMargins=function(e){var t,n,r,i,a;e&&e.margin&&(t=e.width,n=e.height,i=t-((r=e.margin).l+r.r),e=n-(r.t+r.b),i<0&&(a=(t-1)/(r.l+r.r),r.l=Math.floor(a*r.l),r.r=Math.floor(a*r.r)),e<0&&(a=(n-1)/(r.t+r.b),r.t=Math.floor(a*r.t),r.b=Math.floor(a*r.b)))},R.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},R.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};R.autoMargin=function(e,t,n){var r,i,a=e._fullLayout,o=a.width,s=a.height,l=a.margin,c=D.constrain(o-l.l-l.r,2,64),u=D.constrain(s-l.t-l.b,2,64),d=Math.max(0,o-c),o=Math.max(0,s-u),c=a._pushmargin,s=a._pushmarginIds;if(!1!==l.autoexpand&&(n?(void 0===(u=n.pad)&&(u=Math.min(12,l.l,l.r,l.t,l.b)),!d||1<(r=(n.l+n.r)/d)&&(n.l/=r,n.r/=r),!o||1<(i=(n.t+n.b)/o)&&(n.t/=i,n.b/=i),d=void 0!==n.xl?n.xl:n.x,r=void 0!==n.xr?n.xr:n.x,o=void 0!==n.yt?n.yt:n.y,i=void 0!==n.yb?n.yb:n.y,c[t]={l:{val:d,size:n.l+u},r:{val:r,size:n.r+u},b:{val:i,size:n.b+u},t:{val:o,size:n.t+u}},s[t]=1):(delete c[t],delete s[t]),!a._replotting))return R.doAutoMargin(e)},R.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height;t._size||(t._size={}),F(t);var i=t._size,a=t.margin,o=D.extendFlat({},i),s=a.l,l=a.r,c=a.t,u=a.b,d=t._pushmargin,h=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var f in d)h[f]||delete d[f];for(var p in d.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}},d){var m,g,_,y,v,b=d[p].l||{},p=d[p].b||{},x=b.val,w=b.size,T=p.val,A=p.size;for(m in d)E(w)&&d[m].r&&(v=d[m].r.val,g=d[m].r.size,x<v&&(s+l<(_=(w*v+(g-n)*x)/(v-x))+(y=(g*(1-x)+(w-n)*(1-v))/(v-x))&&(s=_,l=y))),E(A)&&d[m].t&&(v=d[m].t.val,_=d[m].t.size,T<v&&(u+c<(y=(A*v+(_-r)*T)/(v-T))+(v=(_*(1-T)+(A-r)*(1-v))/(v-T))&&(u=y,c=v)))}}var k,M=D.constrain(n-a.l-a.r,2,64),S=D.constrain(r-a.t-a.b,2,64),M=Math.max(0,n-M),S=Math.max(0,r-S);if(!M||1<(M=(s+l)/M)&&(s/=M,l/=M),!S||1<(S=(u+c)/S)&&(u/=S,c/=S),i.l=Math.round(s),i.r=Math.round(l),i.t=Math.round(c),i.b=Math.round(u),i.p=Math.round(a.pad),i.w=Math.round(n)-i.l-i.r,i.h=Math.round(r)-i.t-i.b,!t._replotting&&R.didMarginChange(o,i)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;i=3*(1+Object.keys(h).length);if(t._redrawFromAutoMarginCount<i)return L.call("_doPlot",e);t._size=o,D.warn("Too many auto-margin redraws.")}k=O.list(e,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<k.length;t++){var n=k[t][e];n&&n()}})};var s=["l","r","t","b","p","w","h"];function r(i,a,o){var s=!1;var e=[R.previousPromises,function(){if(i._transitionData)return i._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(i._transitionData._interruptCallbacks)},o.prepareFn,R.rehover,function(){return i.emit("plotly_transitioning",[]),new Promise(function(e){i._transitioning=!0,0<a.duration&&(i._transitioningWithDuration=!0),i._transitionData._interruptCallbacks.push(function(){s=!0}),o.redraw&&i._transitionData._interruptCallbacks.push(function(){return L.call("redraw",i)}),i._transitionData._interruptCallbacks.push(function(){i.emit("plotly_transitioninterrupted",[])});var t=0,n=0;function r(){return t++,function(){n++,s||n!==t||function(e){if(i._transitionData)(function(e){if(e)for(;e.length;)e.shift()})(i._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(o.redraw)return L.call("redraw",i)}).then(function(){i._transitioning=!1,i._transitioningWithDuration=!1,i.emit("plotly_transitioned",[])}).then(e)}(e)}}o.runFn(r),setTimeout(r())})}],e=D.syncOrAsync(e,i);return(e=!e||!e.then?Promise.resolve():e).then(function(){return i})}R.didMarginChange=function(e,t){for(var n=0;n<s.length;n++){var r=s[n],i=e[r],r=t[r];if(!E(i)||1<Math.abs(r-i))return!0}return!1},R.graphJson=function(e,t,a,n,r,i){(r&&t&&!e._fullData||r&&!t&&!e._fullLayout)&&R.supplyDefaults(e);var o=r?e._fullData:e.data,s=r?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(t,n){if("function"==typeof t)return n?"_function_":null;if(D.isPlainObject(t)){var r,i={};return Object.keys(t).sort().forEach(function(e){if(-1===["_","["].indexOf(e.charAt(0)))if("function"!=typeof t[e]){if("keepdata"===a){if("src"===e.substr(e.length-3))return}else if("keepstream"===a){if("string"==typeof(r=t[e+"src"])&&0<r.indexOf(":")&&!D.isPlainObject(t.stream))return}else if("keepall"!==a&&"string"==typeof(r=t[e+"src"])&&0<r.indexOf(":"))return;i[e]=c(t[e],n)}else n&&(i[e]="_function")}),i}return Array.isArray(t)?t.map(function(e){return c(e,n)}):D.isTypedArray(t)?D.simpleMap(t,D.identity):D.isJSDate(t)?D.ms2DateTimeLocal(+t):t}o={data:(o||[]).map(function(e){e=c(e);return t&&delete e.fit,e})};return t||(o.layout=c(s),r&&(s=s._size,o.layout.computed={margin:{b:s.b,l:s.l,r:s.r,t:s.t}})),l&&(o.frames=c(l)),i&&(o.config=c(e._context,!0)),"object"===n?o:JSON.stringify(o)},R.modifyFrames=function(e,t){for(var n,r=e._transitionData._frames,i=e._transitionData._frameHash,a=0;a<t.length;a++)switch((n=t[a]).type){case"replace":var o=n.value,s=(r[n.index]||{}).name,l=o.name;r[n.index]=i[l]=o,l!==s&&(delete i[s],i[l]=o);break;case"insert":i[(o=n.value).name]=o,r.splice(n.index,0,o);break;case"delete":delete i[(o=r[n.index]).name],r.splice(n.index,1)}return Promise.resolve()},R.computeFrame=function(e,t){var n,r,i,a,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=R.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(a=u.traces.indexOf(i))&&(a=u.data.length,u.traces[a]=i),u.data[a]=R.extendTrace(u.data[a],s.data[n]))}return u},R.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},R.extendObjectWithContainers=function(e,t,n){var r,i,a,o,s,l,c,t=D.extendDeepNoArrays({},t||{}),u=D.expandObjectPaths(t),d={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(i=(r=D.nestedProperty(u,n[a])).get())?D.nestedProperty(d,n[a]).set(null):(r.set(null),D.nestedProperty(d,n[a]).set(i));if(e=D.extendDeepNoArrays(e||{},u),n&&n.length)for(a=0;a<n.length;a++)if(l=D.nestedProperty(d,n[a]).get()){for(c=(s=D.nestedProperty(e,n[a])).get(),Array.isArray(c)||s.set(c=[]),o=0;o<l.length;o++){var h=l[o];c[o]=null===h?null:R.extendObjectWithContainers(c[o],h)}s.set(c)}return e},R.dataArrayContainers=["transforms","dimensions"],R.layoutArrayContainers=L.layoutArrayContainers,R.extendTrace=function(e,t){return R.extendObjectWithContainers(e,t,R.dataArrayContainers)},R.extendLayout=function(e,t){return R.extendObjectWithContainers(e,t,R.layoutArrayContainers)},R.transition=function(b,x,w,T,e,s){var e={redraw:e.redraw},A={},k=[];return e.prepareFn=function(){for(var e=Array.isArray(x)?x.length:0,t=T.slice(0,e),n=0;n<t.length;n++){var r=t[n],i=b._fullData[r]._module;i&&(i.animatable&&(i=i.basePlotModule.name,A[i]||(A[i]=[]),A[i].push(r)),b.data[t[n]]=R.extendTrace(b.data[t[n]],x[n]))}var a,o=D.expandObjectPaths(D.extendDeepNoArrays({},w)),s=/^[xy]axis[0-9]*$/;for(a in o)s.test(a)&&delete o[a].range;R.extendLayout(b.layout,o),delete b.calcdata,R.supplyDefaults(b),R.doCalcdata(b);var l=D.expandObjectPaths(w);if(l){var c,u=b._fullLayout._plots;for(c in u){var d=u[c],h=d.xaxis,f=d.yaxis,p=h.range.slice(),m=f.range.slice(),g=null,_=null,y=null,v=null;Array.isArray(l[h._name+".range"])?g=l[h._name+".range"].slice():Array.isArray((l[h._name]||{}).range)&&(g=l[h._name].range.slice()),Array.isArray(l[f._name+".range"])?_=l[f._name+".range"].slice():Array.isArray((l[f._name]||{}).range)&&(_=l[f._name].range.slice()),p&&g&&(h.r2l(p[0])!==h.r2l(g[0])||h.r2l(p[1])!==h.r2l(g[1]))&&(y={xr0:p,xr1:g}),m&&_&&(f.r2l(m[0])!==f.r2l(_[0])||f.r2l(m[1])!==f.r2l(_[1]))&&(v={yr0:m,yr1:_}),(y||v)&&k.push(D.extendFlat({plotinfo:d},y,v))}}return Promise.resolve()},e.runFn=function(e){var t,n,r,i=b._fullLayout._basePlotModules,a=k.length;if(w)for(n=0;n<i.length;n++)i[n].transitionAxes&&i[n].transitionAxes(b,k,s,e);for(r in a?((t=D.extendFlat({},s)).duration=0,delete A.cartesian):t=s,A){var o=A[r];b._fullData[o[0]]._module.basePlotModule.plot(b,o,t,e)}},r(b,s,e)},R.transitionFromReact=function(u,d,h,f){var p=u._fullLayout,m=p.transition,g={},_=[];return g.prepareFn=function(){var e,t=p._plots;for(e in g.redraw=!1,"some"===d.anim&&(g.redraw=!0),"some"===h.anim&&(g.redraw=!0),t){var n=t[e],r=n.xaxis,i=n.yaxis,a=f[r._name].range.slice(),o=f[i._name].range.slice(),s=r.range.slice(),l=i.range.slice();r.setScale(),i.setScale();var c=null,u=null;r.r2l(a[0])===r.r2l(s[0])&&r.r2l(a[1])===r.r2l(s[1])||(c={xr0:a,xr1:s}),i.r2l(o[0])===i.r2l(l[0])&&i.r2l(o[1])===i.r2l(l[1])||(u={yr0:o,yr1:l}),(c||u)&&_.push(D.extendFlat({plotinfo:n},c,u))}return Promise.resolve()},g.runFn=function(t){for(var n,r,i,e=u._fullData,a=u._fullLayout._basePlotModules,o=[],s=0;s<e.length;s++)o.push(s);function l(){if(u._fullLayout)for(var e=0;e<a.length;e++)a[e].transitionAxes&&a[e].transitionAxes(u,_,n,t)}function c(){if(u._fullLayout)for(var e=0;e<a.length;e++)a[e].plot(u,i,r,t)}_.length&&d.anim?"traces first"===m.ordering?(n=D.extendFlat({},m,{duration:0}),i=o,r=m,setTimeout(l,m.duration),c()):(n=m,i=null,r=D.extendFlat({},m,{duration:0}),setTimeout(c,n.duration),l()):_.length?(n=m,l()):d.anim&&(i=o,r=m,c())},r(u,m,g)},R.doCalcdata=function(r,e){var i,a,o,t=O.list(r),s=r._fullData,n=r._fullLayout,l=new Array(s.length),c=(r.calcdata||[]).slice();for(r.calcdata=l,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},h=0;h<s.length;h++)Array.isArray(e)&&-1===e.indexOf(h)&&(l[h]=c[h]);for(h=0;h<s.length;h++)(i=s[h])._arrayAttrs=_.findArrayAttributes(i),i._extremes={};for(var u,d=n._subplots.polar||[],h=0;h<d.length;h++)t.push(n[d[h]].radialaxis,n[d[h]].angularaxis);for(u in n._colorAxes){var f=n[u];!1!==f.cauto&&(delete f.cmin,delete f.cmax)}var p=!1;function m(e,t){if(i=s[e],!!(a=i._module).isContainer===t){t=[];if(!0===i.visible&&0!==i._length){delete i._indexToPoints;var n=i.transforms||[];for(o=n.length-1;0<=o;o--)if(n[o].enabled){i._indexToPoints=n[o]._indexToPoints;break}a&&a.calc&&(t=a.calc(r,i))}(t=!Array.isArray(t)||!t[0]?[{x:y,y:y}]:t)[0].t||(t[0].t={}),t[0].trace=i,l[e]=t}}for(v(t,s,n),h=0;h<s.length;h++)m(h,!0);for(h=0;h<s.length;h++)!function(e){if(i=s[e],a=i._module,!0===i.visible&&i.transforms)for(a&&a.calc&&((e=a.calc(r,i))[0]&&e[0].t&&e[0].t._scene&&delete e[0].t._scene.dirty),o=0;o<i.transforms.length;o++){var t=i.transforms[o];(a=A[t.type])&&a.calcTransform&&(i._hasCalcTransform=!0,p=!0,a.calcTransform(r,i,t))}}(h);for(p&&v(t,s,n),h=0;h<s.length;h++)m(h,!0);for(h=0;h<s.length;h++)m(h,!1);b(r);var g=function(e,o){var t,n,r,i,a,s=[];var l,c,u={min:function(e){return D.aggNums(Math.min,null,e)},max:function(e){return D.aggNums(Math.max,null,e)},sum:function(e){return D.aggNums(function(e,t){return e+t},null,e)},total:function(e){return D.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return D.mean(e)},median:function(e){return D.median(e)}};for(t=0;t<e.length;t++){var d=e[t];if("category"===d.type){var h=d.categoryorder.match(j);if(h){var f=h[1],h=h[2],p=d._id.charAt(0),m="x"===p,g=[];for(n=0;n<d._categories.length;n++)g.push([d._categories[n],[]]);for(n=0;n<d._traceIndices.length;n++){var _=d._traceIndices[n],y=o._fullData[_];if(!0===y.visible){var v=y.type;L.traceIs(y,"histogram")&&(delete y._xautoBinFinished,delete y._yautoBinFinished);var b="splom"===v,x="scattergl"===v,w=o.calcdata[_];for(r=0;r<w.length;r++){var T=w[r];if(b){var A,k=y._axesDim[d._id];m||(A=y._diag[k][0])&&(d=o._fullLayout[O.id2name(A)]);var M,S=T.trace.dimensions[k].values;for(i=0;i<S.length;i++)for(l=d._categoriesMap[S[i]],a=0;a<T.trace.dimensions.length;a++)a!==k&&(M=T.trace.dimensions[a],g[l][1].push(M.values[i]))}else if(x){for(i=0;i<T.t.x.length;i++)c=m?(l=T.t.x[i],T.t.y[i]):(l=T.t.y[i],T.t.x[i]),g[l][1].push(c);T.t&&T.t._scene&&delete T.t._scene.dirty}else if(T.hasOwnProperty("z")){c=T.z;var E=function(e,t,n){var r=t._id.charAt(0);if("histogram2dcontour"!==e)return function(e,t){return"y"===r?t:e};var e=t._counterAxes[0],t=O.getFromId(o,e),i="x"===r||"x"===e&&"category"===t.type,a="y"===r||"y"===e&&"category"===t.type;return function(e,t){return 0===e||0===t||i&&e===n[t].length-1||a&&t===n.length-1?-1:("y"===r?t:e)-1}}(y.type,d,c);for(i=0;i<c.length;i++)for(a=0;a<c[i].length;a++)(l=E(a,i))+1&&g[l][1].push(c[i][a])}else for(void 0===(l=T.p)&&(l=T[p]),void 0===(c=void 0===(c=T.s)?T.v:c)&&(c=m?T.y:T.x),Array.isArray(c)||(c=void 0===c?[]:[c]),i=0;i<c.length;i++)g[l][1].push(c[i])}}}d._categoriesValue=g;var C=[];for(n=0;n<g.length;n++)C.push([g[n][0],u[f](g[n][1])]);C.sort(function(e,t){return e[1]-t[1]}),d._categoriesAggregatedValue=C,d._initialCategories=C.map(function(e){return e[0]}),"descending"===h&&d._initialCategories.reverse(),s=s.concat(d.sortByInitialCategories())}}}return s}(t,r);if(g.length){for(n._numBoxes=0,h=n._numViolins=0;h<g.length;h++)m(g[h],!0);for(h=0;h<g.length;h++)m(g[h],!1);b(r)}L.getComponentMethod("fx","calc")(r),L.getComponentMethod("errorbars","calc")(r)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function v(e,t,n){var r={};function i(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}D.simpleMap(e,i);for(var a=n._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])r[s]||i(n[O.id2name(s)])}function b(e){var t,n,r=e._fullLayout,i=r._visibleModules,a={};for(h=0;h<i.length;h++){var o=i[h],s=o.crossTraceCalc;s&&(a[o=o.basePlotModule.name]?D.pushUnique(a[o],s):a[o]=[s])}for(n in a){var l=a[n],c=r._subplots[n];if(Array.isArray(c))for(t=0;t<c.length;t++)for(var u=c[t],d=("cartesian"===n?r._plots:r)[u],h=0;h<l.length;h++)l[h](e,d,u);else for(h=0;h<l.length;h++)l[h](e)}}R.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},R.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},R.generalUpdatePerTraceModule=function(e,t,n,r){for(var i,a,o,s=t.traceHash,l={},c=0;c<n.length;c++){var u=n[c],d=u[0].trace;d.visible&&(l[d.type]=l[d.type]||[],l[d.type].push(u))}for(i in s)l[i]||((a=s[i][0])[0].trace.visible=!1,l[i]=[a]);for(o in l){var h=l[o];h[0][0].trace._module.plot(e,t,D.filterVisible(h),r)}t.traceHash=l},R.plotBasePlot=function(e,t,n,r,i){var a=L.getModule(e),e=o(t.calcdata,a)[0];a.plot(t,e,r,i)},R.cleanBasePlot=function(e,t,n,r,i){var a=i._has&&i._has(e),n=n._has&&n._has(e);a&&!n&&i["_"+e+"layer"].selectAll("g.trace").remove()}},{"../components/color":100,"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plot_api/plot_template":265,"../plots/get_data":307,"../registry":313,"./animation_attributes":270,"./attributes":272,"./cartesian/axis_ids":280,"./cartesian/handle_outline":287,"./command":303,"./font_attributes":305,"./frame_attributes":306,"./layout_attributes":309,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],312:[function(e,t,n){"use strict";e=e("../constants/docs"),e.FORMAT_LINK,e.DATE_FORMAT_LINK;function r(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(0<n.length){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}n.hovertemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(t.arrayOk=!0),t},n.texttemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(t.arrayOk=!0),t}},{"../constants/docs":207}],313:[function(e,t,c){"use strict";var u=e("./lib/loggers"),n=e("./lib/noop"),a=e("./lib/push_unique"),o=e("./lib/is_plain_object"),d=e("./lib/dom").addStyleRule,r=e("./lib/extend"),i=e("./plots/attributes"),s=e("./plots/layout_attributes"),h=r.extendFlat,l=r.extendDeepAll;function f(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)a(c.layoutArrayRegexes,t[n])}}function p(e,t){e=c.componentsRegistry[e].schema;e&&e.traces&&((e=e.traces[t])&&l(c.modules[t]._module.attributes,e))}function m(e,t){e=c.componentsRegistry[e].schema;e&&e.transforms&&((e=e.transforms[t])&&l(c.transformsRegistry[t].attributes,e))}function g(e,t){var n=c.componentsRegistry[e].schema;n&&n.subplots&&(t=(e=c.subplotsRegistry[t]).layoutAttributes,e="subplot"===e.attr?e.name:e.attr,Array.isArray(e)&&(e=e[0]),e=n.subplots[e],t&&e&&l(t,e))}function _(e){return e="object"==typeof e?e.type:e}c.modules={},c.allCategories={},c.allTypes=[],c.subplotsRegistry={},c.transformsRegistry={},c.componentsRegistry={},c.layoutArrayContainers=[],c.layoutArrayRegexes=[],c.traceLayoutAttributes={},c.localeRegistry={},c.apiMethodRegistry={},c.collectableSubplotTypes=null,c.register=function(e){if(c.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":!function(e){var t=e.name,n=e.categories,r=e.meta;if(c.modules[t])u.log("Type "+t+" already registered");else{c.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(c.subplotsRegistry[t])u.log("Plot type "+t+" already registered.");else for(var n in f(e),c.subplotsRegistry[t]=e,c.componentsRegistry)g(n,e.name)}(e.basePlotModule);for(var i,a={},o=0;o<n.length;o++)a[n[o]]=!0,c.allCategories[n[o]]=!0;for(i in c.modules[t]={_module:e,categories:a},r&&Object.keys(r).length&&(c.modules[t].meta=r),c.allTypes.push(t),c.componentsRegistry)p(i,t);e.layoutAttributes&&h(c.traceLayoutAttributes,e.layoutAttributes);r=e.basePlotModule,e=r.name;if("mapbox"===e){var s,l=r.constants.styleRules;for(s in l)d(".js-plotly-plot .plotly .mapboxgl-"+s,l[s])}"geo"!==e&&"mapbox"!==e||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}(n);break;case"transform":!function(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t,n="Transform module "+e.name,r="function"==typeof e.transform,i="function"==typeof e.calcTransform;if(!r&&!i)throw new Error(n+" is missing a *transform* or *calcTransform* method.");r&&i&&u.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "));o(e.attributes)||u.log(n+" registered without an *attributes* object.");"function"!=typeof e.supplyDefaults&&u.log(n+" registered without a *supplyDefaults* method.");for(t in c.transformsRegistry[e.name]=e,c.componentsRegistry)m(t,e.name)}(n);break;case"component":!function(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t,n,r,i=e.name;(c.componentsRegistry[i]=e).layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&a(c.layoutArrayContainers,i),f(e));for(t in c.modules)p(i,t);for(n in c.subplotsRegistry)g(i,n);for(r in c.transformsRegistry)m(i,r);e.schema&&e.schema.layout&&l(s,e.schema.layout)}(n);break;case"locale":!function(e){var t=e.name,n=t.split("-")[0],r=e.dictionary,i=e.format,a=r&&Object.keys(r).length,o=i&&Object.keys(i).length,s=c.localeRegistry,e=s[t];e||(s[t]=e={});n!==t&&((t=s[n])||(s[n]=t={}),a&&t.dictionary===e.dictionary&&(t.dictionary=r),o&&t.format===e.format&&(t.format=i));a&&(e.dictionary=r);o&&(e.format=i)}(n);break;case"apiMethod":var r=n.name;c.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},c.getModule=function(e){e=c.modules[_(e)];return!!e&&e._module},c.traceIs=function(e,t){if("various"===(e=_(e)))return!1;var n=c.modules[e];return n||(e&&u.log("Unrecognized trace type "+e+"."),n=c.modules[i.type.dflt]),!!n.categories[t]},c.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],i=0;i<r.length;i++)r[i].type===t&&n.push(i);return n},c.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},c.getComponentMethod=function(e,t){e=c.componentsRegistry[e];return e&&e[t]||n},c.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return c.apiMethodRegistry[e].apply(null,t)}},{"./lib/dom":222,"./lib/extend":224,"./lib/is_plain_object":231,"./lib/loggers":234,"./lib/noop":239,"./lib/push_unique":244,"./plots/attributes":272,"./plots/layout_attributes":309}],314:[function(e,t,n){"use strict";var f=e("../registry"),e=e("../lib"),p=e.extendFlat,m=e.extendDeep;function g(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}t.exports=function(e,t){var n,r=e.data,i=e.layout,a=m([],r),o=m({},i,g(t.tileClass)),i=e._context||{};if(t.width&&(o.width=t.width),t.height&&(o.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){o.annotations=[];for(var s=Object.keys(o),l=0;l<s.length;l++)n=s[l],-1<["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))&&(o[s[l]].title={text:""});for(l=0;l<a.length;l++){var c=a[l];c.showscale=!1,c.marker&&(c.marker.showscale=!1),f.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(t.annotations))for(l=0;l<t.annotations.length;l++)o.annotations.push(t.annotations[l]);var u=Object.keys(o).filter(function(e){return e.match(/^scene\d*$/)});if(u.length){var d={};for("thumbnail"===t.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<u.length;l++){var h=o[u[l]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),p(h.xaxis,d),p(h.yaxis,d),p(h.zaxis,d),h._scene=null}}e=document.createElement("div");t.tileClass&&(e.className=t.tileClass);i={gd:e,td:e,layout:o,data:a,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:i.mapboxAccessToken}};return"transparent"!==t.setBackground&&(i.config.setBackground=t.setBackground||"opaque"),i.gd.defaultLayout=g(t.tileClass),i}},{"../lib":230,"../registry":313}],315:[function(e,t,n){"use strict";var s=e("../lib"),l=e("../plot_api/to_image"),c=e("./filesaver"),u=e("./helpers");t.exports=function(i,a){var o;return s.isPlainObject(i)||(o=s.getGraphDiv(i)),(a=a||{}).format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(t,n){o&&o._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==a.format&&n(new Error(u.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var e=l(i,a),r=a.filename||i.fn||"newplot";r+="."+a.format.replace("-","."),e.then(function(e){return o&&(o._snapshotInProgress=!1),c(e,r,a.format)}).then(function(e){t(e)}).catch(function(e){o&&(o._snapshotInProgress=!1),n(e)})})}},{"../lib":230,"../plot_api/to_image":268,"./filesaver":316,"./helpers":317}],316:[function(e,t,n){"use strict";var c=e("../lib"),u=e("./helpers");t.exports=function(i,a,o){var s=document.createElement("a"),l="download"in s;return new Promise(function(e,t){var n,r;return c.isSafari()?(u.octetStream(("svg"===o?",":";base64,")+encodeURIComponent(i)),e(a)):c.isIE()?(n=u.createBlob(i,"svg"),window.navigator.msSaveBlob(n,a),n=null,e(a)):l?(n=u.createBlob(i,o),r=u.createObjectURL(n),s.href=r,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),u.revokeObjectURL(r),n=null,e(a)):void t(new Error("download error"))})}},{"../lib":230,"./helpers":317}],317:[function(e,t,n){"use strict";var r=e("../registry");n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},n.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},n.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var i=window.URL||window.webkitURL;n.createObjectURL=function(e){return i.createObjectURL(e)},n.revokeObjectURL=function(e){return i.revokeObjectURL(e)},n.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});e=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(window.atob(e));return new window.Blob([e],{type:"image/"+t})},n.octetStream=function(e){document.location.href="data:application/octet-stream"+e},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":313}],318:[function(e,t,n){"use strict";var r=e("./helpers"),e={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=e},{"./cloneplot":314,"./download":315,"./helpers":317,"./svgtoimg":319,"./toimage":320,"./tosvg":321}],319:[function(e,t,n){"use strict";var y=e("../lib"),r=e("events").EventEmitter,v=e("./helpers");t.exports=function(m){var g=m.emitter||new r,_=new Promise(function(n,r){var e=window.Image,t=m.svg,i=m.format||"png";if(y.isIE()&&"svg"!==i){var a=new Error(v.MSG_IE_BAD_FORMAT);return r(a),m.promise?_:g.emit("error",a)}var o,s=m.canvas,l=m.scale||1,c=m.width||300,a=m.height||150,u=l*c,d=l*a,h=s.getContext("2d"),f=new e,p="svg"===i||y.isSafari()?v.encodeSVG(t):(o=v.createBlob(t,"svg"),v.createObjectURL(o));s.width=u,s.height=d,f.onload=function(){var e;switch(o=null,v.revokeObjectURL(p),"svg"!==i&&h.drawImage(f,0,0,u,d),i){case"jpeg":e=s.toDataURL("image/jpeg");break;case"png":e=s.toDataURL("image/png");break;case"webp":e=s.toDataURL("image/webp");break;case"svg":e=p;break;default:var t="Image format is not jpeg, png, svg or webp.";if(r(new Error(t)),!m.promise)return g.emit("error",t)}n(e),m.promise||g.emit("success",e)},f.onerror=function(e){if(o=null,v.revokeObjectURL(p),r(e),!m.promise)return g.emit("error",e)},f.src=p});return m.promise?_:g}},{"../lib":230,"./helpers":317,events:12}],320:[function(e,t,n){"use strict";var a=e("events").EventEmitter,o=e("../registry"),s=e("../lib"),l=e("./helpers"),c=e("./cloneplot"),u=e("./tosvg"),d=e("./svgtoimg");t.exports=function(e,n){var r=new a,t=c(e,{format:"png"}),i=t.gd;return i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i),e=l.getRedrawFunc(i),o.call("_doPlot",i,t.data,t.layout,t.config).then(e).then(function(){var e=l.getDelay(i._fullLayout);setTimeout(function(){var e=u(i),t=document.createElement("canvas");t.id=s.randstr(),(r=d({format:n.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:t,emitter:r,svg:e})).clean=function(){i&&document.body.removeChild(i)}},e)}).catch(function(e){r.emit("error",e)}),r}},{"../lib":230,"../registry":313,"./cloneplot":314,"./helpers":317,"./svgtoimg":319,"./tosvg":321,events:12}],321:[function(e,t,n){"use strict";var g=e("@plotly/d3"),_=e("../lib"),y=e("../components/drawing"),v=e("../components/color"),b=e("../constants/xmlns_namespaces"),x=/"/g,w="TOBESTRIPPED",T=new RegExp('("'+w+")|("+w+'")',"g");t.exports=function(e,t,n){var r,i=e._fullLayout,a=i._paper,o=i._toppaper,s=i.width,l=i.height;a.insert("rect",":first-child").call(y.setRect,0,0,s,l).call(v.fill,i.paper_bgcolor);var c=i._basePlotModules||[];for(h=0;h<c.length;h++){var u=c[h];u.toSVG&&u.toSVG(e)}if(o)for(var o=o.node().childNodes,d=Array.prototype.slice.call(o),h=0;h<d.length;h++){var f=d[h];f.childNodes.length&&a.node().appendChild(f)}i._draggers&&i._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e,t=g.select(this);"hidden"!==this.style.visibility&&"none"!==this.style.display?(t.style({visibility:null,display:null}),(e=this.style.fontFamily)&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(x,w))):t.remove()});var p=[];if(i._gradientUrlQueryParts)for(r in i._gradientUrlQueryParts)p.push(r);if(i._patternUrlQueryParts)for(r in i._patternUrlQueryParts)p.push(r);p.length&&a.selectAll(p.join(",")).each(function(){var e=g.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(x,w));t=this.style.stroke;t&&-1!==t.indexOf("url(")&&e.style("stroke",t.replace(x,w))}),"pdf"!==t&&"eps"!==t||a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(b.xmlns,"xmlns",b.svg),a.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),"svg"===t&&n&&(a.attr("width",n*s),a.attr("height",n*l),a.attr("viewBox","0 0 "+s+" "+l));var m,s=(new window.XMLSerializer).serializeToString(a.node());return l=s,m=g.select("body").append("div").style({display:"none"}).html(""),l=l.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":m.html(e).text()}),m.remove(),s=(s=(s=l).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(T,"'"),s=_.isIE()?(s=(s=s.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"'):s}},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],322:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");t=t.marker;t&&(r.mergeArray(t.opacity,e,"mo",!0),r.mergeArray(t.color,e,"mc"),(t=t.line)&&(r.mergeArray(t.color,e,"mlc"),r.mergeArrayCastPositive(t.width,e,"mlw")))}},{"../../lib":230}],323:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../components/colorscale/attributes"),l=e("../../plots/font_attributes"),c=e("./constants"),u=e("../../components/drawing/attributes").pattern,d=e("../../lib/extend").extendFlat,e=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=d({},r.marker.line.width,{dflt:0}),l=d({width:l,editType:"calc"},s("marker.line")),u=d({line:l,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:u});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:a({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:d({},e,{}),insidetextfont:d({},e,{}),outsidetextfont:d({},e,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:d({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":107,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"../scatter/attributes":353,"./constants":325}],324:[function(e,t,n){"use strict";var h=e("../../plots/cartesian/axes"),f=e("../../plots/cartesian/align_period"),p=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/calc"),g=e("./arrays_to_calcdata"),_=e("../scatter/calc_selection");t.exports=function(e,t){for(var n,r,i,a=h.getFromId(e,t.xaxis||"x"),o=h.getFromId(e,t.yaxis||"y"),s={msUTC:!(!t.base&&0!==t.base)},l="h"===t.orientation?(n=a.makeCalcdata(t,"x",s),i=o.makeCalcdata(t,"y"),r=f(t,o,"y",i),!!t.yperiodalignment):(n=o.makeCalcdata(t,"y",s),i=a.makeCalcdata(t,"x"),r=f(t,a,"x",i),!!t.xperiodalignment),c=Math.min(r.length,n.length),u=new Array(c),d=0;d<c;d++)u[d]={p:r[d],s:n[d]},l&&(u[d].orig_p=i[d]),t.ids&&(u[d].id=String(t.ids[d]));return p(t,"marker")&&m(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),p(t,"marker.line")&&m(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),g(u,t),_(u,t),u}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"../scatter/calc_selection":355,"./arrays_to_calcdata":322}],325:[function(e,t,n){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],326:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),h=e("../../lib").isArrayOrTypedArray,x=e("../../constants/numerical").BADNUM,f=e("../../registry"),w=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/constraints").getAxisGroup,c=e("./sieve.js");function p(e,t,n,r,i){if(r.length){var a,o,s,l;switch(!function(e,t){var n,r,i;for(n=0;n<t.length;n++){var a=t[n],o=a[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(h(s)){for(r=0;r<Math.min(s.length,a.length);r++)i=c(s[r],0,l),b(i)?(a[r].b=+i,a[r].hasB=1):a[r].b=0;for(;r<a.length;r++)a[r].b=0}else{i=c(s,0,l);var u=b(i);for(i=u?i:0,r=0;r<a.length;r++)a[r].b=i,u&&(a[r].hasB=1)}}}(n,r),i.mode){case"overlay":u(t,n,r,i);break;case"group":for(a=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.offset?o:a).push(l);o.length&&function(e,t,n,r,i){r=new c(r,{posAxis:t,sepNegVal:!1,overlapNoMerge:!i.norm});(function(e,t,n,r){for(var i,a=e._fullLayout,o=n.positions,e=n.distinctPositions,s=n.minDiff,l=n.traces,c=l.length,u=o.length!==e.length,d=s*(1-r.gap),e=y(a,t._id)+l[0][0].trace.orientation,h=a._alignmentOpts[e]||{},f=0;f<c;f++){var p=l[f],m=p[0].trace,g=h[m.alignmentgroup]||{},_=Object.keys(g.offsetGroups||{}).length,g=(i=_?d/_:u?d/c:d)*(1-(r.groupgap||0));i=_?((2*m._offsetIndex+1-_)*i-g)/2:u?((2*f+1-c)*i-g)/2:-g/2;p=p[0].t;p.barwidth=g,p.poffset=i,p.bargroupwidth=d,p.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,v(n),T(t,n),A(t,n,u)})(e,t,r,i),function(e,t){for(var n=e.traces,r=0;r<n.length;r++){var i=n[r];if(void 0===i[0].trace.base)for(var a=new c([i],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<i.length;o++){var s,l=i[o];l.p===x||(s=a.put(l.p,l.b+l.s))&&(l.b=s)}}}(r,t),i.norm?(g(r),_(n,r,i)):m(n,r)}(e,t,n,o,i),a.length&&u(t,n,a,i);break;case"stack":case"relative":for(a=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.base?o:a).push(l);o.length&&function(e,t,n,r){var i=new c(n,{posAxis:e,sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});d(e,i,r),function(e,t,n){var r,i,a,o,s,l,c=k(e),u=t.traces;for(o=0;o<u.length;o++)if(r=u[o],"funnel"===(i=r[0].trace).type)for(s=0;s<r.length;s++)(l=r[s]).s!==x&&t.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){r=u[o],i=r[0].trace,a="funnel"===i.type;var d,h,f=[];for(s=0;s<r.length;s++)(l=r[s]).s!==x&&(h=a?l.s:l.s+l.b,d=t.put(l.p,h),h=d+h,l.b=d,l[c]=h,n.norm||(f.push(h),l.hasB&&f.push(d)));n.norm||(i._extremes[e._id]=w.findExtremes(e,f,{tozero:!0,padded:!0}))}}(t,i,r);for(var a=0;a<n.length;a++)for(var o=n[a],s=0;s<o.length;s++){var l=o[s];l.s!==x&&l.b+l.s===i.get(l.p,l.s)&&(l._outmost=!0)}r.norm&&_(t,i,r)}(t,n,o,i),a.length&&u(t,n,a,i)}!function(e,t){var n,r,i,a=k(t),o={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(i=e[n],r=0;r<i.length;r++){var c=i[r].p;b(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=o.round=function(e){return String(Math.round(u*(e-s)))};for(n=0;n<e.length;n++){(i=e[n])[0].t.extents=o;var h=i[0].t.poffset,f=Array.isArray(h);for(r=0;r<i.length;r++){var p,m,g=i[r],_=g[a]-g.w/2;b(_)&&(p=g[a]+g.w/2,m=d(g.p),o[m]?o[m]=[Math.min(_,o[m][0]),Math.max(p,o[m][1])]:o[m]=[_,p]),g.p0=g.p+(f?h[r]:h),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(r,t)}}function u(e,t,n,r){for(var i=0;i<n.length;i++){var a=n[i],a=new c([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});d(e,a,r),r.norm?(g(a),_(t,a,r)):m(t,a)}}function d(e,t,n){for(var r=t.minDiff,i=t.traces,a=r*(1-n.gap),o=a*(1-(n.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=r}t.binWidth=i[0][0].t.barwidth/100,v(t),T(e,t),A(e,t)}function v(e){for(var t=e.traces,n=0;n<t.length;n++){var r,i=t[n],a=i[0],o=a.trace,s=a.t,a=o._offset||o.offset,l=s.poffset;if(h(a)){for(r=Array.prototype.slice.call(a,0,i.length),d=0;d<r.length;d++)b(r[d])||(r[d]=l);for(d=r.length;d<i.length;d++)r.push(l);s.poffset=r}else void 0!==a&&(s.poffset=a);var o=o._width||o.width,c=s.barwidth;if(h(o)){for(var u=Array.prototype.slice.call(o,0,i.length),d=0;d<u.length;d++)b(u[d])||(u[d]=c);for(d=u.length;d<i.length;d++)u.push(c);if(s.barwidth=u,void 0===a){for(r=[],d=0;d<i.length;d++)r.push(l+(c-u[d])/2);s.poffset=r}}else void 0!==o&&(s.barwidth=o,void 0===a&&(s.poffset=l+(c-o)/2))}}function T(e,t){for(var n=t.traces,r=k(e),i=0;i<n.length;i++)for(var a=n[i],o=a[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<a.length;d++){var h=a[d],f=h.w=u?c[d]:c;h[r]=h.p+(l?s[d]:s)+f/2}}function A(e,t,n){var r=t.traces,i=t.minDiff/2;w.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var a=0;a<r.length;a++){var o=r[a],s=o[0],l=s.trace,c=[];for(p=0;p<o.length;p++)m=(g=o[p]).p-i,v=g.p+i,c.push(m,v);if(l.width||l.offset)for(var s=s.t,u=s.poffset,d=s.barwidth,h=Array.isArray(u),f=Array.isArray(d),p=0;p<o.length;p++){var m,g=o[p],_=h?u[p]:u,y=f?d[p]:d,v=(m=g.p+_)+y;c.push(m,v)}l._extremes[e._id]=w.findExtremes(e,c,{padded:!1})}}function m(e,t){for(var n=t.traces,r=k(e),i=0;i<n.length;i++){for(var a=n[i],o=a[0].trace,s=[],l=!1,c=0;c<a.length;c++){var u=a[c],d=u.b,h=d+u.s;u[r]=h,s.push(h),u.hasB&&s.push(d),u.hasB&&u.b||(l=!0)}o._extremes[e._id]=w.findExtremes(e,s,{tozero:l,padded:!0})}}function g(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++){var a=r[i];a.s!==x&&e.put(a.p,a.b+a.s)}}function _(t,e,n){var r=e.traces,i=k(t),a="fraction"===n.norm?1:100,o=a/1e9,s=t.l2c(t.c2l(0)),l="stack"===n.mode?a:s;function c(e){return b(t.c2l(e))&&(e<s-o||l+o<e||!b(s))}for(var u=0;u<r.length;u++){for(var d=r[u],h=d[0].trace,f=[],p=!1,m=!1,g=0;g<d.length;g++){var _,y,v=d[g];v.s!==x&&(y=Math.abs(a/e.get(v.p,v.s)),v.b*=y,v.s*=y,y=(_=v.b)+v.s,v[i]=y,f.push(y),m=m||c(y),v.hasB&&(f.push(_),m=m||c(_)),v.hasB&&v.b||(p=!0))}h._extremes[t._id]=w.findExtremes(t,f,{tozero:p,padded:m})}}function k(e){return e._id.charAt(0)}t.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,t=e._fullLayout,i=e._fullData,a=e.calcdata,o=[],s=[],l=0;l<i.length;l++){var c=i[l];if(!0===c.visible&&f.traceIs(c,"bar")&&c.xaxis===n._id&&c.yaxis===r._id&&(("h"===c.orientation?o:s).push(a[l]),c._computePh))for(var u=e.calcdata[l],d=0;d<u.length;d++)"function"==typeof u[d].ph0&&(u[d].ph0=u[d].ph0()),"function"==typeof u[d].ph1&&(u[d].ph1=u[d].ph1())}t={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap},p(e,n,r,s,t),p(e,r,n,o,t)},setGroupPositions:p}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../plots/cartesian/constraints":284,"../../registry":313,"./sieve.js":336,"fast-isnumeric":15}],327:[function(e,t,n){"use strict";var p=e("../../lib"),o=e("../../components/color"),s=e("../../registry"),l=e("../scatter/xy_defaults"),c=e("../scatter/period_defaults"),u=e("./style_defaults"),d=e("../../plots/cartesian/constraints").getAxisGroup,h=e("./attributes"),m=p.coerceFont;function a(e,t,n,r){var i=t.orientation,a=t[{v:"x",h:"y"}[i]+"axis"],o=d(n,a)+i,a=n._alignmentOpts||{},i=r("alignmentgroup"),n=a[o],o=(n=n||(a[o]={}))[i];o?o.traces.push(t):o=n[i]={traces:[t],alignmentIndex:Object.keys(n).length,offsetGroups:{}};n=r("offsetgroup"),r=o.offsetGroups,o=r[n];n&&(o=o||(r[n]={offsetIndex:Object.keys(r).length}),t._offsetIndex=o.offsetIndex)}function f(e,t,n,r,i,a){var o=!(!1===(a=a||{}).moduleHasSelected),s=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),c=!(!1===a.moduleHasCliponaxis),u=!(!1===a.moduleHasTextangle),d=!(!1===a.moduleHasInsideanchor),h=!!a.hasPathbar,f=Array.isArray(i)||"auto"===i,a=f||"inside"===i,f=f||"outside"===i;(a||f)&&(i=m(r,"textfont",n.font),n=p.extendFlat({},i),(e=!(e.textfont&&e.textfont.color))&&delete n.color,m(r,"insidetextfont",n),h&&(h=p.extendFlat({},i),e&&delete h.color,m(r,"pathbar.textfont",h)),f&&m(r,"outsidetextfont",i),o&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),c&&r("cliponaxis"),u&&r("textangle"),r("texttemplate")),a&&d&&r("insidetextanchor")}t.exports={supplyDefaults:function(n,r,e,t){function i(e,t){return p.coerce(n,r,h,e,t)}var a;l(n,r,t,i)?(c(n,r,t,i),i("xhoverformat"),i("yhoverformat"),i("orientation",r.x&&!r.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),a=i("textposition"),f(n,0,t,i,a,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u(n,r,i,e,t),e=(r.marker.line||{}).color,(t=s.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||o.defaultLine,{axis:"y"}),t(n,r,e||o.defaultLine,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(r,i)):r.visible=!1},crossTraceDefaults:function(e,t){var n;function r(e){return p.coerce(n._input,n,h,e)}if("group"===t.barmode)for(var i=0;i<e.length;i++)"bar"===(n=e[i]).type&&(n._input,a(0,n,t,r))},handleGroupingDefaults:a,handleText:f}},{"../../components/color":100,"../../lib":230,"../../plots/cartesian/constraints":284,"../../registry":313,"../scatter/period_defaults":373,"../scatter/xy_defaults":380,"./attributes":323,"./style_defaults":338}],328:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},{}],329:[function(e,t,n){"use strict";var a=e("fast-isnumeric"),r=e("tinycolor2"),i=e("../../lib").isArrayOrTypedArray;n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(a(t)){t=+t;var r=e.min,i=e.max;if(!(void 0!==r&&t<r||void 0!==i&&i<t))return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return r(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},n.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:i(e.marker.line.width)?0:e.marker.line.width}},{"../../lib":230,"fast-isnumeric":15,tinycolor2:65}],330:[function(e,t,n){"use strict";var R=e("../../components/fx"),a=e("../../registry"),i=e("../../components/color"),I=e("../../lib").fillText,o=e("./helpers").getLineWidth,N=e("../../plots/cartesian/axes").hoverLabelText,z=e("../../constants/numerical").BADNUM;function s(e,t,n,r,i){var a,o,s,l,c,u,d=e.cd,h=d[0].trace,f=d[0].t,p="closest"===r,m="waterfall"===h.type,g=e.maxHoverDistance,_=e.maxSpikeDistance;"h"===h.orientation?(a=n,o=t,s="y",l="x",c=S,u=k):(a=t,o=n,s="x",l="y",u=S,c=k);var y=h[s+"period"];function v(e){return x(e,-1)}function b(e){return x(e,1)}function x(e,t){return y?e.p+t*Math.abs(e.p-e.orig_p):e[s]+t*e.w/2}var w=p||y?v:function(e){return Math.min(v(e),e.p-f.bardelta/2)},T=p||y?b:function(e){return Math.max(b(e),e.p+f.bardelta/2)};function A(e,t,n){return i.finiteRange&&(n=0),R.inbox(e-a,t-a,n+Math.min(1,Math.abs(t-e)/E)-1)}function k(e){return A(w(e),T(e),g)}function M(e){var t=e[l];return m&&(e=Math.abs(e.rawS)||0,0<o?t+=e:o<0&&(t-=e)),t}function S(e){var t=o,n=e.b,e=M(e);return R.inbox(n-t,e-t,g+(e-t)/(e-n)-1)}t=e[s+"a"],n=e[l+"a"];var E=Math.abs(t.r2c(t.range[1])-t.r2c(t.range[0])),r=R.getDistanceFunction(r,c,u,function(e){return(c(e)+u(e))/2});if(R.getClosest(d,r,e),!1!==e.index&&d[e.index].p!==z){p||(w=function(e){return Math.min(v(e),e.p-f.bargroupwidth/2)},T=function(e){return Math.max(b(e),e.p+f.bargroupwidth/2)});var C=d[e.index],d=h.base?C.b+C.s:C.s;e[l+"0"]=e[l+"1"]=n.c2p(C[l],!0),e[l+"LabelVal"]=d;d=f.extents[f.extents.round(C.p)];e[s+"0"]=t.c2p(p?w(C):d[0],!0),e[s+"1"]=t.c2p(p?T(C):d[1],!0);var L,D,O,P,d=void 0!==C.orig_p;return e[s+"LabelVal"]=d?C.orig_p:C.p,e.labelLabel=N(t,e[s+"LabelVal"],h[s+"hoverformat"]),e.valueLabel=N(n,e[l+"LabelVal"],h[l+"hoverformat"]),e.baseLabel=N(n,C.b,h[l+"hoverformat"]),e.spikeDistance=(O=o,P=(D=C).b,D=M(D),(R.inbox(P-O,D-O,_+(D-O)/(D-P)-1)+A(v(L=C),b(L),_))/2),e[s+"Spike"]=t.c2p(C.p,!0),I(C,h,e),e.hovertemplate=h.hovertemplate,e}}function l(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,t=o(e,t);return i.opacity(n)?n:i.opacity(r)&&t?r:void 0}t.exports={hoverPoints:function(e,t,n,r,i){if(n=s(e,t,n,r,i)){r=n.cd,i=r[0].trace,r=r[n.index];return n.color=l(i,r),a.getComponentMethod("errorbars","hoverInfo")(r,i,n),[n]}},hoverOnBars:s,getTraceColor:l}},{"../../components/color":100,"../../components/fx":140,"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./helpers":329}],331:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":290,"../scatter/marker_colorbar":371,"./arrays_to_calcdata":322,"./attributes":323,"./calc":324,"./cross_trace_calc":326,"./defaults":327,"./event_data":328,"./hover":330,"./layout_attributes":332,"./layout_defaults":333,"./plot":334,"./select":335,"./style":337}],332:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],333:[function(e,t,n){"use strict";var h=e("../../registry"),f=e("../../plots/cartesian/axes"),p=e("../../lib"),m=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return p.coerce(n,r,m,e,t)}for(var i=!1,a=!1,o=!1,s={},l=t("barmode"),c=0;c<e.length;c++){var u,d=e[c];h.traceIs(d,"bar")&&d.visible&&(i=!0,"group"===l&&(s[u=d.xaxis+d.yaxis]&&(o=!0),s[u]=!0),d.visible&&"histogram"===d.type&&"category"!==f.getFromId({_fullLayout:r},d["v"===d.orientation?"xaxis":"yaxis"]).type&&(a=!0))}i?("overlay"!==l&&t("barnorm"),t("bargap",a&&!o?0:.2),t("bargroupgap")):delete r.barmode}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./layout_attributes":332}],334:[function(e,t,n){"use strict";var M=e("@plotly/d3"),S=e("fast-isnumeric"),E=e("../../lib"),C=e("../../lib/svg_text_utils"),L=e("../../components/color"),D=e("../../components/drawing"),r=e("../../registry"),O=e("../../plots/cartesian/axes").tickText,i=e("./uniform_text"),P=i.recordMinTextSize,a=i.clearMinTextSize,R=e("./style"),I=e("./helpers"),o=e("./constants"),i=e("./attributes"),N=i.text,z=i.textposition,F=e("../../components/fx/helpers").appendArrayPointValue,j=o.TEXTPAD;function s(e){return e.id}function B(e,t,n,r){return t.uniformtext.mode||!l(n)?e:(r&&(i=r()),e.transition().duration(n.duration).ease(n.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}));var i}function l(e){return e&&0<e.duration}function H(e){return"auto"===e?0:e}function U(e,t){var n=Math.PI/180*t,t=Math.abs(Math.sin(n)),n=Math.abs(Math.cos(n));return{x:e.width*n+e.height*t,y:e.width*t+e.height*n}}function V(e,t,n,r,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor||"end",u="end"===c,d="start"===c,h=((a.leftToRight||0)+1)/2,f=1-h,p=i.width,m=i.height,g=Math.abs(t-e),_=Math.abs(r-n),c=2*j<g&&2*j<_?j:0;g-=2*c,_-=2*c;a=H(l);"auto"!==l||p<=g&&m<=_||!(g<p||_<m)||(_<p||g<m)&&p<m==g<_||(a+=90);p=U(i,a),m=1;s&&(m=Math.min(1,g/p.x,_/p.y));s=i.left*f+i.right*h,g=(i.top+i.bottom)/2,_=(e+j)*f+(t-j)*h,i=(n+r)/2,f=0,h=0;return(d||u)&&(u=(o?p.x:p.y)/2,p=o?e<t?1:-1:n<r?1:-1,o?f=d?(_=e+p*c,-p*u):(_=t-p*c,p*u):h=d?(i=n+p*c,-p*u):(i=r-p*c,p*u)),{textX:s,textY:g,targetX:_,targetY:i,anchorX:f,anchorY:h,scale:m,rotate:a}}t.exports={plot:function(v,b,e,t,x,w){var T=b.xaxis,A=b.yaxis,k=v._fullLayout;x||(x={mode:k.barmode,norm:k.barmode,gap:k.bargap,groupgap:k.bargroupgap},a("bar",k)),e=E.makeTraceGroups(t,e,"trace bars").each(function(f){var e=M.select(this),p=f[0].trace,t="waterfall"===p.type,n="funnel"===p.type,m="bar"===p.type||n,g=0;t&&p.connector.visible&&"between"===p.connector.mode&&(g=p.connector.line.width/2);var _="h"===p.orientation,y=l(x),n=E.ensureSingle(e,"g","points"),t=function(e){if(e.ids)return s}(p),t=n.selectAll("g.point").data(E.identity,t);t.enter().append("g").classed("point",!0),t.exit().remove(),t.each(function(e,t){var n,r,i,a=M.select(this),o=(s=e,o=T,u=A,c=[],n=(l=_)?o:u,o=l?u:o,(u=[])[0]=n.c2p(s.s0,!0),c[0]=o.c2p(s.p0,!0),u[1]=n.c2p(s.s1,!0),c[1]=o.c2p(s.p1,!0),l?[u,c]:[c,u]),s=o[0][0],l=o[0][1],c=o[1][0],u=o[1][1],o=0==(_?l-s:u-c);function d(e){var t=M.round(r/2%1,2);return 0===x.gap&&0===x.groupgap?M.round(Math.round(e)-t,2):e}o=(o=o&&m&&I.getLineWidth(p,e)?!1:o)||!(S(s)&&S(l)&&S(c)&&S(u)),(e.isBlank=o)&&(_?l=s:u=c),g&&!o&&(_?l+=((s-=(s<l?1:-1)*g)<l?1:-1)*g:u+=((c-=(c<u?1:-1)*g)<u?1:-1)*g),"waterfall"===p.type?o||(i=p[e.dir].marker,r=i.line.width,i=i.color):(r=I.getLineWidth(p,e),i=e.mc||p.marker.color),v._context.staticPlot||(s=(h=L.opacity(i)<1||.01<r?d:function(e,t,n){return n&&e===t?e:2<=Math.abs(e-t)?d(e):t<e?Math.ceil(e):Math.floor(e)})(s,l,_),l=h(l,s,_),c=h(c,u,!_),u=h(u,c,!_));var o,h=B(E.ensureSingle(a,"path"),k,x,w);h.style("vector-effect","non-scaling-stroke").attr("d",isNaN((l-s)*(u-c))||o&&v._context.staticPlot?"M0,0Z":"M"+s+","+c+"V"+u+"H"+l+"V"+c+"Z").call(D.setClipUrl,b.layerClipId,v),!k.uniformtext.mode&&y&&(o=D.makePointStyleFns(p),D.singlePointStyle(e,h,p,o,v)),function(r,e,t,n,i,a,o,s,l,c,u){var d,h=e.xaxis,f=e.yaxis,p=r._fullLayout;function m(e,t,n){return E.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(D.font,n).call(C.convertToTspans,r)}var g=n[0].trace,_="h"===g.orientation,y=function(e,t,n,r,i){var a=t[0].trace;n=a.texttemplate?function(e,t,n,r,i){var a=t[0].trace,o=E.castOption(a,n,"texttemplate");if(!o)return"";var s,l,c="waterfall"===a.type,u="funnel"===a.type;l="h"===a.orientation?(h="y",s=i,f="x",r):(h="x",s=r,f="y",i);function d(e){return O(l,l.c2l(e),!0).text}t=t[n],n={};n.label=t.p,n.labelLabel=n[h+"Label"]=function(e){return O(s,s.c2l(e),!0).text}(t.p);var h=E.castOption(a,t.i,"text");0!==h&&!h||(n.text=h);n.value=t.s,n.valueLabel=n[f+"Label"]=d(t.s);var f={};F(f,a,t.i),c&&(n.delta=+t.rawS||t.s,n.deltaLabel=d(n.delta),n.final=t.v,n.finalLabel=d(n.final),n.initial=n.final-n.delta,n.initialLabel=d(n.initial));u&&(n.value=t.s,n.valueLabel=d(n.value),n.percentInitial=t.begR,n.percentInitialLabel=E.formatPercent(t.begR),n.percentPrevious=t.difR,n.percentPreviousLabel=E.formatPercent(t.difR),n.percentTotal=t.sumR,n.percenTotalLabel=E.formatPercent(t.sumR));t=E.castOption(a,t.i,"customdata");t&&(n.customdata=t);return E.texttemplateString(o,n,e._d3locale,f,n,a._meta||{})}(e,t,n,r,i):a.textinfo?function(e,t,n,r){var i=e[0].trace,a="h"===i.orientation,o="waterfall"===i.type,s="funnel"===i.type;function l(e){return O(a?n:r,+e,!0).text}var c,u=i.textinfo,d=e[t],h=u.split("+"),f=[],u=function(e){return-1!==h.indexOf(e)};u("label")&&f.push(function(e){return O(a?r:n,e,!0).text}(e[t].p));u("text")&&(0!==(c=E.castOption(i,d.i,"text"))&&!c||f.push(c));o&&(t=+d.rawS||d.s,i=d.v,o=i-t,u("initial")&&f.push(l(o)),u("delta")&&f.push(l(t)),u("final")&&f.push(l(i)));s&&(u("value")&&f.push(l(d.s)),s=0,u("percent initial")&&s++,u("percent previous")&&s++,u("percent total")&&s++,s=1<s,u("percent initial")&&(c=E.formatPercent(d.begR),s&&(c+=" of initial"),f.push(c)),u("percent previous")&&(c=E.formatPercent(d.difR),s&&(c+=" of previous"),f.push(c)),u("percent total")&&(c=E.formatPercent(d.sumR),s&&(c+=" of total"),f.push(c)));return f.join("<br>")}(t,n,r,i):I.getValue(a.text,n);return I.coerceString(N,n)}(p,n,i,h,f);d=function(e,t){t=I.getValue(e.textposition,t);return I.coerceEnumerated(z,t)}(g,i);var v="stack"===c.mode||"relative"===c.mode,b=n[i],e=!v||b._outmost;if(y&&"none"!==d&&(!b.isBlank&&a!==o&&s!==l||"auto"!==d&&"inside"!==d)){v=p.font,n=R.getBarColor(n[i],g),n=R.getInsideTextFont(g,i,v,n),i=R.getOutsideTextFont(g,i,v),v=t.datum();_?"log"===h.type&&v.s0<=0&&(a=h.range[0]<h.range[1]?0:h._length):"log"===f.type&&v.s0<=0&&(s=f.range[0]<f.range[1]?f._length:0);var x,w,T,A,h=Math.abs(o-a)-2*j,v=Math.abs(l-s)-2*j;if("outside"===d&&(e||b.hasB||(d="inside")),"auto"===d&&(e?(d="inside",A=E.ensureUniformFontSize(r,n),x=m(t,y,A),w=D.bBox(x.node()),T=w.width,M=w.height,f=T<=h&&M<=v,e=T<=v&&M<=h,v=_?T*(v/M)<=h:M*(h/T)<=v,0<T&&0<M&&(f||e||v)?d="inside":(d="outside",x.remove(),x=null)):d="inside"),!x){A=E.ensureUniformFontSize(r,"outside"===d?i:n);y=(x=m(t,y,A)).attr("transform");if(x.attr("transform",""),w=D.bBox(x.node()),T=w.width,M=w.height,x.attr("transform",y),T<=0||M<=0)return x.remove()}var k,M=g.textangle;(M="outside"===d?(k="both"===g.constraintext||"outside"===g.constraintext,function(e,t,n,r,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=i.width,d=i.height,h=Math.abs(t-e),f=Math.abs(r-n);o=s?2*j<f?j:0:2*j<h?j:0;var p=1;l&&(p=s?Math.min(1,f/d):Math.min(1,h/u));a=H(c),l=U(i,a),f=(s?l.x:l.y)/2,d=(i.left+i.right)/2,h=(i.top+i.bottom)/2,u=(e+t)/2,c=(n+r)/2,l=0,i=0,n=s?t<e?1:-1:n<r?1:-1;s?(u=t-n*o,l=n*f):(c=r+n*o,i=-n*f);return{textX:d,textY:h,targetX:u,targetY:c,anchorX:l,anchorY:i,scale:p,rotate:a}}(a,o,s,l,w,{isHorizontal:_,constrained:k,angle:M})):(k="both"===g.constraintext||"inside"===g.constraintext,V(a,o,s,l,w,{isHorizontal:_,constrained:k,angle:M,anchor:g.insidetextanchor}))).fontSize=A.size,P(g.type,M,p),b.transform=M,B(x,p,c,u).attr("transform",E.getTextTransform(M))}else t.select("text").remove()}(v,b,a,f,t,s,l,c,u,x,w),b.layerClipId&&D.hideOutsideRangePoint(e,a.select("text"),T,A,p.xcalendar,p.ycalendar)});t=!1===p.cliponaxis;D.setClipUrl(e,t?null:b.layerClipId,v)}),r.getComponentMethod("errorbars","plot")(v,e,b,x)},toMoveInsideBar:V}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx/helpers":136,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"./attributes":323,"./constants":325,"./helpers":329,"./style":337,"./uniform_text":339,"@plotly/d3":11,"fast-isnumeric":15}],335:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,a,o,s,l,c=e.cd,u=e.xaxis,d=e.yaxis,h=c[0].trace,f="funnel"===h.type,p="h"===h.orientation,m=[];if(!1===t)for(n=0;n<c.length;n++)c[n].selected=0;else for(n=0;n<c.length;n++){var g=c[n],_="ct"in g?g.ct:(_=g,i=d,a=p,o=f,l=s=void 0,s=(r=u).c2p(a?_.s0:_.p0,!0),l=r.c2p(a?_.s1:_.p1,!0),r=i.c2p(a?_.p0:_.s0,!0),_=i.c2p(a?_.p1:_.s1,!0),o?[(s+l)/2,(r+_)/2]:a?[l,(r+_)/2]:[(s+l)/2,_]);t.contains(_,!1,n,e)?(m.push({pointNumber:n,x:u.c2d(g.x),y:d.c2d(g.y)}),g.selected=1):g.selected=0}return m}},{}],336:[function(e,t,n){"use strict";t.exports=r;var c=e("../../lib").distinctVals,u=e("../../constants/numerical").BADNUM;function r(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,r=[],i=0;i<e.length;i++){for(var a=e[i],o=0;o<a.length;o++){var s=a[o];s.p!==u&&r.push(s.p)}a[0]&&a[0].width1&&(n=Math.min(a[0].width1,n))}this.positions=r;var l=c(r);this.distinctPositions=l.vals,1===l.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(l.minDiff,n);t=(t.posAxis||{}).type;"category"!==t&&"multicategory"!==t||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(e,t){var n=this.getLabel(e,t),e=this.bins[n]||0;return this.bins[n]=e+t,e},r.prototype.get=function(e,t){t=this.getLabel(e,t);return this.bins[t]||0},r.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":210,"../../lib":230}],337:[function(e,t,n){"use strict";var o=e("@plotly/d3"),i=e("../../components/color"),s=e("../../components/drawing"),l=e("../../lib"),c=e("../../registry"),a=e("./uniform_text").resizeText,r=e("./attributes"),u=r.textfont,d=r.insidetextfont,h=r.outsidetextfont,f=e("./helpers");function p(e,t,n){s.pointStyle(e.selectAll("path"),t,n),m(e,t,n)}function m(e,n,r){e.selectAll("text").each(function(e){var t=o.select(this),e=l.ensureUniformFontSize(r,g(t,e,n,r));s.font(t,e)})}function g(e,t,n,r){var i=r._fullLayout.font,a=n.textfont;return e.classed("bartext-inside")?(r=x(t,n),a=y(n,t.i,i,r)):e.classed("bartext-outside")&&(a=v(n,t.i,i)),a}function _(e,t,n){return b(u,e.textfont,t,n)}function y(e,t,n,r){n=_(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(n={color:i.contrast(r),family:n.family,size:n.size}),b(d,e.insidetextfont,t,n)}function v(e,t,n){n=_(e,t,n);return b(h,e.outsidetextfont,t,n)}function b(e,t,n,r){var i=f.getValue((t=t||{}).family,n),a=f.getValue(t.size,n),n=f.getValue(t.color,n);return{family:f.coerceString(e.family,i,r.family),size:f.coerceNumber(e.size,a,r.size),color:f.coerceColor(e.color,n,r.color)}}function x(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}t.exports={style:function(t){var e=o.select(t).selectAll("g.barlayer").selectAll("g.trace");a(t,e,"bar");var n=e.size(),r=t._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!e[0].trace.marker.line.width)&&o.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){p(o.select(this),e[0].trace,t)}),c.getComponentMethod("errorbars","style")(e)},styleTextPoints:m,styleOnSelect:function(e,t,n){var r,i,a=t[0].trace;a.selectedpoints?(r=n,i=a,t=e,s.selectedPointStyle(r.selectAll("path"),i),function(e,r,i){e.each(function(e){var t,n=o.select(this);e.selected?(t=l.ensureUniformFontSize(i,g(n,e,r,i)),(e=r.selected.textfont&&r.selected.textfont.color)&&(t.color=e),s.font(n,t)):s.selectedTextStyle(n,r)})}(r.selectAll("text"),i,t)):(p(n,a,e),c.getComponentMethod("errorbars","style")(n))},getInsideTextFont:y,getOutsideTextFont:v,getBarColor:x,resizeText:a}},{"../../components/color":100,"../../components/drawing":122,"../../lib":230,"../../registry":313,"./attributes":323,"./helpers":329,"./uniform_text":339,"@plotly/d3":11}],338:[function(e,t,n){"use strict";var o=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("../../lib").coercePattern;t.exports=function(e,t,n,r,i){var a=n("marker.color",r),r=s(e,"marker");r&&l(e,t,i,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",o.defaultLine),s(e,"marker.line")&&l(e,t,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),c(n,"marker.pattern",a,r),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],339:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../lib");function a(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:function(e,t,n){var r,i;n.uniformtext.mode&&(r=a(e),i=n.uniformtext.minsize,e=t.scale*t.fontSize,t.hide=e<i,n[r]=n[r]||1/0,t.hide||(n[r]=Math.min(n[r],Math.max(e,i))))},clearMinTextSize:function(e,t){t[a(e)]=void 0},resizeText:function(e,t,n){var r=(e=e._fullLayout)["_"+n+"Text_minsize"];if(r){var i,a="hide"===e.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}t.selectAll(i).each(function(e){e=e.transform;e&&(e.scale=a&&e.hide?0:r/e.fontSize,o.select(this).select("text").attr("transform",s.getTextTransform(e)))})}}}},{"../../lib":230,"@plotly/d3":11}],340:[function(e,t,n){"use strict";var r=e("../../plots/attributes"),i=e("../../plots/domain").attributes,a=e("../../plots/font_attributes"),o=e("../../components/color/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,e=e("../../lib/extend").extendFlat,a=a({editType:"plot",arrayOk:!0,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:e({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:e({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:e({},a,{}),outsidetextfont:e({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:e({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:e({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":99,"../../lib/extend":224,"../../plots/attributes":272,"../../plots/domain":304,"../../plots/font_attributes":305,"../../plots/template_attributes":312}],341:[function(e,t,i){"use strict";var a=e("../../plots/plots");i.name="pie",i.plot=function(e,t,n,r){a.plotBasePlot(i.name,e,t,n,r)},i.clean=function(e,t,n,r){a.cleanBasePlot(i.name,e,t,n,r)}},{"../../plots/plots":311}],342:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),a=e("tinycolor2"),r=e("../../components/color"),d={};function v(n){return function(e,t){return!!e&&(!!(e=a(e)).isValid()&&(e=r.addOpacity(e,e.getAlpha()),n[t]||(n[t]=e),e))}}function h(e,t){var n,r=JSON.stringify(e),i=t[r];if(!i){for(i=e.slice(),n=0;n<e.length;n++)i.push(a(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)i.push(a(e[n]).darken(20).toHexString());t[r]=i}return i}t.exports={calc:function(e,t){var n=[],r=(e=e._fullLayout).hiddenlabels||[],i=t.labels,a=t.marker.colors||[],o=t.values,s=t._length,l=t._hasValues&&s;if(t.dlabel)for(i=new Array(s),m=0;m<s;m++)i[m]=String(t.label0+m*t.dlabel);for(var c,u,d={},h=v(e["_"+t.type+"colormap"]),f=0,p=!1,m=0;m<s;m++){if(l){if(c=o[m],!y(c))continue;if((c=+c)<0)continue}else c=1;void 0!==(g=i[m])&&""!==g||(g=m);var g,_=d[g=String(g)];void 0===_?(d[g]=n.length,(u=-1!==r.indexOf(g))||(f+=c),n.push({v:c,label:g,color:h(a[m],g),i:m,pts:[m],hidden:u})):(p=!0,(_=n[_]).v+=c,_.pts.push(m),_.hidden||(f+=c),!1===_.color&&a[m]&&(_.color=h(a[m],g)))}return("funnelarea"===t.type?p:t.sort)&&n.sort(function(e,t){return t.v-e.v}),n[0]&&(n[0].vTotal=f),n},crossTraceCalc:function(e,t){var n=(n=(t||{}).type)||"pie",t=e._fullLayout,r=e.calcdata,i=t[n+"colorway"],a=t["_"+n+"colormap"];t["extend"+n+"colors"]&&(i=h(i,d));for(var o=0,s=0;s<r.length;s++){var l=r[s];if(l[0].trace.type===n)for(var c=0;c<l.length;c++){var u=l[c];!1===u.color&&(a[u.label]?u.color=a[u.label]:(a[u.label]=u.color=i[o%i.length],o++))}}},makePullColorFn:v,generateExtendedColors:h}},{"../../components/color":100,"fast-isnumeric":15,tinycolor2:65}],343:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../lib"),u=e("./attributes"),d=e("../../plots/domain").defaults,h=e("../bar/defaults").handleText;function f(e,t){var n=Array.isArray(e),r=c.isArrayOrTypedArray(t),i=Math.min(n?e.length:1/0,r?t.length:1/0);if((i=!isFinite(i)?0:i)&&r){for(var a,o=0;o<i;o++){var s=t[o];if(l(s)&&0<s){a=!0;break}}a||(i=0)}return{hasLabels:n,hasValues:r,len:i}}t.exports={handleLabelsAndValues:f,supplyDefaults:function(n,r,e,t){function i(e,t){return c.coerce(n,r,u,e,t)}var a,o,s=f(i("labels"),i("values")),l=s.len;r._hasLabels=s.hasLabels,r._hasValues=s.hasValues,!r._hasLabels&&r._hasValues&&(i("label0"),i("dlabel")),l?(r._length=l,i("marker.line.width")&&i("marker.line.color"),i("marker.colors"),i("scalegroup"),s=i("text"),(l=i("texttemplate"))||(a=i("textinfo",Array.isArray(s)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),(l||a&&"none"!==a)&&(o=i("textposition"),h(n,r,t,i,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),!Array.isArray(o)&&"auto"!==o&&"outside"!==o||i("automargin"),"inside"!==o&&"auto"!==o&&!Array.isArray(o)||i("insidetextorientation")),d(r,t,i),a=i("hole"),i("title.text")&&(o=i("title.position",a?"middle center":"top center"),a||"middle center"!==o||(r.title.position="top center"),c.coerceFont(i,"title.font",t.font)),i("sort"),i("direction"),i("rotation"),i("pull")):r.visible=!1}}},{"../../lib":230,"../../plots/domain":304,"../bar/defaults":327,"./attributes":340,"fast-isnumeric":15}],344:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},{"../../components/fx/helpers":136}],345:[function(e,t,n){"use strict";var r=e("../../lib");function i(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function(e,t){e=i((100*e).toPrecision(3));return r.numSeparate(e,t)+"%"},n.formatPieValue=function(e,t){e=i(e.toPrecision(10));return r.numSeparate(e,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r||""===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0},n.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},{"../../lib":230}],346:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":340,"./base_plot":341,"./calc":342,"./defaults":343,"./layout_attributes":347,"./layout_defaults":348,"./plot":349,"./style":350,"./style_one":351}],347:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],348:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return i.coerce(n,r,a,e,t)}e("hiddenlabels"),e("piecolorway",r.colorway),e("extendpiecolors")}},{"../../lib":230,"./layout_attributes":347}],349:[function(e,t,n){"use strict";var v=e("@plotly/d3"),l=e("../../plots/plots"),m=e("../../components/fx"),c=e("../../components/color"),b=e("../../components/drawing"),x=e("../../lib"),u=x.strScale,d=x.strTranslate,w=e("../../lib/svg_text_utils"),r=e("../bar/uniform_text"),T=r.recordMinTextSize,i=r.clearMinTextSize,o=e("../bar/constants").TEXTPAD,A=e("./helpers"),g=e("./event_data"),f=e("../../lib").isValidTextValue;function k(e,u,t){var d=t[0],h=d.trace,f=d.cx,p=d.cy;"_hasHoverLabel"in h||(h._hasHoverLabel=!1),"_hasHoverEvent"in h||(h._hasHoverEvent=!1),e.on("mouseover",function(e){var t,n,r,i,a,o,s,l=u._fullLayout,c=u._fullData[h.index];u._dragging||!1===l.hovermode||(t=c.hoverinfo,"all"===(t=Array.isArray(t)?m.castHoverinfo({hoverinfo:[A.castOption(t,e.pts)],_module:h._module},l,0):t)&&(t="label+text+value+percent+name"),(c.hovertemplate||"none"!==t&&"skip"!==t&&t)&&(n=e.rInscribed||0,r=f+e.pxmid[0]*(1-n),i=p+e.pxmid[1]*(1-n),s=l.separators,a=[],t&&-1!==t.indexOf("label")&&a.push(e.label),e.text=A.castOption(c.hovertext||c.text,e.pts),t&&-1!==t.indexOf("text")&&(o=e.text,x.isValidTextValue(o)&&a.push(o)),e.value=e.v,e.valueLabel=A.formatPieValue(e.v,s),t&&-1!==t.indexOf("value")&&a.push(e.valueLabel),e.percent=e.v/d.vTotal,e.percentLabel=A.formatPiePercent(e.percent,s),t&&-1!==t.indexOf("percent")&&a.push(e.percentLabel),s=(o=c.hoverlabel).font,m.loneHover({trace:h,x0:r-n*d.r,x1:r+n*d.r,y:i,text:a.join("<br>"),name:c.hovertemplate||-1!==t.indexOf("name")?c.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:A.castOption(o.bgcolor,e.pts)||e.color,borderColor:A.castOption(o.bordercolor,e.pts),fontFamily:A.castOption(s.family,e.pts),fontSize:A.castOption(s.size,e.pts),fontColor:A.castOption(s.color,e.pts),nameLength:A.castOption(o.namelength,e.pts),textAlign:A.castOption(o.align,e.pts),hovertemplate:A.castOption(c.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[g(e,c)]},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:u}),h._hasHoverLabel=!0),h._hasHoverEvent=!0,u.emit("plotly_hover",{points:[g(e,c)],event:v.event}))}),e.on("mouseout",function(e){var t=u._fullLayout,n=u._fullData[h.index],r=v.select(this).datum();h._hasHoverEvent&&(e.originalEvent=v.event,u.emit("plotly_unhover",{points:[g(r,n)],event:v.event}),h._hasHoverEvent=!1),h._hasHoverLabel&&(m.loneUnhover(t._hoverlayer.node()),h._hasHoverLabel=!1)}),e.on("click",function(e){var t=u._fullLayout,n=u._fullData[h.index];u._dragging||!1===t.hovermode||(u._hoverdata=[g(e,n)],m.click(u,v.event))})}function M(e,t,n){var r=A.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=A.castOption(e._input.textfont.color,t.pts));var i=A.castOption(e.insidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||n.family,n=A.castOption(e.insidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||n.size;return{color:r||c.contrast(t.color),family:i,size:n}}function a(e,t){for(var n,r,i,a=0;a<e.length;a++)(i=(r=e[a][0]).trace).title.text&&(n=i.title.text,i._meta&&(n=x.templateString(n,i._meta)),n=b.tester.append("text").attr("data-notex",1).text(n).call(b.font,i.title.font).call(w.convertToTspans,t),i=b.bBox(n.node(),!0),r.titleBox={width:i.width,height:i.height},n.remove())}function S(a,o,e){var s=e.r||o.rpx1,t=o.rInscribed;if(o.startangle===o.stopangle)return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0};var l=o.ring,n=1===l&&Math.abs(o.startangle-o.stopangle)===2*Math.PI,r=o.halfangle,i=o.midangle,c=e.trace.insidetextorientation,u="horizontal"===c,d="tangential"===c,e="radial"===c,h="auto"===c,f=[];if(!h){var p,m=function(e,t){var n,r,i;r=e,i=(n=o).startangle,n=n.stopangle,(r<i&&n<r||i<r&&r<n)&&(n=(r=Math.abs(e-o.startangle))<(n=Math.abs(e-o.stopangle))?r:n,(g="tan"===t?C(a,s,l,n,0):E(a,s,l,n,Math.PI/2)).textPosAngle=e,f.push(g))};if(u||d){for(p=4;-4<=p;p-=2)m(Math.PI*p,"tan");for(p=4;-4<=p;p-=2)m(Math.PI*(p+1),"tan")}if(u||e){for(p=4;-4<=p;p-=2)m(Math.PI*(p+1.5),"rad");for(p=4;-4<=p;p-=2)m(Math.PI*(p+.5),"rad")}}if(n||h||u){var g,u=Math.sqrt(a.width*a.width+a.height*a.height);if((g={scale:t*s*2/u,rCenter:1-t,rotate:0}).textPosAngle=(o.startangle+o.stopangle)/2,1<=g.scale)return g;f.push(g)}(h||e)&&((g=E(a,s,l,r,i)).textPosAngle=(o.startangle+o.stopangle)/2,f.push(g)),(h||d)&&((g=C(a,s,l,r,i)).textPosAngle=(o.startangle+o.stopangle)/2,f.push(g));for(var _=0,y=0,v=0;v<f.length;v++){var b=f[v].scale;if(y<b&&(y=b,_=v),!h&&1<=y)break}return f[_]}function E(e,t,n,r,i){t=Math.max(0,t-2*o);var a=e.width/e.height,n=p(a,r,t,n);return{scale:2*n/e.height,rCenter:s(a,n/t),rotate:h(i)}}function C(e,t,n,r,i){t=Math.max(0,t-2*o);var a=e.height/e.width,n=p(a,r,t,n);return{scale:2*n/e.width,rCenter:s(a,n/t),rotate:h(i+Math.PI/2)}}function s(e,t){return Math.cos(t)-e*t}function h(e){return(180/Math.PI*e+720)%180-90}function p(e,t,n,r){t=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(t*t+.5)+t),r/(Math.sqrt(e*e+r/2)+e))}function L(e,t){var n=t.pxmid[0],r=t.pxmid[1],t=e.width/2,e=e.height/2;return n<0&&(t*=-1),r<0&&(e*=-1),{scale:1,rCenter:1,rotate:0,x:t+Math.abs(e)*(0<t?1:-1)/2,y:e/(1+n*n/(r*r)),outside:!0}}function D(e,t){var n,r,i,a=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,i=y(a),-1!==a.title.position.indexOf("top")?(o.y-=(1+i)*e.r,s.ty-=e.titleBox.height):-1!==a.title.position.indexOf("bottom")&&(o.y+=(1+i)*e.r);var l,l=(l=e.r,c=e.trace.aspectratio,l/(void 0===c?1:c)),c=t.w*(a.domain.x[1]-a.domain.x[0])/2;return-1!==a.title.position.indexOf("left")?(c+=l,o.x-=(1+i)*l,s.tx+=e.titleBox.width/2):-1!==a.title.position.indexOf("center")?c*=2:-1!==a.title.position.indexOf("right")&&(c+=l,o.x+=(1+i)*l,s.tx-=e.titleBox.width/2),n=c/e.titleBox.width,r=_(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(n,r),tx:s.tx,ty:s.ty}}function _(e,t){var n=e.trace,n=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function y(e){var t,n=e.pull;if(!n)return 0;if(Array.isArray(n))for(t=n=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}function O(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r][0],a=i.trace,o=a.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);a.title.text&&"middle center"!==a.title.position&&(l-=_(i,t));o=l/2;"funnelarea"!==a.type||a.scalegroup||(o/=a.aspectratio),i.r=Math.min(s/2,o)/(1+y(a)),i.cx=t.l+t.w*(a.domain.x[1]+a.domain.x[0])/2,i.cy=t.t+t.h*(1-a.domain.y[0])-l/2,a.title.text&&-1!==a.title.position.indexOf("bottom")&&(i.cy-=_(i,t)),a.scalegroup&&-1===n.indexOf(a.scalegroup)&&n.push(a.scalegroup)}!function(e,t){for(var n,r,i,a,o,s,l=0;l<t.length;l++){var c,u=1/0,d=t[l];for(r=0;r<e.length;r++)n=e[r][0],(i=n.trace).scalegroup===d&&("pie"===i.type?a=n.r*n.r:"funnelarea"===i.type&&(1<i.aspectratio?(o=n.r,s=o/i.aspectratio):(s=n.r,o=s*i.aspectratio),o*=(1+i.baseratio)/2,a=o*s),u=Math.min(u,a/n.vTotal));for(r=0;r<e.length;r++)n=e[r][0],(i=n.trace).scalegroup===d&&(c=u*n.vTotal,"funnelarea"===i.type&&(c/=(1+i.baseratio)/2,c/=i.aspectratio),n.r=Math.sqrt(c))}}(e,n)}function P(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function R(e,t,n){var r,i,a,o,s,l,c=e._fullLayout,u=n.trace,d=u.texttemplate,h=u.textinfo;!d&&h&&"none"!==h&&(r=h.split("+"),s=(o=function(e){return-1!==r.indexOf(e)})("label"),a=o("text"),i=o("value"),h=o("percent"),o=c.separators,s=s?[t.label]:[],a&&(a=A.getFirstFilled(u.text,t.pts),f(a)&&s.push(a)),i&&s.push(A.formatPieValue(t.v,o)),h&&s.push(A.formatPiePercent(t.v/n.vTotal,o)),t.text=s.join("<br>")),d&&((o=x.castOption(u,t.i,"texttemplate"))?(s={label:(l=t).label,value:l.v,valueLabel:A.formatPieValue(l.v,c.separators),percent:l.v/n.vTotal,percentLabel:A.formatPiePercent(l.v/n.vTotal,c.separators),color:l.color,text:l.text,customdata:x.castOption(u,l.i,"customdata")},d=A.getFirstFilled(u.text,t.pts),!f(d)&&""!==d||(s.text=d),t.text=x.texttemplateString(o,s,e._fullLayout._d3locale,s,u._meta||{})):t.text="")}function I(e,t){var n=e.rotate*Math.PI/180,r=Math.cos(n),i=Math.sin(n),n=(t.left+t.right)/2,t=(t.top+t.bottom)/2;e.textX=n*r-t*i,e.textY=n*i+t*r,e.noCenter=!0}t.exports={plot:function(_,e){var y=_._fullLayout,o=y._size;i("pie",y),a(e,_),O(e,o);var t=x.makeTraceGroups(y._pielayer,e,"trace").each(function(p){var i=v.select(this),m=p[0],g=m.trace;!function(e){var t,n,r,i=e[0],a=i.r,o=i.trace,s=A.getRotationAngle(o.rotation),l=2*Math.PI/i.vTotal,c="px0",u="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;s+=l*e[t].v,l*=-1,c="px1",u="px0"}for(r=P(a,s),t=0;t<e.length;t++)(n=e[t]).hidden||(n[c]=r,n.startangle=s,s+=l*n.v/2,n.pxmid=P(a,s),n.midangle=s,s+=l*n.v/2,r=P(a,s),n.stopangle=s,n[u]=r,n.largeArc=n.v>i.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/i.vTotal,.5),n.ring=1-o.hole,n.rInscribed=function(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}(n,i))}(p),i.attr("stroke-linejoin","round"),i.each(function(){var e=v.select(this).selectAll("g.slice").data(p);e.enter().append("g").classed("slice",!0),e.exit().remove();var a=[[[],[]],[[],[]]],f=!1;e.each(function(l,c){var u,d,e,t,n,h,r;function i(e,t,n,r){var i=r*(t[0]-e[0]),e=r*(t[1]-e[1]);return"a"+r*m.r+","+r*m.r+" 0 "+l.largeArc+(n?" 1 ":" 0 ")+i+","+e}l.hidden?v.select(this).selectAll("path,g").remove():(l.pointNumber=l.i,l.curveNumber=g.index,a[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l),u=m.cx,d=m.cy,(e=(r=v.select(this)).selectAll("path.surface").data([l])).enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),r.call(k,_,p),!g.pull||0<(n=+A.castOption(g.pull,l.pts)||0)&&(u+=n*l.pxmid[0],d+=n*l.pxmid[1]),l.cxFinal=u,l.cyFinal=d,n=g.hole,l.v===m.vTotal?(t="M"+(u+l.px0[0])+","+(d+l.px0[1])+i(l.px0,l.pxmid,!0,1)+i(l.pxmid,l.px0,!0,1)+"Z",n?e.attr("d","M"+(u+n*l.px0[0])+","+(d+n*l.px0[1])+i(l.px0,l.pxmid,!1,n)+i(l.pxmid,l.px0,!1,n)+"Z"+t):e.attr("d",t)):(t=i(l.px0,l.px1,!0,1),n?e.attr("d","M"+(u+n*l.px1[0])+","+(d+n*l.px1[1])+i(l.px1,l.px0,!1,n)+"l"+(n=1-n)*l.px0[0]+","+n*l.px0[1]+t+"Z"):e.attr("d","M"+u+","+d+"l"+l.px0[0]+","+l.px0[1]+t+"Z")),R(_,l,m),h=A.castOption(g.textposition,l.pts),(r=r.selectAll("g.slicetext").data(l.text&&"none"!==h?[0]:[])).enter().append("g").classed("slicetext",!0),r.exit().remove(),r.each(function(){var e,t,n,r,i=x.ensureSingle(v.select(this),"text","",function(e){e.attr("data-notex",1)}),r=x.ensureUniformFontSize(_,"outside"===h?(e=g,t=l,o=y.font,n=A.castOption(e.outsidetextfont.color,t.pts)||A.castOption(e.textfont.color,t.pts)||o.color,r=A.castOption(e.outsidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||o.family,o=A.castOption(e.outsidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||o.size,{color:n,family:r,size:o}):M(g,l,y.font));i.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,r).call(w.convertToTspans,_);var a,o=b.bBox(i.node());"outside"===h?a=L(o,l):(a=S(o,l,m),"auto"===h&&a.scale<1&&(s=x.ensureUniformFontSize(_,g.outsidetextfont),i.call(b.font,s),a=L(o=b.bBox(i.node()),l)));var s=a.textPosAngle,s=void 0===s?l.pxmid:P(m.r,s);a.targetX=u+s[0]*a.rCenter+(a.x||0),a.targetY=d+s[1]*a.rCenter+(a.y||0),I(a,o),a.outside&&(s=a.targetY,l.yLabelMin=s-o.height/2,l.yLabelMid=s,l.yLabelMax=s+o.height/2,l.labelExtraX=0,l.labelExtraY=0,f=!0),a.fontSize=r.size,T(g.type,a,y),p[c].transform=a,i.attr("transform",x.getTextTransform(a))}))});var s,t,n,r=v.select(this).selectAll("g.titletext").data(g.title.text?[0]:[]);r.enter().append("g").classed("titletext",!0),r.exit().remove(),r.each(function(){var e,t=x.ensureSingle(v.select(this),"text","",function(e){e.attr("data-notex",1)}),n=g.title.text;g._meta&&(n=x.templateString(n,g._meta)),t.text(n).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,g.title.font).call(w.convertToTspans,_),e="middle center"===g.title.position?(e=m,n=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height),{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/n,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}):D(m,o),t.attr("transform",d(e.x,e.y)+u(Math.min(1,e.scale))+d(e.tx,e.ty))}),f&&function(e,c){var t,u,n,d,h,f,p,r,i,m,a,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function g(e,t){return t.pxmid[1]-e.pxmid[1]}for(u=0;u<2;u++)for(n=u?l:g,h=u?Math.max:Math.min,p=u?1:-1,t=0;t<2;t++){for(d=t?Math.max:Math.min,f=t?1:-1,(r=e[u][t]).sort(n),i=e[1-u][t],m=i.concat(r),o=[],a=0;a<r.length;a++)void 0!==r[a].yLabelMid&&o.push(r[a]);for(s=!1,a=0;u&&a<i.length;a++)if(void 0!==i[a].yLabelMid){s=i[a];break}for(a=0;a<o.length;a++){var _=a&&o[a-1];s&&!a&&(_=s),function(e,t){var n,r,i,t=(t=t||{}).labelExtraY+(u?t.yLabelMax:t.yLabelMin),a=u?e.yLabelMin:e.yLabelMax,o=u?e.yLabelMax:e.yLabelMin,s=e.cyFinal+h(e.px0[1],e.px1[1]),l=t-a;if(0<l*p&&(e.labelExtraY=l),Array.isArray(c.pull))for(n=0;n<m.length;n++)(r=m[n])===e||(A.castOption(c.pull,e.pts)||0)>=(A.castOption(c.pull,r.pts)||0)||(0<(e.pxmid[1]-r.pxmid[1])*p?0<(l=r.cyFinal+h(r.px0[1],r.px1[1])-a-e.labelExtraY)*p&&(e.labelExtraY+=l):0<(o+e.labelExtraY-s)*p&&(i=3*f*Math.abs(n-m.indexOf(e)),0<(i=r.cxFinal+d(r.px0[0],r.px1[0])+i-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*f&&(e.labelExtraX+=i)))}(o[a],_)}}}(a,g),s=g,e.each(function(e){var t,n,r,i,a,o=v.select(this);e.labelExtraX||e.labelExtraY?(a=o.select("g.slicetext text"),e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,a.attr("transform",x.getTextTransform(e.transform)),n="M"+(t=e.cxFinal+e.pxmid[0])+","+(e.cyFinal+e.pxmid[1]),r=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4,e.labelExtraX?(i=e.labelExtraX*e.pxmid[1]/e.pxmid[0],a=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]),Math.abs(i)>Math.abs(a)?n+="l"+a*e.pxmid[0]/e.pxmid[1]+","+a+"H"+(t+e.labelExtraX+r):n+="l"+e.labelExtraX+","+i+"v"+(a-i)+"h"+r):n+="V"+(e.yLabelMid+e.labelExtraY)+"h"+r,x.ensureSingle(o,"path","textline").call(c.stroke,s.outsidetextfont.color).attr({"stroke-width":Math.min(2,s.outsidetextfont.size/8),d:n,fill:"none"})):o.select("path.textline").remove()}),f&&g.automargin&&(t=b.bBox(i.node()),n=g.domain,r=o.w*(n.x[1]-n.x[0]),e=o.h*(n.y[1]-n.y[0]),r=(.5*r-m.r)/o.w,e=(.5*e-m.r)/o.h,l.autoMargin(_,"pie."+g.uid+".automargin",{xl:n.x[0]-r,xr:n.x[1]+r,yb:n.y[0]-e,yt:n.y[1]+e,l:Math.max(m.cx-m.r-t.left,0),r:Math.max(t.right-(m.cx+m.r),0),b:Math.max(t.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-t.top,0),pad:5}))})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=v.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:S,determineInsideTextFont:M,positionTitleOutside:D,prerenderTitles:a,layoutAreas:O,attachFxHandlers:k,computeTransform:I}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx":140,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../bar/constants":325,"../bar/uniform_text":339,"./event_data":344,"./helpers":345,"@plotly/d3":11}],350:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("./style_one"),a=e("../bar/uniform_text").resizeText;t.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");a(e,t,"pie"),t.each(function(e){var t=e[0].trace,e=r.select(this);e.style({opacity:t.opacity}),e.selectAll("path.surface").each(function(e){r.select(this).call(i,e,t)})})}},{"../bar/uniform_text":339,"./style_one":351,"@plotly/d3":11}],351:[function(e,t,n){"use strict";var i=e("../../components/color"),a=e("./helpers").castOption;t.exports=function(e,t,n){var r=n.marker.line,n=a(r.color,t.pts)||i.defaultLine,r=a(r.width,t.pts)||0;e.style("stroke-width",r).call(i.fill,t.color).call(i.stroke,n)}},{"../../components/color":100,"./helpers":345}],352:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;i.mergeArray(t.text,e,"tx"),i.mergeArray(t.texttemplate,e,"txt"),i.mergeArray(t.hovertext,e,"htx"),i.mergeArray(t.customdata,e,"data"),i.mergeArray(t.textposition,e,"tp"),t.textfont&&(i.mergeArrayCastPositive(t.textfont.size,e,"ts"),i.mergeArray(t.textfont.color,e,"tc"),i.mergeArray(t.textfont.family,e,"tf"));var r=t.marker;r&&(i.mergeArrayCastPositive(r.size,e,"ms"),i.mergeArrayCastPositive(r.opacity,e,"mo"),i.mergeArray(r.symbol,e,"mx"),i.mergeArray(r.color,e,"mc"),t=r.line,r.line&&(i.mergeArray(t.color,e,"mlc"),i.mergeArrayCastPositive(t.width,e,"mlw")),(r=r.gradient)&&"none"!==r.type&&(i.mergeArray(r.type,e,"mgt"),i.mergeArray(r.color,e,"mgc")))}},{"../../lib":230}],353:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../components/colorscale/attributes"),s=e("../../plots/font_attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../components/drawing"),u=e("./constants"),e=e("../../lib/extend").extendFlat;function d(){return{valType:"any",dflt:0,editType:"calc"}}function h(){return{valType:"any",editType:"calc"}}function f(){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:d(),yperiod:d(),xperiod0:h(),yperiod0:h(),xperiodalignment:f(),yperiodalignment:f(),xhoverformat:r("x"),yhoverformat:r("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:i({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:a({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:e({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:e({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:e({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},o("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":107,"../../components/drawing":122,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"./constants":357}],354:[function(e,t,n){"use strict";var D=e("fast-isnumeric"),O=e("../../lib"),P=e("../../plots/cartesian/axes"),R=e("../../plots/cartesian/align_period"),I=e("../../constants/numerical").BADNUM,p=e("./subtypes"),N=e("./colorscale_calc"),z=e("./arrays_to_calcdata"),F=e("./calc_selection");function j(e,t,n,r,i,a,o){var s=t._length,l=e._fullLayout,c=n._id,u=r._id,d=l._firstScatter[m(t)]===t.uid,h=(U(t,l,n,r)||{}).orientation,f=t.fill;n._minDtick=0;e={padded:!(r._minDtick=0)},l={padded:!0};o&&(e.ppad=l.ppad=o);s=s<2||i[0]!==i[s-1]||a[0]!==a[s-1];s&&("tozerox"===f||"tonextx"===f&&(d||"h"===h))?e.tozero=!0:(t.error_y||{}).visible||"tonexty"!==f&&"tozeroy"!==f&&(p.hasMarkers(t)||p.hasText(t))||(e.padded=!1,e.ppad=0),s&&("tozeroy"===f||"tonexty"===f&&(d||"v"===h))?l.tozero=!0:"tonextx"!==f&&"tozerox"!==f||(l.padded=!1),c&&(t._extremes[c]=P.findExtremes(n,i,e)),u&&(t._extremes[u]=P.findExtremes(r,a,l))}function B(e,t){if(p.hasMarkers(e)){var n=e.marker,r=1.6*(e.marker.sizeref||1),i="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)};if(O.isArrayOrTypedArray(n.size)){var a={type:"linear"};P.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=i(o[l]);return s}return i(n.size)}}function H(e,t){var n=m(t),e=e._firstScatter;e[n]||(e[n]=t.uid)}function m(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function U(e,t,n,r){e=e.stackgroup;if(e){e=t._scatterStackOpts[n._id+r._id][e],n="v"===e.orientation?r:n;return"linear"===n.type||"log"===n.type?e:void 0}}t.exports={calc:function(e,t){var n,r,i,a,o,s=e._fullLayout,l=P.getFromId(e,t.xaxis||"x"),c=P.getFromId(e,t.yaxis||"y"),u=l.makeCalcdata(t,"x"),d=c.makeCalcdata(t,"y"),h=R(t,l,"x",u),f=R(t,c,"y",d),p=t._length,m=new Array(p),g=t.ids,_=U(t,s,l,c),y=!1;H(s,t);var v,b="x",x="y";_?(O.pushUnique(_.traceIndices,t._expandedIndex),n="v"===_.orientation,v=n?(x="s","x"):(b="s","y"),a="interpolate"===_.stackgaps):j(e,t,l,c,h,f,B(t,p));for(var w=!!t.xperiodalignment,T=!!t.yperiodalignment,A=0;A<p;A++){var k=m[A]={},M=D(h[A]),S=D(f[A]);M&&S?(k[b]=h[A],k[x]=f[A],w&&(k.orig_x=u[A]),T&&(k.orig_y=d[A])):_&&(n?M:S)?(k[v]=(n?h:f)[A],k.gap=!0,a?(k.s=I,y=!0):k.s=0):k[b]=k[x]=I,g&&(k.id=String(g[A]))}if(z(m,t),N(e,t),F(m,t),_){for(A=0;A<m.length;)m[A][v]===I?m.splice(A,1):A++;if(O.sort(m,function(e,t){return e[v]-t[v]||e.i-t.i}),y){for(A=0;A<m.length-1&&m[A].gap;)A++;for(o=(o=m[A].s)||(m[A].s=0),r=0;r<A;r++)m[r].s=o;for(i=m.length-1;A<i&&m[i].gap;)i--;for(o=m[i].s,r=m.length-1;i<r;r--)m[r].s=o;for(;A<i;)if(m[++A].gap){for(r=A+1;m[r].gap;)r++;for(var E=m[A-1][v],C=m[A-1].s,L=(m[r].s-C)/(m[r][v]-E);A<r;)m[A].s=C+(m[A][v]-E)*L,A++}}}return m},calcMarkerSize:B,calcAxisExpansion:j,setFirstScatter:H,getStackOpts:U}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"./arrays_to_calcdata":352,"./calc_selection":355,"./colorscale_calc":356,"./subtypes":378,"fast-isnumeric":15}],355:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":230}],356:[function(e,t,n){"use strict";var r=e("../../components/colorscale/helpers").hasColorscale,i=e("../../components/colorscale/calc"),a=e("./subtypes");t.exports=function(e,t){a.hasLines(t)&&r(t,"line")&&i(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(t)&&(r(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"./subtypes":378}],357:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],358:[function(e,t,n){"use strict";var O=e("./calc");function P(e,t,n,r,i,a,o){i={i:null,gap:i[r]=!0,s:0};i[o]=n,e.splice(t,0,i),t&&n===e[t-1][o]?(r=e[t-1],i.s=r.s,i.i=r.i,i.gap=r.gap):a&&(i.s=(a=n,i=o,o=e[(n=t)-1],(n=e[n+1])?o?o.s+(n.s-o.s)*(a-o[i])/(n[i]-o[i]):n.s:o.s)),t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,r=t.yaxis,t=n._id+r._id,i=e._fullLayout._scatterStackOpts[t];if(i){var a,o,s,l,c,u,d,h,f,p,m,g=e.calcdata;for(m in i){var _,y=(_=i[m]).traceIndices;if(y.length){for(u="interpolate"===_.stackgaps,d=_.groupnorm,f="v"===_.orientation?(h="x","y"):(h="y","x"),p=new Array(y.length),x=0;x<p.length;x++)p[x]=!1;for(var v=g[y[0]],b=new Array(v.length),x=0;x<v.length;x++)b[x]=v[x][h];for(x=1;x<y.length;x++){for(A=g[y[x]],C=a=0;C<A.length;C++){for(s=A[C][h];s>b[a]&&a<b.length;a++)P(A,C,b[a],x,p,u,h),C++;if(s!==b[a]){for(o=0;o<x;o++)P(g[y[o]],a,s,o,p,u,h);b.splice(a,0,s)}a++}for(;a<b.length;a++)P(A,C,b[a],x,p,u,h),C++}var w=b.length;for(C=0;C<v.length;C++){for(l=v[C][f]=v[C].s,x=1;x<y.length;x++)(A=g[y[x]])[0].trace._rawLength=A[0].trace._length,A[0].trace._length=w,l+=A[C].s,A[C][f]=l;if(d)for(c=("fraction"===d?l:l/100)||1,x=0;x<y.length;x++){var T=g[y[x]][C];T[f]/=c,T.sNorm=T.s/c}}for(x=0;x<y.length;x++){var A,k=(A=g[y[x]])[0].trace,M=O.calcMarkerSize(k,k._rawLength),S=Array.isArray(M);if(M&&p[x]||S)for(var E=M,M=new Array(w),C=0;C<w;C++)M[C]=A[C].gap?0:S?E[A[C].i]:E;var L=new Array(w),D=new Array(w);for(C=0;C<w;C++)L[C]=A[C].x,D[C]=A[C].y;O.calcAxisExpansion(e,k,n,r,L,D,M),A[0].t.orientation=_.orientation}}}}}},{"./calc":354}],359:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=t-1;0<=i;i--){var a=e[i];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}}},{}],360:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry"),c=e("./attributes"),u=e("./constants"),d=e("./subtypes"),h=e("./xy_defaults"),f=e("./period_defaults"),p=e("./stack_defaults"),m=e("./marker_defaults"),g=e("./line_defaults"),_=e("./line_shape_defaults"),y=e("./text_defaults"),v=e("./fillcolor_defaults");t.exports=function(n,r,e,t){function i(e,t){return s.coerce(n,r,c,e,t)}var a,o=h(n,r,t,i);o||(r.visible=!1),r.visible&&(f(n,r,t,i),i("xhoverformat"),i("yhoverformat"),o=!(a=p(n,r,t,i))&&o<u.PTS_LINESONLY?"lines+markers":"lines",i("text"),i("hovertext"),i("mode",o),d.hasLines(r)&&(g(n,r,e,t,i),_(n,r,i),i("connectgaps"),i("line.simplify")),d.hasMarkers(r)&&m(n,r,e,t,i,{gradient:!0}),d.hasText(r)&&(i("texttemplate"),y(n,r,t,i)),o=[],(d.hasMarkers(r)||d.hasText(r))&&(i("cliponaxis"),i("marker.maxdisplayed"),o.push("points")),i("fill",a?a.fillDflt:"none"),"none"!==r.fill&&(v(n,r,e,i),d.hasLines(r)||_(n,r,i)),t=(r.line||{}).color,a=(r.marker||{}).color,"tonext"!==r.fill&&"toself"!==r.fill||o.push("fills"),i("hoveron",o.join("+")||"points"),"fills"!==r.hoveron&&i("hovertemplate"),(o=l.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||a||e,{axis:"y"}),o(n,r,t||a||e,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(r,i))}},{"../../lib":230,"../../registry":313,"./attributes":353,"./constants":357,"./fillcolor_defaults":361,"./line_defaults":366,"./line_shape_defaults":368,"./marker_defaults":372,"./period_defaults":373,"./stack_defaults":376,"./subtypes":378,"./text_defaults":379,"./xy_defaults":380}],361:[function(e,t,n){"use strict";var s=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r){var i,a,o=!1;t.marker&&(i=t.marker.color,a=(t.marker.line||{}).color,i&&!l(i)?o=i:a&&!l(a)&&(o=a)),r("fillcolor",s.addOpacity((t.line||{}).color||o||n,.5))}},{"../../components/color":100,"../../lib":230}],362:[function(e,t,n){"use strict";var a=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},i={_fullLayout:n},n=a.getFromTrace(i,t,"x"),t=a.getFromTrace(i,t,"y");return r.xLabel=a.tickText(n,n.c2l(e.x),!0).text,r.yLabel=a.tickText(t,t.c2l(e.y),!0).text,r}},{"../../plots/cartesian/axes":276}],363:[function(e,t,n){"use strict";var a=e("../../components/color"),o=e("./subtypes");t.exports=function(e,t){var n;if("lines"===e.mode)return(n=e.line.color)&&a.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var r=t.mcc||(e.marker||{}).color,i=t.mlcc||((e.marker||{}).line||{}).color;return(i=r&&a.opacity(r)?r:i&&a.opacity(i)&&(t.mlw||((e.marker||{}).line||{}).width)?i:"")?a.opacity(i)<.3?a.addOpacity(i,.3):i:(n=(e.line||{}).color)&&a.opacity(n)&&o.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":100,"./subtypes":378}],364:[function(e,t,n){"use strict";var P=e("../../lib"),R=e("../../components/fx"),I=e("../../registry"),N=e("./get_trace_color"),z=e("../../components/color"),F=P.fillText;t.exports=function(e,t,n,r){var i=e.cd,a=i[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),c=s.c2p(n),u=[l,c],d=a.hoveron||"",h=-1!==a.mode.indexOf("markers")?3:.5;if(-1!==d.indexOf("points")){var f=function(e){var t=Math.max(h,e.mrc||0),n=o.c2p(e.x)-l,e=s.c2p(e.y)-c;return Math.max(Math.sqrt(n*n+e*e)-t,1-h/t)},p=R.getDistanceFunction(r,function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(o.c2p(e.x)-l);return void 0!==e.orig_x&&(r+=o.c2p(e.orig_x)-o.c2p(e.x)),r<t?n*r/t:r-t+n},function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(s.c2p(e.y)-c);return void 0!==e.orig_y&&(r+=s.c2p(e.orig_y)-s.c2p(e.y)),r<t?n*r/t:r-t+n},f);if(R.getClosest(i,p,e),!1!==e.index){var m=i[e.index],g=o.c2p(m.x,!0),t=s.c2p(m.y,!0),n=m.mrc||1;e.index=m.i;r=i[0].t.orientation,p=r&&(m.sNorm||m.s),i="h"===r?p:void 0!==m.orig_x?m.orig_x:m.x,p="v"===r?p:void 0!==m.orig_y?m.orig_y:m.y;return P.extendFlat(e,{color:N(a,m),x0:g-n,x1:g+n,xLabelVal:i,y0:t-n,y1:t+n,yLabelVal:p,spikeDistance:f(m),hovertemplate:a.hovertemplate}),F(m,a,e),I.getComponentMethod("errorbars","hoverInfo")(m,a,e),[e]}}if(-1!==d.indexOf("fills")&&a._polygons){var _,y,v,b,x,w,T,A=a._polygons,k=[],M=!1,S=1/0,E=-1/0,C=1/0,L=-1/0;for(O=0;O<A.length;O++)(y=A[O]).contains(u)&&(M=!M,k.push(y),C=Math.min(C,y.ymin),L=Math.max(L,y.ymax));if(M){for(var D=((C=Math.max(C,0))+(L=Math.min(L,s._length)))/2,O=0;O<k.length;O++)for(v=k[O].pts,_=1;_<v.length;_++)D<(w=v[_-1][1])!=D<=(T=v[_][1])&&(b=v[_-1][0],x=v[_][0],T-w&&(w=b+(x-b)*(D-w)/(T-w),S=Math.min(S,w),E=Math.max(E,w)));S=Math.max(S,0),E=Math.min(E,o._length),d=z.defaultLine;return z.opacity(a.fillcolor)?d=a.fillcolor:z.opacity((a.line||{}).color)&&(d=a.line.color),P.extendFlat(e,{distance:e.maxHoverDistance,x0:S,x1:E,y0:D,y1:D,color:d,hovertemplate:!1}),delete e.index,a.text&&!Array.isArray(a.text)?e.text=String(a.text):e.text=a.name,[e]}}}},{"../../components/color":100,"../../components/fx":140,"../../lib":230,"../../registry":313,"./get_trace_color":363}],365:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":290,"./arrays_to_calcdata":352,"./attributes":353,"./calc":354,"./cross_trace_calc":358,"./cross_trace_defaults":359,"./defaults":360,"./format_labels":362,"./hover":364,"./marker_colorbar":371,"./plot":374,"./select":375,"./style":377,"./subtypes":378}],366:[function(e,t,n){"use strict";var s=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,i,a){var o=(e.marker||{}).color;i("line.color",n),l(e,"line")?c(e,t,r,i,{prefix:"line.",cLetter:"c"}):i("line.color",!s(o)&&o||n),i("line.width"),(a||{}).noDash||i("line.dash")}},{"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],367:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),ae=r.BADNUM,r=r.LOG_CLIP,oe=r+.5,se=r-.5,le=e("../../lib"),ce=le.segmentsIntersect,ue=le.constrain,de=e("./constants");t.exports=function(r,i){var e,t,n,a,o,s,l,c,u,d,h,f,p,m,g,_,y=i.xaxis,v=i.yaxis,b="log"===y.type,x="log"===v.type,w=y._length,T=v._length,A=i.connectGaps,k=i.baseTolerance,M=i.shape,S="linear"===M,E=i.fill&&"none"!==i.fill,C=[],L=de.minTolerance,D=r.length,O=new Array(D),P=0;function R(e){var t=r[e];if(!t)return!1;var n=i.linearized?y.l2p(t.x):y.c2p(t.x),e=i.linearized?v.l2p(t.y):v.c2p(t.y);if(n===ae){if((n=b?y.c2p(t.x,!0):n)===ae)return!1;x&&e===ae&&(n*=Math.abs(y._m*T*(0<y._m?oe:se)/(v._m*w*(0<v._m?oe:se)))),n*=1e3}if(e===ae){if((e=x?v.c2p(t.y,!0):e)===ae)return!1;e*=1e3}return[n,e]}function I(e,t,n,r){var i=n-e,a=r-t,n=.5-e,r=.5-t,e=i*i+a*a,t=i*n+a*r;if(0<t&&t<e){i=n*a-r*i;return i*i<e?1:void 0}}function N(e,t){var n=e[0]/w,r=e[1]/T,e=Math.max(0,-n,n-1,-r,r-1);return(e=e&&void 0!==g&&I(n,r,g,_)?0:e)&&t&&I(n,r,t[0]/w,t[1]/T)&&(e=0),(1+de.toleranceGrowth*e)*k}function z(e,t){var n=e[0]-t[0],t=e[1]-t[1];return Math.sqrt(n*n+t*t)}var F,j,B,H,U,V,q,Y=de.maxScreensAway,G=-w*Y,W=w*(1+Y),X=-T*Y,Z=T*(1+Y),J=[[G,X,W,X],[W,X,W,Z],[W,Z,G,Z],[G,Z,G,X]];function $(e){if(e[0]<G||e[0]>W||e[1]<X||e[1]>Z)return[ue(e[0],G,W),ue(e[1],X,Z)]}function Q(e,t){return e[0]===t[0]&&(e[0]===G||e[0]===W)||e[1]===t[1]&&(e[1]===X||e[1]===Z)}function K(a,o,s){return function(e,t){var n=$(e),r=$(t),i=[];if(n&&r&&Q(n,r))return i;n&&i.push(n),r&&i.push(r);t=2*le.constrain((e[a]+t[a])/2,o,s)-((n||e)[a]+(r||t)[a]);return t&&((n&&r?0<t==n[a]>r[a]?n:r:n||r)[a]+=t),i}}function ee(e){var t,n,r=e[0],i=e[1],a=r===O[P-1][0],o=i===O[P-1][1];a&&o||(1<P?(t=r===O[P-2][0],n=i===O[P-2][1],a&&(r===G||r===W)&&t?n?P--:O[P-1]=e:o&&(i===X||i===Z)&&n?t?P--:O[P-1]=e:O[P++]=e):O[P++]=e)}function te(e){O[P-1][0]!==e[0]&&O[P-1][1]!==e[1]&&ee([B,H]),ee(e),U=null,B=H=0}function ne(e){var t,n,r;g=e[0]/w,_=e[1]/T,F=e[0]<G?G:e[0]>W?W:0,j=e[1]<X?X:e[1]>Z?Z:0,F||j?(P?U?1<(n=q(U,e)).length&&(te(n[0]),O[P++]=n[1]):(V=q(O[P-1],e)[0],O[P++]=V):O[P++]=[F||e[0],j||e[1]],r=O[P-1],F&&j&&(r[0]!==F||r[1]!==j)?(U&&(B!==F&&H!==j?ee(B&&H?(t=U,n=e[0]-t[0],r=(e[1]-t[1])/n,0<(t[1]*e[0]-e[1]*t[0])/n?[0<r?G:W,Z]:[0<r?W:G,X]):[B||F,H||j]):B&&H&&ee([B,H])),ee([F,j])):B-F&&H-j&&ee([F||B,j||H]),U=e,B=F,H=j):(U&&te(q(U,e)[0]),O[P++]=e)}for("linear"===M||"spline"===M?q=function(e,t){for(var n=[],r=0,i=0;i<4;i++){var a=J[i],a=ce(e[0],e[1],t[0],t[1],a[0],a[1],a[2],a[3]);a&&(!r||1<Math.abs(a.x-n[0][0])||1<Math.abs(a.y-n[0][1]))&&(a=[a.x,a.y],r&&z(a,e)<z(n[0],e)?n.unshift(a):n.push(a),r++)}return n}:"hv"===M||"vh"===M?q=function(e,t){var n=[],e=$(e),t=$(t);return e&&t&&Q(e,t)||(e&&n.push(e),t&&n.push(t)),n}:"hvh"===M?q=K(0,G,W):"vhv"===M&&(q=K(1,X,Z)),e=0;e<D;e++)if(t=R(e)){for(P=0,U=null,ne(t),e++;e<D;e++){if(!(a=R(e))){if(A)continue;break}if(S&&i.simplify){var re=R(e+1),ie=z(a,t);if(E&&(0===P||P===D-1)||!(ie<N(a,re)*L)){for(o=t,l=!(c=[(a[d=f=p=0]-t[0])/(u=ie),(a[1]-t[1])/ie]),n=a,e++;e<r.length;e++){if(s=re,re=R(e+1),!s){if(A)continue;break}if(m=(h=[s[0]-t[0],s[1]-t[1]])[0]*c[1]-h[1]*c[0],f=Math.min(f,m),(p=Math.max(p,m))-f>N(s,re))break;n=s,u<(h=h[0]*c[0]+h[1]*c[1])?(u=h,a=s,l=!1):h<d&&(d=h,o=s,l=!0)}if(l?(ne(a),n!==o&&ne(o)):(o!==t&&ne(o),n!==a&&ne(a)),ne(n),e>=r.length||!s)break;ne(s),t=s}}else ne(a)}U&&ee([B||U[0],H||U[1]]),C.push(O.slice(0,P))}return C}},{"../../constants/numerical":210,"../../lib":230,"./constants":357}],368:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],369:[function(e,t,n){"use strict";var m={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){for(var r,i,a,o,s={},l=!1,c=-1,u=0,d=-1,h=0;h<n.length;h++)(i=(r=n[h][0].trace).stackgroup||"")?i in s?o=s[i]:(o=s[i]=u,u++):r.fill in m&&0<=d?o=d:(o=d=u,u++),o<c&&(l=!0),r._groupIndex=c=o;var f=n.slice();l&&f.sort(function(e,t){e=e[0].trace,t=t[0].trace;return e._groupIndex-t._groupIndex||e.index-t.index});var p={};for(h=0;h<f.length;h++)i=(r=f[h][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in m&&(a=p[i],r._prevtrace=a||null,a&&(a._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),p[i]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return f}},{}],370:[function(e,t,n){"use strict";var i=e("fast-isnumeric");t.exports=function(e){var e=e.marker,t=e.sizeref||1,n=e.sizemin||0,r="area"===e.sizemode?function(e){return Math.sqrt(e/t)}:function(e){return e/t};return function(e){e=r(e/2);return i(e)&&0<e?Math.max(e,n):0}}},{"fast-isnumeric":15}],371:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],372:[function(e,t,n){"use strict";var l=e("../../components/color"),c=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),d=e("./subtypes");t.exports=function(e,t,n,r,i,a){var o=d.isBubble(e),s=(e.line||{}).color;a=a||{},s&&(n=s),i("marker.symbol"),i("marker.opacity",o?.7:1),i("marker.size"),i("marker.color",n),c(e,"marker")&&u(e,t,r,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:o?l.background:l.defaultLine),c(e,"marker.line")&&u(e,t,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",o?1:0)),o&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"./subtypes":378}],373:[function(e,t,n){"use strict";var r=e("../../lib").dateTick0,i=e("../../constants/numerical").ONEWEEK;function o(e,t){return r(t,e%i==0?1:0)}t.exports=function(e,t,n,r,i){var a;!(i=i||{x:!0,y:!0}).x||(a=r("xperiod"))&&(r("xperiod0",o(a,t.xcalendar)),r("xperiodalignment")),!i.y||(i=r("yperiod"))&&(r("yperiod0",o(i,t.ycalendar)),r("yperiodalignment"))}},{"../../constants/numerical":210,"../../lib":230}],374:[function(e,t,n){"use strict";var U=e("@plotly/d3"),V=e("../../registry"),q=e("../../lib"),Y=q.ensureSingle,G=q.identity,W=e("../../components/drawing"),X=e("./subtypes"),Z=e("./line_points"),h=e("./link_traces"),J=e("../../lib/polygon").tester;function f(h,e,f,n,t,r,i){var a,o,s,l,c,u,d;o=e,w=n,x=t,e=(b=f).xaxis,b=b.yaxis,u=U.extent(q.simpleMap(e.range,e.r2c)),d=U.extent(q.simpleMap(b.range,b.r2c)),e=w[0].trace,!X.hasMarkers(e)||0!==(b=e.marker.maxdisplayed)&&(e=w.filter(function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=d[0]&&e.y<=d[1]}),s=Math.ceil(e.length/b),l=0,x.forEach(function(e,t){e=e[0].trace;X.hasMarkers(e)&&0<e.marker.maxdisplayed&&t<o&&l++}),c=Math.round(l*s/3+Math.floor(l/3)*s/7.1),w.forEach(function(e){delete e.vis}),e.forEach(function(e,t){0===Math.round((t+c)%s)&&(e.vis=!0)}));var p=!!i&&0<i.duration;function m(e){return p?e.transition():e}var g=f.xaxis,_=f.yaxis,y=n[0].trace,v=y.line,t=U.select(r),b=Y(t,"g","errorbars"),x=Y(t,"g","lines"),w=Y(t,"g","points"),e=Y(t,"g","text");if(V.getComponentMethod("errorbars","plot")(h,b,f,i),!0===y.visible){m(t).style("opacity",y.opacity);var T=y.fill.charAt(y.fill.length-1);"x"!==T&&"y"!==T&&(T=""),n[0][f.isRangePlot?"nodeRangePlot3":"node3"]=t;var A,k,r="",b=[],i=y._prevtrace;i&&(r=i._prevRevpath||"",I=i._nextFill,b=i._polygons);var M,S,E,C,L,D,O="",P="",R=[],t=q.noop,i=y._ownFill;if(X.hasLines(y)||"none"!==y.fill){for(I&&I.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(v.shape)?(M=W.steps(v.shape),S=W.steps(v.shape.split("").reverse().join(""))):M=S="spline"===v.shape?function(e){var t=e[e.length-1];return 1<e.length&&e[0][0]===t[0]&&e[0][1]===t[1]?W.smoothclosed(e.slice(1),v.smoothing):W.smoothopen(e,v.smoothing)}:function(e){return"M"+e.join("L")},E=function(e){return S(e.reverse())},R=Z(n,{xaxis:g,yaxis:_,connectGaps:y.connectgaps,baseTolerance:Math.max(v.width||1,3)/4,shape:v.shape,simplify:v.simplify,fill:y.fill}),D=y._polygons=new Array(R.length),a=0;a<R.length;a++)y._polygons[a]=J(R[a]);R.length&&(C=R[0][0],L=(L=R[R.length-1])[L.length-1]),t=function(t){return function(e){A=M(e),k=E(e),P=O?T?(O+="L"+A.substr(1),k+("L"+P.substr(1))):(O+="Z"+A,k+"Z"+P):(O=A,k),X.hasLines(y)&&1<e.length&&((e=U.select(this)).datum(n),t?m(e.style("opacity",0).attr("d",A).call(W.lineGroupStyle)).style("opacity",1):((e=m(e)).attr("d",A),W.singleLineStyle(n,e)))}}}x=x.selectAll(".js-line").data(R);m(x.exit()).style("opacity",0).remove(),x.each(t(!1)),x.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(W.lineGroupStyle).each(t(!0)),W.setClipUrl(x,f.layerClipId,h),R.length?(i?(i.datum(n),C&&L&&(T?("y"===T?C[1]=L[1]=_.c2p(0,!0):"x"===T&&(C[0]=L[0]=g.c2p(0,!0)),m(i).attr("d","M"+L+"L"+C+"L"+O.substr(1)).call(W.singleFillStyle)):m(i).attr("d",O+"Z").call(W.singleFillStyle))):I&&("tonext"===y.fill.substr(0,6)&&O&&r?(("tonext"===y.fill?m(I).attr("d",O+"Z"+r+"Z"):m(I).attr("d",O+"L"+r.substr(1)+"Z")).call(W.singleFillStyle),y._polygons=y._polygons.concat(b)):(N(I),y._polygons=null)),y._prevRevpath=P,y._prevPolygons=D):(i?N(i):I&&N(I),y._polygons=y._prevRevpath=y._prevPolygons=null),w.datum(n),e.datum(n),function(e,t,n){var r,i,a=n[0].trace,o=X.hasMarkers(a),s=X.hasText(a),l=function(e){if(e.ids)return B}(a),c=H,u=H;(o||s)&&(r=G,n=(i=a.stackgroup)&&"infer zero"===h._fullLayout._scatterStackOpts[g._id+_._id][i].stackgaps,a.marker.maxdisplayed||a._needsCull?r=n?F:z:i&&!n&&(r=j),o&&(c=r),s&&(u=r));var d,c=(e=e.selectAll("path.point").data(c,l)).enter().append("path").classed("point",!0);p&&c.call(W.pointStyle,a,h).call(W.translatePoints,g,_).style("opacity",0).transition().style("opacity",1),e.order(),o&&(d=W.makePointStyleFns(a)),e.each(function(e){var t=U.select(this),n=m(t);W.translatePoint(e,n,g,_)?(W.singlePointStyle(e,n,a,d,h),f.layerClipId&&W.hideOutsideRangePoint(e,n,g,_,a.xcalendar,a.ycalendar),a.customdata&&t.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):n.remove()}),(p?e.exit().transition().style("opacity",0):e.exit()).remove(),(e=t.selectAll("g").data(u,l)).enter().append("g").classed("textpoint",!0).append("text"),e.order(),e.each(function(e){var t=U.select(this),n=m(t.select("text"));W.translatePoint(e,n,g,_)?f.layerClipId&&W.hideOutsideRangePoint(e,t,g,_,a.xcalendar,a.ycalendar):t.remove()}),e.selectAll("text").call(W.textPointStyle,a,h).each(function(e){var t=g.c2p(e.x),n=_.c2p(e.y);U.select(this).selectAll("tspan.line").each(function(){m(U.select(this)).attr({x:t,y:n})})}),e.exit().remove()}(w,e,n);var I=!1===y.cliponaxis?null:f.layerClipId;W.setClipUrl(w,I,h),W.setClipUrl(e,I,h)}function N(e){m(e).attr("d","M0,0Z")}function z(e){return e.filter(function(e){return!e.gap&&e.vis})}function F(e){return e.filter(function(e){return e.vis})}function j(e){return e.filter(function(e){return!e.gap})}function B(e){return e.id}function H(){return!1}}t.exports=function(n,r,e,t,i,a){var o,s,l,c=!i,u=!!i&&0<i.duration,d=h(n,r,e),e=t.selectAll("g.trace").data(d,function(e){return e[0].trace.uid});e.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),e.order(),s=n,l=r,e.each(function(e){var t=Y(U.select(this),"g","fills");W.setClipUrl(t,l.layerClipId,s);var n=e[0].trace,e=[];n._ownfill&&e.push("_ownFill"),n._nexttrace&&e.push("_nextFill");e=t.selectAll("g").data(e,G);e.enter().append("g"),e.exit().each(function(e){n[e]=null}).remove(),e.order().each(function(e){n[e]=Y(U.select(this),"path","js-fill")})}),u?(a&&(o=a()),U.transition().duration(i.duration).ease(i.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){t.selectAll("g.trace").each(function(e,t){f(n,t,r,e,d,this,i)})})):e.each(function(e,t){f(n,t,r,e,d,this,i)}),c&&e.exit().remove(),t.selectAll("path:not([d])").remove()}},{"../../components/drawing":122,"../../lib":230,"../../lib/polygon":242,"../../registry":313,"./line_points":367,"./link_traces":369,"./subtypes":378,"@plotly/d3":11}],375:[function(e,t,n){"use strict";var d=e("./subtypes");t.exports=function(e,t){var n,r,i,a,o=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=o[0].trace;if(!d.hasMarkers(u)&&!d.hasText(u))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],i=s.c2p(r.x),a=l.c2p(r.y),null!==r.i&&t.contains([i,a],!1,n,e)?(c.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return c}},{"./subtypes":378}],376:[function(e,t,n){"use strict";var _=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,r){var i=n._scatterStackOpts,a=r("stackgroup");if(a){var o=t.xaxis+t.yaxis,n=i[o],s=(n=n||(i[o]={}))[a],l=!1;s?s.traces.push(t):(s=n[a]={traceIndices:[],traces:[t]},l=!0);for(var c={orientation:t.x&&!t.y?"h":"v"},u=0;u<_.length;u++){var d=_[u],h=d+"Found";if(!s[h]){var f=void 0!==e[d],p="orientation"===d;if((f||l)&&(s[d]=r(d,c[d]),p&&(s.fillDflt="h"===s[d]?"tonextx":"tonexty"),f&&(s[h]=!0,!l&&(delete s.traces[0][d],p))))for(var m=0;m<s.traces.length-1;m++){var g=s.traces[m];g._input.fill!==g.fill&&(g.fill=s.fillDflt)}}}return s}}},{}],377:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../../components/drawing"),a=e("../../registry");function o(e,t,n){i.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){i.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity}),e.selectAll("g.points").each(function(e){o(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(i.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),a.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(e,t,n){(t=t[0].trace).selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),t),i.selectedTextStyle(n.selectAll("text"),t)):(o(n,t,e),s(n,t,e))}}},{"../../components/drawing":122,"../../registry":313,"@plotly/d3":11}],378:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":230}],379:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t,n,r,i){i=i||{},r("textposition"),a.coerceFont(r,"textfont",n.font),i.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":230}],380:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");t.exports=function(e,t,n,r){var i,a=r("x"),o=r("y");if(l.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),a){a=s.minRowLength(a);o?i=Math.min(a,s.minRowLength(o)):(i=a,r("y0"),r("dy"))}else{if(!o)return 0;i=s.minRowLength(o),r("x0"),r("dx")}return t._length=i}},{"../../lib":230,"../../registry":313}],381:[function(e,t,n){"use strict";var u=e("../plots/cartesian/axes"),p=e("../lib"),f=e("../plot_api/plot_schema"),m=e("./helpers").pointsAccessorFunction,d=e("../constants/numerical").BADNUM;n.moduleType="transform",n.name="aggregate";var g=n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},_=g.aggregations;function y(e,t,n,r){if(r.enabled){for(var i=r.target,a=p.nestedProperty(t,i),o=a.get(),s=function(c,e){var t=c.func,u=e.d2c,l=e.c2d;switch(t){case"count":return h;case"first":return v;case"last":return b;case"sum":return function(e,t){for(var n=0,r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&(n+=i)}return l(n)};case"avg":return function(e,t){for(var n=0,r=0,i=0;i<t.length;i++){var a=u(e[t[i]]);a!==d&&(n+=a,r++)}return r?l(n/r):d};case"min":return function(e,t){for(var n=1/0,r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&(n=Math.min(n,i))}return n===1/0?d:l(n)};case"max":return function(e,t){for(var n=-1/0,r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&(n=Math.max(n,i))}return n===-1/0?d:l(n)};case"range":return function(e,t){for(var n=1/0,r=-1/0,i=0;i<t.length;i++){var a=u(e[t[i]]);a!==d&&(n=Math.min(n,a),r=Math.max(r,a))}return r===-1/0||n===1/0?d:l(r-n)};case"change":return function(e,t){var n=u(e[t[0]]),t=u(e[t[t.length-1]]);return n===d||t===d?d:l(t-n)};case"median":return function(e,t){for(var n=[],r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&n.push(i)}if(!n.length)return d;n.sort(p.sorterAsc);var a=(n.length-1)/2;return l((n[Math.floor(a)]+n[Math.ceil(a)])/2)};case"mode":return function(e,t){for(var n={},r=0,i=d,a=0;a<t.length;a++){var o,s=u(e[t[a]]);s===d||r<(o=n[s]=(n[s]||0)+1)&&(r=o,i=s)}return r?l(i):d};case"rms":return function(e,t){for(var n=0,r=0,i=0;i<t.length;i++){var a=u(e[t[i]]);a!==d&&(n+=a*a,r++)}return r?l(Math.sqrt(n/r)):d};case"stddev":return function(e,t){for(var n=0,r=0,i=1,a=d,o=0;o<t.length&&a===d;o++)a=u(e[t[o]]);if(a===d)return d;for(;o<t.length;o++){var s=u(e[t[o]]);s!==d&&(n+=s=s-a,r+=s*s,i++)}var l="sample"===c.funcmode?i-1:i;return l?Math.sqrt((r-n*n/i)/l):0}}}(r,u.getDataConversions(e,t,i,o)),l=new Array(n.length),c=0;c<n.length;c++)l[c]=s(o,n[c]);a.set(l),"count"===r.func&&p.pushUnique(t._arrayAttrs,i)}}function h(e,t){return t.length}function v(e,t){return e[t[0]]}function b(e,t){return e[t[t.length-1]]}n.supplyDefaults=function(n,e){var r={};function t(e,t){return p.coerce(n,r,g,e,t)}if(!t("enabled"))return r;for(var i=f.findArrayAttributes(e),a={},o=0;o<i.length;o++)a[i[o]]=1;e=t("groups");if(!Array.isArray(e)){if(!a[e])return r.enabled=!1,r;a[e]=0}var s=n.aggregations||[],l=r.aggregations=new Array(s.length);function c(e,t){return p.coerce(s[o],u,_,e,t)}for(o=0;o<s.length;o++){var u={_index:o},d=c("target"),h=c("func");c("enabled")&&d&&(a[d]||"count"===h&&void 0===a[d])?("stddev"===h&&c("funcmode"),a[d]=0,l[o]=u):l[o]={enabled:!1,_index:o}}for(o=0;o<i.length;o++)a[i[o]]&&l.push({target:i[o],func:_.func.dflt,enabled:!0,_index:-1});return r},n.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,i=p.getTargetArray(t,{target:r});if(i){var a,o,s={},l={},c=[],u=m(t.transforms,n),d=i.length;for(t._length&&(d=Math.min(d,t._length)),f=0;f<d;f++)void 0===(o=s[a=i[f]])?(s[a]=c.length,c.push([f]),l[s[a]]=u(f)):(c[o].push(f),l[s[a]]=(l[s[a]]||[]).concat(u(f)));n._indexToPoints=l;for(var h=n.aggregations,f=0;f<h.length;f++)y(e,t,c,h[f]);"string"==typeof r&&y(e,t,c,{target:r,func:"first",enabled:!0}),t._length=c.length}}}},{"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plots/cartesian/axes":276,"./helpers":384}],382:[function(e,t,i){"use strict";var v=e("../lib"),a=e("../registry"),b=e("../plots/cartesian/axes"),x=e("./helpers").pointsAccessorFunction,e=e("../constants/filter_ops"),w=e.COMPARISON_OPS,T=e.INTERVAL_OPS,A=e.SET_OPS;i.moduleType="transform",i.name="filter",i.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(w).concat(T).concat(A),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},i.supplyDefaults=function(n){var r={};function e(e,t){return v.coerce(n,r,i.attributes,e,t)}if(e("enabled")){var t=e("target");if(v.isArrayOrTypedArray(t)&&0===t.length)return r.enabled=!1,r;e("preservegaps"),e("operation"),e("value");t=a.getComponentMethod("calendars","handleDefaults");t(n,r,"valuecalendar",null),t(n,r,"targetcalendar",null)}return r},i.calcTransform=function(e,r,t){if(t.enabled){var n=v.getTargetArray(r,t);if(n){var i=t.target,a=n.length;r._length&&(a=Math.min(a,r._length));var o,s=t.targetcalendar,l=r._arrayAttrs,c=t.preservegaps;"string"!=typeof i||(o=v.nestedProperty(r,i+"calendar").get())&&(s=o);var u,d=function(t,n,r){var i=t.operation,e=t.value,a=Array.isArray(e);function o(e){return-1!==e.indexOf(i)}function s(e){return n(e,0,t.valuecalendar)}function l(e){return n(e,0,r)}var c;o(w)?c=s(a?e[0]:e):o(T)?c=a?[s(e[0]),s(e[1])]:[s(e),s(e)]:o(A)&&(c=a?e.map(s):[s(e)]);switch(i){case"=":return function(e){return l(e)===c};case"!=":return function(e){return l(e)!==c};case"<":return function(e){return l(e)<c};case"<=":return function(e){return l(e)<=c};case">":return function(e){return l(e)>c};case">=":return function(e){return l(e)>=c};case"[]":return function(e){e=l(e);return e>=c[0]&&e<=c[1]};case"()":return function(e){e=l(e);return e>c[0]&&e<c[1]};case"[)":return function(e){e=l(e);return e>=c[0]&&e<c[1]};case"(]":return function(e){e=l(e);return e>c[0]&&e<=c[1]};case"][":return function(e){e=l(e);return e<=c[0]||e>=c[1]};case")(":return function(e){e=l(e);return e<c[0]||e>c[1]};case"](":return function(e){e=l(e);return e<=c[0]||e>c[1]};case")[":return function(e){e=l(e);return e<c[0]||e>=c[1]};case"{}":return function(e){return-1!==c.indexOf(l(e))};case"}{":return function(e){return-1===c.indexOf(l(e))}}}(t,b.getDataToCoordFunc(e,r,i,n),s),h={},f={},p=0,m=c?(u=function(e){h[e.astr]=v.extendDeep([],e.get()),e.set(new Array(a))},function(e,t){var n=h[e.astr][t];e.get()[t]=n}):(u=function(e){h[e.astr]=v.extendDeep([],e.get()),e.set([])},function(e,t){t=h[e.astr][t];e.get().push(t)});y(u);for(var g=x(r.transforms,t),_=0;_<a;_++)d(n[_])?(y(m,_),f[p++]=g(_)):c&&p++;t._indexToPoints=f,r._length=p}}function y(e,t){for(var n=0;n<l.length;n++)e(v.nestedProperty(r,l[n]),t)}}},{"../constants/filter_ops":208,"../lib":230,"../plots/cartesian/axes":276,"../registry":313,"./helpers":384}],383:[function(e,t,u){"use strict";var k=e("../lib"),M=e("../plot_api/plot_schema"),S=e("../plots/plots"),E=e("./helpers").pointsAccessorFunction;u.moduleType="transform",u.name="groupby",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},u.supplyDefaults=function(n,e,t){var r,i={};function a(e,t){return k.coerce(n,i,u.attributes,e,t)}if(!a("enabled"))return i;a("groups"),a("nameformat",1<t._dataLength?"%{group} (%{trace})":"%{group}");var o=n.styles,s=i.styles=[];if(o)for(r=0;r<o.length;r++){var l=s[r]={};k.coerce(o[r],s[r],u.attributes.styles,"target");var c=k.coerce(o[r],s[r],u.attributes.styles,"value");k.isPlainObject(c)?l.value=k.extendDeep({},c):c&&delete l.value}return i},u.transform=function(e,t){for(var n,r,i=[],a=0;a<e.length;a++)for(n=function(e,t){var n,r,i,a,o,s,l,c,u,d,h=t.transform,f=t.transformIndex,p=e.transforms[f].groups,m=E(e.transforms,h);if(!k.isArrayOrTypedArray(p)||0===p.length)return[e];var g=k.filterUnique(p),_=new Array(g.length),y=p.length,v=M.findArrayAttributes(e),b=h.styles||[],x={};for(n=0;n<b.length;n++)x[b[n].target]=b[n].value;h.styles&&(d=k.keyedContainer(h,"styles","target","value.name"));var w={},T={};for(n=0;n<g.length;n++){s=g[n],w[s]=n,T[s]=0,(l=_[n]=k.extendDeepNoArrays({},e))._group=s,l.transforms[f]._indexToPoints={};var A=null;for(d&&(A=d.get(s)),l.name=A||""===A?A:k.templateString(h.nameformat,{trace:e.name,group:s}),c=l.transforms,l.transforms=[],r=0;r<c.length;r++)l.transforms[r]=k.extendDeepNoArrays({},c[r]);for(r=0;r<v.length;r++)k.nestedProperty(l,v[r]).set([])}for(i=0;i<v.length;i++){for(a=v[i],r=0,u=[];r<g.length;r++)u[r]=k.nestedProperty(_[r],a).get();for(o=k.nestedProperty(e,a).get(),r=0;r<y;r++)u[w[p[r]]].push(o[r])}for(r=0;r<y;r++)(l=_[w[p[r]]]).transforms[f]._indexToPoints[T[p[r]]]=m(r),T[p[r]]++;for(n=0;n<g.length;n++)s=g[n],l=_[n],S.clearExpandedTraceDefaultColors(l),l=k.extendDeepNoArrays(l,x[s]||{});return _}(e[a],t),r=0;r<n.length;r++)i.push(n[r]);return i}},{"../lib":230,"../plot_api/plot_schema":264,"../plots/plots":311,"./helpers":384}],384:[function(e,t,n){"use strict";n.pointsAccessorFunction=function(e,t){for(var n,r,i=0;i<e.length&&(n=e[i])!==t;i++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);return r?function(e){return r[e]}:function(e){return[e]}}},{}],385:[function(e,t,i){"use strict";var m=e("../lib"),g=e("../plots/cartesian/axes"),_=e("./helpers").pointsAccessorFunction,y=e("../constants/numerical").BADNUM;i.moduleType="transform",i.name="sort",i.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},i.supplyDefaults=function(n){var r={};function e(e,t){return m.coerce(n,r,i.attributes,e,t)}return e("enabled")&&(e("target"),e("order")),r},i.calcTransform=function(e,t,n){if(n.enabled){var r=m.getTargetArray(t,n);if(r){var i=n.target,a=r.length;t._length&&(a=Math.min(a,t._length));for(var o=t._arrayAttrs,s=function(e,t,n,r){var i,a=new Array(r),o=new Array(r);for(i=0;i<r;i++)a[i]={v:t[i],i:i};for(a.sort(function(e,n){switch(e.order){case"ascending":return function(e,t){e=n(e.v),t=n(t.v);return e===y?1:t===y?-1:e-t};case"descending":return function(e,t){e=n(e.v),t=n(t.v);return e===y?1:t===y?-1:t-e}}}(e,n)),i=0;i<r;i++)o[i]=a[i].i;return o}(n,r,g.getDataToCoordFunc(e,t,i,r),a),l=_(t.transforms,n),c={},u=0;u<o.length;u++){for(var d=m.nestedProperty(t,o[u]),h=d.get(),f=new Array(a),p=0;p<a;p++)f[p]=h[s[p]];d.set(f)}for(p=0;p<a;p++)c[p]=l(s[p]);n._indexToPoints=c,t._length=a}}}},{"../constants/numerical":210,"../lib":230,"../plots/cartesian/axes":276,"./helpers":384}],386:[function(e,t,n){"use strict";n.version="2.2.0"},{}]},{},[8])(8)}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=e()}(function(){return function r(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,a,o)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";var r,i=e("../src/lib"),a={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(r in a){var o=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(o,a[r])}},{"../src/lib":285}],2:[function(e,t,n){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":541}],3:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":391}],4:[function(e,t,n){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":406}],5:[function(e,t,n){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":153}],6:[function(e,t,n){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":426}],7:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":267}],8:[function(e,t,n){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":542}],9:[function(e,t,n){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":543}],10:[function(e,t,n){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":442}],11:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":460}],12:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":466}],13:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":470}],14:[function(e,t,n){"use strict";t.exports=e("../src/traces/image")},{"../src/traces/image":478}],15:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./image"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),t.exports=r},{"./aggregate":2,"./bar":3,"./box":4,"./calendars":5,"./contour":6,"./core":7,"./filter":8,"./groupby":9,"./heatmap":10,"./histogram":11,"./histogram2d":12,"./histogram2dcontour":13,"./image":14,"./pie":16,"./scatterternary":17,"./sort":18,"./violin":19}],16:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":487}],17:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":528}],18:[function(e,t,n){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":545}],19:[function(e,t,n){"use strict";t.exports=e("../src/traces/violin")},{"../src/traces/violin":536}],20:[function(e,Ks,t){!function(){var P={version:"3.6.1"},i=[].slice,h=function(e){return i.call(e)},R=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function I(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R)try{h(R.documentElement.childNodes)[0].nodeType}catch(e){h=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),R)try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,r=t.setAttributeNS,a=this.CSSStyleDeclaration.prototype,o=a.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){r.call(this,e,t,n+"")},a.setProperty=function(e,t,n){o.call(this,e,t+"",n)}}function l(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function c(e){return null===e?NaN:+e}function u(e){return!isNaN(e)}function e(a){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var i=n+r>>>1;a(e[i],t)<0?n=1+i:r=i}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var i=n+r>>>1;0<a(e[i],t)?r=i:n=1+i}return n}}}P.ascending=l,P.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},P.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r<n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r<n&&(n=r)}return n},P.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n<r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n<r&&(n=r)}return n},P.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(r<n&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(r<n&&(n=r),i<r&&(i=r))}return[n,i]},P.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)u(n=+e[a])&&(r+=n);else for(;++a<i;)u(n=+t.call(e,e[a],a))&&(r+=n);return r},P.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)u(n=c(e[a]))?r+=n:--o;else for(;++a<i;)u(n=c(t.call(e,e[a],a)))?r+=n:--o;if(o)return r/o},P.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),t=+e[r-1],n=n-r;return n?t+n*(e[r]-t):t},P.median=function(e,t){var n,r=[],i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)u(n=c(e[a]))&&r.push(n);else for(;++a<i;)u(n=c(t.call(e,e[a],a)))&&r.push(n);if(r.length)return P.quantile(r.sort(l),.5)},P.variance=function(e,t){var n,r,i=e.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)u(n=c(e[s]))&&(o+=(r=n-a)*(n-(a+=r/++l)));else for(;++s<i;)u(n=c(t.call(e,e[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++l)));if(1<l)return o/(l-1)},P.deviation=function(){var e=P.variance.apply(this,arguments);return e&&Math.sqrt(e)};var d=e(l);function f(e){return e.length}P.bisectLeft=d.left,P.bisect=P.bisectRight=d.right,P.bisector=function(n){return e(1===n.length?function(e,t){return l(n(e),t)}:n)},P.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},P.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},P.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},P.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=P.min(e,f),r=new Array(n);++t<n;)for(var i,a=-1,o=r[t]=new Array(i);++a<i;)o[a]=e[a][t];return r},P.zip=function(){return P.transpose(arguments)},P.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},P.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},P.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},P.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--o]=r[t];return n};var D=Math.abs;function p(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function y(){this._=Object.create(null)}P.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(e){var t=1;for(;e*t%1;)t*=10;return t}(D(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},P.map=function(e,t){var n=new y;if(e instanceof y)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var m="__proto__",g="\0";function _(e){return(e+="")===m||e[0]===g?g+e:e}function v(e){return(e+="")[0]===g?e.slice(1):e}function b(e){return _(e)in this._}function x(e){return(e=_(e))in this._&&delete this._[e]}function w(){var e,t=[];for(e in this._)t.push(v(e));return t}function T(){var e,t=0;for(e in this._)++t;return t}function A(){for(var e in this._)return!1;return!0}function k(){this._=Object.create(null)}function L(e){return e}function M(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=S.length;n<r;++n){var i=S[n]+t;if(i in e)return i}}p(y,{has:b,get:function(e){return this._[_(e)]},set:function(e,t){return this._[_(e)]=t},remove:x,keys:w,values:function(){var e,t=[];for(e in this._)t.push(this._[e]);return t},entries:function(){var e,t=[];for(e in this._)t.push({key:v(e),value:this._[e]});return t},size:T,empty:A,forEach:function(e){for(var t in this._)e.call(this,v(t),this._[t])}}),P.nest=function(){var d,h,f={},p=[],t=[];function m(n,e,r){if(r>=p.length)return h?h.call(f,e):d?e.sort(d):e;for(var t,i,a,o,s=-1,l=e.length,c=p[r++],u=new y;++s<l;)(o=u.get(t=c(i=e[s])))?o.push(i):u.set(t,[i]);return a=n?(i=n(),function(e,t){i.set(e,m(n,t,r))}):(i={},function(e,t){i[e]=m(n,t,r)}),u.forEach(a),i}return f.map=function(e,t){return m(t,e,0)},f.entries=function(e){return function n(e,r){if(r>=p.length)return e;var i=[],a=t[r++];return e.forEach(function(e,t){i.push({key:e,values:n(t,r)})}),a?i.sort(function(e,t){return a(e.key,t.key)}):i}(m(P.map,e,0),0)},f.key=function(e){return p.push(e),f},f.sortKeys=function(e){return t[p.length-1]=e,f},f.sortValues=function(e){return d=e,f},f.rollup=function(e){return h=e,f},f},P.set=function(e){var t=new k;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},p(k,{has:b,add:function(e){return this._[_(e+="")]=!0,e},remove:x,values:w,size:T,empty:A,forEach:function(e){for(var t in this._)e.call(this,v(t))}}),P.behavior={},P.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=function(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}(e,t,t[n]);return e};var S=["webkit","ms","moz","Moz","o","O"];function E(){}function C(){}function O(i){var a=[],r=new y;function e(){for(var e,t=a,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return i}return e.on=function(e,t){var n=r.get(e);return arguments.length<2?n&&n.on:(n&&(n.on=null,a=a.slice(0,n=a.indexOf(n)).concat(a.slice(n+1)),r.remove(e)),t&&a.push(r.set(e,{on:t})),i)},e}function N(){P.event.preventDefault()}function z(){for(var e,t=P.event;e=t.sourceEvent;)t=e;return t}function F(i){for(var a=new C,e=0,t=arguments.length;++e<t;)a[arguments[e]]=O(a);return a.of=function(n,r){return function(e){try{var t=e.sourceEvent=P.event;e.target=i,P.event=e,a[e.type].apply(n,r)}finally{P.event=t}}},a}P.dispatch=function(){for(var e=new C,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=O(e);return e},C.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},P.event=null,P.requote=function(e){return e.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function H(e){return B(e,Y),e}var U=function(e,t){return t.querySelector(e)},V=function(e,t){return t.querySelectorAll(e)},q=function(e,t){var n=e.matches||e[M(e,"matchesSelector")];return(q=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(U=function(e,t){return Sizzle(e,t)[0]||null},q=(V=Sizzle).matchesSelector),P.selection=function(){return P.select(R.documentElement)};var Y=P.selection.prototype=[];function G(e){return"function"==typeof e?e:function(){return U(e,this)}}function W(e){return"function"==typeof e?e:function(){return V(e,this)}}Y.select=function(e){var t,n,r,i,a=[];e=G(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return H(a)},Y.selectAll=function(e){var t,n,r=[];e=W(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=h(e.call(n,n.__data__,s,i))),t.parentNode=n);return H(r)};var X="http://www.w3.org/1999/xhtml",Z={svg:"http://www.w3.org/2000/svg",xhtml:X,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J(t,n){return t=P.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function $(e){return e.trim().replace(/\s+/g," ")}function Q(e){return new RegExp("(?:^|\\s+)"+P.requote(e)+"(?:\\s+|$)","g")}function K(e){return(e+"").trim().split(/^|\s+/)}function ee(n,r){var i=(n=K(n).map(te)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<i;)n[e](this,t)}:function(){for(var e=-1;++e<i;)n[e](this,r)}}function te(r){var i=Q(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(i.lastIndex=0,i.test(n)||e.setAttribute("class",$(n+" "+r))):e.setAttribute("class",$(n.replace(i," ")))}}function ne(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function re(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function ie(n){return"function"==typeof n?n:(n=P.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===X&&e.documentElement.namespaceURI===X?e.createElement(n):e.createElementNS(t,n)}}function ae(){var e=this.parentNode;e&&e.removeChild(this)}function oe(e){return{__data__:e}}function se(e){return function(){return q(this,e)}}function le(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function ce(e){return B(e,ue),e}P.ns={prefix:Z,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Z.hasOwnProperty(n)?{space:Z[n],local:e}:e}},Y.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=P.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(J(t,e[t]));return this}return this.each(J(e,t))},Y.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=K(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!Q(e[i]).test(t))return!1;return!0}for(t in e)this.each(ee(t,e[t]));return this}return this.each(ee(e,t))},Y.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(ne(n,e[n],t));return this}if(r<2){r=this.node();return I(r).getComputedStyle(r,null).getPropertyValue(e)}n=""}return this.each(ne(e,t,n))},Y.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))},Y.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Y.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Y.append=function(e){return e=ie(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Y.insert=function(e,t){return e=ie(e),t=G(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Y.remove=function(){return this.each(ae)},Y.data=function(e,p){var t,n,r=-1,i=this.length;if(!arguments.length){for(e=new Array(i=(t=this[0]).length);++r<i;)(n=t[r])&&(e[r]=n.__data__);return e}function a(e,t){var n,r,i=e.length,a=t.length,o=Math.min(i,a),s=new Array(a),l=new Array(a),c=new Array(i);if(p){for(var u,d=new y,h=new Array(i),f=-1;++f<i;)(n=e[f])&&(d.has(u=p.call(n,n.__data__,f))?c[f]=n:d.set(u,n),h[f]=u);for(f=-1;++f<a;)(n=d.get(u=p.call(t,r=t[f],f)))?!0!==n&&((s[f]=n).__data__=r):l[f]=oe(r),d.set(u,!0);for(f=-1;++f<i;)f in h&&!0!==d.get(h[f])&&(c[f]=e[f])}else{for(f=-1;++f<o;)n=e[f],r=t[f],n?(n.__data__=r,s[f]=n):l[f]=oe(r);for(;f<a;++f)l[f]=oe(t[f]);for(;f<i;++f)c[f]=e[f]}l.update=s,l.parentNode=s.parentNode=c.parentNode=e.parentNode,m.push(l),g.push(s),_.push(c)}var m=ce([]),g=H([]),_=H([]);if("function"==typeof e)for(;++r<i;)a(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<i;)a(t=this[r],e);return g.enter=function(){return m},g.exit=function(){return _},g},Y.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Y.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=se(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return H(i)},Y.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];0<=--i;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Y.sort=function(e){e=function(n){arguments.length||(n=l);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Y.each=function(r){return le(this,function(e,t,n){r.call(e,e.__data__,t,n)})},Y.call=function(e){var t=h(arguments);return e.apply(t[0]=this,t),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Y.size=function(){var e=0;return le(this,function(){++e}),e};var ue=[];function de(i,t,n){var r="__on"+i,e=i.indexOf("."),a=fe;0<e&&(i=i.slice(0,e));var o=he.get(i);function s(){var e=this[r];e&&(this.removeEventListener(i,e,e.$),delete this[r])}return o&&(i=o,a=pe),e?t?function(){var e=a(t,h(arguments));s.call(this),this.addEventListener(i,this[r]=e,e.$=n),e._=t}:s:t?E:function(){var e,t,n,r=new RegExp("^__on([^.]+)"+P.requote(i)+"$");for(t in this)(e=t.match(r))&&(n=this[t],this.removeEventListener(e[1],n,n.$),delete this[t])}}P.selection.enter=ce,(P.selection.enter.prototype=ue).append=Y.append,ue.empty=Y.empty,ue.node=Y.node,ue.call=Y.call,ue.size=Y.size,ue.select=function(e){for(var t,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(t.push(r[c]=n=e.call(i.parentNode,a.__data__,c,s)),n.__data__=a.__data__):t.push(null)}return H(o)},ue.insert=function(e,t){var o,s,l;return arguments.length<2&&(o=this,t=function(e,t,n){var r,i=o[n].update,a=i.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=i[s])&&++s<a;);return r}),Y.insert.call(this,e,t)},P.select=function(e){var t;return"string"==typeof e?(t=[U(e,R)]).parentNode=R.documentElement:(t=[e]).parentNode=s(e),H([t])},P.selectAll=function(e){var t;return"string"==typeof e?(t=h(V(e,R))).parentNode=R.documentElement:(t=h(e)).parentNode=null,H([t])},Y.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(de(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(de(e,t,n))};var he=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});function fe(n,r){return function(e){var t=P.event;P.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{P.event=t}}}function pe(e,t){var n=fe(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}R&&he.forEach(function(e){"on"+e in R&&he.remove(e)});var me,ge=0;function _e(e){var n,r,i=".dragsuppress-"+ ++ge,a="click"+i,o=P.select(I(e)).on("touchmove"+i,N).on("dragstart"+i,N).on("selectstart"+i,N);return(me=null==me?!("onselectstart"in e)&&M(e.style,"userSelect"):me)&&(n=s(e).style,r=n[me],n[me]="none"),function(e){var t;o.on(i,null),me&&(n[me]=r),e&&(t=function(){o.on(a,null)},o.on(a,function(){N(),t()},!0),setTimeout(t,0))}}P.mouse=function(e){return ve(e,z())};var ye=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ve(e,t){if(t.changedTouches&&(t=t.changedTouches[0]),(n=e.ownerSVGElement||e).createSVGPoint){var n,r,i=n.createSVGPoint();return ye<0&&(((r=I(e)).scrollX||r.scrollY)&&(r=(n=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),ye=!(r.f||r.e),n.remove())),ye?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function be(){return P.event.changedTouches[0].identifier}P.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=z().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return ve(e,r)},P.behavior.drag=function(){var m=F(n,"drag","dragstart","dragend"),g=null,e=r(E,P.mouse,I,"mousemove","mouseup"),t=r(be,P.touch,L,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(u,d,h,f,p){return function(){var r,e=P.event.target.correspondingElement||P.event.target,i=this.parentNode,a=m.of(this,arguments),o=0,s=u(),t=".drag"+(null==s?"":"-"+s),n=P.select(h(e)).on(f+t,function(){var e,t,n=d(i,s);n&&(e=n[0]-c[0],t=n[1]-c[1],o|=e|t,a({type:"drag",x:(c=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t}))}).on(p+t,function(){d(i,s)&&(n.on(f+t,null).on(p+t,null),l(o),a({type:"dragend"}))}),l=_e(e),c=d(i,s);r=g?[(r=g.apply(this,arguments)).x-c[0],r.y-c[1]]:[0,0],a({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(g=e,n):g},P.rebind(n,m,"on")},P.touches=function(n,e){return(e=arguments.length<2?z().touches:e)?h(e).map(function(e){var t=ve(n,e);return t.identifier=e.identifier,t}):[]};var xe=1e-6,we=xe*xe,Te=Math.PI,Ae=2*Te,ke=Ae-xe,Me=Te/2,Se=Te/180,Ee=180/Te;function Ce(e){return 0<e?1:e<0?-1:0}function Le(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function De(e){return 1<e?0:e<-1?Te:Math.acos(e)}function Oe(e){return 1<e?Me:e<-1?-Me:Math.asin(e)}function Pe(e){return((e=Math.exp(e))+1/e)/2}function Re(e){return(e=Math.sin(e/2))*e}var Ie=Math.SQRT2;P.interpolateZoom=function(e,t){var r,i,a,n,o=e[0],s=e[1],l=e[2],c=t[0],e=t[1],t=t[2],u=c-o,d=e-s,c=u*u+d*d;return(n=c<we?(a=Math.log(t/l)/Ie,function(e){return[o+e*u,s+e*d,l*Math.exp(Ie*e*a)]}):(r=Math.sqrt(c),e=(t*t-l*l+4*c)/(2*l*2*r),n=(t*t-l*l-4*c)/(2*t*2*r),i=Math.log(Math.sqrt(e*e+1)-e),a=(Math.log(Math.sqrt(n*n+1)-n)-i)/Ie,function(e){var t=e*a,n=Pe(i),e=l/(2*r)*(n*(e=Ie*t+i,((e=Math.exp(2*e))-1)/(e+1))-(e=i,((e=Math.exp(i))-1/e)/2));return[o+e*u,s+e*d,l*n/Pe(Ie*t+i)]})).duration=1e3*a,n},P.behavior.zoom=function(){var t,s,n,r,y,i,a,o,l,v={x:0,y:0,k:1},c=[960,500],u=Fe,d=250,h=0,b="mousedown.zoom",f="mousemove.zoom",p="mouseup.zoom",x="touchstart.zoom",w=F(m,"zoomstart","zoom","zoomend");function m(e){e.on(b,L).on(ze+".zoom",_).on("dblclick.zoom",O).on(x,D)}function T(e){return[(e[0]-v.x)/v.k,(e[1]-v.y)/v.k]}function A(e){v.k=Math.max(u[0],Math.min(u[1],e))}function k(e,t){var n;t=[(n=t)[0]*v.k+v.x,n[1]*v.k+v.y],v.x+=e[0]-t[0],v.y+=e[1]-t[1]}function M(e,t,n,r){e.__chart__={x:v.x,y:v.y,k:v.k},A(Math.pow(2,r)),k(s=t,n),e=P.select(e),(e=0<d?e.transition().duration(d):e).call(m.event)}function g(){a&&a.domain(i.range().map(function(e){return(e-v.x)/v.k}).map(i.invert)),l&&l.domain(o.range().map(function(e){return(e-v.y)/v.k}).map(o.invert))}function S(e){h++||e({type:"zoomstart"})}function E(e){g(),e({type:"zoom",scale:v.k,translate:[v.x,v.y]})}function C(e){--h||(e({type:"zoomend"}),s=null)}function L(){var e=this,t=w.of(e,arguments),n=0,r=P.select(I(e)).on(f,function(){n=1,k(P.mouse(e),i),E(t)}).on(p,function(){r.on(f,null).on(p,null),a(n),C(t)}),i=T(P.mouse(e)),a=_e(e);ks.call(e),S(t)}function D(){var l,c=this,u=w.of(c,arguments),d={},h=0,i=".zoom-"+P.event.changedTouches[0].identifier,o="touchmove"+i,s="touchend"+i,f=[],a=P.select(c),p=_e(c);function m(){var e=P.touches(c);return l=v.k,e.forEach(function(e){e.identifier in d&&(d[e.identifier]=T(e))}),e}function e(){var e=P.event.target;P.select(e).on(o,g).on(s,_),f.push(e);for(var t=P.event.changedTouches,n=0,r=t.length;n<r;++n)d[t[n].identifier]=null;var i,a=m(),e=Date.now();1===a.length?(e-y<500&&(i=a[0],M(c,i,d[i.identifier],Math.floor(Math.log(v.k)/Math.LN2)+1),N()),y=e):1<a.length&&(i=a[0],e=a[1],a=i[0]-e[0],e=i[1]-e[1],h=a*a+e*e)}function g(){var e,t,n=P.touches(c);ks.call(c);for(var r,i,a,o=0,s=n.length;o<s;++o,t=null)if(e=n[o],t=d[e.identifier]){if(a)break;i=e,a=t}t&&(r=(r=e[0]-i[0])*r+(r=e[1]-i[1])*r,r=h&&Math.sqrt(r/h),i=[(i[0]+e[0])/2,(i[1]+e[1])/2],a=[(a[0]+t[0])/2,(a[1]+t[1])/2],A(r*l)),y=null,k(i,a),E(u)}function _(){if(P.event.touches.length){for(var e,t=P.event.changedTouches,n=0,r=t.length;n<r;++n)delete d[t[n].identifier];for(e in d)return void m()}P.selectAll(f).on(i,null),a.on(b,L).on(x,D),p(),C(u)}e(),S(u),a.on(b,null).on(x,e)}function _(){var e=w.of(this,arguments);r?clearTimeout(r):(ks.call(this),t=T(s=n||P.mouse(this)),S(e)),r=setTimeout(function(){r=null,C(e)},50),N(),A(Math.pow(2,.002*Ne())*v.k),k(s,t),E(e)}function O(){var e=P.mouse(this),t=Math.log(v.k)/Math.LN2;M(this,e,T(e),P.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return ze=ze||("onwheel"in R?(Ne=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ne=function(){return P.event.wheelDelta},"mousewheel"):(Ne=function(){return-P.event.detail},"MozMousePixelScroll")),m.event=function(e){e.each(function(){var o=w.of(this,arguments),t=v;Es?P.select(this).transition().each("start.zoom",function(){v=this.__chart__||{x:0,y:0,k:1},S(o)}).tween("zoom:zoom",function(){var n=c[0],e=c[1],r=s?s[0]:n/2,i=s?s[1]:e/2,a=P.interpolateZoom([(r-v.x)/v.k,(i-v.y)/v.k,n/v.k],[(r-t.x)/t.k,(i-t.y)/t.k,n/t.k]);return function(e){var t=a(e),e=n/t[2];this.__chart__=v={x:r-t[0]*e,y:i-t[1]*e,k:e},E(o)}}).each("interrupt.zoom",function(){C(o)}).each("end.zoom",function(){C(o)}):(this.__chart__=v,S(o),E(o),C(o))})},m.translate=function(e){return arguments.length?(v={x:+e[0],y:+e[1],k:v.k},g(),m):[v.x,v.y]},m.scale=function(e){return arguments.length?(v={x:v.x,y:v.y,k:null},A(+e),g(),m):v.k},m.scaleExtent=function(e){return arguments.length?(u=null==e?Fe:[+e[0],+e[1]],m):u},m.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],m):n},m.size=function(e){return arguments.length?(c=e&&[+e[0],+e[1]],m):c},m.duration=function(e){return arguments.length?(d=+e,m):d},m.x=function(e){return arguments.length?(i=(a=e).copy(),v={x:0,y:0,k:1},m):a},m.y=function(e){return arguments.length?(o=(l=e).copy(),v={x:0,y:0,k:1},m):l},P.rebind(m,w,"on")};var Ne,ze,Fe=[0,1/0];function je(){}function Be(e,t,n){return this instanceof Be?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Be?new Be(e.h,e.s,e.l):it(""+e,at,Be):new Be(e,t,n)}(P.color=je).prototype.toString=function(){return this.rgb()+""};t=(P.hsl=Be).prototype=new je;function He(e,t,n){var r,i;function a(e){return Math.round(255*(360<(e=e)?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new et(a(e+120),a(e),a(e-120))}function Ue(e,t,n){return this instanceof Ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Ue?new Ue(e.h,e.c,e.l):Je((e instanceof qe?e:e=ot((e=P.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ue(e,t,n)}t.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Be(this.h,this.s,this.l/e)},t.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Be(this.h,this.s,e*this.l)},t.rgb=function(){return He(this.h,this.s,this.l)};a=(P.hcl=Ue).prototype=new je;function Ve(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new qe(n,Math.cos(e*=Se)*t,Math.sin(e)*t)}function qe(e,t,n){return this instanceof qe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof qe?new qe(e.l,e.a,e.b):e instanceof Ue?Ve(e.h,e.c,e.l):ot((e=et(e)).r,e.g,e.b):new qe(e,t,n)}a.brighter=function(e){return new Ue(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?e:1)))},a.darker=function(e){return new Ue(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?e:1)))},a.rgb=function(){return Ve(this.h,this.c,this.l).rgb()},P.lab=qe;var Ye=18,Ge=.95047,We=1,Xe=1.08883,d=qe.prototype=new je;function Ze(e,t,n){e=(e+16)/116,n=e-n/200;return new et(Ke(3.2404542*(t=$e(t=e+t/500)*Ge)-1.5371385*(e=$e(e)*We)-.4985314*(n=$e(n)*Xe)),Ke(-.969266*t+1.8760108*e+.041556*n),Ke(.0556434*t-.2040259*e+1.0572252*n))}function Je(e,t,n){return 0<e?new Ue(Math.atan2(n,t)*Ee,Math.sqrt(t*t+n*n),e):new Ue(NaN,NaN,e)}function $e(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function Qe(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function Ke(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function et(e,t,n){return this instanceof et?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof et?new et(e.r,e.g,e.b):it(""+e,et,He):new et(e,t,n)}function tt(e){return new et(e>>16,e>>8&255,255&e)}function nt(e){return tt(e)+""}d.brighter=function(e){return new qe(Math.min(100,this.l+Ye*(arguments.length?e:1)),this.a,this.b)},d.darker=function(e){return new qe(Math.max(0,this.l-Ye*(arguments.length?e:1)),this.a,this.b)},d.rgb=function(){return Ze(this.l,this.a,this.b)};t=(P.rgb=et).prototype=new je;function rt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function it(e,t,n){var r,i=0,a=0,o=0,s=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(s)switch(r=s[2].split(","),s[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(lt(r[0]),lt(r[1]),lt(r[2]))}return(s=ct.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(i=(3840&s)>>4,i|=i>>4,a=240&s,a|=a>>4,o=15&s,o|=o<<4):7===e.length&&(i=(16711680&s)>>16,a=(65280&s)>>8,o=255&s)),t(i,a,o))}function at(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=0<l&&l<1?0:r),new Be(r,i,l)}function ot(e,t,n){var r=Qe((.4124564*(e=st(e))+.3575761*(t=st(t))+.1804375*(n=st(n)))/Ge),i=Qe((.2126729*e+.7151522*t+.072175*n)/We);return qe(116*i-16,500*(r-i),200*(i-Qe((.0193339*e+.119192*t+.9503041*n)/Xe)))}function st(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function lt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}t.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new et(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new et(30,30,30)},t.darker=function(e){return new et((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},t.hsl=function(){return at(this.r,this.g,this.b)},t.toString=function(){return"#"+rt(this.r)+rt(this.g)+rt(this.b)};var ct=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ut(e){return"function"==typeof e?e:function(){return e}}function dt(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),ht(e,t,r,n)}}function ht(i,a,o,e){var n,s={},l=P.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function t(){var e,t,n,r=u.status;if(!r&&((n=(t=u).responseType)&&"text"!==n?t.response:t.responseText)||200<=r&&r<300||304===r){try{e=o.call(s,u)}catch(e){return void l.error.call(s,e)}l.load.call(s,e)}else l.error.call(s,u)}return"onload"in(u=self.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(i)?new XDomainRequest:u)?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=P.event;P.event=e;try{l.progress.call(s,u)}finally{P.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c[e]:(null==t?delete c[e]:c[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(a=null==e?null:e+"",s):a},s.responseType=function(e){return arguments.length?(d=e,s):d},s.response=function(e){return o=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(h(arguments)))}}),s.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),u.open(e,i,!0),null==a||"accept"in c||(c.accept=a+",*/*"),u.setRequestHeader)for(var r in c)u.setRequestHeader(r,c[r]);return null!=a&&u.overrideMimeType&&u.overrideMimeType(a),null!=d&&(u.responseType=d),null!=n&&s.on("error",n).on("load",function(e){n(null,e)}),l.beforesend.call(s,u),u.send(null==t?null:t),s},s.abort=function(){return u.abort(),s},P.rebind(s,l,"on"),null==e?s:s.get(1===(n=e).length?function(e,t){n(null==e?t:null)}:n)}ct.forEach(function(e,t){ct.set(e,tt(t))}),P.functor=ut,P.xhr=dt(L),P.dsv=function(i,a){var t=new RegExp('["'+i+"\n]"),h=i.charCodeAt(0);function o(e,t,n){arguments.length<3&&(n=t,t=null);var r=ht(e,a,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}function n(e){return e.map(c).join(i)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o.parse=function(e,r){var t;return o.parseRows(e,function(i,e){if(t)return t(i,e-1);function n(e){for(var t={},n=i.length,r=0;r<n;++r)t[i[r]]=e[r];return t}t=r?function(e,t){return r(n(e),t)}:n})},o.parseRows=function(i,e){var t,a,o={},s={},n=[],l=i.length,c=0,r=0;function u(){if(l<=c)return s;if(a)return a=!1,o;var e=c;if(34===i.charCodeAt(e)){for(var t=e;t++<l;)if(34===i.charCodeAt(t)){if(34!==i.charCodeAt(t+1))break;++t}return c=t+2,13===(n=i.charCodeAt(t+1))?(a=!0,10===i.charCodeAt(t+2)&&++c):10===n&&(a=!0),i.slice(e+1,t).replace(/""/g,'"')}for(;c<l;){var n,r=1;if(10===(n=i.charCodeAt(c++)))a=!0;else if(13===n)a=!0,10===i.charCodeAt(c)&&(++c,++r);else if(n!==h)continue;return i.slice(e,c-r)}return i.slice(e)}for(;(t=u())!==s;){for(var d=[];t!==o&&t!==s;)d.push(t),t=u();e&&null==(d=e(d,r++))||n.push(d)}return n},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new k,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(c).join(i)].concat(e.map(function(t){return r.map(function(e){return c(t[e])}).join(i)})).join("\n")},o.formatRows=function(e){return e.map(n).join("\n")},o},P.csv=P.dsv(",","text/csv"),P.tsv=P.dsv("\t","text/tab-separated-values");var ft,pt,mt,gt,_t=this[M(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function yt(e,t,n){var r=arguments.length;r<2&&(t=0);r={c:e,t:(n=r<3?Date.now():n)+t,n:null};return pt?pt.n=r:ft=r,pt=r,mt||(gt=clearTimeout(gt),mt=1,_t(vt)),r}function vt(){var e=bt(),e=xt()-e;24<e?(isFinite(e)&&(clearTimeout(gt),gt=setTimeout(vt,e)),mt=0):(mt=1,_t(vt))}function bt(){for(var e=Date.now(),t=ft;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function xt(){for(var e,t=ft,n=1/0;t;)t=t.c?(t.t<n&&(n=t.t),(e=t).n):e?e.n=t.n:ft=t.n;return pt=e,n}function wt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}P.timer=function(){yt.apply(this,arguments)},P.timer.flush=function(){bt(),xt()},P.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Tt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*D(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}});P.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=P.round(e,wt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Tt[8+n/3]};var At=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,kt=P.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=P.round(e,wt(e,t))).toFixed(Math.max(0,Math.min(20,wt(e*(1+1e-15),t))))}});function Mt(e){return e+""}var St=P.time={},Et=Date;function Ct(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Ct.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Lt.setUTCDate.apply(this._,arguments)},setDay:function(){Lt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Lt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Lt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Lt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Lt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Lt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Lt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Lt.setTime.apply(this._,arguments)}};var Lt=Date.prototype;function Dt(r,a,o){function e(e){var t=r(e),n=i(t,1);return e-t<n-e?t:n}function s(e){return a(e=r(new Et(e-1)),1),e}function i(e,t){return a(e=new Et(+e),t),e}function l(e,t,n){var r=s(e),i=[];if(1<n)for(;r<t;)o(r)%n||i.push(new Date(+r)),a(r,1);else for(;r<t;)i.push(new Date(+r)),a(r,1);return i}(r.floor=r).round=e,r.ceil=s,r.offset=i,r.range=l;var t=r.utc=Ot(r);return(t.floor=t).round=Ot(e),t.ceil=Ot(s),t.offset=Ot(i),t.range=function(e,t,n){try{var r=new(Et=Ct);return r._=e,l(r,t,n)}finally{Et=Date}},r}function Ot(r){return function(e,t){try{var n=new(Et=Ct);return n._=e,r(n,t)._}finally{Et=Date}}}function Pt(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function c(s){var l=s.length;function e(e){for(var t,n,r,i=[],a=-1,o=0;++a<l;)37===s.charCodeAt(a)&&(i.push(s.slice(o,a)),null!=(n=Rt[t=s.charAt(++a)])&&(t=s.charAt(++a)),(r=b[t])&&(t=r(e,null==n?"e"===t?" ":"0":n)),i.push(t),o=a+1);return i.push(s.slice(o,a)),i.join("")}return e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(t,s,e,0)!=e.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var n=null!=t.Z&&Et!==Ct,e=new(n?Ct:Et);return"j"in t?e.setFullYear(t.y,0,t.j):"W"in t||"U"in t?("w"in t||(t.w="W"in t?1:0),e.setFullYear(t.y,0,1),e.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(e.getDay()+5)%7:t.w+7*t.U-(e.getDay()+6)%7)):e.setFullYear(t.y,t.m,t.d),e.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),n?e._:e},e.toString=function(){return s},e}function u(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(a=t.charAt(o++),!(a=x[a in Rt?t.charAt(o++):a])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var n=c(e);function t(e){try{var t=new(Et=Ct);return t._=e,n(t)}finally{Et=Date}}return t.parse=function(e){try{Et=Ct;var t=n.parse(e);return t&&t._}finally{Et=Date}},t.toString=n.toString,t},c.multi=c.utc.multi=tn;var d=P.map(),h=Ft(a),f=jt(a),p=Ft(o),m=jt(o),g=Ft(s),_=jt(s),y=Ft(l),v=jt(l);i.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(t),d:function(e,t){return zt(e.getDate(),t,2)},e:function(e,t){return zt(e.getDate(),t,2)},H:function(e,t){return zt(e.getHours(),t,2)},I:function(e,t){return zt(e.getHours()%12||12,t,2)},j:function(e,t){return zt(1+St.dayOfYear(e),t,3)},L:function(e,t){return zt(e.getMilliseconds(),t,3)},m:function(e,t){return zt(e.getMonth()+1,t,2)},M:function(e,t){return zt(e.getMinutes(),t,2)},p:function(e){return i[+(12<=e.getHours())]},S:function(e,t){return zt(e.getSeconds(),t,2)},U:function(e,t){return zt(St.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return zt(St.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return zt(e.getFullYear()%100,t,2)},Y:function(e,t){return zt(e.getFullYear()%1e4,t,4)},Z:Kt,"%":function(){return"%"}},x={a:function(e,t,n){p.lastIndex=0;t=p.exec(t.slice(n));return t?(e.w=m.get(t[0].toLowerCase()),n+t[0].length):-1},A:function(e,t,n){h.lastIndex=0;t=h.exec(t.slice(n));return t?(e.w=f.get(t[0].toLowerCase()),n+t[0].length):-1},b:function(e,t,n){y.lastIndex=0;t=y.exec(t.slice(n));return t?(e.m=v.get(t[0].toLowerCase()),n+t[0].length):-1},B:function(e,t,n){g.lastIndex=0;t=g.exec(t.slice(n));return t?(e.m=_.get(t[0].toLowerCase()),n+t[0].length):-1},c:function(e,t,n){return u(e,b.c.toString(),t,n)},d:Wt,e:Wt,H:Zt,I:Zt,j:Xt,L:Qt,m:Gt,M:Jt,p:function(e,t,n){t=d.get(t.slice(n,n+=2).toLowerCase());return null==t?-1:(e.p=t,n)},S:$t,U:Ht,w:Bt,W:Ut,x:function(e,t,n){return u(e,b.x.toString(),t,n)},X:function(e,t,n){return u(e,b.X.toString(),t,n)},y:qt,Y:Vt,Z:Yt,"%":en};return c}St.year=Dt(function(e){return(e=St.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),St.years=St.year.range,St.years.utc=St.year.utc.range,St.day=Dt(function(e){var t=new Et(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),St.days=St.day.range,St.days.utc=St.day.utc.range,St.dayOfYear=function(e){var t=St.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,n){n=7-n;var t=St[e]=Dt(function(e){return(e=St.day(e)).setDate(e.getDate()-(e.getDay()+n)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)-(t!==n)});St[e+"s"]=t.range,St[e+"s"].utc=t.utc.range,St[e+"OfYear"]=function(e){var t=St.year(e).getDay();return Math.floor((St.dayOfYear(e)+(t+n)%7)/7)}}),St.week=St.sunday,St.weeks=St.sunday.range,St.weeks.utc=St.sunday.utc.range,St.weekOfYear=St.sundayOfYear;var Rt={"-":"",_:" ",0:"0"},It=/^\s*\d+/,Nt=/^%/;function zt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",e=i.length;return r+(e<n?new Array(n-e+1).join(t)+i:i)}function Ft(e){return new RegExp("^(?:"+e.map(P.requote).join("|")+")","i")}function jt(e){for(var t=new y,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Bt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function Ht(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n));return t?(e.U=+t[0],n+t[0].length):-1}function Ut(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n));return t?(e.W=+t[0],n+t[0].length):-1}function Vt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function qt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.y=(e=+t[0])+(68<e?1900:2e3),n+t[0].length):-1}function Yt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Gt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function Wt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function Xt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+3));return t?(e.j=+t[0],n+t[0].length):-1}function Zt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function Jt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function $t(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function Qt(e,t,n){It.lastIndex=0;t=It.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function Kt(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",e=D(t)/60|0,t=D(t)%60;return n+zt(e,"0",2)+zt(t,"0",2)}function en(e,t,n){Nt.lastIndex=0;t=Nt.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function tn(r){for(var e=r.length,t=-1;++t<e;)r[t][0]=this(r[t][0]);return function(e){for(var t=0,n=r[t];!n[1](e);)n=r[++t];return n[0](e)}}P.locale=function(e){return{numberFormat:(x=e.decimal,s=e.thousands,l=e.grouping,n=e.currency,w=l&&s?function(e,t){for(var n=e.length,r=[],i=0,a=l[0],o=0;0<n&&0<a&&(t<o+a+1&&(a=Math.max(1,t-o)),r.push(e.substring(n-=a,n+a)),!((o+=a+1)>t));)a=l[i=(i+1)%l.length];return r.reverse().join(s)}:L,function(e){var e=At.exec(e),s=e[1]||" ",l=e[2]||">",c=e[3]||"-",t=e[4]||"",u=e[5],d=+e[6],h=e[7],f=e[8],p=e[9],m=1,g="",_="",y=!1,v=!0,f=f&&+f.substring(1);switch((u||"0"===s&&"="===l)&&(u=s="0",l="="),p){case"n":h=!0,p="g";break;case"%":m=100,_="%",p="f";break;case"p":m=100,_="%",p="r";break;case"b":case"o":case"x":case"X":"#"===t&&(g="0"+p.toLowerCase());case"c":v=!1;case"d":y=!0,f=0;break;case"s":m=-1,p="r"}"$"===t&&(g=n[0],_=n[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f))));var p=kt.get(p)||Mt,b=u&&h;return function(e){var t=_;if(y&&e%1)return"";var n=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===c?"":c;m<0?(e=(i=P.formatPrefix(e,f)).scale(e),t=i.symbol+_):e*=m;var r,i,a=(e=p(e,f)).lastIndexOf(".");i=a<0?(o=v?e.lastIndexOf("e"):-1)<0?(r=e,""):(r=e.substring(0,o),e.substring(o)):(r=e.substring(0,a),x+e.substring(a+1)),!u&&h&&(r=w(r,1/0));var o=g.length+r.length+i.length+(b?0:n.length),a=o<d?new Array(o=d-o+1).join(s):"";return b&&(r=w(a+r,a.length?d-i.length:1/0)),n+=g,e=r+i,("<"===l?n+e+a:">"===l?a+n+e:"^"===l?a.substring(0,o>>=1)+n+e+a.substring(o):n+(b?e:a+e))+t}}),timeFormat:Pt(e)};var x,s,l,n,w};a=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nn(){}P.format=a.numberFormat,P.geo={},nn.prototype={s:0,t:0,add:function(e){an(e,this.t,rn),an(rn.s,this.s,this),this.s?this.t+=rn.t:this.s=rn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rn=new nn;function an(e,t,n){var r=n.s=e+t,i=r-e;n.t=e-(r-i)+(t-i)}function on(e,t){e&&ln.hasOwnProperty(e.type)&&ln[e.type](e,t)}P.geo.stream=function(e,t){e&&sn.hasOwnProperty(e.type)?sn[e.type](e,t):on(e,t)};var sn={Feature:function(e,t){on(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)on(n[r].geometry,t)}},ln={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){cn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)cn(n[r],t,0)},Polygon:function(e,t){un(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)un(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)on(n[r],t)}};function cn(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function un(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)cn(e[n],t,1);t.polygonEnd()}P.geo.area=function(e){return dn=0,P.geo.stream(e,Nn),dn};var dn,hn,fn,pn,mn,gn,_n,yn,vn,bn,xn,wn,Tn,An,kn,Mn,Sn,En,Cn,Ln,Dn,On,Pn,Rn,In=new nn,Nn={sphere:function(){dn+=4*Te},point:E,lineStart:E,lineEnd:E,polygonStart:function(){In.reset(),Nn.lineStart=zn},polygonEnd:function(){var e=2*In;dn+=e<0?4*Te+e:e,Nn.lineStart=Nn.lineEnd=Nn.point=E}};function zn(){var n,r,s,l,c;function i(e,t){t=t*Se/2+Te/4;var n=(e*=Se)-s,r=0<=n?1:-1,i=r*n,a=Math.cos(t),o=Math.sin(t),n=c*o,t=l*a+n*Math.cos(i),i=n*r*Math.sin(i);In.add(Math.atan2(i,t)),s=e,l=a,c=o}Nn.point=function(e,t){Nn.point=i,s=(n=e)*Se,l=Math.cos(t=(r=t)*Se/2+Te/4),c=Math.sin(t)},Nn.lineEnd=function(){i(n,r)}}function Fn(e){var t=e[0],n=e[1],e=Math.cos(n);return[e*Math.cos(t),e*Math.sin(t),Math.sin(n)]}function jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Hn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Un(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Vn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function qn(e){return[Math.atan2(e[1],e[0]),Oe(e[2])]}function Yn(e,t){return D(e[0]-t[0])<xe&&D(e[1]-t[1])<xe}function Gn(e,t){xn.push(wn=[hn=e,pn=e]),t<fn&&(fn=t),mn<t&&(mn=t)}function Wn(e,t){var n,r,i,a,o,s=Fn([e*Se,t*Se]);vn?(i=Bn(vn,s),Vn(n=Bn([i[1],-i[0],0],i)),n=qn(n),a=e-gn,i=n[0]*Ee*(r=0<a?1:-1),(a=180<D(a))^(r*gn<i&&i<r*e)?(o=n[1]*Ee,mn<o&&(mn=o)):a^(r*gn<(i=(i+360)%360-180)&&i<r*e)?(o=-n[1]*Ee)<fn&&(fn=o):(t<fn&&(fn=t),mn<t&&(mn=t)),a?e<gn?Kn(hn,e)>Kn(hn,pn)&&(pn=e):Kn(e,pn)>Kn(hn,pn)&&(hn=e):hn<=pn?(e<hn&&(hn=e),pn<e&&(pn=e)):gn<e?Kn(hn,e)>Kn(hn,pn)&&(pn=e):Kn(e,pn)>Kn(hn,pn)&&(hn=e)):Gn(e,t),vn=s,gn=e}function Xn(){Tn.point=Wn}function Zn(){wn[0]=hn,wn[1]=pn,Tn.point=Gn,vn=null}function Jn(e,t){var n;vn?bn+=180<D(n=e-gn)?n+(0<n?360:-360):n:(_n=e,yn=t),Nn.point(e,t),Wn(e,t)}function $n(){Nn.lineStart()}function Qn(){Jn(_n,yn),Nn.lineEnd(),D(bn)>xe&&(hn=-(pn=180)),wn[0]=hn,wn[1]=pn,vn=null}function Kn(e,t){return(t-=e)<0?t+360:t}function er(e,t){return e[0]-t[0]}function tr(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}P.geo.bounds=(Tn={point:Gn,lineStart:Xn,lineEnd:Zn,polygonStart:function(){Tn.point=Jn,Tn.lineStart=$n,Tn.lineEnd=Qn,bn=0,Nn.polygonStart()},polygonEnd:function(){Nn.polygonEnd(),Tn.point=Gn,Tn.lineStart=Xn,Tn.lineEnd=Zn,In<0?(hn=-(pn=180),fn=-(mn=90)):xe<bn?mn=90:bn<-xe&&(fn=-90),wn[0]=hn,wn[1]=pn}},function(e){if(mn=pn=-(hn=fn=1/0),xn=[],P.geo.stream(e,Tn),i=xn.length){xn.sort(er);for(var t=1,n=[s=xn[0]];t<i;++t)tr((a=xn[t])[0],s)||tr(a[1],s)?(Kn(s[0],a[1])>Kn(s[0],s[1])&&(s[1]=a[1]),Kn(a[0],s[1])>Kn(s[0],s[1])&&(s[0]=a[0])):n.push(s=a);for(var r,i,a,o=-1/0,t=0,s=n[i=n.length-1];t<=i;s=a,++t)a=n[t],(r=Kn(s[1],a[0]))>o&&(o=r,hn=a[0],pn=s[1])}return xn=wn=null,hn===1/0||fn===1/0?[[NaN,NaN],[NaN,NaN]]:[[hn,fn],[pn,mn]]}),P.geo.centroid=function(e){An=kn=Mn=Sn=En=Cn=Ln=Dn=On=Pn=Rn=0,P.geo.stream(e,nr);var t=On,n=Pn,r=Rn,e=t*t+n*n+r*r;return e<we&&(t=Cn,n=Ln,r=Dn,kn<xe&&(t=Mn,n=Sn,r=En),(e=t*t+n*n+r*r)<we)?[NaN,NaN]:[Math.atan2(n,t)*Ee,Oe(r/Math.sqrt(e))*Ee]};var nr={sphere:E,point:rr,lineStart:ar,lineEnd:or,polygonStart:function(){nr.lineStart=sr},polygonEnd:function(){nr.lineStart=ar}};function rr(e,t){e*=Se;var n=Math.cos(t*=Se);ir(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ir(e,t,n){Mn+=(e-Mn)/++An,Sn+=(t-Sn)/An,En+=(n-En)/An}function ar(){var i,a,o;function r(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),n=n*Math.sin(e),e=Math.sin(t),t=Math.atan2(Math.sqrt((t=a*e-o*n)*t+(t=o*r-i*e)*t+(t=i*n-a*r)*t),i*r+a*n+o*e);kn+=t,Cn+=t*(i+(i=r)),Ln+=t*(a+(a=n)),Dn+=t*(o+(o=e)),ir(i,a,o)}nr.point=function(e,t){e*=Se;var n=Math.cos(t*=Se);i=n*Math.cos(e),a=n*Math.sin(e),o=Math.sin(t),nr.point=r,ir(i,a,o)}}function or(){nr.point=rr}function sr(){var r,i,c,u,d;function a(e,t){e*=Se;var n=Math.cos(t*=Se),r=n*Math.cos(e),i=n*Math.sin(e),a=Math.sin(t),o=u*a-d*i,s=d*r-c*a,l=c*i-u*r,n=Math.sqrt(o*o+s*s+l*l),e=c*r+u*i+d*a,t=n&&-De(e)/n,e=Math.atan2(n,e);On+=t*o,Pn+=t*s,Rn+=t*l,kn+=e,Cn+=e*(c+(c=r)),Ln+=e*(u+(u=i)),Dn+=e*(d+(d=a)),ir(c,u,d)}nr.point=function(e,t){r=e,i=t,nr.point=a,e*=Se;var n=Math.cos(t*=Se);c=n*Math.cos(e),u=n*Math.sin(e),d=Math.sin(t),ir(c,u,d)},nr.lineEnd=function(){a(r,i),nr.lineEnd=or,nr.point=rr}}function lr(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function cr(){return!0}function ur(e,t,n,r,s){var l=[],c=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Yn(n,r)){s.lineStart();for(var i=0;i<t;++i)s.point((n=e[i])[0],n[1]);s.lineEnd()}else{var a=new hr(n,e,null,!0),o=new hr(n,null,a,!1);a.o=o,l.push(a),c.push(o),a=new hr(r,e,null,!1),o=new hr(r,null,a,!0),a.o=o,l.push(a),c.push(o)}}}),c.sort(t),dr(l),dr(c),l.length){for(var i=0,a=n,o=c.length;i<o;++i)c[i].e=a=!a;for(var u,d=l[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;p=h.z,s.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(i=0,o=p.length;i<o;++i)s.point((u=p[i])[0],u[1]);else r(h.x,h.n.x,1,s);h=h.n}else{if(f)for(var p,i=(p=h.p.z).length-1;0<=i;--i)s.point((u=p[i])[0],u[1]);else r(h.x,h.p.x,-1,s);h=h.p}}while(p=(h=h.o).z,f=!f,!h.v);s.lineEnd()}}}function dr(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function hr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fr(y,v,b,x){return function(r,o){var s,n=v(o),t=r.invert(x[0],x[1]),i={point:a,lineStart:l,lineEnd:c,polygonStart:function(){i.point=m,i.lineStart=g,i.lineEnd=_,s=[],u=[]},polygonEnd:function(){i.point=a,i.lineStart=l,i.lineEnd=c,s=P.merge(s);var e=function(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;In.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],h=d[0],f=d[1]/2+Te/4,p=Math.sin(f),m=Math.cos(f),g=1;;){var _=(e=c[g=g===u?0:g])[0],y=e[1]/2+Te/4,v=Math.sin(y),b=Math.cos(y),x=_-h,w=0<=x?1:-1,T=w*x,A=Te<T,y=p*v;if(In.add(Math.atan2(y*w*Math.sin(T),m*b+y*Math.cos(T))),a+=A?x+w*Ae:x,A^n<=h^n<=_&&(Vn(T=Bn(Fn(d),Fn(e))),Vn(w=Bn(i,T)),((w=(A^0<=x?-1:1)*Oe(w[2]))<r||r===w&&(T[0]||T[1]))&&(o+=A^0<=x?1:-1)),!g++)break;h=_,p=v,m=b,d=e}}return(a<-xe||a<xe&&In<-xe)^1&o}(t,u);s.length?(p||(o.polygonStart(),p=!0),ur(s,gr,e,b,o)):e&&(p||(o.polygonStart(),p=!0),o.lineStart(),b(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=u=null},sphere:function(){o.polygonStart(),o.lineStart(),b(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function a(e,t){var n=r(e,t);y(e=n[0],t=n[1])&&o.point(e,t)}function e(e,t){t=r(e,t);n.point(t[0],t[1])}function l(){i.point=e,n.lineStart()}function c(){i.point=a,n.lineEnd()}var u,d,h=mr(),f=v(h),p=!1;function m(e,t){d.push([e,t]);t=r(e,t);f.point(t[0],t[1])}function g(){f.lineStart(),d=[]}function _(){m(d[0][0],d[0][1]),f.lineEnd();var e=f.clean(),t=h.buffer(),n=t.length;if(d.pop(),u.push(d),d=null,n)if(1&e){var r,i,a=-1;if(0<(n=(r=t[0]).length-1)){for(p||(o.polygonStart(),p=!0),o.lineStart();++a<n;)o.point((i=r[a])[0],i[1]);o.lineEnd()}}else 1<n&&2&e&&t.push(t.pop().concat(t.shift())),s.push(t.filter(pr))}return i}}function pr(e){return 1<e.length}function mr(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(e,t){n.push([e,t])},lineEnd:E,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function gr(e,t){return((e=e.x)[0]<0?e[1]-Me-xe:Me-e[1])-((t=t.x)[0]<0?t[1]-Me-xe:Me-t[1])}var _r=fr(cr,function(c){var u,d=NaN,h=NaN,f=NaN;return{lineStart:function(){c.lineStart(),u=1},point:function(e,t){var n,r,i,a,o,s=0<e?Te:-Te,l=D(e-d);D(l-Te)<xe?(c.point(d,h=0<(h+t)/2?Me:-Me),c.point(f,h),c.lineEnd(),c.lineStart(),c.point(s,h),c.point(e,h),u=0):f!==s&&Te<=l&&(D(d-f)<xe&&(d-=f*xe),D(e-s)<xe&&(e-=s*xe),n=d,r=h,i=e,a=t,o=Math.sin(n-i),h=D(o)>xe?Math.atan((Math.sin(r)*(l=Math.cos(a))*Math.sin(i)-Math.sin(a)*(i=Math.cos(r))*Math.sin(n))/(i*l*o)):(r+a)/2,c.point(f,h),c.lineEnd(),c.lineStart(),c.point(s,h),u=0),c.point(d=e,h=t),f=s},lineEnd:function(){c.lineEnd(),d=h=NaN},clean:function(){return 2-u}}},function(e,t,n,r){var i;null==e?(i=n*Me,r.point(-Te,i),r.point(0,i),r.point(Te,i),r.point(Te,0),r.point(Te,-i),r.point(0,-i),r.point(-Te,-i),r.point(-Te,0),r.point(-Te,i)):D(e[0]-t[0])>xe?(e=e[0]<t[0]?Te:-Te,i=n*e/2,r.point(-e,i),r.point(0,i),r.point(e,i)):r.point(t[0],t[1])},[-Te,-Te/2]);function yr(i){var f=Math.cos(i),h=0<f,p=D(f)>xe;return fr(m,function(o){var s,l,c,u,d;return{lineStart:function(){u=c=!1,d=1},point:function(e,t){var n,r,i=[e,t],a=m(e,t),t=h?a?0:_(e,t):a?_(e+(e<0?Te:-Te),t):0;!s&&(u=c=a)&&o.lineStart(),a!==c&&(n=g(s,i),(Yn(s,n)||Yn(i,n))&&(i[0]+=xe,i[1]+=xe,a=m(i[0],i[1]))),a!==c?(d=0,a?(o.lineStart(),n=g(i,s),o.point(n[0],n[1])):(n=g(s,i),o.point(n[0],n[1]),o.lineEnd()),s=n):p&&s&&h^a&&(t&l||!(r=g(i,s,!0))||(d=0,h?(o.lineStart(),o.point(r[0][0],r[0][1]),o.point(r[1][0],r[1][1]),o.lineEnd()):(o.point(r[1][0],r[1][1]),o.lineEnd(),o.lineStart(),o.point(r[0][0],r[0][1])))),!a||s&&Yn(s,i)||o.point(i[0],i[1]),s=i,c=a,l=t},lineEnd:function(){c&&o.lineEnd(),s=null},clean:function(){return d|(u&&c)<<1}}},ei(i,6*Se),h?[0,-i]:[-Te,i-Te]);function m(e,t){return Math.cos(e)*Math.cos(t)>f}function g(e,t,n){var r=[1,0,0],i=Bn(Fn(e),Fn(t)),a=jn(i,i),o=i[0],s=a-o*o;if(!s)return!n&&e;var l=Bn(r,i),c=Un(r,f*a/s);Hn(c,Un(i,-f*o/s));var u=l,d=jn(c,u),r=jn(u,u),a=d*d-r*(jn(c,c)-1);if(!(a<0)){i=Math.sqrt(a),o=Un(u,(-d-i)/r);if(Hn(o,c),o=qn(o),!n)return o;var h,s=e[0],l=t[0],a=e[1],n=t[1];l<s&&(h=s,s=l,l=h);e=l-s,t=D(e-Te)<xe;if(!t&&n<a&&(h=a,a=n,n=h),t||e<xe?t?0<a+n^o[1]<(D(o[0]-s)<xe?a:n):a<=o[1]&&o[1]<=n:Te<e^(s<=o[0]&&o[0]<=l)){r=Un(u,(-d+i)/r);return Hn(r,c),[o,qn(r)]}}}function _(e,t){var n=h?i:Te-i,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}}function vr(l,c,u,d){return function(e){var t=e.a,n=e.b,r=t.x,i=t.y,a=0,o=1,s=n.x-r,t=n.y-i,n=l-r;if(s||!(0<n)){if(n/=s,s<0){if(n<a)return;n<o&&(o=n)}else if(0<s){if(o<n)return;a<n&&(a=n)}if(n=u-r,s||!(n<0)){if(n/=s,s<0){if(o<n)return;a<n&&(a=n)}else if(0<s){if(n<a)return;n<o&&(o=n)}if(n=c-i,t||!(0<n)){if(n/=t,t<0){if(n<a)return;n<o&&(o=n)}else if(0<t){if(o<n)return;a<n&&(a=n)}if(n=d-i,t||!(n<0)){if(n/=t,t<0){if(o<n)return;a<n&&(a=n)}else if(0<t){if(n<a)return;n<o&&(o=n)}return 0<a&&(e.a={x:r+a*s,y:i+a*t}),o<1&&(e.b={x:r+o*s,y:i+o*t}),e}}}}}}var br=1e9;function xr(b,x,w,T){return function(i){var r,u,a,o,s,l,c,d,h,f,p,m=i,e=mr(),g=vr(b,x,w,T),t={point:n,lineStart:function(){t.point=v,u&&u.push(a=[]);f=!0,h=!1,c=d=NaN},lineEnd:function(){r&&(v(o,s),l&&h&&e.rejoin(),r.push(e.buffer()));t.point=n,h&&i.lineEnd()},polygonStart:function(){i=e,r=[],u=[],p=!0},polygonEnd:function(){i=m,r=P.merge(r);var e=function(e){for(var t=0,n=u.length,r=e[1],i=0;i<n;++i)for(var a,o=1,s=u[i],l=s.length,c=s[0];o<l;++o)a=s[o],c[1]<=r?a[1]>r&&0<Le(c,a,e)&&++t:a[1]<=r&&Le(c,a,e)<0&&--t,c=a;return 0!==t}([b,T]),t=p&&e,n=r.length;(t||n)&&(i.polygonStart(),t&&(i.lineStart(),_(null,null,1,i),i.lineEnd()),n&&ur(r,k,e,_,i),i.polygonEnd()),r=u=a=null}};function _(e,t,n,r){var i=0,a=0;if(null==e||(i=A(e,n))!==(a=A(t,n))||M(e,t)<0^0<n)for(;r.point(0===i||3===i?b:w,1<i?T:x),(i=(i+n+4)%4)!==a;);else r.point(t[0],t[1])}function y(e,t){return b<=e&&e<=w&&x<=t&&t<=T}function n(e,t){y(e,t)&&i.point(e,t)}function v(e,t){var n,r=y(e=Math.max(-br,Math.min(br,e)),t=Math.max(-br,Math.min(br,t)));u&&a.push([e,t]),f?(o=e,s=t,f=!1,(l=r)&&(i.lineStart(),i.point(e,t))):r&&h?i.point(e,t):g(n={a:{x:c,y:d},b:{x:e,y:t}})?(h||(i.lineStart(),i.point(n.a.x,n.a.y)),i.point(n.b.x,n.b.y),r||i.lineEnd(),p=!1):r&&(i.lineStart(),i.point(e,t),p=!1),c=e,d=t,h=r}return t};function A(e,t){return D(e[0]-b)<xe?0<t?0:3:D(e[0]-w)<xe?0<t?2:1:D(e[1]-x)<xe?0<t?1:0:0<t?3:2}function k(e,t){return M(e.x,t.x)}function M(e,t){var n=A(e,1),r=A(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function wr(e){var t=0,n=Te/3,r=Gr(e),e=r(t,n);return e.parallels=function(e){return arguments.length?r(t=e[0]*Te/180,n=e[1]*Te/180):[t/Te*180,n/Te*180]},e}function Tr(e,t){var e=Math.sin(e),n=(e+Math.sin(t))/2,r=1+e*(2*n-e),i=Math.sqrt(r)/n;function a(e,t){t=Math.sqrt(r-2*n*Math.sin(t))/n;return[t*Math.sin(e*=n),i-t*Math.cos(e)]}return a.invert=function(e,t){t=i-t;return[Math.atan2(e,t)/n,Oe((r-(e*e+t*t)*n*n)/(2*n))]},a}P.geo.clipExtent=function(){var t,n,r,i,a,o,s={stream:function(e){return a&&(a.valid=!1),(a=o(e)).valid=!0,a},extent:function(e){return arguments.length?(o=xr(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a&&(a.valid=!1,a=null),s):[[t,n],[r,i]]}};return s.extent([[0,0],[960,500]])},(P.geo.conicEqualArea=function(){return wr(Tr)}).raw=Tr,P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},P.geo.albersUsa=function(){var n,i,a,o,s=P.geo.albers(),l=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){n=[e,t]}};function d(e){var t=e[0],e=e[1];return n=null,i(t,e),n||(a(t,e),n)||o(t,e),n}return d.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,t=(e[1]-n[1])/t;return(.12<=t&&t<.234&&-.425<=r&&r<-.214?l:.166<=t&&t<.234&&-.214<=r&&r<-.115?c:s).invert(e)},d.stream=function(e){var n=s.stream(e),r=l.stream(e),i=c.stream(e);return{point:function(e,t){n.point(e,t),r.point(e,t),i.point(e,t)},sphere:function(){n.sphere(),r.sphere(),i.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),i.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),i.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),i.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),i.polygonEnd()}}},d.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),c.precision(e),d):s.precision()},d.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),c.scale(e),d.translate(s.translate())):s.scale()},d.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),n=+e[0],r=+e[1];return i=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(u).point,a=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+xe,r+.12*t+xe],[n-.214*t-xe,r+.234*t-xe]]).stream(u).point,o=c.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+xe,r+.166*t+xe],[n-.115*t-xe,r+.234*t-xe]]).stream(u).point,d},d.scale(1070)};var Ar,kr,Mr,Sr,Er,Cr,Lr={point:E,lineStart:E,lineEnd:E,polygonStart:function(){kr=0,Lr.lineStart=Dr},polygonEnd:function(){Lr.lineStart=Lr.lineEnd=Lr.point=E,Ar+=D(kr/2)}};function Dr(){var n,r,i,a;function o(e,t){kr+=a*e-i*t,i=e,a=t}Lr.point=function(e,t){Lr.point=o,n=i=e,r=a=t},Lr.lineEnd=function(){o(n,r)}}var Or={point:function(e,t){e<Mr&&(Mr=e);Er<e&&(Er=e);t<Sr&&(Sr=t);Cr<t&&(Cr=t)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Pr(){var n=Rr(4.5),r=[],i={point:e,lineStart:function(){i.point=t},lineEnd:o,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=o,i.point=e},pointRadius:function(e){return n=Rr(e),i},result:function(){if(r.length){var e=r.join("");return r=[],e}}};function e(e,t){r.push("M",e,",",t,n)}function t(e,t){r.push("M",e,",",t),i.point=a}function a(e,t){r.push("L",e,",",t)}function o(){i.point=e}function s(){r.push("Z")}return i}function Rr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Ir,Nr={point:zr,lineStart:Fr,lineEnd:jr,polygonStart:function(){Nr.lineStart=Br},polygonEnd:function(){Nr.point=zr,Nr.lineStart=Fr,Nr.lineEnd=jr}};function zr(e,t){Mn+=e,Sn+=t,++En}function Fr(){var i,a;function n(e,t){var n=e-i,r=t-a,r=Math.sqrt(n*n+r*r);Cn+=r*(i+e)/2,Ln+=r*(a+t)/2,Dn+=r,zr(i=e,a=t)}Nr.point=function(e,t){Nr.point=n,zr(i=e,a=t)}}function jr(){Nr.point=zr}function Br(){var n,r,i,a;function o(e,t){var n=e-i,r=t-a,r=Math.sqrt(n*n+r*r);Cn+=r*(i+e)/2,Ln+=r*(a+t)/2,Dn+=r,On+=(r=a*e-i*t)*(i+e),Pn+=r*(a+t),Rn+=3*r,zr(i=e,a=t)}Nr.point=function(e,t){Nr.point=o,zr(n=i=e,r=a=t)},Nr.lineEnd=function(){o(n,r)}}function Hr(n){var r=4.5,i={point:e,lineStart:function(){i.point=t},lineEnd:o,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=o,i.point=e},pointRadius:function(e){return r=e,i},result:E};function e(e,t){n.moveTo(e+r,t),n.arc(e,t,r,0,Ae)}function t(e,t){n.moveTo(e,t),i.point=a}function a(e,t){n.lineTo(e,t)}function o(){i.point=e}function s(){n.closePath()}return i}function Ur(S){var E=.5,C=Math.cos(30*Se),x=16;function t(e){return(x?r:n)(e)}function n(n){return qr(n,function(e,t){e=S(e,t),n.point(e[0],e[1])})}function r(r){var n,i,a,o,s,l,c,u,d,h,f,p,m={point:e,lineStart:t,lineEnd:_,polygonStart:function(){r.polygonStart(),m.lineStart=y},polygonEnd:function(){r.polygonEnd(),m.lineStart=t}};function e(e,t){e=S(e,t),r.point(e[0],e[1])}function t(){u=NaN,m.point=g,r.lineStart()}function g(e,t){var n=Fn([e,t]),t=S(e,t);L(u,d,c,h,f,p,u=t[0],d=t[1],c=e,h=n[0],f=n[1],p=n[2],x,r),r.point(u,d)}function _(){m.point=e,r.lineEnd()}function y(){t(),m.point=v,m.lineEnd=b}function v(e,t){g(n=e,t),i=u,a=d,o=h,s=f,l=p,m.point=g}function b(){L(u,d,c,h,f,p,i,a,n,o,s,l,x,r),m.lineEnd=_,_()}return m}function L(e,t,n,r,i,a,o,s,l,c,u,d,h,f){var p,m,g,_,y,v,b,x,w,T,A=o-e,k=s-t,M=A*A+k*k;4*E<M&&h--&&(p=r+c,m=i+u,g=a+d,_=Math.sqrt(p*p+m*m+g*g),w=Math.asin(g/=_),y=D(D(g)-1)<xe||D(n-l)<xe?(n+l)/2:Math.atan2(m,p),v=(T=S(y,w))[0],b=T[1],(E<(T=k*(x=v-e)-A*(w=b-t))*T/M||.3<D((A*x+k*w)/M-.5)||r*c+i*u+a*d<C)&&(L(e,t,n,r,i,a,v,b,y,p/=_,m/=_,g,h,f),f.point(v,b),L(v,b,y,p,m,g,o,s,l,c,u,d,h,f)))}return t.precision=function(e){return arguments.length?(x=0<(E=e*e)&&16,t):Math.sqrt(E)},t}function Vr(e){this.stream=e}function qr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Yr(e){return Gr(function(){return e})()}function Gr(e){var n,t,r,i,a,o,s=Ur(function(e,t){return[(e=n(e,t))[0]*l+i,a-e[1]*l]}),l=150,c=480,u=250,d=0,h=0,f=0,p=0,m=0,g=_r,_=L,y=null,v=null;function b(e){return[(e=r(e[0]*Se,e[1]*Se))[0]*l+i,a-e[1]*l]}function x(e){return(e=r.invert((e[0]-i)/l,(a-e[1])/l))&&[e[0]*Ee,e[1]*Ee]}function w(){r=lr(t=Jr(f,p,m),n);var e=n(d,h);return i=c-e[0]*l,a=u+e[1]*l,T()}function T(){return o&&(o.valid=!1,o=null),b}return b.stream=function(e){return o&&(o.valid=!1),(o=Wr(g(t,s(_(e))))).valid=!0,o},b.clipAngle=function(e){return arguments.length?(g=null==e?(y=e,_r):yr((y=+e)*Se),T()):y},b.clipExtent=function(e){return arguments.length?(_=(v=e)?xr(e[0][0],e[0][1],e[1][0],e[1][1]):L,T()):v},b.scale=function(e){return arguments.length?(l=+e,w()):l},b.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],w()):[c,u]},b.center=function(e){return arguments.length?(d=e[0]%360*Se,h=e[1]%360*Se,w()):[d*Ee,h*Ee]},b.rotate=function(e){return arguments.length?(f=e[0]%360*Se,p=e[1]%360*Se,m=2<e.length?e[2]%360*Se:0,w()):[f*Ee,p*Ee,m*Ee]},P.rebind(b,s,"precision"),function(){return n=e.apply(this,arguments),b.invert=n.invert&&x,w()}}function Wr(n){return qr(n,function(e,t){n.point(e*Se,t*Se)})}function Xr(e,t){return[e,t]}function Zr(e,t){return[Te<e?e-Ae:e<-Te?e+Ae:e,t]}function Jr(e,t,n){return e?t||n?lr(Qr(e),Kr(t,n)):Qr(e):t||n?Kr(t,n):Zr}function $r(n){return function(e,t){return[Te<(e+=n)?e-Ae:e<-Te?e+Ae:e,t]}}function Qr(e){var t=$r(e);return t.invert=$r(-e),t}function Kr(e,t){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(t),s=Math.sin(t);function n(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*i+r*a;return[Math.atan2(e*o-t*s,r*i-n*a),Oe(t*o+e*s)]}return n.invert=function(e,t){var n=Math.cos(t),r=Math.cos(e)*n,e=Math.sin(e)*n,n=Math.sin(t),t=n*o-e*s;return[Math.atan2(e*o+n*s,r*i+t*a),Oe(t*i-r*a)]},n}function ei(s,l){var c=Math.cos(s),u=Math.sin(s);return function(e,t,n,r){var i=n*l;null!=e?(e=ti(c,e),t=ti(c,t),(0<n?e<t:t<e)&&(e+=n*Ae)):(e=s+n*Ae,t=s-.5*i);for(var a,o=e;0<n?t<o:o<t;o-=i)r.point((a=qn([c,-u*Math.cos(o),-u*Math.sin(o)]))[0],a[1])}}function ti(e,t){t=Fn(t);t[0]-=e,Vn(t);e=De(-t[1]);return((-t[2]<0?-e:e)+2*Math.PI-xe)%(2*Math.PI)}function ni(e,t,n){var r=P.range(e,t-xe,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function ri(e,t,n){var r=P.range(e,t-xe,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function ii(e){return e.source}function ai(e){return e.target}P.geo.path=function(){var r,t,i,n,a,o=4.5;function s(e){return e&&("function"==typeof o&&n.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=i(n)),P.geo.stream(e,a)),n.result()}function l(){return a=null,s}return s.area=function(e){return Ar=0,P.geo.stream(e,i(Lr)),Ar},s.centroid=function(e){return Mn=Sn=En=Cn=Ln=Dn=On=Pn=Rn=0,P.geo.stream(e,i(Nr)),Rn?[On/Rn,Pn/Rn]:Dn?[Cn/Dn,Ln/Dn]:En?[Mn/En,Sn/En]:[NaN,NaN]},s.bounds=function(e){return Er=Cr=-(Mr=Sr=1/0),P.geo.stream(e,i(Or)),[[Mr,Sr],[Er,Cr]]},s.projection=function(e){return arguments.length?(i=(r=e)?e.stream||(n=e,t=Ur(function(e,t){return n([e*Ee,t*Ee])}),function(e){return Wr(t(e))}):L,l()):r;var n,t},s.context=function(e){return arguments.length?(n=null==(t=e)?new Pr:new Hr(e),"function"!=typeof o&&n.pointRadius(o),l()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(n.pointRadius(+e),+e),s):o},s.projection(P.geo.albersUsa()).context(null)},P.geo.transform=function(r){return{stream:function(e){var t,n=new Vr(e);for(t in r)n[t]=r[t];return n}}},Vr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},P.geo.projection=Yr,P.geo.projectionMutator=Gr,(P.geo.equirectangular=function(){return Yr(Xr)}).raw=Xr.invert=Xr,P.geo.rotation=function(t){function e(e){return(e=t(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e}return t=Jr(t[0]%360*Se,t[1]*Se,2<t.length?t[2]*Se:0),e.invert=function(e){return(e=t.invert(e[0]*Se,e[1]*Se))[0]*=Ee,e[1]*=Ee,e},e},Zr.invert=Xr,P.geo.circle=function(){var t,i,a=[0,0],n=6;function r(){var e="function"==typeof a?a.apply(this,arguments):a,n=Jr(-e[0]*Se,-e[1]*Se,0).invert,r=[];return i(null,null,1,{point:function(e,t){r.push(e=n(e,t)),e[0]*=Ee,e[1]*=Ee}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(e){return arguments.length?(a=e,r):a},r.angle=function(e){return arguments.length?(i=ei((t=+e)*Se,n*Se),r):t},r.precision=function(e){return arguments.length?(i=ei(t*Se,(n=+e)*Se),r):n},r.angle(90)},P.geo.distance=function(e,t){var n=(t[0]-e[0])*Se,r=e[1]*Se,i=t[1]*Se,a=Math.sin(n),e=Math.cos(n),t=Math.sin(r),n=Math.cos(r),r=Math.sin(i),i=Math.cos(i);return Math.atan2(Math.sqrt((a=i*a)*a+(a=n*r-t*i*e)*a),t*r+n*i*e)},P.geo.graticule=function(){var t,n,r,i,a,o,s,l,c,u,d,h,f=10,p=f,m=90,g=360,_=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return P.range(Math.ceil(i/m)*m,r,m).map(d).concat(P.range(Math.ceil(l/g)*g,s,g).map(h)).concat(P.range(Math.ceil(n/f)*f,t,f).filter(function(e){return D(e%m)>xe}).map(c)).concat(P.range(Math.ceil(o/p)*p,a,p).filter(function(e){return D(e%g)>xe}).map(u))}return y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(s).slice(1),d(r).reverse().slice(1),h(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<i&&(e=i,i=r,r=e),s<l&&(e=l,l=s,s=e),y.precision(_)):[[i,l],[r,s]]},y.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],a=+e[1][1],t<n&&(e=n,n=t,t=e),a<o&&(e=o,o=a,a=e),y.precision(_)):[[n,o],[t,a]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(m=+e[0],g=+e[1],y):[m,g]},y.minorStep=function(e){return arguments.length?(f=+e[0],p=+e[1],y):[f,p]},y.precision=function(e){return arguments.length?(_=+e,c=ni(o,a,90),u=ri(n,t,_),d=ni(l,s,90),h=ri(i,r,_),y):_},y.majorExtent([[-180,-90+xe],[180,90-xe]]).minorExtent([[-180,-80-xe],[180,80+xe]])},P.geo.greatArc=function(){var t,n,r=ii,i=ai;function a(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}return a.distance=function(){return P.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},a.source=function(e){return arguments.length?(t="function"==typeof(r=e)?null:e,a):r},a.target=function(e){return arguments.length?(n="function"==typeof(i=e)?null:e,a):i},a.precision=function(){return arguments.length?a:0},a},P.geo.interpolate=function(e,t){return n=e[0]*Se,r=e[1]*Se,i=t[0]*Se,a=t[1]*Se,e=Math.cos(r),o=Math.sin(r),t=Math.cos(a),s=Math.sin(a),l=e*Math.cos(n),c=e*Math.sin(n),u=t*Math.cos(i),d=t*Math.sin(i),h=2*Math.asin(Math.sqrt(Re(a-r)+e*t*Re(i-n))),f=1/Math.sin(h),(i=h?function(e){var t=Math.sin(e*=h)*f,n=Math.sin(h-e)*f,r=n*l+t*u,e=n*c+t*d,t=n*o+t*s;return[Math.atan2(e,r)*Ee,Math.atan2(t,Math.sqrt(r*r+e*e))*Ee]}:function(){return[n*Ee,r*Ee]}).distance=h,i;var n,r,i,a,o,s,l,c,u,d,h,f},P.geo.length=function(e){return Ir=0,P.geo.stream(e,oi),Ir};var oi={sphere:E,point:E,lineStart:function(){var a,o,s;function n(e,t){var n=Math.sin(t*=Se),r=Math.cos(t),i=D((e*=Se)-a),t=Math.cos(i);Ir+=Math.atan2(Math.sqrt((i=r*Math.sin(i))*i+(i=s*n-o*r*t)*i),o*n+s*r*t),a=e,o=n,s=r}oi.point=function(e,t){a=e*Se,o=Math.sin(t*=Se),s=Math.cos(t),oi.point=n},oi.lineEnd=function(){oi.point=oi.lineEnd=E}},lineEnd:E,polygonStart:E,polygonEnd:E};function si(i,a){function e(e,t){var n=Math.cos(e),r=Math.cos(t),n=i(n*r);return[n*r*Math.sin(e),n*Math.sin(t)]}return e.invert=function(e,t){var n=Math.sqrt(e*e+t*t),r=a(n),i=Math.sin(r),r=Math.cos(r);return[Math.atan2(e*i,n*r),Math.asin(n&&t*i/n)]},e}var li=si(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(P.geo.azimuthalEqualArea=function(){return Yr(li)}).raw=li;var ci=si(function(e){e=Math.acos(e);return e&&e/Math.sin(e)},L);function ui(e,t){function n(e){return Math.tan(Te/4+e/2)}var r=Math.cos(e),i=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),a=r*Math.pow(n(e),i)/i;return i?(o.invert=function(e,t){var n=a-t,t=Ce(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/t,1/i))-Me]},o):fi;function o(e,t){0<a?t<-Me+xe&&(t=-Me+xe):Me-xe<t&&(t=Me-xe);t=a/Math.pow(n(t),i);return[t*Math.sin(i*e),a-t*Math.cos(i*e)]}}function di(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;return D(r)<xe?Xr:(a.invert=function(e,t){t=i-t;return[Math.atan2(e,t)/r,i-Ce(r)*Math.sqrt(e*e+t*t)]},a);function a(e,t){t=i-t;return[t*Math.sin(r*e),i-t*Math.cos(r*e)]}}(P.geo.azimuthalEquidistant=function(){return Yr(ci)}).raw=ci,(P.geo.conicConformal=function(){return wr(ui)}).raw=ui,(P.geo.conicEquidistant=function(){return wr(di)}).raw=di;var hi=si(function(e){return 1/e},Math.atan);function fi(e,t){return[e,Math.log(Math.tan(Te/4+t/2))]}function pi(e){var i,a=Yr(e),o=a.scale,s=a.translate,l=a.clipExtent;return a.scale=function(){var e=o.apply(a,arguments);return e===a?i?a.clipExtent(null):a:e},a.translate=function(){var e=s.apply(a,arguments);return e===a?i?a.clipExtent(null):a:e},a.clipExtent=function(e){var t,n,r=l.apply(a,arguments);return r===a?(i=null==e)&&(t=Te*o(),n=s(),l([[n[0]-t,n[1]-t],[n[0]+t,n[1]+t]])):i&&(r=null),r},a.clipExtent(null)}(P.geo.gnomonic=function(){return Yr(hi)}).raw=hi,fi.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Me]},(P.geo.mercator=function(){return pi(fi)}).raw=fi;var mi=si(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Yr(mi)}).raw=mi;var gi=si(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function _i(e,t){return[Math.log(Math.tan(Te/4+t/2)),-e]}function yi(e){return e[0]}function vi(e){return e[1]}function bi(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;1<r&&Le(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function xi(e,t){return e[0]-t[0]||e[1]-t[1]}(P.geo.stereographic=function(){return Yr(gi)}).raw=gi,_i.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Me]},(P.geo.transverseMercator=function(){var e=pi(_i),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=_i,P.geom={},P.geom.hull=function(e){var h=yi,f=vi;return arguments.length?t(e):(t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(f=e,t):f},t);function t(e){if(e.length<3)return[];for(var t=ut(h),n=ut(f),r=e.length,i=[],a=[],o=0;o<r;o++)i.push([+t.call(this,e[o],o),+n.call(this,e[o],o),o]);for(i.sort(xi),o=0;o<r;o++)a.push([i[o][0],-i[o][1]]);var s=bi(i),l=bi(a),c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],d=[];for(o=s.length-1;0<=o;--o)d.push(e[i[s[o]][2]]);for(o=+c;o<l.length-u;++o)d.push(e[i[l[o]][2]]);return d}},P.geom.polygon=function(e){return B(e,wi),e};var wi=P.geom.polygon.prototype=[];function Ti(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ai(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,e=e[1],n=n[1],t=t[1]-e,r=r[1]-n,s=(s*(e-n)-r*(i-a))/(r*o-s*t);return[i+s*o,e+s*t]}function ki(e){var t=e[0],e=e[e.length-1];return!(t[0]-e[0]||t[1]-e[1])}wi.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},wi.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},wi.clip=function(e){for(var t,n,r,i,a,o,s=ki(e),l=-1,c=this.length-ki(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,i=this[l],a=t[(r=t.length-s)-1],n=-1;++n<r;)Ti(o=t[n],u,i)?(Ti(a,u,i)||e.push(Ai(a,o,u,i)),e.push(o)):Ti(a,u,i)&&e.push(Ai(a,o,u,i)),a=o;s&&e.push(e[0]),u=i}return e};var Mi,Si,Ei,Ci,Li,Di=[],Oi=[];function Pi(){Ji(this),this.edge=this.site=this.circle=null}function Ri(e){var t=Di.pop()||new Pi;return t.site=e,t}function Ii(e){Vi(e),Ei.remove(e),Di.push(e),Ji(e)}function Ni(e){for(var t,n,r,i,a=e.x,o=e.y,s=Ei._;s;)if(r=zi(s,o)-a,xe<r)s=s.L;else{if(i=a-function(e,t){var n=e.N;if(n)return zi(n,t);e=e.site;return e.y===t?e.x:1/0}(s,o),!(xe<i)){-xe<r?(t=s.P,n=s):-xe<i?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l,c,u,d,h,f,p,m,g,_,y=Ri(e);if(Ei.insert(t,y),t||n){if(t===n)return Vi(t),n=Ri(t.site),Ei.insert(y,n),y.edge=n.edge=Gi(t.site,y.site),Ui(t),void Ui(n);n?(Vi(t),Vi(n),c=(l=t.site).x,_=l.y,u=e.x-c,p=e.y-_,h=(d=n.site).x-c,f=d.y-_,Wi(n.edge,l,d,_={x:(f*(m=u*u+p*p)-p*(g=h*h+f*f))/(p=2*(u*f-p*h))+c,y:(u*g-h*m)/p+_}),y.edge=Gi(l,e,null,_),n.edge=Gi(e,d,null,_),Ui(t),Ui(n)):y.edge=Gi(t.site,y.site)}}function zi(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,e=l-t;if(!e)return s;o=s-r,n=1/a-1/e,t=o/e;return n?(-t+Math.sqrt(t*t-2*n*(o*o/(-2*e)-l+e/2+i-a/2)))/n+r:(r+s)/2}function Fi(e){this.site=e,this.edges=[]}function ji(e){for(var t,n,r,i,a,o,s,l,c,u=e[0][0],d=e[1][0],h=e[0][1],f=e[1][1],p=Si,m=p.length;m--;)if((i=p[m])&&i.prepare())for(s=(o=i.edges).length,a=0;a<s;)n=(c=o[a].end()).x,r=c.y,t=(l=o[++a%s].start()).x,l=l.y,(D(n-t)>xe||D(r-l)>xe)&&(o.splice(a,0,new Xi(function(e,t,n){e=new Yi(e,null);return e.a=t,e.b=n,Mi.push(e),e}(i.site,c,D(n-u)<xe&&xe<f-r?{x:u,y:D(t-u)<xe?l:f}:D(r-f)<xe&&xe<d-n?{x:D(l-f)<xe?t:d,y:f}:D(n-d)<xe&&xe<r-h?{x:d,y:D(t-d)<xe?l:h}:D(r-h)<xe&&xe<n-u?{x:D(l-h)<xe?t:u,y:h}:null),i.site,null)),++s)}function Bi(e,t){return t.angle-e.angle}function Hi(){Ji(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ui(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,c=r.y-s,u=a.x-o,n=2*(l*(t=a.y-s)-c*u);if(!(-we<=n)){var r=l*l+c*c,a=u*u+t*t,c=(t*r-c*a)/n,n=(l*a-u*r)/n,t=n+s,d=Oi.pop()||new Hi;d.arc=e,d.site=i,d.x=c+o,d.y=t+Math.sqrt(c*c+n*n),d.cy=t,e.circle=d;for(var h=null,f=Li._;f;)if(d.y<f.y||d.y===f.y&&d.x<=f.x){if(!f.L){h=f.P;break}f=f.L}else{if(!f.R){h=f;break}f=f.R}Li.insert(h,d),h||(Ci=d)}}}}function Vi(e){var t=e.circle;t&&(t.P||(Ci=t.N),Li.remove(t),Oi.push(t),Ji(t),e.circle=null)}function qi(e){for(var t,n=Mi,r=vr(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(function(e,t){var n=e.b;if(n)return!0;var r=e.a,i=t[0][0],a=t[1][0],o=t[0][1],s=t[1][1],l=e.l,c=e.r,u=l.x,d=l.y,h=c.x,t=c.y,l=(u+h)/2,c=(d+t)/2;if(t===d){if(l<i||a<=l)return;if(h<u){if(r){if(r.y>=s)return}else r={x:l,y:o};n={x:l,y:s}}else{if(r){if(r.y<o)return}else r={x:l,y:s};n={x:l,y:o}}}else if(l=c-(c=(u-h)/(t-d))*l,c<-1||1<c)if(h<u){if(r){if(r.y>=s)return}else r={x:(o-l)/c,y:o};n={x:(s-l)/c,y:s}}else{if(r){if(r.y<o)return}else r={x:(s-l)/c,y:s};n={x:(o-l)/c,y:o}}else if(d<t){if(r){if(r.x>=a)return}else r={x:i,y:c*i+l};n={x:a,y:c*a+l}}else{if(r){if(r.x<i)return}else r={x:a,y:c*a+l};n={x:i,y:c*i+l}}return e.a=r,e.b=n,!0})(t=n[i],e)&&r(t)&&!(D(t.a.x-t.b.x)<xe&&D(t.a.y-t.b.y)<xe)||(t.a=t.b=null,n.splice(i,1))}function Yi(e,t){this.l=e,this.r=t,this.a=this.b=null}function Gi(e,t,n,r){var i=new Yi(e,t);return Mi.push(i),n&&Wi(i,e,t,n),r&&Wi(i,t,e,r),Si[e.i].edges.push(new Xi(i,e,t)),Si[t.i].edges.push(new Xi(i,t,e)),i}function Wi(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Xi(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Zi(){this._=null}function Ji(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function $i(e,t){var n=t,r=t.R,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Qi(e,t){var n=t,r=t.L,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ki(e){for(;e.L;)e=e.L;return e}function ea(e,t){var n,r,i,a=e.sort(ta).pop();for(Mi=[],Si=new Array(e.length),Ei=new Zi,Li=new Zi;;)if(i=Ci,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(Si[a.i]=new Fi(a),Ni(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;!function(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Ii(e);for(var l=a;l.circle&&D(n-l.circle.x)<xe&&D(r-l.circle.cy)<xe;)a=l.P,s.unshift(l),Ii(l),l=a;s.unshift(l),Vi(l);for(var c=o;c.circle&&D(n-c.circle.x)<xe&&D(r-c.circle.cy)<xe;)o=c.N,s.push(c),Ii(c),c=o;s.push(c),Vi(c);for(var u=s.length,d=1;d<u;++d)c=s[d],l=s[d-1],Wi(c.edge,l.site,c.site,i);l=s[0],(c=s[u-1]).edge=Gi(l.site,c.site,null,i),Ui(l),Ui(c)}(i.arc)}t&&(qi(t),ji(t));t={cells:Si,edges:Mi};return Ei=Li=Mi=Si=null,t}function ta(e,t){return t.y-e.y||t.x-e.x}Fi.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Bi),t.length},Xi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zi.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=Ki(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&($i(this,n),n=(e=n).U),n.C=!1,r.C=!0,Qi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Qi(this,n),n=(e=n).U),n.C=!1,r.C=!0,$i(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r=e.U,i=e.L,a=e.R,o=i?a?Ki(a):i:a;if(r?r.L===e?r.L=o:r.R=o:this._=o,i&&a?(n=o.C,o.C=e.C,((o.L=i).U=o)!==a?(r=o.U,o.U=e.U,e=o.R,r.L=e,(o.R=a).U=o):(o.U=r,e=(r=o).R)):(n=e.C,e=o),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,$i(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Qi(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,$i(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Qi(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,$i(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Qi(this,r),e=this._;break}}while(t.C=!0,r=(e=r).U,!e.C);e&&(e.C=!1)}}},P.geom.voronoi=function(e){var t=yi,n=vi,r=t,i=n,c=na;return e?a(e):(a.links=function(t){return ea(h(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(u){var d=[];return ea(h(u)).cells.forEach(function(e,t){for(var n,r,i=e.site,a=e.edges.sort(Bi),o=-1,s=a.length,l=a[s-1].edge,c=l.l===i?l.r:l.l;++o<s;)n=c,c=(l=a[o].edge).l===i?l.r:l.l,t<n.i&&t<c.i&&(r=c,(i.x-r.x)*(n.y-i.y)-(i.x-n.x)*(r.y-i.y)<0)&&d.push([u[t],u[n.i],u[c.i]])}),d},a.x=function(e){return arguments.length?(r=ut(t=e),a):t},a.y=function(e){return arguments.length?(i=ut(n=e),a):n},a.clipExtent=function(e){return arguments.length?(c=null==e?na:e,a):c===na?null:c},a.size=function(e){return arguments.length?a.clipExtent(e&&[[0,0],e]):c===na?null:c&&c[1]},a);function a(r){var i=new Array(r.length),a=c[0][0],o=c[0][1],s=c[1][0],l=c[1][1];return ea(h(r),c).cells.forEach(function(e,t){var n=e.edges,e=e.site;(i[t]=n.length?n.map(function(e){e=e.start();return[e.x,e.y]}):e.x>=a&&e.x<=s&&e.y>=o&&e.y<=l?[[a,l],[s,l],[s,o],[a,o]]:[]).point=r[t]}),i}function h(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/xe)*xe,y:Math.round(i(e,t)/xe)*xe,i:t}})}};var na=[[-1e6,-1e6],[1e6,1e6]];function ra(e){return e.x}function ia(e){return e.y}function aa(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function oa(e,t){e=P.rgb(e),t=P.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,s=t.b-i;return function(e){return"#"+rt(Math.round(n+a*e))+rt(Math.round(r+o*e))+rt(Math.round(i+s*e))}}function sa(e,t){var n,r={},i={};for(n in e)n in t?r[n]=ha(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function la(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function ca(e,r){var t,n,i,a=ua.lastIndex=da.lastIndex=0,o=-1,s=[],l=[];for(e+="",r+="";(t=ua.exec(e))&&(n=da.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(t=t[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:la(t,n)})),a=da.lastIndex;return a<r.length&&(i=r.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}P.geom.delaunay=function(e){return P.geom.voronoi().triangles(e)},P.geom.quadtree=function(e,y,v,b,w){var T,A=yi,k=vi;return(T=arguments.length)?(A=ra,k=ia,3===T&&(w=v,b=y,v=y=0),t(e)):(t.x=function(e){return arguments.length?(A=e,t):A},t.y=function(e){return arguments.length?(k=e,t):k},t.extent=function(e){return arguments.length?(null==e?y=v=b=w=null:(y=+e[0][0],v=+e[0][1],b=+e[1][0],w=+e[1][1]),t):null==y?null:[[y,v],[b,w]]},t.size=function(e){return arguments.length?(null==e?y=v=b=w=null:(y=v=0,b=+e[0],w=+e[1]),t):null==y?null:[b-y,w-v]},t);function t(e){var t,n,r,i,a,o,s,l,c,u=ut(A),d=ut(k);if(null!=y)o=y,s=v,l=b,c=w;else if(l=c=-(o=s=1/0),n=[],r=[],a=e.length,T)for(i=0;i<a;++i)(t=e[i]).x<o&&(o=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>c&&(c=t.y),n.push(t.x),r.push(t.y);else for(i=0;i<a;++i){var h=+u(t=e[i],i),f=+d(t,i);h<o&&(o=h),f<s&&(s=f),l<h&&(l=h),c<f&&(c=f),n.push(h),r.push(f)}var p=l-o,m=c-s;function g(e,t,n,r,i,a,o,s){var l,c,u;isNaN(n)||isNaN(r)||(e.leaf?(l=e.x,c=e.y,null!=l?(D(l-n)+D(c-r)<.01||(u=e.point,e.x=e.y=e.point=null,_(e,u,l,c,i,a,o,s)),_(e,t,n,r,i,a,o,s)):(e.x=n,e.y=r,e.point=t)):_(e,t,n,r,i,a,o,s))}function _(e,t,n,r,i,a,o,s){var l=.5*(i+o),c=.5*(a+s),u=l<=n,d=c<=r,h=d<<1|u;e.leaf=!1,u?i=l:o=l,d?a=c:s=c,g(e=e.nodes[h]||(e.nodes[h]=aa()),t,n,r,i,a,o,s)}m<p?c=s+p:l=o+m;var x=aa();if(x.add=function(e){g(x,e,+u(e,++i),+d(e,i),o,s,l,c)},x.visit=function(e){!function e(t,n,r,i,a,o){{var s,l;t(n,r,i,a,o)||(s=.5*(r+a),l=.5*(i+o),(n=n.nodes)[0]&&e(t,n[0],r,i,s,l),n[1]&&e(t,n[1],s,i,a,l),n[2]&&e(t,n[2],r,l,s,o),n[3]&&e(t,n[3],s,l,a,o))}}(e,x,o,s,l,c)},x.find=function(e){return f=e[0],p=e[1],b=1/0,function e(t,n,r,i,a){if(!(_<n||y<r||i<m||a<g)){var o,s;!(o=t.point)||(s=(s=f-t.x)*s+(s=p-t.y)*s)<b&&(s=Math.sqrt(b=s),m=f-s,g=p-s,_=f+s,y=p+s,v=o);for(var l=t.nodes,c=.5*(n+i),u=.5*(r+a),d=(u<=p)<<1|c<=f,h=d+4;d<h;++d)if(t=l[3&d])switch(3&d){case 0:e(t,n,r,c,u);break;case 1:e(t,c,r,i,u);break;case 2:e(t,n,u,c,a);break;case 3:e(t,c,u,i,a)}}}(x,m=o,g=s,_=l,y=c),v;var f,p,m,g,_,y,v,b},i=-1,null==y){for(;++i<a;)g(x,e[i],n[i],r[i],o,s,l,c);--i}else e.forEach(x.add);return n=r=e=t=null,x}},P.interpolateRgb=oa,P.interpolateObject=sa,P.interpolateNumber=la,P.interpolateString=ca;var ua=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,da=new RegExp(ua.source,"g");function ha(e,t){for(var n,r=P.interpolators.length;0<=--r&&!(n=P.interpolators[r](e,t)););return n}function fa(e,t){for(var n=[],r=[],i=e.length,a=t.length,o=Math.min(e.length,t.length),s=0;s<o;++s)n.push(ha(e[s],t[s]));for(;s<i;++s)r[s]=e[s];for(;s<a;++s)r[s]=t[s];return function(e){for(s=0;s<o;++s)r[s]=n[s](e);return r}}P.interpolate=ha,P.interpolators=[function(e,t){var n=typeof t;return("string"==n?ct.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?oa:ca:t instanceof je?oa:Array.isArray(t)?fa:"object"==n&&isNaN(t)?sa:la)(e,t)}],P.interpolateArray=fa;function pa(){return L}var ma=P.map({linear:pa,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return va},cubic:function(){return ba},sin:function(){return wa},exp:function(){return Ta},circle:function(){return Aa},elastic:function(t,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/Ae*Math.asin(1/t):(t=1,n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*Ae/n)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ka}}),ga=P.map({in:L,out:_a,"in-out":ya,"out-in":function(e){return ya(_a(e))}});function _a(t){return function(e){return 1-t(1-e)}}function ya(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function va(e){return e*e}function ba(e){return e*e*e}function xa(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function wa(e){return 1-Math.cos(e*Me)}function Ta(e){return Math.pow(2,10*(e-1))}function Aa(e){return 1-Math.sqrt(1-e*e)}function ka(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ma(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Sa(e){var t,n,r,i=[e.a,e.b],a=[e.c,e.d],o=Ca(i),s=Ea(i,a),t=Ca(((t=a)[0]+=(r=-s)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Ee,this.translate=[e.e,e.f],this.scale=[o,t],this.skew=t?Math.atan2(s,t)*Ee:0}function Ea(e,t){return e[0]*t[0]+e[1]*t[1]}function Ca(e){var t=Math.sqrt(Ea(e,e));return t&&(e[0]/=t,e[1]/=t),t}P.ease=function(e){var t,n=e.indexOf("-"),r=0<=n?e.slice(0,n):e,n=0<=n?e.slice(n+1):"in",r=ma.get(r)||pa,n=ga.get(n)||L;return t=n(r.apply(null,i.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},P.interpolateHcl=function(e,t){e=P.hcl(e),t=P.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,s=t.l-i;isNaN(o)&&(o=0,r=isNaN(r)?t.c:r);isNaN(a)?(a=0,n=isNaN(n)?t.h:n):180<a?a-=360:a<-180&&(a+=360);return function(e){return Ve(n+a*e,r+o*e,i+s*e)+""}},P.interpolateHsl=function(e,t){e=P.hsl(e),t=P.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,s=t.l-i;isNaN(o)&&(o=0,r=isNaN(r)?t.s:r);isNaN(a)?(a=0,n=isNaN(n)?t.h:n):180<a?a-=360:a<-180&&(a+=360);return function(e){return He(n+a*e,r+o*e,i+s*e)+""}},P.interpolateLab=function(e,t){e=P.lab(e),t=P.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(e){return Ze(n+a*e,r+o*e,i+s*e)+""}},P.interpolateRound=Ma,P.transform=function(e){var n=R.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(e){var t;return null!=e&&(n.setAttribute("transform",e),t=n.transform.baseVal.consolidate()),new Sa(t?t.matrix:La)})(e)},Sa.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var La={a:1,b:0,c:0,d:1,e:0,f:0};function Da(e){return e.length?e.pop()+",":""}function Oa(e,t){var n,r,i,a,o,s=[],l=[];return e=P.transform(e),t=P.transform(t),r=e.translate,i=t.translate,o=s,a=l,r[0]!==i[0]||r[1]!==i[1]?(n=o.push("translate(",null,",",null,")"),a.push({i:n-4,x:la(r[0],i[0])},{i:n-2,x:la(r[1],i[1])})):(i[0]||i[1])&&o.push("translate("+i+")"),a=e.rotate,n=t.rotate,r=s,o=l,a!==n?(180<a-n?n+=360:180<n-a&&(a+=360),o.push({i:r.push(Da(r)+"rotate(",null,")")-2,x:la(a,n)})):n&&r.push(Da(r)+"rotate("+n+")"),i=e.skew,o=t.skew,a=s,r=l,i!==o?r.push({i:a.push(Da(a)+"skewX(",null,")")-2,x:la(i,o)}):o&&a.push(Da(a)+"skewX("+o+")"),n=e.scale,r=t.scale,i=s,a=l,n[0]!==r[0]||n[1]!==r[1]?(o=i.push(Da(i)+"scale(",null,",",null,")"),a.push({i:o-4,x:la(n[0],r[0])},{i:o-2,x:la(n[1],r[1])})):1===r[0]&&1===r[1]||i.push(Da(i)+"scale("+r+")"),e=t=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}function Pa(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Ra(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Ia(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function Na(e){e.fixed|=2}function za(e){e.fixed&=-7}function Fa(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ja(e){e.fixed&=-5}P.interpolateTransform=Oa,P.layout={},P.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(function(e){var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Ia(e),r=Ia(t),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];for(;t!==r;)t=t.parent,i.push(t);var a=i.length;for(;n!==r;)i.splice(a,0,n),n=n.parent;return i}(e[n]));return t}},P.layout.chord=function(){var g,_,y,v,b,x,w,t={},T=0;function e(){var e,t,n,r,i,a={},o=[],s=P.range(v),l=[];for(g=[],_=[],e=0,r=-1;++r<v;){for(t=0,i=-1;++i<v;)t+=y[r][i];o.push(t),l.push(P.range(v)),e+=t}for(b&&s.sort(function(e,t){return b(o[e],o[t])}),x&&l.forEach(function(e,n){e.sort(function(e,t){return x(y[n][e],y[n][t])})}),e=(Ae-T*v)/e,t=0,r=-1;++r<v;){for(n=t,i=-1;++i<v;){var c=s[r],u=l[c][i],d=y[c][u],h=t,f=t+=d*e;a[c+"-"+u]={index:c,subindex:u,startAngle:h,endAngle:f,value:d}}_[c]={index:c,startAngle:n,endAngle:t,value:o[c]},t+=T}for(r=-1;++r<v;)for(i=r-1;++i<v;){var p=a[r+"-"+i],m=a[i+"-"+r];(p.value||m.value)&&g.push(p.value<m.value?{source:m,target:p}:{source:p,target:m})}w&&A()}function A(){g.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(v=(y=e)&&y.length,g=_=null,t):y},t.padding=function(e){return arguments.length?(T=e,g=_=null,t):T},t.sortGroups=function(e){return arguments.length?(b=e,g=_=null,t):b},t.sortSubgroups=function(e){return arguments.length?(x=e,g=null,t):x},t.sortChords=function(e){return arguments.length?(w=e,g&&A(),t):w},t.chords=function(){return g||e(),g},t.groups=function(){return _||e(),_},t},P.layout.force=function(){var d,e,h,f,p,m,i={},g=P.dispatch("start","tick","end"),_=[1,1],y=.9,a=Ba,o=Ha,v=-30,b=Ua,x=.1,w=.64,T=[],A=[];function t(e){e.px=P.event.x,e.py=P.event.y,i.resume()}return i.tick=function(){if((h*=.99)<.005)return d=null,g.end({type:"end",alpha:h=0}),!0;for(var e,t,n,r,i,a,o,s,l=T.length,c=A.length,u=0;u<c;++u)n=(t=A[u]).source,(i=(o=(r=t.target).x-n.x)*o+(s=r.y-n.y)*s)&&(o*=i=h*p[u]*((i=Math.sqrt(i))-f[u])/i,s*=i,r.x-=o*(a=n.weight+r.weight?n.weight/(n.weight+r.weight):.5),r.y-=s*a,n.x+=o*(a=1-a),n.y+=s*a);if((a=h*x)&&(o=_[0]/2,s=_[1]/2,u=-1,a))for(;++u<l;)(t=T[u]).x+=(o-t.x)*a,t.y+=(s-t.y)*a;if(v)for(!function e(t,n,r){var i=0,a=0;t.charge=0;if(!t.leaf)for(var o,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(o=s[c])&&(e(o,n,r),t.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);{var u;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),u=n*r[t.point.index],t.charge+=t.pointCharge=u,i+=u*t.point.x,a+=u*t.point.y)}t.cx=i/t.charge;t.cy=a/t.charge}(e=P.geom.quadtree(T),h,m),u=-1;++u<l;)(t=T[u]).fixed||e.visit(function(s){return function(e,t,n,r){if(e.point!==s){var i,a=e.cx-s.x,o=e.cy-s.y,r=r-t,t=a*a+o*o;if(r*r/w<t)return t<b&&(i=e.charge/t,s.px-=a*i,s.py-=o*i),!0;e.point&&t&&t<b&&(i=e.pointCharge/t,s.px-=a*i,s.py-=o*i)}return!e.charge}}(t));for(u=-1;++u<l;)(t=T[u]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*y,t.y-=(t.py-(t.py=t.y))*y);g.tick({type:"tick",alpha:h})},i.nodes=function(e){return arguments.length?(T=e,i):T},i.links=function(e){return arguments.length?(A=e,i):A},i.size=function(e){return arguments.length?(_=e,i):_},i.linkDistance=function(e){return arguments.length?(a="function"==typeof e?e:+e,i):a},i.distance=i.linkDistance,i.linkStrength=function(e){return arguments.length?(o="function"==typeof e?e:+e,i):o},i.friction=function(e){return arguments.length?(y=+e,i):y},i.charge=function(e){return arguments.length?(v="function"==typeof e?e:+e,i):v},i.chargeDistance=function(e){return arguments.length?(b=e*e,i):Math.sqrt(b)},i.gravity=function(e){return arguments.length?(x=+e,i):x},i.theta=function(e){return arguments.length?(w=e*e,i):Math.sqrt(w)},i.alpha=function(e){return arguments.length?(e=+e,h?0<e?h=e:(d.c=null,d.t=NaN,d=null,g.end({type:"end",alpha:h=0})):0<e&&(g.start({type:"start",alpha:h=e}),d=yt(i.tick)),i):h},i.start=function(){for(var s,e,l=T.length,c=A.length,t=_[0],n=_[1],u=0;u<l;++u)(e=T[u]).index=u,e.weight=0;for(u=0;u<c;++u)"number"==typeof(e=A[u]).source&&(e.source=T[e.source]),"number"==typeof e.target&&(e.target=T[e.target]),++e.source.weight,++e.target.weight;for(u=0;u<l;++u)e=T[u],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(f=[],"function"==typeof a)for(u=0;u<c;++u)f[u]=+a.call(this,A[u],u);else for(u=0;u<c;++u)f[u]=a;if(p=[],"function"==typeof o)for(u=0;u<c;++u)p[u]=+o.call(this,A[u],u);else for(u=0;u<c;++u)p[u]=o;if(m=[],"function"==typeof v)for(u=0;u<l;++u)m[u]=+v.call(this,T[u],u);else for(u=0;u<l;++u)m[u]=v;function r(e,t){if(!s){for(s=new Array(l),a=0;a<l;++a)s[a]=[];for(a=0;a<c;++a){var n=A[a];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var r,i=s[u],a=-1,o=i.length;++a<o;)if(!isNaN(r=i[a][e]))return r;return Math.random()*t}return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(e=e||P.behavior.drag().origin(L).on("dragstart.force",Na).on("drag.force",t).on("dragend.force",za),!arguments.length)return e;this.on("mouseover.force",Fa).on("mouseout.force",ja).call(e)},P.rebind(i,g,"on")};var Ba=20,Ha=1,Ua=1/0;function Va(e,t){return P.rebind(e,t,"sort","children","value"),(e.nodes=e).links=Za,e}function qa(e,t){for(var n,r,i=[e];null!=(e=i.pop());)if(t(e),(r=e.children)&&(n=r.length))for(;0<=--n;)i.push(r[n])}function Ya(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function Ga(e){return e.children}function Wa(e){return e.value}function Xa(e,t){return t.value-e.value}function Za(e){return P.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}P.layout.hierarchy=function(){var s=Xa,l=Ga,c=Wa;function u(e){var t,n,r,i,a=[e],o=[];for(e.depth=0;null!=(t=a.pop());)if(o.push(t),(r=l.call(u,t,t.depth))&&(n=r.length)){for(;0<=--n;)a.push(i=r[n]),i.parent=t,i.depth=t.depth+1;c&&(t.value=0),t.children=r}else c&&(t.value=+c.call(u,t,t.depth)||0),delete t.children;return Ya(e,function(e){var t,n;s&&(t=e.children)&&t.sort(s),c&&(n=e.parent)&&(n.value+=e.value)}),o}return u.sort=function(e){return arguments.length?(s=e,u):s},u.children=function(e){return arguments.length?(l=e,u):l},u.value=function(e){return arguments.length?(c=e,u):c},u.revalue=function(e){return c&&(qa(e,function(e){e.children&&(e.value=0)}),Ya(e,function(e){var t;e.children||(e.value=+c.call(u,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},u},P.layout.partition=function(){var n=P.layout.hierarchy(),r=[1,1];function t(e,t){t=n.call(this,e,t);return function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=a[l],n,s=s.value*r,i),n+=s}}(t[0],0,r[0],r[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}(t[0])),t}return t.size=function(e){return arguments.length?(r=e,t):r},Va(t,n)},P.layout.pie=function(){var d=Number,h=Ja,f=0,p=Ae,m=0;function g(n){var t,e=n.length,r=n.map(function(e,t){return+d.call(g,e,t)}),i=+("function"==typeof f?f.apply(this,arguments):f),a=("function"==typeof p?p.apply(this,arguments):p)-i,o=Math.min(Math.abs(a)/e,+("function"==typeof m?m.apply(this,arguments):m)),s=o*(a<0?-1:1),l=P.sum(r),c=l?(a-e*s)/l:0,e=P.range(e),u=[];return null!=h&&e.sort(h===Ja?function(e,t){return r[t]-r[e]}:function(e,t){return h(n[e],n[t])}),e.forEach(function(e){u[e]={data:n[e],value:t=r[e],startAngle:i,endAngle:i+=t*c+s,padAngle:o}}),u}return g.value=function(e){return arguments.length?(d=e,g):d},g.sort=function(e){return arguments.length?(h=e,g):h},g.startAngle=function(e){return arguments.length?(f=e,g):f},g.endAngle=function(e){return arguments.length?(p=e,g):p},g.padAngle=function(e){return arguments.length?(m=e,g):m},g};var Ja={};function $a(e){return e.x}function Qa(e){return e.y}function Ka(e,t,n){e.y0=t,e.y=n}P.layout.stack=function(){var d=L,h=no,f=ro,p=Ka,m=$a,g=Qa;function _(e,t){if(!(n=e.length))return e;for(var n,r,i,a=(s=e.map(function(e,t){return d.call(_,e,t)})).map(function(e){return e.map(function(e,t){return[m.call(_,e,t),g.call(_,e,t)]})}),o=h.call(_,a,t),s=P.permute(s,o),a=P.permute(a,o),l=f.call(_,a,t),c=s[0].length,u=0;u<c;++u)for(p.call(_,s[0][u],i=l[u],a[0][u][1]),r=1;r<n;++r)p.call(_,s[r][u],i+=a[r-1][u][1],a[r][u][1]);return e}return _.values=function(e){return arguments.length?(d=e,_):d},_.order=function(e){return arguments.length?(h="function"==typeof e?e:eo.get(e)||no,_):h},_.offset=function(e){return arguments.length?(f="function"==typeof e?e:to.get(e)||ro,_):f},_.x=function(e){return arguments.length?(m=e,_):m},_.y=function(e){return arguments.length?(g=e,_):g},_.out=function(e){return arguments.length?(p=e,_):p},_};var eo=P.map({"inside-out":function(e){for(var t,n=e.length,r=e.map(io),i=e.map(ao),a=P.range(n).sort(function(e,t){return r[e]-r[t]}),o=0,s=0,l=[],c=[],u=0;u<n;++u)t=a[u],o<s?(o+=i[t],l.push(t)):(s+=i[t],c.push(t));return c.reverse().concat(l)},reverse:function(e){return P.range(e.length).reverse()},default:no}),to=P.map({silhouette:function(e){for(var t,n,r=e.length,i=e[0].length,a=[],o=0,s=[],l=0;l<i;++l){for(n=t=0;t<r;t++)n+=e[t][l][1];o<n&&(o=n),a.push(n)}for(l=0;l<i;++l)s[l]=(o-a[l])/2;return s},wiggle:function(e){var t,n,r,i,a,o,s,l,c,u=e.length,d=e[0],h=d.length,f=[];for(f[0]=l=c=0,n=1;n<h;++n){for(i=t=0;t<u;++t)i+=e[t][n][1];for(s=d[n][a=t=0]-d[n-1][0];t<u;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}f[n]=l-=i?a/i*s:0,l<c&&(c=l)}for(n=0;n<h;++n)f[n]-=c;return f},expand:function(e){for(var t,n,r=e.length,i=e[0].length,a=1/r,o=[],s=0;s<i;++s){for(n=t=0;t<r;t++)n+=e[t][s][1];if(n)for(t=0;t<r;t++)e[t][s][1]/=n;else for(t=0;t<r;t++)e[t][s][1]=a}for(s=0;s<i;++s)o[s]=0;return o},zero:ro});function no(e){return P.range(e.length)}function ro(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function io(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function ao(e){return e.reduce(oo,0)}function oo(e,t){return e+t[1]}function so(e,t){return lo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function lo(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function co(e){return[P.min(e),P.max(e)]}function uo(e,t){return e.value-t.value}function ho(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function fo(e,t){(e._pack_next=t)._pack_prev=e}function po(e,t){var n=t.x-e.x,r=t.y-e.y,t=e.r+t.r;return n*n+r*r<.999*t*t}function mo(e){if((t=e.children)&&(o=t.length)){var t,n,r,i,a,o,s=1/0,l=-1/0,c=1/0,u=-1/0;if(t.forEach(go),(n=t[0]).x=-n.r,n.y=0,v(n),1<o&&((r=t[1]).x=r.r,r.y=0,v(r),2<o))for(yo(n,r,i=t[2]),v(i),ho(n,i),ho(n._pack_prev=i,r),r=n._pack_next,y=3;y<o;y++){yo(n,r,i=t[y]);for(var d=0,h=1,f=1,p=r._pack_next;p!==r;p=p._pack_next,h++)if(po(p,i)){d=1;break}if(1==d)for(a=n._pack_prev;a!==p._pack_prev&&!po(a,i);a=a._pack_prev,f++);d?(h<f||h==f&&r.r<n.r?fo(n,r=p):fo(n=a,r),y--):(ho(n,i),v(r=i))}for(var m=(s+l)/2,g=(c+u)/2,_=0,y=0;y<o;y++)(i=t[y]).x-=m,i.y-=g,_=Math.max(_,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=_,t.forEach(_o)}function v(e){s=Math.min(e.x-e.r,s),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}}function go(e){e._pack_next=e._pack_prev=e}function _o(e){delete e._pack_next,delete e._pack_prev}function yo(e,t,n){var r,i,a=e.r+n.r,o=t.x-e.x,s=t.y-e.y;a&&(o||s)?(r=t.r+n.r,t=.5+((a*=a)-(r*=r))/(2*(i=o*o+s*s)),i=Math.sqrt(Math.max(0,2*r*(a+i)-(a-=i)*a-r*r))/(2*i),n.x=e.x+t*o+i*s,n.y=e.y+t*s-i*o):(n.x=e.x+a,n.y=e.y)}function vo(e,t){return e.parent==t.parent?1:2}function bo(e){var t=e.children;return t.length?t[0]:e.t}function xo(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function wo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function To(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],t=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),t<0&&(r+=t/2,t=0),{x:n,y:r,dx:i,dy:t}}function Ao(e){var t=e[0],e=e[e.length-1];return t<e?[t,e]:[e,t]}function ko(e){return e.rangeExtent?e.rangeExtent():Ao(e.range())}function Mo(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function So(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Eo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Co}P.layout.histogram=function(){var d=!0,h=Number,f=co,p=so;function n(e,t){for(var n,r,i=[],a=e.map(h,this),o=f.call(this,a,t),s=p.call(this,o,a,t),t=-1,l=a.length,c=s.length-1,u=d?1:1/l;++t<c;)(n=i[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<c)for(t=-1;++t<l;)(r=a[t])>=o[0]&&r<=o[1]&&((n=i[P.bisect(s,r,1,c)-1]).y+=u,n.push(e[t]));return i}return n.value=function(e){return arguments.length?(h=e,n):h},n.range=function(e){return arguments.length?(f=ut(e),n):f},n.bins=function(t){return arguments.length?(p="number"==typeof t?function(e){return lo(e,t)}:ut(t),n):p},n.frequency=function(e){return arguments.length?(d=!!e,n):d},n},P.layout.pack=function(){var o,s=P.layout.hierarchy().sort(uo),l=0,c=[1,1];function t(e,t){var n,r=s.call(this,e,t),i=r[0],e=c[0],t=c[1],a=null==o?Math.sqrt:"function"==typeof o?o:function(){return o};return i.x=i.y=0,Ya(i,function(e){e.r=+a(e.value)}),Ya(i,mo),l&&(n=l*(o?1:Math.max(2*i.r/e,2*i.r/t))/2,Ya(i,function(e){e.r+=n}),Ya(i,mo),Ya(i,function(e){e.r-=n})),function e(t,n,r,i){var a=t.children;t.x=n+=i*t.x;t.y=r+=i*t.y;t.r*=i;if(a)for(var o=-1,s=a.length;++o<s;)e(a[o],n,r,i)}(i,e/2,t/2,o?1:1/Math.max(2*i.r/e,2*i.r/t)),r}return t.size=function(e){return arguments.length?(c=e,t):c},t.radius=function(e){return arguments.length?(o=null==e||"function"==typeof e?e:+e,t):o},t.padding=function(e){return arguments.length?(l=+e,t):l},Va(t,s)},P.layout.tree=function(){var c=P.layout.hierarchy().sort(null).value(null),h=vo,u=[1,1],d=null;function t(e,t){var n,r,i,a,o,s,l=c.call(this,e,t),e=l[0],t=function(e){var t,e={A:null,children:[e]},n=[e];for(;null!=(t=n.pop());)for(var r,i=t.children,a=0,o=i.length;a<o;++a)n.push((i[a]=r={_:i[a],parent:t,children:(r=i[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return e.children[0]}(e);return Ya(t,f),t.parent.m=-t.z,qa(t,p),d?qa(e,m):(qa(i=r=n=e,function(e){e.x<n.x&&(n=e),e.x>r.x&&(r=e),e.depth>i.depth&&(i=e)}),a=h(n,r)/2-n.x,o=u[0]/(r.x+h(r,n)/2+a),s=u[1]/(i.depth||1),qa(e,function(e){e.x=(e.x+a)*o,e.y=e.depth*s})),l}function f(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;t.length?(function(e){var t,n=0,r=0,i=e.children,a=i.length;for(;0<=--a;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e),t=(t[0].z+t[t.length-1].z)/2,r?(e.z=r.z+h(e._,r._),e.m=e.z-t):e.z=t):r&&(e.z=r.z+h(e._,r._)),e.parent.A=function(e,t,n){if(t){for(var r,i=e,a=e,o=t,s=i.parent.children[0],l=i.m,c=a.m,u=o.m,d=s.m;o=xo(o),i=bo(i),o&&i;)s=bo(s),(a=xo(a)).a=e,0<(r=o.z+u-i.z-l+h(o._,i._))&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}(function(e,t,n){return e.a.parent===t.parent?e.a:n}(o,e,n),e,r),l+=r,c+=r),u+=o.m,l+=i.m,d+=s.m,c+=a.m;o&&!xo(a)&&(a.t=o,a.m+=u-c),i&&!bo(s)&&(s.t=i,s.m+=l-d,n=e)}return n}(e,r,e.parent.A||n[0])}function p(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=u[0],e.y=e.depth*u[1]}return t.separation=function(e){return arguments.length?(h=e,t):h},t.size=function(e){return arguments.length?(d=null==(u=e)?m:null,t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null==(u=e)?null:m,t):d?u:null},Va(t,c)},P.layout.cluster=function(){var l=P.layout.hierarchy().sort(null).value(null),c=vo,u=[1,1],d=!1;function t(e,t){var r,n=l.call(this,e,t),i=n[0],a=0;Ya(i,function(e){var t,n=e.children;n&&n.length?(e.x=(t=n).reduce(function(e,t){return e+t.x},0)/t.length,e.y=1+P.max(n,function(e){return e.y})):(e.x=r?a+=c(e,r):0,e.y=0,r=e)});var e=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(i),t=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(i),o=e.x-c(e,t)/2,s=t.x+c(t,e)/2;return Ya(i,d?function(e){e.x=(e.x-i.x)*u[0],e.y=(i.y-e.y)*u[1]}:function(e){e.x=(e.x-o)/(s-o)*u[0],e.y=(1-(i.y?e.y/i.y:1))*u[1]}),n}return t.separation=function(e){return arguments.length?(c=e,t):c},t.size=function(e){return arguments.length?(d=null==(u=e),t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null!=(u=e),t):d?u:null},Va(t,l)},P.layout.treemap=function(){var n,r=P.layout.hierarchy(),u=Math.round,i=[1,1],a=null,c=wo,o=!1,d="squarify",h=.5*(1+Math.sqrt(5));function f(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function p(e){var t=e.children;if(t&&t.length){var n,r,i=c(e),a=[],o=t.slice(),s=1/0,l="slice"===d?i.dx:"dice"===d?i.dy:"slice-dice"===d?1&e.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(f(o,i.dx*i.dy/e.value),a.area=0;0<(r=o.length);)a.push(r=o[r-1]),a.area+=r.area,s="squarify"!==d||(n=function(e,t){var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;for(;++o<s;)(n=e[o].area)&&(n<a&&(a=n),i<n&&(i=n));return t*=t,(r*=r)?Math.max(t*i*h/r,r/(t*a*h)):1/0}(a,l))<=s?(o.pop(),n):(a.area-=a.pop().area,m(a,l,i,!1),l=Math.min(i.dx,i.dy),1/(a.length=a.area=0));a.length&&(m(a,l,i,!0),a.length=a.area=0),t.forEach(p)}}function s(e){var t=e.children;if(t&&t.length){var n,r=c(e),i=t.slice(),a=[];for(f(i,r.dx*r.dy/e.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(m(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);t.forEach(s)}}function m(e,t,n,r){var i,a=-1,o=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)(i=e[a]).x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)(i=e[a]).x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function l(e){var t=n||r(e),e=t[0];return e.x=e.y=0,e.value?(e.dx=i[0],e.dy=i[1]):e.dx=e.dy=0,n&&r.revalue(e),f([e],e.dx*e.dy/e.value),(n?s:p)(e),o&&(n=t),t}return l.size=function(e){return arguments.length?(i=e,l):i},l.padding=function(n){return arguments.length?(c=null==(a=n)?wo:"function"==(t=typeof n)?function(e){var t=n.call(l,e,e.depth);return null==t?wo(e):To(e,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(n=[n,n,n,n]),e),l):a;function e(e){return To(e,n)}var t},l.round=function(e){return arguments.length?(u=e?Math.round:Number,l):u!=Number},l.sticky=function(e){return arguments.length?(o=e,n=null,l):o},l.ratio=function(e){return arguments.length?(h=e,l):h},l.mode=function(e){return arguments.length?(d=e+"",l):d},Va(l,r)},P.random={normal:function(r,i){var e=arguments.length;return e<2&&(i=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+i*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=P.random.normal.apply(P,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=P.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},P.scale={};var Co={floor:L,ceil:L};function Lo(n,e,t,r){var i=[],a=[],o=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(t(n[o-1],n[o])),a.push(r(e[o-1],e[o]));return function(e){var t=P.bisect(n,e,1,s)-1;return a[t](i[t](e))}}function Do(e,t){return P.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Oo(e,t){return So(e,Eo(Po(e,t)[2])),So(e,Eo(Po(e,t)[2])),e}function Po(e,t){null==t&&(t=10);var n=Ao(e),r=n[1]-n[0],e=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),r=t/r*e;return r<=.15?e*=10:r<=.35?e*=5:r<=.75&&(e*=2),n[0]=Math.ceil(n[0]/e)*e,n[1]=Math.floor(n[1]/e)*e+.5*e,n[2]=e,n}function Ro(e,t){return P.range.apply(P,Po(e,t))}function Io(e,t,n){var r,i=Po(e,t);if(n){var a=At.exec(n);if(a.shift(),"s"===a[8]){var o=P.formatPrefix(Math.max(D(i[0]),D(i[1])));return a[7]||(a[7]="."+zo(o.scale(i[2]))),a[8]="f",n=P.format(a.join("")),function(e){return n(o.scale(e))+o.symbol}}a[7]||(a[7]="."+(r=a[8],t=zo((e=i)[2]),r in No?Math.abs(t-zo(Math.max(D(e[0]),D(e[1]))))+ +("e"!==r):t-2*("%"===r))),n=a.join("")}else n=",."+zo(i[2])+"f";return P.format(n)}P.scale.linear=function(){return function e(n,r,i,a){var o,s;function t(){var e=2<Math.min(n.length,r.length)?Lo:Mo,t=a?Ra:Pa;return o=e(n,r,t,i),s=e(r,n,t,ha),l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(Ma)};l.clamp=function(e){return arguments.length?(a=e,t()):a};l.interpolate=function(e){return arguments.length?(i=e,t()):i};l.ticks=function(e){return Ro(n,e)};l.tickFormat=function(e,t){return Io(n,e,t)};l.nice=function(e){return Oo(n,e),t()};l.copy=function(){return e(n,r,i,a)};return t()}([0,1],[0,1],ha,!1)};var No={s:1,g:1,p:1,r:1,e:1};function zo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}P.scale.log=function(){return function e(t,l,c,u){function d(e){return(c?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function h(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function i(e){return t(d(e))}i.invert=function(e){return h(t.invert(e))};i.domain=function(e){return arguments.length?(c=0<=e[0],t.domain((u=e.map(Number)).map(d)),i):u};i.base=function(e){return arguments.length?(l=+e,t.domain(u.map(d)),i):l};i.nice=function(){var e=So(u.map(d),c?Math:jo);return t.domain(e),u=e.map(h),i};i.ticks=function(){var e=Ao(u),t=[],n=e[0],r=e[1],i=Math.floor(d(n)),a=Math.ceil(d(r)),o=l%1?2:l;if(isFinite(a-i)){if(c){for(;i<a;i++)for(var s=1;s<o;s++)t.push(h(i)*s);t.push(h(i))}else for(t.push(h(i));i++<a;)for(s=o-1;0<s;s--)t.push(h(i)*s);for(i=0;t[i]<n;i++);for(a=t.length;t[a-1]>r;a--);t=t.slice(i,a)}return t};i.tickFormat=function(e,n){if(!arguments.length)return Fo;arguments.length<2?n=Fo:"function"!=typeof n&&(n=P.format(n));var r=Math.max(1,l*e/i.ticks().length);return function(e){var t=e/h(Math.round(d(e)));return t*l<l-.5&&(t*=l),t<=r?n(e):""}};i.copy=function(){return e(t.copy(),l,c,u)};return Do(i,t)}(P.scale.linear().domain([0,1]),10,!0,[1,10])};var Fo=P.format(".0e"),jo={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Bo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}P.scale.pow=function(){return function e(t,n,r){var i=Bo(n),a=Bo(1/n);function o(e){return t(i(e))}o.invert=function(e){return a(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(i)),o):r};o.ticks=function(e){return Ro(r,e)};o.tickFormat=function(e,t){return Io(r,e,t)};o.nice=function(e){return o.domain(Oo(r,e))};o.exponent=function(e){return arguments.length?(i=Bo(n=e),a=Bo(1/n),t.domain(r.map(i)),o):n};o.copy=function(){return e(t.copy(),n,r)};return Do(o,t)}(P.scale.linear(),1,[0,1])},P.scale.sqrt=function(){return P.scale.pow().exponent(.5)},P.scale.ordinal=function(){return function e(s,l){var i,c,u;function d(e){return c[((i.get(e)||("range"===l.t?i.set(e,s.push(e)):NaN))-1)%c.length]}function h(t,n){return P.range(s.length).map(function(e){return t+n*e})}d.domain=function(e){if(!arguments.length)return s;s=[],i=new y;for(var t,n=-1,r=e.length;++n<r;)i.has(t=e[n])||i.set(t,s.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(c=e,u=0,l={t:"range",a:arguments},d):c};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],r=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+t);return c=h(n+r*t/2,r),u=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],i=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+t)|0;return c=h(n+Math.round(i*t/2+(r-n-(s.length-1+t)*i)/2),i),u=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],i=e[+r],a=e[1-r],a=(a-i)/(s.length-t+2*n);return c=h(i+a*n,a),r&&c.reverse(),u=a*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],i=e[+r],a=e[1-r],o=Math.floor((a-i)/(s.length-t+2*n));return c=h(i+Math.round((a-i-(s.length-t)*o)/2),o),r&&c.reverse(),u=Math.round(o*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return u};d.rangeExtent=function(){return Ao(l.a[0])};d.copy=function(){return e(s,l)};return d.domain(s)}([],{t:"range",a:[[]]})},P.scale.category10=function(){return P.scale.ordinal().range(Ho)},P.scale.category20=function(){return P.scale.ordinal().range(Uo)},P.scale.category20b=function(){return P.scale.ordinal().range(Vo)},P.scale.category20c=function(){return P.scale.ordinal().range(qo)};var Ho=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nt),Uo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nt),Vo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nt),qo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nt);function Yo(){return 0}P.scale.quantile=function(){return function e(n,r){var i;function t(){var e=0,t=r.length;for(i=[];++e<t;)i[e-1]=P.quantile(n,e/t);return a}function a(e){if(!isNaN(e=+e))return r[P.bisect(i,e)]}a.domain=function(e){return arguments.length?(n=e.map(c).filter(u).sort(l),t()):n};a.range=function(e){return arguments.length?(r=e,t()):r};a.quantiles=function(){return i};a.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]};a.copy=function(){return e(n,r)};return t()}([],[])},P.scale.quantize=function(){return function e(t,n,r){var i,a;function o(e){return r[Math.max(0,Math.min(a,Math.floor(i*(e-t))))]}function s(){return i=r.length/(n-t),a=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};o.range=function(e){return arguments.length?(r=e,s()):r};o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/i+t,e+1/i]};o.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},P.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[P.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},P.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return Ro(n,e)};t.tickFormat=function(e,t){return Io(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},P.svg={},P.svg.arc=function(){var M=Wo,S=Xo,E=Yo,C=Go,L=Zo,D=Jo,O=$o;function t(){var e=Math.max(0,+M.apply(this,arguments)),t=Math.max(0,+S.apply(this,arguments)),n=L.apply(this,arguments)-Me,r=D.apply(this,arguments)-Me,i=Math.abs(r-n),a=r<n?0:1;if(t<e&&(o=t,t=e,e=o),ke<=i)return P(t,a)+(e?P(e,1-a):"")+"Z";var o,s,l,c,u,d,h,f,p,m,g,_,y,v,b,x,w,T=0,A=0,k=[];return(l=(+O.apply(this,arguments)||0)/2)&&(s=C===Go?Math.sqrt(e*e+t*t):+C.apply(this,arguments),a||(A*=-1),t&&(A=Oe(s/t*Math.sin(l))),e&&(T=Oe(s/e*Math.sin(l)))),t?(d=t*Math.cos(n+A),h=t*Math.sin(n+A),f=t*Math.cos(r-A),c=t*Math.sin(r-A),u=Math.abs(r-n-2*A)<=Te?0:1,A&&Qo(d,h,f,c)===a^u&&(x=(n+r)/2,d=t*Math.cos(x),h=t*Math.sin(x),f=c=null)):d=h=0,e?(g=e*Math.cos(r-T),_=e*Math.sin(r-T),y=e*Math.cos(n+T),p=e*Math.sin(n+T),m=Math.abs(n-r+2*T)<=Te?0:1,T&&Qo(g,_,y,p)===1-a^m&&(v=(n+r)/2,g=e*Math.cos(v),_=e*Math.sin(v),y=p=null)):g=_=0,xe<i&&.001<(o=Math.min(Math.abs(t-e)/2,+E.apply(this,arguments)))?(A=e<t^a?0:1,T=x=o,i<Te&&(r=d-(n=null==y?[g,_]:null==f?[d,h]:Ai([d,h],[y,p],[f,c],[g,_]))[0],v=h-n[1],i=f-n[0],b=c-n[1],b=1/Math.sin(Math.acos((r*i+v*b)/(Math.sqrt(r*r+v*v)*Math.sqrt(i*i+b*b)))/2),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),T=Math.min(o,(e-n)/(b-1)),x=Math.min(o,(t-n)/(1+b))),null!=f?(b=Ko(null==y?[g,_]:[y,p],[d,h],t,x,a),w=Ko([f,c],[g,_],t,x,a),o===x?k.push("M",b[0],"A",x,",",x," 0 0,",A," ",b[1],"A",t,",",t," 0 ",1-a^Qo(b[1][0],b[1][1],w[1][0],w[1][1]),",",a," ",w[1],"A",x,",",x," 0 0,",A," ",w[0]):k.push("M",b[0],"A",x,",",x," 0 1,",A," ",w[0])):k.push("M",d,",",h),null!=y?(x=Ko([d,h],[y,p],e,-T,a),w=Ko([g,_],null==f?[d,h]:[f,c],e,-T,a),o===T?k.push("L",w[0],"A",T,",",T," 0 0,",A," ",w[1],"A",e,",",e," 0 ",a^Qo(w[1][0],w[1][1],x[1][0],x[1][1]),",",1-a," ",x[1],"A",T,",",T," 0 0,",A," ",x[0]):k.push("L",w[0],"A",T,",",T," 0 0,",A," ",x[0])):k.push("L",g,",",_)):(k.push("M",d,",",h),null!=f&&k.push("A",t,",",t," 0 ",u,",",a," ",f,",",c),k.push("L",g,",",_),null!=y&&k.push("A",e,",",e," 0 ",m,",",1-a," ",y,",",p)),k.push("Z"),k.join("")}function P(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(M=ut(e),t):M},t.outerRadius=function(e){return arguments.length?(S=ut(e),t):S},t.cornerRadius=function(e){return arguments.length?(E=ut(e),t):E},t.padRadius=function(e){return arguments.length?(C=e==Go?Go:ut(e),t):C},t.startAngle=function(e){return arguments.length?(L=ut(e),t):L},t.endAngle=function(e){return arguments.length?(D=ut(e),t):D},t.padAngle=function(e){return arguments.length?(O=ut(e),t):O},t.centroid=function(){var e=(+M.apply(this,arguments)+ +S.apply(this,arguments))/2,t=(+L.apply(this,arguments)+ +D.apply(this,arguments))/2-Me;return[Math.cos(t)*e,Math.sin(t)*e]},t};var Go="auto";function Wo(e){return e.innerRadius}function Xo(e){return e.outerRadius}function Zo(e){return e.startAngle}function Jo(e){return e.endAngle}function $o(e){return e&&e.padAngle}function Qo(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Ko(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=e[0]+l,d=e[1]+c,h=t[0]+l,f=t[1]+c,i=(u+h)/2,o=(d+f)/2,s=h-u,a=f-d,e=s*s+a*a,t=n-r,r=u*f-h*d,u=(a<0?-1:1)*Math.sqrt(Math.max(0,t*t*e-r*r)),f=(r*a-s*u)/e,h=(-r*s-a*u)/e,d=(r*a+s*u)/e,a=(-r*s+a*u)/e,u=f-i,e=h-o,i=d-i,o=a-o;return i*i+o*o<u*u+e*e&&(f=d,h=a),[[f-l,h-c],[f*n/t,h*n/t]]}function es(c){var u=yi,d=vi,h=cr,f=ns,t=f.key,p=.7;function n(e){var t,n=[],r=[],i=-1,a=e.length,o=ut(u),s=ut(d);function l(){n.push("M",f(c(r),p))}for(;++i<a;)h.call(this,t=e[i],i)?r.push([+o.call(this,t,i),+s.call(this,t,i)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(u=e,n):u},n.y=function(e){return arguments.length?(d=e,n):d},n.defined=function(e){return arguments.length?(h=e,n):h},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?f=e:(f=ts.get(e)||ns).key,n):t},n.tension=function(e){return arguments.length?(p=e,n):p},n}P.svg.line=function(){return es(L)};var ts=P.map({linear:ns,"linear-closed":rs,step:function(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];for(;++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&i.push("H",r[0]);return i.join("")},"step-before":is,"step-after":as,basis:ls,"basis-open":function(e){if(e.length<4)return ns(e);var t,n=[],r=-1,i=e.length,a=[0],o=[0];for(;++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);n.push(cs(hs,a)+","+cs(hs,o)),--r;for(;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),fs(n,a,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];for(;++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);t=[cs(hs,o),",",cs(hs,s)],--r;for(;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),fs(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,c=-1;++c<=n;)r=e[c],i=c/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*l);return ls(e)},cardinal:function(e,t){return e.length<3?ns(e):e[0]+os(e,ss(e,t))},"cardinal-open":function(e,t){return e.length<4?ns(e):e[1]+os(e.slice(1,-1),ss(e,t))},"cardinal-closed":function(e,t){return e.length<3?rs(e):e[0]+os((e.push(e[0]),e),ss([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?ns(e):e[0]+os(e,function(e){var t,n,r,i,a=[],o=function(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=ps(i,a);for(;++t<n;)r[t]=(o+(o=ps(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=ps(e[s],e[s+1]),D(t)<xe?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,9<(i=n*n+r*r)&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));s=-1;for(;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(e))}});function ns(e){return 1<e.length?e.join("L"):e+"Z"}function rs(e){return e.join("L")+"Z"}function is(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function as(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function os(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ns(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),1<t.length){s=t[1],a=e[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,l++)a=e[l],s=t[c],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}return n&&(n=e[l],r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+n[0]+","+n[1]),r}function ss(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function ls(e){if(e.length<3)return ns(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",cs(hs,o),",",cs(hs,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),fs(l,o,s);return e.pop(),l.push("L",r),l.join("")}function cs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ts.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var us=[0,2/3,1/3,0],ds=[0,1/3,2/3,0],hs=[0,1/6,2/3,1/6];function fs(e,t,n){e.push("C",cs(us,t),",",cs(us,n),",",cs(ds,t),",",cs(ds,n),",",cs(hs,t),",",cs(hs,n))}function ps(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ms(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]-Me,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function gs(p){var m=yi,g=yi,_=0,y=vi,v=cr,b=ns,t=b.key,x=b,w="L",T=.7;function n(e){var t,n,r,i=[],a=[],o=[],s=-1,l=e.length,c=ut(m),u=ut(_),d=m===g?function(){return n}:ut(g),h=_===y?function(){return r}:ut(y);function f(){i.push("M",b(p(o),T),w,x(p(a.reverse()),T),"Z")}for(;++s<l;)v.call(this,t=e[s],s)?(a.push([n=+c.call(this,t,s),r=+u.call(this,t,s)]),o.push([+d.call(this,t,s),+h.call(this,t,s)])):a.length&&(f(),a=[],o=[]);return a.length&&f(),i.length?i.join(""):null}return n.x=function(e){return arguments.length?(m=g=e,n):g},n.x0=function(e){return arguments.length?(m=e,n):m},n.x1=function(e){return arguments.length?(g=e,n):g},n.y=function(e){return arguments.length?(_=y=e,n):y},n.y0=function(e){return arguments.length?(_=e,n):_},n.y1=function(e){return arguments.length?(y=e,n):y},n.defined=function(e){return arguments.length?(v=e,n):v},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?b=e:(b=ts.get(e)||ns).key,x=b.reverse||b,w=b.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(T=e,n):T},n}function _s(e){return e.radius}function ys(e){return[e.x,e.y]}function vs(){return 64}function bs(){return"circle"}function xs(e){e=Math.sqrt(e/Te);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}P.svg.line.radial=function(){var e=es(ms);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(is.reverse=as).reverse=is,P.svg.area=function(){return gs(L)},P.svg.area.radial=function(){var e=gs(ms);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},P.svg.chord=function(){var i=ii,a=ai,o=_s,s=Zo,l=Jo;function t(e,t){var n=c(this,i,e,t),r=c(this,a,e,t);return"M"+n.p0+u(n.r,n.p1,n.a1-n.a0)+(e=r,(t=n).a0==e.a0&&t.a1==e.a1?d(n.r,n.p1,n.r,n.p0):d(n.r,n.p1,r.r,r.p0)+u(r.r,r.p1,r.a1-r.a0)+d(r.r,r.p1,n.r,n.p0))+"Z"}function c(e,t,n,r){var i=t.call(e,n,r),t=o.call(e,i,r),n=s.call(e,i,r)-Me,r=l.call(e,i,r)-Me;return{r:t,a0:n,a1:r,p0:[t*Math.cos(n),t*Math.sin(n)],p1:[t*Math.cos(r),t*Math.sin(r)]}}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(Te<n)+",1 "+t}function d(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(o=ut(e),t):o},t.source=function(e){return arguments.length?(i=ut(e),t):i},t.target=function(e){return arguments.length?(a=ut(e),t):a},t.startAngle=function(e){return arguments.length?(s=ut(e),t):s},t.endAngle=function(e){return arguments.length?(l=ut(e),t):l},t},P.svg.diagonal=function(){var r=ii,i=ai,a=ys;function t(e,t){var n=r.call(this,e,t),e=i.call(this,e,t),t=(n.y+e.y)/2,e=[n,{x:n.x,y:t},{x:e.x,y:t},e];return"M"+(e=e.map(a))[0]+"C"+e[1]+" "+e[2]+" "+e[3]}return t.source=function(e){return arguments.length?(r=ut(e),t):r},t.target=function(e){return arguments.length?(i=ut(e),t):i},t.projection=function(e){return arguments.length?(a=e,t):a},t},P.svg.diagonal.radial=function(){var e=P.svg.diagonal(),t=ys,r=e.projection;return e.projection=function(e){return arguments.length?r((n=t=e,function(){var e=n.apply(this,arguments),t=e[0],e=e[1]-Me;return[t*Math.cos(e),t*Math.sin(e)]})):t;var n},e},P.svg.symbol=function(){var n=bs,r=vs;function t(e,t){return(ws.get(n.call(this,e,t))||xs)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=ut(e),t):n},t.size=function(e){return arguments.length?(r=ut(e),t):r},t};var ws=P.map({circle:xs,cross:function(e){e=Math.sqrt(e/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*As)),e=t*As;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(e){e=Math.sqrt(e)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ts),e=t*Ts/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});P.svg.symbolTypes=ws.keys();var Ts=Math.sqrt(3),As=Math.tan(30*Se);Y.transition=function(e){for(var t,n,r=Es||++Ds,i=Rs(e),a=[],o=Cs||{time:Date.now(),ease:xa,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Is(n,u,i,r,o),t.push(n)}return Ss(a,i,r)},Y.interrupt=function(e){return this.each(null==e?ks:Ms(Rs(e)))};var ks=Ms(Rs());function Ms(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ss(e,t,n){return B(e,Ls),e.namespace=t,e.id=n,e}var Es,Cs,Ls=[],Ds=0;function Os(e,r,i,a){var o=e.id,s=e.namespace;return le(e,"function"==typeof i?function(e,t,n){e[s][o].tween.set(r,a(i.call(e,e.__data__,t,n)))}:(i=a(i),function(e){e[s][o].tween.set(r,i)}))}function Ps(e){return null==e&&(e=""),function(){this.textContent=e}}function Rs(e){return null==e?"__transition__":"__transition_"+e+"__"}function Is(a,o,r,s,e){var l,c,u,d,h,f=a[r]||(a[r]={active:0,count:0}),p=f[s];function n(e){var t,n,r=f.active,i=f[r];for(t in i&&(i.timer.c=null,i.timer.t=NaN,--f.count,delete f[r],i.event&&i.event.interrupt.call(a,a.__data__,i.index)),f)+t<s&&((n=f[t]).timer.c=null,n.timer.t=NaN,--f.count,delete f[t]);c.c=m,yt(function(){return c.c&&m(e||1)&&(c.c=null,c.t=NaN),1},0,l),f.active=s,p.event&&p.event.start.call(a,a.__data__,o),h=[],p.tween.forEach(function(e,t){(t=t.call(a,a.__data__,o))&&h.push(t)}),d=p.ease,u=p.duration}function m(e){for(var e=e/u,t=d(e),n=h.length;0<n;)h[--n].call(a,t);if(1<=e)return p.event&&p.event.end.call(a,a.__data__,o),--f.count?delete f[s]:delete a[r],1}p||(l=e.time,c=yt(function(e){var t=p.delay;if(c.t=t+l,t<=e)return n(e-t);c.c=n},0,l),p=f[s]={tween:new y,time:l,timer:c,delay:e.delay,duration:e.duration,ease:e.ease,index:o},e=null,++f.count)}Ls.call=Y.call,Ls.empty=Y.empty,Ls.node=Y.node,Ls.size=Y.size,P.transition=function(e,t){return e&&e.transition?Es?e.transition(t):e:P.selection().transition(e)},(P.transition.prototype=Ls).select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=G(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),Is(n,u,a,i,r[a][i]),t.push(n)):t.push(null)}return Ss(o,a,i)},Ls.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,l=[];e=W(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,f=d.length;++h<f;)if(r=d[h]){a=r[s][o],n=e.call(r,r.__data__,h,c),l.push(t=[]);for(var p=-1,m=n.length;++p<m;)(i=n[p])&&Is(i,p,s,o,a),t.push(i)}return Ss(l,s,o)},Ls.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=se(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return Ss(r,this.namespace,this.id)},Ls.tween=function(t,n){var r=this.id,i=this.namespace;return arguments.length<2?this.node()[i][r].tween.get(t):le(this,null==n?function(e){e[i][r].tween.remove(t)}:function(e){e[i][r].tween.set(t,n)})},Ls.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?Oa:ha,i=P.ns.qualify(e);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}return Os(this,"attr."+e,t,i.local?function(n){return null==n?o:(n+="",function(){var t,e=this.getAttributeNS(i.space,i.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(i.space,i.local,t(e))})})}:function(n){return null==n?a:(n+="",function(){var t,e=this.getAttribute(i);return e!==n&&(t=r(e,n),function(e){this.setAttribute(i,t(e))})})})},Ls.attrTween=function(e,r){var i=P.ns.qualify(e);return this.tween("attr."+e,i.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(i.space,i.local));return n&&function(e){this.setAttributeNS(i.space,i.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(i));return n&&function(e){this.setAttribute(i,n(e))}})},Ls.style=function(r,e,i){var t=arguments.length;if(t<3){if("string"!=typeof r){for(i in t<2&&(e=""),r)this.style(i,r[i],e);return this}i=""}function a(){this.style.removeProperty(r)}return Os(this,"style."+r,e,function(n){return null==n?a:(n+="",function(){var t,e=I(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=ha(e,n),function(e){this.style.setProperty(r,t(e),i)})})})},Ls.styleTween=function(r,i,a){return arguments.length<3&&(a=""),this.tween("style."+r,function(e,t){var n=i.call(this,e,t,I(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),a)}})},Ls.text=function(e){return Os(this,"text",e,Ps)},Ls.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ls.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=P.ease.apply(P,arguments)),le(this,function(e){e[r][n].ease=t}))},Ls.delay=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].delay:le(this,"function"==typeof r?function(e,t,n){e[a][i].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[a][i].delay=r}))},Ls.duration=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].duration:le(this,"function"==typeof r?function(e,t,n){e[a][i].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[a][i].duration=r}))},Ls.each=function(r,t){var i=this.id,a=this.namespace;if(arguments.length<2){var e=Cs,n=Es;try{Es=i,le(this,function(e,t,n){Cs=e[a][i],r.call(e,e.__data__,t,n)})}finally{Cs=e,Es=n}}else le(this,function(e){e=e[a][i];(e.event||(e.event=P.dispatch("start","end","interrupt"))).on(r,t)});return this},Ls.transition=function(){for(var e,t,n,r=this.id,i=++Ds,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&Is(t,u,a,i,{time:(n=t[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ss(o,a,i)},P.svg.axis=function(){var x,w=P.scale.linear(),T=Ns,A=6,k=6,M=3,S=[10],E=null;function n(e){e.each(function(){var e,t=P.select(this),n=this.__chart__||w,r=this.__chart__=w.copy(),i=null==E?r.ticks?r.ticks.apply(r,S):r.domain():E,a=null==x?r.tickFormat?r.tickFormat.apply(r,S):L:x,o=t.selectAll(".tick").data(i,r),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",xe),l=P.transition(o.exit()).style("opacity",xe).remove(),c=P.transition(o.order()).style("opacity",1),u=Math.max(A,0)+M,d=ko(r),h=t.selectAll(".domain").data([0]),f=(h.enter().append("path").attr("class","domain"),P.transition(h));s.append("line"),s.append("text");var p,m,g,_,y,v,b=s.select("line"),i=c.select("line"),t=o.select("text").text(a),h=s.select("text"),o=c.select("text"),a="top"===T||"left"===T?-1:1;"bottom"===T||"top"===T?(e=Fs,p="x",g="y",m="x2",_="y2",t.attr("dy",a<0?"0em":".71em").style("text-anchor","middle"),f.attr("d","M"+d[0]+","+a*k+"V0H"+d[1]+"V"+a*k)):(e=js,p="y",g="x",m="y2",_="x2",t.attr("dy",".32em").style("text-anchor",a<0?"end":"start"),f.attr("d","M"+a*k+","+d[0]+"H0V"+d[1]+"H"+a*k)),b.attr(_,a*A),h.attr(g,a*u),i.attr(m,0).attr(_,a*A),o.attr(p,0).attr(g,a*u),r.rangeBand?(v=(y=r).rangeBand()/2,n=r=function(e){return y(e)+v}):n.rangeBand?n=r:l.call(e,r,n),s.call(e,n,r),c.call(e,r,r)})}return n.scale=function(e){return arguments.length?(w=e,n):w},n.orient=function(e){return arguments.length?(T=e in zs?e+"":Ns,n):T},n.ticks=function(){return arguments.length?(S=h(arguments),n):S},n.tickValues=function(e){return arguments.length?(E=e,n):E},n.tickFormat=function(e){return arguments.length?(x=e,n):x},n.tickSize=function(e){var t=arguments.length;return t?(A=+e,k=+arguments[t-1],n):A},n.innerTickSize=function(e){return arguments.length?(A=+e,n):A},n.outerTickSize=function(e){return arguments.length?(k=+e,n):k},n.tickPadding=function(e){return arguments.length?(M=+e,n):M},n.tickSubdivide=function(){return arguments.length&&n},n};var Ns="bottom",zs={top:1,right:1,bottom:1,left:1};function Fs(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function js(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}P.svg.brush=function(){var _,y,v=F(M,"brushstart","brush","brushend"),b=null,x=null,w=[0,0],T=[0,0],A=!0,k=!0,i=Hs[0];function M(e){e.each(function(){var e=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(i,L);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Bs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",M.empty()?"none":null);var r,e=P.transition(e),t=P.transition(t);b&&(r=ko(b),t.attr("x",r[0]).attr("width",r[1]-r[0]),E(e)),x&&(r=ko(x),t.attr("y",r[0]).attr("height",r[1]-r[0]),C(e)),S(e)})}function S(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+w[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function E(e){e.select(".extent").attr("x",w[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function C(e){e.select(".extent").attr("y",T[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function a(){var l,e,n,r=this,t=P.select(P.event.target),i=v.of(r,arguments),a=P.select(r),o=t.datum(),s=!/^(n|s)$/.test(o)&&b,c=!/^(e|w)$/.test(o)&&x,u=t.classed("extent"),d=_e(r),h=P.mouse(r),f=P.select(I(r)).on("keydown.brush",function(){32==P.event.keyCode&&(u||(l=null,h[0]-=w[1],h[1]-=T[1],u=2),N())}).on("keyup.brush",function(){32==P.event.keyCode&&2==u&&(h[0]+=w[1],h[1]+=T[1],u=0,N())});function p(){var e=P.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),u||(P.event.altKey?(l=l||[(w[0]+w[1])/2,(T[0]+T[1])/2],h[0]=w[+(e[0]<l[0])],h[1]=T[+(e[1]<l[1])]):l=null),s&&m(e,b,0)&&(E(a),t=!0),c&&m(e,x,1)&&(C(a),t=!0),t&&(S(a),i({type:"brush",mode:u?"move":"resize"}))}function m(e,t,n){var r,i=ko(t),a=i[0],o=i[1],s=h[n],t=n?T:w,i=t[1]-t[0];return u&&(a-=s,o-=i+s),e=(n?k:A)?Math.max(a,Math.min(o,e[n])):e[n],u?r=(e+=s)+i:(s=l?Math.max(a,Math.min(o,2*l[n]-e)):s)<e?(r=e,e=s):r=s,(t[0]!=e||t[1]!=r)&&(n?y=null:_=null,t[0]=e,t[1]=r,1)}function g(){p(),a.style("pointer-events","all").selectAll(".resize").style("display",M.empty()?"none":null),P.select("body").style("cursor",null),f.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),d(),i({type:"brushend"})}P.event.changedTouches?f.on("touchmove.brush",p).on("touchend.brush",g):f.on("mousemove.brush",p).on("mouseup.brush",g),a.interrupt().selectAll("*").interrupt(),u?(h[0]=w[0]-h[0],h[1]=T[0]-h[1]):o?(e=+/w$/.test(o),o=+/^n/.test(o),n=[w[1-e]-h[0],T[1-o]-h[1]],h[0]=w[e],h[1]=T[o]):P.event.altKey&&(l=h.slice()),a.style("pointer-events","none").selectAll(".resize").style("display",null),P.select("body").style("cursor",t.style("cursor")),i({type:"brushstart"}),p()}return M.event=function(e){e.each(function(){var r=v.of(this,arguments),i={x:w,y:T,i:_,j:y},e=this.__chart__||i;this.__chart__=i,Es?P.select(this).transition().each("start.brush",function(){_=e.i,y=e.j,w=e.x,T=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=fa(w,i.x),n=fa(T,i.y);return _=y=null,function(e){w=i.x=t(e),T=i.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){_=i.i,y=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},M.x=function(e){return arguments.length?(i=Hs[!(b=e)<<1|!x],M):b},M.y=function(e){return arguments.length?(i=Hs[!b<<1|!(x=e)],M):x},M.clamp=function(e){return arguments.length?(b&&x?(A=!!e[0],k=!!e[1]):b?A=!!e:x&&(k=!!e),M):b&&x?[A,k]:b?A:x?k:null},M.extent=function(e){var t,n,r,i,a;return arguments.length?(b&&(t=e[0],n=e[1],x&&(t=t[0],n=n[0]),_=[t,n],b.invert&&(t=b(t),n=b(n)),n<t&&(a=t,t=n,n=a),t==w[0]&&n==w[1]||(w=[t,n])),x&&(r=e[0],i=e[1],b&&(r=r[1],i=i[1]),y=[r,i],x.invert&&(r=x(r),i=x(i)),i<r&&(a=r,r=i,i=a),r==T[0]&&i==T[1]||(T=[r,i])),M):(b&&(_?(t=_[0],n=_[1]):(t=w[0],n=w[1],b.invert&&(t=b.invert(t),n=b.invert(n)),n<t&&(a=t,t=n,n=a))),x&&(y?(r=y[0],i=y[1]):(r=T[0],i=T[1],x.invert&&(r=x.invert(r),i=x.invert(i)),i<r&&(a=r,r=i,i=a))),b&&x?[[t,r],[n,i]]:b?[t,n]:x&&[r,i])},M.clear=function(){return M.empty()||(w=[0,0],T=[0,0],_=y=null),M},M.empty=function(){return!!b&&w[0]==w[1]||!!x&&T[0]==T[1]},P.rebind(M,v,"on")};var Bs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d=St.format=a.timeFormat,t=d.utc,a=t("%Y-%m-%dT%H:%M:%S.%LZ");function Us(e){return e.toISOString()}function Vs(t,i,e){function a(e){return t(e)}function o(e,t){var n=(e[1]-e[0])/t,r=P.bisect(Ys,n);return r==Ys.length?[i.year,Po(e.map(function(e){return e/31536e6}),t)[2]]:r?i[n/Ys[r-1]<Ys[r]/n?r-1:r]:[Xs,Po(e,t)[2]]}return a.invert=function(e){return qs(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain().map(qs)},a.nice=function(t,n){var e=a.domain(),r=Ao(e),r=null==t?o(r,10):"number"==typeof t&&o(r,t);function i(e){return!isNaN(e)&&!t.range(e,qs(+e+1),n).length}return r&&(t=r[0],n=r[1]),a.domain(So(e,1<n?{floor:function(e){for(;i(e=t.floor(e));)e=qs(e-1);return e},ceil:function(e){for(;i(e=t.ceil(e));)e=qs(+e+1);return e}}:t))},a.ticks=function(e,t){var n=Ao(a.domain()),r=null==e?o(n,10):"number"==typeof e?o(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],qs(+n[1]+1),t<1?1:t)},a.tickFormat=function(){return e},a.copy=function(){return Vs(t.copy(),i,e)},Do(a,t)}function qs(e){return new Date(e)}d.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Us:a,Us.parse=function(e){e=new Date(e);return isNaN(e)?null:e},Us.toString=a.toString,St.second=Dt(function(e){return new Et(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),St.seconds=St.second.range,St.seconds.utc=St.second.utc.range,St.minute=Dt(function(e){return new Et(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),St.minutes=St.minute.range,St.minutes.utc=St.minute.utc.range,St.hour=Dt(function(e){var t=e.getTimezoneOffset()/60;return new Et(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),St.hours=St.hour.range,St.hours.utc=St.hour.utc.range,St.month=Dt(function(e){return(e=St.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),St.months=St.month.range,St.months.utc=St.month.utc.range;var Ys=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gs=[[St.second,1],[St.second,5],[St.second,15],[St.second,30],[St.minute,1],[St.minute,5],[St.minute,15],[St.minute,30],[St.hour,1],[St.hour,3],[St.hour,6],[St.hour,12],[St.day,1],[St.day,2],[St.week,1],[St.month,1],[St.month,3],[St.year,1]],Ws=d.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",cr]]),Xs={range:function(e,t,n){return P.range(Math.ceil(e/n)*n,+t,n).map(qs)},floor:L,ceil:L};Gs.year=St.year,St.scale=function(){return Vs(P.scale.linear(),Gs,Ws)};var Zs=Gs.map(function(e){return[e[0].utc,e[1]]}),Js=t.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",cr]]);function $s(e){return JSON.parse(e.responseText)}function Qs(e){var t=R.createRange();return t.selectNode(R.body),t.createContextualFragment(e.responseText)}Zs.year=St.year.utc,St.scale.utc=function(){return Vs(P.scale.linear(),Zs,Js)},P.text=dt(function(e){return e.responseText}),P.json=function(e,t){return ht(e,"application/json",$s,t)},P.html=function(e,t){return ht(e,"text/html",Qs,t)},P.xml=dt(function(e){return e.responseXML}),"object"==typeof Ks&&Ks.exports?Ks.exports=P:this.d3=P}.apply(self)},{}],21:[function(w,T,e){!function(x){!function(){"use strict";var e=w("object-assign");function a(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function o(e){return x.Buffer&&"function"==typeof x.Buffer.isBuffer?x.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var u=w("util/"),r=Object.prototype.hasOwnProperty,d=Array.prototype.slice,t="foo"===function(){}.name;function s(e){return Object.prototype.toString.call(e)}function l(e){return!o(e)&&("function"==typeof x.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var c=T.exports=m,n=/\s*function\s+([^\(\s]*)\s*/;function i(e){if(u.isFunction(e)){if(t)return e.name;e=e.toString().match(n);return e&&e[1]}}function h(e,t){return"string"!=typeof e||e.length<t?e:e.slice(0,t)}function f(e){if(t||!u.isFunction(e))return u.inspect(e);e=i(e);return"[Function"+(e?": "+e:"")+"]"}function p(e,t,n,r,i){throw new c.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function m(e,t){e||p(e,!0,t,"==",c.ok)}function g(e,t,n,r){if(e===t)return!0;if(o(e)&&o(t))return 0===a(e,t);if(u.isDate(e)&&u.isDate(t))return e.getTime()===t.getTime();if(u.isRegExp(e)&&u.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===a(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(u.isPrimitive(e)||u.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=_(e),a=_(t);if(i&&!a||!i&&a)return!1;if(i)return e=d.call(e),t=d.call(t),g(e,t,n);var o,s,l=b(e),c=b(t);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;0<=s;s--)if(l[s]!==c[s])return!1;for(s=l.length-1;0<=s;s--)if(o=l[s],!g(e[o],t[o],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function y(e,t){if(e&&t){if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return 1}catch(e){}return Error.isPrototypeOf(t)?void 0:!0===t.call({},e)}}function v(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&p(i,n,"Missing expected exception"+r);var a="string"==typeof r,t=!e&&i&&!n;if((!e&&u.isError(i)&&a&&y(i,n)||t)&&p(i,n,"Got unwanted exception"+r),e&&i&&n&&!y(i,n)||!e&&i)throw i}c.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=h(f((t=this).actual),128)+" "+t.operator+" "+h(f(t.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||p;Error.captureStackTrace?Error.captureStackTrace(this,t):(e=new Error).stack&&(e=e.stack,t=i(t),0<=(t=e.indexOf("\n"+t))&&(t=e.indexOf("\n",t+1),e=e.substring(t+1)),this.stack=e)},u.inherits(c.AssertionError,Error),c.fail=p,c.ok=m,c.equal=function(e,t,n){e!=t&&p(e,t,n,"==",c.equal)},c.notEqual=function(e,t,n){e==t&&p(e,t,n,"!=",c.notEqual)},c.deepEqual=function(e,t,n){g(e,t,!1)||p(e,t,n,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(e,t,n){g(e,t,!0)||p(e,t,n,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(e,t,n){g(e,t,!1)&&p(e,t,n,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=function e(t,n,r){g(t,n,!0)&&p(t,n,r,"notDeepStrictEqual",e)},c.strictEqual=function(e,t,n){e!==t&&p(e,t,n,"===",c.strictEqual)},c.notStrictEqual=function(e,t,n){e===t&&p(e,t,n,"!==",c.notStrictEqual)},c.throws=function(e,t,n){v(!0,e,t,n)},c.doesNotThrow=function(e,t,n){v(!1,e,t,n)},c.ifError=function(e){if(e)throw e},c.strict=e(function e(t,n){t||p(t,!0,n,"==",e)},c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual}),c.strict.strict=c.strict;var b=Object.keys||function(e){var t,n=[];for(t in e)r.call(e,t)&&n.push(t);return n}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":71,"util/":24}],22:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],23:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],24:[function(M,e,S){!function(A,k){!function(){var s=/%[sdj%]/g;S.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),o=r[n];n<i;o=r[++n])p(o)||!v(o)?a+=" "+o:a+=" "+l(o);return a},S.deprecate=function(e,t){if(_(k.process))return function(){return S.deprecate(e,t).apply(this,arguments)};if(!0===A.noDeprecation)return e;var n=!1;return function(){if(!n){if(A.throwDeprecation)throw new Error(t);A.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function l(e,t){var n={seen:[],stylize:a};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),f(t)?n.showHidden=t:t&&S._extend(n,t),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),c(n,e,n.depth)}function i(e,t){t=l.styles[t];return t?"["+l.colors[t][0]+"m"+e+"["+l.colors[t][1]+"m":e}function a(e,t){return e}function c(t,n,r){if(t.customInspect&&n&&w(n.inspect)&&n.inspect!==S.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return e=!g(e)?c(t,e,r):e}var i=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):p(t)?e.stylize("null","null"):void 0}(t,n);if(i)return i;var a,e=Object.keys(n),o=(a={},e.forEach(function(e,t){a[e]=!0}),a);if(t.showHidden&&(e=Object.getOwnPropertyNames(n)),x(n)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return u(n);if(0===e.length){if(w(n)){var s=n.name?": "+n.name:"";return t.stylize("[Function"+s+"]","special")}if(y(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return u(n)}var i="",l=!1,s=["{","}"];return h(n)&&(l=!0,s=["[","]"]),w(n)&&(i=" [Function"+(n.name?": "+n.name:"")+"]"),y(n)&&(i=" "+RegExp.prototype.toString.call(n)),b(n)&&(i=" "+Date.prototype.toUTCString.call(n)),x(n)&&(i=" "+u(n)),0!==e.length||l&&0!=n.length?r<0?y(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),e=l?function(t,n,r,i,e){for(var a=[],o=0,s=n.length;o<s;++o)T(n,String(o))?a.push(d(t,n,r,i,String(o),!0)):a.push("");return e.forEach(function(e){e.match(/^\d+$/)||a.push(d(t,n,r,i,e,!0))}),a}(t,n,r,o,e):e.map(function(e){return d(t,n,r,o,e,l)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(e,i,s)):s[0]+i+s[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,a){var o,s,t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(t.get?s=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(s=e.stylize("[Setter]","special")),T(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(t.value)<0?-1<(s=p(n)?c(e,t.value,null):c(e,t.value,n-1)).indexOf("\n")&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),_(o)){if(a&&i.match(/^\d+$/))return s;o=(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(o,"string"))}return o+": "+s}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function p(e){return null===e}function m(e){return"number"==typeof e}function g(e){return"string"==typeof e}function _(e){return void 0===e}function y(e){return v(e)&&"[object RegExp]"===t(e)}function v(e){return"object"==typeof e&&null!==e}function b(e){return v(e)&&"[object Date]"===t(e)}function x(e){return v(e)&&("[object Error]"===t(e)||e instanceof Error)}function w(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}S.debuglog=function(t){var n;return _(e)&&(e=A.env.NODE_DEBUG||""),t=t.toUpperCase(),r[t]||(new RegExp("\\b"+t+"\\b","i").test(e)?(n=A.pid,r[t]=function(){var e=S.format.apply(S,arguments);console.error("%s %d: %s",t,n,e)}):r[t]=function(){}),r[t]},(S.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},S.isArray=h,S.isBoolean=f,S.isNull=p,S.isNullOrUndefined=function(e){return null==e},S.isNumber=m,S.isString=g,S.isSymbol=function(e){return"symbol"==typeof e},S.isUndefined=_,S.isRegExp=y,S.isObject=v,S.isDate=b,S.isError=x,S.isFunction=w,S.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},S.isBuffer=M("./support/isBuffer");var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),o[e.getMonth()],t].join(" ")),S.format.apply(S,arguments))},S.inherits=M("inherits"),S._extend=function(e,t){if(!t||!v(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}.call(this)}.call(this,M("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":23,_process:96,inherits:22}],25:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),e=t[0],t=t[1];return 3*(e+t)/4-t},n.toByteArray=function(e){var t,n,r=u(e),i=r[0],r=r[1],a=new c(function(e,t){return 3*(e+t)/4-t}(i,r)),o=0,s=0<r?i-4:i;for(n=0;n<s;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;2===r&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,a[o++]=255&t);1===r&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t);return a},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],a=0,o=n-r;a<o;a+=16383)i.push(function(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return i.join("")}(e,a,o<a+16383?o:a+16383));1==r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)s[i]=r[i],l[r.charCodeAt(i)]=i;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],26:[function(e,t,n){},{}],27:[function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,l=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(i,a){return new Promise(function(e,t){function n(){void 0!==r&&i.removeListener("error",r),e([].slice.call(arguments))}var r;"error"!==a&&(r=function(e){i.removeListener(a,n),t(e)},i.once("error",r)),i.once(a,n)})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,a;return c(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),a=i[t]),void 0===a?(a=i[t]=n,++e._eventsCount):("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),0<(n=u(e))&&a.length>n&&!a.warned&&(a.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,n=n,console&&console.warn&&console.warn(n))),e}function h(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function f(e,t,n){e=e._events;if(void 0===e)return[];t=e[t];return void 0===t?[]:"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):m(t,t.length)}function p(e){var t=this._events;if(void 0!==t){e=t[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r,i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){if((r=0<t.length?t[0]:r)instanceof Error)throw r;i=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw i.context=r,i}e=a[e];if(void 0===e)return!1;if("function"==typeof e)l(e,this,t);else for(var o=e.length,s=m(e,o),n=0;n<o;++n)l(s[n],this,t);return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},{}],28:[function(D,e,O){!function(e){!function(){"use strict";var s=D("base64-js"),a=D("ieee754");O.Buffer=d,O.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},O.INSPECT_MAX_BYTES=50;var t=2147483647;function i(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=d.prototype,e}function d(e,t,n){if("number"!=typeof e)return r(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function r(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=i(n),t=r.write(e,t);t!==n&&(r=r.slice(0,t));return r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(C(e,ArrayBuffer)||e&&C(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');n=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return n.__proto__=d.prototype,n}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);r=function(e){if(d.isBuffer(e)){var t=0|u(e.length),n=i(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||L(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return o(e),i(e<0?0:0|u(e))}function c(e){for(var t=e.length<0?0:0|u(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function h(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||C(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return S(e).length;default:if(i)return r?-1:M(e).length;t=(""+t).toLowerCase(),i=!0}}function n(e,t,n){var r,i,a,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",a=t;a<n;++a)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[a]);return i}(this,t,n);case"utf8":case"utf-8":return y(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,a=n,0===(i=t)&&a===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=L(n=+n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var a=1,o=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i)for(var c=-1,u=n;u<o;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===s)return c*a}else-1!==c&&(u-=u-c),c=-1;else for(u=n=o<n+s?o-s:n;0<=u;u--){for(var d=!0,h=0;h<s;h++)if(l(e,u+h)!==l(t,h)){d=!1;break}if(d)return u}return-1}function g(e,t,n,r){return E(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return E(function(e,t){for(var n,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function y(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,c=e[i],u=null,d=239<c?4:223<c?3:191<c?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(a=e[i+1]))&&127<(l=(31&c)<<6|63&a)&&(u=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&c)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(u=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=v)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=v));return n}(r)}O.kMaxLength=t,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=r,d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(e,t,n){return t=t,n=n,o(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)},d.allocUnsafe=l,d.allocUnsafeSlow=l,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(C(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),C(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=d.allocUnsafe(t),r=0,i=0;i<e.length;++i){var a=e[i];if(C(a,Uint8Array)&&(a=d.from(a)),!d.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},d.byteLength=h,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?y(this,0,e):n.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",t=O.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},d.prototype.compare=function(e,t,n,r,i){if(C(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),u=0;u<s;++u)if(l[u]!==c[u]){a=l[u],o=c[u];break}return a<o?-1:o<a?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var a,o,s,l=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i),(i=t.length)/2<r&&(r=i/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(L(o))return a;e[n+a]=o}return a}(this,e,t,n);case"utf8":case"utf-8":return o=t,s=n,E(M(e,(a=this).length-o),a,o,s);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return g(this,e,t,n);case"base64":return a=this,o=t,s=n,E(S(e),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function b(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,r,i,a){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function w(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,r,i){return t=+t,n>>>=0,i||w(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function A(e,t,n,r,i){return t=+t,n>>>=0,i||w(e,0,n,8),a.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);t=this.subarray(e,t);return t.__proto__=d.prototype,t},d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},d.prototype.readInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},d.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),a.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),a.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),a.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),a.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||x(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||x(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||x(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,a=1,o=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||x(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,a=1,o=0;for(this[t+i]=255&e;0<=--i&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return A(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return A(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;0<=a;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(e=i))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else{var o=d.isBuffer(e)?e:d.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var k=/[^+/0-9A-Za-z-_]/g;function M(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function S(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function E(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function C(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function L(e){return e!=e}}.call(this)}.call(this,D("buffer").Buffer)},{"base64-js":25,buffer:28,ieee754:64}],29:[function(e,t,n){var r,i;r=this,i=function(t,k){"use strict";function M(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function S(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function E(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,i=e.date,a=e.time,t=e.periods,n=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=L(t),u=D(t),d=L(n),h=D(n),f=L(o),p=D(o),m=L(s),g=D(s),_=L(l),y=D(l),v={a:function(e){return o[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Q,e:Q,f:re,H:K,I:ee,j:te,L:ne,m:ie,M:ae,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Pe,s:Re,S:oe,u:se,U:le,V:ce,w:ue,W:de,x:null,X:null,y:he,Y:fe,Z:pe,"%":Oe},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:me,e:me,f:be,H:ge,I:_e,j:ye,L:ve,m:xe,M:we,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Pe,s:Re,S:Te,u:Ae,U:ke,V:Me,w:Se,W:Ee,x:null,X:null,y:Ce,Y:Le,Z:De,"%":Oe},x={a:function(e,t,n){t=f.exec(t.slice(n));return t?(e.w=p[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=d.exec(t.slice(n));return t?(e.w=h[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=_.exec(t.slice(n));return t?(e.m=y[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=m.exec(t.slice(n));return t?(e.m=g[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return A(e,r,t,n)},d:U,e:U,f:X,H:q,I:q,j:V,L:W,m:H,M:Y,p:function(e,t,n){t=c.exec(t.slice(n));return t?(e.p=u[t[0].toLowerCase()],n+t[0].length):-1},q:B,Q:J,s:$,S:G,u:P,U:R,V:I,w:O,W:N,x:function(e,t,n){return A(e,i,t,n)},X:function(e,t,n){return A(e,a,t,n)},y:F,Y:z,Z:j,"%":Z};function w(l,c){return function(e){var t,n,r,i=[],a=-1,o=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===l.charCodeAt(a)&&(i.push(l.slice(o,a)),null!=(n=C[t=l.charAt(++a)])?t=l.charAt(++a):n="e"===t?" ":"0",(r=c[t])&&(t=r(e,n)),i.push(t),o=a+1);return i.push(l.slice(o,a)),i.join("")}}function T(i,a){return function(e){var t,n,r=E(1900,void 0,1);if(A(r,i,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!a||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=S(E(r.y,0,1))).getUTCDay())||0===n?k.utcMonday.ceil(t):k.utcMonday(t),t=k.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=M(E(r.y,0,1))).getDay())||0===n?k.timeMonday.ceil(t):k.timeMonday(t),t=k.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?S(E(r.y,0,1)).getUTCDay():M(E(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,S(r)):M(r)}}function A(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in C?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return v.x=w(i,v),v.X=w(a,v),v.c=w(r,v),b.x=w(i,b),b.X=w(a,b),b.c=w(r,b),{format:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=T(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=T(e+="",!0);return t.toString=function(){return e},t}}}var r,C={"-":"",_:" ",0:"0"},i=/^\s*\d+/,a=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",e=i.length;return r+(e<n?new Array(n-e+1).join(t)+i:i)}function l(e){return e.replace(o,"\\$&")}function L(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function D(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function O(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function P(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function R(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function I(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function N(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function z(e,t,n){t=i.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function F(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function j(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function B(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function H(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function U(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function V(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function q(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function Y(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function G(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function W(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function X(e,t,n){t=i.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function Z(e,t,n){t=a.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function J(e,t,n){t=i.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function $(e,t,n){t=i.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function Q(e,t){return s(e.getDate(),t,2)}function K(e,t){return s(e.getHours(),t,2)}function ee(e,t){return s(e.getHours()%12||12,t,2)}function te(e,t){return s(1+k.timeDay.count(k.timeYear(e),e),t,3)}function ne(e,t){return s(e.getMilliseconds(),t,3)}function re(e,t){return ne(e,t)+"000"}function ie(e,t){return s(e.getMonth()+1,t,2)}function ae(e,t){return s(e.getMinutes(),t,2)}function oe(e,t){return s(e.getSeconds(),t,2)}function se(e){e=e.getDay();return 0===e?7:e}function le(e,t){return s(k.timeSunday.count(k.timeYear(e)-1,e),t,2)}function ce(e,t){var n=e.getDay();return e=4<=n||0===n?k.timeThursday(e):k.timeThursday.ceil(e),s(k.timeThursday.count(k.timeYear(e),e)+(4===k.timeYear(e).getDay()),t,2)}function ue(e){return e.getDay()}function de(e,t){return s(k.timeMonday.count(k.timeYear(e)-1,e),t,2)}function he(e,t){return s(e.getFullYear()%100,t,2)}function fe(e,t){return s(e.getFullYear()%1e4,t,4)}function pe(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function me(e,t){return s(e.getUTCDate(),t,2)}function ge(e,t){return s(e.getUTCHours(),t,2)}function _e(e,t){return s(e.getUTCHours()%12||12,t,2)}function ye(e,t){return s(1+k.utcDay.count(k.utcYear(e),e),t,3)}function ve(e,t){return s(e.getUTCMilliseconds(),t,3)}function be(e,t){return ve(e,t)+"000"}function xe(e,t){return s(e.getUTCMonth()+1,t,2)}function we(e,t){return s(e.getUTCMinutes(),t,2)}function Te(e,t){return s(e.getUTCSeconds(),t,2)}function Ae(e){e=e.getUTCDay();return 0===e?7:e}function ke(e,t){return s(k.utcSunday.count(k.utcYear(e)-1,e),t,2)}function Me(e,t){var n=e.getUTCDay();return e=4<=n||0===n?k.utcThursday(e):k.utcThursday.ceil(e),s(k.utcThursday.count(k.utcYear(e),e)+(4===k.utcYear(e).getUTCDay()),t,2)}function Se(e){return e.getUTCDay()}function Ee(e,t){return s(k.utcMonday.count(k.utcYear(e)-1,e),t,2)}function Ce(e,t){return s(e.getUTCFullYear()%100,t,2)}function Le(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function De(){return"+0000"}function Oe(){return"%"}function Pe(e){return+e}function Re(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var c="%Y-%m-%dT%H:%M:%S.%LZ";var u=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(c);c=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:t.utcParse(c);t.isoFormat=u,t.isoParse=c,t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-time")):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":30}],30:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var i=new Date,l=new Date;function c(a,o,n,r){function s(e){return a(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return a(e=new Date(+e)),e},s.ceil=function(e){return a(e=new Date(e-1)),o(e,1),a(e),e},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,n){var r,i=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return i;for(;i.push(r=new Date(+e)),o(e,n),a(e),r<e&&e<t;);return i},s.filter=function(n){return c(function(e){if(e<=e)for(;a(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},n&&(s.count=function(e,t){return i.setTime(+e),l.setTime(+t),a(i),a(l),Math.floor(n(i,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var t=c(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?c(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null};var n=t.range,r=c(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),a=r.range,o=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),s=o.range,u=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),d=u.range,h=c(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=h.range;function p(t){return c(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var m=p(0),g=p(1),_=p(2),y=p(3),v=p(4),b=p(5),x=p(6),w=m.range,T=g.range,A=_.range,k=y.range,M=v.range,S=b.range,E=x.range,C=c(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),L=C.range,D=c(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});D.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var O=D.range,P=c(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),R=P.range,I=c(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),N=I.range,z=c(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),F=z.range;function j(t){return c(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var B=j(0),H=j(1),U=j(2),V=j(3),q=j(4),Y=j(5),G=j(6),W=B.range,X=H.range,Z=U.range,J=V.range,$=q.range,Q=Y.range,K=G.range,ee=c(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),te=ee.range,ne=c(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ne.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var re=ne.range;e.timeDay=h,e.timeDays=f,e.timeFriday=b,e.timeFridays=S,e.timeHour=u,e.timeHours=d,e.timeInterval=c,e.timeMillisecond=t,e.timeMilliseconds=n,e.timeMinute=o,e.timeMinutes=s,e.timeMonday=g,e.timeMondays=T,e.timeMonth=C,e.timeMonths=L,e.timeSaturday=x,e.timeSaturdays=E,e.timeSecond=r,e.timeSeconds=a,e.timeSunday=m,e.timeSundays=w,e.timeThursday=v,e.timeThursdays=M,e.timeTuesday=_,e.timeTuesdays=A,e.timeWednesday=y,e.timeWednesdays=k,e.timeWeek=m,e.timeWeeks=w,e.timeYear=D,e.timeYears=O,e.utcDay=z,e.utcDays=F,e.utcFriday=Y,e.utcFridays=Q,e.utcHour=I,e.utcHours=N,e.utcMillisecond=t,e.utcMilliseconds=n,e.utcMinute=P,e.utcMinutes=R,e.utcMonday=H,e.utcMondays=X,e.utcMonth=ee,e.utcMonths=te,e.utcSaturday=G,e.utcSaturdays=K,e.utcSecond=r,e.utcSeconds=a,e.utcSunday=B,e.utcSundays=W,e.utcThursday=q,e.utcThursdays=$,e.utcTuesday=U,e.utcTuesdays=Z,e.utcWednesday=V,e.utcWednesdays=J,e.utcWeek=B,e.utcWeeks=W,e.utcYear=ne,e.utcYears=re,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):i((r=r||self).d3=r.d3||{})},{}],31:[function(e,t,n){"use strict";var r=e("is-string-blank");t.exports=function(e){var t=typeof e;if("string"==t){var n=e;if(0===(e=+e)&&r(n))return!1}else if("number"!=t)return!1;return e-e<1}},{"is-string-blank":68}],32:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],t=t[15];return e[0]=s*(h*t-f*g)-d*(l*t-c*g)+m*(l*f-c*h),e[1]=-(r*(h*t-f*g)-d*(i*t-a*g)+m*(i*f-a*h)),e[2]=r*(l*t-c*g)-s*(i*t-a*g)+m*(i*c-a*l),e[3]=-(r*(l*f-c*h)-s*(i*f-a*h)+d*(i*c-a*l)),e[4]=-(o*(h*t-f*g)-u*(l*t-c*g)+p*(l*f-c*h)),e[5]=n*(h*t-f*g)-u*(i*t-a*g)+p*(i*f-a*h),e[6]=-(n*(l*t-c*g)-o*(i*t-a*g)+p*(i*c-a*l)),e[7]=n*(l*f-c*h)-o*(i*f-a*h)+u*(i*c-a*l),e[8]=o*(d*t-f*m)-u*(s*t-c*m)+p*(s*f-c*d),e[9]=-(n*(d*t-f*m)-u*(r*t-a*m)+p*(r*f-a*d)),e[10]=n*(s*t-c*m)-o*(r*t-a*m)+p*(r*c-a*s),e[11]=-(n*(s*f-c*d)-o*(r*f-a*d)+u*(r*c-a*s)),e[12]=-(o*(d*g-h*m)-u*(s*g-l*m)+p*(s*h-l*d)),e[13]=n*(d*g-h*m)-u*(r*g-i*m)+p*(r*h-i*d),e[14]=-(n*(s*g-l*m)-o*(r*g-i*m)+p*(r*l-i*s)),e[15]=n*(s*h-l*d)-o*(r*h-i*d)+u*(r*l-i*s),e}},{}],33:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],34:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],35:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],36:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],e=e[15];return(t*o-n*a)*(d*e-h*m)-(t*s-r*a)*(u*e-h*p)+(t*l-i*a)*(u*m-d*p)+(n*s-r*o)*(c*e-h*f)-(n*l-i*o)*(c*m-d*f)+(r*l-i*s)*(c*p-u*f)}},{}],37:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,t=r*s,n=i*o,r=i*s,i=i*l,o=a*o,s=a*s,l=a*l;return e[0]=1-t-i,e[1]=u+l,e[2]=n-s,e[3]=0,e[4]=u-l,e[5]=1-c-i,e[6]=r+o,e[7]=0,e[8]=n+s,e[9]=r-o,e[10]=1-c-t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],38:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.sqrt(r*r+i*i+a*a);if(Math.abs(o)<1e-6)return null;return r*=o=1/o,i*=o,a*=o,n=Math.sin(t),o=Math.cos(t),t=1-o,e[0]=r*r*t+o,e[1]=i*r*t+a*n,e[2]=a*r*t-i*n,e[3]=0,e[4]=r*i*t-a*n,e[5]=i*i*t+o,e[6]=a*i*t+r*n,e[7]=0,e[8]=r*a*t+i*n,e[9]=i*a*t-r*n,e[10]=a*a*t+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],39:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,c=a+a,u=r*s,d=r*l,t=r*c,r=i*l,i=i*c,a=a*c,s=o*s,l=o*l,c=o*c;return e[0]=1-(r+a),e[1]=d+c,e[2]=t-l,e[3]=0,e[4]=d-c,e[5]=1-(u+a),e[6]=i+s,e[7]=0,e[8]=t+l,e[9]=i-s,e[10]=1-(u+r),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],40:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],41:[function(e,t,n){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],42:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],43:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],44:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],45:[function(e,t,n){t.exports=function(e,t,n,r,i,a,o){var s=1/(n-t),l=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}},{}],46:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],47:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":32,"./clone":33,"./copy":34,"./create":35,"./determinant":36,"./fromQuat":37,"./fromRotation":38,"./fromRotationTranslation":39,"./fromScaling":40,"./fromTranslation":41,"./fromXRotation":42,"./fromYRotation":43,"./fromZRotation":44,"./frustum":45,"./identity":46,"./invert":48,"./lookAt":49,"./multiply":50,"./ortho":51,"./perspective":52,"./perspectiveFromFieldOfView":53,"./rotate":54,"./rotateX":55,"./rotateY":56,"./rotateZ":57,"./scale":58,"./str":59,"./translate":60,"./transpose":61}],48:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],_=t[15],y=n*s-r*o,v=n*l-i*o,b=n*c-a*o,x=r*l-i*s,w=r*c-a*s,T=i*c-a*l,A=u*m-d*p,k=u*g-h*p,M=u*_-f*p,S=d*g-h*m,E=d*_-f*m,C=h*_-f*g,t=y*C-v*E+b*S+x*M-w*k+T*A;return t?(t=1/t,e[0]=(s*C-l*E+c*S)*t,e[1]=(i*E-r*C-a*S)*t,e[2]=(m*T-g*w+_*x)*t,e[3]=(h*w-d*T-f*x)*t,e[4]=(l*M-o*C-c*k)*t,e[5]=(n*C-i*M+a*k)*t,e[6]=(g*b-p*T-_*v)*t,e[7]=(u*T-h*b+f*v)*t,e[8]=(o*E-s*M+c*A)*t,e[9]=(r*M-n*E-a*A)*t,e[10]=(p*w-m*b+_*y)*t,e[11]=(d*b-u*w-f*y)*t,e[12]=(s*k-o*S-l*A)*t,e[13]=(n*S-r*k+i*A)*t,e[14]=(m*v-p*x-g*y)*t,e[15]=(u*x-d*v+h*y)*t,e):null}},{}],49:[function(e,t,n){var p=e("./identity");t.exports=function(e,t,n,r){var i,a=t[0],o=t[1],s=t[2],l=r[0],c=r[1],u=r[2],d=n[0],h=n[1],f=n[2];if(Math.abs(a-d)<1e-6&&Math.abs(o-h)<1e-6&&Math.abs(s-f)<1e-6)return p(e);i=a-d,t=o-h,r=s-f,n=1/Math.sqrt(i*i+t*t+r*r),d=c*(r*=n)-u*(t*=n),h=u*(i*=n)-l*r,f=l*t-c*i,(n=Math.sqrt(d*d+h*h+f*f))?(d*=n=1/n,h*=n,f*=n):f=h=d=0;u=t*f-r*h,l=r*d-i*f,c=i*h-t*d,(n=Math.sqrt(u*u+l*l+c*c))?(u*=n=1/n,l*=n,c*=n):c=l=u=0;return e[0]=d,e[1]=u,e[2]=i,e[3]=0,e[4]=h,e[5]=l,e[6]=t,e[7]=0,e[8]=f,e[9]=c,e[10]=r,e[11]=0,e[12]=-(d*a+h*o+f*s),e[13]=-(u*a+l*o+c*s),e[14]=-(i*a+t*o+r*s),e[15]=1,e}},{"./identity":46}],50:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],g=t[13],_=t[14],y=t[15],v=n[0],b=n[1],x=n[2],t=n[3];return e[0]=v*r+b*s+x*d+t*m,e[1]=v*i+b*l+x*h+t*g,e[2]=v*a+b*c+x*f+t*_,e[3]=v*o+b*u+x*p+t*y,v=n[4],b=n[5],x=n[6],t=n[7],e[4]=v*r+b*s+x*d+t*m,e[5]=v*i+b*l+x*h+t*g,e[6]=v*a+b*c+x*f+t*_,e[7]=v*o+b*u+x*p+t*y,v=n[8],b=n[9],x=n[10],t=n[11],e[8]=v*r+b*s+x*d+t*m,e[9]=v*i+b*l+x*h+t*g,e[10]=v*a+b*c+x*f+t*_,e[11]=v*o+b*u+x*p+t*y,v=n[12],b=n[13],x=n[14],t=n[15],e[12]=v*r+b*s+x*d+t*m,e[13]=v*i+b*l+x*h+t*g,e[14]=v*a+b*c+x*f+t*_,e[15]=v*o+b*u+x*p+t*y,e}},{}],51:[function(e,t,n){t.exports=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*c,e[15]=1,e}},{}],52:[function(e,t,n){t.exports=function(e,t,n,r,i){var a=1/Math.tan(t/2),t=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*t,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*t,e[15]=0,e}},{}],53:[function(e,t,n){t.exports=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),t=2/(i+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(i-a)*t*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},{}],54:[function(e,t,n){t.exports=function(e,t,n,r){var i,a,o,s,l,c,u,d,h,f,p,m,g,_,y,v,b,x,w,T=r[0],A=r[1],k=r[2],M=Math.sqrt(T*T+A*A+k*k);if(Math.abs(M)<1e-6)return null;T*=M=1/M,A*=M,k*=M,x=Math.sin(n),w=Math.cos(n),i=1-w,a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7],f=t[8],p=t[9],m=t[10],g=t[11],_=T*T*i+w,y=A*T*i+k*x,v=k*T*i-A*x,b=T*A*i-k*x,r=A*A*i+w,M=k*A*i+T*x,n=T*k*i+A*x,x=A*k*i-T*x,w=k*k*i+w,e[0]=a*_+c*y+f*v,e[1]=o*_+u*y+p*v,e[2]=s*_+d*y+m*v,e[3]=l*_+h*y+g*v,e[4]=a*b+c*r+f*M,e[5]=o*b+u*r+p*M,e[6]=s*b+d*r+m*M,e[7]=l*b+h*r+g*M,e[8]=a*n+c*x+f*w,e[9]=o*n+u*x+p*w,e[10]=s*n+d*x+m*w,e[11]=l*n+h*x+g*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],55:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*i+c*r,e[5]=o*i+u*r,e[6]=s*i+d*r,e[7]=l*i+n*r,e[8]=c*i-a*r,e[9]=u*i-o*r,e[10]=d*i-s*r,e[11]=n*i-l*r,e}},{}],56:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],n=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i-c*r,e[1]=o*i-u*r,e[2]=s*i-d*r,e[3]=l*i-n*r,e[8]=a*r+c*i,e[9]=o*r+u*i,e[10]=s*r+d*i,e[11]=l*r+n*i,e}},{}],57:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],n=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i+c*r,e[1]=o*i+u*r,e[2]=s*i+d*r,e[3]=l*i+n*r,e[4]=c*i-a*r,e[5]=u*i-o*r,e[6]=d*i-s*r,e[7]=n*i-l*r,e}},{}],58:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],59:[function(e,t,n){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],60:[function(e,t,n){t.exports=function(e,t,n){var r,i,a,o,s,l,c,u,d,h,f,p=n[0],m=n[1],g=n[2];t===e?(e[12]=t[0]*p+t[4]*m+t[8]*g+t[12],e[13]=t[1]*p+t[5]*m+t[9]*g+t[13],e[14]=t[2]*p+t[6]*m+t[10]*g+t[14],e[15]=t[3]*p+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],n=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=f,e[11]=n,e[12]=r*p+s*m+d*g+t[12],e[13]=i*p+l*m+h*g+t[13],e[14]=a*p+c*m+f*g+t[14],e[15]=o*p+u*m+n*g+t[15]);return e}},{}],61:[function(e,t,n){t.exports=function(e,t){{var n,r,i,a,o,s;e===t?(n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e}},{}],62:[function(n,r,e){!function(t){!function(){"use strict";var e=n("is-browser"),e="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:e;r.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":66}],63:[function(e,t,n){"use strict";e=e("is-browser");t.exports=e&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":66}],64:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,n=e[t+d];for(d+=h,a=n&(1<<-u)-1,n>>=-u,u+=s;0<u;a=256*a+e[t+d],d+=h,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;0<u;o=256*o+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(n?-1:1);o+=Math.pow(2,r),a-=c}return(n?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,l=8*a-i-1,c=(1<<l)-1,u=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,f=r?1:-1,a=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(t+=1<=o+u?d/r:d*Math.pow(2,1-u))*r&&(o++,r/=2),c<=o+u?(s=0,o=c):1<=o+u?(s=(t*r-1)*Math.pow(2,i),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));8<=i;e[n+h]=255&s,h+=f,s/=256,i-=8);for(o=o<<i|s,l+=i;0<l;e[n+h]=255&o,h+=f,o/=256,l-=8);e[n+h-f]|=128*a}},{}],65:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},{}],66:[function(e,t,n){t.exports=!0},{}],67:[function(e,t,n){"use strict";t.exports=a,t.exports.isMobile=a,t.exports.default=a;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(e){var t=(e=e||{}).ua;if("string"!=typeof(t=(t=!t&&"undefined"!=typeof navigator?navigator.userAgent:t)&&t.headers&&"string"==typeof t.headers["user-agent"]?t.headers["user-agent"]:t))return!1;var n=(e.tablet?i:r).test(t);return n=!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")?!0:n}},{}],68:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],69:[function(e,t,n){var i={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,e=e.clientY||0,t=function(e){return e===window||e===document||e===document.body?i:e.getBoundingClientRect()}(t);return n[0]=r-t.left,n[1]=e-t.top,n}},{}],70:[function(e,i,t){!function(r,v){!function(){var e,t,n;n=function(){"use strict";var t,n,r,i,a,e=Object.prototype.toString,o=void 0!==v?function(e){return v(e)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(e,t,n){return e[t]=n,e}}function s(e,t){this.fn=e,this.self=t,this.next=void 0}function l(e,t){_.add(e,t),n=n||o(_.drain)}function c(e){var t,n=typeof e;return"function"==typeof(t=null!=e&&("object"==n||"function"==n)?e.then:t)&&t}function u(){for(var e=0;e<this.chain.length;e++)!function(e,t,n){var r,i;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=c(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function d(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=c(e))?l(function(){var t=new p(r);try{n.call(e,function(){d.apply(t,arguments)},function(){h.apply(t,arguments)})}catch(e){h.call(t,e)}}):(r.msg=e,r.state=1,0<r.chain.length&&l(u,r))}catch(e){h.call(new p(r),e)}}}function h(e){var t=this;t.triggered||(t.triggered=!0,(t=t.def?t.def:t).msg=e,t.state=2,0<t.chain.length&&l(u,t))}function f(e,n,r,i){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},i)}(t)}function p(e){this.def=e,this.triggered=!1}function m(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new m(this);this.then=function(e,t){var n={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&l(u,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){d.call(r,e)},function(e){h.call(r,e)})}catch(e){h.call(r,e)}}var _={add:function(e,t){a=new s(e,t),i?i.next=a:r=a,i=a,a=void 0},drain:function(){var e=r;for(r=i=n=void 0;e;)e.fn.call(e.self),e=e.next}},y=t({},"constructor",g,!1);return t(g.prototype=y,"__NPO__",0,!1),t(g,"resolve",function(n){return n&&"object"==typeof n&&1===n.__NPO__?n:new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(n)})}),t(g,"reject",function(n){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(n)})}),t(g,"all",function(t){var o=this;return"[object Array]"!=e.call(t)?o.reject(TypeError("Not an array")):0===t.length?o.resolve([]):new o(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");var r=t.length,i=Array(r),a=0;f(o,t,function(e,t){i[e]=t,++a===r&&n(i)},e)})}),t(g,"race",function(t){var r=this;return"[object Array]"!=e.call(t)?r.reject(TypeError("Not an array")):new r(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");f(r,t,function(e,t){n(t)},e)})}),g},(t=void 0!==r?r:this)[e="Promise"]=t[e]||n(),void 0!==i&&i.exports&&(i.exports=t[e])}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:118}],71:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))c.call(n,a)&&(r[a]=n[a]);if(l)for(var o=l(n),s=0;s<o.length;s++)u.call(n,o[s])&&(r[o[s]]=n[o[s]])}return r}},{}],72:[function(e,t,n){t.exports=function(e){var i=[];return e.replace(r,function(e,t,n){var r=t.toLowerCase();for(n=function(e){e=e.match(o);return e?e.map(Number):[]}(n),"m"==r&&2<n.length&&(i.push([t].concat(n.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(n.length==a[r])return n.unshift(t),i.push(n);if(n.length<a[r])throw new Error("malformed path data");i.push([t].concat(n.splice(0,a[r])))}}),i};var a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],73:[function(e,t,n){var r,i=e("./lib/build-log"),a=e("./lib/epsilon"),o=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),c=e("./lib/geojson"),u=!1,d=a();function h(e,t,n){e=r.segments(e),t=r.segments(t),t=n(r.combine(e,t));return r.polygon(t)}r={buildLog:function(e){return!0===e?u=i():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=o(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:o(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,d,e)},union:function(e,t){return h(e,t,r.selectUnion)},intersect:function(e,t){return h(e,t,r.selectIntersect)},difference:function(e,t){return h(e,t,r.selectDifference)},differenceRev:function(e,t){return h(e,t,r.selectDifferenceRev)},xor:function(e,t){return h(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},{"./lib/build-log":74,"./lib/epsilon":75,"./lib/geojson":76,"./lib/intersecter":77,"./lib/segment-chainer":79,"./lib/segment-selector":80}],74:[function(e,t,n){t.exports=function(){var n,e=0,t=!1;function r(e,t){return n.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),n}return n={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(e){return e===t?n:r("vert",{x:t=e})},log:function(e){return r("log",{txt:e="string"!=typeof e?JSON.stringify(e,!1,"  "):e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],75:[function(e,t,n){t.exports=function(u){"number"!=typeof u&&(u=1e-10);var n={epsilon:function(e){return u="number"==typeof e?e:u},pointAboveOrOnLine:function(e,t,n){var r=t[0],i=t[1],a=n[0],t=n[1],n=e[0],e=e[1];return-u<=(a-r)*(e-i)-(t-i)*(n-r)},pointBetween:function(e,t,n){var r=e[1]-t[1],i=n[0]-t[0],e=e[0]-t[0],t=n[1]-t[1],r=e*i+r*t;return!(r<u)&&!(-u<r-(i*i+t*t))},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<u},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<u},pointsSame:function(e,t){return n.pointsSameX(e,t)&&n.pointsSameY(e,t)},pointsCompare:function(e,t){return n.pointsSameX(e,t)?n.pointsSameY(e,t)?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1},pointsCollinear:function(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],e=t[0]-n[0],n=t[1]-n[1];return Math.abs(r*n-e*i)<u},linesIntersect:function(e,t,n,r){var i=t[0]-e[0],a=t[1]-e[1],o=r[0]-n[0],s=r[1]-n[1],t=i*s-a*o;if(Math.abs(t)<u)return!1;r=e[0]-n[0],n=e[1]-n[1],s=(o*n-s*r)/t,t=(i*n-a*r)/t,a={alongA:0,alongB:0,pt:[e[0]+s*i,e[1]+s*a]};return a.alongA=s<=-u?-2:s<u?-1:s-1<=-u?0:s-1<u?1:2,a.alongB=t<=-u?-2:t<u?-1:t-1<=-u?0:t-1<u?1:2,a},pointInsideRegion:function(e,t){for(var n=e[0],r=e[1],i=t[t.length-1][0],a=t[t.length-1][1],o=!1,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];u<c-r!=u<a-r&&u<(i-l)*(r-c)/(a-c)+l-n&&(o=!o),i=l,a=c}return o}};return n}},{}],76:[function(e,t,n){var r={toPolygon:function(i,e){function t(e){if(e.length<=0)return i.segments({inverted:!1,regions:[]});function t(e){e=e.slice(0,e.length-1);return i.segments({inverted:!1,regions:[e]})}for(var n=t(e[0]),r=1;r<e.length;r++)n=i.selectDifference(i.combine(n,t(e[r])));return n}if("Polygon"===e.type)return i.polygon(t(e.coordinates));if("MultiPolygon"!==e.type)throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");for(var n=i.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=i.selectUnion(i.combine(n,t(e.coordinates[r])));return i.polygon(n)},fromPolygon:function(e,n,t){function o(e,t){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],t)}function s(e){return{region:e,children:[]}}t=e.polygon(e.segments(t));var r=s(null);for(var i=0;i<t.regions.length;i++){var a=t.regions[i];a.length<3||!function e(t,n){for(var r=0;r<t.children.length;r++)if(o(n,(i=t.children[r]).region))return void e(i,n);for(var i,a=s(n),r=0;r<t.children.length;r++)o((i=t.children[r]).region,n)&&(a.children.push(i),t.children.splice(r,1),r--);t.children.push(a)}(r,a)}function l(e,t){for(var n=0,r=e[e.length-1][0],i=e[e.length-1][1],a=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];a.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==t&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var c=[];function u(e){var t=[l(e.region,!1)];c.push(t);for(var n=0;n<e.children.length;n++)t.push(function(e){for(var t=0;t<e.children.length;t++)u(e.children[t]);return l(e.region,!0)}(e.children[n]))}for(i=0;i<r.children.length;i++)u(r.children[i]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};t.exports=r},{}],77:[function(e,t,n){var _=e("./linked-list");t.exports=function(h,f,p){function i(e,t,n){return{id:p?p.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var m=_.create();function a(o,s){m.insertBefore(o,function(e){var t,n,r,i,a;return(t=o.isStart,n=o.pt,r=s,i=e.isStart,a=e.pt,e=e.other.pt,0!==(n=f.pointsCompare(n,a))?n:f.pointsSame(r,e)?0:t!==i?t?1:-1:f.pointAboveOrOnLine(r,i?a:e,i?e:a)?1:-1)<0})}function o(e,t){var n,r,n=(n=e,r=t,a(r=_.node({isStart:!0,pt:n.start,seg:n,primary:r,other:null,status:null}),n.end),r);return r=n,t=t,t=_.node({isStart:!1,pt:e.end,seg:e,primary:t,other:r,status:null}),a(r.other=t,r.pt),n}function g(e,t){var n,r=i(t,e.seg.end,e.seg);return n=e,t=t,p&&p.segmentChop(n.seg,t),n.other.remove(),n.seg.end=t,n.other.pt=t,a(n.other,n.pt),o(r,e.primary)}function s(e,t){var n=_.create();function r(i){return n.findTransition(function(e){var t,n,r;return 0<(t=i,n=e.ev,r=t.seg.start,e=t.seg.end,t=n.seg.start,n=n.seg.end,f.pointsCollinear(r,t,n)?f.pointsCollinear(e,t,n)||f.pointAboveOrOnLine(e,t,n)?1:-1:f.pointAboveOrOnLine(r,t,n)?1:-1)})}function i(e,t){var n=e.seg,r=t.seg,i=n.start,a=n.end,o=r.start,s=r.end;p&&p.checkIntersection(n,r);var l=f.linesIntersect(i,a,o,s);if(!1===l){if(!f.pointsCollinear(i,a,o))return!1;if(f.pointsSame(i,s)||f.pointsSame(a,o))return!1;var c=f.pointsSame(i,o),u=f.pointsSame(a,s);if(c&&u)return t;n=!c&&f.pointBetween(i,o,s),r=!u&&f.pointBetween(a,o,s);if(c)return r?g(t,a):g(e,s),t;n&&(u||(r?g(t,a):g(e,s)),g(t,i))}else 0===l.alongA&&(-1===l.alongB?g(e,o):0===l.alongB?g(e,l.pt):1===l.alongB&&g(e,s)),0===l.alongB&&(-1===l.alongA?g(t,i):0===l.alongA?g(t,l.pt):1===l.alongA&&g(t,a));return!1}for(var a=[];!m.isEmpty();){var o=m.getHead();if(p&&p.vert(o.pt[0]),o.isStart){p&&p.segmentNew(o.seg,o.primary);var s=r(o),l=s.before?s.before.ev:null,c=s.after?s.after.ev:null;p&&p.tempStatus(o.seg,!!l&&l.seg,!!c&&c.seg);var u,d=function(){if(l){var e=i(o,l);if(e)return e}return!!c&&i(o,c)}();if(d&&(h?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below)&&(d.seg.myFill.above=!d.seg.myFill.above):d.seg.otherFill=o.seg.myFill,p&&p.segmentUpdate(d.seg),o.other.remove(),o.remove()),m.getHead()!==o){p&&p.rewind(o.seg);continue}h?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below,o.seg.myFill.below=c?c.seg.myFill.above:e,o.seg.myFill.above=u?!o.seg.myFill.below:o.seg.myFill.below):null===o.seg.otherFill&&(d=c?(o.primary===c.primary?c.seg.otherFill:c.seg.myFill).above:o.primary?t:e,o.seg.otherFill={above:d,below:d}),p&&p.status(o.seg,!!l&&l.seg,!!c&&c.seg),o.other.status=s.insert(_.node({ev:o}))}else{s=o.status;if(null===s)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");n.exists(s.prev)&&n.exists(s.next)&&i(s.prev.ev,s.next.ev),p&&p.statusRemove(s.ev.seg),s.remove(),o.primary||(s=o.seg.myFill,o.seg.myFill=o.seg.otherFill,o.seg.otherFill=s),a.push(o.seg)}m.getHead().remove()}return p&&p.done(),a}return h?{addRegion:function(e){for(var t,n=e[e.length-1],r=0;r<e.length;r++){var i=n,n=e[r],a=f.pointsCompare(i,n);0!==a&&o((t=a<0?i:n,i=a<0?n:i,{id:p?p.segmentId():-1,start:t,end:i,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return s(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){o(i(e.start,e.end,e),!0)}),n.forEach(function(e){o(i(e.start,e.end,e),!1)}),s(t,r)}}}},{"./linked-list":78}],78:[function(e,t,n){t.exports={create:function(){var i={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==i.root},isEmpty:function(){return null===i.root.next},getHead:function(){return i.root.next},insertBefore:function(e,t){for(var n=i.root,r=i.root.next;null!==r;){if(t(r))return e.prev=r.prev,(e.next=r).prev.next=e,void(r.prev=e);r=(n=r).next}(n.next=e).prev=n,e.next=null},findTransition:function(e){for(var t=i.root,n=i.root.next;null!==n&&!e(n);)n=(t=n).next;return{before:t===i.root?null:t,after:n,insert:function(e){return e.prev=t,e.next=n,t.next=e,null!==n&&(n.prev=e),e}}}};return i},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],79:[function(e,t,n){t.exports=function(e,v,b){var x=[],w=[];return e.forEach(function(e){var t=e.start,n=e.end;if(v.pointsSame(t,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(e);for(var r={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},a=r,o=0;o<x.length;o++){var s=(h=x[o])[0],l=(h[1],h[h.length-1]);h[h.length-2];if(v.pointsSame(s,t)){if(g(o,!0,!0))break}else if(v.pointsSame(s,n)){if(g(o,!0,!1))break}else if(v.pointsSame(l,t)){if(g(o,!1,!0))break}else if(v.pointsSame(l,n)&&g(o,!1,!1))break}if(a===r)return x.push([t,n]),void(b&&b.chainNew(t,n));if(a===i){b&&b.chainMatch(r.index);var c=r.index,u=r.matches_pt1?n:t,d=r.matches_head,h=x[c],f=d?h[0]:h[h.length-1],p=d?h[1]:h[h.length-2],m=d?h[h.length-1]:h[0],e=d?h[h.length-2]:h[1];return(v.pointsCollinear(p,f,u)&&(d?(b&&b.chainRemoveHead(r.index,u),h.shift()):(b&&b.chainRemoveTail(r.index,u),h.pop()),f=p),v.pointsSame(m,u))?(x.splice(c,1),v.pointsCollinear(e,m,f)&&(d?(b&&b.chainRemoveTail(r.index,f),h.pop()):(b&&b.chainRemoveHead(r.index,f),h.shift())),b&&b.chainClose(r.index),void w.push(h)):void(d?(b&&b.chainAddHead(r.index,u),h.unshift(u)):(b&&b.chainAddTail(r.index,u),h.push(u)))}f=r.index,d=i.index;b&&b.chainConnect(f,d);u=x[f].length<x[d].length;r.matches_head?i.matches_head?u?(_(f),y(f,d)):(_(d),y(d,f)):y(d,f):i.matches_head?y(f,d):u?(_(f),y(d,f)):(_(d),y(f,d))}function g(e,t,n){if(a.index=e,a.matches_head=t,a.matches_pt1=n,a!==r)return a=null,1;a=i}function _(e){b&&b.chainReverse(e),x[e].reverse()}function y(e,t){var n=x[e],r=x[t],i=n[n.length-1],a=n[n.length-2],o=r[0],s=r[1];v.pointsCollinear(a,i,o)&&(b&&b.chainRemoveTail(e,i),n.pop(),i=a),v.pointsCollinear(i,o,s)&&(b&&b.chainRemoveHead(t,o),r.shift()),b&&b.chainJoin(e,t),x[e]=n.concat(r),x.splice(t,1)}}),w}},{}],80:[function(e,t,n){function r(e,n,r){var i=[];return e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==n[t]&&i.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===n[t],below:2===n[t]},otherFill:null})}),r&&r.selected(i),i}t.exports={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}},{}],81:[function(e,t,n){"use strict";var r=e("stream").Transform;function i(){r.call(this,{readableObjectMode:!0})}function a(e,t,n){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,t&&(this.code=t),n&&(this.statusCode=n)}e("stream-parser")(((i.prototype=Object.create(r.prototype)).constructor=i).prototype),n.ParserStream=i,n.sliceEq=function(e,t,n){for(var r=t,i=0;i<n.length;)if(e[r++]!==n[i++])return!1;return!0},n.str2arr=function(e,t){var n=[],r=0;if(t&&"hex"===t)for(;r<e.length;)n.push(parseInt(e.slice(r,r+2),16)),r+=2;else for(;r<e.length;r++)n.push(255&e.charCodeAt(r));return n},n.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8},n.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8},n.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|16777216*e[t+3]},n.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|16777216*e[t]},a.prototype=Object.create(Error.prototype),n.ProbeError=a.prototype.constructor=a},{stream:98,"stream-parser":114}],82:[function(e,t,n){"use strict";function g(e,t){e=new Error(e);return e.code=t,e}function r(e,t,n){this.input=e.subarray(t,n),this.start=t;t=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==t&&"MM\0*"!==t)throw g("invalid TIFF signature","EBADDATA");this.big_endian="M"===t[0]}r.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];0<this.ifds_to_read.length&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,e)}},r.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?256*t[e]+t[e+1]:t[e]+256*t[e+1]},r.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?16777216*t[e]+65536*t[e+1]+256*t[e+2]+t[e+3]:t[e]+256*t[e+1]+65536*t[e+2]+16777216*t[e+3]},r.prototype.is_subifd_link=function(e,t){return 0===e&&34665===t||0===e&&34853===t||34665===e&&40965===t},r.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},r.prototype.exif_format_read=function(e,t){var n;switch(e){case 1:case 2:return n=this.input[t];case 6:return(n=this.input[t])|33554430*(128&n);case 3:return n=this.read_uint16(t);case 8:return(n=this.read_uint16(t))|131070*(32768&n);case 4:return n=this.read_uint32(t);case 9:return 0|(n=this.read_uint32(t));default:return null}},r.prototype.scan_ifd=function(e,t,n){var r=this.read_uint16(t);t+=2;for(var i=0;i<r;i++){var a=this.read_uint16(t),o=this.read_uint16(t+2),s=this.read_uint32(t+4),l=this.exif_format_length(o),c=s*l,u=c<=4?t+8:this.read_uint32(t+8),d=!1;if(u+c>this.input.length)throw g("unexpected EOF","EBADDATA");for(var h=[],f=u,p=0;p<s;p++,f+=l){var m=this.exif_format_read(o,f);if(null===m){h=null;break}h.push(m)}if(Array.isArray(h)&&2===o&&(h=function(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}(String.fromCharCode.apply(null,h)))&&"\0"===h[h.length-1]&&(h=h.slice(0,-1)),this.is_subifd_link(e,a)&&Array.isArray(h)&&Number.isInteger(h[0])&&0<h[0]&&(this.ifds_to_read.push({id:a,offset:h[0]}),d=!0),!1===n({is_big_endian:this.big_endian,ifd:e,tag:a,format:o,count:s,entry_offset:t+this.start,data_length:c,data_offset:u+this.start,value:h,is_subifd_link:d}))return void(this.aborted=!0);t+=12}0===e&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},t.exports.ExifParser=r,t.exports.get_orientation=function(e){var t=0;try{return new r(e,0,e.length).each(function(e){if(0===e.ifd&&274===e.tag&&Array.isArray(e.value))return t=e.value[0],!1}),t}catch(e){return-1}}},{}],83:[function(e,t,n){"use strict";var f=e("./common").readUInt16BE,i=e("./common").readUInt32BE;function c(e,t){if(e.length<4+t)return null;var n=i(e,t);return e.length<n+t||n<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+n),end:t+n}}function p(e,t,n){for(var r=0,i=0;i<n;i++)r=256*r+(e[t+i]||0);return r}function a(e,t){for(var n=0;;){var r=c(e,n);if(!r)break;"ipco"===r.boxtype&&function(e,t){for(var n=0;;){var r=c(e,n);if(!r)break;switch(r.boxtype){case"ispe":t.sizes.push({width:i(r.data,4),height:i(r.data,8)});break;case"irot":t.transforms.push({type:"irot",value:3&r.data[0]});break;case"imir":t.transforms.push({type:"imir",value:1&r.data[0]})}n=r.end}}(r.data,t),n=r.end}}function r(e,t){for(var n=4;;){var r=c(e,n);if(!r)break;"iprp"===r.boxtype&&a(r.data,t),"iloc"===r.boxtype&&function(e,t){for(var n=e[4]>>4&15,r=15&e[4],i=e[5]>>4&15,a=f(e,6),o=8,s=0;s<a;s++){var l,c=f(e,o),u=f(e,o+=2),d=p(e,o+=2,i),h=f(e,o+=i);o+=2,0===u&&1===h&&(l=p(e,o,n),u=p(e,o+n,r),t.item_loc[c]={length:u,offset:l+d}),o+=h*(n+r)}}(r.data,t),"iinf"===r.boxtype&&function(e,t){for(var n=f(e,4),r=6,i=0;i<n;i++){var a=c(e,r);if(!a)break;if("infe"===a.boxtype){for(var o=f(a.data,4),s="",l=8;l<a.data.length&&a.data[l];l++)s+=String.fromCharCode(a.data[l]);t.item_inf[s]=o}r=a.end}}(r.data,t),n=r.end}}t.exports.unbox=c,t.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(e,t),t.sizes.length){var e=(n=t.sizes,e=n.reduce(function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?e:t}),n=n.reduce(function(e,t){return e.height>t.height||e.height===t.height&&e.width>t.width?e:t}),n=e.width>n.height||e.width===n.height&&e.height>n.width?e:n),i=1;t.transforms.forEach(function(e){var t={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},n={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===e.type&&(i=0===e.value?n[i]:t[i=t[i=n[i]]]),"irot"===e.type)for(var r=0;r<e.value;r++)i=t[i]});var n=null;return t.item_inf.Exif&&(n=t.item_loc[t.item_inf.Exif]),{width:e.width,height:e.height,orientation:t.transforms.length?i:null,variants:t.sizes,exif_location:n}}},t.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4)),n={};n[t]=!0;for(var r=8;r<e.length;r+=4)n[String.fromCharCode.apply(null,e.slice(r,r+4))]=!0;if(n.mif1||n.msf1||n.miaf)return"avif"===t||"avis"===t||"avio"===t?{type:"avif",mime:"image/avif"}:"heic"===t||"heix"===t?{type:"heic",mime:"image/heic"}:"hevc"===t||"hevx"===t?{type:"heic",mime:"image/heic-sequence"}:!n.avif&&!n.avis&&(n.heic||n.heix||n.hevc||n.hevx||n.heis)?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":81}],84:[function(e,t,n){"use strict";var r=e("../common").str2arr,s=e("../common").sliceEq,l=e("../common").readUInt32BE,c=e("../miaf_utils"),u=e("../exif_utils"),d=r("ftyp");t.exports=function(e){if(s(e,4,d)){var t=c.unbox(e,0);if(t){var n=c.getMimeType(t.data);if(n){for(var r,i=t.end;;){var a=c.unbox(e,i);if(!a)break;if(i=a.end,"mdat"===a.boxtype)return;if("meta"===a.boxtype){r=a.data;break}}if(r){var o=c.readSizeFromMeta(r);if(o){t={width:o.width,height:o.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};return 1<o.variants.length&&(t.variants=o.variants),o.orientation&&(t.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=e.length&&(n=l(e,o.exif_location.offset),o=e.slice(o.exif_location.offset+n+4,o.exif_location.offset+o.exif_location.length),0<(o=u.get_orientation(o))&&(t.orientation=o)),t}}}}}}},{"../common":81,"../exif_utils":82,"../miaf_utils":83}],85:[function(e,t,n){"use strict";var r=e("../common").str2arr,i=e("../common").sliceEq,a=e("../common").readUInt16LE,o=r("BM");t.exports=function(e){if(!(e.length<26)&&i(e,0,o))return{width:a(e,18),height:a(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":81}],86:[function(e,t,n){"use strict";var r=e("../common").str2arr,i=e("../common").sliceEq,a=e("../common").readUInt16LE,o=r("GIF87a"),s=r("GIF89a");t.exports=function(e){if(!(e.length<10)&&(i(e,0,o)||i(e,0,s)))return{width:a(e,6),height:a(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":81}],87:[function(e,t,n){"use strict";var u=e("../common").readUInt16LE;t.exports=function(e){var t=u(e,0),n=u(e,2),r=u(e,4);if(0===t&&1===n&&r){for(var i=[],a={width:0,height:0},o=0;o<r;o++){var s=e[6+16*o]||256,l=e[6+16*o+1]||256,c={width:s,height:l};i.push(c),(s>a.width||l>a.height)&&(a=c)}return{width:a.width,height:a.height,variants:i,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":81}],88:[function(e,t,n){"use strict";var o=e("../common").readUInt16BE,r=e("../common").str2arr,s=e("../common").sliceEq,l=e("../exif_utils"),c=r("Exif\0\0");t.exports=function(e){if(!(e.length<2)&&255===e[0]&&216===e[1])for(var t=2;;){if(e.length-t<2)return;if(255!==e[t++])return;for(var n,r,i=e[t++];255===i;)i=e[t++];if(208<=i&&i<=217||1===i)n=0;else{if(!(192<=i&&i<=254))return;if(e.length-t<2)return;n=o(e,t)-2,t+=2}if(217===i||218===i)return;if(225===i&&10<=n&&s(e,t,c)&&(r=l.get_orientation(e.slice(t+6,t+n))),5<=n&&192<=i&&i<=207&&196!==i&&200!==i&&204!==i){if(e.length-t<n)return;var a={width:o(e,t+3),height:o(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return 0<r&&(a.orientation=r),a}t+=n}}},{"../common":81,"../exif_utils":82}],89:[function(e,t,n){"use strict";var r=e("../common").str2arr,i=e("../common").sliceEq,a=e("../common").readUInt32BE,o=r("PNG\r\n\n"),s=r("IHDR");t.exports=function(e){if(!(e.length<24)&&i(e,0,o)&&i(e,12,s))return{width:a(e,16),height:a(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":81}],90:[function(e,t,n){"use strict";var r=e("../common").str2arr,i=e("../common").sliceEq,a=e("../common").readUInt32BE,o=r("8BPS\0");t.exports=function(e){if(!(e.length<22)&&i(e,0,o))return{width:a(e,18),height:a(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":81}],91:[function(e,t,n){"use strict";function u(e){return"number"==typeof e&&isFinite(e)&&0<e}var d=/<[-_.:a-zA-Z0-9][^>]*>/,h=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,f=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,p=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,m=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function g(e){return r.test(e)?e.match(r)[0]:"px"}t.exports=function(e){if(function(e){var t,n=0,r=e.length;for(239===e[0]&&187===e[1]&&191===e[2]&&(n=3);n<r&&(32===(t=e[n])||9===t||13===t||10===t);)n++;return n!==r&&60===e[n]}(e)){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);var r=(t.match(d)||[""])[0];if(h.test(r)){var i=(s=(c=r).match(f),l=c.match(p),c=c.match(m),{width:s&&(s[1]||s[2]),height:l&&(l[1]||l[2]),viewbox:c&&(c[1]||c[2])}),a=parseFloat(i.width),o=parseFloat(i.height);if(i.width&&i.height)return u(a)&&u(o)?{width:a,height:o,type:"svg",mime:"image/svg+xml",wUnits:g(i.width),hUnits:g(i.height)}:void 0;var r=(i.viewbox||"").split(" "),s={width:r[2],height:r[3]},l=parseFloat(s.width),c=parseFloat(s.height);if(u(l)&&u(c)&&g(s.width)===g(s.height)){r=l/c;return i.width?u(a)?{width:a,height:a/r,type:"svg",mime:"image/svg+xml",wUnits:g(i.width),hUnits:g(i.width)}:void 0:i.height?u(o)?{width:o*r,height:o,type:"svg",mime:"image/svg+xml",wUnits:g(i.height),hUnits:g(i.height)}:void 0:{width:l,height:c,type:"svg",mime:"image/svg+xml",wUnits:g(s.width),hUnits:g(s.height)}}}}}},{}],92:[function(e,t,n){"use strict";var r=e("../common").str2arr,c=e("../common").sliceEq,i=e("../common").readUInt16LE,a=e("../common").readUInt16BE,o=e("../common").readUInt32LE,s=e("../common").readUInt32BE,u=r("II*\0"),d=r("MM\0*");function h(e,t,n){return(n?a:i)(e,t)}function f(e,t,n){return(n?s:o)(e,t)}function p(e,t,n){var r=h(e,t+2,n);return 1!==f(e,t+4,n)||3!==r&&4!==r?null:(3===r?h:f)(e,t+8,n)}t.exports=function(e){if(!(e.length<8)&&(c(e,0,u)||c(e,0,d))){var t=77===e[0],n=f(e,4,t)-8;if(!(n<0)){var r=8+n;if(!(e.length-r<2)){var i=12*h(e,r,t);if(!(i<=0||e.length-(r+=2)<i)){for(var a,o,s,l=0;l<i;l+=12)256===(s=h(e,r+l,t))?a=p(e,r+l,t):257===s&&(o=p(e,r+l,t));return a&&o?{width:a,height:o,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":81}],93:[function(e,t,n){"use strict";var r=e("../common").str2arr,l=e("../common").sliceEq,c=e("../common").readUInt16LE,u=e("../common").readUInt32LE,d=e("../exif_utils"),h=r("RIFF"),f=r("WEBP");t.exports=function(e){if(!(e.length<16)&&(l(e,0,h)||l(e,8,f))){var t,n,r,i=12,a=null,o=0,s=u(e,4)+8;if(!(s>e.length)){for(;i+8<s;)0!==e[i]?(t=String.fromCharCode.apply(null,e.slice(i,i+4)),n=u(e,i+4),"VP8 "===t&&10<=n?a=a||function(e,t){if(157===e[t+3]&&1===e[t+4]&&42===e[t+5])return{width:16383&c(e,t+6),height:16383&c(e,t+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}(e,i+8):"VP8L"===t&&9<=n?a=a||function(e,t){if(47===e[t]){t=u(e,t+1);return{width:1+(16383&t),height:1+(t>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}(e,i+8):"VP8X"===t&&10<=n?a=a||{width:1+(e[(r=i+8)+6]<<16|e[r+5]<<8|e[r+4]),height:1+(e[r+9]<<r|e[r+8]<<8|e[r+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}:"EXIF"===t&&(o=d.get_orientation(e.slice(i+8,i+8+n)),i=1/0),i+=8+n):i++;if(a)return 0<o&&(a.orientation=o),a}}}},{"../common":81,"../exif_utils":82}],94:[function(e,t,n){"use strict";t.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":84,"./parse_sync/bmp":85,"./parse_sync/gif":86,"./parse_sync/ico":87,"./parse_sync/jpeg":88,"./parse_sync/png":89,"./parse_sync/psd":90,"./parse_sync/svg":91,"./parse_sync/tiff":92,"./parse_sync/webp":93}],95:[function(e,t,n){"use strict";var i=e("./lib/parsers_sync");t.exports=function(e){for(var t=Object.keys(i),n=0;n<t.length;n++){var r=i[t[n]](e);if(r)return r}return null},t.exports.parsers=i},{"./lib/parsers_sync":94}],96:[function(e,t,n){var r,i,t=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],97:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,n),n.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:28}],98:[function(e,t,n){t.exports=r;var u=e("events").EventEmitter;function r(){u.call(this)}e("inherits")(r,u),r.Readable=e("readable-stream/lib/_stream_readable.js"),r.Writable=e("readable-stream/lib/_stream_writable.js"),r.Duplex=e("readable-stream/lib/_stream_duplex.js"),r.Transform=e("readable-stream/lib/_stream_transform.js"),r.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),r.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),r.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(c(),0===u.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},{events:27,inherits:65,"readable-stream/lib/_stream_duplex.js":100,"readable-stream/lib/_stream_passthrough.js":101,"readable-stream/lib/_stream_readable.js":102,"readable-stream/lib/_stream_transform.js":103,"readable-stream/lib/_stream_writable.js":104,"readable-stream/lib/internal/streams/end-of-stream.js":108,"readable-stream/lib/internal/streams/pipeline.js":110}],99:[function(e,t,n){"use strict";var r={};function i(e,i,t){var n=function(r){var e,t;function n(e,t,n){return r.call(this,(e=e,t=t,n=n,"string"==typeof i?i:i(e,t,n)))||this}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n}(t=t||Error);n.prototype.name=t.name,n.prototype.code=e,r[e]=n}function l(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,i,a,o,s;return"string"==typeof t&&(o="not ",t.substr(!a||a<0?0:+a,o.length)===o)?(r="must not be",t=t.replace(/^not /,"")):r="must be",a=e,o=" argument",(void 0===s||s>a.length)&&(s=a.length),t=a.substring(s-o.length,s)===o?"The ".concat(e," ").concat(r," ").concat(l(t,"type")):(i=(i="number"!=typeof i?0:i)+(s=".").length>(o=e).length||-1===o.indexOf(s,i)?"argument":"property",'The "'.concat(e,'" ').concat(i," ").concat(r," ").concat(l(t,"type"))),t+=". Received type ".concat(typeof n)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],100:[function(u,d,e){!function(c){!function(){"use strict";var e=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n};d.exports=o;var t=u("./_stream_readable"),n=u("./_stream_writable");u("inherits")(o,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var a=r[i];o.prototype[a]||(o.prototype[a]=n.prototype[a])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||c.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,u("_process"))},{"./_stream_readable":102,"./_stream_writable":104,_process:96,inherits:65}],101:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":103,inherits:65}],102:[function(j,B,e){!function(z,F){!function(){"use strict";var r;(B.exports=b).ReadableState=v;function p(e,t){return e.listeners(t).length}j("events").EventEmitter;var i=j("./internal/streams/stream"),u=j("buffer").Buffer,d=F.Uint8Array||function(){};var a,e,n,t=j("util"),m=t&&t.debuglog?t.debuglog("stream"):function(){},o=j("./internal/streams/buffer_list"),s=j("./internal/streams/destroy"),l=j("./internal/streams/state").getHighWaterMark,t=j("../errors").codes,h=t.ERR_INVALID_ARG_TYPE,f=t.ERR_STREAM_PUSH_AFTER_EOF,c=t.ERR_METHOD_NOT_IMPLEMENTED,g=t.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;j("inherits")(b,i);var _=s.errorOrDestroy,y=["error","close","destroy","pause","resume"];function v(e,t,n){r=r||j("./_stream_duplex"),"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!(e=e||{}).objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=l(this,e,"readableHighWaterMark",n),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(a=a||j("string_decoder/").StringDecoder,this.decoder=new a(e.encoding),this.encoding=e.encoding)}function b(e){if(r=r||j("./_stream_duplex"),!(this instanceof b))return new b(e);var t=this instanceof r;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function x(e,t,n,r,i){m("readableAddChunk",t);var a,o,s,l,c=e._readableState;if(null===t)c.reading=!1,o=e,s=c,m("onEofChunk"),s.ended||(!s.decoder||(l=s.decoder.end())&&l.length&&(s.buffer.push(l),s.length+=s.objectMode?1:l.length),s.ended=!0,s.sync?k(o):(s.needReadable=!1,s.emittedReadable||(s.emittedReadable=!0,M(o))));else if(a=!i?function(e,t){var n;(function(e){return u.isBuffer(e)||e instanceof d})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new h("chunk",["string","Buffer","Uint8Array"],t));return n}(c,t):a)_(e,a);else if(c.objectMode||t&&0<t.length)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===u.prototype||(a=t,t=u.from(a)),r)c.endEmitted?_(e,new g):w(e,c,t,!0);else if(c.ended)_(e,new f);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?w(e,c,t,!1):S(e,c)):w(e,c,t,!1)}else r||(c.reading=!1,S(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),S(e,t)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=s.destroy,b.prototype._undestroy=s.undestroy,b.prototype._destroy=function(e,t){t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),x(this,e,t,!1,n)},b.prototype.unshift=function(e){return x(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){var t=new(a=a||j("string_decoder/").StringDecoder)(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var T=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(T<=(n=e)?n=T:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function k(e){var t=e._readableState;m("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,z.nextTick(M,e))}function M(e){var t=e._readableState;m("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,O(e)}function S(e,t){t.readingMore||(t.readingMore=!0,z.nextTick(E,e,t))}function E(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(m("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function C(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function L(e){m("readable nexttick read 0"),e.read(0)}function D(e,t){m("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function R(e){var t=e._readableState;m("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,z.nextTick(I,t,e))}function I(e,t){m("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),!e.autoDestroy||(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:0<t.length)||t.ended))return m("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?R:k)(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&R(this),null;var r=t.needReadable;return m("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&m("length less than watermark",r=!0),t.ended||t.reading?m("reading or ended",r=!1):r&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(n,t))),null===(r=0<e?P(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){_(this,new c("_read()"))},b.prototype.pipe=function(n,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,m("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&n!==z.stdout&&n!==z.stderr?o:f;function a(e,t){m("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,m("cleanup"),n.removeListener("close",d),n.removeListener("finish",h),n.removeListener("drain",s),n.removeListener("error",u),n.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",f),r.removeListener("data",c),l=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||s())}function o(){m("onend"),n.end()}i.endEmitted?z.nextTick(e):r.once("end",e),n.on("unpipe",a);var t,s=(t=r,function(){var e=t._readableState;m("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&p(t,"data")&&(e.flowing=!0,O(t))});n.on("drain",s);var l=!1;function c(e){m("ondata");e=n.write(e);m("dest.write",e),!1===e&&((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==N(i.pipes,n))&&!l&&(m("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function u(e){m("onerror",e),f(),n.removeListener("error",u),0===p(n,"error")&&_(n,e)}function d(){n.removeListener("finish",h),f()}function h(){m("onfinish"),n.removeListener("close",d),f()}function f(){m("unpipe"),r.unpipe(n)}return r.on("data",c),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",u),n.once("close",d),n.once("finish",h),n.emit("pipe",r),i.flowing||(m("pipe resume"),r.resume()),n},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=N(t.pipes,e);return-1===o||(t.pipes.splice(o,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},b.prototype.on=function(e,t){var n=i.prototype.on.call(this,e,t),t=this._readableState;return"data"===e?(t.readableListening=0<this.listenerCount("readable"),!1!==t.flowing&&this.resume()):"readable"===e&&(t.endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.flowing=!1,t.emittedReadable=!1,m("on readable",t.length,t.reading),t.length?k(this):t.reading||z.nextTick(L,this))),n},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(e,t){t=i.prototype.removeListener.call(this,e,t);return"readable"===e&&z.nextTick(C,this),t},b.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||z.nextTick(C,this),t},b.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(m("resume"),n.flowing=!n.readableListening,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,z.nextTick(D,e,t))),n.paused=!1,this},b.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(t){var e,n=this,r=this._readableState,i=!1;for(e in t.on("end",function(){var e;m("wrapped end"),!r.decoder||r.ended||(e=r.decoder.end())&&e.length&&n.push(e),n.push(null)}),t.on("data",function(e){m("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<y.length;a++)t.on(y[a],this.emit.bind(this,y[a]));return this._read=function(e){m("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?j("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),b._fromList=P,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(b.from=function(e,t){return(n=void 0===n?j("./internal/streams/from"):n)(b,e,t)})}.call(this)}.call(this,j("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/async_iterator":105,"./internal/streams/buffer_list":106,"./internal/streams/destroy":107,"./internal/streams/from":109,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,events:27,inherits:65,"string_decoder/":113,util:26}],103:[function(e,t,n){"use strict";t.exports=l;var t=e("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,i=t.ERR_MULTIPLE_CALLBACK,a=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,s=e("./_stream_duplex");function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new i);n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e),(e=this._readableState).reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(e,t){u(n,e,t)})}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,s),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new r("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t,r.transforming||(t=this._readableState,(r.needTransform||t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark))},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":99,"./_stream_duplex":100,inherits:65}],104:[function(L,D,e){!function(E,C){!function(){"use strict";function u(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var r;(D.exports=x).WritableState=b;var e={deprecate:L("util-deprecate")},n=L("./internal/streams/stream"),d=L("buffer").Buffer,h=C.Uint8Array||function(){};var i,t=L("./internal/streams/destroy"),a=L("./internal/streams/state").getHighWaterMark,o=L("../errors").codes,f=o.ERR_INVALID_ARG_TYPE,s=o.ERR_METHOD_NOT_IMPLEMENTED,l=o.ERR_MULTIPLE_CALLBACK,c=o.ERR_STREAM_CANNOT_PIPE,p=o.ERR_STREAM_DESTROYED,m=o.ERR_STREAM_NULL_VALUES,g=o.ERR_STREAM_WRITE_AFTER_END,_=o.ERR_UNKNOWN_ENCODING,y=t.errorOrDestroy;function v(){}function b(e,t,n){r=r||L("./_stream_duplex"),"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!(e=e||{}).objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=a(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;n=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new l;(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0})(n),t?function(e,t,n,r,i){--t.pendingcb,n?(E.nextTick(i,r),E.nextTick(S,e,t),e._writableState.errorEmitted=!0,y(e,r)):(i(r),e._writableState.errorEmitted=!0,y(e,r),S(e,t))}(e,n,r,t,i):((t=k(n)||e.destroyed)||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),r?E.nextTick(T,e,n,t,i):T(e,n,t,i))}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function x(e){var t=this instanceof(r=r||L("./_stream_duplex"));if(!t&&!i.call(x,this))return new x(e);this._writableState=new b(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n.call(this)}function w(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function T(e,t,n,r){var i;n||(i=e,0===(n=t).length&&n.needDrain&&(n.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),S(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),r=t.corkedRequestsFree;r.entry=n;for(var a=0,o=!0;n;)(i[a]=n).isBuf||(o=!1),n=n.next,a+=1;i.allBuffers=o,w(e,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new u(t),t.bufferedRequestCount=0}else{for(;n;){var s=n.chunk,l=n.encoding,c=n.callback;if(w(e,t,!1,t.objectMode?1:s.length,s,l,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function M(t,n){t._final(function(e){n.pendingcb--,e&&y(t,e),n.prefinished=!0,t.emit("prefinish"),S(t,n)})}function S(e,t){var n,r,i=k(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,E.nextTick(M,n,r))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),!t.autoDestroy||(!(t=e._readableState)||t.autoDestroy&&t.endEmitted)&&e.destroy())),i}L("inherits")(x,n),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===x&&(e&&e._writableState instanceof b)}})):i=function(e){return e instanceof this},x.prototype.pipe=function(){y(this,new c)},x.prototype.write=function(e,t,n){var r,i,a,o,s,l,c=this._writableState,u=!1,r=!c.objectMode&&(r=e,d.isBuffer(r)||r instanceof h);return r&&!d.isBuffer(e)&&(i=e,e=d.from(i)),"function"==typeof t&&(n=t,t=null),t=r?"buffer":t||c.defaultEncoding,"function"!=typeof n&&(n=v),c.ending?(o=this,s=n,l=new g,y(o,l),E.nextTick(s,l)):!r&&(i=this,o=c,s=n,null===(l=e)?a=new m:"string"==typeof l||o.objectMode||(a=new f("chunk",["string","Buffer"],l)),a&&(y(i,a),!void E.nextTick(s,a)))||(c.pendingcb++,u=function(e,t,n,r,i,a){n||(l=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,i),r!==l&&(n=!0,i="buffer",r=l));var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;s||(t.needDrain=!0);{var l;t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):w(e,t,!1,o,r,i,a)}return s}(this,c,r,e,t,n)),u},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new s("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?E.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=t.destroy,x.prototype._undestroy=t.undestroy,x.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,L("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/destroy":107,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,inherits:65,"util-deprecate":120}],105:[function(r,g,e){!function(m){!function(){"use strict";var e;function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=r("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),d=Symbol("stream");function h(e,t){return{value:e,done:t}}function f(e){var t,n=e[a];null===n||null!==(t=e[d].read())&&(e[c]=null,e[a]=null,e[o]=null,n(h(t,!1)))}var t=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((n(e={get stream(){return this[d]},next:function(){var n=this,e=this[s];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise(function(e,t){m.nextTick(function(){n[s]?t(n[s]):e(h(void 0,!0))})});var t,r,i,e=this[c];if(e)t=new Promise((r=e,i=this,function(e,t){r.then(function(){i[l]?e(h(void 0,!0)):i[u](e,t)},t)}));else{e=this[d].read();if(null!==e)return Promise.resolve(h(e,!1));t=new Promise(this[u])}return this[c]=t}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var e=this;return new Promise(function(t,n){e[d].destroy(null,function(e){e?n(e):t(h(void 0,!0))})})}),e),t);g.exports=function(e){var t,r=Object.create(p,(n(t={},d,{value:e,writable:!0}),n(t,a,{value:null,writable:!0}),n(t,o,{value:null,writable:!0}),n(t,s,{value:null,writable:!0}),n(t,l,{value:e._readableState.endEmitted,writable:!0}),n(t,u,{value:function(e,t){var n=r[d].read();n?(r[c]=null,r[a]=null,r[o]=null,e(h(n,!1))):(r[a]=e,r[o]=t)},writable:!0}),t));return r[c]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];return null!==t&&(r[c]=null,r[a]=null,r[o]=null,t(e)),void(r[s]=e)}e=r[a];null!==e&&(r[c]=null,r[a]=null,e(h(void 0,!(r[o]=null)))),r[l]=!0}),e.on("readable",function(e){m.nextTick(f,e)}.bind(null,r)),r}}.call(this)}.call(this,r("_process"))},{"./end-of-stream":108,_process:96}],106:[function(e,t,n){"use strict";function a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function i(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=e("buffer").Buffer,l=e("util").inspect,c=l&&l.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r=s.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,n=a,s.prototype.copy.call(t,r,n),a+=i.data.length,i=i.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?r+=i:r+=i.slice(0,e),0===(e-=a)){a===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(a);break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0===(e-=a)){a===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=i.slice(a);break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return l(this,i({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),r&&o(t,r),e}()},{buffer:28,util:26}],107:[function(e,t,n){!function(l){!function(){"use strict";function a(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(s,this,e)):l.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?l.nextTick(o,n):(n._writableState.errorEmitted=!0,l.nextTick(a,n,e)):l.nextTick(a,n,e):t?(l.nextTick(o,n),t(e)):l.nextTick(o,n)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:96}],108:[function(e,t,n){"use strict";var _=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function y(){}t.exports=function e(t,n,r){if("function"==typeof n)return e(t,null,n);var i,a;i=r||y,a=!1,r=function(){if(!a){a=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}};function o(){t.writable||m()}function s(){g=!(h=!1),f||r.call(t)}function l(e){r.call(t,e)}function c(){var e;return h&&!g?(t._readableState&&t._readableState.ended||(e=new _),r.call(t,e)):f&&!p?(t._writableState&&t._writableState.ended||(e=new _),r.call(t,e)):void 0}function u(){t.req.on("finish",m)}var d,h=(n=n||{}).readable||!1!==n.readable&&t.readable,f=n.writable||!1!==n.writable&&t.writable,p=t._writableState&&t._writableState.finished,m=function(){p=!(f=!1),h||r.call(t)},g=t._readableState&&t._readableState.endEmitted;return(d=t).setHeader&&"function"==typeof d.abort?(t.on("complete",m),t.on("abort",c),t.req?u():t.on("request",u)):f&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",s),t.on("finish",m),!1!==n.error&&t.on("error",l),t.on("close",c),function(){t.removeListener("complete",m),t.removeListener("abort",c),t.removeListener("request",u),t.req&&t.req.removeListener("finish",m),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",m),t.removeListener("end",s),t.removeListener("error",l),t.removeListener("close",c)}}},{"../../../errors":99}],109:[function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],110:[function(l,e,t){"use strict";var c;var n=l("../../../errors").codes,s=n.ERR_MISSING_ARGS,u=n.ERR_STREAM_DESTROYED;function d(e){if(e)throw e}function h(n,e,t,r){var i,a;i=r,a=!1;var o=!(r=function(){a||(a=!0,i.apply(void 0,arguments))});n.on("close",function(){o=!0}),(c=void 0===c?l("./end-of-stream"):c)(n,{readable:e,writable:t},function(e){return e?r(e):(o=!0,void r())});var s=!1;return function(e){var t;if(!o&&!s)return s=!0,(t=n).setHeader&&"function"==typeof t.abort?n.abort():"function"==typeof n.destroy?n.destroy():void r(e||new u("pipe"))}}function f(e){e()}function p(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n,i,a=!(n=r).length||"function"!=typeof n[n.length-1]?d:n.pop();if((r=Array.isArray(r[0])?r[0]:r).length<2)throw new s("streams");var o=r.map(function(e,t){var n=t<r.length-1;return h(e,n,0<t,function(e){i=i||e,e&&o.forEach(f),n||(o.forEach(f),a(i))})});return r.reduce(p)}},{"../../../errors":99,"./end-of-stream":108}],111:[function(e,t,n){"use strict";var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,r){var i,a=(i=r,a=n,null!=(t=t).highWaterMark?t.highWaterMark:i?t[a]:null);if(null==a)return e.objectMode?16:16384;if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new o(r?n:"highWaterMark",a);return Math.floor(a)}}},{"../../../errors":99}],112:[function(e,t,n){t.exports=e("events").EventEmitter},{events:27}],113:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=d,this.end=h,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t,n,r=this.lastTotal-this.lastNeed,t=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==t?t:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){t=n.charCodeAt(n.length-1);if(55296<=t&&t<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function d(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;n=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":97}],114:[function(t,_,e){!function(e,g){!function(){var n=t("assert"),o=t("debug")("stream-parser");_.exports=function(e){var t=e&&"function"==typeof e._transform,n=e&&"function"==typeof e._write;if(!t&&!n)throw new Error("must pass a Writable or Transform stream in");o("extending Parser into stream"),e._bytes=a,e._skipBytes=u,t&&(e._passthrough=d);t?e._transform=f:e._write=h};var s=-1,l=0,r=1,c=2;function i(e){o("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=s,e._parserCallback=null,"function"==typeof e.push&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function a(e,t){n(!this._parserCallback,'there is already a "callback" set!'),n(isFinite(e)&&0<e,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||i(this),o("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=l}function u(e,t){n(!this._parserCallback,'there is already a "callback" set!'),n(0<e,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||i(this),o("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=r}function d(e,t){n(!this._parserCallback,'There is already a "callback" set!'),n(0<e,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||i(this),o("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=c}function h(e,t,n){this._parserInit||i(this),o("write(%o bytes)",e.length),p(this,e,null,n="function"==typeof t?t:n)}function f(e,t,n){this._parserInit||i(this),o("transform(%o bytes)",e.length),"function"!=typeof t&&(t=this._parserOutput),p(this,e,t,n)}function e(e,t,n,r){if(e._parserBytesLeft-=t.length,o("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===l?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===c&&n(t),0!==e._parserBytesLeft)return r;var i=e._parserCallback;if(i&&e._parserState===l&&1<e._parserBuffers.length&&(t=g.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==l&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=s,e._parserBuffers.splice(0),i){var a=[];t&&a.push(t),n&&a.push(n);n=i.length>a.length;n&&a.push(m(r));a=i.apply(e,a);if(!n||r===a)return r}}var p=m(function n(r,i,a,o){return r._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):i.length<=r._parserBytesLeft?function(){return e(r,i,a,o)}:function(){var t=i.slice(0,r._parserBytesLeft);return e(r,t,a,function(e){return e?o(e):i.length>t.length?function(){return n(r,i.slice(t.length),a,o)}:void 0})}});function m(t){return function(){for(var e=t.apply(this,arguments);"function"==typeof e;)e=e();return e}}}.call(this)}.call(this,t("_process"),t("buffer").Buffer)},{_process:96,assert:21,buffer:28,debug:115}],115:[function(n,r,i){!function(t){!function(){function e(){var e;try{e=i.storage.debug}catch(e){}return e=!e&&void 0!==t&&"env"in t?t.env.DEBUG:e}(i=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t,n,r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+i.humanize(this.diff),r&&(r="color: "+this.color,e.splice(1,0,r,"color: inherit"),e[n=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(n=t))}),e.splice(n,0,r))},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}.call(this)}.call(this,n("_process"))},{"./debug":116,_process:96}],116:[function(e,t,s){var l;function n(e){function o(){if(o.enabled){var r=o,e=+new Date,t=e-(l||e);r.diff=t,r.prev=l,r.curr=e,l=e;for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];i[0]=s.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=s.formatters[t];return"function"==typeof n&&(t=i[a],e=n.call(r,t),i.splice(a,1),a--),e}),s.formatArgs.call(r,i),(o.log||s.log||console.log.bind(console)).apply(r,i)}}return o.namespace=e,o.enabled=s.enabled(e),o.useColors=s.useColors(),o.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return s.colors[Math.abs(n)%s.colors.length]}(e),"function"==typeof s.init&&s.init(o),o}(s=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},s.disable=function(){s.enable("")},s.enable=function(e){s.save(e),s.names=[],s.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")))},s.enabled=function(e){var t,n;for(t=0,n=s.skips.length;t<n;t++)if(s.skips[t].test(e))return!1;for(t=0,n=s.names.length;t<n;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=e("ms"),s.names=[],s.skips=[],s.formatters={}},{ms:117}],117:[function(e,t,n){function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(e);if("number"==n&&!1===isNaN(e))return t.long?r(t=e,864e5,"day")||r(t,36e5,"hour")||r(t,6e4,"minute")||r(t,1e3,"second")||t+" ms":function(e){if(864e5<=e)return Math.round(e/864e5)+"d";if(36e5<=e)return Math.round(e/36e5)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],118:[function(l,e,c){!function(n,s){!function(){var r=l("process/browser.js").nextTick,e=Function.prototype.apply,i=Array.prototype.slice,a={},o=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof n?n:function(e){var t=o++,n=!(arguments.length<2)&&i.call(arguments,1);return a[t]=!0,r(function(){a[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete a[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":96,timers:118}],119:[function(e,H,t){!function(l){var c=/^\s+/,u=/\s+$/,r=0,a=l.round,d=l.min,h=l.max,e=l.random;function f(e,t){if(t=t||{},(e=e||"")instanceof f)return e;if(!(this instanceof f))return new f(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(c,"").replace(u,"").toLowerCase();var t,n=!1;if(M[e])e=M[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=j.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=j.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=j.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=j.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=j.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=j.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=j.hex8.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),a:I(t[4]),format:n?"name":"hex8"};if(t=j.hex6.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),format:n?"name":"hex"};if(t=j.hex4.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),a:I(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=j.hex3.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(B(e.r)&&B(e.g)&&B(e.b)?(t=function(e,t,n){return{r:255*C(e,255),g:255*C(t,255),b:255*C(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):B(e.h)&&B(e.s)&&B(e.v)?(r=P(e.s),i=P(e.v),t=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=l.floor(e),i=e-r,a=n*(1-t),e=n*(1-i*t),t=n*(1-(1-i)*t),r=r%6;return{r:255*[n,e,a,a,t,n][r],g:255*[t,n,n,e,a,a][r],b:255*[a,a,t,n,n,e][r]}}(e.h,r,i),o=!0,s="hsv"):B(e.h)&&B(e.s)&&B(e.l)&&(r=P(e.s),a=P(e.l),t=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e=C(e,360),t=C(t,100),n=C(n,100),0===t?r=i=a=n:(r=o(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),i=o(t,n,e),a=o(t,n,e-1/3));return{r:255*r,g:255*i,b:255*a}}(e.h,r,a),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=E(n),{ok:o,format:e.format||s,r:d(255,h(t.r,0)),g:d(255,h(t.g,0)),b:d(255,h(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=r++}function i(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,i=h(e,t,n),a=d(e,t,n),o=(i+a)/2;if(i==a)r=l=0;else{var s=i-a,l=.5<o?s/(2-i-a):s/(i+a);switch(i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,l:o}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,i=h(e,t,n),a=d(e,t,n),o=i,s=i-a,l=0===i?0:s/i;if(i==a)r=0;else{switch(i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,v:o}}function t(e,t,n,r){n=[O(a(e).toString(16)),O(a(t).toString(16)),O(a(n).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function s(e,t,n,r){return[O(R(r)),O(a(e).toString(16)),O(a(t).toString(16)),O(a(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.s-=t/100,e.s=L(e.s),f(e)}function p(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.s+=t/100,e.s=L(e.s),f(e)}function m(e){return f(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.l+=t/100,e.l=L(e.l),f(e)}function _(e,t){t=0===t?0:t||10;e=f(e).toRgb();return e.r=h(0,d(255,e.r-a(-t/100*255))),e.g=h(0,d(255,e.g-a(-t/100*255))),e.b=h(0,d(255,e.b-a(-t/100*255))),f(e)}function y(e,t){t=0===t?0:t||10;e=f(e).toHsl();return e.l-=t/100,e.l=L(e.l),f(e)}function v(e,t){e=f(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,f(e)}function b(e){e=f(e).toHsl();return e.h=(e.h+180)%360,f(e)}function x(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+120)%360,s:t.s,l:t.l}),f({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+90)%360,s:t.s,l:t.l}),f({h:(n+180)%360,s:t.s,l:t.l}),f({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+72)%360,s:t.s,l:t.l}),f({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var r=f(e).toHsl(),i=360/n,a=[f(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(f(r));return a}function k(e,t){t=t||6;for(var e=f(e).toHsv(),n=e.h,r=e.s,i=e.v,a=[],o=1/t;t--;)a.push(f({h:n,s:r,v:i})),i=(i+o)%1;return a}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:l.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:l.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:l.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=E(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),e=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),e=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){r=[O(a(e).toString(16)),O(a(t).toString(16)),O(a(n).toString(16)),O(R(r))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*C(this._r,255))+"%",g:a(100*C(this._g,255))+"%",b:a(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*C(this._r,255))+"%, "+a(100*C(this._g,255))+"%, "+a(100*C(this._b,255))+"%)":"rgba("+a(100*C(this._r,255))+"%, "+a(100*C(this._g,255))+"%, "+a(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&S[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+s((e=f(e))._r,e._g,e._b,e._a):n)+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){t=e.apply(null,[this].concat([].slice.call(t)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},f.fromRatio=function(e,t){if("object"==typeof e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:P(e[n]));e=r}return f(e,t)},f.equals=function(e,t){return!(!e||!t)&&f(e).toRgbString()==f(t).toRgbString()},f.random=function(){return f.fromRatio({r:e(),g:e(),b:e()})},f.mix=function(e,t,n){n=0===n?0:n||50;e=f(e).toRgb(),t=f(t).toRgb(),n/=100;return f({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},f.readability=function(e,t){e=f(e),t=f(t);return(l.max(e.getLuminance(),t.getLuminance())+.05)/(l.min(e.getLuminance(),t.getLuminance())+.05)},f.isReadable=function(e,t,n){var r=f.readability(e,t),i=!1,n=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(n);switch(n.level+n.size){case"AAsmall":case"AAAlarge":i=4.5<=r;break;case"AAlarge":i=3<=r;break;case"AAAsmall":i=7<=r}return i},f.mostReadable=function(e,t,n){for(var r,i=null,a=0,o=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,c=0;c<t.length;c++)a<(r=f.readability(e,t[c]))&&(a=r,i=f(t[c]));return f.isReadable(e,i,{level:s,size:l})||!o?i:(n.includeFallbackColors=!1,f.mostReadable(e,["#fff","#000"],n))};var M=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=f.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(M);function E(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function C(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n,n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=d(t,h(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),l.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function L(e){return d(1,h(0,e))}function D(e){return parseInt(e,16)}function O(e){return 1==e.length?"0"+e:""+e}function P(e){return e=e<=1?100*e+"%":e}function R(e){return l.round(255*parseFloat(e)).toString(16)}function I(e){return D(e)/255}var N,z,F,j=(z="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",F="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(e){return j.CSS_UNIT.exec(e)}void 0!==H&&H.exports?H.exports=f:window.tinycolor=f}(Math)},{}],120:[function(e,n,t){!function(t){!function(){function r(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}n.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],121:[function(e,t,n){var i=e("../main"),e=e("object-assign"),a=i.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(o.prototype=new i.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e){var n=e.match(l);return n?n[0]:""}var r=this._validateYear(e),n=e.month(),e=""+this.toChineseMonth(r,n);return t&&e.length<2&&(e="0"+e),this.isIntercalaryMonth(r,n)&&(e+="i"),e},monthNames:function(e){if("string"==typeof e){var t=e.match(r);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},monthNamesShort:function(e){if("string"==typeof e){var t=e.match(c);return t?t[0]:""}var n=this._validateYear(e),t=e.month(),e=["","","","","","","","","","","",""][this.toChineseMonth(n,t)-1];return e=this.isIntercalaryMonth(n,t)?""+e:e},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);return isNaN(r)?(""===t[0]&&(n=!0,t=t.substring(1)),""===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["","","","","","","","","","","",""].indexOf(t)):n="i"===(t=t[t.length-1])||"I"===t,this.toMonthIndex(e,r,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if("number"!=typeof(e=e.year?e.year():e)||e<1888||2111<e)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){e=this.intercalaryMonth(e);if(n&&t!==e||t<1||12<t)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||!n&&t<=e?t-1:t},toChineseMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);if(t<0||(e?12:11)<t)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||t<e?t+1:t},intercalaryMonth:function(e){return e=this._validateYear(e),h[e-h[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);return!!e&&e===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var r=this._validateYear(e,i.local.invalidyear),r=f[r-f[0]],r=a.newDate(r>>9&4095,r>>5&15,31&r);r.add(4-(r.dayOfWeek()||7),"d");r=this.toJD(e,t,n)-r.toJD();return 1+Math.floor(r/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);e=h[e-h[0]];if((e>>13?12:11)<t)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return e&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,void 0,n,i.local.invalidDate);e=this._validateYear(r.year()),t=r.month(),n=r.day();r=this.isIntercalaryMonth(e,t),r=function(e,t,n,r,i){var a,o;if("object"==typeof e)d=e,a=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=30))throw new Error("Lunar day outside range 1 - 30");a="object"==typeof r?(c=!1,r):(c=!!r,i||{}),d={year:e,month:t,day:n,isIntercalary:c}}o=d.day-1;var s,l=h[d.year-h[0]],c=l>>13;s=c&&(d.month>c||d.isIntercalary)?d.month:d.month-1;for(var u=0;u<s;u++)o+=l&1<<12-u?30:29;var d=f[d.year-f[0]],d=new Date(d>>9&4095,(d>>5&15)-1,(31&d)+o);return a.year=d.getFullYear(),a.month=1+d.getMonth(),a.day=d.getDate(),a}(e,this.toChineseMonth(e,t),n,r);return a.toJD(r.year,r.month,r.day)},fromJD:function(e){var t=a.fromJD(e),e=function(e,t,n,r){var i;if("object"==typeof e)o=e,i=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=31))throw new Error("Solar day outside range 1 - 31");o={year:e,month:t,day:n},i=r||{}}n=f[o.year-f[0]],r=o.year<<9|o.month<<5|o.day;i.year=n<=r?o.year:o.year-1,n=f[i.year-f[0]];var a,n=new Date(n>>9&4095,(n>>5&15)-1,31&n),o=new Date(o.year,o.month-1,o.day);a=Math.round((o-n)/864e5);var s,l=h[i.year-h[0]];for(s=0;s<13;s++){var c=l&1<<12-s?30:29;if(a<c)break;a-=c}n=l>>13;!n||s<n?(i.isIntercalary=!1,i.month=1+s):(i.isIntercalary=s===n,i.month=s);return i.day=1+a,i}(t.year(),t.month(),t.day()),t=this.toMonthIndex(e.year,e.month,e.isIntercalary);return this.newDate(e.year,t,e.day)},fromString:function(e){var t=e.match(s),n=this._validateYear(+t[1]),r=+t[2],e=!!t[3],e=this.toMonthIndex(n,r,e),t=+t[4];return this.newDate(n,e,t)},add:function(e,t,n){var r=e.year(),i=e.month(),a=this.isIntercalaryMonth(r,i),r=this.toChineseMonth(r,i),i=Object.getPrototypeOf(o.prototype).add.call(this,e,t,n);return"y"===n&&(e=i.year(),t=i.month(),n=this.isIntercalaryMonth(e,r),(r=a&&n?this.toMonthIndex(e,r,!0):this.toMonthIndex(e,r,!1))!==t&&i.month(r)),i}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,l=/^\d?\d[iI]?/m,r=/^??[]?/m,c=/^??[]?/m;i.calendars.chinese=o;var h=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":135,"object-assign":71}],122:[function(e,t,n){var r=e("../main");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(i.prototype=new r.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.coptic=i},{"../main":135,"object-assign":71}],123:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),400},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,i.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){n=this.dayOfWeek(e,t,n);return 2<=n&&n<=6},extraInfo:function(e,t,n){n=this._validate(e,t,n,i.local.invalidDate);return{century:a[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year()+(r.year()<0?1:0),t=r.month(),(n=r.day())+(1<t?16:0)+(2<t?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=15<e?16:0;var n=Math.floor(e/32)+1;return this.newDate(t<=0?t-1:t,n,e-32*(n-1)+1)}});var a={20:"Fruitbat",21:"Anchovy"};i.calendars.discworld=r},{"../main":135,"object-assign":71}],124:[function(e,t,n){var r=e("../main");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(i.prototype=new r.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(13===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return(e=n.year())<0&&e++,n.day()+30*(n.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1;n<=0&&n--;t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),e=Math.floor(t/30)+1;return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.ethiopian=i},{"../main":135,"object-assign":71}],125:[function(e,t,n){var o=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new o.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this._leapYear(e.year())},_leapYear:function(e){return i(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,o.local.invalidMonth),12===t&&this.leapYear(e)||8===t&&5===i(this.daysInYear(e),10)?30:9===t&&3===i(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){n=this._validate(e,t,n,o.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=e<=0?e+1:e,i=this.jdEpoch+this._delay1(r)+this._delay2(r)+n+1;if(t<7){for(var a=7;a<=this.monthsInYear(e);a++)i+=this.daysInMonth(e,a);for(a=1;a<t;a++)i+=this.daysInMonth(e,a)}else for(a=7;a<t;a++)i+=this.daysInMonth(e,a);return i},_delay1:function(e){e=Math.floor((235*e-234)/19),e=29*e+Math.floor((12084+13753*e)/25920);return i(3*(e+1),7)<3&&e++,e},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),o.calendars.hebrew=r},{"../main":135,"object-assign":71}],126:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,i.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),t=r.month(),e=e<=0?e+1:e,(n=r.day())+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=(t=Math.floor((30*(e-this.jdEpoch)+10646)/10631))<=0?t-1:t,n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),e=e-this.toJD(t,n,1)+1;return this.newDate(t,n,e)}}),i.calendars.islamic=r},{"../main":135,"object-assign":71}],127:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return(e=t.year()<0?t.year()+1:t.year())%4==0},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5)+1524,n=Math.floor((t-122.1)/365.25),r=Math.floor(365.25*n),i=Math.floor((t-r)/30.6001),e=i-Math.floor(i<14?1:13),n=n-Math.floor(2<e?4716:4715),i=t-r-Math.floor(30.6001*i);return n<=0&&n--,this.newDate(n,e,i)}}),i.calendars.julian=r},{"../main":135,"object-assign":71}],128:[function(e,t,n){var r=e("../main");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}function o(e,t){return a(e-1,t)+1}e("object-assign")(i.prototype=new r.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year();var t=Math.floor(e/400);return e%=400,e+=e<0?400:0,t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(19<Math.abs(r)||0<n&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),!0},extraInfo:function(e,t,n){t=this._validate(e,t,n,r.local.invalidDate).toJD(),n=this._toHaab(t),t=this._toTzolkin(t);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[t[0]-1],tzolkinDay:t[0],tzolkinTrecena:t[1]}},_toHaab:function(e){e=a((e-=this.jdEpoch)+8+340,365);return[Math.floor(e/20)+1,a(e,20)]},_toTzolkin:function(e){return[o((e-=this.jdEpoch)+20,20),o(e+4,13)]},toJD:function(e,t,n){n=this._validate(e,t,n,r.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20);return this.newDate(t,n,e%20)}}),r.calendars.mayan=i},{"../main":135,"object-assign":71}],129:[function(e,t,n){var o=e("../main"),e=e("object-assign");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}r.prototype=new o.baseCalendar;var s=o.instance("gregorian");e(r.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(e.year()+(e.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidMonth);(e=r.year())<0&&e++;for(var i=r.day(),a=1;a<r.month();a++)i+=this.daysPerMonth[a-1];return i+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),o.calendars.nanakshahi=r},{"../main":135,"object-assign":71}],130:[function(e,t,n){var s=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new s.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var t=0,n=this.minMonth;n<=12;n++)t+=this.NEPALI_CALENDAR_DATA[e][n];return t},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var r=s.instance(),i=0,a=t,o=e;this._createMissingCalendarData(e);e-=9<a||9===a&&n>=this.NEPALI_CALENDAR_DATA[o][0]?56:57;for(9!==t&&(i=n,a--);9!==a;)a<=0&&(a=12,o--),i+=this.NEPALI_CALENDAR_DATA[o][a],a--;return 9===t?(i+=n-this.NEPALI_CALENDAR_DATA[o][0])<0&&(i+=r.daysInYear(e)):i+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],r.newDate(e,1,1).add(i,"d").toJD()},fromJD:function(e){var t=s.instance().fromJD(e),e=t.year(),n=t.dayOfYear(),r=e+56;this._createMissingCalendarData(r);for(var i=9,e=this.NEPALI_CALENDAR_DATA[r][0],a=this.NEPALI_CALENDAR_DATA[r][i]-e+1;a<n;)12<++i&&(i=1,r++),a+=this.NEPALI_CALENDAR_DATA[r][i];e=this.NEPALI_CALENDAR_DATA[r][i]-(a-n);return this.newDate(r,i,e)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),s.calendars.nepali=r},{"../main":135,"object-assign":71}],131:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new i.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return 682*((e.year()-(0<e.year()?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-(n.dayOfWeek()+1)%7,"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);e=r.year(),t=r.month(),n=r.day();r=e-(0<=e?474:473),e=474+a(r,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*e-110)/2816)+365*(e-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(t/1029983),r=a(t,1029983),i=2820;1029982!==r&&(t=Math.floor(r/366),r=a(r,366),i=Math.floor((2134*t+2816*r+2815)/1028522)+t+1);i=(i=i+2820*n+474)<=0?i-1:i,n=e-this.toJD(i,1,1)+1,n=n<=186?Math.ceil(n/31):Math.ceil((n-6)/30),e=e-this.toJD(i,n,1)+1;return this.newDate(i,n,e)}}),i.calendars.persian=r,i.calendars.jalali=r},{"../main":135,"object-assign":71}],132:[function(e,t,n){var i=e("../main"),e=e("object-assign"),a=i.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new i.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(t.year());return a.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(r.year());return a.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,i.local.invalidDate),e=this._t2gYear(n.year());return a.toJD(e,n.month(),n.day())},fromJD:function(e){var t=a.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)}}),i.calendars.taiwan=r},{"../main":135,"object-assign":71}],133:[function(e,t,n){var i=e("../main"),e=e("object-assign"),a=i.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new i.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(t.year());return a.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(r.year());return a.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){n=this._validate(e,t,n,i.local.invalidDate),e=this._t2gYear(n.year());return a.toJD(e,n.month(),n.day())},fromJD:function(e){var t=a.fromJD(e),e=this._g2tYear(t.year());return this.newDate(e,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),i.calendars.thai=r},{"../main":135,"object-assign":71}],134:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 355===this.daysInYear(e.year())},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,a.local.invalidMonth).toJD()-24e5+.5,r=0,i=0;i<o.length;i++){if(o[i]>n)return o[r]-o[r-1];r++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){t=this._validate(e,t,n,a.local.invalidDate),n=12*(t.year()-1)+t.month()-15292;return 24e5+(t.day()+o[n-1]-1)-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<o.length&&!(o[r]>t);r++)n++;var i=n+15292,a=Math.floor((i-1)/12),e=t-o[n-1]+1;return this.newDate(a+1,i-12*a,e)},isValid:function(e,t,n){return a.baseCalendar.prototype.isValid.apply(this,arguments)&&(1276<=(e=null!=e.year?e.year:e)&&e<=1500)},_validate:function(e,t,n,r){var i=a.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||1500<i.year)throw r.replace(/\{0\}/,this.local.name);return i}}),a.calendars.ummalqura=r;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":135,"object-assign":71}],135:[function(e,t,n){e=e("object-assign");function r(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function i(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function a(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function o(){this.shortYearCutoff="+10"}function s(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}e(r.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();var n=this._localCals[e+"-"+(t=t||"")];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,i){return(r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,i):r)||this.instance()).newDate(e,t,n)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(i,a){return function(e){for(var t="",n=0;0<e;){var r=e%10,t=(0==r?"":i[r]+a[n])+t;n++,e=Math.floor(e/10)}return(t=0===t.indexOf(i[1]+a[1])?t.substr(1):t)||i[0]}}}),e(i.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0==e?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+a(Math.abs(this.year()),4)+"-"+a(this.month(),2)+"-"+a(this.day(),2)}}),e(o.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new i(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+a(Math.abs(e.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return(t.month()+this.monthsInYear(t)-this.firstMonth)%this.monthsInYear(t)+this.minMonth},fromMonthOfYear:function(e,t){t=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth),t},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),r=e.calendar().fromJD(r);return this._validateLevel--,[r.year(),r.month(),r.day()]}try{var i=e.year()+("y"===n?t:0),a=e.monthOfYear()+("m"===n?t:0),r=e.day();"y"===n?(e.month()!==this.fromMonthOfYear(i,a)&&(a=this.newDate(i,e.month(),this.minDay).monthOfYear()),a=Math.min(a,this.monthsInYear(i)),r=Math.min(r,this.daysInMonth(i,this.fromMonthOfYear(i,a)))):"m"===n&&(function(e){for(;a<e.minMonth;)i--,a+=e.monthsInYear(i);for(var t=e.monthsInYear(i);a>t-1+e.minMonth;)i++,a-=t,t=e.monthsInYear(i)}(this),r=Math.min(r,this.daysInMonth(i,this.fromMonthOfYear(i,a))));var o=[i,this.fromMonthOfYear(i,a),r];return this._validateLevel--,o}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){return this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&0<e.year()==0<t[0]||(r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],t=this._add(e,n*r[0]+(n<0?-1:1)*r[1],r[2])),e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),i="m"===n?t:e.month(),t="d"===n?t:e.day();return"y"!==n&&"m"!==n||(t=Math.min(t,this.daysInMonth(r,i))),e.date(r,i,t)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;return r&&(e=this.newDate(e,t,this.minDay),r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(e)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(e)),this._validateLevel--,r},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return l.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(l.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var i=this.newDate(e,t,n);return this._validateLevel--,i}catch(e){throw this._validateLevel--,e}}}),e(s.prototype=new o,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){n=this.newDate(e,t,n);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){t=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);r=Math.floor(e/100),r=2-r+Math.floor(r/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25),r=1524+(n=t+1+n-Math.floor(n/4)),e=Math.floor((r-122.1)/365.25),t=Math.floor(365.25*e),n=Math.floor((r-t)/30.6001),t=r-t-Math.floor(30.6001*n),n=n-(13.5<n?13:1),e=e-(2.5<n?4716:4715);return e<=0&&e--,this.newDate(e,n,t)},toJSDate:function(e,t,n){n=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=new Date(n.year(),n.month()-1,n.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(12<n.getHours()?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var l=t.exports=new r;l.cdate=i,l.baseCalendar=o,l.calendars.gregorian=s},{"object-assign":71}],136:[function(e,t,n){var r=e("object-assign"),M=e("./main");r(M.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),M.local=M.regionalOptions[""],r(M.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(M.baseCalendar.prototype,{UNIX_EPOCH:M.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:M.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,e,t){if("string"!=typeof r&&(t=e,e=r,r=""),!e)return"";if(e.calendar()!==this)throw M.local.invalidFormat||M.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;function a(e,t){for(var n=1;x+n<r.length&&r.charAt(x+n)===e;)n++;return x+=n-1,1<Math.floor(n/(t||1))}function n(e,t,n,r){var i=""+t;if(a(e,r))for(;i.length<n;)i="0"+i;return i}for(var i,o,s,l,c,u,d=(t=t||{}).dayNamesShort||this.local.dayNamesShort,h=t.dayNames||this.local.dayNames,f=t.monthNumbers||this.local.monthNumbers,p=t.monthNamesShort||this.local.monthNamesShort,m=t.monthNames||this.local.monthNames,g=(t.calculateWeek||this.local.calculateWeek,this),_=this.local.digits,y=function(e){return t.localNumbers&&_?_(e):e},v="",b=!1,x=0;x<r.length;x++)if(b)"'"!==r.charAt(x)||a("'")?v+=r.charAt(x):b=!1;else switch(r.charAt(x)){case"d":v+=y(n("d",e.day(),2));break;case"D":v+=(s="D",l=e.dayOfWeek(),c=d,u=h,(a(s)?u:c)[l]);break;case"o":v+=n("o",e.dayOfYear(),3);break;case"w":v+=n("w",e.weekOfYear(),2);break;case"m":v+=(o=e,"function"==typeof f?f.call(g,o,a("m")):y(n("m",o.month(),2)));break;case"M":v+=(i=e,a("M")?"function"==typeof m?m.call(g,i):m[i.month()-g.minMonth]:"function"==typeof p?p.call(g,i):p[i.month()-g.minMonth]);break;case"y":v+=a("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":a("Y",2),v+=e.formatYear();break;case"J":v+=e.toJD();break;case"@":v+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":v+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":a("'")?v+="'":b=!0;break;default:v+=r.charAt(x)}return v},parseDate:function(r,o,e){if(null==o)throw M.local.invalidArguments||M.regionalOptions[""].invalidArguments;if(""===(o="object"==typeof o?o.toString():o+""))return null;r=r||this.local.dateFormat;function s(e,t){for(var n=1;T+n<r.length&&r.charAt(T+n)===e;)n++;return T+=n-1,1<Math.floor(n/(t||1))}function t(e,t){if(t=s(e,t),e=[2,3,t?4:2,t?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],e=new RegExp("^-?\\d{1,"+e+"}"),!(e=o.substring(w).match(e)))throw(M.local.missingNumberAt||M.regionalOptions[""].missingNumberAt).replace(/\{0\}/,w);return w+=e[0].length,parseInt(e[0],10)}function n(e,t,n,r){for(var i=s(e,r)?n:t,a=0;a<i.length;a++)if(o.substr(w,i[a].length).toLowerCase()===i[a].toLowerCase())return w+=i[a].length,a+x.minMonth;throw(M.local.unknownNameAt||M.regionalOptions[""].unknownNameAt).replace(/\{0\}/,w)}function i(){if(o.charAt(w)!==r.charAt(T))throw(M.local.unexpectedLiteralAt||M.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,w);w++}for(var a="string"!=typeof(a=(e=e||{}).shortYearCutoff||this.shortYearCutoff)?a:this.today().year()%100+parseInt(a,10),l=e.dayNamesShort||this.local.dayNamesShort,c=e.dayNames||this.local.dayNames,u=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,h=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames,p=-1,m=-1,g=-1,_=-1,y=-1,v=!1,b=!1,x=this,w=0,T=0;T<r.length;T++)if(b)"'"!==r.charAt(T)||s("'")?i():b=!1;else switch(r.charAt(T)){case"d":_=t("d");break;case"D":n("D",l,c);break;case"o":y=t("o");break;case"w":t("w");break;case"m":g=function(){if("function"!=typeof d)return t("m");s("m");var e=d.call(x,o.substring(w));return w+=e.length,e}();break;case"M":g=function(){if("function"!=typeof f)return n("M",h,f);var e=(s("M")?f:h).call(x,o.substring(w));return w+=e.length,e}();break;case"y":var A=T,v=!s("y",2),T=A,m=t("y",2);break;case"Y":m=t("Y",2);break;case"J":p=t("J")+.5,"."===o.charAt(w)&&(w++,t("J"));break;case"@":p=t("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=t("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":w=o.length;break;case"'":s("'")?i():b=!0;break;default:i()}if(w<o.length)throw M.local.unexpectedText||M.regionalOptions[""].unexpectedText;if(-1===m?m=this.today().year():m<100&&v&&(m+=-1===a?1900:this.today().year()-this.today().year()%100-(m<=a?0:100)),"string"==typeof g&&(g=u.call(this,m,g)),-1<y)for(var g=1,_=y,k=this.daysInMonth(m,g);k<_;k=this.daysInMonth(m,g))g++,_-=k;return-1<p?this.fromJD(p):this.newDate(m,g,_)},determineDate:function(e,t,i,a,o){i&&"object"!=typeof i&&(o=a,a=i,i=null),"string"!=typeof a&&(o=a,a="");var s=this;return t=t?t.newDate():null,e=null==e?t:"string"==typeof e?function(e){try{return s.parseDate(a,e,o)}catch(e){}for(var t=((e=e.toLowerCase()).match(/^c/)&&i?i.newDate():null)||s.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,r=n.exec(e);r;)t.add(parseInt(r[1],10),r[2]||"d"),r=n.exec(e);return t}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e)}})},{"./main":135,"object-assign":71}],137:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],138:[function(e,t,n){"use strict";var r=e("./arrow_paths"),i=e("../../plots/font_attributes"),a=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/font_attributes":360,"./arrow_paths":137}],139:[function(e,t,n){"use strict";var r=e("../../lib"),p=e("../../plots/cartesian/axes"),i=e("./draw").draw;function a(a){var e=a._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var t=p.getFromId(a,e.xref),n=p.getFromId(a,e.yref),r=p.getRefType(e.xref),i=p.getRefType(e.yref);e._extremes={},"range"===r&&o(e,t),"range"===i&&o(e,n)})}function o(e,t){var n=t._id,r=n.charAt(0),i=e[r],a=e["a"+r],o=e[r+"ref"],s=e["a"+r+"ref"],l=e["_"+r+"padplus"],c=e["_"+r+"padminus"],u={x:1,y:-1}[r]*e[r+"shift"],d=3*e.arrowsize*e.arrowwidth||0,h=d+u,f=d-u,r=3*e.startarrowsize*e.arrowwidth||0,d=r+u,u=r-u;u=s===o?(s=p.findExtremes(t,[t.r2c(i)],{ppadplus:h,ppadminus:f}),o=p.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,d),ppadminus:Math.max(c,u)}),{min:[s.min[0],o.min[0]],max:[s.max[0],o.max[0]]}):(d=a?d+a:d,u=a?u-a:u,p.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,h,d),ppadminus:Math.max(c,f,u)})),e._extremes[n]=u}t.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([i,a],e)}},{"../../lib":285,"../../plots/cartesian/axes":331,"./draw":144}],140:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../registry"),u=e("../../plot_api/plot_template").arrayEditor;function d(e,t){for(var n,r,i,a,o,s,l=e._fullLayout.annotations,c=[],u=[],d=[],h=(t||[]).length,f=0;f<l.length;f++)if(i=(r=l[f]).clicktoshow){for(n=0;n<h;n++)if(o=(a=t[n]).xaxis,s=a.yaxis,o._id===r.xref&&s._id===r.yref&&o.d2r(a.x)===p(r._xclick,o)&&s.d2r(a.y)===p(r._yclick,s)){(r.visible?"onout"===i?u:d:c).push(f);break}n===h&&r.visible&&"onout"===i&&u.push(f)}return{on:c,off:u,explicitOff:d}}function p(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){t=d(e,t);return 0<t.on.length||0<t.explicitOff.length},onClick:function(e,t){var n,r,t=d(e,t),i=t.on,a=t.off.concat(t.explicitOff),o={},s=e._fullLayout.annotations;if(i.length||a.length){for(n=0;n<i.length;n++)(r=u(e.layout,"annotations",s[i[n]])).modifyItem("visible",!0),l.extendFlat(o,r.getUpdateObj());for(n=0;n<a.length;n++)(r=u(e.layout,"annotations",s[a[n]])).modifyItem("visible",!1),l.extendFlat(o,r.getUpdateObj());return c.call("update",e,{},o)}}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373}],141:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../color");t.exports=function(e,t,n,r){r("opacity");var i=r("bgcolor"),a=r("bordercolor"),o=d.opacity(a);r("borderpad");var s,l,c=r("borderwidth"),a=r("showarrow");r("text",a?" ":n._dfltTitle.annotation),r("textangle"),u.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),a&&(-1!==(a=r("arrowside")).indexOf("end")&&(s=r("arrowhead"),l=r("arrowsize")),-1!==a.indexOf("start")&&(r("startarrowhead",s),r("startarrowsize",l)),r("arrowcolor",o?t.bordercolor:d.defaultLine),r("arrowwidth",2*(o&&c||1)),r("standoff"),r("startstandoff"));c=r("hovertext"),n=n.hoverlabel||{};c&&(i=r("hoverlabel.bgcolor",n.bgcolor||(d.opacity(i)?d.rgb(i):d.defaultLine)),i=r("hoverlabel.bordercolor",n.bordercolor||d.contrast(i)),u.coerceFont(r,"hoverlabel.font",{family:n.font.family,size:n.font.size,color:n.font.color||i})),r("captureevents",!!c)}},{"../../lib":285,"../color":155}],142:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),h=e("../../lib/to_log_range");t.exports=function(e,r,t,i){r=r||{};var a="log"===t&&"linear"===r.type,t="linear"===t&&"log"===r.type;if(a||t)for(var o,s,n=e._fullLayout.annotations,l=r._id.charAt(0),c=0;c<n.length;c++)o=n[c],s="annotations["+c+"].",o[l+"ref"]===r._id&&u(l),o["a"+l+"ref"]===r._id&&u("a"+l);function u(e){var t=o[e],n=null,n=a?h(t,r.range):Math.pow(10,t);d(n)||(n=null),i(s+e,n)}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],143:[function(e,t,n){"use strict";var m=e("../../lib"),g=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),_=e("./common_defaults"),y=e("./attributes");function i(n,r,e){function t(e,t){return m.coerce(n,r,y,e,t)}var i=t("visible"),a=t("clicktoshow");if(i||a){_(n,r,e,t);for(var o=r.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:e},u=0;u<2;u++){var d,h,f=s[u],p=g.coerceRef(n,r,c,f,"","paper");"paper"!==p&&g.getFromId(c,p)._annIndices.push(r._index),g.coercePosition(r,c,t,p,f,.5),o&&("pixel"!==(h=g.coerceRef(n,r,c,d="a"+f,"pixel",["pixel","paper"]))&&h!==p&&(h=r[d]="pixel"),g.coercePosition(r,c,t,h,d,"pixel"===h?l[u]:.4)),t(f+"anchor"),t(f+"shift")}m.noneOrAll(n,r,["x","y"]),o&&m.noneOrAll(n,r,["ax","ay"]),a&&(e=t("xclick"),a=t("yclick"),r._xclick=void 0===e?r.x:g.cleanPosition(e,c,r.xref),r._yclick=void 0===a?r.y:g.cleanPosition(a,c,r.yref))}}t.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:i})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":138,"./common_defaults":141}],144:[function(e,t,n){"use strict";var o=e("@plotly/d3"),ie=e("../../registry"),r=e("../../plots/plots"),ae=e("../../lib"),oe=ae.strTranslate,se=e("../../plots/cartesian/axes"),le=e("../color"),ce=e("../drawing"),s=e("../fx"),ue=e("../../lib/svg_text_utils"),de=e("../../lib/setcursor"),he=e("../dragelement"),l=e("../../plot_api/plot_template").arrayEditor,fe=e("./draw_arrow_head");function i(e,t){var n=e._fullLayout.annotations[t]||{},r=se.getFromId(e,n.xref),i=se.getFromId(e,n.yref);r&&r.setScale(),i&&i.setScale(),a(e,n,t,!1,r,i)}function pe(e,t,n,r,i){var a=i[n],i=i[n+"ref"],n=-1!==n.indexOf("y"),i="domain"===se.getRefType(i),r=n?r.h:r.w;return e?i?a+(n?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(n?-t:t)/r}function a(P,R,t,I,N,z){var F=P._fullLayout,j=P._fullLayout._size,B=P._context.edits,e=I?(r="annotation-"+I,I+".annotations"):(r="annotation","annotations"),e=l(P.layout,e,R),H=e.modifyBase,U=e.modifyItem,V=e.getUpdateObj;F._infolayer.selectAll("."+r+'[data-index="'+t+'"]').remove();var q,Y,G,W,X,Z,J,$,Q,K,ee,n,r,te,ne="clip"+F._uid+"_ann"+t;function re(e){e={index:t,annotation:R._input,fullAnnotation:R,event:e};return I&&(e.subplotId=I),e}function i(e){return e.call(ce.font,n).attr({"text-anchor":{left:"start",right:"end"}[R.align]||"middle"}),ue.convertToTspans(e,P,a),e}function a(){var e=te.selectAll("a");1===e.size()&&e.text()===te.text()&&Z.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var t=Z.select(".annotation-text-math-group"),n=!t.empty(),r=ce.bBox((n?t:te).node()),i=r.width,a=r.height,o=R.width||i,s=R.height||a,l=Math.round(o+2*$),c=Math.round(s+2*$);function u(e,t){return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t="auto"===t?e<1/3?"left":2/3<e?"right":"center":t]}for(var d,h,f,p=!1,m=["x","y"],g=0;g<m.length;g++){var _,y,v,b,x,w=m[g],T=R[w+"ref"]||w,A=R["a"+w+"ref"],k={x:N,y:z}[w],M=(Y+("x"===w?0:-90))*Math.PI/180,S=l*Math.cos(M),E=c*Math.sin(M),C=Math.abs(S)+Math.abs(E),L=R[w+"anchor"],D=R[w+"shift"]*("x"===w?1:-1),O=q[w],M=se.getRefType(T);M=k&&"domain"!==M?(((y=k.r2fraction(R[w]))<0||1<y)&&(A!==T||(y=k.r2fraction(R["a"+w]))<0||1<y)&&(p=!0),y=k._offset+k.r2p(R[w]),.5):(x="domain"===M,y="x"===w?(_=R[w],x?k._offset+k._length*_:j.l+j.w*_):(_=1-R[w],x?k._offset+k._length*_:j.t+j.h*_),R.showarrow?.5:_),R.showarrow?(O.head=y,x=R["a"+w],v=S*u(.5,R.xanchor)-E*u(.5,R.yanchor),b=A===T?(b=se.getRefType(A),O.tail="domain"===b?k._offset+k._length*(x="y"===w?1-x:x):"paper"===b?"y"===w?j.t+j.h*(x=1-x):j.l+j.w*x:k._offset+k.r2p(x),v):(O.tail=y+x,v+x),O.text=O.tail+v,x=F["x"===w?"width":"height"],"paper"===T&&(O.head=ae.constrain(O.head,1,x-1)),"pixel"===A&&(A=-Math.max(O.tail-3,O.text),x=Math.min(O.tail+3,O.text)-x,0<A?(O.tail+=A,O.text+=A):0<x&&(O.tail-=x,O.text-=x)),O.tail+=D,O.head+=D):(b=v=C*u(M,L),O.text=y+v),O.text+=D,v+=D,b+=D,R["_"+w+"padplus"]=C/2+b,R["_"+w+"padminus"]=C/2-b,R["_"+w+"size"]=C,R["_"+w+"shift"]=v}p?Z.remove():(e=d=0,"left"!==R.align&&(d=(o-i)*("center"===R.align?.5:1)),"top"!==R.valign&&(e=(s-a)*("middle"===R.valign?.5:1)),n?t.select("svg").attr({x:$+d-1,y:$+e}).call(ce.setClipUrl,K?ne:null,P):(e=$+e-r.top,r=$+d-r.left,te.call(ue.positionText,r,e).call(ce.setClipUrl,K?ne:null,P)),ee.select("rect").call(ce.setRect,$,$,o,s),Q.call(ce.setRect,J/2,J/2,l-J,c-J),Z.call(ce.setTranslate,Math.round(q.x.text-l/2),Math.round(q.y.text-c/2)),W.attr({transform:"rotate("+Y+","+q.x.text+","+q.y.text+")"}),h=function(e,t){G.selectAll(".annotation-arrow-g").remove();var i,a,o,n=q.x.head,r=q.y.head,s=q.x.tail+e,l=q.y.tail+t,c=q.x.text+e,u=q.y.text+t,d=ae.rotationXYMatrix(Y,c,u),h=ae.apply2DTransform(d),e=ae.apply2DTransform2(d),t=+Q.attr("width"),d=+Q.attr("height"),c=c-.5*t,t=c+t,u=u-.5*d,d=u+d,t=[[c,u,c,d],[c,d,t,d],[t,d,t,u],[t,u,c,u]].map(e);t.reduce(function(e,t){return e^!!ae.segmentsIntersect(n,r,n+1e6,r+1e6,t[0],t[1],t[2],t[3])},!1)||(t.forEach(function(e){e=ae.segmentsIntersect(s,l,n,r,e[0],e[1],e[2],e[3]);e&&(s=e.x,l=e.y)}),c=R.arrowwidth,u=R.arrowcolor,e=R.arrowside,t=(i=G.append("g").style({opacity:le.opacity(u)}).classed("annotation-arrow-g",!0)).append("path").attr("d","M"+s+","+l+"L"+n+","+r).style("stroke-width",c+"px").call(le.stroke,le.rgb(u)),fe(t,e,R),B.annotationPosition&&t.node().parentNode&&!I&&(u=n,e=r,R.standoff&&(t=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-l,2)),u+=R.standoff*(s-n)/t,e+=R.standoff*(l-r)/t),c=i.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(s-u)+","+(l-e),transform:oe(u,e)}).style("stroke-width",c+6+"px").call(le.stroke,"rgba(0,0,0,0)").call(le.fill,"rgba(0,0,0,0)"),he.init({element:c.node(),gd:P,prepFn:function(){var e=ce.getTranslate(Z);a=e.x,o=e.y,N&&N.autorange&&H(N._name+".autorange",!0),z&&z.autorange&&H(z._name+".autorange",!0)},moveFn:function(e,t){var n=h(a,o),r=n[0]+e,n=n[1]+t;Z.call(ce.setTranslate,r,n),U("x",pe(N,e,"x",j,R)),U("y",pe(z,t,"y",j,R)),R.axref===R.xref&&U("ax",pe(N,e,"ax",j,R)),R.ayref===R.yref&&U("ay",pe(z,t,"ay",j,R)),i.attr("transform",oe(e,t)),W.attr({transform:"rotate("+Y+","+r+","+n+")"})},doneFn:function(){ie.call("_guiRelayout",P,V());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})))},R.showarrow&&h(0,0),X&&he.init({element:Z.node(),gd:P,prepFn:function(){f=W.attr("transform")},moveFn:function(e,t){var n,r,i,a="pointer";if(R.showarrow)R.axref===R.xref?U("ax",pe(N,e,"ax",j,R)):U("ax",R.ax+e),R.ayref===R.yref?U("ay",pe(z,t,"ay",j.w,R)):U("ay",R.ay+t),h(e,t);else{if(I)return;n=N?pe(N,e,"x",j,R):(r=R._xsize/j.w,n=R.x+(R._xshift-R.xshift)/j.w-r/2,he.align(n+e/j.w,r,0,1,R.xanchor)),i=z?pe(z,t,"y",j,R):(i=R._ysize/j.h,r=R.y-(R._yshift+R.yshift)/j.h-i/2,he.align(r-t/j.h,i,0,1,R.yanchor)),U("x",n),U("y",i),N&&z||(a=he.getCursor(N?.5:n,z?.5:i,R.xanchor,R.yanchor))}W.attr({transform:oe(e,t)+f}),de(Z,a)},clickFn:function(e,t){R.captureevents&&P.emit("plotly_clickannotation",re(t))},doneFn:function(){de(Z),ie.call("_guiRelayout",P,V());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}}))}R._input&&!1!==R.visible?(q={x:{},y:{}},Y=+R.textangle||0,G=F._infolayer.append("g").classed(r,!0).attr("data-index",String(t)).style("opacity",R.opacity),W=G.append("g").classed("annotation-text-g",!0),X=B[R.showarrow?"annotationTail":"annotationPosition"],r=R.captureevents||B.annotationText||X,Z=W.append("g").style("pointer-events",r?"all":null).call(de,"pointer").on("click",function(){P._dragging=!1,P.emit("plotly_clickannotation",re(o.event))}),R.hovertext&&Z.on("mouseover",function(){var e=R.hoverlabel,t=e.font,n=this.getBoundingClientRect(),r=P.getBoundingClientRect();s.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:R.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:P})}).on("mouseout",function(){s.loneUnhover(F._hoverlayer.node())}),J=R.borderwidth,r=R.borderpad,$=J+r,Q=Z.append("rect").attr("class","bg").style("stroke-width",J+"px").call(le.stroke,R.bordercolor).call(le.fill,R.bgcolor),K=R.width||R.height,(ee=F._topclips.selectAll("#"+ne).data(K?[0]:[])).enter().append("clipPath").classed("annclip",!0).attr("id",ne).append("rect"),ee.exit().remove(),n=R.font,r=F._meta?ae.templateString(R.text,F._meta):R.text,te=Z.append("text").classed("annotation-text",!0).text(r),B.annotationText?te.call(ue.makeEditable,{delegate:Z,gd:P}).call(i).on("edit",function(e){R.text=e,this.call(i),U("text",e),N&&N.autorange&&H(N._name+".autorange",!0),z&&z.autorange&&H(z._name+".autorange",!0),ie.call("_guiRelayout",P,V())}):te.call(i)):o.selectAll("#"+ne).remove()}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&i(e,n);return r.previousPromises(e)},drawOne:i,drawRaw:a}},{"../../lib":285,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../fx":195,"./draw_arrow_head":145,"@plotly/d3":20}],145:[function(e,t,n){"use strict";var T=e("@plotly/d3"),A=e("../color"),k=e("./arrow_paths"),e=e("../../lib"),M=e.strScale,S=e.strRotate,E=e.strTranslate;t.exports=function(i,e,a){var o=i.node(),t=k[a.arrowhead||0],n=k[a.startarrowhead||0],r=(a.arrowwidth||1)*(a.arrowsize||1),s=(a.arrowwidth||1)*(a.startarrowsize||1),l=0<=e.indexOf("start"),c=0<=e.indexOf("end"),u=t.backoff*r+a.standoff,d=n.backoff*s+a.startstandoff;if("line"===o.nodeName){var h,f={x:+i.attr("x1"),y:+i.attr("y1")},p={x:+i.attr("x2"),y:+i.attr("y2")},m=f.x-p.x,g=f.y-p.y,_=(h=Math.atan2(g,m))+Math.PI;if(u&&d&&u+d>Math.sqrt(m*m+g*g))return void x();if(u){if(m*m+g*g<u*u)return void x();var y=u*Math.cos(h),e=u*Math.sin(h);p.x+=y,p.y+=e,i.attr({x2:p.x,y2:p.y})}if(d){if(m*m+g*g<d*d)return void x();var v=d*Math.cos(h),b=d*Math.sin(h);f.x-=v,f.y-=b,i.attr({x1:f.x,y1:f.y})}}else if("path"===o.nodeName){m=o.getTotalLength();if(m<u+d)return void x();v=o.getPointAtLength(0),b=o.getPointAtLength(.1);h=Math.atan2(v.y-b.y,v.x-b.x),f=o.getPointAtLength(Math.min(d,m));g="0px,"+d+"px,",v=o.getPointAtLength(m),b=o.getPointAtLength(m-.1);_=Math.atan2(v.y-b.y,v.x-b.x),p=o.getPointAtLength(Math.max(0,m-u)),i.style("stroke-dasharray",g+=m-(g?d+u:u)+"px,"+m+"px")}function x(){i.style("stroke-dasharray","0px,100px")}function w(e,t,n,r){e.path&&(e.noRotate&&(n=0),T.select(o.parentNode).append("path").attr({class:i.attr("class"),d:e.path,transform:E(t.x,t.y)+S(180*n/Math.PI)+M(r)}).style({fill:A.rgb(a.arrowcolor),"stroke-width":0}))}l&&w(n,f,h,s),c&&w(t,p,_,r)}},{"../../lib":285,"../color":155,"./arrow_paths":137,"@plotly/d3":20}],146:[function(e,t,n){"use strict";var r=e("./draw"),i=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":138,"./calc_autorange":139,"./click":140,"./convert_coords":142,"./defaults":143,"./draw":144}],147:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../plot_api/edit_types").overrideAll,e=e("../../plot_api/plot_template").templatedArray;t.exports=i(e("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../annotations/attributes":138}],148:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("../../plots/cartesian/axes");t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)!function(e,t){var n=t.fullSceneLayout.domain,r=t.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},i.extendFlat(e._xa,t),a.setConvert(e._xa),e._xa._offset=r.l+n.x[0]*r.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*r.w*(n.x[1]-n.x[0])},e._ya={},i.extendFlat(e._ya,t),a.setConvert(e._ya),e._ya._offset=r.t+(1-n.y[1])*r.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*r.h*(n.y[1]-n.y[0])}}(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":285,"../../plots/cartesian/axes":331}],149:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),l=e("../annotations/common_defaults"),c=e("./attributes");function i(n,r,i,e){function a(e,t){return o.coerce(n,r,c,e,t)}function t(e){var t=e+"axis",n={_fullLayout:{}};return n._fullLayout[t]=i[t],s.coercePosition(r,n,a,e,e,.5)}a("visible")&&(l(n,r,e.fullLayout,a),t("x"),t("y"),t("z"),o.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",a("ax",-10),a("ay",-30),o.noneOrAll(n,r,["ax","ay"])))}t.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:i,fullLayout:n.fullLayout})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"../annotations/common_defaults":141,"./attributes":147}],150:[function(e,t,n){"use strict";var u=e("../annotations/draw").drawRaw,d=e("../../plots/gl3d/project"),h=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,i=0;i<r.length;i++){for(var a=r[i],o=!1,s=0;s<3;s++){var l=h[s],c=a[l],c=t[l+"axis"].r2fraction(c);if(c<0||1<c){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+i+'"]').remove():(a._pdata=d(e.glplot.cameraParams,[t.xaxis.r2l(a.x)*n[0],t.yaxis.r2l(a.y)*n[1],t.zaxis.r2l(a.z)*n[2]]),u(e.graphDiv,a,i,e.id,a._xa,a._ya))}}},{"../../plots/gl3d/project":363,"../annotations/draw":144}],151:[function(e,t,n){"use strict";var s=e("../../registry"),l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=s.subplotsRegistry.gl3d;if(n)for(var r=n.attrRegex,i=Object.keys(e),a=0;a<i.length;a++){var o=i[a];r.test(o)&&(e[o].annotations||[]).length&&(l.pushUnique(t._basePlotModules,n),l.pushUnique(t._subplots.gl3d,o))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":285,"../../registry":373,"./attributes":147,"./convert":148,"./defaults":149,"./draw":150}],152:[function(e,t,n){"use strict";t.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":121,"world-calendars/dist/calendars/coptic":122,"world-calendars/dist/calendars/discworld":123,"world-calendars/dist/calendars/ethiopian":124,"world-calendars/dist/calendars/hebrew":125,"world-calendars/dist/calendars/islamic":126,"world-calendars/dist/calendars/julian":127,"world-calendars/dist/calendars/mayan":128,"world-calendars/dist/calendars/nanakshahi":129,"world-calendars/dist/calendars/nepali":130,"world-calendars/dist/calendars/persian":131,"world-calendars/dist/calendars/taiwan":132,"world-calendars/dist/calendars/thai":133,"world-calendars/dist/calendars/ummalqura":134,"world-calendars/dist/main":135,"world-calendars/dist/plus":136}],153:[function(e,t,n){"use strict";function a(e,t,n,r){var i={};return i[n]=s,o.coerce(e,t,i,n,r)}var r=e("./calendars"),o=e("../../lib"),i=e("../../constants/numerical"),c=i.EPOCHJD,u=i.ONEDAY,s={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var l={};function h(e){var t=l[e];return t=t||(l[e]=r.instance(e))}function f(e){return o.extendFlat({},s,{description:e})}function p(e){return"Sets the calendar system to use with `"+e+"` date data."}var m={xcalendar:f(p("x"))},g=o.extendFlat({},m,{ycalendar:f(p("y"))}),e=o.extendFlat({},g,{zcalendar:f(p("z"))}),i=f(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:e,surface:e,mesh3d:e,scattergl:g,ohlc:m,candlestick:m},layout:{calendar:f(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:i},yaxis:{calendar:i},scene:{xaxis:{calendar:i},yaxis:{calendar:i},zaxis:{calendar:i}},polar:{radialaxis:{calendar:i}}},transforms:{filter:{valuecalendar:f(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:f(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:s,handleDefaults:a,handleTraceDefaults:function(e,t,n,r){for(var i=0;i<n.length;i++)a(e,t,n[i]+"calendar",r.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:h,worldCalFmt:function(e,t,n){for(var r,i,a,o,t=Math.floor((t+.05)/u)+c,s=h(n).fromJD(t),l=0;-1!==(l=e.indexOf("%",l));)"0"===(o=e.charAt(l+1))||"-"===o||"_"===o?(i=3,r=e.charAt(l+2),"_"===o&&(o="-")):(r=o,o="0",i=2),(a=d[r])?(o="##"===a?"##":s.formatDate(a[o]),e=e.substr(0,l)+o+e.substr(l+i),l+=o.length):l+=i;return e}}},{"../../constants/numerical":265,"../../lib":285,"./calendars":152}],154:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],155:[function(e,t,n){"use strict";var i=e("tinycolor2"),a=e("fast-isnumeric"),o=e("../../lib/array").isTypedArray,s=t.exports={},e=e("./attributes");s.defaults=e.defaults;var l=s.defaultLine=e.defaultLine;s.lightLine=e.lightLine;var c=s.background=e.background;function u(e){if(a(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),n="a"===t.charAt(3)&&4===r.length;if(!n&&3!==r.length)return e;for(var i=0;i<r.length;i++){if(!r[i].length)return e;if(r[i]=Number(r[i]),!(0<=r[i]))return e;if(3===i)1<r[i]&&(r[i]=1);else if(1<=r[i])return e}t=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return n?"rgba("+t+", "+r[3]+")":"rgb("+t+")"}s.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},s.rgb=function(e){return s.tinyRGB(i(e))},s.opacity=function(e){return e?i(e).getAlpha():0},s.addOpacity=function(e,t){e=i(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+t+")"},s.combine=function(e,t){var n=i(e).toRgb();if(1===n.a)return i(e).toRgbString();t=i(t||c).toRgb(),t=1===t.a?t:{r:255*(1-t.a)+t.r*t.a,g:255*(1-t.a)+t.g*t.a,b:255*(1-t.a)+t.b*t.a},n={r:t.r*(1-n.a)+n.r*n.a,g:t.g*(1-n.a)+n.g*n.a,b:t.b*(1-n.a)+n.b*n.a};return i(n).toRgbString()},s.contrast=function(e,t,n){var r=i(e);return((r=1!==r.getAlpha()?i(s.combine(e,c)):r).isDark()?t?r.lighten(t):c:n?r.darken(n):l).toString()},s.stroke=function(e,t){t=i(t);e.style({stroke:s.tinyRGB(t),"stroke-opacity":t.getAlpha()})},s.fill=function(e,t){t=i(t);e.style({fill:s.tinyRGB(t),"fill-opacity":t.getAlpha()})},s.clean=function(e){if(e&&"object"==typeof e)for(var t,n,r=Object.keys(e),i=0;i<r.length;i++)if(n=e[a=r[i]],"color"===a.substr(a.length-5))if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]=u(n[t]);else e[a]=u(n);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(n))for(t=0;t<n.length;t++)Array.isArray(n[t])&&(n[t][1]=u(n[t][1]));else if(Array.isArray(n)){var a=n[0];if(!Array.isArray(a)&&a&&"object"==typeof a)for(t=0;t<n.length;t++)s.clean(n[t])}else n&&"object"==typeof n&&!o(n)&&s.clean(n)}},{"../../lib/array":271,"./attributes":154,"fast-isnumeric":31,tinycolor2:119}],156:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),i=e("../../plots/font_attributes"),a=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;t.exports=e({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:a({},r.ticks,{dflt:""}),ticklabeloverflow:a({},r.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plots/cartesian/layout_attributes":346,"../../plots/font_attributes":360}],157:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],158:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../plot_api/plot_template"),c=e("../../plots/cartesian/tick_value_defaults"),u=e("../../plots/cartesian/tick_mark_defaults"),d=e("../../plots/cartesian/tick_label_defaults"),h=e("./attributes");t.exports=function(e,t,n){var r=l.newContainer(t,"colorbar"),i=e.colorbar||{};function a(e,t){return s.coerce(i,r,h,e,t)}var o=a("thicknessmode");a("thickness","fraction"===o?30/(n.width-n.margin.l-n.margin.r):30);t=a("lenmode");a("len","fraction"===t?1:n.height-n.margin.t-n.margin.b),a("x"),a("xanchor"),a("xpad"),a("y"),a("yanchor"),a("ypad"),s.noneOrAll(i,r,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");e=a("ticklabelposition");a("ticklabeloverflow",-1!==e.indexOf("inside")?"hide past domain":"hide past div"),c(i,r,a,"linear");o=n.font,t={outerTicks:!1,font:o};-1!==e.indexOf("inside")&&(t.bgColor="black"),d(i,r,a,"linear",t),u(i,r,a,"linear",t),a("title.text",n._dfltTitle.colorbar);n=r.tickfont,n=s.extendFlat({},n,{color:o.color,size:s.bigFont(n.size)});s.coerceFont(a,"title.font",n),a("title.side")}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/tick_label_defaults":353,"../../plots/cartesian/tick_mark_defaults":354,"../../plots/cartesian/tick_value_defaults":355,"./attributes":156}],159:[function(e,t,n){"use strict";var P=e("@plotly/d3"),R=e("tinycolor2"),I=e("../../plots/plots"),d=e("../../registry"),N=e("../../plots/cartesian/axes"),h=e("../dragelement"),z=e("../../lib"),F=z.strTranslate,j=e("../../lib/extend").extendFlat,f=e("../../lib/setcursor"),B=e("../drawing"),H=e("../color"),U=e("../titles"),V=e("../../lib/svg_text_utils"),y=e("../colorscale/helpers").flipScale,q=e("../../plots/cartesian/axis_defaults"),Y=e("../../plots/cartesian/position_defaults"),G=e("../../plots/cartesian/layout_attributes"),r=e("../../constants/alignment"),W=r.LINE_SPACING,X=r.FROM_TL,Z=r.FROM_BR,J=e("./constants").cn;t.exports={draw:function(u){var e=u._fullLayout._infolayer.selectAll("g."+J.colorbar).data(function(e){var t,n,r,i,a=e._fullLayout,o=e.calcdata,s=[];function l(e){return j(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(e,r,t):(t._fillgradient=n.reversescale?y(n.colorscale):n.colorscale,t._zrange=[n[i.min],n[i.max]])}for(var u,d=0;d<o.length;d++){var h=o[d],h=(r=h[0].trace)._module.colorbar;if(!0===r.visible&&h)for(var f=Array.isArray(h),p=f?h:[h],m=0;m<p.length;m++){var g=(i=p[m]).container;(n=g?r[g]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(f&&g?"-"+g:""),t._traceIndex=r.index,t._propPrefix=(g?g+".":"")+"colorbar.",t._meta=r._meta,c(),s.push(t))}}for(u in a._colorAxes){var _;(n=a[u]).showscale&&(_=a._colorAxes[u],(t=l(n.colorbar))._id="cb"+u,t._propPrefix=u+".colorbar.",t._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==_[0]&&(r=_[1],i.calc=r._module.colorbar.calc),c(),s.push(t))}return s}(u),function(e){return e._id});e.enter().append("g").attr("class",function(e){return e._id}).classed(J.colorbar,!0),e.each(function(e){var t=P.select(this);z.ensureSingle(t,"rect",J.cbbg),z.ensureSingle(t,"g",J.cbfills),z.ensureSingle(t,"g",J.cblines),z.ensureSingle(t,"g",J.cbaxis,function(e){e.classed(J.crisp,!0)}),z.ensureSingle(t,"g",J.cbtitleunshift,function(e){e.append("g").classed(J.cbtitle,!0)}),z.ensureSingle(t,"rect",J.cboutline);var n,r,i,a,o,s,l,c=function(o,s,l){var i=l._fullLayout,c=i._size,e=s._fillcolor,u=s._line,t=s.title,d=t.side,h=s._zrange||P.extent(("function"==typeof e?e:u.color).domain()),f="function"==typeof u.color?u.color:function(){return u.color},p="function"==typeof e?e:function(){return e},n=s._levels,r=function(e,t){var n,r,i=e._levels,a=[],o=[],s=i.end+i.size/100,l=i.size,c=1.001*t[0]-.001*t[1],u=1.001*t[1]-.001*t[0];for(r=0;r<1e5&&(n=i.start+r*l,!(0<l?s<=n:n<=s));r++)c<n&&n<u&&a.push(n);if(e._fillgradient)o=[0];else if("function"==typeof e._fillcolor){var d=e._filllevels;if(d)for(s=d.end+d.size/100,l=d.size,r=0;r<1e5&&(n=d.start+r*l,!(0<l?s<=n:n<=s));r++)n>t[0]&&n<t[1]&&o.push(n);else(o=a.map(function(e){return e-i.size/2})).push(o[o.length-1]+i.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(o=[0]);i.size<0&&(a.reverse(),o.reverse());return{line:a,fill:o}}(s,h),m=r.fill,g=r.line,_=Math.round(s.thickness*("fraction"===s.thicknessmode?c.w:1)),a=_/c.w,y=Math.round(s.len*("fraction"===s.lenmode?c.h:1)),v=y/c.h,b=s.xpad/c.w,x=(s.borderwidth+s.outlinewidth)/2,w=s.ypad/c.h,T=Math.round(s.x*c.w+s.xpad),r=s.x-a*({middle:.5,right:1}[s.xanchor]||0),A=s.y+v*(({top:-.5,bottom:.5}[s.yanchor]||0)-.5),k=Math.round(c.h*(1-A)),M=k-y;s._lenFrac=v,s._thickFrac=a,s._xLeftFrac=r,s._yBottomFrac=A;var S=s._axis=function(e,t,n){var e=e._fullLayout,r={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:"right",position:1},i={type:"linear",_id:"y"+t._id},t={letter:"y",font:e.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:e.calendar};function a(e,t){return z.coerce(r,i,G,e,t)}return q(r,i,a,t,e),Y(r,i,a,t),i}(l,s,h);S.position=s.x+b+a,-1!==["top","bottom"].indexOf(d)&&(S.title.side=d,S.titlex=s.x+b,S.titley=A+("top"===t.side?v-w:w));u.color&&"auto"===s.tickmode&&(S.tickmode="linear",S.tick0=n.start,r=n.size,a=z.constrain((k-M)/50,4,15)+1,1<(t=(h[1]-h[0])/((s.nticks||a)*r))&&(a=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),r*=a*z.roundUp(t/a,[2,5,10]),(Math.abs(n.start)/n.size+1e-6)%1<2e-6&&(S.tick0=0)),S.dtick=r);S.domain=[A+w,A+v-w],S.setScale(),o.attr("transform",F(Math.round(c.l),Math.round(c.t)));var E,C=o.select("."+J.cbtitleunshift).attr("transform",F(-Math.round(c.l),-Math.round(c.t))),L=o.select("."+J.cbaxis),D=0;function O(e,t){var n={propContainer:S,propName:s._propPrefix+"title",traceIndex:s._traceIndex,_meta:s._meta,placeholder:i._dfltTitle.colorbar,containerGroup:o.select("."+J.cbtitle)},r="h"===e.charAt(0)?e.substr(1):"h"+e;o.selectAll("."+r+",."+r+"-math-group").remove(),U.draw(l,e,j(n,t||{}))}return z.syncOrAsync([I.previousPromises,function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(e=c.l+(s.x+b)*c.w,t=S.title.font.size,t="top"===d?(1-(A+v-w))*c.h+c.t+3+.75*t:(1-(A+w))*c.h+c.t-3-.25*t,O(S._id+"title",{attributes:{x:e,y:t,"text-anchor":"start"}}))},function(){var e,t;-1!==["top","bottom"].indexOf(d)&&(t=(a=o.select("."+J.cbtitle)).select("text"),r=[-s.outlinewidth/2,s.outlinewidth/2],e=a.select(".h"+S._id+"title-math-group").node(),i=15.6,t.node()&&(i=parseInt(t.node().style.fontSize,10)*W),e?i<(D=B.bBox(e).height)&&(r[1]-=(D-i)/2):t.node()&&!t.classed(J.jsPlaceholder)&&(D=B.bBox(t.node()).height),D&&(D+=5,"top"===d?(S.domain[1]-=D/c.h,r[1]*=-1):(S.domain[0]+=D/c.h,t=V.lineCount(t),r[1]+=(1-t)*i),a.attr("transform",F(r[0],r[1])),S.setScale())),o.selectAll("."+J.cbfills+",."+J.cblines).attr("transform",F(0,Math.round(c.h*(1-S.domain[1])))),L.attr("transform",F(0,Math.round(-c.t))),(i=o.select("."+J.cbfills).selectAll("rect."+J.cbfill).attr("style","").data(m)).enter().append("rect").classed(J.cbfill,!0).style("stroke","none"),i.exit().remove();var n=h.map(S.c2p).map(Math.round).sort(function(e,t){return e-t});i.each(function(e,t){t=[0===t?h[0]:(m[t]+m[t-1])/2,t===m.length-1?h[1]:(m[t]+m[t+1])/2].map(S.c2p).map(Math.round);t[1]=z.constrain(t[1]+(t[1]>t[0])?1:-1,n[0],n[1]);t=P.select(this).attr({x:T,width:Math.max(_,2),y:P.min(t),height:Math.max(P.max(t)-P.min(t),2)});s._fillgradient?B.gradient(t,l,s._id,"vertical",s._fillgradient,"fill"):(e=p(e).replace("e-",""),t.attr("fill",R(e).toHexString()))}),(a=o.select("."+J.cblines).selectAll("path."+J.cbline).data(u.color&&u.width?g:[])).enter().append("path").classed(J.cbline,!0),a.exit().remove(),a.each(function(e){P.select(this).attr("d","M"+T+","+(Math.round(S.c2p(e))+u.width/2%1)+"h"+_).call(B.lineGroupStyle,u.width,f(e),u.dash)}),L.selectAll("g."+S._id+"tick,path").remove();var r=T+_+(s.outlinewidth||0)/2-("outside"===s.ticks?1:0),i=N.calcTicks(S),a=N.getTickSigns(S)[2];return N.drawTicks(l,S,{vals:"inside"===S.ticks?N.clipEnds(S,i):i,layer:L,path:N.makeTickPath(S,r,a),transFn:N.makeTransTickFn(S)}),N.drawLabels(l,S,{vals:i,layer:L,transFn:N.makeTransTickLabelFn(S),labelFns:N.makeLabelFns(S,r)})},function(){var e,t;-1===["top","bottom"].indexOf(d)&&(t=S.title.font.size,e=S._offset+S._length/2,t=c.l+(S.position||0)*c.w+("right"===S.side?10+t*(S.showticklabels?1:.5):-10-t*(S.showticklabels?.5:0)),O("h"+S._id+"title",{avoid:{selection:P.select(l).selectAll("g."+S._id+"tick"),side:d,offsetLeft:c.l,offsetTop:0,maxShift:i.width},attributes:{x:t,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}}))},I.previousPromises,function(){var e=_+s.outlinewidth/2;-1===S.ticklabelposition.indexOf("inside")&&(e+=B.bBox(L.node()).width),(E=C.select("text")).node()&&!E.classed(J.jsPlaceholder)&&(i=(r=C.select(".h"+S._id+"title-math-group").node())&&-1!==["top","bottom"].indexOf(d)?B.bBox(r).width:B.bBox(C.node()).right-T-c.l,e=Math.max(e,i));var t=2*s.xpad+e+s.borderwidth+s.outlinewidth/2,n=k-M;o.select("."+J.cbbg).attr({x:T-s.xpad-(s.borderwidth+s.outlinewidth)/2,y:M-x,width:Math.max(t,2),height:Math.max(n+2*x,2)}).call(H.fill,s.bgcolor).call(H.stroke,s.bordercolor).style("stroke-width",s.borderwidth),o.selectAll("."+J.cboutline).attr({x:T,y:M+s.ypad+("top"===d?D:0),width:Math.max(_,2),height:Math.max(n-2*s.ypad-D,2)}).call(H.stroke,s.outlinecolor).style({fill:"none","stroke-width":s.outlinewidth});var r=({center:.5,right:1}[s.xanchor]||0)*t;o.attr("transform",F(c.l-r,c.t));var i={},e=X[s.yanchor],r=Z[s.yanchor];"pixels"===s.lenmode?(i.y=s.y,i.t=n*e,i.b=n*r):(i.t=i.b=0,i.yt=s.y+s.len*e,i.yb=s.y-s.len*r),e=X[s.xanchor],r=Z[s.xanchor],"pixels"===s.thicknessmode?(i.x=s.x,i.l=t*e,i.r=t*r):(i.l=(t=t-_)*e,i.r=t*r,i.xl=s.x-s.thickness*e,i.xr=s.x+s.thickness*r),I.autoMargin(l,s._id,i)}],l)}(t,e,u);c&&c.then&&(u._promises||[]).push(c),u._context.edits.colorbarPosition&&(n=t,r=e,l=(i=u)._fullLayout._size,h.init({element:n.node(),gd:i,prepFn:function(){a=n.attr("transform"),f(n)},moveFn:function(e,t){n.attr("transform",a+F(e,t)),o=h.align(r._xLeftFrac+e/l.w,r._thickFrac,0,1,r.xanchor),s=h.align(r._yBottomFrac-t/l.h,r._lenFrac,0,1,r.yanchor);t=h.getCursor(o,s,r.xanchor,r.yanchor);f(n,t)},doneFn:function(){var e;f(n),void 0!==o&&void 0!==s&&((e={})[r._propPrefix+"x"]=o,e[r._propPrefix+"y"]=s,void 0!==r._traceIndex?d.call("_guiRestyle",i,e,r._traceIndex):d.call("_guiRelayout",i,e))}}))}),e.exit().each(function(e){I.autoMargin(u,e._id)}).remove(),e.order()}}},{"../../constants/alignment":260,"../../lib":285,"../../lib/extend":279,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_defaults":333,"../../plots/cartesian/layout_attributes":346,"../../plots/cartesian/position_defaults":349,"../../plots/plots":366,"../../registry":373,"../color":155,"../colorscale/helpers":166,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":157,"@plotly/d3":20,tinycolor2:119}],160:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":285}],161:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":156,"./defaults":158,"./draw":159,"./has_colorbar":160}],162:[function(e,t,n){"use strict";var f=e("../colorbar/attributes"),p=e("../../lib/regex").counter,m=e("./scales.js").scales;Object.keys(m);function g(e){return"`"+e+"`"}t.exports=function(e,t){e=e||"";var n,r=(t=t||{}).cLetter||"c",i=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),a="showScaleDflt"in t?t.showScaleDflt:"z"===r,o="string"==typeof t.colorscaleDflt?m[t.colorscaleDflt]:null,s=t.editTypeOverride||"",l=e?e+".":"",c="colorAttr"in t?(n=t.colorAttr,t.colorAttr):"in "+g(l+(n={z:"z",c:"color"}[r])),u=r+"auto",d=r+"min",e=r+"max",h=r+"mid",c={};c[d]=c[e]=void 0;r={};r[u]=!1;l={};return"color"===n&&(l.color={valType:"color",arrayOk:!0,editType:s||"style"},t.anim&&(l.color.anim=!0)),l[u]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},l[d]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[e]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:r},l[h]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},l.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},l.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},l.reversescale={valType:"boolean",dflt:!1,editType:"plot"},i||(l.showscale={valType:"boolean",dflt:a,editType:"calc"},l.colorbar=f),t.noColorAxis||(l.coloraxis={valType:"subplotid",regex:p("coloraxis"),dflt:null,editType:"calc"}),l}},{"../../lib/regex":301,"../colorbar/attributes":156,"./scales.js":170}],163:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("../../lib"),h=e("./helpers").extractOpts;t.exports=function(e,t,n){var r=e._fullLayout,i=n.vals,a=n.containerStr,o=a?d.nestedProperty(t,a).get():t,s=h(o),l=!1!==s.auto,c=s.min,e=s.max,n=s.mid,a=function(){return d.aggNums(Math.min,null,i)},t=function(){return d.aggNums(Math.max,null,i)};void 0===c?c=a():l&&(c=o._colorAx&&u(c)?Math.min(c,a()):a()),void 0===e?e=t():l&&(e=o._colorAx&&u(e)?Math.max(e,t()):t()),l&&void 0!==n&&(n-c<e-n?c=n-(e-n):e-n<n-c&&(e=n+(n-c))),c===e&&(c-=.5,e+=.5),s._sync("min",c),s._sync("max",e),s.autocolorscale&&(r=c*e<0?r.colorscale.diverging:0<=c?r.colorscale.sequential:r.colorscale.sequentialminus,s._sync("colorscale",r))}},{"../../lib":285,"./helpers":166,"fast-isnumeric":31}],164:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("./helpers").hasColorscale,d=e("./helpers").extractOpts;t.exports=function(e,i){function a(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function t(e,t){var n,r=t.container?c.nestedProperty(e,t.container).get():e;r&&(r.coloraxis?r._colorAx=i[r.coloraxis]:(!(e=(n=d(r)).auto)&&void 0!==n.min||a(r,t.min),!e&&void 0!==n.max||a(r,t.max),n.autocolorscale&&a(r,"colorscale")))}for(var n,r=0;r<e.length;r++){var o=e[r],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)t(o,s[l]);else t(o,s);u(o,"marker.line")&&t(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(n in i._colorAxes)t(i[n],{min:"cmin",max:"cmax"})}},{"../../lib":285,"./helpers":166}],165:[function(e,t,n){"use strict";var v=e("fast-isnumeric"),b=e("../../lib"),x=e("../colorbar/has_colorbar"),w=e("../colorbar/defaults"),T=e("./scales").isValid,A=e("../../registry").traceIs;function k(e,t){var n=t.slice(0,t.length-1);return t?b.nestedProperty(e,n).get()||{}:e}t.exports=function e(t,n,r,i,a){var o=a.prefix,s=a.cLetter,l="_module"in n,c=k(t,o),u=k(n,o),d=k(n._template||{},o)||{},h=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,r,i,a)};if(l){var f=r._colorAxes||{},p=i(o+"coloraxis");if(p){var m=A(n,"contour")&&b.nestedProperty(n,"contours.coloring").get()||"heatmap",g=f[p];return void(g?(g[2].push(h),g[0]!==m&&(g[0]=!1,b.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):f[p]=[m,n,[h]])}}m=c[s+"min"],h=c[s+"max"],h=v(m)&&v(h)&&m<h;i(o+s+"auto",!h)?i(o+s+"mid"):(i(o+s+"min"),i(o+s+"max"));var _,y,h=c.colorscale,s=d.colorscale;void 0!==h&&(_=!T(h)),void 0!==s&&(_=!T(s)),i(o+"autocolorscale",_),i(o+"colorscale"),i(o+"reversescale"),"marker.line."!==o&&(o&&l&&(y=x(c)),i(o+"showscale",y)&&(o&&d&&(u._template=d),w(c,u,r)))}},{"../../lib":285,"../../registry":373,"../colorbar/defaults":158,"../colorbar/has_colorbar":160,"./scales":170,"fast-isnumeric":31}],166:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("tinycolor2"),d=e("fast-isnumeric"),o=e("../../lib"),h=e("../color"),s=e("./scales").isValid;var l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],f=["min","max","mid","auto"];function p(e){var n,t,r=e._colorAx,i=r||e,a={};for(s=0;s<l.length;s++)a[t=l[s]]=i[t];if(r)for(n="c",s=0;s<f.length;s++)a[t=f[s]]=i["c"+t];else{for(var o,s=0;s<f.length;s++)((o="c"+(t=f[s]))in i||(o="z"+t)in i)&&(a[t]=i[o]);n=o.charAt(0)}return a._sync=function(e,t){e=-1!==f.indexOf(e)?n+e:e;i[e]=i["_"+e]=t},a}function r(e){for(var e=p(e),t=e.min,n=e.max,r=e.reversescale?m(e.colorscale):e.colorscale,i=r.length,a=new Array(i),o=new Array(i),s=0;s<i;s++){var l=r[s];a[s]=t+l[0]*(n-t),o[s]=l[1]}return{domain:a,range:o}}function m(e){for(var t=e.length,n=new Array(t),r=t-1,i=0;0<=r;r--,i++){var a=e[r];n[i]=[1-a[0],a[1]]}return n}function i(e,t){t=t||{};for(var n=e.domain,r=e.range,i=r.length,a=new Array(i),o=0;o<i;o++){var s=u(r[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l=c.scale.linear().domain(n).range(a).clamp(!0),n=t.noNumericCheck,t=t.returnArray,t=n&&t?l:n?function(e){return g(l(e))}:t?function(e){return d(e)?l(e):u(e).isValid()?e:h.defaultLine}:function(e){return d(e)?g(l(e)):u(e).isValid()?e:h.defaultLine};return t.domain=l.domain,t.range=function(){return r},t}function g(e){e={r:e[0],g:e[1],b:e[2],a:e[3]};return u(e).toRgbString()}t.exports={hasColorscale:function(e,t,n){var r=(e=t?o.nestedProperty(e,t).get()||{}:e)[n||"color"],i=!1;if(o.isArrayOrTypedArray(r))for(var a=0;a<r.length;a++)if(d(r[a])){i=!0;break}return o.isPlainObject(e)&&(i||!0===e.showscale||d(e.cmin)&&d(e.cmax)||s(e.colorscale)||o.isPlainObject(e.colorbar))},extractOpts:p,extractScale:r,flipScale:m,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(e,t){return i(r(e),t)}}},{"../../lib":285,"../color":155,"./scales":170,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],167:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},{"./attributes":162,"./calc":163,"./cross_trace_defaults":164,"./defaults":165,"./helpers":166,"./layout_attributes":168,"./layout_defaults":169,"./scales":170}],168:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,i=e("./attributes"),e=e("./scales").scales;t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:e.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:e.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:e.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":279,"./attributes":162,"./scales":170}],169:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plot_api/plot_template"),h=e("./layout_attributes"),f=e("./defaults");t.exports=function(n,r){function e(e,t){return u.coerce(n,r,h,e,t)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var i,a,t,o=r._colorAxes;function s(e,t){return u.coerce(i,a,h.coloraxis,e,t)}for(t in o){var l=o[t];if(l[0])i=n[t]||{},(a=d.newContainer(r,t,"coloraxis"))._name=t,f(i,a,r,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete r._colorAxes[t]}}}},{"../../lib":285,"../../plot_api/plot_template":320,"./defaults":165,"./layout_attributes":168}],170:[function(e,t,n){"use strict";var i=e("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=r.RdBu;function o(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!i(r[1]).isValid())return!1;t=+r[0]}return!0}t.exports={scales:r,defaultScale:a,get:function(t,n){return n=n||a,t?("string"==typeof t&&(e(),"string"==typeof t&&e()),o(t)?t:n):n;function e(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}},isValid:function(e){return void 0!==r[e]||o(e)}}},{tinycolor2:119}],171:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){e=(e-n)/(r-n),r=e+t/(r-n),n=(e+r)/2;return"left"===i||"bottom"===i?e:"center"===i||"middle"===i?n:"right"===i||"top"===i?r:e<2/3-n?e:4/3-n<r?r:n}},{}],172:[function(e,t,n){"use strict";var i=e("../../lib"),a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:i.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:i.constrain(Math.floor(3*t),0,2),a[t][e]}},{"../../lib":285}],173:[function(e,t,n){"use strict";n.selectMode=function(e){return"lasso"===e||"select"===e},n.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.openMode=function(e){return"drawline"===e||"drawopenpath"===e},n.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},n.selectingOrDrawing=function(e){return n.freeMode(e)||n.rectMode(e)}},{}],174:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),y=e("has-hover"),v=e("has-passive-events"),b=e("../../lib").removeElement,x=e("../../plots/cartesian/constants"),w=t.exports={};w.align=e("./align"),w.getCursor=e("./cursor");e=e("./unhover");function T(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function A(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}w.unhover=e.wrapped,w.unhoverRaw=e.raw,w.init=function(i){var r,a,n,o,s,l,c,u,d=i.gd,h=1,f=d._context.doubleClickDelay,p=i.element;d._mouseDownTime||(d._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=e,v?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=e,p.addEventListener("touchstart",e,{passive:!1})):p.ontouchstart=e;var m=i.clampFn||function(e,t,n){return[e=Math.abs(e)<n?0:e,t=Math.abs(t)<n?0:t]};function e(e){d._dragged=!1,d._dragging=!0;var t=A(e);r=t[0],a=t[1],c=e.target,u=2===(l=e).buttons||e.ctrlKey,void 0===e.clientX&&void 0===e.clientY&&(e.clientX=r,e.clientY=a),(n=(new Date).getTime())-d._mouseDownTime<f?h+=1:(h=1,d._mouseDownTime=n),i.prepFn&&i.prepFn(e,r,a),y&&!u?(s=T()).style.cursor=window.getComputedStyle(p).cursor:y||(s=document,o=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),!1!==i.dragmode&&(e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(e){e.preventDefault();var t=A(e),n=i.minDrag||x.MINDRAG,t=m(t[0]-r,t[1]-a,n),n=t[0],t=t[1];(n||t)&&(d._dragged=!0,w.unhover(d,e)),d._dragged&&i.moveFn&&!u&&(d._dragdata={element:p,dx:n,dy:t},i.moveFn(n,t))}function _(t){if(delete d._dragdata,!1!==i.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),y?b(s):o&&(s.documentElement.style.cursor=o,o=null),d._dragging){if(d._dragging=!1,(new Date).getTime()-d._mouseDownTime>f&&(h=Math.max(h-1,1)),d._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(h,l),!u){try{n=new MouseEvent("click",t)}catch(e){var n,r=A(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}c.dispatchEvent(n)}d._dragging=!1,d._dragged=!1}else d._dragged=!1}},w.coverSlip=T},{"../../lib":285,"../../plots/cartesian/constants":338,"./align":171,"./cursor":172,"./unhover":175,"has-hover":62,"has-passive-events":63,"mouse-event-offset":69}],175:[function(e,t,n){"use strict";var i=e("../../lib/events"),r=e("../../lib/throttle"),a=e("../../lib/dom").getGraphDiv,o=e("../fx/constants"),s=t.exports={};s.wrapped=function(e,t,n){(e=a(e))._fullLayout&&r.clear(e._fullLayout._uid+o.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,r=e._hoverdata;(t=t||{}).target&&!e._dragged&&!1===i.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))}},{"../../lib/dom":277,"../../lib/events":278,"../../lib/throttle":308,"../fx/constants":189}],176:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],177:[function(e,t,n){"use strict";var k=e("@plotly/d3"),i=e("fast-isnumeric"),h=e("tinycolor2"),y=e("../../registry"),M=e("../color"),r=e("../colorscale"),S=e("../../lib"),l=S.strTranslate,d=e("../../lib/svg_text_utils"),a=e("../../constants/xmlns_namespaces"),c=e("../../constants/alignment").LINE_SPACING,v=e("../../constants/interactions").DESELECTDIM,o=e("../../traces/scatter/subtypes"),s=e("../../traces/scatter/make_bubble_size_func"),f=e("../../components/fx/helpers").appendArrayPointValue,m=t.exports={};m.font=function(e,t,n,r){S.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(M.fill,r)},m.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},m.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},m.setRect=function(e,t,n,r,i){e.call(m.setPosition,t,n).call(m.setSize,r,i)},m.translatePoint=function(e,t,n,r){n=n.c2p(e.x),e=r.c2p(e.y);return!!(i(n)&&i(e)&&t.node())&&("text"===t.node().nodeName?t.attr("x",n).attr("y",e):t.attr("transform",l(n,e)),!0)},m.translatePoints=function(e,n,r){e.each(function(e){var t=k.select(this);m.translatePoint(e,t,n,r)})},m.hideOutsideRangePoint=function(e,t,n,r,i,a){t.attr("display",n.isPtWithinRange(e,i)&&r.isPtWithinRange(e,a)?null:"none")},m.hideOutsideRangePoints=function(r,e){var i,a;e._hasClipOnAxisFalse&&(i=e.xaxis,a=e.yaxis,r.each(function(e){var e=e[0].trace,t=e.xcalendar,n=e.ycalendar,e=y.traceIs(e,"bar-like")?".bartext":".point,.textpoint";r.selectAll(e).each(function(e){m.hideOutsideRangePoint(e,k.select(this),i,a,t,n)})}))},m.crispRound=function(e,t,n){return t&&i(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},m.singleLineStyle=function(e,t,n,r,i){t.style("fill","none");e=(((e||[])[0]||{}).trace||{}).line||{},n=n||e.width||0,i=i||e.dash||"";M.stroke(t,r||e.color),m.dashLine(t,i,n)},m.lineGroupStyle=function(e,r,i,a){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{},n=r||t.width||0,e=a||t.dash||"";k.select(this).call(M.stroke,i||t.color).call(m.dashLine,e,n)})},m.dashLine=function(e,t,n){t=m.dashStyle(t,n=+n||0),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},m.dashStyle=function(e,t){t=+t||1;t=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=t+"px,"+t+"px":"dash"===e?e=3*t+"px,"+3*t+"px":"longdash"===e?e=5*t+"px,"+5*t+"px":"dashdot"===e?e=3*t+"px,"+t+"px,"+t+"px,"+t+"px":"longdashdot"===e&&(e=5*t+"px,"+2*t+"px,"+t+"px,"+2*t+"px"),e},m.singleFillStyle=function(e){var t=(((k.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(M.fill,t)},m.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=k.select(this);e[0].trace&&t.call(M.fill,e[0].trace.fillcolor)})};var u=e("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(u).forEach(function(e){var t=u[e],n=t.n;m.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),m.symbolNames[n]=e,m.symbolFuncs[n]=t.f,t.needLine&&(m.symbolNeedLines[n]=!0),t.noDot?m.symbolNoDot[n]=!0:m.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(m.symbolNoFill[n]=!0)});var p=m.symbolNames.length;function g(e,t){return m.symbolFuncs[e%100](t)+(200<=e?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(e){var t;return i(e)?e=+e:"string"==typeof e&&((t=0)<e.indexOf("-open")&&(t=100,e=e.replace("-open","")),0<e.indexOf("-dot")&&(t+=200,e=e.replace("-dot","")),0<=(e=m.symbolNames.indexOf(e))&&(e+=t)),p<=e%100||400<=e?0:Math.floor(Math.max(e,0))};var t={x1:1,x2:0,y1:0,y2:0},e={x1:0,x2:0,y1:1,y2:0},_=k.format("~.1f"),b={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:t},horizontalreversed:{node:"linearGradient",attrs:t,reversed:!0},vertical:{node:"linearGradient",attrs:e},verticalreversed:{node:"linearGradient",attrs:e,reversed:!0}};m.gradient=function(e,t,n,r,i,a){for(var o=i.length,s=b[r],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[_(100*(1-i[c][0])),i[c][1]]:l[c]=[_(100*i[c][0]),i[c][1]];var u=t._fullLayout,d="g"+u._uid+"-"+n,r=u._defs.select(".gradients").selectAll("#"+d).data([r+l.join(";")],S.identity);r.exit().remove(),r.enter().append(s.node).each(function(){var e=k.select(this);s.attrs&&e.attr(s.attrs),e.attr("id",d);e=e.selectAll("stop").data(l);e.exit().remove(),e.enter().append("stop"),e.each(function(e){var t=h(e[1]);k.select(this).attr({offset:e[0]+"%","stop-color":M.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(a,P(d,t)).style(a+"-opacity",null);a=function(e){return"."+e.attr("class").replace(/\s/g,".")},e=a(k.select(e.node().parentNode))+">"+a(e);u._gradientUrlQueryParts[e]=1},m.pattern=function(e,t,n,r,i,a,o,s,l,c,u,d){var h="legend"===t;s&&(u="overlay"===l?(c=s,M.contrast(c)):(c=void 0,s));var f,p,m,g,_,y,v,b,x,w,s=n._fullLayout,T="p"+s._uid+"-"+r,A={};switch(i){case"/":f=a*Math.sqrt(2),p=a*Math.sqrt(2),_="path",A={d:m="M-"+f/4+","+p/4+"l"+f/2+",-"+p/2+"M0,"+p+"L"+f+",0M"+f/4*3+","+p/4*5+"l"+f/2+",-"+p/2,opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"\\":f=a*Math.sqrt(2),p=a*Math.sqrt(2),_="path",A={d:m="M"+f/4*3+",-"+p/4+"l"+f/2+","+p/2+"M0,0L"+f+","+p+"M-"+f/4+","+p/4*3+"l"+f/2+","+p/2,opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"x":f=a*Math.sqrt(2),p=a*Math.sqrt(2),m="M-"+f/4+","+p/4+"l"+f/2+",-"+p/2+"M0,"+p+"L"+f+",0M"+f/4*3+","+p/4*5+"l"+f/2+",-"+p/2+"M"+f/4*3+",-"+p/4+"l"+f/2+","+p/2+"M0,0L"+f+","+p+"M-"+f/4+","+p/4*3+"l"+f/2+","+p/2,g=a-a*Math.sqrt(1-o),_="path",A={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case"|":_=_="path",A={d:m="M"+(f=a)/2+",0L"+f/2+","+(p=a),opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"-":_=_="path",A={d:m="M0,"+(p=f=a)/2+"L"+f+","+p/2,opacity:d,stroke:u,"stroke-width":(g=o*a)+"px"};break;case"+":_="path",m="M"+(f=a)/2+",0L"+f/2+","+(p=a)+"M0,"+p/2+"L"+f+","+p/2,g=a-a*Math.sqrt(1-o),_="path",A={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case".":p=f=a,g=o<Math.PI/4?Math.sqrt(o*a*a/Math.PI):(y=o,v=Math.PI/4,b=1,x=a/2,w=a/Math.sqrt(2),x+(w-x)*(y-v)/(b-v)),_="circle",A={cx:f/2,cy:p/2,r:g,opacity:d,fill:u}}i=[i||"noSh",c||"noBg",u||"noFg",a,o].join(";"),i=s._defs.select(".patterns").selectAll("#"+T).data([i],S.identity);i.exit().remove(),i.enter().append("pattern").each(function(){var e,t=k.select(this);t.attr({id:T,width:f+"px",height:p+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),c&&((e=t.selectAll("rect").data([0])).exit().remove(),e.enter().append("rect").attr({width:f+"px",height:p+"px",fill:c}));t=t.selectAll(_).data([0]);t.exit().remove(),t.enter().append(_).attr(A)}),e.style("fill",P(T,n)).style("fill-opacity",null),e.classed("pattern_filled",!0);e="."+k.select(e.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";s._patternUrlQueryParts[e]=1},m.initGradients=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},m.initPatterns=function(e){e=e._fullLayout;S.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),e._patternUrlQueryParts={}},m.getPatternAttr=function(e,t,n){return e&&S.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},m.pointStyle=function(e,t,n){var r;e.size()&&(r=m.makePointStyleFns(t),e.each(function(e){m.singlePointStyle(e,k.select(this),t,r,n)}))},m.singlePointStyle=function(e,t,n,r,i){var a=n.marker,o=a.line;t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?a.opacity:e.mo),r.ms2mrc&&(u="various"===e.ms||"various"===a.size?3:r.ms2mrc(e.ms),e.mrc=u,r.selectedSizeFn&&(u=e.mrc=r.selectedSizeFn(e)),p=m.symbolNumber(e.mx||a.symbol)||0,e.om=100<=p%200,t.attr("d",g(p,u)));var s,l,c,u,d,h,f,p=!1;e.so?(l=o.outlierwidth,c=o.outliercolor,s=a.outliercolor):(h=(o||{}).width,l=(e.mlw+1||h+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,c="mlc"in e?e.mlcc=r.lineScale(e.mlc):S.isArrayOrTypedArray(o.color)?M.defaultLine:o.color,S.isArrayOrTypedArray(a.color)&&(s=M.defaultLine,p=!0),s="mc"in e?e.mcc=r.markerScale(e.mc):a.color||"rgba(0,0,0,0)",r.selectedColorFn&&(s=r.selectedColorFn(e))),e.om?t.call(M.stroke,s).style({"stroke-width":(l||1)+"px",fill:"none"}):(t.style("stroke-width",(e.isBlank?0:l)+"px"),u=a.gradient,(h=e.mgt)?p=!0:h=u&&u.type,S.isArrayOrTypedArray(h)&&(h=h[0],b[h]||(h=0)),r=(o=a.pattern)&&m.getPatternAttr(o.shape,e.i,""),h&&"none"!==h?((f=e.mgc)?p=!0:f=u.color,d=n.uid,p&&(d+="-"+e.i),m.gradient(t,i,d,h,[[0,f],[1,s]],"fill")):r?(a=m.getPatternAttr(o.bgcolor,e.i,null),u=m.getPatternAttr(o.fgcolor,e.i,null),p=o.fgopacity,d=m.getPatternAttr(o.size,e.i,8),h=m.getPatternAttr(o.solidity,e.i,.3),f=e.mcc||S.isArrayOrTypedArray(o.shape)||S.isArrayOrTypedArray(o.bgcolor)||S.isArrayOrTypedArray(o.size)||S.isArrayOrTypedArray(o.solidity),n=n.uid,f&&(n+="-"+e.i),m.pattern(t,"point",i,n,r,d,h,e.mcc,o.fillmode,a,u,p)):M.fill(t,s),l&&M.stroke(t,c))},m.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=m.tryColorscale(n,""),t.lineScale=m.tryColorscale(n,"line"),y.traceIs(e,"symbols")&&(t.ms2mrc=o.isBubble(e)?s(e):function(){return(n.size||6)/2}),e.selectedpoints&&S.extendFlat(t,m.makeSelectedPointStyleFns(e)),t},m.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.marker||{},a=n.marker||{},n=r.marker||{},r=i.opacity,o=a.opacity,s=n.opacity,l=void 0!==o,c=void 0!==s;(S.isArrayOrTypedArray(r)||l||c)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?i.opacity:e.mo;return e.selected?l?o:t:c?s:v*t});var u=i.color,d=a.color,h=n.color;(d||h)&&(t.selectedColorFn=function(e){var t=e.mcc||u;return e.selected?d||t:h||t});var f=i.size,p=a.size,m=n.size,g=void 0!==p,_=void 0!==m;return y.traceIs(e,"symbols")&&(g||_)&&(t.selectedSizeFn=function(e){var t=e.mrc||f/2;return e.selected?g?p/2:t:_?m/2:t}),t},m.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},e=e.textfont||{},n=n.textfont||{},r=r.textfont||{},i=e.color,a=n.color,o=r.color;return t.selectedTextColorFn=function(e){var t=e.tc||i;return e.selected?a||t:o||(a?t:M.addOpacity(t,v))},t},m.selectedPointStyle=function(e,t){var i,a,r;e.size()&&t.selectedpoints&&(i=m.makeSelectedPointStyleFns(t),a=t.marker||{},r=[],i.selectedOpacityFn&&r.push(function(e,t){e.style("opacity",i.selectedOpacityFn(t))}),i.selectedColorFn&&r.push(function(e,t){M.fill(e,i.selectedColorFn(t))}),i.selectedSizeFn&&r.push(function(e,t){var n=t.mx||a.symbol||0,r=i.selectedSizeFn(t);e.attr("d",g(m.symbolNumber(n),r)),t.mrc2=r}),r.length&&e.each(function(e){for(var t=k.select(this),n=0;n<r.length;n++)r[n](t,e)}))},m.tryColorscale=function(e,t){t=t?S.nestedProperty(e,t).get():e;if(t){e=t.color;if((t.colorscale||t._colorAx)&&S.isArrayOrTypedArray(e))return r.makeColorScaleFuncFromTrace(t)}return S.identity};var x={start:1,end:-1,middle:0,bottom:1,top:-1};function w(e,t,n,r){var i=k.select(e.node().parentNode),a=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",o=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",s=r?r/.8+1:0,t=(d.lineCount(e)-1)*c+1,r=x[o]*s,n=.75*n+x[a]*s+(x[a]-1)*t*n/2;e.attr("text-anchor",o),i.attr("transform",l(r,n))}function T(e,t){t=e.ts||t.textfont.size;return i(t)&&0<t?t:0}m.textPointStyle=function(e,o,s){var l,c,u;e.size()&&(o.selectedpoints&&(l=m.makeSelectedTextStyleFns(o).selectedTextColorFn),c=o.texttemplate,u=s._fullLayout,e.each(function(e){var t,n,r,i=k.select(this),a=c?S.extractOption(e,o,"txt","texttemplate"):S.extractOption(e,o,"tx","text");a||0===a?(c&&(t=(r=o._module.formatLabels)?r(e,o,u):{},f(n={},o,e.i),r=o._meta||{},a=S.texttemplateString(a,t,u._d3locale,n,e,r)),t=e.tp||o.textposition,n=T(e,o),r=l?l(e):e.tc||o.textfont.color,i.call(m.font,e.tf||o.textfont.family,n,r).text(a).call(d.convertToTspans,s).call(w,t,n,e.mrc)):i.remove()}))},m.selectedTextStyle=function(e,a){var o;e.size()&&a.selectedpoints&&(o=m.makeSelectedTextStyleFns(a),e.each(function(e){var t=k.select(this),n=o.selectedTextColorFn(e),r=e.tp||a.textposition,i=T(e,a);M.fill(t,n),w(t,r,i,e.mrc2||e.mrc)}))};var A=.5;function E(e,t,n,r){var i=e[0]-t[0],a=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],e=Math.pow(i*i+a*a,A/2),n=Math.pow(o*o+s*s,A/2),o=(n*n*i-e*e*o)*r,s=(n*n*a-e*e*s)*r,r=3*n*(e+n),n=3*e*(e+n);return[[k.round(t[0]+(r&&o/r),2),k.round(t[1]+(r&&s/r),2)],[k.round(t[0]-(n&&o/n),2),k.round(t[1]-(n&&s/n),2)]]}m.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");for(var n="M"+e[0],r=[],i=1;i<e.length-1;i++)r.push(E(e[i-1],e[i],e[i+1],t));for(n+="Q"+r[0][0]+" "+e[1],i=2;i<e.length-1;i++)n+="C"+r[i-2][1]+" "+r[i-1][0]+" "+e[i];return n+="Q"+r[e.length-3][1]+" "+e[e.length-1]},m.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";for(var n="M"+e[0],r=e.length-1,i=[E(e[r],e[0],e[1],t)],a=1;a<r;a++)i.push(E(e[a-1],e[a],e[a+1],t));for(i.push(E(e[r-1],e[r],e[0],t)),a=1;a<=r;a++)n+="C"+i[a-1][1]+" "+i[a][0]+" "+e[a];return n+="C"+i[r][1]+" "+i[0][0]+" "+e[0]+"Z"};function C(e,t){return"L"+k.round(t[0],2)+","+k.round(t[1],2)}var L={hv:function(e,t){return"H"+k.round(t[0],2)+"V"+k.round(t[1],2)},vh:function(e,t){return"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},hvh:function(e,t){return"H"+k.round((e[0]+t[0])/2,2)+"V"+k.round(t[1],2)+"H"+k.round(t[0],2)},vhv:function(e,t){return"V"+k.round((e[1]+t[1])/2,2)+"H"+k.round(t[0],2)+"V"+k.round(t[1],2)}};m.steps=function(e){var r=L[e]||C;return function(e){for(var t="M"+k.round(e[0][0],2)+","+k.round(e[0][1],2),n=1;n<e.length;n++)t+=r(e[n-1],e[n]);return t}},m.makeTester=function(){var e=S.ensureSingleById(k.select("body"),"svg","js-plotly-tester",function(e){e.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=S.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=e,m.testref=t},m.savedBBoxes={};var D=0;function O(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function P(e,t){if(!e)return null;t=t._context,t=!t._exportedPlot&&t._baseUrl||"";return t?"url('"+t+"#"+e+"')":"url(#"+e+")"}m.bBox=function(e,t,n){var r,i;if(n=n||O(e)){if(c=m.savedBBoxes[n])return S.extendFlat({},c)}else if(1===e.childNodes.length){var a=e.childNodes[0];if(n=O(a)){var o=+a.getAttribute("x")||0,s=+a.getAttribute("y")||0,l=a.getAttribute("transform");if(!l){a=m.bBox(a,!1,n);return o&&(a.left+=o,a.right+=o),s&&(a.top+=s,a.bottom+=s),a}if(c=m.savedBBoxes[n+="~"+o+"~"+s+"~"+l])return S.extendFlat({},c)}}t?r=e:(i=m.tester.node(),r=e.cloneNode(!0),i.appendChild(r)),k.select(r).attr("transform",null).call(d.positionText,0,0);var c=r.getBoundingClientRect(),e=m.testref.node().getBoundingClientRect();t||i.removeChild(r);e={height:c.height,width:c.width,left:c.left-e.left,top:c.top-e.top,right:c.right-e.left,bottom:c.bottom-e.top};return 1e4<=D&&(m.savedBBoxes={},D=0),n&&(m.savedBBoxes[n]=e),D++,S.extendFlat({},e)},m.setClipUrl=function(e,t,n){e.attr("clip-path",P(t,n))},m.getTranslate=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},m.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=l(t,n)).trim(),e[i]("transform",r),r},m.getScale=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},m.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+="scale("+t+","+n+")").trim(),e[i]("transform",r),r};var R=/\s*sc.*/;m.setPointGroupScale=function(e,t,n){var r;t=t||1,n=n||1,e&&(r=1===t&&1===n?"":"scale("+t+","+n+")",e.each(function(){var e=(this.getAttribute("transform")||"").replace(R,""),e=(e+=r).trim();this.setAttribute("transform",e)}))};var I=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(e,i,a){e&&e.each(function(){var e,t,n=k.select(this),r=n.select("text");r.node()&&(e=parseFloat(r.attr("x")||0),t=parseFloat(r.attr("y")||0),r=(n.attr("transform")||"").match(I),t=1===i&&1===a?[]:[l(e,t),"scale("+i+","+a+")",l(-e,-t)],r&&t.push(r),n.attr("transform",t.join("")))})}},{"../../components/fx/helpers":191,"../../constants/alignment":260,"../../constants/interactions":264,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../lib/svg_text_utils":307,"../../registry":373,"../../traces/scatter/make_bubble_size_func":511,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale":167,"./symbol_defs":178,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],178:[function(e,t,n){"use strict";var c=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){e=c.round(e,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(e){var t=c.round(.4*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H"+t+"V"+e+"H-"+t+"V"+t+"H-"+e+"V-"+t+"H-"+t+"V-"+e+"H"+t+"V-"+t+"H"+e+"Z"}},x:{n:4,f:function(e){var t=c.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,r="l"+t+",-"+t,i="l-"+t+",-"+t,e="l-"+t+","+t;return"M0,"+t+n+r+i+r+i+e+i+e+n+e+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+","+c.round(e/2,2)+"H"+t+"L0,-"+c.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+c.round(e/2,2)+"H"+t+"L0,"+c.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M"+c.round(e/2,2)+",-"+t+"V"+t+"L-"+c.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+c.round(e/2,2)+",-"+t+"V"+t+"L"+c.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+e+",-"+t+"H"+t+"V"+e+"Z"}},"triangle-se":{n:10,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+t+",-"+e+"V"+t+"H-"+e+"Z"}},"triangle-sw":{n:11,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H-"+t+"V-"+e+"Z"}},"triangle-nw":{n:12,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+t+","+e+"V-"+t+"H"+e+"Z"}},pentagon:{n:13,f:function(e){var t=c.round(.951*e,2),n=c.round(.588*e,2),r=c.round(-e,2),i=c.round(-.309*e,2);return"M"+t+","+i+"L"+n+","+c.round(.809*e,2)+"H-"+n+"L-"+t+","+i+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M"+e+",-"+n+"V"+n+"L0,"+t+"L-"+e+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+e+"H"+n+"L"+t+",0L"+n+",-"+e+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=c.round(.924*e,2),e=c.round(.383*e,2);return"M-"+e+",-"+t+"H"+e+"L"+t+",-"+e+"V"+e+"L"+e+","+t+"H-"+e+"L-"+t+","+e+"V-"+e+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=c.round(.225*t,2),r=c.round(.951*t,2),i=c.round(.363*t,2),a=c.round(.588*t,2),o=c.round(-t,2),s=c.round(-.309*t,2),l=c.round(.118*t,2),e=c.round(.809*t,2);return"M"+n+","+s+"H"+r+"L"+i+","+l+"L"+a+","+e+"L0,"+c.round(.382*t,2)+"L-"+a+","+e+"L-"+i+","+l+"L-"+r+","+s+"H-"+n+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=c.round(.66*e,2),n=c.round(.38*e,2),e=c.round(.76*e,2);return"M-"+e+",0l-"+n+",-"+t+"h"+e+"l"+n+",-"+t+"l"+n+","+t+"h"+e+"l-"+n+","+t+"l"+n+","+t+"h-"+e+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+","+n+e+t+","+n+e+"0,-"+r+e+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M"+t+",-"+n+e+"-"+t+",-"+n+e+"0,"+r+e+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=c.round(1.1*e,2),e=c.round(2*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",-"+t+e+"-"+t+","+t+e+t+","+t+e+t+",-"+t+e+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=c.round(1.4*e,2),e=c.round(1.9*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",0"+e+"0,"+t+e+t+",0"+e+"0,-"+t+e+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=c.round(.7*e,2),e=c.round(1.4*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=c.round(1.4*e,2),e=c.round(.7*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(e){e=c.round(e,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=c.round(e,2),e=c.round(e/Math.sqrt(2),2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=c.round(1.3*e,2),e=c.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+e+",-"+e+"L"+e+","+e+"M-"+e+","+e+"L"+e+",-"+e},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=c.round(1.2*e,2),e=c.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=c.round(e/2,2),e=c.round(e,2);return"M"+t+","+e+"V-"+e+"m-"+e+",0V"+e+"M"+e+","+t+"H-"+e+"m0,-"+e+"H"+e},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+","+e+"L0,0M"+t+","+e+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+",-"+e+"L0,0M"+t+",-"+e+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M"+e+","+t+"L0,0M"+e+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+e+","+t+"L0,0M-"+e+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){e=c.round(1.4*e,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){e=c.round(e,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L-"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L-"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":20}],179:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],180:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),s=e("../../registry"),f=e("../../plots/cartesian/axes"),p=e("../../lib"),m=e("./compute_error");function l(e,t,n,r){var i=t["error_"+r]||{},a=[];if(i.visible&&-1!==["linear","log"].indexOf(n.type)){for(var o=m(i),s=0;s<e.length;s++){var l=e[s],c=l.i;if(void 0===c)c=s;else if(null===c)continue;var u,d=l[r];h(n.c2l(d))&&(u=o(d,c),h(u[0])&&h(u[1])&&(c=l[r+"s"]=d-u[0],u=l[r+"h"]=d+u[1],a.push(c,u)))}i=n._id,t=t._extremes[i],i=f.findExtremes(n,a,p.extendFlat({tozero:t.opts.tozero},{padded:!0}));t.min=t.min.concat(i.min),t.max=t.max.concat(i.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r,i,a=t[n],o=a[0].trace;!0===o.visible&&s.traceIs(o,"errorBarsOK")&&(r=f.getFromId(e,o.xaxis),i=f.getFromId(e,o.yaxis),l(a,o,r,"x"),l(a,o,i,"y"))}}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./compute_error":181,"fast-isnumeric":31}],181:[function(e,t,n){"use strict";function s(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var r=e.array||[];if(n)return function(e,t){t=+r[t];return[t,t]};var i=e.arrayminus||[];return function(e,t){var n=+r[t],t=+i[t];return isNaN(n)&&isNaN(t)?[NaN,NaN]:[t||0,n||0]}}var a=s(t,e.value),o=s(t,e.valueminus);return n||void 0===e.valueminus?function(e){e=a(e);return[e,e]}:function(e){return[o(e),a(e)]}}},{}],182:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../registry"),u=e("../../lib"),d=e("../../plot_api/plot_template"),h=e("./attributes");t.exports=function(e,t,n,r){var i="error_"+r.axis,a=d.newContainer(t,i),o=e[i]||{};function s(e,t){return u.coerce(o,a,h,e,t)}!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)&&(e=!0,"sqrt"!==(i=s("type","array"in o?"data":"percent"))&&(e=s("symmetric",!(("data"===i?"arrayminus":"valueminus")in o))),"data"===i?(s("array"),s("traceref"),e||(s("arrayminus"),s("tracerefminus"))):"percent"!==i&&"constant"!==i||(s("value"),e||s("valueminus")),e="copy_"+r.inherit+"style",r.inherit&&(t["error_"+r.inherit]||{}).visible&&s(e,!(o.color||l(o.thickness)||l(o.width))),r.inherit&&a[e]||(s("color",n),s("thickness"),s("width",c.traceIs(t,"gl3d")?0:4)))}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"./attributes":179,"fast-isnumeric":31}],183:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plot_api/edit_types").overrideAll,a=e("./attributes"),o={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;a={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a),error_z:r.extendFlat({},a)};delete a.error_x.copy_ystyle,delete a.error_y.copy_ystyle,delete a.error_z.copy_ystyle,delete a.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:i(a,"calc","nested"),scattergl:i(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":285,"../../plot_api/edit_types":313,"./attributes":179,"./calc":180,"./compute_error":181,"./defaults":182,"./plot":184,"./style":185}],184:[function(e,t,n){"use strict";var h=e("@plotly/d3"),f=e("fast-isnumeric"),p=e("../drawing"),m=e("../../traces/scatter/subtypes");t.exports=function(r,e,i,l){var c=i.xaxis,u=i.yaxis,d=l&&0<l.duration;e.each(function(e){var t=e[0].trace,a=t.error_x||{},o=t.error_y||{};t.ids&&(n=function(e){return e.id});var s=m.hasMarkers(t)&&0<t.marker.maxdisplayed;o.visible||a.visible||(e=[]);var n=h.select(this).selectAll("g.errorbar").data(e,n);n.exit().remove(),e.length&&(a.visible||n.selectAll("path.xerror").remove(),o.visible||n.selectAll("path.yerror").remove(),n.style("opacity",1),e=n.enter().append("g").classed("errorbar",!0),d&&e.style("opacity",0).transition().duration(l.duration).style("opacity",1),p.setClipUrl(n,i.layerClipId,r),n.each(function(e){var t,n,r=h.select(this),i=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),f(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),f(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,c,u);s&&!e.vis||(e=r.select("path.yerror"),o.visible&&f(i.x)&&f(i.yh)&&f(i.ys)?(n=o.width,t="M"+(i.x-n)+","+i.yh+"h"+2*n+"m-"+n+",0V"+i.ys,i.noYS||(t+="m-"+n+",0h"+2*n),!e.size()?e=r.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(e=e.transition().duration(l.duration).ease(l.easing)),e.attr("d",t)):e.remove(),n=r.select("path.xerror"),a.visible&&f(i.y)&&f(i.xh)&&f(i.xs)?(e=(a.copy_ystyle?o:a).width,t="M"+i.xh+","+(i.y-e)+"v"+2*e+"m0,-"+e+"H"+i.xs,i.noXS||(t+="m0,-"+e+"v"+2*e),!n.size()?n=r.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(n=n.transition().duration(l.duration).ease(l.easing)),n.attr("d",t)):n.remove())}))})}},{"../../traces/scatter/subtypes":519,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],185:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},e=t.error_x||{},t=r.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),e.copy_ystyle&&(e=n),t.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(i.stroke,e.color)})}},{"../color":155,"@plotly/d3":20}],186:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("./layout_attributes").hoverlabel,e=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:e({},i.bgcolor,{arrayOk:!0}),bordercolor:e({},i.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:e({},i.align,{arrayOk:!0}),namelength:e({},i.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":279,"../../plots/font_attributes":360,"./layout_attributes":196}],187:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");function c(e,t,n,r){r=r||s.identity,Array.isArray(e)&&(t[0][n]=r(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;for(var r=0;r<t.length;r++){var i,a=t[r],o=a[0].trace;l.traceIs(o,"pie-like")||((i=l.traceIs(o,"2dMap")?c:s.fillArray)(o.hoverinfo,a,"hi",function(t){return function(e){return s.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}(o)),o.hovertemplate&&i(o.hovertemplate,a,"ht"),o.hoverlabel&&(i(o.hoverlabel.bgcolor,a,"hbg"),i(o.hoverlabel.bordercolor,a,"hbc"),i(o.hoverlabel.font.size,a,"hts"),i(o.hoverlabel.font.color,a,"htc"),i(o.hoverlabel.font.family,a,"htf"),i(o.hoverlabel.namelength,a,"hnl"),i(o.hoverlabel.align,a,"hta")))}}},{"../../lib":285,"../../registry":373}],188:[function(e,t,n){"use strict";var a=e("../../registry"),o=e("./hover").hover;t.exports=function(e,t,n){var r=a.getComponentMethod("annotations","onClick")(e,e._hoverdata);function i(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&o(e,t,n,!0),e._hoverdata&&t&&t.target&&(r&&r.then?r.then(i):i(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":373,"./hover":192}],189:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],190:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./attributes"),o=e("./hoverlabel_defaults");t.exports=function(n,r,e,t){t=i.extendFlat({},t.hoverlabel);r.hovertemplate&&(t.namelength=-1),o(n,r,function(e,t){return i.coerce(n,r,a,e,t)},t)}},{"../../lib":285,"./attributes":186,"./hoverlabel_defaults":193}],191:[function(e,t,o){"use strict";var u=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},o.isTraceInSubplots=function(e,t){if("splom"!==e.type)return-1!==t.indexOf(o.getSubplot(e));for(var n=e.xaxes||[],r=e.yaxes||[],i=0;i<n.length;i++)for(var a=0;a<r.length;a++)if(-1!==t.indexOf(n[i]+r[a]))return!0;return!1},o.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},o.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},o.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||o.quadrature(t,n):"x"===e.charAt(0)?t:n},o.getClosest=function(e,t,n){if(!1!==n.index)0<=n.index&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},o.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},o.quadrature=function(n,r){return function(e){var t=n(e),e=r(e);return Math.sqrt(t*t+e*e)}},o.makeEventData=function(e,t,n){var r,i="index"in e?e.index:e.pointNumber,a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};return t._indexToPoints?1===(r=t._indexToPoints[i]).length?a.pointIndex=r[0]:a.pointIndices=r:a.pointIndex=i,t._module.eventData?a=t._module.eventData(a,e,t,n,i):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),void 0!==e.zLabelVal&&(a.z=e.zLabelVal)),o.appendArrayPointValue(a,t,i),a},o.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=d(a);void 0!==e[o]||void 0!==(a=h(u.nestedProperty(t,a).get(),n))&&(e[o]=a)}},o.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=d(a);if(void 0===e[o]){for(var s=u.nestedProperty(t,a).get(),l=new Array(n.length),c=0;c<n.length;c++)l[c]=h(s,n[c]);e[o]=l}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function d(e){return n[e]||e}function h(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var r={x:!0,y:!0},i={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(e){return"string"==typeof e&&!!i[e]},o.isXYhover=function(e){return"string"==typeof e&&!!r[e]}},{"../../lib":285}],192:[function(e,t,n){"use strict";var te=e("@plotly/d3"),ne=e("fast-isnumeric"),x=e("tinycolor2"),re=e("../../lib"),D=re.strTranslate,O=re.strRotate,ie=e("../../lib/events"),P=e("../../lib/svg_text_utils"),ae=e("../../lib/override_cursor"),R=e("../drawing"),oe=e("../color"),se=e("../dragelement"),le=e("../../plots/cartesian/axes"),ce=e("../../registry"),ue=e("./helpers"),I=e("./constants"),N=e("../legend/defaults"),z=e("../legend/draw"),F=I.YANGLE,e=Math.PI*F/180,de=1/Math.sin(e),_=Math.cos(e),y=Math.sin(e),j=I.HOVERARROWSIZE,B=I.HOVERTEXTPAD,he={box:!0,ohlc:!0,violin:!0,candlestick:!0};function fe(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}n.hover=function(e,t,n,r){e=re.getGraphDiv(e),re.throttle(e._fullLayout._uid+I.HOVERID,I.HOVERMINTIME,function(){!function(e,l,t,n){t=t||"xy";var c=Array.isArray(t)?t:[t],u=e._fullLayout,r=u._plots||[],t=r[t],d=u._has("cartesian");t&&(t=t.overlays.map(function(e){return e.id}),c=c.concat(t));for(var i=c.length,h=new Array(i),f=new Array(i),a=!1,o=0;o<i;o++){var s=c[o];if(r[s])a=!0,h[o]=r[s].xaxis,f[o]=r[s].yaxis;else{if(!u[s]||!u[s]._subplot)return re.warn("Unrecognized subplot: "+s);s=u[s]._subplot;h[o]=s.xaxis,f[o]=s.yaxis}}var p=l.hovermode||u.hovermode;p&&!a&&(p="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(p)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return se.unhoverRaw(e,l);var m=u.hoverdistance;-1===m&&(m=1/0);var g=u.spikedistance;-1===g&&(g=1/0);var _,y,v,b,x,w,T,A,k,M,S,E,C,L=[],D=[],O={hLinePoint:null,vLinePoint:null},P=!1;if(Array.isArray(l))for(p="array",v=0;v<l.length;v++)(x=e.calcdata[l[v].curveNumber||0])&&(w=x[0].trace,"skip"!==x[0].trace.hoverinfo&&(D.push(x),"h"===w.orientation&&(P=!0)));else{for(b=0;b<e.calcdata.length;b++)x=e.calcdata[b],"skip"!==(w=x[0].trace).hoverinfo&&ue.isTraceInSubplots(w,c)&&(D.push(x),"h"===w.orientation&&(P=!0));if(!l.target)j="xpx"in l?l.xpx:h[0]._length/2,B="ypx"in l?l.ypx:f[0]._length/2;else{if(!1===ie.triggerHandler(e,"plotly_beforehover",l))return;var R=l.composedPath&&l.composedPath()[0],R=(R=R||l.target).getBoundingClientRect();j=l.clientX-R.left,B=l.clientY-R.top,u._calcInverseTransform(e);R=re.apply3DTransform(u._invTransform)(j,B);if(j=R[0],B=R[1],j<0||j>h[0]._length||B<0||B>f[0]._length)return se.unhoverRaw(e,l)}if(l.pointerX=j+h[0]._offset,l.pointerY=B+f[0]._offset,_="xval"in l?ue.flat(c,l.xval):ue.p2c(h,j),y="yval"in l?ue.flat(c,l.yval):ue.p2c(f,B),!ne(_[0])||!ne(y[0]))return re.warn("Fx.hover failed",l,e),se.unhoverRaw(e,l)}var I=1/0;function N(e,t){for(b=0;b<D.length;b++)if((x=D[b])&&x[0]&&x[0].trace&&!0===(w=x[0].trace).visible&&0!==w._length&&-1===["carpet","contourcarpet"].indexOf(w._module.name)){var n,r,i;if("splom"===w.type?T=c[A=0]:(T=ue.getSubplot(w),A=c.indexOf(T)),k=p,ue.isUnifiedHover(k)&&(k=k.charAt(0)),E={cd:x,trace:w,xa:h[A],ya:f[A],maxHoverDistance:m,maxSpikeDistance:g,index:!1,distance:Math.min(I,m),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:oe.defaultLine,name:w.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[T]&&(E.subplot=u[T]._subplot),u._splomScenes&&u._splomScenes[w.uid]&&(E.scene=u._splomScenes[w.uid]),C=L.length,"array"===k?"pointNumber"in(r=l[b])?(E.index=r.pointNumber,k="closest"):(k="","xval"in r&&(M=r.xval,k="x"),"yval"in r&&(S=r.yval,k=k?"closest":"y")):S=void 0!==e&&void 0!==t?(M=e,t):(M=_[A],y[A]),0!==m)if(w._module&&w._module.hoverPoints){var a=w._module.hoverPoints(E,M,S,k,{finiteRange:!0,hoverLayer:u._hoverlayer});if(a)for(var o,s=0;s<a.length;s++)o=a[s],ne(o.x0)&&ne(o.y0)&&L.push(function(r,e){var n=r.index,i=r.trace||{},a=r.cd[0],o=r.cd[n]||{};function s(e){return e||ne(e)&&0===e}var l=Array.isArray(n)?function(e,t){e=re.castOption(a,n,e);return s(e)?e:re.extractOption({},i,"",t)}:function(e,t){return re.extractOption(o,i,e,t)};function t(e,t,n){n=l(t,n);s(n)&&(r[e]=n)}t("hoverinfo","hi","hoverinfo"),t("bgcolor","hbg","hoverlabel.bgcolor"),t("borderColor","hbc","hoverlabel.bordercolor"),t("fontFamily","htf","hoverlabel.font.family"),t("fontSize","hts","hoverlabel.font.size"),t("fontColor","htc","hoverlabel.font.color"),t("nameLength","hnl","hoverlabel.namelength"),t("textAlign","hta","hoverlabel.align"),r.posref="y"===e||"closest"===e&&"h"===i.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=re.constrain(r.x0,0,r.xa._length),r.x1=re.constrain(r.x1,0,r.xa._length),r.y0=re.constrain(r.y0,0,r.ya._length),r.y1=re.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:le.hoverLabelText(r.xa,r.xLabelVal,i.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal));void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:le.hoverLabelText(r.ya,r.yLabelVal,i.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal));void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal));isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0||(c=le.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text,void 0!==r.xerrneg?r.xLabel+=" +"+c+" / -"+le.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+="  "+c,"x"===e&&(r.distance+=1));{var c;isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0||(c=le.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text,void 0!==r.yerrneg?r.yLabel+=" +"+c+" / -"+le.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+="  "+c,"y"===e&&(r.distance+=1))}e=r.hoverinfo||r.trace.hoverinfo;e&&"all"!==e&&(-1===(e=Array.isArray(e)?e:e.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===e.indexOf("y")&&(r.yLabel=void 0),-1===e.indexOf("z")&&(r.zLabel=void 0),-1===e.indexOf("text")&&(r.text=void 0),-1===e.indexOf("name")&&(r.name=void 0));return r}(o,p))}else re.log("Unrecognized trace type in hover:",w);"closest"===p&&L.length>C&&(L.splice(0,C),I=L[0].distance),d&&0!==g&&0===L.length&&(E.distance=g,E.index=!1,(i=(i=w._module.hoverPoints(E,M,S,"closest",{hoverLayer:u._hoverlayer}))&&i.filter(function(e){return e.spikeDistance<=g}))&&i.length&&((r=i.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap})).length&&(r=r[0],ne(r.x0)&&ne(r.y0)&&(n=F(r),(!O.vLinePoint||O.vLinePoint.spikeDistance>n.spikeDistance)&&(O.vLinePoint=n))),(i=i.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap})).length&&(i=i[0],ne(i.x0)&&ne(i.y0)&&(n=F(i),(!O.hLinePoint||O.hLinePoint.spikeDistance>n.spikeDistance)&&(O.hLinePoint=n)))))}}function z(e,t){for(var n,r=null,i=1/0,a=0;a<e.length;a++)(n=e[a].spikeDistance)<=i&&n<=t&&(r=e[a],i=n);return r}function F(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}N();var R={fullLayout:u,container:u._hoverlayer,outerContainer:u._paperdiv,event:l},j=e._spikepoints,B={vLinePoint:O.vLinePoint,hLinePoint:O.hLinePoint};e._spikepoints=B,!d||0===g||0!==L.length&&(H=z(L.filter(function(e){return e.ya.showspikes}),g),O.hLinePoint=F(H),H=z(L.filter(function(e){return e.xa.showspikes}),g),O.vLinePoint=F(H));if(0===L.length){var H=se.unhoverRaw(e,l);return!d||null===O.hLinePoint&&null===O.vLinePoint||_e(j)&&ge(e,O,R)}d&&_e(j)&&ge(e,O,R);var U,R=function(){L.sort(function(e,t){return e.distance-t.distance}),L=function(e,t){for(var n=t.charAt(0),r=[],i=[],a=[],o=0;o<e.length;o++){var s=e[o];(ce.traceIs(s.trace,"bar-like")||ce.traceIs(s.trace,"box-violin")?a:s.trace[n+"period"]?i:r).push(s)}return r.concat(i).concat(a)}(L,p)};if(R(),ue.isXYhover(k)&&0!==L[0].length&&"splom"!==L[0].trace.type){var V=L[0],q=(L=he[V.trace.type]?L.filter(function(e){return e.trace.index===V.trace.index}):[V]).length,Y=ye("x",V,u),G=ye("y",V,u);N(Y,G);var W=[],X={},Z=0,J=function(e){var t,n,r=he[e.trace.type]?fe(e):e.trace.index;X[r]?(t=X[r]-1,n=W[t],0<t&&Math.abs(e.distance)<Math.abs(n.distance)&&(W[t]=e)):(Z++,X[r]=Z,W.push(e))};for(U=0;U<q;U++)J(L[U]);for(U=L.length-1;q-1<U;U--)J(L[U]);L=W,R()}var Y=e._hoverdata,$=[];for(v=0;v<L.length;v++){var Q,K=L[v],ee=ue.makeEventData(K,K.trace,K.cd);!1!==K.hovertemplate&&(Q=!1,K.cd[K.index]&&K.cd[K.index].ht&&(Q=K.cd[K.index].ht),K.hovertemplate=Q||K.trace.hovertemplate||!1),K.eventData=[ee],$.push(ee)}e._hoverdata=$;G="y"===p&&(1<D.length||1<L.length)||"closest"===p&&P&&1<L.length,R=oe.combine(u.plot_bgcolor||oe.background,u.paper_bgcolor),R={hovermode:p,rotateLabels:G,bgColor:R,container:u._hoverlayer,outerContainer:u._paperdiv,commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance},R=pe(L,R,e);ue.isUnifiedHover(p)||(function(e,r,i){var a,o,s,l,c,u,t,n=0,d=1,h=e.size(),f=new Array(h),p=0;function m(e){var t=e[0],n=e[e.length-1];if(o=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,.01<o){for(c=e.length-1;0<=c;c--)e[c].dp+=o;a=!1}if(!(s<.01)){if(o<-.01){for(c=e.length-1;0<=c;c--)e[c].dp-=s;a=!1}if(a){var r=0;for(l=0;l<e.length;l++)(u=e[l]).pos+u.dp+u.size>t.pmax&&r++;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos>t.pmax-1&&(u.del=!0,r--);for(l=0;l<e.length&&!(r<=0);l++)if((u=e[l]).pos<t.pmin+1)for(u.del=!0,r--,s=2*u.size,c=e.length-1;0<=c;c--)e[c].dp-=s;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos+u.dp+u.size>t.pmax&&(u.del=!0,r--)}}}e.each(function(e){var t=e[r],n="x"===t._id.charAt(0),t=t.range;0===p&&t&&t[0]>t[1]!=n&&(d=-1),f[p++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(n?de:1)/2,pmin:0,pmax:n?i.width:i.height}]}),f.sort(function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)});for(;!a&&n<=h;){for(n++,a=!0,l=0;l<f.length-1;){var g=f[l],_=f[l+1],y=g[g.length-1],v=_[0];if(.01<(o=y.pos+y.dp+y.size-v.pos-v.dp+v.size)&&y.pmin===v.pmin&&y.pmax===v.pmax){for(c=_.length-1;0<=c;c--)_[c].dp+=o;for(g.push.apply(g,_),f.splice(l+1,1),t=0,c=g.length-1;0<=c;c--)t+=g[c].dp;for(s=t/g.length,c=g.length-1;0<=c;c--)g[c].dp-=s;a=!1}else l++}f.forEach(m)}for(l=f.length-1;0<=l;l--){var b=f[l];for(c=b.length-1;0<=c;c--){var x=b[c],w=x.datum;w.offset=x.dp,w.del=x.del}}}(R,G?"xa":"ya",u),me(R,G,u._invScaleX,u._invScaleY));l.target&&l.target.tagName&&(G=ce.getComponentMethod("annotations","hasClickToShow")(e,$),ae(te.select(l.target),G?"pointer":""));l.target&&!n&&function(e,t){if(!t||t.length!==e._hoverdata.length)return!0;for(var n=t.length-1;0<=n;n--){var r=t[n],i=e._hoverdata[n];if(r.curveNumber!==i.curveNumber||String(r.pointNumber)!==String(i.pointNumber)||String(r.pointNumbers)!==String(i.pointNumbers))return!0}return!1}(e,Y)&&(Y&&e.emit("plotly_unhover",{event:l,points:Y}),e.emit("plotly_hover",{event:l,points:e._hoverdata,xaxes:h,yaxes:f,xvals:_,yvals:y}))}(e,t,n,r)})},n.loneHover=function(e,r){var t=!0;Array.isArray(e)||(t=!1,e=[e]);var n=e.map(function(e){return{color:e.color||oe.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,eventData:e.eventData||!1,hovertemplateLabels:e.hovertemplateLabels||!1}}),i=te.select(r.container),a=r.outerContainer?te.select(r.outerContainer):i,e={hovermode:"closest",rotateLabels:!1,bgColor:r.bgColor||oe.background,container:i,outerContainer:a},i=pe(n,e,r.gd),o=0,s=0;i.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var n=e.y0-e.by/2;e.offset=n-5<o?o-n+5:0,o=n+e.by+e.offset,t===r.anchorIndex&&(s=e.offset)}).each(function(e){e.offset-=s});a=r.gd._fullLayout._invScaleX,n=r.gd._fullLayout._invScaleY;return me(i,e.rotateLabels,a,n),t?i:i.node()};var l=/<extra>([\s\S]*)<\/extra>/;function pe(e,t,g){var _=g._fullLayout,y=t.hovermode,p=t.rotateLabels,m=t.bgColor,n=t.container,r=t.outerContainer,v=t.commonLabelOpts||{},b=t.fontFamily||I.HOVERFONT,x=t.fontSize||I.HOVERFONTSIZE,w=e[0],T=w.xa,A=w.ya,i=y.charAt(0),k=w[i+"Label"],a=r.node().getBoundingClientRect(),M=a.top,S=a.width,E=a.height,C=void 0!==k&&w.distance<=t.hoverdistance&&("x"===y||"y"===y);if(C){for(var o=!0,s=0;s<e.length;s++)if(o&&void 0===e[s].zLabel&&(o=!1),l=e[s].hoverinfo||e[s].trace.hoverinfo){var l=Array.isArray(l)?l:l.split("+");if(-1===l.indexOf("all")&&-1===l.indexOf(y)){C=!1;break}}o&&(C=!1)}var c=n.selectAll("g.axistext").data(C?[0]:[]);if(c.enter().append("g").classed("axistext",!0),c.exit().remove(),c.each(function(){var e=te.select(this),t=re.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})}),n=re.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)}),r=v.bgcolor||oe.defaultLine,i=v.bordercolor||oe.contrast(r),a=oe.contrast(r),o={family:v.font.family||b,size:v.font.size||x,color:v.font.color||a};t.style({fill:r,stroke:i}),n.text(k).call(R.font,o).call(P.positionText,0,0).call(P.convertToTspans,g),e.attr("transform","");var s,l,c,u,d,h,f,p,m=n.node().getBoundingClientRect();"x"===y?(d="top"===T.side?"-":"",n.attr("text-anchor","middle").call(P.positionText,0,"top"===T.side?M-m.bottom-j-B:M-m.top+j+B),s=T._offset+(w.x0+w.x1)/2,l=A._offset+("top"===T.side?0:A._length),s<(i=m.width/2+B)?t.attr("d","M-"+((s=i)-j)+",0L-"+(i-2*j)+","+d+j+"H"+(B+m.width/2)+"v"+d+(2*B+m.height)+"H-"+i+"V"+d+j+"Z"):s>_.width-i?(s=_.width-i,t.attr("d","M"+(i-j)+",0L"+i+","+d+j+"v"+d+(2*B+m.height)+"H-"+i+"V"+d+j+"H"+(i-2*j)+"Z")):t.attr("d","M0,0L"+j+","+d+j+"H"+(B+m.width/2)+"v"+d+(2*B+m.height)+"H-"+(B+m.width/2)+"V"+d+j+"H-"+j+"Z")):(s="right"===A.side?(c="start",u=1,h="",T._offset+T._length):(c="end",u=-1,h="-",T._offset),l=A._offset+(w.y0+w.y1)/2,n.attr("text-anchor",c),t.attr("d","M0,0L"+h+j+","+j+"V"+(B+m.height/2)+"h"+h+(2*B+m.width)+"V-"+(B+m.height/2)+"H"+h+j+"V-"+j+"Z"),d=m.height/2,t=M-m.top-d,h="clip"+_._uid+"commonlabel"+A._id,s<m.width+2*B+j?(f="M-"+(j+B)+"-"+d+"h-"+(m.width-B)+"V"+d+"h"+(m.width-B)+"Z",p=m.width-s+B,P.positionText(n,p,t),"end"===c&&n.selectAll("tspan").each(function(){var e=te.select(this),t=R.tester.append("text").text(e.text()).call(R.font,o),n=t.node().getBoundingClientRect();Math.round(n.width)<Math.round(m.width)&&e.attr("x",p-n.width),t.remove()})):(P.positionText(n,u*(B+j),t),f=null),(t=_._topclips.selectAll("#"+h).data(f?[0]:[])).enter().append("clipPath").attr("id",h).append("path"),t.exit().remove(),t.select("path").attr("d",f),R.setClipUrl(n,f?h:null,g)),e.attr("transform",D(s,l))}),ue.isUnifiedHover(y)){if(n.selectAll("g.hovertext").remove(),0===e.length)return;i={showlegend:!0,legend:{title:{text:k,font:_.hoverlabel.font},font:_.hoverlabel.font,bgcolor:_.hoverlabel.bgcolor,bordercolor:_.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:_.legend?_.legend.traceorder:void 0,orientation:"v"}},r={};N(i,r,g._fullData);var u=r.legend;u.entries=[];for(var d=0;d<e.length;d++){var h=H(e[d],!0,y,_,k),f=h[0],L=h[1],h=e[d];h.name=L,h.text=""!==L?L+" : "+f:f;f=h.cd[h.index];f&&(f.mc&&(h.mc=f.mc),f.mcc&&(h.mc=f.mcc),f.mlc&&(h.mlc=f.mlc),f.mlcc&&(h.mlc=f.mlcc),f.mlw&&(h.mlw=f.mlw),f.mrc&&(h.mrc=f.mrc),f.dir&&(h.dir=f.dir)),h._distinct=!0,u.entries.push([h])}u.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),u.layer=n,u._inHover=!0,z(g,u);a=e[0],t=(a.y0+a.y1)/2,c=(a.x0+a.x1)/2,i=n.select("g.legend"),r=i.node().getBoundingClientRect();c+=T._offset,t+=A._offset-r.height/2;a=r.width+2*B;!(c+a<=S)&&0<=c-a?c-=a:c+=2*B;a=r.height+2*B,r=E<=t+a;return a<=E&&(t<=M?t=A._offset+2*B:r&&(t=E-a)),i.attr("transform",D(c,t)),i}n=n.selectAll("g.hovertext").data(e,fe);return n.enter().append("g").classed("hovertext",!0).each(function(){var e=te.select(this);e.append("rect").call(oe.fill,oe.addOpacity(m,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(R.font,b,x)}),n.exit().remove(),n.each(function(e){var t=te.select(this).attr("transform",""),n=e.color;Array.isArray(n)&&(n=n[e.eventData[0].pointNumber]);var r=e.bgcolor||n,i=oe.combine(oe.opacity(r)?r:oe.defaultLine,m),a=oe.combine(oe.opacity(n)?n:oe.defaultLine,m),o=e.borderColor||oe.contrast(i),s=H(e,C,y,_,k,t),l=s[0],c=s[1],u=t.select("text.nums").call(R.font,e.fontFamily||b,e.fontSize||x,e.fontColor||o).text(l).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),r=t.select("text.name"),n=0,s=0;c&&c!==l?(r.call(R.font,e.fontFamily||b,e.fontSize||x,a).text(c).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,g),n=(f=r.node().getBoundingClientRect()).width+2*B,s=f.height+2*B):(r.remove(),t.select("rect").remove()),t.select("path").style({fill:i,stroke:o});var d,h,l=u.node().getBoundingClientRect(),a=e.xa._offset+(e.x0+e.x1)/2,c=e.ya._offset+(e.y0+e.y1)/2,f=Math.abs(e.x1-e.x0),i=Math.abs(e.y1-e.y0),o=l.width+j+B+n;e.ty0=M-l.top,e.bx=l.width+2*B,e.by=Math.max(l.height+2*B,s),e.anchor="start",e.txwidth=l.width,e.tx2width=n,e.offset=0,p?(e.pos=a,h=c+i/2+o<=E,d=0<=c-i/2-o,"top"!==e.idealAlign&&h||!d?h?(c+=i/2,e.anchor="start"):e.anchor="middle":(c-=i/2,e.anchor="end")):(e.pos=c,h=a+f/2+o<=S,d=0<=a-f/2-o,"left"!==e.idealAlign&&h||!d?h?(a+=f/2,e.anchor="start"):(e.anchor="middle",o=a-(h=o/2),0<(h=a+h-S)&&(a-=h),o<0&&(a+=-o)):(a-=f/2,e.anchor="end")),u.attr("text-anchor",e.anchor),n&&r.attr("text-anchor",e.anchor),t.attr("transform",D(a,c)+(p?O(F):""))}),n}function H(n,e,t,r,i,a){var o="",s="";void 0!==n.nameOverride&&(n.name=n.nameOverride),n.name&&(n.trace._meta&&(n.name=re.templateString(n.name,n.trace._meta)),o=c(n.name,n.nameLength));t=t.charAt(0);void 0!==n.zLabel?(void 0!==n.xLabel&&(s+="x: "+n.xLabel+"<br>"),void 0!==n.yLabel&&(s+="y: "+n.yLabel+"<br>"),"choropleth"!==n.trace.type&&"choroplethmapbox"!==n.trace.type&&(s+=(s?"z: ":"")+n.zLabel)):e&&n[t+"Label"]===i?s=n[("x"===t?"y":"x")+"Label"]||"":void 0===n.xLabel?void 0!==n.yLabel&&"scattercarpet"!==n.trace.type&&(s=n.yLabel):s=void 0===n.yLabel?n.xLabel:"("+n.xLabel+", "+n.yLabel+")",!n.text&&0!==n.text||Array.isArray(n.text)||(s+=(s?"<br>":"")+n.text),void 0!==n.extraText&&(s+=(s?"<br>":"")+n.extraText),a&&""===s&&!n.hovertemplate&&(""===o&&a.remove(),s=o);e=n.hovertemplate||!1;return e&&(a=n.hovertemplateLabels||n,n[t+"Label"]!==i&&(a[t+"other"]=a[t+"Val"],a[t+"otherLabel"]=a[t+"Label"]),s=(s=re.hovertemplateString(e,a,r._d3locale,n.eventData[0]||{},n.trace._meta)).replace(l,function(e,t){return o=c(t,n.nameLength),""})),[s,o]}function me(e,h,f,p){function m(e){return e*f}function g(e){return e*p}e.each(function(e){var t=te.select(this);if(e.del)return t.remove();var n=t.select("text.nums"),r=e.anchor,i="end"===r?-1:1,a={start:1,end:-1,middle:0}[r],o=a*(j+B),s=o+a*(e.txwidth+B),l=0,c=e.offset,u="middle"===r;u&&(o-=e.tx2width/2,s+=e.txwidth/2+B),h&&(c*=-y,l=e.offset*_),t.select("path").attr("d",u?"M-"+m(e.bx/2+e.tx2width/2)+","+g(c-e.by/2)+"h"+m(e.bx)+"v"+g(e.by)+"h-"+m(e.bx)+"Z":"M0,0L"+m(i*j+l)+","+g(j+c)+"v"+g(e.by/2-j)+"h"+m(i*e.bx)+"v-"+g(e.by)+"H"+m(i*j+l)+"V"+g(c-j)+"Z");var d=l+o,i=c+e.ty0-e.by/2+B,o=e.textAlign||"auto";"auto"!==o&&("left"===o&&"start"!==r?(n.attr("text-anchor","start"),d=u?-e.bx/2-e.tx2width/2+B:-e.bx-B):"right"===o&&"end"!==r&&(n.attr("text-anchor","end"),d=u?e.bx/2-e.tx2width/2-B:e.bx+B)),n.call(P.positionText,d*f,i*p),e.tx2width&&(t.select("text.name").call(P.positionText,m(s+a*B+l),g(c+e.ty0-e.by/2+B)),t.select("rect").call(R.setRect,m(s+(a-1)*e.tx2width/2+l),g(c-e.by/2-1),m(e.tx2width),g(e.by+2)))})}function ge(e,t,n){var r,i,a,o,s,l,c,u,d,h,f,p,m=n.container,g=n.fullLayout,_=g._size,y=n.event,v=!!t.hLinePoint,b=!!t.vLinePoint;m.selectAll(".spikeline").remove(),(b||v)&&(r=oe.combine(g.plot_bgcolor,g.paper_bgcolor),v&&(i=(o=t.hLinePoint)&&o.xa,a="cursor"===(d=o&&o.ya).spikesnap?(c=y.pointerX,y.pointerY):(c=i._offset+o.x,d._offset+o.y),n=x.readability(o.color,r)<1.5?oe.contrast(r):o.color,g=d.spikemode,v=d.spikethickness,h=d.spikecolor||n,o=le.getPxPosition(e,d),-1===g.indexOf("toaxis")&&-1===g.indexOf("across")||(-1!==g.indexOf("toaxis")&&(s=o,l=c),-1!==g.indexOf("across")&&(n=d._counterDomainMin,c=d._counterDomainMax,"free"===d.anchor&&(n=Math.min(n,d.position),c=Math.max(c,d.position)),s=_.l+n*_.w,l=_.l+c*_.w),m.insert("line",":first-child").attr({x1:s,x2:l,y1:a,y2:a,"stroke-width":v,stroke:h,"stroke-dasharray":R.dashStyle(d.spikedash,v)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:s,x2:l,y1:a,y2:a,"stroke-width":v+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==g.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:o+("right"!==d.side?v:-v),cy:a,r:v,fill:h}).classed("spikeline",!0)),b&&(i=(h=t.vLinePoint)&&h.xa,d=h&&h.ya,b="cursor"===i.spikesnap?(u=y.pointerX,y.pointerY):(u=i._offset+h.x,d._offset+h.y),t=x.readability(h.color,r)<1.5?oe.contrast(r):h.color,y=i.spikemode,d=i.spikethickness,h=i.spikecolor||t,t=le.getPxPosition(e,i),-1===y.indexOf("toaxis")&&-1===y.indexOf("across")||(-1!==y.indexOf("toaxis")&&(f=t,p=b),-1!==y.indexOf("across")&&(e=i._counterDomainMin,b=i._counterDomainMax,"free"===i.anchor&&(e=Math.min(e,i.position),b=Math.max(b,i.position)),f=_.t+(1-b)*_.h,p=_.t+(1-e)*_.h),m.insert("line",":first-child").attr({x1:u,x2:u,y1:f,y2:p,"stroke-width":d,stroke:h,"stroke-dasharray":R.dashStyle(i.spikedash,d)}).classed("spikeline",!0).classed("crisp",!0),m.insert("line",":first-child").attr({x1:u,x2:u,y1:f,y2:p,"stroke-width":d+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==y.indexOf("marker")&&m.insert("circle",":first-child").attr({cx:u,cy:t-("top"!==i.side?d:-d),r:d,fill:h}).classed("spikeline",!0)))}function _e(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function c(e,t){return P.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function ye(e,t,n){var r=t[e+"a"],e=t[e+"Val"];"category"===r.type?e=r._categoriesMap[e]:"date"===r.type&&(e=r.d2c(e));t=t.cd[t.index];return t&&t.t&&t.t.posLetter===r._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(e+=t.t.dPos)),e}},{"../../lib":285,"../../lib/events":278,"../../lib/override_cursor":296,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../legend/defaults":207,"../legend/draw":208,"./constants":189,"./helpers":191,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],193:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("../color"),s=e("./helpers").isUnifiedHover;t.exports=function(e,t,n,r){function i(e){r.font[e]||(r.font[e]=(t.legend||t).font[e])}r=r||{},t&&s(t.hovermode)&&(r.font||(r.font={}),i("size"),i("family"),i("color"),t.legend?(r.bgcolor||(r.bgcolor=o.combine(t.legend.bgcolor,t.paper_bgcolor)),r.bordercolor||(r.bordercolor=t.legend.bordercolor)):r.bgcolor||(r.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),a.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":285,"../color":155,"./helpers":191}],194:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return void 0!==r[e]?r[e]:i.coerce(n,r,a,e,t)}return e("clickmode"),e("hovermode")}},{"../../lib":285,"./layout_attributes":196}],195:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../../lib"),a=e("../dragelement"),o=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,n){return i.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(t,n,e){return i.castOption(t,e,"hoverinfo",function(e){return i.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)})},hover:l.hover,unhover:a.unhover,loneHover:l.loneHover,loneUnhover:function(e){e=i.isD3Selection(e)?e:r.select(e);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":285,"../dragelement":174,"./attributes":186,"./calc":187,"./click":188,"./constants":189,"./defaults":190,"./helpers":191,"./hover":192,"./layout_attributes":196,"./layout_defaults":197,"./layout_global_defaults":198,"@plotly/d3":20}],196:[function(e,t,n){"use strict";var r=e("./constants"),e=e("../../plots/font_attributes")({editType:"none"});e.family.dflt=r.HOVERFONT,e.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:e,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":360,"./constants":189}],197:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes"),l=e("./hovermode_defaults"),c=e("./hoverlabel_defaults");t.exports=function(n,r){function e(e,t){return o.coerce(n,r,s,e,t)}l(n,r)&&(e("hoverdistance"),e("spikedistance")),"select"===e("dragmode")&&e("selectdirection");var t=r._has("mapbox"),i=r._has("geo"),a=r._basePlotModules.length;"zoom"===r.dragmode&&((t||i)&&1===a||t&&i&&2===a)&&(r.dragmode="pan"),c(n,r,e)}},{"../../lib":285,"./hoverlabel_defaults":193,"./hovermode_defaults":194,"./layout_attributes":196}],198:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./hoverlabel_defaults"),o=e("./layout_attributes");t.exports=function(n,r){a(n,r,function(e,t){return i.coerce(n,r,o,e,t)})}},{"../../lib":285,"./hoverlabel_defaults":193,"./layout_attributes":196}],199:[function(e,t,n){"use strict";var p=e("../../lib"),r=e("../../lib/regex").counter,i=e("../../plots/domain").attributes,a=e("../../plots/cartesian/constants").idRegex,m=e("../../plot_api/plot_template"),g={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function D(e,t,n){t=t[n+"axes"],n=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(t)?t:n.length?n:void 0}function _(e,t,n,r,i,a){var o=t(e+"gap",n),n=t("domain."+e);t(e+"side",r);for(var s=new Array(i),l=n[0],c=(n[1]-l)/(i-o),u=c*(1-o),d=0;d<i;d++){var h=l+c*d;s[a?i-1-d:d]=[h,h+u]}return s}function O(e,n,t,r,i){var a,o=new Array(t);function s(e,t){-1!==n.indexOf(t)&&void 0===r[t]?(o[e]=t,r[t]=e):o[e]=""}if(Array.isArray(e))for(a=0;a<t;a++)s(a,e[a]);else for(s(0,i),a=1;a<t;a++)s(a,i+(a+1));return o}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:g}},layoutAttributes:g,sizeDefaults:function(e,t){var n,r,i,a,o,s,l,c,u=e.grid||{},d=D(t,u,"x"),h=D(t,u,"y");function f(e,t){return p.coerce(u,r,g,e,t)}(e.grid||d||h)&&(n=Array.isArray(u.subplots)&&Array.isArray(u.subplots[0]),o=Array.isArray(d),s=Array.isArray(h),e=o&&d!==u.xaxes&&s&&h!==u.yaxes,n?(i=u.subplots.length,a=u.subplots[0].length):(s&&(i=h.length),o&&(a=d.length)),r=m.newContainer(t,"grid"),1<(i=f("rows",i))*(a=f("columns",a))?(n||o||s||"independent"===f("pattern")&&(n=!0),r._hasSubplotGrid=n,o="top to bottom"===f("roworder"),s=n?.3:.1,e&&t._splomGridDflt&&(l=t._splomGridDflt.xside,c=t._splomGridDflt.yside),r._domains={x:_("x",f,n?.2:.1,l,a),y:_("y",f,s,c,i,o)}):delete t.grid)},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,i,a,o,s=e.grid||{},l=t._subplots,c=n._hasSubplotGrid,u=n.rows,d=n.columns,h="independent"===n.pattern,f=n._axisMap={};if(c)for(var p=s.subplots||[],m=n.subplots=new Array(u),g=1,_=0;_<u;_++)for(var y=m[_]=new Array(d),v=p[_]||[],b=0;b<d;b++)h?(a=1===g?"xy":"x"+g+"y"+g,g++):a=v[b],y[b]="",-1!==l.cartesian.indexOf(a)&&(o=a.indexOf("y"),r=a.slice(0,o),i=a.slice(o),void 0!==f[r]&&f[r]!==b||void 0!==f[i]&&f[i]!==_||(y[b]=a,f[r]=b,f[i]=_));else{e=D(t,s,"x"),s=D(t,s,"y");n.xaxes=O(e,l.xaxis,d,f,"x"),n.yaxes=O(s,l.yaxis,u,f,"y")}var x,w=n._anchors={},T="top to bottom"===n.roworder;for(x in f){var A,k,M,S=x.charAt(0),E=n[S+"side"];if(E.length<8)w[x]="free";else if("x"===S){if(M="t"===E.charAt(0)==T?(A=0,k=1,u):(A=u-1,k=-1),c){var C=f[x];for(_=A;_!==M;_+=k)if((a=m[_][C])&&(o=a.indexOf("y"),a.slice(0,o)===x)){w[x]=a.slice(o);break}}else for(_=A;_!==M;_+=k)if(i=n.yaxes[_],-1!==l.cartesian.indexOf(x+i)){w[x]=i;break}}else if(M="l"===E.charAt(0)?(A=0,k=1,d):(A=d-1,k=-1),c){var L=f[x];for(_=A;_!==M;_+=k)if((a=m[L][_])&&(o=a.indexOf("y"),a.slice(o)===x)){w[x]=a.slice(0,o);break}}else for(_=A;_!==M;_+=k)if(r=n.xaxes[_],-1!==l.cartesian.indexOf(r+x)){w[x]=r;break}}}}}},{"../../lib":285,"../../lib/regex":301,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/domain":359}],200:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),i=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338}],201:[function(e,t,n){"use strict";var p=e("fast-isnumeric"),m=e("../../lib/to_log_range");t.exports=function(e,t,n,r){t=t||{};var i="log"===n&&"linear"===t.type,n="linear"===n&&"log"===t.type;if(i||n)for(var a=e._fullLayout.images,o=t._id.charAt(0),s=0;s<a.length;s++){var l,c,u,d,h,f="images["+s+"].";(h=a[s])[o+"ref"]===t._id&&(l=h[o],c=h["size"+o],d=u=null,d=i?(u=m(l,t.range),h=c/Math.pow(10,u)/2,2*Math.log(h+Math.sqrt(1+h*h))/Math.LN10):(u=Math.pow(10,l))*(Math.pow(10,c/2)-Math.pow(10,-c/2)),p(u)?p(d)||(d=null):d=u=null,r(f+o,u),r(f+"size"+o,d))}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],202:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),h=e("./attributes");function i(n,r,e){function t(e,t){return u.coerce(n,r,h,e,t)}var i=t("source");if(!t("visible",!!i))return r;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var a={_fullLayout:e},o=["x","y"],s=0;s<2;s++){var l=o[s],c=d.coerceRef(n,r,a,l,"paper",void 0);"paper"!==c&&d.getFromId(a,c)._imgIndices.push(r._index),d.coercePosition(r,a,t,c,l,0)}return r}t.exports=function(e,t){r(e,t,{name:"images",handleItemDefaults:i})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":200}],203:[function(e,t,n){"use strict";var _=e("@plotly/d3"),y=e("../drawing"),v=e("../../plots/cartesian/axes"),b=e("../../plots/cartesian/axis_ids"),x=e("../../constants/xmlns_namespaces");t.exports=function(h){for(var f=h._fullLayout,e=[],t={},n=[],r=0;r<f.images.length;r++){var i,a,o=f.images[r];o.visible&&("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref?(i=b.ref2id(o.xref)+b.ref2id(o.yref),(a=f._plots[i])?(t[i=a.mainplot?a.mainplot.id:i]||(t[i]=[]),t[i].push(o)):n.push(o)):("above"===o.layer?e:n).push(o))}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var e,i=_.select(this);this._imgSrc!==r.source&&(i.attr("xmlns",x.svg),r.source&&"data:"===r.source.slice(0,5)?(i.attr("xlink:href",r.source),this._imgSrc=r.source):(e=new Promise(function(t){var e=new Image;function n(){i.remove(),t()}(this.img=e).setAttribute("crossOrigin","anonymous"),e.onerror=n,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);e=e.toDataURL("image/png");i.attr("xlink:href",e),t()},i.on("error",n),e.src=r.source,this._imgSrc=r.source}.bind(this)),h._promises.push(e)))}function l(e){var t=_.select(this),n=v.getFromId(h,e.xref),r=v.getFromId(h,e.yref),i="domain"===v.getRefType(e.xref),a="domain"===v.getRefType(e.yref),o=f._size,s=void 0!==n?"string"==typeof e.xref&&i?n._length*e.sizex:Math.abs(n.l2p(e.sizex)-n.l2p(0)):e.sizex*o.w,l=void 0!==r?"string"==typeof e.yref&&a?r._length*e.sizey:Math.abs(r.l2p(e.sizey)-r.l2p(0)):e.sizey*o.h,c=s*p[e.xanchor].offset,u=l*m[e.yanchor].offset,d=p[e.xanchor].sizing+m[e.yanchor].sizing,i=void 0!==n?"string"==typeof e.xref&&i?n._length*e.x+n._offset:n.r2p(e.x)+n._offset:e.x*o.w+o.l;switch(i+=c,o=void 0!==r?"string"==typeof e.yref&&a?r._length*(1-e.y)+r._offset:r.r2p(e.y)+r._offset:o.h-e.y*o.h+o.t,o+=u,e.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}t.attr({x:i,y:o,width:s,height:l,preserveAspectRatio:d,opacity:e.opacity});r=(n&&"domain"!==v.getRefType(e.xref)?n._id:"")+(r&&"domain"!==v.getRefType(e.yref)?r._id:"");y.setClipUrl(t,r?"clip"+f._uid+r:null,h)}var c=f._imageLowerLayer.selectAll("image").data(n),u=f._imageUpperLayer.selectAll("image").data(e);c.enter().append("image"),u.enter().append("image"),c.exit().remove(),u.exit().remove(),c.each(function(e){s.bind(this)(e),l.bind(this)(e)}),u.each(function(e){s.bind(this)(e),l.bind(this)(e)});var d=Object.keys(f._plots);for(r=0;r<d.length;r++){i=d[r];var g=f._plots[i];g.imagelayer&&((g=g.imagelayer.selectAll("image").data(t[i]||[])).enter().append("image"),g.exit().remove(),g.each(function(e){s.bind(this)(e),l.bind(this)(e)}))}}},{"../../constants/xmlns_namespaces":266,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_ids":335,"../drawing":177,"@plotly/d3":20}],204:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":200,"./convert_coords":201,"./defaults":202,"./draw":203}],205:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),e=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":360,"../color/attributes":154}],206:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],207:[function(e,t,n){"use strict";var m=e("../../registry"),g=e("../../lib"),_=e("../../plot_api/plot_template"),y=e("./attributes"),v=e("../../plots/layout_attributes"),b=e("./helpers");t.exports=function(e,t,n){for(var r=e.legend||{},i=0,a=!1,o="normal",s=0;s<n.length;s++){var l=n[s];l.visible&&(!l.showlegend&&(!l._dfltShowLegend||l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt)||(i++,l.showlegend&&(a=!0,!m.traceIs(l,"pie-like")&&!0!==l._input.showlegend||i++)),(m.traceIs(l,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(o=b.isGrouped({traceorder:o})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(o=b.isReversed({traceorder:o})?"reversed+grouped":"grouped"))}var c,u,d,h,f=g.coerce(e,t,v,"showlegend",a&&1<i);function p(e,t){return g.coerce(r,c,y,e,t)}!1===f&&!r.uirevision||(c=_.newContainer(t,"legend"),p("uirevision",t.uirevision),!1!==f&&(p("bgcolor",t.paper_bgcolor),p("bordercolor"),p("borderwidth"),h=g.coerceFont(p,"font",t.font),e=(f="h"===p("orientation"))?(u=0,m.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(d=1.1,"bottom"):(d=-.1,"top")):(u=1.02,d=1,"auto"),p("traceorder",o),b.isGrouped(t.legend)&&p("tracegroupgap"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("x",u),p("xanchor"),p("y",d),p("yanchor",e),p("valign"),g.noneOrAll(r,c,["x","y"]),p("title.text")&&(p("title.side",f?"left":"top"),h=g.extendFlat({},h,{size:g.bigFont(h.size)}),g.coerceFont(p,"title.font",h))))}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/layout_attributes":364,"../../registry":373,"./attributes":205,"./helpers":211}],208:[function(e,t,n){"use strict";var P=e("@plotly/d3"),D=e("../../lib"),O=e("../../plots/plots"),R=e("../../registry"),o=e("../../lib/events"),I=e("../dragelement"),N=e("../drawing"),s=e("../color"),m=e("../../lib/svg_text_utils"),l=e("./handle_click"),z=e("./constants"),r=e("../../constants/alignment"),g=r.LINE_SPACING,F=r.FROM_TL,j=r.FROM_BR,c=e("./get_legend_data"),u=e("./style"),B=e("./helpers"),_=1;function H(e,t,n,r,i){var a=n.data()[0][0].trace,i={event:i,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};a._group&&(i.group=a._group),R.traceIs(a,"pie-like")&&(i.label=n.datum()[0].label),!1!==o.triggerHandler(e,"plotly_legendclick",i)&&(1===r?t._clickTimeout=setTimeout(function(){e._fullLayout&&l(n,e,r)},e._context.doubleClickDelay):2===r&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==o.triggerHandler(e,"plotly_legenddoubleclick",i)&&l(n,e,r)))}function d(i,a,o){var e,s=i.data()[0][0],l=s.trace,t=R.traceIs(l,"pie-like"),n=!o._inHover&&a._context.edits.legendText&&!t,c=o._maxNameLength;s.groupTitle?(e=s.groupTitle.text,r=s.groupTitle.font):(r=o.font,o.entries?e=s.text:(e=t?s.label:l.name,l._meta&&(e=D.templateString(e,l._meta))));t=D.ensureSingle(i,"text","legendtext");t.attr("text-anchor","start").call(N.font,r).text(n?h(e,c):e);var r=o.itemwidth+2*z.itemGap;m.positionText(t,r,0),n?t.call(m.makeEditable,{gd:a,text:e}).call(p,i,a,o).on("edit",function(e){this.text(h(e,c)).call(p,i,a,o);var t,n=s.trace._fullInput||{},r={};return R.hasTransform(n,"groupby")?(t=(t=R.getTransformIndices(n,"groupby"))[t.length-1],(t=D.keyedContainer(n,"transforms["+t+"].styles","target","value.name")).set(s.trace._group,e),r=t.constructUpdate()):r.name=e,R.call("_guiRestyle",a,r,l.index)}):p(t,i,a,o)}function h(e,t){t=Math.max(4,t);if(e&&e.trim().length>=t/2)return e;for(var n=t-(e=e||"").length;0<n;n--)e+=" ";return e}function f(t,n){var e,r=n._context.doubleClickDelay,i=1,a=D.ensureSingle(t,"rect","legendtoggle",function(e){n._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(s.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(a.on("mousedown",function(){(e=(new Date).getTime())-n._legendMouseDownTime<r?i+=1:(i=1,n._legendMouseDownTime=e)}),a.on("mouseup",function(){var e;n._dragged||n._editing||(e=n._fullLayout.legend,(new Date).getTime()-n._legendMouseDownTime>r&&(i=Math.max(i-1,1)),H(n,e,t,i,P.event))}))}function p(e,d,h,f,p){f._inHover&&e.attr("data-notex",!0),m.convertToTspans(e,h,function(){var e,t,n,r,i,a,o,s,l,c,u;t=h,n=f,r=p,u=(e=d).data()[0][0],n._inHover||!u||u.trace.showlegend?(l=e.select("g[class*=math-group]"),o=l.node(),c=(n=n||t._fullLayout.legend).borderwidth,t=(r===_?n.title:u.groupTitle||n).font.size*g,o?(s=N.bBox(o),i=s.height,a=s.width,r===_?N.setTranslate(l,c,c+.75*i):N.setTranslate(l,0,.25*i)):(o=e.select(r===_?".legendtitletext":".legendtext"),s=m.lineCount(o),l=o.node(),i=t*s,a=l?N.bBox(l).width:0,r===_?("left"===n.title.side&&(a+=2*z.itemGap),m.positionText(o,c+z.titlePad,c+t)):(c=2*z.itemGap+n.itemwidth,u.groupTitle&&(c=z.itemGap,a-=n.itemwidth),m.positionText(o,c,-t*((s-1)/2-.3)))),r===_?(n._titleWidth=a,n._titleHeight=i):(u.lineHeight=t,u.height=Math.max(i,16)+3,u.width=a)):e.remove()})}function U(e){return D.isRightAnchor(e)?"right":D.isCenterAnchor(e)?"center":"left"}function V(e){return D.isBottomAnchor(e)?"bottom":D.isMiddleAnchor(e)?"middle":"top"}t.exports=function(e,t){return function(b,x){var w,e,T=b._fullLayout,A="legend"+T._uid,k=x._inHover;k?(w=x.layer,A+="-hover"):w=T._infolayer;if(w){if(b._legendMouseDownTime||(b._legendMouseDownTime=0),k){if(!x.entries)return;e=c(x.entries,x)}else{if(!b.calcdata)return;e=T.showlegend&&c(b.calcdata,x)}var n=T.hiddenlabels||[];if(!(k||T.showlegend&&e.length))return w.selectAll(".legend").remove(),T._topdefs.select("#"+A).remove(),O.autoMargin(b,"legend");var M=D.ensureSingle(w,"g","legend",function(e){k||e.attr("pointer-events","all")}),S=D.ensureSingleById(T._topdefs,"clipPath",A,function(e){e.append("rect")}),E=D.ensureSingle(M,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});E.call(s.stroke,x.bordercolor).call(s.fill,x.bgcolor).style("stroke-width",x.borderwidth+"px");var t,C=D.ensureSingle(M,"g","scrollbox"),r=x.title;x._titleWidth=0,x._titleHeight=0,r.text?((t=D.ensureSingle(C,"text","legendtitletext")).attr("text-anchor","start").call(N.font,r.font).text(r.text),p(t,C,b,x,_)):C.selectAll(".legendtitletext").remove();var L=D.ensureSingle(M,"rect","scrollbar",function(e){e.attr(z.scrollBarEnterAttrs).call(s.fill,z.scrollBarColor)}),i=C.selectAll("g.groups").data(e);i.enter().append("g").attr("class","groups"),i.exit().remove();var a=i.selectAll("g.traces").data(D.identity);a.enter().append("g").attr("class","traces"),a.exit().remove(),a.style("opacity",function(e){var t=e[0].trace;return R.traceIs(t,"pie-like")?-1!==n.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){P.select(this).call(d,b,x)}).call(u,b,x).each(function(){k||P.select(this).call(f,b)}),D.syncOrAsync([O.previousPromises,function(){return function(e,t,n,i){var r=e._fullLayout;i=i||r.legend;var a=r._size,o=B.isVertical(i),s=B.isGrouped(i),l=i.borderwidth,c=2*l,u=z.itemGap,d=i.itemwidth+2*u,h=2*(l+u),f=V(i),p=i.y<0||0===i.y&&"top"===f,m=1<i.y||1===i.y&&"bottom"===f,g=i.tracegroupgap;i._maxHeight=Math.max(p||m?r.height/2:a.h,30);var _=0;i._width=0,i._height=0;var y=function(e){var t=0,n=0,r=e.title.side;r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight));return[t,n]}(i);{var v,b,x,w,T,A,k,M,S,E,C,L,D;o?(n.each(function(e){var t=e[0].height;N.setTranslate(this,l+y[0],l+y[1]+i._height+t/2+u),i._height+=t,i._width=Math.max(i._width,e[0].width)}),_=d+i._width,i._width+=u+d+c,i._height+=h,s&&(t.each(function(e,t){N.setTranslate(this,0,t*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap)):(v=U(i),b=i.x<0||0===i.x&&"right"===v,f=1<i.x||1===i.x&&"left"===v,p=m||p,r=r.width/2,i._maxWidth=Math.max(b?p&&"left"===v?a.l+a.w:r:f?p&&"right"===v?a.r+a.w:r:a.w,2*d),w=x=0,n.each(function(e){e=e[0].width+d;x=Math.max(x,e),w+=e}),_=null,T=0,s?(M=k=A=0,t.each(function(){var n=0,r=0;P.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;N.setTranslate(this,y[0],y[1]+l+u+t/2+r),r+=t,n=Math.max(n,d+e[0].width)}),A=Math.max(A,r);var e=n+u;e+l+k>i._maxWidth&&(T=Math.max(T,k),k=0,M+=A+g,A=r),N.setTranslate(this,k,M),k+=e}),i._width=Math.max(T,k)+l,i._height=M+A+h):(t=n.size(),S=w+c+(t-1)*u<i._maxWidth,D=L=C=E=0,n.each(function(e){var t=e[0].height,n=d+e[0].width,e=(S?n:x)+u;e+l+C-u>=i._maxWidth&&(T=Math.max(T,D),C=0,L+=E,i._height+=E,E=0),N.setTranslate(this,y[0]+l+C,y[1]+l+L+t/2+u),D=C+n+u,C+=e,E=Math.max(E,t)}),S?(i._width=C+c,i._height=E+h):(i._width=Math.max(T,D)+c,i._height+=E+h)))}i._width=Math.ceil(Math.max(i._width+y[0],i._titleWidth+2*(l+z.titlePad))),i._height=Math.ceil(Math.max(i._height+y[1],i._titleHeight+2*(l+z.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var e=e._context.edits,O=e.legendText||e.legendPosition;n.each(function(e){var t=P.select(this).select(".legendtoggle"),n=e[0].height,e=O?d:_||d+e[0].width;o||(e+=u/2),N.setRect(t,0,-n/2,e,n)})}(b,i,a,x)},function(){var n,r,e,t,i,a,o,s,l,c,u,d,h,f,p,m,g,_,y;function v(e,t,n){x._scrollY=b._fullLayout.legend._scrollY=e,N.setTranslate(C,0,-e),N.setRect(L,x._width,z.scrollBarMargin+e*n,z.scrollBarWidth,t),S.select("rect").attr("y",r+e)}!k&&(e=(i=b)._fullLayout.legend,a=U(e),t=V(e),O.autoMargin(i,"legend",{x:e.x,y:e.y,l:e._width*F[a],r:e._width*j[a],b:e._effHeight*j[t],t:e._effHeight*F[t]}))||(n=T._size,r=x.borderwidth,i=n.l+n.w*x.x-F[U(x)]*x._width,a=n.t+n.h*(1-x.y)-F[V(x)]*x._effHeight,!k&&T.margin.autoexpand&&(e=i,t=a,i=D.constrain(i,0,T.width-x._width),a=D.constrain(a,0,T.height-x._effHeight),i!==e&&D.log("Constrain legend.x to make legend fit inside graph"),a!==t&&D.log("Constrain legend.y to make legend fit inside graph")),k||N.setTranslate(M,i,a),L.on(".drag",null),M.on("wheel",null),k||x._height<=x._maxHeight||b._context.staticPlot?(p=x._effHeight,k&&(p=x._height),E.attr({width:x._width-r,height:p-r,x:r/2,y:r/2}),N.setTranslate(C,0,0),S.select("rect").attr({width:x._width-2*r,height:p-2*r,x:r,y:r}),N.setClipUrl(C,A,b),N.setRect(L,0,0,0,0),delete x._scrollY):(o=Math.max(z.scrollBarMinHeight,x._effHeight*x._effHeight/x._height),s=x._effHeight-o-2*z.scrollBarMargin,l=x._height-x._effHeight,c=s/l,u=Math.min(x._scrollY||0,l),E.attr({width:x._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:x._effHeight-r,x:r/2,y:r/2}),S.select("rect").attr({width:x._width-2*r+z.scrollBarWidth+z.scrollBarMargin,height:x._effHeight-2*r,x:r,y:r+u}),N.setClipUrl(C,A,b),v(u,o,c),M.on("wheel",function(){v(u=D.constrain(x._scrollY+P.event.deltaY/s*l,0,l),o,c),0!==u&&u!==l&&P.event.preventDefault()}),p=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;d=("touchstart"===e.type?e.changedTouches[0]:e).clientY,f=u}).on("drag",function(){var e,t,n=P.event.sourceEvent;2===n.buttons||n.ctrlKey||(h=("touchmove"===n.type?n.changedTouches[0]:n).clientY,e=f,t=d,n=h,v(u=D.constrain((n-t)/c+e,0,l),o,c))}),L.call(p),p=P.behavior.drag().on("dragstart",function(){var e=P.event.sourceEvent;"touchstart"===e.type&&(d=e.changedTouches[0].clientY,f=u)}).on("drag",function(){var e,t,n=P.event.sourceEvent;"touchmove"===n.type&&(h=n.changedTouches[0].clientY,e=f,t=d,n=h,v(u=D.constrain((t-n)/c+e,0,l),o,c))}),C.call(p)),b._context.edits.legendPosition&&(M.classed("cursor-move",!0),I.init({element:M.node(),gd:b,prepFn:function(){var e=N.getTranslate(M);_=e.x,y=e.y},moveFn:function(e,t){e=_+e,t=y+t;N.setTranslate(M,e,t),m=I.align(e,0,n.l,n.l+n.w,x.xanchor),g=I.align(t,0,n.t+n.h,n.t,x.yanchor)},doneFn:function(){void 0!==m&&void 0!==g&&R.call("_guiRelayout",b,{"legend.x":m,"legend.y":g})},clickFn:function(e,t){var n=w.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});0<n.size()&&H(b,M,n,e,t)}})))}],b)}}(e,t=t||(e._fullLayout.legend||{}))}},{"../../constants/alignment":260,"../../lib":285,"../../lib/events":278,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":206,"./get_legend_data":209,"./handle_click":210,"./helpers":211,"./style":213,"@plotly/d3":20}],209:[function(e,t,n){"use strict";var S=e("../../registry"),E=e("./helpers");t.exports=function(e,n){var t=E.isGrouped(n),r=E.isReversed(n),i={},a=[],o=!1,s={},l=0,c=0;function u(e,t){""!==e&&E.isGrouped(n)?-1===a.indexOf(e)?(a.push(e),o=!0,i[e]=[t]):i[e].push(t):(e="~~i"+l,a.push(e),i[e]=[t],l++)}for(y=0;y<e.length;y++){var d=e[y],h=d[0],f=h.trace,p=f.legendgroup;if(n._inHover||f.visible&&f.showlegend)if(S.traceIs(f,"pie-like"))for(s[p]||(s[p]={}),x=0;x<d.length;x++){var m=d[x].label;s[p][m]||(u(p,{label:m,color:d[x].color,i:d[x].i,trace:f,pts:d[x].pts}),s[p][m]=!0,c=Math.max(c,(m||"").length))}else u(p,h),c=Math.max(c,(f.name||"").length)}if(!a.length)return[];for(var g=!o||!t,_=[],y=0;y<a.length;y++){var v=i[a[y]];g?_.push(v[0]):_.push(v)}for(g&&(_=[_]),y=0;y<_.length;y++){for(var b=1/0,x=0;x<_[y].length;x++){var w=_[y][x].trace.legendrank;w<b&&(b=w)}_[y][0]._groupMinRank=b,_[y][0]._preGroupSort=y}function T(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort}for(_.forEach(function(e,t){e[0]._preGroupSort=t}),_.sort(function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort}),y=0;y<_.length;y++){_[y].forEach(function(e,t){e._preSort=t}),_[y].sort(T);var A=_[y][0],k=null;for(x=0;x<_[y].length;x++){var M=_[y][x].trace.legendgrouptitle;if(M&&M.text){k=M;break}}for(r&&_[y].reverse(),k&&_[y].unshift({i:-1,groupTitle:k,trace:{showlegend:A.trace.showlegend}}),x=0;x<_[y].length;x++)_[y][x]=[_[y][x]]}return n._lgroupsLength=_.length,n._maxNameLength=c,_}},{"../../registry":373,"./helpers":211}],210:[function(e,t,n){"use strict";var P=e("../../lib"),R=e("../../registry"),I=!0;t.exports=function(e,t,n){var r=t._fullLayout;if(!t._dragged&&!t._editing){var i,a=r.legend.itemclick,o=r.legend.itemdoubleclick;if(I=(1===n&&"toggle"===a&&"toggleothers"===o&&I&&t.data&&t._context.showTips&&P.notifier(P._(t,"Double-click on legend to isolate one trace"),"long"),!1),1===n?i=a:2===n&&(i=o),i){var s=r.hiddenlabels?r.hiddenlabels.slice():[],e=e.data()[0][0];if(!e.groupTitle){var l,c,u,d=t._fullData,h=e.trace,f=h.legendgroup,p={},m=[],g=[],_=[];if(R.traceIs(h,"pie-like")){var y=e.label,e=s.indexOf(y);"toggle"===i?-1===e?s.push(y):s.splice(e,1):"toggleothers"===i&&(s=[],t.calcdata[0].forEach(function(e){y!==e.label&&s.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===s.length&&-1===e&&(s=[])),R.call("_guiRelayout",t,"hiddenlabels",s)}else{var v,b,x=f&&f.length,w=[];if(x)for(S=0;S<d.length;S++)(v=d[S]).visible&&v.legendgroup===f&&w.push(S);if("toggle"===i){switch(h.visible){case!0:b="legendonly";break;case!1:b=!1;break;case"legendonly":b=!0}if(x)for(S=0;S<d.length;S++)!1!==d[S].visible&&d[S].legendgroup===f&&O(d[S],b);else O(h,b)}else if("toggleothers"===i){for(var T,A,k,M=!0,S=0;S<d.length;S++)if(T=d[S]===h,k=!0!==d[S].showlegend,!(T||k||(A=x&&d[S].legendgroup===f)||!0!==d[S].visible||R.traceIs(d[S],"notLegendIsolatable"))){M=!1;break}for(S=0;S<d.length;S++)if(!1!==d[S].visible&&!R.traceIs(d[S],"notLegendIsolatable"))switch(h.visible){case"legendonly":O(d[S],!0);break;case!0:T=d[S]===h,k=!0!==d[S].showlegend&&!d[S].legendgroup,A=T||x&&d[S].legendgroup===f,O(d[S],!(!A&&!k)||(!!M||"legendonly"))}}for(S=0;S<g.length;S++)if(l=g[S])for(var E=l.constructUpdate(),C=Object.keys(E),L=0;L<C.length;L++)c=C[L],(p[c]=p[c]||[])[_[S]]=E[c];for(u=Object.keys(p),S=0;S<u.length;S++)for(c=u[S],L=0;L<m.length;L++)p[c].hasOwnProperty(L)||(p[c][L]=void 0);R.call("_guiRestyle",t,p,m)}}}}function D(e,t,n){var r=m.indexOf(e),i=(i=p[t])||(p[t]=[]);return-1===m.indexOf(e)&&(m.push(e),r=m.length-1),i[r]=n,r}function O(e,t){var n,r,i=e._fullInput;R.hasTransform(i,"groupby")?((n=g[i.index])||(r=(r=R.getTransformIndices(i,"groupby"))[r.length-1],n=P.keyedContainer(i,"transforms["+r+"].styles","target","value.visible"),g[i.index]=n),!1!==(r=void 0===(r=n.get(e._group))?!0:r)&&n.set(e._group,t),_[i.index]=D(i.index,"visible",!1!==i.visible)):(t=!1!==i.visible&&t,D(i.index,"visible",t))}}},{"../../lib":285,"../../registry":373}],211:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],212:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":205,"./defaults":207,"./draw":208,"./style":213}],213:[function(e,t,n){"use strict";var b=e("@plotly/d3"),o=e("../../registry"),m=e("../../lib"),a=m.strTranslate,x=e("../drawing"),w=e("../color"),T=e("../colorscale/helpers").extractOpts,A=e("../../traces/scatter/subtypes"),s=e("../../traces/pie/style_one"),l=e("../../traces/pie/helpers").castOption,i=e("./constants");function k(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function M(e){var t=e[0].trace,n=t.contours,r=A.hasLines(t),i=A.hasMarkers(t),a=t.visible&&t.fill&&"none"!==t.fill,o=!1,e=!1;return n&&("lines"===(t=n.coloring)?o=!0:r="none"===t||"heatmap"===t||n.showlines,"constraint"===n.type?a="="!==n._operation:"fill"!==t&&"heatmap"!==t||(e=!0)),{showMarker:i,showLine:r,showFill:a,showGradientLine:o,showGradientFill:e,anyLine:r||o,anyFill:a||e}}function S(e,t,n){return e&&m.isArrayOrTypedArray(e)?t:n<e?n:e}t.exports=function(e,g,_){var t=g._fullLayout,f="constant"===(_=_||t.legend).itemsizing,p=_.itemwidth,t=(p+2*i.itemGap)/2,y=a(t,0),v=function(e,t,n,r){var i;if(e+1)i=e;else{if(!(t&&0<t.width))return 0;i=t.width}return f?r:Math.min(i,n)};function r(e,t,n){var f=e[0].trace,p=f.marker||{},m=p.line||{},r=n?f.visible&&f.type===n:o.traceIs(f,"bar"),e=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(r?[e]:[]);e.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),e.exit().remove(),e.each(function(e){var t=b.select(this),n=e[0],r=v(n.mlw,p.line,5,2);t.style("stroke-width",r+"px");var i=n.mcc;!_._inHover&&"mc"in n&&(void 0===(c=(l=T(p)).mid)&&(c=(l.max+l.min)/2),i=x.tryColorscale(p,"")(c));var a,o,s,l,c,u=i||n.mc||p.color,d=p.pattern,h=d&&x.getPatternAttr(d.shape,0,"");h?(a=x.getPatternAttr(d.bgcolor,0,null),o=x.getPatternAttr(d.fgcolor,0,null),s=d.fgopacity,e=S(d.size,8,10),l=S(d.solidity,.5,1),c="legend-"+f.uid,t.call(x.pattern,"legend",g,c,h,e,l,i,d.fillmode,a,o,s)):t.call(w.fill,u),r&&w.stroke(t,n.mlc||m.color)})}function n(e,t,n){var r=e[0],i=r.trace,a=n?i.visible&&i.type===n:o.traceIs(i,n),a=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(a?[e]:[]);a.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),a.exit().remove(),a.size()&&(e=(i.marker||{}).line,n=v(l(e.width,r.pts),e,5,2),(n=m.minExtend(i,{marker:{line:{width:n}}})).marker.line.color=e.color,r=m.minExtend(r,{trace:n}),s(a,r,n))}e.each(function(e){var t=b.select(this),n=m.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity);var r=_.valign,i=e[0].lineHeight,t=e[0].height;"middle"!==r&&i&&t?n.attr("transform",a(0,{top:1,bottom:-1}[r]*(.5*(i-t+3)))):n.attr("transform",null),n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);n=n.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var l,c=e[0].trace,t=[];if(c.visible)switch(c.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]],l=!0;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]],l=!0;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],l="radial";break;case"cone":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]]);break;case"streamtube":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]]);break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],l=!0;break;case"mesh3d":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]]);break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],l=!0;break;case"isosurface":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]])}e=b.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);e.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n,r,i=b.select(this),a=T(c),o=a.colorscale,s=a.reversescale;o?l||(n=o.length,r=(0===t?o[s?n-1:0]:1===t?o[s?0:n-1]:o[Math.floor((n-1)/2)])[1]):(n=c.vertexcolor||c.facecolor||c.color,r=m.isArrayOrTypedArray(n)?n[t]||n[0]:n),i.attr("d",e[0]),r?i.call(w.fill,r):i.call(function(e){var t;e.size()&&(t="legendfill-"+c.uid,x.gradient(e,g,t,k(s,"radial"===l),o,"fill"))})})}).each(function(e){var i=e[0].trace,t="waterfall"===i.type;if(e[0]._distinct&&t){var n=e[0].trace[e[0].dir].marker;return e[0].mc=n.color,e[0].mlw=n.line.width,e[0].mlc=n.line.color,r(e,this,"waterfall")}n=[];i.visible&&t&&(n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);n=b.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);n.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e){var t=b.select(this),n=i[e[0]].marker,r=v(void 0,n.line,5,2);t.attr("d",e[1]).style("stroke-width",r+"px").call(w.fill,n.color),r&&t.call(w.stroke,n.line.color)})}).each(function(e){r(e,this,"funnel")}).each(function(e){r(e,this)}).each(function(e){var n=e[0].trace,r=b.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&o.traceIs(n,"box-violin")?[e]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),r.exit().remove(),r.each(function(){var e,t=b.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==w.opacity(n.fillcolor)||0!==w.opacity((n.line||{}).color)?(e=v(void 0,n.line,5,2),t.style("stroke-width",e+"px").call(w.fill,n.fillcolor),e&&w.stroke(t,n.line.color)):(t=m.minExtend(n,{marker:{size:f?12:m.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(x.pointStyle,t,g))})}).each(function(e){n(e,this,"funnelarea")}).each(function(e){n(e,this,"pie")}).each(function(e){var t=M(e),n=t.showFill,r=t.showLine,i=t.showGradientLine,a=t.showGradientFill,o=t.anyFill,s=t.anyLine,l=e[0],c=l.trace,t=T(c),u=t.colorscale,d=t.reversescale,o=A.hasMarkers(c)||!o?"M5,0":s?"M5,-2":"M5,-3",s=b.select(this),e=s.select(".legendfill").selectAll("path").data(n||a?[e]:[]);e.enter().append("path").classed("js-fill",!0),e.exit().remove(),e.attr("d",o+"h"+p+"v6h-"+p+"z").call(n?x.fillGroupStyle:function(e){var t;e.size()&&(t="legendfill-"+c.uid,x.gradient(e,g,t,k(d),u,"fill"))}),(r||i)&&(h=v(void 0,c.line,10,5),h=m.minExtend(c,{line:{width:h}}),h=[m.minExtend(l,{trace:h})]);var h=s.select(".legendlines").selectAll("path").data(r||i?[h]:[]);h.enter().append("path").classed("js-line",!0),h.exit().remove(),h.attr("d",o+(i?"l"+p+",0.0001":"h"+p)).call(r?x.lineGroupStyle:function(e){var t;e.size()&&(t="legendline-"+c.uid,x.lineGroupStyle(e),x.gradient(e,g,t,k(d),u,"stroke"))})}).each(function(e){var t=M(e),n=t.anyFill,r=t.anyLine,i=t.showLine,t=t.showMarker,a=e[0],o=a.trace,n=!t&&!r&&!n&&A.hasText(o);function s(e,t,n,r){e=m.nestedProperty(o,e).get(),e=m.isArrayOrTypedArray(e)&&t?t(e):e;if(f&&e&&void 0!==r&&(e=r),n){if(e<n[0])return n[0];if(e>n[1])return n[1]}return e}function l(e){return a._distinct&&a.index&&e[a.index]?e[a.index]:e[0]}{var c;(t||n||i)&&(u={},d={},t&&(u.mc=s("marker.color",l),u.mx=s("marker.symbol",l),u.mo=s("marker.opacity",m.mean,[.2,1]),u.mlc=s("marker.line.color",l),u.mlw=s("marker.line.width",m.mean,[0,5],2),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"},c=s("marker.size",m.mean,[2,16],12),u.ms=c,d.marker.size=c),i&&(d.line={width:s("line.width",l,[0,10],5)}),n&&(u.tx="Aa",u.tp=s("textposition",l),u.ts=10,u.tc=s("textfont.color",l),u.tf=s("textfont.family",l)),h=[m.minExtend(a,u)],(c=m.minExtend(o,d)).selectedpoints=null,c.texttemplate=null)}var u=b.select(this).select("g.legendpoints"),d=u.selectAll("path.scatterpts").data(t?h:[]);d.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),d.exit().remove(),d.call(x.pointStyle,c,g),t&&(h[0].mrc=3);var h=u.selectAll("g.pointtext").data(n?h:[]);h.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),h.exit().remove(),h.selectAll("text").call(x.textPointStyle,c,g)}).each(function(e){var i=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&"candlestick"===i.type?[e,e]:[]);e.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=i[t?"increasing":"decreasing"],t=v(void 0,r.line,5,2);n.style("stroke-width",t+"px").call(w.fill,r.fillcolor),t&&w.stroke(n,r.line.color)})}).each(function(e){var i=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&"ohlc"===i.type?[e,e]:[]);e.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),r=i[t?"increasing":"decreasing"],t=v(void 0,r.line,5,2);n.style("fill","none").call(x.dashLine,r.line.dash,t),t&&w.stroke(n,r.line.color)})})}},{"../../lib":285,"../../registry":373,"../../traces/pie/helpers":486,"../../traces/pie/style_one":492,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale/helpers":166,"../drawing":177,"./constants":206,"@plotly/d3":20}],214:[function(e,t,n){"use strict";e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":216}],215:[function(e,t,n){"use strict";var m=e("../../registry"),r=e("../../plots/plots"),g=e("../../plots/cartesian/axis_ids"),i=e("../../fonts/ploticon"),a=e("../shapes/draw").eraseActiveShape,o=e("../../lib"),s=o._,t=t.exports={};function l(e,t){var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,a=e._fullLayout,o={},s=g.list(e,null,!0),l=a._cartesianSpikesEnabled;if("zoom"===r)for(var c,u,d,t="in"===i?.5:2,h=(1+t)/2,f=(1-t)/2,p=0;p<s.length;p++)(d=s[p]).fixedrange||(u=d._name,"auto"===i?o[u+".autorange"]=!0:"reset"===i?(void 0===d._rangeInitial?o[u+".autorange"]=!0:(c=d._rangeInitial.slice(),o[u+".range[0]"]=c[0],o[u+".range[1]"]=c[1]),void 0!==d._showSpikeInitial&&(o[u+".showspikes"]=d._showSpikeInitial,"on"!==l||d._showSpikeInitial||(l="off"))):(c=[d.r2l(d.range[0]),d.r2l(d.range[1])],o[u+".range[0]"]=d.l2r((c=[h*c[0]+f*c[1],h*c[1]+f*c[0]])[0]),o[u+".range[1]"]=d.l2r(c[1])));else"hovermode"!==r||"x"!==i&&"y"!==i||(i=a._isHoriz?"y":"x",n.setAttribute("data-val",i)),o[r]=i;a._cartesianSpikesEnabled=l,m.call("_guiRelayout",e,o)}function c(e,t){for(var n=t.currentTarget,t=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,i=e._fullLayout._subplots.gl3d||[],a={},o=t.split("."),s=0;s<i.length;s++)a[i[s]+"."+o[1]]=r;a.dragmode="pan"===r?r:"zoom",m.call("_guiRelayout",e,a)}function u(e,t){for(var t=t.currentTarget.getAttribute("data-attr"),n="resetLastSave"===t,r="resetDefault"===t,i=e._fullLayout,a=i._subplots.gl3d||[],o={},s=0;s<a.length;s++){var l,c=a[s],u=c+".camera",d=c+".aspectratio",h=c+".aspectmode",c=i[c]._scene;n?(o[u+".up"]=c.viewInitial.up,o[u+".eye"]=c.viewInitial.eye,o[u+".center"]=c.viewInitial.center,l=!0):r&&(o[u+".up"]=null,o[u+".eye"]=null,l=!(o[u+".center"]=null)),l&&(o[d+".x"]=c.viewInitial.aspectratio.x,o[d+".y"]=c.viewInitial.aspectratio.y,o[d+".z"]=c.viewInitial.aspectratio.z,o[h]=c.viewInitial.aspectmode)}m.call("_guiRelayout",e,o)}function d(e,t){var n=t.currentTarget,t=n._previousVal,r=e._fullLayout,i=r._subplots.gl3d||[],a=["xaxis","yaxis","zaxis"],o={},s={};if(t)s=t,n._previousVal=null;else{for(var l=0;l<i.length;l++){var c=i[l],u=r[c],d=c+".hovermode";o[d]=u.hovermode,s[d]=!1;for(var h=0;h<3;h++){var f=a[h],p=c+"."+f+".showspikes";s[p]=!1,o[p]=u[f].showspikes}}n._previousVal=o}return s}function h(e,t){for(var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,i=e._fullLayout,a=i._subplots.geo||[],o=0;o<a.length;o++){var s=a[o],l=i[s];"zoom"===n&&(l=l.projection.scale,m.call("_guiRelayout",e,s+".projection.scale","in"===r?2*l:.5*l))}"reset"===n&&y(e,"geo")}function f(e){e=e._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function p(e){var t=f(e);m.call("_guiRelayout",e,"hovermode",t)}function _(e,t){for(var n=t.currentTarget.getAttribute("data-val"),r=e._fullLayout,i=r._subplots.mapbox||[],a={},o=0;o<i.length;o++){var s=i[o],l=r[s].zoom;a[s+".zoom"]="in"===n?1.05*l:l/1.05}m.call("_guiRelayout",e,a)}function y(e,t){for(var n=e._fullLayout,r=n._subplots[t]||[],i={},a=0;a<r.length;a++)for(var o=r[a],s=n[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];i[o+"."+u]=s[u]}m.call("_guiRelayout",e,i)}t.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return s(e,"png"===t?"Download plot as a png":"Download plot")},icon:i.camera,click:function(t){var n=t._context.toImageButtonOptions,r={format:n.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&o.isIE()&&(o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(e){e in n&&(r[e]=n[e])}),m.call("downloadImage",t,r).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.disk,click:function(e){r.sendDataToCloud(e)}},t.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.pencil,click:function(e){r.sendDataToCloud(e)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:i.zoombox,click:l},t.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:i.pan,click:l},t.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:i.selectbox,click:l},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:i.lasso,click:l},t.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:i.drawclosedpath,click:l},t.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:i.drawopenpath,click:l},t.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:i.drawline,click:l},t.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:i.drawrect,click:l},t.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:i.drawcircle,click:l},t.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:i.eraseshape,click:a},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:l},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:l},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:i.autoscale,click:l},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:i.home,click:l},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:l},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:i.tooltip_compare,gravity:"ne",click:l},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:i.zoombox,click:c},t.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:i.pan,click:c},t.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:i["3d_rotate"],click:c},t.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:i["z-axis"],click:c},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:i.home,click:u},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:i.movie,click:u},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);m.call("_guiRelayout",e,t)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:h},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:h},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:i.autoscale,click:h},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:p},t.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:i.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var r=e._fullData[n]._viewInitial;t["node.groups"].push(r.node.groups.slice()),t["node.x"].push(r.node.x.slice()),t["node.y"].push(r.node.y.slice())}m.call("restyle",e,t)}},t.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);t.hovermode=f(e),m.call("_guiRelayout",e,t)}},t.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:i.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(e,t),n.setAttribute("data-attr","resetLastSave"),u(e,t),y(e,"geo"),y(e,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:i.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",m.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=g.list(e,null,!0),r={},i=0;i<n.length;i++){var a=n[i];r[a._name+".showspikes"]=t||a._showSpikeInitial}return r}(e))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:i.home,click:function(e){y(e,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:_},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:_}},{"../../fonts/ploticon":268,"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../shapes/draw":239}],216:[function(e,t,n){"use strict";var r=e("./buttons"),i=Object.keys(r),e=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],a=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(e),o=[];i.forEach(function(e){var t;t=r[e],-1===a.indexOf(t._cat||t.name)&&(e=t.name,t=(t._cat||t.name).toLowerCase(),-1===o.indexOf(e)&&o.push(e),-1===o.indexOf(t)&&o.push(t))}),o.sort(),t.exports={DRAW_MODES:e,backButtons:a,foreButtons:o}},{"./buttons":215}],217:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("../color"),s=e("../../plot_api/plot_template"),l=e("./attributes");t.exports=function(e,t){var n=e.modebar||{},r=s.newContainer(t,"modebar");function i(e,t){return a.coerce(n,r,l,e,t)}i("orientation"),i("bgcolor",o.addOpacity(t.paper_bgcolor,.5));e=o.contrast(o.rgb(t.modebar.bgcolor));i("color",o.addOpacity(e,.3)),i("activecolor",o.addOpacity(e,.7)),i("uirevision",t.uirevision),i("add"),i("remove")}},{"../../lib":285,"../../plot_api/plot_template":320,"../color":155,"./attributes":214}],218:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":214,"./defaults":217,"./manage":219}],219:[function(e,t,n){"use strict";var C=e("../../plots/cartesian/axis_ids"),L=e("../../traces/scatter/subtypes"),D=e("../../registry"),O=e("../fx/helpers").isUnifiedHover,a=e("./modebar"),P=e("./buttons"),R=e("./constants").DRAW_MODES;t.exports=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i=n.modeBarButtons,n=Array.isArray(i)&&i.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===P[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=P[i]}}return e}(i):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,r=e._context;function i(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return 1}else{var n=t.name,t=t._cat||t.name;if(n===e||t===e.toLowerCase())return 1}}var a=t.modebar.add;"string"==typeof a&&(a=[a]);var o=t.modebar.remove;"string"==typeof o&&(o=[o]);var s=r.modeBarButtonsToAdd.concat(a.filter(function(e){for(var t=0;t<r.modeBarButtonsToRemove.length;t++)if(i(e,r.modeBarButtonsToRemove[t]))return!1;return!0})),u=r.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<r.modeBarButtonsToAdd.length;t++)if(i(e,r.modeBarButtonsToAdd[t]))return!1;return!0})),l=t._has("cartesian"),c=t._has("gl3d"),d=t._has("geo"),h=t._has("pie"),f=t._has("funnelarea"),p=t._has("gl2d"),m=t._has("ternary"),g=t._has("mapbox"),_=t._has("polar"),y=t._has("sankey"),v=function(e){for(var t=C.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),e=O(t.hovermode),b=[];function x(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i=P[r],a=i.name.toLowerCase(),o=(i._cat||i.name).toLowerCase(),s=!1,l=0;l<u.length;l++){var c=u[l].toLowerCase();if(c===a||c===o){s=!0;break}}s||t.push(P[r])}b.push(t)}}a=["toImage"];r.showEditInChartStudio?a.push("editInChartStudio"):r.showSendToCloud&&a.push("sendDataToCloud");x(a);var o=[],w=[],a=[],T=[];1<(l||p||h||f||m)+d+c+g+_?(w=["toggleHover"],a=["resetViews"]):d?(o=["zoomInGeo","zoomOutGeo"],w=["hoverClosestGeo"],a=["resetGeo"]):c?(w=["hoverClosest3d"],a=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(o=["zoomInMapbox","zoomOutMapbox"],w=["toggleHover"],a=["resetViewMapbox"]):p?w=["hoverClosestGl2d"]:h?w=["hoverClosestPie"]:y?(w=["hoverClosestCartesian","hoverCompareCartesian"],a=["resetViewSankey"]):w=["toggleHover"];l&&(w=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(e){for(var t=0;t<e.length;t++)if(!D.traceIs(e[t],"noHover"))return!1;return!0}(n)||e)&&(w=[]);!l&&!p||v||(o=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==a[0]&&(a=["resetScale2d"]));c?T=["zoom3d","pan3d","orbitRotation","tableRotation"]:(l||p)&&!v||m?T=["zoom2d","pan2d"]:g||d?T=["pan2d"]:_&&(T=["zoom2d"]);!function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(D.traceIs(r,"scatter-like")?(L.hasMarkers(r)||L.hasText(r))&&(t=!0):D.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(n)||T.push("select2d","lasso2d");function A(e){-1===k.indexOf(e)&&-1!==w.indexOf(e)&&k.push(e)}var k=[];if(Array.isArray(s)){for(var M=[],S=0;S<s.length;S++){var E=s[S];"string"==typeof E?(E=E.toLowerCase(),-1!==R.indexOf(E)?(t._has("mapbox")||t._has("cartesian"))&&T.push(E):"togglespikelines"===E?A("toggleSpikelines"):"togglehover"===E?A("toggleHover"):"hovercompare"===E?A("hoverCompareCartesian"):"hoverclosest"===E?(A("hoverClosestCartesian"),A("hoverClosestGeo"),A("hoverClosest3d"),A("hoverClosestGl2d"),A("hoverClosestPie")):"v1hovermode"===E&&(A("toggleHover"),A("hoverClosestCartesian"),A("hoverCompareCartesian"),A("hoverClosestGeo"),A("hoverClosest3d"),A("hoverClosestGl2d"),A("hoverClosestPie"))):M.push(E)}s=M}return x(T),x(o.concat(a)),x(k),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(b,s)}(e);r?r.update(e,n):t._modeBar=a(e,n)}else r&&(r.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":335,"../../registry":373,"../../traces/scatter/subtypes":519,"../fx/helpers":191,"./buttons":215,"./constants":216,"./modebar":220}],220:[function(e,t,n){"use strict";var o=e("@plotly/d3"),i=e("fast-isnumeric"),s=e("../../lib"),a=e("../../fonts/ploticon"),l=new DOMParser;function r(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}e=r.prototype;e.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var a=r.modebar,e="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(i),s.addRelatedStyleRule(i,e+"#"+i+" .modebar-group","background-color: "+a.bgcolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);e=!this.hasButtons(t),i=this.hasLogo!==n.displaylogo,a=this.locale!==n.locale;this.locale=n.locale,(e||i||a)&&(this.removeAllButtons(),this.updateButtons(t),(n.watermark||n.displaylogo)&&(t=this.getLogo(),n.watermark&&(t.className=t.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(t,this.element.childNodes[0]):this.element.appendChild(t),this.hasLogo=!0)),this.updateActiveButton()},e.updateButtons=function(e){var r=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=r.createGroup();e.forEach(function(e){var t=e.name;if(!t)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(t))throw new Error("button name '"+t+"' is taken");r.buttonsNames.push(t);e=r.createButton(e);r.buttonElements.push(e),n.appendChild(e)}),r.element.appendChild(n)})},e.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},e.createButton=function(t){var n=this,e=document.createElement("a");e.setAttribute("rel","tooltip"),e.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),!r&&0!==r||e.setAttribute("data-title",r),void 0!==t.attr&&e.setAttribute("data-attr",t.attr);r=t.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),e.setAttribute("data-val",r)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");e.addEventListener("click",function(e){t.click(n.graphInfo,e),n.updateActiveButton(e.currentTarget)}),e.setAttribute("data-toggle",t.toggle||!1),t.toggle&&o.select(e).classed("active",!0);r=t.icon;return"function"==typeof r?e.appendChild(r()):e.appendChild(this.createIcon(r||a.question)),e.setAttribute("data-gravity",t.gravity||"n"),e},e.createIcon=function(e){var t,n=i(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";return e.path&&((t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon"),(r=document.createElementNS(r,"path")).setAttribute("d",e.path),e.transform?r.setAttribute("transform",e.transform):void 0!==e.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(r)),(t=e.svg?l.parseFromString(e.svg,"application/xml").childNodes[0]:t).setAttribute("height","1em"),t.setAttribute("width","1em"),t},e.updateActiveButton=function(e){var i=this.graphInfo._fullLayout,a=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||!0,n=e.getAttribute("data-attr"),r="true"===e.getAttribute("data-toggle"),e=o.select(e);r?n===a&&e.classed("active",!e.classed("active")):(n=null===n?n:s.nestedProperty(i,n).get(),e.classed("active",n===t))})},e.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},e.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(a.newplotlylogo)),e.appendChild(t),e},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,t=new r({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&o.select(t.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),t}},{"../../fonts/ploticon":268,"../../lib":285,"@plotly/d3":20,"fast-isnumeric":31}],221:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),e=(0,e("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:e,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../color/attributes":154}],222:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],223:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../color"),u=e("../../plot_api/plot_template"),d=e("../../plots/array_container_defaults"),h=e("./attributes"),f=e("./constants");function p(n,r,e,t){var i=t.calendar;function a(e,t){return l.coerce(n,r,h.buttons,e,t)}a("visible")&&("all"!==(t=a("step"))&&(!i||"gregorian"===i||"month"!==t&&"year"!==t?a("stepmode"):r.stepmode="backward",a("count")),a("label"))}t.exports=function(e,t,n,r,i){var a=e.rangeselector||{},o=u.newContainer(t,"rangeselector");function s(e,t){return l.coerce(a,o,h,e,t)}s("visible",0<d(a,o,{name:"buttons",handleItemDefaults:p,calendar:i}).length)&&(s("x",(r=function(t,n,e){for(var r=e.filter(function(e){return n[e].anchor===t._id}),i=0,a=0;a<r.length;a++){var o=n[r[a]].domain;o&&(i=Math.max(o[1],i))}return[t.domain[0],i+f.yPad]}(t,n,r))[0]),s("y",r[1]),l.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),l.coerceFont(s,"font",n.font),n=s("bgcolor"),s("activecolor",c.contrast(n,f.lightAmount,f.darkAmount)),s("bordercolor"),s("borderwidth"))}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/array_container_defaults":326,"../color":155,"./attributes":221,"./constants":222}],224:[function(e,t,n){"use strict";var d=e("@plotly/d3"),o=e("../../registry"),h=e("../../plots/plots"),r=e("../color"),f=e("../drawing"),p=e("../../lib"),m=p.strTranslate,g=e("../../lib/svg_text_utils"),s=e("../../plots/cartesian/axis_ids"),i=e("../../constants/alignment"),_=i.LINE_SPACING,y=i.FROM_TL,v=i.FROM_BR,b=e("./constants"),l=e("./get_update_object");function c(e){return e._id}function u(e,t,n){e=p.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});e.attr({rx:b.rx,ry:b.ry}),e.call(r.stroke,t.bordercolor).call(r.fill,(e=t,(n=n)._isActive||n._isHovered?e.activecolor:e.bgcolor)).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){p.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")}).call(f.font,t.font).text(function(e,t){if(e.label)return t?p.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,r._fullLayout._meta)).call(function(e){g.convertToTspans(e,r)})}t.exports=function(a){var e=a._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=s.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(a),c);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var t=d.select(this),r=e,i=r.rangeselector,e=t.selectAll("g.button").data(p.filterVisible(i.buttons));e.enter().append("g").classed("button",!0),e.exit().remove(),e.each(function(e){var t=d.select(this),n=l(r,e);e._isActive=function(e,t,n){{if("all"===t.step)return!0===e.autorange;t=Object.keys(n);return e.range[0]===n[t[0]]&&e.range[1]===n[t[1]]}}(r,e,n),t.call(u,i,e),t.call(x,i,e,a),t.on("click",function(){a._dragged||o.call("_guiRelayout",a,n)}),t.on("mouseover",function(){e._isHovered=!0,t.call(u,i,e)}),t.on("mouseout",function(){e._isHovered=!1,t.call(u,i,e)})}),function(e,t,o,n,r){var s=0,l=0,c=o.borderwidth;t.each(function(){var e=d.select(this).select(".selector-text"),t=o.font.size*_,e=Math.max(t*g.lineCount(e),16)+3;l=Math.max(l,e)}),t.each(function(){var e=d.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),r=n.node()&&f.bBox(n.node()).width,i=o.font.size*_,a=g.lineCount(n),r=Math.max(r+10,b.minButtonWidth);e.attr("transform",m(c+s,c)),t.attr({x:0,y:0,width:r,height:l}),g.positionText(n,r/2,l/2-(a-1)*i/2+3),s+=r+5});var i=e._fullLayout._size,a=i.l+i.w*o.x,u=i.t+i.h*(1-o.y),t="left";p.isRightAnchor(o)&&(a-=s,t="right");p.isCenterAnchor(o)&&(a-=s/2,t="center");i="top";p.isBottomAnchor(o)&&(u-=l,i="bottom");p.isMiddleAnchor(o)&&(u-=l/2,i="middle");s=Math.ceil(s),l=Math.ceil(l),a=Math.round(a),u=Math.round(u),h.autoMargin(e,n+"-range-selector",{x:o.x,y:o.y,l:s*y[t],r:s*v[t],b:l*v[i],t:l*y[i]}),r.attr("transform",m(a,u))}(a,e,i,r._name,t)})}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"./constants":222,"./get_update_object":225,"@plotly/d3":20}],225:[function(e,t,n){"use strict";var l=e("@plotly/d3");t.exports=function(e,t){var n=e._name,r={};return"all"===t.step?r[n+".autorange"]=!0:(t=function(e,t){var n,r=e.range,i=new Date(e.r2l(r[1])),a=t.step,o=t.count;switch(t.stepmode){case"backward":n=e.l2r(+l.time[a].utc.offset(i,-o));break;case"todate":var s=l.time[a].utc.offset(i,-o);n=e.l2r(+l.time[a].utc.ceil(s))}r=r[1];return[n,r]}(e,t),r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]),r}},{"@plotly/d3":20}],226:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":221,"./defaults":223,"./draw":224}],227:[function(e,t,n){"use strict";e=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:e.background,editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":154}],228:[function(e,t,n){"use strict";var a=e("../../plots/cartesian/axis_ids").list,o=e("../../plots/cartesian/autorange").getAutoRange,s=e("./constants");t.exports=function(e){for(var t=a(e,"x",!0),n=0;n<t.length;n++){var r=t[n],i=r[s.name];i&&i.visible&&i.autorange&&(i._input.autorange=!0,i._input.range=i.range=o(e,r))}}},{"../../plots/cartesian/autorange":330,"../../plots/cartesian/axis_ids":335,"./constants":229}],229:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],230:[function(e,t,n){"use strict";var p=e("../../lib"),m=e("../../plot_api/plot_template"),g=e("../../plots/cartesian/axis_ids"),_=e("./attributes"),y=e("./oppaxis_attributes");t.exports=function(e,t,n){var r=e[n],e=t[n];if(r.rangeslider||t._requestRangeslider[e._id]){p.isPlainObject(r.rangeslider)||(r.rangeslider={});var i=r.rangeslider,a=m.newContainer(e,"rangeslider");if(h("visible")){h("bgcolor",t.plot_bgcolor),h("bordercolor"),h("borderwidth"),h("thickness"),h("autorange",!e.isValidRange(i.range)),h("range");e=t._subplots;if(e)for(var e=e.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===g.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),o=p.simpleMap(e,g.id2name),s=0;s<o.length;s++){var l,c=o[s],u=i[c]||{},d=m.newContainer(a,c,"yaxis"),c=t[c];"match"!==f("rangemode",l=u.range&&c.isValidRange(u.range)?"fixed":l)&&f("range",c.range.slice())}a._input=i}}function h(e,t){return p.coerce(i,a,_,e,t)}function f(e,t){return p.coerce(u,d,y,e,t)}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_ids":335,"./attributes":227,"./oppaxis_attributes":234}],231:[function(e,t,n){"use strict";var S=e("@plotly/d3"),E=e("../../registry"),h=e("../../plots/plots"),C=e("../../lib"),L=C.strTranslate,o=e("../drawing"),l=e("../color"),D=e("../titles"),f=e("../../plots/cartesian"),O=e("../../plots/cartesian/axis_ids"),P=e("../dragelement"),R=e("../../lib/setcursor"),I=e("./constants");function N(e,t,n,r){var i=C.ensureSingle(e,"rect",I.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,e=-r._offsetShift,t=o.crispRound(t,r.borderwidth);i.attr({width:r._width+a,height:r._height+a,transform:L(e,e),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":t})}function z(e,t,n,r){t=t._fullLayout;C.ensureSingleById(t._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function F(e,s,l,c){var u,d=s.calcdata,e=e.selectAll("g."+I.rangePlotClassName).data(l._subplotsWith,C.identity);e.enter().append("g").attr("class",function(e){return I.rangePlotClassName+" "+e}).call(o.setClipUrl,c._clipId,s),e.order(),e.exit().remove(),e.each(function(e,t){var n=S.select(this),r=0===t,i=O.getFromId(s,e,"y"),a=i._name,o=c[a],t={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:c.range.slice(),calendar:l.calendar},width:c._width,height:c._height,margin:{t:0,b:0,l:0,r:0}},_context:s._context};l.rangebreaks&&(t.layout.xaxis.rangebreaks=l.rangebreaks),t.layout[a]={type:i.type,domain:[0,1],range:("match"!==o.rangemode?o:i).range.slice(),calendar:i.calendar},i.rangebreaks&&(t.layout[a].rangebreaks=i.rangebreaks),h.supplyDefaults(t);i=t._fullLayout.xaxis,a=t._fullLayout[a];i.clearCalc(),i.setScale(),a.clearCalc(),a.setScale();a={id:e,plotgroup:n,xaxis:i,yaxis:a,isRangePlot:!0};r?u=a:(a.mainplot="xy",a.mainplotinfo=u),f.rangePlot(s,a,function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i[0].trace;a.xaxis+a.yaxis===t&&n.push(i)}return n}(d,e))})}function j(e,t,n,r,i){C.ensureSingle(e,"rect",I.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,I.maskColor),C.ensureSingle(e,"rect",I.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,I.maskColor),"match"!==i.rangemode&&(C.ensureSingle(e,"rect",I.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,I.maskOppAxisColor),C.ensureSingle(e,"rect",I.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",I.maskOppBorder).call(l.fill,I.maskOppAxisColor))}function B(e,t,n,r){t._context.staticPlot||C.ensureSingle(e,"rect",I.slideBoxClassName,function(e){e.attr({y:0,cursor:I.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:I.slideBoxFill})}function H(e,t,n,r){var i=C.ensureSingle(e,"g",I.grabberMinClassName),a=C.ensureSingle(e,"g",I.grabberMaxClassName),o={x:0,width:I.handleWidth,rx:I.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":I.handleStrokeWidth,"shape-rendering":"crispEdges"},e={y:Math.round(r._height/4),height:Math.round(r._height/2)};C.ensureSingle(i,"rect",I.handleMinClassName,function(e){e.attr(o)}).attr(e),C.ensureSingle(a,"rect",I.handleMaxClassName,function(e){e.attr(o)}).attr(e);var s={width:I.grabAreaWidth,x:0,y:0,fill:I.grabAreaFill,cursor:t._context.staticPlot?void 0:I.grabAreaCursor};C.ensureSingle(i,"rect",I.grabAreaMinClassName,function(e){e.attr(s)}).attr("height",r._height),C.ensureSingle(a,"rect",I.grabAreaMaxClassName,function(e){e.attr(s)}).attr("height",r._height)}t.exports=function(k){for(var M=k._fullLayout,e=M._rangeSliderData,t=0;t<e.length;t++){var n=e[t][I.name];n._clipId=n._id+"-"+M._uid}var r=M._infolayer.selectAll("g."+I.containerClassName).data(e,function(e){return e._name});r.exit().each(function(e){e=e[I.name];M._topdefs.select("#"+e._clipId).remove()}).remove(),0!==e.length&&(r.enter().append("g").classed(I.containerClassName,!0).attr("pointer-events","all"),r.each(function(e){var t=S.select(this),n=e[I.name],r=M[O.id2name(e.anchor)],i=n[O.id2name(e.anchor)];n.range&&(o=C.simpleMap(n.range,e.r2l),o=(a=C.simpleMap(e.range,e.r2l))[0]<a[1]?[Math.min(o[0],a[0]),Math.max(o[1],a[1])]:[Math.max(o[0],a[0]),Math.min(o[1],a[1])],n.range=n._input.range=C.simpleMap(o,e.l2r)),e.cleanRange("rangeslider.range");var a=M._size,o=e.domain;n._width=a.w*(o[1]-o[0]);o=Math.round(a.l+a.w*o[0]),a=Math.round(a.t+a.h*(1-e._counterDomainMin)+("bottom"===e.side?e._depth:0)+n._offsetShift+I.extraPad);t.attr("transform",L(o,a)),n._rl=C.simpleMap(n.range,e.r2l);var s,l,c,_,y,v,b,x,w,u=n._rl[0],o=n._rl[1],d=o-u;if(n.p2d=function(e){return e/n._width*d+u},n.d2p=function(e){return(e-u)/d*n._width},e.rangebreaks){var h=e.locateBreaks(u,o);if(h.length){for(var f,p=0,m=0;m<h.length;m++)p+=(f=h[m]).max-f.min;var g=n._width/(o-u-p),T=[-g*u];for(m=0;m<h.length;m++)f=h[m],T.push(T[T.length-1]-g*(f.max-f.min));for(n.d2p=function(e){for(var t=T[0],n=0;n<h.length;n++){var r=h[n];if(e>=r.max)t=T[n+1];else if(e<r.min)break}return t+g*e},m=0;m<h.length;m++)(f=h[m]).pmin=n.d2p(f.min),f.pmax=n.d2p(f.max);n.p2d=function(e){for(var t=T[0],n=0;n<h.length;n++){var r=h[n];if(e>=r.pmax)t=T[n+1];else if(e<r.pmin)break}return(e-t)/g}}}function A(){var e=S.event,d=e.target,h=e.clientX||e.touches[0].clientX,f=h-c.node().getBoundingClientRect().left,p=v.d2p(y._rl[0]),m=v.d2p(y._rl[1]),g=P.coverSlip();function t(e){var t,n,r,i,a,o,s,l,c=+(e.clientX||e.touches[0].clientX)-h;switch(d){case b:t="ew-resize",r=p+c,n=m+c;break;case x:t="col-resize",r=p+c,n=m;break;case w:t="col-resize",r=p,n=m+c;break;default:t="ew-resize",n=(r=f)+c}function u(e){return a.l2r(C.constrain(e,o._rl[0],o._rl[1]))}n<r&&(e=n,n=r,r=e),v._pixelMin=r,v._pixelMax=n,R(S.select(g),t),i=_,a=y,s=u((o=v).p2d(o._pixelMin)),l=u(o.p2d(o._pixelMax)),window.requestAnimationFrame(function(){E.call("_guiRelayout",i,a._name+".range",[s,l])})}function n(){g.removeEventListener("mousemove",t),g.removeEventListener("mouseup",n),this.removeEventListener("touchmove",t),this.removeEventListener("touchend",n),C.removeElement(g)}this.addEventListener("touchmove",t),this.addEventListener("touchend",n),g.addEventListener("mousemove",t),g.addEventListener("mouseup",n)}"match"!==i.rangemode&&(s=r.r2l(i.range[0]),l=r.r2l(i.range[1])-s,n.d2pOppAxis=function(e){return(e-s)/l*n._height}),t.call(N,k,e,n).call(z,k,e,n).call(F,k,e,n).call(j,k,e,n,i).call(B,k,e,n).call(H,k,e,n),c=t,y=e,v=n,(_=k)._context.staticPlot||(b=c.select("rect."+I.slideBoxClassName).node(),x=c.select("rect."+I.grabAreaMinClassName).node(),w=c.select("rect."+I.grabAreaMaxClassName).node(),c.on("mousedown",A),c.on("touchstart",A)),function(e,t,n,r,i){var a=I.handleWidth/2;function o(e){return C.constrain(e,0,n._width)}function s(e){return C.constrain(e,0,n._height)}function l(e){return C.constrain(e,-a,n._width+a)}var c=o(n.d2p(t._rl[0])),t=o(n.d2p(t._rl[1]));e.select("rect."+I.slideBoxClassName).attr("x",c).attr("width",t-c),e.select("rect."+I.maskMinClassName).attr("width",c),e.select("rect."+I.maskMaxClassName).attr("x",t).attr("width",n._width-t),"match"!==i.rangemode&&(i=n._height-s(n.d2pOppAxis(r._rl[1])),r=n._height-s(n.d2pOppAxis(r._rl[0])),e.select("rect."+I.maskMinOppAxisClassName).attr("x",c).attr("height",i).attr("width",t-c),e.select("rect."+I.maskMaxOppAxisClassName).attr("x",c).attr("y",r).attr("height",n._height-r).attr("width",t-c),e.select("rect."+I.slideBoxClassName).attr("y",i).attr("height",r-i));c=Math.round(l(c-a))-.5,t=Math.round(l(t-a))+.5;e.select("g."+I.grabberMinClassName).attr("transform",L(c,.5)),e.select("g."+I.grabberMaxClassName).attr("transform",L(t,.5))}(t,e,n,r,i),"bottom"===e.side&&D.draw(k,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:M._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:a+n._height+n._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":285,"../../lib/setcursor":305,"../../plots/cartesian":345,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":229,"@plotly/d3":20}],232:[function(e,t,n){"use strict";var s=e("../../plots/cartesian/axis_ids"),o=e("../../lib/svg_text_utils"),l=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,u=l.name;function d(e){e=e&&e[u];return e&&e.visible}n.isVisible=d,n.makeData=function(e){var t=s.list({_fullLayout:e},"x",!0),n=e.margin,r=[];if(!e._has("gl2d"))for(var i=0;i<t.length;i++){var a,o=t[i];d(o)&&(r.push(o),(a=o[u])._id=u+o._id,a._height=(e.height-n.b-n.t)*a.thickness,a._offsetShift=Math.floor(a.borderwidth/2))}e._rangeSliderData=r},n.autoMarginOpts=function(e,t){var n=e._fullLayout,r=t[u],i=t._id.charAt(0),a=0,e=0;return"bottom"===t.side&&(a=t._depth,t.title.text!==n._dfltTitle[i]&&(e=1.5*t.title.font.size+10+r._offsetShift,e+=(t.title.text.match(o.BR_TAG_ALL)||[]).length*t.title.font.size*c)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(n.margin.b,e),pad:l.extraPad+2*r._offsetShift}}},{"../../constants/alignment":260,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"./constants":229}],233:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),a=e("./oppaxis_attributes"),o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:a})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":285,"./attributes":227,"./calc_autorange":228,"./defaults":230,"./draw":231,"./helpers":232,"./oppaxis_attributes":234}],234:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],235:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../traces/scatter/attributes").line,a=e("../drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},i.color,{editType:"arraydraw"}),width:o({},i.width,{editType:"calc+arraydraw"}),dash:o({},a,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../traces/scatter/attributes":494,"../annotations/attributes":138,"../drawing/attributes":176}],236:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),h=e("./constants"),f=e("./helpers");function p(e,t,n,r,i,a){var o=e/2,e=a;if("pixel"!==t)return{ppad:o};n=i?f.extractPathCoords(i,a?h.paramIsY:h.paramIsX):[n,r],r=u.aggNums(Math.max,null,n),n=u.aggNums(Math.min,null,n),n=n<0?Math.abs(n)+o:o,r=0<r?r+o:o;return{ppad:o,ppadplus:e?n:r,ppadminus:e?r:n}}function m(e,t,n,r,i){var a="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[a(t),a(n)];if(r){var o,s,l,c=1/0,u=-1/0,d=r.match(h.segmentRE);for("date"===e.type&&(a=f.decodeDate(a)),o=0;o<d.length;o++)void 0!==(l=i[d[o].charAt(0)].drawn)&&(!(s=d[o].substr(1).match(h.paramRE))||s.length<l||((l=a(s[l]))<c&&(c=l),u<l&&(u=l)));return c<=u?[c,u]:void 0}}t.exports=function(e){var t=e._fullLayout,n=u.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var i=n[r];i._extremes={};var a,o,s,l=d.getRefType(i.xref),c=d.getRefType(i.yref);"paper"!==i.xref&&"domain"!==l&&(o="pixel"===i.xsizemode?i.xanchor:i.x0,s="pixel"===i.xsizemode?i.xanchor:i.x1,(o=m(a=d.getFromId(e,i.xref),o,s,i.path,h.paramIsX))&&(i._extremes[a._id]=d.findExtremes(a,o,p(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)))),"paper"!==i.yref&&"domain"!==c&&(s="pixel"===i.ysizemode?i.yanchor:i.y0,c="pixel"===i.ysizemode?i.yanchor:i.y1,(o=m(a=d.getFromId(e,i.yref),s,c,i.path,h.paramIsY))&&(i._extremes[a._id]=d.findExtremes(a,o,p(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0))))}}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":237,"./helpers":246}],237:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],238:[function(e,t,n){"use strict";var b=e("../../lib"),x=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),w=e("./attributes"),T=e("./helpers");function i(n,r,e){function t(e,t){return b.coerce(n,r,w,e,t)}if(t("visible")){var i=t("path"),a=t("type",i?"path":"rect");"path"!==r.type&&delete r.path,t("editable"),t("layer"),t("opacity"),t("fillcolor"),t("fillrule"),t("line.width")&&(t("line.color"),t("line.dash"));for(var o=t("xsizemode"),s=t("ysizemode"),l=["x","y"],c=0;c<2;c++){var u,d,h,f,p=l[c],m=p+"anchor",g="x"===p?o:s,_={_fullLayout:e},y=x.coerceRef(n,r,_,p,void 0,"paper"),v="range"===x.getRefType(y)?((h=x.getFromId(_,y))._shapeIndices.push(r._index),u=T.rangeToShapePosition(h),T.shapePositionToRange(h)):u=b.identity;"path"!==a&&(f=n[d=p+"0"],p=n[h=p+"1"],n[d]=v(n[d],!0),n[h]=v(n[h],!0),"pixel"===g?(t(d,0),t(h,10)):(x.coercePosition(r,_,t,y,d,.25),x.coercePosition(r,_,t,y,h,.75)),r[d]=u(r[d]),r[h]=u(r[h]),n[d]=f,n[h]=p),"pixel"===g&&(g=n[m],n[m]=v(n[m],!0),x.coercePosition(r,_,t,y,m,.25),r[m]=u(r[m]),n[m]=g)}"path"===a?t("path"):b.noneOrAll(n,r,["x0","x1","y0","y1"])}}t.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:i})}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":235,"./helpers":246}],239:[function(e,t,n){"use strict";var re=e("../../registry"),ie=e("../../lib"),ae=e("../../plots/cartesian/axes"),oe=e("./draw_newshape/helpers").readPaths,se=e("./draw_newshape/display_outlines"),a=e("../../plots/cartesian/handle_outline").clearOutlineControllers,le=e("../color"),ce=e("../drawing"),ue=e("../../plot_api/plot_template").arrayEditor,de=e("../dragelement"),he=e("../../lib/setcursor"),fe=e("./constants"),pe=e("./helpers");function me(e){var t,n=e._fullLayout;for(t in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._plots){var r=n._plots[t].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<n.shapes.length;i++)n.shapes[i].visible&&o(e,i)}function ge(e){return e._fullLayout._drawing}function _e(e){return!e._context.edits.shapePosition}function o(K,ee){K._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+ee+'"]').remove();var e=pe.makeOptionsAndPlotinfo(K,ee),te=e.options,ne=e.plotinfo;function t(e){var t=ve(K,te),n={"data-index":ee,"fill-rule":te.fillrule,d:t},r=te.opacity,i=te.fillcolor,a=te.line.width?te.line.color:"rgba(0,0,0,0)",o=te.line.width,s=te.line.dash;o||!0!==te.editable||(o=5,s="solid");var l="Z"!==t[t.length-1],c=_e(K)&&te.editable&&K._fullLayout._activeShapeIndex===ee;c&&(i=l?"rgba(0,0,0,0)":K._fullLayout.activeshape.fillcolor,r=K._fullLayout.activeshape.opacity);var u,d,h,f,p,m,g,_,y,v,b,x,w,T,A,k,M,S,E,C,L,D,O,P,R,I,N,z,F,j,B,H,U,V,q,Y,G,W=e.append("path").attr(n).style("opacity",r).call(le.stroke,a).call(le.fill,i).call(ce.dashLine,s,o);function X(e){var t,n,r,i;D=ge(u)?null:N?"path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point":(t=(r=G.element.getBoundingClientRect()).right-r.left,i=r.bottom-r.top,n=e.clientX-r.left,r=e.clientY-r.top,i=!z&&O<t&&P<i&&!e.shiftKey?de.getCursor(n/t,1-r/i):"move",he(d,i),i.split("-")[0])}function Z(t,n){var e,r;"path"===h.type?(r=e=function(e){return e},R?F("xanchor",h.xanchor=q(b+t)):(e=function(e){return q(U(e)+t)},j&&"date"===j.type&&(e=pe.encodeDate(e))),I?F("yanchor",h.yanchor=Y(x+n)):(r=function(e){return Y(V(e)+n)},B&&"date"===B.type&&(r=pe.encodeDate(r))),F("path",h.path=be(L,e,r))):(R?F("xanchor",h.xanchor=q(b+t)):(F("x0",h.x0=q(g+t)),F("x1",h.x1=q(y+t))),I?F("yanchor",h.yanchor=Y(x+n)):(F("y0",h.y0=Y(_+n)),F("y1",h.y1=Y(v+n)))),d.attr("d",ve(u,h)),$(p,h)}function J(t,n){var e,r,i,a,o,s;z?(e=a=function(e){return e},R?F("xanchor",h.xanchor=q(b+t)):(a=function(e){return q(U(e)+t)},j&&"date"===j.type&&(a=pe.encodeDate(a))),I?F("yanchor",h.yanchor=Y(x+n)):(e=function(e){return Y(V(e)+n)},B&&"date"===B.type&&(e=pe.encodeDate(e))),F("path",h.path=be(L,a,e))):N?"resize-over-start-point"===D?(r=g+t,o=I?_-n:_+n,F("x0",h.x0=R?r:q(r)),F("y0",h.y0=I?o:Y(o))):"resize-over-end-point"===D&&(s=y+t,i=I?v-n:v+n,F("x1",h.x1=R?s:q(s)),F("y1",h.y1=I?i:Y(i))):(e=(a=function(e){return-1!==D.indexOf(e)})("n"),r=a("s"),o=a("w"),s=a("e"),i=e?w+n:w,a=r?T+n:T,o=o?A+t:A,s=s?k+t:k,I&&(e&&(i=w-n),r&&(a=T-n)),(!I&&P<a-i||I&&P<i-a)&&(F(M,h[M]=I?i:Y(i)),F(S,h[S]=I?a:Y(a))),O<s-o&&(F(E,h[E]=R?o:q(o)),F(C,h[C]=R?s:q(s)))),d.attr("d",ve(u,h)),$(p,h)}function $(i,a){(R||I)&&function(){var e="path"!==a.type,t=i.selectAll(".visual-cue").data([0]);t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var n=U(R?a.xanchor:ie.midRange(e?[a.x0,a.x1]:pe.extractPathCoords(a.path,fe.paramIsX))),e=V(I?a.yanchor:ie.midRange(e?[a.y0,a.y1]:pe.extractPathCoords(a.path,fe.paramIsY)));{var r;n=pe.roundPositionForSharpStrokeRendering(n,1),e=pe.roundPositionForSharpStrokeRendering(e,1),R&&I?(r="M"+(n-1-1)+","+(e-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",t.attr("d",r)):R?(r="M"+(n-1-1)+","+(e-9-1)+"v18 h2 v-18 Z",t.attr("d",r)):(e="M"+(n-9-1)+","+(e-1-1)+"h18 v2 h-18 Z",t.attr("d",e))}}()}function Q(e){e.selectAll(".visual-cue").remove()}ye(W,K,te),(c||K._context.edits.shapePosition)&&(H=ue(K.layout,"shapes",te)),c?(W.style({cursor:"move"}),c={element:W.node(),plotinfo:ne,gd:K,editHelpers:H,isActiveShape:!0},t=oe(t,K),se(t,W,c)):K._context.edits.shapePosition?(u=K,d=W,f=ee,p=e,m=H,P=O=10,R="pixel"===(h=te).xsizemode,I="pixel"===h.ysizemode,N="line"===h.type,z="path"===h.type,F=m.modifyItem,j=ae.getFromId(u,h.xref),e=ae.getRefType(h.xref),B=ae.getFromId(u,h.yref),H=ae.getRefType(h.yref),U=pe.getDataToPixel(u,j,!1,e),V=pe.getDataToPixel(u,B,!0,H),q=pe.getPixelToData(u,j,!1,e),Y=pe.getPixelToData(u,B,!0,H),H=N?function(){var e=Math.max(h.line.width,10),t=p.append("g").attr("data-index",f);t.append("path").attr("d",d.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"});var n={"fill-opacity":"0"},e=Math.max(e/2,10);return t.append("circle").attr({"data-line-point":"start-point",cx:R?U(h.xanchor)+h.x0:U(h.x0),cy:I?V(h.yanchor)-h.y0:V(h.y0),r:e}).style(n).classed("cursor-grab",!0),t.append("circle").attr({"data-line-point":"end-point",cx:R?U(h.xanchor)+h.x1:U(h.x1),cy:I?V(h.yanchor)-h.y1:V(h.y1),r:e}).style(n).classed("cursor-grab",!0),t}():d,G={element:H.node(),gd:u,prepFn:function(e){ge(u)||(R&&(b=U(h.xanchor)),I&&(x=V(h.yanchor)),"path"===h.type?L=h.path:(g=R?h.x0:U(h.x0),_=I?h.y0:V(h.y0),y=R?h.x1:U(h.x1),v=I?h.y1:V(h.y1)),C=g<y?(A=g,E="x0",k=y,"x1"):(A=y,E="x1",k=g,"x0"),S=!I&&_<v||I&&v<_?(w=_,M="y0",T=v,"y1"):(w=v,M="y1",T=_,"y0"),X(e),$(p,h),function(e,t,n){var r=t.xref,i=t.yref,a=ae.getFromId(n,r),o=ae.getFromId(n,i),t="";"paper"===r||a.autorange||(t+=r);"paper"===i||o.autorange||(t+=i);ce.setClipUrl(e,t?"clip"+n._fullLayout._uid+t:null,n)}(d,h,u),G.moveFn="move"===D?Z:J,G.altKey=e.altKey)},doneFn:function(){ge(u)||(he(d),Q(p),ye(d,u,h),re.call("_guiRelayout",u,m.getUpdateObj()))},clickFn:function(){ge(u)||Q(p)}},de.init(G),H.node().onmousemove=X):!0===te.editable&&W.style("pointer-events",l||le.opacity(i)*r<=.5?"stroke":"all"),W.node().addEventListener("click",function(){var e,t;t=W,!_e(e=K)||0<=(t=+t.node().getAttribute("data-index"))&&(t!==e._fullLayout._activeShapeIndex?(e._fullLayout._activeShapeIndex=t,e._fullLayout._deactivateShape=xe,me(e)):xe(e))})}te._input&&!1!==te.visible&&("below"!==te.layer?t(K._fullLayout._shapeUpperLayer):"paper"!==te.xref&&"paper"!==te.yref&&ne._hadPlotinfo?t((ne.mainplotinfo||ne).shapelayer):t(K._fullLayout._shapeLowerLayer))}function ye(e,t,n){n=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ce.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function ve(e,t){var n,r,s,l,c,u,d,h,i=t.type,a=ae.getRefType(t.xref),o=ae.getRefType(t.yref),f=ae.getFromId(e,t.xref),p=ae.getFromId(e,t.yref),m=e._fullLayout._size,e=f?"domain"===a?function(e){return f._offset+f._length*e}:(n=pe.shapePositionToRange(f),function(e){return f._offset+f.r2p(n(e,!0))}):function(e){return m.l+m.w*e},a=p?"domain"===o?function(e){return p._offset+p._length*(1-e)}:(r=pe.shapePositionToRange(p),function(e){return p._offset+p.r2p(r(e,!0))}):function(e){return m.t+m.h*(1-e)};if("path"===i)return f&&"date"===f.type&&(e=pe.decodeDate(e)),p&&"date"===p.type&&(a=pe.decodeDate(a)),s=e,l=a,o=t.path,c=t.xsizemode,u=t.ysizemode,d=t.xanchor,h=t.yanchor,o.replace(fe.segmentRE,function(e){var t=0,n=e.charAt(0),r=fe.paramIsX[n],i=fe.paramIsY[n],a=fe.numParams[n],o=e.substr(1).replace(fe.paramRE,function(e){return r[t]?e="pixel"===c?s(d)+Number(e):s(e):i[t]&&(e="pixel"===u?l(h)-Number(e):l(e)),e=a<++t?"X":e});return a<t&&(o=o.replace(/[\s,]*X.*/,""),ie.log("Ignoring extra params in segment "+e)),n+o});if(g="pixel"===t.xsizemode?(_=(g=e(t.xanchor))+t.x0,g+t.x1):(_=e(t.x0),e(t.x1)),t="pixel"===t.ysizemode?(y=(e=a(t.yanchor))-t.y0,e-t.y1):(y=a(t.y0),a(t.y1)),"line"===i)return"M"+_+","+y+"L"+g+","+t;if("rect"===i)return"M"+_+","+y+"H"+g+"V"+t+"H"+_+"Z";var i=(_+g)/2,g=(y+t)/2,t=Math.abs(i-_),_=Math.abs(g-y),y="A"+t+","+_,t=i+t+","+g;return"M"+t+y+" 0 1,1 "+(i+","+(g-_))+y+" 0 0,1 "+t+"Z"}function be(e,o,s){return e.replace(fe.segmentRE,function(e){var t=0,n=e.charAt(0),r=fe.paramIsX[n],i=fe.paramIsY[n],a=fe.numParams[n];return n+e.substr(1).replace(fe.paramRE,function(e){return a<=t||(r[t]?e=o(e):i[t]&&(e=s(e)),t++),e})})}function xe(e){_e(e)&&0<=e._fullLayout._activeShapeIndex&&(a(e),delete e._fullLayout._activeShapeIndex,me(e))}t.exports={draw:me,drawOne:o,eraseActiveShape:function(e){if(_e(e)){a(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var r=[],i=0;i<n.length;i++)i!==t&&r.push(n[i]);delete e._fullLayout._activeShapeIndex,re.call("_guiRelayout",e,{shapes:r})}}}}},{"../../lib":285,"../../lib/setcursor":305,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/cartesian/handle_outline":342,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":237,"./draw_newshape/display_outlines":243,"./draw_newshape/helpers":244,"./helpers":246}],240:[function(e,t,n){"use strict";var r=e("../../drawing/attributes").dash,e=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:e({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":279,"../../drawing/attributes":176}],241:[function(e,t,n){"use strict";t.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],242:[function(e,t,n){"use strict";var r=e("../../color");t.exports=function(e,t,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(e=(e||{}).plot_bgcolor||"#FFF",n("newshape.line.color",r.contrast(e)),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":155}],243:[function(e,t,n){"use strict";var T=e("../../dragelement"),A=e("../../dragelement/helpers").drawMode,k=e("../../../registry"),r=e("./constants"),M=r.i000,S=r.i090,E=r.i180,C=r.i270,L=e("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=e("./helpers"),D=r.pointsShapeRectangle,O=r.pointsShapeEllipse,P=r.writePaths,R=e("./newshapes");t.exports=function e(u,n,r,t){t=t||0;var s=r.gd;function d(){e(u,n,r,t++),O(u[0])&&i({redrawing:!0})}function i(e){r.isActiveShape=!1;var t=R(n,r);Object.keys(t).length&&k.call((e||{}).redrawing?"relayout":"_guiRelayout",s,t)}var l,a,h,f,p,o=r.isActiveShape,c=s._fullLayout._zoomlayer,m=r.dragmode;function g(e){h=+e.srcElement.getAttribute("data-i"),f=+e.srcElement.getAttribute("data-j"),l[h][f].moveFn=_}function _(e,t){if(u.length){var n=p[h][f][1],r=p[h][f][2],i=u[h],a=i.length;if(D(i)){for(var o,s=0;s<a;s++)s!==f&&((o=i[s])[1]===i[f][1]&&(o[1]=n+e),o[2]===i[f][2]&&(o[2]=r+t));if(i[f][1]=n+e,i[f][2]=r+t,!D(i))for(var l=0;l<a;l++)for(var c=0;c<i[l].length;c++)i[l][c]=p[h][l][c]}else i[f][1]=n+e,i[f][2]=r+t;d()}}function y(){i()}function v(e,t){2===e&&(h=+t.srcElement.getAttribute("data-i"),f=+t.srcElement.getAttribute("data-j"),t=u[h],D(t)||O(t)||function(){if(u.length&&u[h]&&u[h].length){for(var e=[],t=0;t<u[h].length;t++)t!==f&&e.push(u[h][t]);1<e.length&&(2!==e.length||"Z"!==e[1][0])&&(0===f&&(e[0][0]="M"),u[h]=e,d(),i())}}())}function b(e,t){!function(e,t){if(u.length)for(var n=0;n<u.length;n++)for(var r=0;r<u[n].length;r++)for(var i=0;i+2<u[n][r].length;i+=2)u[n][r][i+1]=p[n][r][i+1]+e,u[n][r][i+2]=p[n][r][i+2]+t}(e,t),d()}function x(e){h=+e.srcElement.getAttribute("data-i"),a[h=h||0].moveFn=b}function w(){i()}A(m)?s._fullLayout._drawing=!0:0<=s._fullLayout._activeShapeIndex&&L(s),n.attr("d",P(u)),o&&!t&&(p=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var i=0;i<r.length;i++){e[n][i]=[];for(var a=0;a<r[i].length;a++)e[n][i][a]=r[i][a]}}return e}([],u),function(e){l=[];for(var t=0;t<u.length;t++){var n=u[t],r=!D(n)&&O(n);l[t]=[];for(var i,a,o=0;o<n.length;o++)"Z"!==n[o][0]&&(r&&o!==M&&o!==S&&o!==E&&o!==C||(i=n[o][1],a=n[o][2],a=e.append("circle").classed("cursor-grab",!0).attr("data-i",t).attr("data-j",o).attr("cx",i).attr("cy",a).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1}),l[t][o]={element:a.node(),gd:s,prepFn:g,doneFn:y,clickFn:v},T.init(l[t][o])))}}(c.append("g").attr("class","outline-controllers")),a=[],u.length&&(a[0]={element:n[0][0],gd:s,prepFn:x,doneFn:w},T.init(a[0])))}},{"../../../plots/cartesian/handle_outline":342,"../../../registry":373,"../../dragelement":174,"../../dragelement/helpers":173,"./constants":241,"./helpers":244,"./newshapes":245}],244:[function(e,t,u){"use strict";var R=e("parse-svg-path"),n=e("./constants"),I=n.CIRCLE_SIDES,d=n.SQRT2,e=e("../../../plots/cartesian/helpers"),N=e.p2r,z=e.r2p,h=[0,3,4,5,6,1,2],f=[0,3,4,1,2];function a(e,t){return Math.abs(e-t)<=1e-6}function o(e,t){var n=t[1]-e[1],e=t[2]-e[2];return Math.sqrt(n*n+e*e)}u.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var i=e[r].length,a=0;a<i;a++){var o=e[r][a][0];if("Z"===o)n+="Z";else for(var s=e[r][a].length,l=0;l<s;l++){var c=l;"Q"===o||"S"===o?c=f[l]:"C"===o&&(c=h[l]),n+=e[r][a][c],0<l&&l<s-1&&(n+=",")}}return n},u.readPaths=function(e,t,n,r){function i(){a=u,o=d}var a,o,s=R(e),l=[],c=-1,u=0,d=0;i();for(var h=0;h<s.length;h++){var f,p,m,g,_=[],y=s[h][0],v=y;switch(y){case"M":l[++c]=[],u=+s[h][1],d=+s[h][2],_.push([v,u,d]),i();break;case"Q":case"S":f=+s[h][1],m=+s[h][2],u=+s[h][3],d=+s[h][4],_.push([v,u,d,f,m]);break;case"C":f=+s[h][1],m=+s[h][2],p=+s[h][3],g=+s[h][4],u=+s[h][5],d=+s[h][6],_.push([v,u,d,f,m,p,g]);break;case"T":case"L":u=+s[h][1],d=+s[h][2],_.push([v,u,d]);break;case"H":u=+s[h][1],_.push([v="L",u,d]);break;case"V":d=+s[h][1],_.push([v="L",u,d]);break;case"A":var v="L",b=+s[h][1],x=+s[h][2];+s[h][4]||(b=-b,x=-x);for(var w=u-b,T=d,A=1;A<=I/2;A++){var k=2*Math.PI*A/I;_.push([v,w+b*Math.cos(k),T+x*Math.sin(k)])}break;case"Z":u===a&&d===o||(u=a,d=o,_.push([v,u,d]))}for(var M=(n||{}).domain,S=t._fullLayout._size,E=n&&"pixel"===n.xsizemode,C=n&&"pixel"===n.ysizemode,L=!1===r,D=0;D<_.length;D++){for(A=0;A+2<7;A+=2){var O=_[D][A+1],P=_[D][A+2];void 0!==O&&void 0!==P&&(u=O,d=P,n&&(n.xaxis&&n.xaxis.p2r?(L&&(O-=n.xaxis._offset),O=E?z(n.xaxis,n.xanchor)+O:N(n.xaxis,O)):(L&&(O-=S.l),M?O=M.x[0]+O/S.w:O/=S.w),P=n.yaxis&&n.yaxis.p2r?(L&&(P-=n.yaxis._offset),C?z(n.yaxis,n.yanchor)-P:N(n.yaxis,P)):(L&&(P-=S.t),M?M.y[1]-P/S.h:1-P/S.h)),_[D][A+1]=O,_[D][A+2]=P)}l[c].push(_[D].slice())}}return l},u.pointsShapeRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!a(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!a(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!a(e[0][1],e[1][1])&&!a(e[0][1],e[3][1]))&&!!(o(e[0],e[1])*o(e[0],e[3]))},u.pointsShapeEllipse=function(e){if((t=e.length)!==I+1)return!1;for(var t=I,n=0;n<t;n++){var r=(2*t-n)%t,i=(t/2+r)%t;if(!a(o(e[n],e[(t/2+n)%t]),o(e[r],e[i])))return!1}return!0},u.handleEllipse=function(e,t,n){if(!e)return[t,n];for(var n=u.ellipseOver({x0:t[0],y0:t[1],x1:n[0],y1:n[1]}),r=(n.x1+n.x0)/2,i=(n.y1+n.y0)/2,a=(n.x1-n.x0)/2,o=(n.y1-n.y0)/2,a=a||(o/=d),o=o||(a/=d),s=[],l=0;l<I;l++){var c=2*l*Math.PI/I;s.push([r+a*Math.cos(c),i+o*Math.sin(c)])}return s},u.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,i=e.y1,a=r-t,e=i-n,r=((t-=a)+r)/2,i=((n-=e)+i)/2;return{x0:r-(a*=d),y0:i-(e*=d),x1:r+a,y1:i+e}}},{"../../../plots/cartesian/helpers":343,"./constants":241,"parse-svg-path":72}],245:[function(e,t,n){"use strict";var r=e("../../dragelement/helpers"),L=r.drawMode,D=r.openMode,r=e("./constants"),O=r.i000,P=r.i090,R=r.i180,I=r.i270,N=r.cos45,z=r.sin45,r=e("../../../plots/cartesian/helpers"),F=r.p2r,j=r.r2p,B=e("../../../plots/cartesian/handle_outline").clearSelect,e=e("./helpers"),H=e.readPaths,U=e.writePaths,V=e.ellipseOver;t.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var r=n.getAttribute("d"),i=t.gd,a=i._fullLayout.newshape,o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=!!o.domain||!o.xaxis,u=!!o.domain||!o.yaxis,d=t.isActiveShape,h=t.dragmode,f=(i.layout||{}).shapes||[];if(!L(h)&&void 0!==d){var p=i._fullLayout._activeShapeIndex;if(p<f.length)switch(i._fullLayout.shapes[p].type){case"rect":h="drawrect";break;case"circle":h="drawcircle";break;case"line":h="drawline";break;case"path":var m=f[p].path||"",h="Z"===m[m.length-1]?"drawclosedpath":"drawopenpath"}}var g,_,y,v,b,x,w=D(h),T=H(r,i,o,d),A={editable:!0,xref:c?"paper":s._id,yref:u?"paper":l._id,layer:a.layer,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};w||(A.fillcolor=a.fillcolor,A.fillrule=a.fillrule),(g=1===T.length?T[0]:g)&&"drawrect"===h?(A.type="rect",A.x0=g[0][1],A.y0=g[0][2],A.x1=g[2][1],A.y1=g[2][2]):g&&"drawline"===h?(A.type="line",A.x0=g[0][1],A.y0=g[0][2],A.x1=g[1][1],A.y1=g[1][2]):g&&"drawcircle"===h?(A.type="circle",_=g[O][1],y=g[P][1],v=g[R][1],b=g[I][1],x=g[O][2],e=g[P][2],n=g[R][2],r=g[I][2],c=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),u=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type),c&&(_=j(o.xaxis,_),y=j(o.xaxis,y),v=j(o.xaxis,v),b=j(o.xaxis,b)),u&&(x=j(o.yaxis,x),e=j(o.yaxis,e),n=j(o.yaxis,n),r=j(o.yaxis,r)),x=V({x0:w=(y+b)/2,y0:a=(x+n)/2,x1:w+(b-y+v-_)/2*N,y1:a+(r-e+n-x)/2*z}),c&&(x.x0=F(o.xaxis,x.x0),x.x1=F(o.xaxis,x.x1)),u&&(x.y0=F(o.yaxis,x.y0),x.y1=F(o.yaxis,x.y1)),A.x0=x.x0,A.y0=x.y0,A.x1=x.x1,A.y1=x.y1):(A.type="path",s&&l&&function(e,t,n){var r="date"===t.type,i="date"===n.type;if(!r&&!i)return;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)r&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),i&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"))}(T,s,l),A.path=U(T),g=null),B(i);for(var t=t.editHelpers,k=(t||{}).modifyItem,M=[],S=0;S<f.length;S++){var E=i._fullLayout.shapes[S];if(M[S]=E._input,void 0!==d&&S===i._fullLayout._activeShapeIndex){var C=A;switch(E.type){case"line":case"rect":case"circle":k("x0",C.x0),k("x1",C.x1),k("y0",C.y0),k("y1",C.y1);break;case"path":k("path",C.path)}}}return void 0===d?(M.push(A),M):t?t.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":342,"../../../plots/cartesian/helpers":343,"../../dragelement/helpers":173,"./constants":241,"./helpers":244}],246:[function(e,t,s){"use strict";var i=e("./constants"),a=e("../../lib");s.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},s.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},s.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},s.extractPathCoords=function(e,n){var r=[];return e.match(i.segmentRE).forEach(function(e){var t=n[e.charAt(0)].drawn;void 0!==t&&(!(e=e.substr(1).match(i.paramRE))||e.length<t||r.push(a.cleanNumber(e[t])))}),r},s.getDataToPixel=function(e,t,n,r){var i,a,o=e._fullLayout._size;return t?"domain"===r?a=function(e){return t._length*(n?1-e:e)+t._offset}:(i=s.shapePositionToRange(t),a=function(e){return t._offset+t.r2p(i(e,!0))},"date"===t.type&&(a=s.decodeDate(a))):a=n?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e},a},s.getPixelToData=function(e,t,n,r){var i,a=e._fullLayout._size;return t?"domain"===r?function(e){e=(e-t._offset)/t._length;return n?1-e:e}:(i=s.rangeToShapePosition(t),function(e){return i(t.p2r(e-t._offset))}):n?function(e){return 1-(e-a.t)/a.h}:function(e){return(e-a.l)/a.w}},s.roundPositionForSharpStrokeRendering=function(e,t){t=1===Math.round(t%2),e=Math.round(e);return t?e+.5:e},s.makeOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},t=e._fullLayout._plots[n.xref+n.yref];return!!t?t._hadPlotinfo=!0:(t={},n.xref&&"paper"!==n.xref&&(t.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(t.yaxis=e._fullLayout[n.yref+"axis"])),t.xsizemode=n.xsizemode,t.ysizemode=n.ysizemode,t.xanchor=n.xanchor,t.yanchor=n.yanchor,{options:n,plotinfo:t}}},{"../../lib":285,"./constants":237}],247:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":344,"./attributes":235,"./calc_autorange":236,"./defaults":238,"./draw":239,"./draw_newshape/defaults":242}],248:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../../plots/pad_attributes"),a=e("../../lib/extend").extendDeepAll,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,c=e("./constants"),e=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/animation_attributes":325,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"./constants":249}],249:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],250:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../plots/array_container_defaults"),u=e("./attributes"),r=e("./constants").name,i=u.steps;function a(n,r,e){function t(e,t){return l.coerce(n,r,u,e,t)}for(var i,a=c(n,r,{name:"steps",handleItemDefaults:d}),o=0,s=0;s<a.length;s++)a[s].visible&&o++;(o<2?r.visible=!1:t("visible"))&&(r._stepCount=o,i=r._visibleSteps=l.filterVisible(a),(a[t("active")]||{}).visible||(r.active=i[0]._index),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("len"),t("lenmode"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("currentvalue.visible")&&(t("currentvalue.xanchor"),t("currentvalue.prefix"),t("currentvalue.suffix"),t("currentvalue.offset"),l.coerceFont(t,"currentvalue.font",r.font)),t("transition.duration"),t("transition.easing"),t("bgcolor"),t("activebgcolor"),t("bordercolor"),t("borderwidth"),t("ticklen"),t("tickwidth"),t("tickcolor"),t("minorticklen"))}function d(n,r){function e(e,t){return l.coerce(n,r,i,e,t)}var t="skip"===n.method||Array.isArray(n.args)?e("visible"):r.visible=!1;t&&(e("method"),e("args"),t=e("label","step-"+r._index),e("value",t),e("execute"))}t.exports=function(e,t){c(e,t,{name:r,handleItemDefaults:a})}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":248,"./constants":249}],251:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("../../plots/plots"),l=e("../color"),d=e("../drawing"),h=e("../../lib"),s=h.strTranslate,f=e("../../lib/svg_text_utils"),p=e("../../plot_api/plot_template").arrayEditor,m=e("./constants"),e=e("../../constants/alignment"),g=e.LINE_SPACING,_=e.FROM_TL,y=e.FROM_BR;function v(e){return m.autoMarginIdRoot+e._index}function o(e){return e._index}function b(e,t,n){if(t.currentvalue.visible){var r,i,a=t._dims;switch(t.currentvalue.xanchor){case"right":r=a.inputAreaLength-m.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":r=.5*a.inputAreaLength,i="middle";break;default:r=m.currentValueInset,i="left"}var o=h.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":i,"data-notex":1})}),s=t.currentvalue.prefix||"";"string"==typeof n?s+=n:(e=t.steps[t.active].label,s+=e=(n=t._gd._fullLayout._meta)?h.templateString(e,n):e),t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(d.font,t.currentvalue.font).text(s).call(f.convertToTspans,t._gd);s=f.lineCount(o),t=(a.currentValueMaxLines+1-s)*t.currentvalue.font.size*g;return f.positionText(o,r,t),o}}function x(t,n,r){h.ensureSingle(t,"rect",m.gripRectClass,function(e){e.call(a,n,t,r).style("pointer-events","all")}).attr({width:m.gripWidth,height:m.gripHeight,rx:m.gripRadius,ry:m.gripRadius}).call(l.stroke,r.bordercolor).call(l.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function w(e,t,n){var r=h.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})}),e=t.step.label,t=n._gd._fullLayout._meta;return t&&(e=h.templateString(e,t)),r.call(d.font,n.font).text(e).call(f.convertToTspans,n._gd),r}function T(e,n){var e=h.ensureSingle(e,"g",m.labelsClass),r=n._dims,e=e.selectAll("g."+m.labelGroupClass).data(r.labelSteps);e.enter().append("g").classed(m.labelGroupClass,!0),e.exit().remove(),e.each(function(e){var t=c.select(this);t.call(w,e,n),d.setTranslate(t,E(n,e.fraction),m.tickOffset+n.ticklen+n.font.size*g+m.labelOffset+r.currentValueTotalHeight)})}function A(e,t,n,r,i){r=Math.round(r*(n._stepCount-1)),r=n._visibleSteps[r]._index;r!==n.active&&k(e,t,n,r,!0,i)}function k(t,n,e,r,i,a){var o=e.active;e.active=r,p(t.layout,m.name,e).applyUpdate("active",r);r=e.steps[e.active];n.call(S,e,a),n.call(b,e),t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:i,previousActive:o}),r&&r.method&&i&&(n._nextMethod?(n._nextMethod.step=r,n._nextMethod.doCallback=i,n._nextMethod.doTransition=a):(n._nextMethod={step:r,doCallback:i,doTransition:a},n._nextMethodRaf=window.requestAnimationFrame(function(){var e=n._nextMethod.step;e.method&&(e.execute&&u.executeAPICommand(t,e.method,e.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function a(e,r,i){var a=i.node(),o=c.select(r);function s(){return i.data()[0]}e.on("mousedown",function(){var e=s();r.emit("plotly_sliderstart",{slider:e});var t=i.select("."+m.gripRectClass);c.event.stopPropagation(),c.event.preventDefault(),t.call(l.fill,e.activebgcolor);var n=C(e,c.mouse(a)[0]);A(r,i,e,n,!0),e._dragging=!0,o.on("mousemove",function(){var e=s(),t=C(e,c.mouse(a)[0]);A(r,i,e,t,!1)}),o.on("mouseup",function(){var e=s();e._dragging=!1,t.call(l.fill,e.bgcolor),o.on("mouseup",null),o.on("mousemove",null),r.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function M(e,i){var e=e.selectAll("rect."+m.tickRectClass).data(i._visibleSteps),a=i._dims;e.enter().append("rect").classed(m.tickRectClass,!0),e.exit().remove(),e.attr({width:i.tickwidth+"px","shape-rendering":"crispEdges"}),e.each(function(e,t){var n=t%a.labelStride==0,r=c.select(this);r.attr({height:n?i.ticklen:i.minorticklen}).call(l.fill,i.tickcolor),d.setTranslate(r,E(i,t/(i._stepCount-1))-.5*i.tickwidth,(n?m.tickOffset:m.minorTickOffset)+a.currentValueTotalHeight)})}function S(e,t,n){for(var r=e.select("rect."+m.gripRectClass),i=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){i=a;break}var o=E(t,i/(t._stepCount-1));t._invokingCommand||(e=r,(e=n&&0<t.transition.duration?r.transition().duration(t.transition.duration).ease(t.transition.easing):e).attr("transform",s(o-.5*m.gripWidth,t._dims.currentValueTotalHeight)))}function E(e,t){e=e._dims;return e.inputAreaStart+m.stepInset+(e.inputAreaLength-2*m.stepInset)*Math.min(1,Math.max(0,t))}function C(e,t){e=e._dims;return Math.min(1,Math.max(0,(t-m.stepInset-e.inputAreaStart)/(e.inputAreaLength-2*m.stepInset-2*e.inputAreaStart)))}function L(t,n,r){var e=r._dims,i=h.ensureSingle(t,"rect",m.railTouchRectClass,function(e){e.call(a,n,t,r).style("pointer-events","all")});i.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,m.tickOffset+r.ticklen+e.labelHeight)}).call(l.fill,r.bgcolor).attr("opacity",0),d.setTranslate(i,0,e.currentValueTotalHeight)}function D(e,t){var n=t._dims,r=n.inputAreaLength-2*m.railInset,e=h.ensureSingle(e,"rect",m.railRectClass);e.attr({width:r,height:m.railWidth,rx:m.railRadius,ry:m.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),d.setTranslate(e,m.railInset,.5*(n.inputAreaWidth-m.railWidth)+n.currentValueTotalHeight)}t.exports=function(r){var e=r._fullLayout,t=function(e,t){for(var n=e[m.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&(a._gd=t,r.push(a))}return r}(e,r),e=e._infolayer.selectAll("g."+m.containerClassName).data(0<t.length?[0]:[]);function n(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),u.autoMargin(r,v(e))}if(e.enter().append("g").classed(m.containerClassName,!0).style("cursor","ew-resize"),e.exit().each(function(){c.select(this).selectAll("g."+m.groupClassName).each(n)}).remove(),0!==t.length){e=e.selectAll("g."+m.groupClassName).data(t,o);e.enter().append("g").classed(m.groupClassName,!0),e.exit().each(n).remove();for(var i=0;i<t.length;i++){var a=t[i];!function(e,n){var t=d.tester.selectAll("g."+m.labelGroupClass).data(n._visibleSteps);t.enter().append("g").classed(m.labelGroupClass,!0);var r=0,i=0;t.each(function(e){e=w(c.select(this),{step:e},n).node();e&&(e=d.bBox(e),i=Math.max(i,e.height),r=Math.max(r,e.width))}),t.remove();var a=n._dims={};a.inputAreaWidth=Math.max(m.railWidth,m.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*n.x,a.ly=o.t+o.h*(1-n.y),"fraction"===n.lenmode?a.outerLength=Math.round(o.w*n.len):a.outerLength=n.len;a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-n.pad.l-n.pad.r);var s=(a.inputAreaLength-2*m.stepInset)/(n._stepCount-1),o=r+m.labelPadding;{var l;a.labelStride=Math.max(1,Math.ceil(o/s)),a.labelHeight=i,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,n.currentvalue.visible&&(l=d.tester.append("g"),t.each(function(e){var t=b(l,n,e.label),e=t.node()&&d.bBox(t.node())||{width:0,height:0},t=f.lineCount(t);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(e.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(e.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,t)}),a.currentValueTotalHeight=a.currentValueHeight+n.currentvalue.offset,l.remove())}a.height=a.currentValueTotalHeight+m.tickOffset+n.ticklen+m.labelOffset+a.labelHeight+n.pad.t+n.pad.b;s="left";h.isRightAnchor(n)&&(a.lx-=a.outerLength,s="right");h.isCenterAnchor(n)&&(a.lx-=a.outerLength/2,s="center");t="top";h.isBottomAnchor(n)&&(a.ly-=a.height,t="bottom");h.isMiddleAnchor(n)&&(a.ly-=a.height/2,t="middle");a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);t={y:n.y,b:a.height*y[t],t:a.height*_[t]};"fraction"===n.lenmode?(t.l=0,t.xl=n.x-n.len*_[s],t.r=0,t.xr=n.x+n.len*y[s]):(t.x=n.x,t.l=a.outerLength*_[s],t.r=a.outerLength*y[s]);u.autoMargin(e,v(n),t)}(r,a)}e.each(function(e){var n=c.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(e),u.manageCommandObserver(r,e,e._visibleSteps,function(e){var t=n.data()[0];t.active!==e.index&&(t._dragging||k(r,n,t,e.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(b,n).call(D,n).call(T,n).call(M,n).call(L,e,n).call(x,e,n);e=n._dims;d.setTranslate(t,e.lx+n.pad.l,e.ly+n.pad.t),t.call(S,n,!1),t.call(b,n)}(r,c.select(this),e)})}}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":249,"@plotly/d3":20}],252:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":248,"./constants":249,"./defaults":250,"./draw":251}],253:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),A=e("../../plots/plots"),k=e("../../registry"),M=e("../../lib"),S=M.strTranslate,E=e("../drawing"),C=e("../color"),L=e("../../lib/svg_text_utils"),D=e("../../constants/interactions"),O=e("../../constants/alignment").OPPOSITE_SIDE,P=/ [XY][0-9]* /;t.exports={draw:function(n,e,t){var r=t.propContainer,i=t.propName,a=t.placeholder,o=t.traceIndex,c=t.avoid||{},s=t.attributes,l=t.transform,u=t.containerGroup,d=n._fullLayout,h=1,f=!1,p=((r=r.title)&&r.text?r.text:"").trim(),m=(r=r&&r.font?r.font:{}).family,g=r.size,_=r.color;"title.text"===i?y="titleText":-1!==i.indexOf("axis")?y="axisTitleText":i.indexOf(!0)&&(y="colorbarTitleText");var y=n._context.edits[y];""===p?h=0:p.replace(P," % ")===a.replace(P," % ")&&(h=.2,f=!0,y||(p="")),t._meta?p=M.templateString(p,t._meta):d._meta&&(p=M.templateString(p,d._meta));t=p||y,r=(u=u||M.ensureSingle(d._infolayer,"g","g-"+e)).selectAll("text").data(t?[0]:[]);return r.enter().append("text"),r.text(p).attr("class",e),r.exit().remove(),t&&(r.call(v),y&&(p?r.on(".opacity",null):(f=!(h=0),r.text(a).on("mouseover.opacity",function(){w.select(this).transition().duration(D.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(D.HIDE_PLACEHOLDER).style("opacity",0)})),r.call(L.makeEditable,{gd:n}).on("edit",function(e){void 0!==o?k.call("_guiRestyle",n,i,e,o):k.call("_guiRelayout",n,i,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(v)}).on("input",function(e){this.text(e||" ").call(L.positionText,s.x,s.y)})),r.classed("js-placeholder",f)),u;function v(e){M.syncOrAsync([b,x],e)}function b(e){var t;return l?(t="",l.rotate&&(t+="rotate("+[l.rotate,s.x,s.y]+")"),l.offset&&(t+=S(0,l.offset))):t=null,e.attr("transform",t),e.style({"font-family":m,"font-size":w.round(g,2)+"px",fill:C.rgb(_),opacity:h*C.opacity(_),"font-weight":A.fontWeight}).attr(s).call(L.convertToTspans,n),A.previousPromises(n)}function x(e){var t,n,r,i,a,o,s,l=w.select(e.node().parentNode);c&&c.selection&&c.side&&p&&(l.attr("transform",null),t=O[c.side],n="left"===c.side||"top"===c.side?-1:1,r=T(c.pad)?c.pad:2,i=E.bBox(l.node()),a={left:0,top:0,right:d.width,bottom:d.height},o=c.maxShift||n*(a[c.side]-i[c.side]),((s=0)<(s=o<0?o:(e=c.offsetLeft||0,a=c.offsetTop||0,i.left-=e,i.right-=e,i.top-=a,i.bottom-=a,c.selection.each(function(){var e=E.bBox(this);M.bBoxIntersect(i,e,r)&&(s=Math.max(s,n*(e[c.side]-i[t])+r))}),Math.min(o,s)))||o<0)&&(o={left:[-s,0],right:[s,0],top:[0,-s],bottom:[0,s]}[c.side],l.attr("transform",S(o[0],o[1]))))}}}},{"../../constants/alignment":260,"../../constants/interactions":264,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],254:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),a=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l=e("../../plot_api/plot_template").templatedArray,e=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:e,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"../color/attributes":154}],255:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],256:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("../../plots/array_container_defaults"),o=e("./attributes"),r=e("./constants").name,s=o.buttons;function l(n,r,e){function t(e,t){return i.coerce(n,r,o,e,t)}t("visible",0<a(n,r,{name:"buttons",handleItemDefaults:c}).length)&&(t("active"),t("direction"),t("type"),t("showactive"),t("x"),t("y"),i.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),i.coerceFont(t,"font",e.font),t("bgcolor",e.paper_bgcolor),t("bordercolor"),t("borderwidth"))}function c(n,r){function e(e,t){return i.coerce(n,r,s,e,t)}e("visible","skip"===n.method||Array.isArray(n.args))&&(e("method"),e("args"),e("args2"),e("label"),e("execute"))}t.exports=function(e,t){a(e,t,{name:r,handleItemDefaults:l})}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":254,"./constants":255}],257:[function(e,t,n){"use strict";var d=e("@plotly/d3"),h=e("../../plots/plots"),a=e("../color"),u=e("../drawing"),f=e("../../lib"),p=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,m=e("../../constants/alignment").LINE_SPACING,g=e("./constants"),_=e("./scrollbox");function y(e){return e._index}function v(e,t){return+e.attr(g.menuIndexAttrName)===t._index}function b(e,t,n,r,i,a,o,s){t.active=o,l(e.layout,g.name,t).applyUpdate("active",o),"buttons"===t.type?w(e,r,null,null,t):"dropdown"===t.type&&(i.attr(g.menuIndexAttrName,"-1"),x(e,r,i,a,t),s||w(e,r,i,a,t))}function x(e,t,n,r,i){var a=f.ensureSingle(t,"g",g.headerClassName,function(e){e.style("pointer-events","all")}),o=i._dims,s=i.active,l=i.buttons[s]||g.blankHeaderOpts,c={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},s={width:o.headerWidth,height:o.headerHeight};a.call(T,i,l,e).call(E,i,c,s),f.ensureSingle(t,"text",g.headerArrowClassName,function(e){e.attr("text-anchor","end").call(u.font,i.font).text(g.arrowSymbol[i.direction])}).attr({x:o.headerWidth-g.arrowOffsetX+i.pad.l,y:o.headerHeight/2+g.textOffsetY+i.pad.t}),a.on("click",function(){n.call(C,String(v(n,i)?-1:i._index)),w(e,t,n,r,i)}),a.on("mouseover",function(){a.call(k)}),a.on("mouseout",function(){a.call(M,i)}),u.setTranslate(t,o.lx,o.ly)}function w(r,i,a,o,s){a||(a=i).attr("pointer-events","all");var e=-1!=+a.attr(g.menuIndexAttrName)||"buttons"===s.type?s.buttons:[],t="dropdown"===s.type?g.dropdownButtonClassName:g.buttonClassName,l=a.selectAll("g."+t).data(f.filterVisible(e)),n=l.enter().append("g").classed(t,!0),c=l.exit();"dropdown"===s.type?(n.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();e=0,t=0,n=s._dims,c=-1!==["up","down"].indexOf(s.direction);"dropdown"===s.type&&(c?t=n.headerHeight+g.gapButtonHeader:e=n.headerWidth+g.gapButtonHeader),"dropdown"===s.type&&"up"===s.direction&&(t=-g.gapButtonHeader+g.gapButton-n.openHeight),"dropdown"===s.type&&"left"===s.direction&&(e=-g.gapButtonHeader+g.gapButton-n.openWidth);var u={x:n.lx+e+s.pad.l,y:n.ly+t+s.pad.t,yPad:g.gapButton,xPad:g.gapButton,index:0},t={l:u.x+s.borderwidth,t:u.y+s.borderwidth};l.each(function(e,t){var n=d.select(this);n.call(T,s,e,r).call(E,s,u),n.on("click",function(){d.event.defaultPrevented||(e.execute&&(e.args2&&s.active===t?(b(r,s,0,i,a,o,-1),h.executeAPICommand(r,e.method,e.args2)):(b(r,s,0,i,a,o,t),h.executeAPICommand(r,e.method,e.args))),r.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active}))}),n.on("mouseover",function(){n.call(k)}),n.on("mouseout",function(){n.call(M,s),l.call(A,s)})}),l.call(A,s),c?(t.w=Math.max(n.openWidth,n.headerWidth),t.h=u.y-t.t):(t.w=u.x-t.l,t.h=Math.max(n.openHeight,n.headerHeight)),t.direction=s.direction,o&&(l.size()?function(e,t,n){var r,i,a,o=t.direction,o="up"===o||"down"===o,s=t._dims,l=t.active;if(o)for(a=i=0;a<l;a++)i+=s.heights[a]+g.gapButton;else for(a=r=0;a<l;a++)r+=s.widths[a]+g.gapButton;e.enable(n,r,i),e.hbar&&e.hbar.attr("opacity","0").transition().attr("opacity","1");e.vbar&&e.vbar.attr("opacity","0").transition().attr("opacity","1")}(o,s,t):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()});n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(o))}function T(e,t,n,r){e.call(i,t).call(o,t,n,r)}function i(e,t){f.ensureSingle(e,"rect",g.itemRectClassName,function(e){e.attr({rx:g.rx,ry:g.ry,"shape-rendering":"crispEdges"})}).call(a.stroke,t.bordercolor).call(a.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,n,r){var i=f.ensureSingle(e,"text",g.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})}),e=n.label,n=r._fullLayout._meta;n&&(e=f.templateString(e,n)),i.call(u.font,t.font).text(e).call(p.convertToTspans,r)}function A(e,r){var i=r.active;e.each(function(e,t){var n=d.select(this);t===i&&r.showactive&&n.select("rect."+g.itemRectClassName).call(a.fill,g.activeColor)})}function k(e){e.select("rect."+g.itemRectClassName).call(a.fill,g.hoverColor)}function M(e,t){e.select("rect."+g.itemRectClassName).call(a.fill,t.bgcolor)}function S(e){return g.autoMarginIdRoot+e._index}function E(e,t,n,r){r=r||{};var i=e.select("."+g.itemRectClassName),a=e.select("."+g.itemTextClassName),o=t.borderwidth,s=n.index,l=t._dims;u.setTranslate(e,o+n.x,o+n.y);e=-1!==["up","down"].indexOf(t.direction),o=r.height||(e?l.heights[s]:l.height1);i.attr({x:0,y:0,width:r.width||(e?l.width1:l.widths[s]),height:o});r=t.font.size*m,t=p.lineCount(a);p.positionText(a,g.textOffsetX,o/2-(t-1)*r/2+g.textOffsetY),e?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function C(e,t){e.attr(g.menuIndexAttrName,t||"-1").selectAll("g."+g.dropdownButtonClassName).remove()}t.exports=function(i){var e=i._fullLayout,t=f.filterVisible(e[g.name]);function n(e){h.autoMargin(i,S(e))}var r=e._menulayer.selectAll("g."+g.containerClassName).data(0<t.length?[0]:[]);if(r.enter().append("g").classed(g.containerClassName,!0).style("cursor","pointer"),r.exit().each(function(){d.select(this).selectAll("g."+g.headerGroupClassName).each(n)}).remove(),0!==t.length){var a=r.selectAll("g."+g.headerGroupClassName).data(t,y);a.enter().append("g").classed(g.headerGroupClassName,!0);for(var o=f.ensureSingle(r,"g",g.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),s=0;s<t.length;s++){var l=t[s];!function(i,a){var o=a._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},e=u.tester.selectAll("g."+g.dropdownButtonClassName).data(f.filterVisible(a.buttons));e.enter().append("g").classed(g.dropdownButtonClassName,!0);var s=-1!==["up","down"].indexOf(a.direction);e.each(function(e,t){var n=d.select(this);n.call(T,a,e,i);var r=n.select("."+g.itemTextClassName),e=r.node()&&u.bBox(r.node()).width,n=Math.max(e+g.textPadX,g.minWidth),e=a.font.size*m,r=p.lineCount(r),r=Math.max(e*r,g.minHeight)+g.textOffsetY,r=Math.ceil(r),n=Math.ceil(n);o.widths[t]=n,o.heights[t]=r,o.height1=Math.max(o.height1,r),o.width1=Math.max(o.width1,n),s?(o.totalWidth=Math.max(o.totalWidth,n),o.openWidth=o.totalWidth,o.totalHeight+=r+g.gapButton,o.openHeight+=r+g.gapButton):(o.totalWidth+=n+g.gapButton,o.openWidth+=n+g.gapButton,o.totalHeight=Math.max(o.totalHeight,r),o.openHeight=o.totalHeight)}),s?o.totalHeight-=g.gapButton:o.totalWidth-=g.gapButton;o.headerWidth=o.width1+g.arrowPadX,o.headerHeight=o.height1,"dropdown"===a.type&&(s?(o.width1+=g.arrowPadX,o.totalHeight=o.height1):o.totalWidth=o.width1,o.totalWidth+=g.arrowPadX);e.remove();var t=o.totalWidth+a.pad.l+a.pad.r,n=o.totalHeight+a.pad.t+a.pad.b,r=i._fullLayout._size;o.lx=r.l+r.w*a.x,o.ly=r.t+r.h*(1-a.y);e="left";f.isRightAnchor(a)&&(o.lx-=t,e="right");f.isCenterAnchor(a)&&(o.lx-=t/2,e="center");r="top";f.isBottomAnchor(a)&&(o.ly-=n,r="bottom");f.isMiddleAnchor(a)&&(o.ly-=n/2,r="middle");o.totalWidth=Math.ceil(o.totalWidth),o.totalHeight=Math.ceil(o.totalHeight),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),h.autoMargin(i,S(a),{x:a.x,y:a.y,l:t*({right:1,center:.5}[e]||0),r:t*({left:1,center:.5}[e]||0),b:n*({top:1,middle:.5}[r]||0),t:n*({bottom:1,middle:.5}[r]||0)})}(i,l)}var e="updatemenus"+e._uid,c=new _(i,o,e);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(C)),a.exit().each(function(e){o.call(C),n(e)}).remove(),a.each(function(t){var n=d.select(this),r="dropdown"===t.type?o:null;h.manageCommandObserver(i,t,t.buttons,function(e){b(i,t,t.buttons[e.index],n,r,c,e.index,!0)}),"dropdown"===t.type?(x(i,n,o,c,t),v(o,t)&&w(i,n,o,c,t)):w(i,n,null,null,t)})}}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":255,"./scrollbox":259,"@plotly/d3":20}],258:[function(e,t,n){arguments[4][252][0].apply(n,arguments)},{"./attributes":254,"./constants":255,"./defaults":256,"./draw":257,dup:252}],259:[function(e,t,n){"use strict";t.exports=T;var b=e("@plotly/d3"),x=e("../color"),w=e("../drawing"),i=e("../../lib");function T(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(e,t,n){var r=this.gd._fullLayout,i=r.width,a=r.height;this.position=e;var o=this.position.l,s=this.position.w,l=this.position.t,c=this.position.h,u=this.position.direction,d="down"===u,h="left"===u,f="up"===u,p=s,m=c;d||h||"right"===u||f||(this.position.direction="down",d=!0),d||f?(_=(g=o)+p,m=d?(y=l,(v=Math.min(y+m,a))-y):(v=l+m)-(y=Math.max(v-m,0))):(v=(y=l)+m,p=h?(_=o+p)-(g=Math.max(_-p,0)):(g=o,(_=Math.min(g+p,i))-g)),this._box={l:g,t:y,w:p,h:m};e=p<s,u=T.barLength+2*T.barPad,f=T.barWidth+2*T.barPad,d=o,h=l+c;a<h+f&&(h=a-f);a=this.container.selectAll("rect.scrollbar-horizontal").data(e?[0]:[]);a.exit().on(".drag",null).remove(),a.enter().append("rect").classed("scrollbar-horizontal",!0).call(x.fill,T.barColor),e?(this.hbar=a.attr({rx:T.barRadius,ry:T.barRadius,x:d,y:h,width:u,height:f}),this._hbarXMin=d+u/2,this._hbarTranslateMax=p-u):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);a=m<c,h=T.barWidth+2*T.barPad,d=T.barLength+2*T.barPad,p=o+s,u=l;i<p+h&&(p=i-h);i=this.container.selectAll("rect.scrollbar-vertical").data(a?[0]:[]);i.exit().on(".drag",null).remove(),i.enter().append("rect").classed("scrollbar-vertical",!0).call(x.fill,T.barColor),a?(this.vbar=i.attr({rx:T.barRadius,ry:T.barRadius,x:p,y:u,width:h,height:d}),this._vbarYMin=u+d/2,this._vbarTranslateMax=m-d):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var d=this.id,g=g-.5,_=a?_+h+.5:_+.5,y=y-.5,v=e?v+f+.5:v+.5,r=r._topdefs.selectAll("#"+d).data(e||a?[0]:[]);r.exit().remove(),r.enter().append("clipPath").attr("id",d).append("rect"),e||a?(this._clipRect=r.select("rect").attr({x:Math.floor(g),y:Math.floor(y),width:Math.ceil(_)-Math.floor(g),height:Math.ceil(v)-Math.floor(y)}),this.container.call(w.setClipUrl,d,this.gd),this.bg.attr({x:o,y:l,width:s,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),(e||a)&&(c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(c),c=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault(),b.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),e&&this.hbar.on(".drag",null).call(c),a&&this.vbar.on(".drag",null).call(c)),this.setTranslate(t,n)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=b.event.dx),this.vbar&&(t-=b.event.dy),this.setTranslate(e,t)},T.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=b.event.deltaY),this.vbar&&(t+=b.event.deltaY),this.setTranslate(e,t)},T.prototype._onBarDrag=function(){var e,t,n=this.translateX,r=this.translateY;this.hbar&&(e=(t=n+this._hbarXMin)+this._hbarTranslateMax,n=(i.constrain(b.event.x,t,e)-t)/(e-t)*(this.position.w-this._box.w)),this.vbar&&(t=(e=r+this._vbarYMin)+this._vbarTranslateMax,r=(i.constrain(b.event.y,e,t)-e)/(t-e)*(this.position.h-this._box.h)),this.setTranslate(n,r)},T.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;e=i.constrain(e||0,0,n),t=i.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(w.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(w.setTranslate,e+e/n*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(w.setTranslate,e,t+t/r*this._vbarTranslateMax)}},{"../../lib":285,"../color":155,"../drawing":177,"@plotly/d3":20}],260:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],261:[function(e,t,n){"use strict";t.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},{}],262:[function(e,t,n){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],263:[function(e,t,n){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],264:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],265:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],266:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],267:[function(e,t,n){"use strict";n.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var r=e("./registry"),i=n.register=r.register,a=e("./plot_api"),o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=a[l]),i({moduleType:"apiMethod",name:l,fn:a[l]})}i(e("./traces/scatter")),i([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),i([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=e("./fonts/ploticon");var c=e("./components/fx"),r=e("./plots/plots");n.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},n.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":146,"./components/annotations3d":151,"./components/colorbar":161,"./components/colorscale":167,"./components/errorbars":183,"./components/fx":195,"./components/grid":199,"./components/images":204,"./components/legend":212,"./components/modebar":218,"./components/rangeselector":226,"./components/rangeslider":233,"./components/shapes":247,"./components/sliders":252,"./components/updatemenus":258,"./fonts/ploticon":268,"./locale-en":311,"./locale-en-us":310,"./plot_api":315,"./plot_api/plot_schema":319,"./plots/plots":366,"./registry":373,"./snapshot":378,"./traces/scatter":506,"./version":546,"native-promise-only":70}],268:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],269:[function(e,t,n){"use strict";n.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},{}],270:[function(e,t,n){"use strict";var e=e("./mod"),i=e.mod,r=e.modHalf,m=Math.PI,g=2*m;function _(e){return Math.abs(e[1]-e[0])>g-1e-14}function a(e,t){return r(t-e,g)}function o(e,t){if(_(t))return!0;var n=t[0]<t[1]?(r=t[0],t[1]):(r=t[1],t[0]),r=i(r,g);(n=i(n,g))<r&&(n+=g);t=i(e,g),e=t+g;return r<=t&&t<=n||r<=e&&e<=n}function s(e,t,n,r,i,a,o){i=i||0,a=a||0;var s,l,c,u=_([n,r]);function d(e,t){return[e*Math.cos(t)+i,a-e*Math.sin(t)]}var h,n=u?(s=0,l=m,g):n<r?(s=n,r):(s=r,n),e=e<t?(c=e,t):(c=t,e),f=Math.abs(n-s)<=m?0:1;function p(e,t,n){return"A"+[e,e]+" "+[0,f,n]+" "+d(e,t)}return u?h=null===c?"M"+d(e,s)+p(e,l,0)+p(e,n,0)+"Z":"M"+d(c,s)+p(c,l,0)+p(c,n,0)+"ZM"+d(e,s)+p(e,l,1)+p(e,n,1)+"Z":null===c?(h="M"+d(e,s)+p(e,n,0),o&&(h+="L0,0Z")):h="M"+d(c,s)+"L"+d(e,s)+p(e,n,0)+"L"+d(c,n)+p(c,s,1)+"Z",h}t.exports={deg2rad:function(e){return e/180*m},rad2deg:function(e){return e/m*180},angleDelta:a,angleDist:function(e,t){return Math.abs(a(e,t))},isFullCircle:_,isAngleInsideSector:o,isPtInsideSector:function(e,t,n,r){if(!o(t,r))return!1;var i,n=n[0]<n[1]?(i=n[0],n[1]):(i=n[1],n[0]);return i<=e&&e<=n},pathArc:function(e,t,n,r,i){return s(null,e,t,n,r,i,0)},pathSector:function(e,t,n,r,i){return s(null,e,t,n,r,i,1)},pathAnnulus:function(e,t,n,r,i,a){return s(e,t,n,r,i,a,1)}}},{"./mod":292}],271:[function(e,t,n){"use strict";var d=Array.isArray,r=ArrayBuffer,i=DataView;function a(e){return r.isView(e)&&!(e instanceof i)}function o(e){return d(e)||a(e)}function s(e,t,n){if(o(e)){if(o(e[0])){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i].length);return r}return e.length}return 0}n.isTypedArray=a,n.isArrayOrTypedArray=o,n.isArray1D=function(e){return!o(e[0])},n.ensureArray=function(e,t){return(e=!d(e)?[]:e).length=t,e},n.concat=function(){for(var e,t,n,r,i,a,o,s=[],l=!0,c=0,u=0;u<arguments.length;u++)(i=(n=arguments[u]).length)&&(t?s.push(n):(t=n,r=i),d(n)?e=!1:(l=!1,c?e!==n.constructor&&(e=!1):e=n.constructor),c+=i);if(!c)return[];if(!s.length)return t;if(l)return t.concat.apply(t,s);if(e){for((a=new e(c)).set(t),u=0;u<s.length;u++)n=s[u],a.set(n,r),r+=n.length;return a}for(a=new Array(c),o=0;o<t.length;o++)a[o]=t[o];for(u=0;u<s.length;u++){for(n=s[u],o=0;o<n.length;o++)a[r+o]=n[o];r+=o}return a},n.maxRowLength=function(e){return s(e,Math.max,0)},n.minRowLength=function(e){return s(e,Math.min,1/0)}},{}],272:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../constants/numerical").BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(a,"")),r(e)?Number(e):i}},{"../constants/numerical":265,"fast-isnumeric":31}],273:[function(e,t,n){"use strict";t.exports=function(e){e=e._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],274:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],275:[function(e,t,_){"use strict";var i=e("fast-isnumeric"),r=e("tinycolor2"),o=e("../plots/attributes"),a=e("../components/colorscale/scales"),s=e("../components/color"),l=e("../constants/interactions").DESELECTDIM,c=e("./nested_property"),u=e("./regex").counter,d=e("./mod").modHalf,h=e("./array").isArrayOrTypedArray;function f(e,t){var n=_.valObjectMeta[t.valType];if(t.arrayOk&&h(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},i=r,a={set:function(e){i=e}};return n.coerceFunction(e,a,r,t),i!==r}_.valObjectMeta={data_array:{coerceFunction:function(e,t,n){h(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){"string"!=typeof e?!0!==r.strict&&"number"==typeof e?t.set(String(e)):t.set(n):r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return r(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(a.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):i(e)?t.set(d(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){r=r.regex||u(n);"string"==typeof e&&r.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){t=t.dflt;return e===t||"string"==typeof e&&!!u(t).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var i=e.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?t.set(i.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,n,r){function i(e,t,n){var r,i={set:function(e){r=e}};return void 0===n&&(n=t.dflt),_.valObjectMeta[t.valType].coerceFunction(e,i,n,t),r}var a=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var o,s,l,c,u,d,h=r.items,f=[],p=Array.isArray(h),r=p&&a&&Array.isArray(h[0]),m=a&&p&&!r,g=(p&&!m?h:e).length;if(n=Array.isArray(n)?n:[],a)for(o=0;o<g;o++)for(f[o]=[],l=Array.isArray(e[o])?e[o]:[],u=(m?h:p?h[o]:l).length,s=0;s<u;s++)c=m?h[s]:p?h[o][s]:h,void 0!==(d=i(l[s],c,(n[o]||[])[s]))&&(f[o][s]=d);else for(o=0;o<g;o++)void 0!==(d=i(e[o],p?h[o]:h,n[o]))&&(f[o]=d);t.set(f)}else t.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),i=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var a=0;a<e.length;a++)if(i){if(!Array.isArray(e[a])||!t.freeLength&&e[a].length!==n[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!f(e[a][o],r?n[a][o]:n))return!1}else if(!f(e[a],r?n[a]:n))return!1;return!0}}},_.coerce=function(e,t,n,r,i){var a=c(n,r).get(),o=c(e,r),s=c(t,r),n=o.get(),e=t._template;if(void 0===n&&e&&(n=c(e,r).get(),e=0),void 0===i&&(i=a.dflt),a.arrayOk&&h(n))return s.set(n),n;o=_.valObjectMeta[a.valType].coerceFunction;o(n,s,i,a);t=s.get();return e&&t===i&&!f(n,a)&&(o(n=c(e,r).get(),s,i,a),t=s.get()),t},_.coerce2=function(e,t,n,r,i){var a=c(e,r),i=_.coerce(e,t,n,r,i),a=a.get();return null!=a&&i},_.coerceFont=function(e,t,n){var r={};return r.family=e(t+".family",(n=n||{}).family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},_.coercePattern=function(e,t,n,r){var i;e(t+".shape")&&(e(t+".solidity"),e(t+".size"),i="overlay"===e(t+".fillmode"),r||(r=e(t+".bgcolor",i?n:void 0),e(t+".fgcolor",i?s.contrast(r):n)),e(t+".fgopacity",i?.5:1))},_.coerceHoverinfo=function(e,t,n){var r,i=t._module.attributes,a=i.hoverinfo?i:o,i=a.hoverinfo;return 1===n._dataLength&&((r="all"===i.dflt?i.flags.slice():i.dflt.split("+")).splice(r.indexOf("name"),1),r=r.join("+")),_.coerce(e,t,a,"hoverinfo",r)},_.coerceSelectionMarkerOpacity=function(e,t){var n,r,i;!e.marker||void 0!==(n=e.marker.opacity)&&(h(n)||e.selected||e.unselected||(i=l*(r=n)),t("selected.marker.opacity",r),t("unselected.marker.opacity",i))},_.validate=f},{"../components/color":155,"../components/colorscale/scales":170,"../constants/interactions":264,"../plots/attributes":327,"./array":271,"./mod":292,"./nested_property":293,"./regex":301,"fast-isnumeric":31,tinycolor2:119}],276:[function(e,t,h){"use strict";var f,p,n=e("d3-time-format").timeFormat,u=e("fast-isnumeric"),s=e("./loggers"),m=e("./mod").mod,r=e("../constants/numerical"),g=r.BADNUM,_=r.ONEDAY,y=r.ONEHOUR,v=r.ONEMIN,b=r.ONESEC,x=r.EPOCHJD,w=e("../registry"),d=e("d3-time-format").utcFormat,T=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,k=(new Date).getFullYear()-70;function M(e){return e&&w.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function l(e,t){return String(e+Math.pow(10,t)).substr(1)}h.dateTick0=function(e,t){var n,r=(r=!!t,M(n=e)?(r?w.getComponentMethod("calendars","CANONICAL_SUNDAY"):w.getComponentMethod("calendars","CANONICAL_TICK"))[n]:r?"2000-01-02":"2000-01-01");if(t<2)return r;var r=h.dateTime2ms(r,e);return h.ms2DateTime(r+=_*(t-1),0,e)},h.dfltRange=function(e){return M(e)?w.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},h.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},h.dateTime2ms=function(e,t){if(h.isJSDate(e)){var n=e.getTimezoneOffset()*v,r=(e.getUTCMinutes()-e.getMinutes())*v+(e.getUTCSeconds()-e.getSeconds())*b+(e.getUTCMilliseconds()-e.getMilliseconds());return r&&(n=n-(l=3*v)/2+m(r-n+l/2,l)),e=Number(e)-n,f<=e&&e<=p?e:g}if("string"!=typeof e&&"number"!=typeof e)return g;e=String(e);var i=M(t),a=e.charAt(0);!i||"G"!==a&&"g"!==a||(e=e.substr(1),t="");var o=i&&"chinese"===t.substr(0,7),s=e.match(o?A:T);if(!s)return g;var r=s[1],l=s[3]||"1",n=Number(s[5]||1),a=Number(s[7]||0),e=Number(s[9]||0),s=Number(s[11]||0);if(i){if(2===r.length)return g;r=Number(r);try{var c,u,d=w.getComponentMethod("calendars","getCal")(t);u=o?(c="i"===l.charAt(l.length-1),l=parseInt(l,10),d.newDate(r,d.toMonthIndex(r,l,c),n)):d.newDate(r,Number(l),n)}catch(e){return g}return u?(u.toJD()-x)*_+a*y+e*v+s*b:g}r=2===r.length?(Number(r)+2e3-k)%100+k:Number(r),--l;e=new Date(Date.UTC(2e3,l,n,a,e));return e.setUTCFullYear(r),e.getUTCMonth()!==l||e.getUTCDate()!==n?g:e.getTime()+s*b},f=h.MIN_MS=h.dateTime2ms("-9999"),p=h.MAX_MS=h.dateTime2ms("9999-12-31 23:59:59.9999"),h.isDateTime=function(e,t){return h.dateTime2ms(e,t)!==g};var S=90*_,E=3*y,C=5*v;function L(e,t,n,r,i){if((t||n||r||i)&&(e+=" "+l(t,2)+":"+l(n,2),(r||i)&&(e+=":"+l(r,2),i))){for(var a=4;i%10==0;)--a,i/=10;e+="."+l(i,a)}return e}h.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(f<=e&&e<=p))return g;t=t||0;var r,i,a,o=Math.floor(10*m(e+.05,1)),s=Math.round(e-o/10);if(M(n)){var l=Math.floor(s/_)+x,c=Math.floor(m(e,_));try{r=w.getComponentMethod("calendars","getCal")(n).fromJD(l).formatDate("yyyy-mm-dd")}catch(e){r=d("G%Y-%m-%d")(new Date(s))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;i=t<S?Math.floor(c/y):0,a=t<S?Math.floor(c%y/v):0,l=t<E?Math.floor(c%v/b):0,c=t<C?c%b*10+o:0}else s=new Date(s),r=d("%Y-%m-%d")(s),i=t<S?s.getUTCHours():0,a=t<S?s.getUTCMinutes():0,l=t<E?s.getUTCSeconds():0,c=t<C?10*s.getUTCMilliseconds()+o:0;return L(r,i,a,l,c)},h.ms2DateTimeLocal=function(e){if(!(f+_<=e&&e<=p-_))return g;var t=Math.floor(10*m(e+.05,1)),e=new Date(Math.round(e-t/10));return L(n("%Y-%m-%d")(e),e.getHours(),e.getMinutes(),e.getSeconds(),10*e.getUTCMilliseconds()+t)},h.cleanDate=function(e,t,n){if(e===g)return t;if(h.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(M(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=h.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!h.isDateTime(e,n))return s.error("unrecognized date",e),t;return e};var a=/%\d?f/g,o=/%h/g,c={1:"1",2:"1",3:"2",4:"2"};function D(e,t,n,r){e=e.replace(a,function(e){e=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(e).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(t+.05));if(e=e.replace(o,function(){return c[n("%q")(i)]}),M(r))try{e=w.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(i)}var O=[59,59.9,59.99,59.999,59.9999];h.formatDate=function(e,t,n,r,i,a){if(i=M(i)&&i,!t)if("y"===n)t=a.year;else if("m"===n)t=a.month;else{if("d"!==n)return s=n,n=m((o=e)+.05,_),n=l(Math.floor(n/y),2)+":"+l(m(Math.floor(n/v),60),2),"M"!==s&&(u(s)||(s=0),o=(100+Math.min(m(o/b,60),O[s])).toFixed(s).substr(1),n+=":"+(o=0<s?o.replace(/0+$/,"").replace(/[\.]$/,""):o)),n+"\n"+D(a.dayMonthYear,e,r,i);t=a.dayMonth+"\n"+a.year}var o,s;return D(t,e,r,i)};var P=3*_;h.incrementMonth=function(t,e,n){n=M(n)&&n;var r=m(t,_);if(t=Math.round(t-r),n)try{var i=Math.round(t/_)+x,a=w.getComponentMethod("calendars","getCal")(n),o=a.fromJD(i);return e%12?a.add(o,e,"m"):a.add(o,e/12,"y"),(o.toJD()-x)*_+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}t=new Date(t+P);return t.setUTCMonth(t.getUTCMonth()+e)+r-P},h.findExactDates=function(e,t){for(var n,r,i=0,a=0,o=0,s=0,l=M(t)&&w.getComponentMethod("calendars","getCal")(t),c=0;c<e.length;c++)if(r=e[c],u(r)){if(!(r%_))if(l)try{1===(n=l.fromJD(r/_+x)).day()?1===n.month()?i++:a++:o++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:a++:o++}else s++;t=e.length-s;return{exactYears:i/t,exactMonths:(a+=i)/t,exactDays:(o+=a)/t}}},{"../constants/numerical":265,"../registry":373,"./loggers":289,"./mod":292,"d3-time-format":29,"fast-isnumeric":31}],277:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("./loggers"),a=e("./matrix"),o=e("gl-mat4");function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r="plotly.js-style-"+e,e=document.getElementById(r);e||((e=document.createElement("style")).setAttribute("id",r),e.appendChild(document.createTextNode("")),document.head.appendChild(e));e=e.sheet;e.insertRule?e.insertRule(t+"{"+n+"}",0):e.addRule?e.addRule(t,n,0):i.warn("addStyleRule failed")}function c(e){e=window.getComputedStyle(e,null),e=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===e?null:e.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function u(e){for(var t,n=[];(t=e)&&(t instanceof Element||t instanceof HTMLElement);)n.push(e),e=e.parentNode;return n}t.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){return(e=r.select(e)).node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){(e=document.getElementById("plotly.js-style-"+e))&&s(e)},getFullTransformMatrix:function(e){var e=u(e),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(e){e=c(e);e&&(e=a.convertCssMatrix(e),t=o.multiply(t,t,e))}),t},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},{"./loggers":289,"./matrix":291,"@plotly/d3":20,"gl-mat4":47}],278:[function(e,t,n){"use strict";var a=e("events").EventEmitter,e={init:function(n){if(n._ev instanceof a)return n;var r=new a,i=new a;return n._ev=r,n._internalEv=i,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=i.on.bind(i),n._internalOnce=i.once.bind(i),n._removeInternalListener=i.removeListener.bind(i),n._removeAllInternalListeners=i.removeAllListeners.bind(i),n.emit=function(e,t){"undefined"!=typeof jQuery&&jQuery(n).trigger(e,t),r.emit(e,t),i.emit(e,t)},n},triggerHandler:function(e,t,n){var r;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var i=e._ev;if(!i)return r;var a,o=i._events[t];if(!o)return r;function s(e){return e.listener?(i.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(i,[n]))):e.apply(i,[n])}for(o=Array.isArray(o)?o:[o],a=0;a<o.length-1;a++)s(o[a]);return e=s(o[a]),void 0!==r?r:e},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=e},{events:27}],279:[function(e,t,n){"use strict";var h=e("./is_plain_object.js"),f=Array.isArray;function p(e,t,n,r){var i,a,o,s,l,c=e[0],u=e.length;if(2===u&&f(c)&&f(e[1])&&0===c.length){if(function(e,t){for(var n,r=0;r<e.length;r++){if(null!==(n=e[r])&&"object"==typeof n)return!1;void 0!==n&&(t[r]=n)}return!0}(e[1],c))return c;c.splice(0,c.length)}for(var d=1;d<u;d++)for(a in i=e[d])l=c[a],o=i[a],r&&f(o)?c[a]=o:t&&o&&(h(o)||(s=f(o)))?(l=s?(s=!1,l&&f(l)?l:[]):l&&h(l)?l:{},c[a]=p([l,o],t,n,r)):void 0===o&&!n||(c[a]=o);return c}n.extendFlat=function(){return p(arguments,!1,!1,!1)},n.extendDeep=function(){return p(arguments,!0,!1,!1)},n.extendDeepAll=function(){return p(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return p(arguments,!0,!1,!0)}},{"./is_plain_object.js":286}],280:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var a=e[i];1!==t[a]&&(t[a]=1,n[r++]=a)}return n}},{}],281:[function(e,t,n){"use strict";function o(e){return!0===e.visible}function s(e){e=e[0].trace;return!0===e.visible&&0!==e._length}t.exports=function(e){for(var t,n=(t=e,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?s:o),r=[],i=0;i<e.length;i++){var a=e[i];n(a)&&r.push(a)}return r}},{}],282:[function(e,t,n){"use strict";var o,s,l,c=e("./mod").mod;function p(e,t,n,r,i,a,o,s){var l=n-e,n=i-e,o=o-i,i=r-t,r=a-t,s=s-a,a=l*s-o*i;if(0==a)return null;o=(n*s-o*r)/a,a=(n*i-l*r)/a;return a<0||1<a||o<0||1<o?null:{x:e+l*o,y:t+i*o}}function m(e,t,n,r,i){var a=r*e+i*t;if(a<0)return r*r+i*i;if(n<a){var o=r-e,a=i-t;return o*o+a*a}e=r*t-i*e;return e*e/n}n.segmentsIntersect=p,n.segmentDistance=function(e,t,n,r,i,a,o,s){if(p(e,t,n,r,i,a,o,s))return 0;var l=n-e,c=r-t,u=o-i,d=s-a,h=l*l+c*c,f=u*u+d*d,a=Math.min(m(l,c,h,i-e,a-t),m(l,c,h,o-e,s-t),m(u,d,f,e-i,t-a),m(u,d,f,n-i,r-a));return Math.sqrt(a)},n.getTextLocation=function(e,t,n,r){if(e===s&&r===l||(o={},s=e,l=r),o[n])return o[n];var i=e.getPointAtLength(c(n-r/2,t)),a=e.getPointAtLength(c(n+r/2,t)),r=Math.atan((a.y-i.y)/(a.x-i.x)),t=e.getPointAtLength(c(n,t)),r={x:(4*t.x+i.x+a.x)/6,y:(4*t.y+i.y+a.y)/6,theta:r};return o[n]=r},n.clearLocationCache=function(){s=null},n.getVisibleSegment=function(n,e,t){var r,i,a=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=n.getTotalLength(),d=u;function h(e){var t=n.getPointAtLength(e);0===e?r=t:e===u&&(i=t);e=t.x<a?a-t.x:t.x>o?t.x-o:0,t=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(e*e+t*t)}for(var f=h(c);f;){if(d<(c+=f+t))return;f=h(c)}for(f=h(d);f;){if((d-=f+t)<c)return;f=h(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var i,a,o,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,h=0,f=s;d<c;){if(o=(a=e.getPointAtLength(i=(h+f)/2))[n]-t,Math.abs(o)<l)return a;0<u*o?f=i:h=i,d++}return a}},{"./mod":292}],283:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],284:[function(e,t,n){"use strict";t.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),r=1<n?(n*e+n*t)/n:e+t,n=String(r).length;return 16<n&&(t=String(t).length,String(e).length+t<=n&&(-1===(n=parseFloat(r).toPrecision(12)).indexOf("e+")&&(r=+n))),r}},{}],285:[function(e,t,n){"use strict";var _=e("@plotly/d3"),y=e("d3-time-format").utcFormat,r=e("fast-isnumeric"),i=e("../constants/numerical"),a=i.FP_SAFE,o=-a,s=i.BADNUM,v=t.exports={};v.nestedProperty=e("./nested_property"),v.keyedContainer=e("./keyed_container"),v.relativeAttr=e("./relative_attr"),v.isPlainObject=e("./is_plain_object"),v.toLogRange=e("./to_log_range"),v.relinkPrivateKeys=e("./relink_private");t=e("./array");v.isTypedArray=t.isTypedArray,v.isArrayOrTypedArray=t.isArrayOrTypedArray,v.isArray1D=t.isArray1D,v.ensureArray=t.ensureArray,v.concat=t.concat,v.maxRowLength=t.maxRowLength,v.minRowLength=t.minRowLength;t=e("./mod");v.mod=t.mod,v.modHalf=t.modHalf;t=e("./coerce");v.valObjectMeta=t.valObjectMeta,v.coerce=t.coerce,v.coerce2=t.coerce2,v.coerceFont=t.coerceFont,v.coercePattern=t.coercePattern,v.coerceHoverinfo=t.coerceHoverinfo,v.coerceSelectionMarkerOpacity=t.coerceSelectionMarkerOpacity,v.validate=t.validate;t=e("./dates");v.dateTime2ms=t.dateTime2ms,v.isDateTime=t.isDateTime,v.ms2DateTime=t.ms2DateTime,v.ms2DateTimeLocal=t.ms2DateTimeLocal,v.cleanDate=t.cleanDate,v.isJSDate=t.isJSDate,v.formatDate=t.formatDate,v.incrementMonth=t.incrementMonth,v.dateTick0=t.dateTick0,v.dfltRange=t.dfltRange,v.findExactDates=t.findExactDates,v.MIN_MS=t.MIN_MS,v.MAX_MS=t.MAX_MS;t=e("./search");v.findBin=t.findBin,v.sorterAsc=t.sorterAsc,v.sorterDes=t.sorterDes,v.distinctVals=t.distinctVals,v.roundUp=t.roundUp,v.sort=t.sort,v.findIndexOfMin=t.findIndexOfMin;t=e("./stats");v.aggNums=t.aggNums,v.len=t.len,v.mean=t.mean,v.median=t.median,v.midRange=t.midRange,v.variance=t.variance,v.stdev=t.stdev,v.interp=t.interp;t=e("./matrix");v.init2dArray=t.init2dArray,v.transposeRagged=t.transposeRagged,v.dot=t.dot,v.translationMatrix=t.translationMatrix,v.rotationMatrix=t.rotationMatrix,v.rotationXYMatrix=t.rotationXYMatrix,v.apply3DTransform=t.apply3DTransform,v.apply2DTransform=t.apply2DTransform,v.apply2DTransform2=t.apply2DTransform2,v.convertCssMatrix=t.convertCssMatrix,v.inverseTransformMatrix=t.inverseTransformMatrix;t=e("./angles");v.deg2rad=t.deg2rad,v.rad2deg=t.rad2deg,v.angleDelta=t.angleDelta,v.angleDist=t.angleDist,v.isFullCircle=t.isFullCircle,v.isAngleInsideSector=t.isAngleInsideSector,v.isPtInsideSector=t.isPtInsideSector,v.pathArc=t.pathArc,v.pathSector=t.pathSector,v.pathAnnulus=t.pathAnnulus;t=e("./anchor_utils");v.isLeftAnchor=t.isLeftAnchor,v.isCenterAnchor=t.isCenterAnchor,v.isRightAnchor=t.isRightAnchor,v.isTopAnchor=t.isTopAnchor,v.isMiddleAnchor=t.isMiddleAnchor,v.isBottomAnchor=t.isBottomAnchor;t=e("./geometry2d");v.segmentsIntersect=t.segmentsIntersect,v.segmentDistance=t.segmentDistance,v.getTextLocation=t.getTextLocation,v.clearLocationCache=t.clearLocationCache,v.getVisibleSegment=t.getVisibleSegment,v.findPointOnPath=t.findPointOnPath;t=e("./extend");v.extendFlat=t.extendFlat,v.extendDeep=t.extendDeep,v.extendDeepAll=t.extendDeepAll,v.extendDeepNoArrays=t.extendDeepNoArrays;t=e("./loggers");v.log=t.log,v.warn=t.warn,v.error=t.error;t=e("./regex");v.counterRegex=t.counter;t=e("./throttle");v.throttle=t.throttle,v.throttleDone=t.done,v.clearThrottle=t.clear;t=e("./dom");function c(e){var t,n={};for(t in e)for(var r=e[t],i=0;i<r.length;i++)n[r[i]]=+t;return n}v.getGraphDiv=t.getGraphDiv,v.isPlotDiv=t.isPlotDiv,v.removeElement=t.removeElement,v.addStyleRule=t.addStyleRule,v.addRelatedStyleRule=t.addRelatedStyleRule,v.deleteRelatedStyleRule=t.deleteRelatedStyleRule,v.getFullTransformMatrix=t.getFullTransformMatrix,v.getElementTransformMatrix=t.getElementTransformMatrix,v.getElementAndAncestors=t.getElementAndAncestors,v.equalDomRects=t.equalDomRects,v.clearResponsive=e("./clear_responsive"),v.preserveDrawingBuffer=e("./preserve_drawing_buffer"),v.makeTraceGroups=e("./make_trace_groups"),v._=e("./localize"),v.notifier=e("./notifier"),v.filterUnique=e("./filter_unique"),v.filterVisible=e("./filter_visible"),v.pushUnique=e("./push_unique"),v.increment=e("./increment"),v.cleanNumber=e("./clean_number"),v.ensureNumber=function(e){return r(e)?(e=Number(e),a<e||e<o?s:e):s},v.isIndex=function(e,t){return!(void 0!==t&&t<=e)&&(r(e)&&0<=e&&e%1==0)},v.noop=e("./noop"),v.identity=e("./identity"),v.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},v.swapAttrs=function(e,t,n,r){n=n||"x",r=r||"y";for(var i=0;i<t.length;i++){var a=t[i],o=v.nestedProperty(e,a.replace("?",n)),s=v.nestedProperty(e,a.replace("?",r)),a=o.get();o.set(s.get()),s.set(a)}},v.raiseToTop=function(e){e.parentNode.appendChild(e)},v.cancelTransition=function(e){return e.transition().duration(0)},v.constrain=function(e,t,n){return n<t?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},v.bBoxIntersect=function(e,t,n){return e.left<=t.right+(n=n||0)&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},v.simpleMap=function(e,t,n,r,i){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],n,r,i);return o},v.randstr=function e(t,n,r,i){if(r=r||16,(n=void 0===n?24:n)<=0)return"0";for(var a=Math.log(Math.pow(2,n))/Math.log(r),o="",s=2;a===1/0;s*=2)a=Math.log(Math.pow(2,n/s))/Math.log(r)*s;var l=a-Math.floor(a);for(s=0;s<Math.floor(a);s++)o=Math.floor(Math.random()*r).toString(r)+o;l&&(c=Math.pow(r,l),o=Math.floor(Math.random()*c).toString(r)+o);var c=parseInt(o,r);return t&&t[o]||c!==1/0&&c>=Math.pow(2,n)?10<i?(v.warn("randstr failed uniqueness"),o):e(t,n,r,(i||0)+1):o},v.OptionControl=function(t,n){t=t||{};var r={optionList:[],_newoption:function(e){e[n]=t,r[e.name]=e,r.optionList.push(e)}};return r["_"+(n=n||"opt")]=t,r},v.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;for(var n,r,i,a=e.length,o=2*a,s=2*t-1,l=new Array(s),c=new Array(a),u=0;u<s;u++)l[u]=(1-Math.cos(Math.PI*(u+1)/t))/(2*t);for(u=0;u<a;u++){for(n=i=0;n<s;n++)(r=u+n+1-t)<-a?r-=o*Math.round(r/o):o<=r&&(r-=o*Math.floor(r/o)),r<0?r=-1-r:a<=r&&(r=o-1-r),i+=e[r]*l[n];c[u]=i}return c},v.syncOrAsync=function(e,t,n){var r;function i(){return v.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(i).then(void 0,v.promiseError);return n&&n(t)},v.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},v.noneOrAll=function(e,t,n){if(e){for(var r=!1,i=!0,a=0;a<n.length;a++)null!=e[n[a]]?r=!0:i=!1;if(r&&!i)for(a=0;a<n.length;a++)e[n[a]]=t[n[a]]}},v.mergeArray=function(e,t,n,r){var i="function"==typeof r;if(v.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][n]=i?r(s):s}},v.mergeArrayCastPositive=function(e,t,n){return v.mergeArray(e,t,n,function(e){e=+e;return isFinite(e)&&0<e?e:0})},v.fillArray=function(e,t,n,r){if(r=r||v.identity,v.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=r(e[i])},v.castOption=function(e,t,n,r){r=r||v.identity;n=v.nestedProperty(e,n).get();return v.isArrayOrTypedArray(n)?Array.isArray(t)&&v.isArrayOrTypedArray(n[t[0]])?r(n[t[0]][t[1]]):r(n[t]):n},v.extractOption=function(e,t,n,r){if(n in e)return e[n];r=v.nestedProperty(t,r).get();return Array.isArray(r)?void 0:r},v.tagSelected=function(e,t,n){var r,i=t.selectedpoints,t=t._indexToPoints;t&&(r=c(t));for(var a,o=0;o<i.length;o++){var s,l=i[o];(v.isIndex(l)||v.isArrayOrTypedArray(l)&&v.isIndex(l[0])&&v.isIndex(l[1]))&&(l=r?r[l]:l,s=n?n[l]:l,void 0!==(a=s)&&a<e.length&&(e[s].selected=1))}},v.selIndices2selPoints=function(e){var t=e.selectedpoints,e=e._indexToPoints;if(e){for(var n=c(e),r=[],i=0;i<t.length;i++){var a=t[i];v.isIndex(a)&&(a=n[a],v.isIndex(a)&&r.push(a))}return r}return t},v.getTargetArray=function(e,t){t=t.target;if("string"==typeof t&&t){e=v.nestedProperty(e,t).get();return!!Array.isArray(e)&&e}return!!Array.isArray(t)&&t},v.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});for(var r,i,a=Object.keys(e),o=0;o<a.length;o++)i=e[r=a[o]],"_"!==r.charAt(0)&&"function"!=typeof i&&("module"===r?n[r]=i:Array.isArray(i)?n[r]="colorscale"===r?i.slice():i.slice(0,3):v.isTypedArray(i)?n[r]=i.subarray(0,3):n[r]=i&&"object"==typeof i?v.minExtend(e[r],t[r]):i);for(a=Object.keys(t),o=0;o<a.length;o++)"object"==typeof(i=t[r=a[o]])&&r in n&&"object"==typeof n[r]||(n[r]=i);return n},v.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},v.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},v.isIE=function(){return void 0!==window.navigator.msSaveBlob};var l=/Version\/[\d\.]+.*Safari/;v.isSafari=function(){return l.test(window.navigator.userAgent)};var u=/iPad|iPhone|iPod/;v.isIOS=function(){return u.test(window.navigator.userAgent)};var d=/Firefox\/(\d+)\.\d+/;v.getFirefoxVersion=function(){var e=d.exec(window.navigator.userAgent);if(e&&2===e.length){e=parseInt(e[1]);if(!isNaN(e))return e}return null},v.isD3Selection=function(e){return e instanceof _.selection},v.ensureSingle=function(e,t,n,r){var i=e.select(t+(n?"."+n:""));if(i.size())return i;t=e.append(t);return n&&t.classed(n,!0),r&&t.call(r),t},v.ensureSingleById=function(e,t,n,r){var i=e.select(t+"#"+n);if(i.size())return i;n=e.append(t).attr("id",n);return r&&n.call(r),n},v.objectFromPath=function(e,t){for(var n=e.split("."),e=s={},r=0;r<n.length;r++)var i,a=n[r],o=n[r].match(/(.*)\[([0-9]+)\]/),s=o?(a=o[1],i=o[2],s=s[a]=[],r===n.length-1?s[i]=t:s[i]={},s[i]):(r===n.length-1?s[a]=t:s[a]={},s[a]);return e};var h=/^([^\[\.]+)\.(.+)?/,f=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;v.expandObjectPaths=function(e){var t,n,r,i,a,o;if("object"==typeof e&&!Array.isArray(e))for(t in e)e.hasOwnProperty(t)&&((a=t.match(h))?(r=e[t],n=a[1],delete e[t],e[n]=v.extendDeepNoArrays(e[n]||{},v.objectFromPath(t,v.expandObjectPaths(r))[n])):(a=t.match(f))?(r=e[t],n=a[1],i=parseInt(a[2]),delete e[t],e[n]=e[n]||[],"."===a[3]?(o=a[4],a=e[n][i]=e[n][i]||{},v.extendDeepNoArrays(a,v.objectFromPath(o,v.expandObjectPaths(r)))):e[n][i]=v.expandObjectPaths(r)):e[t]=v.expandObjectPaths(e[t]));return e},v.numSeparate=function(e,t,n){if(n=n||!1,"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),a=t.charAt(1),e=e.split("."),o=e[0],i=1<e.length?i+e[1]:"";if(a&&(1<e.length||4<o.length||n))for(;r.test(o);)o=o.replace(r,"$1"+a+"$2");return o+i},v.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var b=/^\w*$/;v.templateString=function(e,n){var r={};return e.replace(v.TEMPLATE_STRING_REGEX,function(e,t){t=b.test(t)?n[t]:(r[t]=r[t]||v.nestedProperty(n,t).get,r[t]());return v.isValidTextValue(t)?t:""})};var p={max:10,count:0,name:"hovertemplate"};v.hovertemplateString=function(){return g.apply(p,arguments)};var m={max:10,count:0,name:"texttemplate"};v.texttemplateString=function(){return g.apply(m,arguments)};var x=/^[:|\|]/;function g(e,h,f){var p=this,m=arguments;h=h||{};var g={};return e.replace(v.TEMPLATE_STRING_REGEX,function(e,t,n){var r,i,a="_xother"===t||"_yother"===t,o="_xother_"===t||"_yother_"===t,s="xother_"===t||"yother_"===t,l="xother"===t||"yother"===t||a||s||o,c=t;if((a||o)&&(c=c.substring(1)),(s||o)&&(c=c.substring(0,c.length-1)),l){if(void 0===(r=h[c]))return""}else for(var u,d=3;d<m.length;d++)if(u=m[d]){if(u.hasOwnProperty(c)){r=u[c];break}if(b.test(c)||(r=v.nestedProperty(u,c).get(),(r=g[c]||v.nestedProperty(u,c).get())&&(g[c]=r)),void 0!==r)break}return void 0===r&&p?(p.count<p.max&&(v.warn("Variable '"+c+"' in "+p.name+" could not be found!"),r=e),p.count===p.max&&v.warn("Too many "+p.name+" warnings - additional warnings will be suppressed"),p.count++,e):(n?(":"===n[0]&&(r=(i=f?f.numberFormat:_.format)(n.replace(x,""))(r)),"|"===n[0]&&(i=f?f.timeFormat:y,e=v.dateTime2ms(r),r=v.formatDate(e,n.replace(x,""),!1,i))):h.hasOwnProperty(i=c+"Label")&&(r=h[i]),l&&(r="("+r+")",(a||o)&&(r=" "+r),(s||o)&&(r+=" ")),r)})}v.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,i=0,a=0;a<n;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=48<=o&&o<=57,c=48<=s&&s<=57;if(l&&(r=10*r+o-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var w=2e9;v.seedPseudoRandom=function(){w=2e9},v.pseudoRandom=function(){var e=w;return w=(69069*w+1)%4294967296,Math.abs(w-e)<429496729?v.pseudoRandom():w/4294967296},v.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},i=v.extractOption(e,t,"htx","hovertext");if(v.isValidTextValue(i))return r(i);t=v.extractOption(e,t,"tx","text");return v.isValidTextValue(t)?r(t):void 0},v.isValidTextValue=function(e){return e||0===e},v.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},v.isHidden=function(e){e=window.getComputedStyle(e).display;return!e||"none"===e},v.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},v.strRotate=function(e){return e?"rotate("+e+")":""},v.strScale=function(e){return 1!==e?"scale("+e+")":""},v.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,i=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,e=e.scale;return e?1<e&&(e=1):e=0,v.strTranslate(i-e*(n+o),a-e*(r+s))+v.strScale(e)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},v.ensureUniformFontSize=function(e,t){var n=v.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},v.join2=function(e,t,n){var r=e.length;return 1<r?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},v.bigFont=function(e){return Math.round(1.2*e)};var e=v.getFirefoxVersion(),T=null!==e&&e<86;v.getPositionFromD3Event=function(){return T?[_.event.layerX,_.event.layerY]:[_.event.offsetX,_.event.offsetY]}},{"../constants/numerical":265,"./anchor_utils":269,"./angles":270,"./array":271,"./clean_number":272,"./clear_responsive":274,"./coerce":275,"./dates":276,"./dom":277,"./extend":279,"./filter_unique":280,"./filter_visible":281,"./geometry2d":282,"./identity":283,"./increment":284,"./is_plain_object":286,"./keyed_container":287,"./localize":288,"./loggers":289,"./make_trace_groups":290,"./matrix":291,"./mod":292,"./nested_property":293,"./noop":294,"./notifier":295,"./preserve_drawing_buffer":298,"./push_unique":299,"./regex":301,"./relative_attr":302,"./relink_private":303,"./search":304,"./stats":306,"./throttle":308,"./to_log_range":309,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],286:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},{}],287:[function(e,t,n){"use strict";var p=e("./nested_property"),i=/^\w*$/;t.exports=function(e,a,o,s){var r,l;o=o||"name",s=s||"value";var c={},u=a&&a.length?(l=p(e,a)).get():e;a=a||"";var d={};if(u)for(r=0;r<u.length;r++)d[u[r][o]]=r;var h=i.test(s),f={set:function(e,t){var n=null===t?4:0;if(!u){if(!l||4===n)return;u=[],l.set(u)}var r=d[e];if(void 0===r){if(4===n)return;n|=3,r=u.length,d[e]=r}else t!==(h?u[r][s]:p(u[r],s).get())&&(n|=2);var i=u[r]=u[r]||{};return i[o]=e,h?i[s]=t:p(i,s).set(t),null!==t&&(n&=-5),c[r]=c[r]|n,f},get:function(e){if(u){e=d[e];return void 0!==e?h?u[e][s]:p(u[e],s).get():void 0}},rename:function(e,t){var n=d[e];return void 0===n||(c[n]=1|c[n],d[t]=n,delete d[e],u[n][o]=t),f},remove:function(e){var t=d[e];if(void 0===t)return f;var n=u[t];if(2<Object.keys(n).length)return c[t]=2|c[t],f.set(e,null);if(h){for(r=t;r<u.length;r++)c[r]=3|c[r];for(r=t;r<u.length;r++)d[u[r][o]]--;u.splice(t,1),delete d[e]}else p(n,s).set(null),c[t]=6|c[t];return f},constructUpdate:function(){for(var e,t,n={},r=Object.keys(c),i=0;i<r.length;i++)t=r[i],e=a+"["+t+"]",u[t]?(1&c[t]&&(n[e+"."+o]=u[t][o]),2&c[t]&&(n[e+"."+s]=h?4&c[t]?null:u[t][s]:4&c[t]?null:p(u[t],s).get())):n[e]=null;return n}};return f}},{"./nested_property":293}],288:[function(e,t,n){"use strict";var l=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var i=e._context.locales,a=0;a<2;a++){var o=(i[n]||{}).dictionary;if(o){o=o[t];if(o)return o}i=l.localeRegistry}var s=n.split("-")[0];if(s===n)break;n=s}return t}},{"../registry":373}],289:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config").dfltConfig,i=e("./notifier"),t=t.exports={};t.log=function(){if(1<r.logging){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(1<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"long")}},t.warn=function(){if(0<r.logging){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}},t.error=function(){if(0<r.logging){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":318,"./notifier":295}],290:[function(e,t,n){"use strict";var i=e("@plotly/d3");t.exports=function(e,t,n){t=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});t.exit().remove(),t.enter().append("g").attr("class",n),t.order();var r=e.classed("rangeplot")?"nodeRangePlot3":"node3";return t.each(function(e){e[0][r]=i.select(this)}),t}},{"@plotly/d3":20}],291:[function(e,t,o){"use strict";var n=e("gl-mat4");o.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},o.transposeRagged=function(e){for(var t,n=0,r=e.length,i=0;i<r;i++)n=Math.max(n,e[i].length);var a=new Array(n);for(i=0;i<n;i++)for(a[i]=new Array(r),t=0;t<r;t++)a[i][t]=e[t][i];return a},o.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n=e.length;if(e[0].length)for(i=new Array(n),a=0;a<n;a++)i[a]=o.dot(e[a],t);else if(t[0].length)for(var r=o.transposeRagged(t),i=new Array(r.length),a=0;a<r.length;a++)i[a]=o.dot(e,r[a]);else for(a=i=0;a<n;a++)i+=e[a]*t[a];return i},o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},o.rotationMatrix=function(e){e=e*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},o.rotationXYMatrix=function(e,t,n){return o.dot(o.dot(o.translationMatrix(t,n),o.rotationMatrix(e)),o.translationMatrix(-t,-n))},o.apply3DTransform=function(t){return function(){var e=arguments,e=1===arguments.length?e[0]:[e[0],e[1],e[2]||0];return o.dot(t,[e[0],e[1],e[2],1]).slice(0,3)}},o.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);e=1===arguments.length?e[0]:[e[0],e[1]];return o.dot(t,[e[0],e[1],1]).slice(0,2)}},o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}},o.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(e){var t=[];return n.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":47}],292:[function(e,t,n){"use strict";t.exports={mod:function(e,t){return(e%=t)<0?e+t:e},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],293:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("./array").isArrayOrTypedArray;t.exports=function(e,t){if(u(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,i,a=0,o=t.split(".");a<o.length;){if(n=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[a]=n[1];else{if(0!==a)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),i=0;i<r.length;i++)a++,o.splice(a,0,Number(r[i]))}a++}return"object"!=typeof e?{set:function(){throw"bad container"},get:function(){},astr:t,parts:o,obj:e}:{set:f(e,o,t),get:function o(s,l){return function(){var e,t,n,r,i,a=s;for(r=0;r<l.length-1;r++){if(-1===(e=l[r])){for(t=!0,n=[],i=0;i<a.length;i++)n[i]=o(a[i],l.slice(r+1))(),n[i]!==n[0]&&(t=!1);return t?n[0]:n}if("number"==typeof e&&!d(a))return;if("object"!=typeof(a=a[e])||null===a)return}if("object"==typeof a&&null!==a&&null!==(n=a[l[r]]))return n}}(e,o),astr:t,parts:o,obj:e}};var r=/(^|\.)args\[/;function h(e,t){return void 0===e||null===e&&!t.match(r)}function f(s,l,c){return function(e){for(var t,n=s,r="",i=[[s,r]],a=h(e,c),o=0;o<l.length-1;o++){if("number"==typeof(t=l[o])&&!d(n))throw"array index but container is not an array";if(-1===t){if(a=!function(e,t,n,r){var i,a=d(n),o=!0,s=n,l=r.replace("-1",0),c=!a&&h(n,l),u=t[0];for(i=0;i<e.length;i++)l=r.replace("-1",i),a&&(s=n[i%n.length],c=h(s,l)),c&&(o=!1),p(e,i,u,c)&&f(e[i],t,r.replace("-1",i))(s);return o}(n,l.slice(o+1),e,c))break;return}if(!p(n,t,l[o+1],a))break;if("object"!=typeof(n=n[t])||null===n)throw"container is not an object";r=function(e,t){var n=t;u(t)?n="["+t+"]":e&&(n="."+t);return e+n}(r,t),i.push([n,r])}if(a){if(o===l.length-1&&(delete n[l[o]],Array.isArray(n)&&+l[o]==n.length-1))for(;n.length&&void 0===n[n.length-1];)n.pop()}else n[l[o]]=e}}function p(e,t,n,r){if(void 0===e[t]){if(r)return;e[t]="number"==typeof n?[]:{}}return 1}},{"./array":271,"fast-isnumeric":31}],294:[function(e,t,n){"use strict";t.exports=function(){}},{}],295:[function(e,t,n){"use strict";var l=e("@plotly/d3"),r=e("fast-isnumeric"),i=[];t.exports=function(e,a){var o;function s(e){e.duration(700).style("opacity",0).each("end",function(e){e=i.indexOf(e);-1!==e&&i.splice(e,1),l.select(this).remove()})}-1===i.indexOf(e)&&(i.push(e),o=1e3,r(a)?o=a:"long"===a&&(o=3e3),(e=l.select("body").selectAll(".plotly-notifier").data([0])).enter().append("div").classed("plotly-notifier",!0),e.selectAll(".notifier-note").data(i).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(s)});for(var n=t.append("p"),r=e.split(/<br\s*\/?>/g),i=0;i<r.length;i++)i&&n.append("br"),n.append("span").text(r[i]);"stick"===a?t.transition().duration(350).style("opacity",1):t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}))}},{"@plotly/d3":20,"fast-isnumeric":31}],296:[function(e,t,n){"use strict";var o=e("./setcursor"),s="data-savedcursor";t.exports=function(e,t){var n=e.attr(s);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),i=0;i<r.length;i++){var a=r[i];0===a.indexOf("cursor-")&&e.attr(s,a.substr(7)).classed(a,!1)}e.attr(s)||e.attr(s,"!!")}o(e,t)}else n&&(e.attr(s,null),"!!"===n?o(e):o(e,n))}},{"./setcursor":305}],297:[function(e,t,n){"use strict";var h=e("./matrix").dot,_=e("../constants/numerical").BADNUM,c=t.exports={};c.tester=function(e){var h=e.slice(),f=h[0][0],p=f,m=h[0][1],g=m;for(h.push(h[0]),r=1;r<h.length;r++)f=Math.min(f,h[r][0]),p=Math.max(p,h[r][0]),m=Math.min(m,h[r][1]),g=Math.max(g,h[r][1]);var i,e=!1;5===h.length&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(e=!0,i=function(e){return e[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(e=!0,i=function(e){return e[1]===h[0][1]}));for(var t=!0,n=h[0],r=1;r<h.length;r++)if(n[0]!==h[r][0]||n[1]!==h[r][1]){t=!1;break}return{xmin:f,xmax:p,ymin:m,ymax:g,pts:h,contains:e?function(e,t){var n=e[0],r=e[1];return!(n===_||n<f||p<n||r===_||r<m||g<r)&&(!t||!i(e))}:function(e,t){var n=e[0],r=e[1];if(n===_||n<f||p<n||r===_||r<m||g<r)return!1;for(var i,a,o,s=h.length,l=h[0][0],c=h[0][1],u=0,d=1;d<s;d++)if(o=l,i=c,l=h[d][0],c=h[d][1],!(n<(a=Math.min(o,l))||n>Math.max(o,l)||r>Math.max(i,c)))if(r<Math.min(i,c))n!==a&&u++;else{if(r===(o=l===o?r:i+(n-o)*(c-i)/(l-o)))return 1!==d||!t;r<=o&&n!==a&&u++}return u%2==1},isRect:e,degenerate:t}},c.isSegmentBent=function(e,t,n,r){for(var i,a,o=e[t],s=[e[n][0]-o[0],e[n][1]-o[1]],l=h(s,s),c=Math.sqrt(l),u=[-s[1]/c,s[0]/c],d=t+1;d<n;d++)if(i=[e[d][0]-o[0],e[d][1]-o[1]],(a=h(i,s))<0||l<a||Math.abs(h(i,u))>r)return!0;return!1},c.filter=function(i,a){var o=[i[0]],s=0,l=0;function e(e){i.push(e);var t=o.length,n=s;o.splice(l+1);for(var r=n+1;r<i.length;r++)r!==i.length-1&&!c.isSegmentBent(i,n,r+1,a)||(o.push(i[r]),o.length<t-2&&(s=r,l=o.length-1),n=r)}return 1<i.length&&e(i.pop()),{addPt:e,raw:i,filtered:o}}},{"../constants/numerical":265,"./matrix":291}],298:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),s=e("is-mobile");t.exports=function(e){var t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}();if("string"!=typeof t)return!0;e=s({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!e)for(var n=t.split(" "),r=1;r<n.length;r++)if(-1!==n[r].indexOf("Safari"))for(var i=r-1;-1<i;i--){var a=n[i];if("Version/"===a.substr(0,8)){a=a.substr(8).split(".")[0];if(13<=(a=o(a)?+a:a))return!0}}return e}},{"fast-isnumeric":31,"is-mobile":67}],299:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],300:[function(e,t,n){"use strict";var a=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;var r={add:function(e,t,n,r,i){var a,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(i)),e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)r.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)r.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};r.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],i=0;i<t.length;i++)n=t[i],r[i]=n!==e&&"object"==typeof n?Array.isArray(n)?a.extendDeep([],n):a.extendDeepAll({},n):n;return r}(e,n),t.apply(null,n)},t.exports=r},{"../lib":285,"../plot_api/plot_config":318}],301:[function(e,t,n){"use strict";n.counter=function(e,t,n,r){n=(t||"")+(n?"":"$"),r=!1===r?"":"^";return"xy"===e?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(r+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],302:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(i))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],303:[function(e,t,n){"use strict";var l=e("./array").isArrayOrTypedArray,c=e("./is_plain_object");t.exports=function e(t,n){for(var r in n){var i=n[r],a=t[r];if(a!==i)if("_"===r.charAt(0)||"function"==typeof i)r in t||(t[r]=i);else if(l(i)&&l(a)&&c(i[0])){if("customdata"!==r&&"ids"!==r)for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&c(i[s])&&c(a[s])&&e(a[s],i[s])}else c(i)&&c(a)&&(e(a,i),Object.keys(a).length||delete t[r])}}},{"./array":271,"./is_plain_object":286}],304:[function(e,t,u){"use strict";var c=e("fast-isnumeric"),d=e("./loggers"),o=e("./identity"),h=e("../constants/numerical").BADNUM;function f(e,t){return e<t}function p(e,t){return e<=t}function m(e,t){return t<e}function g(e,t){return t<=e}u.findBin=function(e,t,n){if(c(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,i=0,a=t.length,o=0,s=1<a?(t[a-1]-t[0])/(a-1):1,l=0<=s?n?f:p:n?g:m;for(e+=1e-9*s*(n?-1:1)*(0<=s?1:-1);i<a&&o++<100;)l(t[r=Math.floor((i+a)/2)],e)?i=r+1:a=r;return 90<o&&d.log("Long binary search..."),i-1},u.sorterAsc=function(e,t){return e-t},u.sorterDes=function(e,t){return t-e},u.distinctVals=function(e){var t,n=e.slice();for(n.sort(u.sorterAsc),t=n.length-1;-1<t&&n[t]===h;t--);for(var r,i=n[t]-n[0]||1,a=i/(t||1)/1e4,o=[],s=0;s<=t;s++){var l=n[s],c=l-r;void 0===r?(o.push(l),r=l):a<c&&(i=Math.min(i,c),o.push(l),r=l)}return{vals:o,minDiff:i}},u.roundUp=function(e,t,n){for(var r,i=0,a=t.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<a&&o++<100;)t[r=c((i+a)/2)]<=e?i=r+s:a=r-l;return t[i]},u.sort=function(e,t){for(var n=0,r=0,i=1;i<e.length;i++){var a=t(e[i],e[i-1]);if(a<0?n=1:0<a&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},u.findIndexOfMin=function(e,t){t=t||o;for(var n,r=1/0,i=0;i<e.length;i++){var a=t(e[i]);a<r&&(r=a,n=i)}return n}},{"../constants/numerical":265,"./identity":283,"./loggers":289,"fast-isnumeric":31}],305:[function(e,t,n){"use strict";t.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],306:[function(e,t,o){"use strict";var s=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,n,r){var i,a;if((!r||r>n.length)&&(r=n.length),s(t)||(t=!1),l(n[0])){for(a=new Array(r),i=0;i<r;i++)a[i]=o.aggNums(e,t,n[i]);n=a}for(i=0;i<r;i++)s(t)?s(n[i])&&(t=e(+t,+n[i])):t=n[i];return t},o.len=function(e){return o.aggNums(function(e){return e+1},0,e)},o.mean=function(e,t){return t=t||o.len(e),o.aggNums(function(e,t){return e+t},0,e)/t},o.midRange=function(e){if(void 0!==e&&0!==e.length)return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2},o.variance=function(e,t,n){return t=t||o.len(e),s(n)||(n=o.mean(e,t)),o.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},o.stdev=function(e,t,n){return Math.sqrt(o.variance(e,t,n))},o.median=function(e){e=e.slice().sort();return o.interp(e,.5)},o.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./array":271,"fast-isnumeric":31}],307:[function(e,t,n){"use strict";var g=e("@plotly/d3"),_=e("../lib"),y=_.strTranslate,v=e("../constants/xmlns_namespaces"),b=e("../constants/alignment").LINE_SPACING;function x(e,t){return e.node().getBoundingClientRect()[t]}var r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(c,e,u){var d=c.text(),h=!c.attr("data-notex")&&"undefined"!=typeof MathJax&&d.match(r),f=g.select(c.node().parentNode);if(!f.empty()){var p=c.attr("class")?c.attr("class").split(" ")[0]:"text";return p+="-math",f.selectAll("svg."+p).remove(),f.selectAll("g."+p+"-group").remove(),c.style("display",null).attr({"data-unformatted":d,"data-math":"N"}),h?(e&&e._promises||[]).push(new Promise(function(o){c.style("display","none");var n,t,r,i,e,a,s,l=parseInt(c.node().style.fontSize,10);n=h[2],t={fontSize:l},r=function(e,t,n){f.selectAll("svg."+p).remove(),f.selectAll("g."+p+"-group").remove();var r=e&&e.select("svg");if(!r||!r.node())return m(),void o();var i=f.append("g").classed(p+"-group",!0).attr({"pointer-events":"none","data-unformatted":d,"data-math":"Y"});i.node().appendChild(r.node()),t&&t.node()&&r.node().insertBefore(t.node().cloneNode(!0),r.node().firstChild),r.attr({class:p,height:n.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var a=c.node().style.fill||"black",e=r.select("g");e.attr({fill:a,stroke:a});t=x(e,"width"),n=x(e,"height"),a=+c.attr("x")-t*{start:0,middle:.5,end:1}[c.attr("text-anchor")||"start"],e=-(l||x(c,"height"))/4;"y"===p[0]?(i.attr({transform:"rotate("+[-90,+c.attr("x"),+c.attr("y")]+")"+y(-t/2,e-n/2)}),r.attr({x:+c.attr("x"),y:+c.attr("y")})):"l"===p[0]?r.attr({x:c.attr("x"),y:e-n/2}):"a"===p[0]&&0!==p.indexOf("atitle")?r.attr({x:0,y:e}):r.attr({x:a,y:+c.attr("y")+e-n/2}),u&&u.call(c,i),o(i)},MathJax.Hub.Queue(function(){return e=_.extendDeepAll({},MathJax.Hub.config),a=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(i=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+_.randstr({},64);return s=g.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(n.replace(w,"\\lt ").replace(T,"\\gt ")),MathJax.Hub.Typeset(s.node())},function(){var e,t=g.select("body").select("#MathJax_SVG_glyphs");if(s.select(".MathJax_SVG").empty()||!s.select("svg").node()?(_.log("There was an error in the tex syntax.",n),r()):(e=s.select("svg").node().getBoundingClientRect(),r(s.select(".MathJax_SVG"),t,e)),s.remove(),"SVG"!==i)return MathJax.Hub.setRenderer(i)},function(){return void 0!==a&&(MathJax.Hub.processSectionDelay=a),MathJax.Hub.Config(e)})})):m(),c}function m(){f.empty()||(p=c.attr("class")+"-math",f.select("svg."+p).remove()),c.text("").style("white-space","pre"),function(r,n){n=n.replace(C," ");var s,e=!1,l=[],i=-1;function t(){i++;var e=document.createElementNS(v.svg,"tspan");g.select(e).attr({class:"line",dy:i*b+"em"}),r.appendChild(e);var t=l;if(l=[{node:s=e}],1<t.length)for(var n=1;n<t.length;n++)a(t[n])}function a(e){var t,n,r=e.type,i={};"a"===r?(a="a",t=e.target,n=e.href,o=e.popup,n&&(i={"xlink:xlink:show":"_blank"===t||"_"!==t.charAt(0)?"new":"replace",target:t,"xlink:xlink:href":n},o&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'))):a="tspan",e.style&&(i.style=e.style);var a,o=document.createElementNS(v.svg,a);"sup"===r||"sub"===r?(c(s,S),s.appendChild(o),c(a=document.createElementNS(v.svg,"tspan"),S),g.select(a).attr("dy",M[r]),i.dy=k[r],s.appendChild(o),s.appendChild(a)):s.appendChild(o),g.select(o).attr(i),s=e.node=o,l.push(e)}function c(e,t){e.appendChild(document.createTextNode(t))}O.test(n)?t():l=[{node:s=r}];for(var o=n.split(L),u=0;u<o.length;u++){var d,h=o[u],f=h.match(D),p=f&&f[2].toLowerCase(),m=A[p];"br"===p?t():void 0===m?c(s,j(h)):f[1]?function(e){var t;1!==l.length?(e!==(t=l.pop()).type&&_.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),s=l[l.length-1].node):_.log("Ignoring unexpected end tag </"+e+">.",n)}(p):(d=f[4],h={type:p},(f=z(d,P))?(f=f.replace(F,"$1 fill:"),m&&(f+=";"+m)):m&&(f=m),f&&(h.style=f),"a"===p&&(e=!0,(f=z(d,R))&&((p=document.createElement("a")).href=f,-1!==E.indexOf(p.protocol)&&(h.href=encodeURI(decodeURI(f)),h.target=z(d,I)||"_blank",h.popup=z(d,N)))),a(h))}return e}(c.node(),d)&&c.style("pointer-events","all"),n.positionText(c),u&&u.call(c)}};var w=/(<|&lt;|&#60;)/g,T=/(>|&gt;|&#62;)/g;var A={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},k={sub:"0.3em",sup:"-0.6em"},M={sub:"-0.21em",sup:"0.42em"},S="",E=["http:","https:","mailto:","",void 0,":"],C=n.NEWLINES=/(\r\n?|\n)/g,L=/(<[^<>]*>)/,D=/<(\/?)([^ >]*)(\s+(.*))?>/i,O=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var P=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,R=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,I=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,N=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function z(e,t){if(!e)return null;t=e.match(t),t=t&&(t[3]||t[4]);return t&&j(t)}var F=/(^|;)\s*color:/;n.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],i="...".length,a=e.split(L),o=[],s="",l=0,c=0;c<a.length;c++){var u=a[c],d=u.match(D),h=d&&d[2].toLowerCase();if(h)-1!==r.indexOf(h)&&(o.push(u),s=h);else{d=u.length;if(l+d<n)o.push(u),l+=d;else if(l<n){h=n-l;s&&("br"!==s||h<=i||d<=i)&&o.pop(),i<n?o.push(u.substr(0,h-i)+"..."):o.push(u.substr(0,h));break}s=""}}return o.join("")};var i={mu:"",amp:"&",lt:"<",gt:">",nbsp:" ",times:"",plusmn:"",deg:""},a=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function j(e){return e.replace(a,function(e,t){t="#"===t.charAt(0)?function(e){if(!(1114111<e)){var t=String.fromCodePoint;if(t)return t(e);t=String.fromCharCode;return e<=65535?t(e):t(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):i[t];return t||e})}function u(e,t,r){var i,n=r.horizontalAlign,a=r.verticalAlign||"top",o=e.node().getBoundingClientRect(),s=t.node().getBoundingClientRect(),l="bottom"===a?function(){return o.bottom-i.height}:"middle"===a?function(){return o.top+(o.height-i.height)/2}:function(){return o.top},c="right"===n?function(){return o.right-i.width}:"center"===n?function(){return o.left+(o.width-i.width)/2}:function(){return o.left};return function(){i=this.node().getBoundingClientRect();var e=c()-s.left,t=l()-s.top,n=r.gd||{};return r.gd&&(n._fullLayout._calcInverseTransform(n),e=(n=_.apply3DTransform(n._fullLayout._invTransform)(e,t))[0],t=n[1]),this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}n.convertEntities=j,n.sanitizeHTML=function(e){e=e.replace(C," ");for(var t=document.createElement("p"),n=t,r=[],i=e.split(L),a=0;a<i.length;a++){var o,s,l,c=i[a],u=c.match(D),d=u&&u[2].toLowerCase();d in A?u[1]?r.length&&(n=r.pop()):(o=(s=z(l=u[4],P))?{style:s}:{},"a"!==d||(u=z(l,R))&&((s=document.createElement("a")).href=u,-1!==E.indexOf(s.protocol)&&(o.href=encodeURI(decodeURI(u)),(l=z(l,I))&&(o.target=l))),d=document.createElement(d),n.appendChild(d),g.select(d).attr(o),r.push(n=d)):n.appendChild(document.createTextNode(j(c)))}return t.innerHTML},n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,i,a){return e.each(function(){var n=g.select(this);function e(e,t){return void 0===t?null===(t=n.attr(e))&&(n.attr(e,0),t=0):n.attr(e,t),t}var t=e("x",i),r=e("y",a);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:t,y:r})})};n.makeTextShadow=function(e){var t="1px ",n="1px ",r="1px ";return t+n+r+e+", -"+t+"-"+n+r+e+", "+t+"-"+n+r+e+", -"+t+n+r+e},n.makeEditable=function(a,o){var s=o.gd,e=o.delegate,l=g.dispatch("edit","input","cancel"),t=e||a;if(a.style({"pointer-events":e?"none":"all"}),1!==a.size())throw new Error("boo");function n(){!function(){var e=g.select(s).select(".svg-container"),t=e.append("div"),n=a.node().style,r=parseFloat(n.fontSize||12),i=o.text;void 0===i&&(i=a.attr("data-unformatted"));t.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:o.fill||n.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(i).call(u(a,e,o)).on("blur",function(){s._editing=!1,a.text(this.textContent).style({opacity:1});var e=g.select(this).attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(a.node().parentNode).select(e).style({opacity:0});e=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),l.edit.call(a,e)}).on("focus",function(){var e=this;s._editing=!0,g.select(document).on("mouseup",function(){return g.event.target!==e&&void(document.activeElement===t.node()&&t.node().blur())})}).on("keyup",function(){27===g.event.which?(s._editing=!1,a.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(a,this.textContent)):(l.input.call(a,this.textContent),g.select(this).call(u(a,e,o)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(c)}(),a.style({opacity:0});var e=t.attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(a.node().parentNode).select(e).style({opacity:0})}function c(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);e=window.getSelection();e.removeAllRanges(),e.addRange(n),t.focus()}return o.immediate?n():t.on("click",n),g.rebind(a,l,"on")}},{"../constants/alignment":260,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],308:[function(e,t,n){"use strict";var s={};function l(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var r=s[e],i=Date.now();if(!r){for(var a in s)s[a].ts<i-6e4&&delete s[a];r=s[e]={ts:0,timer:null}}function o(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),i>r.ts+t?o():r.timer=setTimeout(function(){o(),r.timer=null},t)},n.done=function(e){var n=s[e];return n&&n.timer?new Promise(function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)l(s[e]),delete s[e];else for(var t in s)n.clear(t)}},{}],309:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(0<e)return Math.log(e)/Math.LN10;e=Math.log(Math.min(t[0],t[1]))/Math.LN10;return e=!r(e)?Math.log(Math.max(t[0],t[1]))/Math.LN10-6:e}},{"fast-isnumeric":31}],310:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],311:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],312:[function(e,t,n){"use strict";var s=e("../registry");t.exports=function(e){for(var t,n,r=s.layoutArrayContainers,i=s.layoutArrayRegexes,a=e.split("[")[0],o=0;o<i.length;o++)if((n=e.match(i[o]))&&0===n.index){t=n[0];break}if(!(t=t||r[r.indexOf(a)]))return!1;a=e.substr(t.length);return a?!!(n=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":373}],313:[function(e,t,n){"use strict";var r=e("../lib"),s=r.extendFlat,o=r.isPlainObject,e={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},i=e.flags.slice().concat(["fullReplot"]),a=r.flags.slice().concat("layoutReplot");function l(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function c(e,t,n){var r,i=s({},e);for(r in i){var a=i[r];o(a)&&(i[r]=function e(t,n,r,i){{if(t.valType){var a=s({},t);if(a.editType=n,Array.isArray(t.items)){a.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)a.items[o]=e(t.items[o],n,"from-root")}return a}return c(t,n,"_"===i.charAt(0)?"nested":"from-root")}}(a,t,0,r))}return"from-root"===n&&(i.editType=t),i}t.exports={traces:e,layout:r,traceFlags:function(){return l(i)},layoutFlags:function(){return l(a)},update:function(e,t){t=t.editType;if(t&&"none"!==t)for(var n=t.split("+"),r=0;r<n.length;r++)e[n[r]]=!0},overrideAll:c}},{"../lib":285}],314:[function(e,t,w){"use strict";var l=e("fast-isnumeric"),T=e("gl-mat4/fromQuat"),m=e("../registry"),A=e("../lib"),k=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),M=e("../components/color"),S=n.cleanId,c=n.getFromTrace,g=m.traceIs;function E(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=S(n,r,!0))}function C(i){function e(e,t){var n=i[e],r=i.title&&i.title[t];n&&!r&&(i.title||(i.title={}),i.title[t]=i[e],delete i[e])}i&&("string"!=typeof i.title&&"number"!=typeof i.title||(i.title={text:i.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function _(e){if(!A.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function y(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function L(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}w.clearPromiseQueue=function(e){Array.isArray(e._promises)&&0<e._promises.length&&A.log("Clearing previous rejected promises from queue."),e._promises=[]},w.cleanLayout=function(e){(e=e||{}).xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);for(var t=(k.subplotsRegistry.cartesian||{}).attrRegex,n=(k.subplotsRegistry.polar||{}).attrRegex,r=(k.subplotsRegistry.ternary||{}).attrRegex,i=(k.subplotsRegistry.gl3d||{}).attrRegex,a=Object.keys(e),o=0;o<a.length;o++){var s=a[o];if(t&&t.test(s)){var l=e[s];l.anchor&&"free"!==l.anchor&&(l.anchor=S(l.anchor)),l.overlaying&&(l.overlaying=S(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,L(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick),C(l)}else if(n&&n.test(s))C(e[s].radialaxis);else if(r&&r.test(s)){var c=e[s];C(c.aaxis),C(c.baxis),C(c.caxis)}else if(i&&i.test(s)){l=e[s],c=l.cameraposition;if(Array.isArray(c)&&4===c[0].length){for(var s=c[0],u=c[1],d=c[2],h=T([],s),f=[],p=0;p<3;++p)f[p]=u[p]+d*h[2+4*p];l.camera={eye:{x:f[0],y:f[1],z:f[2]},center:{x:u[0],y:u[1],z:u[2]},up:{x:0,y:0,z:1}},delete l.cameraposition}C(l.xaxis),C(l.yaxis),C(l.zaxis)}}var m=Array.isArray(e.annotations)?e.annotations.length:0;for(o=0;o<m;o++){var g=e.annotations[o];A.isPlainObject(g)&&(g.ref&&("paper"===g.ref?(g.xref="paper",g.yref="paper"):"data"===g.ref&&(g.xref="x",g.yref="y"),delete g.ref),E(g,"xref"),E(g,"yref"))}var _=Array.isArray(e.shapes)?e.shapes.length:0;for(o=0;o<_;o++){var y=e.shapes[o];A.isPlainObject(y)&&(E(y,"xref"),E(y,"yref"))}var v=Array.isArray(e.images)?e.images.length:0;for(o=0;o<v;o++){var b=e.images[o];A.isPlainObject(b)&&(E(b,"xref"),E(b,"yref"))}var x=e.legend;return x&&(3<x.x?(x.x=1.02,x.xanchor="left"):x.x<-2&&(x.x=-.02,x.xanchor="right"),3<x.y?(x.y=1.02,x.yanchor="bottom"):x.y<-2&&(x.y=-.02,x.yanchor="top")),C(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),M.clean(e),e.template&&e.template.layout&&w.cleanLayout(e.template.layout),e},w.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y&&(o=M.defaults,r=n.error_y.color||(g(n,"bar")?M.defaultLine:o[t%o.length]),n.error_y.color=M.addOpacity(M.rgb(r),M.opacity(r)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!g(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",w.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&w.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=S(n.xaxis,"x")),n.yaxis&&(n.yaxis=S(n.yaxis,"y")),g(n,"gl3d")&&n.scene&&(n.scene=k.subplotsRegistry.gl3d.cleanId(n.scene)),!g(n,"pie-like")&&!g(n,"bar-like"))if(Array.isArray(n.textposition))for(l=0;l<n.textposition.length;l++)n.textposition[l]=y(n.textposition[l]);else n.textposition&&(n.textposition=y(n.textposition));var r,i,a,o=m.getModule(n);if(o&&o.colorbar&&((a=(i=o.colorbar.container)?n[i]:n)&&a.colorscale&&("YIGnBu"===a.colorscale&&(a.colorscale="YlGnBu"),"YIOrRd"===a.colorscale&&(a.colorscale="YlOrRd"))),"surface"===n.type&&A.isPlainObject(n.contours))for(var s=["x","y","z"],l=0;l<s.length;l++){var c=n.contours[s[l]];A.isPlainObject(c)&&(c.highlightColor&&(c.highlightcolor=c.highlightColor,delete c.highlightColor),c.highlightWidth&&(c.highlightwidth=c.highlightWidth,delete c.highlightWidth))}if("candlestick"!==n.type&&"ohlc"!==n.type||(r=!1!==(n.increasing||{}).showlegend,o=!1!==(n.decreasing||{}).showlegend,i=_(n.increasing),a=_(n.decreasing),!1!==i&&!1!==a?(o=function(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var i,a=Math.min(e.length,t.length);for(i=0;i<a&&e.charAt(i)===t.charAt(i);i++);return e.substr(0,i).trim()}(i,a,r,o))&&(n.name=o):!i&&!a||n.name||(n.name=i||a)),Array.isArray(n.transforms)){var u=n.transforms;for(l=0;l<u.length;l++){var d=u[l];if(A.isPlainObject(d))switch(d.type){case"filter":d.filtersrc&&(d.target=d.filtersrc,delete d.filtersrc),d.calendar&&(d.valuecalendar||(d.valuecalendar=d.calendar),delete d.calendar);break;case"groupby":if(d.styles=d.styles||d.style,d.styles&&!Array.isArray(d.styles)){var h=d.styles,f=Object.keys(h);d.styles=[];for(var p=0;p<f.length;p++)d.styles.push({target:f[p],value:h[f[p]]})}}}}L(n,"line")&&delete n.line,"marker"in n&&(L(n.marker,"line")&&delete n.marker.line,L(n,"marker")&&delete n.marker),M.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),C(n),n.colorbar&&C(n.colorbar),n.marker&&n.marker.colorbar&&C(n.marker.colorbar),n.line&&n.line.colorbar&&C(n.line.colorbar),n.aaxis&&C(n.aaxis),n.baxis&&C(n.baxis)}},w.swapXYData=function(e){var t;if(A.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y&&(t="copy_ystyle"in(t=e.error_y)?t.copy_ystyle:!(t.color||t.thickness||t.width),A.swapAttrs(e,["error_?.copy_ystyle"]),t&&A.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])),"string"==typeof e.hoverinfo){for(var n=e.hoverinfo.split("+"),r=0;r<n.length;r++)"x"===n[r]?n[r]="y":"y"===n[r]&&(n[r]="x");e.hoverinfo=n.join("+")}},w.coerceTraceIndices=function(e,t){if(l(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)A.isIndex(t[r],e.data.length)?n.push(t[r]):A.warn("trace index (",t[r],") is not a number or is out of bounds");return n}return t},w.manageArrayContainers=function(e,t,n){var r=e.obj,i=e.parts,a=i.length,o=i[a-1],s=l(o);s&&null===t?(a=i.slice(0,a-1).join("."),A.nestedProperty(r,a).get().splice(o,1)):(s&&void 0===e.get()&&void 0===e.get()&&(n[e.astr]=null),e.set(t))};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function i(e){var t=e.search(r);if(0<t)return e.substr(0,t)}w.hasParent=function(e,t){for(var n=i(t);n;){if(n in e)return!0;n=i(n)}return!1};var u=["x","y","z"];w.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var i=e._fullData[r],a=0;a<3;a++){var o=c(e,i,u[a]);if(o&&"log"!==o.type){var s=o._name,o=o._id.substr(1);if("scene"===o.substr(0,5)){if(void 0!==n[o])continue;s=o+"."+s}o=s+".type";void 0===n[s]&&void 0===n[o]&&A.nestedProperty(e.layout,o).set(null)}}}},{"../components/color":155,"../lib":285,"../plots/cartesian/axis_ids":335,"../plots/plots":366,"../registry":373,"fast-isnumeric":31,"gl-mat4/fromQuat":37}],315:[function(e,t,n){"use strict";var r=e("./plot_api");n._doPlot=r._doPlot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download");e=e("./template_api");n.makeTemplate=e.makeTemplate,n.validateTemplate=e.validateTemplate},{"../snapshot/download":375,"./plot_api":317,"./template_api":322,"./to_image":323,"./validate":324}],316:[function(e,t,n){"use strict";var r=e("../lib/is_plain_object"),M=e("../lib/noop"),S=e("../lib/loggers"),E=e("../lib/search").sorterAsc,C=e("../registry");n.containerArrayMatch=e("./container_array_match");var L=n.isAddVal=function(e){return"add"===e||r(e)},D=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,r,i){var a=t.astr,o=C.getComponentMethod(a,"supplyLayoutDefaults"),s=C.getComponentMethod(a,"draw"),l=C.getComponentMethod(a,"drawOne"),c=r.replot||r.recalc||o===M||s===M,u=e.layout,r=e._fullLayout;if(n[""]){1<Object.keys(n).length&&S.warn("Full array edits are incompatible with other edits",a);var d=n[""][""];if(D(d))t.set(null);else{if(!Array.isArray(d))return S.warn("Unrecognized full array edit value",a,d),!0;t.set(d)}return c?!1:(o(u,r),s(e),!0)}for(var h,f,p,m,g,_,y,v=Object.keys(n).map(Number).sort(E),d=t.get(),b=d||[],x=i(r,a).get(),w=[],T=-1,A=b.length,k=0;k<v.length;k++)if(p=n[f=v[k]],m=Object.keys(p),g=p[""],_=L(g),f<0||f>b.length-(_?0:1))S.warn("index out of range",a,f);else if(void 0!==g)1<m.length&&S.warn("Insertion & removal are incompatible with edits to the same index.",a,f),D(g)?w.push(f):_?(b.splice(f,0,g="add"===g?{}:g),x&&x.splice(f,0,{})):S.warn("Unrecognized full object edit value",a,f,g),-1===T&&(T=f);else for(h=0;h<m.length;h++)i(b[f],m[h],a+"["+f+"].").set(p[m[h]]);for(k=w.length-1;0<=k;k--)b.splice(w[k],1),x&&x.splice(w[k],1);if(b.length?d||t.set(b):t.set(null),c)return!1;if(o(u,r),l!==M){if(-1===T)y=v;else{for(A=Math.max(b.length,A),y=[],k=0;k<v.length&&!(T<=(f=v[k]));k++)y.push(f);for(k=T;k<A;k++)y.push(k)}for(k=0;k<y.length;k++)l(e,y[k])}else s(e);return!0}},{"../lib/is_plain_object":286,"../lib/loggers":289,"../lib/noop":294,"../lib/search":304,"../registry":373,"./container_array_match":312}],317:[function(e,t,A){"use strict";var p=e("@plotly/d3"),h=e("fast-isnumeric"),u=e("has-hover"),j=e("../lib"),B=j.nestedProperty,m=e("../lib/events"),x=e("../lib/queue"),H=e("../registry"),U=e("./plot_schema"),F=e("../plots/plots"),V=e("../plots/cartesian/axes"),g=e("../components/drawing"),n=e("../components/color"),_=e("../plots/cartesian/graph_interact").initInteractions,y=e("../constants/xmlns_namespaces"),r=e("../plots/cartesian/select").clearSelect,d=e("./plot_config").dfltConfig,q=e("./manage_arrays"),Y=e("./helpers"),k=e("./subroutines"),G=e("./edit_types"),W=e("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function M(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function f(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){j.error(e)}}function v(e,t){f(e,n.combine(t,"white"))}function S(e,t){var n;e._context||(e._context=j.extendDeep({},d),n=p.select("base"),e._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:"");var r,i,a=e._context;if(t){for(r=Object.keys(t),c=0;c<r.length;c++)"editable"!==(i=r[c])&&"edits"!==i&&i in a&&("setBackground"===i&&"opaque"===t[i]?a[i]=v:a[i]=t[i]);t.plot3dPixelRatio&&!a.plotGlPixelRatio&&(a.plotGlPixelRatio=a.plot3dPixelRatio);var o=t.editable;if(void 0!==o)for(a.editable=o,r=Object.keys(a.edits),c=0;c<r.length;c++)a.edits[r[c]]=o;if(t.edits)for(r=Object.keys(t.edits),c=0;c<r.length;c++)(i=r[c])in a.edits&&(a.edits[i]=t.edits[i]);a._exportedPlot=t._exportedPlot}a.staticPlot&&(a.editable=!1,a.edits={},a.autosizable=!1,a.scrollZoom=!1,a.doubleClick=!1,a.showTips=!1,a.showLink=!1,a.displayModeBar=!1),"hover"!==a.displayModeBar||u||(a.displayModeBar=!0),"transparent"!==a.setBackground&&"function"==typeof a.setBackground||(a.setBackground=f),a._hasZeroHeight=a._hasZeroHeight||0===e.clientHeight,a._hasZeroWidth=a._hasZeroWidth||0===e.clientWidth;var e=a.scrollZoom,s=a._scrollZoom={};if(!0===e)s.cartesian=1,s.gl3d=1,s.geo=1,s.mapbox=1;else if("string"==typeof e)for(var l=e.split("+"),c=0;c<l.length;c++)s[l[c]]=1;else!1!==e&&(s.gl3d=1,s.geo=1,s.mapbox=1)}function b(e,t){for(var n,r=t+1,i=[],a=0;a<e.length;a++)(n=e[a])<0?i.push(r+n):i.push(n);return i}function T(e,t,n){for(var r,i=0;i<t.length;i++){if((r=t[i])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=e.data.length||r<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<t.indexOf(r,i+1)||0<=r&&-1<t.indexOf(-e.data.length+r)||r<0&&-1<t.indexOf(e.data.length+r))throw new Error("each index in "+n+" must be unique.")}}function E(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(T(e,t=!Array.isArray(t)?[t]:t,"currentIndices"),void 0!==(n=void 0!==n&&!Array.isArray(n)?[n]:n)&&T(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function a(e,t,n,r,i){!function(e,t,n,r){var i,a=j.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!j.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(i in T(e,n,"indices"),t){if(!Array.isArray(t[i])||t[i].length!==n.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(a&&(!(i in r)||!Array.isArray(r[i])||r[i].length!==t[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var a=function(e,t,n,r){var i,a,o,s,l,c=j.isPlainObject(r),u=[];for(l in n=b(n=!Array.isArray(n)?[n]:n,e.data.length-1),t)for(var d=0;d<n.length;d++){if(s=e.data[n[d]],i=(a=B(s,l)).get(),o=t[l][d],!j.isArrayOrTypedArray(o))throw new Error("attribute: "+l+" index: "+d+" must be an array");if(!j.isArrayOrTypedArray(i))throw new Error("cannot extend missing or non-array attribute: "+l);if(i.constructor!==o.constructor)throw new Error("cannot extend array with an array of a different type: "+l);s=c?r[l][d]:r,h(s)||(s=-1),u.push({prop:a,target:i,insert:o,maxp:Math.floor(s)})}return u}(e,t,n,r),o={},s={},l=0;l<a.length;l++){var c=a[l].prop,u=a[l].maxp,u=i(a[l].target,a[l].insert,u);c.set(u[0]),Array.isArray(o[c.astr])||(o[c.astr]=[]),o[c.astr].push(u[1]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(a[l].target.length)}return{update:o,maxPoints:s}}function s(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function o(e,t,n,r){e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var i={};if("string"==typeof t)i[t]=n;else{if(!j.isPlainObject(t))return j.warn("Restyle fail.",t,n,r),Promise.reject();i=j.extendFlat({},t),void 0===r&&(r=n)}Object.keys(i).length&&(e.changed=!0);var r=Y.coerceTraceIndices(e,r),a=l(e,i,r),i=a.flags;i.calc&&(e.calcdata=void 0),i.clearAxisTypes&&Y.clearAxisTypes(e,r,{});r=[];i.fullReplot?r.push(A._doPlot):(r.push(F.previousPromises),F.supplyDefaults(e),i.markerSize&&(F.doCalcdata(e),D(r)),i.style&&r.push(k.doTraceStyle),i.colorbars&&r.push(k.doColorBars),r.push(M)),r.push(F.rehover,F.redrag),x.add(e,o,[e,a.undoit,a.traces],o,[e,a.redoit,a.traces]);r=j.syncOrAsync(r,e);return(r=!r||!r.then?Promise.resolve():r).then(function(){return e.emit("plotly_restyle",a.eventData),e})}function X(e){return void 0===e?null:e}function Z(a,e){return e?function(e,t,n){var r=B(e,t),i=r.set;return r.set=function(e){C((n||"")+t,r.get(),e,a),i(e)},r}:B}function C(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var i=Array.isArray(t)?t:[],a=Array.isArray(n)?n:[],o=Math.max(i.length,a.length),s=0;s<o;s++)C(e+"["+s+"]",i[s],a[s],r);else if(j.isPlainObject(t)||j.isPlainObject(n)){var l,c=j.isPlainObject(t)?t:{},u=j.isPlainObject(n)?n:{};for(l in j.extendFlat({},c,u))C(e+"."+l,c[l],u[l],r)}else void 0===r[e]&&(r[e]=X(t))}function l(i,a,o){var e,s=i._fullLayout,r=i._fullData,l=i.data,c=s._guiEditing,u=Z(s._preGUI,c),t=j.extendDeepAll({},a);J(a);var n,d,h=G.traceFlags(),f={},p={};function m(){return o.map(function(){})}function g(e){e=V.id2name(e);-1===n.indexOf(e)&&n.push(e)}function _(e){return"LAYOUT"+e+".autorange"}function y(e){return"LAYOUT"+e+".range"}function v(e){for(var t=e;t<r.length;t++)if(r[t]._input===l[e])return r[t]}function b(e,t,n){var r;Array.isArray(e)?e.forEach(function(e){b(e,t,n)}):e in a||Y.hasParent(a,e)||(r="LAYOUT"===e.substr(0,6)?u(i.layout,e.replace("LAYOUT","")):(r=o[n],Z(s._tracePreGUI[v(r)._fullInput.uid],c)(l[r],e)),e in p||(p[e]=m()),void 0===p[e][n]&&(p[e][n]=X(r.get())),void 0!==t&&r.set(t))}for(d in a){if(Y.hasParent(a,d))throw new Error("cannot set "+d+" and a parent attribute simultaneously");var x,w,T=a[d];if("autobinx"!==d&&"autobiny"!==d||(d=d.charAt(d.length-1)+"bins",T=Array.isArray(T)?T.map(function(n){return function(e,t){return!1===e?r[o[t]][n]:null}}(d)):!1===T?o.map(function(t){return function(e){return r[e][t]}}(d)):null),f[d]=T,"LAYOUT"!==d.substr(0,6)){for(p[d]=m(),e=0;e<o.length;e++){var A,k,M=l[o[e]],S=v(o[e]),E=(A=Z(s._tracePreGUI[S._fullInput.uid],c)(M,d)).get();if(void 0!==(k=Array.isArray(T)?T[e%T.length]:T)){var C,L,D=A.parts[A.parts.length-1],O=d.substr(0,d.length-D.length-1),P=O?O+".":"",O=O?B(S,O).get():S,R=U.getTraceValObject(S,A.parts);if(R&&R.impliedEdits&&null!==k)for(var I in R.impliedEdits)b(j.relativeAttr(d,I),R.impliedEdits[I],e);else"thicknessmode"!==D&&"lenmode"!==D||E===k||"fraction"!==k&&"pixels"!==k||!O?"type"!==d||"pie"===k==("pie"===E)&&"funnelarea"===k==("funnelarea"===E)||(C="x",L="y","bar"!==k&&"bar"!==E||"h"!==M.orientation||(C="y",L="x"),j.swapAttrs(M,["?","?src"],"labels",C),j.swapAttrs(M,["d?","?0"],"label",C),j.swapAttrs(M,["?","?src"],"values",L),"pie"===E||"funnelarea"===E?(B(M,"marker.color").set(B(M,"marker.colors").get()),s._pielayer.selectAll("g.trace").remove()):H.traceIs(M,"cartesian")&&B(M,"marker.colors").set(B(M,"marker.color").get())):(C=s._size,L="top"===(L=O.orient)||"bottom"===L,"thicknessmode"===D?(D=L?C.h:C.w,b(P+"thickness",O.thickness*("fraction"===k?1/D:D),e)):(N=L?C.w:C.h,b(P+"len",O.len*("fraction"===k?1/N:N),e)));p[d][e]=X(E);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(d)){if("orientation"===d){A.set(k);var N=M.x&&!M.y?"h":"v";if((A.get()||N)===S.orientation)continue}else"orientationaxes"===d&&(M.orientation={v:"h",h:"v"}[S.orientation]);Y.swapXYData(M),h.calc=h.clearAxisTypes=!0}else-1!==F.dataArrayContainers.indexOf(A.parts[0])?(Y.manageArrayContainers(A,k,p),h.calc=!0):(!R||R.arrayOk&&!H.traceIs(S,"regl")&&(j.isArrayOrTypedArray(k)||j.isArrayOrTypedArray(E))?h.calc=!0:G.update(h,R),A.set(k))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(d)&&V.swap(i,o),"orientationaxes"===d&&("x"===(w=(x=B(i.layout,"hovermode")).get())?x.set("y"):"y"===w?x.set("x"):"x unified"===w?x.set("y unified"):"y unified"===w&&x.set("x unified")),-1!==["orientation","type"].indexOf(d)){for(n=[],e=0;e<o.length;e++){var z=l[o[e]];H.traceIs(z,"cartesian")&&(g(z.xaxis||"x"),g(z.yaxis||"y"))}b(n.map(_),!0,0),b(n.map(y),[0,1],0)}}else A=u(i.layout,d.replace("LAYOUT","")),p[d]=[X(A.get())],A.set(Array.isArray(T)?T[0]:T),h.calc=!0}return(h.calc||h.plot)&&(h.fullReplot=!0),{flags:h,undoit:p,redoit:f,traces:o,eventData:j.extendDeepNoArrays([],[t,o])}}function J(n){for(var e,t,r=j.counterRegex("axis",".title",!1,!1),i=/colorbar\.title$/,a=Object.keys(n),o=0;o<a.length;o++)e=a[o],t=n[e],"title"!==e&&!r.test(e)&&!i.test(e)||"string"!=typeof t&&"number"!=typeof t?-1<e.indexOf("titlefont")?s(e,e.replace("titlefont","title.font")):-1<e.indexOf("titleposition")?s(e,e.replace("titleposition","title.position")):-1<e.indexOf("titleside")?s(e,e.replace("titleside","title.side")):-1<e.indexOf("titleoffset")&&s(e,e.replace("titleoffset","title.offset")):s(e,e.replace("title","title.text"));function s(e,t){n[t]=n[e],delete n[e]}}function L(e,t,n){e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!j.isPlainObject(t))return j.warn("Relayout fail.",t,n),Promise.reject();r=j.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var i=O(e,r),n=i.flags;n.calc&&(e.calcdata=void 0);t=[F.previousPromises];n.layoutReplot?t.push(k.layoutReplot):Object.keys(r).length&&(c(e,n,i)||F.supplyDefaults(e),n.legend&&t.push(k.doLegend),n.layoutstyle&&t.push(k.layoutStyles),n.axrange&&D(t,i.rangesAltered),n.ticks&&t.push(k.doTicksRelayout),n.modebar&&t.push(k.doModeBar),n.camera&&t.push(k.doCamera),n.colorbars&&t.push(k.doColorBars),t.push(M)),t.push(F.rehover,F.redrag),x.add(e,L,[e,i.undoit],L,[e,i.redoit]);t=j.syncOrAsync(t,e);return(t=!t||!t.then?Promise.resolve(e):t).then(function(){return e.emit("plotly_relayout",i.eventData),e})}function c(e,t,n){var r=e._fullLayout;if(t.axrange){for(var i in t)if("axrange"!==i&&t[i])return;for(var a in n.rangesAltered){var o=V.id2name(a),s=e.layout[o],l=r[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)c!==a&&((c=r[V.id2name(c)]).autorange=l.autorange,c.range=l.range.slice(),c._input.range=l.range.slice())}return 1}}function D(e,o){var t=o?function(e){var t,n=[],r=!0;for(t in o){var i=V.getFromId(e,t);if(n.push(t),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&n.push(i._anchorAxis._id),i._matchGroup)for(var a in i._matchGroup)o[a]||n.push(a);i.automargin&&(r=!1)}return V.draw(e,n,{skipTitle:r})}:function(e){return V.draw(e,"redraw")};e.push(r,k.doAutoRangeAndConstraints,t,k.drawData,k.finalDraw)}var $=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Q=/^[xyz]axis[0-9]*\.autorange$/,K=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function O(e,r){var t,i=e.layout,n=e._fullLayout,a=n._guiEditing,o=Z(n._preGUI,a),s=Object.keys(r),l=V.list(e),a=j.extendDeepAll({},r),c={};for(J(r),s=Object.keys(r),R=0;R<s.length;R++)if(0===s[R].indexOf("allaxes")){for(t=0;t<l.length;t++){var u=l[t]._id.substr(1),u=-1!==u.indexOf("scene")?u+".":"",u=s[R].replace("allaxes",u+l[t]._name);r[u]||(r[u]=r[s[R]])}delete r[s[R]]}var d=G.layoutFlags(),h={},f={};function p(e,t){var n;Array.isArray(e)?e.forEach(function(e){p(e,t)}):e in r||Y.hasParent(r,e)||(n=o(i,e),e in f||(f[e]=X(n.get())),void 0!==t&&n.set(t))}var m,g,_={};function y(e){e=V.name2id(e.split(".")[0]);return _[e]=1,e}for(m in r){if(Y.hasParent(r,m))throw new Error("cannot set "+m+" and a parent attribute simultaneously");for(var v=o(i,m),b=r[m],x=v.parts.length-1;0<x&&"string"!=typeof v.parts[x];)x--;var w=v.parts[x],T=v.parts[x-1]+"."+w,A=v.parts.slice(0,x).join("."),k=B(e.layout,A).get(),M=B(n,A).get(),S=v.get();if(void 0!==b){h[m]=b,f[m]="reverse"===w?b:X(S);var E,C,L,D=U.getLayoutValObject(n,v.parts);if(D&&D.impliedEdits&&null!==b)for(var O in D.impliedEdits)p(j.relativeAttr(m,O),D.impliedEdits[O]);-1!==["width","height"].indexOf(m)?b?(p("autosize",null),p(C="height"===m?"width":"height",n[C])):n[m]=e._initialAutoSize[m]:"autosize"===m?(p("width",b?null:n.width),p("height",b?null:n.height)):T.match($)?(y(T),B(n,A+"._inputRange").set(null)):T.match(Q)?(y(T),B(n,A+"._inputRange").set(null),(L=B(n,A).get())._inputDomain&&(L._input.domain=L._inputDomain.slice())):T.match(K)&&B(n,A+"._inputDomain").set(null),"type"===w?(E=k,C="linear"===M.type&&"log"===b,L="log"===M.type&&"linear"===b,C||L?(E&&E.range?M.autorange?C&&(E.range=E.range[1]>E.range[0]?[1,2]:[2,1]):(T=E.range[0],L=E.range[1],C?(T<=0&&L<=0&&p(A+".autorange",!0),T<=0?T=L/1e6:L<=0&&(L=T/1e6),p(A+".range[0]",Math.log(T)/Math.LN10),p(A+".range[1]",Math.log(L)/Math.LN10)):(p(A+".range[0]",Math.pow(10,T)),p(A+".range[1]",Math.pow(10,L)))):p(A+".autorange",!0),Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[v.parts[0]]&&"radialaxis"===v.parts[1]&&delete n[v.parts[0]]._subplot.viewInitial["radialaxis.range"],H.getComponentMethod("annotations","convertCoords")(e,M,b,p),H.getComponentMethod("images","convertCoords")(e,M,b,p)):(p(A+".autorange",!0),p(A+".range",null)),B(n,A+"._inputRange").set(null)):w.match(W)&&(N=B(n,m).get(),(I=(b||{}).type)&&"-"!==I||(I="linear"),H.getComponentMethod("annotations","convertCoords")(e,N,I,p),H.getComponentMethod("images","convertCoords")(e,N,I,p));var P,R,I,N=q.containerArrayMatch(m);N?(P=N.array,R=N.index,I=N.property,N=D||{editType:"calc"},""!==R&&""===I&&(q.isAddVal(b)?f[m]=null:q.isRemoveVal(b)?f[m]=(B(i,P).get()||[])[R]:j.warn("unrecognized full object value",r)),G.update(d,N),c[P]||(c[P]={}),(c[P][R]||(c[P][R]={}))[I]=b,delete r[m]):"reverse"===w?(k.range?k.range.reverse():(p(A+".autorange",!0),k.range=[1,0]),M.autorange?d.calc=!0:d.plot=!0):(n._has("scatter-like")&&n._has("regl")&&"dragmode"===m&&("lasso"===b||"select"===b)&&"lasso"!==S&&"select"!==S||n._has("gl2d")?d.plot=!0:D?G.update(d,D):d.calc=!0,v.set(b))}}for(P in c)q.applyContainerArrayChanges(e,o(i,P),c[P],d,o)||(d.plot=!0);for(g in _){var z=(E=V.getFromId(e,g))&&E._constraintGroup;if(z)for(var F in d.calc=!0,z)_[F]||(V.getFromId(e,F)._constraintShrinkable=!0)}return(ee(e)||r.height||r.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,rangesAltered:_,undoit:f,redoit:h,eventData:a}}function ee(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&F.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function P(e,t,n,r){e=j.getGraphDiv(e),Y.clearPromiseQueue(e),j.isPlainObject(t)||(t={}),j.isPlainObject(n)||(n={}),Object.keys(t).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var i=Y.coerceTraceIndices(e,r),a=l(e,j.extendFlat({},t),i),r=a.flags,o=O(e,j.extendFlat({},n)),t=o.flags;(r.calc||t.calc)&&(e.calcdata=void 0),r.clearAxisTypes&&Y.clearAxisTypes(e,i,n);n=[];t.layoutReplot?n.push(k.layoutReplot):r.fullReplot?n.push(A._doPlot):(n.push(F.previousPromises),c(e,t,o)||F.supplyDefaults(e),r.style&&n.push(k.doTraceStyle),(r.colorbars||t.colorbars)&&n.push(k.doColorBars),t.legend&&n.push(k.doLegend),t.layoutstyle&&n.push(k.layoutStyles),t.axrange&&D(n,o.rangesAltered),t.ticks&&n.push(k.doTicksRelayout),t.modebar&&n.push(k.doModeBar),t.camera&&n.push(k.doCamera),n.push(M)),n.push(F.rehover,F.redrag),x.add(e,P,[e,a.undoit,o.undoit,a.traces],P,[e,a.redoit,o.redoit,a.traces]);n=j.syncOrAsync(n,e);return(n=!n||!n.then?Promise.resolve(e):n).then(function(){return e.emit("plotly_update",{data:a.eventData,layout:o.eventData}),e})}function i(n){return function(e){e._fullLayout._guiEditing=!0;var t=n.apply(null,arguments);return e._fullLayout._guiEditing=!1,t}}var R=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],I=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function N(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=e.match(r.pattern);if(i)return{head:i[1],attr:r.attr}}}function z(e,t){var n=B(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();1<r.length;)if(r.pop(),void 0!==(n=B(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function te(e,t){var n=j.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&j.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function ne(e,t,n,r){var i,a,o,s,l,c,u,d,h=r._preGUI,f=[],p={};for(i in h){if(l=N(i,R)){if(a=l.attr||l.head+".uirevision",(s=(o=B(r,a).get())&&z(a,t))&&s===o&&(null===(c=h[i])&&(c=void 0),te(d=(u=B(t,i)).get(),c))){void 0===d&&"autorange"===i.substr(i.length-9)&&f.push(i.substr(0,i.length-10)),u.set(X(B(r,i).get()));continue}}else j.warn("unrecognized GUI edit: "+i);delete h[i],"range["===i.substr(i.length-8,6)&&(p[i.substr(0,i.length-9)]=1)}for(var m=0;m<f.length;m++){var g=f[m];!p[g]||(g=B(t,g).get())&&delete g.autorange}var _,y=r._tracePreGUI;for(_ in y){var v=y[_],b=null;for(i in v){if(!b){var x=function(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}(_,n);if(x<0){delete y[_];break}var w,x=function(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}(_,e,(w=n[x]._fullInput).index);if(x<0){delete y[_];break}b=e[x]}if(l=N(i,I)){if(l.attr?s=(o=B(r,l.attr).get())&&z(l.attr,t):(o=w.uirevision,void 0===(s=b.uirevision)&&(s=t.uirevision)),s&&s===o&&(null===(c=v[i])&&(c=void 0),te(d=(u=B(b,i)).get(),c))){u.set(X(B(w,i).get()));continue}}else j.warn("unrecognized GUI edit: "+i+" in trace uid "+_);delete v[i]}}}function re(e,t,n,r){var i,a,o=r.getValObject,s=r.flags,l=r.immutable,c=r.inArray,u=r.arrayIndex;function d(){var e=i.editType;c&&-1!==e.indexOf("arraydraw")?j.pushUnique(s.arrays[c],u):(G.update(s,i),"none"!==e&&s.nChanges++,r.transition&&i.anim&&s.nChangesAnim++,($.test(g)||Q.test(g))&&(s.rangesAltered[n[0]]=1),K.test(g)&&B(t,"_inputDomain").set(null),"datarevision"===a&&(s.newDataRevision=1))}function h(e){return"data_array"===e.valType||e.arrayOk}for(a in e){if(s.calc&&!r.transition)return;var f=e[a],p=t[a],m=n.concat(a),g=m.join(".");if("_"!==a.charAt(0)&&"function"!=typeof f&&f!==p){if(("tick0"===a||"dtick"===a)&&"geo"!==n[0]){var _=t.tickmode;if("auto"===_||"array"===_||!_)continue}if(("range"!==a||!t.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==t.type)&&(i=o(m))&&(!i._compareAsJSON||JSON.stringify(f)!==JSON.stringify(p))){var y,v=i.valType,b=h(i),x=Array.isArray(f),w=Array.isArray(p);if(x&&w){var T="_input_"+a,_=e[T],T=t[T];if(Array.isArray(_)&&_===T)continue}if(void 0===p)b&&x?s.calc=!0:d();else if(i._isLinkedToArray){var A=[],T=!1;c||(s.arrays[a]=A);var k=Math.min(f.length,p.length),M=Math.max(f.length,p.length);if(k!==M){if("arraydraw"!==i.editType){d();continue}T=!0}for(y=0;y<k;y++)re(f[y],p[y],m.concat(y),j.extendFlat({inArray:a,arrayIndex:y},r));if(T)for(y=k;y<M;y++)A.push(y)}else!v&&j.isPlainObject(f)?re(f,p,m,r):b?x&&w?(l&&(s.calc=!0),(l||r.newDataRevision)&&d()):x!==w?s.calc=!0:d():x&&w&&f.length===p.length&&String(f)===String(p)||d()}}}for(a in t)if(!(a in e||"_"===a.charAt(0)||"function"==typeof t[a])){if(h(i=o(n.concat(a)))&&Array.isArray(t[a]))return void(s.calc=!0);d()}}function ie(e){var t=e._fullLayout,n=e.getBoundingClientRect();j.equalDomRects(n,t._lastBBox)||(e=t._invTransform=j.inverseTransformMatrix(j.getFullTransformMatrix(e)),t._invScaleX=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]+e[0][2]*e[0][2]),t._invScaleY=Math.sqrt(e[1][0]*e[1][0]+e[1][1]*e[1][1]+e[1][2]*e[1][2]),t._lastBBox=n)}A.animate=function(p,m,g){if(p=j.getGraphDiv(p),!j.isPlotDiv(p))throw new Error("This element is not a Plotly plot: "+p+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var _=p._transitionData;_._frameQueue||(_._frameQueue=[]);var y=(g=F.supplyAnimationDefaults(g)).transition,v=g.frame;return void 0===_._frameWaitingCnt&&(_._frameWaitingCnt=0),new Promise(function(a,o){function e(e){if(0!==e.length){for(var t=0;t<e.length;t++){var n="byname"===e[t].type?F.computeFrame(p,e[t].name):e[t].data,r=(i=t,Array.isArray(v)?i>=v.length?v[0]:v[i]:v),i=(i=t,Array.isArray(y)?i>=y.length?y[0]:y[i]:y);i.duration=Math.min(i.duration,r.duration);i={frame:n,name:e[t].name,frameOpts:r,transitionOpts:i};t===e.length-1&&(i.onComplete=function(e,t){var n=0;return function(){if(e&&++n===t)return e()}}(a,2),i.onInterrupt=o),_._frameQueue.push(i)}"immediate"===g.mode&&(_._lastFrameAt=-1/0),_._animationRaf||function(){p.emit("plotly_animating"),_._lastFrameAt=-1/0,_._timeToNext=0,_._runningTransitions=0,_._currentFrame=null;var e=function(){_._animationRaf=window.requestAnimationFrame(e),Date.now()-_._lastFrameAt>_._timeToNext&&function(){_._currentFrame&&_._currentFrame.onComplete&&_._currentFrame.onComplete();var e=_._currentFrame=_._frameQueue.shift();{var t;e?(t=e.name?e.name.toString():null,p._fullLayout._currentFrame=t,_._lastFrameAt=Date.now(),_._timeToNext=e.frameOpts.duration,F.transition(p,e.frame.data,e.frame.layout,Y.coerceTraceIndices(p,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),p.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})):(p.emit("plotly_animated"),window.cancelAnimationFrame(_._animationRaf),_._animationRaf=null)}}()};e()}()}}var t,n=0;function r(e){return Array.isArray(y)?n>=y.length?e.transitionOpts=y[n]:e.transitionOpts=y[0]:e.transitionOpts=y,n++,e}var i=[],s=null==m,l=Array.isArray(m);if(!s&&!l&&j.isPlainObject(m))i.push({type:"object",data:r(j.extendFlat({},m))});else if(s||-1!==["string","number"].indexOf(typeof m))for(f=0;f<_._frames.length;f++)(t=_._frames[f])&&(!s&&String(t.group)!==String(m)||i.push({type:"byname",name:String(t.name),data:r({name:t.name})}));else if(l)for(f=0;f<m.length;f++){var c=m[f];-1!==["number","string"].indexOf(typeof c)?(c=String(c),i.push({type:"byname",name:c,data:r({name:c})})):j.isPlainObject(c)&&i.push({type:"object",data:r(j.extendFlat({},c))})}for(f=0;f<i.length;f++)if("byname"===(t=i[f]).type&&!_._frameHash[t.data.name])return j.warn('animate failure: frame not found: "'+t.data.name+'"'),void o();-1!==["next","immediate"].indexOf(g.mode)&&function(){if(0!==_._frameQueue.length){for(;_._frameQueue.length;){var e=_._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}p.emit("plotly_animationinterrupted",[])}}(),"reverse"===g.direction&&i.reverse();var u=p._fullLayout._currentFrame;if(u&&g.fromcurrent){var d=-1;for(f=0;f<i.length;f++)if("byname"===(t=i[f]).type&&t.name===u){d=f;break}if(0<d&&d<i.length-1){for(var h=[],f=0;f<i.length;f++)t=i[f],("byname"!==i[f].type||d<f)&&h.push(t);i=h}}0<i.length?e(i):(p.emit("plotly_animated"),a())})},A.addFrames=function(e,t,n){if(e=j.getGraphDiv(e),null==t)return Promise.resolve();if(!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,i,a,o=e._transitionData._frames,s=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);for(var l,c,u,d,h=o.length+2*t.length,f=[],p={},m=t.length-1;0<=m;m--)j.isPlainObject(t[m])&&(c=(s[l=t[m].name]||p[l]||{}).name,u=t[m].name,d=s[c]||p[c],c&&u&&"number"==typeof u&&d&&w<5&&(w++,j.warn('addFrames: overwriting frame "'+(s[c]||p[c]).name+'" with a frame whose name of type "number" also equates to "'+c+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&j.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[l]={name:l},f.push({frame:F.supplyFrameDefaults(t[m]),index:n&&void 0!==n[m]&&null!==n[m]?n[m]:h+m}));f.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var g=[],_=[],y=o.length;for(m=f.length-1;0<=m;m--){if("number"==typeof(r=f[m].frame).name&&j.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;s[r.name="frame "+e._transitionData._counter++];);if(s[r.name]){for(i=0;i<o.length&&(o[i]||{}).name!==r.name;i++);g.push({type:"replace",index:i,value:r}),_.unshift({type:"replace",index:i,value:o[i]})}else a=Math.max(0,Math.min(f[m].index,y)),g.push({type:"insert",index:a,value:r}),_.unshift({type:"delete",index:a}),y++}var v=F.modifyFrames,b=F.modifyFrames;return x&&x.add(e,v,[e,_],b,[e,g]),F.modifyFrames(e,g)},A.deleteFrames=function(e,t){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,a=[],o=[];if(!t)for(t=[],n=0;n<i.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;0<=n;n--)r=t[n],a.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:i[r]});var s=F.modifyFrames,l=F.modifyFrames;return x&&x.add(e,s,[e,o],l,[e,a]),F.modifyFrames(e,a)},A.addTraces=function e(t,n,r){t=j.getGraphDiv(t);var i,a,o=[],s=A.deleteTraces,l=e,c=[t,o],u=[t,n];for(function(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(i=t[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0!==(n=void 0===n||Array.isArray(n)?n:[n])&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,n,r),n=(n=Array.isArray(n)?n:[n]).map(function(e){return j.extendFlat({},e)}),Y.cleanData(n),i=0;i<n.length;i++)t.data.push(n[i]);for(i=0;i<n.length;i++)o.push(-n.length+i);if(void 0===r)return a=A.redraw(t),x.add(t,s,c,l,u),a;Array.isArray(r)||(r=[r]);try{E(t,o,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return x.startSequence(t),x.add(t,s,c,l,u),a=A.moveTraces(t,o,r),x.stopSequence(t),a},A.deleteTraces=function e(t,n){t=j.getGraphDiv(t);var r,i,a=[],o=A.addTraces,s=e,l=[t,a,n],c=[t,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(T(t,n=Array.isArray(n)?n:[n],"indices"),(n=b(n,t.data.length-1)).sort(j.sorterDes),r=0;r<n.length;r+=1)i=t.data.splice(n[r],1)[0],a.push(i);var u=A.redraw(t);return x.add(t,o,l,s,c),u},A.extendTraces=function e(t,n,r,i){n=a(t=j.getGraphDiv(t),n,r,i,function(e,t,n){var r,i,a,o;return j.isTypedArray(e)?n<0?(r=new e.constructor(0),i=s(e,t),r=n<0?(o=i,r):(o=r,i)):(o=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),r.set(e)):n<t.length?(a=t.length-n,o.set(t.subarray(a)),r.set(e),r.set(t.subarray(0,a),e.length)):(i=n-t.length,a=e.length-i,o.set(e.subarray(a)),o.set(t,i),r.set(e.subarray(0,a)))):(o=e.concat(t),r=0<=n&&n<o.length?o.splice(0,o.length-n):[]),[o,r]}),i=A.redraw(t),n=[t,n.update,r,n.maxPoints];return x.add(t,A.prependTraces,n,e,arguments),i},A.moveTraces=function e(t,n,r){var i,a=[],o=[],s=e,l=e,c=[t=j.getGraphDiv(t),r,n],u=[t,n,r];if(E(t,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],i=0;i<n.length;i++)r.push(-n.length+i);for(r=Array.isArray(r)?r:[r],n=b(n,t.data.length-1),r=b(r,t.data.length-1),i=0;i<t.data.length;i++)-1===n.indexOf(i)&&a.push(t.data[i]);for(i=0;i<n.length;i++)o.push({newIndex:r[i],trace:t.data[n[i]]});for(o.sort(function(e,t){return e.newIndex-t.newIndex}),i=0;i<o.length;i+=1)a.splice(o[i].newIndex,0,o[i].trace);t.data=a;var d=A.redraw(t);return x.add(t,s,c,l,u),d},A.prependTraces=function e(t,n,r,i){n=a(t=j.getGraphDiv(t),n,r,i,function(e,t,n){var r,i,a,o;return j.isTypedArray(e)?n<=0?(r=new e.constructor(0),i=s(t,e),i=n<0?(o=i,r):(o=r,i)):(o=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),i.set(e)):n<t.length?(a=t.length-n,o.set(t.subarray(0,a)),i.set(t.subarray(a)),i.set(e,a)):(a=n-t.length,o.set(t),o.set(e.subarray(0,a),t.length),i.set(e.subarray(a)))):(o=t.concat(e),i=0<=n&&n<o.length?o.splice(n,o.length):[]),[o,i]}),i=A.redraw(t),n=[t,n.update,r,n.maxPoints];return x.add(t,A.extendTraces,n,e,arguments),i},A.newPlot=function(e,t,n,r){return e=j.getGraphDiv(e),F.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),F.purge(e),A._doPlot(e,t,n,r)},A._doPlot=function(i,e,t,n){var r,a;if(i=j.getGraphDiv(i),m.init(i),j.isPlainObject(e)&&(e=(a=e).data,t=a.layout,n=a.config,r=a.frames),!1===m.triggerHandler(i,"plotly_beforeplot",[e,t,n]))return Promise.reject();e||t||j.isPlotDiv(i)||j.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",i),S(i,n),t=t||{},p.select(i).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(i._promises)||(i._promises=[]);var o=0===(i.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(Y.cleanData(e),o?i.data=e:i.data.push.apply(i.data,e),i.empty=!1),i.layout&&!o||(i.layout=Y.cleanLayout(t)),F.supplyDefaults(i);var s=i._fullLayout,e=s._has("cartesian");s._replotting=!0,(o||s._shouldCreateBgLayer)&&(function(e){var t=p.select(e),n=e._fullLayout;{var r;n._calcInverseTransform=ie,n._calcInverseTransform(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),n._uid||(r={},p.selectAll("defs").each(function(){this.id&&(r[this.id.split("-")[1]]=1)}),n._uid=j.randstr(r))}n._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);t=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=t.append("g").classed("imagelayer",!0),n._shapeLowerLayer=t.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);t=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=t.append("g").classed("imagelayer",!0),n._shapeUpperLayer=t.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(i),s._shouldCreateBgLayer&&delete s._shouldCreateBgLayer),g.initGradients(i),g.initPatterns(i),o&&V.saveShowSpikeInitial(i);var l=!i.calcdata||i.calcdata.length!==(i._fullData||[]).length;l&&F.doCalcdata(i);for(var c=0;c<i.calcdata.length;c++)i.calcdata[c][0].trace=i._fullData[c];i._context.responsive?i._responsiveChartHandler||(i._responsiveChartHandler=function(){j.isHidden(i)||F.resize(i)},window.addEventListener("resize",i._responsiveChartHandler)):j.clearResponsive(i);var u=j.extendFlat({},s._size),d=0;function h(){if(F.clearAutoMarginIds(i),k.drawMarginPushers(i),V.allowAutoMargin(i),s._has("pie"))for(var e=i._fullData,t=0;t<e.length;t++){var n=e[t];"pie"===n.type&&n.automargin&&F.allowAutoMargin(i,"pie."+n.uid+".automargin")}return F.doAutoMargin(i),F.previousPromises(i)}function f(){i._transitioning||(k.doAutoRangeAndConstraints(i),o&&V.saveRangeInitial(i),H.getComponentMethod("rangeslider","calcAutorange")(i))}return t=[F.previousPromises,function(){if(r)return A.addFrames(i,r)},function e(){for(var t=s._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(i);if(!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),s._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),s._glcanvas){s._glcanvas.attr("width",s.width).attr("height",s.height);var r=s._glcanvas.data()[0].regl;if(r&&(Math.floor(s.width)!==r._gl.drawingBufferWidth||Math.floor(s.height)!==r._gl.drawingBufferHeight)){if(r="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!d)return j.log(r+" Clearing graph and plotting again."),F.cleanPlot([],{},i._fullData,s),F.supplyDefaults(i),s=i._fullLayout,F.doCalcdata(i),d++,e();j.error(r)}}return"h"===s.modebar.orientation?s._modebardiv.style("height",null).style("width","100%"):s._modebardiv.style("width",null).style("height",s.height+"px"),F.previousPromises(i)},h,function(){if(F.didMarginChange(u,s._size))return j.syncOrAsync([h,k.layoutStyles],i)}],e&&t.push(function(){if(l)return j.syncOrAsync([H.getComponentMethod("shapes","calcAutorange"),H.getComponentMethod("annotations","calcAutorange"),f],i);f()}),t.push(k.layoutStyles),e&&t.push(function(){return V.draw(i,o?"":"redraw")},function(e){e._fullLayout._insideTickLabelsAutorange&&L(e,e._fullLayout._insideTickLabelsAutorange).then(function(){e._fullLayout._insideTickLabelsAutorange=void 0})}),t.push(k.drawData,k.finalDraw,_,F.addLinks,F.rehover,F.redrag,F.doAutoMargin,function(e){e._fullLayout._insideTickLabelsAutorange&&o&&V.saveRangeInitial(e,!0)},F.previousPromises),(t=!(t=j.syncOrAsync(t,i))||!t.then?Promise.resolve():t).then(function(){return M(i),i})},A.purge=function(e){var t=(e=j.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return F.cleanPlot([],{},n,t),F.purge(e),m.purge(e),t._container&&t._container.remove(),delete e._context,e},A.react=function(e,t,n,r){var i;e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var a=e._fullData,o=e._fullLayout;if(j.isPlotDiv(e)&&a&&o){j.isPlainObject(t)&&(t=(d=t).data,n=d.layout,r=d.config,i=d.frames);var s=!1;r&&(f=j.extendDeep({},e._context),e._context=void 0,S(e,r),s=function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var i=t[r],a=n[r];if(i!==a)if(j.isPlainObject(i)&&j.isPlainObject(a)){if(e(i,a))return!0}else{if(!Array.isArray(i)||!Array.isArray(a))return!0;if(i.length!==a.length)return!0;for(var o=0;o<i.length;o++)if(i[o]!==a[o]){if(!j.isPlainObject(i[o])||!j.isPlainObject(a[o]))return!0;if(e(i[o],a[o]))return!0}}}}(f,e._context)),e.data=t||[],Y.cleanData(e.data),e.layout=n||{},Y.cleanLayout(e.layout),ne(e.data,e.layout,a,o),F.supplyDefaults(e,{skipUpdateCalc:!0});var l=e._fullData,c=e._fullLayout,u=void 0===c.datarevision,d=c.transition,h=function(e,t,n,r,i){var a=G.layoutFlags();a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,re(t,n,[],{getValObject:function(e){return U.getLayoutValObject(n,e)},flags:a,immutable:r,transition:i,gd:e}),(a.plot||a.calc)&&(a.layoutReplot=!0);i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(e,o,c,u,d),f=h.newDataRevision,p=function(e,t,n,r,i,a){var o=t.length===n.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,c=G.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(e){return e=U.getTraceValObject(l,e),!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:c,immutable:r,transition:i,newDataRevision:a,gd:e},d={};for(s=0;s<t.length;s++)n[s]&&(l=n[s]._fullInput,F.hasMakesDataTransform(l)&&(l=n[s]),d[l.uid]||(d[l.uid]=1,re(t[s]._fullInput,l,[],u)));(c.calc||c.plot)&&(c.fullReplot=!0);i&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(e,a,l,u,d,f);if(ee(e)&&(h.layoutReplot=!0),p.calc||h.calc){e.calcdata=void 0;for(var m=Object.getOwnPropertyNames(c),g=0;g<m.length;g++){var _=m[g],y=_.substring(0,5);"xaxis"!==y&&"yaxis"!==y||(_=c[_]._emptyCategories)&&_()}}else F.supplyDefaultsUpdateCalc(e.calcdata,l);var l=[];if(i&&(e._transitionData={},F.createTransitionData(e),l.push(function(){return A.addFrames(e,i)})),c.transition&&!s&&(p.anim||h.anim))h.ticks&&l.push(k.doTicksRelayout),F.doCalcdata(e),k.doAutoRangeAndConstraints(e),l.push(function(){return F.transitionFromReact(e,p,h,o)});else if(p.fullReplot||h.layoutReplot||s)e._fullLayout._skipDefaults=!0,l.push(A._doPlot);else{for(var v in h.arrays){var b=h.arrays[v];if(b.length){var x=H.getComponentMethod(v,"drawOne");if(x!==j.noop)for(var w=0;w<b.length;w++)x(e,b[w]);else{var T=H.getComponentMethod(v,"draw");if(T===j.noop)throw new Error("cannot draw components: "+v);T(e)}}}l.push(F.previousPromises),p.style&&l.push(k.doTraceStyle),(p.colorbars||h.colorbars)&&l.push(k.doColorBars),h.legend&&l.push(k.doLegend),h.layoutstyle&&l.push(k.layoutStyles),h.axrange&&D(l),h.ticks&&l.push(k.doTicksRelayout),h.modebar&&l.push(k.doModeBar),h.camera&&l.push(k.doCamera),l.push(M)}l.push(F.rehover,F.redrag),(l=j.syncOrAsync(l,e))&&l.then||(l=Promise.resolve(e))}else l=A.newPlot(e,t,n,r);return l.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},A.redraw=function(e){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return Y.cleanData(e.data),Y.cleanLayout(e.layout),e.calcdata=void 0,A._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})},A.relayout=L,A.restyle=o,A.setPlotConfig=function(e){return j.extendFlat(d,e)},A.update=P,A._guiRelayout=i(L),A._guiRestyle=i(o),A._guiUpdate=i(P),A._storeDirectGUIEdit=function(e,t,n){for(var r in n)C(r,B(e,r).get(),n[r],t)}},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"../lib/events":278,"../lib/queue":300,"../plots/cartesian/axes":331,"../plots/cartesian/constants":338,"../plots/cartesian/graph_interact":341,"../plots/cartesian/select":351,"../plots/plots":366,"../registry":373,"./edit_types":313,"./helpers":314,"./manage_arrays":316,"./plot_config":318,"./plot_schema":319,"./subroutines":321,"@plotly/d3":20,"fast-isnumeric":31,"has-hover":62}],318:[function(e,t,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};!function e(t,n){for(var r in t){var i=t[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),e(i,n[r]))}}(r,i),t.exports={configAttributes:r,dfltConfig:i}},{}],319:[function(e,t,d){"use strict";var u=e("../registry"),n=e("../lib"),h=e("../plots/attributes"),f=e("../plots/layout_attributes"),r=e("../plots/frame_attributes"),a=e("../plots/animation_attributes"),o=e("./plot_config").configAttributes,s=e("./edit_types"),l=n.extendDeepAll,p=n.isPlainObject,m=n.isArrayOrTypedArray,c=n.nestedProperty,g=n.valObjectMeta,i="_isSubplotObj",_="_isLinkedToArray",n="_deprecated",y=[i,_,"_arrayAttrRegexps",n];function v(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(b(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!p(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!b(t[++n]))return!1}else if("info_array"===e.valType){var i=t[++n];if(!b(i))return!1;var a=e.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;r=t[n];if(!b(r))return!1;e=a[i][r]}else e=a[i]}else e=a}}return e}function b(e){return e===Math.round(e)&&0<=e}function x(e){return d.crawl(e,function(e,t,n){d.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(n[t+"src"]={valType:"string",editType:"none"}):p(e)&&(e.role="object")}),d.crawl(e,function(e,t,n){var r;!e||(r=e[_])&&(delete e[_],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}),function e(t){for(var n in t)if(p(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e),e}function w(e,t,n){n=c(e,n),t=l({},t.layoutAttributes);t[i]=!0,n.set(t)}function T(e,t,n){n=c(e,n);n.set(l(n.get()||{},t))}d.IS_SUBPLOT_OBJ=i,d.IS_LINKED_TO_ARRAY=_,d.DEPRECATED=n,d.UNDERSCORE_ATTRS=y,d.get=function(){var t={};u.allTypes.forEach(function(e){t[e]=function(e){var t,n;t=u.modules[e]._module,n=t.basePlotModule;var r={type:null},a=l({},h),o=l({},t.attributes);d.crawl(o,function(e,t,n,r,i){c(a,i).set(void 0),void 0===e&&c(o,i).set(void 0)}),l(r,a),u.traceIs(e,"noOpacity")&&delete r.opacity;u.traceIs(e,"showLegend")||(delete r.showlegend,delete r.legendgroup);u.traceIs(e,"noHover")&&(delete r.hoverinfo,delete r.hoverlabel);t.selectPoints||delete r.selectedpoints;l(r,o),n.attributes&&l(r,n.attributes);r.type=e;e={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:x(r)};t.layoutAttributes&&(l(r={},t.layoutAttributes),e.layoutAttributes=x(r));t.animatable||d.crawl(e,function(e){d.isValObject(e)&&"anim"in e&&delete e.anim});return e}(e)});var e,i={};return Object.keys(u.transformsRegistry).forEach(function(e){var n,r;i[e]=(n=e,e=u.transformsRegistry[n],r=l({},e.attributes),Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];t.schema&&t.schema.transforms&&t.schema.transforms[n]&&Object.keys(t.schema.transforms[n]).forEach(function(e){T(r,t.schema.transforms[n][e],e)})}),{attributes:x(r)})}),{defs:{valObjects:g,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:s.traces,layout:s.layout},impliedEdits:{}},traces:t,layout:function(){var e,t,n={};for(e in l(n,f),u.subplotsRegistry)if((t=u.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var r=0;r<t.attr.length;r++)w(n,t,t.attr[r]);else{var i="subplot"===t.attr?t.name:t.attr;w(n,t,i)}for(e in u.componentsRegistry){var a=(t=u.componentsRegistry[e]).schema;if(a&&(a.subplots||a.layout)){a=a.subplots;if(a&&a.xaxis&&!a.yaxis)for(var o in a.xaxis)delete n.yaxis[o]}else"colorscale"===t.name?l(n,t.layoutAttributes):t.layoutAttributes&&T(n,t.layoutAttributes,t.name)}return{layoutAttributes:x(n)}}(),transforms:i,frames:(x(e={frames:l({},r)}),e.frames),animation:x(a),config:x(o)}},d.crawl=function(r,i,e,a){var o=e||0;a=a||"",Object.keys(r).forEach(function(e){var t,n=r[e];-1===y.indexOf(e)&&(i(n,e,r,o,t=(a?a+".":"")+e),d.isValObject(n)||p(n)&&"impliedEdits"!==e&&d.crawl(n,i,o+1,t))})},d.isValObject=function(e){return e&&void 0!==e.valType},d.findArrayAttributes=function(e){var i,s,l=[],c=[],u=[];function t(e,t,n,r){c=c.slice(0,r).concat([t]),u=u.slice(0,r).concat([e&&e._isLinkedToArray]),!e||"data_array"!==e.valType&&!0!==e.arrayOk||"colorbar"===c[r-1]&&("ticktext"===t||"tickvals"===t)||function e(t,n,r){var i=t[c[n]];var a=r+c[n];if(n===c.length-1)m(i)&&l.push(s+a);else if(u[n]){if(Array.isArray(i))for(var o=0;o<i.length;o++)p(i[o])&&e(i[o],n+1,a+"["+o+"].")}else p(i)&&e(i,n+1,a+".")}(i,0,"")}i=e,s="",d.crawl(h,t),e._module&&e._module.attributes&&d.crawl(e._module.attributes,t);var n=e.transforms;if(n)for(var r=0;r<n.length;r++){var a=n[r],o=a._module;o&&(s="transforms["+r+"].",i=a,d.crawl(o.attributes,t))}return l},d.getTraceValObject=function(e,t){var n,r=t[0],i=1;if("transforms"===r){if(1===t.length)return h.transforms;var a=e.transforms;if(!Array.isArray(a)||!a.length)return!1;var o=t[1];if(!b(o)||o>=a.length)return!1;a=(n=(u.transformsRegistry[a[o].type]||{}).attributes)&&n[t[2]],i=3}else{o=e._module;if(!(o=o||(u.modules[e.type||h.type.dflt]||{})._module))return!1;(a=(n=o.attributes)&&n[r])||(o=o.basePlotModule)&&o.attributes&&(a=o.attributes[r]),a=a||h[r]}return v(a,t,i)},d.getLayoutValObject=function(e,t){return v(function(e,t){var n,r,i,a,o,s=e._basePlotModules;if(s){for(n=0;n<s.length;n++){if((i=s[n]).attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!o&&i.layoutAttributes&&(o=i.layoutAttributes)}var l=i.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(o)return o}var c=e._modules;if(c)for(n=0;n<c.length;n++)if((a=c[n].layoutAttributes)&&t in a)return a[t];for(r in u.componentsRegistry){if("colorscale"===(i=u.componentsRegistry[r]).name&&0===t.indexOf("coloraxis"))return i.layoutAttributes[t];if(!i.schema&&t===i.name)return i.layoutAttributes}return t in f&&f[t]}(e,t[0]),t,1)}},{"../lib":285,"../plots/animation_attributes":325,"../plots/attributes":327,"../plots/frame_attributes":361,"../plots/layout_attributes":364,"../registry":373,"./edit_types":313,"./plot_config":318}],320:[function(e,t,n){"use strict";var d=e("../lib"),o=e("../plots/attributes"),h="templateitemname",r={name:{valType:"string",editType:"none"}};function c(e){return e&&"string"==typeof e}function i(e){var t=e.length-1;return"s"!==e.charAt(t)&&d.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}r[h]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=r.name,t[h]=r[h],t},n.traceTemplater=function(n){var r,i,a={};for(r in n)i=n[r],Array.isArray(i)&&i.length&&(a[r]=0);return{newTrace:function(e){var t={type:r=d.coerce(e,{},o,"type"),_template:null};return r in a&&(i=n[r],e=a[r]%i.length,a[r]++,t._template=i[e]),t}}},n.newContainer=function(e,t,n){var r=e._template,n=r&&(r[t]||n&&r[n]);return d.isPlainObject(n)||(n=null),e[t]={_template:n}},n.arrayTemplater=function(e,t,a){var e=e._template,o=e&&e[i(t)],s=e&&e[t];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(e){var t={name:e.name,_input:e},n=t[h]=e[h];if(!c(n))return t._template=o,t;for(var r=0;r<s.length;r++){var i=s[r];if(i.name===n)return l[n]=1,t._template=i,t}return t[a]=e[a]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<s.length;t++){var n,r=s[t],i=r.name;c(i)&&!l[i]&&((n={_template:r,name:i,_input:{_templateitemname:i}})[h]=r[h],e.push(n),l[i]=1)}return e}}},n.arrayDefaultKey=i,n.arrayEditor=function(i,e,t){var n,r=(d.nestedProperty(i,e).get()||[]).length,a=t._index,o=r<=a&&(t._input||{})._templateitemname,s=e+"["+(a=o?r:a)+"]";function l(){n={},o&&(n[s]={},n[s][h]=o)}function c(e,t){o?d.nestedProperty(n[s],e).set(t):n[s+"."+e]=t}function u(){var e=n;return l(),e}return l(),{modifyBase:function(e,t){n[e]=t},modifyItem:c,getUpdateObj:u,applyUpdate:function(e,t){e&&c(e,t);var n,r=u();for(n in r)d.nestedProperty(i,n).set(r[n])}}}},{"../lib":285,"../plots/attributes":327}],321:[function(e,t,z){"use strict";var F=e("@plotly/d3"),u=e("../registry"),j=e("../plots/plots"),B=e("../lib"),d=e("../lib/clear_gl_canvases"),H=e("../components/color"),U=e("../components/drawing"),i=e("../components/titles"),V=e("../components/modebar"),q=e("../plots/cartesian/axes"),Y=e("../constants/alignment"),n=e("../plots/cartesian/constraints"),l=n.enforce,c=n.clean,h=e("../plots/cartesian/autorange").doAutoRange;function r(e){var t,r,n=e._fullLayout,i=n._size,a=i.p,o=q.list(e,"",!0);if(n._paperdiv.style({width:e._context.responsive&&n.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":n.width+"px",height:e._context.responsive&&n.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":n.height+"px"}).selectAll(".main-svg").call(U.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor),z.drawMainTitle(e),V.manage(e),!n._has("cartesian"))return j.previousPromises(e);function s(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-a-r:t._offset+t._length+a+r:i.t+i.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+a+r:t._offset-a-r:i.l+i.w*(e.position||0)+r%1}for(t=0;t<o.length;t++){var l,c=(l=o[t])._anchorAxis;l._linepositions={},l._lw=U.crispRound(e,l.linewidth,1),l._mainLinePosition=s(l,c,l.side),l._mainMirrorPosition=l.mirror&&c?s(l,c,Y.OPPOSITE_SIDE[l.side]):null}var u,d,h,f,p=[],m=[],g=[],_=1===H.opacity(n.paper_bgcolor)&&1===H.opacity(n.plot_bgcolor)&&n.paper_bgcolor===n.plot_bgcolor;for(r in n._plots)(f=n._plots[r]).mainplot?(f.bg&&f.bg.remove(),f.bg=void 0):(u=f.xaxis.domain,d=f.yaxis.domain,h=f.plotgroup,!function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&(a[0]<t[1]&&a[1]>t[0]))return 1}}(u,d,g)?(h.select("rect.bg").remove(),g.push([u,d]),_||(p.push(r),m.push(r))):(d=h.node(),h=f.bg=B.ensureSingle(h,"rect","bg"),d.insertBefore(h.node(),d.childNodes[0]),m.push(r)));var y,v,b,x,w,T,A=n._bgLayer.selectAll(".bg").data(p);for(A.enter().append("rect").classed("bg",!0),A.exit().remove(),A.each(function(e){n._plots[e].bg=F.select(this)}),t=0;t<m.length;t++)f=n._plots[m[t]],M=f.xaxis,S=f.yaxis,f.bg&&void 0!==M._offset&&void 0!==S._offset&&f.bg.call(U.setRect,M._offset-a,S._offset-a,M._length+2*a,S._length+2*a).call(H.fill,n.plot_bgcolor).style("stroke-width",0);if(!n._hasOnlyLargeSploms)for(r in n._plots){var k,M=(f=n._plots[r]).xaxis,S=f.yaxis,E=f.clipId="clip"+n._uid+r+"plot",C=B.ensureSingleById(n._clips,"clipPath",E,function(e){e.classed("plotclip",!0).append("rect")});f.clipRect=C.select("rect").attr({width:M._length,height:S._length}),U.setTranslate(f.plot,M._offset,S._offset),E=f._hasClipOnAxisFalse?(k=null,E):(k=E,null),U.setClipUrl(f.plot,k,e),f.layerClipId=E}function L(e){return"M"+y+","+e+"H"+v}function D(e){return"M"+M._offset+","+e+"h"+M._length}function O(e){return"M"+e+","+x+"V"+b}function P(e){return"M"+e+","+S._offset+"v"+S._length}function R(e,t,n){if(!e.showline||r!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);n=t(e._mainLinePosition);return e.mirror&&(n+=t(e._mainMirrorPosition)),n}for(r in n._plots){f=n._plots[r],M=f.xaxis,S=f.yaxis;var I="M0,0";G(M,r)&&(w=W(M,"left",S,o),y=M._offset-(w?a+w:0),T=W(M,"right",S,o),v=M._offset+M._length+(T?a+T:0),N=s(M,S,"bottom"),w=s(M,S,"top"),!(T=!M._anchorAxis||r!==M._mainSubplot)||"allticks"!==M.mirror&&"all"!==M.mirror||(M._linepositions[r]=[N,w]),I=R(M,L,D),T&&M.showline&&("all"===M.mirror||"allticks"===M.mirror)&&(I+=L(N)+L(w)),f.xlines.style("stroke-width",M._lw+"px").call(H.stroke,M.showline?M.linecolor:"rgba(0,0,0,0)")),f.xlines.attr("d",I);var N="M0,0";G(S,r)&&(w=W(S,"bottom",M,o),b=S._offset+S._length+(w?a:0),I=W(S,"top",M,o),x=S._offset-(I?a:0),w=s(S,M,"left"),I=s(S,M,"right"),!(T=!S._anchorAxis||r!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[r]=[w,I]),N=R(S,O,P),T&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(N+=O(w)+O(I)),f.ylines.style("stroke-width",S._lw+"px").call(H.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),f.ylines.attr("d",N)}return q.makeClipPaths(e),j.previousPromises(e)}function G(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function o(e,t,n){if(n.showline&&n._lw){if("all"===n.mirror||"allticks"===n.mirror)return 1;var r=n._anchorAxis;if(r){var i=Y.FROM_BL[t];return n.side===t?r.domain[i]===e.domain[i]:n.mirror&&r.domain[1-i]===e.domain[1-i]}}}function W(e,t,n,r){if(o(e,t,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&o(e,t,a))return a._lw}return 0}z.layoutStyles=function(e){return B.syncOrAsync([j.doAutoMargin,r],e)},z.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var t=e.title,e="middle";B.isRightAnchor(t)?e="end":B.isLeftAnchor(t)&&(e="start");return e}(t),r=function(e){var t=e.title,e="0em";B.isTopAnchor(t)?e=Y.CAP_SHIFT+"em":B.isMiddleAnchor(t)&&(e=Y.MID_SHIFT+"em");return e}(t);i.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:function(e,t){var n=e.title,r=e._size,i=0;"start"===t?i=n.pad.l:"end"===t&&(i=-n.pad.r);return"paper"!==n.xref?e.width*n.x+i:r.l+r.w*n.x+i}(t,n),y:function(e,t){var n=e.title,r=e._size,i=0;"0em"!==t&&t?t===Y.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b;return"auto"===n.y?r.t/2:"paper"!==n.yref?e.height-e.height*n.y+i:r.t+r.h-r.h*n.y+i}(t,r),"text-anchor":n,dy:r}})},z.doTraceStyle=function(e){for(var t=e.calcdata,n=[],r=0;r<t.length;r++){var i=t[r],a=i[0]||{},o=a.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(i,o);s=s.editStyle;s&&n.push({fn:s,cd0:a})}if(n.length){for(r=0;r<n.length;r++){var c=n[r];c.fn(e,c.cd0)}d(e),z.redrawReglTraces(e)}return j.style(e),u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doColorBars=function(e){return u.getComponentMethod("colorbar","draw")(e),j.previousPromises(e)},z.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,u.call("_doPlot",e,"",t)},z.doLegend=function(e){return u.getComponentMethod("legend","draw")(e),j.previousPromises(e)},z.doTicksRelayout=function(e){return q.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(u.subplotsRegistry.splom.updateGrid(e),d(e),z.redrawReglTraces(e)),z.drawMainTitle(e),j.previousPromises(e)},z.doModeBar=function(e){var t=e._fullLayout;V.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return j.previousPromises(e)},z.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var i=t[n[r]];i._scene.setViewport(i)}},z.drawData=function(e){var t=e._fullLayout;d(e);for(var n=t._basePlotModules,r=0;r<n.length;r++)n[r].plot(e);return z.redrawReglTraces(e),j.style(e),u.getComponentMethod("shapes","draw")(e),u.getComponentMethod("annotations","draw")(e),u.getComponentMethod("images","draw")(e),t._replotting=!1,j.previousPromises(e)},z.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,i=e._fullData,a=[],o=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<i.length;n++){var s=i[n];!0===s.visible&&0!==s._length&&("splom"===s.type?t._splomScenes[s.uid].draw():"scattergl"===s.type?B.pushUnique(a,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&B.pushUnique(o,s.subplot))}for(n=0;n<a.length;n++)(r=t._plots[a[n]])._scene&&r._scene.draw();for(n=0;n<o.length;n++)(r=t[o[n]]._subplot)._scene&&r._scene.draw()}},z.doAutoRangeAndConstraints=function(e){for(var t,n=q.list(e,"",!0),r={},i=0;i<n.length;i++)if(!r[(t=n[i])._id]){r[t._id]=1,c(e,t),h(e,t);var a=t._matchGroup;if(a)for(var o in a){var s=q.getFromId(e,o);h(e,s,t.range),r[o]=1}}l(e)},z.finalDraw=function(e){u.getComponentMethod("rangeslider","draw")(e),u.getComponentMethod("rangeselector","draw")(e)},z.drawMarginPushers=function(e){u.getComponentMethod("legend","draw")(e),u.getComponentMethod("rangeselector","draw")(e),u.getComponentMethod("sliders","draw")(e),u.getComponentMethod("updatemenus","draw")(e),u.getComponentMethod("colorbar","draw")(e)}},{"../components/color":155,"../components/drawing":177,"../components/modebar":218,"../components/titles":253,"../constants/alignment":260,"../lib":285,"../lib/clear_gl_canvases":273,"../plots/cartesian/autorange":330,"../plots/cartesian/axes":331,"../plots/cartesian/constraints":339,"../plots/plots":366,"../registry":373,"@plotly/d3":20}],322:[function(e,t,n){"use strict";var y=e("../lib"),v=y.isPlainObject,d=e("./plot_schema"),p=e("../plots/plots"),h=e("../plots/attributes"),b=e("./plot_template"),m=e("./plot_config").dfltConfig;function f(s,e){s=y.extendDeep({},s);var t,l,n=Object.keys(s).sort();function r(e,t,n){if(v(t)&&v(e))f(e,t);else if(Array.isArray(t)&&Array.isArray(e)){var r=b.arrayTemplater({_template:s},n);for(l=0;l<t.length;l++){var i=t[l],a=r.newItem(i)._template;a&&f(a,i)}var o=r.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(t=0;t<n.length;t++){var i=n[t],a=s[i];if(i in e?r(a,e[i],i):e[i]=a,x(i)===i)for(var o in e){var c=x(o);o===c||c!==i||o in s||r(a,e[o],i)}}}function x(e){return e.replace(/[0-9]+$/,"")}function w(e,t,n,r,i){var a,o=i&&n(i);for(a in e){var s,l=e[a],c=T(e,a,r),u=T(e,a,i),d=n(u);if(d||(s=x(a))!==a&&(d=n(u=T(e,s,i))),(!o||o!==d)&&!(!d||d._noTemplating||"data_array"===d.valType||d.arrayOk&&Array.isArray(l)))if(!d.valType&&v(l))w(l,t,n,c,u);else if(d._isLinkedToArray&&Array.isArray(l))for(var h=!1,f=0,p={},m=0;m<l.length;m++){var g,_=l[m];v(_)&&((g=_.name)?p[g]||(w(_,t,n,T(l,f,c),T(l,f,u)),f++,p[g]=1):h||(g=T(e,b.arrayDefaultKey(a),r),w(_,t,n,_=T(l,f,c),T(l,f,u)),_=y.nestedProperty(t,_),y.nestedProperty(t,g).set(_.get()),_.set(null),h=!0))}else y.nestedProperty(t,c).set(l)}}function T(e,t,n){t=n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t;return t}function g(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=y.isPlainObject(e)?e:y.getGraphDiv(e),e=y.extendDeep({_context:m},{data:e.data,layout:e.layout}),p.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var r={data:{},layout:{}};t.forEach(function(e){var t={};w(e,t,function(e,t){return d.getTraceValObject(e,y.nestedProperty({},t).parts)}.bind(null,e));e=y.coerce(e,{},h,"type");(r.data[e]||(r.data[e]=[])).push(t)}),w(n,r.layout,function(e,t){return d.getLayoutValObject(e,y.nestedProperty({},t).parts)}.bind(null,n)),delete r.layout.template;t=n.template;if(v(t)){var i,a,o,s,l,c,n=t.layout;v(n)&&f(n,r.layout);var u=t.data;if(v(u)){for(a in r.data)if(o=u[a],Array.isArray(o)){for(c=(l=r.data[a]).length,s=o.length,i=0;i<c;i++)f(o[i%s],l[i]);for(i=c;i<s;i++)l.push(y.extendDeep({},o[i]))}for(a in u)a in r.data||(r.data[a]=y.extendDeep([],u[a]))}}return r},n.validateTemplate=function(e,t){var n=y.extendDeep({},{_context:m,data:e.data,layout:e.layout}),r=n.layout||{},e=(t=!v(t)?r.template||{}:t).layout,i=t.data,a=[];n.layout=r,n.layout.template=t,p.supplyDefaults(n);var t=n._fullLayout,o=n._fullData,s={};if(v(e)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&v(t[r])){for(var i=x(r),a=[],o=0;o<n.length;o++)a.push(T(t,r,n[o])),i!==r&&a.push(T(t,i,n[o]));for(o=0;o<a.length;o++)s[a[o]]=1;e(t[r],a)}}(t,["layout"]),function e(t,n){for(var r in t){var i;-1===r.indexOf("defaults")&&v(t[r])&&(i=T(t,r,n),s[i]?e(t[r],i):a.push({code:"unused",path:i}))}}(e,"layout")):a.push({code:"layout"}),v(i)){for(var l={},c=0;c<o.length;c++){var u,d=o[c];l[u=d.type]=(l[u]||0)+1,d._fullInput._template||a.push({code:"missing",index:d._fullInput.index,traceType:u})}for(u in i){var h=i[u].length,f=l[u]||0;f<h?a.push({code:"unused",traceType:u,templateCount:h,dataCount:f}):h<f&&a.push({code:"reused",traceType:u,templateCount:h,dataCount:f})}}else a.push({code:"data"});if(!function e(t,n){for(var r in t){var i;"_"!==r.charAt(0)&&(i=t[r],r=T(t,r,n),v(i)?(Array.isArray(t)&&!1===i._template&&i.templateitemname&&a.push({code:"missing",path:r,templateitemname:i.templateitemname}),e(i,r)):Array.isArray(i)&&function(e){for(var t=0;t<e.length;t++)if(v(e[t]))return 1}(i)&&e(i,r))}}({data:o,layout:t},""),a.length)return a.map(g)}},{"../lib":285,"../plots/attributes":327,"../plots/plots":366,"./plot_config":318,"./plot_schema":319,"./plot_template":320}],323:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),x=e("./plot_api"),w=e("../plots/plots"),T=e("../lib"),A=e("../snapshot/helpers"),k=e("../snapshot/tosvg"),M=e("../snapshot/svgtoimg"),S=e("../version").version,E={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};t.exports=function(e,n){var r,t,i,a;function o(e){return!(e in n)||T.validate(n[e],E[e])}if(n=n||{},a=T.isPlainObject(e)?(r=e.data||[],t=e.layout||{},i=e.config||{},{}):(e=T.getGraphDiv(e),r=T.extendDeep([],e.data),t=T.extendDeep({},e.layout),i=e._context,e._fullLayout||{}),!o("width")&&null!==n.width||!o("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+T.join2(E.format.values,", "," or ")+".");var s={};function l(e,t){return T.coerce(n,s,E,e,t)}var c=l("format"),u=l("width"),d=l("height"),h=l("scale"),e=l("setBackground"),f=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var m=T.extendFlat({},t);u?m.width=u:null===n.width&&b(a.width)&&(m.width=a.width),d?m.height=d:null===n.height&&b(a.height)&&(m.height=a.height);var g=T.extendFlat({},i,{_exportedPlot:!0,staticPlot:!0,setBackground:e}),_=A.getRedrawFunc(p);function y(){return new Promise(function(e){setTimeout(e,A.getDelay(p._fullLayout))})}function v(){return new Promise(function(e,t){var n=k(p,c,h),r=p._fullLayout.width,i=p._fullLayout.height;function a(){x.purge(p),document.body.removeChild(p)}if("full-json"===c){var o=w.graphJson(p,!1,"keepdata","object",!0,!0);return o.version=S,o=JSON.stringify(o),a(),e(f?o:A.encodeJSON(o))}if(a(),"svg"===c)return e(f?n:A.encodeSVG(n));o=document.createElement("canvas");o.id=T.randstr(),M({format:c,width:r,height:i,scale:h,canvas:o,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(t,n){x.newPlot(p,r,m,g).then(_).then(y).then(v).then(function(e){t((e=e,f?e.replace(A.IMAGE_URL_PREFIX,""):e))}).catch(function(e){n(e)})})}},{"../lib":285,"../plots/plots":366,"../snapshot/helpers":377,"../snapshot/svgtoimg":379,"../snapshot/tosvg":381,"../version":546,"./plot_api":317,"fast-isnumeric":31}],324:[function(e,t,n){"use strict";var D=e("../lib"),b=e("../plots/plots"),x=e("./plot_schema"),w=e("./plot_config").dfltConfig,O=D.isPlainObject,P=Array.isArray,R=D.isArrayOrTypedArray;function I(e,t,n,r,i,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=a.slice();c.push(l);var u=e[l],d=t[l],h=function(e,t){if(t in e)return e[t];t=z(t);return e[t.keyMinusId]}(n,l),f=(h||{}).valType,p="info_array"===f,m="colorscale"===f,g=(h||{}).items;if(function(e,t){var n=z(t),r=n.keyMinusId,n=n.id;if(r in e&&e[r]._isSubplotObj&&n)return!0;return t in e}(n,l))if(O(u)&&O(d)&&"any"!==f)I(u,d,h,r,i,c);else if(p&&P(u)){u.length>d.length&&r.push(N("unused",i,c.concat(d.length)));var _,y,v,b,x=d.length,w=Array.isArray(g);if(w&&(x=Math.min(x,g.length)),2===h.dimensions)for(_=0;_<x;_++)if(P(u[_])){u[_].length>d[_].length&&r.push(N("unused",i,c.concat(_,d[_].length)));for(var T=d[_].length,A=0;A<(w?Math.min(T,g[_].length):T);A++)y=w?g[_][A]:g,v=u[_][A],b=d[_][A],D.validate(v,y)?b!==v&&b!==+v&&r.push(N("dynamic",i,c.concat(_,A),v,b)):r.push(N("value",i,c.concat(_,A),v))}else r.push(N("array",i,c.concat(_),u[_]));else for(_=0;_<x;_++)y=w?g[_]:g,v=u[_],b=d[_],D.validate(v,y)?b!==v&&b!==+v&&r.push(N("dynamic",i,c.concat(_),v,b)):r.push(N("value",i,c.concat(_),v))}else if(h.items&&!p&&P(u)){for(var k=g[Object.keys(g)[0]],M=[],S=0;S<d.length;S++){var E,C,L=d[S]._index||S;(C=c.slice()).push(L),O(u[L])&&O(d[S])&&(M.push(L),E=u[L],L=d[S],O(E)&&!1!==E.visible&&!1===L.visible?r.push(N("invisible",i,C)):I(E,L,k,r,i,C))}for(S=0;S<u.length;S++)(C=c.slice()).push(S),O(u[S])?-1===M.indexOf(S)&&r.push(N("unused",i,C)):r.push(N("object",i,C,u[S]))}else!O(u)&&O(d)?r.push(N("object",i,c,u)):R(u)||!R(d)||p||m?l in t?D.validate(u,h)?"enumerated"===h.valType&&(h.coerceNumber&&u!==+d||u!==d)&&r.push(N("dynamic",i,c,u,d)):r.push(N("value",i,c,u)):r.push(N("unused",i,c,u)):r.push(N("array",i,c,u));else r.push(N("schema",i,c))}}return r}t.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,r,i=x.get(),a=[],o={_context:D.extendFlat({},w)};P(e)?(o.data=D.extendDeep([],e),n=e):(o.data=[],n=[],a.push(N("array","data"))),O(t)?(o.layout=D.extendDeep({},t),r=t):(o.layout={},r={},1<arguments.length&&a.push(N("object","layout"))),b.supplyDefaults(o);for(var s=o._fullData,l=n.length,c=0;c<l;c++){var u=n[c],d=["data",c];if(O(u)){var h=s[c],f=h.type,p=i.traces[f].attributes;!(p.type={valType:"enumerated",values:[f]})===h.visible&&!1!==u.visible&&a.push(N("invisible",d)),I(u,h,p,a,d);var m=u.transforms,g=h.transforms;if(m){P(m)||a.push(N("array",d,["transforms"])),d.push("transforms");for(var _=0;_<m.length;_++){var y=["transforms",_],v=m[_].type;O(m[_])?((v=i.transforms[v]?i.transforms[v].attributes:{}).type={valType:"enumerated",values:Object.keys(i.transforms)},I(m[_],g[_],v,a,d,y)):a.push(N("object",d,y))}}}else a.push(N("object",d))}return I(r,o._fullLayout,function(e,t){for(var n=e.layout.layoutAttributes,r=0;r<t.length;r++){var i=t[r],a=e.traces[i.type],o=a.layoutAttributes;o&&(i.subplot?D.extendFlat(n[a.attributes.subplot.dflt],o):D.extendFlat(n,o))}return n}(i,s),a,"layout"),0===a.length?void 0:a};var l={object:function(e,t){t="layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":i(e)+"key "+t;return t+" must be linked to an object container"},array:function(e,t){t="data"===e?"The data argument":i(e)+"key "+t;return t+" must be linked to an array container"},schema:function(e,t){return i(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){n=O(n)?"container":"key";return i(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[i(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?i(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[i(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function i(e){return P(e)?"In data trace "+e[1]+", ":"In "+e+", "}function N(e,t,n,r,i){var a;n=n||"";var o=P(t)?(a=t[0],t[1]):(a=t,null),s=function(e){if(!P(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),i=l[e](t,s,r,i);return D.log(i),{code:e,container:a,trace:o,path:n,astr:s,msg:i}}var r=D.counterRegex("([a-z]+)");function z(e){e=e.match(r);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":285,"../plots/plots":366,"./plot_config":318,"./plot_schema":319}],325:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],326:[function(e,t,n){"use strict";var p=e("../lib"),m=e("../plot_api/plot_template");t.exports=function(e,t,n){var r,i=n.name,a=n.inclusionAttr||"visible",o=t[i],s=p.isArrayOrTypedArray(e[i])?e[i]:[],l=t[i]=[],c=m.arrayTemplater(t,i,a);for(f=0;f<s.length;f++){var u=s[f];p.isPlainObject(u)?r=c.newItem(u):(r=c.newItem({}))[a]=!1,r._index=f,!1!==r[a]&&n.handleItemDefaults(u,r,t,n),l.push(r)}var d=c.defaultItems();for(f=0;f<d.length;f++)(r=d[f])._index=l.length,n.handleItemDefaults({},r,t,n,{}),l.push(r);if(p.isArrayOrTypedArray(o))for(var h=Math.min(o.length,l.length),f=0;f<h;f++)p.relinkPrivateKeys(l[f],o[f]);return l}},{"../lib":285,"../plot_api/plot_template":320}],327:[function(e,t,n){"use strict";var r=e("./font_attributes"),e=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:r({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":186,"./font_attributes":360}],328:[function(e,t,n){"use strict";var v=e("fast-isnumeric"),r=e("../../lib"),b=r.dateTime2ms,x=r.incrementMonth,w=e("../../constants/numerical").ONEAVGMONTH;t.exports=function(e,t,n,r){if("date"!==t.type)return r;var i=e[n+"periodalignment"];if(!i)return r;var a,o=e[n+"period"];if(v(o)){if((o=+o)<=0)return r}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(0<s&&Math.round(s)===s))return r;a=s}for(var l=t.calendar,c="start"===i,u="end"===i,n=e[n+"period0"],d=b(n,l)||0,h=[],f=r.length,p=0;p<f;p++){var m,g,_,y=r[p];if(a){for(m=Math.round((y-d)/(a*w)),_=x(d,a*m,l);y<_;)_=x(_,-a,l);for(;_<=y;)_=x(_,a,l);g=x(_,-a,l)}else{for(_=d+(m=Math.round((y-d)/o))*o;y<_;)_-=o;for(;_<=y;)_+=o;g=_-o}h[p]=c?g:u?_:(g+_)/2}return h}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],329:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],330:[function(e,t,n){"use strict";var f=e("@plotly/d3"),S=e("fast-isnumeric"),k=e("../../lib"),E=e("../../constants/numerical").FP_SAFE,a=e("../../registry"),p=e("../../components/drawing"),e=e("./axis_ids"),m=e.getFromId,s=e.isLinked;function o(e,t){var n,r=[],i=e._fullLayout,a=C(i,t,0),o=C(i,t,1),s=L(e,t),l=s.min,c=s.max;if(0===l.length||0===c.length)return k.simpleMap(t.range,t.r2l);for(var u=l[0].val,d=c[0].val,h=1;h<l.length&&u===d;h++)u=Math.min(u,l[h].val);for(h=1;h<c.length&&u===d;h++)d=Math.max(d,c[h].val);var f=!1;t.range&&(f=(b=k.simpleMap(t.range,t.r2l))[1]<b[0]),"reversed"===t.autorange&&(t.autorange=f=!0);var p,m,g,_,y,v,b,x=t.rangemode,i="tozero"===x,e="nonnegative"===x,w=t._length,T=w/10,A=0;for(h=0;h<l.length;h++)for(p=l[h],n=0;n<c.length;n++)0<(v=(m=c[n]).val-p.val-M(t,p.val,m.val))&&(T<(y=w-a(p)-o(m))?A<v/y&&(g=p,_=m,A=v/y):A<v/w&&(g={val:p.val,nopad:1},_={val:m.val,nopad:1},A=v/w));return r=u===d?(s=u-1,b=u+1,i?0===u?[0,1]:(x=(0<u?c:l).reduce(function(e,t){return Math.max(e,o(t))},0),x=u/(1-Math.min(.5,x/w)),0<u?[0,x]:[x,0]):e?[Math.max(0,s),Math.max(1,b)]:[s,b]):(i?(0<=g.val&&(g={val:0,nopad:1}),_.val<=0&&(_={val:0,nopad:1})):e&&(g.val-A*a(g)<0&&(g={val:0,nopad:1}),_.val<=0&&(_={val:1,nopad:1})),A=(_.val-g.val-M(t,p.val,m.val))/(w-a(g)-o(_)),[g.val-A*a(g),_.val+A*o(_)]),f&&r.reverse(),k.simpleMap(r,t.l2r||Number)}function M(e,t,n){var r=0;if(e.rangebreaks)for(var i=e.locateBreaks(t,n),a=0;a<i.length;a++){var o=i[a];r+=o.max-o.min}return r}function C(e,t,n){var r,i=.05*t._length,a=t._anchorAxis||{};-1===(t.ticklabelposition||"").indexOf("inside")&&-1===(a.ticklabelposition||"").indexOf("inside")||(r=!(r="reversed"===t.autorange)?(a=k.simpleMap(t.range,t.r2l))[1]<a[0]:r)&&(n=!n);var o=0;return s(e,t._id)||(o=function(e,t,n){var r,i=0,a="x"===t._id.charAt(0);for(r in e._plots){var o=e._plots[r];if(t._id===o.xaxis._id||t._id===o.yaxis._id){var s=(a?o.yaxis:o.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===s.side||"bottom"===s.side)||n&&("top"===s.side||"right"===s.side))){if(s._vals){var o=k.deg2rad(s._tickAngles[s._id+"tick"]||0),l=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o));s._vals[0].bb||(o=s._id+"tick",s._selections[o].each(function(e){var t=f.select(this);t.select(".text-math-group").empty()&&(e.bb=p.bBox(t.node()))}));for(var u=0;u<s._vals.length;u++){var d,h=s._vals[u].bb;h&&(d=2*g+h.width,h=2*g+h.height,i=Math.max(i,a?Math.max(d*l,h*c):Math.max(h*l,d*c)))}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(i+=s.ticklen||0)}}}return i}(e,t,n)),i=Math.max(o,i),"domain"===t.constrain&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?i:o)}}t.exports={getAutoRange:o,makePadFn:C,doAutoRange:function(e,t,n){t.setScale(),t.autorange&&(t.range=n?n.slice():o(e,t),t._r=t.range.slice(),t._rl=k.simpleMap(t._r,t.r2l),i=t._input,(r={})[t._attr+".range"]=t.range,r[t._attr+".autorange"]=t.autorange,a.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,r),i.range=t.range.slice(),i.autorange=t.autorange);var r=t._anchorAxis;{var i;r&&r.rangeslider&&((i=r.rangeslider[t._name])&&"auto"===i.rangemode&&(i.range=o(e,t)),r._input.rangeslider[t._name]=k.extendFlat({},i))}},findExtremes:function(t,n,e){e=e||{};t._m||t.setScale();var r,i,a,o,s,l,c,u,d=[],h=[],f=n.length,p=e.padded||!1,m=e.tozero&&("linear"===t.type||"-"===t.type),g="log"===t.type,_=!1,y=e.vpadLinearized||!1;function v(t){if(Array.isArray(t))return _=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var b=v((0<t._m?e.ppadplus:e.ppadminus)||e.ppad||0),x=v((0<t._m?e.ppadminus:e.ppadplus)||e.ppad||0),w=v(e.vpadplus||e.vpad),T=v(e.vpadminus||e.vpad);if(!_){if(c=1/0,u=-1/0,g)for(r=0;r<f;r++)(i=n[r])<c&&0<i&&(c=i),u<i&&i<E&&(u=i);else for(r=0;r<f;r++)(i=n[r])<c&&-E<i&&(c=i),u<i&&i<E&&(u=i);n=[c,u],f=2}var A={tozero:m,extrapad:p};function k(e){o=n[e],S(o)&&(s=b(e),l=x(e),o=y?(a=t.c2l(o)-T(e),t.c2l(o)+w(e)):(c=o-T(e),u=o+w(e),g&&c<u/10&&(c=u/10),a=t.c2l(c),t.c2l(u)),m&&(a=Math.min(0,a),o=Math.max(0,o)),P(a)&&D(d,a,l,A),P(o)&&O(h,o,s,A))}var M=Math.min(6,f);for(r=0;r<M;r++)k(r);for(r=f-1;M<=r;r--)k(r);return{min:d,max:h,opts:e}},concatExtremes:L};var g=3;function L(e,t,n){var i,a,o=t._id,r=e._fullData,s=e._fullLayout,l=[],c=[];function u(e,t){for(i=0;i<t.length;i++){var n=e[t[i]],r=(n._extremes||{})[o];if(!0===n.visible&&r){for(p=0;p<r.min.length;p++)a=r.min[p],D(l,a.val,a.pad,{extrapad:a.extrapad});for(p=0;p<r.max.length;p++)a=r.max[p],O(c,a.val,a.pad,{extrapad:a.extrapad})}}}if(u(r,t._traceIndices),u(s.annotations||[],t._annIndices||[]),u(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var d in t._matchGroup)if(d!==t._id){for(var d=m(e,d),h=L(e,d,!0),f=t._length/d._length,p=0;p<h.min.length;p++)a=h.min[p],D(l,a.val,a.pad*f,{extrapad:a.extrapad});for(p=0;p<h.max.length;p++)a=h.max[p],O(c,a.val,a.pad*f,{extrapad:a.extrapad})}return{min:l,max:c}}function D(e,t,n,r){i(e,t,n,r,l)}function O(e,t,n,r){i(e,t,n,r,c)}function i(e,t,n,r,i){for(var a=r.tozero,o=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(i(c.val,t)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}i(t,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(e.splice(l,1),l--)}s&&e.push({val:t,pad:(a=a&&0===t)?0:n,extrapad:!a&&o})}function P(e){return S(e)&&Math.abs(e)<E}function l(e,t){return e<=t}function c(e,t){return t<=e}},{"../../components/drawing":177,"../../constants/numerical":265,"../../lib":285,"../../registry":373,"./axis_ids":335,"@plotly/d3":20,"fast-isnumeric":31}],331:[function(e,t,n){"use strict";var w=e("@plotly/d3"),T=e("fast-isnumeric"),j=e("../../plots/plots"),B=e("../../registry"),H=e("../../lib"),u=H.strTranslate,d=e("../../lib/svg_text_utils"),U=e("../../components/titles"),V=e("../../components/color"),q=e("../../components/drawing"),b=e("./layout_attributes"),h=e("./clean_ticks"),r=e("../../constants/numerical"),A=r.ONEMAXYEAR,k=r.ONEAVGYEAR,M=r.ONEMINYEAR,S=r.ONEMAXQUARTER,E=r.ONEAVGQUARTER,C=r.ONEMINQUARTER,L=r.ONEMAXMONTH,D=r.ONEAVGMONTH,O=r.ONEMINMONTH,P=r.ONEWEEK,R=r.ONEDAY,I=R/2,N=r.ONEHOUR,s=r.ONEMIN,l=r.ONESEC,_=r.MINUS_SIGN,z=r.BADNUM,o={K:"zeroline"},F={K:"gridline",L:"path"},Y={K:"tick",L:"path"},G={K:"tick",L:"text"},r=e("../../constants/alignment"),v=r.MID_SHIFT,x=r.CAP_SHIFT,W=r.LINE_SPACING,X=r.OPPOSITE_SIDE,Z=t.exports={};Z.setConvert=e("./set_convert");var c=e("./axis_autotype"),t=e("./axis_ids"),a=t.idSort,J=t.isLinked;Z.id2name=t.id2name,Z.name2id=t.name2id,Z.cleanId=t.cleanId,Z.list=t.list,Z.listIds=t.listIds,Z.getFromId=t.getFromId,Z.getFromTrace=t.getFromTrace;e=e("./autorange");Z.getAutoRange=e.getAutoRange,Z.findExtremes=e.findExtremes;var i=1e-4;function $(e){var t=(e[1]-e[0])*i;return[e[0]-t,e[1]+t]}Z.coerceRef=function(e,t,n,r,i,a){var o=r.charAt(r.length-1),n=n._fullLayout._subplots[o+"axis"],o=r+"ref",r={};return i=i||(n[0]||("string"==typeof a?a:a[0])),a=a||i,n=n.concat(n.map(function(e){return e+" domain"})),r[o]={valType:"enumerated",values:n.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},H.coerce(e,t,r,o)},Z.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},Z.coercePosition=function(e,t,n,r,i,a){var o,s;"range"!==Z.getRefType(r)?(s=H.ensureNumber,o=n(i,a)):(o=n(i,a=(r=Z.getFromId(t,r)).fraction2r(a)),s=r.cleanPos),e[i]=s(o)},Z.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?H.ensureNumber:Z.getFromId(t,n).cleanPos)(e)},Z.redrawComponents=function(u,d){d=d||Z.listIds(u);var h=u._fullLayout;function e(e,t,n,r){for(var i=B.getComponentMethod(e,t),a={},o=0;o<d.length;o++)for(var s=h[Z.id2name(d[o])][n],l=0;l<s.length;l++){var c=s[l];if(!a[c]&&(i(u,c),a[c]=1,r))return}}e("annotations","drawOne","_annIndices"),e("shapes","drawOne","_shapeIndices"),e("images","draw","_imgIndices",!0)};var f=Z.getDataConversions=function(e,t,n,r){var i,n="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(n)){if(i={type:c(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},Z.setConvert(i),"category"===i.type)for(var a=0;a<r.length;a++)i.d2c(r[a])}else i=Z.getFromTrace(e,t,n);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===n?{d2c:m,c2d:m}:{d2c:p,c2d:p}};function p(e){return+e}function m(e){return String(e)}function g(e){return+e.substring(1)}Z.getDataToCoordFunc=function(e,t,n,r){return f(e,t,n,r).d2c},Z.counterLetter=function(e){e=e.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},Z.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):(2e-6<(t/e._minDtick+1e-6)%1||2e-6<((n-e._forceTick0)/e._minDtick%1+1.000001)%1)&&(e._minDtick=0)):e._minDtick=0},Z.saveRangeInitial=function(e,t){for(var n=Z.list(e,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||t&&s)&&(a._rangeInitial=a.range.slice(),r=!0)}return r},Z.saveShowSpikeInitial=function(e,t){for(var n=Z.list(e,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,r},Z.autoBin=function(e,t,n,r,i,a){var o,s=H.aggNums(Math.min,null,e),l=H.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-s};i=i||t.calendar,o="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:H.simpleMap([s,l],t.c2r,0,i),calendar:i},Z.setConvert(o),(a=a&&h.dtick(a,o.type))?(o.dtick=a,o.tick0=h.tick0(void 0,o.type,i)):(n?d=(l-s)/n:(a=H.distinctVals(e),n=(n=Math.pow(10,Math.floor(Math.log(a.minDiff)/Math.LN10)))*H.roundUp(a.minDiff/n,[.9,1.9,4.9,9.9],!0),d=Math.max(n,2*H.stdev(e)/Math.pow(e.length,r?.25:.4)),T(d)||(d=1)),Z.autoTicks(o,d));var c,u=o.dtick,d=Z.tickIncrement(Z.tickFirst(o),u,"reverse",i);if("number"==typeof u)c=(d=function(t,e,n,r,i){var a=0,o=0,s=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:T(e[u])||l++,c(e[u])&&a++,c(e[u]+n.dtick/2)&&o++;var d=e.length-l;s===d&&"date"!==n.type?n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick):o<.1*d&&(.3*d<a||c(r)||c(i))&&(i=n.dtick/2,t+=t+i<r?i:-i);return t}(d,e,o,s,l))+(1+Math.floor((l-d)/u))*u;else for(c=d="M"===o.dtick.charAt(0)?function(e,t,n,r,i){t=H.findExactDates(t,i);if(.8<t.exactDays){i=Number(n.substr(1));.8<t.exactYears&&i%12==0?e=Z.tickIncrement(e,"M6","reverse")+1.5*R:.8<t.exactMonths?e=Z.tickIncrement(e,"M1","reverse")+15.5*R:e-=I;n=Z.tickIncrement(e,n);if(n<=r)return n}return e}(d,e,u,s,i):d,0;c<=l;)c=Z.tickIncrement(c,u,!1,i),0;return{start:t.c2r(d,0,i),end:t.c2r(c,0,i),size:u,_dataSpan:l-s}},Z.prepTicks=function(e,t){var n,r=H.simpleMap(e.range,e.r2l,void 0,void 0,t);e._dtickInit=e.dtick,e._tick0Init=e.tick0,"auto"!==e.tickmode&&e.dtick||((t=e.nticks)||(t="category"===e.type||"multicategory"===e.type?(n=e.tickfont?H.bigFont(e.tickfont.size||12):15,e._length/n):(n="y"===e._id.charAt(0)?40:80,H.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(t*=2)),"array"===e.tickmode&&(t*=100),e._roughDTick=Math.abs(r[1]-r[0])/t,Z.autoTicks(e,e._roughDTick),0<e._minDtick&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))),"period"===e.ticklabelmode&&function(e){var t;function n(){return!(T(e.dtick)||"M"!==e.dtick.charAt(0))}var r=n(),i=Z.getTickFormat(e);{var a;i&&(a=e._dtickInit!==e.dtick,/%[fLQsSMX]/.test(i)||(/%[HI]/.test(i)?(t=N,a&&!r&&e.dtick<N&&(e.dtick=N)):/%p/.test(i)?(t=I,a&&!r&&e.dtick<I&&(e.dtick=I)):/%[Aadejuwx]/.test(i)?(t=R,a&&!r&&e.dtick<R&&(e.dtick=R)):/%[UVW]/.test(i)?(t=P,a&&!r&&e.dtick<P&&(e.dtick=P)):/%[Bbm]/.test(i)?(t=D,a&&(r?g(e.dtick)<1:e.dtick<O)&&(e.dtick="M1")):/%[q]/.test(i)?(t=E,a&&(r?g(e.dtick)<3:e.dtick<C)&&(e.dtick="M3")):/%[Yy]/.test(i)&&(t=k,a&&(r?g(e.dtick)<12:e.dtick<M)&&(e.dtick="M12"))))}(r=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0);e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),ae(e)},Z.calcTicks=function(e,t){Z.prepTicks(e,t);var n=H.simpleMap(e.range,e.r2l,void 0,void 0,t);if("array"===e.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,r=new Array(e.length),i=$(H.simpleMap(t.range,t.r2l)),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),s=0;Array.isArray(n)||(n=[]);var l="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var c=0;c<e.length;c++){var u=l(e[c]);a<u&&u<o&&(void 0===n[c]?r[s]=Z.tickText(t,u):r[s]=oe(t,u,String(n[c])),s++)}s<e.length&&r.splice(s,e.length-s);t.rangebreaks&&(r=r.filter(function(e){return t.maskBreaks(e.x)!==z}));return r}(e);var r=$(n),i=r[0],a=r[1],o=n[1]<n[0],s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]),c="log"===e.type&&!(T(e.dtick)||"L"===e.dtick.charAt(0)),r="period"===e.ticklabelmode;if(e._tmin=Z.tickFirst(e,t),e._tmin<i!=o)return[];"category"!==e.type&&"multicategory"!==e.type||(a=o?Math.max(-.5,a):Math.min(e._categories.length-.5,a));var u=e._tmin;e.rangebreaks&&e._tick0Init!==e.tick0&&(u=xe(u,e),o||(u=Z.tickIncrement(u,e.dtick,!o,e.calendar))),r&&(u=Z.tickIncrement(u,e.dtick,!o,e.calendar));for(var d=Math.max(1e3,e._length||0),h=[],f=null;o?a<=u:u<=a;u=Z.tickIncrement(u,e.dtick,o,e.calendar)){if(e.rangebreaks&&!o){if(u<i)continue;if(e.maskBreaks(u)===z&&xe(u,e)>=l)break}if(h.length>d||u===f)break;var f=u,p=c&&u!==(0|u)?!0:!1;h.push({minor:p,value:u})}if(r&&function(e,t,n){for(var r=0;r<e.length;r++){var i,a=e[r].value,o=r,s=r+1,s=r<e.length-1?(o=r)+1:0<r?(o=r-1,r):o=r,l=e[o].value,o=e[s].value,s=Math.abs(o-l),o=n||s,l=0;M<=o?l=M<=s&&s<=A?s:k:n===E&&C<=o?l=C<=s&&s<=S?s:E:O<=o?l=O<=s&&s<=L?s:D:n===P&&P<=o?l=P:R<=o?l=R:n===I&&I<=o?l=I:n===N&&N<=o&&(l=N),s<=l&&(l=s,i=!0);var c=a+l;if(t.rangebreaks&&0<l){for(var u=0,d=0;d<84;d++){var h=(d+.5)/84;t.maskBreaks(a*(1-h)+h*c)!==z&&u++}(l*=u/84)||(e[r].drop=!0),i&&P<s&&(l=s)}(0<l||0===r)&&(e[r].periodX=a+l/2)}}(h,e,e._definedDelta),e.rangebreaks){var m="y"===e._id.charAt(0),g=1;"auto"===e.tickmode&&(g=e.tickfont?e.tickfont.size:12);for(var _,y=NaN,v=h.length-1;-1<v;v--)h[v].drop?h.splice(v,1):(h[v].value=xe(h[v].value,e),_=e.c2p(h[v].value),(m?_-g<y:y<_+g)?h.splice(o?v+1:v,1):y=_)}be(e)&&360===Math.abs(n[1]-n[0])&&h.pop(),e._tmax=(h[h.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var b=[];for(v=0;v<h.length;v++){var x=h[v].minor,w=h[v].value,w=Z.tickText(e,w,!1,x);void 0!==(x=h[v].periodX)&&(l<(w.periodX=x)||x<s)&&(l<x&&(w.periodX=l),x<s&&(w.periodX=s),w.text=" ",e._prevDateHead=""),b.push(w)}return e._inCalcTicks=!1,b};var y=[2,5,10],Q=[1,2,3,6,12],K=[1,2,5,10,15,30],ee=[1,2,3,7,14],te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ne=[-.301,0,.301,.699,1],re=[15,30,45,90,180];function ie(e,t,n){return t*H.roundUp(e/t,n)}function ae(e){var t,n,r,i,a=e.dtick;e._tickexponent=0,T(a)||"string"==typeof a||(a=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type?(t=e.r2l(e.tick0),r=(n=e.l2r(t).replace(/(^-|i)/g,"")).length,"M"===String(a).charAt(0)?10<r||"01-01"!==n.substr(5)?e._tickround="d":e._tickround=+a.substr(1)%12==0?"y":"m":R<=a&&r<=10||15*R<=a?e._tickround="d":s<=a&&r<=16||N<=a?e._tickround="M":l<=a&&r<=19||s<=a?e._tickround="S":(i=e.l2r(t+a).replace(/^-/,"").length,e._tickround=Math.max(r,i)-20,e._tickround<0&&(e._tickround=4))):T(a)||"L"===a.charAt(0)?(i=e.range.map(e.r2d||Number),T(a)||(a=Number(a.substr(1))),e._tickround=2-Math.floor(Math.log(a)/Math.LN10+.01),a=Math.max(Math.abs(i[0]),Math.abs(i[1])),i=Math.floor(Math.log(a)/Math.LN10+.01),a=void 0===e.minexponent?3:e.minexponent,Math.abs(i)>a&&(le(e.exponentformat)&&!ce(i)?e._tickexponent=3*Math.round((i-1)/3):e._tickexponent=i)):e._tickround=null}function oe(e,t,n){e=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:e.size,font:e.family,fontColor:e.color}}Z.autoTicks=function(e,t){var n,r,i;function a(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type?(e.tick0=H.dateTick0(e.calendar,0),k<(i=2*t)?(t/=k,o=a(10),e.dtick="M"+12*ie(t,o,y)):D<i?(t/=D,e.dtick="M"+ie(t,1,Q)):R<i?(e.dtick=ie(t,R,e._hasDayOfWeekBreaks?[1,2,7,14]:ee),n=Z.getTickFormat(e),(r="period"===e.ticklabelmode)&&(e._rawTick0=e.tick0),/%[uVW]/.test(n)?e.tick0=H.dateTick0(e.calendar,2):e.tick0=H.dateTick0(e.calendar,1),r&&(e._dowTick0=e.tick0)):N<i?e.dtick=ie(t,N,Q):s<i?e.dtick=ie(t,s,K):l<i?e.dtick=ie(t,l,K):(o=a(10),e.dtick=ie(t,o,y))):"log"===e.type?(e.tick0=0,r=H.simpleMap(e.range,e.r2l),.7<t?e.dtick=Math.ceil(t):Math.abs(r[1]-r[0])<1?(i=1.5*Math.abs((r[1]-r[0])/t),t=Math.abs(Math.pow(10,r[1])-Math.pow(10,r[0]))/i,o=a(10),e.dtick="L"+ie(t,o,y)):e.dtick=.3<t?"D2":"D1"):"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):be(e)?(e.tick0=0,e.dtick=ie(t,o=1,re)):(e.tick0=0,o=a(10),e.dtick=ie(t,o,y)),0===e.dtick&&(e.dtick=1),!T(e.dtick)&&"string"!=typeof e.dtick){var o=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(o)}},Z.tickIncrement=function(e,t,n,r){var i=n?-1:1;if(T(t))return H.increment(e,i*t);var a=t.charAt(0),o=i*Number(t.substr(1));if("M"===a)return H.incrementMonth(e,o,r);if("L"===a)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"!==a)throw"unrecognized dtick "+String(t);t="D2"===t?ne:te,i=e+.01*i,n=H.roundUp(H.mod(i,1),t,n);return Math.floor(i)+Math.log(w.round(Math.pow(10,n),1))/Math.LN10},Z.tickFirst=function(e,t){var n=e.r2l||Number,r=H.simpleMap(e.range,n,void 0,void 0,t),i=r[1]<r[0],t=i?Math.floor:Math.ceil,a=$(r)[0],o=e.dtick,r=n(e.tick0);if(T(o)){n=t((a-r)/o)*o+r;return n="category"===e.type||"multicategory"===e.type?H.constrain(n,0,e._categories.length-1):n}var s=o.charAt(0),l=Number(o.substr(1));if("M"===s){for(var c,u,d=0,h=r;d<10;){if(((u=Z.tickIncrement(h,o,i,e.calendar))-a)*(h-a)<=0)return i?Math.min(h,u):Math.max(h,u);c=(a-(h+u)/2)/(u-h),u=s+(Math.abs(Math.round(c))||1)*l,h=Z.tickIncrement(h,u,c<0?!i:i,e.calendar),d++}return H.error("tickFirst did not converge",e),h}if("L"===s)return Math.log(t((Math.pow(10,a)-r)/l)*l+r)/Math.LN10;if("D"!==s)throw"unrecognized dtick "+String(o);r="D2"===o?ne:te,r=H.roundUp(H.mod(a,1),r,i);return Math.floor(a)+Math.log(w.round(Math.pow(10,r),1))/Math.LN10},Z.tickText=function(n,r,i,e){var t=oe(n,r),a="array"===n.tickmode,o=i||a,s=n.type,l="category"===s?n.d2l_noadd:n.d2l;if(a&&Array.isArray(n.ticktext)){for(var c=H.simpleMap(n.range,n.r2l),u=(Math.abs(c[1]-c[0])-(n._lBreaks||0))/1e4,d=0;d<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[d]))<u);d++);if(d<n.ticktext.length)return t.text=String(n.ticktext[d]),t}function h(e){if(void 0===e)return 1;if(i)return"none"===e;var t={first:n._tmin,last:n._tmax}[e];return"all"!==e&&r!==t}var f,p,m,g,c=i?"never":"none"!==n.exponentformat&&h(n.showexponent)?"hide":"";return"date"===s?function(e,t,n,r){var i=e._tickround,a=n&&e.hoverformat||Z.getTickFormat(e);r&&(i=T(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,s=H.formatDate(t.x,a,i,e._dateFormat,e.calendar,e._extraFormat),a=s.indexOf("\n");-1!==a&&(o=s.substr(a+1),s=s.substr(0,a));r&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,"")));o&&(n?"d"===i?s+=", "+o:s=o+(s?", "+s:""):e._inCalcTicks&&e._prevDateHead===o?(n=we(e),i=e._realSide||e.side,(!n&&"top"===i||n&&"bottom"===i)&&(s+="<br> ")):(e._prevDateHead=o,s+="<br>"+o));t.text=s}(n,t,i,o):"log"===s?function(e,t,n,r){var i=e.dtick,a=t.x,o=e.tickformat,s="string"==typeof i&&i.charAt(0);"never"===r&&(r="");n&&"L"!==s&&(i="L3",s="L");if(o||"L"===s)t.text=ue(Math.pow(10,a),e,r,n);else if(T(i)||"D"===s&&H.mod(a+.01,1)<.1){o=Math.round(a),r=Math.abs(o),n=e.exponentformat;"power"===n||le(n)&&ce(o)?(t.text=0===o?1:1===o?"10":"10<sup>"+(1<o?"":_)+r+"</sup>",t.fontSize*=1.25):("e"===n||"E"===n)&&2<r?t.text="1"+n+(0<o?"+":_)+r:(t.text=ue(Math.pow(10,a),e,"","fakehover"),"D1"===i&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==s)throw"unrecognized dtick "+String(i);t.text=String(Math.round(Math.pow(10,H.mod(a,1)))),t.fontSize*=.75}"D1"===e.dtick&&("0"!==(i=String(t.text).charAt(0))&&"1"!==i||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(a<0?.5:.25))))}(n,t,o,c):"category"===s?function(e,t){e=e._categories[Math.round(t.x)];void 0===e&&(e="");t.text=String(e)}(n,t):"multicategory"===s?(f=n,p=t,m=i,g=Math.round(p.x),f=f._categories[g]||[],g=void 0===f[1]?"":String(f[1]),f=void 0===f[0]?"":String(f[0]),m?p.text=f+" - "+g:(p.text=g,p.text2=f)):be(n)?(s=t,m=i,g=o,p=c,"radians"!==(f=n).thetaunit||m?s.text=ue(s.x,f,p,g):0==(m=s.x/180)?s.text="0":100<=(m=function(e){function r(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){for(var t=1;!r(Math.round(e*t)/t,e);)t*=10;return t}(e),n=e*t,e=Math.abs(function e(t,n){return r(n,0)?t:e(n,t%n)}(n,t));return[Math.round(n/e),Math.round(t/e)]}(m))[1]?s.text=ue(H.deg2rad(s.x),f,p,g):(g=s.x<0,1===m[1]?1===m[0]?s.text="":s.text=m[0]+"":s.text=["<sup>",m[0],"</sup>","","<sub>",m[1],"</sub>",""].join(""),g&&(s.text=_+s.text))):function(e,t,n,r){"never"===r?r="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(r="hide");t.text=ue(t.x,e,r,n)}(n,t,o,c),e||(n.tickprefix&&!h(n.showtickprefix)&&(t.text=n.tickprefix+t.text),n.ticksuffix&&!h(n.showticksuffix)&&(t.text+=n.ticksuffix)),"boundaries"!==n.tickson&&!n.showdividers||(t.xbnd=[(e=function(e){var t=n.l2p(e);return 0<=t&&t<=n._length?e:null})(t.x-.5),e(t.x+n.dtick-.5)]),t},Z.hoverLabelText=function(e,t,n){n&&(e=H.extendFlat({},e,{hoverformat:n}));var r=Array.isArray(t)?t[0]:t,t=Array.isArray(t)?t[1]:void 0;if(void 0!==t&&t!==r)return Z.hoverLabelText(e,r,n)+" - "+Z.hoverLabelText(e,t,n);n="log"===e.type&&r<=0,e=Z.tickText(e,e.c2l(n?-r:r),"hover").text;return n?0===r?"0":_+e:e};var se=["f","p","n","","m","","k","M","G","T"];function le(e){return"SI"===e||"B"===e}function ce(e){return 14<e||e<-15}function ue(e,t,n,r){var i=e<0,a=t._tickround,o=n||t.exponentformat||"B",s=t._tickexponent,l=Z.getTickFormat(t),n=t.separatethousands;if(r&&(ae(r={exponentformat:o,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:T(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]}),a=(Number(r._tickround)||0)+4,s=r._tickexponent,t.hoverformat&&(l=t.hoverformat)),l)return t._numFormat(l)(e).replace(/-/g,_);l=Math.pow(10,-a)/2;if("none"===o&&(s=0),(e=Math.abs(e))<l)i=!(e="0");else{if(e+=l,s&&(e*=Math.pow(10,-s),a+=s),0===a)e=String(Math.floor(e));else if(a<0){e=(e=String(Math.round(e))).substr(0,e.length+a);for(var c=a;c<0;c++)e+="0"}else{l=(e=String(e)).indexOf(".")+1;l&&(e=e.substr(0,l+a).replace(/\.?0+$/,""))}e=H.numSeparate(e,t._separators,n)}return s&&"hide"!==o&&(le(o)&&ce(s)&&(o="power"),n=s<0?_+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?e+=o+n:"power"===o?e+="10<sup>"+n+"</sup>":"B"===o&&9===s?e+="B":le(o)&&(e+=se[s/3+5])),i?_+e:e}function de(e){return void 0!==e.periodX?e.periodX:e.x}function he(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function fe(e){var t=e.title.font.size,n=(e.title.text.match(d.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*(x+n*W):t*x:n?t*(n+1)*W:t}function pe(e,t){t=e.l2p(t);return 1<t&&t<e._length-1}function me(e){var t=w.select(e),e=t.select(".text-math-group");return e.empty()?t.select("text"):e}function ge(e){return e._id+".automargin"}function _e(e){return ge(e)+".mirror"}function ye(e){return e._id+".rangeslider"}function ve(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function be(e){return"angularaxis"===e._id}function xe(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var i=t._rangebreaks[r];if(e>=i.min&&e<i.max)return i.max}return e}function we(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function Te(e,t){we(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}Z.getTickFormat=function(e){var t,n,r,i,a,o,s,l,c,u,d,h;function f(e){return"string"!=typeof e?e:Number(e.replace("M",""))*D}function p(e,t){var n=["L","D"];if(typeof e!=typeof t)return"number"==typeof e?1:-1;if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),n=n.indexOf(t.charAt(0));return r===n?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-n}if(e.tickformatstops&&0<e.tickformatstops.length)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(c=e.dtick,u=r.dtickrange,h=void 0,h=(d=f)||function(e){return e},d=u[0],u=u[1],(!d&&"number"!=typeof d||h(d)<=h(c))&&(!u&&"number"!=typeof u||h(u)>=h(c)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(i=e.dtick,a=r.dtickrange,l=s=o=void 0,o=null===a[0],s=null===a[1],l=0<=p(i,a[0]),a=p(i,a[1])<=0,(o||l)&&(s||a))){n=r;break}}return n?n.value:e.tickformat},Z.getSubplots=function(e,t){e=e._fullLayout._subplots,e=e.cartesian.concat(e.gl2d||[]),e=t?Z.findSubplotsWithAxis(e,t):e;return e.sort(function(e,t){e=e.substr(1).split("y"),t=t.substr(1).split("y");return e[0]===t[0]?+e[1]-+t[1]:+e[0]-+t[0]}),e},Z.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var a=e[i];n.test(a)&&r.push(a)}return r},Z.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){for(var n,r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},a=Z.list(e,"x",!0),o=Z.list(e,"y",!0),s=[],l=0;l<a.length;l++)for(s.push({x:a[l],y:i}),n=0;n<o.length;n++)0===l&&s.push({x:r,y:o[n]}),s.push({x:a[l],y:o[n]});e=t._clips.selectAll(".axesclip").data(s,function(e){return e.x._id+e.y._id});e.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),e.exit().remove(),e.each(function(e){w.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},Z.draw=function(r,e,i){var a=r._fullLayout;"redraw"===e&&a._paper.selectAll("g.subplot").each(function(e){var t=e[0],n=a._plots[t];n&&(e=n.xaxis,t=n.yaxis,n.xaxislayer.selectAll("."+e._id+"tick").remove(),n.yaxislayer.selectAll("."+t._id+"tick").remove(),n.xaxislayer.selectAll("."+e._id+"tick2").remove(),n.yaxislayer.selectAll("."+t._id+"tick2").remove(),n.xaxislayer.selectAll("."+e._id+"divider").remove(),n.yaxislayer.selectAll("."+t._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),a._infolayer.select(".g-"+e._id+"title").remove(),a._infolayer.select(".g-"+t._id+"title").remove())});e=e&&"redraw"!==e?e:Z.listIds(r);return H.syncOrAsync(e.map(function(n){return function(){if(n){var e=Z.getFromId(r,n),t=Z.drawOne(r,e,i);return e._r=e.range.slice(),e._rl=H.simpleMap(e._r,e.r2l),t}}}))},Z.drawOne=function(u,d,e){e=e||{},d.setScale();var h=u._fullLayout,t=d._id,f=t.charAt(0),p=Z.counterLetter(t),n=h._plots[d._mainSubplot];if(n){var a=n[f+"axislayer"],o=d._mainLinePosition,r=d._mainMirrorPosition,i=d._vals=Z.calcTicks(d),s=[d.mirror,o,r].join("_");for(T=0;T<i.length;T++)i[T].axInfo=s;d._selections={},d._tickAngles&&(d._prevTickAngles=d._tickAngles),d._tickAngles={},d._depth=null;var l={};if(d.visible){var c,m=Z.makeTransTickFn(d),g=Z.makeTransTickLabelFn(d),_="inside"===d.ticks,y="outside"===d.ticks;c="boundaries"===d.tickson?(n=function(e){function t(e,t){null!==(t=e.xbnd[t])&&r.push(H.extendFlat({},e,{x:t}))}var n,r=[];if(e.length){for(n=0;n<e.length;n++)t(e[n],0);t(e[n-1],1)}return r}(i),D=Z.clipEnds(d,n),_?D:n):(D=Z.clipEnds(d,i),_&&"period"!==d.ticklabelmode?D:i);var v=d._gridVals=D,b=function(e,t){function n(e,t){null!==(t=e.xbnd[t])&&a.push(H.extendFlat({},e,{x:t}))}var r,i,a=[],o=t.length&&t[t.length-1].x<t[0].x;if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];s.text2!==i&&n(s,o?1:0),i=s.text2}n(t[r-1],o?0:1)}return a}(d,i);if(!h._hasOnlyLargeSploms)for(var x=d._subplotsWith,w={},T=0;T<x.length;T++){var A,k=x[T],M=(A=h._plots[k])[p+"axis"],S=M._mainAxis._id;w[S]||(w[S]=1,S="x"===f?"M0,"+M._offset+"v"+M._length:"M"+M._offset+",0h"+M._length,Z.drawGrid(u,d,{vals:v,counterAxis:M,layer:A.gridlayer.select("."+t),path:S,transFn:m}),Z.drawZeroLine(u,d,{counterAxis:M,layer:A.zerolinelayer,path:S,transFn:m}))}var E=Z.getTickSigns(d),C=[];if(d.ticks){var L,D=Z.makeTickPath(d,o,E[2]),O=d._anchorAxis&&d.mirror&&!0!==d.mirror?D+(L=Z.makeTickPath(d,r,E[3])):(L="",D);if(d.showdividers&&y&&"boundaries"===d.tickson){var P={};for(T=0;T<b.length;T++)P[b[T].x]=1;N=function(e){return P[e.x]?L:O}}else N=O;Z.drawTicks(u,d,{vals:c,layer:a,path:N,transFn:m}),"allticks"===d.mirror&&(C=Object.keys(d._linepositions||{}))}for(T=0;T<C.length;T++){k=C[T],A=h._plots[k];var R=d._linepositions[k]||[],R=Z.makeTickPath(d,R[0],E[0])+Z.makeTickPath(d,R[1],E[1]);Z.drawTicks(u,d,{vals:c,layer:A[f+"axislayer"],path:R,transFn:m})}var I,N=[];N.push(function(){return Z.drawLabels(u,d,{vals:i,layer:a,plotinfo:A,transFn:g,labelFns:Z.makeLabelFns(d,o)})}),"multicategory"===d.type?(I={x:2,y:10}[f],N.push(function(){var e={x:"height",y:"width"}[f],e=F()[e]+I+(d._tickAngles[t+"tick"]?d.tickfont.size*W:0);return Z.drawLabels(u,d,{vals:function(e,t){for(var n,r=[],i={},a=0;a<t.length;a++){var o=t[a];i[o.text2]?i[o.text2].push(o.x):i[o.text2]=[o.x]}for(n in i)r.push(oe(e,H.interp(i[n],.5),n));return r}(d,i),layer:a,cls:t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:m,labelFns:Z.makeLabelFns(d,o+e*E[4])})}),N.push(function(){var e,t,n,r,i;d._depth=E[4]*(F("tick2")[d.side]-o),e=u,t=d,n={vals:b,layer:a,path:Z.makeTickPath(d,o,E[4],d._depth),transFn:m},r=t._id+"divider",i=n.vals,(i=n.layer.selectAll("path."+r).data(i,he)).exit().remove(),i.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(V.stroke,t.dividercolor).style("stroke-width",q.crispRound(e,t.dividerwidth,1)+"px"),i.attr("transform",n.transFn).attr("d",n.path)})):d.title.hasOwnProperty("standoff")&&N.push(function(){d._depth=E[4]*(F()[d.side]-o)});var z=B.getComponentMethod("rangeslider","isVisible")(d);return N.push(function(){var e,t,n,r,i,a,o=d.side.charAt(0),s=X[d.side].charAt(0),l=Z.getPxPosition(u,d),c=y?d.ticklen:0;(d.automargin||z)&&("multicategory"===d.type?a=F("tick2"):(a=F(),"x"===f&&"b"===o&&(d._depth=Math.max(0<a.width?a.bottom-l:0,c)))),d.automargin&&(n={x:0,y:0,r:0,l:0,t:0,b:0},r=[0,1],"x"===f?("b"===o?n[o]=d._depth:(n[o]=d._depth=Math.max(0<a.width?l-a.top:0,c),r.reverse()),0<a.width&&(0<(i=a.right-(d._offset+d._length))&&(n.xr=1,n.r=i),0<(i=d._offset-a.left)&&(n.xl=0,n.l=i))):("l"===o?n[o]=d._depth=Math.max(0<a.height?l-a.left:0,c):(n[o]=d._depth=Math.max(0<a.height?a.right-l:0,c),r.reverse()),0<a.height&&(0<(l=a.bottom-(d._offset+d._length))&&(n.yb=0,n.b=l),0<(a=d._offset-a.top)&&(n.yt=1,n.t=a))),n[p]="free"===d.anchor?d.position:d._anchorAxis.domain[r[0]],d.title.text!==h._dfltTitle[f]&&(n[o]+=fe(d)+(d.title.standoff||0)),d.mirror&&"free"!==d.anchor&&((e={x:0,y:0,r:0,l:0,t:0,b:0})[s]=d.linewidth,d.mirror&&!0!==d.mirror&&(e[s]+=c),!0===d.mirror||"ticks"===d.mirror?e[p]=d._anchorAxis.domain[r[1]]:"all"!==d.mirror&&"allticks"!==d.mirror||(e[p]=[d._counterDomainMin,d._counterDomainMax][r[1]]))),z&&(t=B.getComponentMethod("rangeslider","autoMarginOpts")(u,d)),j.autoMargin(u,ge(d),n),j.autoMargin(u,_e(d),e),j.autoMargin(u,ye(d),t)}),e.skipTitle||z&&"bottom"===d.side||N.push(function(){return function(e,t){var n=e._fullLayout,r=t._id,i=r.charAt(0),a=t.title.font.size;{var o,s;t.title.hasOwnProperty("standoff")?h=t._depth+t.title.standoff+fe(t):(o=we(t),h="multicategory"===t.type?t._depth:(s=1.5*a,o&&(s=.5*a,"outside"===t.ticks&&(s+=t.ticklen)),10+s+(t.linewidth?t.linewidth-1:0)),o||(h+="x"===i?"top"===t.side?a*(t.showticklabels?1:0):a*(t.showticklabels?1.5:.5):"right"===t.side?a*(t.showticklabels?1:.5):a*(t.showticklabels?.5:0)))}var l,c,u,d,a=Z.getPxPosition(e,t);"x"===i?(c=t._offset+t._length/2,u="top"===t.side?a-h:a+h):(u=t._offset+t._length/2,c="right"===t.side?a+h:a-h,l={rotate:"-90",offset:0});{var h;"multicategory"!==t.type&&(h=t._selections[t._id+"tick"],d={selection:h,side:t.side},h&&h.node()&&h.node().parentNode&&(h=q.getTranslate(h.node().parentNode),d.offsetLeft=h.x,d.offsetTop=h.y),t.title.hasOwnProperty("standoff")&&(d.pad=0))}return U.draw(e,r+"title",{propContainer:t,propName:t._name+".title.text",placeholder:n._dfltTitle[i],avoid:d,transform:l,attributes:{x:c,y:u,"text-anchor":"middle"}})}(u,d)}),H.syncOrAsync(N)}}function F(e){e=t+(e||"tick");return l[e]||(l[e]=function(e,t){var n,r,i,a;e._selections[t].size()?(i=n=1/0,a=r=-1/0,e._selections[t].each(function(){var e=me(this),e=q.bBox(e.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),i=Math.min(i,e.left),a=Math.max(a,e.right)})):a=i=r=n=0;return{top:n,bottom:r,left:i,right:a,height:r-n,width:a-i}}(d,e)),l[e]}},Z.getTickSigns=function(e){var t=e._id.charAt(0),n=e.side==={x:"top",y:"right"}[t]?1:-1,n=[-1,1,n,-n];return"inside"!==e.ticks==("x"===t)&&(n=n.map(function(e){return-e})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n},Z.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return u(t._offset+t.l2p(e.x),0)}:function(e){return u(0,t._offset+t.l2p(e.x))}},Z.makeTransTickLabelFn=function(t){var e=function(e){var t=e.ticklabelposition||"",n=function(e){return-1!==t.indexOf(e)},r=n("top"),i=n("left"),a=n("right"),o=n("bottom"),s=n("inside"),l=o||i||r||a;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=3,n=e.tickfont?e.tickfont.size:12;(o||r)&&(u+=n*x,d+=(e.linewidth||0)/2);(i||a)&&(u+=(e.linewidth||0)/2,d+=3);s&&"top"===c&&(d-=n*(1-x));(i||r)&&(u=-u);"bottom"!==c&&"right"!==c||(d=-d);return[l?u:0,s?d:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return u(n+t._offset+t.l2p(de(e)),r)}:function(e){return u(r,n+t._offset+t.l2p(de(e)))}},Z.makeTickPath=function(e,t,n,r){r=void 0!==r?r:e.ticklen;var i=e._id.charAt(0),e=(e.linewidth||1)/2;return"x"===i?"M0,"+(t+e*n)+"v"+r*n:"M"+(t+e*n)+",0h"+r*n},Z.makeLabelFns=function(r,t,e){var n=r.ticklabelposition||"",i=function(e){return-1!==n.indexOf(e)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom")||o||a||s,c=i("inside"),u="inside"===n&&"inside"===r.ticks||!c&&"outside"===r.ticks&&"boundaries"!==r.tickson,d=0,a=0,i=u?r.ticklen:0;c?i*=-1:l&&(i=0),u&&(d+=i,e&&(y=H.deg2rad(e),d=i*Math.cos(y)+1,a=i*Math.sin(y))),r.showticklabels&&(u||r.showline)&&(d+=.2*r.tickfont.size);var h,f,p,m,g,e={labelStandoff:d+=(r.linewidth||1)/2*(c?-1:1),labelShift:a},_=0,i=r.side,y=r._id.charAt(0),u=r.tickangle;return"x"===y?(g=(m=!c&&"bottom"===i||c&&"top"===i)?1:-1,c&&(g*=-1),h=a*g,f=t+d*g,p=m?1:-.2,90===Math.abs(u)&&(c?p+=v:p=-90===u&&"bottom"===i?x:90===u&&"top"===i?v:.5,_=v/2*(u/90)),e.xFn=function(e){return e.dx+h+_*e.fontSize},e.yFn=function(e){return e.dy+f+e.fontSize*p},e.anchorFn=function(e,t){if(l){if(o)return"end";if(s)return"start"}return T(t)&&0!==t&&180!==t?t*g<0!==c?"end":"start":"middle"},e.heightFn=function(e,t,n){return t<-60||60<t?-.5*n:"top"===r.side!==c?-n:0}):"y"===y&&(g=(m=!c&&"left"===i||c&&"right"===i)?1:-1,c&&(g*=-1),h=d,f=a*g,p=0,c||90!==Math.abs(u)||(p=-90===u&&"left"===i||90===u&&"right"===i?x:.5),!c||0!=(u=T(u)?+u:0)&&(u=H.deg2rad(u),_=Math.abs(Math.sin(u))*x*g,p=0),e.xFn=function(e){return e.dx+t-(h+e.fontSize*p)*g+_*e.fontSize},e.yFn=function(e){return e.dy+f+e.fontSize*v},e.anchorFn=function(e,t){return T(t)&&90===Math.abs(t)?"middle":m?"end":"start"},e.heightFn=function(e,t,n){return"right"===r.side&&(t*=-1),t<-30?-n:t<30?-.5*n:0}),e},Z.drawTicks=function(e,t,n){var r=t._id+"tick",i=(n=n||{}).vals;"period"===t.ticklabelmode&&(i=i.slice()).shift();i=n.layer.selectAll("path."+r).data(t.ticks?i:[],he);i.exit().remove(),i.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(V.stroke,t.tickcolor).style("stroke-width",q.crispRound(e,t.tickwidth,1)+"px").attr("d",n.path).style("display",null),Te(t,[Y]),i.attr("transform",n.transFn)},Z.drawGrid=function(e,t,n){var r=t._id+"grid",i=(n=n||{}).vals,a=n.counterAxis;if(!1===t.showgrid)i=[];else if(a&&Z.shouldShowZeroLine(e,t,a))for(var o="array"===t.tickmode,s=0;s<i.length;s++){var l=i[s].x;if(o?!l:Math.abs(l)<t.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!o)break;s--}}a=n.layer.selectAll("path."+r).data(i,he);a.exit().remove(),a.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),t._gw=q.crispRound(e,t.gridwidth,1),a.attr("transform",n.transFn).attr("d",n.path).call(V.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),Te(t,[F]),"function"==typeof n.path&&a.attr("d",n.path)},Z.drawZeroLine=function(e,t,n){var r=t._id+"zl",i=Z.shouldShowZeroLine(e,t,n.counterAxis),i=n.layer.selectAll("path."+r).data(i?[{x:0,id:t._id}]:[]);i.exit().remove(),i.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(e,t){return a(e.id,t.id)})}),i.attr("transform",n.transFn).attr("d",n.path).call(V.stroke,t.zerolinecolor||V.defaultLine).style("stroke-width",q.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),Te(t,[o])},Z.drawLabels=function(h,p,m){m=m||{};var f=h._fullLayout,e=p._id,g=e.charAt(0),t=m.cls||e+"tick",_=m.vals,c=m.labelFns,y=m.secondary?0:p.tickangle,n=(p._prevTickAngles||{})[t],v=m.layer.selectAll("g."+t).data(p.showticklabels?_:[],he),r=[];function b(e,l){e.each(function(e){var t,n=w.select(this),r=n.select(".text-math-group"),i=c.anchorFn(e,l),a=m.transFn.call(n.node(),e)+(T(l)&&0!=+l?" rotate("+l+","+c.xFn(e)+","+(c.yFn(e)-e.fontSize/2)+")":""),o=d.lineCount(n),s=W*e.fontSize,s=c.heightFn(e,T(l)?+l:0,(o-1)*s);s&&(a+=u(0,s)),r.empty()?((t=n.select("text")).attr({transform:a,"text-anchor":i}),t.style("opacity",1),p._adjustTickLabelsOverflow&&p._adjustTickLabelsOverflow()):(t=q.bBox(r.node()).width,r.attr("transform",a+u(t*{end:-.5,start:.5}[i],0)))})}v.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=w.select(this),n=h._promises.length;t.call(d.positionText,c.xFn(e),c.yFn(e)).call(q.font,e.font,e.fontSize,e.fontColor).text(e.text).call(d.convertToTspans,h),h._promises[n]?r.push(h._promises.pop().then(function(){b(t,y)})):b(t,y)}),Te(p,[G]),v.exit().remove(),m.repositionOnUpdate&&v.each(function(e){w.select(this).select("text").call(d.positionText,c.xFn(e),c.yFn(e))}),p._adjustTickLabelsOverflow=function(){var e=p.ticklabeloverflow;if(e&&"allow"!==e){var i=-1!==e.indexOf("hide"),a="x"===p._id.charAt(0),t=0,n=a?h._fullLayout.width:h._fullLayout.height;-1!==e.indexOf("domain")&&(e=H.simpleMap(p.range,p.r2l),t=p.l2p(e[0])+p._offset,n=p.l2p(e[1])+p._offset);var r,o=Math.min(t,n),s=Math.max(t,n),l=p.side,c=1/0,u=-1/0;for(r in v.each(function(e){var t,n,r=w.select(this);r.select(".text-math-group").empty()&&(t=q.bBox(r.node()),n=0,a?(t.right>s||t.left<o)&&(n=1):(t.bottom>s||t.top+(p.tickangle?0:e.fontSize/4)<o)&&(n=1),r=r.select("text"),n?i&&r.style("opacity",0):(r.style("opacity",1),c="bottom"===l||"right"===l?Math.min(c,a?t.top:t.left):-1/0,u="top"===l||"left"===l?Math.max(u,a?t.bottom:t.right):1/0))}),f._plots){var d=f._plots[r];p._id!==d.xaxis._id&&p._id!==d.yaxis._id||(d=a?d.yaxis:d.xaxis)&&(d["_visibleLabelMin_"+p._id]=c,d["_visibleLabelMax_"+p._id]=u)}}},p._hideCounterAxisInsideTickLabels=function(e){var t,n="x"===p._id.charAt(0),r=[];for(t in f._plots){var i=f._plots[t];p._id!==i.xaxis._id&&p._id!==i.yaxis._id||r.push(n?i.yaxis:i.xaxis)}r.forEach(function(i,a){i&&we(i)&&(e||[o,F,Y,G]).forEach(function(n){var r="tick"===n.K&&"text"===n.L&&"period"===p.ticklabelmode,e=f._plots[p._mainSubplot],e=n.K===o.K?e.zerolinelayer.selectAll("."+p._id+"zl"):n.K===F.K?e.gridlayer.selectAll("."+p._id):e[p._id.charAt(0)+"axislayer"];e.each(function(){var e=w.select(this);(e=n.L?e.selectAll(n.L):e).each(function(e){var t=p.l2p(r?de(e):e.x)+p._offset,e=w.select(this);t<p["_visibleLabelMax_"+i._id]&&t>p["_visibleLabelMin_"+i._id]?e.style("display","none"):"tick"!==n.K||a||e.style("display",null)})})})})},b(v,n+1?n:y);var x=null;p._selections&&(p._selections[t]=v);var i=[function(){return r.length&&Promise.all(r)}];p.automargin&&f._redrawFromAutoMarginCount&&90===n?(x=90,i.push(function(){b(v,n)})):i.push(function(){if(b(v,y),_.length&&"x"===g&&!T(y)&&("log"!==p.type||"D"!==String(p.dtick).charAt(0))){var n=x=0,r=[];if(v.each(function(e){n=Math.max(n,e.fontSize);var t=p.l2p(e.x),e=me(this),e=q.bBox(e.node());r.push({top:0,bottom:10,height:10,left:t-e.width/2,right:t+e.width/2+2,width:e.width+2})}),"boundaries"!==p.tickson&&!p.showdividers||m.secondary){for(var e=_.length,t=Math.abs((_[e-1].x-_[0].x)*p._m)/(e-1),i=p.ticklabelposition||"",a=function(e){return-1!==i.indexOf(e)},o=a("top"),s=a("left"),e=a("right"),l=a("bottom")||s||o||e?(p.tickwidth||0)+6:0,c=t<2.5*n||"multicategory"===p.type,u=0;u<r.length-1;u++)if(H.bBoxIntersect(r[u],r[u+1],l)){x=c?90:30;break}}else{var d=2;for(p.ticks&&(d+=p.tickwidth/2),u=0;u<r.length;u++){var h=_[u].xbnd,f=r[u];if(null!==h[0]&&f.left-p.l2p(h[0])<d||null!==h[1]&&p.l2p(h[1])-f.right<d){x=90;break}}}x&&b(v,x)}}),p._tickAngles&&i.push(function(){p._tickAngles[t]=null===x?T(y)?y:0:x});e=p._anchorAxis;e&&e.autorange&&we(p)&&!J(f,p._id)&&(f._insideTickLabelsAutorange||(f._insideTickLabelsAutorange={}),f._insideTickLabelsAutorange[e._name+".autorange"]=e.autorange,i.push(function(){v.each(function(e,t){var n=me(this);n.select(".text-math-group").empty()&&(p._vals[t].bb=q.bBox(n.node()))})}));i=H.syncOrAsync(i);return i&&i.then&&h._promises.push(i),i},Z.getPxPosition=function(e,t){var n,r=e._fullLayout._size,i=t._id.charAt(0),e=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===i?n={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(t.position||0)*r.w,_length:0}),"top"===e||"left"===e?n._offset:"bottom"===e||"right"===e?n._offset+n._length:void 0},Z.shouldShowZeroLine=function(e,t,n){var r=H.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===z)&&(pe(t,0)||!function(e,a,t,n){var r=t._mainAxis;if(r){var i=e._fullLayout,o=a._id.charAt(0),s=Z.counterLetter(a._id),l=a._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:a._length),i=i._plots[t._mainSubplot];if(!(i.mainplotinfo||i).overlays.length)return h(t);for(var c=Z.list(e,s),u=0;u<c.length;u++){var d=c[u];if(d._mainAxis===r&&h(d))return!0}}function h(e){if(!e.showline||!e.linewidth)return!1;var t=Math.max((e.linewidth+a.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-l)<t}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;var r,i=e._linepositions||{};for(r in i)if(n(i[r][0])||n(i[r][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,i=t._id.charAt(0),a=0;a<n.length;a++){var o=n[a];if(!0===o.visible&&o.xaxis+o.yaxis===r){if(B.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[i])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===i)return!0}}return!1}(e,t))},Z.clipEnds=function(t,e){return e.filter(function(e){return pe(t,e.x)})},Z.allowAutoMargin=function(e){for(var t=Z.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(j.allowAutoMargin(e,ge(r)),r.mirror&&j.allowAutoMargin(e,_e(r))),B.getComponentMethod("rangeslider","isVisible")(r)&&j.allowAutoMargin(e,ye(r))}},Z.swap=function(e,t){for(var n=function(e,t){var n,r,i,a=[];for(n=0;n<t.length;n++){var o=[],s=e._fullData[t[n]].xaxis,l=e._fullData[t[n]].yaxis;if(s&&l){for(r=0;r<a.length;r++)-1===a[r].x.indexOf(s)&&-1===a[r].y.indexOf(l)||o.push(r);if(o.length){var c=a[o[0]];if(1<o.length)for(r=1;r<o.length;r++)i=a[o[r]],ve(c.x,i.x),ve(c.y,i.y);ve(c.x,[s]),ve(c.y,[l])}else a.push({x:[s],y:[l]})}}return a}(e,t),r=0;r<n.length;r++)!function(e,t,n){var r,i,a=[],o=[],s=e.layout;for(r=0;r<t.length;r++)a.push(Z.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push(Z.getFromId(e,n[r]));var l=Object.keys(b),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(r=0;r<l.length;r++){var d=l[r],h=a[0][d],f=o[0][d],p=!0,m=!1,g=!1;if("_"!==d.charAt(0)&&"function"!=typeof h&&-1===c.indexOf(d)){for(i=1;i<a.length&&p;i++){var _=a[i][d];"type"===d&&-1!==u.indexOf(h)&&-1!==u.indexOf(_)&&h!==_?m=!0:_!==h&&(p=!1)}for(i=1;i<o.length&&p;i++){var y=o[i][d];"type"===d&&-1!==u.indexOf(f)&&-1!==u.indexOf(y)&&f!==y?g=!0:o[i][d]!==f&&(p=!1)}p&&(m&&(s[a[0]._name].type="linear"),g&&(s[o[0]._name].type="linear"),function(e,t,n,r,i){var a,o=H.nestedProperty,s=o(e[n[0]._name],t).get(),l=o(e[r[0]._name],t).get();"title"===t&&(s&&s.text===i.x&&(s.text=i.y),l&&l.text===i.y&&(l.text=i.x));for(a=0;a<n.length;a++)o(e,n[a]._name+"."+t).set(l);for(a=0;a<r.length;a++)o(e,r[a]._name+"."+t).set(s)}(s,d,a,o,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var v=e._fullLayout.annotations[r];-1!==t.indexOf(v.xref)&&-1!==n.indexOf(v.yref)&&H.swapAttrs(s.annotations[r],["?"])}}(e,n[r].x,n[r].y)}},{"../../components/color":155,"../../components/drawing":177,"../../components/titles":253,"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"./autorange":330,"./axis_autotype":332,"./axis_ids":335,"./clean_ticks":337,"./layout_attributes":346,"./set_convert":352,"@plotly/d3":20,"fast-isnumeric":31}],332:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),r=e("../../lib"),d=e("../../constants/numerical").BADNUM,l=r.isArrayOrTypedArray,h=r.isDateTime,f=r.cleanNumber,p=Math.round;function m(e){return Math.max(1,(e-1)/1e3)}t.exports=function(e,t,n){var r=e,i=n.noMultiCategory;if(l(r)&&!r.length)return"-";if(!i&&(l((e=r)[0])&&l(e[1])))return"multicategory";if(i&&Array.isArray(r[0])){for(var a=[],o=0;o<r.length;o++)if(l(r[o]))for(var s=0;s<r[o].length;s++)a.push(r[o][s]);r=a}if(function(e,t){for(var n=e.length,r=m(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=p(s),c=e[l],l=String(c);o[l]||(o[l]=1,h(c,t)&&i++,u(c)&&a++)}return 2*a<i}(r,t))return"date";n="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=m(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=p(s),c=e[l],l=String(c);o[l]||(o[l]=1,"boolean"==(l=typeof c)?a++:(t?f(c)!==d:"number"==l)?i++:"string"==l&&a++)}return 2*i<a}(r,n)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(function(e,t){return t?u(e):"number"==typeof e}(e[r],t))return!0;return!1}(r,n)?"linear":"-"}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],333:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),g=e("../../registry"),_=e("../../lib"),y=e("../array_container_defaults"),v=e("./layout_attributes"),b=e("./tick_value_defaults"),x=e("./tick_mark_defaults"),w=e("./tick_label_defaults"),T=e("./category_order_defaults"),A=e("./line_grid_defaults"),k=e("./set_convert"),M=e("./constants").WEEKDAY_PATTERN,d=e("./constants").HOUR_PATTERN;function S(n,r,e){function t(e,t){return _.coerce(n,r,v.rangebreaks,e,t)}if(t("enabled")){var i=t("bounds");if(i&&2<=i.length){var a,o,s="";if(2===i.length)for(a=0;a<2;a++)if(o=h(i[a])){s=M;break}var l=t("pattern",s);if(l===M)for(a=0;a<2;a++)(o=h(i[a]))&&(r.bounds[a]=i[a]=o-1);if(l)for(a=0;a<2;a++)switch(o=i[a],l){case M:if(!u(o))return void(r.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||7<=o)return void(r.enabled=!1);r.bounds[a]=i[a]=o;break;case d:if(!u(o))return void(r.enabled=!1);if((o=+o)<0||24<o)return void(r.enabled=!1);r.bounds[a]=i[a]=o}!1===e.autorange&&((c=e.range)[0]<c[1]?i[0]<c[0]&&i[1]>c[1]&&(r.enabled=!1):i[0]>c[0]&&i[1]<c[1]&&(r.enabled=!1))}else{var c=t("values");c&&c.length?t("dvalue"):r.enabled=!1}}}t.exports=function(e,t,n,r,i){var a=r.letter,o=r.font||{},s=r.splomStash||{},l=n("visible",!r.visibleDflt),c=t._template||{},u=t.type||c.type||"-";"date"===u&&(g.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(d=n("ticklabelmode")));c="";r.noTicklabelposition&&"multicategory"!==u||(c=_.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===d?["outside","inside"]:"x"===a?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==c.indexOf("inside")?"hide past domain":"category"===u||"multicategory"===u?"allow":"hide past div"),k(t,i);var d=!t.isValidRange(e.range);!n("autorange",d=d&&r.reverseDflt?"reversed":d)||"linear"!==u&&"-"!==u||n("rangemode"),n("range"),t.cleanRange(),T(e,t,n,r),"category"===u||r.noHover||n("hoverformat");c=n("color"),d=c!==v.color.dflt?c:o.color,a=s.label||i._dfltTitle[a];if(w(e,t,n,u,r,{pass:1}),!l)return t;n("title.text",a),_.coerceFont(n,"title.font",{family:o.family,size:_.bigFont(o.size),color:d}),b(e,t,n,u),w(e,t,n,u,r,{pass:2}),x(e,t,n,r),A(e,t,n,{dfltColor:c,bgColor:r.bgColor,showGrid:r.showGrid,attributes:v}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin");var h,c="multicategory"===u;if(r.noTickson||"category"!==u&&!c||!t.ticks&&!t.showgrid||"boundaries"===n("tickson",h=c?"boundaries":h)&&delete t.ticklabelposition,c&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===u)if(y(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:S}),t.rangebreaks.length){for(var f=0;f<t.rangebreaks.length;f++)if(t.rangebreaks[f].pattern===M){t._hasDayOfWeekBreaks=!0;break}if(k(t,i),i._has("scattergl")||i._has("splom"))for(var p=0;p<r.data.length;p++){var m=r.data[p];"scattergl"!==m.type&&"splom"!==m.type||(m.visible=!1,_.warn(m.type+" traces do not work on axes with rangebreaks. Setting trace "+m.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};var r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function h(e){if("string"==typeof e)return r[e.substr(0,3).toLowerCase()]}},{"../../lib":285,"../../registry":373,"../array_container_defaults":326,"./category_order_defaults":336,"./constants":338,"./layout_attributes":346,"./line_grid_defaults":348,"./set_convert":352,"./tick_label_defaults":353,"./tick_mark_defaults":354,"./tick_value_defaults":355,"fast-isnumeric":31}],334:[function(e,t,n){"use strict";var e=e("../../constants/docs"),r=e.FORMAT_LINK,i=e.DATE_FORMAT_LINK;function a(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+r+"."].join(" ")}function o(e,t){return a(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?a:o)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:a,descriptionWithDates:o}},{"../../constants/docs":262}],335:[function(e,t,u){"use strict";var o=e("../../registry"),i=e("./constants");function n(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}u.id2name=function(e){if("string"==typeof e&&e.match(i.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},u.name2id=function(e){if(e.match(i.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},u.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(i.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||n)){t=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},u.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var i=u.listIds(e,t),a=new Array(i.length);for(l=0;l<i.length;l++){var o=i[l];a[l]=r[o.charAt(0)+"axis"+o.substr(1)]}if(!n)for(var s=r._subplots.gl3d||[],l=0;l<s.length;l++){var c=r[s[l]];t?a.push(c[t+"axis"]):a.push(c.xaxis,c.yaxis,c.zaxis)}return a},u.listIds=function(e,t){e=e._fullLayout;if(!e)return[];e=e._subplots;return t?e[t+"axis"]:e.xaxis.concat(e.yaxis)},u.getFromId=function(e,t,n){e=e._fullLayout;return t=void 0===t||"string"!=typeof t?t:t.replace(" domain",""),"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),e[u.id2name(t)]},u.getFromTrace=function(e,t,n){var r,i=e._fullLayout,a=null;return o.traceIs(t,"gl3d")?"scene"===(r=t.scene).substr(0,5)&&(a=i[r][n+"axis"]):a=u.getFromId(e,t[n+"axis"]||n),a},u.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?r<n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},u.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},u.isLinked=function(e,t){return n(t,e._axisMatchGroups)||n(t,e._axisConstraintGroups)}},{"../../registry":373,"./constants":338}],336:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i,a;"category"===t.type&&(e=e.categoryarray,"array"===(i=n("categoryorder",i=(e=Array.isArray(e)&&0<e.length)?"array":i))&&(a=n("categoryarray")),"trace"===(i=!e&&"array"===i?t.categoryorder="trace":i)?t._initialCategories=[]:"array"===i?t._initialCategories=a.slice():(a=function(e,t){var n,r,i=t.dataAttr||e._id.charAt(0),a={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var o=t.data[r];o[i+"axis"]===e._id&&n.push(o)}for(r=0;r<n.length;r++)for(var s=n[r][i],l=0;l<s.length;l++){var c=s[l];null!=c&&(a[c]=1)}return Object.keys(a)}(t,r).sort(),"category ascending"===i?t._initialCategories=a:"category descending"===i&&(t._initialCategories=a.reverse())))}},{}],337:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),i=e("../../lib"),e=e("../../constants/numerical"),s=e.ONEDAY,a=e.ONEWEEK;n.dtick=function(e,t){var n="log"===t,r="date"===t,i="category"===t,a=r?s:1;if(!e)return a;if(o(e))return(e=Number(e))<=0?a:i?Math.max(1,Math.round(e)):r?Math.max(.1,e):e;if("string"!=typeof e||!r&&!n)return a;t=e.charAt(0),i=e.substr(1);return(i=o(i)?Number(i):0)<=0||!(r&&"M"===t&&i===Math.round(i)||n&&"L"===t||n&&"D"===t&&(1===i||2===i))?a:e},n.tick0=function(e,t,n,r){return"date"===t?i.cleanDate(e,i.dateTick0(n,r%a==0?1:0)):"D1"!==r&&"D2"!==r?o(e)?Number(e):0:void 0}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],338:[function(e,t,n){"use strict";e=e("../../lib/regex").counter;t.exports={idRegex:{x:e("x","( domain)?"),y:e("y","( domain)?")},attrRegex:e("[xy]axis"),xAxisMatch:e("xaxis"),yAxisMatch:e("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":301}],339:[function(e,t,n){"use strict";var T=e("../../lib"),O=e("./autorange"),P=e("./axis_ids").id2name,A=e("./layout_attributes"),R=e("./scale_zoom"),k=e("./set_convert"),I=e("../../constants/numerical").ALMOST_EQUAL,i=e("../../constants/alignment").FROM_BL;function M(e,t){var n=t.domain;return(n=n||e[P(t.overlaying)].domain)[1]-n[0]}function S(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function E(e,t,n,r){var i,a,o,s=S(e,t);null===s?((s={})[t]=1,o=e.length,e.push(s)):o=e.indexOf(s);for(var l=Object.keys(s),c=0;c<e.length;c++)if(i=e[c],c!==o&&i[n]){for(var u=i[n],d=0;d<l.length;d++)i[a=l[d]]=f(u,f(r,s[a]));return void e.splice(o,1)}if(1!==r)for(d=0;d<l.length;d++){var h=l[d];s[h]=f(r,s[h])}s[n]=1}function f(e,t){var n,r,i="",a="";"string"==typeof e&&(n=(i=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(a=t.match(/^[xy]*/)[0]).length,t=+t.substr(r));var o=e*t;return n||r?n&&r&&i.charAt(0)!==a.charAt(0)?n===r?o:(r<n?i.substr(r):a.substr(n))+o:i+a+e*t:o}function N(e,t){var n=e._inputDomain,r=i[e.constraintoward],r=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[r+(n[0]-r)/t,r+(n[1]-r)/t],e.setScale()}n.handleDefaults=function(e,n,t){for(var r,i,a,o,s=t.axIds,l=t.axHasImage,c=n._axisConstraintGroups=[],u=n._axisMatchGroups=[],d=0;d<s.length;d++)!function(n,r,e){var t=e.axIds,i=e.layoutOut,a=e.hasImage,o=i._axisConstraintGroups,s=i._axisMatchGroups,l=r._id,c=l.charAt(0),e=((i._splomAxes||{})[c]||{})[l]||{},u=r._id,c="x"===u.charAt(0);function d(e,t){return T.coerce(n,r,A,e,t)}r._matchGroup=null,r._constraintGroup=null,d("constrain",a?"domain":"range"),T.coerce(n,r,{constraintoward:{valType:"enumerated",values:c?["left","center","right"]:["bottom","middle","top"],dflt:c?"center":"middle"}},"constraintoward");var h,f,p=r.type,m=[];for(h=0;h<t.length;h++)(f=t[h])!==u&&i[P(f)].type===p&&m.push(f);var g=S(o,u);if(g){var _=[];for(h=0;h<m.length;h++)f=m[h],g[f]||_.push(f);m=_}var y,v,l=m.length;l&&(n.matches||e.matches)&&(y=T.coerce(n,r,{matches:{valType:"enumerated",values:m,dflt:-1!==m.indexOf(e.matches)?e.matches:void 0}},"matches"));a=a&&!c?r.anchor:void 0;l&&!y&&(n.scaleanchor||a)&&(v=T.coerce(n,r,{scaleanchor:{valType:"enumerated",values:m}},"scaleanchor",a));y?(r._matchGroup=E(s,u,y,1),b=i[P(y)],b=M(i,r)/M(i,b),c!=("x"===y.charAt(0))&&(b=(c?"x":"y")+b),E(o,u,y,b)):n.matches&&-1!==t.indexOf(n.matches)&&T.warn("ignored "+r._name+'.matches: "'+n.matches+'" to avoid an infinite loop');{var b;v?(b=(b=d("scaleratio"))||(r.scaleratio=1),E(o,u,v,b)):n.scaleanchor&&-1!==t.indexOf(n.scaleanchor)&&T.warn("ignored "+r._name+'.scaleanchor: "'+n.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}}(a=e[i=P(s[d])],o=n[i],{axIds:s,layoutOut:n,hasImage:l[i]});function h(e,t){for(d=0;d<e.length;d++)for(r in y=e[d])n[P(r)][t]=y}for(h(u,"_matchGroup"),d=0;d<c.length;d++)for(r in y=c[d])if((o=n[P(r)]).fixedrange){for(var f in y){f=P(f);!1===(e[f]||{}).fixedrange&&T.warn("fixedrange was specified as false for axis "+f+" but was overridden because another axis in its constraint group has fixedrange true"),n[f].fixedrange=!0}break}for(d=0;d<c.length;){for(r in y=c[d]){(o=n[P(r)])._matchGroup&&Object.keys(o._matchGroup).length===Object.keys(y).length&&(c.splice(d,1),d--);break}d++}h(c,"_constraintGroup");var p=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],m=!1,g=!1;function _(){w=o[x],"rangebreaks"===x&&(g=o._hasDayOfWeekBreaks)}for(d=0;d<u.length;d++)for(var y=u[d],v=0;v<p.length;v++){var b,x=p[v],w=null;for(r in y)if(a=e[i=P(r)],o=n[i],x in o){if(!o.matches&&(b=o,x in a)){_();break}null===w&&x in a&&_()}if("range"===x&&w&&(m=!0),null!==(w=null===(w="autorange"===x&&null===w&&m?!1:w)&&x in b?b[x]:w))for(r in y)(o=n[P(r)])[x]="range"===x?w.slice():w,"rangebreaks"===x&&(o._hasDayOfWeekBreaks=g,k(o,n))}},n.enforce=function(e){for(var t,n,r,i,a=e._fullLayout,o=a._axisConstraintGroups||[],s=0;s<o.length;s++){for(var l=function(e,t){for(var n=(t=t._size).h/t.w,r={},i=Object.keys(e),a=0;a<i.length;a++){var o=i[a];if("string"==typeof(c=e[o]))for(var s=c.match(/^[xy]*/)[0],l=s.length,c=+c.substr(l),u="y"===s.charAt(0)?n:1/n,d=0;d<l;d++)c*=u;r[o]=c}return r}(o[s],a),c=Object.keys(l),u=1/0,d=0,h=1/0,f={},p={},m=!1,g=0;g<c.length;g++)p[t=c[g]]=n=a[P(t)],n._inputDomain?n.domain=n._inputDomain.slice():n._inputDomain=n.domain.slice(),n._inputRange||(n._inputRange=n.range.slice()),n.setScale(),f[t]=r=Math.abs(n._m)/l[t],u=Math.min(u,r),"domain"!==n.constrain&&n._constraintShrinkable||(h=Math.min(h,r)),delete n._constraintShrinkable,d=Math.max(d,r),"domain"===n.constrain&&(m=!0);if(!(I*d<u)||m)for(g=0;g<c.length;g++)if(r=f[t=c[g]],b=(n=p[t]).constrain,r!==h||"domain"===b)if(i=r/h,"range"===b)R(n,i);else{var _=n._inputDomain,y=(n.domain[1]-n.domain[0])/(_[1]-_[0]),v=(n.r2l(n.range[1])-n.r2l(n.range[0]))/(n.r2l(n._inputRange[1])-n.r2l(n._inputRange[0]));if((i/=y)*v<1)n.domain=n._input.domain=_.slice(),R(n,i);else{if(v<1&&(n.range=n._input.range=n._inputRange.slice(),i*=v),n.autorange){var b=n.r2l(n.range[0]),y=n.r2l(n.range[1]),_=(b+y)/2,x=_,w=_,v=Math.abs(y-_),T=_-v*i*1.0001,A=_+v*i*1.0001,k=O.makePadFn(a,n,0),M=O.makePadFn(a,n,1);N(n,i);for(var S,E=Math.abs(n._m),_=O.concatExtremes(e,n),C=_.min,L=_.max,D=0;D<C.length;D++)T<(S=C[D].val-k(C[D])/E)&&S<x&&(x=S);for(D=0;D<L.length;D++)(S=L[D].val+M(L[D])/E)<A&&w<S&&(w=S);i/=(w-x)/(2*v),x=n.l2r(x),w=n.l2r(w),n.range=n._input.range=b<y?[x,w]:[w,x]}N(n,i)}}}},n.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++)if(n[r][t])return"g"+r;return t},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,i=e._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"./autorange":330,"./axis_ids":335,"./layout_attributes":346,"./scale_zoom":350,"./set_convert":352}],340:[function(e,t,n){"use strict";var pe=e("@plotly/d3"),me=e("tinycolor2"),r=e("has-passive-events"),ge=e("../../registry"),_e=e("../../lib"),a=_e.strTranslate,ye=e("../../lib/svg_text_utils"),i=e("../../components/color"),ve=e("../../components/drawing"),be=e("../../components/fx"),xe=e("./axes"),o=e("../../lib/setcursor"),we=e("../../components/dragelement"),s=e("../../components/dragelement/helpers"),Te=s.selectingOrDrawing,Ae=s.freeMode,ke=e("../../constants/alignment").FROM_TL,Me=e("../../lib/clear_gl_canvases"),Se=e("../../plot_api/subroutines").redrawReglTraces,Ee=e("../plots"),Ce=e("./axis_ids").getFromId,Le=e("./select").prepSelect,De=e("./select").clearSelect,Oe=e("./select").selectOnClick,Pe=e("./scale_zoom"),Re=e("./constants"),Ie=Re.MINDRAG,Ne=Re.MINZOOM,l=!0;function c(t,e,n,r){n=_e.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return n.call(o,r),n.node()}function ze(e,t,n,r,i,a,o){n=c(e,"rect",t,n);return pe.select(n).call(ve.setRect,r,i,a,o),n}function Fe(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function je(e,t,n,r,i){for(var a=0;a<e.length;a++){var o,s,l=e[a];l.fixedrange||(l.rangebreaks?(s=(o="y"===l._id.charAt(0))?1-n:n,r[l._name+".range[0]"]=l.l2r(l.p2l((o?1-t:t)*l._length)),r[l._name+".range[1]"]=l.l2r(l.p2l(s*l._length))):(o=l._rl[0],s=l._rl[1]-o,r[l._name+".range[0]"]=l.l2r(o+s*t),r[l._name+".range[1]"]=l.l2r(o+s*n)))}i&&i.length&&je(i,i=(t+(1-n))/2,1-i,r,[])}function Be(e,t){for(var n=0;n<e.length;n++){var r,i=e[n];i.fixedrange||(i.rangebreaks?(r=i._length,r=(i.p2l(0+t)-i.p2l(0)+(i.p2l(r+t)-i.p2l(r)))/2,i.range=[i.l2r(i._rl[0]-r),i.l2r(i._rl[1]-r)]):i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)])}}function He(e,t,n,r,i){return e.append("path").attr("class","zoombox").style({fill:.2<t?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(n,r)).attr("d",i+"Z")}function Ue(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(t,n)).attr("d","M0,0Z")}function Ve(e,t,n,r,i,a){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),u(e,t,i,a)}function u(e,t,n,r){n||(e.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function qe(e){pe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Ye(e){l&&e.data&&e._context.showTips&&(_e.notifier(_e._(e,"Double-click to zoom back out"),"long"),l=!1)}function Ge(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,Ne)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function We(e,t,n,r,i){for(var a,o,s,l,c=!1,u={},d={},h=(i||{}).xaHash,f=(i||{}).yaHash,p=0;p<t.length;p++){var m=t[p];for(a in n)if(m[a]){for(s in m)i&&(h[s]||f[s])||("x"===s.charAt(0)?n:r)[s]||(u[s]=a);for(o in r)i&&(h[o]||f[o])||!m[o]||(c=!0)}for(o in r)if(m[o])for(l in m)i&&(h[l]||f[l])||("x"===l.charAt(0)?n:r)[l]||(d[l]=o)}c&&(_e.extendFlat(u,d),d={});var g={},_=[];for(s in u){var y=Ce(e,s);_.push(y),g[y._id]=y}var v={},b=[];for(l in d){var x=Ce(e,l);b.push(x),v[x._id]=x}return{xaHash:g,yaHash:v,xaxes:_,yaxes:b,xLinks:u,yLinks:d,isSubplotConstrained:c}}function Xe(e,t){var n;r?(n=void 0!==e.onwheel?"wheel":"mousewheel",e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})):void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function Ze(e){var t,n=[];for(t in e)n.push(e[t]);return n}t.exports={makeDragBox:function(y,s,e,t,n,r,v,b){var x,w,T,A,l,c,a,o,u,d,h,k,M,S,f,E,C,L,D,O,p,m,g,_=y._fullLayout._zoomlayer,P=v+b==="nsew",R=1===(v+b).length;function I(){if(x=s.xaxis,w=s.yaxis,u=x._length,d=w._length,a=x._offset,o=w._offset,(T={})[x._id]=x,(A={})[w._id]=w,v&&b)for(var e=s.overlays,t=0;t<e.length;t++){var n=e[t].xaxis;T[n._id]=n;n=e[t].yaxis;A[n._id]=n}l=Ze(T),c=Ze(A),M=Fe(l,b),S=Fe(c,v),f=!S&&!M,k=We(y,y._fullLayout._axisMatchGroups,T,A);var r=(h=We(y,y._fullLayout._axisConstraintGroups,T,A,k)).isSubplotConstrained||k.isSubplotConstrained;E=b||r,C=v||r;r=y._fullLayout;L=r._has("scattergl"),D=r._has("splom"),O=r._has("svg")}I();var i,N,z=(i=S+M,z=y._fullLayout.dragmode,N=P,i?"nsew"!==i?i.toLowerCase()+"-resize":N?"":"pan"===z?"move":"crosshair":"pointer"),F=ze(s,v+b+"drag",z,e,t,n,r);if(f&&!P)return F.onmousedown=null,F.style.pointerEvents="none",F;var j,B,H,U,V,q,Y,G,W,X,Z={element:F,gd:y,plotinfo:s};function J(){Z.plotinfo.selection=!1,De(y)}function $(e,t){var n,r,i,a,o=Z.gd;0<=o._fullLayout._activeShapeIndex?o._fullLayout._deactivateShape(o):(a=o._fullLayout.clickmode,qe(o),2!==e||R||function(){if(!y._transitioningWithDuration){var e=y._context.doubleClick,t=[];M&&(t=t.concat(l)),S&&(t=t.concat(c)),k.xaxes&&(t=t.concat(k.xaxes)),k.yaxes&&(t=t.concat(k.yaxes));var n,r,i,a={};if("reset+autosize"===e)for(e="autosize",r=0;r<t.length;r++)if((n=t[r])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}if("autosize"===e)for(r=0;r<t.length;r++)(n=t[r]).fixedrange||(a[n._name+".autorange"]=!0);else if("reset"===e)for((M||h.isSubplotConstrained)&&(t=t.concat(h.xaxes)),S&&!h.isSubplotConstrained&&(t=t.concat(h.yaxes)),h.isSubplotConstrained&&(M?S||(t=t.concat(c)):t=t.concat(l)),r=0;r<t.length;r++)(n=t[r]).fixedrange||(n._rangeInitial?(i=n._rangeInitial,a[n._name+".range[0]"]=i[0],a[n._name+".range[1]"]=i[1]):a[n._name+".autorange"]=!0);y.emit("plotly_doubleclick",null),ge.call("_guiRelayout",y,a)}}(),P?(-1<a.indexOf("select")&&Oe(t,o,l,c,s.id,Z),-1<a.indexOf("event")&&be.click(o,t,s.id)):1===e&&R&&(r=(n=v?w:x)._name+".range["+(a="s"===v||"w"===b?0:1)+"]",t=a,a=(e=n).range[t],t=Math.abs(a-e.range[1-t]),t="date"===e.type?a:"log"===e.type?(i=Math.ceil(Math.max(0,-Math.log(t)/Math.LN10))+3,pe.format("."+i+"g")(Math.pow(10,a))):(i=Math.floor(Math.log(Math.abs(a))/Math.LN10)-Math.floor(Math.log(t)/Math.LN10)+4,pe.format("."+String(i)+"g")(a)),i="left",a="middle",n.fixedrange||(v?(a="n"===v?"top":"bottom","right"===n.side&&(i="right")):"e"===b&&(i="right"),o._context.showAxisRangeEntryBoxes&&pe.select(F).call(ye.makeEditable,{gd:o,immediate:!0,background:o._fullLayout.paper_bgcolor,text:String(t),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:i,verticalAlign:a}).on("edit",function(e){e=n.d2r(e);void 0!==e&&ge.call("_guiRelayout",o,r,e)}))))}function Q(e,t){if(y._transitioningWithDuration)return!1;var n,r,i=Math.max(0,Math.min(u,m*e+j)),a=Math.max(0,Math.min(d,g*t+B)),e=Math.abs(i-j),t=Math.abs(a-B);function o(){Y="",H.r=H.l,H.t=H.b,W.attr("d","M0,0Z")}H.l=Math.min(j,i),H.r=Math.max(j,i),H.t=Math.min(B,a),H.b=Math.max(B,a),h.isSubplotConstrained?Ne<e||Ne<t?(Y="xy",t/d<e/u?(t=e*d/u,a<B?H.t=B-t:H.b=B+t):(e=t*u/d,i<j?H.l=j-e:H.r=j+e),W.attr("d",Ge(H))):o():k.isSubplotConstrained?Ne<e||Ne<t?(Y="xy",r=Math.min(H.l/u,(d-H.b)/d),n=Math.max(H.r/u,(d-H.t)/d),H.l=r*u,H.r=n*u,H.b=(1-r)*d,H.t=(1-n)*d,W.attr("d",Ge(H))):o():!S||t<Math.min(Math.max(.6*e,Ie),Ne)?e<Ie||!M?o():(H.t=0,H.b=d,Y="x",W.attr("d",(r=B,"M"+((n=H).l-.5)+","+(r-Ne-.5)+"h-3v"+(2*Ne+1)+"h3ZM"+(n.r+.5)+","+(r-Ne-.5)+"h3v"+(2*Ne+1)+"h-3Z"))):!M||e<Math.min(.6*t,Ne)?(H.l=0,H.r=u,Y="y",W.attr("d","M"+((e=j)-Ne-.5)+","+((t=H).t-.5)+"v-3h"+(2*Ne+1)+"v3ZM"+(e-Ne-.5)+","+(t.b+.5)+"v3h"+(2*Ne+1)+"v-3Z")):(Y="xy",W.attr("d",Ge(H))),H.w=H.r-H.l,H.h=H.b-H.t,Y&&(X=!0),y._dragged=X,Ve(G,W,H,V,q,U),K(),y.emit("plotly_relayouting",p),q=!0}function K(){p={},"xy"!==Y&&"x"!==Y||(je(l,H.l/u,H.r/u,p,h.xaxes),se("x",p)),"xy"!==Y&&"y"!==Y||(je(c,(d-H.b)/d,(d-H.t)/d,p,h.yaxes),se("y",p))}function ee(){K(),qe(y),ce(),Ye(y)}Z.prepFn=function(e,t,n){var r=Z.dragmode,i=y._fullLayout.dragmode;i!==r&&(Z.dragmode=i),I(),m=y._fullLayout._invScaleX,g=y._fullLayout._invScaleY,f||(P?e.shiftKey?"pan"===i?i="zoom":Te(i)||(i="pan"):e.ctrlKey&&(i="pan"):i="pan"),Ae(i)?Z.minDrag=1:Z.minDrag=void 0,Te(i)?(Z.xaxes=l,Z.yaxes=c,Le(e,t,n,Z,i)):(Z.clickFn=$,Te(r)&&J(),f||("zoom"===i?(Z.moveFn=Q,Z.doneFn=ee,Z.minDrag=1,function(e,t){var n=F.getBoundingClientRect();j=e-n.left,B=t-n.top,y._fullLayout._calcInverseTransform(y);n=_e.apply3DTransform(y._fullLayout._invTransform)(j,B);j=n[0],B=n[1],H={l:j,r:j,w:0,t:B,b:B,h:0},U=y._hmpixcount?y._hmlumcount/y._hmpixcount:me(y._fullLayout.plot_bgcolor).getLuminance(),Y="xy",X=q=!1,G=He(_,U,a,o,V="M0,0H"+u+"V"+d+"H0V0"),W=Ue(_,a,o)}(t,n)):"pan"===i&&(Z.moveFn=oe,Z.doneFn=ce))),y._fullLayout._redrag=function(){var e,t=y._dragdata;t&&t.element===F&&(e=y._fullLayout.dragmode,Te(e)||(I(),ue([0,0,u,d]),Z.moveFn(t.dx,t.dy)))}},we.init(Z);var te=[0,0,u,d],ne=null,re=Re.REDRAWDELAY,ie=s.mainplot?y._fullLayout._plots[s.mainplot]:s;function ae(e){if(y._context._scrollZoom.cartesian||y._fullLayout._enablescrollzoom){if(J(),y._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();I(),clearTimeout(ne);var t=-e.deltaY;if(isFinite(t)||(t=e.wheelDelta/10),isFinite(t)){var n,r=Math.exp(-Math.min(Math.max(t,-20),20)/200),t=ie.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(e.clientX-t.left)/t.width,a=(t.bottom-e.clientY)/t.height;if(E){for(b||(i=.5),n=0;n<l.length;n++)o(l[n],i,r);se("x"),te[2]*=r,te[0]+=te[2]*i*(1/r-1)}if(C){for(v||(a=.5),n=0;n<c.length;n++)o(c[n],a,r);se("y"),te[3]*=r,te[1]+=te[3]*(1-a)*(1/r-1)}ue(te),le(),y.emit("plotly_relayouting",p),ne=setTimeout(function(){y._fullLayout&&(te=[0,0,u,d],ce())},re),e.preventDefault()}else _e.log("Did not find wheel motion attributes: ",e)}function o(t,e,n){var r,i;t.fixedrange||(r=_e.simpleMap(t.range,t.r2l),i=r[0]+(r[1]-r[0])*e,t.range=r.map(function(e){return t.l2r(i+(e-i)*n)}))}}function oe(e,t){if(e*=m,t*=g,!y._transitioningWithDuration){if(y._fullLayout._replotting=!0,"ew"===M||"ns"===S){var n=M?-e:0,r=S?-t:0;return k.isSubplotConstrained&&(M&&S&&(n=-(e=(a=(e/u-t/d)/2)*u),r=-(t=-a*d)),S?n=-r*u/d:r=-n*d/u),M&&(Be(l,e),se("x")),S&&(Be(c,t),se("y")),ue([n,r,u,d]),le(),void y.emit("plotly_relayouting",p)}var i,a="w"===M==("n"===S)?1:-1;if(M&&S&&(h.isSubplotConstrained||k.isSubplotConstrained)&&(e=(o=(e/u+a*t/d)/2)*u,t=a*o*d),"w"===M?e=s(l,0,e):"e"===M?e=s(l,1,-e):M||(e=0),"n"===S?t=s(c,1,t):"s"===S?t=s(c,0,-t):S||(t=0),n="w"===M?e:0,r="n"===S?t:0,h.isSubplotConstrained&&!k.isSubplotConstrained||k.isSubplotConstrained&&M&&S&&0<a){if(k.isSubplotConstrained||!M&&1===S.length){for(i=0;i<l.length;i++)l[i].range=l[i]._r.slice(),Pe(l[i],1-t/d);n=(e=t*u/d)/2}if(k.isSubplotConstrained||!S&&1===M.length){for(i=0;i<c.length;i++)c[i].range=c[i]._r.slice(),Pe(c[i],1-e/u);r=(t=e*d/u)/2}}k.isSubplotConstrained&&S||se("x"),k.isSubplotConstrained&&M||se("y");var o=u-e,a=d-t;!k.isSubplotConstrained||M&&S||(M?(r=n?0:e*d/u,a=o*d/u):(n=r?0:t*u/d,o=a*u/d)),ue([n,r,o,a]),le(),y.emit("plotly_relayouting",p)}function s(e,t,n){for(var r=1-t,i=0;i<e.length;i++){var a,o,s,l=e[i];l.fixedrange||(o=(a=l)._rl[r]+(l._rl[t]-l._rl[r])/(1-(0<=(s=n/l._length)?Math.min(s,.9):1/(1/Math.max(s,-.3)+3.222))),!1!==(s=l.l2r(o))&&void 0!==s&&(l.range[t]=s))}return a._length*(a._rl[t]-o)/(a._rl[t]-a._rl[r])}}function se(e,t){for(var n=k.isSubplotConstrained?{x:c,y:l}[e]:k[e+"axes"],r=k.isSubplotConstrained?{x:l,y:c}[e]:[],i=0;i<n.length;i++){var a=n[i],o=a._id,o=k.xLinks[o]||k.yLinks[o],o=r[0]||T[o]||A[o];o&&(t?(t[a._name+".range[0]"]=t[o._name+".range[0]"],t[a._name+".range[1]"]=t[o._name+".range[1]"]):a.range=o.range.slice())}}function le(){var t,n=[];function e(e){for(t=0;t<e.length;t++)e[t].fixedrange||n.push(e[t]._id)}for(E&&(e(l),e(h.xaxes),e(k.xaxes)),C&&(e(c),e(h.yaxes),e(k.yaxes)),p={},t=0;t<n.length;t++){var r=n[t],r=Ce(y,r);xe.drawOne(y,r,{skipTitle:!0}),p[r._name+".range[0]"]=r.range[0],p[r._name+".range[1]"]=r.range[1]}xe.redrawComponents(y,n)}function ce(){ue([0,0,u,d]),_e.syncOrAsync([Ee.previousPromises,function(){y._fullLayout._replotting=!1,ge.call("_guiRelayout",y,p)}],y)}function ue(e){var t=y._fullLayout,n=t._plots,r=t._subplots.cartesian;if(D&&ge.subplotsRegistry.splom.drag(y),L)for(d=0;d<r.length;d++){var i,a,o,s=(o=n[r[d]]).xaxis,l=o.yaxis;o._scene&&(i=_e.simpleMap(s.range,s.r2l),a=_e.simpleMap(l.range,l.r2l),o._scene.update({range:[i[0],a[0],i[1],a[1]]}))}if((D||L)&&(Me(y),Se(y)),O)for(var c=e[2]/x._length,u=e[3]/w._length,d=0;d<r.length;d++){s=(o=n[r[d]]).xaxis,l=o.yaxis;var h,f,p=(E||k.isSubplotConstrained)&&!s.fixedrange&&T[s._id],m=(C||k.isSubplotConstrained)&&!l.fixedrange&&A[l._id],g=p?(h=c,b||k.isSubplotConstrained?e[0]:fe(s,h)):k.xaHash[s._id]?(h=c,e[0]*s._length/x._length):k.yaHash[s._id]?(h=u,"ns"===S?-e[1]*s._length/w._length:fe(s,h,{n:"top",s:"bottom"}[S])):he(s,h=de(s,c,u)),_=m?(f=u,v||k.isSubplotConstrained?e[1]:fe(l,f)):k.yaHash[l._id]?(f=u,e[1]*l._length/w._length):k.xaHash[l._id]?(f=c,"ew"===M?-e[0]*l._length/x._length:fe(l,f,{e:"right",w:"left"}[M])):he(l,f=de(l,c,u));(h||f)&&(p=s._offset-g/(h=h||1),m=l._offset-_/(f=f||1),o.clipRect.call(ve.setTranslate,g,_).call(ve.setScale,h,f),o.plot.call(ve.setTranslate,p,m).call(ve.setScale,1/h,1/f),h===o.xScaleFactor&&f===o.yScaleFactor||(ve.setPointGroupScale(o.zoomScalePts,h,f),ve.setTextPointsScale(o.zoomScaleTxt,h,f)),ve.hideOutsideRangePoints(o.clipOnAxisFalseTraces,o),o.xScaleFactor=h,o.yScaleFactor=f)}}function de(e,t,n){return e.fixedrange?0:E&&h.xaHash[e._id]?t:C&&(h.isSubplotConstrained?h.xaHash:h.yaHash)[e._id]?n:0}function he(e,t){return t?(e.range=e._r.slice(),Pe(e,t),fe(e,t)):0}function fe(e,t,n){return e._length*(1-t)*ke[n||e.constraintoward||"middle"]}return v.length*b.length!=1&&Xe(F,ae),F},makeDragger:c,makeRectDragger:ze,makeZoombox:He,makeCorners:Ue,updateZoombox:Ve,xyCorners:Ge,transitionZoombox:u,removeZoombox:qe,showDoubleClickNotifier:Ye,attachWheelEventHandler:Xe}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../constants/alignment":260,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/subroutines":321,"../../registry":373,"../plots":366,"./axes":331,"./axis_ids":335,"./constants":338,"./scale_zoom":350,"./select":351,"@plotly/d3":20,"has-passive-events":63,tinycolor2:119}],341:[function(e,t,n){"use strict";var r=e("@plotly/d3"),l=e("../../components/fx"),c=e("../../components/dragelement"),i=e("../../lib/setcursor"),u=e("./dragbox").makeDragBox,d=e("./constants").DRAGGERSIZE;n.initInteractions=function(o){var e,s=o._fullLayout;o._context.staticPlot?r.select(o).selectAll(".drag").remove():(s._has("cartesian")||s._has("splom"))&&(Object.keys(s._plots||{}).sort(function(e,t){if((s._plots[e].mainplot&&!0)!==(s._plots[t].mainplot&&!0))return s._plots[e].mainplot?1:-1;e=e.split("y"),t=t.split("y");return e[0]===t[0]?Number(e[1]||1)-Number(t[1]||1):Number(e[0]||1)-Number(t[0]||1)}).forEach(function(t){var n,e,r=s._plots[t],i=r.xaxis,a=r.yaxis;r.mainplot||((n=u(o,r,i._offset,a._offset,i._length,a._length,"ns","ew")).onmousemove=function(e){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===t&&o._fullLayout._plots[t]&&l.hover(o,e,t)},l.hover(o,e,t),o._fullLayout._lasthover=n,o._fullLayout._hoversubplot=t},n.onmouseout=function(e){o._dragging||(o._fullLayout._hoversubplot=null,c.unhover(o,e))},o._context.showAxisDragHandles&&(u(o,r,i._offset-d,a._offset-d,d,d,"n","w"),u(o,r,i._offset+i._length,a._offset-d,d,d,"n","e"),u(o,r,i._offset-d,a._offset+a._length,d,d,"s","w"),u(o,r,i._offset+i._length,a._offset+a._length,d,d,"s","e"))),o._context.showAxisDragHandles&&(t===i._mainSubplot&&(e=i._mainLinePosition,"top"===i.side&&(e-=d),u(o,r,i._offset+.1*i._length,e,.8*i._length,d,"","ew"),u(o,r,i._offset,e,.1*i._length,d,"","w"),u(o,r,i._offset+.9*i._length,e,.1*i._length,d,"","e")),t===a._mainSubplot&&(i=a._mainLinePosition,"right"!==a.side&&(i-=d),u(o,r,i,a._offset+.1*a._length,d,.8*a._length,"ns",""),u(o,r,i,a._offset+.9*a._length,d,.1*a._length,"s",""),u(o,r,i,a._offset,d,.1*a._length,"n","")))}),(e=s._hoverlayer.node()).onmousemove=function(e){e.target=o._fullLayout._lasthover,l.hover(o,e,s._hoversubplot)},e.onclick=function(e){e.target=o._fullLayout._lasthover,l.click(o,e)},e.onmousedown=function(e){o._fullLayout._lasthover.onmousedown(e)},n.updateFx(o))},n.updateFx=function(e){var t=e._fullLayout,e="pan"===t.dragmode?"move":"crosshair";i(t._draggers,e)}},{"../../components/dragelement":174,"../../components/fx":195,"../../lib/setcursor":305,"./constants":338,"./dragbox":340,"@plotly/d3":20}],342:[function(e,t,n){"use strict";t.exports={clearOutlineControllers:function(e){(e=e._fullLayout._zoomlayer)&&e.selectAll(".outline-controllers").remove()},clearSelect:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}}},{}],343:[function(e,t,n){"use strict";var r=e("../../lib").strTranslate;function i(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}t.exports={p2r:i,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(t){var n="y"===t._id.charAt(0)?1:0;return function(e){return i(t,e[n])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},{"../../lib":285}],344:[function(e,t,n){"use strict";var g=e("../../registry"),_=e("../../lib"),y=e("./axis_ids");t.exports=function(m){return function(e,t){var n=e[m];if(Array.isArray(n))for(var r=g.subplotsRegistry.cartesian,i=r.idRegex,e=t._subplots,a=e.xaxis,o=e.yaxis,s=e.cartesian,l=t._has("cartesian")||t._has("gl2d"),c=0;c<n.length;c++){var u,d,h,f,p=n[c];_.isPlainObject(p)&&(u=y.cleanId(p.xref,"x",!1),d=y.cleanId(p.yref,"y",!1),h=i.x.test(u),f=i.y.test(d),(h||f)&&(l||_.pushUnique(t._basePlotModules,r),p=!1,h&&-1===a.indexOf(u)&&(a.push(u),p=!0),f&&-1===o.indexOf(d)&&(o.push(d),p=!0),p&&h&&f&&s.push(u+d)))}}}},{"../../lib":285,"../../registry":373,"./axis_ids":335}],345:[function(e,t,n){"use strict";var y=e("@plotly/d3"),v=e("../../registry"),f=e("../../lib"),r=e("../plots"),b=e("../../components/drawing"),x=e("../get_data").getModuleCalcData,m=e("./axis_ids"),w=e("./constants"),i=e("../../constants/xmlns_namespaces"),u=f.ensureSingle;function d(e,t,n){return f.ensureSingle(e,t,n,function(e){e.datum(n)})}function g(r,i,e,a,o){for(var t=w.traceLayerClasses,n=r._fullLayout,s=n._modules,l=[],c=[],u=0;u<s.length;u++){var d,h,f,p,m=(d=s[u]).name,g=v.modules[m].categories;g.svg&&(h=d.layerName||m+"layer",f=d.plot,p=(m=x(e,f))[0],e=m[1],p.length&&l.push({i:t.indexOf(h),className:h,plotMethod:f,cdModule:p}),g.zoomScale&&c.push("."+h))}l.sort(function(e,t){return e.i-t.i});var _=i.plot.selectAll("g.mlayer").data(l,function(e){return e.className});_.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0).classed("rangeplot",i.isRangePlot),_.exit().remove(),_.order(),_.each(function(e){var t=y.select(this),n=e.className;e.plotMethod(r,i,e.cdModule,t,a,o),-1===w.clipOnAxisFalseQuery.indexOf("."+n)&&b.setClipUrl(t,i.layerClipId,r)}),n._has("scattergl")&&(d=v.getModule("scattergl"),p=x(e,d)[0],d.plot(r,i,p)),r._context.staticPlot||(i._hasClipOnAxisFalse&&(i.clipOnAxisFalseTraces=i.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),c.length&&(n=i.plot.selectAll(c.join(",")).selectAll(".trace"),i.zoomScalePts=n.selectAll("path.point"),i.zoomScaleTxt=n.selectAll(".textpoint")))}function a(e,t){var n,r,i,a=t.plotgroup,o=t.id,s=w.layerValue2layerClass[t.xaxis.layer],l=w.layerValue2layerClass[t.yaxis.layer],c=e._fullLayout._hasOnlyLargeSploms;t.mainplot?(r=(n=t.mainplotinfo).plotgroup,e=o+"-x",i=o+"-y",t.gridlayer=n.gridlayer,t.zerolinelayer=n.zerolinelayer,u(n.overlinesBelow,"path",e),u(n.overlinesBelow,"path",i),u(n.overaxesBelow,"g",e),u(n.overaxesBelow,"g",i),t.plot=u(n.overplot,"g",o),u(n.overlinesAbove,"path",e),u(n.overlinesAbove,"path",i),u(n.overaxesAbove,"g",e),u(n.overaxesAbove,"g",i),t.xlines=r.select(".overlines-"+s).select("."+e),t.ylines=r.select(".overlines-"+l).select("."+i),t.xaxislayer=r.select(".overaxes-"+s).select("."+e),t.yaxislayer=r.select(".overaxes-"+l).select("."+i)):c?(t.xlines=u(a,"path","xlines-above"),t.ylines=u(a,"path","ylines-above"),t.xaxislayer=u(a,"g","xaxislayer-above"),t.yaxislayer=u(a,"g","yaxislayer-above")):(i=u(a,"g","layer-subplot"),t.shapelayer=u(i,"g","shapelayer"),t.imagelayer=u(i,"g","imagelayer"),t.gridlayer=u(a,"g","gridlayer"),t.zerolinelayer=u(a,"g","zerolinelayer"),u(a,"path","xlines-below"),u(a,"path","ylines-below"),t.overlinesBelow=u(a,"g","overlines-below"),u(a,"g","xaxislayer-below"),u(a,"g","yaxislayer-below"),t.overaxesBelow=u(a,"g","overaxes-below"),t.plot=u(a,"g","plot"),t.overplot=u(a,"g","overplot"),t.xlines=u(a,"path","xlines-above"),t.ylines=u(a,"path","ylines-above"),t.overlinesAbove=u(a,"g","overlines-above"),u(a,"g","xaxislayer-above"),u(a,"g","yaxislayer-above"),t.overaxesAbove=u(a,"g","overaxes-above"),t.xlines=a.select(".xlines-"+s),t.ylines=a.select(".ylines-"+l),t.xaxislayer=a.select(".xaxislayer-"+s),t.yaxislayer=a.select(".yaxislayer-"+l)),c||(d(t.gridlayer,"g",t.xaxis._id),d(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(m.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function _(e,t){if(e){var n,r={};for(n in e.each(function(e){e=e[0];y.select(this).remove(),T(e,t),r[e]=!0}),t._plots)for(var i=t._plots[n].overlays||[],a=0;a<i.length;a++){var o=i[a];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function T(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=w.idRegex,n.attrRegex=w.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){for(var n,r,t=t._subplots,i=t.xaxis,a=t.yaxis,o=t.cartesian,s=o.concat(t.gl2d||[]),l={},c={},u=0;u<s.length;u++){var d=s[u].split("y");c["y"+d[l[d[0]]=1]]=1}for(u=0;u<i.length;u++)l[n=i[u]]||(r=(e[m.id2name(n)]||{}).anchor,w.idRegex.y.test(r)||(r="y"),o.push(n+r),s.push(n+r),c[r]||(c[r]=1,f.pushUnique(a,r)));for(u=0;u<a.length;u++)c[r=a[u]]||(n=(e[m.id2name(r)]||{}).anchor,w.idRegex.x.test(n)||(n="x"),o.push(n+r),s.push(n+r),l[n]||(l[n]=1,f.pushUnique(i,n)));if(!s.length){for(var h in r=n="",e)w.attrRegex.test(h)&&("x"===h.charAt(0)?(!n||+h.substr(5)<+n.substr(5))&&(n=h):(!r||+h.substr(5)<+r.substr(5))&&(r=h));n=n?m.name2id(n):"x",r=r?m.name2id(r):"y",i.push(n),a.push(r),o.push(n+r)}},n.plot=function(e,t,n,r){var i,a=e._fullLayout,o=a._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],i=0;i<s.length;i++)t.push(i);for(i=0;i<o.length;i++){for(var l,c=o[i],u=a._plots[c],d=[],h=0;h<s.length;h++){var f=s[h],p=f[0].trace;p.xaxis+p.yaxis===c&&(-1===t.indexOf(p.index)&&!p.carpet||(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(f)),l=f)}g(e,u,d,n,r)}},n.clean=function(e,t,n,r){var i,a,o=r._plots||{},s=t._plots||{},l=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(a in o)(i=o[a]).plotgroup&&i.plotgroup.remove();var c=r._has&&r._has("gl"),u=t._has&&t._has("gl");if(c&&!u)for(a in o)(i=o[a])._scene&&i._scene.destroy();if(l.xaxis&&l.yaxis)for(var d=m.listIds({_fullLayout:r}),h=0;h<d.length;h++){var f=d[h];t[m.id2name(f)]||r._infolayer.selectAll(".g-"+f+"title").remove()}c=r._has&&r._has("cartesian"),u=t._has&&t._has("cartesian");if(c&&!u)_(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(l.cartesian)for(h=0;h<l.cartesian.length;h++){var p=l.cartesian[h];s[p]||(r._cartesianlayer.selectAll("."+p+",."+p+"-x,."+p+"-y").remove(),T(p,r))}},n.drawFramework=function(n){var r=n._fullLayout,e=function(e){var t,n,r,i,a,o,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){r=l[t],i=s._plots[r],a=i.xaxis,o=i.yaxis;var h=a._mainAxis,f=o._mainAxis,h=h._id+f._id,f=s._plots[h];i.overlays=[],h!==r&&f?(i.mainplot=h,i.mainplotinfo=f,d.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,u.push(r))}for(t=0;t<d.length;t++)r=d[t],(i=s._plots[r]).mainplotinfo.overlays.push(i);var p=u.concat(d),m=new Array(c);for(t=0;t<c;t++){r=p[t],i=s._plots[r],a=i.xaxis,o=i.yaxis;var g=[r,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(n=0;n<i.overlays.length;n++)g.push(i.overlays[n].id);m[t]=g}return m}(n),e=r._cartesianlayer.selectAll(".subplot").data(e,String);e.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),e.order(),e.exit().call(_,r),e.each(function(e){var t=e[0],e=r._plots[t];e.plotgroup=y.select(this),a(n,e),e.draglayer=u(r._draggers,"g",t)})},n.rangePlot=function(e,t,n){a(e,t),g(e,t,n),r.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=y.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:i.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":177,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"../get_data":362,"../plots":366,"./attributes":329,"./axis_ids":335,"./constants":338,"./graph_interact":341,"./layout_attributes":346,"./layout_defaults":347,"./transition_axes":356,"@plotly/d3":20}],346:[function(e,t,n){"use strict";var r=e("../font_attributes"),i=e("../../components/color/attributes"),a=e("../../components/drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,c=e("../../constants/numerical").ONEDAY,u=e("./constants"),d=u.HOUR_PATTERN,e=u.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,d,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":154,"../../components/drawing/attributes":176,"../../constants/numerical":265,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_format_attributes":334,"../font_attributes":360,"./constants":338}],347:[function(e,t,n){"use strict";var Q=e("../../lib"),K=e("../../components/color"),ee=e("../../components/fx/helpers").isUnifiedHover,te=e("../../components/fx/hovermode_defaults"),ne=e("../../plot_api/plot_template"),re=e("../layout_attributes"),ie=e("./layout_attributes"),ae=e("./type_defaults"),oe=e("./axis_defaults"),se=e("./constraints"),le=e("./position_defaults"),ce=e("./axis_ids"),ue=ce.id2name,de=ce.name2id,he=e("./constants").AX_ID_PATTERN,e=e("../../registry"),fe=e.traceIs,pe=e.getComponentMethod;function me(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(o,e,t){for(var n,r=e.autotypenumbers,i={},a={},s={},l={},c={},u={},d={},h={},f={},p={},m=0;m<t.length;m++){var g,_,y=t[m];if(fe(y,"cartesian")||fe(y,"gl2d")){if(y.xaxis)g=ue(y.xaxis),me(i,g,y);else if(y.xaxes)for(n=0;n<y.xaxes.length;n++)me(i,ue(y.xaxes[n]),y);if(y.yaxis)_=ue(y.yaxis),me(i,_,y);else if(y.yaxes)for(n=0;n<y.yaxes.length;n++)me(i,ue(y.yaxes[n]),y);"funnel"===y.type?"h"===y.orientation?(g&&(a[g]=!0),_&&(d[_]=!0)):_&&(s[_]=!0):"image"===y.type?(_&&(h[_]=!0),g&&(h[g]=!0)):(_&&(c[_]=!0,u[_]=!0),fe(y,"carpet")&&("carpet"!==y.type||y._cheater)||g&&(l[g]=!0)),"carpet"===y.type&&y._cheater&&g&&(a[g]=!0),fe(y,"2dMap")&&(f[g]=!0,f[_]=!0),fe(y,"oriented")&&(p["h"===y.orientation?_:g]=!0)}}var v=e._subplots,b=v.xaxis,x=v.yaxis,w=Q.simpleMap(b,ue),T=Q.simpleMap(x,ue),A=w.concat(T),v=K.background;b.length&&x.length&&(v=Q.coerce(o,e,re,"plot_bgcolor"));var k,M,S=K.combine(v,e.paper_bgcolor);function E(){var e=i[X]||[];J._traceIndices=e.map(function(e){return e._expandedIndex}),J._annIndices=[],J._shapeIndices=[],J._imgIndices=[],J._subplotsWith=[],J._counterAxes=[],J._name=J._attr=X,J._id=k}function C(e,t){return Q.coerce(Z,J,ie,e,t)}function L(e,t){return Q.coerce2(Z,J,ie,e,t)}function D(e,t){for(var n="x"===e?w:T,r=[],i=0;i<n.length;i++){var a=n[i];a===t||(o[a]||{}).overlaying||r.push(de(a))}return r}var O={x:x,y:b},P=O.x.concat(O.y),R={},I=[];function N(){var e=Z.matches;he.test(e)&&-1===P.indexOf(e)&&(R[e]=Z.type,I=Object.keys(R))}var z=te(o,e),F=ee(z);for(m=0;m<A.length;m++){X=A[m],k=de(X),M=X.charAt(0),Q.isPlainObject(o[X])||(o[X]={}),Z=o[X],J=ne.newContainer(e,X,M+"axis"),E();var j="x"===M&&!l[X]&&a[X]||"y"===M&&!c[X]&&s[X],B="y"===M&&(!u[X]&&d[X]||h[X]),H={letter:M,font:e.font,outerTicks:f[X],showGrid:!p[X],data:i[X]||[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:j,reverseDflt:B,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[M]||{})[k]};C("uirevision",e.uirevision),ae(Z,J,C,H),oe(Z,J,C,H,e);var U=F&&M===z.charAt(0),V=L("spikecolor",F?J.color:void 0),q=L("spikethickness",F?1.5:void 0),j=L("spikedash",F?"dot":void 0),B=L("spikemode",F?"across":void 0),H=L("spikesnap");C("showspikes",!!(U||V||q||j||B||H))||(delete J.spikecolor,delete J.spikethickness,delete J.spikedash,delete J.spikemode,delete J.spikesnap),le(Z,J,C,{letter:M,counterAxes:O[M],overlayableAxes:D(M,X),grid:e.grid}),C("title.standoff"),N(),J._input=Z}for(m=0;m<I.length;){k=I[m++],M=(X=ue(k)).charAt(0),Q.isPlainObject(o[X])||(o[X]={}),Z=o[X],J=ne.newContainer(e,X,M+"axis"),E();var Y={letter:M,font:e.font,outerTicks:f[X],showGrid:!p[X],data:[],bgColor:S,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[M]||{})[k]};C("uirevision",e.uirevision),J.type=R[k]||"linear",oe(Z,J,C,Y,e),le(Z,J,C,{letter:M,counterAxes:O[M],overlayableAxes:D(M,X),grid:e.grid}),C("fixedrange"),N(),J._input=Z}var G=pe("rangeslider","handleDefaults"),W=pe("rangeselector","handleDefaults");for(m=0;m<w.length;m++)X=w[m],Z=o[X],J=e[X],G(o,e,X),"date"===J.type&&W(Z,J,e,T,J.calendar),C("fixedrange");for(m=0;m<T.length;m++){var X=T[m],Z=o[X],J=e[X],$=e[ue(J.anchor)];C("fixedrange",pe("rangeslider","isVisible")($))}se.handleDefaults(o,e,{axIds:P.concat(I).sort(ce.idSort),axHasImage:h})}},{"../../components/color":155,"../../components/fx/helpers":191,"../../components/fx/hovermode_defaults":194,"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"../layout_attributes":364,"./axis_defaults":333,"./axis_ids":335,"./constants":338,"./constraints":339,"./layout_attributes":346,"./position_defaults":349,"./type_defaults":357}],348:[function(e,t,n){"use strict";var l=e("tinycolor2").mix,c=e("../../components/color/attributes").lightFraction,u=e("../../lib");t.exports=function(n,r,e,i){var t=(i=i||{}).dfltColor;function a(e,t){return u.coerce2(n,r,i.attributes,e,t)}var o=a("linecolor",t),s=a("linewidth");e("showline",i.showLine||!!o||!!s)||(delete r.linecolor,delete r.linewidth);o=a("gridcolor",l(t,i.bgColor,i.blend||c).toRgbString()),s=a("gridwidth");e("showgrid",i.showGrid||!!o||!!s)||(delete r.gridcolor,delete r.gridwidth),i.noZeroLine||(s=a("zerolinecolor",t),t=a("zerolinewidth"),e("zeroline",i.showGrid||!!s||!!t)||(delete r.zerolinecolor,delete r.zerolinewidth))}},{"../../components/color/attributes":154,"../../lib":285,tinycolor2:119}],349:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),h=e("../../lib");t.exports=function(e,t,n,r){var i=r.counterAxes||[],a=r.overlayableAxes||[],o=r.letter,r=r.grid;r&&(s=r._domains[o][r._axisMap[t._id]],l=r._anchors[t._id],s&&(c=r[o+"side"].split(" ")[0],u=r.domain[o]["right"===c||"top"===c?1:0]));var s=s||[0,1],l=l||!d(e.position)&&i[0]||"free",c=c||("x"===o?"bottom":"left"),u=u||0;"free"===h.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:l}},"anchor")&&n("position",u),h.coerce(e,t,{side:{valType:"enumerated",values:"x"===o?["bottom","top"]:["left","right"],dflt:c}},"side");c=!1;return(c=a.length?h.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(a),dflt:!1}},"overlaying"):c)||((c=n("domain",s))[0]>c[1]-1/4096&&(t.domain=s),h.noneOrAll(e.domain,t.domain,s)),n("layer"),t}},{"../../lib":285,"fast-isnumeric":31}],350:[function(e,t,n){"use strict";var i=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=i[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],n=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(n+(r[0]-n)*t),e.l2r(n+(r[1]-n)*t)],e.setScale()}},{"../../constants/alignment":260}],351:[function(e,t,n){"use strict";var U=e("polybooljs"),p=e("../../registry"),V=e("../../components/drawing").dashStyle,q=e("../../components/color"),Y=e("../../components/fx"),a=e("../../components/fx/helpers").makeEventData,r=e("../../components/dragelement/helpers"),G=r.freeMode,W=r.rectMode,X=r.drawMode,Z=r.openMode,J=r.selectMode,$=e("../../components/shapes/draw_newshape/display_outlines"),Q=e("../../components/shapes/draw_newshape/helpers").handleEllipse,i=e("../../components/shapes/draw_newshape/newshapes"),K=e("../../lib"),l=e("../../lib/polygon"),ee=e("../../lib/throttle"),h=e("./axis_ids").getFromId,m=e("../../lib/clear_gl_canvases"),g=e("../../plot_api/subroutines").redrawReglTraces,te=e("./constants"),ne=te.MINSELECT,re=l.filter,ie=l.tester,s=e("./handle_outline").clearSelect,e=e("./helpers"),ae=e.p2r,oe=e.axValue,se=e.getTransform;function le(e,t,n,r,i,a,o){var s,l,c,u=t._hoverdata,d=-1<t._fullLayout.clickmode.indexOf("event"),h=[];if((c=u)&&Array.isArray(c)&&!0!==c[0].hoverOnBox){ue(e,t,a);var f,i=function(e,t){var n,r,i=e[0],a=-1,o=[];for(r=0;r<t.length;r++)if(n=t[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(u,f=he(t,n,r,i));if(0<i.pointNumbers.length?function(e,t){var n,r,i,a=[];for(i=0;i<e.length;i++)(n=e[i]).cd[0].trace.selectedpoints&&0<n.cd[0].trace.selectedpoints.length&&a.push(n);if(1===a.length&&a[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(i=0;i<t.pointNumbers.length;i++)if(r.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}(f,i):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if(t=e[n],(t=t.cd[0].trace).selectedpoints){if(1<t.selectedpoints.length)return!1;if(1<(r+=t.selectedpoints.length))return!1}return 1===r}(f)&&(p=y(i))){for(o&&o.remove(),g=0;g<f.length;g++)(s=f[g])._module.selectPoints(s,!1);fe(t,f),de(a),d&&t.emit("plotly_deselect",null)}else{for(var e=e.shiftKey&&(void 0!==p?p:y(i)),p={pointNumber:i.pointNumber,searchInfo:i.searchInfo,subtract:e},m=ce(a.selectionDefs.concat([p])),g=0;g<f.length;g++)if(l=pe(f[g]._module.selectPoints(f[g],m),f[g]),h.length)for(var _=0;_<l.length;_++)h.push(l[_]);else h=l;fe(t,f,i={points:h}),a&&a.selectionDefs.push(p),o&&(e=a.mergedPolygons,p=Z(a.dragmode),$(me(e,p),o,a)),d&&t.emit("plotly_selected",i)}}}function c(e){return"pointNumber"in e&&"searchInfo"in e}function ce(e){for(var t,o=[],n=c(e[0])?0:e[0][0][0],r=n,i=c(e[0])?0:e[0][0][1],a=i,s=0;s<e.length;s++)c(e[s])?o.push(function(a){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,n,r){var i=a.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===i&&n===a.pointNumber},isRect:!1,degenerate:!1,subtract:a.subtract}}(e[s])):((t=l.tester(e[s])).subtract=e[s].subtract,o.push(t),n=Math.min(n,t.xmin),r=Math.max(r,t.xmax),i=Math.min(i,t.ymin),a=Math.max(a,t.ymax));return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(e,t,n,r){for(var i=!1,a=0;a<o.length;a++)o[a].contains(e,t,n,r)&&(i=!1===o[a].subtract);return i},isRect:!1,degenerate:!1}}function ue(e,t,n){t._fullLayout._drawing=!1;var r=t._fullLayout,i=n.plotinfo,a=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,a=(e.shiftKey||e.altKey)&&!(X(a)&&Z(a));o&&a&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):a&&i.selection||de(n),o||(s(t),r._lastSelectedSubplot=i.id)}function de(e){var t=e.dragmode,n=e.plotinfo,r=e.gd;0<=r._fullLayout._activeShapeIndex&&r._fullLayout._deactivateShape(r),!X(t)||(t=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id))&&r._fullLayout._drawing&&((t=i(t,e))&&p.call("_guiRelayout",r,{shapes:t}),r._fullLayout._drawing=!1),n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function he(e,t,n,r){for(var i,a,o,s=[],l=t.map(function(e){return e._id}),c=n.map(function(e){return e._id}),u=0;u<e.calcdata.length;u++)!0===(o=(i=e.calcdata[u])[0].trace).visible&&o._module&&o._module.selectPoints&&(!r||o.subplot!==r&&o.geo!==r?"splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[c[0]]?((a=d(o._module,i,t[0],n[0])).scene=e._fullLayout._splomScenes[o.uid],s.push(a)):"sankey"===o.type?(a=d(o._module,i,t[0],n[0]),s.push(a)):-1!==l.indexOf(o.xaxis)&&-1!==c.indexOf(o.yaxis)&&s.push(d(o._module,i,h(e,o.xaxis),h(e,o.yaxis))):s.push(d(o._module,i,t[0],n[0])));return s;function d(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function y(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,e=e.pointNumbers,n=0<e.length?e[0]:n;return!!t.selectedpoints&&-1<t.selectedpoints.indexOf(n)}function fe(e,t,n){var r,i;for(l=0;l<t.length;l++){var a=t[l].cd[0].trace._fullInput,o=e._fullLayout._tracePreGUI[a.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=a._input.selectedpoints||null)}if(n){for(var s=n.points||[],l=0;l<t.length;l++)(i=t[l].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(l=0;l<s.length;l++){var c=s[l],u=c.data,d=c.fullData;c.pointIndices?([].push.apply(u.selectedpoints,c.pointIndices),i._fullInput!==i&&[].push.apply(d.selectedpoints,c.pointIndices)):(u.selectedpoints.push(c.pointIndex),i._fullInput!==i&&d.selectedpoints.push(c.pointIndex))}}else for(l=0;l<t.length;l++)delete(i=t[l].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;var h=!1;for(l=0;l<t.length;l++){i=(r=(f=t[l]).cd)[0].trace,p.traceIs(i,"regl")&&(h=!0);var f=f._module,f=f.styleOnSelect||f.style;f&&(f(e,r,r[0].node3),r[0].nodeRangePlot3&&f(e,r,r[0].nodeRangePlot3))}h&&(m(e),g(e))}function pe(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,i=0;i<e.length;i++)e[i]=a(e[i],r,n);return e}function me(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var i=0;i<e[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var a=0;a<e[r][i].length;a++)n[r][i].push(e[r][i][a])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}t.exports={prepSelect:function(e,t,n,s,r){var l=G(r),c=W(r),u=Z(r),d=X(r),h=J(r),f="drawcircle"===r,p="drawline"===r||f,m=s.gd,g=m._fullLayout,i=g._zoomlayer,a=s.element.getBoundingClientRect(),o=s.plotinfo,_=se(o),y=t-a.left,v=n-a.top;g._calcInverseTransform(m);var b,x,w,T,A,k,M,S,E,y=(a=K.apply3DTransform(g._invTransform)(y,v))[0],v=a[1],C=g._invScaleX,L=g._invScaleY,a="M"+y+","+v,D=s.xaxes[0]._length,O=s.yaxes[0]._length,P=s.xaxes.concat(s.yaxes),R=e.altKey&&!(X(r)&&u);ue(e,m,s),l&&(w=re([[y,v]],te.BENDPX));var I=i.selectAll("path.select-outline-"+o.id).data(d?[0]:[1,2]),e=g.newshape;I.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+o.id}).style(d?{opacity:e.opacity/2,fill:u?void 0:e.fillcolor,stroke:e.line.color,"stroke-dasharray":V(e.line.dash,e.line.width),"stroke-width":e.line.width+"px"}:{}).attr("fill-rule",e.fillrule).classed("cursor-move",!!d).attr("transform",_).attr("d",a+"Z");var N,z=i.append("path").attr("class","zoombox-corners").style({fill:q.background,stroke:q.defaultLine,"stroke-width":1}).attr("transform",_).attr("d","M0,0Z"),F=g._uid+te.SELECTID,j=[],B=he(m,s.xaxes,s.yaxes,s.subplot);function H(e,t){return e-t}N=o.fillRangeItems||(c?function(e,t){var n=e.range={};for(M=0;M<P.length;M++){var r=P[M],i=r._id.charAt(0);n[r._id]=[ae(r,t[i+"min"]),ae(r,t[i+"max"])].sort(H)}}:function(e,t,n){var r=e.lassoPoints={};for(M=0;M<P.length;M++){var i=P[M];r[i._id]=n.filtered.map(oe(i))}}),s.moveFn=function(e,t){b=Math.max(0,Math.min(D,C*e+y)),x=Math.max(0,Math.min(O,L*t+v));var n,r,i=Math.abs(b-y),a=Math.abs(x-v);if(c){if(h){var o,t=g.selectdirection;switch(o="any"===t?a<Math.min(.6*i,ne)?"h":i<Math.min(.6*a,ne)?"v":"d":t){case"h":n=f?O/2:0,r=O;break;case"v":n=f?D/2:0,r=D}}if(d)switch(g.newshape.drawdirection){case"vertical":o="h",n=f?O/2:0,r=O;break;case"horizontal":o="v",n=f?D/2:0,r=D;break;case"ortho":r=i<a?(o="h",n=v,x):(o="v",n=y,b);break;default:o="d"}"h"===o?((k=p?Q(f,[b,n],[b,r]):[[y,n],[y,r],[b,r],[b,n]]).xmin=p?b:Math.min(y,b),k.xmax=p?b:Math.max(y,b),k.ymin=Math.min(n,r),k.ymax=Math.max(n,r),z.attr("d","M"+k.xmin+","+(v-ne)+"h-4v"+2*ne+"h4ZM"+(k.xmax-1)+","+(v-ne)+"h4v"+2*ne+"h-4Z")):"v"===o?((k=p?Q(f,[n,x],[r,x]):[[n,v],[n,x],[r,x],[r,v]]).xmin=Math.min(n,r),k.xmax=Math.max(n,r),k.ymin=p?x:Math.min(v,x),k.ymax=p?x:Math.max(v,x),z.attr("d","M"+(y-ne)+","+k.ymin+"v-4h"+2*ne+"v4ZM"+(y-ne)+","+(k.ymax-1)+"v4h"+2*ne+"v-4Z")):"d"===o&&((k=p?Q(f,[y,v],[b,x]):[[y,v],[y,x],[b,x],[b,v]]).xmin=Math.min(y,b),k.xmax=Math.max(y,b),k.ymin=Math.min(v,x),k.ymax=Math.max(v,x),z.attr("d","M0,0Z"))}else l&&(w.addPt([b,x]),k=w.filtered);T=s.selectionDefs&&s.selectionDefs.length?(A=function(e,t,n){if(n)return U.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions;return U.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(s.mergedPolygons,k,R),k.subtract=R,ce(s.selectionDefs.concat([k]))):(A=[k],ie(k)),$(me(A,u),I,s),h&&ee.throttle(F,te.SELECTDELAY,function(){var e;j=[];var t,n=[];for(M=0;M<B.length;M++)if(t=(S=B[M])._module.selectPoints(S,T),n.push(t),e=pe(t,S),j.length)for(var r=0;r<e.length;r++)j.push(e[r]);else j=e;fe(m,B,E={points:j}),N(E,k,w),s.gd.emit("plotly_selecting",E)})},s.clickFn=function(e,t){var n;z.remove(),0<=m._fullLayout._activeShapeIndex?m._fullLayout._deactivateShape(m):d||(n=g.clickmode,ee.done(F).then(function(){if(ee.clear(F),2===e){for(I.remove(),M=0;M<B.length;M++)(S=B[M])._module.selectPoints(S,!1);fe(m,B),de(s),m.emit("plotly_deselect",null)}else-1<n.indexOf("select")&&le(t,m,s.xaxes,s.yaxes,s.subplot,s,I),"event"===n&&m.emit("plotly_selected",void 0);Y.click(m,t)}).catch(K.error))},s.doneFn=function(){z.remove(),ee.done(F).then(function(){ee.clear(F),s.gd.emit("plotly_selected",E),k&&s.selectionDefs&&(k.subtract=R,s.selectionDefs.push(k),s.mergedPolygons.length=0,[].push.apply(s.mergedPolygons,A)),s.doneFnCompleted&&s.doneFnCompleted(j)}).catch(K.error),d&&de(s)}},clearSelect:s,clearSelectionsCache:de,selectOnClick:le}},{"../../components/color":155,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/fx/helpers":191,"../../components/shapes/draw_newshape/display_outlines":243,"../../components/shapes/draw_newshape/helpers":244,"../../components/shapes/draw_newshape/newshapes":245,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/polygon":297,"../../lib/throttle":308,"../../plot_api/subroutines":321,"../../registry":373,"./axis_ids":335,"./constants":338,"./handle_outline":342,"./helpers":343,polybooljs:73}],352:[function(e,t,n){"use strict";var _=e("@plotly/d3"),v=e("d3-time-format").utcFormat,b=e("fast-isnumeric"),x=e("../../lib"),w=x.cleanNumber,T=x.ms2DateTime,A=x.dateTime2ms,k=x.ensureNumber,M=x.isArrayOrTypedArray,r=e("../../constants/numerical"),S=r.FP_SAFE,E=r.BADNUM,C=r.LOG_CLIP,L=r.ONEWEEK,D=r.ONEDAY,O=r.ONEHOUR,P=r.ONEMIN,R=r.ONESEC,I=e("./axis_ids"),N=e("./constants"),z=N.HOUR_PATTERN,F=N.WEEKDAY_PATTERN;function j(e){return Math.pow(10,e)}function B(e){return null!=e}t.exports=function(y,f){f=f||{};var p=y._id||"x",m=p.charAt(0);function n(e,t){if(0<e)return Math.log(e)/Math.LN10;if(e<=0&&t&&y.range&&2===y.range.length){e=y.range[0],t=y.range[1];return.5*(e+t-2*C*Math.abs(e-t))}return E}function r(e,t,n,r){if((r||{}).msUTC&&b(e))return+e;if((r=A(e,n||y.calendar))===E){if(!b(e))return E;e=+e;n=Math.floor(10*x.mod(e+.05,1)),e=Math.round(e-n/10),r=A(new Date(e))+n/10}return r}function i(e,t,n){return T(e,t,n||y.calendar)}function t(e){return y._categories[Math.round(e)]}function g(e){if(B(e)){if(void 0===y._categoriesMap&&(y._categoriesMap={}),void 0!==y._categoriesMap[e])return y._categoriesMap[e];y._categories.push("number"==typeof e?String(e):e);var t=y._categories.length-1;return y._categoriesMap[e]=t}return E}function d(e){if(y._categoriesMap)return y._categoriesMap[e]}function a(e){var t=d(e);return void 0!==t?t:b(e)?+e:void 0}function o(e){return b(e)?+e:d(e)}function c(e,t,n){return _.round(n+t*e,2)}function s(e,t,n){return(e-n)/t}var u,l=function(e){return b(e)?c(e,y._m,y._b):E},h=function(e){return s(e,y._m,y._b)};y.rangebreaks&&(u="y"===m,l=function(e){if(!b(e))return E;var t=y._rangebreaks.length;if(!t)return c(e,y._m,y._b);for(var n=u,r=(n=y.range[0]>y.range[1]?!n:n)?-1:1,i=r*e,a=0,o=0;o<t;o++){var s=r*y._rangebreaks[o].min,l=r*y._rangebreaks[o].max;if(i<s)break;if(!(l<i)){a=i<(s+l)/2?o:o+1;break}a=o+1}n=y._B[a]||0;return isFinite(n)?c(e,y._m2,n):0},h=function(e){var t=y._rangebreaks.length;if(!t)return s(e,y._m,y._b);for(var n=0,r=0;r<t&&!(e<y._rangebreaks[r].pmin);r++)e>y._rangebreaks[r].pmax&&(n=r+1);return s(e,y._m2,y._B[n])}),y.c2l="log"===y.type?n:k,y.l2c="log"===y.type?j:k,y.l2p=l,y.p2l=h,y.c2p="log"===y.type?function(e,t){return l(n(e,t))}:l,y.p2c="log"===y.type?function(e){return j(h(e))}:h,-1!==["linear","-"].indexOf(y.type)?(y.d2r=y.r2d=y.d2c=y.r2c=y.d2l=y.r2l=w,y.c2d=y.c2r=y.l2d=y.l2r=k,y.d2p=y.r2p=function(e){return y.l2p(w(e))},y.p2d=y.p2r=h,y.cleanPos=k):"log"===y.type?(y.d2r=y.d2l=function(e,t){return n(w(e),t)},y.r2d=y.r2c=function(e){return j(w(e))},y.d2c=y.r2l=w,y.c2d=y.l2r=k,y.c2r=n,y.l2d=j,y.d2p=function(e,t){return y.l2p(y.d2r(e,t))},y.p2d=function(e){return j(h(e))},y.r2p=function(e){return y.l2p(w(e))},y.p2r=h,y.cleanPos=k):"date"===y.type?(y.d2r=y.r2d=x.identity,y.d2c=y.r2c=y.d2l=y.r2l=r,y.c2d=y.c2r=y.l2d=y.l2r=i,y.d2p=y.r2p=function(e,t,n){return y.l2p(r(e,0,n))},y.p2d=y.p2r=function(e,t,n){return i(h(e),t,n)},y.cleanPos=function(e){return x.cleanDate(e,E,y.calendar)}):"category"===y.type?(y.d2c=y.d2l=g,y.r2d=y.c2d=y.l2d=t,y.d2r=y.d2l_noadd=a,y.r2c=function(e){e=o(e);return void 0!==e?e:y.fraction2r(.5)},y.l2r=y.c2r=k,y.r2l=o,y.d2p=function(e){return y.l2p(y.r2c(e))},y.p2d=function(e){return t(h(e))},y.r2p=y.d2p,y.p2r=h,y.cleanPos=function(e){return"string"==typeof e&&""!==e?e:k(e)}):"multicategory"===y.type&&(y.r2d=y.c2d=y.l2d=t,y.d2r=y.d2l_noadd=a,y.r2c=function(e){e=a(e);return void 0!==e?e:y.fraction2r(.5)},y.r2c_just_indices=d,y.l2r=y.c2r=k,y.r2l=a,y.d2p=function(e){return y.l2p(y.r2c(e))},y.p2d=function(e){return t(h(e))},y.r2p=y.d2p,y.p2r=h,y.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:k(e)},y.setupMultiCategory=function(e){var t,n=y._traceIndices,r=y._matchGroup;if(r&&0===y._categories.length)for(var i in r)i!==p&&(i=f[I.id2name(i)],n=n.concat(i._traceIndices));for(var a=[[0,{}],[0,{}]],o=[],s=0;s<n.length;s++){var l=e[n[s]];if(m in l){var c=l[m],u=l._length||x.minRowLength(c);if(M(c[0])&&M(c[1]))for(t=0;t<u;t++){var d=c[0][t],h=c[1][t];B(d)&&B(h)&&(o.push([d,h]),d in a[0][1]||(a[0][1][d]=a[0][0]++),h in a[1][1]||(a[1][1][h]=a[1][0]++))}}}for(o.sort(function(e,t){var n=a[0][1],n=n[e[0]]-n[t[0]];if(n)return n;n=a[1][1];return n[e[1]]-n[t[1]]}),s=0;s<o.length;s++)g(o[s])}),y.fraction2r=function(e){var t=y.r2l(y.range[0]),n=y.r2l(y.range[1]);return y.l2r(t+e*(n-t))},y.r2fraction=function(e){var t=y.r2l(y.range[0]),n=y.r2l(y.range[1]);return(y.r2l(e)-t)/(n-t)},y.cleanRange=function(e,t){t=t||{};var n,r=x.nestedProperty(y,e=e||"range").get(),i="date"===y.type?x.dfltRange(y.calendar):"y"===m?N.DFLTRANGEY:t.dfltRange||N.DFLTRANGEX;if(i=i.slice(),"tozero"!==y.rangemode&&"nonnegative"!==y.rangemode||(i[0]=0),r&&2===r.length)for("date"!==y.type||y.autorange||(r[0]=x.cleanDate(r[0],E,y.calendar),r[1]=x.cleanDate(r[1],E,y.calendar)),n=0;n<2;n++)if("date"===y.type){if(!x.isDateTime(r[n],y.calendar)){y[e]=i;break}if(y.r2l(r[0])===y.r2l(r[1])){var a=x.constrain(y.r2l(r[0]),x.MIN_MS+1e3,x.MAX_MS-1e3);r[0]=y.l2r(a-1e3),r[1]=y.l2r(a+1e3);break}}else{if(!b(r[n])){if(!b(r[1-n])){y[e]=i;break}r[n]=r[1-n]*(n?10:.1)}r[n]<-S?r[n]=-S:r[n]>S&&(r[n]=S),r[0]===r[1]&&(a=Math.max(1,Math.abs(1e-6*r[0])),r[0]-=a,r[1]+=a)}else x.nestedProperty(y,e).set(i)},y.setScale=function(e){var t=f._size;y.overlaying&&(r=I.getFromId({_fullLayout:f},y.overlaying),y.domain=r.domain);var n=e&&y._r?"_r":"range",r=y.calendar;y.cleanRange(n);var i,a,e=y.r2l(y[n][0],r),n=y.r2l(y[n][1],r),r="y"===m;if((r?(y._offset=t.t+(1-y.domain[1])*t.h,y._length=t.h*(y.domain[1]-y.domain[0]),y._m=y._length/(e-n),y._b=-y._m*n):(y._offset=t.l+y.domain[0]*t.w,y._length=t.w*(y.domain[1]-y.domain[0]),y._m=y._length/(n-e),y._b=-y._m*e),y._rangebreaks=[],y._lBreaks=0,y._m2=0,y._B=[],y.rangebreaks)&&(y._rangebreaks=y.locateBreaks(Math.min(e,n),Math.max(e,n)),y._rangebreaks.length)){for(i=0;i<y._rangebreaks.length;i++)a=y._rangebreaks[i],y._lBreaks+=Math.abs(a.max-a.min);t=r;(t=n<e?!r:r)&&y._rangebreaks.reverse();var o=t?-1:1;for(y._m2=o*y._length/(Math.abs(n-e)-y._lBreaks),y._B.push(-y._m2*(r?n:e)),i=0;i<y._rangebreaks.length;i++)a=y._rangebreaks[i],y._B.push(y._B[y._B.length-1]-o*y._m2*(a.max-a.min));for(i=0;i<y._rangebreaks.length;i++)(a=y._rangebreaks[i]).pmin=l(a.min),a.pmax=l(a.max)}if(!isFinite(y._m)||!isFinite(y._b)||y._length<0)throw f._replotting=!1,new Error("Something went wrong with axis scaling")},y.maskBreaks=function(e){var t=y.rangebreaks||[];t._cachedPatterns||(t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?x.simpleMap(e.bounds,e.pattern?w:y.d2c):null})),t._cachedValues||(t._cachedValues=t.map(function(e){return e.enabled&&e.values?x.simpleMap(e.values,y.d2c).sort(x.sorterAsc):null}));for(var n=0;n<t.length;n++){var r=t[n];if(r.enabled)if(r.bounds){var i,a=r.pattern,o=(i=t._cachedPatterns[n])[0],s=i[1];switch(a){case F:c=(l=new Date(e)).getUTCDay(),s<o&&(s+=7,c<o&&(c+=7));break;case z:var l,c=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5);s<o&&(s+=24,c<o&&(c+=24));break;case"":c=e}if(o<=c&&c<s)return E}else for(var u=t._cachedValues[n],d=0;d<u.length;d++)if(s=(o=u[d])+r.dvalue,o<=e&&e<s)return E}return e},y.locateBreaks=function(a,o){var s=[];if(!y.rangebreaks)return s;for(var e=y.rangebreaks.slice().sort(function(e,t){return e.pattern===F&&t.pattern===z?-1:t.pattern===F&&e.pattern===z?1:0}),t=function(e,t){if((e=x.constrain(e,a,o))!==(t=x.constrain(t,a,o))){for(var n=!0,r=0;r<s.length;r++){var i=s[r];e<i.max&&t>=i.min&&(e<i.min&&(i.min=e),t>i.max&&(i.max=t),n=!1)}n&&s.push({min:e,max:t})}},n=0;n<e.length;n++){var r=e[n];if(r.enabled)if(r.bounds){var i=a,l=o;r.pattern&&(i=Math.floor(i));var c,u,d,h=(c=x.simpleMap(r.bounds,r.pattern?w:y.r2l))[0],f=c[1],p=new Date(i);switch(r.pattern){case F:d=L,u=(f-h+(f<h?7:0))*D,i+=h*D-(p.getUTCDay()*D+p.getUTCHours()*O+p.getUTCMinutes()*P+p.getUTCSeconds()*R+p.getUTCMilliseconds());break;case z:d=D,u=(f-h+(f<h?24:0))*O,i+=h*O-(p.getUTCHours()*O+p.getUTCMinutes()*P+p.getUTCSeconds()*R+p.getUTCMilliseconds());break;default:i=Math.min(c[0],c[1]),u=d=(l=Math.max(c[0],c[1]))-i}for(var m=i;m<l;m+=d)t(m,m+u)}else for(var g=x.simpleMap(r.values,y.d2c),_=0;_<g.length;_++)t(h=g[_],f=h+r.dvalue)}return s.sort(function(e,t){return e.min-t.min}),s},y.makeCalcdata=function(e,t,n){var r=y.type,i="date"===r&&e[t+"calendar"];if(t in e){if(s=e[t],l=e._length||x.minRowLength(s),x.isTypedArray(s)&&("linear"===r||"log"===r)){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}if("multicategory"===r)return function(e,t){for(var n=new Array(t),r=0;r<t;r++){var i=(e[0]||[])[r],a=(e[1]||[])[r];n[r]=d([i,a])}return n}(s,l);for(c=new Array(l),u=0;u<l;u++)c[u]=y.d2c(s[u],0,i,n)}else for(var a=(t+"0"in e?y.d2c(e[t+"0"],0,i):0),o=e["d"+t]?Number(e["d"+t]):1,s=e[{x:"y",y:"x"}[t]],l=e._length||s.length,c=new Array(l),u=0;u<l;u++)c[u]=a+u*o;if(y.rangebreaks)for(u=0;u<l;u++)c[u]=y.maskBreaks(c[u]);return c},y.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&b(y.r2l(e[0]))&&b(y.r2l(e[1]))},y.isPtWithinRange=function(e,t){var n=y.c2l(e[m],null,t),e=y.r2l(y.range[0]),t=y.r2l(y.range[1]);return e<t?e<=n&&n<=t:t<=n&&n<=e},y._emptyCategories=function(){y._categories=[],y._categoriesMap={}},y.clearCalc=function(){var e=y._matchGroup;if(e){var t,n=null,r=null;for(t in e){var i=f[I.id2name(t)];if(i._categories){n=i._categories,r=i._categoriesMap;break}}n&&r?(y._categories=n,y._categoriesMap=r):y._emptyCategories()}else y._emptyCategories();if(y._initialCategories)for(var a=0;a<y._initialCategories.length;a++)g(y._initialCategories[a])},y.sortByInitialCategories=function(){var e=[];if(y._emptyCategories(),y._initialCategories)for(var t=0;t<y._initialCategories.length;t++)g(y._initialCategories[t]);var n,r,e=e.concat(y._traceIndices);for(n in y._matchGroup)p!==n&&((r=f[I.id2name(n)])._categories=y._categories,r._categoriesMap=y._categoriesMap,e=e.concat(r._traceIndices));return e};var e=f._d3locale;"date"===y.type&&(y._dateFormat=e?e.timeFormat:v,y._extraFormat=f._extraFormat),y._separators=f.separators,y._numFormat=e?e.numberFormat:_.format,delete y._minDtick,delete y._forceTick0}},{"../../constants/numerical":265,"../../lib":285,"./axis_ids":335,"./constants":338,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],353:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../components/color").contrast,u=e("./layout_attributes"),d=e("../array_container_defaults");function h(t){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(n.every(function(e){return t[e]===t[n[0]]})||1===n.length)return t[n[0]]}function f(n,r){function e(e,t){return l.coerce(n,r,u.tickformatstops,e,t)}e("enabled")&&(e("dtickrange"),e("value"))}t.exports=function(e,t,n,r,i,a){a&&1!==a.pass||function(e,t,n){e=h(e);t("tickprefix")&&t("showtickprefix",e);t("ticksuffix",n.tickSuffixDflt)&&t("showticksuffix",e)}(e,n,i),a&&2!==a.pass||function(e,t,n,r,i){var a=h(e);n("tickprefix")&&n("showtickprefix",a);n("ticksuffix",i.tickSuffixDflt)&&n("showticksuffix",a);{var o,s;n("showticklabels")&&(o=i.font||{},s=t.color,s=-1!==(t.ticklabelposition||"").indexOf("inside")?c(i.bgColor):s&&s!==u.color.dflt?s:o.color,l.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:s}),n("tickangle"),"category"!==r&&(s=n("tickformat"),d(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:f}),t.tickformatstops.length||delete t.tickformatstops,s||"date"===r||(n("showexponent",a),n("exponentformat"),n("minexponent"),n("separatethousands"))))}}(e,t,n,r,i)}},{"../../components/color":155,"../../lib":285,"../array_container_defaults":326,"./layout_attributes":346}],354:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes");t.exports=function(e,t,n,r){var i=o.coerce2(e,t,s,"ticklen"),a=o.coerce2(e,t,s,"tickwidth"),e=o.coerce2(e,t,s,"tickcolor",t.color);n("ticks",r.outerTicks||i||a||e?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":285,"./layout_attributes":346}],355:[function(e,t,n){"use strict";var l=e("./clean_ticks"),c=e("../../lib").isArrayOrTypedArray;t.exports=function(n,r,e,t){function i(e){var t=n[e];return void 0!==t?t:(r._template||{})[e]}var a=i("tick0"),o=i("dtick"),s=i("tickvals"),s=e("tickmode",c(s)?"array":o?"linear":"auto");"auto"===s?e("nticks"):"linear"===s?(o=r.dtick=l.dtick(o,t),r.tick0=l.tick0(a,t,r.calendar,o)):"multicategory"!==t&&(void 0===e("tickvals")?r.tickmode="auto":e("ticktext"))}},{"../../lib":285,"./clean_ticks":337}],356:[function(e,t,n){"use strict";var h=e("@plotly/d3"),f=e("../../registry"),y=e("../../lib"),v=e("../../components/drawing"),b=e("./axes");t.exports=function(_,a,i,e){var o,s,l,c,r=_._fullLayout;if(0!==a.length){e&&(o=e());var u=h.ease(i.easing);return _._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var e={},t=0;t<a.length;t++){var n=a[t],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr0&&(e[r._name+".range"]=n.xr0.slice()),n.yr0&&(e[i._name+".range"]=n.yr0.slice())}return f.call("relayout",_,e).then(function(){for(var e=0;e<a.length;e++)d(a[e].plotinfo)})}()}),s=Date.now(),c=window.requestAnimationFrame(function e(){l=Date.now();for(var t=Math.min(1,(l-s)/i.duration),n=u(t),r=0;r<a.length;r++)!function(e,t){var n,r,i,a,o=e.plotinfo,s=o.xaxis,l=o.yaxis,c=s._length,u=l._length,d=!!e.xr1,h=!!e.yr1,f=[];d?(n=y.simpleMap(e.xr0,s.r2l),r=y.simpleMap(e.xr1,s.r2l),i=n[1]-n[0],a=r[1]-r[0],f[0]=(n[0]*(1-t)+t*r[0]-n[0])/(n[1]-n[0])*c,f[2]=c*(1-t+t*a/i),s.range[0]=s.l2r(n[0]*(1-t)+t*r[0]),s.range[1]=s.l2r(n[1]*(1-t)+t*r[1])):(f[0]=0,f[2]=c),h?(m=y.simpleMap(e.yr0,l.r2l),g=y.simpleMap(e.yr1,l.r2l),p=m[1]-m[0],e=g[1]-g[0],f[1]=(m[1]*(1-t)+t*g[1]-m[1])/(m[0]-m[1])*u,f[3]=u*(1-t+t*e/p),l.range[0]=s.l2r(m[0]*(1-t)+t*g[0]),l.range[1]=l.l2r(m[1]*(1-t)+t*g[1])):(f[1]=0,f[3]=u),b.drawOne(_,s,{skipTitle:!0}),b.drawOne(_,l,{skipTitle:!0}),b.redrawComponents(_,[s._id,l._id]);var p=d?c/f[2]:1,m=h?u/f[3]:1,t=d?f[0]:0,g=h?f[1]:0,c=d?f[0]/f[2]*c:0,u=h?f[1]/f[3]*u:0,c=s._offset-c,u=l._offset-u;o.clipRect.call(v.setTranslate,t,g).call(v.setScale,1/p,1/m),o.plot.call(v.setTranslate,c,u).call(v.setScale,p,m),v.setPointGroupScale(o.zoomScalePts,1/p,1/m),v.setTextPointsScale(o.zoomScaleTxt,1/p,1/m)}(a[r],n);c=l-s>i.duration?(function(){for(var e={},t=0;t<a.length;t++){var n=a[t],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr1&&(e[r._name+".range"]=n.xr1.slice()),n.yr1&&(e[i._name+".range"]=n.yr1.slice())}o&&o(),f.call("relayout",_,e).then(function(){for(var e=0;e<a.length;e++)d(a[e].plotinfo)})}(),window.cancelAnimationFrame(e)):window.requestAnimationFrame(e)}),Promise.resolve()}function d(e){var t=e.xaxis,n=e.yaxis;r._defs.select("#"+e.clipId+"> rect").call(v.setTranslate,0,0).call(v.setScale,1,1),e.plot.call(v.setTranslate,t._offset,n._offset).call(v.setScale,1,1);n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(v.setPointGroupScale,1,1),n.selectAll(".textpoint").call(v.setTextPointsScale,1,1),n.call(v.hideOutsideRangePoints,e)}b.redrawComponents(_)}},{"../../components/drawing":177,"../../lib":285,"../../registry":373,"./axes":331,"@plotly/d3":20}],357:[function(e,t,n){"use strict";var f=e("../../registry").traceIs,p=e("./axis_autotype");function m(e){return{v:"x",h:"y"}[e.orientation||"v"]}function g(e,t){var n=m(e),r=f(e,"box-violin"),i=f(e._fullInput||{},"candlestick");return r&&!i&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,r){n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)&&(function(e,t){if("-"===e.type){var n,r=e._id,i=r.charAt(0);-1!==r.indexOf("scene")&&(r=i);var a=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if("splom"===i.type&&0<i._length&&(i["_"+n+"axes"]||{})[t])return i;if((i[n+"axis"]||n)===t){if(g(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(t,r,i);if(a)if("histogram"!==a.type||i!=={v:"y",h:"x"}[a.orientation||"v"]){var o,s=i+"calendar",l=a[s],c={noMultiCategory:!f(a,"cartesian")||f(a,"noMultiCategory")};if("box"===a.type&&a._hasPreCompStats&&i==={h:"x",v:"y"}[a.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=e.autotypenumbers,g(a,i)){var u=m(a),d=[];for(n=0;n<t.length;n++){var h=t[n];f(h,"box-violin")&&(h[i+"axis"]||i)===r&&(void 0!==h[u]?d.push(h[u][0]):void 0!==h.name?d.push(h.name):d.push("text"),h[s]!==l&&(l=void 0))}e.type=p(d,l,c)}else"splom"===a.type?(o=a.dimensions[a._axesDim[r]]).visible&&(e.type=p(o.values,l,c)):e.type=p(a[i]||[a[i+"0"]],l,c)}else e.type="linear"}}(t,r.data),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":373,"./axis_autotype":332}],358:[function(e,t,u){"use strict";var o=e("../registry"),h=e("../lib");function c(e,t,n){var r,i=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return r=h.nestedProperty(r,t.prop).get(),{changed:i=(n=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&n[t.prop]!==r?!0:i,value:n[t.prop]=r}}function a(e,t){var r=[],n=t[0],i={};if("string"==typeof n)i[n]=t[1];else{if(!h.isPlainObject(n))return r;i=n}return l(i,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0),r}function s(c,e){var u=[],t=e[0],n=e[1],d=e[2],e={};if("string"==typeof t)e[t]=n;else{if(!h.isPlainObject(t))return u;e=t,void 0===d&&(d=n)}return void 0===d&&(d=null),l(e,function(e,t,n){if(Array.isArray(n)){var r=n.slice(),i=Math.min(r.length,c.data.length);d&&(i=Math.min(i,d.length));for(var a=[],o=0;o<i;o++)a[o]=d?d[o]:o}else r=n,a=d?d.slice():null;if(null===a)Array.isArray(r)&&(r=r[0]);else if(Array.isArray(a)){if(!Array.isArray(r)){var s=r;r=[];for(var l=0;l<a.length;l++)r[l]=s}r.length=Math.min(a.length,r.length)}u.push({type:"data",prop:e,traces:a,value:r})},"",0),u}function l(r,i,a,o){Object.keys(r).forEach(function(e){var t,n=r[e];"_"!==e[0]&&(t=a+(0<o?".":"")+e,h.isPlainObject(n)?l(n,i,t,o+1):i(t,e,n))})}u.manageCommandObserver=function(t,e,n,r){var i={},a=!0;(i=e&&e._commandObserver?e._commandObserver:i).cache||(i.cache={}),i.lookupTable={};var o=u.hasSimpleAPICommandBindings(t,n,i.lookupTable);if(e&&e._commandObserver){if(o)return i;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,i}if(o){c(t,o,i.cache),i.check=function(){if(a){var e=c(t,o,i.cache);return e.changed&&r&&void 0!==i.lookupTable[e.value]&&(i.disable(),Promise.resolve(r({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:i.lookupTable[e.value]})).then(i.enable,i.enable)),e.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],i.check);i.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],i.check)}}else h.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){a=!1},i.enable=function(){a=!0},e&&(e._commandObserver=i),i},u.hasSimpleAPICommandBindings=function(e,t,n){for(var r,i=t.length,a=0;a<i;a++){var o=t[a],s=o.method,o=o.args;if(Array.isArray(o)||(o=[]),!s)return!1;o=u.computeAPICommandBindings(e,s,o);if(1!==o.length)return!1;if(r){if((c=o[0]).type!==r.type)return!1;if(c.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var l=0;l<r.traces.length;l++)if(r.traces[l]!==c.traces[l])return!1}else if(c.prop!==r.prop)return!1}else r=o[0],Array.isArray(r.traces)&&r.traces.sort();var c,o=(c=o[0]).value;if(Array.isArray(o)){if(1!==o.length)return!1;o=o[0]}n&&(n[o]=a)}return r},u.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=o.apiMethodRegistry[t],i=[e];Array.isArray(n)||(n=[]);for(var a=0;a<n.length;a++)i.push(n[a]);return r.apply(null,i).catch(function(e){return h.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},u.computeAPICommandBindings=function(e,t,n){var r,i;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=a(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(a(0,[n[1]]));break;case"animate":i=n,r=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":285,"../registry":373}],359:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},n=(e.name&&e.name,e.trace,(t=t||{}).description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:e.editType},n.column={valType:"integer",min:0,dflt:0,editType:e.editType}),n},n.defaults=function(e,t,n,r){var i=r&&r.x||[0,1],r=r&&r.y||[0,1],t=t.grid;t&&(void 0!==(a=n("domain.column"))&&(a<t.columns?i=t._domains.x[a]:delete e.domain.column),void 0!==(a=n("domain.row"))&&(a<t.rows?r=t._domains.y[a]:delete e.domain.row));var a=n("domain.x",i),n=n("domain.y",r);a[0]<a[1]||(e.domain.x=i.slice()),n[0]<n[1]||(e.domain.y=r.slice())}},{"../lib/extend":279}],360:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType,t={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n=void 0===n?t:n},editType:t};return e.arrayOk&&(t.family.arrayOk=!0,t.size.arrayOk=!0,t.color.arrayOk=!0),t}},{}],361:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],362:[function(e,t,n){"use strict";var u=e("../registry"),d=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){t=u.subplotsRegistry[t];if(!t)return[];for(var r=t.attr,i=[],a=0;a<e.length;a++){var o=e[a];o[0].trace[r]===n&&i.push(o)}return i},n.getModuleCalcData=function(e,t){var n=[],r=[],i="string"==typeof t?u.getModule(t).plot:"function"==typeof t?t:t.plot;if(!i)return[n,e];for(var a=0;a<e.length;a++){var o=e[a],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===i?n:r).push(o)}return[n,r]},n.getSubplotData=function(e,t,n){if(!u.subplotsRegistry[t])return[];var r,i,a,o,s=u.subplotsRegistry[t].attr,l=[];"gl2d"===t&&(a="x"+(i=n.match(d))[1],o="y"+i[2]);for(var c=0;c<e.length;c++)r=e[c],"gl2d"===t&&u.traceIs(r,"gl2d")?r[s[0]]===a&&r[s[1]]===o&&l.push(r):r[s]===n&&l.push(r);return l}},{"../registry":373,"./cartesian/constants":338}],363:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[0,0,0,0],i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=e[4*i+n]*t[i];return r}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],364:[function(e,t,n){"use strict";var r=e("./font_attributes"),i=e("./animation_attributes"),a=e("../components/color/attributes"),o=e("../components/shapes/draw_newshape/attributes"),s=e("./pad_attributes"),l=e("../lib/extend").extendFlat,e=r({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=a.defaultLine,t.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":154,"../components/shapes/draw_newshape/attributes":240,"../lib/extend":279,"./animation_attributes":325,"./font_attributes":360,"./pad_attributes":365}],365:[function(e,t,n){"use strict";t.exports=function(e){e=e.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],366:[function(e,t,n){"use strict";var k=e("@plotly/d3"),M=e("d3-time-format").timeFormatLocale,E=e("fast-isnumeric"),L=e("../registry"),_=e("../plot_api/plot_schema"),T=e("../plot_api/plot_template"),D=e("../lib"),m=e("../components/color"),y=e("../constants/numerical").BADNUM,O=e("./cartesian/axis_ids"),S=e("./cartesian/handle_outline").clearSelect,i=e("./animation_attributes"),a=e("./frame_attributes"),o=e("../plots/get_data").getModuleCalcData,C=D.relinkPrivateKeys,P=D._,R=t.exports={};D.extendFlat(R,L),R.attributes=e("./attributes"),R.attributes.type.values=R.allTypes,R.fontAttrs=e("./font_attributes"),R.layoutAttributes=e("./layout_attributes"),R.fontWeight="normal";var A=R.transformsRegistry,e=e("./command");R.executeAPICommand=e.executeAPICommand,R.computeAPICommandBindings=e.computeAPICommandBindings,R.manageCommandObserver=e.manageCommandObserver,R.hasSimpleAPICommandBindings=e.hasSimpleAPICommandBindings,R.redrawText=function(t){return t=D.getGraphDiv(t),new Promise(function(e){setTimeout(function(){t._fullLayout&&(L.getComponentMethod("annotations","draw")(t),L.getComponentMethod("legend","draw")(t),L.getComponentMethod("colorbar","draw")(t),e(R.previousPromises(t)))},300)})},R.resize=function(n){var r;n=D.getGraphDiv(n);var e=new Promise(function(t,e){n&&!D.isHidden(n)||e(new Error("Resize must be passed a displayed plot div element.")),n._redrawTimer&&clearTimeout(n._redrawTimer),n._resolveResize&&(r=n._resolveResize),n._resolveResize=t,n._redrawTimer=setTimeout(function(){var e;!n.layout||n.layout.width&&n.layout.height||D.isHidden(n)?t(n):(delete n.layout.width,delete n.layout.height,e=n.changed,n.autoplay=!0,L.call("relayout",n,{autosize:!0}).then(function(){n.changed=e,n._resolveResize===t&&(delete n._resolveResize,t(n))}))},100)});return r&&r(e),e},R.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},R.addLinks=function(e){var t,n,r,i;(e._context.showLink||e._context.showSources)&&(n=e._fullLayout,t=(i=D.ensureSingle(n._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:m.defaultLine,"pointer-events":"all"}).each(function(){var e=k.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})})).node(),r={y:n._paper.attr("height")-9},document.body.contains(t)&&t.getComputedTextLength()>=n.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=n._paper.attr("width")-7),i.attr(r),n=i.select(".js-link-to-tool"),r=i.select(".js-link-spacer"),i=i.select(".js-sourcelinks"),e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));{var r;e._context.sendData?n.on("click",function(){R.sendDataToCloud(e)}):(r=window.location.pathname.split("/"),t=window.location.search,n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+t}))}}(e,n),r.text(n.text()&&i.text()?" - ":""))},R.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=k.select(e).append("div").attr("id","hiddenform").style("display","none"),t=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return t.append("input").attr({type:"text",name:"data"}).node().value=R.graphJson(e,!1,"keepdata"),t.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var I=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],N=["year","month","dayMonth","dayMonthYear"];function z(e,i){var t=(t=e._context.locale)||"en-US",a=!1,o={};function n(e){for(var t=!0,n=0;n<i.length;n++){var r=i[n];o[r]||(e[r]?o[r]=e[r]:t=!1)}t&&(a=!0)}for(var r=0;r<2;r++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[t]||{}).format;if(c&&(n(c),a))break;s=L.localeRegistry}var u=t.split("-")[0];if(a||u===t)break;t=u}return a||n(L.localeRegistry.en.format),o}function g(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],r=r._module||A[r.type];if(r&&r.makesData)return!0}return!1}function c(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function F(e){var t=e.margin;e._size||((t=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)}).w=Math.round(e.width)-t.l-t.r,t.h=Math.round(e.height)-t.t-t.b),e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}R.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var i=e._fullLayout={},a=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],c=e.calcdata||[],u=e._context||{};e._transitionData||R.createTransitionData(e),i._dfltTitle={plot:P(e,"Click to enter Plot title"),x:P(e,"Click to enter X axis title"),y:P(e,"Click to enter Y axis title"),colorbar:P(e,"Click to enter Colorscale title"),annotation:P(e,"new text")},i._traceWord=P(e,"trace");var d,h=z(e,I);i._mapboxAccessToken=u.mapboxAccessToken,r._initialAutoSizeIsDone?(t=r.width,d=r.height,R.supplyLayoutGlobalDefaults(a,i,h),a.width||(i.width=t),a.height||(i.height=d),R.sanitizeMargins(i)):(R.supplyLayoutGlobalDefaults(a,i,h),p=!a.width||!a.height,d=i.autosize,u=u.autosizable,p&&(d||u)?R.plotAutoSize(e,a,i):p&&R.sanitizeMargins(i),!d&&p&&(a.width=i.width,a.height=i.height)),i._d3locale=(p=h,h=i.separators,p.decimal=h.charAt(0),p.thousands=h.charAt(1),{numberFormat:k.locale(p).numberFormat,timeFormat:M(p).utcFormat}),i._extraFormat=z(e,N),i._initialAutoSizeIsDone=!0,i._dataLength=l.length,i._modules=[],i._visibleModules=[],i._basePlotModules=[];var f=i._subplots=function(){var e,t,n=L.collectableSubplotTypes,r={};if(!n){n=[];var i,a=L.subplotsRegistry;for(i in a){var o=a[i].attr;if(o&&(n.push(i),Array.isArray(o)))for(t=0;t<o.length;t++)D.pushUnique(n,o[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}(),h=i._splomAxes={x:{},y:{}},p=i._splomSubplots={};i._splomGridDflt={},i._scatterStackOpts={},i._firstScatter={},i._alignmentOpts={},i._colorAxes={},i._requestRangeslider={},i._traceUids=function(e,t){var n,r,i=t.length,a=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==r&&a.push(o),r=o}var s=a.length,l=new Array(i),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){return e&&"string"==typeof e&&!c[e]&&(u(e,t),1)}for(n=0;n<i;n++){var h=t[n].uid;d(h="number"==typeof h?String(h):h,n)||n<s&&d(a[n].uid,n)||u(D.randstr(c),n)}return l}(o,l),i._globalTransforms=(e._context||{}).globalTransforms,R.supplyDataDefaults(l,s,a,i);var m=Object.keys(h.x),g=Object.keys(h.y);if(1<m.length&&1<g.length){for(L.getComponentMethod("grid","sizeDefaults")(a,i),b=0;b<m.length;b++)D.pushUnique(f.xaxis,m[b]);for(b=0;b<g.length;b++)D.pushUnique(f.yaxis,g[b]);for(var _ in p)D.pushUnique(f.cartesian,_)}if(i._has=R._hasPlotType.bind(i),o.length===s.length)for(b=0;b<s.length;b++)C(s[b],o[b]);R.supplyLayoutModuleDefaults(a,i,s,e._transitionData);for(var y=i._visibleModules,v=[],b=0;b<y.length;b++){var x=y[b].crossTraceDefaults;x&&D.pushUnique(v,x)}for(b=0;b<v.length;b++)v[b](s,i);i._hasOnlyLargeSploms=1===i._basePlotModules.length&&"splom"===i._basePlotModules[0].name&&15<m.length&&15<g.length&&0===i.shapes.length&&0===i.images.length,R.linkSubplots(s,i,o,r),R.cleanPlot(s,i,o,r);p=!(!r._has||!r._has("gl2d")),a=!(!i._has||!i._has("gl2d")),p=!(!r._has||!r._has("cartesian"))||p,a=!(!i._has||!i._has("cartesian"))||a;p&&!a?r._bgLayer.remove():a&&!p&&(i._shouldCreateBgLayer=!0),r._zoomlayer&&!e._dragging&&S({_fullLayout:r}),function(e,t){var n,r=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var i=0;i<e.length;i++){var a=e[i];a.meta?r[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}r.length&&((n=n||(t._meta={})).data=r)}(s,i),C(i,r),L.getComponentMethod("colorscale","crossTraceDefaults")(s,i),i._preGUI||(i._preGUI={}),i._tracePreGUI||(i._tracePreGUI={});var w,T=i._tracePreGUI,A={};for(w in T)A[w]="old";for(b=0;b<s.length;b++)A[w=s[b]._fullInput.uid]||(T[w]={}),A[w]="new";for(w in A)"old"===A[w]&&delete T[w];F(i),L.getComponentMethod("rangeslider","makeData")(i),n||c.length!==s.length||R.supplyDefaultsUpdateCalc(c,s)}},R.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=(e[n]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform)for(var o,s,l=a._arrayAttrs,c=0;c<l.length;c++)o=l[c],s=D.nestedProperty(a,o).get().slice(),D.nestedProperty(r,o).set(s);i.trace=r}}},R.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},R._hasPlotType=function(e){for(var t=this._basePlotModules||[],n=0;n<t.length;n++)if(t[n].name===e)return!0;var r=this._modules||[];for(n=0;n<r.length;n++){var i=r[n].name;if(i===e)return!0;i=L.modules[i];if(i&&i.categories[e])return!0}return!1},R.cleanPlot=function(e,t,n,r){for(var i=r._basePlotModules||[],a=0;a<i.length;a++){var o=i[a];o.clean&&o.clean(e,t,n,r)}var s=r._has&&r._has("gl"),l=t._has&&t._has("gl");s&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var c=!!r._infolayer;e:for(a=0;a<n.length;a++){for(var u=n[a].uid,d=0;d<e.length;d++)if(u===e[d].uid)continue e;c&&r._infolayer.select(".cb"+u).remove()}},R.linkSubplots=function(e,t,n,r){for(var i=r._plots||{},a=t._plots={},r=t._subplots,o={_fullData:e,_fullLayout:t},s=r.cartesian.concat(r.gl2d||[]),l=0;l<s.length;l++){var c,u=s[l],d=i[u],h=O.getFromId(o,u,"x"),f=O.getFromId(o,u,"y");for(d?c=a[u]=d:(c=a[u]={}).id=u,h._counterAxes.push(f._id),f._counterAxes.push(h._id),h._subplotsWith.push(u),f._subplotsWith.push(u),c.xaxis=h,c.yaxis=f,c._hasClipOnAxisFalse=!1,b=0;b<e.length;b++){var p=e[b];if(p.xaxis===c.xaxis._id&&p.yaxis===c.yaxis._id&&!1===p.cliponaxis){c._hasClipOnAxisFalse=!0;break}}}var m=O.list(o,null,!0);for(l=0;l<m.length;l++){var g,_=null;(g=m[l]).overlaying&&(_=O.getFromId(o,g.overlaying))&&_.overlaying&&(g.overlaying=!1,_=null),g._mainAxis=_||g,_&&(g.domain=_.domain.slice()),g._anchorAxis="free"===g.anchor?null:O.getFromId(o,g.anchor)}for(l=0;l<m.length;l++)if((g=m[l])._counterAxes.sort(O.idSort),g._subplotsWith.sort(D.subplotSort),g._mainSubplot=function(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),i=e._mainAxis._anchorAxis,a="",o="",s="";i&&(s=i._mainAxis._id,a=r?e._id+s:s+e._id);if(!a||!t._plots[a]){a="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=r?e._id+u:u+e._id;o=o||d;u=O.getFromId(n,u);if(s&&u.overlaying===s){a=d;break}}}return a||o}(g,t),g._counterAxes.length&&(g.spikemode&&-1!==g.spikemode.indexOf("across")||g.automargin&&g.mirror&&"free"!==g.anchor||L.getComponentMethod("rangeslider","isVisible")(g))){for(var y=1,v=0,b=0;b<g._counterAxes.length;b++)var x=O.getFromId(o,g._counterAxes[b]),y=Math.min(y,x.domain[0]),v=Math.max(v,x.domain[1]);y<v&&(g._counterDomainMin=y,g._counterDomainMax=v)}},R.clearExpandedTraceDefaultColors=function(e){var i,a,t;for(a=[],(i=e._module._colorAttrs)||(e._module._colorAttrs=i=[],_.crawl(e._module.attributes,function(e,t,n,r){a[r]=t,a.length=r+1,"color"===e.valType&&void 0===e.dflt&&i.push(a.join("."))})),t=0;t<i.length;t++)D.nestedProperty(e,"_input."+i[t]).get()||D.nestedProperty(e,i[t]).set(null)},R.supplyDataDefaults=function(e,n,t,r){var i,a=r._modules,o=r._visibleModules,s=r._basePlotModules,l=0,c=0;function u(e){n.push(e);var t=e._module;t&&(D.pushUnique(a,t),!0===e.visible&&D.pushUnique(o,t),D.pushUnique(s,e._module.basePlotModule),l++,!1!==e._input.visible&&c++)}r._transformModules=[];for(var d,h,f={},p=[],m=(t.template||{}).data||{},g=T.traceTemplater(m),_=0;_<e.length;_++){if(i=e[_],(h=g.newTrace(i)).uid=r._traceUids[_],R.supplyTraceDefaults(i,h,c,r,_),h.index=_,h._input=i,h._expandedIndex=l,h.transforms&&h.transforms.length)for(var y=!1!==i.visible&&!1===h.visible,v=function(e,t,n,r){for(var i=e.transforms,a=[e],o=0;o<i.length;o++){var s=i[o],l=A[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return a}(h,n,t,r),b=0;b<v.length;b++){var x=v[b],w={_template:h._template,type:h.type,uid:h.uid+b};y&&!1===x.visible&&delete x.visible,R.supplyTraceDefaults(x,w,l,r,_),C(w,x),w.index=_,w._input=i,w._fullInput=h,w._expandedIndex=l,w._expandedInput=x,u(w)}else u((h._fullInput=h)._expandedInput=h);L.traceIs(h,"carpetAxis")&&(f[h.carpet]=h),L.traceIs(h,"carpetDependent")&&p.push(_)}for(_=0;_<p.length;_++)(h=n[p[_]]).visible&&(d=f[h.carpet],(h._carpet=d)&&d.visible?(h.xaxis=d.xaxis,h.yaxis=d.yaxis):h.visible=!1)},R.supplyAnimationDefaults=function(n){var e;n=n||{};var r={};function t(e,t){return D.coerce(n||{},r,i,e,t)}if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],e=0;e<n.frame.length;e++)r.frame[e]=R.supplyAnimationFrameDefaults(n.frame[e]||{});else r.frame=R.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],e=0;e<n.transition.length;e++)r.transition[e]=R.supplyAnimationTransitionDefaults(n.transition[e]||{});else r.transition=R.supplyAnimationTransitionDefaults(n.transition||{});return r},R.supplyAnimationFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,i.frame,e,t)}return e("duration"),e("redraw"),r},R.supplyAnimationTransitionDefaults=function(n){var r={};function e(e,t){return D.coerce(n||{},r,i.transition,e,t)}return e("duration"),e("easing"),r},R.supplyFrameDefaults=function(n){var r={};function e(e,t){return D.coerce(n,r,a,e,t)}return e("group"),e("name"),e("traces"),e("baseframe"),e("data"),e("layout"),r},R.supplyTraceDefaults=function(n,r,e,t,i){var a,o=t.colorway||m.defaults,s=o[e%o.length];function l(e,t){return D.coerce(n,r,R.attributes,e,t)}e=l("visible");l("type"),l("name",t._traceWord+" "+i),l("uirevision",t.uirevision);o=R.getModule(r);if(r._module=o){var i=o.basePlotModule,c=i.attr,u=i.attributes;if(c&&u){var d=t._subplots,h="";if(e||"gl2d"!==i.name){if(Array.isArray(c))for(a=0;a<c.length;a++){var f=c[a],p=D.coerce(n,r,u,f);d[f]&&D.pushUnique(d[f],p),h+=p}else h=D.coerce(n,r,u,c);d[i.name]&&D.pushUnique(d[i.name],h)}}}return e&&(l("customdata"),l("ids"),l("meta"),L.traceIs(r,"showLegend")?(D.coerce(n,r,(o.attributes.showlegend?o:R).attributes,"showlegend"),l("legendgroup"),l("legendgrouptitle.text")&&D.coerceFont(l,"legendgrouptitle.font",D.extendFlat({},t.font,{size:Math.round(1.1*t.font.size)})),l("legendrank"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,o&&o.supplyDefaults(n,r,s,t),L.traceIs(r,"noOpacity")||l("opacity"),L.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),L.traceIs(r,"noHover")||(r.hovertemplate||D.coerceHoverinfo(n,r,t),"parcats"!==r.type&&L.getComponentMethod("fx","supplyDefaults")(n,r,s,t)),o&&o.selectPoints&&l("selectedpoints"),R.supplyTransformDefaults(n,r,t)),r},R.hasMakesDataTransform=g,R.supplyTransformDefaults=function(e,t,n){if(t._length||g(e)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var a=e.transforms||[],o=r.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,h=A[d],f=!(u._module&&u._module===h),p=h&&"function"==typeof h.transform;h||D.warn("Unrecognized transform type "+d+"."),h&&h.supplyDefaults&&(f||p)?((c=h.supplyDefaults(u,t,n,e)).type=d,c._module=h,D.pushUnique(i,h)):c=D.extendFlat({},u),s.push(c)}}},R.supplyLayoutGlobalDefaults=function(n,r,e){function t(e,t){return D.coerce(n,r,R.layoutAttributes,e,t)}var i=n.template;D.isPlainObject(i)&&(r.template=i,r._template=i.layout,r._dataTemplate=i.data),t("autotypenumbers");i=D.coerceFont(t,"font");t("title.text",r._dfltTitle.plot),D.coerceFont(t,"title.font",{family:i.family,size:Math.round(1.4*i.size),color:i.color}),t("title.xref"),t("title.yref"),t("title.x"),t("title.y"),t("title.xanchor"),t("title.yanchor"),t("title.pad.t"),t("title.pad.r"),t("title.pad.b"),t("title.pad.l"),t("uniformtext.mode")&&t("uniformtext.minsize"),t("autosize",!(n.width&&n.height)),t("width"),t("height"),t("margin.l"),t("margin.r"),t("margin.t"),t("margin.b"),t("margin.pad"),t("margin.autoexpand"),n.width&&n.height&&R.sanitizeMargins(r),L.getComponentMethod("grid","sizeDefaults")(n,r),t("paper_bgcolor"),t("separators",e.decimal+e.thousands),t("hidesources"),t("colorway"),t("datarevision");e=t("uirevision");t("editrevision",e),t("selectionrevision",e),L.getComponentMethod("modebar","supplyLayoutDefaults")(n,r),L.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(n,r,t),t("meta"),D.isPlainObject(n.transition)&&(t("transition.duration"),t("transition.easing"),t("transition.ordering")),L.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),L.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,t)},R.plotAutoSize=function(e,t,n){var r,i,a=e._context||{},o=a.frameMargins,s=D.isPlotDiv(e);s&&e.emit("plotly_autosize"),a.fillFrame?(r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden"):(r=c((s=s?window.getComputedStyle(e):{}).width)||c(s.maxWidth)||n.width,i=c(s.height)||c(s.maxHeight)||n.height,E(o)&&0<o&&(l=1-2*o,r=Math.round(l*r),i=Math.round(l*i)));var o=R.layoutAttributes.width.min,l=R.layoutAttributes.height.min;r<o&&(r=o),i<l&&(i=l);l=!t.width&&1<Math.abs(n.width-r),t=!t.height&&1<Math.abs(n.height-i);(t||l)&&(l&&(n.width=r),t&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),R.sanitizeMargins(n)},R.supplyLayoutModuleDefaults=function(e,t,n,r){var i,a,o,s=L.componentsRegistry,l=t._basePlotModules,c=L.subplotsRegistry.cartesian;for(i in s)(a=s[i]).includeBasePlot&&a.includeBasePlot(e,t);for(o in l.length||l.push(c),t._has("cartesian")&&(L.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[o].sort(D.subplotSort);for(d=0;d<l.length;d++)(a=l[d]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n);for(var u=t._modules,d=0;d<u.length;d++)(a=u[d]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n);var h=t._transformModules;for(d=0;d<h.length;d++)(a=h[d]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n,r);for(i in s)(a=s[i]).supplyLayoutDefaults&&a.supplyLayoutDefaults(e,t,n)},R.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),D.clearThrottle(),D.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},R.style=function(e){for(var t=e._fullLayout._visibleModules,n=[],r=0;r<t.length;r++){var i=t[r];i.style&&D.pushUnique(n,i.style)}for(r=0;r<n.length;r++)n[r](e)},R.sanitizeMargins=function(e){var t,n,r,i,a;e&&e.margin&&(t=e.width,n=e.height,i=t-((r=e.margin).l+r.r),e=n-(r.t+r.b),i<0&&(a=(t-1)/(r.l+r.r),r.l=Math.floor(a*r.l),r.r=Math.floor(a*r.r)),e<0&&(a=(n-1)/(r.t+r.b),r.t=Math.floor(a*r.t),r.b=Math.floor(a*r.b)))},R.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},R.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};R.autoMargin=function(e,t,n){var r,i,a=e._fullLayout,o=a.width,s=a.height,l=a.margin,c=D.constrain(o-l.l-l.r,2,64),u=D.constrain(s-l.t-l.b,2,64),d=Math.max(0,o-c),o=Math.max(0,s-u),c=a._pushmargin,s=a._pushmarginIds;if(!1!==l.autoexpand&&(n?(void 0===(u=n.pad)&&(u=Math.min(12,l.l,l.r,l.t,l.b)),!d||1<(r=(n.l+n.r)/d)&&(n.l/=r,n.r/=r),!o||1<(i=(n.t+n.b)/o)&&(n.t/=i,n.b/=i),d=void 0!==n.xl?n.xl:n.x,r=void 0!==n.xr?n.xr:n.x,o=void 0!==n.yt?n.yt:n.y,i=void 0!==n.yb?n.yb:n.y,c[t]={l:{val:d,size:n.l+u},r:{val:r,size:n.r+u},b:{val:i,size:n.b+u},t:{val:o,size:n.t+u}},s[t]=1):(delete c[t],delete s[t]),!a._replotting))return R.doAutoMargin(e)},R.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height;t._size||(t._size={}),F(t);var i=t._size,a=t.margin,o=D.extendFlat({},i),s=a.l,l=a.r,c=a.t,u=a.b,d=t._pushmargin,h=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var f in d)h[f]||delete d[f];for(var p in d.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}},d){var m,g,_,y,v,b=d[p].l||{},p=d[p].b||{},x=b.val,w=b.size,T=p.val,A=p.size;for(m in d)E(w)&&d[m].r&&(v=d[m].r.val,g=d[m].r.size,x<v&&(s+l<(_=(w*v+(g-n)*x)/(v-x))+(y=(g*(1-x)+(w-n)*(1-v))/(v-x))&&(s=_,l=y))),E(A)&&d[m].t&&(v=d[m].t.val,_=d[m].t.size,T<v&&(u+c<(y=(A*v+(_-r)*T)/(v-T))+(v=(_*(1-T)+(A-r)*(1-v))/(v-T))&&(u=y,c=v)))}}var k,M=D.constrain(n-a.l-a.r,2,64),S=D.constrain(r-a.t-a.b,2,64),M=Math.max(0,n-M),S=Math.max(0,r-S);if(!M||1<(M=(s+l)/M)&&(s/=M,l/=M),!S||1<(S=(u+c)/S)&&(u/=S,c/=S),i.l=Math.round(s),i.r=Math.round(l),i.t=Math.round(c),i.b=Math.round(u),i.p=Math.round(a.pad),i.w=Math.round(n)-i.l-i.r,i.h=Math.round(r)-i.t-i.b,!t._replotting&&R.didMarginChange(o,i)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;i=3*(1+Object.keys(h).length);if(t._redrawFromAutoMarginCount<i)return L.call("_doPlot",e);t._size=o,D.warn("Too many auto-margin redraws.")}k=O.list(e,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<k.length;t++){var n=k[t][e];n&&n()}})};var s=["l","r","t","b","p","w","h"];function r(i,a,o){var s=!1;var e=[R.previousPromises,function(){if(i._transitionData)return i._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(i._transitionData._interruptCallbacks)},o.prepareFn,R.rehover,function(){return i.emit("plotly_transitioning",[]),new Promise(function(e){i._transitioning=!0,0<a.duration&&(i._transitioningWithDuration=!0),i._transitionData._interruptCallbacks.push(function(){s=!0}),o.redraw&&i._transitionData._interruptCallbacks.push(function(){return L.call("redraw",i)}),i._transitionData._interruptCallbacks.push(function(){i.emit("plotly_transitioninterrupted",[])});var t=0,n=0;function r(){return t++,function(){n++,s||n!==t||function(e){if(i._transitionData)(function(e){if(e)for(;e.length;)e.shift()})(i._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(o.redraw)return L.call("redraw",i)}).then(function(){i._transitioning=!1,i._transitioningWithDuration=!1,i.emit("plotly_transitioned",[])}).then(e)}(e)}}o.runFn(r),setTimeout(r())})}],e=D.syncOrAsync(e,i);return(e=!e||!e.then?Promise.resolve():e).then(function(){return i})}R.didMarginChange=function(e,t){for(var n=0;n<s.length;n++){var r=s[n],i=e[r],r=t[r];if(!E(i)||1<Math.abs(r-i))return!0}return!1},R.graphJson=function(e,t,a,n,r,i){(r&&t&&!e._fullData||r&&!t&&!e._fullLayout)&&R.supplyDefaults(e);var o=r?e._fullData:e.data,s=r?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(t,n){if("function"==typeof t)return n?"_function_":null;if(D.isPlainObject(t)){var r,i={};return Object.keys(t).sort().forEach(function(e){if(-1===["_","["].indexOf(e.charAt(0)))if("function"!=typeof t[e]){if("keepdata"===a){if("src"===e.substr(e.length-3))return}else if("keepstream"===a){if("string"==typeof(r=t[e+"src"])&&0<r.indexOf(":")&&!D.isPlainObject(t.stream))return}else if("keepall"!==a&&"string"==typeof(r=t[e+"src"])&&0<r.indexOf(":"))return;i[e]=c(t[e],n)}else n&&(i[e]="_function")}),i}return Array.isArray(t)?t.map(function(e){return c(e,n)}):D.isTypedArray(t)?D.simpleMap(t,D.identity):D.isJSDate(t)?D.ms2DateTimeLocal(+t):t}o={data:(o||[]).map(function(e){e=c(e);return t&&delete e.fit,e})};return t||(o.layout=c(s),r&&(s=s._size,o.layout.computed={margin:{b:s.b,l:s.l,r:s.r,t:s.t}})),l&&(o.frames=c(l)),i&&(o.config=c(e._context,!0)),"object"===n?o:JSON.stringify(o)},R.modifyFrames=function(e,t){for(var n,r=e._transitionData._frames,i=e._transitionData._frameHash,a=0;a<t.length;a++)switch((n=t[a]).type){case"replace":var o=n.value,s=(r[n.index]||{}).name,l=o.name;r[n.index]=i[l]=o,l!==s&&(delete i[s],i[l]=o);break;case"insert":i[(o=n.value).name]=o,r.splice(n.index,0,o);break;case"delete":delete i[(o=r[n.index]).name],r.splice(n.index,1)}return Promise.resolve()},R.computeFrame=function(e,t){var n,r,i,a,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=R.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(a=u.traces.indexOf(i))&&(a=u.data.length,u.traces[a]=i),u.data[a]=R.extendTrace(u.data[a],s.data[n]))}return u},R.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},R.extendObjectWithContainers=function(e,t,n){var r,i,a,o,s,l,c,t=D.extendDeepNoArrays({},t||{}),u=D.expandObjectPaths(t),d={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(i=(r=D.nestedProperty(u,n[a])).get())?D.nestedProperty(d,n[a]).set(null):(r.set(null),D.nestedProperty(d,n[a]).set(i));if(e=D.extendDeepNoArrays(e||{},u),n&&n.length)for(a=0;a<n.length;a++)if(l=D.nestedProperty(d,n[a]).get()){for(c=(s=D.nestedProperty(e,n[a])).get(),Array.isArray(c)||s.set(c=[]),o=0;o<l.length;o++){var h=l[o];c[o]=null===h?null:R.extendObjectWithContainers(c[o],h)}s.set(c)}return e},R.dataArrayContainers=["transforms","dimensions"],R.layoutArrayContainers=L.layoutArrayContainers,R.extendTrace=function(e,t){return R.extendObjectWithContainers(e,t,R.dataArrayContainers)},R.extendLayout=function(e,t){return R.extendObjectWithContainers(e,t,R.layoutArrayContainers)},R.transition=function(b,x,w,T,e,s){var e={redraw:e.redraw},A={},k=[];return e.prepareFn=function(){for(var e=Array.isArray(x)?x.length:0,t=T.slice(0,e),n=0;n<t.length;n++){var r=t[n],i=b._fullData[r]._module;i&&(i.animatable&&(i=i.basePlotModule.name,A[i]||(A[i]=[]),A[i].push(r)),b.data[t[n]]=R.extendTrace(b.data[t[n]],x[n]))}var a,o=D.expandObjectPaths(D.extendDeepNoArrays({},w)),s=/^[xy]axis[0-9]*$/;for(a in o)s.test(a)&&delete o[a].range;R.extendLayout(b.layout,o),delete b.calcdata,R.supplyDefaults(b),R.doCalcdata(b);var l=D.expandObjectPaths(w);if(l){var c,u=b._fullLayout._plots;for(c in u){var d=u[c],h=d.xaxis,f=d.yaxis,p=h.range.slice(),m=f.range.slice(),g=null,_=null,y=null,v=null;Array.isArray(l[h._name+".range"])?g=l[h._name+".range"].slice():Array.isArray((l[h._name]||{}).range)&&(g=l[h._name].range.slice()),Array.isArray(l[f._name+".range"])?_=l[f._name+".range"].slice():Array.isArray((l[f._name]||{}).range)&&(_=l[f._name].range.slice()),p&&g&&(h.r2l(p[0])!==h.r2l(g[0])||h.r2l(p[1])!==h.r2l(g[1]))&&(y={xr0:p,xr1:g}),m&&_&&(f.r2l(m[0])!==f.r2l(_[0])||f.r2l(m[1])!==f.r2l(_[1]))&&(v={yr0:m,yr1:_}),(y||v)&&k.push(D.extendFlat({plotinfo:d},y,v))}}return Promise.resolve()},e.runFn=function(e){var t,n,r,i=b._fullLayout._basePlotModules,a=k.length;if(w)for(n=0;n<i.length;n++)i[n].transitionAxes&&i[n].transitionAxes(b,k,s,e);for(r in a?((t=D.extendFlat({},s)).duration=0,delete A.cartesian):t=s,A){var o=A[r];b._fullData[o[0]]._module.basePlotModule.plot(b,o,t,e)}},r(b,s,e)},R.transitionFromReact=function(u,d,h,f){var p=u._fullLayout,m=p.transition,g={},_=[];return g.prepareFn=function(){var e,t=p._plots;for(e in g.redraw=!1,"some"===d.anim&&(g.redraw=!0),"some"===h.anim&&(g.redraw=!0),t){var n=t[e],r=n.xaxis,i=n.yaxis,a=f[r._name].range.slice(),o=f[i._name].range.slice(),s=r.range.slice(),l=i.range.slice();r.setScale(),i.setScale();var c=null,u=null;r.r2l(a[0])===r.r2l(s[0])&&r.r2l(a[1])===r.r2l(s[1])||(c={xr0:a,xr1:s}),i.r2l(o[0])===i.r2l(l[0])&&i.r2l(o[1])===i.r2l(l[1])||(u={yr0:o,yr1:l}),(c||u)&&_.push(D.extendFlat({plotinfo:n},c,u))}return Promise.resolve()},g.runFn=function(t){for(var n,r,i,e=u._fullData,a=u._fullLayout._basePlotModules,o=[],s=0;s<e.length;s++)o.push(s);function l(){if(u._fullLayout)for(var e=0;e<a.length;e++)a[e].transitionAxes&&a[e].transitionAxes(u,_,n,t)}function c(){if(u._fullLayout)for(var e=0;e<a.length;e++)a[e].plot(u,i,r,t)}_.length&&d.anim?"traces first"===m.ordering?(n=D.extendFlat({},m,{duration:0}),i=o,r=m,setTimeout(l,m.duration),c()):(n=m,i=null,r=D.extendFlat({},m,{duration:0}),setTimeout(c,n.duration),l()):_.length?(n=m,l()):d.anim&&(i=o,r=m,c())},r(u,m,g)},R.doCalcdata=function(r,e){var i,a,o,t=O.list(r),s=r._fullData,n=r._fullLayout,l=new Array(s.length),c=(r.calcdata||[]).slice();for(r.calcdata=l,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},h=0;h<s.length;h++)Array.isArray(e)&&-1===e.indexOf(h)&&(l[h]=c[h]);for(h=0;h<s.length;h++)(i=s[h])._arrayAttrs=_.findArrayAttributes(i),i._extremes={};for(var u,d=n._subplots.polar||[],h=0;h<d.length;h++)t.push(n[d[h]].radialaxis,n[d[h]].angularaxis);for(u in n._colorAxes){var f=n[u];!1!==f.cauto&&(delete f.cmin,delete f.cmax)}var p=!1;function m(e,t){if(i=s[e],!!(a=i._module).isContainer===t){t=[];if(!0===i.visible&&0!==i._length){delete i._indexToPoints;var n=i.transforms||[];for(o=n.length-1;0<=o;o--)if(n[o].enabled){i._indexToPoints=n[o]._indexToPoints;break}a&&a.calc&&(t=a.calc(r,i))}(t=!Array.isArray(t)||!t[0]?[{x:y,y:y}]:t)[0].t||(t[0].t={}),t[0].trace=i,l[e]=t}}for(v(t,s,n),h=0;h<s.length;h++)m(h,!0);for(h=0;h<s.length;h++)!function(e){if(i=s[e],a=i._module,!0===i.visible&&i.transforms)for(a&&a.calc&&((e=a.calc(r,i))[0]&&e[0].t&&e[0].t._scene&&delete e[0].t._scene.dirty),o=0;o<i.transforms.length;o++){var t=i.transforms[o];(a=A[t.type])&&a.calcTransform&&(i._hasCalcTransform=!0,p=!0,a.calcTransform(r,i,t))}}(h);for(p&&v(t,s,n),h=0;h<s.length;h++)m(h,!0);for(h=0;h<s.length;h++)m(h,!1);b(r);var g=function(e,o){var t,n,r,i,a,s=[];var l,c,u={min:function(e){return D.aggNums(Math.min,null,e)},max:function(e){return D.aggNums(Math.max,null,e)},sum:function(e){return D.aggNums(function(e,t){return e+t},null,e)},total:function(e){return D.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return D.mean(e)},median:function(e){return D.median(e)}};for(t=0;t<e.length;t++){var d=e[t];if("category"===d.type){var h=d.categoryorder.match(j);if(h){var f=h[1],h=h[2],p=d._id.charAt(0),m="x"===p,g=[];for(n=0;n<d._categories.length;n++)g.push([d._categories[n],[]]);for(n=0;n<d._traceIndices.length;n++){var _=d._traceIndices[n],y=o._fullData[_];if(!0===y.visible){var v=y.type;L.traceIs(y,"histogram")&&(delete y._xautoBinFinished,delete y._yautoBinFinished);var b="splom"===v,x="scattergl"===v,w=o.calcdata[_];for(r=0;r<w.length;r++){var T=w[r];if(b){var A,k=y._axesDim[d._id];m||(A=y._diag[k][0])&&(d=o._fullLayout[O.id2name(A)]);var M,S=T.trace.dimensions[k].values;for(i=0;i<S.length;i++)for(l=d._categoriesMap[S[i]],a=0;a<T.trace.dimensions.length;a++)a!==k&&(M=T.trace.dimensions[a],g[l][1].push(M.values[i]))}else if(x){for(i=0;i<T.t.x.length;i++)c=m?(l=T.t.x[i],T.t.y[i]):(l=T.t.y[i],T.t.x[i]),g[l][1].push(c);T.t&&T.t._scene&&delete T.t._scene.dirty}else if(T.hasOwnProperty("z")){c=T.z;var E=function(e,t,n){var r=t._id.charAt(0);if("histogram2dcontour"!==e)return function(e,t){return"y"===r?t:e};var e=t._counterAxes[0],t=O.getFromId(o,e),i="x"===r||"x"===e&&"category"===t.type,a="y"===r||"y"===e&&"category"===t.type;return function(e,t){return 0===e||0===t||i&&e===n[t].length-1||a&&t===n.length-1?-1:("y"===r?t:e)-1}}(y.type,d,c);for(i=0;i<c.length;i++)for(a=0;a<c[i].length;a++)(l=E(a,i))+1&&g[l][1].push(c[i][a])}else for(void 0===(l=T.p)&&(l=T[p]),void 0===(c=void 0===(c=T.s)?T.v:c)&&(c=m?T.y:T.x),Array.isArray(c)||(c=void 0===c?[]:[c]),i=0;i<c.length;i++)g[l][1].push(c[i])}}}d._categoriesValue=g;var C=[];for(n=0;n<g.length;n++)C.push([g[n][0],u[f](g[n][1])]);C.sort(function(e,t){return e[1]-t[1]}),d._categoriesAggregatedValue=C,d._initialCategories=C.map(function(e){return e[0]}),"descending"===h&&d._initialCategories.reverse(),s=s.concat(d.sortByInitialCategories())}}}return s}(t,r);if(g.length){for(n._numBoxes=0,h=n._numViolins=0;h<g.length;h++)m(g[h],!0);for(h=0;h<g.length;h++)m(g[h],!1);b(r)}L.getComponentMethod("fx","calc")(r),L.getComponentMethod("errorbars","calc")(r)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function v(e,t,n){var r={};function i(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}D.simpleMap(e,i);for(var a=n._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])r[s]||i(n[O.id2name(s)])}function b(e){var t,n,r=e._fullLayout,i=r._visibleModules,a={};for(h=0;h<i.length;h++){var o=i[h],s=o.crossTraceCalc;s&&(a[o=o.basePlotModule.name]?D.pushUnique(a[o],s):a[o]=[s])}for(n in a){var l=a[n],c=r._subplots[n];if(Array.isArray(c))for(t=0;t<c.length;t++)for(var u=c[t],d=("cartesian"===n?r._plots:r)[u],h=0;h<l.length;h++)l[h](e,d,u);else for(h=0;h<l.length;h++)l[h](e)}}R.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},R.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},R.generalUpdatePerTraceModule=function(e,t,n,r){for(var i,a,o,s=t.traceHash,l={},c=0;c<n.length;c++){var u=n[c],d=u[0].trace;d.visible&&(l[d.type]=l[d.type]||[],l[d.type].push(u))}for(i in s)l[i]||((a=s[i][0])[0].trace.visible=!1,l[i]=[a]);for(o in l){var h=l[o];h[0][0].trace._module.plot(e,t,D.filterVisible(h),r)}t.traceHash=l},R.plotBasePlot=function(e,t,n,r,i){var a=L.getModule(e),e=o(t.calcdata,a)[0];a.plot(t,e,r,i)},R.cleanBasePlot=function(e,t,n,r,i){var a=i._has&&i._has(e),n=n._has&&n._has(e);a&&!n&&i["_"+e+"layer"].selectAll("g.trace").remove()}},{"../components/color":155,"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plot_api/plot_template":320,"../plots/get_data":362,"../registry":373,"./animation_attributes":325,"./attributes":327,"./cartesian/axis_ids":335,"./cartesian/handle_outline":342,"./command":358,"./font_attributes":360,"./frame_attributes":361,"./layout_attributes":364,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],367:[function(e,t,n){"use strict";var _=e("../lib"),y=e("../plot_api/plot_template"),v=e("./domain").defaults;t.exports=function(e,t,n,r){var i=r.type,a=r.attributes,o=r.handleDefaults,s=r.partition||"x",l=t._subplots[i],c=l.length,u=c&&l[0].replace(/\d+$/,"");function d(e,t){return _.coerce(p,m,a,e,t)}for(var h=0;h<c;h++){var f=l[h],p=e[f]||(e[f]={}),m=y.newContainer(t,f,u);d("uirevision",t.uirevision);var g={};g[s]=[h/c,(h+1)/c],v(m,t,d,g),r.id=f,o(p,m,d,r)}}},{"../lib":285,"../plot_api/plot_template":320,"./domain":359}],368:[function(e,t,n){"use strict";e=e("../constants/docs"),e.FORMAT_LINK,e.DATE_FORMAT_LINK;function r(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(0<n.length){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}n.hovertemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(t.arrayOk=!0),t},n.texttemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(t.arrayOk=!0),t}},{"../constants/docs":262}],369:[function(e,t,n){"use strict";var l=e("./ternary"),c=e("../../plots/get_data").getSubplotCalcData,r=e("../../lib").counterRegex,u="ternary";n.name=u;n.attr="subplot";n.idRoot=u,n.idRegex=n.attrRegex=r(u),(n.attributes={}).subplot={valType:"subplotid",dflt:"ternary",editType:"calc"},n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.plot=function(e){for(var t=e._fullLayout,n=e.calcdata,r=t._subplots[u],i=0;i<r.length;i++){var a=r[i],o=c(n,u,a),s=t[a]._subplot;s||(s=new l({id:a,graphDiv:e,container:t._ternarylayer.node()},t),t[a]._subplot=s),s.plot(o,t,e._promises)}},n.clean=function(e,t,n,r){for(var i=r._subplots[u]||[],a=0;a<i.length;a++){var o=i[a],s=r[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":285,"../../plots/get_data":362,"./layout_attributes":370,"./layout_defaults":371,"./ternary":372}],370:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),i=e("../domain").attributes,a=e("../cartesian/layout_attributes"),o=e("../../plot_api/edit_types").overrideAll,e=e("../../lib/extend").extendFlat,a={title:{text:a.title.text,font:a.title.font},color:a.color,tickmode:a.tickmode,nticks:e({},a.nticks,{dflt:6,min:1}),tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:e({},a.showline,{dflt:!0}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:e({},a.showgrid,{dflt:!0}),gridcolor:a.gridcolor,gridwidth:a.gridwidth,layer:a.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}},a=t.exports=o({domain:i({name:"ternary"}),bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plot_api/edit_types":313,"../cartesian/layout_attributes":346,"../domain":359}],371:[function(e,t,n){"use strict";var d=e("../../components/color"),h=e("../../plot_api/plot_template"),f=e("../../lib"),r=e("../subplot_defaults"),p=e("../cartesian/tick_label_defaults"),m=e("../cartesian/tick_mark_defaults"),g=e("../cartesian/tick_value_defaults"),_=e("../cartesian/line_grid_defaults"),y=e("./layout_attributes"),v=["aaxis","baxis","caxis"];function i(e,t,n,r){var i,a,o,s=n("bgcolor"),l=n("sum");r.bgColor=d.combine(s,r.paper_bgcolor);for(var c=0;c<v.length;c++)a=e[i=v[c]]||{},(o=h.newContainer(t,i))._name=i,function(n,r,e,t){var i=y[r._name];function a(e,t){return f.coerce(n,r,i,e,t)}a("uirevision",t.uirevision),r.type="linear";var o=a("color"),s=o!==i.color.dflt?o:e.font.color,l=r._name.charAt(0).toUpperCase(),c="Component "+l,t=a("title.text",c);r._hovertitle=t===c?t:l,f.coerceFont(a,"title.font",{family:e.font.family,size:f.bigFont(e.font.size),color:s}),a("min"),g(n,r,a,"linear"),p(n,r,a,"linear",{}),m(n,r,a,{outerTicks:!0}),a("showticklabels")&&(f.coerceFont(a,"tickfont",{family:e.font.family,size:e.font.size,color:s}),a("tickangle"),a("tickformat"));_(n,r,a,{dfltColor:o,bgColor:e.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i}),a("hoverformat"),a("layer")}(a,o,r,t);var u=t.aaxis,n=t.baxis,s=t.caxis;u.min+n.min+s.min>=l&&(u.min=0,n.min=0,s.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}t.exports=function(e,t,n){r(e,t,n,{type:"ternary",attributes:y,handleDefaults:i,font:t.font,paper_bgcolor:t.paper_bgcolor})}},{"../../components/color":155,"../../lib":285,"../../plot_api/plot_template":320,"../cartesian/line_grid_defaults":348,"../cartesian/tick_label_defaults":353,"../cartesian/tick_mark_defaults":354,"../cartesian/tick_value_defaults":355,"../subplot_defaults":367,"./layout_attributes":370}],372:[function(e,t,n){"use strict";var i=e("@plotly/d3"),C=e("tinycolor2"),r=e("../../registry"),L=e("../../lib"),D=L.strTranslate,O=L._,P=e("../../components/color"),R=e("../../components/drawing"),m=e("../cartesian/set_convert"),g=e("../../lib/extend").extendFlat,a=e("../plots"),h=e("../cartesian/axes"),I=e("../../components/dragelement"),N=e("../../components/fx"),o=e("../../components/dragelement/helpers"),z=o.freeMode,F=o.rectMode,c=e("../../components/titles"),j=e("../cartesian/select").prepSelect,B=e("../cartesian/select").selectOnClick,s=e("../cartesian/select").clearSelect,l=e("../cartesian/select").clearSelectionsCache,H=e("../cartesian/constants");function u(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}e=(t.exports=u).prototype;e.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}},e.plot=function(e,t){var n=t[this.id],t=t._size;this._hasClipOnAxisFalse=!1;for(var r=0;r<e.length;r++)if(!1===e[r][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(n),this.adjustLayout(n,t),a.generalUpdatePerTraceModule(this.graphDiv,this,e,n),this.layers.plotbg.select("path").call(P.fill,n.bgcolor)},e.makeFramework=function(e){var t=this,n=t.graphDiv,r=e[t.id],i=t.clipId="clip"+t.layoutId+t.id,a=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=L.ensureSingleById(e._clips,"clipPath",i,function(e){e.append("path").attr("d","M0,0Z")}),t.clipDefRelative=L.ensureSingleById(e._clips,"clipPath",a,function(e){e.append("path").attr("d","M0,0Z")}),t.plotContainer=L.ensureSingle(t.container,"g",t.id),t.updateLayers(r),R.setClipUrl(t.layers.backplot,i,n),R.setClipUrl(t.layers.grids,i,n)},e.updateLayers=function(e){var n=this.layers,t=["draglayer","plotbg","backplot","grids"];"below traces"===e.aaxis.layer&&t.push("aaxis","aline"),"below traces"===e.baxis.layer&&t.push("baxis","bline"),"below traces"===e.caxis.layer&&t.push("caxis","cline"),t.push("frontplot"),"above traces"===e.aaxis.layer&&t.push("aaxis","aline"),"above traces"===e.baxis.layer&&t.push("baxis","bline"),"above traces"===e.caxis.layer&&t.push("caxis","cline");var t=this.plotContainer.selectAll("g.toplevel").data(t,String),r=["agrid","bgrid","cgrid"];t.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=i.select(this);n[e]=t,"frontplot"===e?t.append("g").classed("scatterlayer",!0):"backplot"===e?t.append("g").classed("maplayer",!0):"plotbg"===e?t.append("path").attr("d","M0,0Z"):"aline"===e||"bline"===e||"cline"===e?t.append("path"):"grids"===e&&r.forEach(function(e){n[e]=t.append("g").classed("grid "+e,!0)})}),t.order()};var U=Math.sqrt(4/3);e.adjustLayout=function(e,t){var n,r,i=this,a=e.domain,o=(a.x[0]+a.x[1])/2,s=(a.y[0]+a.y[1])/2,l=a.x[1]-a.x[0],c=a.y[1]-a.y[0],u=l*t.w,d=c*t.h,h=e.sum,f=e.aaxis.min,p=e.baxis.min,a=e.caxis.min;U*d<u?n=(r=d)*U:r=(n=u)/U,u=l*n/u,c=c*r/d,d=t.l+t.w*o-n/2,t=t.t+t.h*(1-s)-r/2,i.x0=d,i.y0=t,i.w=n,i.h=r,i.sum=h,i.xaxis={type:"linear",range:[f+2*a-h,h-f-2*p],domain:[o-u/2,o+u/2],_id:"x"},m(i.xaxis,i.graphDiv._fullLayout),i.xaxis.setScale(),i.xaxis.isPtWithinRange=function(e){return e.a>=i.aaxis.range[0]&&e.a<=i.aaxis.range[1]&&e.b>=i.baxis.range[1]&&e.b<=i.baxis.range[0]&&e.c>=i.caxis.range[1]&&e.c<=i.caxis.range[0]},i.yaxis={type:"linear",range:[f,h-p-a],domain:[s-c/2,s+c/2],_id:"y"},m(i.yaxis,i.graphDiv._fullLayout),i.yaxis.setScale(),i.yaxis.isPtWithinRange=function(){return!0};o=i.yaxis.domain[0],u=i.aaxis=g({},e.aaxis,{range:[f,h-p-a],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[o,o+c*U],anchor:"free",position:0,_id:"y",_length:n});m(u,i.graphDiv._fullLayout),u.setScale();s=i.baxis=g({},e.baxis,{range:[h-f-a,p],side:"bottom",domain:i.xaxis.domain,anchor:"free",position:0,_id:"x",_length:n});m(s,i.graphDiv._fullLayout),s.setScale();o=i.caxis=g({},e.caxis,{range:[h-f-p,a],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[o,o+c*U],anchor:"free",position:0,_id:"y",_length:n});m(o,i.graphDiv._fullLayout),o.setScale();c="M"+d+","+(t+r)+"h"+n+"l-"+n/2+",-"+r+"Z";i.clipDef.select("path").attr("d",c),i.layers.plotbg.select("path").attr("d",c);c="M0,"+r+"h"+n+"l-"+n/2+",-"+r+"Z";i.clipDefRelative.select("path").attr("d",c);c=D(d,t);i.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",c),i.clipDefRelative.select("path").attr("transform",null);c=D(d-s._offset,t+r);i.layers.baxis.attr("transform",c),i.layers.bgrid.attr("transform",c);c=D(d+n/2,t)+"rotate(30)"+D(0,-u._offset);i.layers.aaxis.attr("transform",c),i.layers.agrid.attr("transform",c);c=D(d+n/2,t)+"rotate(-30)"+D(0,-o._offset);i.layers.caxis.attr("transform",c),i.layers.cgrid.attr("transform",c),i.drawAxes(!0),i.layers.aline.select("path").attr("d",u.showline?"M"+d+","+(t+r)+"l"+n/2+",-"+r:"M0,0").call(P.stroke,u.linecolor||"#000").style("stroke-width",(u.linewidth||0)+"px"),i.layers.bline.select("path").attr("d",s.showline?"M"+d+","+(t+r)+"h"+n:"M0,0").call(P.stroke,s.linecolor||"#000").style("stroke-width",(s.linewidth||0)+"px"),i.layers.cline.select("path").attr("d",o.showline?"M"+(d+n/2)+","+t+"l"+n/2+","+r:"M0,0").call(P.stroke,o.linecolor||"#000").style("stroke-width",(o.linewidth||0)+"px"),i.graphDiv._context.staticPlot||i.initInteractions(),R.setClipUrl(i.layers.frontplot,i._hasClipOnAxisFalse?null:i.clipId,i.graphDiv)},e.drawAxes=function(e){var t,n=this,r=n.graphDiv,i=n.id.substr(7)+"title",a=n.layers,o=n.aaxis,s=n.baxis,l=n.caxis;n.drawAx(o),n.drawAx(s),n.drawAx(l),e&&(t=Math.max(o.showticklabels?o.tickfont.size/2:0,(l.showticklabels?.75*l.tickfont.size:0)+("outside"===l.ticks?.87*l.ticklen:0)),e=(s.showticklabels?s.tickfont.size:0)+("outside"===s.ticks?s.ticklen:0)+3,a["a-title"]=c.draw(r,"a"+i,{propContainer:o,propName:n.id+".aaxis.title",placeholder:O(r,"Click to enter Component A title"),attributes:{x:n.x0+n.w/2,y:n.y0-o.title.font.size/3-t,"text-anchor":"middle"}}),a["b-title"]=c.draw(r,"b"+i,{propContainer:s,propName:n.id+".baxis.title",placeholder:O(r,"Click to enter Component B title"),attributes:{x:n.x0-e,y:n.y0+n.h+.83*s.title.font.size+e,"text-anchor":"middle"}}),a["c-title"]=c.draw(r,"c"+i,{propContainer:l,propName:n.id+".caxis.title",placeholder:O(r,"Click to enter Component C title"),attributes:{x:n.x0+n.w+e,y:n.y0+n.h+.83*l.title.font.size+e,"text-anchor":"middle"}}))},e.drawAx=function(e){var t=this.graphDiv,n=e._name,r=n.charAt(0),i=e._id,a=this.layers[n],o=r+"tickLayout",s=(d=e).ticks+String(d.ticklen)+String(d.showticklabels);this[o]!==s&&(a.selectAll("."+i+"tick").remove(),this[o]=s),e.setScale();var l=h.calcTicks(e),c=h.clipEnds(e,l),u=h.makeTransTickFn(e),n=h.getTickSigns(e)[2],d=L.deg2rad(30),i=n*(e.linewidth||1)/2,o=n*e.ticklen,s=this.w,n=this.h,o="b"===r?"M0,"+i+"l"+Math.sin(d)*o+","+Math.cos(d)*o:"M"+i+",0l"+Math.cos(d)*o+","+-Math.sin(d)*o,s={a:"M0,0l"+n+",-"+s/2,b:"M0,0l-"+s/2+",-"+n,c:"M0,0l-"+n+","+s/2}[r];h.drawTicks(t,e,{vals:"inside"===e.ticks?c:l,layer:a,path:o,transFn:u,crisp:!1}),h.drawGrid(t,e,{vals:c,layer:this.layers[r+"grid"],path:s,transFn:u,crisp:!1}),h.drawLabels(t,e,{vals:l,layer:a,transFn:u,labelFns:h.makeLabelFns(e,0,30)})};var t=H.MINZOOM/2+.87,V="m-0.87,.5h"+t+"v3h-"+(5.2+t)+"l"+(t/2+2.6)+",-"+(.87*t+4.5)+"l2.6,1.5l-"+t/2+","+.87*t+"Z",q="m0.87,.5h-"+t+"v3h"+(5.2+t)+"l-"+(t/2+2.6)+",-"+(.87*t+4.5)+"l-2.6,1.5l"+t/2+","+.87*t+"Z",Y="m0,1l"+t/2+","+.87*t+"l2.6,-1.5l-"+(t/2+2.6)+",-"+(.87*t+4.5)+"l-"+(t/2+2.6)+","+(.87*t+4.5)+"l2.6,1.5l"+t/2+",-"+.87*t+"Z",G=!0;function W(e){i.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}e.clearSelect=function(){l(this.dragOptions),s(this.dragOptions.gd)},e.initInteractions=function(){var c,u,d,h,f,p,m,g,_,y,v,b,x=this,i=x.layers.plotbg.select("path").node(),w=x.graphDiv,a=w._fullLayout._zoomlayer;function T(e){var t={};return t[x.id+".aaxis.min"]=e.a,t[x.id+".baxis.min"]=e.b,t[x.id+".caxis.min"]=e.c,t}function o(e,t){var n=w._fullLayout.clickmode;W(w),2===e&&(w.emit("plotly_doubleclick",null),r.call("_guiRelayout",w,T({a:0,b:0,c:0}))),-1<n.indexOf("select")&&1===e&&B(t,w,[x.xaxis],[x.yaxis],x.id,x.dragOptions),-1<n.indexOf("event")&&N.click(w,t,x.id)}function A(e,t){return 1-t/x.h}function k(e,t){return 1-(e+(x.h-t)/Math.sqrt(3))/x.w}function M(e,t){return(e-(x.h-t)/Math.sqrt(3))/x.w}function s(e,t){var n=d+e*c,r=h+t*u,i=Math.max(0,Math.min(1,A(0,h),A(0,r))),a=Math.max(0,Math.min(1,k(d,h),k(n,r))),o=Math.max(0,Math.min(1,M(d,h),M(n,r))),s=(i/2+o)*x.w,l=(1-i/2-a)*x.w,e=(s+l)/2,t=l-s,n=(1-i)*x.h,r=n-t/U;t<H.MINZOOM?(m=f,v.attr("d",_),b.attr("d","M0,0Z")):(m={a:f.a+i*p,b:f.b+a*p,c:f.c+o*p},v.attr("d",_+"M"+s+","+n+"H"+l+"L"+e+","+r+"L"+s+","+n+"Z"),b.attr("d","M"+d+","+h+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+s+","+n+V+"M"+l+","+n+q+"M"+e+","+r+Y)),y||(v.transition().style("fill",.2<g?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),b.transition().style("opacity",1).duration(200),y=!0),w.emit("plotly_relayouting",T(m))}function l(){W(w),m!==f&&(r.call("_guiRelayout",w,T(m)),G&&w.data&&w._context.showTips&&(L.notifier(O(w,"Double-click to zoom back out"),"long"),G=!1))}function S(e,t){var n=e/x.xaxis._m,r=t/x.yaxis._m,i=[(m={a:f.a-r,b:f.b+(n+r)/2,c:f.c-(n-r)/2}).a,m.b,m.c].sort(L.sorterAsc),a=i.indexOf(m.a),n=i.indexOf(m.b),r=i.indexOf(m.c);i[0]<0&&(i[1]+i[0]/2<0?(i[2]+=i[0]+i[1],i[0]=i[1]=0):(i[2]+=i[0]/2,i[1]+=i[0]/2,i[0]=0),m={a:i[a],b:i[n],c:i[r]},t=(f.a-m.a)*x.yaxis._m,e=(f.c-m.c-f.b+m.b)*x.xaxis._m);r=D(x.x0+e,x.y0+t);x.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",r);t=D(-e,-t);x.clipDefRelative.select("path").attr("transform",t),x.aaxis.range=[m.a,x.sum-m.b-m.c],x.baxis.range=[x.sum-m.a-m.c,m.b],x.caxis.range=[x.sum-m.a-m.b,m.c],x.drawAxes(!1),x._hasClipOnAxisFalse&&x.plotContainer.select(".scatterlayer").selectAll(".trace").call(R.hideOutsideRangePoints,x),w.emit("plotly_relayouting",T(m))}function E(){r.call("_guiRelayout",w,T(m))}this.dragOptions={element:i,gd:w,plotinfo:{id:x.id,domain:w._fullLayout[x.id].domain,xaxis:x.xaxis,yaxis:x.yaxis},subplot:x.id,prepFn:function(e,t,n){x.dragOptions.xaxes=[x.xaxis],x.dragOptions.yaxes=[x.yaxis],c=w._fullLayout._invScaleX,u=w._fullLayout._invScaleY;var r=x.dragOptions.dragmode=w._fullLayout.dragmode;z(r)?x.dragOptions.minDrag=1:x.dragOptions.minDrag=void 0,"zoom"===r?(x.dragOptions.moveFn=s,x.dragOptions.clickFn=o,x.dragOptions.doneFn=l,function(e,t){var n=i.getBoundingClientRect();d=e-n.left,h=t-n.top,w._fullLayout._calcInverseTransform(w);n=w._fullLayout._invTransform,n=L.apply3DTransform(n)(d,h);d=n[0],h=n[1],f={a:x.aaxis.range[0],b:x.baxis.range[1],c:x.caxis.range[1]},m=f,p=x.aaxis.range[1]-f.a,g=C(x.graphDiv._fullLayout[x.id].bgcolor).getLuminance(),_="M0,"+x.h+"L"+x.w/2+", 0L"+x.w+","+x.h+"Z",y=!1,v=a.append("path").attr("class","zoombox").attr("transform",D(x.x0,x.y0)).style({fill:.2<g?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",_),b=a.append("path").attr("class","zoombox-corners").attr("transform",D(x.x0,x.y0)).style({fill:P.background,stroke:P.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),x.clearSelect(w)}(t,n)):"pan"===r?(x.dragOptions.moveFn=S,x.dragOptions.clickFn=o,x.dragOptions.doneFn=E,f={a:x.aaxis.range[0],b:x.baxis.range[1],c:x.caxis.range[1]},m=f,x.clearSelect(w)):(F(r)||z(r))&&j(e,t,n,x.dragOptions,r)}},i.onmousemove=function(e){N.hover(w,e,x.id),w._fullLayout._lasthover=i,w._fullLayout._hoversubplot=x.id},i.onmouseout=function(e){w._dragging||I.unhover(w,e)},I.init(this.dragOptions)}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/titles":253,"../../lib":285,"../../lib/extend":279,"../../registry":373,"../cartesian/axes":331,"../cartesian/constants":338,"../cartesian/select":351,"../cartesian/set_convert":352,"../plots":366,"@plotly/d3":20,tinycolor2:119}],373:[function(e,t,c){"use strict";var u=e("./lib/loggers"),n=e("./lib/noop"),a=e("./lib/push_unique"),o=e("./lib/is_plain_object"),d=e("./lib/dom").addStyleRule,r=e("./lib/extend"),i=e("./plots/attributes"),s=e("./plots/layout_attributes"),h=r.extendFlat,l=r.extendDeepAll;function f(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)a(c.layoutArrayRegexes,t[n])}}function p(e,t){e=c.componentsRegistry[e].schema;e&&e.traces&&((e=e.traces[t])&&l(c.modules[t]._module.attributes,e))}function m(e,t){e=c.componentsRegistry[e].schema;e&&e.transforms&&((e=e.transforms[t])&&l(c.transformsRegistry[t].attributes,e))}function g(e,t){var n=c.componentsRegistry[e].schema;n&&n.subplots&&(t=(e=c.subplotsRegistry[t]).layoutAttributes,e="subplot"===e.attr?e.name:e.attr,Array.isArray(e)&&(e=e[0]),e=n.subplots[e],t&&e&&l(t,e))}function _(e){return e="object"==typeof e?e.type:e}c.modules={},c.allCategories={},c.allTypes=[],c.subplotsRegistry={},c.transformsRegistry={},c.componentsRegistry={},c.layoutArrayContainers=[],c.layoutArrayRegexes=[],c.traceLayoutAttributes={},c.localeRegistry={},c.apiMethodRegistry={},c.collectableSubplotTypes=null,c.register=function(e){if(c.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":!function(e){var t=e.name,n=e.categories,r=e.meta;if(c.modules[t])u.log("Type "+t+" already registered");else{c.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(c.subplotsRegistry[t])u.log("Plot type "+t+" already registered.");else for(var n in f(e),c.subplotsRegistry[t]=e,c.componentsRegistry)g(n,e.name)}(e.basePlotModule);for(var i,a={},o=0;o<n.length;o++)a[n[o]]=!0,c.allCategories[n[o]]=!0;for(i in c.modules[t]={_module:e,categories:a},r&&Object.keys(r).length&&(c.modules[t].meta=r),c.allTypes.push(t),c.componentsRegistry)p(i,t);e.layoutAttributes&&h(c.traceLayoutAttributes,e.layoutAttributes);r=e.basePlotModule,e=r.name;if("mapbox"===e){var s,l=r.constants.styleRules;for(s in l)d(".js-plotly-plot .plotly .mapboxgl-"+s,l[s])}"geo"!==e&&"mapbox"!==e||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}(n);break;case"transform":!function(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t,n="Transform module "+e.name,r="function"==typeof e.transform,i="function"==typeof e.calcTransform;if(!r&&!i)throw new Error(n+" is missing a *transform* or *calcTransform* method.");r&&i&&u.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "));o(e.attributes)||u.log(n+" registered without an *attributes* object.");"function"!=typeof e.supplyDefaults&&u.log(n+" registered without a *supplyDefaults* method.");for(t in c.transformsRegistry[e.name]=e,c.componentsRegistry)m(t,e.name)}(n);break;case"component":!function(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t,n,r,i=e.name;(c.componentsRegistry[i]=e).layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&a(c.layoutArrayContainers,i),f(e));for(t in c.modules)p(i,t);for(n in c.subplotsRegistry)g(i,n);for(r in c.transformsRegistry)m(i,r);e.schema&&e.schema.layout&&l(s,e.schema.layout)}(n);break;case"locale":!function(e){var t=e.name,n=t.split("-")[0],r=e.dictionary,i=e.format,a=r&&Object.keys(r).length,o=i&&Object.keys(i).length,s=c.localeRegistry,e=s[t];e||(s[t]=e={});n!==t&&((t=s[n])||(s[n]=t={}),a&&t.dictionary===e.dictionary&&(t.dictionary=r),o&&t.format===e.format&&(t.format=i));a&&(e.dictionary=r);o&&(e.format=i)}(n);break;case"apiMethod":var r=n.name;c.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},c.getModule=function(e){e=c.modules[_(e)];return!!e&&e._module},c.traceIs=function(e,t){if("various"===(e=_(e)))return!1;var n=c.modules[e];return n||(e&&u.log("Unrecognized trace type "+e+"."),n=c.modules[i.type.dflt]),!!n.categories[t]},c.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],i=0;i<r.length;i++)r[i].type===t&&n.push(i);return n},c.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},c.getComponentMethod=function(e,t){e=c.componentsRegistry[e];return e&&e[t]||n},c.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return c.apiMethodRegistry[e].apply(null,t)}},{"./lib/dom":277,"./lib/extend":279,"./lib/is_plain_object":286,"./lib/loggers":289,"./lib/noop":294,"./lib/push_unique":299,"./plots/attributes":327,"./plots/layout_attributes":364}],374:[function(e,t,n){"use strict";var f=e("../registry"),e=e("../lib"),p=e.extendFlat,m=e.extendDeep;function g(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}t.exports=function(e,t){var n,r=e.data,i=e.layout,a=m([],r),o=m({},i,g(t.tileClass)),i=e._context||{};if(t.width&&(o.width=t.width),t.height&&(o.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){o.annotations=[];for(var s=Object.keys(o),l=0;l<s.length;l++)n=s[l],-1<["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))&&(o[s[l]].title={text:""});for(l=0;l<a.length;l++){var c=a[l];c.showscale=!1,c.marker&&(c.marker.showscale=!1),f.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(t.annotations))for(l=0;l<t.annotations.length;l++)o.annotations.push(t.annotations[l]);var u=Object.keys(o).filter(function(e){return e.match(/^scene\d*$/)});if(u.length){var d={};for("thumbnail"===t.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<u.length;l++){var h=o[u[l]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),p(h.xaxis,d),p(h.yaxis,d),p(h.zaxis,d),h._scene=null}}e=document.createElement("div");t.tileClass&&(e.className=t.tileClass);i={gd:e,td:e,layout:o,data:a,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:i.mapboxAccessToken}};return"transparent"!==t.setBackground&&(i.config.setBackground=t.setBackground||"opaque"),i.gd.defaultLayout=g(t.tileClass),i}},{"../lib":285,"../registry":373}],375:[function(e,t,n){"use strict";var s=e("../lib"),l=e("../plot_api/to_image"),c=e("./filesaver"),u=e("./helpers");t.exports=function(i,a){var o;return s.isPlainObject(i)||(o=s.getGraphDiv(i)),(a=a||{}).format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(t,n){o&&o._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==a.format&&n(new Error(u.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var e=l(i,a),r=a.filename||i.fn||"newplot";r+="."+a.format.replace("-","."),e.then(function(e){return o&&(o._snapshotInProgress=!1),c(e,r,a.format)}).then(function(e){t(e)}).catch(function(e){o&&(o._snapshotInProgress=!1),n(e)})})}},{"../lib":285,"../plot_api/to_image":323,"./filesaver":376,"./helpers":377}],376:[function(e,t,n){"use strict";var c=e("../lib"),u=e("./helpers");t.exports=function(i,a,o){var s=document.createElement("a"),l="download"in s;return new Promise(function(e,t){var n,r;return c.isSafari()?(u.octetStream(("svg"===o?",":";base64,")+encodeURIComponent(i)),e(a)):c.isIE()?(n=u.createBlob(i,"svg"),window.navigator.msSaveBlob(n,a),n=null,e(a)):l?(n=u.createBlob(i,o),r=u.createObjectURL(n),s.href=r,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),u.revokeObjectURL(r),n=null,e(a)):void t(new Error("download error"))})}},{"../lib":285,"./helpers":377}],377:[function(e,t,n){"use strict";var r=e("../registry");n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},n.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},n.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var i=window.URL||window.webkitURL;n.createObjectURL=function(e){return i.createObjectURL(e)},n.revokeObjectURL=function(e){return i.revokeObjectURL(e)},n.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});e=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(window.atob(e));return new window.Blob([e],{type:"image/"+t})},n.octetStream=function(e){document.location.href="data:application/octet-stream"+e},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":373}],378:[function(e,t,n){"use strict";var r=e("./helpers"),e={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=e},{"./cloneplot":374,"./download":375,"./helpers":377,"./svgtoimg":379,"./toimage":380,"./tosvg":381}],379:[function(e,t,n){"use strict";var y=e("../lib"),r=e("events").EventEmitter,v=e("./helpers");t.exports=function(m){var g=m.emitter||new r,_=new Promise(function(n,r){var e=window.Image,t=m.svg,i=m.format||"png";if(y.isIE()&&"svg"!==i){var a=new Error(v.MSG_IE_BAD_FORMAT);return r(a),m.promise?_:g.emit("error",a)}var o,s=m.canvas,l=m.scale||1,c=m.width||300,a=m.height||150,u=l*c,d=l*a,h=s.getContext("2d"),f=new e,p="svg"===i||y.isSafari()?v.encodeSVG(t):(o=v.createBlob(t,"svg"),v.createObjectURL(o));s.width=u,s.height=d,f.onload=function(){var e;switch(o=null,v.revokeObjectURL(p),"svg"!==i&&h.drawImage(f,0,0,u,d),i){case"jpeg":e=s.toDataURL("image/jpeg");break;case"png":e=s.toDataURL("image/png");break;case"webp":e=s.toDataURL("image/webp");break;case"svg":e=p;break;default:var t="Image format is not jpeg, png, svg or webp.";if(r(new Error(t)),!m.promise)return g.emit("error",t)}n(e),m.promise||g.emit("success",e)},f.onerror=function(e){if(o=null,v.revokeObjectURL(p),r(e),!m.promise)return g.emit("error",e)},f.src=p});return m.promise?_:g}},{"../lib":285,"./helpers":377,events:27}],380:[function(e,t,n){"use strict";var a=e("events").EventEmitter,o=e("../registry"),s=e("../lib"),l=e("./helpers"),c=e("./cloneplot"),u=e("./tosvg"),d=e("./svgtoimg");t.exports=function(e,n){var r=new a,t=c(e,{format:"png"}),i=t.gd;return i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i),e=l.getRedrawFunc(i),o.call("_doPlot",i,t.data,t.layout,t.config).then(e).then(function(){var e=l.getDelay(i._fullLayout);setTimeout(function(){var e=u(i),t=document.createElement("canvas");t.id=s.randstr(),(r=d({format:n.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:t,emitter:r,svg:e})).clean=function(){i&&document.body.removeChild(i)}},e)}).catch(function(e){r.emit("error",e)}),r}},{"../lib":285,"../registry":373,"./cloneplot":374,"./helpers":377,"./svgtoimg":379,"./tosvg":381,events:27}],381:[function(e,t,n){"use strict";var g=e("@plotly/d3"),_=e("../lib"),y=e("../components/drawing"),v=e("../components/color"),b=e("../constants/xmlns_namespaces"),x=/"/g,w="TOBESTRIPPED",T=new RegExp('("'+w+")|("+w+'")',"g");t.exports=function(e,t,n){var r,i=e._fullLayout,a=i._paper,o=i._toppaper,s=i.width,l=i.height;a.insert("rect",":first-child").call(y.setRect,0,0,s,l).call(v.fill,i.paper_bgcolor);var c=i._basePlotModules||[];for(h=0;h<c.length;h++){var u=c[h];u.toSVG&&u.toSVG(e)}if(o)for(var o=o.node().childNodes,d=Array.prototype.slice.call(o),h=0;h<d.length;h++){var f=d[h];f.childNodes.length&&a.node().appendChild(f)}i._draggers&&i._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e,t=g.select(this);"hidden"!==this.style.visibility&&"none"!==this.style.display?(t.style({visibility:null,display:null}),(e=this.style.fontFamily)&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(x,w))):t.remove()});var p=[];if(i._gradientUrlQueryParts)for(r in i._gradientUrlQueryParts)p.push(r);if(i._patternUrlQueryParts)for(r in i._patternUrlQueryParts)p.push(r);p.length&&a.selectAll(p.join(",")).each(function(){var e=g.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(x,w));t=this.style.stroke;t&&-1!==t.indexOf("url(")&&e.style("stroke",t.replace(x,w))}),"pdf"!==t&&"eps"!==t||a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(b.xmlns,"xmlns",b.svg),a.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),"svg"===t&&n&&(a.attr("width",n*s),a.attr("height",n*l),a.attr("viewBox","0 0 "+s+" "+l));var m,s=(new window.XMLSerializer).serializeToString(a.node());return l=s,m=g.select("body").append("div").style({display:"none"}).html(""),l=l.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":m.html(e).text()}),m.remove(),s=(s=(s=l).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(T,"'"),s=_.isIE()?(s=(s=s.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"'):s}},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],382:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");t=t.marker;t&&(r.mergeArray(t.opacity,e,"mo",!0),r.mergeArray(t.color,e,"mc"),(t=t.line)&&(r.mergeArray(t.color,e,"mlc"),r.mergeArrayCastPositive(t.width,e,"mlw")))}},{"../../lib":285}],383:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../components/colorscale/attributes"),l=e("../../plots/font_attributes"),c=e("./constants"),u=e("../../components/drawing/attributes").pattern,d=e("../../lib/extend").extendFlat,e=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=d({},r.marker.line.width,{dflt:0}),l=d({width:l,editType:"calc"},s("marker.line")),u=d({line:l,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:u});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:a({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:d({},e,{}),insidetextfont:d({},e,{}),outsidetextfont:d({},e,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:d({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"../scatter/attributes":494,"./constants":385}],384:[function(e,t,n){"use strict";var h=e("../../plots/cartesian/axes"),f=e("../../plots/cartesian/align_period"),p=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/calc"),g=e("./arrays_to_calcdata"),_=e("../scatter/calc_selection");t.exports=function(e,t){for(var n,r,i,a=h.getFromId(e,t.xaxis||"x"),o=h.getFromId(e,t.yaxis||"y"),s={msUTC:!(!t.base&&0!==t.base)},l="h"===t.orientation?(n=a.makeCalcdata(t,"x",s),i=o.makeCalcdata(t,"y"),r=f(t,o,"y",i),!!t.yperiodalignment):(n=o.makeCalcdata(t,"y",s),i=a.makeCalcdata(t,"x"),r=f(t,a,"x",i),!!t.xperiodalignment),c=Math.min(r.length,n.length),u=new Array(c),d=0;d<c;d++)u[d]={p:r[d],s:n[d]},l&&(u[d].orig_p=i[d]),t.ids&&(u[d].id=String(t.ids[d]));return p(t,"marker")&&m(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),p(t,"marker.line")&&m(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),g(u,t),_(u,t),u}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../scatter/calc_selection":496,"./arrays_to_calcdata":382}],385:[function(e,t,n){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],386:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),h=e("../../lib").isArrayOrTypedArray,x=e("../../constants/numerical").BADNUM,f=e("../../registry"),w=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/constraints").getAxisGroup,c=e("./sieve.js");function p(e,t,n,r,i){if(r.length){var a,o,s,l;switch(!function(e,t){var n,r,i;for(n=0;n<t.length;n++){var a=t[n],o=a[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(h(s)){for(r=0;r<Math.min(s.length,a.length);r++)i=c(s[r],0,l),b(i)?(a[r].b=+i,a[r].hasB=1):a[r].b=0;for(;r<a.length;r++)a[r].b=0}else{i=c(s,0,l);var u=b(i);for(i=u?i:0,r=0;r<a.length;r++)a[r].b=i,u&&(a[r].hasB=1)}}}(n,r),i.mode){case"overlay":u(t,n,r,i);break;case"group":for(a=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.offset?o:a).push(l);o.length&&function(e,t,n,r,i){r=new c(r,{posAxis:t,sepNegVal:!1,overlapNoMerge:!i.norm});(function(e,t,n,r){for(var i,a=e._fullLayout,o=n.positions,e=n.distinctPositions,s=n.minDiff,l=n.traces,c=l.length,u=o.length!==e.length,d=s*(1-r.gap),e=y(a,t._id)+l[0][0].trace.orientation,h=a._alignmentOpts[e]||{},f=0;f<c;f++){var p=l[f],m=p[0].trace,g=h[m.alignmentgroup]||{},_=Object.keys(g.offsetGroups||{}).length,g=(i=_?d/_:u?d/c:d)*(1-(r.groupgap||0));i=_?((2*m._offsetIndex+1-_)*i-g)/2:u?((2*f+1-c)*i-g)/2:-g/2;p=p[0].t;p.barwidth=g,p.poffset=i,p.bargroupwidth=d,p.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,v(n),T(t,n),A(t,n,u)})(e,t,r,i),function(e,t){for(var n=e.traces,r=0;r<n.length;r++){var i=n[r];if(void 0===i[0].trace.base)for(var a=new c([i],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<i.length;o++){var s,l=i[o];l.p===x||(s=a.put(l.p,l.b+l.s))&&(l.b=s)}}}(r,t),i.norm?(g(r),_(n,r,i)):m(n,r)}(e,t,n,o,i),a.length&&u(t,n,a,i);break;case"stack":case"relative":for(a=[],o=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.base?o:a).push(l);o.length&&function(e,t,n,r){var i=new c(n,{posAxis:e,sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});d(e,i,r),function(e,t,n){var r,i,a,o,s,l,c=k(e),u=t.traces;for(o=0;o<u.length;o++)if(r=u[o],"funnel"===(i=r[0].trace).type)for(s=0;s<r.length;s++)(l=r[s]).s!==x&&t.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){r=u[o],i=r[0].trace,a="funnel"===i.type;var d,h,f=[];for(s=0;s<r.length;s++)(l=r[s]).s!==x&&(h=a?l.s:l.s+l.b,d=t.put(l.p,h),h=d+h,l.b=d,l[c]=h,n.norm||(f.push(h),l.hasB&&f.push(d)));n.norm||(i._extremes[e._id]=w.findExtremes(e,f,{tozero:!0,padded:!0}))}}(t,i,r);for(var a=0;a<n.length;a++)for(var o=n[a],s=0;s<o.length;s++){var l=o[s];l.s!==x&&l.b+l.s===i.get(l.p,l.s)&&(l._outmost=!0)}r.norm&&_(t,i,r)}(t,n,o,i),a.length&&u(t,n,a,i)}!function(e,t){var n,r,i,a=k(t),o={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(i=e[n],r=0;r<i.length;r++){var c=i[r].p;b(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=o.round=function(e){return String(Math.round(u*(e-s)))};for(n=0;n<e.length;n++){(i=e[n])[0].t.extents=o;var h=i[0].t.poffset,f=Array.isArray(h);for(r=0;r<i.length;r++){var p,m,g=i[r],_=g[a]-g.w/2;b(_)&&(p=g[a]+g.w/2,m=d(g.p),o[m]?o[m]=[Math.min(_,o[m][0]),Math.max(p,o[m][1])]:o[m]=[_,p]),g.p0=g.p+(f?h[r]:h),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(r,t)}}function u(e,t,n,r){for(var i=0;i<n.length;i++){var a=n[i],a=new c([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});d(e,a,r),r.norm?(g(a),_(t,a,r)):m(t,a)}}function d(e,t,n){for(var r=t.minDiff,i=t.traces,a=r*(1-n.gap),o=a*(1-(n.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=r}t.binWidth=i[0][0].t.barwidth/100,v(t),T(e,t),A(e,t)}function v(e){for(var t=e.traces,n=0;n<t.length;n++){var r,i=t[n],a=i[0],o=a.trace,s=a.t,a=o._offset||o.offset,l=s.poffset;if(h(a)){for(r=Array.prototype.slice.call(a,0,i.length),d=0;d<r.length;d++)b(r[d])||(r[d]=l);for(d=r.length;d<i.length;d++)r.push(l);s.poffset=r}else void 0!==a&&(s.poffset=a);var o=o._width||o.width,c=s.barwidth;if(h(o)){for(var u=Array.prototype.slice.call(o,0,i.length),d=0;d<u.length;d++)b(u[d])||(u[d]=c);for(d=u.length;d<i.length;d++)u.push(c);if(s.barwidth=u,void 0===a){for(r=[],d=0;d<i.length;d++)r.push(l+(c-u[d])/2);s.poffset=r}}else void 0!==o&&(s.barwidth=o,void 0===a&&(s.poffset=l+(c-o)/2))}}function T(e,t){for(var n=t.traces,r=k(e),i=0;i<n.length;i++)for(var a=n[i],o=a[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<a.length;d++){var h=a[d],f=h.w=u?c[d]:c;h[r]=h.p+(l?s[d]:s)+f/2}}function A(e,t,n){var r=t.traces,i=t.minDiff/2;w.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var a=0;a<r.length;a++){var o=r[a],s=o[0],l=s.trace,c=[];for(p=0;p<o.length;p++)m=(g=o[p]).p-i,v=g.p+i,c.push(m,v);if(l.width||l.offset)for(var s=s.t,u=s.poffset,d=s.barwidth,h=Array.isArray(u),f=Array.isArray(d),p=0;p<o.length;p++){var m,g=o[p],_=h?u[p]:u,y=f?d[p]:d,v=(m=g.p+_)+y;c.push(m,v)}l._extremes[e._id]=w.findExtremes(e,c,{padded:!1})}}function m(e,t){for(var n=t.traces,r=k(e),i=0;i<n.length;i++){for(var a=n[i],o=a[0].trace,s=[],l=!1,c=0;c<a.length;c++){var u=a[c],d=u.b,h=d+u.s;u[r]=h,s.push(h),u.hasB&&s.push(d),u.hasB&&u.b||(l=!0)}o._extremes[e._id]=w.findExtremes(e,s,{tozero:l,padded:!0})}}function g(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++){var a=r[i];a.s!==x&&e.put(a.p,a.b+a.s)}}function _(t,e,n){var r=e.traces,i=k(t),a="fraction"===n.norm?1:100,o=a/1e9,s=t.l2c(t.c2l(0)),l="stack"===n.mode?a:s;function c(e){return b(t.c2l(e))&&(e<s-o||l+o<e||!b(s))}for(var u=0;u<r.length;u++){for(var d=r[u],h=d[0].trace,f=[],p=!1,m=!1,g=0;g<d.length;g++){var _,y,v=d[g];v.s!==x&&(y=Math.abs(a/e.get(v.p,v.s)),v.b*=y,v.s*=y,y=(_=v.b)+v.s,v[i]=y,f.push(y),m=m||c(y),v.hasB&&(f.push(_),m=m||c(_)),v.hasB&&v.b||(p=!0))}h._extremes[t._id]=w.findExtremes(t,f,{tozero:p,padded:m})}}function k(e){return e._id.charAt(0)}t.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,t=e._fullLayout,i=e._fullData,a=e.calcdata,o=[],s=[],l=0;l<i.length;l++){var c=i[l];if(!0===c.visible&&f.traceIs(c,"bar")&&c.xaxis===n._id&&c.yaxis===r._id&&(("h"===c.orientation?o:s).push(a[l]),c._computePh))for(var u=e.calcdata[l],d=0;d<u.length;d++)"function"==typeof u[d].ph0&&(u[d].ph0=u[d].ph0()),"function"==typeof u[d].ph1&&(u[d].ph1=u[d].ph1())}t={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap},p(e,n,r,s,t),p(e,r,n,o,t)},setGroupPositions:p}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339,"../../registry":373,"./sieve.js":396,"fast-isnumeric":31}],387:[function(e,t,n){"use strict";var p=e("../../lib"),o=e("../../components/color"),s=e("../../registry"),l=e("../scatter/xy_defaults"),c=e("../scatter/period_defaults"),u=e("./style_defaults"),d=e("../../plots/cartesian/constraints").getAxisGroup,h=e("./attributes"),m=p.coerceFont;function a(e,t,n,r){var i=t.orientation,a=t[{v:"x",h:"y"}[i]+"axis"],o=d(n,a)+i,a=n._alignmentOpts||{},i=r("alignmentgroup"),n=a[o],o=(n=n||(a[o]={}))[i];o?o.traces.push(t):o=n[i]={traces:[t],alignmentIndex:Object.keys(n).length,offsetGroups:{}};n=r("offsetgroup"),r=o.offsetGroups,o=r[n];n&&(o=o||(r[n]={offsetIndex:Object.keys(r).length}),t._offsetIndex=o.offsetIndex)}function f(e,t,n,r,i,a){var o=!(!1===(a=a||{}).moduleHasSelected),s=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),c=!(!1===a.moduleHasCliponaxis),u=!(!1===a.moduleHasTextangle),d=!(!1===a.moduleHasInsideanchor),h=!!a.hasPathbar,f=Array.isArray(i)||"auto"===i,a=f||"inside"===i,f=f||"outside"===i;(a||f)&&(i=m(r,"textfont",n.font),n=p.extendFlat({},i),(e=!(e.textfont&&e.textfont.color))&&delete n.color,m(r,"insidetextfont",n),h&&(h=p.extendFlat({},i),e&&delete h.color,m(r,"pathbar.textfont",h)),f&&m(r,"outsidetextfont",i),o&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),c&&r("cliponaxis"),u&&r("textangle"),r("texttemplate")),a&&d&&r("insidetextanchor")}t.exports={supplyDefaults:function(n,r,e,t){function i(e,t){return p.coerce(n,r,h,e,t)}var a;l(n,r,t,i)?(c(n,r,t,i),i("xhoverformat"),i("yhoverformat"),i("orientation",r.x&&!r.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),a=i("textposition"),f(n,0,t,i,a,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u(n,r,i,e,t),e=(r.marker.line||{}).color,(t=s.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||o.defaultLine,{axis:"y"}),t(n,r,e||o.defaultLine,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(r,i)):r.visible=!1},crossTraceDefaults:function(e,t){var n;function r(e){return p.coerce(n._input,n,h,e)}if("group"===t.barmode)for(var i=0;i<e.length;i++)"bar"===(n=e[i]).type&&(n._input,a(0,n,t,r))},handleGroupingDefaults:a,handleText:f}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/constraints":339,"../../registry":373,"../scatter/period_defaults":514,"../scatter/xy_defaults":521,"./attributes":383,"./style_defaults":398}],388:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},{}],389:[function(e,t,n){"use strict";var a=e("fast-isnumeric"),r=e("tinycolor2"),i=e("../../lib").isArrayOrTypedArray;n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(a(t)){t=+t;var r=e.min,i=e.max;if(!(void 0!==r&&t<r||void 0!==i&&i<t))return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return r(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},n.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:i(e.marker.line.width)?0:e.marker.line.width}},{"../../lib":285,"fast-isnumeric":31,tinycolor2:119}],390:[function(e,t,n){"use strict";var R=e("../../components/fx"),a=e("../../registry"),i=e("../../components/color"),I=e("../../lib").fillText,o=e("./helpers").getLineWidth,N=e("../../plots/cartesian/axes").hoverLabelText,z=e("../../constants/numerical").BADNUM;function s(e,t,n,r,i){var a,o,s,l,c,u,d=e.cd,h=d[0].trace,f=d[0].t,p="closest"===r,m="waterfall"===h.type,g=e.maxHoverDistance,_=e.maxSpikeDistance;"h"===h.orientation?(a=n,o=t,s="y",l="x",c=S,u=k):(a=t,o=n,s="x",l="y",u=S,c=k);var y=h[s+"period"];function v(e){return x(e,-1)}function b(e){return x(e,1)}function x(e,t){return y?e.p+t*Math.abs(e.p-e.orig_p):e[s]+t*e.w/2}var w=p||y?v:function(e){return Math.min(v(e),e.p-f.bardelta/2)},T=p||y?b:function(e){return Math.max(b(e),e.p+f.bardelta/2)};function A(e,t,n){return i.finiteRange&&(n=0),R.inbox(e-a,t-a,n+Math.min(1,Math.abs(t-e)/E)-1)}function k(e){return A(w(e),T(e),g)}function M(e){var t=e[l];return m&&(e=Math.abs(e.rawS)||0,0<o?t+=e:o<0&&(t-=e)),t}function S(e){var t=o,n=e.b,e=M(e);return R.inbox(n-t,e-t,g+(e-t)/(e-n)-1)}t=e[s+"a"],n=e[l+"a"];var E=Math.abs(t.r2c(t.range[1])-t.r2c(t.range[0])),r=R.getDistanceFunction(r,c,u,function(e){return(c(e)+u(e))/2});if(R.getClosest(d,r,e),!1!==e.index&&d[e.index].p!==z){p||(w=function(e){return Math.min(v(e),e.p-f.bargroupwidth/2)},T=function(e){return Math.max(b(e),e.p+f.bargroupwidth/2)});var C=d[e.index],d=h.base?C.b+C.s:C.s;e[l+"0"]=e[l+"1"]=n.c2p(C[l],!0),e[l+"LabelVal"]=d;d=f.extents[f.extents.round(C.p)];e[s+"0"]=t.c2p(p?w(C):d[0],!0),e[s+"1"]=t.c2p(p?T(C):d[1],!0);var L,D,O,P,d=void 0!==C.orig_p;return e[s+"LabelVal"]=d?C.orig_p:C.p,e.labelLabel=N(t,e[s+"LabelVal"],h[s+"hoverformat"]),e.valueLabel=N(n,e[l+"LabelVal"],h[l+"hoverformat"]),e.baseLabel=N(n,C.b,h[l+"hoverformat"]),e.spikeDistance=(O=o,P=(D=C).b,D=M(D),(R.inbox(P-O,D-O,_+(D-O)/(D-P)-1)+A(v(L=C),b(L),_))/2),e[s+"Spike"]=t.c2p(C.p,!0),I(C,h,e),e.hovertemplate=h.hovertemplate,e}}function l(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,t=o(e,t);return i.opacity(n)?n:i.opacity(r)&&t?r:void 0}t.exports={hoverPoints:function(e,t,n,r,i){if(n=s(e,t,n,r,i)){r=n.cd,i=r[0].trace,r=r[n.index];return n.color=l(i,r),a.getComponentMethod("errorbars","hoverInfo")(r,i,n),[n]}},hoverOnBars:s,getTraceColor:l}},{"../../components/color":155,"../../components/fx":195,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./helpers":389}],391:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":345,"../scatter/marker_colorbar":512,"./arrays_to_calcdata":382,"./attributes":383,"./calc":384,"./cross_trace_calc":386,"./defaults":387,"./event_data":388,"./hover":390,"./layout_attributes":392,"./layout_defaults":393,"./plot":394,"./select":395,"./style":397}],392:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],393:[function(e,t,n){"use strict";var h=e("../../registry"),f=e("../../plots/cartesian/axes"),p=e("../../lib"),m=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return p.coerce(n,r,m,e,t)}for(var i=!1,a=!1,o=!1,s={},l=t("barmode"),c=0;c<e.length;c++){var u,d=e[c];h.traceIs(d,"bar")&&d.visible&&(i=!0,"group"===l&&(s[u=d.xaxis+d.yaxis]&&(o=!0),s[u]=!0),d.visible&&"histogram"===d.type&&"category"!==f.getFromId({_fullLayout:r},d["v"===d.orientation?"xaxis":"yaxis"]).type&&(a=!0))}i?("overlay"!==l&&t("barnorm"),t("bargap",a&&!o?0:.2),t("bargroupgap")):delete r.barmode}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./layout_attributes":392}],394:[function(e,t,n){"use strict";var M=e("@plotly/d3"),S=e("fast-isnumeric"),E=e("../../lib"),C=e("../../lib/svg_text_utils"),L=e("../../components/color"),D=e("../../components/drawing"),r=e("../../registry"),O=e("../../plots/cartesian/axes").tickText,i=e("./uniform_text"),P=i.recordMinTextSize,a=i.clearMinTextSize,R=e("./style"),I=e("./helpers"),o=e("./constants"),i=e("./attributes"),N=i.text,z=i.textposition,F=e("../../components/fx/helpers").appendArrayPointValue,j=o.TEXTPAD;function s(e){return e.id}function B(e,t,n,r){return t.uniformtext.mode||!l(n)?e:(r&&(i=r()),e.transition().duration(n.duration).ease(n.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}));var i}function l(e){return e&&0<e.duration}function H(e){return"auto"===e?0:e}function U(e,t){var n=Math.PI/180*t,t=Math.abs(Math.sin(n)),n=Math.abs(Math.cos(n));return{x:e.width*n+e.height*t,y:e.width*t+e.height*n}}function V(e,t,n,r,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor||"end",u="end"===c,d="start"===c,h=((a.leftToRight||0)+1)/2,f=1-h,p=i.width,m=i.height,g=Math.abs(t-e),_=Math.abs(r-n),c=2*j<g&&2*j<_?j:0;g-=2*c,_-=2*c;a=H(l);"auto"!==l||p<=g&&m<=_||!(g<p||_<m)||(_<p||g<m)&&p<m==g<_||(a+=90);p=U(i,a),m=1;s&&(m=Math.min(1,g/p.x,_/p.y));s=i.left*f+i.right*h,g=(i.top+i.bottom)/2,_=(e+j)*f+(t-j)*h,i=(n+r)/2,f=0,h=0;return(d||u)&&(u=(o?p.x:p.y)/2,p=o?e<t?1:-1:n<r?1:-1,o?f=d?(_=e+p*c,-p*u):(_=t-p*c,p*u):h=d?(i=n+p*c,-p*u):(i=r-p*c,p*u)),{textX:s,textY:g,targetX:_,targetY:i,anchorX:f,anchorY:h,scale:m,rotate:a}}t.exports={plot:function(v,b,e,t,x,w){var T=b.xaxis,A=b.yaxis,k=v._fullLayout;x||(x={mode:k.barmode,norm:k.barmode,gap:k.bargap,groupgap:k.bargroupgap},a("bar",k)),e=E.makeTraceGroups(t,e,"trace bars").each(function(f){var e=M.select(this),p=f[0].trace,t="waterfall"===p.type,n="funnel"===p.type,m="bar"===p.type||n,g=0;t&&p.connector.visible&&"between"===p.connector.mode&&(g=p.connector.line.width/2);var _="h"===p.orientation,y=l(x),n=E.ensureSingle(e,"g","points"),t=function(e){if(e.ids)return s}(p),t=n.selectAll("g.point").data(E.identity,t);t.enter().append("g").classed("point",!0),t.exit().remove(),t.each(function(e,t){var n,r,i,a=M.select(this),o=(s=e,o=T,u=A,c=[],n=(l=_)?o:u,o=l?u:o,(u=[])[0]=n.c2p(s.s0,!0),c[0]=o.c2p(s.p0,!0),u[1]=n.c2p(s.s1,!0),c[1]=o.c2p(s.p1,!0),l?[u,c]:[c,u]),s=o[0][0],l=o[0][1],c=o[1][0],u=o[1][1],o=0==(_?l-s:u-c);function d(e){var t=M.round(r/2%1,2);return 0===x.gap&&0===x.groupgap?M.round(Math.round(e)-t,2):e}o=(o=o&&m&&I.getLineWidth(p,e)?!1:o)||!(S(s)&&S(l)&&S(c)&&S(u)),(e.isBlank=o)&&(_?l=s:u=c),g&&!o&&(_?l+=((s-=(s<l?1:-1)*g)<l?1:-1)*g:u+=((c-=(c<u?1:-1)*g)<u?1:-1)*g),"waterfall"===p.type?o||(i=p[e.dir].marker,r=i.line.width,i=i.color):(r=I.getLineWidth(p,e),i=e.mc||p.marker.color),v._context.staticPlot||(s=(h=L.opacity(i)<1||.01<r?d:function(e,t,n){return n&&e===t?e:2<=Math.abs(e-t)?d(e):t<e?Math.ceil(e):Math.floor(e)})(s,l,_),l=h(l,s,_),c=h(c,u,!_),u=h(u,c,!_));var o,h=B(E.ensureSingle(a,"path"),k,x,w);h.style("vector-effect","non-scaling-stroke").attr("d",isNaN((l-s)*(u-c))||o&&v._context.staticPlot?"M0,0Z":"M"+s+","+c+"V"+u+"H"+l+"V"+c+"Z").call(D.setClipUrl,b.layerClipId,v),!k.uniformtext.mode&&y&&(o=D.makePointStyleFns(p),D.singlePointStyle(e,h,p,o,v)),function(r,e,t,n,i,a,o,s,l,c,u){var d,h=e.xaxis,f=e.yaxis,p=r._fullLayout;function m(e,t,n){return E.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(D.font,n).call(C.convertToTspans,r)}var g=n[0].trace,_="h"===g.orientation,y=function(e,t,n,r,i){var a=t[0].trace;n=a.texttemplate?function(e,t,n,r,i){var a=t[0].trace,o=E.castOption(a,n,"texttemplate");if(!o)return"";var s,l,c="waterfall"===a.type,u="funnel"===a.type;l="h"===a.orientation?(h="y",s=i,f="x",r):(h="x",s=r,f="y",i);function d(e){return O(l,l.c2l(e),!0).text}t=t[n],n={};n.label=t.p,n.labelLabel=n[h+"Label"]=function(e){return O(s,s.c2l(e),!0).text}(t.p);var h=E.castOption(a,t.i,"text");0!==h&&!h||(n.text=h);n.value=t.s,n.valueLabel=n[f+"Label"]=d(t.s);var f={};F(f,a,t.i),c&&(n.delta=+t.rawS||t.s,n.deltaLabel=d(n.delta),n.final=t.v,n.finalLabel=d(n.final),n.initial=n.final-n.delta,n.initialLabel=d(n.initial));u&&(n.value=t.s,n.valueLabel=d(n.value),n.percentInitial=t.begR,n.percentInitialLabel=E.formatPercent(t.begR),n.percentPrevious=t.difR,n.percentPreviousLabel=E.formatPercent(t.difR),n.percentTotal=t.sumR,n.percenTotalLabel=E.formatPercent(t.sumR));t=E.castOption(a,t.i,"customdata");t&&(n.customdata=t);return E.texttemplateString(o,n,e._d3locale,f,n,a._meta||{})}(e,t,n,r,i):a.textinfo?function(e,t,n,r){var i=e[0].trace,a="h"===i.orientation,o="waterfall"===i.type,s="funnel"===i.type;function l(e){return O(a?n:r,+e,!0).text}var c,u=i.textinfo,d=e[t],h=u.split("+"),f=[],u=function(e){return-1!==h.indexOf(e)};u("label")&&f.push(function(e){return O(a?r:n,e,!0).text}(e[t].p));u("text")&&(0!==(c=E.castOption(i,d.i,"text"))&&!c||f.push(c));o&&(t=+d.rawS||d.s,i=d.v,o=i-t,u("initial")&&f.push(l(o)),u("delta")&&f.push(l(t)),u("final")&&f.push(l(i)));s&&(u("value")&&f.push(l(d.s)),s=0,u("percent initial")&&s++,u("percent previous")&&s++,u("percent total")&&s++,s=1<s,u("percent initial")&&(c=E.formatPercent(d.begR),s&&(c+=" of initial"),f.push(c)),u("percent previous")&&(c=E.formatPercent(d.difR),s&&(c+=" of previous"),f.push(c)),u("percent total")&&(c=E.formatPercent(d.sumR),s&&(c+=" of total"),f.push(c)));return f.join("<br>")}(t,n,r,i):I.getValue(a.text,n);return I.coerceString(N,n)}(p,n,i,h,f);d=function(e,t){t=I.getValue(e.textposition,t);return I.coerceEnumerated(z,t)}(g,i);var v="stack"===c.mode||"relative"===c.mode,b=n[i],e=!v||b._outmost;if(y&&"none"!==d&&(!b.isBlank&&a!==o&&s!==l||"auto"!==d&&"inside"!==d)){v=p.font,n=R.getBarColor(n[i],g),n=R.getInsideTextFont(g,i,v,n),i=R.getOutsideTextFont(g,i,v),v=t.datum();_?"log"===h.type&&v.s0<=0&&(a=h.range[0]<h.range[1]?0:h._length):"log"===f.type&&v.s0<=0&&(s=f.range[0]<f.range[1]?f._length:0);var x,w,T,A,h=Math.abs(o-a)-2*j,v=Math.abs(l-s)-2*j;if("outside"===d&&(e||b.hasB||(d="inside")),"auto"===d&&(e?(d="inside",A=E.ensureUniformFontSize(r,n),x=m(t,y,A),w=D.bBox(x.node()),T=w.width,M=w.height,f=T<=h&&M<=v,e=T<=v&&M<=h,v=_?T*(v/M)<=h:M*(h/T)<=v,0<T&&0<M&&(f||e||v)?d="inside":(d="outside",x.remove(),x=null)):d="inside"),!x){A=E.ensureUniformFontSize(r,"outside"===d?i:n);y=(x=m(t,y,A)).attr("transform");if(x.attr("transform",""),w=D.bBox(x.node()),T=w.width,M=w.height,x.attr("transform",y),T<=0||M<=0)return x.remove()}var k,M=g.textangle;(M="outside"===d?(k="both"===g.constraintext||"outside"===g.constraintext,function(e,t,n,r,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=i.width,d=i.height,h=Math.abs(t-e),f=Math.abs(r-n);o=s?2*j<f?j:0:2*j<h?j:0;var p=1;l&&(p=s?Math.min(1,f/d):Math.min(1,h/u));a=H(c),l=U(i,a),f=(s?l.x:l.y)/2,d=(i.left+i.right)/2,h=(i.top+i.bottom)/2,u=(e+t)/2,c=(n+r)/2,l=0,i=0,n=s?t<e?1:-1:n<r?1:-1;s?(u=t-n*o,l=n*f):(c=r+n*o,i=-n*f);return{textX:d,textY:h,targetX:u,targetY:c,anchorX:l,anchorY:i,scale:p,rotate:a}}(a,o,s,l,w,{isHorizontal:_,constrained:k,angle:M})):(k="both"===g.constraintext||"inside"===g.constraintext,V(a,o,s,l,w,{isHorizontal:_,constrained:k,angle:M,anchor:g.insidetextanchor}))).fontSize=A.size,P(g.type,M,p),b.transform=M,B(x,p,c,u).attr("transform",E.getTextTransform(M))}else t.select("text").remove()}(v,b,a,f,t,s,l,c,u,x,w),b.layerClipId&&D.hideOutsideRangePoint(e,a.select("text"),T,A,p.xcalendar,p.ycalendar)});t=!1===p.cliponaxis;D.setClipUrl(e,t?null:b.layerClipId,v)}),r.getComponentMethod("errorbars","plot")(v,e,b,x)},toMoveInsideBar:V}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx/helpers":191,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"./attributes":383,"./constants":385,"./helpers":389,"./style":397,"./uniform_text":399,"@plotly/d3":20,"fast-isnumeric":31}],395:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,a,o,s,l,c=e.cd,u=e.xaxis,d=e.yaxis,h=c[0].trace,f="funnel"===h.type,p="h"===h.orientation,m=[];if(!1===t)for(n=0;n<c.length;n++)c[n].selected=0;else for(n=0;n<c.length;n++){var g=c[n],_="ct"in g?g.ct:(_=g,i=d,a=p,o=f,l=s=void 0,s=(r=u).c2p(a?_.s0:_.p0,!0),l=r.c2p(a?_.s1:_.p1,!0),r=i.c2p(a?_.p0:_.s0,!0),_=i.c2p(a?_.p1:_.s1,!0),o?[(s+l)/2,(r+_)/2]:a?[l,(r+_)/2]:[(s+l)/2,_]);t.contains(_,!1,n,e)?(m.push({pointNumber:n,x:u.c2d(g.x),y:d.c2d(g.y)}),g.selected=1):g.selected=0}return m}},{}],396:[function(e,t,n){"use strict";t.exports=r;var c=e("../../lib").distinctVals,u=e("../../constants/numerical").BADNUM;function r(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,r=[],i=0;i<e.length;i++){for(var a=e[i],o=0;o<a.length;o++){var s=a[o];s.p!==u&&r.push(s.p)}a[0]&&a[0].width1&&(n=Math.min(a[0].width1,n))}this.positions=r;var l=c(r);this.distinctPositions=l.vals,1===l.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(l.minDiff,n);t=(t.posAxis||{}).type;"category"!==t&&"multicategory"!==t||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(e,t){var n=this.getLabel(e,t),e=this.bins[n]||0;return this.bins[n]=e+t,e},r.prototype.get=function(e,t){t=this.getLabel(e,t);return this.bins[t]||0},r.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":265,"../../lib":285}],397:[function(e,t,n){"use strict";var o=e("@plotly/d3"),i=e("../../components/color"),s=e("../../components/drawing"),l=e("../../lib"),c=e("../../registry"),a=e("./uniform_text").resizeText,r=e("./attributes"),u=r.textfont,d=r.insidetextfont,h=r.outsidetextfont,f=e("./helpers");function p(e,t,n){s.pointStyle(e.selectAll("path"),t,n),m(e,t,n)}function m(e,n,r){e.selectAll("text").each(function(e){var t=o.select(this),e=l.ensureUniformFontSize(r,g(t,e,n,r));s.font(t,e)})}function g(e,t,n,r){var i=r._fullLayout.font,a=n.textfont;return e.classed("bartext-inside")?(r=x(t,n),a=y(n,t.i,i,r)):e.classed("bartext-outside")&&(a=v(n,t.i,i)),a}function _(e,t,n){return b(u,e.textfont,t,n)}function y(e,t,n,r){n=_(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(n={color:i.contrast(r),family:n.family,size:n.size}),b(d,e.insidetextfont,t,n)}function v(e,t,n){n=_(e,t,n);return b(h,e.outsidetextfont,t,n)}function b(e,t,n,r){var i=f.getValue((t=t||{}).family,n),a=f.getValue(t.size,n),n=f.getValue(t.color,n);return{family:f.coerceString(e.family,i,r.family),size:f.coerceNumber(e.size,a,r.size),color:f.coerceColor(e.color,n,r.color)}}function x(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}t.exports={style:function(t){var e=o.select(t).selectAll("g.barlayer").selectAll("g.trace");a(t,e,"bar");var n=e.size(),r=t._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!e[0].trace.marker.line.width)&&o.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){p(o.select(this),e[0].trace,t)}),c.getComponentMethod("errorbars","style")(e)},styleTextPoints:m,styleOnSelect:function(e,t,n){var r,i,a=t[0].trace;a.selectedpoints?(r=n,i=a,t=e,s.selectedPointStyle(r.selectAll("path"),i),function(e,r,i){e.each(function(e){var t,n=o.select(this);e.selected?(t=l.ensureUniformFontSize(i,g(n,e,r,i)),(e=r.selected.textfont&&r.selected.textfont.color)&&(t.color=e),s.font(n,t)):s.selectedTextStyle(n,r)})}(r.selectAll("text"),i,t)):(p(n,a,e),c.getComponentMethod("errorbars","style")(n))},getInsideTextFont:y,getOutsideTextFont:v,getBarColor:x,resizeText:a}},{"../../components/color":155,"../../components/drawing":177,"../../lib":285,"../../registry":373,"./attributes":383,"./helpers":389,"./uniform_text":399,"@plotly/d3":20}],398:[function(e,t,n){"use strict";var o=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("../../lib").coercePattern;t.exports=function(e,t,n,r,i){var a=n("marker.color",r),r=s(e,"marker");r&&l(e,t,i,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",o.defaultLine),s(e,"marker.line")&&l(e,t,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),c(n,"marker.pattern",a,r),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],399:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../lib");function a(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:function(e,t,n){var r,i;n.uniformtext.mode&&(r=a(e),i=n.uniformtext.minsize,e=t.scale*t.fontSize,t.hide=e<i,n[r]=n[r]||1/0,t.hide||(n[r]=Math.min(n[r],Math.max(e,i))))},clearMinTextSize:function(e,t){t[a(e)]=void 0},resizeText:function(e,t,n){var r=(e=e._fullLayout)["_"+n+"Text_minsize"];if(r){var i,a="hide"===e.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}t.selectAll(i).each(function(e){e=e.transform;e&&(e.scale=a&&e.hide?0:r/e.fontSize,o.select(this).select("text").attr("transform",s.getTextTransform(e)))})}}}},{"../../lib":285,"@plotly/d3":20}],400:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../bar/attributes"),a=e("../../components/color/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../lib/extend").extendFlat,c=r.marker,e=c.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:l({},c.symbol,{arrayOk:!1,editType:"plot"}),opacity:l({},c.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:l({},c.size,{arrayOk:!1,editType:"calc"}),color:l({},c.color,{arrayOk:!1,editType:"style"}),line:{color:l({},e.color,{arrayOk:!1,dflt:a.defaultLine,editType:"style"}),width:l({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup,selected:{marker:r.selected.marker,editType:"style"},unselected:{marker:r.unselected.marker,editType:"style"},text:l({},r.text,{}),hovertext:l({},r.hovertext,{}),hovertemplate:s({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"../scatter/attributes":494}],401:[function(e,t,n){"use strict";var U=e("fast-isnumeric"),V=e("../../plots/cartesian/axes"),q=e("../../plots/cartesian/align_period"),Y=e("../../lib"),G=e("../../constants/numerical").BADNUM,W=Y._;t.exports=function(e,t){var n,r,i,a,o,s,l,c,u=e._fullLayout,d=V.getFromId(e,t.xaxis||"x"),h=V.getFromId(e,t.yaxis||"y"),f=[],p="violin"===t.type?"_numViolins":"_numBoxes",m="h"===t.orientation?(r=d,i="x",v=h,a="y",!!t.yperiodalignment):(r=h,i="y",v=d,a="x",!!t.xperiodalignment),d=function(e,t,n,r){var i=t in e,a=t+"0"in e,o="d"+t in e;if(i||a&&o){o=n.makeCalcdata(e,t);return[q(e,n,t,o),o]}r=a?e[t+"0"]:"name"in e&&("category"===n.type||U(e.name)&&-1!==["linear","log"].indexOf(n.type)||Y.isDateTime(e.name)&&"date"===n.type)?e.name:r;for(var s="multicategory"===n.type?n.r2c_just_indices(r):n.d2c(r,0,e[t+"calendar"]),l=e._length,c=new Array(l),u=0;u<l;u++)c[u]=s;return[c]}(t,a,v,u[p]),g=d[0],_=d[1],d=Y.distinctVals(g,v),y=d.vals,v=d.minDiff/2,b="all"===(t.boxpoints||t.points)?Y.identity:function(e){return e.v<N.lf||e.v>N.uf};if(t._hasPreCompStats){for(var x=t[i],w=function(e){return r.d2c((t[e]||[])[k])},T=1/0,A=-1/0,k=0;k<t._length;k++){var M,S=g[k];if(U(S)){if((N={}).pos=N[a]=S,m&&_&&(N.orig_p=_[k]),N.q1=w("q1"),N.med=w("median"),N.q3=w("q3"),o=[],x&&Y.isArrayOrTypedArray(x[k]))for(n=0;n<x[k].length;n++)(P=r.d2c(x[k][n]))!==G&&(X(c={v:P,i:[k,n]},t,[k,n]),o.push(c));N.pts=o.sort(Z),l=(s=N[i]=o.map(J)).length,N.med!==G&&N.q1!==G&&N.q3!==G&&N.med>=N.q1&&N.q3>=N.med?(M=w("lowerfence"),N.lf=M!==G&&M<=N.q1?M:$(N,s,l),S=w("upperfence"),N.uf=S!==G&&S>=N.q3?S:Q(N,s,l),M=w("mean"),N.mean=M!==G?M:l?Y.mean(s,l):(N.q1+N.q3)/2,S=w("sd"),N.sd=M!==G&&0<=S?S:l?Y.stdev(s,l,N.mean):N.q3-N.q1,N.lo=K(N),N.uo=ee(N),M=(M=w("notchspan"))!==G&&0<M?M:te(N,l),N.ln=N.med-M,N.un=N.med+M,S=N.lf,M=N.uf,t.boxpoints&&s.length&&(S=Math.min(S,s[0]),M=Math.max(M,s[l-1])),t.notched&&(S=Math.min(S,N.ln),M=Math.max(M,N.un)),N.min=S,N.max=M):(Y.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+N.q1,"median = "+N.med,"q3 = "+N.q3].join("\n")),M=N.med!==G?N.med:N.q1!==G?N.q3!==G?(N.q1+N.q3)/2:N.q1:N.q3!==G?N.q3:0,N.med=M,N.q1=N.q3=M,N.lf=N.uf=M,N.mean=N.sd=M,N.ln=N.un=M,N.min=N.max=M),T=Math.min(T,N.min),A=Math.max(A,N.max),N.pts2=o.filter(b),f.push(N)}}t._extremes[r._id]=V.findExtremes(r,[T,A],{padded:!0})}else{var E=r.makeCalcdata(t,i),C=function(e,t){for(var n=e.length,r=new Array(n+1),i=0;i<n;i++)r[i]=e[i]-t;return r[n]=e[n-1]+t,r}(y,v),L=y.length,D=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}(L);for(k=0;k<t._length;k++){var O,P=E[k];!U(P)||0<=(O=Y.findBin(g[k],C))&&O<L&&(X(c={v:P,i:k},t,k),D[O].push(c))}var R,I,N,z,F=1/0,j=-1/0,d=t.quartilemethod,B="exclusive"===d,H="inclusive"===d;for(k=0;k<L;k++)0<D[k].length&&((N={}).pos=N[a]=y[k],o=N.pts=D[k].sort(Z),l=(s=N[i]=o.map(J)).length,N.min=s[0],N.max=s[l-1],N.mean=Y.mean(s,l),N.sd=Y.stdev(s,l,N.mean),N.med=Y.interp(s,.5),l%2&&(B||H)?(B?(R=s.slice(0,l/2),I=s.slice(l/2+1)):H&&(R=s.slice(0,l/2+1),I=s.slice(l/2)),N.q1=Y.interp(R,.5),N.q3=Y.interp(I,.5)):(N.q1=Y.interp(s,.25),N.q3=Y.interp(s,.75)),N.lf=$(N,s,l),N.uf=Q(N,s,l),N.lo=K(N),N.uo=ee(N),z=te(N,l),N.ln=N.med-z,N.un=N.med+z,F=Math.min(F,N.ln),j=Math.max(j,N.un),N.pts2=o.filter(b),f.push(N));t._extremes[r._id]=V.findExtremes(r,t.notched?E.concat([F,j]):E,{padded:!0})}return function(e,t){if(Y.isArrayOrTypedArray(t.selectedpoints))for(var n=0;n<e.length;n++){for(var r=e[n].pts||[],i={},a=0;a<r.length;a++)i[r[a].i]=a;Y.tagSelected(r,t,i)}}(f,t),0<f.length?(f[0].t={num:u[p],dPos:v,posLetter:a,valLetter:i,labels:{med:W(e,"median:"),min:W(e,"min:"),q1:W(e,"q1:"),q3:W(e,"q3:"),max:W(e,"max:"),mean:"sd"===t.boxmean?W(e,"mean  :"):W(e,"mean:"),lf:W(e,"lower fence:"),uf:W(e,"upper fence:")}},u[p]++,f):[{t:{empty:!0}}]};var i={text:"tx",hovertext:"htx"};function X(e,t,n){for(var r in i)Y.isArrayOrTypedArray(t[r])&&(Array.isArray(n)?Y.isArrayOrTypedArray(t[r][n[0]])&&(e[i[r]]=t[r][n[0]][n[1]]):e[i[r]]=t[r][n])}function Z(e,t){return e.v-t.v}function J(e){return e.v}function $(e,t,n){return 0===n?e.q1:Math.min(e.q1,t[Math.min(Y.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,n-1)])}function Q(e,t,n){return 0===n?e.q3:Math.max(e.q3,t[Math.max(Y.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function K(e){return 4*e.q1-3*e.q3}function ee(e){return 4*e.q3-3*e.q1}function te(e,t){return 0===t?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"fast-isnumeric":31}],402:[function(e,t,n){"use strict";var F=e("../../plots/cartesian/axes"),j=e("../../lib"),B=e("../../plots/cartesian/constraints").getAxisGroup,h=["v","h"];function f(e,t,n,r){var i=t.calcdata,a=t._fullLayout,o=r._id,s=o.charAt(0),l=[],c=0;for(m=0;m<n.length;m++)for(g=i[n[m]],z=0;z<g.length;z++)l.push(r.c2l(g[z].pos,!0)),c+=(g[z].pts2||[]).length;if(l.length){t=j.distinctVals(l);"category"!==r.type&&"multicategory"!==r.type||(t.minDiff=1);var u=t.minDiff/2;F.minDtick(r,t.minDiff,t.vals[0],!0);for(var d=a["violin"===e?"_numViolins":"_numBoxes"],h="group"===a[e+"mode"]&&1<d,f=1-a[e+"gap"],p=1-a[e+"groupgap"],m=0;m<n.length;m++){var g,_,y,v,b,x,w,T=(g=i[n[m]])[0].trace,A=g[0].t,k=T.width,M=T.side;k?(b=_=v=k/2,y=0):(b=u,v=h?(P=B(a,r._id)+T.orientation,R=(a._alignmentOpts[P]||{})[T.alignmentgroup]||{},_=b*f*p/(P=(I=Object.keys(R.offsetGroups||{}).length)||d),y=2*b*(((I?T._offsetIndex:A.num)+.5)/P-.5)*f,b*f/P):(_=b*f*p,y=0,b)),A.dPos=b,A.bPos=y,A.bdPos=_,A.wHover=v;var S,E,C,L,D,O,P,R=y+_,I=Boolean(k);"positive"===M?(x=b*(k?1:.5),S=R,w=S=y):"negative"===M?(x=S=y,w=b*(k?1:.5),E=R):(x=w=b,S=E=R),(T.boxpoints||T.points)&&0<c?(P=T.pointpos,A=T.jitter,M=T.marker.size/2,(k=0)<=P+A&&(x<(k=R*(P+A))?(I=!0,D=M,C=k):S<k&&(D=M,C=x)),k<=x&&(C=x),P-A<=(k=0)&&(w<(k=-R*(P-A))?(I=!0,O=M,L=k):E<k&&(O=M,L=w)),k<=w&&(L=w)):(C=x,L=w);for(var N=new Array(g.length),z=0;z<g.length;z++)N[z]=g[z].pos;T._extremes[o]=F.findExtremes(r,N,{padded:I,vpadminus:L,vpadplus:C,vpadLinearized:!0,ppadminus:{x:O,y:D}[s],ppadplus:{x:D,y:O}[s]})}}}t.exports={crossTraceCalc:function(e,t){for(var n=e.calcdata,r=t.xaxis,i=t.yaxis,a=0;a<h.length;a++){for(var o=h[a],s="h"===o?i:r,l=[],c=0;c<n.length;c++){var u=n[c],d=u[0].t,u=u[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||d.empty||(u.orientation||"v")!==o||u.xaxis!==r._id||u.yaxis!==i._id||l.push(c)}f("box",e,l,s)}},setPositionOffset:f}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339}],403:[function(e,t,n){"use strict";var x=e("../../lib"),w=e("../../registry"),s=e("../../components/color"),l=e("../scatter/period_defaults"),c=e("../bar/defaults").handleGroupingDefaults,T=e("../../plots/cartesian/axis_autotype"),A=e("./attributes");function u(t,e,n,r){function i(e){var t=0;return e&&e.length&&(t+=1,x.isArrayOrTypedArray(e[0])&&e[0].length&&(t+=1)),t}function a(e){return x.validate(t[e],A[e])}var o,s=n("y"),l=n("x");"box"===e.type&&(u=n("q1"),d=n("median"),c=n("q3"),e._hasPreCompStats=u&&u.length&&d&&d.length&&c&&c.length,o=Math.min(x.minRowLength(u),x.minRowLength(d),x.minRowLength(c)));var c,u=i(s),d=i(l),h=u&&x.minRowLength(s),f=d&&x.minRowLength(l),p=r.calendar,m={autotypenumbers:r.autotypenumbers};if(e._hasPreCompStats)switch(String(d)+String(u)){case"00":var g=a("x0")||a("dx"),_=(a("y0")||a("dy"))&&!g?"h":"v",y=o;break;case"10":_="v",y=Math.min(o,f);break;case"20":_="h",y=Math.min(o,l.length);break;case"01":_="h",y=Math.min(o,h);break;case"02":_="v",y=Math.min(o,s.length);break;case"12":_="v",y=Math.min(o,f,s.length);break;case"21":_="h",y=Math.min(o,l.length,h);break;case"11":y=0;break;case"22":for(var v=!1,b=0;b<l.length;b++)if("category"===T(l[b],p,m)){v=!0;break}if(v)_="v",y=Math.min(o,f,s.length);else{for(b=0;b<s.length;b++)if("category"===T(s[b],p,m)){v=!0;break}y=v?(_="h",Math.min(o,l.length,h)):(_="v",Math.min(o,f,s.length))}}else y=0<u?(_="v",0<d?Math.min(f,h):Math.min(h)):0<d?(_="h",Math.min(f)):0;y?(e._length=y,c=n("orientation",_),e._hasPreCompStats?"v"===c&&0===d?(n("x0",0),n("dx",1)):"h"===c&&0===u&&(n("y0",0),n("dy",1)):"v"===c&&0===d?n("x0"):"h"===c&&0===u&&n("y0"),w.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r)):e.visible=!1}function d(e,t,n,r){var i=r.prefix,a=x.coerce2(e,t,A,"marker.outliercolor"),r=n("marker.line.outliercolor"),e="outliers";t._hasPreCompStats?e="all":(a||r)&&(e="suspectedoutliers");e=n(i+"points",e);e?(n("jitter","all"===e?.3:0),n("pointpos","all"===e?-1.5:0),n("marker.symbol"),n("marker.opacity"),n("marker.size"),n("marker.color",t.line.color),n("marker.line.color"),n("marker.line.width"),"suspectedoutliers"===e&&(n("marker.line.outliercolor",t.marker.color),n("marker.line.outlierwidth")),n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"),n("text"),n("hovertext")):delete t.marker;e=n("hoveron");"all"!==e&&-1===e.indexOf("points")||n("hovertemplate"),x.coerceSelectionMarkerOpacity(t,n)}t.exports={supplyDefaults:function(n,r,e,t){function i(e,t){return x.coerce(n,r,A,e,t)}var a,o;u(n,r,i,t),!1!==r.visible&&(l(n,r,t,i),i("xhoverformat"),i("yhoverformat"),(o=r._hasPreCompStats)&&(i("lowerfence"),i("upperfence")),i("line.color",(n.marker||{}).color||e),i("line.width"),i("fillcolor",s.addOpacity(r.line.color,.5)),a=!1,o&&(t=i("mean"),e=i("sd"),t&&t.length&&(a=!0,e&&e.length&&(a="sd"))),i("boxmean",a),i("whiskerwidth"),i("width"),i("quartilemethod"),a=!1,o?(o=i("notchspan"))&&o.length&&(a=!0):x.validate(n.notchwidth,A.notchwidth)&&(a=!0),i("notched",a)&&i("notchwidth"),d(n,r,i,{prefix:"box"}))},crossTraceDefaults:function(e,t){var n;function r(e){return x.coerce(a._input,a,A,e)}for(var i=0;i<e.length;i++){var a,o=(a=e[i]).type;"box"!==o&&"violin"!==o||(n=a._input,"group"===t[o+"mode"]&&c(n,a,t,r))}},handleSampleDefaults:u,handlePointsDefaults:d}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/axis_autotype":332,"../../registry":373,"../bar/defaults":387,"../scatter/period_defaults":514,"./attributes":400}],404:[function(e,t,n){"use strict";t.exports=function(e,t){return t.hoverOnBox&&(e.hoverOnBox=t.hoverOnBox),"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},{}],405:[function(e,t,n){"use strict";var N=e("../../plots/cartesian/axes"),z=e("../../lib"),F=e("../../components/fx"),j=e("../../components/color"),y=z.fillText;function s(e,t,n,r){function i(e){return s.c2l(e.pos)+v.bPos-s.c2l(c)}var a,o,s,l,c,u,d,h,f,p,m=e.cd,g=e.xa,_=e.ya,y=m[0].trace,v=m[0].t,b="violin"===y.type,x=[],w=v.bdPos,T=v.wHover;b&&"both"!==y.side?("positive"===y.side&&(h=function(e){e=i(e);return F.inbox(e,e+T,M)},f=w,p=0),"negative"===y.side&&(h=function(e){e=i(e);return F.inbox(e-T,e,M)},f=0,p=w)):(h=function(e){e=i(e);return F.inbox(e-T,e+T,M)},f=p=w);var b=b?function(e){return F.inbox(e.span[0]-l,e.span[1]-l,M)}:function(e){return F.inbox(e.min-l,e.max-l,M)},A="h"===y.orientation?(l=t,c=n,u=b,d=h,a="y",s=_,o="x",g):(l=n,c=t,u=h,d=b,a="x",s=g,o="y",_),w=Math.min(1,w/Math.abs(s.r2c(s.range[1])-s.r2c(s.range[0])));function k(e){return(u(e)+d(e))/2}var M=e.maxHoverDistance-w,w=e.maxSpikeDistance-w,r=F.getDistanceFunction(r,u,d,k);if(F.getClosest(m,r,e),!1===e.index)return[];var S=m[e.index],r=y.line.color,m=(y.marker||{}).color;j.opacity(r)&&y.line.width?e.color=r:j.opacity(m)&&y.boxpoints?e.color=m:e.color=y.fillcolor,e[a+"0"]=s.c2p(S.pos+v.bPos-p,!0),e[a+"1"]=s.c2p(S.pos+v.bPos+f,!0),e[a+"LabelVal"]=void 0!==S.orig_p?S.orig_p:S.pos;var E=a+"Spike";e.spikeDistance=k(S)*w/M,e[E]=s.c2p(S.pos,!0);var C={},L=["med","q1","q3","min","max"];(y.boxmean||(y.meanline||{}).visible)&&L.push("mean"),(y.boxpoints||y.points)&&L.push("lf","uf");for(var D=0;D<L.length;D++){var O,P,R,I=L[D];I in S&&!(S[I]in C)&&(C[S[I]]=!0,O=S[I],P=A.c2p(O,!0),(R=z.extendFlat({},e)).attr=I,R[o+"0"]=R[o+"1"]=P,R[o+"LabelVal"]=O,R[o+"Label"]=(v.labels?v.labels[I]+" ":"")+N.hoverLabelText(A,O,y[o+"hoverformat"]),R.hoverOnBox=!0,"mean"===I&&"sd"in S&&"sd"===y.boxmean&&(R[o+"err"]=S.sd),e.name="",e.spikeDistance=void 0,e[E]=void 0,R.hovertemplate=!1,x.push(R))}return x}function l(e,t,n){for(var r=e.cd,i=e.xa,a=e.ya,o=r[0].trace,s=i.c2p(t),l=a.c2p(n),c=F.quadrature(function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(i.c2p(e.x)-s)-t,1-3/t)},function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(a.c2p(e.y)-l)-t,1-3/t)}),u=!1,d=0;d<r.length;d++)for(var h=r[d],f=0;f<(h.pts||[]).length;f++){var p,m=c(p=h.pts[f]);m<=e.distance&&(e.distance=m,u=[d,f])}if(!u)return!1;p=(h=r[u[0]]).pts[u[1]];var g,_=i.c2p(p.x,!0),t=a.c2p(p.y,!0),n=p.mrc||1,t=z.extendFlat({},e,{index:p.i,color:(o.marker||{}).color,name:o.name,x0:_-n,x1:_+n,y0:t-n,y1:t+n,spikeDistance:e.distance,hovertemplate:o.hovertemplate}),n=h.orig_p,n=void 0!==n?n:h.pos;return"h"===o.orientation?(g=a,t.xLabelVal=p.x,t.yLabelVal=n):(g=i,t.xLabelVal=n,t.yLabelVal=p.y),t[g._id.charAt(0)+"Spike"]=g.c2p(h.pos,!0),y(p,o,t),t}t.exports={hoverPoints:function(e,t,n,r){var i,a=e.cd[0].trace.hoveron,o=[];return-1!==a.indexOf("boxes")&&(o=o.concat(s(e,t,n,r))),-1!==a.indexOf("points")&&(i=l(e,t,n)),"closest"===r?i?[i]:o:(i&&o.push(i),o)},hoverOnBoxes:s,hoverOnPoints:l}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],406:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./attributes":400,"./calc":401,"./cross_trace_calc":402,"./defaults":403,"./event_data":404,"./hover":405,"./layout_attributes":407,"./layout_defaults":408,"./plot":409,"./select":410,"./style":411}],407:[function(e,t,n){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],408:[function(e,t,n){"use strict";var c=e("../../registry"),i=e("../../lib"),a=e("./layout_attributes");function o(e,t,n,r,i){for(var a=i+"Layout",o=!1,s=0;s<n.length;s++){var l=n[s];if(c.traceIs(l,a)){o=!0;break}}o&&(r(i+"mode"),r(i+"gap"),r(i+"groupgap"))}t.exports={supplyLayoutDefaults:function(n,r,e){o(0,0,e,function(e,t){return i.coerce(n,r,a,e,t)},"box")},_supply:o}},{"../../lib":285,"../../registry":373,"./layout_attributes":407}],409:[function(e,t,n){"use strict";var S=e("@plotly/d3"),E=e("../../lib"),i=e("../../components/drawing"),b=5,x=.01;function s(e,t,p,n){var m,g="h"===p.orientation,_=t.val,y=t.pos,v=!!y.rangebreaks,b=n.bPos,x=n.wdPos||0,w=n.bPosPxOffset||0,T=p.whiskerwidth||0,A=p.notched||!1,k=A?1-2*p.notchwidth:1,M=Array.isArray(n.bdPos)?(m=n.bdPos[0],n.bdPos[1]):(m=n.bdPos,n.bdPos),e=e.selectAll("path.box").data("violin"!==p.type||p.box.visible?E.identity:[]);e.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),e.exit().remove(),e.each(function(e){if(e.empty)return"M0,0Z";var t=y.c2l(e.pos+b,!0),n=y.l2p(t-m)+w,r=y.l2p(t+M)+w,i=v?(n+r)/2:y.l2p(t)+w,a=p.whiskerwidth,o=v?n*a+(1-a)*i:y.l2p(t-x)+w,s=v?r*a+(1-a)*i:y.l2p(t+x)+w,l=y.l2p(t-m*k)+w,c=y.l2p(t+M*k)+w,u=_.c2p(e.q1,!0),d=_.c2p(e.q3,!0),h=E.constrain(_.c2p(e.med,!0),Math.min(u,d)+1,Math.max(u,d)-1),f=void 0===e.lf||!1===p.boxpoints,a=_.c2p(f?e.min:e.lf,!0),t=_.c2p(f?e.max:e.uf,!0),f=_.c2p(e.ln,!0),e=_.c2p(e.un,!0);g?S.select(this).attr("d","M"+h+","+l+"V"+c+"M"+u+","+n+"V"+r+(A?"H"+f+"L"+h+","+c+"L"+e+","+r:"")+"H"+d+"V"+n+(A?"H"+e+"L"+h+","+l+"L"+f+","+n:"")+"ZM"+u+","+i+"H"+a+"M"+d+","+i+"H"+t+(0===T?"":"M"+a+","+o+"V"+s+"M"+t+","+o+"V"+s)):S.select(this).attr("d","M"+l+","+h+"H"+c+"M"+n+","+u+"H"+r+(A?"V"+f+"L"+c+","+h+"L"+r+","+e:"")+"V"+d+"H"+n+(A?"V"+e+"L"+l+","+h+"L"+n+","+f:"")+"ZM"+i+","+u+"V"+a+"M"+i+","+d+"V"+t+(0===T?"":"M"+o+","+a+"H"+s+"M"+o+","+t+"H"+s))})}function l(e,t,g,n){var r=t.x,t=t.y,_=n.bdPos,y=n.bPos,v=g.boxpoints||g.points;E.seedPseudoRandom();e=e.selectAll("g.points").data(v?function(e){return e.forEach(function(e){e.t=n,e.trace=g}),e}:[]);e.enter().append("g").attr("class","points"),e.exit().remove();e=e.selectAll("path").data(function(e){var t,n,r=e.pts2,i=Math.max((e.max-e.min)/10,e.q3-e.q1),a=1e-9*i,o=i*x,s=[],l=0;if(g.jitter){if(0===i)for(l=1,s=new Array(r.length),t=0;t<r.length;t++)s[t]=1;else for(t=0;t<r.length;t++){var c=Math.max(0,t-b),u=r[c].v,d=Math.min(r.length-1,t+b),h=r[d].v;"all"!==v&&(r[t].v<e.lf?h=Math.min(h,e.lf):u=Math.max(u,e.uf));u=Math.sqrt(o*(d-c)/(h-u+a))||0,u=E.constrain(Math.abs(u),0,1);s.push(u),l=Math.max(u,l)}n=2*g.jitter/(l||1)}for(t=0;t<r.length;t++){var f=r[t],p=f.v,m=g.jitter?n*s[t]*(E.pseudoRandom()-.5):0,m=e.pos+y+_*(g.pointpos+m);"h"===g.orientation?(f.y=m,f.x=p):(f.x=m,f.y=p),"suspectedoutliers"===v&&p<e.uo&&p>e.lo&&(f.so=!0)}return r});e.enter().append("path").classed("point",!0),e.exit().remove(),e.call(i.translatePoints,r,t)}function c(e,t,o,n){var s,l=t.val,c=t.pos,u=!!c.rangebreaks,d=n.bPos,h=n.bPosPxOffset||0,f=o.boxmean||(o.meanline||{}).visible,p=Array.isArray(n.bdPos)?(s=n.bdPos[0],n.bdPos[1]):(s=n.bdPos,n.bdPos),e=e.selectAll("path.mean").data("box"===o.type&&o.boxmean||"violin"===o.type&&o.box.visible&&o.meanline.visible?E.identity:[]);e.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),e.exit().remove(),e.each(function(e){var t=c.c2l(e.pos+d,!0),n=c.l2p(t-s)+h,r=c.l2p(t+p)+h,i=u?(n+r)/2:c.l2p(t)+h,a=l.c2p(e.mean,!0),t=l.c2p(e.mean-e.sd,!0),e=l.c2p(e.mean+e.sd,!0);"h"===o.orientation?S.select(this).attr("d","M"+a+","+n+"V"+r+("sd"===f?"m0,0L"+t+","+i+"L"+a+","+n+"L"+e+","+i+"Z":"")):S.select(this).attr("d","M"+n+","+a+"H"+r+("sd"===f?"m0,0L"+i+","+t+"L"+n+","+a+"L"+i+","+e+"Z":""))})}t.exports={plot:function(e,t,n,r){var a=t.xaxis,o=t.yaxis;E.makeTraceGroups(r,n,"trace boxes").each(function(e){var t,n=S.select(this),r=e[0],i=r.t,e=r.trace;i.wdPos=i.bdPos*e.whiskerwidth,!0!==e.visible||i.empty?n.remove():(r="h"===e.orientation?(t=o,a):(t=a,o),s(n,{pos:t,val:r},e,i),l(n,{x:a,y:o},e,i),c(n,{pos:t,val:r},e,i))})},plotBoxAndWhiskers:s,plotPoints:l,plotBoxMean:c}},{"../../components/drawing":177,"../../lib":285,"@plotly/d3":20}],410:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i=e.cd,a=e.xaxis,o=e.yaxis,s=[];if(!1===t)for(n=0;n<i.length;n++)for(r=0;r<(i[n].pts||[]).length;r++)i[n].pts[r].selected=0;else for(n=0;n<i.length;n++)for(r=0;r<(i[n].pts||[]).length;r++){var l=i[n].pts[r],c=a.c2p(l.x),u=o.c2p(l.y);t.contains([c,u],null,l.i,e)?(s.push({pointNumber:l.i,x:a.c2d(l.x),y:o.c2d(l.y)}),l.selected=1):l.selected=0}return s}},{}],411:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../components/color"),l=e("../../components/drawing");t.exports={style:function(a,e,t){(t=t||o.select(a).selectAll("g.trace.boxes")).style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t=o.select(this),r=e[0].trace,n=r.line.width;function i(e,t,n,r){e.style("stroke-width",t+"px").call(s.stroke,n).call(s.fill,r)}e=t.selectAll("path.box");"candlestick"===r.type?e.each(function(e){var t,n;e.empty||(i(t=o.select(this),(n=r[e.dir]).line.width,n.line.color,n.fillcolor),t.style("opacity",r.selectedpoints&&!e.selected?.3:1))}):(i(e,n,r.line.color,r.fillcolor),t.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(s.stroke,r.line.color),t=t.selectAll("path.point"),l.pointStyle(t,r,a))})},styleOnSelect:function(e,t,n){t=t[0].trace,n=n.selectAll("path.point"),t.selectedpoints?l.selectedPointStyle(n,t):l.pointStyle(n,t,e)}}},{"../../components/color":155,"../../components/drawing":177,"@plotly/d3":20}],412:[function(e,t,n){"use strict";var r=e("../heatmap/attributes"),i=e("../scatter/attributes"),a=e("../../plots/cartesian/axis_format_attributes"),o=a.axisHoverFormat,s=a.descriptionOnlyNumbers,l=e("../../components/colorscale/attributes"),c=e("../../components/drawing/attributes").dash,u=e("../../plots/font_attributes"),d=e("../../lib/extend").extendFlat,h=e("../../constants/filter_ops"),a=h.COMPARISON_OPS2,e=h.INTERVAL_OPS,h=i.line;t.exports=d({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:r.hovertemplate,hoverongaps:r.hoverongaps,connectgaps:d({},r.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:u({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:s("contour label")},operation:{valType:"enumerated",values:[].concat(a).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:d({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:d({},h.smoothing,{}),editType:"plot"}},l("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../constants/filter_ops":263,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../heatmap/attributes":434,"../scatter/attributes":494}],413:[function(e,t,n){"use strict";var s=e("../../components/colorscale"),l=e("../heatmap/calc"),c=e("./set_contours"),u=e("./end_plus");t.exports=function(e,t){var n=l(e,t),r=n[0].z;c(t,r);var i,a=t.contours,o=s.extractOpts(t);return r="heatmap"===a.coloring&&o.auto&&!1===t.autocontour?(i=a.start,o=u(a),a=a.size||1,o=Math.floor((o-i)/a)+1,isFinite(a)||(o=a=1),[i=i-a/2,i+o*a]):r,s.calc(e,t,{vals:r,cLetter:"z"}),n}},{"../../components/colorscale":167,"../heatmap/calc":435,"./end_plus":423,"./set_contours":431}],414:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e[0],r=n.z;switch(t.type){case"levels":for(var i=Math.min(r[0][0],r[0][1]),a=0;a<e.length;a++){var o=e[a];o.prefixBoundary=!o.edgepaths.length&&(i>o.level||o.starts.length&&i===o.level)}break;case"constraint":if(n.prefixBoundary=!1,n.edgepaths.length)return;var s=n.x.length,l=n.y.length,c=-1/0,u=1/0;for(a=0;a<l;a++)u=Math.min(u,r[a][0]),u=Math.min(u,r[a][s-1]),c=Math.max(c,r[a][0]),c=Math.max(c,r[a][s-1]);for(a=1;a<s-1;a++)u=Math.min(u,r[0][a]),u=Math.min(u,r[l-1][a]),c=Math.max(c,r[0][a]),c=Math.max(c,r[l-1][a]);var d,h,f=t.value;switch(t._operation){case">":c<f&&(n.prefixBoundary=!0);break;case"<":(f<u||n.starts.length&&f===u)&&(n.prefixBoundary=!0);break;case"[]":d=Math.min(f[0],f[1]),((h=Math.max(f[0],f[1]))<u||c<d||n.starts.length&&h===u)&&(n.prefixBoundary=!0);break;case"][":d=Math.min(f[0],f[1]),h=Math.max(f[0],f[1]),d<u&&c<h&&(n.prefixBoundary=!0)}}}},{}],415:[function(e,t,n){"use strict";var l=e("../../components/colorscale"),c=e("./make_color_map"),u=e("./end_plus");t.exports={min:"zmin",max:"zmax",calc:function(e,t,n){var r=t.contours,i=t.line,a=r.size||1,o=r.coloring,s=c(t,{isColorbar:!0});"heatmap"===o?(t=l.extractOpts(t),n._fillgradient=t.reversescale?l.flipScale(t.colorscale):t.colorscale,n._zrange=[t.min,t.max]):"fill"===o&&(n._fillcolor=s),n._line={color:"lines"===o?s:i.color,width:!1!==r.showlines?i.width:0,dash:i.dash},n._levels={start:r.start,end:u(r),size:a}}}},{"../../components/colorscale":167,"./end_plus":423,"./make_color_map":428}],416:[function(e,t,n){"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],417:[function(e,t,n){"use strict";var p=e("fast-isnumeric"),m=e("./label_defaults"),r=e("../../components/color"),g=r.addOpacity,_=r.opacity,e=e("../../constants/filter_ops"),y=e.CONSTRAINT_REDUCTION,v=e.COMPARISON_OPS2;t.exports=function(e,t,n,r,i,a){var o,s,l,c,u,d,h=t.contours,f=n("contours.operation");h._operation=y[f],l=n,c=h,-1===v.indexOf(c.operation)?(l("contours.value",[0,1]),Array.isArray(c.value)?2<c.value.length?c.value=c.value.slice(2):0===c.length?c.value=[0,1]:c.length<2?(u=parseFloat(c.value[0]),c.value=[u,u+1]):c.value=[parseFloat(c.value[0]),parseFloat(c.value[1])]:p(c.value)&&(u=parseFloat(c.value),c.value=[u,u+1])):(l("contours.value",0),p(c.value)||(Array.isArray(c.value)?c.value=parseFloat(c.value[0]):c.value=0)),"="===f?o=h.showlines=!0:(o=n("contours.showlines"),s=n("fillcolor",g((e.line||{}).color||i,.5))),o&&(d=n("line.color",s&&_(s)?g(t.fillcolor,1):i),n("line.width",2),n("line.dash")),n("line.smoothing"),m(n,r,d,a)}},{"../../components/color":155,"../../constants/filter_ops":263,"./label_defaults":427,"fast-isnumeric":31}],418:[function(e,t,n){"use strict";var a=e("../../constants/filter_ops"),o=e("fast-isnumeric");function r(e,t){var n,r=Array.isArray(t);function i(e){return o(e)?+e:null}return-1!==a.COMPARISON_OPS2.indexOf(e)?n=i(r?t[0]:t):-1!==a.INTERVAL_OPS.indexOf(e)?n=r?[i(t[0]),i(t[1])]:[i(t),i(t)]:-1!==a.SET_OPS.indexOf(e)&&(n=r?t.map(i):[i(t)]),n}function i(n){return function(e){e=r(n,e);var t=Math.min(e[0],e[1]),e=Math.max(e[0],e[1]);return{start:t,end:e,size:e-t}}}function s(t){return function(e){return{start:e=r(t,e),end:1/0,size:1/0}}}t.exports={"[]":i("[]"),"][":i("]["),">":s(">"),"<":s("<"),"=":s("=")}},{"../../constants/filter_ops":263,"fast-isnumeric":31}],419:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=r("contours.start"),r=r("contours.end"),i=!1===i||!1===r,r=n("contours.size"),t=i?t.autocontour=!0:n("autocontour",!1);!t&&r||n("ncontours")}},{}],420:[function(e,t,n){"use strict";var l=e("../../lib");function c(e){return l.extendFlat({},e,{edgepaths:l.extendDeep([],e.edgepaths),paths:l.extendDeep([],e.paths),starts:l.extendDeep([],e.starts)})}t.exports=function(e,t){var n,r,i,a=function(e){return e.reverse()},o=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&l.warn("Contour data invalid for the specified inequality operation."),r=e[0],n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=a(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=a(r.paths[n]);for(n=0;n<r.starts.length;n++)r.starts[n]=a(r.starts[n]);return e;case"][":var s=a,a=o,o=s;case"[]":for(2!==e.length&&l.warn("Contour data invalid for the specified inequality range operation."),r=c(e[0]),i=c(e[1]),n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=a(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=a(r.paths[n]);for(n=0;n<r.starts.length;n++)r.starts[n]=a(r.starts[n]);for(;i.edgepaths.length;)r.edgepaths.push(o(i.edgepaths.shift()));for(;i.paths.length;)r.paths.push(o(i.paths.shift()));for(;i.starts.length;)r.starts.push(o(i.starts.shift()));return[r]}}},{"../../lib":285}],421:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../heatmap/xyz_defaults"),l=e("../scatter/period_defaults"),c=e("./constraint_defaults"),u=e("./contours_defaults"),d=e("./style_defaults"),h=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return o.coerce(n,r,h,e,t)}var a;s(n,r,i,t)?(l(n,r,t,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),i("hoverongaps"),a="constraint"===i("contours.type"),i("connectgaps",o.isArray1D(r.z)),a?c(n,r,i,t,e):(u(n,r,i,function(e){return o.coerce2(n,r,h,e)}),d(n,r,i,t))):r.visible=!1}},{"../../lib":285,"../heatmap/xyz_defaults":448,"../scatter/period_defaults":514,"./attributes":412,"./constraint_defaults":417,"./contours_defaults":419,"./style_defaults":433}],422:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("./constraint_mapping"),h=e("./end_plus");t.exports=function(e,t,n){for(var r="constraint"===e.type?d[e._operation](e.value):e,i=r.size,a=[],o=h(r),s=n.trace._carpetTrace,l=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},c=r.start;c<o;c+=i)if(a.push(u.extendFlat({level:c,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},l)),1e3<a.length){u.warn("Too many contours, clipping at 1000",e);break}return a}},{"../../lib":285,"./constraint_mapping":418,"./end_plus":423}],423:[function(e,t,n){"use strict";t.exports=function(e){return e.end+e.size/1e6}},{}],424:[function(e,t,n){"use strict";var N=e("../../lib"),z=e("./constants");function F(e,t,n,r){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<r}function s(e,t,n,r,i){for(var a=t.join(","),o=e.crossings[a],s=function(e,t,n){var r=0,i=0;20<e&&t?208===e||1114===e?r=0===n[0]?1:-1:i=0===n[1]?1:-1:-1!==z.BOTTOMSTART.indexOf(e)?i=1:-1!==z.LEFTSTART.indexOf(e)?r=1:-1!==z.TOPSTART.indexOf(e)?i=-1:r=-1;return[r,i]}(o,n,t),l=[j(e,t,[-s[0],-s[1]])],c=e.z.length,u=e.z[0].length,d=t.slice(),h=s.slice(),f=0;f<1e4;f++){if(20<o?(o=z.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1],e.crossings[a]=z.SADDLEREMAINDER[o]):delete e.crossings[a],!(s=z.NEWDELTA[o])){N.log("Found bad marching index:",o,t,e.level);break}l.push(j(e,t,s)),t[0]+=s[0],t[1]+=s[1],a=t.join(","),F(l[l.length-1],l[l.length-2],r,i)&&l.pop();var p=s[0]&&(t[0]<0||t[0]>u-2)||s[1]&&(t[1]<0||t[1]>c-2);if(t[0]===d[0]&&t[1]===d[1]&&s[0]===h[0]&&s[1]===h[1]||n&&p)break;o=e.crossings[a]}1e4===f&&N.log("Infinite loop in contour?");var m,g,_,y,v,b,x,w,T,A,k=F(l[0],l[l.length-1],r,i),M=0,S=.2*e.smoothing,E=[],C=0;for(f=1;f<l.length;f++)w=l[f],T=l[f-1],A=void 0,A=w[2]-T[2],T=w[3]-T[3],M+=T=Math.sqrt(A*A+T*T),E.push(T);var L=M/E.length*S;function D(e){return l[e%l.length]}for(f=l.length-2;C<=f;f--)if((m=E[f])<L){for(_=0,g=f-1;C<=g&&m+E[g]<L;g--)m+=E[g];if(k&&f===l.length-2)for(_=0;_<g&&m+E[_]<L;_++)m+=E[_];y=f-g+_+1,v=Math.floor((f+g+_+2)/2),v=k||f!==l.length-2?k||-1!==g?y%2?D(v):[(D(v)[0]+D(v+1)[0])/2,(D(v)[1]+D(v+1)[1])/2]:l[0]:l[l.length-1],l.splice(g+1,f-g+1,v),f=g+1,_&&(C=_),k&&(f===l.length-2?l[_]=l[l.length-1]:0===f&&(l[l.length-1]=l[0]))}for(l.splice(0,C),f=0;f<l.length;f++)l[f].length=2;if(!(l.length<2))if(k)l.pop(),e.paths.push(l);else{n||N.log("Unclosed interior contour?",e.level,d.join(","),l.join("L"));for(var O=!1,P=0;P<e.edgepaths.length;P++)if(b=e.edgepaths[P],!O&&F(b[0],l[l.length-1],r,i)){l.pop();for(var O=!0,R=!1,I=0;I<e.edgepaths.length;I++)if(F((x=e.edgepaths[I])[x.length-1],l[0],r,i)){R=!0,l.shift(),e.edgepaths.splice(P,1),I===P?e.paths.push(l.concat(x)):(P<I&&I--,e.edgepaths[I]=x.concat(l,b));break}R||(e.edgepaths[P]=l.concat(b))}for(P=0;P<e.edgepaths.length&&!O;P++)F((b=e.edgepaths[P])[b.length-1],l[0],r,i)&&(l.shift(),e.edgepaths[P]=b.concat(l),O=!0);O||e.edgepaths.push(l)}}function j(e,t,n){var r=t[0]+Math.max(n[0],0),i=t[1]+Math.max(n[1],0),a=e.z[i][r],o=e.xaxis,t=e.yaxis;if(n[1]){n=(e.level-a)/(e.z[i][r+1]-a);return[o.c2p((1-n)*e.x[r]+n*e.x[r+1],!0),t.c2p(e.y[i],!0),r+n,i]}a=(e.level-a)/(e.z[i+1][r]-a);return[o.c2p(e.x[r],!0),t.c2p((1-a)*e.y[i]+a*e.y[i+1],!0),r,i+a]}t.exports=function(e,t,n){var r,i,a,o;for(t=t||.01,n=n||.01,i=0;i<e.length;i++){for(a=e[i],o=0;o<a.starts.length;o++)s(a,a.starts[o],"edge",t,n);for(r=0;Object.keys(a.crossings).length&&r<1e4;)r++,s(a,Object.keys(a.crossings)[0].split(",").map(Number),void 0,t,n);1e4===r&&N.log("Infinite loop in contour?")}}},{"../../lib":285,"./constants":416}],425:[function(e,t,n){"use strict";var a=e("../../components/color"),o=e("../heatmap/hover");t.exports=function(e,t,n,r,i){(i=i||{}).isContour=!0;i=o(e,t,n,r,i);return i&&i.forEach(function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&a.opacity(t.fillcolor)?e.color=a.addOpacity(t.fillcolor,1):t.contours.showlines&&a.opacity(t.line.color)&&(e.color=a.addOpacity(t.line.color,1)))}),i}},{"../../components/color":155,"../heatmap/hover":441}],426:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":412,"./calc":413,"./colorbar":415,"./defaults":421,"./hover":425,"./plot":430,"./style":432}],427:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t,n,r){r=r||{},e("contours.showlabels")&&(t=t.font,i.coerceFont(e,"contours.labelfont",{family:t.family,size:t.size,color:n}),e("contours.labelformat")),!1!==r.hasHover&&e("zhoverformat")}},{"../../lib":285}],428:[function(e,t,n){"use strict";var m=e("@plotly/d3"),g=e("../../components/colorscale"),_=e("./end_plus");t.exports=function(e){var t=e.contours,n=t.start,r=_(t),i=t.size||1,a=Math.floor((r-n)/i)+1,o="lines"===t.coloring?0:1,e=g.extractOpts(e);isFinite(i)||(a=i=1);var s,l=e.reversescale?g.flipScale(e.colorscale):e.colorscale,c=l.length,u=new Array(c),d=new Array(c);if("heatmap"===t.coloring){for(var h=e.min,f=e.max,p=0;p<c;p++)s=l[p],u[p]=s[0]*(f-h)+h,d[p]=s[1];e=m.extent([h,f,t.start,t.start+i*(a-1)]),t=e[h<f?0:1],e=e[h<f?1:0];t!==h&&(u.splice(0,0,t),d.splice(0,0,d[0])),e!==f&&(u.push(e),d.push(d[d.length-1]))}else for(p=0;p<c;p++)s=l[p],u[p]=(s[0]*(a+o-1)-o/2)*i+n,d[p]=s[1];return g.makeColorScaleFunc({domain:u,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":167,"./end_plus":423,"@plotly/d3":20}],429:[function(e,t,n){"use strict";var g=e("./constants");t.exports=function(e){for(var t,n,r,i,a,o,s,l,c,u,d=e[0].z,h=d.length,f=d[0].length,p=2===h||2===f,m=0;m<h-1;m++)for(r=[],0===m&&(r=r.concat(g.BOTTOMSTART)),m===h-2&&(r=r.concat(g.TOPSTART)),t=0;t<f-1;t++)for(n=r.slice(),0===t&&(n=n.concat(g.LEFTSTART)),t===f-2&&(n=n.concat(g.RIGHTSTART)),i=t+","+m,a=[[d[m][t],d[m][t+1]],[d[m+1][t],d[m+1][t+1]]],s=0;s<e.length;s++)o=e[s],l=o.level,u=void 0,(u=5!=(u=((c=a)[0][0]>l?0:1)+(c[0][1]>l?0:2)+(c[1][1]>l?0:4)+(c[1][0]>l?0:8))&&10!=u?15==u?0:u:(c[0][0]+c[0][1]+c[1][0]+c[1][1])/4<l?5==u?713:1114:5==u?104:208)&&(o.crossings[i]=u,-1!==n.indexOf(u)&&(o.starts.push([t,m]),p&&-1!==n.indexOf(u,n.indexOf(u)+1)&&o.starts.push([t,m])))}},{"./constants":416}],430:[function(e,t,A){"use strict";var k=e("@plotly/d3"),M=e("../../lib"),S=e("../../components/drawing"),i=e("../../components/colorscale"),s=e("../../lib/svg_text_utils"),a=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/set_convert"),f=e("../heatmap/plot"),p=e("./make_crossings"),m=e("./find_all_paths"),g=e("./empty_pathinfo"),_=e("./convert_to_constraints"),y=e("./close_boundaries"),E=e("./constants"),v=E.LABELOPTIMIZER;function b(e,t){var n,r,i,a,o,s,l,c,u,d="",h=0,f=e.edgepaths.map(function(e,t){return t}),p=!0;function m(e){return Math.abs(e[0]-t[2][0])<.01}for(;f.length;){for(s=S.smoothopen(e.edgepaths[h],e.smoothing),d+=p?s:s.replace(/^M/,"L"),f.splice(f.indexOf(h),1),n=e.edgepaths[h][e.edgepaths[h].length-1],a=-1,i=0;i<4;i++){if(!n){M.log("Missing end?",h,e);break}for(u=n,Math.abs(u[1]-t[0][1])<.01&&!m(n)?r=t[1]:(c=n,Math.abs(c[0]-t[0][0])<.01?r=t[0]:(l=n,Math.abs(l[1]-t[2][1])<.01?r=t[3]:m(n)&&(r=t[2]))),o=0;o<e.edgepaths.length;o++){var g=e.edgepaths[o][0];Math.abs(n[0]-r[0])<.01?Math.abs(n[0]-g[0])<.01&&0<=(g[1]-n[1])*(r[1]-g[1])&&(r=g,a=o):Math.abs(n[1]-r[1])<.01?Math.abs(n[1]-g[1])<.01&&0<=(g[0]-n[0])*(r[0]-g[0])&&(r=g,a=o):M.log("endpt to newendpt is not vert. or horz.",n,r,g)}if(n=r,0<=a)break;d+="L"+r}if(a===e.edgepaths.length){M.log("unclosed perimeter path");break}h=a,(p=-1===f.indexOf(h))&&(h=f[0],d+="Z")}for(h=0;h<e.paths.length;h++)d+=S.smoothclosed(e.paths[h],e.smoothing);return d}A.plot=function(c,u,e,t){var d=u.xaxis,h=u.yaxis;M.makeTraceGroups(t,e,"contour").each(function(e){var t=k.select(this),n=e[0],r=n.trace,i=n.x,a=n.y,o=r.contours,s=g(o,u,n),l=M.ensureSingle(t,"g","heatmapcoloring"),r=[];"heatmap"===o.coloring&&(r=[e]),f(c,u,r,l),p(s),m(s);r=d.c2p(i[0],!0),l=d.c2p(i[i.length-1],!0),i=h.c2p(a[0],!0),a=h.c2p(a[a.length-1],!0),r=[[r,a],[l,a],[l,i],[r,i]],i=s;"constraint"===o.type&&(i=_(s,o._operation)),function(e,t,n){n=M.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"===n.coloring?[0]:[]);n.enter().append("path"),n.exit().remove(),n.attr("d","M"+t.join("L")+"Z").style("stroke","none")}(t,r,o),function(e,t,n,r){var i="fill"===r.coloring||"constraint"===r.type&&"="!==r._operation,a="M"+n.join("L")+"Z";i&&y(t,r);t=M.ensureSingle(e,"g","contourfill").selectAll("path").data(i?t:[]);t.enter().append("path"),t.exit().remove(),t.each(function(e){e=(e.prefixBoundary?a:"")+b(e,n);e?k.select(this).attr("d",e).style("stroke","none"):k.select(this).remove()})}(t,i,r,o),function(e,t,n,r,i){var a=M.ensureSingle(e,"g","contourlines"),o=!1!==i.showlines,s=i.showlabels,l=o&&s,c=A.createLines(a,o||s,t),u=A.createLineClip(a,l,n,r.trace.uid),d=e.selectAll("g.contourlabels").data(s?[0]:[]);{var h,f,p,m,g,_,y,v,b,x,w,T;d.exit().remove(),d.enter().append("g").classed("contourlabels",!0),s&&(h=[],f=[],M.clearLocationCache(),p=A.labelFormatter(n,r),m=S.tester.append("text").attr("data-notex",1).call(S.font,i.labelfont),g=t[0].xaxis,_=t[0].yaxis,y=g._length,w=_._length,v=g.range,b=_.range,a=M.aggNums(Math.min,null,r.x),e=M.aggNums(Math.max,null,r.x),i=M.aggNums(Math.min,null,r.y),r=M.aggNums(Math.max,null,r.y),a=Math.max(g.c2p(a,!0),0),e=Math.min(g.c2p(e,!0),y),r=Math.max(_.c2p(r,!0),0),i=Math.min(_.c2p(i,!0),w),x={},v[0]<v[1]?(x.left=a,x.right=e):(x.left=e,x.right=a),b[0]<b[1]?(x.top=r,x.bottom=i):(x.top=i,x.bottom=r),x.middle=(x.top+x.bottom)/2,x.center=(x.left+x.right)/2,h.push([[x.left,x.top],[x.right,x.top],[x.right,x.bottom],[x.left,x.bottom]]),w=Math.sqrt(y*y+w*w),T=E.LABELDISTANCE*w/Math.max(1,t.length/E.LABELINCREASE),c.each(function(e){var i=A.calcTextOpts(e.level,p,m,n);k.select(this).selectAll("path").each(function(){var e=M.getVisibleSegment(this,x,i.height/2);if(e&&!(e.len<(i.width+i.height)*E.LABELMIN))for(var t=Math.min(Math.ceil(e.len/T),E.LABELMAX),n=0;n<t;n++){var r=A.findBestTextLocation(this,e,i,f,x);if(!r)break;A.addLabelData(r,i,f,h)}})}),m.remove(),A.drawLabels(d,f,n,u,l?h:null))}s&&!o&&c.remove()}(t,s,c,n,o),function(e,t,n,r,i){var a=r.trace,o=n._fullLayout._clips,s="clip"+a.uid,o=o.selectAll("#"+s).data(a.connectgaps?[]:[0]);o.enter().append("clipPath").classed("contourclip",!0).attr("id",s),o.exit().remove(),!1===a.connectgaps?(r={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:r.x,y:r.y,z:function(e){var t,n,r=e.trace._emptypoints,i=[],a=e.z.length,o=e.z[0].length,s=[];for(t=0;t<o;t++)s.push(1);for(t=0;t<a;t++)i.push(s.slice());for(t=0;t<r.length;t++)n=r[t],i[n[0]][n[1]]=0;return e.zmask=i}(r),smoothing:0},p([r]),m([r]),y([r],{type:"levels"}),M.ensureSingle(o,"path","").attr("d",(r.prefixBoundary?"M"+i.join("L")+"Z":"")+b(r,i))):s=null;S.setClipUrl(e,s,n)}(t,u,c,n,r)})},A.createLines=function(e,t,n){var r=n[0].smoothing,n=e.selectAll("g.contourlevel").data(t?n:[]);return n.exit().remove(),n.enter().append("g").classed("contourlevel",!0),t&&((t=n.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths})).exit().remove(),t.enter().append("path").classed("openline",!0),t.attr("d",function(e){return S.smoothopen(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),(t=n.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths})).exit().remove(),t.enter().append("path").classed("closedline",!0),t.attr("d",function(e){return S.smoothclosed(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")),n},A.createLineClip=function(e,t,n,r){r=t?"clipline"+r:null,t=n._fullLayout._clips.selectAll("#"+r).data(t?[0]:[]);return t.exit().remove(),t.enter().append("clipPath").classed("contourlineclip",!0).attr("id",r),S.setClipUrl(e,r,n),t},A.labelFormatter=function(e,t){var n=e._fullLayout,e=t.trace,t=e.contours,r={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};return t.labelformat?(r.tickformat=t.labelformat,o(r,n)):(e=i.extractOpts(e))&&e.colorbar&&e.colorbar._axis?r=e.colorbar._axis:("constraint"===t.type?(e=t.value,Array.isArray(e)?r.range=[e[0],e[e.length-1]]:r.range=[e,e]):(r.range=[t.start,t.end],r.nticks=(t.end-t.start)/t.size),r.range[0]===r.range[1]&&(r.range[1]+=r.range[0]||1),r.nticks||(r.nticks=1e3),o(r,n),a.prepTicks(r),r._tmin=null,r._tmax=null),function(e){return a.tickText(r,e).text}},A.calcTextOpts=function(e,t,n,r){t=t(e);n.text(t).call(s.convertToTspans,r);r=n.node(),n=S.bBox(r,!0);return{text:t,width:n.width,height:n.height,fontSize:+r.style["font-size"].replace("px",""),level:e,dy:(n.top+n.bottom)/2}},A.findBestTextLocation=function(e,t,n,r,i){for(var a,o,s,l,c=n.width,u=t.isClosed?(o=t.len/v.INITIALSEARCHPOINTS,a=t.min+o/2,t.max):(o=(t.len-c)/(v.INITIALSEARCHPOINTS+1),a=t.min+o+c/2,t.max-(o+c)/2),d=1/0,h=0;h<v.ITERATIONS;h++){for(var f=a;f<u;f+=o){var p=M.getTextLocation(e,t.total,f,c),m=function(e,t,n,r){var i=t.width/2,a=t.height/2,o=e.x,s=e.y,l=e.theta,c=Math.cos(l)*i,e=Math.sin(l)*i,i=(o>r.center?r.right-o:o-r.left)/(c+Math.abs(Math.sin(l)*a)),a=(s>r.middle?r.bottom-s:s-r.top)/(Math.abs(e)+Math.cos(l)*a);if(i<1||a<1)return 1/0;var u=v.EDGECOST*(1/(i-1)+1/(a-1));u+=v.ANGLECOST*l*l;for(var d=o-c,h=s-e,f=o+c,p=s+e,m=0;m<n.length;m++){var g=n[m],_=Math.cos(g.theta)*g.width/2,y=Math.sin(g.theta)*g.width/2,_=2*M.segmentDistance(d,h,f,p,g.x-_,g.y-y,g.x+_,g.y+y)/(t.height+g.height),y=g.level===t.level,g=y?v.SAMELEVELDISTANCE:1;if(_<=g)return 1/0;y=v.NEIGHBORCOST*(y?v.SAMELEVELFACTOR:1);u+=y/(_-g)}return u}(p,n,r,i);m<d&&(d=m,l=p,s=f)}if(d>2*v.MAXCOST)break;h&&(o/=2),u=(a=s-o/2)+1.5*o}if(d<=v.MAXCOST)return l},A.addLabelData=function(e,t,n,r){var i=t.fontSize,a=t.width+i/3,o=Math.max(0,t.height-i/3),s=e.x,l=e.y,i=e.theta,c=Math.sin(i),u=Math.cos(i),e=function(e,t){return[s+e*u-t*c,l+e*c+t*u]},e=[e(-a/2,-o/2),e(-a/2,o/2),e(a/2,o/2),e(a/2,-o/2)];n.push({text:t.text,x:s,y:l,dy:t.dy,theta:i,level:t.level,width:a,height:o}),r.push(e)},A.drawLabels=function(e,t,r,n,i){t=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});if(t.exit().remove(),t.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy,n=e.y-Math.cos(e.theta)*e.dy;k.select(this).text(e.text).attr({x:t,y:n,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+n+")"}).call(s.convertToTspans,r)}),i){for(var a="",o=0;o<i.length;o++)a+="M"+i[o].join("L")+"Z";M.ensureSingle(n,"path","").attr("d",a)}}},{"../../components/colorscale":167,"../../components/drawing":177,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/set_convert":352,"../heatmap/plot":445,"./close_boundaries":414,"./constants":416,"./convert_to_constraints":420,"./empty_pathinfo":422,"./find_all_paths":424,"./make_crossings":429,"@plotly/d3":20}],431:[function(e,t,n){"use strict";var o=e("../../plots/cartesian/axes"),s=e("../../lib");function l(e,t,n){var r={type:"linear",range:[e,t]};return o.autoTicks(r,(t-e)/(n||15)),r}t.exports=function(e,t){var n,r,i,a=e.contours;e.autocontour?(r=e.zmin,i=e.zmax,n=l(r=e.zauto||void 0===r?s.aggNums(Math.min,null,t):r,i=e.zauto||void 0===i?s.aggNums(Math.max,null,t):i,e.ncontours),a.size=n.dtick,a.start=o.tickFirst(n),n.range.reverse(),a.end=o.tickFirst(n),a.start===r&&(a.start+=a.size),a.end===i&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),e._input.contours||(e._input.contours={}),s.extendFlat(e._input.contours,{start:a.start,end:a.end,size:a.size}),e._input.autocontour=!0):"constraint"!==a.type&&(n=a.start,r=a.end,i=e._input.contours,r<n&&(a.start=i.start=r,r=a.end=i.end=n,n=a.start),0<a.size||(e=n===r?1:l(n,r,e.ncontours).dtick,i.size=a.size=e))}},{"../../lib":285,"../../plots/cartesian/axes":331}],432:[function(e,t,n){"use strict";var h=e("@plotly/d3"),f=e("../../components/drawing"),r=e("../heatmap/style"),p=e("./make_color_map");t.exports=function(e){var t=h.select(e).selectAll("g.contour");t.style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t=h.select(this),n=e[0].trace,r=n.contours,i=n.line,a=r.size||1,o=r.start,s="constraint"===r.type,l=!s&&"lines"===r.coloring,e=!s&&"fill"===r.coloring,c=l||e?p(n):null;t.selectAll("g.contourlevel").each(function(e){h.select(this).selectAll("path").call(f.lineGroupStyle,i.width,l?c(e.level):i.color,i.dash)});var u,d=r.labelfont;t.selectAll("g.contourlabels text").each(function(e){f.font(h.select(this),{family:d.family,size:d.size,color:d.color||(l?c(e.level):i.color)})}),s?t.selectAll("g.contourfill path").style("fill",n.fillcolor):e&&(t.selectAll("g.contourfill path").style("fill",function(e){return void 0===u&&(u=e.level),c(e.level+.5*a)}),void 0===u&&(u=o),t.selectAll("g.contourbg path").style("fill",c(u-.5*a)))}),r(e)}},{"../../components/drawing":177,"../heatmap/style":446,"./make_color_map":428,"@plotly/d3":20}],433:[function(e,t,n){"use strict";var l=e("../../components/colorscale/defaults"),c=e("./label_defaults");t.exports=function(e,t,n,r,i){var a,o=n("contours.coloring"),s="";!1!==(a="fill"===o?n("contours.showlines"):a)&&("lines"!==o&&(s=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==o&&(!0!==e.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,l(e,t,r,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),c(n,r,s,i)}},{"../../components/colorscale/defaults":165,"./label_defaults":427}],434:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/attributes"),a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../components/colorscale/attributes"),e=e("../../lib/extend").extendFlat;t.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},r.x,{impliedEdits:{xtype:"array"}}),x0:e({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},r.y,{impliedEdits:{ytype:"array"}}),y0:e({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},r.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},r.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},r.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},r.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},r.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},r.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},r.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z",1),hovertemplate:o(),showlegend:e({},i.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../scatter/attributes":494}],435:[function(e,t,n){"use strict";var C=e("../../registry"),L=e("../../lib"),D=e("../../plots/cartesian/axes"),O=e("../../plots/cartesian/align_period"),P=e("../histogram2d/calc"),R=e("../../components/colorscale/calc"),I=e("./convert_column_xyz"),N=e("./clean_2d_array"),z=e("./interp2d"),F=e("./find_empties"),j=e("./make_bound_array"),B=e("../../constants/numerical").BADNUM;function H(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];i!==B&&t.push(i)}return t}t.exports=function(e,t){var n,r,i,a,o,s,l,c,u,d,h=D.getFromId(e,t.xaxis||"x"),f=D.getFromId(e,t.yaxis||"y"),p=C.traceIs(t,"contour"),m=C.traceIs(t,"histogram"),g=C.traceIs(t,"gl2d"),_=p?"best":t.zsmooth;function y(e){_=t._input.zsmooth=t.zsmooth=!1,L.warn('cannot use zsmooth: "fast": '+e)}if(h._minDtick=0,f._minDtick=0,u=m?(a=(d=P(e,t)).orig_x,n=d.x,r=d.x0,i=d.dx,c=d.orig_y,o=d.y,s=d.y0,l=d.dy,d.z):(E=t.z,L.isArray1D(E)?(I(t,h,f,"x","y",["z"]),n=t._x,o=t._y,E=t._z):(a=t.x?h.makeCalcdata(t,"x"):[],c=t.y?f.makeCalcdata(t,"y"):[],n=O(t,h,"x",a),o=O(t,f,"y",c),t._x=n,t._y=o),r=t.x0,i=t.dx,s=t.y0,l=t.dy,N(E,t,h,f)),(h.rangebreaks||f.rangebreaks)&&(u=function(e,t,n){for(var r=[],i=-1,a=0;a<n.length;a++)if(t[a]!==B){r[++i]=[];for(var o=0;o<n[a].length;o++)e[o]!==B&&r[i].push(n[a][o])}return r}(n,o,u),m||(n=H(n),o=H(o),t._x=n,t._y=o)),m||!p&&!t.connectgaps||(t._emptypoints=F(u),z(u,t._emptypoints)),"fast"===_)if("log"===h.type||"log"===f.type)y("log axis found");else if(!m){if(n.length)for(var v=(n[n.length-1]-n[0])/(n.length-1),b=Math.abs(v/100),x=0;x<n.length-1;x++)if(Math.abs(n[x+1]-n[x]-v)>b){y("x scale is not linear");break}if(o.length&&"fast"===_){var w=(o[o.length-1]-o[0])/(o.length-1),T=Math.abs(w/100);for(x=0;x<o.length-1;x++)if(Math.abs(o[x+1]-o[x]-w)>T){y("y scale is not linear");break}}}var A=L.maxRowLength(u),k="scaled"===t.xtype?"":n,M=j(t,k,r,i,A,h),S="scaled"===t.ytype?"":o,E=j(t,S,s,l,u.length,f);g||(t._extremes[h._id]=D.findExtremes(h,M),t._extremes[f._id]=D.findExtremes(f,E));g={x:M,y:E,z:u,text:t._text||t.text,hovertext:t._hovertext||t.hovertext};return t.xperiodalignment&&a&&(g.orig_x=a),t.yperiodalignment&&c&&(g.orig_y=c),k&&k.length===M.length-1&&(g.xCenter=k),S&&S.length===E.length-1&&(g.yCenter=S),m&&(g.xRanges=d.xRanges,g.yRanges=d.yRanges,g.pts=d.pts),p||R(e,t,{vals:u,cLetter:"z"}),p&&t.contours&&"heatmap"===t.contours.coloring&&(p={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar},g.xfill=j(p,k,r,i,A,h),g.yfill=j(p,S,s,l,u.length,f)),[g]}},{"../../components/colorscale/calc":163,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../../registry":373,"../histogram2d/calc":463,"./clean_2d_array":436,"./convert_column_xyz":438,"./find_empties":440,"./interp2d":443,"./make_bound_array":444}],436:[function(e,t,n){"use strict";var _=e("fast-isnumeric"),y=e("../../lib"),v=e("../../constants/numerical").BADNUM;t.exports=function(e,i,t,n){var r,a,o,s,l;if(i&&i.transpose){for(g=r=0;g<e.length;g++)r=Math.max(r,e[g].length);if(0===r)return!1;o=function(e){return e.length},s=function(e,t,n){return(e[n]||[])[t]}}else r=e.length,o=function(e,t){return e[t].length},s=function(e,t,n){return(e[t]||[])[n]};function c(t){if(i&&"carpet"!==i.type&&"contourcarpet"!==i.type&&t&&"category"===t.type&&i["_"+t._id.charAt(0)].length){var e=t._id.charAt(0),n={},r=i["_"+e+"CategoryMap"]||i[e];for(g=0;g<r.length;g++)n[r[g]]=g;return function(e){e=n[t._categories[e]];return e+1?e:v}}return y.identity}var u=c(t),d=c(n);n&&"category"===n.type&&(r=n._categories.length);for(var h,f,p,m=new Array(r),g=0;g<r;g++)for(a=t&&"category"===t.type?t._categories.length:o(e,g),m[g]=new Array(a),l=0;l<a;l++)m[g][l]=function(e){if(_(e))return+e}((h=e,f=d(g),p=u(l),f===v||p===v?v:s(h,f,p)));return m}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],437:[function(e,t,n){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],438:[function(e,t,n){"use strict";var E=e("../../lib"),C=e("../../constants/numerical").BADNUM,L=e("../../plots/cartesian/align_period");t.exports=function(e,t,n,r,i,a){for(var o,s,l=e._length,c=t.makeCalcdata(e,r),u=n.makeCalcdata(e,i),c=L(e,t,r,c),u=L(e,n,i,u),d=e.text,h=void 0!==d&&E.isArray1D(d),f=e.hovertext,p=void 0!==f&&E.isArray1D(f),m=E.distinctVals(c),g=m.vals,_=E.distinctVals(u),y=_.vals,v=[],b=y.length,x=g.length,w=0;w<a.length;w++)v[w]=E.init2dArray(b,x);h&&(o=E.init2dArray(b,x)),p&&(s=E.init2dArray(b,x));var T=E.init2dArray(b,x);for(w=0;w<l;w++)if(c[w]!==C&&u[w]!==C){for(var A=E.findBin(c[w]+m.minDiff/2,g),k=E.findBin(u[w]+_.minDiff/2,y),M=0;M<a.length;M++){var S=e[a[M]];v[M][k][A]=S[w],T[k][A]=w}h&&(o[k][A]=d[w]),p&&(s[k][A]=f[w])}for(e["_"+r]=g,e["_"+i]=y,M=0;M<a.length;M++)e["_"+a[M]]=v[M];h&&(e._text=o),p&&(e._hovertext=s),t&&"category"===t.type&&(e["_"+r+"CategoryMap"]=g.map(function(e){return t._categories[e]})),n&&"category"===n.type&&(e["_"+i+"CategoryMap"]=y.map(function(e){return n._categories[e]})),e._after2before=T}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328}],439:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("./xyz_defaults"),s=e("../scatter/period_defaults"),l=e("./style_defaults"),c=e("../../components/colorscale/defaults"),u=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return a.coerce(n,r,u,e,t)}o(n,r,i,t)?(s(n,r,t,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),l(n,r,i,t),i("hoverongaps"),i("connectgaps",a.isArray1D(r.z)&&!1!==r.zsmooth),c(n,r,t,i,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":165,"../../lib":285,"../scatter/period_defaults":514,"./attributes":434,"./style_defaults":447,"./xyz_defaults":448}],440:[function(e,t,n){"use strict";var g=e("../../lib").maxRowLength;t.exports=function(e){for(var t,n,r,i,a,o,s,l=[],c={},u=[],d=e[0],h=[],f=[0,0,0],p=g(e),m=0;m<e.length;m++)for(t=h,h=d,d=e[m+1]||[],n=0;n<p;n++)void 0===h[n]&&((a=(void 0!==h[n-1]?1:0)+(void 0!==h[n+1]?1:0)+(void 0!==t[n]?1:0)+(void 0!==d[n]?1:0))?(0===m&&a++,0===n&&a++,m===e.length-1&&a++,n===h.length-1&&a++,a<4&&(c[[m,n]]=[m,n,a]),l.push([m,n,a])):u.push([m,n]));for(;u.length;){for(s=!(o={}),i=u.length-1;0<=i;i--)(a=((c[[(m=(r=u[i])[0])-1,n=r[1]]]||f)[2]+(c[[m+1,n]]||f)[2]+(c[[m,n-1]]||f)[2]+(c[[m,n+1]]||f)[2])/20)&&(o[r]=[m,n,a],u.splice(i,1),s=!0);if(!s)throw"findEmpties iterated with no new neighbors";for(r in o)c[r]=o[r],l.push(o[r])}return l.sort(function(e,t){return t[2]-e[2]})}},{"../../lib":285}],441:[function(e,t,n){"use strict";var E=e("../../components/fx"),C=e("../../lib"),L=e("../../plots/cartesian/axes"),D=e("../../components/colorscale").extractOpts;t.exports=function(t,e,n,r,i){var a,o,s,l,c=(i=i||{}).isContour,u=t.cd[0],d=u.trace,h=t.xa,f=t.ya,p=u.x,m=u.y,g=u.z,_=u.xCenter,y=u.yCenter,v=u.zmask,b=d.zhoverformat,x=p,w=m;if(!1!==t.index){try{s=Math.round(t.index[1]),l=Math.round(t.index[0])}catch(e){return void C.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index)}if(s<0||s>=g[0].length||l<0||l>g.length)return}else{if(0<E.inbox(e-p[0],e-p[p.length-1],0)||0<E.inbox(n-m[0],n-m[m.length-1],0))return;if(c){for(var x=[2*p[0]-p[1]],T=1;T<p.length;T++)x.push((p[T]+p[T-1])/2);for(x.push([2*p[p.length-1]-p[p.length-2]]),w=[2*m[0]-m[1]],T=1;T<m.length;T++)w.push((m[T]+m[T-1])/2);w.push([2*m[m.length-1]-m[m.length-2]])}s=Math.max(0,Math.min(x.length-2,C.findBin(e,x))),l=Math.max(0,Math.min(w.length-2,C.findBin(n,w)))}var A,k,M=h.c2p(p[s]),i=h.c2p(p[s+1]),e=f.c2p(m[l]),n=f.c2p(m[l+1]);c?(A=u.orig_x||p,k=u.orig_y||m,i=M,a=A[s],n=e,o=k[l]):(A=u.orig_x||_||p,k=u.orig_y||y||m,a=_?A[s]:(A[s]+A[s+1])/2,o=y?k[l]:(k[l]+k[l+1])/2,h&&"category"===h.type&&(a=p[s]),f&&"category"===f.type&&(o=m[l]),d.zsmooth&&(M=i=h.c2p(a),e=n=f.c2p(o)));var S,g=g[l][s];if(void 0!==(g=v&&!v[l][s]?void 0:g)||d.hoverongaps){Array.isArray(u.hovertext)&&Array.isArray(u.hovertext[l])?S=u.hovertext[l][s]:Array.isArray(u.text)&&Array.isArray(u.text[l])&&(S=u.text[l][s]);u=D(d),h={type:"linear",range:[u.min,u.max],hoverformat:b,_separators:h._separators,_numFormat:h._numFormat},h=L.tickText(h,g,"hover").text;return[C.extendFlat(t,{index:d._after2before?d._after2before[l][s]:[l,s],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:M,x1:i,y0:e,y1:n,xLabelVal:a,yLabelVal:o,zLabelVal:g,zLabel:h,text:S})]}}},{"../../components/colorscale":167,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],442:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":434,"./calc":435,"./colorbar":437,"./defaults":439,"./hover":441,"./plot":445,"./style":446}],443:[function(e,t,n){"use strict";var a=e("../../lib"),g=[[-1,0],[1,0],[0,-1],[0,1]];function o(e,t,n){for(var r,i,a,o,s,l,c,u,d,h,f,p=0,m=0;m<t.length;m++){for(r=(d=t[m])[0],i=d[1],d=e[r][i],a=c=u=0;a<4;a++)(s=e[r+(o=g[a])[0]])&&void 0!==(l=s[i+o[1]])&&(0===u?h=f=l:(h=Math.min(h,l),f=Math.max(f,l)),c++,u+=l);if(0===c)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][i]=u/c,void 0===d?c<4&&(p=1):(e[r][i]=(1+n)*e[r][i]-n*d,h<f&&(p=Math.max(p,Math.abs(e[r][i]-d)/(f-h))))}return p}t.exports=function(e,t){var n,r,i=1;for(o(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&.01<i;n++)i=o(e,t,(r=i,.5-.25*Math.min(1,.5*r)));return.01<i&&a.log("interp2d didn't converge quickly",i),e}},{"../../lib":285}],444:[function(e,t,n){"use strict";var g=e("../../registry"),_=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r,i,a){var o,s=[],l=g.traceIs(e,"contour"),c=g.traceIs(e,"histogram"),u=g.traceIs(e,"gl2d");if(_(t)&&1<t.length&&!c&&"category"!==a.type){var d=t.length;if(!(d<=i))return l?t.slice(0,i):t.slice(0,i+1);if(l||u)s=t.slice(0,i);else if(1===i)s=[t[0]-.5,t[0]+.5];else{for(s=[1.5*t[0]-.5*t[1]],p=1;p<d;p++)s.push(.5*(t[p-1]+t[p]));s.push(1.5*t[d-1]-.5*t[d-2])}if(d<i)for(var h=s[s.length-1],f=h-s[s.length-2],p=d;p<i;p++)s.push(h+=f)}else{var m,e=e[a._id.charAt(0)+"calendar"];for(m=c?a.r2c(n,0,e):_(t)&&1===t.length?t[0]:void 0===n?0:("log"===a.type?a.d2c:a.r2c)(n,0,e),o=r||1,p=l||u?0:-.5;p<i;p++)s.push(m+o*p)}return s}},{"../../lib":285,"../../registry":373}],445:[function(e,t,n){"use strict";var ce=e("@plotly/d3"),ue=e("tinycolor2"),de=e("../../registry"),he=e("../../lib"),fe=e("../../components/colorscale").makeColorScaleFuncFromTrace,pe=e("../../constants/xmlns_namespaces");function me(e,t){var n=t.length-2,r=he.constrain(he.findBin(e,t),0,n),i=t[r],t=t[r+1],e=he.constrain(r+(e-i)/(t-i)-.5,0,n),t=Math.round(e),i=Math.abs(e-t);return e&&e!==n&&i?{bin0:t,frac:i,bin1:Math.round(t+i/(e-t))}:{bin0:t,bin1:t,frac:0}}function ge(e,t){var n=t.length-1,r=he.constrain(he.findBin(e,t),0,n),n=t[r],n=(e-n)/(t[r+1]-n)||0;return n<=0?{bin0:r,bin1:r,frac:0}:n<.5?{bin0:r,bin1:r+1,frac:n}:{bin0:r+1,bin1:r,frac:1-n}}function _e(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}t.exports=function(oe,e,t,n){var se=e.xaxis,le=e.yaxis;he.makeTraceGroups(n,t,"hm").each(function(e){var t,n,r,i,a,o=ce.select(this),s=e[0],l=s.trace,c=s.z,u=s.x,d=s.y,h=s.xCenter,f=s.yCenter,p=de.traceIs(l,"contour"),m=p?"best":l.zsmooth,g=c.length,_=he.maxRowLength(c),y=!1,v=!1;for($=0;void 0===n&&$<u.length-1;)n=se.c2p(u[$]),$++;for($=u.length-1;void 0===r&&0<$;)r=se.c2p(u[$]),$--;for(r<n&&(t=r,r=n,n=t,y=!0),$=0;void 0===i&&$<d.length-1;)i=le.c2p(d[$]),$++;for($=d.length-1;void 0===a&&0<$;)a=le.c2p(d[$]),$--;a<i&&(t=i,i=a,a=t,v=!0),p&&(h=u,f=d,u=s.xfill,d=s.yfill),"fast"!==m&&(T="best"===m?0:.5,n=Math.max(-T*se._length,n),r=Math.min((1+T)*se._length,r),i=Math.max(-T*le._length,i),a=Math.min((1+T)*le._length,a));var b=Math.round(r-n),x=Math.round(a-i);if(b<=0||x<=0)o.selectAll("image").data([]).exit().remove();else{var w,s="fast"===m?(w=_,g):(w=b,x),T=document.createElement("canvas");T.width=w,T.height=s;var A,k,M,S,E,C=T.getContext("2d"),L=fe(l,{noNumericCheck:!0,returnArray:!0}),D="fast"===m?(A=y?function(e){return _-1-e}:he.identity,v?function(e){return g-1-e}:he.identity):(A=function(e){return he.constrain(Math.round(se.c2p(u[e])-n),0,b)},function(e){return he.constrain(Math.round(le.c2p(d[e])-i),0,x)}),s=D(0),O=[s,s],P=y?0:1,R=v?0:1,I=0,N=0,z=0,F=0;if(m){var j,B=0;try{j=new Uint8Array(b*x*4)}catch(e){j=new Array(b*x*4)}if("best"===m){for(var H,U,V,q=h||u,Y=f||d,G=new Array(q.length),W=new Array(Y.length),X=new Array(b),Z=h?ge:me,J=f?ge:me,$=0;$<q.length;$++)G[$]=Math.round(se.c2p(q[$])-n);for($=0;$<Y.length;$++)W[$]=Math.round(le.c2p(Y[$])-i);for($=0;$<b;$++)X[$]=Z($,G);for(ee=0;ee<x;ee++)for(U=c[(H=J(ee,W)).bin0],V=c[H.bin1],$=0;$<b;$++,B+=4)_e(j,B,E=function(e,t,n,r){var i=e[n.bin0];if(void 0===i)return ae(void 0,1);var a=e[n.bin1],e=t[n.bin0],t=t[n.bin1],t=void 0===a?void 0===t?0:void 0===e?2*(t-i):2*(2*t-e-i)/3:void 0===t?void 0===e?0:2*(2*i-a-e)/3:void 0===e?2*(2*t-a-i)/3:t+i-a-e;return ae(i+n.frac*(a-i||0)+r.frac*((e-i||0)+n.frac*t))}(U,V,X[$],H))}else for(ee=0;ee<g;ee++)for(S=c[ee],O=D(ee),$=0;$<b;$++)E=ae(S[$],1),_e(j,B=4*(O*b+A($)),E);f=C.createImageData(b,x);try{f.data.set(j)}catch(e){for(var Q=f.data,K=Q.length,ee=0;ee<K;ee++)Q[ee]=j[ee]}C.putImageData(f,0,0)}else{var te=l.xgap,ne=l.ygap,re=Math.floor(te/2),ie=Math.floor(ne/2);for(ee=0;ee<g;ee++)if(S=c[ee],O.reverse(),O[R]=D(ee+1),O[0]!==O[1]&&void 0!==O[0]&&void 0!==O[1])for(k=[M=A(0),M],$=0;$<_;$++)k.reverse(),k[P]=A($+1),k[0]!==k[1]&&void 0!==k[0]&&void 0!==k[1]&&(E=ae(S[$],(k[1]-k[0])*(O[1]-O[0])),C.fillStyle="rgba("+E.join(",")+")",C.fillRect(k[0]+re,O[0]+ie,k[1]-k[0]-te,O[1]-O[0]-ne))}N=Math.round(N/I),z=Math.round(z/I),F=Math.round(F/I),l=ue("rgb("+N+","+z+","+F+")");oe._hmpixcount=(oe._hmpixcount||0)+I,oe._hmlumcount=(oe._hmlumcount||0)+I*l.getLuminance();e=o.selectAll("image").data(e);e.enter().append("svg:image").attr({xmlns:pe.svg,preserveAspectRatio:"none"}),e.attr({height:x,width:b,x:n,y:i,"xlink:href":T.toDataURL("image/png")})}function ae(e,t){if(void 0===e)return[0,0,0,0];e=L(e);return e[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e[2]=Math.round(e[2]),I+=t,N+=e[0]*t,z+=e[1]*t,F+=e[2]*t,e}})}},{"../../components/colorscale":167,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"@plotly/d3":20,tinycolor2:119}],446:[function(e,t,n){"use strict";var r=e("@plotly/d3");t.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{"@plotly/d3":20}],447:[function(e,t,n){"use strict";t.exports=function(e,t,n){!1===n("zsmooth")&&(n("xgap"),n("ygap")),n("zhoverformat")}},{}],448:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),h=e("../../lib"),f=e("../../registry");function p(e,t){var n=t(e);return"scaled"===(n?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),n}t.exports=function(e,t,n,r,i,a){var o=n("z");if(i=i||"x",a=a||"y",void 0===o||!o.length)return 0;if(h.isArray1D(e.z)){var s=n(i),l=n(a),c=h.minRowLength(s),u=h.minRowLength(l);if(0===c||0===u)return 0;t._length=Math.min(c,u,o.length)}else{if(s=p(i,n),l=p(a,n),!function(e){for(var t,n=!0,r=!1,i=!1,a=0;a<e.length;a++){if(t=e[a],!h.isArrayOrTypedArray(t)){n=!1;break}0<t.length&&(r=!0);for(var o=0;o<t.length;o++)if(d(t[o])){i=!0;break}}return n&&r&&i}(o))return 0;n("transpose"),t._length=null}return"heatmapgl"===e.type||f.getComponentMethod("calendars","handleTraceDefaults")(e,t,[i,a],r),!0}},{"../../lib":285,"../../registry":373,"fast-isnumeric":31}],449:[function(e,t,n){"use strict";var r=e("../bar/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").hovertemplateAttrs,o=e("./bin_attributes"),s=e("./constants"),e=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:i("x"),yhoverformat:i("y"),text:e({},r.text,{}),hovertext:e({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({},{keys:s.eventDataKeys}),marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"./bin_attributes":451,"./constants":455}],450:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=e.length,r=0,i=0;i<n;i++)t[i]?(e[i]/=t[i],r+=e[i]):e[i]=null;return r}},{}],451:[function(e,t,n){"use strict";t.exports=function(e,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],452:[function(e,t,n){"use strict";var a=e("fast-isnumeric");t.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,r){t=r[t];return a(t)?(t=Number(t),n[e]+=t,t):0},avg:function(e,t,n,r,i){t=r[t];return a(t)&&(t=Number(t),n[e]+=t,i[e]++),0},min:function(e,t,n,r){r=r[t];if(a(r)){if(r=Number(r),!a(n[e]))return n[e]=r;if(n[e]>r){t=r-n[e];return n[e]=r,t}}return 0},max:function(e,t,n,r){r=r[t];if(a(r)){if(r=Number(r),!a(n[e]))return n[e]=r;if(n[e]<r){t=r-n[e];return n[e]=r,t}}return 0}}},{"fast-isnumeric":31}],453:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),h=r.ONEAVGYEAR,i=r.ONEAVGMONTH,f=r.ONEDAY,a=r.ONEHOUR,o=r.ONEMIN,s=r.ONESEC,p=e("../../plots/cartesian/axes").tickIncrement;function m(e,t,n,r){if(e*t<=0)return 1/0;for(var i=Math.abs(t-e),a="date"===n.type,o=c(i,a),s=0;s<10;s++){var l=c(80*o,a);if(o===l)break;if(!function(e,t,n,r,i,a){if(r&&f<e){r=u(t,i,a),i=u(n,i,a),a=e===h?0:1;return r[a]!==i[a]}return.1<Math.floor(n/e)-Math.floor(t/e)}(l,e,t,a,n,r))break;o=l}return o}function c(e,t){return t&&s<e?f<e?1.1*h<e?h:1.1*i<e?i:f:a<e?a:o<e?o:s:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function u(e,t,n){n=t.c2d(e,h,n).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}t.exports=function(i,e,t,a,o){var r,n=-1.1*e,s=-.1*e,l=i-s,e=t[0],t=t[1],l=Math.min(m(e+s,e+l,a,o),m(t+s,t+l,a,o)),s=Math.min(m(e+n,e+s,a,o),m(t+n,t+s,a,o)),c=s<l&&s<Math.abs(t-e)/4e3?(r=l,!1):(r=Math.min(l,s),!0);if("date"===a.type&&f<r){var u=r===h?1:6,d=r===h?"M12":"M1";return function(e,t){var n=a.c2d(e,h,o),r=n.indexOf("-",u);0<r&&(n=n.substr(0,r));r=a.d2c(n,0,o);return r<e&&((r+(n=p(r,d,!1,o)))/2<e+i&&(r=n)),t&&c?p(r,d,!0,o):r}}return function(e,t){var n=r*Math.round(e/r);return n+r/10<e&&n+.9*r<e+i&&(n+=r),t&&c&&(n-=r),n}}},{"../../constants/numerical":265,"../../plots/cartesian/axes":331}],454:[function(e,t,n){"use strict";var V=e("fast-isnumeric"),q=e("../../lib"),M=e("../../registry"),Y=e("../../plots/cartesian/axes"),G=e("../bar/arrays_to_calcdata"),W=e("./bin_functions"),X=e("./norm_functions"),Z=e("./average"),J=e("./bin_label_vals");function $(e,t,n,r,i){var a=r+"bins",o=e._fullLayout,s=t["_"+r+"bingroup"],l=o._histogramBinOpts[s],c="overlay"===o.barmode,s=function(e){return n.r2c(e,0,x)},o=function(e){return n.c2r(e,0,x)},u="date"===n.type?function(e){return e||0===e?q.cleanDate(e,null,x):null}:function(e){return V(e)?Number(e):null};function d(e,t,n){t[e+"Found"]?(t[e]=u(t[e]),null===t[e]&&(t[e]=n[e])):(T[e]=t[e]=n[e],q.nestedProperty(m[0],a+"."+e).set(n[e]))}if(t["_"+r+"autoBinFinished"])delete t["_"+r+"autoBinFinished"];else{for(var h,f,p,m=l.traces,g=[],_=!0,y=!1,v=!1,b=0;b<m.length;b++)(p=m[b]).visible&&(f=p["_"+(h=l.dirs[b])+"pos0"]=n.makeCalcdata(p,h),g=q.concat(g,f),delete p["_"+r+"autoBinFinished"],!0===t.visible&&(_?_=!1:(delete p._autoBin,p["_"+r+"autoBinFinished"]=1),M.traceIs(p,"2dMap")&&(y=!0),"histogram2dcontour"===p.type&&(v=!0)));var x=m[0][r+"calendar"],w=Y.autoBin(g,n,l.nbins,y,x,l.sizeFound&&l.size),T=(m[0]._autoBin={})[l.dirs[0]]={};if(v&&(l.size||(w.start=o(Y.tickIncrement(s(w.start),w.size,!0,x))),void 0===l.end&&(w.end=o(Y.tickIncrement(s(w.end),w.size,!1,x)))),c&&!M.traceIs(t,"2dMap")&&0===w._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(i)return[w,f,!0];w=function(e,t,n,r,i){var a,o,s,l=e._fullLayout,c=function(e,t){for(var n=t.xaxis,r=t.yaxis,i=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===n&&l.yaxis===r&&a.push(l)}return a}(e,t),u=!1,d=1/0,h=[t];for(a=0;a<c.length;a++){var f,p,m;(o=c[a])===t?u=!0:u?(f=$(e,o,n,r,!0),p=f[0],m=f[2],o["_"+r+"autoBinFinished"]=1,o["_"+r+"pos0"]=f[1],m?h.push(o):d=Math.min(d,p.size)):(s=l._histogramBinOpts[o["_"+r+"bingroup"]],d=Math.min(d,s.size||o[i].size))}var g=new Array(h.length);for(a=0;a<h.length;a++)for(var _=h[a]["_"+r+"pos0"],y=0;y<_.length;y++)if(void 0!==_[y]){g[a]=_[y];break}isFinite(d)||(d=q.distinctVals(g).minDiff);for(a=0;a<h.length;a++){var v=(o=h[a])[r+"calendar"],v={start:n.c2r(g[a]-d/2,0,v),end:n.c2r(g[a]+d/2,0,v),size:d};o._input[i]=o[i]=v,(s=l._histogramBinOpts[o["_"+r+"bingroup"]])&&q.extendFlat(s,v)}return t[i]}(e,t,n,r,a)}(A=p.cumulative||{}).enabled&&"include"!==A.currentbin&&("decreasing"===A.direction?w.start=o(Y.tickIncrement(s(w.start),w.size,!0,x)):w.end=o(Y.tickIncrement(s(w.end),w.size,!1,x))),l.size=w.size,l.sizeFound||(T.size=w.size,q.nestedProperty(m[0],a+".size").set(w.size)),d("start",l,w),d("end",l,w)}f=t["_"+r+"pos0"],delete t["_"+r+"pos0"];var e=t._input[a]||{},A=q.extendFlat({},l),o=l.start,s=n.r2l(e.start),w=void 0!==s;(l.startFound||w)&&s!==n.r2l(o)&&(s=w?s:q.aggNums(Math.min,null,f),k={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:l.size,tick0:o,calendar:x,range:[s,Y.tickIncrement(s,l.size,!1,x)].map(n.l2r)},(k=Y.tickFirst(k))>n.r2l(s)&&(k=Y.tickIncrement(k,l.size,!0,x)),A.start=n.l2r(k),w||q.nestedProperty(t,a+".start").set(A.start));var k=l.end,w=n.r2l(e.end),e=void 0!==w;(l.endFound||e)&&w!==n.r2l(k)&&(w=e?w:q.aggNums(Math.max,null,f),A.end=n.l2r(w),e||q.nestedProperty(t,a+".start").set(A.end));e="autobin"+r;return!1===t._input[e]&&(t._input[a]=q.extendFlat({},t[a]||{}),delete t._input[e],delete t[e]),[A,f]}t.exports={calc:function(r,e){var t,n,i=[],a=[],o=Y.getFromId(r,"h"===e.orientation?e.yaxis:e.xaxis),s={x:"y",y:"x"}[E="h"===e.orientation?"y":"x"],l=e[E+"calendar"],c=e.cumulative,u=(k=$(r,e,o,E))[0],d=k[1],h="string"==typeof u.size,f=[],p=h?f:u,m=[],g=[],_=[],y=0,v=e.histnorm,b=e.histfunc,x=-1!==v.indexOf("density");c.enabled&&x&&(v=v.replace(/ ?density$/,""),x=!1);var w,T="max"===b||"min"===b?null:0,A=W.count,k=X[v],M=!1,v=function(e){return o.r2c(e,0,l)};for(q.isArrayOrTypedArray(e[s])&&"count"!==b&&(w=e[s],M="avg"===b,A=W[b]),I=v(u.start),n=v(u.end)+(I-Y.tickIncrement(I,u.size,!1,l))/1e6;I<n&&i.length<1e6&&(t=Y.tickIncrement(I,u.size,!1,l),i.push((I+t)/2),a.push(T),_.push([]),f.push(I),x&&m.push(1/(t-I)),M&&g.push(0),!(t<=I));)I=t;f.push(I),h||"date"!==o.type||(p={start:v(p.start),end:v(p.end),size:p.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var S=e["_"+E+"bingroup"],E={leftGap:1/0,rightGap:1/0};S&&(r._fullLayout._roundFnOpts[S]||(r._fullLayout._roundFnOpts[S]=E),E=r._fullLayout._roundFnOpts[S]);for(var C,L=a.length,D=!0,O=E.leftGap,P=E.rightGap,R={},I=0;I<d.length;I++){var N,z=d[I];0<=(N=q.findBin(z,p))&&N<L&&(y+=A(N,I,a,w,g),D&&_[N].length&&z!==d[_[N][0]]&&(D=!1),_[N].push(I),R[I]=N,O=Math.min(O,z-f[N]),P=Math.min(P,f[N+1]-z))}E.leftGap=O,E.rightGap=P,D||(C=function(t,n){return function(){var e=r._fullLayout._roundFnOpts[S];return J(e.leftGap,e.rightGap,f,o,l)(t,n)}}),M&&(y=Z(a,g)),k&&k(a,y,m),c.enabled&&function(t,e,n){var r,i,a;function o(e){a=t[e],t[e]/=2}function s(e){i=t[e],t[e]=a+i/2,a+=i}if("half"===n)if("increasing"===e)for(o(0),r=1;r<t.length;r++)s(r);else for(o(t.length-1),r=t.length-2;0<=r;r--)s(r);else if("increasing"===e){for(r=1;r<t.length;r++)t[r]+=t[r-1];"exclude"===n&&(t.unshift(0),t.pop())}else{for(r=t.length-2;0<=r;r--)t[r]+=t[r+1];"exclude"===n&&(t.push(0),t.shift())}}(a,c.direction,c.currentbin);var F,j=Math.min(i.length,a.length),B=[],H=0,U=j-1;for(I=0;I<j;I++)if(a[I]){H=I;break}for(I=j-1;H<=I;I--)if(a[I]){U=I;break}for(I=H;I<=U;I++)V(i[I])&&V(a[I])&&(F={p:i[I],s:a[I],b:0},c.enabled||(F.pts=_[I],D?F.ph0=F.ph1=_[I].length?d[_[I][0]]:i[I]:(e._computePh=!0,F.ph0=C(f[I]),F.ph1=C(f[I+1],!0))),B.push(F));return 1===B.length&&(B[0].width1=Y.tickIncrement(B[0].p,u.size,!1,l)-B[0].p),G(B,e),q.isArrayOrTypedArray(e.selectedpoints)&&q.tagSelected(B,e,R),B},calcAllAutoBins:$}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"../bar/arrays_to_calcdata":382,"./average":450,"./bin_functions":452,"./bin_label_vals":453,"./norm_functions":461,"fast-isnumeric":31}],455:[function(e,t,n){"use strict";t.exports={eventDataKeys:["binNumber"]}},{}],456:[function(e,t,n){"use strict";var S=e("../../lib"),E=e("../../plots/cartesian/axis_ids"),C=e("../../registry").traceIs,L=e("../bar/defaults").handleGroupingDefaults,D=S.nestedProperty,O=e("../../plots/cartesian/constraints").getAxisGroup,P=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],R=["x","y"];t.exports=function(e,l){var t,c=l._histogramBinOpts={},n=[],r={},i=[];function a(e,t){return S.coerce(p._input,p,p._module.attributes,e,t)}function o(e){return"v"===e.orientation?"x":"y"}function s(e,t,n){var r=e.uid+"__"+n;t=t||r;var i=E.getFromTrace({_fullLayout:l},e,n).type,a=e[n+"calendar"]||"",o=c[t],s=!0;o&&(i===o.axType&&a===o.calendar?(s=!1,o.traces.push(e),o.dirs.push(n)):(t=r,i!==o.axType&&S.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+i,"axis","with bins on","type:"+o.axType,"axis."].join(" ")),a!==o.calendar&&S.warn(["Attempted to group the bins of trace",e.index,"set with a",a,"calendar","with bins",o.calendar?"on a "+o.calendar+" calendar":"w/o a set calendar"].join(" ")))),s&&(c[t]={traces:[e],dirs:[n],axType:i,calendar:e[n+"calendar"]||""}),e["_"+n+"bingroup"]=t}for(d=0;d<e.length;d++)p=e[d],C(p,"histogram")&&(n.push(p),delete p._xautoBinFinished,delete p._yautoBinFinished,C(p,"2dMap")||L(p._input,p,l,a));for(var u=l._alignmentOpts||{},d=0;d<n.length;d++){var h,f,p=n[d],m="";C(p,"2dMap")||(f=o(p),"group"===l.barmode&&p.alignmentgroup&&(h=p[f+"axis"],(u[h=O(l,h)+p.orientation]||{})[p.alignmentgroup]&&(m=h)),m||"overlay"===l.barmode||(m=O(l,p.xaxis)+O(l,p.yaxis)+o(p))),m?(r[m]||(r[m]=[]),r[m].push(p)):i.push(p)}for(m in r)if(1!==(x=r[m]).length){var g=!1;for(x.length&&(p=x[0],g=a("bingroup")),m=g||m,d=0;d<x.length;d++){var _=(p=x[d])._input.bingroup;_&&_!==m&&S.warn(["Trace",p.index,"must match","within bingroup",m+".","Ignoring its bingroup:",_,"setting."].join(" ")),p.bingroup=m,s(p,m,o(p))}}else i.push(x[0]);for(d=0;d<i.length;d++){p=i[d];var y=a("bingroup");if(C(p,"2dMap"))for(t=0;t<2;t++){var v=a((f=R[t])+"bingroup",y?y+"__"+f:null);s(p,v,f)}else s(p,y,o(p))}for(m in c)for(var b=c[m],x=b.traces,w=0;w<P.length;w++){var T,A,k=P[w],M=k.name;if("nbins"!==M||!b.sizeFound){for(d=0;d<x.length;d++){if(p=x[d],f=b.dirs[d],T=k.aStr[f],void 0!==D(p._input,T).get()){b[M]=a(T),b[M+"Found"]=!0;break}(A=(p._autoBin||{})[f]||{})[M]&&D(p,T).set(A[M])}if("start"===M||"end"===M)for(;d<x.length;d++)(p=x[d])["_"+f+"bingroup"]&&a(T,(A=(p._autoBin||{})[f]||{})[M]);"nbins"!==M||b.sizeFound||b.nbinsFound||(p=x[0],b[M]=a(T))}}}},{"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/cartesian/constraints":339,"../../registry":373,"../bar/defaults":387}],457:[function(e,t,n){"use strict";var c=e("../../registry"),u=e("../../lib"),d=e("../../components/color"),h=e("../bar/style_defaults"),f=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return u.coerce(n,r,f,e,t)}var a=i("x"),o=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var s=i("orientation",o&&!a?"h":"v"),l="v"===s?"x":"y",s="v"===s?"y":"x",o=a&&o?Math.min(u.minRowLength(a)&&u.minRowLength(o)):u.minRowLength(r[l]||[]);o?(r._length=o,c.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],t),r[s]&&i("histfunc"),i("histnorm"),i("autobin"+l),h(n,r,i,e,t),u.coerceSelectionMarkerOpacity(r,i),e=(r.marker.line||{}).color,(t=c.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||d.defaultLine,{axis:"y"}),t(n,r,e||d.defaultLine,{axis:"x",inherit:"y"})):r.visible=!1}},{"../../components/color":155,"../../lib":285,"../../registry":373,"../bar/style_defaults":398,"./attributes":449}],458:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var a=Array.isArray(i)?r[0].pts[i[0]][i[1]]:r[i].pts;if(e.pointNumbers=a,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints)for(var o=[],s=0;s<a.length;s++)o=o.concat(n._indexToPoints[a[s]]);else o=a;e.pointIndices=o}return e}},{}],459:[function(e,t,n){"use strict";var a=e("../bar/hover").hoverPoints,o=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,r,i){t=a(e,t,n,r,i);if(t){n=(e=t[0]).cd[e.index],r=e.cd[0].trace;return r.cumulative.enabled||(e[(i="h"===r.orientation?"y":"x")+"Label"]=o(e[i+"a"],[n.ph0,n.ph1],r[i+"hoverformat"])),t}}},{"../../plots/cartesian/axes":331,"../bar/hover":390}],460:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../bar/cross_trace_calc":386,"../bar/layout_attributes":392,"../bar/layout_defaults":393,"../bar/plot":394,"../bar/select":395,"../bar/style":397,"../scatter/marker_colorbar":512,"./attributes":449,"./calc":454,"./cross_trace_defaults":456,"./defaults":457,"./event_data":458,"./hover":459}],461:[function(e,t,n){"use strict";t.exports={percent:function(e,t){for(var n=e.length,r=100/t,i=0;i<n;i++)e[i]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var i=e.length;r=r||1;for(var a=0;a<i;a++)e[a]*=n[a]*r},"probability density":function(e,t,n,r){var i=e.length;r&&(t/=r);for(var a=0;a<i;a++)e[a]*=n[a]/t}}},{}],462:[function(e,t,n){"use strict";var r=e("../histogram/attributes"),i=e("../histogram/bin_attributes"),a=e("../heatmap/attributes"),o=e("../../plots/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../components/colorscale/attributes"),e=e("../../lib/extend").extendFlat;t.exports=e({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:i("x"),nbinsy:r.nbinsy,ybins:i("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:e({},r.bingroup,{}),xbingroup:e({},r.bingroup,{}),ybingroup:e({},r.bingroup,{}),xgap:a.xgap,ygap:a.ygap,zsmooth:a.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:l({},{keys:"z"}),showlegend:e({},o.showlegend,{dflt:!1})},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../heatmap/attributes":434,"../histogram/attributes":449,"../histogram/bin_attributes":451}],463:[function(e,t,n){"use strict";var re=e("../../lib"),ie=e("../../plots/cartesian/axes"),ae=e("../histogram/bin_functions"),oe=e("../histogram/norm_functions"),se=e("../histogram/average"),d=e("../histogram/bin_label_vals"),le=e("../histogram/calc").calcAllAutoBins;function ce(e,t,n,r){var i=new Array(e);if(r)for(o=0;o<e;o++)i[o]=1/(t[o+1]-t[o]);else for(var a=1/n,o=0;o<e;o++)i[o]=a;return i}function ue(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function de(e,t,n,r,i,a){for(var o=e.length-1,s=new Array(o),l=d(n,r,e,i,a),c=0;c<o;c++){var u=(t||[])[c];s[c]=void 0===u?[l(e[c]),l(e[c+1],!0)]:[u,u]}return s}t.exports=function(e,t){function n(e){return i.r2c(e,0,o)}function r(e){return a.r2c(e,0,s)}var i=ie.getFromId(e,t.xaxis),a=ie.getFromId(e,t.yaxis),o=t.xcalendar,s=t.ycalendar,l=le(e,t,i,"x"),c=l[0],u=l[1],d=le(e,t,a,"y"),h=d[0],f=d[1],p=t._length;u.length>p&&u.splice(p,u.length-p),f.length>p&&f.splice(p,f.length-p);var m=[],g=[],_=[],y="string"==typeof c.size,v="string"==typeof h.size,b=[],x=[],w=y?b:c,T=v?x:h,A=0,k=[],M=[],l=t.histnorm,e=t.histfunc,d=-1!==l.indexOf("density"),S="max"===e||"min"===e?null:0,E=ae.count,C=oe[l],L=!1,D=[],O=[],P="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";P&&"count"!==e&&(L="avg"===e,E=ae[e]);for(var R=c.size,t=n(c.start),I=n(c.end)+(t-ie.tickIncrement(t,R,!1,o))/1e6,N=t;N<I;N=ie.tickIncrement(N,R,!1,o))g.push(S),b.push(N),L&&_.push(0);b.push(N);var z,F=g.length,e=(N-t)/F,c=(z=t+e/2,i.c2r(z,0,o)),j=h.size,t=r(h.start),B=r(h.end)+(t-ie.tickIncrement(t,j,!1,s))/1e6;for(N=t;N<B;N=ie.tickIncrement(N,j,!1,s)){m.push(g.slice()),x.push(N);for(var H=new Array(F),U=0;U<F;U++)H[U]=[];M.push(H),L&&k.push(_.slice())}x.push(N);var V,q=m.length,h=(N-t)/q,t=(V=t+h/2,a.c2r(V,0,s));d&&(D=ce(g.length,w,e,y),O=ce(m.length,T,h,v)),y||"date"!==i.type||(w=ue(n,w)),v||"date"!==a.type||(T=ue(r,T));var Y=!0,G=!0,W=new Array(F),X=new Array(q),Z=1/0,J=1/0,$=1/0,Q=1/0;for(N=0;N<p;N++){var K=u[N],ee=f[N],te=re.findBin(K,w),ne=re.findBin(ee,T);0<=te&&te<F&&0<=ne&&ne<q&&(A+=E(te,N,m[ne],P,k[ne]),M[ne][te].push(N),Y&&(void 0===W[te]?W[te]=K:W[te]!==K&&(Y=!1)),G&&(void 0===X[ne]?X[ne]=ee:X[ne]!==ee&&(G=!1)),Z=Math.min(Z,K-b[te]),J=Math.min(J,b[te+1]-K),$=Math.min($,ee-x[ne]),Q=Math.min(Q,x[ne+1]-ee))}if(L)for(ne=0;ne<q;ne++)A+=se(m[ne],k[ne]);if(C)for(ne=0;ne<q;ne++)C(m[ne],A,D,O[ne]);return{x:u,xRanges:de(b,Y&&W,Z,J,i,o),x0:c,dx:e,y:f,yRanges:de(x,G&&X,$,Q,a,s),y0:t,dy:h,z:m,pts:M}}},{"../../lib":285,"../../plots/cartesian/axes":331,"../histogram/average":450,"../histogram/bin_functions":452,"../histogram/bin_label_vals":453,"../histogram/calc":454,"../histogram/norm_functions":461}],464:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("./sample_defaults"),s=e("../heatmap/style_defaults"),l=e("../../components/colorscale/defaults"),c=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return a.coerce(n,r,c,e,t)}o(n,r,i,t),!1!==r.visible&&(s(n,r,i,t),l(n,r,t,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"))}},{"../../components/colorscale/defaults":165,"../../lib":285,"../heatmap/style_defaults":447,"./attributes":462,"./sample_defaults":467}],465:[function(e,t,n){"use strict";var o=e("../heatmap/hover"),s=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,r,i){var a=o(e,t,n,r,i);if(a){t=(e=a[0]).index,n=t[0],r=t[1],i=e.cd[0],t=i.trace,r=i.xRanges[r],n=i.yRanges[n];return e.xLabel=s(e.xa,[r[0],r[1]],t.xhoverformat),e.yLabel=s(e.ya,[n[0],n[1]],t.yhoverformat),a}}},{"../../plots/cartesian/axes":331,"../heatmap/hover":441}],466:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../heatmap/calc":435,"../heatmap/colorbar":437,"../heatmap/plot":445,"../heatmap/style":446,"../histogram/cross_trace_defaults":456,"../histogram/event_data":458,"./attributes":462,"./defaults":464,"./hover":465}],467:[function(e,t,n){"use strict";var o=e("../../registry"),s=e("../../lib");t.exports=function(e,t,n,r){var i=n("x"),a=n("y"),i=s.minRowLength(i),a=s.minRowLength(a);i&&a?(t._length=Math.min(i,a),o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),(n("z")||n("marker.color"))&&n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")):t.visible=!1}},{"../../lib":285,"../../registry":373}],468:[function(e,t,n){"use strict";var r=e("../histogram2d/attributes"),i=e("../contour/attributes"),a=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=e("../../lib/extend").extendFlat;t.exports=e({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:i.autocontour,ncontours:i.ncontours,contours:i.contours,line:{color:i.line.color,width:e({},i.line.width,{dflt:.5}),dash:i.line.dash,smoothing:i.line.smoothing,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:r.hovertemplate},a("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../contour/attributes":412,"../histogram2d/attributes":462}],469:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("../histogram2d/sample_defaults"),s=e("../contour/contours_defaults"),l=e("../contour/style_defaults"),c=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return a.coerce(n,r,c,e,t)}o(n,r,i,t),!1!==r.visible&&(s(n,r,i,function(e){return a.coerce2(n,r,c,e)}),l(n,r,i,t),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"))}},{"../../lib":285,"../contour/contours_defaults":419,"../contour/style_defaults":433,"../histogram2d/sample_defaults":467,"./attributes":468}],470:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../contour/calc":413,"../contour/colorbar":415,"../contour/hover":425,"../contour/plot":430,"../contour/style":432,"../histogram/cross_trace_defaults":456,"./attributes":468,"./defaults":469}],471:[function(e,t,n){"use strict";for(var r=e("../../plots/attributes"),i=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../lib/extend").extendFlat,o=e("./constants").colormodel,s=["rgb","rgba","rgba256","hsl","hsla"],l=[],c=[],u=0;u<s.length;u++){var d=o[s[u]];l.push("For the `"+s[u]+"` colormodel, it is ["+(d.zminDflt||d.min).join(", ")+"]."),c.push("For the `"+s[u]+"` colormodel, it is ["+(d.zmaxDflt||d.max).join(", ")+"].")}t.exports=a({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:s,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:a({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:i({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"./constants":473}],472:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("./constants"),h=e("fast-isnumeric"),f=e("../../plots/cartesian/axes"),p=e("../../lib").maxRowLength,m=e("./helpers").getImageSize;t.exports=function(e,t){var n,r;t._hasZ?(n=t.z.length,r=p(t.z)):t._hasSource&&(n=(a=m(t.source)).height,r=a.width);var i,a=f.getFromId(e,t.xaxis||"x"),e=f.getFromId(e,t.yaxis||"y"),o=a.d2c(t.x0)-t.dx/2,s=e.d2c(t.y0)-t.dy/2,l=[o,o+r*t.dx],c=[s,s+n*t.dy];if(a&&"log"===a.type)for(i=0;i<r;i++)l.push(o+i*t.dx);if(e&&"log"===e.type)for(i=0;i<n;i++)c.push(s+i*t.dy);return t._extremes[a._id]=f.findExtremes(a,l),t._extremes[e._id]=f.findExtremes(e,c),t._scaler=function(i){var e=d.colormodel[i.colormodel],a=(e.colormodel||i.colormodel).length;i._sArray=[];for(var t=0;t<a;t++)e.min[t]!==i.zmin[t]||e.max[t]!==i.zmax[t]?i._sArray.push(function(t,n,r,i){return function(e){return u.constrain((e-t)*n,r,i)}}(i.zmin[t],(e.max[t]-e.min[t])/(i.zmax[t]-i.zmin[t]),e.min[t],e.max[t])):i._sArray.push(function(t,n){return function(e){return u.constrain(e,t,n)}}(e.min[t],e.max[t]));return function(e){for(var t=e.slice(0,a),n=0;n<a;n++){var r=t[n];if(!h(r))return!1;t[n]=i._sArray[n](r)}return t}}(t),[{x0:o,y0:s,z:t.z,w:r,h:n}]}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":473,"./helpers":476,"fast-isnumeric":31}],473:[function(e,t,n){"use strict";t.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){e=e.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){e=e.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],474:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("./attributes"),s=e("./constants"),l=e("../../snapshot/helpers").IMAGE_URL_PREFIX;t.exports=function(n,r){function e(e,t){return a.coerce(n,r,o,e,t)}e("source"),r.source&&!r.source.match(l)&&delete r.source,r._hasSource=!!r.source;var t,i=e("z");r._hasZ=!(void 0===i||!i.length||!i[0]||!i[0].length),r._hasZ||r._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),r._hasZ?(e("colormodel","rgb"),e("zmin",(t=s.colormodel[r.colormodel]).zminDflt||t.min),e("zmax",t.zmaxDflt||t.max)):r._hasSource&&(r.colormodel="rgba256",t=s.colormodel[r.colormodel],r.zmin=t.zminDflt,r.zmax=t.zmaxDflt),e("zsmooth"),e("text"),e("hovertext"),e("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":285,"../../snapshot/helpers":377,"./attributes":471,"./constants":473}],475:[function(e,t,n){"use strict";t.exports=function(e,t){return"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e.color=t.color,e.colormodel=t.trace.colormodel,e.z||(e.z=t.color),e}},{}],476:[function(e,t,n){"use strict";var r=e("probe-image-size/sync"),i=e("../../snapshot/helpers").IMAGE_URL_PREFIX,a=e("buffer/").Buffer;n.getImageSize=function(e){e=e.replace(i,""),e=new a(e,"base64");return r(e)}},{"../../snapshot/helpers":377,"buffer/":28,"probe-image-size/sync":95}],477:[function(e,t,n){"use strict";var m=e("../../components/fx"),g=e("../../lib"),_=e("./constants");t.exports=function(e,t,n){var r=e.cd[0],i=r.trace,a=e.xa,o=e.ya;if(!(0<m.inbox(t-r.x0,t-(r.x0+r.w*i.dx),0)||0<m.inbox(n-r.y0,n-(r.y0+r.h*i.dy),0))){var s=Math.floor((t-r.x0)/i.dx),l=Math.floor(Math.abs(n-r.y0)/i.dy);if(i._hasZ?p=r.z[l][s]:i._hasSource&&(p=i._canvas.el.getContext("2d").getImageData(s,l,1,1).data),p){var c,u=r.hi||i.hoverinfo;!u||-1!==(f=-1!==(f=u.split("+")).indexOf("all")?["color"]:f).indexOf("color")&&(c=!0);var d,h=_.colormodel[i.colormodel],t=h.colormodel||i.colormodel,n=t.length,u=i._scaler(p),f=h.suffix,h=[];(i.hovertemplate||c)&&(h.push("["+[u[0]+f[0],u[1]+f[1],u[2]+f[2]].join(", ")),4===n&&h.push(", "+u[3]+f[3]),h.push("]"),h=h.join(""),e.extraText=t.toUpperCase()+": "+h),Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[l])?d=i.hovertext[l][s]:Array.isArray(i.text)&&Array.isArray(i.text[l])&&(d=i.text[l][s]);var n=o.c2p(r.y0+(l+.5)*i.dy),t=r.x0+(s+.5)*i.dx,o=r.y0+(l+.5)*i.dy,p="["+p.slice(0,i.colormodel.length).join(", ")+"]";return[g.extendFlat(e,{index:[l,s],x0:a.c2p(r.x0+s*i.dx),x1:a.c2p(r.x0+(s+1)*i.dx),y0:n,y1:n,color:u,xVal:t,xLabelVal:t,yVal:o,yLabelVal:o,zLabelVal:p,text:d,hovertemplateLabels:{zLabel:p,colorLabel:h,"color[0]Label":u[0]+f[0],"color[1]Label":u[1]+f[1],"color[2]Label":u[2]+f[2],"color[3]Label":u[3]+f[3]}})]}}}},{"../../components/fx":195,"../../lib":285,"./constants":473}],478:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":345,"./attributes":471,"./calc":472,"./defaults":474,"./event_data":475,"./hover":477,"./plot":479,"./style":480}],479:[function(e,t,n){"use strict";var E=e("@plotly/d3"),C=e("../../lib"),L=C.strTranslate,D=e("../../constants/xmlns_namespaces"),O=e("./constants"),r=C.isIOS()||C.isSafari()||C.isIE();t.exports=function(f,e,t,n){var k=e.xaxis,M=e.yaxis,S=!(r||f._context._exportedPlot);C.makeTraceGroups(n,t,"im").each(function(e){var t=E.select(this),p=e[0],m=p.trace,r=("fast"===m.zsmooth||!1===m.zsmooth&&S)&&!m._hasZ&&m._hasSource&&"linear"===k.type&&"linear"===M.type;m._realImage=r;for(var g,n,_,i,a=p.z,y=p.x0,v=p.y0,o=p.w,s=p.h,b=m.dx,x=m.dy,w=0;void 0===g&&w<o;)g=k.c2p(y+w*b),w++;for(w=o;void 0===n&&0<w;)n=k.c2p(y+w*b),w--;for(w=0;void 0===_&&w<s;)_=M.c2p(v+w*x),w++;for(w=s;void 0===i&&0<w;)i=M.c2p(v+w*x),w--;n<g&&(u=n,n=g,g=u),i<_&&(u=_,_=i,i=u),r||(g=Math.max(-.5*k._length,g),n=Math.min(1.5*k._length,n),_=Math.max(-.5*M._length,_),i=Math.min(1.5*M._length,i));var l,c,u,d,T=Math.round(n-g),A=Math.round(i-_);function h(e){var t=document.createElement("canvas");t.width=T,t.height=A;function n(e){return C.constrain(Math.round(k.c2p(y+e*b)-g),0,T)}function r(e){return C.constrain(Math.round(M.c2p(v+e*x)-_),0,A)}var i,a=t.getContext("2d"),o=O.colormodel[m.colormodel],s=o.colormodel||m.colormodel,l=o.fmt;for(w=0;w<p.w;w++){var c=n(w),u=n(w+1);if(u!==c&&!isNaN(u)&&!isNaN(c))for(var d=0;d<p.h;d++){var h=r(d),f=r(d+1);f===h||isNaN(f)||isNaN(h)||!e(w,d)||(i=m._scaler(e(w,d)),a.fillStyle=i?s+"("+l(i).join(",")+")":"rgba(0,0,0,0)",a.fillRect(c,h,u-c,f-h))}}return t}T<=0||A<=0?t.selectAll("image").data([]).exit().remove():((l=t.selectAll("image").data([e])).enter().append("svg:image").attr({xmlns:D.svg,preserveAspectRatio:"none"}),l.exit().remove(),d=!1===m.zsmooth?O.pixelatedStyle:"",r&&(c=C.simpleMap(k.range,k.r2l),u=C.simpleMap(M.range,M.r2l),t=c[1]<c[0],e=u[1]>u[0],(t||e)&&(d+="transform:"+L((c=g+T/2)+"px",(u=_+A/2)+"px")+"scale("+(t?-1:1)+","+(e?-1:1)+")"+L(-c+"px",-u+"px")+";")),l.attr("style",d),d=new Promise(function(e){var t,n,r;m._hasZ?e():m._hasSource&&(m._canvas&&m._canvas.el.width===o&&m._canvas.el.height===s&&m._canvas.source===m.source?e():((t=document.createElement("canvas")).width=o,t.height=s,n=t.getContext("2d"),m._image=m._image||new Image,(r=m._image).onload=function(){n.drawImage(r,0,0),m._canvas={el:t,source:m.source},e()},r.setAttribute("src",m.source)))}).then(function(){var n,e;m._hasZ?e=h(function(e,t){return a[t][e]}).toDataURL("image/png"):m._hasSource&&(e=r?m.source:(n=m._canvas.el.getContext("2d").getImageData(0,0,o,s).data,h(function(e,t){e=4*(t*o+e);return[n[e],n[1+e],n[2+e],n[3+e]]}).toDataURL("image/png"))),l.attr({"xlink:href":e,height:A,width:T,x:g,y:_})}),f._promises.push(d))})}},{"../../constants/xmlns_namespaces":266,"../../lib":285,"./constants":473,"@plotly/d3":20}],480:[function(e,t,n){"use strict";var r=e("@plotly/d3");t.exports=function(e){r.select(e).selectAll(".im image").style("opacity",function(e){return e[0].trace.opacity})}},{"@plotly/d3":20}],481:[function(e,t,n){"use strict";var r=e("../../plots/attributes"),i=e("../../plots/domain").attributes,a=e("../../plots/font_attributes"),o=e("../../components/color/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,e=e("../../lib/extend").extendFlat,a=a({editType:"plot",arrayOk:!0,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:e({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:e({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:e({},a,{}),outsidetextfont:e({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:e({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:e({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/domain":359,"../../plots/font_attributes":360,"../../plots/template_attributes":368}],482:[function(e,t,i){"use strict";var a=e("../../plots/plots");i.name="pie",i.plot=function(e,t,n,r){a.plotBasePlot(i.name,e,t,n,r)},i.clean=function(e,t,n,r){a.cleanBasePlot(i.name,e,t,n,r)}},{"../../plots/plots":366}],483:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),a=e("tinycolor2"),r=e("../../components/color"),d={};function v(n){return function(e,t){return!!e&&(!!(e=a(e)).isValid()&&(e=r.addOpacity(e,e.getAlpha()),n[t]||(n[t]=e),e))}}function h(e,t){var n,r=JSON.stringify(e),i=t[r];if(!i){for(i=e.slice(),n=0;n<e.length;n++)i.push(a(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)i.push(a(e[n]).darken(20).toHexString());t[r]=i}return i}t.exports={calc:function(e,t){var n=[],r=(e=e._fullLayout).hiddenlabels||[],i=t.labels,a=t.marker.colors||[],o=t.values,s=t._length,l=t._hasValues&&s;if(t.dlabel)for(i=new Array(s),m=0;m<s;m++)i[m]=String(t.label0+m*t.dlabel);for(var c,u,d={},h=v(e["_"+t.type+"colormap"]),f=0,p=!1,m=0;m<s;m++){if(l){if(c=o[m],!y(c))continue;if((c=+c)<0)continue}else c=1;void 0!==(g=i[m])&&""!==g||(g=m);var g,_=d[g=String(g)];void 0===_?(d[g]=n.length,(u=-1!==r.indexOf(g))||(f+=c),n.push({v:c,label:g,color:h(a[m],g),i:m,pts:[m],hidden:u})):(p=!0,(_=n[_]).v+=c,_.pts.push(m),_.hidden||(f+=c),!1===_.color&&a[m]&&(_.color=h(a[m],g)))}return("funnelarea"===t.type?p:t.sort)&&n.sort(function(e,t){return t.v-e.v}),n[0]&&(n[0].vTotal=f),n},crossTraceCalc:function(e,t){var n=(n=(t||{}).type)||"pie",t=e._fullLayout,r=e.calcdata,i=t[n+"colorway"],a=t["_"+n+"colormap"];t["extend"+n+"colors"]&&(i=h(i,d));for(var o=0,s=0;s<r.length;s++){var l=r[s];if(l[0].trace.type===n)for(var c=0;c<l.length;c++){var u=l[c];!1===u.color&&(a[u.label]?u.color=a[u.label]:(a[u.label]=u.color=i[o%i.length],o++))}}},makePullColorFn:v,generateExtendedColors:h}},{"../../components/color":155,"fast-isnumeric":31,tinycolor2:119}],484:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../lib"),u=e("./attributes"),d=e("../../plots/domain").defaults,h=e("../bar/defaults").handleText;function f(e,t){var n=Array.isArray(e),r=c.isArrayOrTypedArray(t),i=Math.min(n?e.length:1/0,r?t.length:1/0);if((i=!isFinite(i)?0:i)&&r){for(var a,o=0;o<i;o++){var s=t[o];if(l(s)&&0<s){a=!0;break}}a||(i=0)}return{hasLabels:n,hasValues:r,len:i}}t.exports={handleLabelsAndValues:f,supplyDefaults:function(n,r,e,t){function i(e,t){return c.coerce(n,r,u,e,t)}var a,o,s=f(i("labels"),i("values")),l=s.len;r._hasLabels=s.hasLabels,r._hasValues=s.hasValues,!r._hasLabels&&r._hasValues&&(i("label0"),i("dlabel")),l?(r._length=l,i("marker.line.width")&&i("marker.line.color"),i("marker.colors"),i("scalegroup"),s=i("text"),(l=i("texttemplate"))||(a=i("textinfo",Array.isArray(s)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),(l||a&&"none"!==a)&&(o=i("textposition"),h(n,r,t,i,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),!Array.isArray(o)&&"auto"!==o&&"outside"!==o||i("automargin"),"inside"!==o&&"auto"!==o&&!Array.isArray(o)||i("insidetextorientation")),d(r,t,i),a=i("hole"),i("title.text")&&(o=i("title.position",a?"middle center":"top center"),a||"middle center"!==o||(r.title.position="top center"),c.coerceFont(i,"title.font",t.font)),i("sort"),i("direction"),i("rotation"),i("pull")):r.visible=!1}}},{"../../lib":285,"../../plots/domain":359,"../bar/defaults":387,"./attributes":481,"fast-isnumeric":31}],485:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},{"../../components/fx/helpers":191}],486:[function(e,t,n){"use strict";var r=e("../../lib");function i(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function(e,t){e=i((100*e).toPrecision(3));return r.numSeparate(e,t)+"%"},n.formatPieValue=function(e,t){e=i(e.toPrecision(10));return r.numSeparate(e,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r||""===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0},n.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},{"../../lib":285}],487:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":481,"./base_plot":482,"./calc":483,"./defaults":484,"./layout_attributes":488,"./layout_defaults":489,"./plot":490,"./style":491,"./style_one":492}],488:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],489:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return i.coerce(n,r,a,e,t)}e("hiddenlabels"),e("piecolorway",r.colorway),e("extendpiecolors")}},{"../../lib":285,"./layout_attributes":488}],490:[function(e,t,n){"use strict";var v=e("@plotly/d3"),l=e("../../plots/plots"),m=e("../../components/fx"),c=e("../../components/color"),b=e("../../components/drawing"),x=e("../../lib"),u=x.strScale,d=x.strTranslate,w=e("../../lib/svg_text_utils"),r=e("../bar/uniform_text"),T=r.recordMinTextSize,i=r.clearMinTextSize,o=e("../bar/constants").TEXTPAD,A=e("./helpers"),g=e("./event_data"),f=e("../../lib").isValidTextValue;function k(e,u,t){var d=t[0],h=d.trace,f=d.cx,p=d.cy;"_hasHoverLabel"in h||(h._hasHoverLabel=!1),"_hasHoverEvent"in h||(h._hasHoverEvent=!1),e.on("mouseover",function(e){var t,n,r,i,a,o,s,l=u._fullLayout,c=u._fullData[h.index];u._dragging||!1===l.hovermode||(t=c.hoverinfo,"all"===(t=Array.isArray(t)?m.castHoverinfo({hoverinfo:[A.castOption(t,e.pts)],_module:h._module},l,0):t)&&(t="label+text+value+percent+name"),(c.hovertemplate||"none"!==t&&"skip"!==t&&t)&&(n=e.rInscribed||0,r=f+e.pxmid[0]*(1-n),i=p+e.pxmid[1]*(1-n),s=l.separators,a=[],t&&-1!==t.indexOf("label")&&a.push(e.label),e.text=A.castOption(c.hovertext||c.text,e.pts),t&&-1!==t.indexOf("text")&&(o=e.text,x.isValidTextValue(o)&&a.push(o)),e.value=e.v,e.valueLabel=A.formatPieValue(e.v,s),t&&-1!==t.indexOf("value")&&a.push(e.valueLabel),e.percent=e.v/d.vTotal,e.percentLabel=A.formatPiePercent(e.percent,s),t&&-1!==t.indexOf("percent")&&a.push(e.percentLabel),s=(o=c.hoverlabel).font,m.loneHover({trace:h,x0:r-n*d.r,x1:r+n*d.r,y:i,text:a.join("<br>"),name:c.hovertemplate||-1!==t.indexOf("name")?c.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:A.castOption(o.bgcolor,e.pts)||e.color,borderColor:A.castOption(o.bordercolor,e.pts),fontFamily:A.castOption(s.family,e.pts),fontSize:A.castOption(s.size,e.pts),fontColor:A.castOption(s.color,e.pts),nameLength:A.castOption(o.namelength,e.pts),textAlign:A.castOption(o.align,e.pts),hovertemplate:A.castOption(c.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[g(e,c)]},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:u}),h._hasHoverLabel=!0),h._hasHoverEvent=!0,u.emit("plotly_hover",{points:[g(e,c)],event:v.event}))}),e.on("mouseout",function(e){var t=u._fullLayout,n=u._fullData[h.index],r=v.select(this).datum();h._hasHoverEvent&&(e.originalEvent=v.event,u.emit("plotly_unhover",{points:[g(r,n)],event:v.event}),h._hasHoverEvent=!1),h._hasHoverLabel&&(m.loneUnhover(t._hoverlayer.node()),h._hasHoverLabel=!1)}),e.on("click",function(e){var t=u._fullLayout,n=u._fullData[h.index];u._dragging||!1===t.hovermode||(u._hoverdata=[g(e,n)],m.click(u,v.event))})}function M(e,t,n){var r=A.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=A.castOption(e._input.textfont.color,t.pts));var i=A.castOption(e.insidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||n.family,n=A.castOption(e.insidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||n.size;return{color:r||c.contrast(t.color),family:i,size:n}}function a(e,t){for(var n,r,i,a=0;a<e.length;a++)(i=(r=e[a][0]).trace).title.text&&(n=i.title.text,i._meta&&(n=x.templateString(n,i._meta)),n=b.tester.append("text").attr("data-notex",1).text(n).call(b.font,i.title.font).call(w.convertToTspans,t),i=b.bBox(n.node(),!0),r.titleBox={width:i.width,height:i.height},n.remove())}function S(a,o,e){var s=e.r||o.rpx1,t=o.rInscribed;if(o.startangle===o.stopangle)return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0};var l=o.ring,n=1===l&&Math.abs(o.startangle-o.stopangle)===2*Math.PI,r=o.halfangle,i=o.midangle,c=e.trace.insidetextorientation,u="horizontal"===c,d="tangential"===c,e="radial"===c,h="auto"===c,f=[];if(!h){var p,m=function(e,t){var n,r,i;r=e,i=(n=o).startangle,n=n.stopangle,(r<i&&n<r||i<r&&r<n)&&(n=(r=Math.abs(e-o.startangle))<(n=Math.abs(e-o.stopangle))?r:n,(g="tan"===t?C(a,s,l,n,0):E(a,s,l,n,Math.PI/2)).textPosAngle=e,f.push(g))};if(u||d){for(p=4;-4<=p;p-=2)m(Math.PI*p,"tan");for(p=4;-4<=p;p-=2)m(Math.PI*(p+1),"tan")}if(u||e){for(p=4;-4<=p;p-=2)m(Math.PI*(p+1.5),"rad");for(p=4;-4<=p;p-=2)m(Math.PI*(p+.5),"rad")}}if(n||h||u){var g,u=Math.sqrt(a.width*a.width+a.height*a.height);if((g={scale:t*s*2/u,rCenter:1-t,rotate:0}).textPosAngle=(o.startangle+o.stopangle)/2,1<=g.scale)return g;f.push(g)}(h||e)&&((g=E(a,s,l,r,i)).textPosAngle=(o.startangle+o.stopangle)/2,f.push(g)),(h||d)&&((g=C(a,s,l,r,i)).textPosAngle=(o.startangle+o.stopangle)/2,f.push(g));for(var _=0,y=0,v=0;v<f.length;v++){var b=f[v].scale;if(y<b&&(y=b,_=v),!h&&1<=y)break}return f[_]}function E(e,t,n,r,i){t=Math.max(0,t-2*o);var a=e.width/e.height,n=p(a,r,t,n);return{scale:2*n/e.height,rCenter:s(a,n/t),rotate:h(i)}}function C(e,t,n,r,i){t=Math.max(0,t-2*o);var a=e.height/e.width,n=p(a,r,t,n);return{scale:2*n/e.width,rCenter:s(a,n/t),rotate:h(i+Math.PI/2)}}function s(e,t){return Math.cos(t)-e*t}function h(e){return(180/Math.PI*e+720)%180-90}function p(e,t,n,r){t=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(t*t+.5)+t),r/(Math.sqrt(e*e+r/2)+e))}function L(e,t){var n=t.pxmid[0],r=t.pxmid[1],t=e.width/2,e=e.height/2;return n<0&&(t*=-1),r<0&&(e*=-1),{scale:1,rCenter:1,rotate:0,x:t+Math.abs(e)*(0<t?1:-1)/2,y:e/(1+n*n/(r*r)),outside:!0}}function D(e,t){var n,r,i,a=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,i=y(a),-1!==a.title.position.indexOf("top")?(o.y-=(1+i)*e.r,s.ty-=e.titleBox.height):-1!==a.title.position.indexOf("bottom")&&(o.y+=(1+i)*e.r);var l,l=(l=e.r,c=e.trace.aspectratio,l/(void 0===c?1:c)),c=t.w*(a.domain.x[1]-a.domain.x[0])/2;return-1!==a.title.position.indexOf("left")?(c+=l,o.x-=(1+i)*l,s.tx+=e.titleBox.width/2):-1!==a.title.position.indexOf("center")?c*=2:-1!==a.title.position.indexOf("right")&&(c+=l,o.x+=(1+i)*l,s.tx-=e.titleBox.width/2),n=c/e.titleBox.width,r=_(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(n,r),tx:s.tx,ty:s.ty}}function _(e,t){var n=e.trace,n=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function y(e){var t,n=e.pull;if(!n)return 0;if(Array.isArray(n))for(t=n=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}function O(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r][0],a=i.trace,o=a.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);a.title.text&&"middle center"!==a.title.position&&(l-=_(i,t));o=l/2;"funnelarea"!==a.type||a.scalegroup||(o/=a.aspectratio),i.r=Math.min(s/2,o)/(1+y(a)),i.cx=t.l+t.w*(a.domain.x[1]+a.domain.x[0])/2,i.cy=t.t+t.h*(1-a.domain.y[0])-l/2,a.title.text&&-1!==a.title.position.indexOf("bottom")&&(i.cy-=_(i,t)),a.scalegroup&&-1===n.indexOf(a.scalegroup)&&n.push(a.scalegroup)}!function(e,t){for(var n,r,i,a,o,s,l=0;l<t.length;l++){var c,u=1/0,d=t[l];for(r=0;r<e.length;r++)n=e[r][0],(i=n.trace).scalegroup===d&&("pie"===i.type?a=n.r*n.r:"funnelarea"===i.type&&(1<i.aspectratio?(o=n.r,s=o/i.aspectratio):(s=n.r,o=s*i.aspectratio),o*=(1+i.baseratio)/2,a=o*s),u=Math.min(u,a/n.vTotal));for(r=0;r<e.length;r++)n=e[r][0],(i=n.trace).scalegroup===d&&(c=u*n.vTotal,"funnelarea"===i.type&&(c/=(1+i.baseratio)/2,c/=i.aspectratio),n.r=Math.sqrt(c))}}(e,n)}function P(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function R(e,t,n){var r,i,a,o,s,l,c=e._fullLayout,u=n.trace,d=u.texttemplate,h=u.textinfo;!d&&h&&"none"!==h&&(r=h.split("+"),s=(o=function(e){return-1!==r.indexOf(e)})("label"),a=o("text"),i=o("value"),h=o("percent"),o=c.separators,s=s?[t.label]:[],a&&(a=A.getFirstFilled(u.text,t.pts),f(a)&&s.push(a)),i&&s.push(A.formatPieValue(t.v,o)),h&&s.push(A.formatPiePercent(t.v/n.vTotal,o)),t.text=s.join("<br>")),d&&((o=x.castOption(u,t.i,"texttemplate"))?(s={label:(l=t).label,value:l.v,valueLabel:A.formatPieValue(l.v,c.separators),percent:l.v/n.vTotal,percentLabel:A.formatPiePercent(l.v/n.vTotal,c.separators),color:l.color,text:l.text,customdata:x.castOption(u,l.i,"customdata")},d=A.getFirstFilled(u.text,t.pts),!f(d)&&""!==d||(s.text=d),t.text=x.texttemplateString(o,s,e._fullLayout._d3locale,s,u._meta||{})):t.text="")}function I(e,t){var n=e.rotate*Math.PI/180,r=Math.cos(n),i=Math.sin(n),n=(t.left+t.right)/2,t=(t.top+t.bottom)/2;e.textX=n*r-t*i,e.textY=n*i+t*r,e.noCenter=!0}t.exports={plot:function(_,e){var y=_._fullLayout,o=y._size;i("pie",y),a(e,_),O(e,o);var t=x.makeTraceGroups(y._pielayer,e,"trace").each(function(p){var i=v.select(this),m=p[0],g=m.trace;!function(e){var t,n,r,i=e[0],a=i.r,o=i.trace,s=A.getRotationAngle(o.rotation),l=2*Math.PI/i.vTotal,c="px0",u="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;s+=l*e[t].v,l*=-1,c="px1",u="px0"}for(r=P(a,s),t=0;t<e.length;t++)(n=e[t]).hidden||(n[c]=r,n.startangle=s,s+=l*n.v/2,n.pxmid=P(a,s),n.midangle=s,s+=l*n.v/2,r=P(a,s),n.stopangle=s,n[u]=r,n.largeArc=n.v>i.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/i.vTotal,.5),n.ring=1-o.hole,n.rInscribed=function(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}(n,i))}(p),i.attr("stroke-linejoin","round"),i.each(function(){var e=v.select(this).selectAll("g.slice").data(p);e.enter().append("g").classed("slice",!0),e.exit().remove();var a=[[[],[]],[[],[]]],f=!1;e.each(function(l,c){var u,d,e,t,n,h,r;function i(e,t,n,r){var i=r*(t[0]-e[0]),e=r*(t[1]-e[1]);return"a"+r*m.r+","+r*m.r+" 0 "+l.largeArc+(n?" 1 ":" 0 ")+i+","+e}l.hidden?v.select(this).selectAll("path,g").remove():(l.pointNumber=l.i,l.curveNumber=g.index,a[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l),u=m.cx,d=m.cy,(e=(r=v.select(this)).selectAll("path.surface").data([l])).enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),r.call(k,_,p),!g.pull||0<(n=+A.castOption(g.pull,l.pts)||0)&&(u+=n*l.pxmid[0],d+=n*l.pxmid[1]),l.cxFinal=u,l.cyFinal=d,n=g.hole,l.v===m.vTotal?(t="M"+(u+l.px0[0])+","+(d+l.px0[1])+i(l.px0,l.pxmid,!0,1)+i(l.pxmid,l.px0,!0,1)+"Z",n?e.attr("d","M"+(u+n*l.px0[0])+","+(d+n*l.px0[1])+i(l.px0,l.pxmid,!1,n)+i(l.pxmid,l.px0,!1,n)+"Z"+t):e.attr("d",t)):(t=i(l.px0,l.px1,!0,1),n?e.attr("d","M"+(u+n*l.px1[0])+","+(d+n*l.px1[1])+i(l.px1,l.px0,!1,n)+"l"+(n=1-n)*l.px0[0]+","+n*l.px0[1]+t+"Z"):e.attr("d","M"+u+","+d+"l"+l.px0[0]+","+l.px0[1]+t+"Z")),R(_,l,m),h=A.castOption(g.textposition,l.pts),(r=r.selectAll("g.slicetext").data(l.text&&"none"!==h?[0]:[])).enter().append("g").classed("slicetext",!0),r.exit().remove(),r.each(function(){var e,t,n,r,i=x.ensureSingle(v.select(this),"text","",function(e){e.attr("data-notex",1)}),r=x.ensureUniformFontSize(_,"outside"===h?(e=g,t=l,o=y.font,n=A.castOption(e.outsidetextfont.color,t.pts)||A.castOption(e.textfont.color,t.pts)||o.color,r=A.castOption(e.outsidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||o.family,o=A.castOption(e.outsidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||o.size,{color:n,family:r,size:o}):M(g,l,y.font));i.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,r).call(w.convertToTspans,_);var a,o=b.bBox(i.node());"outside"===h?a=L(o,l):(a=S(o,l,m),"auto"===h&&a.scale<1&&(s=x.ensureUniformFontSize(_,g.outsidetextfont),i.call(b.font,s),a=L(o=b.bBox(i.node()),l)));var s=a.textPosAngle,s=void 0===s?l.pxmid:P(m.r,s);a.targetX=u+s[0]*a.rCenter+(a.x||0),a.targetY=d+s[1]*a.rCenter+(a.y||0),I(a,o),a.outside&&(s=a.targetY,l.yLabelMin=s-o.height/2,l.yLabelMid=s,l.yLabelMax=s+o.height/2,l.labelExtraX=0,l.labelExtraY=0,f=!0),a.fontSize=r.size,T(g.type,a,y),p[c].transform=a,i.attr("transform",x.getTextTransform(a))}))});var s,t,n,r=v.select(this).selectAll("g.titletext").data(g.title.text?[0]:[]);r.enter().append("g").classed("titletext",!0),r.exit().remove(),r.each(function(){var e,t=x.ensureSingle(v.select(this),"text","",function(e){e.attr("data-notex",1)}),n=g.title.text;g._meta&&(n=x.templateString(n,g._meta)),t.text(n).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,g.title.font).call(w.convertToTspans,_),e="middle center"===g.title.position?(e=m,n=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height),{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/n,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}):D(m,o),t.attr("transform",d(e.x,e.y)+u(Math.min(1,e.scale))+d(e.tx,e.ty))}),f&&function(e,c){var t,u,n,d,h,f,p,r,i,m,a,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function g(e,t){return t.pxmid[1]-e.pxmid[1]}for(u=0;u<2;u++)for(n=u?l:g,h=u?Math.max:Math.min,p=u?1:-1,t=0;t<2;t++){for(d=t?Math.max:Math.min,f=t?1:-1,(r=e[u][t]).sort(n),i=e[1-u][t],m=i.concat(r),o=[],a=0;a<r.length;a++)void 0!==r[a].yLabelMid&&o.push(r[a]);for(s=!1,a=0;u&&a<i.length;a++)if(void 0!==i[a].yLabelMid){s=i[a];break}for(a=0;a<o.length;a++){var _=a&&o[a-1];s&&!a&&(_=s),function(e,t){var n,r,i,t=(t=t||{}).labelExtraY+(u?t.yLabelMax:t.yLabelMin),a=u?e.yLabelMin:e.yLabelMax,o=u?e.yLabelMax:e.yLabelMin,s=e.cyFinal+h(e.px0[1],e.px1[1]),l=t-a;if(0<l*p&&(e.labelExtraY=l),Array.isArray(c.pull))for(n=0;n<m.length;n++)(r=m[n])===e||(A.castOption(c.pull,e.pts)||0)>=(A.castOption(c.pull,r.pts)||0)||(0<(e.pxmid[1]-r.pxmid[1])*p?0<(l=r.cyFinal+h(r.px0[1],r.px1[1])-a-e.labelExtraY)*p&&(e.labelExtraY+=l):0<(o+e.labelExtraY-s)*p&&(i=3*f*Math.abs(n-m.indexOf(e)),0<(i=r.cxFinal+d(r.px0[0],r.px1[0])+i-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*f&&(e.labelExtraX+=i)))}(o[a],_)}}}(a,g),s=g,e.each(function(e){var t,n,r,i,a,o=v.select(this);e.labelExtraX||e.labelExtraY?(a=o.select("g.slicetext text"),e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,a.attr("transform",x.getTextTransform(e.transform)),n="M"+(t=e.cxFinal+e.pxmid[0])+","+(e.cyFinal+e.pxmid[1]),r=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4,e.labelExtraX?(i=e.labelExtraX*e.pxmid[1]/e.pxmid[0],a=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]),Math.abs(i)>Math.abs(a)?n+="l"+a*e.pxmid[0]/e.pxmid[1]+","+a+"H"+(t+e.labelExtraX+r):n+="l"+e.labelExtraX+","+i+"v"+(a-i)+"h"+r):n+="V"+(e.yLabelMid+e.labelExtraY)+"h"+r,x.ensureSingle(o,"path","textline").call(c.stroke,s.outsidetextfont.color).attr({"stroke-width":Math.min(2,s.outsidetextfont.size/8),d:n,fill:"none"})):o.select("path.textline").remove()}),f&&g.automargin&&(t=b.bBox(i.node()),n=g.domain,r=o.w*(n.x[1]-n.x[0]),e=o.h*(n.y[1]-n.y[0]),r=(.5*r-m.r)/o.w,e=(.5*e-m.r)/o.h,l.autoMargin(_,"pie."+g.uid+".automargin",{xl:n.x[0]-r,xr:n.x[1]+r,yb:n.y[0]-e,yt:n.y[1]+e,l:Math.max(m.cx-m.r-t.left,0),r:Math.max(t.right-(m.cx+m.r),0),b:Math.max(t.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-t.top,0),pad:5}))})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=v.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:S,determineInsideTextFont:M,positionTitleOutside:D,prerenderTitles:a,layoutAreas:O,attachFxHandlers:k,computeTransform:I}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx":195,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../bar/constants":385,"../bar/uniform_text":399,"./event_data":485,"./helpers":486,"@plotly/d3":20}],491:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("./style_one"),a=e("../bar/uniform_text").resizeText;t.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");a(e,t,"pie"),t.each(function(e){var t=e[0].trace,e=r.select(this);e.style({opacity:t.opacity}),e.selectAll("path.surface").each(function(e){r.select(this).call(i,e,t)})})}},{"../bar/uniform_text":399,"./style_one":492,"@plotly/d3":20}],492:[function(e,t,n){"use strict";var i=e("../../components/color"),a=e("./helpers").castOption;t.exports=function(e,t,n){var r=n.marker.line,n=a(r.color,t.pts)||i.defaultLine,r=a(r.width,t.pts)||0;e.style("stroke-width",r).call(i.fill,t.color).call(i.stroke,n)}},{"../../components/color":155,"./helpers":486}],493:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;i.mergeArray(t.text,e,"tx"),i.mergeArray(t.texttemplate,e,"txt"),i.mergeArray(t.hovertext,e,"htx"),i.mergeArray(t.customdata,e,"data"),i.mergeArray(t.textposition,e,"tp"),t.textfont&&(i.mergeArrayCastPositive(t.textfont.size,e,"ts"),i.mergeArray(t.textfont.color,e,"tc"),i.mergeArray(t.textfont.family,e,"tf"));var r=t.marker;r&&(i.mergeArrayCastPositive(r.size,e,"ms"),i.mergeArrayCastPositive(r.opacity,e,"mo"),i.mergeArray(r.symbol,e,"mx"),i.mergeArray(r.color,e,"mc"),t=r.line,r.line&&(i.mergeArray(t.color,e,"mlc"),i.mergeArrayCastPositive(t.width,e,"mlw")),(r=r.gradient)&&"none"!==r.type&&(i.mergeArray(r.type,e,"mgt"),i.mergeArray(r.color,e,"mgc")))}},{"../../lib":285}],494:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../components/colorscale/attributes"),s=e("../../plots/font_attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../components/drawing"),u=e("./constants"),e=e("../../lib/extend").extendFlat;function d(){return{valType:"any",dflt:0,editType:"calc"}}function h(){return{valType:"any",editType:"calc"}}function f(){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:d(),yperiod:d(),xperiod0:h(),yperiod0:h(),xperiodalignment:f(),yperiodalignment:f(),xhoverformat:r("x"),yhoverformat:r("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:i({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:a({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:e({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:e({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:e({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},o("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":162,"../../components/drawing":177,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"./constants":498}],495:[function(e,t,n){"use strict";var D=e("fast-isnumeric"),O=e("../../lib"),P=e("../../plots/cartesian/axes"),R=e("../../plots/cartesian/align_period"),I=e("../../constants/numerical").BADNUM,p=e("./subtypes"),N=e("./colorscale_calc"),z=e("./arrays_to_calcdata"),F=e("./calc_selection");function j(e,t,n,r,i,a,o){var s=t._length,l=e._fullLayout,c=n._id,u=r._id,d=l._firstScatter[m(t)]===t.uid,h=(U(t,l,n,r)||{}).orientation,f=t.fill;n._minDtick=0;e={padded:!(r._minDtick=0)},l={padded:!0};o&&(e.ppad=l.ppad=o);s=s<2||i[0]!==i[s-1]||a[0]!==a[s-1];s&&("tozerox"===f||"tonextx"===f&&(d||"h"===h))?e.tozero=!0:(t.error_y||{}).visible||"tonexty"!==f&&"tozeroy"!==f&&(p.hasMarkers(t)||p.hasText(t))||(e.padded=!1,e.ppad=0),s&&("tozeroy"===f||"tonexty"===f&&(d||"v"===h))?l.tozero=!0:"tonextx"!==f&&"tozerox"!==f||(l.padded=!1),c&&(t._extremes[c]=P.findExtremes(n,i,e)),u&&(t._extremes[u]=P.findExtremes(r,a,l))}function B(e,t){if(p.hasMarkers(e)){var n=e.marker,r=1.6*(e.marker.sizeref||1),i="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)};if(O.isArrayOrTypedArray(n.size)){var a={type:"linear"};P.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=i(o[l]);return s}return i(n.size)}}function H(e,t){var n=m(t),e=e._firstScatter;e[n]||(e[n]=t.uid)}function m(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function U(e,t,n,r){e=e.stackgroup;if(e){e=t._scatterStackOpts[n._id+r._id][e],n="v"===e.orientation?r:n;return"linear"===n.type||"log"===n.type?e:void 0}}t.exports={calc:function(e,t){var n,r,i,a,o,s=e._fullLayout,l=P.getFromId(e,t.xaxis||"x"),c=P.getFromId(e,t.yaxis||"y"),u=l.makeCalcdata(t,"x"),d=c.makeCalcdata(t,"y"),h=R(t,l,"x",u),f=R(t,c,"y",d),p=t._length,m=new Array(p),g=t.ids,_=U(t,s,l,c),y=!1;H(s,t);var v,b="x",x="y";_?(O.pushUnique(_.traceIndices,t._expandedIndex),n="v"===_.orientation,v=n?(x="s","x"):(b="s","y"),a="interpolate"===_.stackgaps):j(e,t,l,c,h,f,B(t,p));for(var w=!!t.xperiodalignment,T=!!t.yperiodalignment,A=0;A<p;A++){var k=m[A]={},M=D(h[A]),S=D(f[A]);M&&S?(k[b]=h[A],k[x]=f[A],w&&(k.orig_x=u[A]),T&&(k.orig_y=d[A])):_&&(n?M:S)?(k[v]=(n?h:f)[A],k.gap=!0,a?(k.s=I,y=!0):k.s=0):k[b]=k[x]=I,g&&(k.id=String(g[A]))}if(z(m,t),N(e,t),F(m,t),_){for(A=0;A<m.length;)m[A][v]===I?m.splice(A,1):A++;if(O.sort(m,function(e,t){return e[v]-t[v]||e.i-t.i}),y){for(A=0;A<m.length-1&&m[A].gap;)A++;for(o=(o=m[A].s)||(m[A].s=0),r=0;r<A;r++)m[r].s=o;for(i=m.length-1;A<i&&m[i].gap;)i--;for(o=m[i].s,r=m.length-1;i<r;r--)m[r].s=o;for(;A<i;)if(m[++A].gap){for(r=A+1;m[r].gap;)r++;for(var E=m[A-1][v],C=m[A-1].s,L=(m[r].s-C)/(m[r][v]-E);A<r;)m[A].s=C+(m[A][v]-E)*L,A++}}}return m},calcMarkerSize:B,calcAxisExpansion:j,setFirstScatter:H,getStackOpts:U}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"./arrays_to_calcdata":493,"./calc_selection":496,"./colorscale_calc":497,"./subtypes":519,"fast-isnumeric":31}],496:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":285}],497:[function(e,t,n){"use strict";var r=e("../../components/colorscale/helpers").hasColorscale,i=e("../../components/colorscale/calc"),a=e("./subtypes");t.exports=function(e,t){a.hasLines(t)&&r(t,"line")&&i(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(t)&&(r(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"./subtypes":519}],498:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],499:[function(e,t,n){"use strict";var O=e("./calc");function P(e,t,n,r,i,a,o){i={i:null,gap:i[r]=!0,s:0};i[o]=n,e.splice(t,0,i),t&&n===e[t-1][o]?(r=e[t-1],i.s=r.s,i.i=r.i,i.gap=r.gap):a&&(i.s=(a=n,i=o,o=e[(n=t)-1],(n=e[n+1])?o?o.s+(n.s-o.s)*(a-o[i])/(n[i]-o[i]):n.s:o.s)),t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,r=t.yaxis,t=n._id+r._id,i=e._fullLayout._scatterStackOpts[t];if(i){var a,o,s,l,c,u,d,h,f,p,m,g=e.calcdata;for(m in i){var _,y=(_=i[m]).traceIndices;if(y.length){for(u="interpolate"===_.stackgaps,d=_.groupnorm,f="v"===_.orientation?(h="x","y"):(h="y","x"),p=new Array(y.length),x=0;x<p.length;x++)p[x]=!1;for(var v=g[y[0]],b=new Array(v.length),x=0;x<v.length;x++)b[x]=v[x][h];for(x=1;x<y.length;x++){for(A=g[y[x]],C=a=0;C<A.length;C++){for(s=A[C][h];s>b[a]&&a<b.length;a++)P(A,C,b[a],x,p,u,h),C++;if(s!==b[a]){for(o=0;o<x;o++)P(g[y[o]],a,s,o,p,u,h);b.splice(a,0,s)}a++}for(;a<b.length;a++)P(A,C,b[a],x,p,u,h),C++}var w=b.length;for(C=0;C<v.length;C++){for(l=v[C][f]=v[C].s,x=1;x<y.length;x++)(A=g[y[x]])[0].trace._rawLength=A[0].trace._length,A[0].trace._length=w,l+=A[C].s,A[C][f]=l;if(d)for(c=("fraction"===d?l:l/100)||1,x=0;x<y.length;x++){var T=g[y[x]][C];T[f]/=c,T.sNorm=T.s/c}}for(x=0;x<y.length;x++){var A,k=(A=g[y[x]])[0].trace,M=O.calcMarkerSize(k,k._rawLength),S=Array.isArray(M);if(M&&p[x]||S)for(var E=M,M=new Array(w),C=0;C<w;C++)M[C]=A[C].gap?0:S?E[A[C].i]:E;var L=new Array(w),D=new Array(w);for(C=0;C<w;C++)L[C]=A[C].x,D[C]=A[C].y;O.calcAxisExpansion(e,k,n,r,L,D,M),A[0].t.orientation=_.orientation}}}}}},{"./calc":495}],500:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=t-1;0<=i;i--){var a=e[i];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}}},{}],501:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry"),c=e("./attributes"),u=e("./constants"),d=e("./subtypes"),h=e("./xy_defaults"),f=e("./period_defaults"),p=e("./stack_defaults"),m=e("./marker_defaults"),g=e("./line_defaults"),_=e("./line_shape_defaults"),y=e("./text_defaults"),v=e("./fillcolor_defaults");t.exports=function(n,r,e,t){function i(e,t){return s.coerce(n,r,c,e,t)}var a,o=h(n,r,t,i);o||(r.visible=!1),r.visible&&(f(n,r,t,i),i("xhoverformat"),i("yhoverformat"),o=!(a=p(n,r,t,i))&&o<u.PTS_LINESONLY?"lines+markers":"lines",i("text"),i("hovertext"),i("mode",o),d.hasLines(r)&&(g(n,r,e,t,i),_(n,r,i),i("connectgaps"),i("line.simplify")),d.hasMarkers(r)&&m(n,r,e,t,i,{gradient:!0}),d.hasText(r)&&(i("texttemplate"),y(n,r,t,i)),o=[],(d.hasMarkers(r)||d.hasText(r))&&(i("cliponaxis"),i("marker.maxdisplayed"),o.push("points")),i("fill",a?a.fillDflt:"none"),"none"!==r.fill&&(v(n,r,e,i),d.hasLines(r)||_(n,r,i)),t=(r.line||{}).color,a=(r.marker||{}).color,"tonext"!==r.fill&&"toself"!==r.fill||o.push("fills"),i("hoveron",o.join("+")||"points"),"fills"!==r.hoveron&&i("hovertemplate"),(o=l.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||a||e,{axis:"y"}),o(n,r,t||a||e,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(r,i))}},{"../../lib":285,"../../registry":373,"./attributes":494,"./constants":498,"./fillcolor_defaults":502,"./line_defaults":507,"./line_shape_defaults":509,"./marker_defaults":513,"./period_defaults":514,"./stack_defaults":517,"./subtypes":519,"./text_defaults":520,"./xy_defaults":521}],502:[function(e,t,n){"use strict";var s=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r){var i,a,o=!1;t.marker&&(i=t.marker.color,a=(t.marker.line||{}).color,i&&!l(i)?o=i:a&&!l(a)&&(o=a)),r("fillcolor",s.addOpacity((t.line||{}).color||o||n,.5))}},{"../../components/color":155,"../../lib":285}],503:[function(e,t,n){"use strict";var a=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},i={_fullLayout:n},n=a.getFromTrace(i,t,"x"),t=a.getFromTrace(i,t,"y");return r.xLabel=a.tickText(n,n.c2l(e.x),!0).text,r.yLabel=a.tickText(t,t.c2l(e.y),!0).text,r}},{"../../plots/cartesian/axes":331}],504:[function(e,t,n){"use strict";var a=e("../../components/color"),o=e("./subtypes");t.exports=function(e,t){var n;if("lines"===e.mode)return(n=e.line.color)&&a.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var r=t.mcc||(e.marker||{}).color,i=t.mlcc||((e.marker||{}).line||{}).color;return(i=r&&a.opacity(r)?r:i&&a.opacity(i)&&(t.mlw||((e.marker||{}).line||{}).width)?i:"")?a.opacity(i)<.3?a.addOpacity(i,.3):i:(n=(e.line||{}).color)&&a.opacity(n)&&o.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":155,"./subtypes":519}],505:[function(e,t,n){"use strict";var P=e("../../lib"),R=e("../../components/fx"),I=e("../../registry"),N=e("./get_trace_color"),z=e("../../components/color"),F=P.fillText;t.exports=function(e,t,n,r){var i=e.cd,a=i[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),c=s.c2p(n),u=[l,c],d=a.hoveron||"",h=-1!==a.mode.indexOf("markers")?3:.5;if(-1!==d.indexOf("points")){var f=function(e){var t=Math.max(h,e.mrc||0),n=o.c2p(e.x)-l,e=s.c2p(e.y)-c;return Math.max(Math.sqrt(n*n+e*e)-t,1-h/t)},p=R.getDistanceFunction(r,function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(o.c2p(e.x)-l);return void 0!==e.orig_x&&(r+=o.c2p(e.orig_x)-o.c2p(e.x)),r<t?n*r/t:r-t+n},function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(s.c2p(e.y)-c);return void 0!==e.orig_y&&(r+=s.c2p(e.orig_y)-s.c2p(e.y)),r<t?n*r/t:r-t+n},f);if(R.getClosest(i,p,e),!1!==e.index){var m=i[e.index],g=o.c2p(m.x,!0),t=s.c2p(m.y,!0),n=m.mrc||1;e.index=m.i;r=i[0].t.orientation,p=r&&(m.sNorm||m.s),i="h"===r?p:void 0!==m.orig_x?m.orig_x:m.x,p="v"===r?p:void 0!==m.orig_y?m.orig_y:m.y;return P.extendFlat(e,{color:N(a,m),x0:g-n,x1:g+n,xLabelVal:i,y0:t-n,y1:t+n,yLabelVal:p,spikeDistance:f(m),hovertemplate:a.hovertemplate}),F(m,a,e),I.getComponentMethod("errorbars","hoverInfo")(m,a,e),[e]}}if(-1!==d.indexOf("fills")&&a._polygons){var _,y,v,b,x,w,T,A=a._polygons,k=[],M=!1,S=1/0,E=-1/0,C=1/0,L=-1/0;for(O=0;O<A.length;O++)(y=A[O]).contains(u)&&(M=!M,k.push(y),C=Math.min(C,y.ymin),L=Math.max(L,y.ymax));if(M){for(var D=((C=Math.max(C,0))+(L=Math.min(L,s._length)))/2,O=0;O<k.length;O++)for(v=k[O].pts,_=1;_<v.length;_++)D<(w=v[_-1][1])!=D<=(T=v[_][1])&&(b=v[_-1][0],x=v[_][0],T-w&&(w=b+(x-b)*(D-w)/(T-w),S=Math.min(S,w),E=Math.max(E,w)));S=Math.max(S,0),E=Math.min(E,o._length),d=z.defaultLine;return z.opacity(a.fillcolor)?d=a.fillcolor:z.opacity((a.line||{}).color)&&(d=a.line.color),P.extendFlat(e,{distance:e.maxHoverDistance,x0:S,x1:E,y0:D,y1:D,color:d,hovertemplate:!1}),delete e.index,a.text&&!Array.isArray(a.text)?e.text=String(a.text):e.text=a.name,[e]}}}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../registry":373,"./get_trace_color":504}],506:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./arrays_to_calcdata":493,"./attributes":494,"./calc":495,"./cross_trace_calc":499,"./cross_trace_defaults":500,"./defaults":501,"./format_labels":503,"./hover":505,"./marker_colorbar":512,"./plot":515,"./select":516,"./style":518,"./subtypes":519}],507:[function(e,t,n){"use strict";var s=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,i,a){var o=(e.marker||{}).color;i("line.color",n),l(e,"line")?c(e,t,r,i,{prefix:"line.",cLetter:"c"}):i("line.color",!s(o)&&o||n),i("line.width"),(a||{}).noDash||i("line.dash")}},{"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],508:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),ae=r.BADNUM,r=r.LOG_CLIP,oe=r+.5,se=r-.5,le=e("../../lib"),ce=le.segmentsIntersect,ue=le.constrain,de=e("./constants");t.exports=function(r,i){var e,t,n,a,o,s,l,c,u,d,h,f,p,m,g,_,y=i.xaxis,v=i.yaxis,b="log"===y.type,x="log"===v.type,w=y._length,T=v._length,A=i.connectGaps,k=i.baseTolerance,M=i.shape,S="linear"===M,E=i.fill&&"none"!==i.fill,C=[],L=de.minTolerance,D=r.length,O=new Array(D),P=0;function R(e){var t=r[e];if(!t)return!1;var n=i.linearized?y.l2p(t.x):y.c2p(t.x),e=i.linearized?v.l2p(t.y):v.c2p(t.y);if(n===ae){if((n=b?y.c2p(t.x,!0):n)===ae)return!1;x&&e===ae&&(n*=Math.abs(y._m*T*(0<y._m?oe:se)/(v._m*w*(0<v._m?oe:se)))),n*=1e3}if(e===ae){if((e=x?v.c2p(t.y,!0):e)===ae)return!1;e*=1e3}return[n,e]}function I(e,t,n,r){var i=n-e,a=r-t,n=.5-e,r=.5-t,e=i*i+a*a,t=i*n+a*r;if(0<t&&t<e){i=n*a-r*i;return i*i<e?1:void 0}}function N(e,t){var n=e[0]/w,r=e[1]/T,e=Math.max(0,-n,n-1,-r,r-1);return(e=e&&void 0!==g&&I(n,r,g,_)?0:e)&&t&&I(n,r,t[0]/w,t[1]/T)&&(e=0),(1+de.toleranceGrowth*e)*k}function z(e,t){var n=e[0]-t[0],t=e[1]-t[1];return Math.sqrt(n*n+t*t)}var F,j,B,H,U,V,q,Y=de.maxScreensAway,G=-w*Y,W=w*(1+Y),X=-T*Y,Z=T*(1+Y),J=[[G,X,W,X],[W,X,W,Z],[W,Z,G,Z],[G,Z,G,X]];function $(e){if(e[0]<G||e[0]>W||e[1]<X||e[1]>Z)return[ue(e[0],G,W),ue(e[1],X,Z)]}function Q(e,t){return e[0]===t[0]&&(e[0]===G||e[0]===W)||e[1]===t[1]&&(e[1]===X||e[1]===Z)}function K(a,o,s){return function(e,t){var n=$(e),r=$(t),i=[];if(n&&r&&Q(n,r))return i;n&&i.push(n),r&&i.push(r);t=2*le.constrain((e[a]+t[a])/2,o,s)-((n||e)[a]+(r||t)[a]);return t&&((n&&r?0<t==n[a]>r[a]?n:r:n||r)[a]+=t),i}}function ee(e){var t,n,r=e[0],i=e[1],a=r===O[P-1][0],o=i===O[P-1][1];a&&o||(1<P?(t=r===O[P-2][0],n=i===O[P-2][1],a&&(r===G||r===W)&&t?n?P--:O[P-1]=e:o&&(i===X||i===Z)&&n?t?P--:O[P-1]=e:O[P++]=e):O[P++]=e)}function te(e){O[P-1][0]!==e[0]&&O[P-1][1]!==e[1]&&ee([B,H]),ee(e),U=null,B=H=0}function ne(e){var t,n,r;g=e[0]/w,_=e[1]/T,F=e[0]<G?G:e[0]>W?W:0,j=e[1]<X?X:e[1]>Z?Z:0,F||j?(P?U?1<(n=q(U,e)).length&&(te(n[0]),O[P++]=n[1]):(V=q(O[P-1],e)[0],O[P++]=V):O[P++]=[F||e[0],j||e[1]],r=O[P-1],F&&j&&(r[0]!==F||r[1]!==j)?(U&&(B!==F&&H!==j?ee(B&&H?(t=U,n=e[0]-t[0],r=(e[1]-t[1])/n,0<(t[1]*e[0]-e[1]*t[0])/n?[0<r?G:W,Z]:[0<r?W:G,X]):[B||F,H||j]):B&&H&&ee([B,H])),ee([F,j])):B-F&&H-j&&ee([F||B,j||H]),U=e,B=F,H=j):(U&&te(q(U,e)[0]),O[P++]=e)}for("linear"===M||"spline"===M?q=function(e,t){for(var n=[],r=0,i=0;i<4;i++){var a=J[i],a=ce(e[0],e[1],t[0],t[1],a[0],a[1],a[2],a[3]);a&&(!r||1<Math.abs(a.x-n[0][0])||1<Math.abs(a.y-n[0][1]))&&(a=[a.x,a.y],r&&z(a,e)<z(n[0],e)?n.unshift(a):n.push(a),r++)}return n}:"hv"===M||"vh"===M?q=function(e,t){var n=[],e=$(e),t=$(t);return e&&t&&Q(e,t)||(e&&n.push(e),t&&n.push(t)),n}:"hvh"===M?q=K(0,G,W):"vhv"===M&&(q=K(1,X,Z)),e=0;e<D;e++)if(t=R(e)){for(P=0,U=null,ne(t),e++;e<D;e++){if(!(a=R(e))){if(A)continue;break}if(S&&i.simplify){var re=R(e+1),ie=z(a,t);if(E&&(0===P||P===D-1)||!(ie<N(a,re)*L)){for(o=t,l=!(c=[(a[d=f=p=0]-t[0])/(u=ie),(a[1]-t[1])/ie]),n=a,e++;e<r.length;e++){if(s=re,re=R(e+1),!s){if(A)continue;break}if(m=(h=[s[0]-t[0],s[1]-t[1]])[0]*c[1]-h[1]*c[0],f=Math.min(f,m),(p=Math.max(p,m))-f>N(s,re))break;n=s,u<(h=h[0]*c[0]+h[1]*c[1])?(u=h,a=s,l=!1):h<d&&(d=h,o=s,l=!0)}if(l?(ne(a),n!==o&&ne(o)):(o!==t&&ne(o),n!==a&&ne(a)),ne(n),e>=r.length||!s)break;ne(s),t=s}}else ne(a)}U&&ee([B||U[0],H||U[1]]),C.push(O.slice(0,P))}return C}},{"../../constants/numerical":265,"../../lib":285,"./constants":498}],509:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],510:[function(e,t,n){"use strict";var m={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){for(var r,i,a,o,s={},l=!1,c=-1,u=0,d=-1,h=0;h<n.length;h++)(i=(r=n[h][0].trace).stackgroup||"")?i in s?o=s[i]:(o=s[i]=u,u++):r.fill in m&&0<=d?o=d:(o=d=u,u++),o<c&&(l=!0),r._groupIndex=c=o;var f=n.slice();l&&f.sort(function(e,t){e=e[0].trace,t=t[0].trace;return e._groupIndex-t._groupIndex||e.index-t.index});var p={};for(h=0;h<f.length;h++)i=(r=f[h][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in m&&(a=p[i],r._prevtrace=a||null,a&&(a._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),p[i]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return f}},{}],511:[function(e,t,n){"use strict";var i=e("fast-isnumeric");t.exports=function(e){var e=e.marker,t=e.sizeref||1,n=e.sizemin||0,r="area"===e.sizemode?function(e){return Math.sqrt(e/t)}:function(e){return e/t};return function(e){e=r(e/2);return i(e)&&0<e?Math.max(e,n):0}}},{"fast-isnumeric":31}],512:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],513:[function(e,t,n){"use strict";var l=e("../../components/color"),c=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),d=e("./subtypes");t.exports=function(e,t,n,r,i,a){var o=d.isBubble(e),s=(e.line||{}).color;a=a||{},s&&(n=s),i("marker.symbol"),i("marker.opacity",o?.7:1),i("marker.size"),i("marker.color",n),c(e,"marker")&&u(e,t,r,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:o?l.background:l.defaultLine),c(e,"marker.line")&&u(e,t,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",o?1:0)),o&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"./subtypes":519}],514:[function(e,t,n){"use strict";var r=e("../../lib").dateTick0,i=e("../../constants/numerical").ONEWEEK;function o(e,t){return r(t,e%i==0?1:0)}t.exports=function(e,t,n,r,i){var a;!(i=i||{x:!0,y:!0}).x||(a=r("xperiod"))&&(r("xperiod0",o(a,t.xcalendar)),r("xperiodalignment")),!i.y||(i=r("yperiod"))&&(r("yperiod0",o(i,t.ycalendar)),r("yperiodalignment"))}},{"../../constants/numerical":265,"../../lib":285}],515:[function(e,t,n){"use strict";var U=e("@plotly/d3"),V=e("../../registry"),q=e("../../lib"),Y=q.ensureSingle,G=q.identity,W=e("../../components/drawing"),X=e("./subtypes"),Z=e("./line_points"),h=e("./link_traces"),J=e("../../lib/polygon").tester;function f(h,e,f,n,t,r,i){var a,o,s,l,c,u,d;o=e,w=n,x=t,e=(b=f).xaxis,b=b.yaxis,u=U.extent(q.simpleMap(e.range,e.r2c)),d=U.extent(q.simpleMap(b.range,b.r2c)),e=w[0].trace,!X.hasMarkers(e)||0!==(b=e.marker.maxdisplayed)&&(e=w.filter(function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=d[0]&&e.y<=d[1]}),s=Math.ceil(e.length/b),l=0,x.forEach(function(e,t){e=e[0].trace;X.hasMarkers(e)&&0<e.marker.maxdisplayed&&t<o&&l++}),c=Math.round(l*s/3+Math.floor(l/3)*s/7.1),w.forEach(function(e){delete e.vis}),e.forEach(function(e,t){0===Math.round((t+c)%s)&&(e.vis=!0)}));var p=!!i&&0<i.duration;function m(e){return p?e.transition():e}var g=f.xaxis,_=f.yaxis,y=n[0].trace,v=y.line,t=U.select(r),b=Y(t,"g","errorbars"),x=Y(t,"g","lines"),w=Y(t,"g","points"),e=Y(t,"g","text");if(V.getComponentMethod("errorbars","plot")(h,b,f,i),!0===y.visible){m(t).style("opacity",y.opacity);var T=y.fill.charAt(y.fill.length-1);"x"!==T&&"y"!==T&&(T=""),n[0][f.isRangePlot?"nodeRangePlot3":"node3"]=t;var A,k,r="",b=[],i=y._prevtrace;i&&(r=i._prevRevpath||"",I=i._nextFill,b=i._polygons);var M,S,E,C,L,D,O="",P="",R=[],t=q.noop,i=y._ownFill;if(X.hasLines(y)||"none"!==y.fill){for(I&&I.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(v.shape)?(M=W.steps(v.shape),S=W.steps(v.shape.split("").reverse().join(""))):M=S="spline"===v.shape?function(e){var t=e[e.length-1];return 1<e.length&&e[0][0]===t[0]&&e[0][1]===t[1]?W.smoothclosed(e.slice(1),v.smoothing):W.smoothopen(e,v.smoothing)}:function(e){return"M"+e.join("L")},E=function(e){return S(e.reverse())},R=Z(n,{xaxis:g,yaxis:_,connectGaps:y.connectgaps,baseTolerance:Math.max(v.width||1,3)/4,shape:v.shape,simplify:v.simplify,fill:y.fill}),D=y._polygons=new Array(R.length),a=0;a<R.length;a++)y._polygons[a]=J(R[a]);R.length&&(C=R[0][0],L=(L=R[R.length-1])[L.length-1]),t=function(t){return function(e){A=M(e),k=E(e),P=O?T?(O+="L"+A.substr(1),k+("L"+P.substr(1))):(O+="Z"+A,k+"Z"+P):(O=A,k),X.hasLines(y)&&1<e.length&&((e=U.select(this)).datum(n),t?m(e.style("opacity",0).attr("d",A).call(W.lineGroupStyle)).style("opacity",1):((e=m(e)).attr("d",A),W.singleLineStyle(n,e)))}}}x=x.selectAll(".js-line").data(R);m(x.exit()).style("opacity",0).remove(),x.each(t(!1)),x.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(W.lineGroupStyle).each(t(!0)),W.setClipUrl(x,f.layerClipId,h),R.length?(i?(i.datum(n),C&&L&&(T?("y"===T?C[1]=L[1]=_.c2p(0,!0):"x"===T&&(C[0]=L[0]=g.c2p(0,!0)),m(i).attr("d","M"+L+"L"+C+"L"+O.substr(1)).call(W.singleFillStyle)):m(i).attr("d",O+"Z").call(W.singleFillStyle))):I&&("tonext"===y.fill.substr(0,6)&&O&&r?(("tonext"===y.fill?m(I).attr("d",O+"Z"+r+"Z"):m(I).attr("d",O+"L"+r.substr(1)+"Z")).call(W.singleFillStyle),y._polygons=y._polygons.concat(b)):(N(I),y._polygons=null)),y._prevRevpath=P,y._prevPolygons=D):(i?N(i):I&&N(I),y._polygons=y._prevRevpath=y._prevPolygons=null),w.datum(n),e.datum(n),function(e,t,n){var r,i,a=n[0].trace,o=X.hasMarkers(a),s=X.hasText(a),l=function(e){if(e.ids)return B}(a),c=H,u=H;(o||s)&&(r=G,n=(i=a.stackgroup)&&"infer zero"===h._fullLayout._scatterStackOpts[g._id+_._id][i].stackgaps,a.marker.maxdisplayed||a._needsCull?r=n?F:z:i&&!n&&(r=j),o&&(c=r),s&&(u=r));var d,c=(e=e.selectAll("path.point").data(c,l)).enter().append("path").classed("point",!0);p&&c.call(W.pointStyle,a,h).call(W.translatePoints,g,_).style("opacity",0).transition().style("opacity",1),e.order(),o&&(d=W.makePointStyleFns(a)),e.each(function(e){var t=U.select(this),n=m(t);W.translatePoint(e,n,g,_)?(W.singlePointStyle(e,n,a,d,h),f.layerClipId&&W.hideOutsideRangePoint(e,n,g,_,a.xcalendar,a.ycalendar),a.customdata&&t.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):n.remove()}),(p?e.exit().transition().style("opacity",0):e.exit()).remove(),(e=t.selectAll("g").data(u,l)).enter().append("g").classed("textpoint",!0).append("text"),e.order(),e.each(function(e){var t=U.select(this),n=m(t.select("text"));W.translatePoint(e,n,g,_)?f.layerClipId&&W.hideOutsideRangePoint(e,t,g,_,a.xcalendar,a.ycalendar):t.remove()}),e.selectAll("text").call(W.textPointStyle,a,h).each(function(e){var t=g.c2p(e.x),n=_.c2p(e.y);U.select(this).selectAll("tspan.line").each(function(){m(U.select(this)).attr({x:t,y:n})})}),e.exit().remove()}(w,e,n);var I=!1===y.cliponaxis?null:f.layerClipId;W.setClipUrl(w,I,h),W.setClipUrl(e,I,h)}function N(e){m(e).attr("d","M0,0Z")}function z(e){return e.filter(function(e){return!e.gap&&e.vis})}function F(e){return e.filter(function(e){return e.vis})}function j(e){return e.filter(function(e){return!e.gap})}function B(e){return e.id}function H(){return!1}}t.exports=function(n,r,e,t,i,a){var o,s,l,c=!i,u=!!i&&0<i.duration,d=h(n,r,e),e=t.selectAll("g.trace").data(d,function(e){return e[0].trace.uid});e.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),e.order(),s=n,l=r,e.each(function(e){var t=Y(U.select(this),"g","fills");W.setClipUrl(t,l.layerClipId,s);var n=e[0].trace,e=[];n._ownfill&&e.push("_ownFill"),n._nexttrace&&e.push("_nextFill");e=t.selectAll("g").data(e,G);e.enter().append("g"),e.exit().each(function(e){n[e]=null}).remove(),e.order().each(function(e){n[e]=Y(U.select(this),"path","js-fill")})}),u?(a&&(o=a()),U.transition().duration(i.duration).ease(i.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){t.selectAll("g.trace").each(function(e,t){f(n,t,r,e,d,this,i)})})):e.each(function(e,t){f(n,t,r,e,d,this,i)}),c&&e.exit().remove(),t.selectAll("path:not([d])").remove()}},{"../../components/drawing":177,"../../lib":285,"../../lib/polygon":297,"../../registry":373,"./line_points":508,"./link_traces":510,"./subtypes":519,"@plotly/d3":20}],516:[function(e,t,n){"use strict";var d=e("./subtypes");t.exports=function(e,t){var n,r,i,a,o=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=o[0].trace;if(!d.hasMarkers(u)&&!d.hasText(u))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],i=s.c2p(r.x),a=l.c2p(r.y),null!==r.i&&t.contains([i,a],!1,n,e)?(c.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return c}},{"./subtypes":519}],517:[function(e,t,n){"use strict";var _=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,r){var i=n._scatterStackOpts,a=r("stackgroup");if(a){var o=t.xaxis+t.yaxis,n=i[o],s=(n=n||(i[o]={}))[a],l=!1;s?s.traces.push(t):(s=n[a]={traceIndices:[],traces:[t]},l=!0);for(var c={orientation:t.x&&!t.y?"h":"v"},u=0;u<_.length;u++){var d=_[u],h=d+"Found";if(!s[h]){var f=void 0!==e[d],p="orientation"===d;if((f||l)&&(s[d]=r(d,c[d]),p&&(s.fillDflt="h"===s[d]?"tonextx":"tonexty"),f&&(s[h]=!0,!l&&(delete s.traces[0][d],p))))for(var m=0;m<s.traces.length-1;m++){var g=s.traces[m];g._input.fill!==g.fill&&(g.fill=s.fillDflt)}}}return s}}},{}],518:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../../components/drawing"),a=e("../../registry");function o(e,t,n){i.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){i.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity}),e.selectAll("g.points").each(function(e){o(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(i.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),a.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(e,t,n){(t=t[0].trace).selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),t),i.selectedTextStyle(n.selectAll("text"),t)):(o(n,t,e),s(n,t,e))}}},{"../../components/drawing":177,"../../registry":373,"@plotly/d3":20}],519:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":285}],520:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t,n,r,i){i=i||{},r("textposition"),a.coerceFont(r,"textfont",n.font),i.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":285}],521:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");t.exports=function(e,t,n,r){var i,a=r("x"),o=r("y");if(l.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),a){a=s.minRowLength(a);o?i=Math.min(a,s.minRowLength(o)):(i=a,r("y0"),r("dy"))}else{if(!o)return 0;i=s.minRowLength(o),r("x0"),r("dx")}return t._length=i}},{"../../lib":285,"../../registry":373}],522:[function(e,t,n){"use strict";var r=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("../scatter/attributes"),o=e("../../plots/attributes"),s=e("../../components/colorscale/attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../lib/extend").extendFlat,u=a.marker,d=a.line,e=u.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:c({},a.mode,{dflt:"markers"}),text:c({},a.text,{}),texttemplate:i({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:c({},a.hovertext,{}),line:{color:d.color,width:d.width,dash:l,shape:c({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:a.connectgaps,cliponaxis:a.cliponaxis,fill:c({},a.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:a.fillcolor,marker:c({symbol:u.symbol,opacity:u.opacity,maxdisplayed:u.maxdisplayed,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,line:c({width:e.width,editType:"calc"},s("marker.line")),gradient:u.gradient,editType:"calc"},s("marker")),textfont:a.textfont,textposition:a.textposition,selected:a.selected,unselected:a.unselected,hoverinfo:c({},o.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:a.hoveron,hovertemplate:r()}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"../scatter/attributes":494}],523:[function(e,t,n){"use strict";var _=e("fast-isnumeric"),y=e("../scatter/colorscale_calc"),v=e("../scatter/arrays_to_calcdata"),b=e("../scatter/calc_selection"),x=e("../scatter/calc").calcMarkerSize,w=["a","b","c"],T={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function(e,t){for(var n,r,i,a,o,s=e._fullLayout[t.subplot].sum,l=t.sum||s,c={a:t.a,b:t.b,c:t.c},u=0;u<w.length;u++)if(!c[r=w[u]]){for(a=c[T[r][0]],o=c[T[r][1]],i=new Array(a.length),n=0;n<a.length;n++)i[n]=l-a[n]-o[n];c[r]=i}var d,h,f,p,m=t._length,g=new Array(m);for(u=0;u<m;u++)d=c.a[u],h=c.b[u],f=c.c[u],_(d)&&_(h)&&_(f)?(1!=(p=s/((d=+d)+(h=+h)+(f=+f)))&&(d*=p,h*=p,f*=p),p=d,g[u]={x:f-h,y:p,a:d,b:h,c:f}):g[u]={x:!1,y:!1};return x(t,m),y(e,t),v(g,t),b(g,t),g}},{"../scatter/arrays_to_calcdata":493,"../scatter/calc":495,"../scatter/calc_selection":496,"../scatter/colorscale_calc":497,"fast-isnumeric":31}],524:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("../scatter/constants"),d=e("../scatter/subtypes"),h=e("../scatter/marker_defaults"),f=e("../scatter/line_defaults"),p=e("../scatter/line_shape_defaults"),m=e("../scatter/text_defaults"),g=e("../scatter/fillcolor_defaults"),_=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return c.coerce(n,r,_,e,t)}var a,o=i("a"),s=i("b"),l=i("c");o?(a=o.length,s?(a=Math.min(a,s.length),l&&(a=Math.min(a,l.length))):a=l?Math.min(a,l.length):0):s&&l&&(a=Math.min(s.length,l.length)),a?(r._length=a,i("sum"),i("text"),i("hovertext"),"fills"!==r.hoveron&&i("hovertemplate"),i("mode",a<u.PTS_LINESONLY?"lines+markers":"lines"),d.hasLines(r)&&(f(n,r,e,t,i),p(n,r,i),i("connectgaps")),d.hasMarkers(r)&&h(n,r,e,t,i,{gradient:!0}),d.hasText(r)&&(i("texttemplate"),m(n,r,t,i)),t=[],(d.hasMarkers(r)||d.hasText(r))&&(i("cliponaxis"),i("marker.maxdisplayed"),t.push("points")),i("fill"),"none"!==r.fill&&(g(n,r,e,i),d.hasLines(r)||p(n,r,i)),"tonext"!==r.fill&&"toself"!==r.fill||t.push("fills"),i("hoveron",t.join("+")||"points"),c.coerceSelectionMarkerOpacity(r,i)):r.visible=!1}},{"../../lib":285,"../scatter/constants":498,"../scatter/fillcolor_defaults":502,"../scatter/line_defaults":507,"../scatter/line_shape_defaults":509,"../scatter/marker_defaults":513,"../scatter/subtypes":519,"../scatter/text_defaults":520,"./attributes":522}],525:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){return t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),r[i]?(i=r[i],e.a=i.a,e.b=i.b,e.c=i.c):(e.a=t.a,e.b=t.b,e.c=t.c),e}},{}],526:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},t=n[t.subplot]._subplot;return r.aLabel=i.tickText(t.aaxis,e.a,!0).text,r.bLabel=i.tickText(t.baxis,e.b,!0).text,r.cLabel=i.tickText(t.caxis,e.c,!0).text,r}},{"../../plots/cartesian/axes":331}],527:[function(e,t,n){"use strict";var u=e("../scatter/hover");t.exports=function(e,t,n,r){n=u(e,t,n,r);if(n&&!1!==n[0].index){r=n[0];if(void 0===r.index){var i=1-r.y0/e.ya._length,a=e.xa._length,o=a*i/2,s=a-o;return r.x0=Math.max(Math.min(r.x0,s),o),r.x1=Math.max(Math.min(r.x1,s),o),n}i=r.cd[r.index],a=r.trace,s=r.subplot;r.a=i.a,r.b=i.b,r.c=i.c,r.xLabelVal=void 0,r.yLabelVal=void 0;o={};o[a.subplot]={_subplot:s};o=a._module.formatLabels(i,a,o);r.aLabel=o.aLabel,r.bLabel=o.bLabel,r.cLabel=o.cLabel;var i=i.hi||a.hoverinfo,l=[];return a.hovertemplate||(-1!==(i=-1!==(i=i.split("+")).indexOf("all")?["a","b","c"]:i).indexOf("a")&&c(s.aaxis,r.aLabel),-1!==i.indexOf("b")&&c(s.baxis,r.bLabel),-1!==i.indexOf("c")&&c(s.caxis,r.cLabel)),r.extraText=l.join("<br>"),r.hovertemplate=a.hovertemplate,n}function c(e,t){l.push(e._hovertitle+": "+t)}}},{"../scatter/hover":505}],528:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":369,"../scatter/marker_colorbar":512,"../scatter/select":516,"../scatter/style":518,"./attributes":522,"./calc":523,"./defaults":524,"./event_data":525,"./format_labels":526,"./hover":527,"./plot":529}],529:[function(e,t,n){"use strict";var i=e("../scatter/plot");t.exports=function(e,t,n){var r=t.plotContainer;r.select(".scatterlayer").selectAll("*").remove();r={xaxis:t.xaxis,yaxis:t.yaxis,plot:r,layerClipId:t._hasClipOnAxisFalse?t.clipIdRelative:null},t=t.layers.frontplot.select("g.scatterlayer");i(e,r,n,t)}},{"../scatter/plot":515}],530:[function(e,t,n){"use strict";var r=e("../box/attributes"),i=e("../../lib/extend").extendFlat,e=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;t.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,xhoverformat:e("x"),yhoverformat:e("y"),name:i({},r.name,{}),orientation:i({},r.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,points:i({},r.boxpoints,{}),jitter:i({},r.jitter,{}),pointpos:i({},r.pointpos,{}),width:i({},r.width,{}),marker:r.marker,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../box/attributes":400}],531:[function(e,t,n){"use strict";var w=e("../../lib"),T=e("../../plots/cartesian/axes"),A=e("../box/calc"),k=e("./helpers"),M=e("../../constants/numerical").BADNUM;t.exports=function(e,t){var n=A(e,t);if(n[0].t.empty)return n;for(var r=e._fullLayout,i=T.getFromId(e,t["h"===t.orientation?"xaxis":"yaxis"]),a=1/0,o=-1/0,s=0,l=0,c=0;c<n.length;c++){var u=n[c],d=u.pts.map(k.extractVal),h=u.bandwidth=function(e,t,n){var r=t.max-t.min;if(!r)return e.bandwidth||0;{if(e.bandwidth)return Math.max(e.bandwidth,r/1e4);e=n.length,n=w.stdev(n,e-1,t.mean);return Math.max(function(e,t,n){return 1.059*Math.min(t,n/1.349)*Math.pow(e,-.2)}(e,n,t.q3-t.q1),r/100)}}(t,u,d),f=u.span=function(n,r,i,e){var t=n.spanmode,a=n.span||[],o=[r.min,r.max],s=[r.min-2*e,r.max+2*e];function l(e){var t=a[e],t="multicategory"===i.type?i.r2c(t):i.d2c(t,0,n[r.valLetter+"calendar"]);return t===M?s[e]:t}t="soft"===t?s:"hard"===t?o:[l(0),l(1)];o={type:"linear",range:t};return T.setConvert(o),o.cleanRange(),t}(t,u,i,h);if(u.min===u.max&&0===h)f=u.span=[u.min,u.max],u.density=[{v:1,t:f[0]}],u.bandwidth=h,s=Math.max(s,1);else{var p=f[1]-f[0],h=Math.ceil(p/(h/3)),m=p/h;if(!isFinite(m)||!isFinite(h))return w.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var g=k.makeKDE(u,t,d);u.density=new Array(h);for(var _=0,y=f[0];y<f[1]+m/2;_++,y+=m){var v=g(y);u.density[_]={v:v,t:y},s=Math.max(s,v)}}l=Math.max(l,d.length),a=Math.min(a,f[0]),o=Math.max(o,f[1])}var b,x=T.findExtremes(i,[a,o],{padded:!0});return t._extremes[i._id]=x,t.width?n[0].t.maxKDE=s:(r=(b=r._violinScaleGroupStats)[x=t.scalegroup])?(r.maxKDE=Math.max(r.maxKDE,s),r.maxCount=Math.max(r.maxCount,l)):b[x]={maxKDE:s,maxCount:l},n[0].t.labels.kde=w._(e,"kde:"),n}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../box/calc":401,"./helpers":534}],532:[function(e,t,n){"use strict";var h=e("../box/cross_trace_calc").setPositionOffset,f=["v","h"];t.exports=function(e,t){for(var n=e.calcdata,r=t.xaxis,i=t.yaxis,a=0;a<f.length;a++){for(var o=f[a],s="h"===o?i:r,l=[],c=0;c<n.length;c++){var u=n[c],d=u[0].t,u=u[0].trace;!0!==u.visible||"violin"!==u.type||d.empty||u.orientation!==o||u.xaxis!==r._id||u.yaxis!==i._id||l.push(c)}h("violin",e,l,s)}}},{"../box/cross_trace_calc":402}],533:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../components/color"),h=e("../box/defaults"),f=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return u.coerce(n,r,f,e,t)}function a(e,t){return u.coerce2(n,r,f,e,t)}var o,s,l,c;h.handleSampleDefaults(n,r,i,t),!1!==r.visible&&(i("bandwidth"),i("side"),i("width")||(i("scalegroup",r.name),i("scalemode")),o=i("span"),i("spanmode",s=Array.isArray(o)?"manual":s),l=i("line.color",(n.marker||{}).color||e),c=i("line.width"),t=i("fillcolor",d.addOpacity(r.line.color,.5)),h.handlePointsDefaults(n,r,i,{prefix:""}),o=a("box.width"),s=a("box.fillcolor",t),e=a("box.line.color",l),t=a("box.line.width",c),i("box.visible",Boolean(o||s||e||t))||(r.box={visible:!1}),l=a("meanline.color",l),c=a("meanline.width",c),i("meanline.visible",Boolean(l||c))||(r.meanline={visible:!1}))}},{"../../components/color":155,"../../lib":285,"../box/defaults":403,"./attributes":530}],534:[function(e,t,i){"use strict";var a=e("../../lib"),n=function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)};i.makeKDE=function(e,t,r){var i=r.length,a=n,o=e.bandwidth,s=1/(i*o);return function(e){for(var t=0,n=0;n<i;n++)t+=a((e-r[n])/o);return s*t}},i.getPositionOnKdePath=function(e,t,n){var r="h"===t.orientation?(i="y","x"):(i="x","y"),r=a.findPointOnPath(e.path,n,r,{pathLength:e.pathLength}),e=e.posCenterPx,i=r[i];return[i,"both"===t.side?2*e-i:e]},i.getKdeValue=function(e,t,n){var r=e.pts.map(i.extractVal);return i.makeKDE(e,t,r)(n)/e.posDensityScale},i.extractVal=function(e){return e.v}},{"../../lib":285}],535:[function(e,t,n){"use strict";var w=e("../../lib"),T=e("../../plots/cartesian/axes"),A=e("../box/hover"),k=e("./helpers");t.exports=function(e,t,n,r,i){var a,o,s,l,c,u,d,h,f,p,m=(i=i||{}).hoverLayer,g=e.cd,_=g[0].trace,y=_.hoveron,v=-1!==y.indexOf("violins"),b=-1!==y.indexOf("kde"),x=[];(v||b)&&(o=A.hoverOnBoxes(e,t,n,r),b&&0<o.length&&(p=e.xa,h=e.ya,u="h"===_.orientation?(c=t,s="y",f=h,l="x",p):(c=n,s="x",f=p,l="y",h),c>=(i=g[e.index]).span[0]&&c<=i.span[1]&&(d=w.extendFlat({},e),b=u.c2p(c,!0),p=k.getKdeValue(i,_,c),h=k.getPositionOnKdePath(i,_,b),i=f._offset,f=f._length,d[s+"0"]=h[0],d[s+"1"]=h[1],d[l+"0"]=d[l+"1"]=b,d[l+"Label"]=l+": "+T.hoverLabelText(u,c,_[l+"hoverformat"])+", "+g[0].t.labels.kde+" "+p.toFixed(3),d.spikeDistance=o[0].spikeDistance,d[p=s+"Spike"]=o[0][p],o[0].spikeDistance=void 0,o[0][p]=void 0,d.hovertemplate=!1,x.push(d),(d={stroke:e.color})[s+"1"]=w.constrain(i+h[0],i,i+f),d[s+"2"]=w.constrain(i+h[1],i,i+f),d[l+"1"]=d[l+"2"]=u._offset+b)),v&&(x=x.concat(o))),-1!==y.indexOf("points")&&(a=A.hoverOnPoints(e,t,n));m=m.selectAll(".violinline-"+_.uid).data(d?[0]:[]);return m.enter().append("line").classed("violinline-"+_.uid,!0).attr("stroke-width",1.5),m.exit().remove(),m.attr(d),"closest"===r?a?[a]:x:(a&&x.push(a),x)}},{"../../lib":285,"../../plots/cartesian/axes":331,"../box/hover":405,"./helpers":534}],536:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"../box/defaults":403,"../box/select":410,"../scatter/style":518,"./attributes":530,"./calc":531,"./cross_trace_calc":532,"./defaults":533,"./hover":535,"./layout_attributes":537,"./layout_defaults":538,"./plot":539,"./style":540}],537:[function(e,t,n){"use strict";var r=e("../box/layout_attributes"),e=e("../../lib").extendFlat;t.exports={violinmode:e({},r.boxmode,{}),violingap:e({},r.boxgap,{}),violingroupgap:e({},r.boxgroupgap,{})}},{"../../lib":285,"../box/layout_attributes":407}],538:[function(e,t,n){"use strict";var i=e("../../lib"),a=e("./layout_attributes"),o=e("../box/layout_defaults");t.exports=function(n,r,e){o._supply(n,r,e,function(e,t){return i.coerce(n,r,a,e,t)},"violin")}},{"../../lib":285,"../box/layout_defaults":408,"./layout_attributes":537}],539:[function(e,t,n){"use strict";var M=e("@plotly/d3"),l=e("../../lib"),r=e("../../components/drawing"),c=e("../box/plot"),i=e("../scatter/line_points"),u=e("./helpers");t.exports=function(e,a,t,n){var A=e._fullLayout,o=a.xaxis,s=a.yaxis;function k(e){e=i(e,{xaxis:o,yaxis:s,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return r.smoothopen(e[0],1)}l.makeTraceGroups(n,t,"trace violins").each(function(e){var m,g,_,y,v,b,x,t,n,r=M.select(this),i=e[0],w=i.t,T=i.trace;!0!==T.visible||w.empty?r.remove():(m=w.bPos,g=w.bdPos,_=a[w.valLetter+"axis"],y=a[w.posLetter+"axis"],v="both"===T.side,b=v||"positive"===T.side,x=v||"negative"===T.side,(e=r.selectAll("path.violin").data(l.identity)).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),e.exit().remove(),e.each(function(e){var t,n,r,i,a,o,s,l,c,u=M.select(this),d=e.density,h=d.length,f=y.c2l(e.pos+m,!0),p=y.l2p(f);if(t=T.width?w.maxKDE/g:(c=A._violinScaleGroupStats[T.scalegroup],"count"===T.scalemode?c.maxKDE/g*(c.maxCount/e.pts.length):c.maxKDE/g),b){for(o=new Array(h),i=0;i<h;i++)(s=o[i]={})[w.posLetter]=f+d[i].v/t,s[w.valLetter]=_.c2l(d[i].t,!0);n=k(o)}if(x){for(o=new Array(h),a=0,i=h-1;a<h;a++,i--)(s=o[a]={})[w.posLetter]=f-d[i].v/t,s[w.valLetter]=_.c2l(d[i].t,!0);r=k(o)}l=v?n+"L"+r.substr(1)+"Z":(l=[p,_.c2p(d[0].t)],c=[p,_.c2p(d[h-1].t)],"h"===T.orientation&&(l.reverse(),c.reverse()),b?"M"+l+"L"+n.substr(1)+"L"+c:"M"+c+"L"+r.substr(1)+"L"+l),u.attr("d",l),e.posCenterPx=p,e.posDensityScale=t*g,e.path=u.node(),e.pathLength=e.path.getTotalLength()/(v?2:1)}),e=(i=T.box).width,i=(i.line||{}).width,i=v?(t=g*e,0):b?(t=[0,g*e/2],i*{x:1,y:-1}[w.posLetter]):(t=[g*e/2,0],i*{x:-1,y:1}[w.posLetter]),c.plotBoxAndWhiskers(r,{pos:y,val:_},T,{bPos:m,bdPos:t,bPosPxOffset:i}),c.plotBoxMean(r,{pos:y,val:_},T,{bPos:m,bdPos:t,bPosPxOffset:i}),!T.box.visible&&T.meanline.visible&&(n=l.identity),(n=r.selectAll("path.meanline").data(n||[])).enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),n.exit().remove(),n.each(function(e){var t=_.c2p(e.mean,!0),e=u.getPositionOnKdePath(e,T,t);M.select(this).attr("d","h"===T.orientation?"M"+t+","+e[0]+"V"+e[1]:"M"+e[0]+","+t+"H"+e[1])}),c.plotPoints(r,{x:o,y:s},T,w))})}},{"../../components/drawing":177,"../../lib":285,"../box/plot":409,"../scatter/line_points":508,"./helpers":534,"@plotly/d3":20}],540:[function(e,t,n){"use strict";var s=e("@plotly/d3"),l=e("../../components/color"),c=e("../scatter/style").stylePoints;t.exports=function(o){var e=s.select(o).selectAll("g.trace.violins");e.style("opacity",function(e){return e[0].trace.opacity}),e.each(function(e){var t=e[0].trace,n=s.select(this),r=t.box||{},i=r.line||{},a=t.meanline||{},e=a.width;n.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(l.stroke,t.line.color).call(l.fill,t.fillcolor),n.selectAll("path.box").style("stroke-width",i.width+"px").call(l.stroke,i.color).call(l.fill,r.fillcolor);e={"stroke-width":e+"px","stroke-dasharray":2*e+"px,"+e+"px"};n.selectAll("path.mean").style(e).call(l.stroke,a.color),n.selectAll("path.meanline").style(e).call(l.stroke,a.color),c(n,t,o)})}},{"../../components/color":155,"../scatter/style":518,"@plotly/d3":20}],541:[function(e,t,n){"use strict";var u=e("../plots/cartesian/axes"),p=e("../lib"),f=e("../plot_api/plot_schema"),m=e("./helpers").pointsAccessorFunction,d=e("../constants/numerical").BADNUM;n.moduleType="transform",n.name="aggregate";var g=n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},_=g.aggregations;function y(e,t,n,r){if(r.enabled){for(var i=r.target,a=p.nestedProperty(t,i),o=a.get(),s=function(c,e){var t=c.func,u=e.d2c,l=e.c2d;switch(t){case"count":return h;case"first":return v;case"last":return b;case"sum":return function(e,t){for(var n=0,r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&(n+=i)}return l(n)};case"avg":return function(e,t){for(var n=0,r=0,i=0;i<t.length;i++){var a=u(e[t[i]]);a!==d&&(n+=a,r++)}return r?l(n/r):d};case"min":return function(e,t){for(var n=1/0,r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&(n=Math.min(n,i))}return n===1/0?d:l(n)};case"max":return function(e,t){for(var n=-1/0,r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&(n=Math.max(n,i))}return n===-1/0?d:l(n)};case"range":return function(e,t){for(var n=1/0,r=-1/0,i=0;i<t.length;i++){var a=u(e[t[i]]);a!==d&&(n=Math.min(n,a),r=Math.max(r,a))}return r===-1/0||n===1/0?d:l(r-n)};case"change":return function(e,t){var n=u(e[t[0]]),t=u(e[t[t.length-1]]);return n===d||t===d?d:l(t-n)};case"median":return function(e,t){for(var n=[],r=0;r<t.length;r++){var i=u(e[t[r]]);i!==d&&n.push(i)}if(!n.length)return d;n.sort(p.sorterAsc);var a=(n.length-1)/2;return l((n[Math.floor(a)]+n[Math.ceil(a)])/2)};case"mode":return function(e,t){for(var n={},r=0,i=d,a=0;a<t.length;a++){var o,s=u(e[t[a]]);s===d||r<(o=n[s]=(n[s]||0)+1)&&(r=o,i=s)}return r?l(i):d};case"rms":return function(e,t){for(var n=0,r=0,i=0;i<t.length;i++){var a=u(e[t[i]]);a!==d&&(n+=a*a,r++)}return r?l(Math.sqrt(n/r)):d};case"stddev":return function(e,t){for(var n=0,r=0,i=1,a=d,o=0;o<t.length&&a===d;o++)a=u(e[t[o]]);if(a===d)return d;for(;o<t.length;o++){var s=u(e[t[o]]);s!==d&&(n+=s=s-a,r+=s*s,i++)}var l="sample"===c.funcmode?i-1:i;return l?Math.sqrt((r-n*n/i)/l):0}}}(r,u.getDataConversions(e,t,i,o)),l=new Array(n.length),c=0;c<n.length;c++)l[c]=s(o,n[c]);a.set(l),"count"===r.func&&p.pushUnique(t._arrayAttrs,i)}}function h(e,t){return t.length}function v(e,t){return e[t[0]]}function b(e,t){return e[t[t.length-1]]}n.supplyDefaults=function(n,e){var r={};function t(e,t){return p.coerce(n,r,g,e,t)}if(!t("enabled"))return r;for(var i=f.findArrayAttributes(e),a={},o=0;o<i.length;o++)a[i[o]]=1;e=t("groups");if(!Array.isArray(e)){if(!a[e])return r.enabled=!1,r;a[e]=0}var s=n.aggregations||[],l=r.aggregations=new Array(s.length);function c(e,t){return p.coerce(s[o],u,_,e,t)}for(o=0;o<s.length;o++){var u={_index:o},d=c("target"),h=c("func");c("enabled")&&d&&(a[d]||"count"===h&&void 0===a[d])?("stddev"===h&&c("funcmode"),a[d]=0,l[o]=u):l[o]={enabled:!1,_index:o}}for(o=0;o<i.length;o++)a[i[o]]&&l.push({target:i[o],func:_.func.dflt,enabled:!0,_index:-1});return r},n.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,i=p.getTargetArray(t,{target:r});if(i){var a,o,s={},l={},c=[],u=m(t.transforms,n),d=i.length;for(t._length&&(d=Math.min(d,t._length)),f=0;f<d;f++)void 0===(o=s[a=i[f]])?(s[a]=c.length,c.push([f]),l[s[a]]=u(f)):(c[o].push(f),l[s[a]]=(l[s[a]]||[]).concat(u(f)));n._indexToPoints=l;for(var h=n.aggregations,f=0;f<h.length;f++)y(e,t,c,h[f]);"string"==typeof r&&y(e,t,c,{target:r,func:"first",enabled:!0}),t._length=c.length}}}},{"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plots/cartesian/axes":331,"./helpers":544}],542:[function(e,t,i){"use strict";var v=e("../lib"),a=e("../registry"),b=e("../plots/cartesian/axes"),x=e("./helpers").pointsAccessorFunction,e=e("../constants/filter_ops"),w=e.COMPARISON_OPS,T=e.INTERVAL_OPS,A=e.SET_OPS;i.moduleType="transform",i.name="filter",i.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(w).concat(T).concat(A),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},i.supplyDefaults=function(n){var r={};function e(e,t){return v.coerce(n,r,i.attributes,e,t)}if(e("enabled")){var t=e("target");if(v.isArrayOrTypedArray(t)&&0===t.length)return r.enabled=!1,r;e("preservegaps"),e("operation"),e("value");t=a.getComponentMethod("calendars","handleDefaults");t(n,r,"valuecalendar",null),t(n,r,"targetcalendar",null)}return r},i.calcTransform=function(e,r,t){if(t.enabled){var n=v.getTargetArray(r,t);if(n){var i=t.target,a=n.length;r._length&&(a=Math.min(a,r._length));var o,s=t.targetcalendar,l=r._arrayAttrs,c=t.preservegaps;"string"!=typeof i||(o=v.nestedProperty(r,i+"calendar").get())&&(s=o);var u,d=function(t,n,r){var i=t.operation,e=t.value,a=Array.isArray(e);function o(e){return-1!==e.indexOf(i)}function s(e){return n(e,0,t.valuecalendar)}function l(e){return n(e,0,r)}var c;o(w)?c=s(a?e[0]:e):o(T)?c=a?[s(e[0]),s(e[1])]:[s(e),s(e)]:o(A)&&(c=a?e.map(s):[s(e)]);switch(i){case"=":return function(e){return l(e)===c};case"!=":return function(e){return l(e)!==c};case"<":return function(e){return l(e)<c};case"<=":return function(e){return l(e)<=c};case">":return function(e){return l(e)>c};case">=":return function(e){return l(e)>=c};case"[]":return function(e){e=l(e);return e>=c[0]&&e<=c[1]};case"()":return function(e){e=l(e);return e>c[0]&&e<c[1]};case"[)":return function(e){e=l(e);return e>=c[0]&&e<c[1]};case"(]":return function(e){e=l(e);return e>c[0]&&e<=c[1]};case"][":return function(e){e=l(e);return e<=c[0]||e>=c[1]};case")(":return function(e){e=l(e);return e<c[0]||e>c[1]};case"](":return function(e){e=l(e);return e<=c[0]||e>c[1]};case")[":return function(e){e=l(e);return e<c[0]||e>=c[1]};case"{}":return function(e){return-1!==c.indexOf(l(e))};case"}{":return function(e){return-1===c.indexOf(l(e))}}}(t,b.getDataToCoordFunc(e,r,i,n),s),h={},f={},p=0,m=c?(u=function(e){h[e.astr]=v.extendDeep([],e.get()),e.set(new Array(a))},function(e,t){var n=h[e.astr][t];e.get()[t]=n}):(u=function(e){h[e.astr]=v.extendDeep([],e.get()),e.set([])},function(e,t){t=h[e.astr][t];e.get().push(t)});y(u);for(var g=x(r.transforms,t),_=0;_<a;_++)d(n[_])?(y(m,_),f[p++]=g(_)):c&&p++;t._indexToPoints=f,r._length=p}}function y(e,t){for(var n=0;n<l.length;n++)e(v.nestedProperty(r,l[n]),t)}}},{"../constants/filter_ops":263,"../lib":285,"../plots/cartesian/axes":331,"../registry":373,"./helpers":544}],543:[function(e,t,u){"use strict";var k=e("../lib"),M=e("../plot_api/plot_schema"),S=e("../plots/plots"),E=e("./helpers").pointsAccessorFunction;u.moduleType="transform",u.name="groupby",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},u.supplyDefaults=function(n,e,t){var r,i={};function a(e,t){return k.coerce(n,i,u.attributes,e,t)}if(!a("enabled"))return i;a("groups"),a("nameformat",1<t._dataLength?"%{group} (%{trace})":"%{group}");var o=n.styles,s=i.styles=[];if(o)for(r=0;r<o.length;r++){var l=s[r]={};k.coerce(o[r],s[r],u.attributes.styles,"target");var c=k.coerce(o[r],s[r],u.attributes.styles,"value");k.isPlainObject(c)?l.value=k.extendDeep({},c):c&&delete l.value}return i},u.transform=function(e,t){for(var n,r,i=[],a=0;a<e.length;a++)for(n=function(e,t){var n,r,i,a,o,s,l,c,u,d,h=t.transform,f=t.transformIndex,p=e.transforms[f].groups,m=E(e.transforms,h);if(!k.isArrayOrTypedArray(p)||0===p.length)return[e];var g=k.filterUnique(p),_=new Array(g.length),y=p.length,v=M.findArrayAttributes(e),b=h.styles||[],x={};for(n=0;n<b.length;n++)x[b[n].target]=b[n].value;h.styles&&(d=k.keyedContainer(h,"styles","target","value.name"));var w={},T={};for(n=0;n<g.length;n++){s=g[n],w[s]=n,T[s]=0,(l=_[n]=k.extendDeepNoArrays({},e))._group=s,l.transforms[f]._indexToPoints={};var A=null;for(d&&(A=d.get(s)),l.name=A||""===A?A:k.templateString(h.nameformat,{trace:e.name,group:s}),c=l.transforms,l.transforms=[],r=0;r<c.length;r++)l.transforms[r]=k.extendDeepNoArrays({},c[r]);for(r=0;r<v.length;r++)k.nestedProperty(l,v[r]).set([])}for(i=0;i<v.length;i++){for(a=v[i],r=0,u=[];r<g.length;r++)u[r]=k.nestedProperty(_[r],a).get();for(o=k.nestedProperty(e,a).get(),r=0;r<y;r++)u[w[p[r]]].push(o[r])}for(r=0;r<y;r++)(l=_[w[p[r]]]).transforms[f]._indexToPoints[T[p[r]]]=m(r),T[p[r]]++;for(n=0;n<g.length;n++)s=g[n],l=_[n],S.clearExpandedTraceDefaultColors(l),l=k.extendDeepNoArrays(l,x[s]||{});return _}(e[a],t),r=0;r<n.length;r++)i.push(n[r]);return i}},{"../lib":285,"../plot_api/plot_schema":319,"../plots/plots":366,"./helpers":544}],544:[function(e,t,n){"use strict";n.pointsAccessorFunction=function(e,t){for(var n,r,i=0;i<e.length&&(n=e[i])!==t;i++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);return r?function(e){return r[e]}:function(e){return[e]}}},{}],545:[function(e,t,i){"use strict";var m=e("../lib"),g=e("../plots/cartesian/axes"),_=e("./helpers").pointsAccessorFunction,y=e("../constants/numerical").BADNUM;i.moduleType="transform",i.name="sort",i.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},i.supplyDefaults=function(n){var r={};function e(e,t){return m.coerce(n,r,i.attributes,e,t)}return e("enabled")&&(e("target"),e("order")),r},i.calcTransform=function(e,t,n){if(n.enabled){var r=m.getTargetArray(t,n);if(r){var i=n.target,a=r.length;t._length&&(a=Math.min(a,t._length));for(var o=t._arrayAttrs,s=function(e,t,n,r){var i,a=new Array(r),o=new Array(r);for(i=0;i<r;i++)a[i]={v:t[i],i:i};for(a.sort(function(e,n){switch(e.order){case"ascending":return function(e,t){e=n(e.v),t=n(t.v);return e===y?1:t===y?-1:e-t};case"descending":return function(e,t){e=n(e.v),t=n(t.v);return e===y?1:t===y?-1:t-e}}}(e,n)),i=0;i<r;i++)o[i]=a[i].i;return o}(n,r,g.getDataToCoordFunc(e,t,i,r),a),l=_(t.transforms,n),c={},u=0;u<o.length;u++){for(var d=m.nestedProperty(t,o[u]),h=d.get(),f=new Array(a),p=0;p<a;p++)f[p]=h[s[p]];d.set(f)}for(p=0;p<a;p++)c[p]=l(s[p]);n._indexToPoints=c,t._length=a}}}},{"../constants/numerical":265,"../lib":285,"../plots/cartesian/axes":331,"./helpers":544}],546:[function(e,t,n){"use strict";n.version="2.2.0"},{}]},{},[15])(15)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Popper={})}(this,function(e){"use strict";function d(e){e=e.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function g(e){if(null==e)return window;if("[object Window]"===e.toString())return e;e=e.ownerDocument;return e&&e.defaultView||window}function u(e){e=g(e);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function m(e){return e instanceof g(e).Element||e instanceof Element}function h(e){return e instanceof g(e).HTMLElement||e instanceof HTMLElement}function i(e){return"undefined"!=typeof ShadowRoot&&(e instanceof g(e).ShadowRoot||e instanceof ShadowRoot)}function s(e){return e?(e.nodeName||"").toLowerCase():null}function _(e){return((m(e)?e.ownerDocument:e.document)||window.document).documentElement}function f(e){return d(_(e)).left+u(e).scrollLeft}function y(e){return g(e).getComputedStyle(e)}function l(e){var t=y(e),n=t.overflow,e=t.overflowX,t=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+t+e)}function v(e,t,n){void 0===n&&(n=!1);var r=_(t),i=d(e),a=h(t),o={scrollLeft:0,scrollTop:0},e={x:0,y:0};return!a&&(a||n)||("body"===s(t)&&!l(r)||(o=(n=t)!==g(n)&&h(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:u(n)),h(t)?((e=d(t)).x+=t.clientLeft,e.y+=t.clientTop):r&&(e.x=f(r))),{x:i.left+o.scrollLeft-e.x,y:i.top+o.scrollTop-e.y,width:i.width,height:i.height}}function A(e){var t=d(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function o(e){return"html"===s(e)?e:e.assignedSlot||e.parentNode||(i(e)?e.host:null)||_(e)}function b(e,t){void 0===t&&(t=[]);var n=function e(t){return 0<=["html","body","#document"].indexOf(s(t))?t.ownerDocument.body:h(t)&&l(t)?t:e(o(t))}(e),e=n===(null==(r=e.ownerDocument)?void 0:r.body),r=g(n),n=e?[r].concat(r.visualViewport||[],l(n)?n:[]):n,t=t.concat(n);return e?t:t.concat(b(o(n)))}function a(e){return h(e)&&"fixed"!==y(e).position?e.offsetParent:null}function k(e){for(var t,n=g(e),r=a(e);r&&(t=r,0<=["table","td","th"].indexOf(s(t)))&&"static"===y(r).position;)r=a(r);return(!r||"html"!==s(r)&&("body"!==s(r)||"static"!==y(r).position))&&(r||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(n&&h(e)&&"fixed"===y(e).position)return null;for(var r=o(e);h(r)&&["html","body"].indexOf(s(r))<0;){var i=y(r);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return r;r=r.parentNode}return null}(e))||n}var S="top",E="bottom",C="right",L="left",D="auto",O=[S,E,C,L],P="start",c="end",p="clippingParents",x="viewport",w="popper",T="reference",R=O.reduce(function(e,t){return e.concat([t+"-"+P,t+"-"+c])},[]),I=[].concat(O,[D]).reduce(function(e,t){return e.concat([t,t+"-"+P,t+"-"+c])},[]),M=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function N(e){var n=new Map,r=new Set,i=[];return e.forEach(function(e){n.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||!function t(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){r.has(e)||(e=n.get(e))&&t(e)}),i.push(e)}(e)}),i}function z(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce(function(e,t){return e.replace(/%s/,t)},e)}var F='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',j='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',B=["name","enabled","phase","fn","effect","requires","options"];function H(e){return e.split("-")[0]}var U=Math.max,V=Math.min,q=Math.round;function Y(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&i(n)){var r=t;do{if(r&&e.isSameNode(r))return!0}while(r=r.parentNode||r.host)}return!1}function G(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function W(e,t){return t===x?G((a=g(i=e),o=_(i),s=a.visualViewport,l=o.clientWidth,c=o.clientHeight,o=a=0,s&&(l=s.width,c=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=s.offsetLeft,o=s.offsetTop)),{width:l,height:c,x:a+f(i),y:o})):h(t)?((r=d(n=t)).top=r.top+n.clientTop,r.left=r.left+n.clientLeft,r.bottom=r.top+n.clientHeight,r.right=r.left+n.clientWidth,r.width=n.clientWidth,r.height=n.clientHeight,r.x=r.left,r.y=r.top,r):G((i=_(e),o=_(i),t=u(i),r=null==(n=i.ownerDocument)?void 0:n.body,e=U(o.scrollWidth,o.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),n=U(o.scrollHeight,o.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),i=-t.scrollLeft+f(i),t=-t.scrollTop,"rtl"===y(r||o).direction&&(i+=U(o.clientWidth,r?r.clientWidth:0)-e),{width:e,height:n,x:i,y:t}));var n,r,i,a,o,s,l,c}function X(n,e,t){var r,i,a,e="clippingParents"===e?(i=b(o(r=n)),m(a=0<=["absolute","fixed"].indexOf(y(r).position)&&h(r)?k(r):r)?i.filter(function(e){return m(e)&&Y(e,a)&&"body"!==s(e)}):[]):[].concat(e),e=[].concat(e,[t]),t=e[0],t=e.reduce(function(e,t){t=W(n,t);return e.top=U(t.top,e.top),e.right=V(t.right,e.right),e.bottom=V(t.bottom,e.bottom),e.left=U(t.left,e.left),e},W(n,t));return t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}function Z(e){return e.split("-")[1]}function J(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function $(e){var t,n=e.reference,r=e.element,i=e.placement,e=i?H(i):null,i=i?Z(i):null,a=n.x+n.width/2-r.width/2,o=n.y+n.height/2-r.height/2;switch(e){case S:t={x:a,y:n.y-r.height};break;case E:t={x:a,y:n.y+n.height};break;case C:t={x:n.x+n.width,y:o};break;case L:t={x:n.x-r.width,y:o};break;default:t={x:n.x,y:n.y}}var s=e?J(e):null;if(null!=s){var l="y"===s?"height":"width";switch(i){case P:t[s]=t[s]-(n[l]/2-r[l]/2);break;case c:t[s]=t[s]+(n[l]/2-r[l]/2)}}return t}function Q(){return{top:0,right:0,bottom:0,left:0}}function K(e){return Object.assign({},Q(),e)}function ee(n,e){return e.reduce(function(e,t){return e[t]=n,e},{})}function te(e,t){var r,n=t=void 0===t?{}:t,i=n.placement,a=void 0===i?e.placement:i,o=n.boundary,s=void 0===o?p:o,l=n.rootBoundary,c=void 0===l?x:l,t=n.elementContext,i=void 0===t?w:t,o=n.altBoundary,l=void 0!==o&&o,t=n.padding,o=void 0===t?0:t,n=K("number"!=typeof o?o:ee(o,O)),t=e.elements.reference,o=e.rects.popper,l=e.elements[l?i===w?T:w:i],s=X(m(l)?l:l.contextElement||_(e.elements.popper),s,c),c=d(t),t=$({reference:c,element:o,strategy:"absolute",placement:a}),t=G(Object.assign({},o,t)),c=i===w?t:c,u={top:s.top-c.top+n.top,bottom:c.bottom-s.bottom+n.bottom,left:s.left-c.left+n.left,right:c.right-s.right+n.right},e=e.modifiersData.offset;return i===w&&e&&(r=e[a],Object.keys(u).forEach(function(e){var t=0<=[C,E].indexOf(e)?1:-1,n=0<=[S,E].indexOf(e)?"y":"x";u[e]+=r[n]*t})),u}var ne="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",re={placement:"bottom",modifiers:[],strategy:"absolute"};function ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function t(e){var t=e=void 0===e?{}:e,e=t.defaultModifiers,f=void 0===e?[]:e,t=t.defaultOptions,p=void 0===t?re:t;return function(o,s,t){void 0===t&&(t=p);var n,r,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},re,p),modifiersData:{},elements:{reference:o,popper:s},attributes:{},styles:{}},c=[],u=!1,d={state:l,setOptions:function(e){h(),l.options=Object.assign({},p,l.options,e),l.scrollParents={reference:m(o)?b(o):o.contextElement?b(o.contextElement):[],popper:b(s)};var n,t,e=(e=[].concat(f,l.options.modifiers),t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),e=Object.keys(t).map(function(e){return t[e]}),n=N(e),M.reduce(function(e,t){return e.concat(n.filter(function(e){return e.phase===t}))},[]));l.orderedModifiers=e.filter(function(e){return e.enabled});e=[].concat(e,l.options.modifiers),i=function(e){return e.name},a=new Set,e=e.filter(function(e){e=i(e);if(!a.has(e))return a.add(e),!0});(r=e).forEach(function(n){Object.keys(n).forEach(function(e){switch(e){case"name":"string"!=typeof n.name&&console.error(z(F,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":"boolean"!=typeof n.enabled&&console.error(z(F,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));case"phase":M.indexOf(n.phase)<0&&console.error(z(F,n.name,'"phase"',"either "+M.join(", "),'"'+String(n.phase)+'"'));break;case"fn":"function"!=typeof n.fn&&console.error(z(F,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":"function"!=typeof n.effect&&console.error(z(F,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":Array.isArray(n.requires)||console.error(z(F,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(z(F,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+B.map(function(e){return'"'+e+'"'}).join(", ")+'; but "'+e+'" was provided.')}n.requires&&n.requires.forEach(function(t){null==r.find(function(e){return e.name===t})&&console.error(z(j,String(n.name),t,t))})})}),H(l.options.placement)===D&&(l.orderedModifiers.find(function(e){return"flip"===e.name})||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" ")));var r,i,a,e=y(s);return[e.marginTop,e.marginRight,e.marginBottom,e.marginLeft].some(function(e){return parseFloat(e)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" ")),l.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,e=e.effect;"function"==typeof e&&(n=e({state:l,name:t,instance:d,options:void 0===n?{}:n}),c.push(n||function(){}))}),d.update()},forceUpdate:function(){if(!u){var e=l.elements,t=e.reference,e=e.popper;if(ie(t,e)){l.rects={reference:v(t,k(e),"fixed"===l.options.strategy),popper:A(e)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(e){return l.modifiersData[e.name]=Object.assign({},e.data)});for(var n,r,i,a=0,o=0;o<l.orderedModifiers.length;o++){if(100<(a+=1)){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}!0!==l.reset?(n=(i=l.orderedModifiers[o]).fn,r=i.options,i=i.name,"function"==typeof n&&(l=n({state:l,options:void 0===r?{}:r,name:i,instance:d})||l)):(l.reset=!1,o=-1)}}else console.error(ne)}},update:(n=function(){return new Promise(function(e){d.forceUpdate(),e(l)})},function(){return r=r||new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(n())})})}),destroy:function(){h(),u=!0}};return ie(o,s)?d.setOptions(t).then(function(e){!u&&t.onFirstUpdate&&t.onFirstUpdate(e)}):console.error(ne),d;function h(){c.forEach(function(e){return e()}),c=[]}}}var ae={passive:!0};var n={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=void 0===(e=r.scroll)||e,a=void 0===(r=r.resize)||r,o=g(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&s.forEach(function(e){e.addEventListener("scroll",n.update,ae)}),a&&o.addEventListener("resize",n.update,ae),function(){i&&s.forEach(function(e){e.removeEventListener("scroll",n.update,ae)}),a&&o.removeEventListener("resize",n.update,ae)}},data:{}};var r={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,e=e.name;t.modifiersData[e]=$({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},oe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function se(e){var t=e.popper,n=e.popperRect,r=e.placement,i=e.offsets,a=e.position,o=e.gpuAcceleration,s=e.adaptive,l=e.roundOffsets,c=!0===l?(f=(m=i).x,p=m.y,m=window.devicePixelRatio||1,{x:q(q(f*m)/m)||0,y:q(q(p*m)/m)||0}):"function"==typeof l?l(i):i,u=c.x,d=void 0===u?0:u,h=c.y,e=void 0===h?0:h,f=i.hasOwnProperty("x"),p=i.hasOwnProperty("y"),m=L,l=S,u=window;s&&(c="clientHeight",h="clientWidth",(i=k(t))===g(t)&&"static"!==y(i=_(t)).position&&(c="scrollHeight",h="scrollWidth"),r===S&&(l=E,e-=i[c]-n.height,e*=o?1:-1),r===L&&(m=C,d-=i[h]-n.width,d*=o?1:-1));var s=Object.assign({position:a},s&&oe);return o?Object.assign({},s,((o={})[l]=p?"0":"",o[m]=f?"0":"",o.transform=(u.devicePixelRatio||1)<2?"translate("+d+"px, "+e+"px)":"translate3d("+d+"px, "+e+"px, 0)",o)):Object.assign({},s,((s={})[l]=p?e+"px":"",s[m]=f?d+"px":"",s.transform="",s))}var le={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,e=void 0===(r=n.gpuAcceleration)||r,r=void 0===(r=n.adaptive)||r,n=void 0===(n=n.roundOffsets)||n,i=y(t.elements.popper).transitionProperty||"";r&&["transform","top","right","bottom","left"].some(function(e){return 0<=i.indexOf(e)})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" ")),e={placement:H(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:e},null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,se(Object.assign({},e,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:n})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,se(Object.assign({},e,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ce={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var i=e.state;Object.keys(i.elements).forEach(function(e){var t=i.styles[e]||{},n=i.attributes[e]||{},r=i.elements[e];h(r)&&s(r)&&(Object.assign(r.style,t),Object.keys(n).forEach(function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var r=e.state,i={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,i.popper),r.styles=i,r.elements.arrow&&Object.assign(r.elements.arrow.style,i.arrow),function(){Object.keys(r.elements).forEach(function(e){var t=r.elements[e],n=r.attributes[e]||{},e=Object.keys((r.styles.hasOwnProperty(e)?r.styles:i)[e]).reduce(function(e,t){return e[t]="",e},{});h(t)&&s(t)&&(Object.assign(t.style,e),Object.keys(n).forEach(function(e){t.removeAttribute(e)}))})}},requires:["computeStyles"]};var ue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var o=e.state,t=e.options,n=e.name,s=void 0===(r=t.offset)?[0,0]:r,e=I.reduce(function(e,t){var n,r,i,a;return e[t]=(n=t,r=o.rects,i=s,a=H(n),t=0<=[L,S].indexOf(a)?-1:1,i=(i=(n="function"==typeof i?i(Object.assign({},r,{placement:n})):i)[0])||0,n=((n=n[1])||0)*t,0<=[L,C].indexOf(a)?{x:n,y:i}:{x:i,y:n}),e},{}),r=(t=e[o.placement]).x,t=t.y;null!=o.modifiersData.popperOffsets&&(o.modifiersData.popperOffsets.x+=r,o.modifiersData.popperOffsets.y+=t),o.modifiersData[n]=e}},de={left:"right",right:"left",bottom:"top",top:"bottom"};function he(e){return e.replace(/left|right|bottom|top/g,function(e){return de[e]})}var fe={start:"end",end:"start"};function pe(e){return e.replace(/start|end/g,function(e){return fe[e]})}var me={name:"flip",enabled:!0,phase:"main",fn:function(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var i=t.mainAxis,a=void 0===i||i,e=t.altAxis,o=void 0===e||e,i=t.fallbackPlacements,s=t.padding,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,e=t.flipVariations,d=void 0===e||e,h=t.allowedAutoPlacements,e=n.options.placement,t=H(e),t=i||(t===e||!d?[he(e)]:function(e){if(H(e)===D)return[];var t=he(e);return[pe(e),t,pe(t)]}(e)),f=[e].concat(t).reduce(function(e,t){return e.concat(H(t)===D?function(n,e){var t=e=void 0===e?{}:e,r=t.placement,i=t.boundary,a=t.rootBoundary,o=t.padding,e=t.flipVariations,s=void 0===(t=t.allowedAutoPlacements)?I:t,l=Z(r),r=l?e?R:R.filter(function(e){return Z(e)===l}):O;0===(e=r.filter(function(e){return 0<=s.indexOf(e)})).length&&(e=r,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var c=e.reduce(function(e,t){return e[t]=te(n,{placement:t,boundary:i,rootBoundary:a,padding:o})[H(t)],e},{});return Object.keys(c).sort(function(e,t){return c[e]-c[t]})}(n,{placement:t,boundary:l,rootBoundary:c,padding:s,flipVariations:d,allowedAutoPlacements:h}):t)},[]),p=n.rects.reference,m=n.rects.popper,g=new Map,_=!0,y=f[0],v=0;v<f.length;v++){var b=f[v],x=H(b),w=Z(b)===P,T=0<=[S,E].indexOf(x),A=T?"width":"height",k=te(n,{placement:b,boundary:l,rootBoundary:c,altBoundary:u,padding:s}),T=T?w?C:L:w?E:S;p[A]>m[A]&&(T=he(T));w=he(T),A=[];if(a&&A.push(k[x]<=0),o&&A.push(k[T]<=0,k[w]<=0),A.every(function(e){return e})){y=b,_=!1;break}g.set(b,A)}if(_)for(var M=d?3:1;0<M;M--)if("break"===function(t){var e=f.find(function(e){e=g.get(e);if(e)return e.slice(0,t).every(function(e){return e})});if(e)return y=e,"break"}(M))break;n.placement!==y&&(n.modifiersData[r]._skip=!0,n.placement=y,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ge(e,t,n){return U(e,V(t,n))}var _e={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=void 0===(w=n.mainAxis)||w,a=void 0!==(T=n.altAxis)&&T,o=n.boundary,s=n.rootBoundary,l=n.altBoundary,c=n.padding,u=n.tether,d=void 0===u||u,h=n.tetherOffset,f=void 0===h?0:h,p=te(t,{boundary:o,rootBoundary:s,padding:c,altBoundary:l}),m=H(t.placement),g=Z(t.placement),_=!g,y=J(m),v="x"===y?"y":"x",b=t.modifiersData.popperOffsets,x=t.rects.reference,e=t.rects.popper,w="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,T={x:0,y:0};b&&((i||a)&&(u="y"===y?"height":"width",n=b[y],o=b[y]+p[h="y"===y?S:L],c=b[y]-p[s="y"===y?E:C],l=d?-e[u]/2:0,m=(g===P?x:e)[u],f=g===P?-e[u]:-x[u],g=t.elements.arrow,e=d&&g?A(g):{width:0,height:0},h=(g=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Q())[h],s=g[s],e=ge(0,x[u],e[u]),h=_?x[u]/2-l-e-h-w:m-e-h-w,e=_?-x[u]/2+l+e+s+w:f+e+s+w,w=(s=t.elements.arrow&&k(t.elements.arrow))?"y"===y?s.clientTop||0:s.clientLeft||0:0,s=t.modifiersData.offset?t.modifiersData.offset[t.placement][y]:0,w=b[y]+h-s-w,s=b[y]+e-s,i&&(c=ge(d?V(o,w):o,n,d?U(c,s):c),b[y]=c,T[y]=c-n),a&&(a=(n=b[v])+p["x"===y?S:L],y=n-p["x"===y?E:C],y=ge(d?V(a,w):a,n,d?U(y,s):y),b[v]=y,T[v]=y-n)),t.modifiersData[r]=T)},requiresIfExists:["offset"]};var ye={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,r=e.state,i=e.name,a=e.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,l=H(r.placement),c=J(l),u=0<=[L,C].indexOf(l)?"height":"width";o&&s&&(t=a.padding,n=r,e=K("number"!=typeof(t="function"==typeof t?t(Object.assign({},n.rects,{placement:n.placement})):t)?t:ee(t,O)),l=A(o),a="y"===c?S:L,n="y"===c?E:C,t=r.rects.reference[u]+r.rects.reference[c]-s[c]-r.rects.popper[u],s=s[c]-r.rects.reference[c],o=(o=k(o))?"y"===c?o.clientHeight||0:o.clientWidth||0:0,a=e[a],n=o-l[u]-e[n],n=ge(a,s=o/2-l[u]/2+(t/2-s/2),n),r.modifiersData[i]=((i={})[c]=n,i.centerOffset=n-s,i))},effect:function(e){var t=e.state;null!=(e=void 0===(e=e.options.element)?"[data-popper-arrow]":e)&&("string"==typeof e&&!(e=t.elements.popper.querySelector(e))||(h(e)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),Y(t.elements.popper,e)?t.elements.arrow=e:console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "))))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ve(e,t,n){return{top:e.top-t.height-(n=void 0===n?{x:0,y:0}:n).y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function be(t){return[S,C,E,L].some(function(e){return 0<=t[e]})}var xe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=te(t,{elementContext:"reference"}),e=te(t,{altBoundary:!0}),r=ve(o,r),e=ve(e,i,a),i=be(r),a=be(e);t.modifiersData[n]={referenceClippingOffsets:r,popperEscapeOffsets:e,isReferenceHidden:i,hasPopperEscaped:a},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":i,"data-popper-escaped":a})}},we=t({defaultModifiers:[n,r,le,ce]}),Te=[n,r,le,ce,ue,me,_e,ye,xe],Ae=t({defaultModifiers:Te});e.applyStyles=ce,e.arrow=ye,e.computeStyles=le,e.createPopper=Ae,e.createPopperLite=we,e.defaultModifiers=Te,e.detectOverflow=te,e.eventListeners=n,e.flip=me,e.hide=xe,e.offset=ue,e.popperGenerator=t,e.popperOffsets=r,e.preventOverflow=_e,Object.defineProperty(e,"__esModule",{value:!0})}),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(t){var e,n,r,h,a,o,f,p,m,g,_,y,i,s,v,r=((u=t&&t.fn&&t.fn.select2&&t.fn.select2.amd?t.fn.select2.amd:u)&&u.requirejs||(u?n=u:u={},m={},g={},_={},y={},i=Object.prototype.hasOwnProperty,s=[].slice,v=/\.js$/,f=function(e,t){var n,r,i=c(e),a=i[0],t=t[1];return e=i[1],a&&(n=w(a=l(a,t))),a?e=n&&n.normalize?n.normalize(e,(r=t,function(e){return l(e,r)})):l(e,t):(a=(i=c(e=l(e,t)))[0],e=i[1],a&&(n=w(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},p={require:function(e){return x(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:(t=e,function(){return _&&_.config&&_.config[t]||{}})};var t}},a=function(e,t,n,r){var i,a,o,s,l,c=[],u=typeof n,d=T(r=r||e);if("undefined"==u||"function"==u){for(t=!t.length&&n.length?["require","exports","module"]:t,s=0;s<t.length;s+=1)if("require"===(a=(o=f(t[s],d)).f))c[s]=p.require(e);else if("exports"===a)c[s]=p.exports(e),l=!0;else if("module"===a)i=c[s]=p.module(e);else if(b(m,a)||b(g,a)||b(y,a))c[s]=w(a);else{if(!o.p)throw new Error(e+" missing "+a);o.p.load(o.n,x(r,!0),function(t){return function(e){m[t]=e}}(a),{}),c[s]=m[a]}u=n?n.apply(m[e],c):void 0,e&&(i&&i.exports!==h&&i.exports!==m[e]?m[e]=i.exports:u===h&&l||(m[e]=u))}else e&&(m[e]=n)},e=n=o=function(e,t,n,r,i){if("string"==typeof e)return p[e]?p[e](t):w(f(e,T(t)).f);if(!e.splice){if((_=e).deps&&o(_.deps,_.callback),!t)return;t.splice?(e=t,t=n,n=null):e=h}return t=t||function(){},"function"==typeof n&&(n=r,r=i),r?a(h,e,t,n):setTimeout(function(){a(h,e,t,n)},4),o},o.config=function(e){return o(e)},e._defined=m,(r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),b(m,e)||b(g,e)||(g[e]=[e,t,n])}).amd={jQuery:!0},u.requirejs=e,u.require=n,u.define=r),u.define("almond",function(){}),u.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),u.define("select2/utils",["jquery"],function(a){var r={};function c(e){var t,n=e.prototype,r=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&r.push(t);return r}r.Extend=function(e,t){var n,r={}.hasOwnProperty;function i(){this.constructor=e}for(n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},r.Decorate=function(r,i){var e=c(i),t=c(r);function a(){var e=Array.prototype.unshift,t=i.prototype.constructor.length,n=r.prototype.constructor;0<t&&(e.call(arguments,r.prototype.constructor),n=i.prototype.constructor),n.apply(this,arguments)}i.displayName=r.displayName,a.prototype=new function(){this.constructor=a};for(var n=0;n<t.length;n++){var o=t[n];a.prototype[o]=r.prototype[o]}for(var s=0;s<e.length;s++){var l=e[s];a.prototype[l]=function(e){var t=function(){};e in a.prototype&&(t=a.prototype[e]);var n=i.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}(l)}return a};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this,t)},r.Observable=e,r.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},r.bind=function(e,t){return function(){e.apply(t,arguments)}},r._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(1!==n.length){for(var i=0;i<n.length;i++){var a=n[i];(a=a.substring(0,1).toLowerCase()+a.substring(1))in r||(r[a]={}),i==n.length-1&&(r[a]=e[t]),r=r[a]}delete e[t]}}return e},r.hasScroll=function(e,t){var n=a(t),r=t.style.overflowX,i=t.style.overflowY;return(r!==i||"hidden"!==i&&"visible"!==i)&&("scroll"===r||"scroll"===i||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},r.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},r.__cache={};var n=0;return r.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null!=t||(t=e.id?"select2-data-"+e.id:"select2-data-"+(++n).toString()+"-"+r.generateChars(4),e.setAttribute("data-select2-id",t)),t},r.StoreData=function(e,t,n){e=r.GetUniqueElementId(e);r.__cache[e]||(r.__cache[e]={}),r.__cache[e][t]=n},r.GetData=function(e,t){var n=r.GetUniqueElementId(e);return t?r.__cache[n]&&null!=r.__cache[n][t]?r.__cache[n][t]:a(e).data(t):r.__cache[n]},r.RemoveData=function(e){var t=r.GetUniqueElementId(e);null!=r.__cache[t]&&delete r.__cache[t],e.removeAttribute("data-select2-id")},r.copyNonInternalCssClasses=function(e,t){var n=(n=e.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0===e.indexOf("select2-")}),t=(t=t.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0!==e.indexOf("select2-")}),t=n.concat(t);e.setAttribute("class",t.join(" "))},r}),u.define("select2/results",["jquery","./utils"],function(d,h){function r(e,t,n){this.$element=e,this.data=n,this.options=t,r.__super__.constructor.call(this)}return h.Extend(r,h.Observable),r.prototype.render=function(){var e=d('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},r.prototype.clear=function(){this.$results.empty()},r.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=d('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);n.append(t(r(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},r.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},r.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],r=this.option(r);t.push(r)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},r.prototype.position=function(e,t){t.find(".select2-results").append(e)},r.prototype.sort=function(e){return this.options.get("sorter")(e)},r.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},r.prototype.setClasses=function(){var t=this;this.data.current(function(e){var r=e.map(function(e){return e.id.toString()});t.$results.find(".select2-results__option--selectable").each(function(){var e=d(this),t=h.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<r.indexOf(n)?(this.classList.add("select2-results__option--selected"),e.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),e.attr("aria-selected","false"))})})},r.prototype.showLoading=function(e){this.hideLoading();e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},e=this.option(e);e.className+=" loading-results",this.$results.prepend(e)},r.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},r.prototype.option=function(e){var t=document.createElement("li");t.classList.add("select2-results__option"),t.classList.add("select2-results__option--selectable");var n,r={role:"option"},i=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(n in(null!=e.element&&i.call(e.element,":disabled")||null==e.element&&e.disabled)&&(r["aria-disabled"]="true",t.classList.remove("select2-results__option--selectable"),t.classList.add("select2-results__option--disabled")),null==e.id&&t.classList.remove("select2-results__option--selectable"),null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(r.role="group",r["aria-label"]=e.text,t.classList.remove("select2-results__option--selectable"),t.classList.add("select2-results__option--group")),r){var a=r[n];t.setAttribute(n,a)}if(e.children){var o=d(t),s=document.createElement("strong");s.className="select2-results__group",this.template(e,s);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],u=this.option(u);l.push(u)}i=d("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});i.append(l),o.append(s),o.append(i)}else this.template(e,t);return h.StoreData(t,"data",e),t},r.prototype.bind=function(t,e){var i=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect")&&i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect")&&i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e,t=i.getHighlightedResults();0!==t.length&&(e=h.GetData(t[0],"data"),t.hasClass("select2-results__option--selected")?i.trigger("close",{}):i.trigger("select",{data:e}))}),t.on("results:previous",function(){var e,t=i.getHighlightedResults(),n=i.$results.find(".select2-results__option--selectable"),r=n.index(t);r<=0||(e=r-1,0===t.length&&(e=0),(r=n.eq(e)).trigger("mouseenter"),t=i.$results.offset().top,n=r.offset().top,r=i.$results.scrollTop()+(n-t),0===e?i.$results.scrollTop(0):n-t<0&&i.$results.scrollTop(r))}),t.on("results:next",function(){var e,t=i.getHighlightedResults(),n=i.$results.find(".select2-results__option--selectable"),r=n.index(t)+1;r>=n.length||((e=n.eq(r)).trigger("mouseenter"),t=i.$results.offset().top+i.$results.outerHeight(!1),n=e.offset().top+e.outerHeight(!1),e=i.$results.scrollTop()+n-t,0===r?i.$results.scrollTop(0):t<n&&i.$results.scrollTop(e))}),t.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")}),t.on("results:message",function(e){i.displayMessage(e)}),d.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=i.$results.height();t?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(e){var t=d(this),n=h.GetData(this,"data");t.hasClass("select2-results__option--selected")?i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:n}):i.trigger("close",{}):i.trigger("select",{originalEvent:e,data:n})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(e){var t=h.GetData(this,"data");i.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),i.trigger("results:focus",{data:t,element:d(this)})})},r.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},r.prototype.destroy=function(){this.$results.remove()},r.prototype.ensureHighlightVisible=function(){var e,t,n,r,i=this.getHighlightedResults();0!==i.length&&(e=this.$results.find(".select2-results__option--selectable").index(i),r=this.$results.offset().top,t=i.offset().top,n=this.$results.scrollTop()+(t-r),r=t-r,n-=2*i.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(n))},r.prototype.template=function(e,t){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),e=n(e,t);null==e?t.style.display="none":"string"==typeof e?t.innerHTML=r(e):d(t).append(e)},r}),u.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),u.define("select2/selection/base",["jquery","../utils","../keys"],function(n,r,i){function a(e,t){this.$element=e,this.options=t,a.__super__.constructor.call(this)}return r.Extend(a,r.Observable),a.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=r.GetData(this.$element[0],"old-tabindex")?this._tabindex=r.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},a.prototype.bind=function(e,t){var n=this,r=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",r),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},a.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},a.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=t[0]&&r.GetData(this,"element").select2("close")})})},a.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},a.prototype.position=function(e,t){t.find(".selection").append(e)},a.prototype.destroy=function(){this._detachCloseHandler(this.container)},a.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},a.prototype.isEnabled=function(){return!this.isDisabled()},a.prototype.isDisabled=function(){return this.options.get("disabled")},a}),u.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(t,e){var n=this;i.__super__.bind.apply(this,arguments);var r=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",r),this.$selection.attr("aria-controls",r),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.trigger("focus")})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){var t,n;0!==e.length?(n=e[0],t=this.$selection.find(".select2-selection__rendered"),e=this.display(n,t),t.empty().append(e),(n=n.title||n.text)?t.attr("title",n):t.removeAttr("title")):this.clear()},i}),u.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,c){function a(e,t){a.__super__.constructor.apply(this,arguments)}return c.Extend(a,e),a.prototype.render=function(){var e=a.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},a.prototype.bind=function(e,t){var n=this;a.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){var t;n.isDisabled()||(t=i(this).parent(),t=c.GetData(t[0],"data"),n.trigger("unselect",{originalEvent:e,data:t}))}),this.$selection.on("keydown",".select2-selection__choice__remove",function(e){n.isDisabled()||e.stopPropagation()})},a.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},a.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",r=0;r<e.length;r++){var i=e[r],a=this.selectionContainer(),o=this.display(i,a),s=n+c.generateChars(4)+"-";i.id?s+=i.id:s+=c.generateChars(4),a.find(".select2-selection__choice__display").append(o).attr("id",s);var l=i.title||i.text;l&&a.attr("title",l);o=this.options.get("translations").get("removeItem"),l=a.find(".select2-selection__choice__remove");l.attr("title",o()),l.attr("aria-label",o()),l.attr("aria-describedby",s),c.StoreData(a[0],"data",i),t.push(a)}this.$selection.find(".select2-selection__rendered").append(t)}},a}),u.define("select2/selection/placeholder",[],function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();n.html(this.display(t)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice");t=t.title||t.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",t),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();t=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(t)},e}),u.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(i,r,s){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var r=s.GetData(n[0],"data"),i=this.$element.val();this.$element.val(this.placeholder.id);var a={data:r};if(this.trigger("clear",a),a.prevented)this.$element.val(i);else{for(var o=0;o<r.length;o++)if(a={data:r[o]},this.trigger("unselect",a),a.prevented)return void this.$element.val(i);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=r.DELETE&&t.which!=r.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){var n,r;e.call(this,t),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),0<this.$selection.find(".select2-selection__placeholder").length||0===t.length||(n=this.$selection.find(".select2-selection__rendered").attr("id"),r=this.options.get("translations").get("removeAllItems"),(e=i('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>')).attr("title",r()),e.attr("aria-label",r()),e.attr("aria-describedby",n),s.StoreData(e[0],"data",t),this.$selection.prepend(e),this.$selection[0].classList.add("select2-selection--clearable"))},e}),u.define("select2/selection/search",["jquery","../utils","../keys"],function(r,s,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=this.options.get("translations").get("search"),n=r('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=n,this.$search=n.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",t());e=e.call(this);return this._transferTabIndex(),e.append(this.$searchContainer),e},e.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results",a=t.id+"-container";e.call(this,t,n),r.$search.attr("aria-describedby",a),t.on("open",function(){r.$search.attr("aria-controls",i),r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.resizeSearch(),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){var t;e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which!==l.BACKSPACE||""!==r.$search.val()||0<(t=r.$selection.find(".select2-selection__choice").last()).length&&(t=s.GetData(t[0],"data"),r.searchRemoveChoice(t),e.preventDefault())}),this.$selection.on("click",".select2-search--inline",function(e){r.$search.val()&&e.stopPropagation()});var t=document.documentMode,o=t&&t<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){o?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){var t;o&&"input"===e.type?r.$selection.off("input.search input.searchcheck"):(t=e.which)!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&r.handleSearch(e)})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},e}),u.define("select2/selection/selectionCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var t=e.call(this),e=this.options.get("selectionCssClass")||"";return-1!==e.indexOf(":all:")&&(e=e.replace(":all:",""),n.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(e),t},e}),u.define("select2/selection/eventRelay",["jquery"],function(o){function e(){}return e.prototype.bind=function(e,t,n){var r=this,i=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){var n;-1!==i.indexOf(e)&&(n=o.Event("select2:"+e,{params:t=t||{}}),r.$element.trigger(n),-1!==a.indexOf(e)&&(t.prevented=n.isDefaultPrevented()))})},e}),u.define("select2/translation",["jquery","require"],function(t,n){function r(e){this.dict=e||{}}return r.prototype.all=function(){return this.dict},r.prototype.get=function(e){return this.dict[e]},r.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},r._cache={},r.loadPath=function(e){var t;return e in r._cache||(t=n(e),r._cache[e]=t),new r(r._cache[e])},r}),u.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),u.define("select2/data/base",["../utils"],function(n){function r(e,t){r.__super__.constructor.call(this)}return n.Extend(r,n.Observable),r.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},r.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},r.prototype.bind=function(e,t){},r.prototype.destroy=function(){},r.prototype.generateResultId=function(e,t){e=e.id+"-result-";return e+=n.generateChars(4),null!=t.id?e+="-"+t.id.toString():e+="-"+n.generateChars(4),e},r}),u.define("select2/data/select",["./base","../utils","jquery"],function(e,s,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return s.Extend(n,e),n.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(l(e))}))},n.prototype.select=function(i){var e,a=this;if(i.selected=!0,null!=i.element&&"option"===i.element.tagName.toLowerCase())return i.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current(function(e){var t=[];(i=[i]).push.apply(i,e);for(var n=0;n<i.length;n++){var r=i[n].id;-1===t.indexOf(r)&&t.push(r)}a.$element.val(t),a.$element.trigger("input").trigger("change")}):(e=i.id,this.$element.val(e),this.$element.trigger("input").trigger("change"))},n.prototype.unselect=function(i){var a=this;if(this.$element.prop("multiple")){if(i.selected=!1,null!=i.element&&"option"===i.element.tagName.toLowerCase())return i.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].id;r!==i.id&&-1===t.indexOf(r)&&t.push(r)}a.$element.val(t),a.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){s.RemoveData(this)})},n.prototype.query=function(t,e){var n=[],r=this;this.$element.children().each(function(){var e;"option"!==this.tagName.toLowerCase()&&"optgroup"!==this.tagName.toLowerCase()||(e=l(this),e=r.item(e),null!==(e=r.matches(t,e))&&n.push(e))}),e({results:n})},n.prototype.addOptions=function(e){this.$element.append(e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);e=this._normalizeItem(e);return e.element=t,s.StoreData(t,"data",e),l(t)},n.prototype.item=function(e){var t={};if(null!=(t=s.GetData(e[0],"data")))return t;var n=e[0];if("option"===n.tagName.toLowerCase())t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===n.tagName.toLowerCase()){for(var t={text:e.prop("label"),children:[],title:e.prop("title")},r=e.children("option"),i=[],a=0;a<r.length;a++){var o=l(r[a]),o=this.item(o);i.push(o)}t.children=i}return(t=this._normalizeItem(t)).element=e[0],s.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),u.define("select2/data/array",["./select","../utils","jquery"],function(e,t,c){function r(e,t){this._dataToConvert=t.get("data")||[],r.__super__.constructor.call(this,e,t)}return t.Extend(r,e),r.prototype.bind=function(e,t){r.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var e;0===(e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()})).length&&(e=this.option(n),this.addOptions(e)),r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),r=n.map(function(){return t.item(c(this)).id}).get(),i=[];for(var a=0;a<e.length;a++){var o,s,l=this._normalizeItem(e[a]);0<=r.indexOf(l.id)?(o=n.filter(function(e){return function(){return c(this).val()==e.id}}(l)),s=this.item(o),s=c.extend(!0,{},l,s),s=this.option(s),o.replaceWith(s)):(s=this.option(l),l.children&&(l=this.convertToOptions(l.children),s.append(l)),i.push(s))}return i},r}),u.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,a){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return a.extend({},e,{q:e.term})},transport:function(e,t,n){e=a.ajax(e);return e.then(t),e.fail(n),e}};return a.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(t,n){var r=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var i=a.extend({type:"GET"},this.ajaxOptions);function e(){var e=i.transport(i,function(e){e=r.processResults(e,t);r.options.get("debug")&&window.console&&console.error&&(e&&e.results&&Array.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){"status"in e&&(0===e.status||"0"===e.status)||r.trigger("results:message",{message:"errorLoading"})});r._request=e}"function"==typeof i.url&&(i.url=i.url.call(this.$element,t)),"function"==typeof i.data&&(i.data=i.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),u.define("select2/data/tags",["jquery"],function(t){function e(e,t,n){var r=n.get("tags"),i=n.get("createTag");void 0!==i&&(this.createTag=i);i=n.get("insertTag");if(void 0!==i&&(this.insertTag=i),e.call(this,t,n),Array.isArray(r))for(var a=0;a<r.length;a++){var o=r[a],o=this._normalizeItem(o),o=this.option(o);this.$element.append(o)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,n){for(var r=t.results,i=0;i<r.length;i++){var a=r[i],o=null!=a.children&&!e({results:a.children},!0);if((a.text||"").toUpperCase()===(c.term||"").toUpperCase()||o)return!n&&(t.data=r,void u(t))}if(n)return!0;var s,l=d.createTag(c);null!=l&&((s=d.option(l)).attr("data-select2-tag","true"),d.addOptions([s]),d.insertTag(r,l)),t.results=r,u(t)}):e.call(this,c,u)},e.prototype.createTag=function(e,t){if(null==t.term)return null;t=t.term.trim();return""===t?null:{id:t,text:t}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each(function(){this.selected||t(this).remove()})},e}),u.define("select2/data/tokenizer",["jquery"],function(c){function e(e,t,n){var r=n.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var r=this;t.term=t.term||"";var i=this.tokenizer(t,this.options,function(e){var t=r._normalizeItem(e);r.$element.find("option").filter(function(){return c(this).val()===t.id}).length||((e=r.option(t)).attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([e])),r.trigger("select",{data:t})});i.term!==t.term&&(this.$search.length&&(this.$search.val(i.term),this.$search.trigger("focus")),t.term=i.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,r){for(var i=n.get("tokenSeparators")||[],a=t.term,o=0,s=this.createTag||function(e){return{id:e.term,text:e.term}};o<a.length;){var l=a[o];-1!==i.indexOf(l)?(l=a.substr(0,o),null!=(l=s(c.extend({},t,{term:l})))?(r(l),a=a.substr(o+1)||"",o=0):o++):o++}return{term:a}},e}),u.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),u.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),u.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(){r._checkIfMaximumSelected()})},e.prototype.query=function(e,t,n){var r=this;this._checkIfMaximumSelected(function(){e.call(r,t,n)})},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current(function(e){e=null!=e?e.length:0;0<n.maximumSelectionLength&&e>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()})},e}),u.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),u.define("select2/dropdown/search",["jquery"],function(a){function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("translations").get("search"),e=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=e,this.$search=e.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n()),t.prepend(e),t},e.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){a(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),t.on("open",function(){r.$search.attr("tabindex",0),r.$search.attr("aria-controls",i),r.$search.trigger("focus"),window.setTimeout(function(){r.$search.trigger("focus")},0)}),t.on("close",function(){r.$search.attr("tabindex",-1),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.val(""),r.$search.trigger("blur")}),t.on("focus",function(){t.isOpen()||r.$search.trigger("focus")}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer[0].classList.remove("select2-search--hide"):r.$searchContainer[0].classList.add("select2-search--hide"))}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")})},e.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},e.prototype.showSearch=function(e,t){return!0},e}),u.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),r=t.length-1;0<=r;r--){var i=t[r];this.placeholder.id===i.id&&n.splice(r,1)}return n},e}),u.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("query",function(e){r.lastParams=e,r.loading=!0}),t.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&(e=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=e+50&&this.loadMore())},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),u.define("select2/dropdown/attachBody",["jquery","../utils"],function(u,o){function e(e,t,n){this.$dropdownParent=u(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),r._bindContainerResultHandlers(t)}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=u("<span></span>"),e=e.call(this);return t.append(e),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){var n;this._containerResultsHandlersBound||(n=this,t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:message",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("select",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("unselect",function(){n._positionDropdown(),n._resizeDropdown()}),this._containerResultsHandlersBound=!0)},e.prototype._attachPositioningHandler=function(e,t){var n=this,r="scroll.select2."+t.id,i="resize.select2."+t.id,a="orientationchange.select2."+t.id,t=this.$container.parents().filter(o.hasScroll);t.each(function(){o.StoreData(this,"select2-scroll-position",{x:u(this).scrollLeft(),y:u(this).scrollTop()})}),t.on(r,function(e){var t=o.GetData(this,"select2-scroll-position");u(this).scrollTop(t.y)}),u(window).on(r+" "+i+" "+a,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,r="resize.select2."+t.id,t="orientationchange.select2."+t.id;this.$container.parents().filter(o.hasScroll).off(n),u(window).off(n+" "+r+" "+t)},e.prototype._positionDropdown=function(){var e=u(window),t=this.$dropdown[0].classList.contains("select2-dropdown--above"),n=this.$dropdown[0].classList.contains("select2-dropdown--below"),r=null,i=this.$container.offset();i.bottom=i.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=i.top,a.bottom=i.top+a.height;var o=this.$dropdown.outerHeight(!1),s=e.scrollTop(),l=e.scrollTop()+e.height(),c=s<i.top-o,e=l>i.bottom+o,s={left:i.left,top:a.bottom},l=this.$dropdownParent;"static"===l.css("position")&&(l=l.offsetParent());i={top:0,left:0};(u.contains(document.body,l[0])||l[0].isConnected)&&(i=l.offset()),s.top-=i.top,s.left-=i.left,t||n||(r="below"),e||!c||t?!c&&e&&t&&(r="below"):r="above",("above"==r||t&&"below"!==r)&&(s.top=a.top-i.top-o),null!=r&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+r),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+r)),this.$dropdownContainer.css(s)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),u.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,r)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,r=0;r<t.length;r++){var i=t[r];i.children?n+=e(i.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),u.define("select2/dropdown/selectOnClose",["../utils"],function(r){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(e){r._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}n=this.getHighlightedResults();n.length<1||(null!=(n=r.GetData(n[0],"data")).element&&n.element.selected||null==n.element&&n.selected||this.trigger("select",{data:n}))},e}),u.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),u.define("select2/dropdown/dropdownCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var t=e.call(this),e=this.options.get("dropdownCssClass")||"";return-1!==e.indexOf(":all:")&&(e=e.replace(":all:",""),n.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(e),t},e}),u.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(r){function e(){}return e.prototype.highlightFirstItem=function(e){var t=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(0<t.length){var n=t.first(),t=r.GetData(n[0],"data").element;if(t&&t.getAttribute&&"true"===t.getAttribute("data-select2-tag"))return void n.trigger("mouseenter")}e.call(this)},e}),u.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,e="Please delete "+t+" character";return 1!=t&&(e+="s"),e},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),u.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(l,a,o,s,c,u,d,h,f,p,m,t,g,_,y,v,b,x,w,T,A,k,M,S,E,C,L,D,O,P,e){function n(){this.reset()}return n.prototype.apply=function(e){var t;null==(e=l.extend(!0,{},this.defaults,e)).dataAdapter&&(null!=e.ajax?e.dataAdapter=y:null!=e.data?e.dataAdapter=_:e.dataAdapter=g,0<e.minimumInputLength&&(e.dataAdapter=p.Decorate(e.dataAdapter,x)),0<e.maximumInputLength&&(e.dataAdapter=p.Decorate(e.dataAdapter,w)),0<e.maximumSelectionLength&&(e.dataAdapter=p.Decorate(e.dataAdapter,T)),e.tags&&(e.dataAdapter=p.Decorate(e.dataAdapter,v)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=p.Decorate(e.dataAdapter,b))),null==e.resultsAdapter&&(e.resultsAdapter=a,null!=e.ajax&&(e.resultsAdapter=p.Decorate(e.resultsAdapter,S)),null!=e.placeholder&&(e.resultsAdapter=p.Decorate(e.resultsAdapter,M)),e.selectOnClose&&(e.resultsAdapter=p.Decorate(e.resultsAdapter,L)),e.tags&&(e.resultsAdapter=p.Decorate(e.resultsAdapter,P))),null==e.dropdownAdapter&&(e.multiple?e.dropdownAdapter=A:(t=p.Decorate(A,k),e.dropdownAdapter=t),0!==e.minimumResultsForSearch&&(e.dropdownAdapter=p.Decorate(e.dropdownAdapter,C)),e.closeOnSelect&&(e.dropdownAdapter=p.Decorate(e.dropdownAdapter,D)),null!=e.dropdownCssClass&&(e.dropdownAdapter=p.Decorate(e.dropdownAdapter,O)),e.dropdownAdapter=p.Decorate(e.dropdownAdapter,E)),null==e.selectionAdapter&&(e.multiple?e.selectionAdapter=s:e.selectionAdapter=o,null!=e.placeholder&&(e.selectionAdapter=p.Decorate(e.selectionAdapter,c)),e.allowClear&&(e.selectionAdapter=p.Decorate(e.selectionAdapter,u)),e.multiple&&(e.selectionAdapter=p.Decorate(e.selectionAdapter,d)),null!=e.selectionCssClass&&(e.selectionAdapter=p.Decorate(e.selectionAdapter,h)),e.selectionAdapter=p.Decorate(e.selectionAdapter,f)),e.language=this._resolveLanguage(e.language),e.language.push("en");for(var n=[],r=0;r<e.language.length;r++){var i=e.language[r];-1===n.indexOf(i)&&n.push(i)}return e.language=n,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function s(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:p.escapeMarkup,language:{},matcher:function e(t,n){if(null==t.term||""===t.term.trim())return n;if(n.children&&0<n.children.length){for(var r=l.extend(!0,{},n),i=n.children.length-1;0<=i;i--)null==e(t,n.children[i])&&r.children.splice(i,1);return 0<r.children.length?r:e(t,r)}var a=s(n.text).toUpperCase(),o=s(t.term).toUpperCase();return-1<a.indexOf(o)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,r=this.defaults.language,i=t.prop("lang"),t=t.closest("[lang]").prop("lang"),t=Array.prototype.concat.call(this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(t));return e.language=t,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(l.isEmptyObject(e))return[];if(l.isPlainObject(e))return[e];for(var t,n=Array.isArray(e)?e:[e],r=[],i=0;i<n.length;i++)r.push(n[i]),"string"==typeof n[i]&&0<n[i].indexOf("-")&&(t=n[i].split("-")[0],r.push(t));return r},n.prototype._processTranslations=function(e,t){for(var n=new m,r=0;r<e.length;r++){var i=new m,a=e[r];if("string"==typeof a)try{i=m.loadPath(a)}catch(e){try{a=this.defaults.amdLanguageBase+a,i=m.loadPath(a)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+a+'" could not be automatically loaded. A fallback will be used instead.')}}else i=l.isPlainObject(a)?new m(a):a;n.extend(i)}return n},n.prototype.set=function(e,t){var n={};n[l.camelCase(e)]=t;n=p._convertData(n);l.extend(!0,this.defaults,n)},new n}),u.define("select2/options",["jquery","./defaults","./utils"],function(c,n,u){function e(e,t){this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=n.applyFromElement(this.options,t)),this.options=n.apply(this.options)}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.autocomplete&&e.prop("autocomplete")&&(this.options.autocomplete=e.prop("autocomplete")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),u.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),u.StoreData(e[0],"data",u.GetData(e[0],"select2Tags")),u.StoreData(e[0],"tags",!0)),u.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",u.GetData(e[0],"ajaxUrl")),u.StoreData(e[0],"ajax-Url",u.GetData(e[0],"ajaxUrl")));var n={};function r(e,t){return t.toUpperCase()}for(var i=0;i<e[0].attributes.length;i++){var a,o=e[0].attributes[i].name;"data-"==o.substr(0,"data-".length)&&(a=o.substring("data-".length),o=u.GetData(e[0],a),n[a.replace(/-([a-z])/g,r)]=o)}c.fn.jquery&&"1."==c.fn.jquery.substr(0,2)&&e[0].dataset&&(n=c.extend(!0,{},e[0].dataset,n));var s,l=c.extend(!0,{},u.GetData(e[0]),n);for(s in l=u._convertData(l))-1<t.indexOf(s)||(c.isPlainObject(this.options[s])?c.extend(this.options[s],l[s]):this.options[s]=l[s]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),u.define("select2/core",["jquery","./options","./utils","./keys"],function(t,i,a,r){var o=function(e,t){null!=a.GetData(e[0],"select2")&&a.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new i(t=t||{},e),o.__super__.constructor.call(this);var n=e.attr("tabindex")||0;a.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1");t=this.options.get("dataAdapter");this.dataAdapter=new t(e,this.options);n=this.render();this._placeContainer(n);t=this.options.get("selectionAdapter");this.selection=new t(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,n);t=this.options.get("dropdownAdapter");this.dropdown=new t(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,n);n=this.options.get("resultsAdapter");this.results=new n(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var r=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})}),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),a.StoreData(e[0],"select2",this),e.data("select2",this)};return a.Extend(o,a.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+a.generateChars(2):a.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var r=this._resolveWidth(e,"style");return null!=r?r:this._resolveWidth(e,"element")}if("element"==t){r=e.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;e=e.attr("style");if("string"!=typeof e)return null;for(var i=e.split(";"),a=0,o=i.length;a<o;a+=1){var s=i[a].replace(/\s/g,"").match(n);if(null!==s&&1<=s.length)return s[1]}return null},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=a.bind(this._syncAttributes,this),this._syncS=a.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(e){t._syncA(),t._syncS(e)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerSelectionEvents=function(){var n=this,r=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===r.indexOf(e)&&n.trigger(e,t)})},o.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container[0].classList.add("select2-container--open")}),this.on("close",function(){n.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){n.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){n.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){n.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===r.ESC||t===r.UP&&e.altKey?(n.close(e),e.preventDefault()):t===r.ENTER||t===r.TAB?(n.trigger("results:select",{}),e.preventDefault()):t===r.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===r.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===r.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===r.ENTER||t===r.SPACE||t===r.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&0<e.addedNodes.length){for(var n=0;n<e.addedNodes.length;n++)if(e.addedNodes[n].selected)return!0}else{if(e.removedNodes&&0<e.removedNodes.length)return!0;if(Array.isArray(e))return e.some(function(e){return t._isChangeMutation(e)})}return!1},o.prototype._syncSubtree=function(e){var e=this._isChangeMutation(e),t=this;e&&this.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in r){var i={prevented:!1,name:e,args:t};if(n.call(this,r[e],i),i.prevented)return void(t.prevented=!0)}n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');e=!(e=null==e||0===e.length?[!0]:e)[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();e=e[0];Array.isArray(e)&&(e=e.map(function(e){return e.toString()})),this.$element.val(e).trigger("input").trigger("change")},o.prototype.destroy=function(){a.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",a.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),a.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),a.StoreData(e[0],"element",this.$element),e},o}),u.define("jquery-mousewheel",["jquery"],function(e){return e}),u.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(i,e,a,t,o){var s;return null==i.fn.select2&&(s=["open","close","destroy"],i.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=i.extend(!0,{},t);new a(i(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,r)}),-1<s.indexOf(t)?this:n}),null==i.fn.select2.defaults&&(i.fn.select2.defaults=t),a}),{define:u.define,require:u.require});function b(e,t){return i.call(e,t)}function l(e,t){var n,r,i,a,o,s,l,c,u,d,h=t&&t.split("/"),f=_.map,p=f&&f["*"]||{};if(e){for(t=(e=e.split("/")).length-1,_.nodeIdCompat&&v.test(e[t])&&(e[t]=e[t].replace(v,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),c=0;c<e.length;c++)"."===(d=e[c])?(e.splice(c,1),--c):".."===d&&(0===c||1===c&&".."===e[2]||".."===e[c-1]||0<c&&(e.splice(c-1,2),c-=2));e=e.join("/")}if((h||p)&&f){for(c=(n=e.split("/")).length;0<c;--c){if(r=n.slice(0,c).join("/"),h)for(u=h.length;0<u;--u)if(i=(i=f[h.slice(0,u).join("/")])&&i[r]){a=i,o=c;break}if(a)break;!s&&p&&p[r]&&(s=p[r],l=c)}!a&&s&&(a=s,o=l),a&&(n.splice(0,o,a),e=n.join("/"))}return e}function x(t,n){return function(){var e=s.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),o.apply(h,e.concat([t,n]))}}function w(e){var t;if(b(g,e)&&(t=g[e],delete g[e],y[e]=!0,a.apply(h,t)),!b(m,e)&&!b(y,e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function T(e){return e?c(e):[]}var u=r.require("jquery.select2");return t.fn.select2.amd=r,u});